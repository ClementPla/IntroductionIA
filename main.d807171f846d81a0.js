(self.webpackChunkpersonal_website=self.webpackChunkpersonal_website||[]).push([[179],{957:(Tp,x,ue)=>{"use strict";function le(r){return"function"==typeof r}function y(r){const n=r(k=>{Error.call(k),k.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const b=y(r=>function(n){r(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((k,V)=>`${V+1}) ${k.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function T(r,t){if(r){const n=r.indexOf(t);0<=n&&r.splice(n,1)}}class _{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const ie of n)ie.remove(this);else n.remove(this);const{initialTeardown:k}=this;if(le(k))try{k()}catch(ie){t=ie instanceof b?ie.errors:[ie]}const{_finalizers:V}=this;if(V){this._finalizers=null;for(const ie of V)try{a(ie)}catch(ge){t=null!=t?t:[],ge instanceof b?t=[...t,...ge.errors]:t.push(ge)}}if(t)throw new b(t)}}add(t){var n;if(t&&t!==this)if(this.closed)a(t);else{if(t instanceof _){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&T(n,t)}remove(t){const{_finalizers:n}=this;n&&T(n,t),t instanceof _&&t._removeParent(this)}}_.EMPTY=(()=>{const r=new _;return r.closed=!0,r})();const e=_.EMPTY;function o(r){return r instanceof _||r&&"closed"in r&&le(r.remove)&&le(r.add)&&le(r.unsubscribe)}function a(r){le(r)?r():r.unsubscribe()}const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},i={setTimeout(r,t,...n){const{delegate:k}=i;return(null==k?void 0:k.setTimeout)?k.setTimeout(r,t,...n):setTimeout(r,t,...n)},clearTimeout(r){const{delegate:t}=i;return((null==t?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function v(r){i.setTimeout(()=>{const{onUnhandledError:t}=l;if(!t)throw r;t(r)})}function h(){}const s=f("C",void 0,void 0);function f(r,t,n){return{kind:r,value:t,error:n}}let g=null;function m(r){if(l.useDeprecatedSynchronousErrorHandling){const t=!g;if(t&&(g={errorThrown:!1,error:null}),r(),t){const{errorThrown:n,error:k}=g;if(g=null,n)throw k}}else r()}class w extends _{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,o(t)&&t.add(this)):this.destination=N}static create(t,n,k){return new S(t,n,k)}next(t){this.isStopped?I(function p(r){return f("N",r,void 0)}(t),this):this._next(t)}error(t){this.isStopped?I(function d(r){return f("E",void 0,r)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?I(s,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const c=Function.prototype.bind;function E(r,t){return c.call(r,t)}class M{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(k){C(k)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(k){C(k)}else C(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){C(n)}}}class S extends w{constructor(t,n,k){let V;if(super(),le(t)||!t)V={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=k?k:void 0};else{let ie;this&&l.useDeprecatedNextContext?(ie=Object.create(t),ie.unsubscribe=()=>this.unsubscribe(),V={next:t.next&&E(t.next,ie),error:t.error&&E(t.error,ie),complete:t.complete&&E(t.complete,ie)}):V=t}this.destination=new M(V)}}function C(r){l.useDeprecatedSynchronousErrorHandling?function u(r){l.useDeprecatedSynchronousErrorHandling&&g&&(g.errorThrown=!0,g.error=r)}(r):v(r)}function I(r,t){const{onStoppedNotification:n}=l;n&&i.setTimeout(()=>n(r,t))}const N={closed:!0,next:h,error:function O(r){throw r},complete:h},F="function"==typeof Symbol&&Symbol.observable||"@@observable";function L(r){return r}let U=(()=>{class r{constructor(n){n&&(this._subscribe=n)}lift(n){const k=new r;return k.source=this,k.operator=n,k}subscribe(n,k,V){const ie=function te(r){return r&&r instanceof w||function X(r){return r&&le(r.next)&&le(r.error)&&le(r.complete)}(r)&&o(r)}(n)?n:new S(n,k,V);return m(()=>{const{operator:ge,source:ke}=this;ie.add(ge?ge.call(ie,ke):ke?this._subscribe(ie):this._trySubscribe(ie))}),ie}_trySubscribe(n){try{return this._subscribe(n)}catch(k){n.error(k)}}forEach(n,k){return new(k=$(k))((V,ie)=>{const ge=new S({next:ke=>{try{n(ke)}catch(Ue){ie(Ue),ge.unsubscribe()}},error:ie,complete:V});this.subscribe(ge)})}_subscribe(n){var k;return null===(k=this.source)||void 0===k?void 0:k.subscribe(n)}[F](){return this}pipe(...n){return function j(r){return 0===r.length?L:1===r.length?r[0]:function(n){return r.reduce((k,V)=>V(k),n)}}(n)(this)}toPromise(n){return new(n=$(n))((k,V)=>{let ie;this.subscribe(ge=>ie=ge,ge=>V(ge),()=>k(ie))})}}return r.create=t=>new r(t),r})();function $(r){var t;return null!==(t=null!=r?r:l.Promise)&&void 0!==t?t:Promise}const ae=y(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let J=(()=>{class r extends U{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const k=new ee(this,this);return k.operator=n,k}_throwIfClosed(){if(this.closed)throw new ae}next(n){m(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const k of this.currentObservers)k.next(n)}})}error(n){m(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:k}=this;for(;k.length;)k.shift().error(n)}})}complete(){m(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:k,isStopped:V,observers:ie}=this;return k||V?e:(this.currentObservers=null,ie.push(n),new _(()=>{this.currentObservers=null,T(ie,n)}))}_checkFinalizedStatuses(n){const{hasError:k,thrownError:V,isStopped:ie}=this;k?n.error(V):ie&&n.complete()}asObservable(){const n=new U;return n.source=this,n}}return r.create=(t,n)=>new ee(t,n),r})();class ee extends J{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,k;null===(k=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===k||k.call(n,t)}error(t){var n,k;null===(k=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===k||k.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,k;return null!==(k=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==k?k:e}}function se(r){return le(null==r?void 0:r.lift)}function G(r){return t=>{if(se(t))return t.lift(function(n){try{return r(n,this)}catch(k){this.error(k)}});throw new TypeError("Unable to lift unknown Observable type")}}function H(r,t,n,k,V){return new Y(r,t,n,k,V)}class Y extends w{constructor(t,n,k,V,ie,ge){super(t),this.onFinalize=ie,this.shouldUnsubscribe=ge,this._next=n?function(ke){try{n(ke)}catch(Ue){t.error(Ue)}}:super._next,this._error=V?function(ke){try{V(ke)}catch(Ue){t.error(Ue)}finally{this.unsubscribe()}}:super._error,this._complete=k?function(){try{k()}catch(ke){t.error(ke)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function oe(r,t){return G((n,k)=>{let V=0;n.subscribe(H(k,ie=>{k.next(r.call(t,ie,V++))}))})}function we(r,t,n,k){return new(n||(n=Promise))(function(ie,ge){function ke(yt){try{et(k.next(yt))}catch(Ht){ge(Ht)}}function Ue(yt){try{et(k.throw(yt))}catch(Ht){ge(Ht)}}function et(yt){yt.done?ie(yt.value):function V(ie){return ie instanceof n?ie:new n(function(ge){ge(ie)})}(yt.value).then(ke,Ue)}et((k=k.apply(r,t||[])).next())})}function Fe(r){return this instanceof Fe?(this.v=r,this):new Fe(r)}function Pe(r,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var V,k=n.apply(r,t||[]),ie=[];return V={},ge("next"),ge("throw"),ge("return"),V[Symbol.asyncIterator]=function(){return this},V;function ge(mn){k[mn]&&(V[mn]=function(In){return new Promise(function(Kn,xr){ie.push([mn,In,Kn,xr])>1||ke(mn,In)})})}function ke(mn,In){try{!function Ue(mn){mn.value instanceof Fe?Promise.resolve(mn.value.v).then(et,yt):Ht(ie[0][2],mn)}(k[mn](In))}catch(Kn){Ht(ie[0][3],Kn)}}function et(mn){ke("next",mn)}function yt(mn){ke("throw",mn)}function Ht(mn,In){mn(In),ie.shift(),ie.length&&ke(ie[0][0],ie[0][1])}}function qe(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=r[Symbol.asyncIterator];return t?t.call(r):(r=function Oe(r){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&r[t],k=0;if(n)return n.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&k>=r.length&&(r=void 0),{value:r&&r[k++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),n={},k("next"),k("throw"),k("return"),n[Symbol.asyncIterator]=function(){return this},n);function k(ie){n[ie]=r[ie]&&function(ge){return new Promise(function(ke,Ue){!function V(ie,ge,ke,Ue){Promise.resolve(Ue).then(function(et){ie({value:et,done:ke})},ge)}(ke,Ue,(ge=r[ie](ge)).done,ge.value)})}}}const ht=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function Tt(r){return le(null==r?void 0:r.then)}function Ct(r){return le(r[F])}function Vt(r){return Symbol.asyncIterator&&le(null==r?void 0:r[Symbol.asyncIterator])}function Ft(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ft=function gt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Bt(r){return le(null==r?void 0:r[ft])}function rn(r){return Pe(this,arguments,function*(){const n=r.getReader();try{for(;;){const{value:k,done:V}=yield Fe(n.read());if(V)return yield Fe(void 0);yield yield Fe(k)}}finally{n.releaseLock()}})}function un(r){return le(null==r?void 0:r.getReader)}function pn(r){if(r instanceof U)return r;if(null!=r){if(Ct(r))return function dn(r){return new U(t=>{const n=r[F]();if(le(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(ht(r))return function Mn(r){return new U(t=>{for(let n=0;n<r.length&&!t.closed;n++)t.next(r[n]);t.complete()})}(r);if(Tt(r))return function ln(r){return new U(t=>{r.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,v)})}(r);if(Vt(r))return De(r);if(Bt(r))return function Ee(r){return new U(t=>{for(const n of r)if(t.next(n),t.closed)return;t.complete()})}(r);if(un(r))return function Ie(r){return De(rn(r))}(r)}throw Ft(r)}function De(r){return new U(t=>{(function He(r,t){var n,k,V,ie;return we(this,void 0,void 0,function*(){try{for(n=qe(r);!(k=yield n.next()).done;)if(t.next(k.value),t.closed)return}catch(ge){V={error:ge}}finally{try{k&&!k.done&&(ie=n.return)&&(yield ie.call(n))}finally{if(V)throw V.error}}t.complete()})})(r,t).catch(n=>t.error(n))})}function Ye(r,t,n,k=0,V=!1){const ie=t.schedule(function(){n(),V?r.add(this.schedule(null,k)):this.unsubscribe()},k);if(r.add(ie),!V)return ie}function ot(r,t,n=1/0){return le(t)?ot((k,V)=>oe((ie,ge)=>t(k,ie,V,ge))(pn(r(k,V))),n):("number"==typeof t&&(n=t),G((k,V)=>function tt(r,t,n,k,V,ie,ge,ke){const Ue=[];let et=0,yt=0,Ht=!1;const mn=()=>{Ht&&!Ue.length&&!et&&t.complete()},In=xr=>et<k?Kn(xr):Ue.push(xr),Kn=xr=>{ie&&t.next(xr),et++;let Kr=!1;pn(n(xr,yt++)).subscribe(H(t,ui=>{null==V||V(ui),ie?In(ui):t.next(ui)},()=>{Kr=!0},void 0,()=>{if(Kr)try{for(et--;Ue.length&&et<k;){const ui=Ue.shift();ge?Ye(t,ge,()=>Kn(ui)):Kn(ui)}mn()}catch(ui){t.error(ui)}}))};return r.subscribe(H(t,In,()=>{Ht=!0,mn()})),()=>{null==ke||ke()}}(k,V,r,n)))}function st(r=1/0){return ot(L,r)}const bt=new U(r=>r.complete());function vt(r){return r[r.length-1]}function $t(r){return function Kt(r){return r&&le(r.schedule)}(vt(r))?r.pop():void 0}function Pt(r,t=0){return G((n,k)=>{n.subscribe(H(k,V=>Ye(k,r,()=>k.next(V),t),()=>Ye(k,r,()=>k.complete(),t),V=>Ye(k,r,()=>k.error(V),t)))})}function je(r,t=0){return G((n,k)=>{k.add(r.schedule(()=>n.subscribe(k),t))})}function Qt(r,t){if(!r)throw new Error("Iterable cannot be null");return new U(n=>{Ye(n,t,()=>{const k=r[Symbol.asyncIterator]();Ye(n,t,()=>{k.next().then(V=>{V.done?n.complete():n.next(V.value)})},0,!0)})})}function Sn(r,t){return t?function an(r,t){if(null!=r){if(Ct(r))return function rt(r,t){return pn(r).pipe(je(t),Pt(t))}(r,t);if(ht(r))return function It(r,t){return new U(n=>{let k=0;return t.schedule(function(){k===r.length?n.complete():(n.next(r[k++]),n.closed||this.schedule())})})}(r,t);if(Tt(r))return function pt(r,t){return pn(r).pipe(je(t),Pt(t))}(r,t);if(Vt(r))return Qt(r,t);if(Bt(r))return function jt(r,t){return new U(n=>{let k;return Ye(n,t,()=>{k=r[ft](),Ye(n,t,()=>{let V,ie;try{({value:V,done:ie}=k.next())}catch(ge){return void n.error(ge)}ie?n.complete():n.next(V)},0,!0)}),()=>le(null==k?void 0:k.return)&&k.return()})}(r,t);if(un(r))return function fn(r,t){return Qt(rn(r),t)}(r,t)}throw Ft(r)}(r,t):pn(r)}function kn(r){return r<=0?()=>bt:G((t,n)=>{let k=0;t.subscribe(H(n,V=>{++k<=r&&(n.next(V),r<=k&&n.complete())}))})}function vn(r,t,...n){return!0===t?(r(),null):!1===t?null:t(...n).pipe(kn(1)).subscribe(()=>r())}function hn(r){for(let t in r)if(r[t]===hn)return t;throw Error("Could not find renamed property on target object.")}function Dn(r,t){for(const n in t)t.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(r[n]=t[n])}function Pn(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Pn).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function $n(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const rr=hn({__forward_ref__:hn});function er(r){return r.__forward_ref__=er,r.toString=function(){return Pn(this())},r}function or(r){return function Zr(r){return"function"==typeof r&&r.hasOwnProperty(rr)&&r.__forward_ref__===er}(r)?r():r}class pr extends Error{constructor(t,n){super(function Br(r,t){return`NG0${Math.abs(r)}${t?": "+t:""}`}(t,n)),this.code=t}}function fr(r){return"string"==typeof r?r:null==r?"":String(r)}function Nr(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():fr(r)}function kr(r,t){const n=t?` in ${t}`:"";throw new pr(-201,`No provider for ${Nr(r)} found${n}`)}function Hn(r,t){null==r&&function Bn(r,t,n,k){throw new Error(`ASSERTION ERROR: ${r}`+(null==k?"":` [Expected=> ${n} ${k} ${t} <=Actual]`))}(t,r,null,"!=")}function On(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function ir(r){return{providers:r.providers||[],imports:r.imports||[]}}function br(r){return Tr(r,Xr)||Tr(r,_i)}function Tr(r,t){return r.hasOwnProperty(t)?r[t]:null}function Ur(r){return r&&(r.hasOwnProperty(ri)||r.hasOwnProperty(ra))?r[ri]:null}const Xr=hn({\u0275prov:hn}),ri=hn({\u0275inj:hn}),_i=hn({ngInjectableDef:hn}),ra=hn({ngInjectorDef:hn});var hi=(()=>((hi=hi||{})[hi.Default=0]="Default",hi[hi.Host=1]="Host",hi[hi.Self=2]="Self",hi[hi.SkipSelf=4]="SkipSelf",hi[hi.Optional=8]="Optional",hi))();let Gr;function vi(r){const t=Gr;return Gr=r,t}function _a(r,t,n){const k=br(r);return k&&"root"==k.providedIn?void 0===k.value?k.value=k.factory():k.value:n&hi.Optional?null:void 0!==t?t:void kr(Pn(r),"Injector")}function oo(r){return{toString:r}.toString()}var yo=(()=>((yo=yo||{})[yo.OnPush=0]="OnPush",yo[yo.Default=1]="Default",yo))(),ho=(()=>{return(r=ho||(ho={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",ho;var r})();const ka="undefined"!=typeof globalThis&&globalThis,ds="undefined"!=typeof window&&window,Ts="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pa=ka||"undefined"!=typeof global&&global||ds||Ts,wo={},ia=[],qo=hn({\u0275cmp:hn}),jl=hn({\u0275dir:hn}),Yl=hn({\u0275pipe:hn}),Fa=hn({\u0275mod:hn}),Ms=hn({\u0275fac:hn}),Hs=hn({__NG_ELEMENT_ID__:hn});let pu=0;function Fs(r){return oo(()=>{const n={},k={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===yo.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||ia,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||ho.Emulated,id:"c",styles:r.styles||ia,_:null,setInput:null,schemas:r.schemas||null,tView:null},V=r.directives,ie=r.features,ge=r.pipes;return k.id+=pu++,k.inputs=$s(r.inputs,n),k.outputs=$s(r.outputs),ie&&ie.forEach(ke=>ke(k)),k.directiveDefs=V?()=>("function"==typeof V?V():V).map(ru):null,k.pipeDefs=ge?()=>("function"==typeof ge?ge():ge).map(Ns):null,k})}function ru(r){return Ho(r)||function Po(r){return r[jl]||null}(r)}function Ns(r){return function os(r){return r[Yl]||null}(r)}const zs={};function no(r){return oo(()=>{const t={type:r.type,bootstrap:r.bootstrap||ia,declarations:r.declarations||ia,imports:r.imports||ia,exports:r.exports||ia,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(zs[r.id]=r.type),t})}function $s(r,t){if(null==r)return wo;const n={};for(const k in r)if(r.hasOwnProperty(k)){let V=r[k],ie=V;Array.isArray(V)&&(ie=V[1],V=V[0]),n[V]=k,t&&(t[V]=ie)}return n}const Wi=Fs;function Ho(r){return r[qo]||null}function ns(r,t){const n=r[Fa]||null;if(!n&&!0===t)throw new Error(`Type ${Pn(r)} does not have '\u0275mod' property.`);return n}function Da(r){return Array.isArray(r)&&"object"==typeof r[1]}function Ea(r){return Array.isArray(r)&&!0===r[1]}function bo(r){return 0!=(8&r.flags)}function Ro(r){return 2==(2&r.flags)}function Go(r){return 1==(1&r.flags)}function po(r){return null!==r.template}function ss(r){return 0!=(512&r[2])}function ii(r,t){return r.hasOwnProperty(Ms)?r[Ms]:null}class ki{constructor(t,n,k){this.previousValue=t,this.currentValue=n,this.firstChange=k}isFirstChange(){return this.firstChange}}function Vi(){return ha}function ha(r){return r.type.prototype.ngOnChanges&&(r.setInput=wa),$r}function $r(){const r=Ui(this),t=null==r?void 0:r.current;if(t){const n=r.previous;if(n===wo)r.previous=t;else for(let k in t)n[k]=t[k];r.current=null,this.ngOnChanges(t)}}function wa(r,t,n,k){const V=Ui(r)||function Ta(r,t){return r[ua]=t}(r,{previous:wo,current:null}),ie=V.current||(V.current={}),ge=V.previous,ke=this.declaredInputs[n],Ue=ge[ke];ie[ke]=new ki(Ue&&Ue.currentValue,t,ge===wo),r[k]=t}Vi.ngInherit=!0;const ua="__ngSimpleChanges__";function Ui(r){return r[ua]||null}let Yi;function ga(r){return!!r.listen}const Yo={createRenderer:(r,t)=>function ls(){return void 0!==Yi?Yi:"undefined"!=typeof document?document:void 0}()};function Na(r){for(;Array.isArray(r);)r=r[0];return r}function sl(r,t){return Na(t[r])}function Zo(r,t){return Na(t[r.index])}function Fo(r,t){return r.data[t]}function Wa(r,t){const n=t[r];return Da(n)?n:n[0]}function Ml(r){return 4==(4&r[2])}function Oi(r){return 128==(128&r[2])}function ll(r,t){return null==t?null:r[t]}function gu(r){r[18]=0}function ul(r,t){r[5]+=t;let n=r,k=r[3];for(;null!==k&&(1===t&&1===n[5]||-1===t&&0===n[5]);)k[5]+=t,n=k,k=k[3]}const Zi={lFrame:Nt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xa(){return Zi.bindingsEnabled}function qr(){return Zi.lFrame.lView}function Sa(){return Zi.lFrame.tView}function Io(){let r=iu();for(;null!==r&&64===r.type;)r=r.parent;return r}function iu(){return Zi.lFrame.currentTNode}function cl(r,t){const n=Zi.lFrame;n.currentTNode=r,n.isParent=t}function Zu(){return Zi.lFrame.isParent}function Pl(){Zi.lFrame.isParent=!1}function Xo(){return Zi.isInCheckNoChangesMode}function Lu(r){Zi.isInCheckNoChangesMode=r}function B(){return Zi.lFrame.bindingIndex++}function be(r,t){const n=Zi.lFrame;n.bindingIndex=n.bindingRootIndex=r,Ce(t)}function Ce(r){Zi.lFrame.currentDirectiveIndex=r}function $e(){return Zi.lFrame.currentQueryIndex}function at(r){Zi.lFrame.currentQueryIndex=r}function dt(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Ot(r,t,n){if(n&hi.SkipSelf){let V=t,ie=r;for(;!(V=V.parent,null!==V||n&hi.Host||(V=dt(ie),null===V||(ie=ie[15],10&V.type))););if(null===V)return!1;t=V,r=ie}const k=Zi.lFrame=Rt();return k.currentTNode=t,k.lView=r,!0}function zt(r){const t=Rt(),n=r[1];Zi.lFrame=t,t.currentTNode=n.firstChild,t.lView=r,t.tView=n,t.contextLView=r,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Rt(){const r=Zi.lFrame,t=null===r?null:r.child;return null===t?Nt(r):t}function Nt(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function Lt(){const r=Zi.lFrame;return Zi.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Yt=Lt;function Gt(){const r=Lt();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function En(){return Zi.lFrame.selectedIndex}function Un(r){Zi.lFrame.selectedIndex=r}function Nn(){const r=Zi.lFrame;return Fo(r.tView,r.selectedIndex)}function Fi(r,t){for(let n=t.directiveStart,k=t.directiveEnd;n<k;n++){const ie=r.data[n].type.prototype,{ngAfterContentInit:ge,ngAfterContentChecked:ke,ngAfterViewInit:Ue,ngAfterViewChecked:et,ngOnDestroy:yt}=ie;ge&&(r.contentHooks||(r.contentHooks=[])).push(-n,ge),ke&&((r.contentHooks||(r.contentHooks=[])).push(n,ke),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(n,ke)),Ue&&(r.viewHooks||(r.viewHooks=[])).push(-n,Ue),et&&((r.viewHooks||(r.viewHooks=[])).push(n,et),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(n,et)),null!=yt&&(r.destroyHooks||(r.destroyHooks=[])).push(n,yt)}}function ur(r,t,n){mi(r,t,3,n)}function Hr(r,t,n,k){(3&r[2])===n&&mi(r,t,n,k)}function bi(r,t){let n=r[2];(3&n)===t&&(n&=2047,n+=1,r[2]=n)}function mi(r,t,n,k){const ie=null!=k?k:-1,ge=t.length-1;let ke=0;for(let Ue=void 0!==k?65535&r[18]:0;Ue<ge;Ue++)if("number"==typeof t[Ue+1]){if(ke=t[Ue],null!=k&&ke>=k)break}else t[Ue]<0&&(r[18]+=65536),(ke<ie||-1==ie)&&(Si(r,n,t,Ue),r[18]=(4294901760&r[18])+Ue+2),Ue++}function Si(r,t,n,k){const V=n[k]<0,ie=n[k+1],ke=r[V?-n[k]:n[k]];if(V){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{ie.call(ke)}finally{}}}else try{ie.call(ke)}finally{}}class na{constructor(t,n,k){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=k}}function Ao(r,t,n){const k=ga(r);let V=0;for(;V<n.length;){const ie=n[V];if("number"==typeof ie){if(0!==ie)break;V++;const ge=n[V++],ke=n[V++],Ue=n[V++];k?r.setAttribute(t,ke,Ue,ge):t.setAttributeNS(ge,ke,Ue)}else{const ge=ie,ke=n[++V];ro(ge)?k&&r.setProperty(t,ge,ke):k?r.setAttribute(t,ge,ke):t.setAttribute(ge,ke),V++}}return V}function No(r){return 3===r||4===r||6===r}function ro(r){return 64===r.charCodeAt(0)}function _o(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let n=-1;for(let k=0;k<t.length;k++){const V=t[k];"number"==typeof V?n=V:0===n||xo(r,n,V,null,-1===n||2===n?t[++k]:null)}}return r}function xo(r,t,n,k,V){let ie=0,ge=r.length;if(-1===t)ge=-1;else for(;ie<r.length;){const ke=r[ie++];if("number"==typeof ke){if(ke===t){ge=-1;break}if(ke>t){ge=ie-1;break}}}for(;ie<r.length;){const ke=r[ie];if("number"==typeof ke)break;if(ke===n){if(null===k)return void(null!==V&&(r[ie+1]=V));if(k===r[ie+1])return void(r[ie+2]=V)}ie++,null!==k&&ie++,null!==V&&ie++}-1!==ge&&(r.splice(ge,0,t),ie=ge+1),r.splice(ie++,0,n),null!==k&&r.splice(ie++,0,k),null!==V&&r.splice(ie++,0,V)}function vs(r){return-1!==r}function Lo(r){return 32767&r}function fl(r,t){let n=function el(r){return r>>16}(r),k=t;for(;n>0;)k=k[15],n--;return k}let au=!0;function Pu(r){const t=au;return au=r,t}let $u=0;function qs(r,t){const n=ko(r,t);if(-1!==n)return n;const k=t[1];k.firstCreatePass&&(r.injectorIndex=t.length,Ku(k.data,r),Ku(t,null),Ku(k.blueprint,null));const V=bs(r,t),ie=r.injectorIndex;if(vs(V)){const ge=Lo(V),ke=fl(V,t),Ue=ke[1].data;for(let et=0;et<8;et++)t[ie+et]=ke[ge+et]|Ue[ge+et]}return t[ie+8]=V,ie}function Ku(r,t){r.push(0,0,0,0,0,0,0,0,t)}function ko(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function bs(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let n=0,k=null,V=t;for(;null!==V;){const ie=V[1],ge=ie.type;if(k=2===ge?ie.declTNode:1===ge?V[6]:null,null===k)return-1;if(n++,V=V[15],-1!==k.injectorIndex)return k.injectorIndex|n<<16}return-1}function _s(r,t,n){!function Bc(r,t,n){let k;"string"==typeof n?k=n.charCodeAt(0)||0:n.hasOwnProperty(Hs)&&(k=n[Hs]),null==k&&(k=n[Hs]=$u++);const V=255&k;t.data[r+(V>>5)]|=1<<V}(r,t,n)}function Qh(r,t,n){if(n&hi.Optional)return r;kr(t,"NodeInjector")}function hl(r,t,n,k){if(n&hi.Optional&&void 0===k&&(k=null),0==(n&(hi.Self|hi.Host))){const V=r[9],ie=vi(void 0);try{return V?V.get(t,k,n&hi.Optional):_a(t,k,n&hi.Optional)}finally{vi(ie)}}return Qh(k,t,n)}function Mf(r,t,n,k=hi.Default,V){if(null!==r){const ie=function mc(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(Hs)?r[Hs]:void 0;return"number"==typeof t?t>=0?255&t:Mp:t}(n);if("function"==typeof ie){if(!Ot(t,r,k))return k&hi.Host?Qh(V,n,k):hl(t,n,k,V);try{const ge=ie(k);if(null!=ge||k&hi.Optional)return ge;kr(n)}finally{Yt()}}else if("number"==typeof ie){let ge=null,ke=ko(r,t),Ue=-1,et=k&hi.Host?t[16][6]:null;for((-1===ke||k&hi.SkipSelf)&&(Ue=-1===ke?bs(r,t):t[ke+8],-1!==Ue&&ag(k,!1)?(ge=t[1],ke=Lo(Ue),t=fl(Ue,t)):ke=-1);-1!==ke;){const yt=t[1];if(ig(ie,ke,yt.data)){const Ht=Ou(ke,t,n,ge,k,et);if(Ht!==gc)return Ht}Ue=t[ke+8],-1!==Ue&&ag(k,t[1].data[ke+8]===et)&&ig(ie,ke,t)?(ge=yt,ke=Lo(Ue),t=fl(Ue,t)):ke=-1}}}return hl(t,n,k,V)}const gc={};function Mp(){return new Vc(Io(),qr())}function Ou(r,t,n,k,V,ie){const ge=t[1],ke=ge.data[r+8],yt=Af(ke,ge,n,null==k?Ro(ke)&&au:k!=ge&&0!=(3&ke.type),V&hi.Host&&ie===ke);return null!==yt?jc(t,ge,yt,ke):gc}function Af(r,t,n,k,V){const ie=r.providerIndexes,ge=t.data,ke=1048575&ie,Ue=r.directiveStart,yt=ie>>20,mn=V?ke+yt:r.directiveEnd;for(let In=k?ke:ke+yt;In<mn;In++){const Kn=ge[In];if(In<Ue&&n===Kn||In>=Ue&&Kn.type===n)return In}if(V){const In=ge[Ue];if(In&&po(In)&&In.type===n)return Ue}return null}function jc(r,t,n,k){let V=r[n];const ie=t.data;if(function Ai(r){return r instanceof na}(V)){const ge=V;ge.resolving&&function xi(r,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${r}`:"";throw new pr(-200,`Circular dependency in DI detected for ${r}${n}`)}(Nr(ie[n]));const ke=Pu(ge.canSeeViewProviders);ge.resolving=!0;const Ue=ge.injectImpl?vi(ge.injectImpl):null;Ot(r,k,hi.Default);try{V=r[n]=ge.factory(void 0,ie,r,k),t.firstCreatePass&&n>=k.directiveStart&&function wi(r,t,n){const{ngOnChanges:k,ngOnInit:V,ngDoCheck:ie}=t.type.prototype;if(k){const ge=ha(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(r,ge),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r,ge)}V&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-r,V),ie&&((n.preOrderHooks||(n.preOrderHooks=[])).push(r,ie),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r,ie))}(n,ie[n],t)}finally{null!==Ue&&vi(Ue),Pu(ke),ge.resolving=!1,Yt()}}return V}function ig(r,t,n){return!!(n[t+(r>>5)]&1<<r)}function ag(r,t){return!(r&hi.Self||r&hi.Host&&t)}class Vc{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,k){return Mf(this._tNode,this._lView,t,k,n)}}function Uc(r){return function Tf(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const n=r.attrs;if(n){const k=n.length;let V=0;for(;V<k;){const ie=n[V];if(No(ie))break;if(0===ie)V+=2;else if("number"==typeof ie)for(V++;V<k&&"string"==typeof n[V];)V++;else{if(ie===t)return n[V+1];V+=2}}}return null}(Io(),r)}const ou="__parameters__";function kf(r,t,n){return oo(()=>{const k=function ed(r){return function(...n){if(r){const k=r(...n);for(const V in k)this[V]=k[V]}}}(t);function V(...ie){if(this instanceof V)return k.apply(this,ie),this;const ge=new V(...ie);return ke.annotation=ge,ke;function ke(Ue,et,yt){const Ht=Ue.hasOwnProperty(ou)?Ue[ou]:Object.defineProperty(Ue,ou,{value:[]})[ou];for(;Ht.length<=yt;)Ht.push(null);return(Ht[yt]=Ht[yt]||[]).push(ge),Ue}}return n&&(V.prototype=Object.create(n.prototype)),V.prototype.ngMetadataName=r,V.annotationCls=V,V})}class fa{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=On({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ap=new fa("AnalyzeForEntryComponents");function su(r,t){void 0===t&&(t=r);for(let n=0;n<r.length;n++){let k=r[n];Array.isArray(k)?(t===r&&(t=r.slice(0,n)),su(k,t)):t!==r&&t.push(k)}return t}function Ol(r,t){r.forEach(n=>Array.isArray(n)?Ol(n,t):t(n))}function sg(r,t,n){t>=r.length?r.push(n):r.splice(t,0,n)}function $o(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function yc(r,t){const n=[];for(let k=0;k<r;k++)n.push(t);return n}function pl(r,t,n){let k=bc(r,t);return k>=0?r[1|k]=n:(k=~k,function rd(r,t,n,k){let V=r.length;if(V==t)r.push(n,k);else if(1===V)r.push(k,r[0]),r[0]=n;else{for(V--,r.push(r[V-1],r[V]);V>t;)r[V]=r[V-2],V--;r[t]=n,r[t+1]=k}}(r,k,t,n)),k}function ch(r,t){const n=bc(r,t);if(n>=0)return r[1|n]}function bc(r,t){return function Ef(r,t,n){let k=0,V=r.length>>n;for(;V!==k;){const ie=k+(V-k>>1),ge=r[ie<<n];if(t===ge)return ie<<n;ge>t?V=ie:k=ie+1}return~(V<<n)}(r,t,1)}const Sf={},od="__NG_DI_FLAG__",Ju="ngTempTokenPath",Hv=/\n/gm,Rp="__source",qv=hn({provide:String,useValue:hn});let fh;function qc(r){const t=fh;return fh=r,t}function Gv(r,t=hi.Default){if(void 0===fh)throw new pr(203,"");return null===fh?_a(r,void 0,t):fh.get(r,t&hi.Optional?null:void 0,t)}function Ni(r,t=hi.Default){return(function Mi(){return Gr}()||Gv)(or(r),t)}const Xl=Ni;function Fp(r){const t=[];for(let n=0;n<r.length;n++){const k=or(r[n]);if(Array.isArray(k)){if(0===k.length)throw new pr(900,"");let V,ie=hi.Default;for(let ge=0;ge<k.length;ge++){const ke=k[ge],Ue=Wv(ke);"number"==typeof Ue?-1===Ue?V=ke.token:ie|=Ue:V=ke}t.push(Ni(V,ie))}else t.push(Ni(k))}return t}function hh(r,t){return r[od]=t,r.prototype[od]=t,r}function Wv(r){return r[od]}const ph=hh(kf("Inject",r=>({token:r})),-1),Qu=hh(kf("Optional"),8),gh=hh(kf("SkipSelf"),4);const Of="__ngContext__";function ya(r,t){r[Of]=t}function _h(r){const t=function bh(r){return r[Of]||null}(r);return t?Array.isArray(t)?t:t.lView:null}function Ff(r){return r.ngOriginalError}function Yp(r,...t){r.error(...t)}class Ru{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),k=function $c(r){return r&&r.ngErrorLogger||Yp}(t);k(this._console,"ERROR",t),n&&k(this._console,"ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Ff(t);for(;n&&Ff(n);)n=Ff(n);return n||null}}const Jc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(pa))();function Kl(r){return r instanceof Function?r():r}var ql=(()=>((ql=ql||{})[ql.Important=1]="Important",ql[ql.DashCase=2]="DashCase",ql))();function Kp(r,t){return undefined(r,t)}function Nf(r){const t=r[3];return Ea(t)?t[3]:t}function Q(r){return xe(r[13])}function he(r){return xe(r[4])}function xe(r){for(;null!==r&&!Ea(r);)r=r[4];return r}function ze(r,t,n,k,V){if(null!=k){let ie,ge=!1;Ea(k)?ie=k:Da(k)&&(ge=!0,k=k[0]);const ke=Na(k);0===r&&null!==n?null==V?Ii(t,n,ke):gi(t,n,ke,V||null,!0):1===r&&null!==n?gi(t,n,ke,V||null,!0):2===r?function mo(r,t,n){const k=Bi(r,t);k&&function Ti(r,t,n,k){ga(r)?r.removeChild(t,n,k):t.removeChild(n)}(r,k,t,n)}(t,ke,ge):3===r&&t.destroyNode(ke),null!=ie&&function js(r,t,n,k,V){const ie=n[7];ie!==Na(n)&&ze(t,r,k,ie,V);for(let ke=10;ke<n.length;ke++){const Ue=n[ke];vo(Ue[1],Ue,r,t,k,ie)}}(t,r,ie,n,V)}}function kt(r,t,n){if(ga(r))return r.createElement(t,n);{const k=null!==n?function As(r){const t=r.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===k?r.createElement(t):r.createElementNS(k,t)}}function qn(r,t){const n=r[9],k=n.indexOf(t),V=t[3];1024&t[2]&&(t[2]&=-1025,ul(V,-1)),n.splice(k,1)}function ar(r,t){if(r.length<=10)return;const n=10+t,k=r[n];if(k){const V=k[17];null!==V&&V!==r&&qn(V,k),t>0&&(r[n-1][4]=k[4]);const ie=$o(r,10+t);!function Zt(r,t){vo(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(k[1],k);const ge=ie[19];null!==ge&&ge.detachView(ie[1]),k[3]=null,k[4]=null,k[2]&=-129}return k}function lr(r,t){if(!(256&t[2])){const n=t[11];ga(n)&&n.destroyNode&&vo(r,t,n,3,null,null),function xn(r){let t=r[13];if(!t)return hr(r[1],r);for(;t;){let n=null;if(Da(t))n=t[13];else{const k=t[10];k&&(n=k)}if(!n){for(;t&&!t[4]&&t!==r;)Da(t)&&hr(t[1],t),t=t[3];null===t&&(t=r),Da(t)&&hr(t[1],t),n=t&&t[4]}t=n}}(t)}}function hr(r,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function jr(r,t){let n;if(null!=r&&null!=(n=r.destroyHooks))for(let k=0;k<n.length;k+=2){const V=t[n[k]];if(!(V instanceof na)){const ie=n[k+1];if(Array.isArray(ie))for(let ge=0;ge<ie.length;ge+=2){const ke=V[ie[ge]],Ue=ie[ge+1];try{Ue.call(ke)}finally{}}else try{ie.call(V)}finally{}}}}(r,t),function Lr(r,t){const n=r.cleanup,k=t[7];let V=-1;if(null!==n)for(let ie=0;ie<n.length-1;ie+=2)if("string"==typeof n[ie]){const ge=n[ie+1],ke="function"==typeof ge?ge(t):Na(t[ge]),Ue=k[V=n[ie+2]],et=n[ie+3];"boolean"==typeof et?ke.removeEventListener(n[ie],Ue,et):et>=0?k[V=et]():k[V=-et].unsubscribe(),ie+=2}else{const ge=k[V=n[ie+1]];n[ie].call(ge)}if(null!==k){for(let ie=V+1;ie<k.length;ie++)k[ie]();t[7]=null}}(r,t),1===t[1].type&&ga(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Ea(t[3])){n!==t[3]&&qn(n,t);const k=t[19];null!==k&&k.detachView(r)}}}function li(r,t,n){return function ai(r,t,n){let k=t;for(;null!==k&&40&k.type;)k=(t=k).parent;if(null===k)return n[0];if(2&k.flags){const V=r.data[k.directiveStart].encapsulation;if(V===ho.None||V===ho.Emulated)return null}return Zo(k,n)}(r,t.parent,n)}function gi(r,t,n,k,V){ga(r)?r.insertBefore(t,n,k,V):t.insertBefore(n,k,V)}function Ii(r,t,n){ga(r)?r.appendChild(t,n):t.appendChild(n)}function Li(r,t,n,k,V){null!==k?gi(r,t,n,k,V):Ii(r,t,n)}function Bi(r,t){return ga(r)?r.parentNode(t):t.parentNode}function Pi(r,t,n){return Pa(r,t,n)}let Pa=function za(r,t,n){return 40&r.type?Zo(r,n):null};function Ia(r,t,n,k){const V=li(r,k,t),ie=t[11],ke=Pi(k.parent||t[6],k,t);if(null!=V)if(Array.isArray(n))for(let Ue=0;Ue<n.length;Ue++)Li(ie,V,n[Ue],ke,!1);else Li(ie,V,n,ke,!1)}function uo(r,t){if(null!==t){const n=t.type;if(3&n)return Zo(t,r);if(4&n)return Eo(-1,r[t.index]);if(8&n){const k=t.child;if(null!==k)return uo(r,k);{const V=r[t.index];return Ea(V)?Eo(-1,V):Na(V)}}if(32&n)return Kp(t,r)()||Na(r[t.index]);{const k=go(r,t);return null!==k?Array.isArray(k)?k[0]:uo(Nf(r[16]),k):uo(r,t.next)}}return null}function go(r,t){return null!==t?r[16][6].projection[t.projection]:null}function Eo(r,t){const n=10+r+1;if(n<t.length){const k=t[n],V=k[1].firstChild;if(null!==V)return uo(k,V)}return t[7]}function es(r,t,n,k,V,ie,ge){for(;null!=n;){const ke=k[n.index],Ue=n.type;if(ge&&0===t&&(ke&&ya(Na(ke),k),n.flags|=4),64!=(64&n.flags))if(8&Ue)es(r,t,n.child,k,V,ie,!1),ze(t,r,V,ke,ie);else if(32&Ue){const et=Kp(n,k);let yt;for(;yt=et();)ze(t,r,V,yt,ie);ze(t,r,V,ke,ie)}else 16&Ue?xs(r,t,k,n,V,ie):ze(t,r,V,ke,ie);n=ge?n.projectionNext:n.next}}function vo(r,t,n,k,V,ie){es(n,k,r.firstChild,t,V,ie,!1)}function xs(r,t,n,k,V,ie){const ge=n[16],Ue=ge[6].projection[k.projection];if(Array.isArray(Ue))for(let et=0;et<Ue.length;et++)ze(t,r,V,Ue[et],ie);else es(r,t,Ue,ge[3],V,ie,!0)}function Ys(r,t,n){ga(r)?r.setAttribute(t,"style",n):t.style.cssText=n}function ts(r,t,n){ga(r)?""===n?r.removeAttribute(t,"class"):r.setAttribute(t,"class",n):t.className=n}function Cs(r,t,n){let k=r.length;for(;;){const V=r.indexOf(t,n);if(-1===V)return V;if(0===V||r.charCodeAt(V-1)<=32){const ie=t.length;if(V+ie===k||r.charCodeAt(V+ie)<=32)return V}n=V+1}}const hs="ng-template";function Ma(r,t,n){let k=0;for(;k<r.length;){let V=r[k++];if(n&&"class"===V){if(V=r[k],-1!==Cs(V.toLowerCase(),t,0))return!0}else if(1===V){for(;k<r.length&&"string"==typeof(V=r[k++]);)if(V.toLowerCase()===t)return!0;return!1}}return!1}function Va(r){return 4===r.type&&r.value!==hs}function Ko(r,t,n){return t===(4!==r.type||n?r.value:hs)}function Jo(r,t,n){let k=4;const V=r.attrs||[],ie=function bl(r){for(let t=0;t<r.length;t++)if(No(r[t]))return t;return r.length}(V);let ge=!1;for(let ke=0;ke<t.length;ke++){const Ue=t[ke];if("number"!=typeof Ue){if(!ge)if(4&k){if(k=2|1&k,""!==Ue&&!Ko(r,Ue,n)||""===Ue&&1===t.length){if(eo(k))return!1;ge=!0}}else{const et=8&k?Ue:t[++ke];if(8&k&&null!==r.attrs){if(!Ma(r.attrs,et,n)){if(eo(k))return!1;ge=!0}continue}const Ht=Bo(8&k?"class":Ue,V,Va(r),n);if(-1===Ht){if(eo(k))return!1;ge=!0;continue}if(""!==et){let mn;mn=Ht>ie?"":V[Ht+1].toLowerCase();const In=8&k?mn:null;if(In&&-1!==Cs(In,et,0)||2&k&&et!==mn){if(eo(k))return!1;ge=!0}}}}else{if(!ge&&!eo(k)&&!eo(Ue))return!1;if(ge&&eo(Ue))continue;ge=!1,k=Ue|1&k}}return eo(k)||ge}function eo(r){return 0==(1&r)}function Bo(r,t,n,k){if(null===t)return-1;let V=0;if(k||!n){let ie=!1;for(;V<t.length;){const ge=t[V];if(ge===r)return V;if(3===ge||6===ge)ie=!0;else{if(1===ge||2===ge){let ke=t[++V];for(;"string"==typeof ke;)ke=t[++V];continue}if(4===ge)break;if(0===ge){V+=4;continue}}V+=ie?1:2}return-1}return function Fl(r,t){let n=r.indexOf(4);if(n>-1)for(n++;n<r.length;){const k=r[n];if("number"==typeof k)return-1;if(k===t)return n;n++}return-1}(t,r)}function $a(r,t,n=!1){for(let k=0;k<t.length;k++)if(Jo(r,t[k],n))return!0;return!1}function nl(r,t){e:for(let n=0;n<t.length;n++){const k=t[n];if(r.length===k.length){for(let V=0;V<r.length;V++)if(r[V]!==k[V])continue e;return!0}}return!1}function cu(r,t){return r?":not("+t.trim()+")":t}function tc(r){let t=r[0],n=1,k=2,V="",ie=!1;for(;n<r.length;){let ge=r[n];if("string"==typeof ge)if(2&k){const ke=r[++n];V+="["+ge+(ke.length>0?'="'+ke+'"':"")+"]"}else 8&k?V+="."+ge:4&k&&(V+=" "+ge);else""!==V&&!eo(ge)&&(t+=cu(ie,V),V=""),k=ge,ie=ie||!eo(k);n++}return""!==V&&(t+=cu(ie,V)),t}const la={};function jo(r){Md(Sa(),qr(),En()+r,Xo())}function Md(r,t,n,k){if(!k)if(3==(3&t[2])){const ie=r.preOrderCheckHooks;null!==ie&&ur(t,ie,n)}else{const ie=r.preOrderHooks;null!==ie&&Hr(t,ie,0,n)}Un(n)}function tf(r,t){return r<<17|t<<2}function _l(r){return r>>17&32767}function zf(r){return 2|r}function fu(r){return(131068&r)>>2}function Fu(r,t){return-131069&r|t<<2}function Bf(r){return 1|r}function t0(r,t){const n=r.contentQueries;if(null!==n)for(let k=0;k<n.length;k+=2){const V=n[k],ie=n[k+1];if(-1!==ie){const ge=r.data[ie];at(V),ge.contentQueries(2,t[ie],ie)}}}function Wf(r,t,n,k,V,ie,ge,ke,Ue,et){const yt=t.blueprint.slice();return yt[0]=V,yt[2]=140|k,gu(yt),yt[3]=yt[15]=r,yt[8]=n,yt[10]=ge||r&&r[10],yt[11]=ke||r&&r[11],yt[12]=Ue||r&&r[12]||null,yt[9]=et||r&&r[9]||null,yt[6]=ie,yt[16]=2==t.type?r[16]:yt,yt}function uf(r,t,n,k,V){let ie=r.data[t];if(null===ie)ie=function kl(r,t,n,k,V){const ie=iu(),ge=Zu(),Ue=r.data[t]=function a0(r,t,n,k,V,ie){return{type:n,index:k,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:V,attrs:ie,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,ge?ie:ie&&ie.parent,n,t,k,V);return null===r.firstChild&&(r.firstChild=Ue),null!==ie&&(ge?null==ie.child&&null!==Ue.parent&&(ie.child=Ue):null===ie.next&&(ie.next=Ue)),Ue}(r,t,n,k,V),function K(){return Zi.lFrame.inI18n}()&&(ie.flags|=64);else if(64&ie.type){ie.type=n,ie.value=k,ie.attrs=V;const ge=function Qs(){const r=Zi.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();ie.injectorIndex=null===ge?-1:ge.injectorIndex}return cl(ie,!0),ie}function rc(r,t,n,k){if(0===n)return-1;const V=t.length;for(let ie=0;ie<n;ie++)t.push(k),r.blueprint.push(k),r.data.push(null);return V}function Yf(r,t,n){zt(t);try{const k=r.viewQuery;null!==k&&Iy(1,k,n);const V=r.template;null!==V&&Pd(r,t,V,1,n),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&t0(r,t),r.staticViewQueries&&Iy(2,r.viewQuery,n);const ie=r.components;null!==ie&&function Zg(r,t){for(let n=0;n<t.length;n++)TA(r,t[n])}(t,ie)}catch(k){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),k}finally{t[2]&=-5,Gt()}}function Nl(r,t,n,k){const V=t[2];if(256==(256&V))return;zt(t);const ie=Xo();try{gu(t),function R(r){return Zi.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==n&&Pd(r,t,n,2,k);const ge=3==(3&V);if(!ie)if(ge){const et=r.preOrderCheckHooks;null!==et&&ur(t,et,null)}else{const et=r.preOrderHooks;null!==et&&Hr(t,et,0,null),bi(t,0)}if(function xA(r){for(let t=Q(r);null!==t;t=he(t)){if(!t[2])continue;const n=t[9];for(let k=0;k<n.length;k++){const V=n[k],ie=V[3];0==(1024&V[2])&&ul(ie,1),V[2]|=1024}}}(t),function _A(r){for(let t=Q(r);null!==t;t=he(t))for(let n=10;n<t.length;n++){const k=t[n],V=k[1];Oi(k)&&Nl(V,k,V.template,k[8])}}(t),null!==r.contentQueries&&t0(r,t),!ie)if(ge){const et=r.contentCheckHooks;null!==et&&ur(t,et)}else{const et=r.contentHooks;null!==et&&Hr(t,et,1),bi(t,1)}!function Dh(r,t){const n=r.hostBindingOpCodes;if(null!==n)try{for(let k=0;k<n.length;k++){const V=n[k];if(V<0)Un(~V);else{const ie=V,ge=n[++k],ke=n[++k];be(ge,ie),ke(2,t[ie])}}}finally{Un(-1)}}(r,t);const ke=r.components;null!==ke&&function Yg(r,t){for(let n=0;n<t.length;n++)wA(r,t[n])}(t,ke);const Ue=r.viewQuery;if(null!==Ue&&Iy(2,Ue,k),!ie)if(ge){const et=r.viewCheckHooks;null!==et&&ur(t,et)}else{const et=r.viewHooks;null!==et&&Hr(t,et,2),bi(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),ie||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,ul(t[3],-1))}finally{Gt()}}function vy(r,t,n,k){const V=t[10],ie=!Xo(),ge=Ml(t);try{ie&&!ge&&V.begin&&V.begin(),ge&&Yf(r,t,k),Nl(r,t,n,k)}finally{ie&&!ge&&V.end&&V.end()}}function Pd(r,t,n,k,V){const ie=En(),ge=2&k;try{Un(-1),ge&&t.length>20&&Md(r,t,20,Xo()),n(k,V)}finally{Un(ie)}}function Ec(r,t,n){!Xa()||(function xy(r,t,n,k){const V=n.directiveStart,ie=n.directiveEnd;r.firstCreatePass||qs(n,t),ya(k,t);const ge=n.initialInputs;for(let ke=V;ke<ie;ke++){const Ue=r.data[ke],et=po(Ue);et&&Ay(t,n,Ue);const yt=jc(t,r,ke,n);ya(yt,t),null!==ge&&om(0,ke-V,yt,Ue,0,ge),et&&(Wa(n.index,t)[8]=yt)}}(r,t,n,Zo(n,t)),128==(128&n.flags)&&function tm(r,t,n){const k=n.directiveStart,V=n.directiveEnd,ge=n.index,ke=function Me(){return Zi.lFrame.currentDirectiveIndex}();try{Un(ge);for(let Ue=k;Ue<V;Ue++){const et=r.data[Ue],yt=t[Ue];Ce(Ue),(null!==et.hostBindings||0!==et.hostVars||null!==et.hostAttrs)&&nm(et,yt)}}finally{Un(-1),Ce(ke)}}(r,t,n))}function Sc(r,t,n=Zo){const k=t.localNames;if(null!==k){let V=t.index+1;for(let ie=0;ie<k.length;ie+=2){const ge=k[ie+1],ke=-1===ge?n(t,r):r[ge];r[V++]=ke}}}function cf(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=ic(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function ic(r,t,n,k,V,ie,ge,ke,Ue,et){const yt=20+k,Ht=yt+V,mn=function Xg(r,t){const n=[];for(let k=0;k<t;k++)n.push(k<r?null:la);return n}(yt,Ht),In="function"==typeof et?et():et;return mn[1]={type:r,blueprint:mn,template:n,queries:null,viewQuery:ke,declTNode:t,data:mn.slice().fill(null,yt),bindingStartIndex:yt,expandoStartIndex:Ht,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof ie?ie():ie,pipeRegistry:"function"==typeof ge?ge():ge,firstChild:null,schemas:Ue,consts:In,incompleteFirstPass:!1}}function Od(r,t,n,k){const V=G_(t);null===n?V.push(k):(V.push(n),r.firstCreatePass&&W_(r).push(k,V.length-1))}function Bu(r,t,n){for(let k in r)if(r.hasOwnProperty(k)){const V=r[k];(n=null===n?{}:n).hasOwnProperty(k)?n[k].push(t,V):n[k]=[t,V]}return n}function zl(r,t,n,k,V,ie,ge,ke){const Ue=Zo(t,n);let yt,et=t.inputs;!ke&&null!=et&&(yt=et[k])?(X_(r,n,yt,k,V),Ro(t)&&function Kg(r,t){const n=Wa(t,r);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(k=function o0(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(k),V=null!=ge?ge(V,t.value||"",k):V,ga(ie)?ie.setProperty(Ue,k,V):ro(k)||(Ue.setProperty?Ue.setProperty(k,V):Ue[k]=V))}function ff(r,t,n,k){let V=!1;if(Xa()){const ie=function wy(r,t,n){const k=r.directiveRegistry;let V=null;if(k)for(let ie=0;ie<k.length;ie++){const ge=k[ie];$a(n,ge.selectors,!1)&&(V||(V=[]),_s(qs(n,t),r,ge.type),po(ge)?(rm(r,n),V.unshift(ge)):V.push(ge))}return V}(r,t,n),ge=null===k?null:{"":-1};if(null!==ie){V=!0,im(n,r.data.length,ie.length);for(let yt=0;yt<ie.length;yt++){const Ht=ie[yt];Ht.providersResolver&&Ht.providersResolver(Ht)}let ke=!1,Ue=!1,et=rc(r,t,ie.length,null);for(let yt=0;yt<ie.length;yt++){const Ht=ie[yt];n.mergedAttrs=_o(n.mergedAttrs,Ht.hostAttrs),am(r,n,t,et,Ht),My(et,Ht,ge),null!==Ht.contentQueries&&(n.flags|=8),(null!==Ht.hostBindings||null!==Ht.hostAttrs||0!==Ht.hostVars)&&(n.flags|=128);const mn=Ht.type.prototype;!ke&&(mn.ngOnChanges||mn.ngOnInit||mn.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(n.index),ke=!0),!Ue&&(mn.ngOnChanges||mn.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(n.index),Ue=!0),et++}!function $g(r,t){const k=t.directiveEnd,V=r.data,ie=t.attrs,ge=[];let ke=null,Ue=null;for(let et=t.directiveStart;et<k;et++){const yt=V[et],Ht=yt.inputs,mn=null===ie||Va(t)?null:Ih(Ht,ie);ge.push(mn),ke=Bu(Ht,et,ke),Ue=Bu(yt.outputs,et,Ue)}null!==ke&&(ke.hasOwnProperty("class")&&(t.flags|=16),ke.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=ge,t.inputs=ke,t.outputs=Ue}(r,n)}ge&&function Ty(r,t,n){if(t){const k=r.localNames=[];for(let V=0;V<t.length;V+=2){const ie=n[t[V+1]];if(null==ie)throw new pr(-301,!1);k.push(t[V],ie)}}}(n,k,ge)}return n.mergedAttrs=_o(n.mergedAttrs,n.attrs),V}function l0(r,t,n,k,V,ie){const ge=ie.hostBindings;if(ge){let ke=r.hostBindingOpCodes;null===ke&&(ke=r.hostBindingOpCodes=[]);const Ue=~t.index;(function Rd(r){let t=r.length;for(;t>0;){const n=r[--t];if("number"==typeof n&&n<0)return n}return 0})(ke)!=Ue&&ke.push(Ue),ke.push(k,V,ge)}}function nm(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function rm(r,t){t.flags|=2,(r.components||(r.components=[])).push(t.index)}function My(r,t,n){if(n){if(t.exportAs)for(let k=0;k<t.exportAs.length;k++)n[t.exportAs[k]]=r;po(t)&&(n[""]=r)}}function im(r,t,n){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+n,r.providerIndexes=t}function am(r,t,n,k,V){r.data[k]=V;const ie=V.factory||(V.factory=ii(V.type)),ge=new na(ie,po(V),null);r.blueprint[k]=ge,n[k]=ge,l0(r,t,0,k,rc(r,n,V.hostVars,la),V)}function Ay(r,t,n){const k=Zo(t,r),V=cf(n),ie=r[10],ge=sm(r,Wf(r,V,null,n.onPush?64:16,k,t,ie,ie.createRenderer(k,n),null,null));r[t.index]=ge}function Zs(r,t,n,k,V,ie){const ge=Zo(r,t);!function Zf(r,t,n,k,V,ie,ge){if(null==ie)ga(r)?r.removeAttribute(t,V,n):t.removeAttribute(V);else{const ke=null==ge?fr(ie):ge(ie,k||"",V);ga(r)?r.setAttribute(t,V,ke,n):n?t.setAttributeNS(n,V,ke):t.setAttribute(V,ke)}}(t[11],ge,ie,r.value,n,k,V)}function om(r,t,n,k,V,ie){const ge=ie[t];if(null!==ge){const ke=k.setInput;for(let Ue=0;Ue<ge.length;){const et=ge[Ue++],yt=ge[Ue++],Ht=ge[Ue++];null!==ke?k.setInput(n,Ht,et,yt):n[yt]=Ht}}}function Ih(r,t){let n=null,k=0;for(;k<t.length;){const V=t[k];if(0!==V)if(5!==V){if("number"==typeof V)break;r.hasOwnProperty(V)&&(null===n&&(n=[]),n.push(V,r[V],t[k+1])),k+=2}else k+=2;else k+=4}return n}function H_(r,t,n,k){return new Array(r,!0,!1,t,null,0,k,n,null,null)}function wA(r,t){const n=Wa(t,r);if(Oi(n)){const k=n[1];80&n[2]?Nl(k,n,k.template,n[8]):n[5]>0&&Ey(n)}}function Ey(r){for(let k=Q(r);null!==k;k=he(k))for(let V=10;V<k.length;V++){const ie=k[V];if(1024&ie[2]){const ge=ie[1];Nl(ge,ie,ge.template,ie[8])}else ie[5]>0&&Ey(ie)}const n=r[1].components;if(null!==n)for(let k=0;k<n.length;k++){const V=Wa(n[k],r);Oi(V)&&V[5]>0&&Ey(V)}}function TA(r,t){const n=Wa(t,r),k=n[1];(function MA(r,t){for(let n=t.length;n<r.blueprint.length;n++)t.push(r.blueprint[n])})(k,n),Yf(k,n,n[8])}function sm(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function Sy(r){for(;r;){r[2]|=64;const t=Nf(r);if(ss(r)&&!t)return r;r=t}return null}function Dy(r,t,n){const k=t[10];k.begin&&k.begin();try{Nl(r,t,r.template,n)}catch(V){throw Z_(t,V),V}finally{k.end&&k.end()}}function q_(r){!function Cy(r){for(let t=0;t<r.components.length;t++){const n=r.components[t],k=_h(n),V=k[1];vy(V,k,V.template,n)}}(r[8])}function Iy(r,t,n){at(0),t(r,n)}const SA=(()=>Promise.resolve(null))();function G_(r){return r[7]||(r[7]=[])}function W_(r){return r.cleanup||(r.cleanup=[])}function Z_(r,t){const n=r[9],k=n?n.get(Ru,null):null;k&&k.handleError(t)}function X_(r,t,n,k,V){for(let ie=0;ie<n.length;){const ge=n[ie++],ke=n[ie++],Ue=t[ge],et=r.data[ge];null!==et.setInput?et.setInput(Ue,V,k,ke):Ue[ke]=V}}function hf(r,t,n){const k=sl(t,r);!function lt(r,t,n){ga(r)?r.setValue(t,n):t.textContent=n}(r[11],k,n)}function lm(r,t,n){let k=n?r.styles:null,V=n?r.classes:null,ie=0;if(null!==t)for(let ge=0;ge<t.length;ge++){const ke=t[ge];"number"==typeof ke?ie=ke:1==ie?V=$n(V,ke):2==ie&&(k=$n(k,ke+": "+t[++ge]+";"))}n?r.styles=k:r.stylesWithoutHost=k,n?r.classes=V:r.classesWithoutHost=V}const Ly=new fa("INJECTOR",-1);class $_{get(t,n=Sf){if(n===Sf){const k=new Error(`NullInjectorError: No provider for ${Pn(t)}!`);throw k.name="NullInjectorError",k}return n}}const Py=new fa("Set Injector scope."),u0={},IA={};let Oy;function K_(){return void 0===Oy&&(Oy=new $_),Oy}function J_(r,t=null,n=null,k){const V=Q_(r,t,n,k);return V._resolveInjectorDefTypes(),V}function Q_(r,t=null,n=null,k){return new LA(r,n,t||K_(),k)}class LA{constructor(t,n,k,V=null){this.parent=k,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const ie=[];n&&Ol(n,ke=>this.processProvider(ke,t,n)),Ol([t],ke=>this.processInjectorType(ke,[],ie)),this.records.set(Ly,Fd(void 0,this));const ge=this.records.get(Py);this.scope=null!=ge?ge.value:null,this.source=V||("object"==typeof t?null:Pn(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=Sf,k=hi.Default){this.assertNotDestroyed();const V=qc(this),ie=vi(void 0);try{if(!(k&hi.SkipSelf)){let ke=this.records.get(t);if(void 0===ke){const Ue=function jA(r){return"function"==typeof r||"object"==typeof r&&r instanceof fa}(t)&&br(t);ke=Ue&&this.injectableDefInScope(Ue)?Fd(Ry(t),u0):null,this.records.set(t,ke)}if(null!=ke)return this.hydrate(t,ke)}return(k&hi.Self?K_():this.parent).get(t,n=k&hi.Optional&&n===Sf?null:n)}catch(ge){if("NullInjectorError"===ge.name){if((ge[Ju]=ge[Ju]||[]).unshift(Pn(t)),V)throw ge;return function Yv(r,t,n,k){const V=r[Ju];throw t[Rp]&&V.unshift(t[Rp]),r.message=function dh(r,t,n,k=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let V=Pn(t);if(Array.isArray(t))V=t.map(Pn).join(" -> ");else if("object"==typeof t){let ie=[];for(let ge in t)if(t.hasOwnProperty(ge)){let ke=t[ge];ie.push(ge+":"+("string"==typeof ke?JSON.stringify(ke):Pn(ke)))}V=`{${ie.join(", ")}}`}return`${n}${k?"("+k+")":""}[${V}]: ${r.replace(Hv,"\n  ")}`}("\n"+r.message,V,n,k),r.ngTokenPath=V,r[Ju]=null,r}(ge,t,"R3InjectorError",this.source)}throw ge}finally{vi(ie),qc(V)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((k,V)=>t.push(Pn(V))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pr(205,!1)}processInjectorType(t,n,k){if(!(t=or(t)))return!1;let V=Ur(t);const ie=null==V&&t.ngModule||void 0,ge=void 0===ie?t:ie,ke=-1!==k.indexOf(ge);if(void 0!==ie&&(V=Ur(ie)),null==V)return!1;if(null!=V.imports&&!ke){let yt;k.push(ge);try{Ol(V.imports,Ht=>{this.processInjectorType(Ht,n,k)&&(void 0===yt&&(yt=[]),yt.push(Ht))})}finally{}if(void 0!==yt)for(let Ht=0;Ht<yt.length;Ht++){const{ngModule:mn,providers:In}=yt[Ht];Ol(In,Kn=>this.processProvider(Kn,mn,In||ia))}}this.injectorDefTypes.add(ge);const Ue=ii(ge)||(()=>new ge);this.records.set(ge,Fd(Ue,u0));const et=V.providers;if(null!=et&&!ke){const yt=t;Ol(et,Ht=>this.processProvider(Ht,yt,et))}return void 0!==ie&&void 0!==t.providers}processProvider(t,n,k){let V=Nd(t=or(t))?t:or(t&&t.provide);const ie=function OA(r,t,n){return tx(r)?Fd(void 0,r.useValue):Fd(ex(r),u0)}(t);if(Nd(t)||!0!==t.multi)this.records.get(V);else{let ge=this.records.get(V);ge||(ge=Fd(void 0,u0,!0),ge.factory=()=>Fp(ge.multi),this.records.set(V,ge)),V=t,ge.multi.push(t)}this.records.set(V,ie)}hydrate(t,n){return n.value===u0&&(n.value=IA,n.value=n.factory()),"object"==typeof n.value&&n.value&&function BA(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=or(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Ry(r){const t=br(r),n=null!==t?t.factory:ii(r);if(null!==n)return n;if(r instanceof fa)throw new pr(204,!1);if(r instanceof Function)return function PA(r){const t=r.length;if(t>0)throw yc(t,"?"),new pr(204,!1);const n=function Fr(r){const t=r&&(r[Xr]||r[_i]);if(t){const n=function Vr(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(r);return null!==n?()=>n.factory(r):()=>new r}(r);throw new pr(204,!1)}function ex(r,t,n){let k;if(Nd(r)){const V=or(r);return ii(V)||Ry(V)}if(tx(r))k=()=>or(r.useValue);else if(function FA(r){return!(!r||!r.useFactory)}(r))k=()=>r.useFactory(...Fp(r.deps||[]));else if(function RA(r){return!(!r||!r.useExisting)}(r))k=()=>Ni(or(r.useExisting));else{const V=or(r&&(r.useClass||r.provide));if(!function zA(r){return!!r.deps}(r))return ii(V)||Ry(V);k=()=>new V(...Fp(r.deps))}return k}function Fd(r,t,n=!1){return{factory:r,value:t,multi:n?[]:void 0}}function tx(r){return null!==r&&"object"==typeof r&&qv in r}function Nd(r){return"function"==typeof r}let hu=(()=>{class r{static create(n,k){var V;if(Array.isArray(n))return J_({name:""},k,n,"");{const ie=null!==(V=n.name)&&void 0!==V?V:"";return J_({name:ie},n.parent,n.providers,ie)}}}return r.THROW_IF_NOT_FOUND=Sf,r.NULL=new $_,r.\u0275prov=On({token:r,providedIn:"any",factory:()=>Ni(Ly)}),r.__NG_ELEMENT_ID__=-1,r})();function ZA(r,t){Fi(_h(r)[1],Io())}function Vo(r){let t=function dx(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),n=!0;const k=[r];for(;t;){let V;if(po(r))V=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new pr(903,"");V=t.\u0275dir}if(V){if(n){k.push(V);const ge=r;ge.inputs=zy(r.inputs),ge.declaredInputs=zy(r.declaredInputs),ge.outputs=zy(r.outputs);const ke=V.hostBindings;ke&&JA(r,ke);const Ue=V.viewQuery,et=V.contentQueries;if(Ue&&$A(r,Ue),et&&KA(r,et),Dn(r.inputs,V.inputs),Dn(r.declaredInputs,V.declaredInputs),Dn(r.outputs,V.outputs),po(V)&&V.data.animation){const yt=r.data;yt.animation=(yt.animation||[]).concat(V.data.animation)}}const ie=V.features;if(ie)for(let ge=0;ge<ie.length;ge++){const ke=ie[ge];ke&&ke.ngInherit&&ke(r),ke===Vo&&(n=!1)}}t=Object.getPrototypeOf(t)}!function XA(r){let t=0,n=null;for(let k=r.length-1;k>=0;k--){const V=r[k];V.hostVars=t+=V.hostVars,V.hostAttrs=_o(V.hostAttrs,n=_o(n,V.hostAttrs))}}(k)}function zy(r){return r===wo?{}:r===ia?[]:r}function $A(r,t){const n=r.viewQuery;r.viewQuery=n?(k,V)=>{t(k,V),n(k,V)}:t}function KA(r,t){const n=r.contentQueries;r.contentQueries=n?(k,V,ie)=>{t(k,V,ie),n(k,V,ie)}:t}function JA(r,t){const n=r.hostBindings;r.hostBindings=n?(k,V)=>{t(k,V),n(k,V)}:t}let um=null;function zd(){if(!um){const r=pa.Symbol;if(r&&r.iterator)um=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const k=t[n];"entries"!==k&&"size"!==k&&Map.prototype[k]===Map.prototype.entries&&(um=k)}}}return um}function c0(r){return!!By(r)&&(Array.isArray(r)||!(r instanceof Map)&&zd()in r)}function By(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Gl(r,t,n){return!Object.is(r[t],n)&&(r[t]=n,!0)}function wu(r,t,n,k){const V=qr();return Gl(V,B(),t)&&(Sa(),Zs(Nn(),V,r,t,n,k)),wu}function jd(r,t,n,k){return Gl(r,B(),n)?t+fr(n)+k:la}function Qr(r,t=hi.Default){const n=qr();return null===n?Ni(r,t):Mf(Io(),n,or(r),t)}function qy(){throw new Error("invalid")}function El(r,t,n){const k=qr();return Gl(k,B(),t)&&zl(Sa(),Nn(),k,r,t,k[11],n,!1),El}function Gy(r,t,n,k,V){const ge=V?"class":"style";X_(r,n,t.inputs[ge],ge,k)}function Sl(r,t,n,k){const V=qr(),ie=Sa(),ge=20+r,ke=V[11],Ue=V[ge]=kt(ke,t,function fi(){return Zi.lFrame.currentNamespace}()),et=ie.firstCreatePass?function Ek(r,t,n,k,V,ie,ge){const ke=t.consts,et=uf(t,r,2,V,ll(ke,ie));return ff(t,n,et,ll(ke,ge)),null!==et.attrs&&lm(et,et.attrs,!1),null!==et.mergedAttrs&&lm(et,et.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,et),et}(ge,ie,V,0,t,n,k):ie.data[ge];cl(et,!0);const yt=et.mergedAttrs;null!==yt&&Ao(ke,Ue,yt);const Ht=et.classes;null!==Ht&&ts(ke,Ue,Ht);const mn=et.styles;return null!==mn&&Ys(ke,Ue,mn),64!=(64&et.flags)&&Ia(ie,V,Ue,et),0===function pc(){return Zi.lFrame.elementDepthCount}()&&ya(Ue,V),function mu(){Zi.lFrame.elementDepthCount++}(),Go(et)&&(Ec(ie,V,et),function kc(r,t,n){if(bo(t)){const V=t.directiveEnd;for(let ie=t.directiveStart;ie<V;ie++){const ge=r.data[ie];ge.contentQueries&&ge.contentQueries(1,n[ie],ie)}}}(ie,et,V)),null!==k&&Sc(V,et),Sl}function xl(){let r=Io();Zu()?Pl():(r=r.parent,cl(r,!1));const t=r;!function Ba(){Zi.lFrame.elementDepthCount--}();const n=Sa();return n.firstCreatePass&&(Fi(n,r),bo(r)&&n.queries.elementEnd(r)),null!=t.classesWithoutHost&&function ea(r){return 0!=(16&r.flags)}(t)&&Gy(n,t,qr(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function ma(r){return 0!=(32&r.flags)}(t)&&Gy(n,t,qr(),t.stylesWithoutHost,!1),xl}function oc(r,t,n,k){return Sl(r,t,n,k),xl(),oc}function h0(r){return!!r&&"function"==typeof r.then}const Zy=function Rx(r){return!!r&&"function"==typeof r.subscribe};function Cl(r,t,n,k){const V=qr(),ie=Sa(),ge=Io();return function Nx(r,t,n,k,V,ie,ge,ke){const Ue=Go(k),yt=r.firstCreatePass&&W_(r),Ht=t[8],mn=G_(t);let In=!0;if(3&k.type||ke){const Kr=Zo(k,t),ui=ke?ke(Kr):Kr,Ir=mn.length,zi=ke?oa=>ke(Na(oa[k.index])):k.index;if(ga(n)){let oa=null;if(!ke&&Ue&&(oa=function Dk(r,t,n,k){const V=r.cleanup;if(null!=V)for(let ie=0;ie<V.length-1;ie+=2){const ge=V[ie];if(ge===n&&V[ie+1]===k){const ke=t[7],Ue=V[ie+2];return ke.length>Ue?ke[Ue]:null}"string"==typeof ge&&(ie+=2)}return null}(r,t,V,k.index)),null!==oa)(oa.__ngLastListenerFn__||oa).__ngNextListenerFn__=ie,oa.__ngLastListenerFn__=ie,In=!1;else{ie=Xy(k,t,Ht,ie,!1);const Ka=n.listen(ui,V,ie);mn.push(ie,Ka),yt&&yt.push(V,zi,Ir,Ir+1)}}else ie=Xy(k,t,Ht,ie,!0),ui.addEventListener(V,ie,ge),mn.push(ie),yt&&yt.push(V,zi,Ir,ge)}else ie=Xy(k,t,Ht,ie,!1);const Kn=k.outputs;let xr;if(In&&null!==Kn&&(xr=Kn[V])){const Kr=xr.length;if(Kr)for(let ui=0;ui<Kr;ui+=2){const ws=t[xr[ui]][xr[ui+1]].subscribe(ie),Ps=mn.length;mn.push(ie,ws),yt&&yt.push(V,k.index,Ps,-(Ps+1))}}}(ie,V,V[11],ge,r,t,!!n,k),Cl}function zx(r,t,n,k){try{return!1!==n(k)}catch(V){return Z_(r,V),!1}}function Xy(r,t,n,k,V){return function ie(ge){if(ge===Function)return k;const ke=2&r.flags?Wa(r.index,t):t;0==(32&t[2])&&Sy(ke);let Ue=zx(t,0,k,ge),et=ie.__ngNextListenerFn__;for(;et;)Ue=zx(t,0,et,ge)&&Ue,et=et.__ngNextListenerFn__;return V&&!1===Ue&&(ge.preventDefault(),ge.returnValue=!1),Ue}}function Lk(r,t){let n=null;const k=function Qo(r){const t=r.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(r);for(let V=0;V<t.length;V++){const ie=t[V];if("*"!==ie){if(null===k?$a(r,ie,!0):nl(k,ie))return V}else n=V}return n}function $y(r){const t=qr()[16][6];if(!t.projection){const k=t.projection=yc(r?r.length:1,null),V=k.slice();let ie=t.child;for(;null!==ie;){const ge=r?Lk(ie,r):0;null!==ge&&(V[ge]?V[ge].projectionNext=ie:k[ge]=ie,V[ge]=ie),ie=ie.next}}}function Ky(r,t=0,n){const k=qr(),V=Sa(),ie=uf(V,20+r,16,null,n||null);null===ie.projection&&(ie.projection=t),Pl(),64!=(64&ie.flags)&&function Ws(r,t,n){xs(t[11],0,t,n,li(r,n,t),Pi(n.parent||t[6],n,t))}(V,k,ie)}function Xf(r,t,n){return Jy(r,"",t,"",n),Xf}function Jy(r,t,n,k,V){const ie=qr(),ge=jd(ie,t,n,k);return ge!==la&&zl(Sa(),Nn(),ie,r,ge,ie[11],V,!1),Jy}function Yx(r,t,n,k,V){const ie=r[n+1],ge=null===t;let ke=k?_l(ie):fu(ie),Ue=!1;for(;0!==ke&&(!1===Ue||ge);){const yt=r[ke+1];Rk(r[ke],t)&&(Ue=!0,r[ke+1]=k?Bf(yt):zf(yt)),ke=k?_l(yt):fu(yt)}Ue&&(r[n+1]=k?zf(ie):Bf(ie))}function Rk(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&bc(r,t)>=0}function $f(r,t){return function sc(r,t,n,k){const V=qr(),ie=Sa(),ge=function q(r){const t=Zi.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,n}(2);ie.firstUpdatePass&&function n2(r,t,n,k){const V=r.data;if(null===V[n+1]){const ie=V[En()],ge=function t2(r,t){return t>=r.expandoStartIndex}(r,n);(function s2(r,t){return 0!=(r.flags&(t?16:32))})(ie,k)&&null===t&&!ge&&(t=!1),t=function qk(r,t,n,k){const V=function Ne(r){const t=Zi.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}(r);let ie=k?t.residualClasses:t.residualStyles;if(null===V)0===(k?t.classBindings:t.styleBindings)&&(n=d0(n=Qy(null,r,t,n,k),t.attrs,k),ie=null);else{const ge=t.directiveStylingLast;if(-1===ge||r[ge]!==V)if(n=Qy(V,r,t,n,k),null===ie){let Ue=function Gk(r,t,n){const k=n?t.classBindings:t.styleBindings;if(0!==fu(k))return r[_l(k)]}(r,t,k);void 0!==Ue&&Array.isArray(Ue)&&(Ue=Qy(null,r,t,Ue[1],k),Ue=d0(Ue,t.attrs,k),function Wk(r,t,n,k){r[_l(n?t.classBindings:t.styleBindings)]=k}(r,t,k,Ue))}else ie=function Yk(r,t,n){let k;const V=t.directiveEnd;for(let ie=1+t.directiveStylingLast;ie<V;ie++)k=d0(k,r[ie].hostAttrs,n);return d0(k,t.attrs,n)}(r,t,k)}return void 0!==ie&&(k?t.residualClasses=ie:t.residualStyles=ie),n}(V,ie,t,k),function Pk(r,t,n,k,V,ie){let ge=ie?t.classBindings:t.styleBindings,ke=_l(ge),Ue=fu(ge);r[k]=n;let yt,et=!1;if(Array.isArray(n)){const Ht=n;yt=Ht[1],(null===yt||bc(Ht,yt)>0)&&(et=!0)}else yt=n;if(V)if(0!==Ue){const mn=_l(r[ke+1]);r[k+1]=tf(mn,ke),0!==mn&&(r[mn+1]=Fu(r[mn+1],k)),r[ke+1]=function Ad(r,t){return 131071&r|t<<17}(r[ke+1],k)}else r[k+1]=tf(ke,0),0!==ke&&(r[ke+1]=Fu(r[ke+1],k)),ke=k;else r[k+1]=tf(Ue,0),0===ke?ke=k:r[Ue+1]=Fu(r[Ue+1],k),Ue=k;et&&(r[k+1]=zf(r[k+1])),Yx(r,yt,k,!0),Yx(r,yt,k,!1),function Ok(r,t,n,k,V){const ie=V?r.residualClasses:r.residualStyles;null!=ie&&"string"==typeof t&&bc(ie,t)>=0&&(n[k+1]=Bf(n[k+1]))}(t,yt,r,k,ie),ge=tf(ke,Ue),ie?t.classBindings=ge:t.styleBindings=ge}(V,ie,t,n,ge,k)}}(ie,r,ge,k),t!==la&&Gl(V,ge,t)&&function a2(r,t,n,k,V,ie,ge,ke){if(!(3&t.type))return;const Ue=r.data,et=Ue[ke+1];hm(function nf(r){return 1==(1&r)}(et)?o2(Ue,t,n,V,fu(et),ge):void 0)||(hm(ie)||function wh(r){return 2==(2&r)}(et)&&(ie=o2(Ue,null,n,V,ke,ge)),function yl(r,t,n,k,V){const ie=ga(r);if(t)V?ie?r.addClass(n,k):n.classList.add(k):ie?r.removeClass(n,k):n.classList.remove(k);else{let ge=-1===k.indexOf("-")?void 0:ql.DashCase;if(null==V)ie?r.removeStyle(n,k,ge):n.style.removeProperty(k);else{const ke="string"==typeof V&&V.endsWith("!important");ke&&(V=V.slice(0,-10),ge|=ql.Important),ie?r.setStyle(n,k,V,ge):n.style.setProperty(k,V,ke?"important":"")}}}(k,ge,sl(En(),n),V,ie))}(ie,ie.data[En()],V,V[11],r,V[ge+1]=function $k(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=Pn(function xc(r){return r instanceof class bg{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?r.changingThisBreaksApplicationSecurity:r}(r)))),r}(t,n),k,ge)}(r,t,null,!0),$f}function Qy(r,t,n,k,V){let ie=null;const ge=n.directiveEnd;let ke=n.directiveStylingLast;for(-1===ke?ke=n.directiveStart:ke++;ke<ge&&(ie=t[ke],k=d0(k,ie.hostAttrs,V),ie!==r);)ke++;return null!==r&&(n.directiveStylingLast=ke),k}function d0(r,t,n){const k=n?1:2;let V=-1;if(null!==t)for(let ie=0;ie<t.length;ie++){const ge=t[ie];"number"==typeof ge?V=ge:V===k&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),pl(r,ge,!!n||t[++ie]))}return void 0===r?null:r}function o2(r,t,n,k,V,ie){const ge=null===t;let ke;for(;V>0;){const Ue=r[V],et=Array.isArray(Ue),yt=et?Ue[1]:Ue,Ht=null===yt;let mn=n[V+1];mn===la&&(mn=Ht?ia:void 0);let In=Ht?ch(mn,k):yt===k?mn:void 0;if(et&&!hm(In)&&(In=ch(Ue,k)),hm(In)&&(ke=In,ge))return ke;const Kn=r[V+1];V=ge?_l(Kn):fu(Kn)}if(null!==t){let Ue=ie?t.residualClasses:t.residualStyles;null!=Ue&&(ke=ch(Ue,k))}return ke}function hm(r){return void 0!==r}function $d(r,t=""){const n=qr(),k=Sa(),V=r+20,ie=k.firstCreatePass?uf(k,V,1,t,null):k.data[V],ge=n[V]=function Ze(r,t){return ga(r)?r.createText(t):r.createTextNode(t)}(n[11],t);Ia(k,n,ge,ie),cl(ie,!1)}function dm(r){return p0("",r,""),dm}function p0(r,t,n){const k=qr(),V=jd(k,r,t,n);return V!==la&&hf(k,En(),V),p0}function e1(r,t,n){const k=qr();return Gl(k,B(),t)&&zl(Sa(),Nn(),k,r,t,k[11],n,!0),e1}const pm="en-US";let S2=pm;function r1(r,t,n,k,V){if(r=or(r),Array.isArray(r))for(let ie=0;ie<r.length;ie++)r1(r[ie],t,n,k,V);else{const ie=Sa(),ge=qr();let ke=Nd(r)?r:or(r.provide),Ue=ex(r);const et=Io(),yt=1048575&et.providerIndexes,Ht=et.directiveStart,mn=et.providerIndexes>>20;if(Nd(r)||!r.multi){const In=new na(Ue,V,Qr),Kn=o1(ke,t,V?yt:yt+mn,Ht);-1===Kn?(_s(qs(et,ge),ie,ke),a1(ie,r,t.length),t.push(ke),et.directiveStart++,et.directiveEnd++,V&&(et.providerIndexes+=1048576),n.push(In),ge.push(In)):(n[Kn]=In,ge[Kn]=In)}else{const In=o1(ke,t,yt+mn,Ht),Kn=o1(ke,t,yt,yt+mn),xr=In>=0&&n[In],Kr=Kn>=0&&n[Kn];if(V&&!Kr||!V&&!xr){_s(qs(et,ge),ie,ke);const ui=function gE(r,t,n,k,V){const ie=new na(r,n,Qr);return ie.multi=[],ie.index=t,ie.componentProviders=0,J2(ie,V,k&&!n),ie}(V?pE:dE,n.length,V,k,Ue);!V&&Kr&&(n[Kn].providerFactory=ui),a1(ie,r,t.length,0),t.push(ke),et.directiveStart++,et.directiveEnd++,V&&(et.providerIndexes+=1048576),n.push(ui),ge.push(ui)}else a1(ie,r,In>-1?In:Kn,J2(n[V?Kn:In],Ue,!V&&k));!V&&k&&Kr&&n[Kn].componentProviders++}}}function a1(r,t,n,k){const V=Nd(t),ie=function NA(r){return!!r.useClass}(t);if(V||ie){const Ue=(ie?or(t.useClass):t).prototype.ngOnDestroy;if(Ue){const et=r.destroyHooks||(r.destroyHooks=[]);if(!V&&t.multi){const yt=et.indexOf(n);-1===yt?et.push(n,[k,Ue]):et[yt+1].push(k,Ue)}else et.push(n,Ue)}}}function J2(r,t,n){return n&&r.componentProviders++,r.multi.push(t)-1}function o1(r,t,n,k){for(let V=n;V<k;V++)if(t[V]===r)return V;return-1}function dE(r,t,n,k){return s1(this.multi,[])}function pE(r,t,n,k){const V=this.multi;let ie;if(this.providerFactory){const ge=this.providerFactory.componentProviders,ke=jc(n,n[1],this.providerFactory.index,k);ie=ke.slice(0,ge),s1(V,ie);for(let Ue=ge;Ue<ke.length;Ue++)ie.push(ke[Ue])}else ie=[],s1(V,ie);return ie}function s1(r,t){for(let n=0;n<r.length;n++)t.push((0,r[n])());return t}function is(r,t=[]){return n=>{n.providersResolver=(k,V)=>function hE(r,t,n){const k=Sa();if(k.firstCreatePass){const V=po(r);r1(n,k.data,k.blueprint,V,!0),r1(t,k.data,k.blueprint,V,!1)}}(k,V?V(r):r,t)}}class Q2{}class yE{resolveComponentFactory(t){throw function vE(r){const t=Error(`No component factory found for ${Pn(r)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=r,t}(t)}}let b0=(()=>{class r{}return r.NULL=new yE,r})();function bE(){return Qd(Io(),qr())}function Qd(r,t){return new Dl(Zo(r,t))}let Dl=(()=>{class r{constructor(n){this.nativeElement=n}}return r.__NG_ELEMENT_ID__=bE,r})();function _E(r){return r instanceof Dl?r.nativeElement:r}class _0{}let df=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function wE(){const r=qr(),n=Wa(Io().index,r);return function xE(r){return r[11]}(Da(n)?n:r)}(),r})(),TE=(()=>{class r{}return r.\u0275prov=On({token:r,providedIn:"root",factory:()=>null}),r})();class Oh{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ME=new Oh("13.3.6"),l1={};function bm(r,t,n,k,V=!1){for(;null!==n;){const ie=t[n.index];if(null!==ie&&k.push(Na(ie)),Ea(ie))for(let ke=10;ke<ie.length;ke++){const Ue=ie[ke],et=Ue[1].firstChild;null!==et&&bm(Ue[1],Ue,et,k)}const ge=n.type;if(8&ge)bm(r,t,n.child,k);else if(32&ge){const ke=Kp(n,t);let Ue;for(;Ue=ke();)k.push(Ue)}else if(16&ge){const ke=go(t,n);if(Array.isArray(ke))k.push(...ke);else{const Ue=Nf(t[16]);bm(Ue[1],Ue,ke,k,!0)}}n=V?n.projectionNext:n.next}return k}class x0{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return bm(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ea(t)){const n=t[8],k=n?n.indexOf(this):-1;k>-1&&(ar(t,k),$o(n,k))}this._attachedToViewContainer=!1}lr(this._lView[1],this._lView)}onDestroy(t){Od(this._lView[1],this._lView,null,t)}markForCheck(){Sy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Dy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function kA(r,t,n){Lu(!0);try{Dy(r,t,n)}finally{Lu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new pr(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function en(r,t){vo(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new pr(902,"");this._appRef=t}}class AE extends x0{constructor(t){super(t),this._view=t}detectChanges(){q_(this._view)}checkNoChanges(){!function EA(r){Lu(!0);try{q_(r)}finally{Lu(!1)}}(this._view)}get context(){return null}}class tw extends b0{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Ho(t);return new u1(n,this.ngModule)}}function nw(r){const t=[];for(let n in r)r.hasOwnProperty(n)&&t.push({propName:r[n],templateName:n});return t}class u1 extends Q2{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Ds(r){return r.map(tc).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return nw(this.componentDef.inputs)}get outputs(){return nw(this.componentDef.outputs)}create(t,n,k,V){const ie=(V=V||this.ngModule)?function EE(r,t){return{get:(n,k,V)=>{const ie=r.get(n,l1,V);return ie!==l1||k===l1?ie:t.get(n,k,V)}}}(t,V.injector):t,ge=ie.get(_0,Yo),ke=ie.get(TE,null),Ue=ge.createRenderer(null,this.componentDef),et=this.componentDef.selectors[0][0]||"div",yt=k?function r0(r,t,n){if(ga(r))return r.selectRootElement(t,n===ho.ShadowDom);let k="string"==typeof t?r.querySelector(t):t;return k.textContent="",k}(Ue,k,this.componentDef.encapsulation):kt(ge.createRenderer(null,this.componentDef),et,function kE(r){const t=r.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(et)),Ht=this.componentDef.onPush?576:528,mn=function hx(r,t){return{components:[],scheduler:r||Jc,clean:SA,playerHandler:t||null,flags:0}}(),In=ic(0,null,null,1,0,null,null,null,null,null),Kn=Wf(null,In,mn,Ht,null,null,ge,Ue,ke,ie);let xr,Kr;zt(Kn);try{const ui=function cx(r,t,n,k,V,ie){const ge=n[1];n[20]=r;const Ue=uf(ge,20,2,"#host",null),et=Ue.mergedAttrs=t.hostAttrs;null!==et&&(lm(Ue,et,!0),null!==r&&(Ao(V,r,et),null!==Ue.classes&&ts(V,r,Ue.classes),null!==Ue.styles&&Ys(V,r,Ue.styles)));const yt=k.createRenderer(r,t),Ht=Wf(n,cf(t),null,t.onPush?64:16,n[20],Ue,k,yt,ie||null,null);return ge.firstCreatePass&&(_s(qs(Ue,n),ge,t.type),rm(ge,Ue),im(Ue,n.length,1)),sm(n,Ht),n[20]=Ht}(yt,this.componentDef,Kn,ge,Ue);if(yt)if(k)Ao(Ue,yt,["ng-version",ME.full]);else{const{attrs:Ir,classes:zi}=function bu(r){const t=[],n=[];let k=1,V=2;for(;k<r.length;){let ie=r[k];if("string"==typeof ie)2===V?""!==ie&&t.push(ie,r[++k]):8===V&&n.push(ie);else{if(!eo(V))break;V=ie}k++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);Ir&&Ao(Ue,yt,Ir),zi&&zi.length>0&&ts(Ue,yt,zi.join(" "))}if(Kr=Fo(In,20),void 0!==n){const Ir=Kr.projection=[];for(let zi=0;zi<this.ngContentSelectors.length;zi++){const oa=n[zi];Ir.push(null!=oa?Array.from(oa):null)}}xr=function fx(r,t,n,k,V){const ie=n[1],ge=function em(r,t,n){const k=Io();r.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),am(r,k,t,rc(r,t,1,null),n));const V=jc(t,r,k.directiveStart,k);ya(V,t);const ie=Zo(k,t);return ie&&ya(ie,t),V}(ie,n,t);if(k.components.push(ge),r[8]=ge,V&&V.forEach(Ue=>Ue(ge,t)),t.contentQueries){const Ue=Io();t.contentQueries(1,ge,Ue.directiveStart)}const ke=Io();return!ie.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Un(ke.index),l0(n[1],ke,0,ke.directiveStart,ke.directiveEnd,t),nm(t,ge)),ge}(ui,this.componentDef,Kn,mn,[ZA]),Yf(In,Kn,null)}finally{Gt()}return new CE(this.componentType,xr,Qd(Kr,Kn),Kn,Kr)}}class CE extends class mE{}{constructor(t,n,k,V,ie){super(),this.location=k,this._rootLView=V,this._tNode=ie,this.instance=n,this.hostView=this.changeDetectorRef=new AE(V),this.componentType=t}get injector(){return new Vc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class pf{}class rw{}const ep=new Map;class ow extends pf{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tw(this);const k=ns(t);this._bootstrapComponents=Kl(k.bootstrap),this._r3Injector=Q_(t,n,[{provide:pf,useValue:this},{provide:b0,useValue:this.componentFactoryResolver}],Pn(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=hu.THROW_IF_NOT_FOUND,k=hi.Default){return t===hu||t===pf||t===Ly?this:this._r3Injector.get(t,n,k)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class c1 extends rw{constructor(t){super(),this.moduleType=t,null!==ns(t)&&function IE(r){const t=new Set;!function n(k){const V=ns(k,!0),ie=V.id;null!==ie&&(function iw(r,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${r} - ${Pn(t)} vs ${Pn(t.name)}`)}(ie,ep.get(ie),k),ep.set(ie,k));const ge=Kl(V.imports);for(const ke of ge)t.has(ke)||(t.add(ke),n(ke))}(r)}(t)}create(t){return new ow(this.moduleType,t)}}function sw(r,t,n,k){return function lw(r,t,n,k,V,ie){const ge=t+n;return Gl(r,ge,V)?function Cc(r,t,n){return r[t]=n}(r,ge+1,ie?k.call(ie,V):k(V)):function w0(r,t){const n=r[t];return n===la?void 0:n}(r,ge+1)}(qr(),function ks(){const r=Zi.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}(),r,t,n,k)}function f1(r){return t=>{setTimeout(r,void 0,t)}}const ta=class ZE extends J{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,k){var V,ie,ge;let ke=t,Ue=n||(()=>null),et=k;if(t&&"object"==typeof t){const Ht=t;ke=null===(V=Ht.next)||void 0===V?void 0:V.bind(Ht),Ue=null===(ie=Ht.error)||void 0===ie?void 0:ie.bind(Ht),et=null===(ge=Ht.complete)||void 0===ge?void 0:ge.bind(Ht)}this.__isAsync&&(Ue=f1(Ue),ke&&(ke=f1(ke)),et&&(et=f1(et)));const yt=super.subscribe({next:ke,error:Ue,complete:et});return t instanceof _&&t.add(yt),yt}};function XE(){return this._results[zd()]()}class h1{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=zd(),k=h1.prototype;k[n]||(k[n]=XE)}get changes(){return this._changes||(this._changes=new ta)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const k=this;k.dirty=!1;const V=su(t);(this._changesDetected=!function Sp(r,t,n){if(r.length!==t.length)return!1;for(let k=0;k<r.length;k++){let V=r[k],ie=t[k];if(n&&(V=n(V),ie=n(ie)),ie!==V)return!1}return!0}(k._results,V,n))&&(k._results=V,k.length=V.length,k.last=V[this.length-1],k.first=V[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let gf=(()=>{class r{}return r.__NG_ELEMENT_ID__=JE,r})();const $E=gf,KE=class extends $E{constructor(t,n,k){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=k}createEmbeddedView(t){const n=this._declarationTContainer.tViews,k=Wf(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);k[17]=this._declarationLView[this._declarationTContainer.index];const ie=this._declarationLView[19];return null!==ie&&(k[19]=ie.createEmbeddedView(n)),Yf(n,k,t),new x0(k)}};function JE(){return _m(Io(),qr())}function _m(r,t){return 4&r.type?new KE(t,r,Qd(r,t)):null}let uc=(()=>{class r{}return r.__NG_ELEMENT_ID__=QE,r})();function QE(){return gw(Io(),qr())}const eS=uc,dw=class extends eS{constructor(t,n,k){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=k}get element(){return Qd(this._hostTNode,this._hostLView)}get injector(){return new Vc(this._hostTNode,this._hostLView)}get parentInjector(){const t=bs(this._hostTNode,this._hostLView);if(vs(t)){const n=fl(t,this._hostLView),k=Lo(t);return new Vc(n[1].data[k+8],n)}return new Vc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=pw(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,k){const V=t.createEmbeddedView(n||{});return this.insert(V,k),V}createComponent(t,n,k,V,ie){const ge=t&&!function uh(r){return"function"==typeof r}(t);let ke;if(ge)ke=n;else{const Ht=n||{};ke=Ht.index,k=Ht.injector,V=Ht.projectableNodes,ie=Ht.ngModuleRef}const Ue=ge?t:new u1(Ho(t)),et=k||this.parentInjector;if(!ie&&null==Ue.ngModule){const mn=(ge?et:this.parentInjector).get(pf,null);mn&&(ie=mn)}const yt=Ue.create(et,V,void 0,ie);return this.insert(yt.hostView,ke),yt}insert(t,n){const k=t._lView,V=k[1];if(function $i(r){return Ea(r[3])}(k)){const yt=this.indexOf(t);if(-1!==yt)this.detach(yt);else{const Ht=k[3],mn=new dw(Ht,Ht[6],Ht[3]);mn.detach(mn.indexOf(t))}}const ie=this._adjustIndex(n),ge=this._lContainer;!function Fn(r,t,n,k){const V=10+k,ie=n.length;k>0&&(n[V-1][4]=t),k<ie-10?(t[4]=n[V],sg(n,10+k,t)):(n.push(t),t[4]=null),t[3]=n;const ge=t[17];null!==ge&&n!==ge&&function Gn(r,t){const n=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===n?r[9]=[t]:n.push(t)}(ge,t);const ke=t[19];null!==ke&&ke.insertView(r),t[2]|=128}(V,k,ge,ie);const ke=Eo(ie,ge),Ue=k[11],et=Bi(Ue,ge[7]);return null!==et&&function sn(r,t,n,k,V,ie){k[0]=V,k[6]=t,vo(r,k,n,1,V,ie)}(V,ge[6],Ue,k,et,ke),t.attachToViewContainerRef(),sg(d1(ge),ie,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=pw(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),k=ar(this._lContainer,n);k&&($o(d1(this._lContainer),n),lr(k[1],k))}detach(t){const n=this._adjustIndex(t,-1),k=ar(this._lContainer,n);return k&&null!=$o(d1(this._lContainer),n)?new x0(k):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function pw(r){return r[8]}function d1(r){return r[8]||(r[8]=[])}function gw(r,t){let n;const k=t[r.index];if(Ea(k))n=k;else{let V;if(8&r.type)V=Na(k);else{const ie=t[11];V=ie.createComment("");const ge=Zo(r,t);gi(ie,Bi(ie,ge),V,function ji(r,t){return ga(r)?r.nextSibling(t):t.nextSibling}(ie,ge),!1)}t[r.index]=n=H_(k,t,V,r),sm(t,n)}return new dw(n,r,t)}class p1{constructor(t){this.queryList=t,this.matches=null}clone(){return new p1(this.queryList)}setDirty(){this.queryList.setDirty()}}class g1{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const k=null!==t.contentQueries?t.contentQueries[0]:n.length,V=[];for(let ie=0;ie<k;ie++){const ge=n.getByIndex(ie);V.push(this.queries[ge.indexInDeclarationView].clone())}return new g1(V)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==_w(t,n).matches&&this.queries[n].setDirty()}}class mw{constructor(t,n,k=null){this.predicate=t,this.flags=n,this.read=k}}class m1{constructor(t=[]){this.queries=t}elementStart(t,n){for(let k=0;k<this.queries.length;k++)this.queries[k].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let k=0;k<this.length;k++){const V=null!==n?n.length:0,ie=this.getByIndex(k).embeddedTView(t,V);ie&&(ie.indexInDeclarationView=k,null!==n?n.push(ie):n=[ie])}return null!==n?new m1(n):null}template(t,n){for(let k=0;k<this.queries.length;k++)this.queries[k].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class v1{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new v1(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let k=t.parent;for(;null!==k&&8&k.type&&k.index!==n;)k=k.parent;return n===(null!==k?k.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const k=this.metadata.predicate;if(Array.isArray(k))for(let V=0;V<k.length;V++){const ie=k[V];this.matchTNodeWithReadOption(t,n,rS(n,ie)),this.matchTNodeWithReadOption(t,n,Af(n,t,ie,!1,!1))}else k===gf?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Af(n,t,k,!1,!1))}matchTNodeWithReadOption(t,n,k){if(null!==k){const V=this.metadata.read;if(null!==V)if(V===Dl||V===uc||V===gf&&4&n.type)this.addMatch(n.index,-2);else{const ie=Af(n,t,V,!1,!1);null!==ie&&this.addMatch(n.index,ie)}else this.addMatch(n.index,k)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function rS(r,t){const n=r.localNames;if(null!==n)for(let k=0;k<n.length;k+=2)if(n[k]===t)return n[k+1];return null}function aS(r,t,n,k){return-1===n?function iS(r,t){return 11&r.type?Qd(r,t):4&r.type?_m(r,t):null}(t,r):-2===n?function oS(r,t,n){return n===Dl?Qd(t,r):n===gf?_m(t,r):n===uc?gw(t,r):void 0}(r,t,k):jc(r,r[1],n,t)}function vw(r,t,n,k){const V=t[19].queries[k];if(null===V.matches){const ie=r.data,ge=n.matches,ke=[];for(let Ue=0;Ue<ge.length;Ue+=2){const et=ge[Ue];ke.push(et<0?null:aS(t,ie[et],ge[Ue+1],n.metadata.read))}V.matches=ke}return V.matches}function y1(r,t,n,k){const V=r.queries.getByIndex(n),ie=V.matches;if(null!==ie){const ge=vw(r,t,V,n);for(let ke=0;ke<ie.length;ke+=2){const Ue=ie[ke];if(Ue>0)k.push(ge[ke/2]);else{const et=ie[ke+1],yt=t[-Ue];for(let Ht=10;Ht<yt.length;Ht++){const mn=yt[Ht];mn[17]===mn[3]&&y1(mn[1],mn,et,k)}if(null!==yt[9]){const Ht=yt[9];for(let mn=0;mn<Ht.length;mn++){const In=Ht[mn];y1(In[1],In,et,k)}}}}}return k}function tp(r){const t=qr(),n=Sa(),k=$e();at(k+1);const V=_w(n,k);if(r.dirty&&Ml(t)===(2==(2&V.metadata.flags))){if(null===V.matches)r.reset([]);else{const ie=V.crossesNgTemplate?y1(n,t,k,[]):vw(n,t,V,k);r.reset(ie,_E),r.notifyOnChanges()}return!0}return!1}function xm(r,t,n){const k=Sa();k.firstCreatePass&&(function bw(r,t,n){null===r.queries&&(r.queries=new m1),r.queries.track(new v1(t,n))}(k,new mw(r,t,n),-1),2==(2&t)&&(k.staticViewQueries=!0)),function yw(r,t,n){const k=new h1(4==(4&n));Od(r,t,k,k.destroy),null===t[19]&&(t[19]=new g1),t[19].queries.push(new p1(k))}(k,qr(),t)}function np(){return function sS(r,t){return r[19].queries[t].queryList}(qr(),$e())}function _w(r,t){return r.queries.getByIndex(t)}function Mm(...r){}const A1=new fa("Application Initializer");let k1=(()=>{class r{constructor(n){this.appInits=n,this.resolve=Mm,this.reject=Mm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((k,V)=>{this.resolve=k,this.reject=V})}runInitializers(){if(this.initialized)return;const n=[],k=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let V=0;V<this.appInits.length;V++){const ie=this.appInits[V]();if(h0(ie))n.push(ie);else if(Zy(ie)){const ge=new Promise((ke,Ue)=>{ie.subscribe({complete:ke,error:Ue})});n.push(ge)}}Promise.all(n).then(()=>{k()}).catch(V=>{this.reject(V)}),0===n.length&&k(),this.initialized=!0}}return r.\u0275fac=function(n){return new(n||r)(Ni(A1,8))},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const A0=new fa("AppId",{providedIn:"root",factory:function Nw(){return`${E1()}${E1()}${E1()}`}});function E1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zw=new fa("Platform Initializer"),S1=new fa("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Bw=new fa("appBootstrapListener");let kS=(()=>{class r{log(n){console.log(n)}warn(n){console.warn(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const mf=new fa("LocaleId",{providedIn:"root",factory:()=>Xl(mf,hi.Optional|hi.SkipSelf)||function ES(){return"undefined"!=typeof $localize&&$localize.locale||pm}()});class CS{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let jw=(()=>{class r{compileModuleSync(n){return new c1(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const k=this.compileModuleSync(n),ie=Kl(ns(n).declarations).reduce((ge,ke)=>{const Ue=Ho(ke);return Ue&&ge.push(new u1(Ue)),ge},[]);return new CS(k,ie)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const IS=(()=>Promise.resolve(0))();function C1(r){"undefined"==typeof Zone?IS.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Is{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:k=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ta(!1),this.onMicrotaskEmpty=new ta(!1),this.onStable=new ta(!1),this.onError=new ta(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const V=this;V._nesting=0,V._outer=V._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(V._inner=V._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(V._inner=V._inner.fork(Zone.longStackTraceZoneSpec)),V.shouldCoalesceEventChangeDetection=!k&&n,V.shouldCoalesceRunChangeDetection=k,V.lastRequestAnimationFrameId=-1,V.nativeRequestAnimationFrame=function LS(){let r=pa.requestAnimationFrame,t=pa.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&t){const n=r[Zone.__symbol__("OriginalDelegate")];n&&(r=n);const k=t[Zone.__symbol__("OriginalDelegate")];k&&(t=k)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function RS(r){const t=()=>{!function OS(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(pa,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,I1(r),r.isCheckStableRunning=!0,D1(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),I1(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,k,V,ie,ge,ke)=>{try{return Vw(r),n.invokeTask(V,ie,ge,ke)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===ie.type||r.shouldCoalesceRunChangeDetection)&&t(),Uw(r)}},onInvoke:(n,k,V,ie,ge,ke,Ue)=>{try{return Vw(r),n.invoke(V,ie,ge,ke,Ue)}finally{r.shouldCoalesceRunChangeDetection&&t(),Uw(r)}},onHasTask:(n,k,V,ie)=>{n.hasTask(V,ie),k===V&&("microTask"==ie.change?(r._hasPendingMicrotasks=ie.microTask,I1(r),D1(r)):"macroTask"==ie.change&&(r.hasPendingMacrotasks=ie.macroTask))},onHandleError:(n,k,V,ie)=>(n.handleError(V,ie),r.runOutsideAngular(()=>r.onError.emit(ie)),!1)})}(V)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Is.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Is.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,k){return this._inner.run(t,n,k)}runTask(t,n,k,V){const ie=this._inner,ge=ie.scheduleEventTask("NgZoneEvent: "+V,t,PS,Mm,Mm);try{return ie.runTask(ge,n,k)}finally{ie.cancelTask(ge)}}runGuarded(t,n,k){return this._inner.runGuarded(t,n,k)}runOutsideAngular(t){return this._outer.run(t)}}const PS={};function D1(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function I1(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function Vw(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Uw(r){r._nesting--,D1(r)}class FS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ta,this.onMicrotaskEmpty=new ta,this.onStable=new ta,this.onError=new ta}run(t,n,k){return t.apply(n,k)}runGuarded(t,n,k){return t.apply(n,k)}runOutsideAngular(t){return t()}runTask(t,n,k,V){return t.apply(n,k)}}let L1=(()=>{class r{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Is.assertNotInAngularZone(),C1(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())C1(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(k=>!k.updateCb||!k.updateCb(n)||(clearTimeout(k.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,k,V){let ie=-1;k&&k>0&&(ie=setTimeout(()=>{this._callbacks=this._callbacks.filter(ge=>ge.timeoutId!==ie),n(this._didWork,this.getPendingTasks())},k)),this._callbacks.push({doneCb:n,timeoutId:ie,updateCb:V})}whenStable(n,k,V){if(V&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,k,V),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,k,V){return[]}}return r.\u0275fac=function(n){return new(n||r)(Ni(Is))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})(),NS=(()=>{class r{constructor(){this._applications=new Map,P1.addToWindow(this)}registerApplication(n,k){this._applications.set(n,k)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,k=!0){return P1.findTestabilityInTree(this,n,k)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();class zS{addToWindow(t){}findTestabilityInTree(t,n,k){return null}}let P1=new zS,Rh=null;const Hw=new fa("AllowMultipleToken"),qw=new fa("PlatformOnDestroy");class Gw{constructor(t,n){this.name=t,this.token=n}}function Ww(r,t,n=[]){const k=`Platform: ${t}`,V=new fa(k);return(ie=[])=>{let ge=O1();if(!ge||ge.injector.get(Hw,!1)){const ke=[...n,...ie,{provide:V,useValue:!0}];r?r(ke):function US(r){if(Rh&&!Rh.get(Hw,!1))throw new pr(400,"");Rh=r;const t=r.get(Yw),n=r.get(zw,null);n&&n.forEach(k=>k())}(function qS(r=[],t){return hu.create({name:t,providers:[{provide:Py,useValue:"platform"},{provide:qw,useValue:()=>Rh=null},...r]})}(ke,k))}return function HS(r){const t=O1();if(!t)throw new pr(401,"");return t}()}}function O1(){var r;return null!==(r=null==Rh?void 0:Rh.get(Yw))&&void 0!==r?r:null}let Yw=(()=>{class r{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,k){const ke=function GS(r,t){let n;return n="noop"===r?new FS:("zone.js"===r?void 0:r)||new Is({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(k?k.ngZone:void 0,{ngZoneEventCoalescing:k&&k.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:k&&k.ngZoneRunCoalescing||!1}),Ue=[{provide:Is,useValue:ke}];return ke.run(()=>{const et=hu.create({providers:Ue,parent:this.injector,name:n.moduleType.name}),yt=n.create(et),Ht=yt.injector.get(Ru,null);if(!Ht)throw new pr(402,"");return ke.runOutsideAngular(()=>{const mn=ke.onError.subscribe({next:In=>{Ht.handleError(In)}});yt.onDestroy(()=>{F1(this._modules,yt),mn.unsubscribe()})}),function WS(r,t,n){try{const k=n();return h0(k)?k.catch(V=>{throw t.runOutsideAngular(()=>r.handleError(V)),V}):k}catch(k){throw t.runOutsideAngular(()=>r.handleError(k)),k}}(Ht,ke,()=>{const mn=yt.injector.get(k1);return mn.runInitializers(),mn.donePromise.then(()=>(function x4(r){Hn(r,"Expected localeId to be defined"),"string"==typeof r&&(S2=r.toLowerCase().replace(/_/g,"-"))}(yt.injector.get(mf,pm)||pm),this._moduleDoBootstrap(yt),yt))})})}bootstrapModule(n,k=[]){const V=Zw({},k);return function jS(r,t,n){const k=new c1(n);return Promise.resolve(k)}(0,0,n).then(ie=>this.bootstrapModuleFactory(ie,V))}_moduleDoBootstrap(n){const k=n.injector.get(R1);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(V=>k.bootstrap(V));else{if(!n.instance.ngDoBootstrap)throw new pr(403,"");n.instance.ngDoBootstrap(k)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pr(404,"");this._modules.slice().forEach(k=>k.destroy()),this._destroyListeners.forEach(k=>k());const n=this._injector.get(qw,null);null==n||n(),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(n){return new(n||r)(Ni(hu))},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function Zw(r,t){return Array.isArray(t)?t.reduce(Zw,r):Object.assign(Object.assign({},r),t)}let R1=(()=>{class r{constructor(n,k,V,ie){this._zone=n,this._injector=k,this._exceptionHandler=V,this._initStatus=ie,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const ge=new U(Ue=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Ue.next(this._stable),Ue.complete()})}),ke=new U(Ue=>{let et;this._zone.runOutsideAngular(()=>{et=this._zone.onStable.subscribe(()=>{Is.assertNotInAngularZone(),C1(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Ue.next(!0))})})});const yt=this._zone.onUnstable.subscribe(()=>{Is.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Ue.next(!1)}))});return()=>{et.unsubscribe(),yt.unsubscribe()}});this.isStable=function Yn(...r){const t=$t(r),n=function Dt(r,t){return"number"==typeof vt(r)?r.pop():t}(r,1/0),k=r;return k.length?1===k.length?pn(k[0]):st(n)(Sn(k,t)):bt}(ge,ke.pipe(function cn(r={}){const{connector:t=(()=>new J),resetOnError:n=!0,resetOnComplete:k=!0,resetOnRefCountZero:V=!0}=r;return ie=>{let ge=null,ke=null,Ue=null,et=0,yt=!1,Ht=!1;const mn=()=>{null==ke||ke.unsubscribe(),ke=null},In=()=>{mn(),ge=Ue=null,yt=Ht=!1},Kn=()=>{const xr=ge;In(),null==xr||xr.unsubscribe()};return G((xr,Kr)=>{et++,!Ht&&!yt&&mn();const ui=Ue=null!=Ue?Ue:t();Kr.add(()=>{et--,0===et&&!Ht&&!yt&&(ke=vn(Kn,V))}),ui.subscribe(Kr),ge||(ge=new S({next:Ir=>ui.next(Ir),error:Ir=>{Ht=!0,mn(),ke=vn(In,n,Ir),ui.error(Ir)},complete:()=>{yt=!0,mn(),ke=vn(In,k),ui.complete()}}),Sn(xr).subscribe(ge))})(ie)}}()))}bootstrap(n,k){if(!this._initStatus.done)throw new pr(405,"");let V;V=n instanceof Q2?n:this._injector.get(b0).resolveComponentFactory(n),this.componentTypes.push(V.componentType);const ie=function VS(r){return r.isBoundToModule}(V)?void 0:this._injector.get(pf),ke=V.create(hu.NULL,[],k||V.selector,ie),Ue=ke.location.nativeElement,et=ke.injector.get(L1,null),yt=et&&ke.injector.get(NS);return et&&yt&&yt.registerApplication(Ue,et),ke.onDestroy(()=>{this.detachView(ke.hostView),F1(this.components,ke),yt&&yt.unregisterApplication(Ue)}),this._loadComponent(ke),ke}tick(){if(this._runningTick)throw new pr(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const k=n;this._views.push(k),k.attachToAppRef(this)}detachView(n){const k=n;F1(this._views,k),k.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Bw,[]).concat(this._bootstrapListeners).forEach(V=>V(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(n){return new(n||r)(Ni(Is),Ni(hu),Ni(Ru),Ni(k1))},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function F1(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}let $w=!0,k0=(()=>{class r{}return r.__NG_ELEMENT_ID__=XS,r})();function XS(r){return function $S(r,t,n){if(Ro(r)&&!n){const k=Wa(r.index,t);return new x0(k,k)}return 47&r.type?new x0(t[16],t):null}(Io(),qr(),16==(16&r))}class t3{constructor(){}supports(t){return c0(t)}create(t){return new nC(t)}}const tC=(r,t)=>t;class nC{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||tC}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,k=this._removalsHead,V=0,ie=null;for(;n||k;){const ge=!k||n&&n.currentIndex<r3(k,V,ie)?n:k,ke=r3(ge,V,ie),Ue=ge.currentIndex;if(ge===k)V--,k=k._nextRemoved;else if(n=n._next,null==ge.previousIndex)V++;else{ie||(ie=[]);const et=ke-V,yt=Ue-V;if(et!=yt){for(let mn=0;mn<et;mn++){const In=mn<ie.length?ie[mn]:ie[mn]=0,Kn=In+mn;yt<=Kn&&Kn<et&&(ie[mn]=In+1)}ie[ge.previousIndex]=yt-et}}ke!==Ue&&t(ge,ke,Ue)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!c0(t))throw new pr(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let V,ie,ge,n=this._itHead,k=!1;if(Array.isArray(t)){this.length=t.length;for(let ke=0;ke<this.length;ke++)ie=t[ke],ge=this._trackByFn(ke,ie),null!==n&&Object.is(n.trackById,ge)?(k&&(n=this._verifyReinsertion(n,ie,ge,ke)),Object.is(n.item,ie)||this._addIdentityChange(n,ie)):(n=this._mismatch(n,ie,ge,ke),k=!0),n=n._next}else V=0,function ik(r,t){if(Array.isArray(r))for(let n=0;n<r.length;n++)t(r[n]);else{const n=r[zd()]();let k;for(;!(k=n.next()).done;)t(k.value)}}(t,ke=>{ge=this._trackByFn(V,ke),null!==n&&Object.is(n.trackById,ge)?(k&&(n=this._verifyReinsertion(n,ke,ge,V)),Object.is(n.item,ke)||this._addIdentityChange(n,ke)):(n=this._mismatch(n,ke,ge,V),k=!0),n=n._next,V++}),this.length=V;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,k,V){let ie;return null===t?ie=this._itTail:(ie=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(k,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,ie,V)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(k,V))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,ie,V)):t=this._addAfter(new rC(n,k),ie,V),t}_verifyReinsertion(t,n,k,V){let ie=null===this._unlinkedRecords?null:this._unlinkedRecords.get(k,null);return null!==ie?t=this._reinsertAfter(ie,t._prev,V):t.currentIndex!=V&&(t.currentIndex=V,this._addToMoves(t,V)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,k){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const V=t._prevRemoved,ie=t._nextRemoved;return null===V?this._removalsHead=ie:V._nextRemoved=ie,null===ie?this._removalsTail=V:ie._prevRemoved=V,this._insertAfter(t,n,k),this._addToMoves(t,k),t}_moveAfter(t,n,k){return this._unlink(t),this._insertAfter(t,n,k),this._addToMoves(t,k),t}_addAfter(t,n,k){return this._insertAfter(t,n,k),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,k){const V=null===n?this._itHead:n._next;return t._next=V,t._prev=n,null===V?this._itTail=t:V._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new n3),this._linkedRecords.put(t),t.currentIndex=k,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,k=t._next;return null===n?this._itHead=k:n._next=k,null===k?this._itTail=n:k._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new n3),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class rC{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iC{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let k;for(k=this._head;null!==k;k=k._nextDup)if((null===n||n<=k.currentIndex)&&Object.is(k.trackById,t))return k;return null}remove(t){const n=t._prevDup,k=t._nextDup;return null===n?this._head=k:n._nextDup=k,null===k?this._tail=n:k._prevDup=n,null===this._head}}class n3{constructor(){this.map=new Map}put(t){const n=t.trackById;let k=this.map.get(n);k||(k=new iC,this.map.set(n,k)),k.add(t)}get(t,n){const V=this.map.get(t);return V?V.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function r3(r,t,n){const k=r.previousIndex;if(null===k)return k;let V=0;return n&&k<n.length&&(V=n[k]),k+t+V}class a3{constructor(){}supports(t){return t instanceof Map||By(t)}create(){return new aC}}class aC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||By(t)))throw new pr(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(k,V)=>{if(n&&n.key===V)this._maybeAddToChanges(n,k),this._appendAfter=n,n=n._next;else{const ie=this._getOrCreateRecordForKey(V,k);n=this._insertBeforeOrAppend(n,ie)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let k=n;null!==k;k=k._nextRemoved)k===this._mapHead&&(this._mapHead=null),this._records.delete(k.key),k._nextRemoved=k._next,k.previousValue=k.currentValue,k.currentValue=null,k._prev=null,k._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const k=t._prev;return n._next=t,n._prev=k,t._prev=n,k&&(k._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const V=this._records.get(t);this._maybeAddToChanges(V,n);const ie=V._prev,ge=V._next;return ie&&(ie._next=ge),ge&&(ge._prev=ie),V._next=null,V._prev=null,V}const k=new oC(t);return this._records.set(t,k),k.currentValue=n,this._addToAdditions(k),k}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(k=>n(t[k],k))}}class oC{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function o3(){return new E0([new t3])}let E0=(()=>{class r{constructor(n){this.factories=n}static create(n,k){if(null!=k){const V=k.factories.slice();n=n.concat(V)}return new r(n)}static extend(n){return{provide:r,useFactory:k=>r.create(n,k||o3()),deps:[[r,new gh,new Qu]]}}find(n){const k=this.factories.find(V=>V.supports(n));if(null!=k)return k;throw new pr(901,"")}}return r.\u0275prov=On({token:r,providedIn:"root",factory:o3}),r})();function s3(){return new ip([new a3])}let ip=(()=>{class r{constructor(n){this.factories=n}static create(n,k){if(k){const V=k.factories.slice();n=n.concat(V)}return new r(n)}static extend(n){return{provide:r,useFactory:k=>r.create(n,k||s3()),deps:[[r,new gh,new Qu]]}}find(n){const k=this.factories.find(ie=>ie.supports(n));if(k)return k;throw new pr(901,"")}}return r.\u0275prov=On({token:r,providedIn:"root",factory:s3}),r})();const uC=Ww(null,"core",[]);let cC=(()=>{class r{constructor(n){}}return r.\u0275fac=function(n){return new(n||r)(Ni(R1))},r.\u0275mod=no({type:r}),r.\u0275inj=ir({}),r})(),Em=null;function Lc(){return Em}const rl=new fa("DocumentToken");let Nh=(()=>{class r{historyGo(n){throw new Error("Not implemented")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=On({token:r,factory:function(){return function pC(){return Ni(l3)}()},providedIn:"platform"}),r})();const gC=new fa("Location Initialized");let l3=(()=>{class r extends Nh{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Lc().getBaseHref(this._doc)}onPopState(n){const k=Lc().getGlobalEventTarget(this._doc,"window");return k.addEventListener("popstate",n,!1),()=>k.removeEventListener("popstate",n)}onHashChange(n){const k=Lc().getGlobalEventTarget(this._doc,"window");return k.addEventListener("hashchange",n,!1),()=>k.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,k,V){u3()?this._history.pushState(n,k,V):this.location.hash=V}replaceState(n,k,V){u3()?this._history.replaceState(n,k,V):this.location.hash=V}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return r.\u0275fac=function(n){return new(n||r)(Ni(rl))},r.\u0275prov=On({token:r,factory:function(){return function mC(){return new l3(Ni(rl))}()},providedIn:"platform"}),r})();function u3(){return!!window.history.pushState}function V1(r,t){if(0==r.length)return t;if(0==t.length)return r;let n=0;return r.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?r+t.substring(1):1==n?r+t:r+"/"+t}function c3(r){const t=r.match(/#|\?|$/),n=t&&t.index||r.length;return r.slice(0,n-("/"===r[n-1]?1:0))+r.slice(n)}function vf(r){return r&&"?"!==r[0]?"?"+r:r}let ap=(()=>{class r{historyGo(n){throw new Error("Not implemented")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=On({token:r,factory:function(){return function vC(r){const t=Ni(rl).location;return new f3(Ni(Nh),t&&t.origin||"")}()},providedIn:"root"}),r})();const U1=new fa("appBaseHref");let f3=(()=>{class r extends ap{constructor(n,k){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==k&&(k=this._platformLocation.getBaseHrefFromDOM()),null==k)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=k}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return V1(this._baseHref,n)}path(n=!1){const k=this._platformLocation.pathname+vf(this._platformLocation.search),V=this._platformLocation.hash;return V&&n?`${k}${V}`:k}pushState(n,k,V,ie){const ge=this.prepareExternalUrl(V+vf(ie));this._platformLocation.pushState(n,k,ge)}replaceState(n,k,V,ie){const ge=this.prepareExternalUrl(V+vf(ie));this._platformLocation.replaceState(n,k,ge)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var k,V;null===(V=(k=this._platformLocation).historyGo)||void 0===V||V.call(k,n)}}return r.\u0275fac=function(n){return new(n||r)(Ni(Nh),Ni(U1,8))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})(),yC=(()=>{class r extends ap{constructor(n,k){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=k&&(this._baseHref=k)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let k=this._platformLocation.hash;return null==k&&(k="#"),k.length>0?k.substring(1):k}prepareExternalUrl(n){const k=V1(this._baseHref,n);return k.length>0?"#"+k:k}pushState(n,k,V,ie){let ge=this.prepareExternalUrl(V+vf(ie));0==ge.length&&(ge=this._platformLocation.pathname),this._platformLocation.pushState(n,k,ge)}replaceState(n,k,V,ie){let ge=this.prepareExternalUrl(V+vf(ie));0==ge.length&&(ge=this._platformLocation.pathname),this._platformLocation.replaceState(n,k,ge)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var k,V;null===(V=(k=this._platformLocation).historyGo)||void 0===V||V.call(k,n)}}return r.\u0275fac=function(n){return new(n||r)(Ni(Nh),Ni(U1,8))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})(),H1=(()=>{class r{constructor(n,k){this._subject=new ta,this._urlChangeListeners=[],this._platformStrategy=n;const V=this._platformStrategy.getBaseHref();this._platformLocation=k,this._baseHref=c3(h3(V)),this._platformStrategy.onPopState(ie=>{this._subject.emit({url:this.path(!0),pop:!0,state:ie.state,type:ie.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,k=""){return this.path()==this.normalize(n+vf(k))}normalize(n){return r.stripTrailingSlash(function _C(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,h3(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,k="",V=null){this._platformStrategy.pushState(V,"",n,k),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vf(k)),V)}replaceState(n,k="",V=null){this._platformStrategy.replaceState(V,"",n,k),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vf(k)),V)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var k,V;null===(V=(k=this._platformStrategy).historyGo)||void 0===V||V.call(k,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(k=>{this._notifyUrlChangeListeners(k.url,k.state)}))}_notifyUrlChangeListeners(n="",k){this._urlChangeListeners.forEach(V=>V(n,k))}subscribe(n,k,V){return this._subject.subscribe({next:n,error:k,complete:V})}}return r.normalizeQueryParams=vf,r.joinWithSlash=V1,r.stripTrailingSlash=c3,r.\u0275fac=function(n){return new(n||r)(Ni(ap),Ni(Nh))},r.\u0275prov=On({token:r,factory:function(){return function bC(){return new H1(Ni(ap),Ni(Nh))}()},providedIn:"root"}),r})();function h3(r){return r.replace(/\/index.html$/,"")}let x3=(()=>{class r{constructor(n,k,V,ie){this._iterableDiffers=n,this._keyValueDiffers=k,this._ngEl=V,this._renderer=ie,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&(c0(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(k=>this._toggleClass(k.key,k.currentValue)),n.forEachChangedItem(k=>this._toggleClass(k.key,k.currentValue)),n.forEachRemovedItem(k=>{k.previousValue&&this._toggleClass(k.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(k=>{if("string"!=typeof k.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Pn(k.item)}`);this._toggleClass(k.item,!0)}),n.forEachRemovedItem(k=>this._toggleClass(k.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(k=>this._toggleClass(k,!0)):Object.keys(n).forEach(k=>this._toggleClass(k,!!n[k])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(k=>this._toggleClass(k,!1)):Object.keys(n).forEach(k=>this._toggleClass(k,!1)))}_toggleClass(n,k){(n=n.trim())&&n.split(/\s+/g).forEach(V=>{k?this._renderer.addClass(this._ngEl.nativeElement,V):this._renderer.removeClass(this._ngEl.nativeElement,V)})}}return r.\u0275fac=function(n){return new(n||r)(Qr(E0),Qr(ip),Qr(Dl),Qr(df))},r.\u0275dir=Wi({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),r})();class a6{constructor(t,n,k,V){this.$implicit=t,this.ngForOf=n,this.index=k,this.count=V}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let w3=(()=>{class r{constructor(n,k,V){this._viewContainer=n,this._template=k,this._differs=V,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const k=this._viewContainer;n.forEachOperation((V,ie,ge)=>{if(null==V.previousIndex)k.createEmbeddedView(this._template,new a6(V.item,this._ngForOf,-1,-1),null===ge?void 0:ge);else if(null==ge)k.remove(null===ie?void 0:ie);else if(null!==ie){const ke=k.get(ie);k.move(ke,ge),T3(ke,V)}});for(let V=0,ie=k.length;V<ie;V++){const ke=k.get(V).context;ke.index=V,ke.count=ie,ke.ngForOf=this._ngForOf}n.forEachIdentityChange(V=>{T3(k.get(V.currentIndex),V)})}static ngTemplateContextGuard(n,k){return!0}}return r.\u0275fac=function(n){return new(n||r)(Qr(uc),Qr(gf),Qr(E0))},r.\u0275dir=Wi({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();function T3(r,t){r.context.$implicit=t.item}let Nm=(()=>{class r{constructor(n,k,V){this._ngEl=n,this._differs=k,this._renderer=V,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,k){const[V,ie]=n.split(".");null!=(k=null!=k&&ie?`${k}${ie}`:k)?this._renderer.setStyle(this._ngEl.nativeElement,V,k):this._renderer.removeStyle(this._ngEl.nativeElement,V)}_applyChanges(n){n.forEachRemovedItem(k=>this._setStyle(k.key,null)),n.forEachAddedItem(k=>this._setStyle(k.key,k.currentValue)),n.forEachChangedItem(k=>this._setStyle(k.key,k.currentValue))}}return r.\u0275fac=function(n){return new(n||r)(Qr(Dl),Qr(ip),Qr(df))},r.\u0275dir=Wi({type:r,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),r})(),op=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r}),r.\u0275inj=ir({}),r})();const E3="browser";let N6=(()=>{class r{}return r.\u0275prov=On({token:r,providedIn:"root",factory:()=>new z6(Ni(rl),window)}),r})();class z6{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function B6(r,t){const n=r.getElementById(t)||r.getElementsByName(t)[0];if(n)return n;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const k=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let V=k.currentNode;for(;V;){const ie=V.shadowRoot;if(ie){const ge=ie.getElementById(t)||ie.querySelector(`[name="${t}"]`);if(ge)return ge}V=k.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),k=n.left+this.window.pageXOffset,V=n.top+this.window.pageYOffset,ie=this.offset();this.window.scrollTo(k-ie[0],V-ie[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=S3(this.window.history)||S3(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function S3(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class rb extends class V6 extends class dC{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function hC(r){Em||(Em=r)}(new rb)}onAndCancel(t,n,k){return t.addEventListener(n,k,!1),()=>{t.removeEventListener(n,k,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function U6(){return D0=D0||document.querySelector("base"),D0?D0.getAttribute("href"):null}();return null==n?null:function H6(r){zm=zm||document.createElement("a"),zm.setAttribute("href",r);const t=zm.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){D0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function r6(r,t){t=encodeURIComponent(t);for(const n of r.split(";")){const k=n.indexOf("="),[V,ie]=-1==k?[n,""]:[n.slice(0,k),n.slice(k+1)];if(V.trim()===t)return decodeURIComponent(ie)}return null}(document.cookie,t)}}let zm,D0=null;const C3=new fa("TRANSITION_ID"),G6=[{provide:A1,useFactory:function q6(r,t,n){return()=>{n.get(k1).donePromise.then(()=>{const k=Lc(),V=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let ie=0;ie<V.length;ie++)k.remove(V[ie])})}},deps:[C3,rl,hu],multi:!0}];class ib{static init(){!function BS(r){P1=r}(new ib)}addToWindow(t){pa.getAngularTestability=(k,V=!0)=>{const ie=t.findTestabilityInTree(k,V);if(null==ie)throw new Error("Could not find testability for element.");return ie},pa.getAllAngularTestabilities=()=>t.getAllTestabilities(),pa.getAllAngularRootElements=()=>t.getAllRootElements(),pa.frameworkStabilizers||(pa.frameworkStabilizers=[]),pa.frameworkStabilizers.push(k=>{const V=pa.getAllAngularTestabilities();let ie=V.length,ge=!1;const ke=function(Ue){ge=ge||Ue,ie--,0==ie&&k(ge)};V.forEach(function(Ue){Ue.whenStable(ke)})})}findTestabilityInTree(t,n,k){if(null==n)return null;const V=t.getTestability(n);return null!=V?V:k?Lc().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let W6=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();const Bm=new fa("EventManagerPlugins");let jm=(()=>{class r{constructor(n,k){this._zone=k,this._eventNameToPlugin=new Map,n.forEach(V=>V.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,k,V){return this._findPluginFor(k).addEventListener(n,k,V)}addGlobalEventListener(n,k,V){return this._findPluginFor(k).addGlobalEventListener(n,k,V)}getZone(){return this._zone}_findPluginFor(n){const k=this._eventNameToPlugin.get(n);if(k)return k;const V=this._plugins;for(let ie=0;ie<V.length;ie++){const ge=V[ie];if(ge.supports(n))return this._eventNameToPlugin.set(n,ge),ge}throw new Error(`No event manager plugin found for event ${n}`)}}return r.\u0275fac=function(n){return new(n||r)(Ni(Bm),Ni(Is))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();class D3{constructor(t){this._doc=t}addGlobalEventListener(t,n,k){const V=Lc().getGlobalEventTarget(this._doc,t);if(!V)throw new Error(`Unsupported event target ${V} for event ${n}`);return this.addEventListener(V,n,k)}}let I3=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(n){const k=new Set;n.forEach(V=>{this._stylesSet.has(V)||(this._stylesSet.add(V),k.add(V))}),this.onStylesAdded(k)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})(),I0=(()=>{class r extends I3{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,k,V){n.forEach(ie=>{const ge=this._doc.createElement("style");ge.textContent=ie,V.push(k.appendChild(ge))})}addHost(n){const k=[];this._addStylesToHost(this._stylesSet,n,k),this._hostNodes.set(n,k)}removeHost(n){const k=this._hostNodes.get(n);k&&k.forEach(L3),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((k,V)=>{this._addStylesToHost(n,V,k)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(L3))}}return r.\u0275fac=function(n){return new(n||r)(Ni(rl))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();function L3(r){Lc().remove(r)}const ab={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ob=/%COMP%/g;function Vm(r,t,n){for(let k=0;k<t.length;k++){let V=t[k];Array.isArray(V)?Vm(r,V,n):(V=V.replace(ob,r),n.push(V))}return n}function R3(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let Um=(()=>{class r{constructor(n,k,V){this.eventManager=n,this.sharedStylesHost=k,this.appId=V,this.rendererByCompId=new Map,this.defaultRenderer=new sb(n)}createRenderer(n,k){if(!n||!k)return this.defaultRenderer;switch(k.encapsulation){case ho.Emulated:{let V=this.rendererByCompId.get(k.id);return V||(V=new J6(this.eventManager,this.sharedStylesHost,k,this.appId),this.rendererByCompId.set(k.id,V)),V.applyToHost(n),V}case 1:case ho.ShadowDom:return new Q6(this.eventManager,this.sharedStylesHost,n,k);default:if(!this.rendererByCompId.has(k.id)){const V=Vm(k.id,k.styles,[]);this.sharedStylesHost.addStyles(V),this.rendererByCompId.set(k.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(n){return new(n||r)(Ni(jm),Ni(I0),Ni(A0))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();class sb{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(ab[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,k){t&&t.insertBefore(n,k)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let k="string"==typeof t?document.querySelector(t):t;if(!k)throw new Error(`The selector "${t}" did not match any elements`);return n||(k.textContent=""),k}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,k,V){if(V){n=V+":"+n;const ie=ab[V];ie?t.setAttributeNS(ie,n,k):t.setAttribute(n,k)}else t.setAttribute(n,k)}removeAttribute(t,n,k){if(k){const V=ab[k];V?t.removeAttributeNS(V,n):t.removeAttribute(`${k}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,k,V){V&(ql.DashCase|ql.Important)?t.style.setProperty(n,k,V&ql.Important?"important":""):t.style[n]=k}removeStyle(t,n,k){k&ql.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,k){t[n]=k}setValue(t,n){t.nodeValue=n}listen(t,n,k){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,R3(k)):this.eventManager.addEventListener(t,n,R3(k))}}class J6 extends sb{constructor(t,n,k,V){super(t),this.component=k;const ie=Vm(V+"-"+k.id,k.styles,[]);n.addStyles(ie),this.contentAttr=function X6(r){return"_ngcontent-%COMP%".replace(ob,r)}(V+"-"+k.id),this.hostAttr=function $6(r){return"_nghost-%COMP%".replace(ob,r)}(V+"-"+k.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const k=super.createElement(t,n);return super.setAttribute(k,this.contentAttr,""),k}}class Q6 extends sb{constructor(t,n,k,V){super(t),this.sharedStylesHost=n,this.hostEl=k,this.shadowRoot=k.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ie=Vm(V.id,V.styles,[]);for(let ge=0;ge<ie.length;ge++){const ke=document.createElement("style");ke.textContent=ie[ge],this.shadowRoot.appendChild(ke)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,k){return super.insertBefore(this.nodeOrShadowRoot(t),n,k)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let eD=(()=>{class r extends D3{constructor(n){super(n)}supports(n){return!0}addEventListener(n,k,V){return n.addEventListener(k,V,!1),()=>this.removeEventListener(n,k,V)}removeEventListener(n,k,V){return n.removeEventListener(k,V)}}return r.\u0275fac=function(n){return new(n||r)(Ni(rl))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();const N3=["alt","control","meta","shift"],nD={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},rD={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let iD=(()=>{class r extends D3{constructor(n){super(n)}supports(n){return null!=r.parseEventName(n)}addEventListener(n,k,V){const ie=r.parseEventName(k),ge=r.eventCallback(ie.fullKey,V,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lc().onAndCancel(n,ie.domEventName,ge))}static parseEventName(n){const k=n.toLowerCase().split("."),V=k.shift();if(0===k.length||"keydown"!==V&&"keyup"!==V)return null;const ie=r._normalizeKey(k.pop());let ge="";if(N3.forEach(Ue=>{const et=k.indexOf(Ue);et>-1&&(k.splice(et,1),ge+=Ue+".")}),ge+=ie,0!=k.length||0===ie.length)return null;const ke={};return ke.domEventName=V,ke.fullKey=ge,ke}static getEventFullKey(n){let k="",V=function aD(r){let t=r.key;if(null==t){if(t=r.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===r.location&&z3.hasOwnProperty(t)&&(t=z3[t]))}return nD[t]||t}(n);return V=V.toLowerCase()," "===V?V="space":"."===V&&(V="dot"),N3.forEach(ie=>{ie!=V&&rD[ie](n)&&(k+=ie+".")}),k+=V,k}static eventCallback(n,k,V){return ie=>{r.getEventFullKey(ie)===n&&V.runGuarded(()=>k(ie))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return r.\u0275fac=function(n){return new(n||r)(Ni(rl))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();const uD=Ww(uC,"browser",[{provide:S1,useValue:E3},{provide:zw,useValue:function oD(){rb.makeCurrent(),ib.init()},multi:!0},{provide:rl,useFactory:function lD(){return function To(r){Yi=r}(document),document},deps:[]}]),cD=[{provide:Py,useValue:"root"},{provide:Ru,useFactory:function sD(){return new Ru},deps:[]},{provide:Bm,useClass:eD,multi:!0,deps:[rl,Is,S1]},{provide:Bm,useClass:iD,multi:!0,deps:[rl]},{provide:Um,useClass:Um,deps:[jm,I0,A0]},{provide:_0,useExisting:Um},{provide:I3,useExisting:I0},{provide:I0,useClass:I0,deps:[rl]},{provide:L1,useClass:L1,deps:[Is]},{provide:jm,useClass:jm,deps:[Bm,Is]},{provide:class j6{},useClass:W6,deps:[]}];let B3=(()=>{class r{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:r,providers:[{provide:A0,useValue:n.appId},{provide:C3,useExisting:A0},G6]}}}return r.\u0275fac=function(n){return new(n||r)(Ni(r,12))},r.\u0275mod=no({type:r}),r.\u0275inj=ir({providers:cD,imports:[op,cC]}),r})();"undefined"!=typeof window&&window;var xD=ue(102);const wD=["plot"],TD=["*"];class ao{static setModuleName(t){ao.moduleName=t}static getModuleName(){return ao.moduleName}static setPlotly(t){if("object"==typeof t&&"function"!=typeof t.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");ao.plotly=t}static insert(t){return-1===ao.instances.indexOf(t)&&ao.instances.push(t),t}static remove(t){const n=ao.instances.indexOf(t);n>=0&&(ao.instances.splice(n,1),ao.plotly.purge(t))}getInstanceByDivId(t){for(const n of ao.instances)if(n&&n.id===t)return n}getPlotly(){return we(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===ao.plotly)throw new Error("ViaCDN"===ao.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return ao.plotly}waitFor(t){return new Promise(n=>{const k=()=>{t()?n():setTimeout(k,10)};k()})}newPlot(t,n,k,V,ie){return we(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),ie){const ge={data:n,layout:k,config:V,frames:ie};return this._getPlotly().newPlot(t,ge).then(()=>ao.insert(t))}return this._getPlotly().newPlot(t,n,k,V).then(()=>ao.insert(t))})}plot(t,n,k,V,ie){if(ie){const ge={data:n,layout:k,config:V,frames:ie};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(t,ge):this._getPlotly().newPlot(t,ge)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(t,n,k,V):this._getPlotly().newPlot(t,n,k,V)}update(t,n,k,V,ie){if(ie){const ge={data:n,layout:k,config:V,frames:ie};return this._getPlotly().react(t,ge)}return this._getPlotly().react(t,n,k,V)}resize(t){return this._getPlotly().Plots.resize(t)}}ao.\u0275fac=function(t){return new(t||ao)},ao.instances=[],ao.plotly=void 0,ao.moduleName=void 0,ao.\u0275prov=On({factory:function(){return new ao},token:ao,providedIn:"root"});let MD=(()=>{class r{constructor(n,k,V){this.plotly=n,this.iterableDiffers=k,this.keyValueDiffers=V,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new ta,this.update=new ta,this.purge=new ta,this.error=new ta,this.afterExport=new ta,this.afterPlot=new ta,this.animated=new ta,this.animatingFrame=new ta,this.animationInterrupted=new ta,this.autoSize=new ta,this.beforeExport=new ta,this.buttonClicked=new ta,this.click=new ta,this.plotlyClick=new ta,this.clickAnnotation=new ta,this.deselect=new ta,this.doubleClick=new ta,this.framework=new ta,this.hover=new ta,this.legendClick=new ta,this.legendDoubleClick=new ta,this.react=new ta,this.relayout=new ta,this.restyle=new ta,this.redraw=new ta,this.selected=new ta,this.selecting=new ta,this.sliderChange=new ta,this.sliderEnd=new ta,this.sliderStart=new ta,this.transitioning=new ta,this.transitionInterrupted=new ta,this.unhover=new ta,this.relayouting=new ta,this.treemapclick=new ta,this.sunburstclick=new ta,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const n=this.createFigure();this.initialized.emit(n)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const n=this.createFigure();this.purge.emit(n),ao.remove(this.plotlyInstance)}ngOnChanges(n){let k=!1;const V=n.revision;V&&!V.isFirstChange()&&(k=!0);const ie=n.debug;ie&&!ie.isFirstChange()&&(k=!0),k&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let n=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(n=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(n=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),n&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let n=[this.defaultClassName];return Array.isArray(this.className)?n=n.concat(this.className):this.className&&n.push(this.className),n.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(n=>{this.plotlyInstance=n,this.getWindow().gd=this.debug?n:void 0,this.eventNames.forEach(k=>{const V=`plotly_${k.toLowerCase()}`;n.on(V,ie=>this[k].emit(ie))}),n.on("plotly_click",k=>{this.click.emit(k),this.plotlyClick.emit(k)}),this.updateWindowResizeHandler()},n=>{console.error("Error while plotting:",n),this.error.emit(n)})}createFigure(){const n=this.plotlyInstance;return{data:n.data,layout:n.layout,frames:n._transitionData?n._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const k=new Error("Plotly component wasn't initialized");throw this.error.emit(k),k}const n=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,n,this.config,this.frames).then(()=>{const k=this.createFigure();this.update.emit(k)},k=>{console.error("Error while updating plot:",k),this.error.emit(k)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(n,k){const V=Object.assign({},k,{uid:""});return JSON.stringify(V)}}return r.\u0275fac=function(n){return new(n||r)(Qr(ao),Qr(E0),Qr(ip))},r.\u0275cmp=Fs({type:r,selectors:[["plotly-plot"]],viewQuery:function(n,k){if(1&n&&xm(wD,7),2&n){let V;tp(V=np())&&(k.plotEl=V.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[is([ao]),Vi],ngContentSelectors:TD,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(n,k){1&n&&($y(),Sl(0,"div",0,1),Ky(2),xl()),2&n&&(El("ngClass",k.getClassName())("ngStyle",k.style),wu("id",k.divId))},directives:[x3,Nm],encapsulation:2}),r})(),sp=(()=>{class r{constructor(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r}),r.\u0275inj=ir({providers:[ao],imports:[[op]]}),r})(),U3=(()=>{class r{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");ao.setPlotly(r.plotlyjs)}isValid(){return void 0!==r.plotlyjs&&("function"==typeof r.plotlyjs.plot||"function"==typeof r.plotlyjs.newPlot)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r}),r.\u0275inj=ir({providers:[ao],imports:[[op,sp],sp]}),r.plotlyjs={},r})();const AD=/(?:\$|\\\(|\\\[|\\begin\{.*?})/,ED={loader:{load:["output/svg","[tex]/require","[tex]/ams"]},tex:{inlineMath:[["$","$"]],packages:["base","require","ams"]},svg:{fontCache:"global"}};class H3{}let SD=(()=>{class r{constructor(n){this.el=n,this.element=n.nativeElement}set mathjax(n){this.mathJaxExpressions=n}ngOnChanges(n){const k=n.mathjax;if(!k||k.currentValue===k.previousValue)return;const V=(r=>{var t,n;return r?"string"==typeof r?r:null!==(n=null!==(t=r.latex)&&void 0!==t?t:r.mathml)&&void 0!==n?n:"":""})(k.currentValue)+"";if((r=>!!(null==r?void 0:r.match(AD)))(V)){const ie=(r=>r.replace(/<br \/>/gi,"<br/> ").replace(/[$]([\s\S]+?)[$]/gi,(t,n,k,V)=>n.includes("\\\\")&&!n.includes("\\begin")?`$\\begin{align*}${n}\\end{align*}$`:`$${n}$`))(V);this.typeset(()=>{this.element.innerHTML=`<div class='jax-process'>${ie}</div>`})}else this.element.innerHTML=V}typeset(n){if(null==MathJax?void 0:MathJax.startup)return MathJax.startup.promise=MathJax.startup.promise.then(()=>(n(),MathJax.typesetPromise?MathJax.typesetPromise():null)).catch(k=>console.error("MathJax Typeset failed: "+k.message)),MathJax.startup.promise;n()}}return r.\u0275fac=function(n){return new(n||r)(Qr(Dl))},r.\u0275dir=Wi({type:r,selectors:[["mathjax"],["","mathjax",""]],inputs:{mathjax:"mathjax"},features:[Vi]}),r})(),CD=(()=>{class r{constructor(n){this.moduleConfig=n,this.addConfigToDocument(),this.addMatjaxToDocument()}addConfigToDocument(){var n,k;const V="mathjax-config-script";if(document.getElementById(V))return;const ge=Object.assign(Object.assign({},ED),null!==(k=null===(n=this.moduleConfig)||void 0===n?void 0:n.config)&&void 0!==k?k:{}),ke=document.createElement("script");ke.id=V,ke.type="text/javascript",ke.text=`MathJax = ${JSON.stringify(ge)}`,document.getElementsByTagName("head")[0].appendChild(ke)}addMatjaxToDocument(){var n,k;const V="mathjax-script";if(document.getElementById(V))return;const ge=document.createElement("script");ge.id=V,ge.type="text/javascript",ge.src=null!==(k=null===(n=this.moduleConfig)||void 0===n?void 0:n.src)&&void 0!==k?k:"https://cdn.jsdelivr.net/npm/mathjax@3.0.0/es5/startup.js",ge.async=!0,document.getElementsByTagName("head")[0].appendChild(ge)}static forRoot(n){return{ngModule:r,providers:[{provide:H3,useValue:null!=n?n:{}}]}}static forChild(){return{ngModule:r}}}return r.\u0275fac=function(n){return new(n||r)(Ni(H3))},r.\u0275mod=no({type:r}),r.\u0275inj=ir({}),r})();const DD=new fa("cdk-dir-doc",{providedIn:"root",factory:function ID(){return Xl(rl)}}),LD=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ub,OD=(()=>{class r{constructor(n){if(this.value="ltr",this.change=new ta,n){const V=n.documentElement?n.documentElement.dir:null;this.value=function PD(r){const t=(null==r?void 0:r.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?LD.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((n.body?n.body.dir:null)||V||"ltr")}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(n){return new(n||r)(Ni(DD,8))},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Y3=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r}),r.\u0275inj=ir({}),r})();try{ub="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(r){ub=!1}let L0,cb,Hm=(()=>{class r{constructor(n){this._platformId=n,this.isBrowser=this._platformId?function F6(r){return r===E3}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ub)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(n){return new(n||r)(Ni(S1))},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function qm(r){return function RD(){if(null==L0&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>L0=!0}))}finally{L0=L0||!1}return L0}()?r:!!r.capture}function P0(r){return r.composedPath?r.composedPath()[0]:r.target}class Hu extends J{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:k}=this;if(t)throw n;return this._throwIfClosed(),k}next(t){super.next(this._value=t)}}function Ua(...r){return Sn(r,$t(r))}function Bh(r,t){return G((n,k)=>{let V=0;n.subscribe(H(k,ie=>r.call(t,ie,V++)&&k.next(ie)))})}function t8(r,t){return r===t}function O0(r){return null!=r&&"false"!=`${r}`}function up(r,t=0){return function r8(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}function R0(r){return r instanceof Dl?r.nativeElement:r}function Q3(r){return 0===r.buttons||0===r.offsetX&&0===r.offsetY}function e5(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const f8=new fa("cdk-input-modality-detector-options"),h8={ignoreKeys:[18,17,224,91,16]},cp=qm({passive:!0,capture:!0});let d8=(()=>{class r{constructor(n,k,V,ie){this._platform=n,this._mostRecentTarget=null,this._modality=new Hu(null),this._lastTouchMs=0,this._onKeydown=ge=>{var ke,Ue;(null===(Ue=null===(ke=this._options)||void 0===ke?void 0:ke.ignoreKeys)||void 0===Ue?void 0:Ue.some(et=>et===ge.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=P0(ge))},this._onMousedown=ge=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Q3(ge)?"keyboard":"mouse"),this._mostRecentTarget=P0(ge))},this._onTouchstart=ge=>{e5(ge)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=P0(ge))},this._options=Object.assign(Object.assign({},h8),ie),this.modalityDetected=this._modality.pipe(function QD(r){return Bh((t,n)=>r<=n)}(1)),this.modalityChanged=this.modalityDetected.pipe(function e8(r,t=L){return r=null!=r?r:t8,G((n,k)=>{let V,ie=!0;n.subscribe(H(k,ge=>{const ke=t(ge);(ie||!r(V,ke))&&(ie=!1,V=ke,k.next(ge))}))})}()),n.isBrowser&&k.runOutsideAngular(()=>{V.addEventListener("keydown",this._onKeydown,cp),V.addEventListener("mousedown",this._onMousedown,cp),V.addEventListener("touchstart",this._onTouchstart,cp)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,cp),document.removeEventListener("mousedown",this._onMousedown,cp),document.removeEventListener("touchstart",this._onTouchstart,cp))}}return r.\u0275fac=function(n){return new(n||r)(Ni(Hm),Ni(Is),Ni(rl),Ni(f8,8))},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const g8=new fa("cdk-focus-monitor-default-options"),Wm=qm({passive:!0,capture:!0});let n5=(()=>{class r{constructor(n,k,V,ie,ge){this._ngZone=n,this._platform=k,this._inputModalityDetector=V,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new J,this._rootNodeFocusAndBlurListener=ke=>{const Ue=P0(ke),et="focus"===ke.type?this._onFocus:this._onBlur;for(let yt=Ue;yt;yt=yt.parentElement)et.call(this,ke,yt)},this._document=ie,this._detectionMode=(null==ge?void 0:ge.detectionMode)||0}monitor(n,k=!1){const V=R0(n);if(!this._platform.isBrowser||1!==V.nodeType)return Ua(null);const ie=function ND(r){if(function FD(){if(null==cb){const r="undefined"!=typeof document?document.head:null;cb=!(!r||!r.createShadowRoot&&!r.attachShadow)}return cb}()){const t=r.getRootNode?r.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(V)||this._getDocument(),ge=this._elementInfo.get(V);if(ge)return k&&(ge.checkChildren=!0),ge.subject;const ke={checkChildren:k,subject:new J,rootNode:ie};return this._elementInfo.set(V,ke),this._registerGlobalListeners(ke),ke.subject}stopMonitoring(n){const k=R0(n),V=this._elementInfo.get(k);V&&(V.subject.complete(),this._setClasses(k),this._elementInfo.delete(k),this._removeGlobalListeners(V))}focusVia(n,k,V){const ie=R0(n);ie===this._getDocument().activeElement?this._getClosestElementsInfo(ie).forEach(([ke,Ue])=>this._originChanged(ke,k,Ue)):(this._setOrigin(k),"function"==typeof ie.focus&&ie.focus(V))}ngOnDestroy(){this._elementInfo.forEach((n,k)=>this.stopMonitoring(k))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(n){return 1===this._detectionMode||!!(null==n?void 0:n.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(n,k){n.classList.toggle("cdk-focused",!!k),n.classList.toggle("cdk-touch-focused","touch"===k),n.classList.toggle("cdk-keyboard-focused","keyboard"===k),n.classList.toggle("cdk-mouse-focused","mouse"===k),n.classList.toggle("cdk-program-focused","program"===k)}_setOrigin(n,k=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&k,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,k){const V=this._elementInfo.get(k),ie=P0(n);!V||!V.checkChildren&&k!==ie||this._originChanged(k,this._getFocusOrigin(ie),V)}_onBlur(n,k){const V=this._elementInfo.get(k);!V||V.checkChildren&&n.relatedTarget instanceof Node&&k.contains(n.relatedTarget)||(this._setClasses(k),this._emitOrigin(V.subject,null))}_emitOrigin(n,k){this._ngZone.run(()=>n.next(k))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const k=n.rootNode,V=this._rootNodeFocusListenerCount.get(k)||0;V||this._ngZone.runOutsideAngular(()=>{k.addEventListener("focus",this._rootNodeFocusAndBlurListener,Wm),k.addEventListener("blur",this._rootNodeFocusAndBlurListener,Wm)}),this._rootNodeFocusListenerCount.set(k,V+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(function n8(r){return G((t,n)=>{pn(r).subscribe(H(n,()=>n.complete(),h)),!n.closed&&t.subscribe(n)})}(this._stopInputModalityDetector)).subscribe(ie=>{this._setOrigin(ie,!0)}))}_removeGlobalListeners(n){const k=n.rootNode;if(this._rootNodeFocusListenerCount.has(k)){const V=this._rootNodeFocusListenerCount.get(k);V>1?this._rootNodeFocusListenerCount.set(k,V-1):(k.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Wm),k.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Wm),this._rootNodeFocusListenerCount.delete(k))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,k,V){this._setClasses(n,k),this._emitOrigin(V.subject,k),this._lastFocusOrigin=k}_getClosestElementsInfo(n){const k=[];return this._elementInfo.forEach((V,ie)=>{(ie===n||V.checkChildren&&ie.contains(n))&&k.push([ie,V])}),k}}return r.\u0275fac=function(n){return new(n||r)(Ni(Is),Ni(Hm),Ni(d8),Ni(rl,8),Ni(g8,8))},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const r5="cdk-high-contrast-black-on-white",i5="cdk-high-contrast-white-on-black",fb="cdk-high-contrast-active";let m8=(()=>{class r{constructor(n,k){this._platform=n,this._document=k}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);const k=this._document.defaultView||window,V=k&&k.getComputedStyle?k.getComputedStyle(n):null,ie=(V&&V.backgroundColor||"").replace(/ /g,"");switch(n.remove(),ie){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const n=this._document.body.classList;n.remove(fb),n.remove(r5),n.remove(i5),this._hasCheckedHighContrastMode=!0;const k=this.getHighContrastMode();1===k?(n.add(fb),n.add(r5)):2===k&&(n.add(fb),n.add(i5))}}}return r.\u0275fac=function(n){return new(n||r)(Ni(Hm),Ni(rl))},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class a5{}const bf="*";function o5(r,t=null){return{type:2,steps:r,options:t}}function s5(r){return{type:6,styles:r,offset:null}}function l5(r){Promise.resolve(null).then(r)}class F0{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){l5(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(k=>k()),n.length=0}}class u5{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,k=0,V=0;const ie=this.players.length;0==ie?l5(()=>this._onFinish()):this.players.forEach(ge=>{ge.onDone(()=>{++n==ie&&this._onFinish()}),ge.onDestroy(()=>{++k==ie&&this._onDestroy()}),ge.onStart(()=>{++V==ie&&this._onStart()})}),this.totalTime=this.players.reduce((ge,ke)=>Math.max(ge,ke.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(k=>{const V=k.totalTime?Math.min(1,n/k.totalTime):1;k.setPosition(V)})}getPosition(){const t=this.players.reduce((n,k)=>null===n||k.totalTime>n.totalTime?k:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(k=>k()),n.length=0}}const co=!1;function c5(r){return new pr(3e3,co)}function K8(){return"undefined"!=typeof window&&void 0!==window.document}function db(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Jf(r){switch(r.length){case 0:return new F0;case 1:return r[0];default:return new u5(r)}}function f5(r,t,n,k,V={},ie={}){const ge=[],ke=[];let Ue=-1,et=null;if(k.forEach(yt=>{const Ht=yt.offset,mn=Ht==Ue,In=mn&&et||{};Object.keys(yt).forEach(Kn=>{let xr=Kn,Kr=yt[Kn];if("offset"!==Kn)switch(xr=t.normalizePropertyName(xr,ge),Kr){case"!":Kr=V[Kn];break;case bf:Kr=ie[Kn];break;default:Kr=t.normalizeStyleValue(Kn,xr,Kr,ge)}In[xr]=Kr}),mn||ke.push(In),et=In,Ue=Ht}),ge.length)throw function j8(r){return new pr(3502,co)}();return ke}function pb(r,t,n,k){switch(t){case"start":r.onStart(()=>k(n&&gb(n,"start",r)));break;case"done":r.onDone(()=>k(n&&gb(n,"done",r)));break;case"destroy":r.onDestroy(()=>k(n&&gb(n,"destroy",r)))}}function gb(r,t,n){const k=n.totalTime,ie=mb(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,null==k?r.totalTime:k,!!n.disabled),ge=r._data;return null!=ge&&(ie._data=ge),ie}function mb(r,t,n,k,V="",ie=0,ge){return{element:r,triggerName:t,fromState:n,toState:k,phaseName:V,totalTime:ie,disabled:!!ge}}function Tu(r,t,n){let k;return r instanceof Map?(k=r.get(t),k||r.set(t,k=n)):(k=r[t],k||(k=r[t]=n)),k}function h5(r){const t=r.indexOf(":");return[r.substring(1,t),r.substr(t+1)]}let vb=(r,t)=>!1,d5=(r,t,n)=>[],p5=null;function yb(r){const t=r.parentNode||r.host;return t===p5?null:t}(db()||"undefined"!=typeof Element)&&(K8()?(p5=(()=>document.documentElement)(),vb=(r,t)=>{for(;t;){if(t===r)return!0;t=yb(t)}return!1}):vb=(r,t)=>r.contains(t),d5=(r,t,n)=>{if(n)return Array.from(r.querySelectorAll(t));const k=r.querySelector(t);return k?[k]:[]});let jh=null,g5=!1;function m5(r){jh||(jh=function Q8(){return"undefined"!=typeof document?document.body:null}()||{},g5=!!jh.style&&"WebkitAppearance"in jh.style);let t=!0;return jh.style&&!function J8(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in jh.style,!t&&g5&&(t="Webkit"+r.charAt(0).toUpperCase()+r.substr(1)in jh.style)),t}const v5=vb,y5=d5;let b5=(()=>{class r{validateStyleProperty(n){return m5(n)}matchesElement(n,k){return!1}containsElement(n,k){return v5(n,k)}getParentElement(n){return yb(n)}query(n,k,V){return y5(n,k,V)}computeStyle(n,k,V){return V||""}animate(n,k,V,ie,ge,ke=[],Ue){return new F0(V,ie)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})(),bb=(()=>{class r{}return r.NOOP=new b5,r})();const _b="ng-enter",Zm="ng-leave",Xm="ng-trigger",$m=".ng-trigger",x5="ng-animating",xb=".ng-animating";function Vh(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:wb(parseFloat(t[1]),t[2])}function wb(r,t){return"s"===t?1e3*r:r}function Km(r,t,n){return r.hasOwnProperty("duration")?r:function nI(r,t,n){let V,ie=0,ge="";if("string"==typeof r){const ke=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ke)return t.push(c5()),{duration:0,delay:0,easing:""};V=wb(parseFloat(ke[1]),ke[2]);const Ue=ke[3];null!=Ue&&(ie=wb(parseFloat(Ue),ke[4]));const et=ke[5];et&&(ge=et)}else V=r;if(!n){let ke=!1,Ue=t.length;V<0&&(t.push(function y8(){return new pr(3100,co)}()),ke=!0),ie<0&&(t.push(function b8(){return new pr(3101,co)}()),ke=!0),ke&&t.splice(Ue,0,c5())}return{duration:V,delay:ie,easing:ge}}(r,t,n)}function fp(r,t={}){return Object.keys(r).forEach(n=>{t[n]=r[n]}),t}function Qf(r,t,n={}){if(t)for(let k in r)n[k]=r[k];else fp(r,n);return n}function T5(r,t,n){return n?t+":"+n+";":""}function M5(r){let t="";for(let n=0;n<r.style.length;n++){const k=r.style.item(n);t+=T5(0,k,r.style.getPropertyValue(k))}for(const n in r.style)r.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=T5(0,aI(n),r.style[n]));r.setAttribute("style",t)}function Pc(r,t,n){r.style&&(Object.keys(t).forEach(k=>{const V=Mb(k);n&&!n.hasOwnProperty(k)&&(n[k]=r.style[V]),r.style[V]=t[k]}),db()&&M5(r))}function Uh(r,t){r.style&&(Object.keys(t).forEach(n=>{const k=Mb(n);r.style[k]=""}),db()&&M5(r))}function N0(r){return Array.isArray(r)?1==r.length?r[0]:o5(r):r}const Tb=new RegExp("{{\\s*(.+?)\\s*}}","g");function A5(r){let t=[];if("string"==typeof r){let n;for(;n=Tb.exec(r);)t.push(n[1]);Tb.lastIndex=0}return t}function Jm(r,t,n){const k=r.toString(),V=k.replace(Tb,(ie,ge)=>{let ke=t[ge];return t.hasOwnProperty(ge)||(n.push(function x8(r){return new pr(3003,co)}()),ke=""),ke.toString()});return V==k?r:V}function Qm(r){const t=[];let n=r.next();for(;!n.done;)t.push(n.value),n=r.next();return t}const iI=/-+([a-z0-9])/g;function Mb(r){return r.replace(iI,(...t)=>t[1].toUpperCase())}function aI(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Mu(r,t,n){switch(t.type){case 7:return r.visitTrigger(t,n);case 0:return r.visitState(t,n);case 1:return r.visitTransition(t,n);case 2:return r.visitSequence(t,n);case 3:return r.visitGroup(t,n);case 4:return r.visitAnimate(t,n);case 5:return r.visitKeyframes(t,n);case 6:return r.visitStyle(t,n);case 8:return r.visitReference(t,n);case 9:return r.visitAnimateChild(t,n);case 10:return r.visitAnimateRef(t,n);case 11:return r.visitQuery(t,n);case 12:return r.visitStagger(t,n);default:throw function w8(r){return new pr(3004,co)}()}}function k5(r,t){return window.getComputedStyle(r)[t]}function fI(r,t){const n=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(k=>function hI(r,t,n){if(":"==r[0]){const Ue=function dI(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,k)=>parseFloat(k)>parseFloat(n);case":decrement":return(n,k)=>parseFloat(k)<parseFloat(n);default:return t.push(function F8(r){return new pr(3016,co)}()),"* => *"}}(r,n);if("function"==typeof Ue)return void t.push(Ue);r=Ue}const k=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==k||k.length<4)return n.push(function R8(r){return new pr(3015,co)}()),t;const V=k[1],ie=k[2],ge=k[3];t.push(E5(V,ge));"<"==ie[0]&&!("*"==V&&"*"==ge)&&t.push(E5(ge,V))}(k,n,t)):n.push(r),n}const rv=new Set(["true","1"]),iv=new Set(["false","0"]);function E5(r,t){const n=rv.has(r)||iv.has(r),k=rv.has(t)||iv.has(t);return(V,ie)=>{let ge="*"==r||r==V,ke="*"==t||t==ie;return!ge&&n&&"boolean"==typeof V&&(ge=V?rv.has(r):iv.has(r)),!ke&&k&&"boolean"==typeof ie&&(ke=ie?rv.has(t):iv.has(t)),ge&&ke}}const pI=new RegExp("s*:selfs*,?","g");function Ab(r,t,n,k){return new gI(r).build(t,n,k)}class gI{constructor(t){this._driver=t}build(t,n,k){const V=new yI(n);this._resetContextStyleTimingState(V);const ie=Mu(this,N0(t),V);return V.unsupportedCSSPropertiesFound.size&&V.unsupportedCSSPropertiesFound.keys(),ie}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,n){let k=n.queryCount=0,V=n.depCount=0;const ie=[],ge=[];return"@"==t.name.charAt(0)&&n.errors.push(function M8(){return new pr(3006,co)}()),t.definitions.forEach(ke=>{if(this._resetContextStyleTimingState(n),0==ke.type){const Ue=ke,et=Ue.name;et.toString().split(/\s*,\s*/).forEach(yt=>{Ue.name=yt,ie.push(this.visitState(Ue,n))}),Ue.name=et}else if(1==ke.type){const Ue=this.visitTransition(ke,n);k+=Ue.queryCount,V+=Ue.depCount,ge.push(Ue)}else n.errors.push(function A8(){return new pr(3007,co)}())}),{type:7,name:t.name,states:ie,transitions:ge,queryCount:k,depCount:V,options:null}}visitState(t,n){const k=this.visitStyle(t.styles,n),V=t.options&&t.options.params||null;if(k.containsDynamicStyles){const ie=new Set,ge=V||{};k.styles.forEach(ke=>{if(av(ke)){const Ue=ke;Object.keys(Ue).forEach(et=>{A5(Ue[et]).forEach(yt=>{ge.hasOwnProperty(yt)||ie.add(yt)})})}}),ie.size&&(Qm(ie.values()),n.errors.push(function k8(r,t){return new pr(3008,co)}()))}return{type:0,name:t.name,style:k,options:V?{params:V}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const k=Mu(this,N0(t.animation),n);return{type:1,matchers:fI(t.expr,n.errors),animation:k,queryCount:n.queryCount,depCount:n.depCount,options:Hh(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(k=>Mu(this,k,n)),options:Hh(t.options)}}visitGroup(t,n){const k=n.currentTime;let V=0;const ie=t.steps.map(ge=>{n.currentTime=k;const ke=Mu(this,ge,n);return V=Math.max(V,n.currentTime),ke});return n.currentTime=V,{type:3,steps:ie,options:Hh(t.options)}}visitAnimate(t,n){const k=function _I(r,t){if(r.hasOwnProperty("duration"))return r;if("number"==typeof r)return kb(Km(r,t).duration,0,"");const n=r;if(n.split(/\s+/).some(ie=>"{"==ie.charAt(0)&&"{"==ie.charAt(1))){const ie=kb(0,0,"");return ie.dynamic=!0,ie.strValue=n,ie}const V=Km(n,t);return kb(V.duration,V.delay,V.easing)}(t.timings,n.errors);n.currentAnimateTimings=k;let V,ie=t.styles?t.styles:s5({});if(5==ie.type)V=this.visitKeyframes(ie,n);else{let ge=t.styles,ke=!1;if(!ge){ke=!0;const et={};k.easing&&(et.easing=k.easing),ge=s5(et)}n.currentTime+=k.duration+k.delay;const Ue=this.visitStyle(ge,n);Ue.isEmptyStep=ke,V=Ue}return n.currentAnimateTimings=null,{type:4,timings:k,style:V,options:null}}visitStyle(t,n){const k=this._makeStyleAst(t,n);return this._validateStyleAst(k,n),k}_makeStyleAst(t,n){const k=[];Array.isArray(t.styles)?t.styles.forEach(ge=>{"string"==typeof ge?ge==bf?k.push(ge):n.errors.push(function E8(r){return new pr(3002,co)}()):k.push(ge)}):k.push(t.styles);let V=!1,ie=null;return k.forEach(ge=>{if(av(ge)){const ke=ge,Ue=ke.easing;if(Ue&&(ie=Ue,delete ke.easing),!V)for(let et in ke)if(ke[et].toString().indexOf("{{")>=0){V=!0;break}}}),{type:6,styles:k,easing:ie,offset:t.offset,containsDynamicStyles:V,options:null}}_validateStyleAst(t,n){const k=n.currentAnimateTimings;let V=n.currentTime,ie=n.currentTime;k&&ie>0&&(ie-=k.duration+k.delay),t.styles.forEach(ge=>{"string"!=typeof ge&&Object.keys(ge).forEach(ke=>{if(!this._driver.validateStyleProperty(ke))return delete ge[ke],void n.unsupportedCSSPropertiesFound.add(ke);const Ue=n.collectedStyles[n.currentQuerySelector],et=Ue[ke];let yt=!0;et&&(ie!=V&&ie>=et.startTime&&V<=et.endTime&&(n.errors.push(function S8(r,t,n,k,V){return new pr(3010,co)}()),yt=!1),ie=et.startTime),yt&&(Ue[ke]={startTime:ie,endTime:V}),n.options&&function rI(r,t,n){const k=t.params||{},V=A5(r);V.length&&V.forEach(ie=>{k.hasOwnProperty(ie)||n.push(function _8(r){return new pr(3001,co)}())})}(ge[ke],n.options,n.errors)})})}visitKeyframes(t,n){const k={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function C8(){return new pr(3011,co)}()),k;let ie=0;const ge=[];let ke=!1,Ue=!1,et=0;const yt=t.steps.map(ui=>{const Ir=this._makeStyleAst(ui,n);let zi=null!=Ir.offset?Ir.offset:function bI(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(n=>{if(av(n)&&n.hasOwnProperty("offset")){const k=n;t=parseFloat(k.offset),delete k.offset}});else if(av(r)&&r.hasOwnProperty("offset")){const n=r;t=parseFloat(n.offset),delete n.offset}return t}(Ir.styles),oa=0;return null!=zi&&(ie++,oa=Ir.offset=zi),Ue=Ue||oa<0||oa>1,ke=ke||oa<et,et=oa,ge.push(oa),Ir});Ue&&n.errors.push(function D8(){return new pr(3012,co)}()),ke&&n.errors.push(function I8(){return new pr(3200,co)}());const Ht=t.steps.length;let mn=0;ie>0&&ie<Ht?n.errors.push(function L8(){return new pr(3202,co)}()):0==ie&&(mn=1/(Ht-1));const In=Ht-1,Kn=n.currentTime,xr=n.currentAnimateTimings,Kr=xr.duration;return yt.forEach((ui,Ir)=>{const zi=mn>0?Ir==In?1:mn*Ir:ge[Ir],oa=zi*Kr;n.currentTime=Kn+xr.delay+oa,xr.duration=oa,this._validateStyleAst(ui,n),ui.offset=zi,k.styles.push(ui)}),k}visitReference(t,n){return{type:8,animation:Mu(this,N0(t.animation),n),options:Hh(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:Hh(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:Hh(t.options)}}visitQuery(t,n){const k=n.currentQuerySelector,V=t.options||{};n.queryCount++,n.currentQuery=t;const[ie,ge]=function mI(r){const t=!!r.split(/\s*,\s*/).find(n=>":self"==n);return t&&(r=r.replace(pI,"")),r=r.replace(/@\*/g,$m).replace(/@\w+/g,n=>$m+"-"+n.substr(1)).replace(/:animating/g,xb),[r,t]}(t.selector);n.currentQuerySelector=k.length?k+" "+ie:ie,Tu(n.collectedStyles,n.currentQuerySelector,{});const ke=Mu(this,N0(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=k,{type:11,selector:ie,limit:V.limit||0,optional:!!V.optional,includeSelf:ge,animation:ke,originalSelector:t.selector,options:Hh(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push(function P8(){return new pr(3013,co)}());const k="full"===t.timings?{duration:0,delay:0,easing:"full"}:Km(t.timings,n.errors,!0);return{type:12,animation:Mu(this,N0(t.animation),n),timings:k,options:null}}}class yI{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function av(r){return!Array.isArray(r)&&"object"==typeof r}function Hh(r){return r?(r=fp(r)).params&&(r.params=function vI(r){return r?fp(r):null}(r.params)):r={},r}function kb(r,t,n){return{duration:r,delay:t,easing:n}}function Eb(r,t,n,k,V,ie,ge=null,ke=!1){return{type:1,element:r,keyframes:t,preStyleProps:n,postStyleProps:k,duration:V,delay:ie,totalTime:V+ie,easing:ge,subTimeline:ke}}class ov{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let k=this._map.get(t);k||this._map.set(t,k=[]),k.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const TI=new RegExp(":enter","g"),AI=new RegExp(":leave","g");function Sb(r,t,n,k,V,ie={},ge={},ke,Ue,et=[]){return(new kI).buildKeyframes(r,t,n,k,V,ie,ge,ke,Ue,et)}class kI{buildKeyframes(t,n,k,V,ie,ge,ke,Ue,et,yt=[]){et=et||new ov;const Ht=new Cb(t,n,et,V,ie,yt,[]);Ht.options=Ue,Ht.currentTimeline.setStyles([ge],null,Ht.errors,Ue),Mu(this,k,Ht);const mn=Ht.timelines.filter(In=>In.containsAnimation());if(Object.keys(ke).length){let In;for(let Kn=mn.length-1;Kn>=0;Kn--){const xr=mn[Kn];if(xr.element===n){In=xr;break}}In&&!In.allowOnlyTimelineStyles()&&In.setStyles([ke],null,Ht.errors,Ue)}return mn.length?mn.map(In=>In.buildKeyframes()):[Eb(n,[],[],[],0,0,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const k=n.subInstructions.get(n.element);if(k){const V=n.createSubContext(t.options),ie=n.currentTimeline.currentTime,ge=this._visitSubInstructions(k,V,V.options);ie!=ge&&n.transformIntoNewTimeline(ge)}n.previousNode=t}visitAnimateRef(t,n){const k=n.createSubContext(t.options);k.transformIntoNewTimeline(),this.visitReference(t.animation,k),n.transformIntoNewTimeline(k.currentTimeline.currentTime),n.previousNode=t}_visitSubInstructions(t,n,k){let ie=n.currentTimeline.currentTime;const ge=null!=k.duration?Vh(k.duration):null,ke=null!=k.delay?Vh(k.delay):null;return 0!==ge&&t.forEach(Ue=>{const et=n.appendInstructionToTimeline(Ue,ge,ke);ie=Math.max(ie,et.duration+et.delay)}),ie}visitReference(t,n){n.updateOptions(t.options,!0),Mu(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const k=n.subContextCount;let V=n;const ie=t.options;if(ie&&(ie.params||ie.delay)&&(V=n.createSubContext(ie),V.transformIntoNewTimeline(),null!=ie.delay)){6==V.previousNode.type&&(V.currentTimeline.snapshotCurrentStyles(),V.previousNode=sv);const ge=Vh(ie.delay);V.delayNextStep(ge)}t.steps.length&&(t.steps.forEach(ge=>Mu(this,ge,V)),V.currentTimeline.applyStylesToKeyframe(),V.subContextCount>k&&V.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const k=[];let V=n.currentTimeline.currentTime;const ie=t.options&&t.options.delay?Vh(t.options.delay):0;t.steps.forEach(ge=>{const ke=n.createSubContext(t.options);ie&&ke.delayNextStep(ie),Mu(this,ge,ke),V=Math.max(V,ke.currentTimeline.currentTime),k.push(ke.currentTimeline)}),k.forEach(ge=>n.currentTimeline.mergeTimelineCollectedStyles(ge)),n.transformIntoNewTimeline(V),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const k=t.strValue;return Km(n.params?Jm(k,n.params,n.errors):k,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const k=n.currentAnimateTimings=this._visitTiming(t.timings,n),V=n.currentTimeline;k.delay&&(n.incrementTime(k.delay),V.snapshotCurrentStyles());const ie=t.style;5==ie.type?this.visitKeyframes(ie,n):(n.incrementTime(k.duration),this.visitStyle(ie,n),V.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const k=n.currentTimeline,V=n.currentAnimateTimings;!V&&k.getCurrentStyleProperties().length&&k.forwardFrame();const ie=V&&V.easing||t.easing;t.isEmptyStep?k.applyEmptyStep(ie):k.setStyles(t.styles,ie,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const k=n.currentAnimateTimings,V=n.currentTimeline.duration,ie=k.duration,ke=n.createSubContext().currentTimeline;ke.easing=k.easing,t.styles.forEach(Ue=>{ke.forwardTime((Ue.offset||0)*ie),ke.setStyles(Ue.styles,Ue.easing,n.errors,n.options),ke.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(ke),n.transformIntoNewTimeline(V+ie),n.previousNode=t}visitQuery(t,n){const k=n.currentTimeline.currentTime,V=t.options||{},ie=V.delay?Vh(V.delay):0;ie&&(6===n.previousNode.type||0==k&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=sv);let ge=k;const ke=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!V.optional,n.errors);n.currentQueryTotal=ke.length;let Ue=null;ke.forEach((et,yt)=>{n.currentQueryIndex=yt;const Ht=n.createSubContext(t.options,et);ie&&Ht.delayNextStep(ie),et===n.element&&(Ue=Ht.currentTimeline),Mu(this,t.animation,Ht),Ht.currentTimeline.applyStylesToKeyframe(),ge=Math.max(ge,Ht.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(ge),Ue&&(n.currentTimeline.mergeTimelineCollectedStyles(Ue),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const k=n.parentContext,V=n.currentTimeline,ie=t.timings,ge=Math.abs(ie.duration),ke=ge*(n.currentQueryTotal-1);let Ue=ge*n.currentQueryIndex;switch(ie.duration<0?"reverse":ie.easing){case"reverse":Ue=ke-Ue;break;case"full":Ue=k.currentStaggerTime}const yt=n.currentTimeline;Ue&&yt.delayNextStep(Ue);const Ht=yt.currentTime;Mu(this,t.animation,n),n.previousNode=t,k.currentStaggerTime=V.currentTime-Ht+(V.startTime-k.currentTimeline.startTime)}}const sv={};class Cb{constructor(t,n,k,V,ie,ge,ke,Ue){this._driver=t,this.element=n,this.subInstructions=k,this._enterClassName=V,this._leaveClassName=ie,this.errors=ge,this.timelines=ke,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Ue||new lv(this._driver,n,0),ke.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const k=t;let V=this.options;null!=k.duration&&(V.duration=Vh(k.duration)),null!=k.delay&&(V.delay=Vh(k.delay));const ie=k.params;if(ie){let ge=V.params;ge||(ge=this.options.params={}),Object.keys(ie).forEach(ke=>{(!n||!ge.hasOwnProperty(ke))&&(ge[ke]=Jm(ie[ke],ge,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const k=t.params={};Object.keys(n).forEach(V=>{k[V]=n[V]})}}return t}createSubContext(t=null,n,k){const V=n||this.element,ie=new Cb(this._driver,V,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(V,k||0));return ie.previousNode=this.previousNode,ie.currentAnimateTimings=this.currentAnimateTimings,ie.options=this._copyOptions(),ie.updateOptions(t),ie.currentQueryIndex=this.currentQueryIndex,ie.currentQueryTotal=this.currentQueryTotal,ie.parentContext=this,this.subContextCount++,ie}transformIntoNewTimeline(t){return this.previousNode=sv,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,k){const V={duration:null!=n?n:t.duration,delay:this.currentTimeline.currentTime+(null!=k?k:0)+t.delay,easing:""},ie=new EI(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,V,t.stretchStartingKeyframe);return this.timelines.push(ie),V}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,k,V,ie,ge){let ke=[];if(V&&ke.push(this.element),t.length>0){t=(t=t.replace(TI,"."+this._enterClassName)).replace(AI,"."+this._leaveClassName);let et=this._driver.query(this.element,t,1!=k);0!==k&&(et=k<0?et.slice(et.length+k,et.length):et.slice(0,k)),ke.push(...et)}return!ie&&0==ke.length&&ge.push(function O8(r){return new pr(3014,co)}()),ke}}class lv{constructor(t,n,k,V){this._driver=t,this.element=n,this.startTime=k,this._elementTimelineStylesLookup=V,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new lv(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles[t]=n,this._globalTimelineStyles[t]=n,this._styleSummary[t]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(n=>{this._backFill[n]=this._globalTimelineStyles[n]||bf,this._currentKeyframe[n]=bf}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,k,V){n&&(this._previousKeyframe.easing=n);const ie=V&&V.params||{},ge=function SI(r,t){const n={};let k;return r.forEach(V=>{"*"===V?(k=k||Object.keys(t),k.forEach(ie=>{n[ie]=bf})):Qf(V,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(ge).forEach(ke=>{const Ue=Jm(ge[ke],ie,k);this._pendingStyles[ke]=Ue,this._localTimelineStyles.hasOwnProperty(ke)||(this._backFill[ke]=this._globalTimelineStyles.hasOwnProperty(ke)?this._globalTimelineStyles[ke]:bf),this._updateStyle(ke,Ue)})}applyStylesToKeyframe(){const t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(k=>{this._currentKeyframe[k]=t[k]}),Object.keys(this._localTimelineStyles).forEach(k=>{this._currentKeyframe.hasOwnProperty(k)||(this._currentKeyframe[k]=this._localTimelineStyles[k])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const n=this._localTimelineStyles[t];this._pendingStyles[t]=n,this._updateStyle(t,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(n=>{const k=this._styleSummary[n],V=t._styleSummary[n];(!k||V.time>k.time)&&this._updateStyle(n,V.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,k=1===this._keyframes.size&&0===this.duration;let V=[];this._keyframes.forEach((ke,Ue)=>{const et=Qf(ke,!0);Object.keys(et).forEach(yt=>{const Ht=et[yt];"!"==Ht?t.add(yt):Ht==bf&&n.add(yt)}),k||(et.offset=Ue/this.duration),V.push(et)});const ie=t.size?Qm(t.values()):[],ge=n.size?Qm(n.values()):[];if(k){const ke=V[0],Ue=fp(ke);ke.offset=0,Ue.offset=1,V=[ke,Ue]}return Eb(this.element,V,ie,ge,this.duration,this.startTime,this.easing,!1)}}class EI extends lv{constructor(t,n,k,V,ie,ge,ke=!1){super(t,n,ge.delay),this.keyframes=k,this.preStyleProps=V,this.postStyleProps=ie,this._stretchStartingKeyframe=ke,this.timings={duration:ge.duration,delay:ge.delay,easing:ge.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:k,easing:V}=this.timings;if(this._stretchStartingKeyframe&&n){const ie=[],ge=k+n,ke=n/ge,Ue=Qf(t[0],!1);Ue.offset=0,ie.push(Ue);const et=Qf(t[0],!1);et.offset=D5(ke),ie.push(et);const yt=t.length-1;for(let Ht=1;Ht<=yt;Ht++){let mn=Qf(t[Ht],!1);mn.offset=D5((n+mn.offset*k)/ge),ie.push(mn)}k=ge,n=0,V="",t=ie}return Eb(this.element,t,this.preStyleProps,this.postStyleProps,k,n,V,!0)}}function D5(r,t=3){const n=Math.pow(10,t-1);return Math.round(r*n)/n}class Db{}class CI extends Db{normalizePropertyName(t,n){return Mb(t)}normalizeStyleValue(t,n,k,V){let ie="";const ge=k.toString().trim();if(DI[n]&&0!==k&&"0"!==k)if("number"==typeof k)ie="px";else{const ke=k.match(/^[+-]?[\d\.]+([a-z]*)$/);ke&&0==ke[1].length&&V.push(function T8(r,t){return new pr(3005,co)}())}return ge+ie}}const DI=(()=>function II(r){const t={};return r.forEach(n=>t[n]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function I5(r,t,n,k,V,ie,ge,ke,Ue,et,yt,Ht,mn){return{type:0,element:r,triggerName:t,isRemovalTransition:V,fromState:n,fromStyles:ie,toState:k,toStyles:ge,timelines:ke,queriedElements:Ue,preStyleProps:et,postStyleProps:yt,totalTime:Ht,errors:mn}}const Ib={};class L5{constructor(t,n,k){this._triggerName=t,this.ast=n,this._stateStyles=k}match(t,n,k,V){return function LI(r,t,n,k,V){return r.some(ie=>ie(t,n,k,V))}(this.ast.matchers,t,n,k,V)}buildStyles(t,n,k){const V=this._stateStyles["*"],ie=this._stateStyles[t],ge=V?V.buildStyles(n,k):{};return ie?ie.buildStyles(n,k):ge}build(t,n,k,V,ie,ge,ke,Ue,et,yt){const Ht=[],mn=this.ast.options&&this.ast.options.params||Ib,Kn=this.buildStyles(k,ke&&ke.params||Ib,Ht),xr=Ue&&Ue.params||Ib,Kr=this.buildStyles(V,xr,Ht),ui=new Set,Ir=new Map,zi=new Map,oa="void"===V,Ka={params:Object.assign(Object.assign({},mn),xr)},ws=yt?[]:Sb(t,n,this.ast.animation,ie,ge,Kn,Kr,Ka,et,Ht);let Ps=0;if(ws.forEach(Su=>{Ps=Math.max(Su.duration+Su.delay,Ps)}),Ht.length)return I5(n,this._triggerName,k,V,oa,Kn,Kr,[],[],Ir,zi,Ps,Ht);ws.forEach(Su=>{const Cu=Su.element,_p=Tu(Ir,Cu,{});Su.preStyleProps.forEach(dc=>_p[dc]=!0);const wf=Tu(zi,Cu,{});Su.postStyleProps.forEach(dc=>wf[dc]=!0),Cu!==n&&ui.add(Cu)});const Eu=Qm(ui.values());return I5(n,this._triggerName,k,V,oa,Kn,Kr,ws,Eu,Ir,zi,Ps)}}class PI{constructor(t,n,k){this.styles=t,this.defaultParams=n,this.normalizer=k}buildStyles(t,n){const k={},V=fp(this.defaultParams);return Object.keys(t).forEach(ie=>{const ge=t[ie];null!=ge&&(V[ie]=ge)}),this.styles.styles.forEach(ie=>{if("string"!=typeof ie){const ge=ie;Object.keys(ge).forEach(ke=>{let Ue=ge[ke];Ue.length>1&&(Ue=Jm(Ue,V,n));const et=this.normalizer.normalizePropertyName(ke,n);Ue=this.normalizer.normalizeStyleValue(ke,et,Ue,n),k[et]=Ue})}}),k}}class RI{constructor(t,n,k){this.name=t,this.ast=n,this._normalizer=k,this.transitionFactories=[],this.states={},n.states.forEach(V=>{this.states[V.name]=new PI(V.style,V.options&&V.options.params||{},k)}),P5(this.states,"true","1"),P5(this.states,"false","0"),n.transitions.forEach(V=>{this.transitionFactories.push(new L5(t,V,this.states))}),this.fallbackTransition=function FI(r,t,n){return new L5(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ge,ke)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,k,V){return this.transitionFactories.find(ge=>ge.match(t,n,k,V))||null}matchStyles(t,n,k){return this.fallbackTransition.buildStyles(t,n,k)}}function P5(r,t,n){r.hasOwnProperty(t)?r.hasOwnProperty(n)||(r[n]=r[t]):r.hasOwnProperty(n)&&(r[t]=r[n])}const NI=new ov;class zI{constructor(t,n,k){this.bodyNode=t,this._driver=n,this._normalizer=k,this._animations={},this._playersById={},this.players=[]}register(t,n){const k=[],ie=Ab(this._driver,n,k,[]);if(k.length)throw function V8(r){return new pr(3503,co)}();this._animations[t]=ie}_buildPlayer(t,n,k){const V=t.element,ie=f5(0,this._normalizer,0,t.keyframes,n,k);return this._driver.animate(V,ie,t.duration,t.delay,t.easing,[],!0)}create(t,n,k={}){const V=[],ie=this._animations[t];let ge;const ke=new Map;if(ie?(ge=Sb(this._driver,n,ie,_b,Zm,{},{},k,NI,V),ge.forEach(yt=>{const Ht=Tu(ke,yt.element,{});yt.postStyleProps.forEach(mn=>Ht[mn]=null)})):(V.push(function U8(){return new pr(3300,co)}()),ge=[]),V.length)throw function H8(r){return new pr(3504,co)}();ke.forEach((yt,Ht)=>{Object.keys(yt).forEach(mn=>{yt[mn]=this._driver.computeStyle(Ht,mn,bf)})});const et=Jf(ge.map(yt=>{const Ht=ke.get(yt.element);return this._buildPlayer(yt,{},Ht)}));return this._playersById[t]=et,et.onDestroy(()=>this.destroy(t)),this.players.push(et),et}destroy(t){const n=this._getPlayer(t);n.destroy(),delete this._playersById[t];const k=this.players.indexOf(n);k>=0&&this.players.splice(k,1)}_getPlayer(t){const n=this._playersById[t];if(!n)throw function q8(r){return new pr(3301,co)}();return n}listen(t,n,k,V){const ie=mb(n,"","","");return pb(this._getPlayer(t),k,ie,V),()=>{}}command(t,n,k,V){if("register"==k)return void this.register(t,V[0]);if("create"==k)return void this.create(t,n,V[0]||{});const ie=this._getPlayer(t);switch(k){case"play":ie.play();break;case"pause":ie.pause();break;case"reset":ie.reset();break;case"restart":ie.restart();break;case"finish":ie.finish();break;case"init":ie.init();break;case"setPosition":ie.setPosition(parseFloat(V[0]));break;case"destroy":this.destroy(t)}}}const O5="ng-animate-queued",Lb="ng-animate-disabled",HI=[],R5={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qI={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qu="__ng_removed";class Pb{constructor(t,n=""){this.namespaceId=n;const k=t&&t.hasOwnProperty("value");if(this.value=function ZI(r){return null!=r?r:null}(k?t.value:t),k){const ie=fp(t);delete ie.value,this.options=ie}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const k=this.options.params;Object.keys(n).forEach(V=>{null==k[V]&&(k[V]=n[V])})}}}const z0="void",Ob=new Pb(z0);class GI{constructor(t,n,k){this.id=t,this.hostElement=n,this._engine=k,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Gu(n,this._hostClassName)}listen(t,n,k,V){if(!this._triggers.hasOwnProperty(n))throw function G8(r,t){return new pr(3302,co)}();if(null==k||0==k.length)throw function W8(r){return new pr(3303,co)}();if(!function XI(r){return"start"==r||"done"==r}(k))throw function Y8(r,t){return new pr(3400,co)}();const ie=Tu(this._elementListeners,t,[]),ge={name:n,phase:k,callback:V};ie.push(ge);const ke=Tu(this._engine.statesByElement,t,{});return ke.hasOwnProperty(n)||(Gu(t,Xm),Gu(t,Xm+"-"+n),ke[n]=Ob),()=>{this._engine.afterFlush(()=>{const Ue=ie.indexOf(ge);Ue>=0&&ie.splice(Ue,1),this._triggers[n]||delete ke[n]})}}register(t,n){return!this._triggers[t]&&(this._triggers[t]=n,!0)}_getTrigger(t){const n=this._triggers[t];if(!n)throw function Z8(r){return new pr(3401,co)}();return n}trigger(t,n,k,V=!0){const ie=this._getTrigger(n),ge=new Rb(this.id,n,t);let ke=this._engine.statesByElement.get(t);ke||(Gu(t,Xm),Gu(t,Xm+"-"+n),this._engine.statesByElement.set(t,ke={}));let Ue=ke[n];const et=new Pb(k,this.id);if(!(k&&k.hasOwnProperty("value"))&&Ue&&et.absorbOptions(Ue.options),ke[n]=et,Ue||(Ue=Ob),et.value!==z0&&Ue.value===et.value){if(!function JI(r,t){const n=Object.keys(r),k=Object.keys(t);if(n.length!=k.length)return!1;for(let V=0;V<n.length;V++){const ie=n[V];if(!t.hasOwnProperty(ie)||r[ie]!==t[ie])return!1}return!0}(Ue.params,et.params)){const xr=[],Kr=ie.matchStyles(Ue.value,Ue.params,xr),ui=ie.matchStyles(et.value,et.params,xr);xr.length?this._engine.reportError(xr):this._engine.afterFlush(()=>{Uh(t,Kr),Pc(t,ui)})}return}const mn=Tu(this._engine.playersByElement,t,[]);mn.forEach(xr=>{xr.namespaceId==this.id&&xr.triggerName==n&&xr.queued&&xr.destroy()});let In=ie.matchTransition(Ue.value,et.value,t,et.params),Kn=!1;if(!In){if(!V)return;In=ie.fallbackTransition,Kn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:In,fromState:Ue,toState:et,player:ge,isFallbackTransition:Kn}),Kn||(Gu(t,O5),ge.onStart(()=>{hp(t,O5)})),ge.onDone(()=>{let xr=this.players.indexOf(ge);xr>=0&&this.players.splice(xr,1);const Kr=this._engine.playersByElement.get(t);if(Kr){let ui=Kr.indexOf(ge);ui>=0&&Kr.splice(ui,1)}}),this.players.push(ge),mn.push(ge),ge}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((n,k)=>{delete n[t]}),this._elementListeners.forEach((n,k)=>{this._elementListeners.set(k,n.filter(V=>V.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(k=>k.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const k=this._engine.driver.query(t,$m,!0);k.forEach(V=>{if(V[qu])return;const ie=this._engine.fetchNamespacesByElement(V);ie.size?ie.forEach(ge=>ge.triggerLeaveAnimation(V,n,!1,!0)):this.clearElementCache(V)}),this._engine.afterFlushAnimationsDone(()=>k.forEach(V=>this.clearElementCache(V)))}triggerLeaveAnimation(t,n,k,V){const ie=this._engine.statesByElement.get(t),ge=new Map;if(ie){const ke=[];if(Object.keys(ie).forEach(Ue=>{if(ge.set(Ue,ie[Ue].value),this._triggers[Ue]){const et=this.trigger(t,Ue,z0,V);et&&ke.push(et)}}),ke.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,ge),k&&Jf(ke).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),k=this._engine.statesByElement.get(t);if(n&&k){const V=new Set;n.forEach(ie=>{const ge=ie.name;if(V.has(ge))return;V.add(ge);const Ue=this._triggers[ge].fallbackTransition,et=k[ge]||Ob,yt=new Pb(z0),Ht=new Rb(this.id,ge,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:ge,transition:Ue,fromState:et,toState:yt,player:Ht,isFallbackTransition:!0})})}}removeNode(t,n){const k=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let V=!1;if(k.totalAnimations){const ie=k.players.length?k.playersByQueriedElement.get(t):[];if(ie&&ie.length)V=!0;else{let ge=t;for(;ge=ge.parentNode;)if(k.statesByElement.get(ge)){V=!0;break}}}if(this.prepareLeaveAnimationListeners(t),V)k.markElementAsRemoved(this.id,t,!1,n);else{const ie=t[qu];(!ie||ie===R5)&&(k.afterFlush(()=>this.clearElementCache(t)),k.destroyInnerAnimations(t),k._onRemovalComplete(t,n))}}insertNode(t,n){Gu(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(k=>{const V=k.player;if(V.destroyed)return;const ie=k.element,ge=this._elementListeners.get(ie);ge&&ge.forEach(ke=>{if(ke.name==k.triggerName){const Ue=mb(ie,k.triggerName,k.fromState.value,k.toState.value);Ue._data=t,pb(k.player,ke.phase,Ue,ke.callback)}}),V.markedForDestroy?this._engine.afterFlush(()=>{V.destroy()}):n.push(k)}),this._queue=[],n.sort((k,V)=>{const ie=k.transition.ast.depCount,ge=V.transition.ast.depCount;return 0==ie||0==ge?ie-ge:this._engine.driver.containsElement(k.element,V.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(k=>k.element===t)||n,n}}class WI{constructor(t,n,k){this.bodyNode=t,this.driver=n,this._normalizer=k,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(V,ie)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(k=>{k.queued&&t.push(k)})}),t}createNamespace(t,n){const k=new GI(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(k,n):(this.newHostElements.set(n,k),this.collectEnterElement(n)),this._namespaceLookup[t]=k}_balanceNamespaceList(t,n){const k=this._namespaceList,V=this.namespacesByHostElement,ie=k.length-1;if(ie>=0){let ge=!1;if(void 0!==this.driver.getParentElement){let ke=this.driver.getParentElement(n);for(;ke;){const Ue=V.get(ke);if(Ue){const et=k.indexOf(Ue);k.splice(et+1,0,t),ge=!0;break}ke=this.driver.getParentElement(ke)}}else for(let ke=ie;ke>=0;ke--)if(this.driver.containsElement(k[ke].hostElement,n)){k.splice(ke+1,0,t),ge=!0;break}ge||k.unshift(t)}else k.push(t);return V.set(n,t),t}register(t,n){let k=this._namespaceLookup[t];return k||(k=this.createNamespace(t,n)),k}registerTrigger(t,n,k){let V=this._namespaceLookup[t];V&&V.register(n,k)&&this.totalAnimations++}destroy(t,n){if(!t)return;const k=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(k.hostElement),delete this._namespaceLookup[t];const V=this._namespaceList.indexOf(k);V>=0&&this._namespaceList.splice(V,1)}),this.afterFlushAnimationsDone(()=>k.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,k=this.statesByElement.get(t);if(k){const V=Object.keys(k);for(let ie=0;ie<V.length;ie++){const ge=k[V[ie]].namespaceId;if(ge){const ke=this._fetchNamespace(ge);ke&&n.add(ke)}}}return n}trigger(t,n,k,V){if(uv(n)){const ie=this._fetchNamespace(t);if(ie)return ie.trigger(n,k,V),!0}return!1}insertNode(t,n,k,V){if(!uv(n))return;const ie=n[qu];if(ie&&ie.setForRemoval){ie.setForRemoval=!1,ie.setForMove=!0;const ge=this.collectedLeaveElements.indexOf(n);ge>=0&&this.collectedLeaveElements.splice(ge,1)}if(t){const ge=this._fetchNamespace(t);ge&&ge.insertNode(n,k)}V&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Gu(t,Lb)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),hp(t,Lb))}removeNode(t,n,k,V){if(uv(n)){const ie=t?this._fetchNamespace(t):null;if(ie?ie.removeNode(n,V):this.markElementAsRemoved(t,n,!1,V),k){const ge=this.namespacesByHostElement.get(n);ge&&ge.id!==t&&ge.removeNode(n,V)}}else this._onRemovalComplete(n,V)}markElementAsRemoved(t,n,k,V,ie){this.collectedLeaveElements.push(n),n[qu]={namespaceId:t,setForRemoval:V,hasAnimation:k,removedBeforeQueried:!1,previousTriggersValues:ie}}listen(t,n,k,V,ie){return uv(n)?this._fetchNamespace(t).listen(n,k,V,ie):()=>{}}_buildInstruction(t,n,k,V,ie){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,k,V,t.fromState.options,t.toState.options,n,ie)}destroyInnerAnimations(t){let n=this.driver.query(t,$m,!0);n.forEach(k=>this.destroyActiveAnimationsForElement(k)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,xb,!0),n.forEach(k=>this.finishActiveQueriedAnimationOnElement(k)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(k=>{k.queued?k.markedForDestroy=!0:k.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(k=>k.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Jf(this.players).onDone(()=>t());t()})}processLeaveNode(t){var n;const k=t[qu];if(k&&k.setForRemoval){if(t[qu]=R5,k.namespaceId){this.destroyInnerAnimations(t);const V=this._fetchNamespace(k.namespaceId);V&&V.clearElementCache(t)}this._onRemovalComplete(t,k.setForRemoval)}(null===(n=t.classList)||void 0===n?void 0:n.contains(Lb))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(V=>{this.markElementAsDisabled(V,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((k,V)=>this._balanceNamespaceList(k,V)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let k=0;k<this.collectedEnterElements.length;k++)Gu(this.collectedEnterElements[k],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const k=[];try{n=this._flushAnimations(k,t)}finally{for(let V=0;V<k.length;V++)k[V]()}}else for(let k=0;k<this.collectedLeaveElements.length;k++)this.processLeaveNode(this.collectedLeaveElements[k]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(k=>k()),this._flushFns=[],this._whenQuietFns.length){const k=this._whenQuietFns;this._whenQuietFns=[],n.length?Jf(n).onDone(()=>{k.forEach(V=>V())}):k.forEach(V=>V())}}reportError(t){throw function X8(r){return new pr(3402,co)}()}_flushAnimations(t,n){const k=new ov,V=[],ie=new Map,ge=[],ke=new Map,Ue=new Map,et=new Map,yt=new Set;this.disabledNodes.forEach(Xi=>{yt.add(Xi);const da=this.driver.query(Xi,".ng-animate-queued",!0);for(let Ca=0;Ca<da.length;Ca++)yt.add(da[Ca])});const Ht=this.bodyNode,mn=Array.from(this.statesByElement.keys()),In=z5(mn,this.collectedEnterElements),Kn=new Map;let xr=0;In.forEach((Xi,da)=>{const Ca=_b+xr++;Kn.set(da,Ca),Xi.forEach(So=>Gu(So,Ca))});const Kr=[],ui=new Set,Ir=new Set;for(let Xi=0;Xi<this.collectedLeaveElements.length;Xi++){const da=this.collectedLeaveElements[Xi],Ca=da[qu];Ca&&Ca.setForRemoval&&(Kr.push(da),ui.add(da),Ca.hasAnimation?this.driver.query(da,".ng-star-inserted",!0).forEach(So=>ui.add(So)):Ir.add(da))}const zi=new Map,oa=z5(mn,Array.from(ui));oa.forEach((Xi,da)=>{const Ca=Zm+xr++;zi.set(da,Ca),Xi.forEach(So=>Gu(So,Ca))}),t.push(()=>{In.forEach((Xi,da)=>{const Ca=Kn.get(da);Xi.forEach(So=>hp(So,Ca))}),oa.forEach((Xi,da)=>{const Ca=zi.get(da);Xi.forEach(So=>hp(So,Ca))}),Kr.forEach(Xi=>{this.processLeaveNode(Xi)})});const Ka=[],ws=[];for(let Xi=this._namespaceList.length-1;Xi>=0;Xi--)this._namespaceList[Xi].drainQueuedTransitions(n).forEach(Ca=>{const So=Ca.player,Il=Ca.element;if(Ka.push(So),this.collectedEnterElements.length){const tu=Il[qu];if(tu&&tu.setForMove){if(tu.previousTriggersValues&&tu.previousTriggersValues.has(Ca.triggerName)){const Kh=tu.previousTriggersValues.get(Ca.triggerName),oh=this.statesByElement.get(Ca.element);oh&&oh[Ca.triggerName]&&(oh[Ca.triggerName].value=Kh)}return void So.destroy()}}const Fc=!Ht||!this.driver.containsElement(Ht,Il),Du=zi.get(Il),ah=Kn.get(Il),Os=this._buildInstruction(Ca,k,ah,Du,Fc);if(Os.errors&&Os.errors.length)return void ws.push(Os);if(Fc)return So.onStart(()=>Uh(Il,Os.fromStyles)),So.onDestroy(()=>Pc(Il,Os.toStyles)),void V.push(So);if(Ca.isFallbackTransition)return So.onStart(()=>Uh(Il,Os.fromStyles)),So.onDestroy(()=>Pc(Il,Os.toStyles)),void V.push(So);const bA=[];Os.timelines.forEach(tu=>{tu.stretchStartingKeyframe=!0,this.disabledNodes.has(tu.element)||bA.push(tu)}),Os.timelines=bA,k.append(Il,Os.timelines),ge.push({instruction:Os,player:So,element:Il}),Os.queriedElements.forEach(tu=>Tu(ke,tu,[]).push(So)),Os.preStyleProps.forEach((tu,Kh)=>{const oh=Object.keys(tu);if(oh.length){let Jh=Ue.get(Kh);Jh||Ue.set(Kh,Jh=new Set),oh.forEach(D_=>Jh.add(D_))}}),Os.postStyleProps.forEach((tu,Kh)=>{const oh=Object.keys(tu);let Jh=et.get(Kh);Jh||et.set(Kh,Jh=new Set),oh.forEach(D_=>Jh.add(D_))})});if(ws.length){const Xi=[];ws.forEach(da=>{Xi.push(function $8(r,t){return new pr(3505,co)}())}),Ka.forEach(da=>da.destroy()),this.reportError(Xi)}const Ps=new Map,Eu=new Map;ge.forEach(Xi=>{const da=Xi.element;k.has(da)&&(Eu.set(da,da),this._beforeAnimationBuild(Xi.player.namespaceId,Xi.instruction,Ps))}),V.forEach(Xi=>{const da=Xi.element;this._getPreviousPlayers(da,!1,Xi.namespaceId,Xi.triggerName,null).forEach(So=>{Tu(Ps,da,[]).push(So),So.destroy()})});const Su=Kr.filter(Xi=>j5(Xi,Ue,et)),Cu=new Map;N5(Cu,this.driver,Ir,et,bf).forEach(Xi=>{j5(Xi,Ue,et)&&Su.push(Xi)});const wf=new Map;In.forEach((Xi,da)=>{N5(wf,this.driver,new Set(Xi),Ue,"!")}),Su.forEach(Xi=>{const da=Cu.get(Xi),Ca=wf.get(Xi);Cu.set(Xi,Object.assign(Object.assign({},da),Ca))});const dc=[],xp=[],wp={};ge.forEach(Xi=>{const{element:da,player:Ca,instruction:So}=Xi;if(k.has(da)){if(yt.has(da))return Ca.onDestroy(()=>Pc(da,So.toStyles)),Ca.disabled=!0,Ca.overrideTotalTime(So.totalTime),void V.push(Ca);let Il=wp;if(Eu.size>1){let Du=da;const ah=[];for(;Du=Du.parentNode;){const Os=Eu.get(Du);if(Os){Il=Os;break}ah.push(Du)}ah.forEach(Os=>Eu.set(Os,Il))}const Fc=this._buildAnimation(Ca.namespaceId,So,Ps,ie,wf,Cu);if(Ca.setRealPlayer(Fc),Il===wp)dc.push(Ca);else{const Du=this.playersByElement.get(Il);Du&&Du.length&&(Ca.parentPlayer=Jf(Du)),V.push(Ca)}}else Uh(da,So.fromStyles),Ca.onDestroy(()=>Pc(da,So.toStyles)),xp.push(Ca),yt.has(da)&&V.push(Ca)}),xp.forEach(Xi=>{const da=ie.get(Xi.element);if(da&&da.length){const Ca=Jf(da);Xi.setRealPlayer(Ca)}}),V.forEach(Xi=>{Xi.parentPlayer?Xi.syncPlayerEvents(Xi.parentPlayer):Xi.destroy()});for(let Xi=0;Xi<Kr.length;Xi++){const da=Kr[Xi],Ca=da[qu];if(hp(da,Zm),Ca&&Ca.hasAnimation)continue;let So=[];if(ke.size){let Fc=ke.get(da);Fc&&Fc.length&&So.push(...Fc);let Du=this.driver.query(da,xb,!0);for(let ah=0;ah<Du.length;ah++){let Os=ke.get(Du[ah]);Os&&Os.length&&So.push(...Os)}}const Il=So.filter(Fc=>!Fc.destroyed);Il.length?$I(this,da,Il):this.processLeaveNode(da)}return Kr.length=0,dc.forEach(Xi=>{this.players.push(Xi),Xi.onDone(()=>{Xi.destroy();const da=this.players.indexOf(Xi);this.players.splice(da,1)}),Xi.play()}),dc}elementContainsData(t,n){let k=!1;const V=n[qu];return V&&V.setForRemoval&&(k=!0),this.playersByElement.has(n)&&(k=!0),this.playersByQueriedElement.has(n)&&(k=!0),this.statesByElement.has(n)&&(k=!0),this._fetchNamespace(t).elementContainsData(n)||k}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,k,V,ie){let ge=[];if(n){const ke=this.playersByQueriedElement.get(t);ke&&(ge=ke)}else{const ke=this.playersByElement.get(t);if(ke){const Ue=!ie||ie==z0;ke.forEach(et=>{et.queued||!Ue&&et.triggerName!=V||ge.push(et)})}}return(k||V)&&(ge=ge.filter(ke=>!(k&&k!=ke.namespaceId||V&&V!=ke.triggerName))),ge}_beforeAnimationBuild(t,n,k){const ie=n.element,ge=n.isRemovalTransition?void 0:t,ke=n.isRemovalTransition?void 0:n.triggerName;for(const Ue of n.timelines){const et=Ue.element,yt=et!==ie,Ht=Tu(k,et,[]);this._getPreviousPlayers(et,yt,ge,ke,n.toState).forEach(In=>{const Kn=In.getRealPlayer();Kn.beforeDestroy&&Kn.beforeDestroy(),In.destroy(),Ht.push(In)})}Uh(ie,n.fromStyles)}_buildAnimation(t,n,k,V,ie,ge){const ke=n.triggerName,Ue=n.element,et=[],yt=new Set,Ht=new Set,mn=n.timelines.map(Kn=>{const xr=Kn.element;yt.add(xr);const Kr=xr[qu];if(Kr&&Kr.removedBeforeQueried)return new F0(Kn.duration,Kn.delay);const ui=xr!==Ue,Ir=function KI(r){const t=[];return B5(r,t),t}((k.get(xr)||HI).map(Ps=>Ps.getRealPlayer())).filter(Ps=>!!Ps.element&&Ps.element===xr),zi=ie.get(xr),oa=ge.get(xr),Ka=f5(0,this._normalizer,0,Kn.keyframes,zi,oa),ws=this._buildPlayer(Kn,Ka,Ir);if(Kn.subTimeline&&V&&Ht.add(xr),ui){const Ps=new Rb(t,ke,xr);Ps.setRealPlayer(ws),et.push(Ps)}return ws});et.forEach(Kn=>{Tu(this.playersByQueriedElement,Kn.element,[]).push(Kn),Kn.onDone(()=>function YI(r,t,n){let k;if(r instanceof Map){if(k=r.get(t),k){if(k.length){const V=k.indexOf(n);k.splice(V,1)}0==k.length&&r.delete(t)}}else if(k=r[t],k){if(k.length){const V=k.indexOf(n);k.splice(V,1)}0==k.length&&delete r[t]}return k}(this.playersByQueriedElement,Kn.element,Kn))}),yt.forEach(Kn=>Gu(Kn,x5));const In=Jf(mn);return In.onDestroy(()=>{yt.forEach(Kn=>hp(Kn,x5)),Pc(Ue,n.toStyles)}),Ht.forEach(Kn=>{Tu(V,Kn,[]).push(In)}),In}_buildPlayer(t,n,k){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,k):new F0(t.duration,t.delay)}}class Rb{constructor(t,n,k){this.namespaceId=t,this.triggerName=n,this.element=k,this._player=new F0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(k=>pb(t,n,void 0,k))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){Tu(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function uv(r){return r&&1===r.nodeType}function F5(r,t){const n=r.style.display;return r.style.display=null!=t?t:"none",n}function N5(r,t,n,k,V){const ie=[];n.forEach(Ue=>ie.push(F5(Ue)));const ge=[];k.forEach((Ue,et)=>{const yt={};Ue.forEach(Ht=>{const mn=yt[Ht]=t.computeStyle(et,Ht,V);(!mn||0==mn.length)&&(et[qu]=qI,ge.push(et))}),r.set(et,yt)});let ke=0;return n.forEach(Ue=>F5(Ue,ie[ke++])),ge}function z5(r,t){const n=new Map;if(r.forEach(ke=>n.set(ke,[])),0==t.length)return n;const V=new Set(t),ie=new Map;function ge(ke){if(!ke)return 1;let Ue=ie.get(ke);if(Ue)return Ue;const et=ke.parentNode;return Ue=n.has(et)?et:V.has(et)?1:ge(et),ie.set(ke,Ue),Ue}return t.forEach(ke=>{const Ue=ge(ke);1!==Ue&&n.get(Ue).push(ke)}),n}function Gu(r,t){var n;null===(n=r.classList)||void 0===n||n.add(t)}function hp(r,t){var n;null===(n=r.classList)||void 0===n||n.remove(t)}function $I(r,t,n){Jf(n).onDone(()=>r.processLeaveNode(t))}function B5(r,t){for(let n=0;n<r.length;n++){const k=r[n];k instanceof u5?B5(k.players,t):t.push(k)}}function j5(r,t,n){const k=n.get(r);if(!k)return!1;let V=t.get(r);return V?k.forEach(ie=>V.add(ie)):t.set(r,k),n.delete(r),!0}class cv{constructor(t,n,k){this.bodyNode=t,this._driver=n,this._normalizer=k,this._triggerCache={},this.onRemovalComplete=(V,ie)=>{},this._transitionEngine=new WI(t,n,k),this._timelineEngine=new zI(t,n,k),this._transitionEngine.onRemovalComplete=(V,ie)=>this.onRemovalComplete(V,ie)}registerTrigger(t,n,k,V,ie){const ge=t+"-"+V;let ke=this._triggerCache[ge];if(!ke){const Ue=[],yt=Ab(this._driver,ie,Ue,[]);if(Ue.length)throw function B8(r,t){return new pr(3404,co)}();ke=function OI(r,t,n){return new RI(r,t,n)}(V,yt,this._normalizer),this._triggerCache[ge]=ke}this._transitionEngine.registerTrigger(n,V,ke)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,k,V){this._transitionEngine.insertNode(t,n,k,V)}onRemove(t,n,k,V){this._transitionEngine.removeNode(t,n,V||!1,k)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,k,V){if("@"==k.charAt(0)){const[ie,ge]=h5(k);this._timelineEngine.command(ie,n,ge,V)}else this._transitionEngine.trigger(t,n,k,V)}listen(t,n,k,V,ie){if("@"==k.charAt(0)){const[ge,ke]=h5(k);return this._timelineEngine.listen(ge,n,ke,ie)}return this._transitionEngine.listen(t,n,k,V,ie)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let eL=(()=>{class r{constructor(n,k,V){this._element=n,this._startStyles=k,this._endStyles=V,this._state=0;let ie=r.initialStylesByElement.get(n);ie||r.initialStylesByElement.set(n,ie={}),this._initialStyles=ie}start(){this._state<1&&(this._startStyles&&Pc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pc(this._element,this._initialStyles),this._endStyles&&(Pc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(Uh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Uh(this._element,this._endStyles),this._endStyles=null),Pc(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function Fb(r){let t=null;const n=Object.keys(r);for(let k=0;k<n.length;k++){const V=n[k];tL(V)&&(t=t||{},t[V]=r[V])}return t}function tL(r){return"display"===r||"position"===r}class V5{constructor(t,n,k,V){this.element=t,this.keyframes=n,this.options=k,this._specialStyles=V,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=k.duration,this._delay=k.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,n,k){return t.animate(n,k)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const n=this._finalKeyframe;Object.keys(n).forEach(k=>{"offset"!=k&&(t[k]=this._finished?n[k]:k5(this.element,k))})}this.currentSnapshot=t}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(k=>k()),n.length=0}}class nL{validateStyleProperty(t){return m5(t)}matchesElement(t,n){return!1}containsElement(t,n){return v5(t,n)}getParentElement(t){return yb(t)}query(t,n,k){return y5(t,n,k)}computeStyle(t,n,k){return window.getComputedStyle(t)[n]}animate(t,n,k,V,ie,ge=[]){const Ue={duration:k,delay:V,fill:0==V?"both":"forwards"};ie&&(Ue.easing=ie);const et={},yt=ge.filter(mn=>mn instanceof V5);(function oI(r,t){return 0===r||0===t})(k,V)&&yt.forEach(mn=>{let In=mn.currentSnapshot;Object.keys(In).forEach(Kn=>et[Kn]=In[Kn])}),n=function sI(r,t,n){const k=Object.keys(n);if(k.length&&t.length){let ie=t[0],ge=[];if(k.forEach(ke=>{ie.hasOwnProperty(ke)||ge.push(ke),ie[ke]=n[ke]}),ge.length)for(var V=1;V<t.length;V++){let ke=t[V];ge.forEach(function(Ue){ke[Ue]=k5(r,Ue)})}}return t}(t,n=n.map(mn=>Qf(mn,!1)),et);const Ht=function QI(r,t){let n=null,k=null;return Array.isArray(t)&&t.length?(n=Fb(t[0]),t.length>1&&(k=Fb(t[t.length-1]))):t&&(n=Fb(t)),n||k?new eL(r,n,k):null}(t,n);return new V5(t,n,Ue,Ht)}}let rL=(()=>{class r extends a5{constructor(n,k){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(k.body,{id:"0",encapsulation:ho.None,styles:[],data:{animation:[]}})}build(n){const k=this._nextAnimationId.toString();this._nextAnimationId++;const V=Array.isArray(n)?o5(n):n;return U5(this._renderer,null,k,"register",[V]),new iL(k,this._renderer)}}return r.\u0275fac=function(n){return new(n||r)(Ni(_0),Ni(rl))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();class iL extends class v8{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new aL(this._id,t,n||{},this._renderer)}}class aL{constructor(t,n,k,V){this.id=t,this.element=n,this._renderer=V,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",k)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return U5(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,n;return null!==(n=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==n?n:0}}function U5(r,t,n,k,V){return r.setProperty(t,`@@${n}:${k}`,V)}const H5="@.disabled";let oL=(()=>{class r{constructor(n,k,V){this.delegate=n,this.engine=k,this._zone=V,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),k.onRemovalComplete=(ie,ge)=>{const ke=null==ge?void 0:ge.parentNode(ie);ke&&ge.removeChild(ke,ie)}}createRenderer(n,k){const ie=this.delegate.createRenderer(n,k);if(!(n&&k&&k.data&&k.data.animation)){let yt=this._rendererCache.get(ie);return yt||(yt=new q5("",ie,this.engine),this._rendererCache.set(ie,yt)),yt}const ge=k.id,ke=k.id+"-"+this._currentId;this._currentId++,this.engine.register(ke,n);const Ue=yt=>{Array.isArray(yt)?yt.forEach(Ue):this.engine.registerTrigger(ge,ke,n,yt.name,yt)};return k.data.animation.forEach(Ue),new sL(this,ke,ie,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,k,V){n>=0&&n<this._microtaskId?this._zone.run(()=>k(V)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ie=>{const[ge,ke]=ie;ge(ke)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([k,V]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(n){return new(n||r)(Ni(_0),Ni(cv),Ni(Is))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();class q5{constructor(t,n,k){this.namespaceId=t,this.delegate=n,this.engine=k,this.destroyNode=this.delegate.destroyNode?V=>n.destroyNode(V):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,k,V=!0){this.delegate.insertBefore(t,n,k),this.engine.onInsert(this.namespaceId,n,t,V)}removeChild(t,n,k){this.engine.onRemove(this.namespaceId,n,this.delegate,k)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,k,V){this.delegate.setAttribute(t,n,k,V)}removeAttribute(t,n,k){this.delegate.removeAttribute(t,n,k)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,k,V){this.delegate.setStyle(t,n,k,V)}removeStyle(t,n,k){this.delegate.removeStyle(t,n,k)}setProperty(t,n,k){"@"==n.charAt(0)&&n==H5?this.disableAnimations(t,!!k):this.delegate.setProperty(t,n,k)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,k){return this.delegate.listen(t,n,k)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class sL extends q5{constructor(t,n,k,V){super(n,k,V),this.factory=t,this.namespaceId=n}setProperty(t,n,k){"@"==n.charAt(0)?"."==n.charAt(1)&&n==H5?this.disableAnimations(t,k=void 0===k||!!k):this.engine.process(this.namespaceId,t,n.substr(1),k):this.delegate.setProperty(t,n,k)}listen(t,n,k){if("@"==n.charAt(0)){const V=function lL(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let ie=n.substr(1),ge="";return"@"!=ie.charAt(0)&&([ie,ge]=function uL(r){const t=r.indexOf(".");return[r.substring(0,t),r.substr(t+1)]}(ie)),this.engine.listen(this.namespaceId,V,ie,ge,ke=>{this.factory.scheduleListenerCallback(ke._data||-1,k,ke)})}return this.delegate.listen(t,n,k)}}let cL=(()=>{class r extends cv{constructor(n,k,V){super(n.body,k,V)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(n){return new(n||r)(Ni(rl),Ni(bb),Ni(Db))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();const B0=new fa("AnimationModuleType"),G5=[{provide:a5,useClass:rL},{provide:Db,useFactory:function fL(){return new CI}},{provide:cv,useClass:cL},{provide:_0,useFactory:function hL(r,t,n){return new oL(r,t,n)},deps:[Um,cv,Is]}],W5=[{provide:bb,useFactory:()=>new nL},{provide:B0,useValue:"BrowserAnimations"},...G5],dL=[{provide:bb,useClass:b5},{provide:B0,useValue:"NoopAnimations"},...G5];let pL=(()=>{class r{static withConfig(n){return{ngModule:r,providers:n.disableAnimations?dL:W5}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r}),r.\u0275inj=ir({providers:W5,imports:[B3]}),r})();const mL=new fa("mat-sanity-checks",{providedIn:"root",factory:function gL(){return!0}});let dp=(()=>{class r{constructor(n,k,V){this._sanityChecks=k,this._document=V,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return!function zD(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[n])}}return r.\u0275fac=function(n){return new(n||r)(Ni(m8),Ni(mL,8),Ni(rl))},r.\u0275mod=no({type:r}),r.\u0275inj=ir({imports:[[Y3],Y3]}),r})();function Z5(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=O0(t)}}}function X5(r,t){return class extends r{constructor(...n){super(...n),this.defaultColor=t,this.color=t}get color(){return this._color}set color(n){const k=n||this.defaultColor;k!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),k&&this._elementRef.nativeElement.classList.add(`mat-${k}`),this._color=k)}}}function vL(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=O0(t)}}}function yL(r,t=0){return class extends r{constructor(...n){super(...n),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(n){this._tabIndex=null!=n?up(n):this.defaultTabIndex}}}class _L{constructor(t,n,k){this._renderer=t,this.element=n,this.config=k,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const $5={enterDuration:225,exitDuration:150},Nb=qm({passive:!0}),K5=["mousedown","touchstart"],J5=["mouseup","mouseleave","touchend","touchcancel"];class wL{constructor(t,n,k,V){this._target=t,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,V.isBrowser&&(this._containerElement=R0(k))}fadeInRipple(t,n,k={}){const V=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),ie=Object.assign(Object.assign({},$5),k.animation);k.centered&&(t=V.left+V.width/2,n=V.top+V.height/2);const ge=k.radius||function ML(r,t,n){const k=Math.max(Math.abs(r-n.left),Math.abs(r-n.right)),V=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(k*k+V*V)}(t,n,V),ke=t-V.left,Ue=n-V.top,et=ie.enterDuration,yt=document.createElement("div");yt.classList.add("mat-ripple-element"),yt.style.left=ke-ge+"px",yt.style.top=Ue-ge+"px",yt.style.height=2*ge+"px",yt.style.width=2*ge+"px",null!=k.color&&(yt.style.backgroundColor=k.color),yt.style.transitionDuration=`${et}ms`,this._containerElement.appendChild(yt),function TL(r){window.getComputedStyle(r).getPropertyValue("opacity")}(yt),yt.style.transform="scale(1)";const Ht=new _L(this,yt,k);return Ht.state=0,this._activeRipples.add(Ht),k.persistent||(this._mostRecentTransientRipple=Ht),this._runTimeoutOutsideZone(()=>{const mn=Ht===this._mostRecentTransientRipple;Ht.state=1,!k.persistent&&(!mn||!this._isPointerDown)&&Ht.fadeOut()},et),Ht}fadeOutRipple(t){const n=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!n)return;const k=t.element,V=Object.assign(Object.assign({},$5),t.config.animation);k.style.transitionDuration=`${V.exitDuration}ms`,k.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,k.remove()},V.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const n=R0(t);!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,this._registerEvents(K5))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(J5),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const n=Q3(t),k=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!k&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!e5(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=t.changedTouches;for(let k=0;k<n.length;k++)this.fadeInRipple(n[k].clientX,n[k].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,n=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,n))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(n=>{this._triggerElement.addEventListener(n,this,Nb)})})}_removeTriggerEvents(){this._triggerElement&&(K5.forEach(t=>{this._triggerElement.removeEventListener(t,this,Nb)}),this._pointerUpEventsRegistered&&J5.forEach(t=>{this._triggerElement.removeEventListener(t,this,Nb)}))}}const AL=new fa("mat-ripple-global-options");let Q5=(()=>{class r{constructor(n,k,V,ie,ge){this._elementRef=n,this._animationMode=ge,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=ie||{},this._rippleRenderer=new wL(this,k,n,V)}get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,k=0,V){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,k,Object.assign(Object.assign({},this.rippleConfig),V)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),n))}}return r.\u0275fac=function(n){return new(n||r)(Qr(Dl),Qr(Is),Qr(Hm),Qr(AL,8),Qr(B0,8))},r.\u0275dir=Wi({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,k){2&n&&$f("mat-ripple-unbounded",k.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),r})(),kL=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r}),r.\u0275inj=ir({imports:[[dp],dp]}),r})();const{isArray:EL}=Array,{getPrototypeOf:SL,prototype:CL,keys:DL}=Object;const{isArray:LL}=Array;const hc=new fa("NgValueAccessor"),OP=["sliderWrapper"],Wu=qm({passive:!1}),BP={provide:hc,useExisting:er(()=>lM),multi:!0};class jP{}const VP=yL(X5(Z5(class{constructor(r){this._elementRef=r}}),"accent"));let lM=(()=>{class r extends VP{constructor(n,k,V,ie,ge,ke,Ue,et){super(n),this._focusMonitor=k,this._changeDetectorRef=V,this._dir=ie,this._ngZone=ke,this._animationMode=et,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new ta,this.input=new ta,this.valueChange=new ta,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=_.EMPTY,this._pointerDown=yt=>{this.disabled||this._isSliding||!G0(yt)&&0!==yt.button||this._ngZone.run(()=>{this._touchId=G0(yt)?function UP(r,t){for(let n=0;n<r.touches.length;n++){const k=r.touches[n].target;if(t===k||t.contains(k))return r.touches[n].identifier}}(yt,this._elementRef.nativeElement):void 0;const Ht=cM(yt,this._touchId);if(Ht){const mn=this.value;this._isSliding="pointer",this._lastPointerEvent=yt,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(yt),this._focusHostElement(),this._updateValueFromPosition(Ht),this._valueOnSlideStart=mn,yt.cancelable&&yt.preventDefault(),mn!=this.value&&this._emitInputEvent()}})},this._pointerMove=yt=>{if("pointer"===this._isSliding){const Ht=cM(yt,this._touchId);if(Ht){yt.preventDefault();const mn=this.value;this._lastPointerEvent=yt,this._updateValueFromPosition(Ht),mn!=this.value&&this._emitInputEvent()}}},this._pointerUp=yt=>{"pointer"===this._isSliding&&(!G0(yt)||"number"!=typeof this._touchId||s_(yt.changedTouches,this._touchId))&&(yt.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=Ue,this.tabIndex=parseInt(ge)||0,ke.runOutsideAngular(()=>{const yt=n.nativeElement;yt.addEventListener("mousedown",this._pointerDown,Wu),yt.addEventListener("touchstart",this._pointerDown,Wu)})}get invert(){return this._invert}set invert(n){this._invert=O0(n)}get max(){return this._max}set max(n){this._max=up(n,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(n){this._min=up(n,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(n){this._step=up(n,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(n){this._thumbLabel=O0(n)}get tickInterval(){return this._tickInterval}set tickInterval(n){this._tickInterval="auto"===n?"auto":"number"==typeof n||"string"==typeof n?up(n,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(n){if(n!==this._value){let k=up(n,0);this._roundToDecimal&&k!==this.min&&k!==this.max&&(k=parseFloat(k.toFixed(this._roundToDecimal))),this._value=k,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(n){this._vertical=O0(n)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(n){this._focusHostElement(n)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const k=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${k})`}}_getTrackFillStyles(){const n=this.percent,V=this.vertical?`1, ${n}, 1`:`${n}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${V})`,display:0===n?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let n=100*this._tickIntervalPercent,ke={backgroundSize:this.vertical?`2px ${n}%`:`${n}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${n/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const Ue=this._shouldInvertAxis();let et;et=this.vertical?Ue?"Bottom":"Top":Ue?"Right":"Left",ke[`padding${et}`]=`${this._getThumbGap()}px`}return ke}_getThumbContainerStyles(){const n=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?n:!n)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const n=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?n:!n}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(n=>{this._isActive=!!n&&"keyboard"!==n,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const n=this._elementRef.nativeElement;n.removeEventListener("mousedown",this._pointerDown,Wu),n.removeEventListener("touchstart",this._pointerDown,Wu),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(n){if(this.disabled||function JD(r,...t){return t.length?t.some(n=>r[n]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}(n)||this._isSliding&&"keyboard"!==this._isSliding)return;const k=this.value;switch(n.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}k!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",n.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(n){const k=this._document,V=G0(n),ge=V?"touchend":"mouseup";k.addEventListener(V?"touchmove":"mousemove",this._pointerMove,Wu),k.addEventListener(ge,this._pointerUp,Wu),V&&k.addEventListener("touchcancel",this._pointerUp,Wu);const ke=this._getWindow();void 0!==ke&&ke&&ke.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const n=this._document;n.removeEventListener("mousemove",this._pointerMove,Wu),n.removeEventListener("mouseup",this._pointerUp,Wu),n.removeEventListener("touchmove",this._pointerMove,Wu),n.removeEventListener("touchend",this._pointerUp,Wu),n.removeEventListener("touchcancel",this._pointerUp,Wu);const k=this._getWindow();void 0!==k&&k&&k.removeEventListener("blur",this._windowBlur)}_increment(n){const k=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(k+this.step*n,this.min,this.max)}_updateValueFromPosition(n){if(!this._sliderDimensions)return;let ge=this._clamp(((this.vertical?n.y:n.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(ge=1-ge),0===ge)this.value=this.min;else if(1===ge)this.value=this.max;else{const ke=this._calculateValue(ge),Ue=Math.round((ke-this.min)/this.step)*this.step+this.min;this.value=this._clamp(Ue,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let n;if("auto"==this.tickInterval){let k=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;n=Math.ceil(30/(k*this.step/(this.max-this.min)))*this.step/k}else n=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=uM(n)?n:0}_createChangeEvent(n=this.value){let k=new jP;return k.source=this,k.value=n,k}_calculatePercentage(n){const k=((n||0)-this.min)/(this.max-this.min);return uM(k)?k:0}_calculateValue(n){return this.min+n*(this.max-this.min)}_clamp(n,k=0,V=1){return Math.max(k,Math.min(n,V))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(n){this._elementRef.nativeElement.focus(n)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(n){this.value=n}registerOnChange(n){this._controlValueAccessorChangeFn=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.disabled=n}}return r.\u0275fac=function(n){return new(n||r)(Qr(Dl),Qr(n5),Qr(k0),Qr(OD,8),Uc("tabindex"),Qr(Is),Qr(rl),Qr(B0,8))},r.\u0275cmp=Fs({type:r,selectors:[["mat-slider"]],viewQuery:function(n,k){if(1&n&&xm(OP,5),2&n){let V;tp(V=np())&&(k._sliderWrapper=V.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(n,k){1&n&&Cl("focus",function(){return k._onFocus()})("blur",function(){return k._onBlur()})("keydown",function(ie){return k._onKeydown(ie)})("keyup",function(){return k._onKeyup()})("mouseenter",function(){return k._onMouseenter()})("selectstart",function(ie){return ie.preventDefault()}),2&n&&(e1("tabIndex",k.tabIndex),wu("aria-disabled",k.disabled)("aria-valuemax",k.max)("aria-valuemin",k.min)("aria-valuenow",k.value)("aria-valuetext",null==k.valueText?k.displayValue:k.valueText)("aria-orientation",k.vertical?"vertical":"horizontal"),$f("mat-slider-disabled",k.disabled)("mat-slider-has-ticks",k.tickInterval)("mat-slider-horizontal",!k.vertical)("mat-slider-axis-inverted",k._shouldInvertAxis())("mat-slider-invert-mouse-coords",k._shouldInvertMouseCoords())("mat-slider-sliding",k._isSliding)("mat-slider-thumb-label-showing",k.thumbLabel)("mat-slider-vertical",k.vertical)("mat-slider-min-value",k._isMinValue())("mat-slider-hide-last-tick",k.disabled||k._isMinValue()&&k._getThumbGap()&&k._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===k._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[is([BP]),Vo],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(n,k){1&n&&(Sl(0,"div",0,1)(2,"div",2),oc(3,"div",3)(4,"div",4),xl(),Sl(5,"div",5),oc(6,"div",6),xl(),Sl(7,"div",7),oc(8,"div",8)(9,"div",9),Sl(10,"div",10)(11,"span",11),$d(12),xl()()()()),2&n&&(jo(3),El("ngStyle",k._getTrackBackgroundStyles()),jo(1),El("ngStyle",k._getTrackFillStyles()),jo(1),El("ngStyle",k._getTicksContainerStyles()),jo(1),El("ngStyle",k._getTicksStyles()),jo(1),El("ngStyle",k._getThumbContainerStyles()),jo(5),dm(k.displayValue))},directives:[Nm],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),r})();function uM(r){return!isNaN(r)&&isFinite(r)}function G0(r){return"t"===r.type[0]}function cM(r,t){let n;return n=G0(r)?"number"==typeof t?s_(r.touches,t)||s_(r.changedTouches,t):r.touches[0]||r.changedTouches[0]:r,n?{x:n.clientX,y:n.clientY}:void 0}function s_(r,t){for(let n=0;n<r.length;n++)if(r[n].identifier===t)return r[n]}let HP=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r}),r.\u0275inj=ir({imports:[[op,dp],dp]}),r})();const qP=["mat-button",""],GP=["*"],YP=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ZP=X5(Z5(vL(class{constructor(r){this._elementRef=r}})));let XP=(()=>{class r extends ZP{constructor(n,k,V){super(n),this._focusMonitor=k,this._animationMode=V,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const ie of YP)this._hasHostAttributes(ie)&&this._getHostElement().classList.add(ie);n.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(n,k){n?this._focusMonitor.focusVia(this._getHostElement(),n,k):this._getHostElement().focus(k)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...n){return n.some(k=>this._getHostElement().hasAttribute(k))}}return r.\u0275fac=function(n){return new(n||r)(Qr(Dl),Qr(n5),Qr(B0,8))},r.\u0275cmp=Fs({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(n,k){if(1&n&&xm(Q5,5),2&n){let V;tp(V=np())&&(k.ripple=V.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(n,k){2&n&&(wu("disabled",k.disabled||null),$f("_mat-animation-noopable","NoopAnimations"===k._animationMode)("mat-button-disabled",k.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Vo],attrs:qP,ngContentSelectors:GP,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,k){1&n&&($y(),Sl(0,"span",0),Ky(1),xl(),oc(2,"span",1)(3,"span",2)),2&n&&(jo(2),$f("mat-button-ripple-round",k.isRoundButton||k.isIconButton),El("matRippleDisabled",k._isRippleDisabled())("matRippleCentered",k.isIconButton)("matRippleTrigger",k._getHostElement()))},directives:[Q5],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),r})(),$P=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r}),r.\u0275inj=ir({imports:[[kL,dp],dp]}),r})();function KP(...r){const t=$t(r),n=function Et(r){return le(vt(r))?r.pop():void 0}(r),{args:k,keys:V}=function eT(r){if(1===r.length){const t=r[0];if(EL(t))return{args:t,keys:null};if(function IL(r){return r&&"object"==typeof r&&SL(r)===CL}(t)){const n=DL(t);return{args:n.map(k=>t[k]),keys:n}}}return{args:r,keys:null}}(r);if(0===k.length)return Sn([],t);const ie=new U(function JP(r,t,n=L){return k=>{fM(t,()=>{const{length:V}=r,ie=new Array(V);let ge=V,ke=V;for(let Ue=0;Ue<V;Ue++)fM(t,()=>{const et=Sn(r[Ue],t);let yt=!1;et.subscribe(H(k,Ht=>{ie[Ue]=Ht,yt||(yt=!0,ke--),ke||k.next(n(ie.slice()))},()=>{--ge||k.complete()}))},k)},k)}}(k,t,V?ge=>function nT(r,t){return r.reduce((n,k,V)=>(n[k]=t[V],n),{})}(V,ge):L));return n?ie.pipe(function tT(r){return oe(t=>function PL(r,t){return LL(t)?r(...t):r(t)}(r,t))}(n)):ie}function fM(r,t,n){r?Ye(n,r,t):t()}function xv(r,t){const n=le(r)?r:()=>r,k=V=>V.error(n());return new U(t?V=>t.schedule(k,0,V):k)}const wv=y(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function l_(...r){return function QP(){return st(1)}()(Sn(r,$t(r)))}function hM(r){return new U(t=>{pn(r()).subscribe(t)})}function dM(){return G((r,t)=>{let n=null;r._refCount++;const k=H(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(n=null);const V=r._connection,ie=n;n=null,V&&(!ie||V===ie)&&V.unsubscribe(),t.unsubscribe()});r.subscribe(k),k.closed||(n=r.connect())})}class eO extends U{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,se(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new _;const n=this.getSubject();t.add(this.source.subscribe(H(n,void 0,()=>{this._teardown(),n.complete()},k=>{this._teardown(),n.error(k)},()=>this._teardown()))),t.closed&&(this._connection=null,t=_.EMPTY)}return t}refCount(){return dM()(this)}}function Wh(r,t){return G((n,k)=>{let V=null,ie=0,ge=!1;const ke=()=>ge&&!V&&k.complete();n.subscribe(H(k,Ue=>{null==V||V.unsubscribe();let et=0;const yt=ie++;pn(r(Ue,yt)).subscribe(V=H(k,Ht=>k.next(t?t(Ue,Ht,yt,et++):Ht),()=>{V=null,ke()}))},()=>{ge=!0,ke()}))})}function nO(r,t,n,k,V){return(ie,ge)=>{let ke=n,Ue=t,et=0;ie.subscribe(H(ge,yt=>{const Ht=et++;Ue=ke?r(Ue,yt,Ht):(ke=!0,yt),k&&ge.next(Ue)},V&&(()=>{ke&&ge.next(Ue),ge.complete()})))}}function pM(r,t){return G(nO(r,t,arguments.length>=2,!0))}function rh(r){return G((t,n)=>{let ie,k=null,V=!1;k=t.subscribe(H(n,void 0,void 0,ge=>{ie=pn(r(ge,rh(r)(t))),k?(k.unsubscribe(),k=null,ie.subscribe(n)):V=!0})),V&&(k.unsubscribe(),k=null,ie.subscribe(n))})}function W0(r,t){return le(t)?ot(r,t,1):ot(r,1)}function u_(r){return r<=0?()=>bt:G((t,n)=>{let k=[];t.subscribe(H(n,V=>{k.push(V),r<k.length&&k.shift()},()=>{for(const V of k)n.next(V);n.complete()},void 0,()=>{k=null}))})}function gM(r=rO){return G((t,n)=>{let k=!1;t.subscribe(H(n,V=>{k=!0,n.next(V)},()=>k?n.complete():n.error(r())))})}function rO(){return new wv}function mM(r){return G((t,n)=>{let k=!1;t.subscribe(H(n,V=>{k=!0,n.next(V)},()=>{k||n.next(r),n.complete()}))})}function gp(r,t){const n=arguments.length>=2;return k=>k.pipe(r?Bh((V,ie)=>r(V,ie,k)):L,kn(1),n?mM(t):gM(()=>new wv))}function Au(r,t,n){const k=le(r)||t||n?{next:r,error:t,complete:n}:r;return k?G((V,ie)=>{var ge;null===(ge=k.subscribe)||void 0===ge||ge.call(k);let ke=!0;V.subscribe(H(ie,Ue=>{var et;null===(et=k.next)||void 0===et||et.call(k,Ue),ie.next(Ue)},()=>{var Ue;ke=!1,null===(Ue=k.complete)||void 0===Ue||Ue.call(k),ie.complete()},Ue=>{var et;ke=!1,null===(et=k.error)||void 0===et||et.call(k,Ue),ie.error(Ue)},()=>{var Ue,et;ke&&(null===(Ue=k.unsubscribe)||void 0===Ue||Ue.call(k)),null===(et=k.finalize)||void 0===et||et.call(k)}))}):L}class _f{constructor(t,n){this.id=t,this.url=n}}class c_ extends _f{constructor(t,n,k="imperative",V=null){super(t,n),this.navigationTrigger=k,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Y0 extends _f{constructor(t,n,k){super(t,n),this.urlAfterRedirects=k}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vM extends _f{constructor(t,n,k){super(t,n),this.reason=k}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class oO extends _f{constructor(t,n,k){super(t,n),this.error=k}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sO extends _f{constructor(t,n,k,V){super(t,n),this.urlAfterRedirects=k,this.state=V}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lO extends _f{constructor(t,n,k,V){super(t,n),this.urlAfterRedirects=k,this.state=V}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uO extends _f{constructor(t,n,k,V,ie){super(t,n),this.urlAfterRedirects=k,this.state=V,this.shouldActivate=ie}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cO extends _f{constructor(t,n,k,V){super(t,n),this.urlAfterRedirects=k,this.state=V}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fO extends _f{constructor(t,n,k,V){super(t,n),this.urlAfterRedirects=k,this.state=V}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yM{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bM{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hO{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dO{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pO{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gO{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _M{constructor(t,n,k){this.routerEvent=t,this.position=n,this.anchor=k}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const to="primary";class mO{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function mp(r){return new mO(r)}const xM="ngNavigationCancelingError";function f_(r){const t=Error("NavigationCancelingError: "+r);return t[xM]=!0,t}function yO(r,t,n){const k=n.path.split("/");if(k.length>r.length||"full"===n.pathMatch&&(t.hasChildren()||k.length<r.length))return null;const V={};for(let ie=0;ie<k.length;ie++){const ge=k[ie],ke=r[ie];if(ge.startsWith(":"))V[ge.substring(1)]=ke;else if(ge!==ke.path)return null}return{consumed:r.slice(0,k.length),posParams:V}}function Oc(r,t){const n=r?Object.keys(r):void 0,k=t?Object.keys(t):void 0;if(!n||!k||n.length!=k.length)return!1;let V;for(let ie=0;ie<n.length;ie++)if(V=n[ie],!wM(r[V],t[V]))return!1;return!0}function wM(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const n=[...r].sort(),k=[...t].sort();return n.every((V,ie)=>k[ie]===V)}return r===t}function TM(r){return Array.prototype.concat.apply([],r)}function MM(r){return r.length>0?r[r.length-1]:null}function Bl(r,t){for(const n in r)r.hasOwnProperty(n)&&t(r[n],n)}function Rc(r){return Zy(r)?r:h0(r)?Sn(Promise.resolve(r)):Ua(r)}const xO={exact:function EM(r,t,n){if(!Zh(r.segments,t.segments)||!Tv(r.segments,t.segments,n)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const k in t.children)if(!r.children[k]||!EM(r.children[k],t.children[k],n))return!1;return!0},subset:SM},AM={exact:function wO(r,t){return Oc(r,t)},subset:function TO(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(n=>wM(r[n],t[n]))},ignored:()=>!0};function kM(r,t,n){return xO[n.paths](r.root,t.root,n.matrixParams)&&AM[n.queryParams](r.queryParams,t.queryParams)&&!("exact"===n.fragment&&r.fragment!==t.fragment)}function SM(r,t,n){return CM(r,t,t.segments,n)}function CM(r,t,n,k){if(r.segments.length>n.length){const V=r.segments.slice(0,n.length);return!(!Zh(V,n)||t.hasChildren()||!Tv(V,n,k))}if(r.segments.length===n.length){if(!Zh(r.segments,n)||!Tv(r.segments,n,k))return!1;for(const V in t.children)if(!r.children[V]||!SM(r.children[V],t.children[V],k))return!1;return!0}{const V=n.slice(0,r.segments.length),ie=n.slice(r.segments.length);return!!(Zh(r.segments,V)&&Tv(r.segments,V,k)&&r.children[to])&&CM(r.children[to],t,ie,k)}}function Tv(r,t,n){return t.every((k,V)=>AM[n](r[V].parameters,k.parameters))}class Yh{constructor(t,n,k){this.root=t,this.queryParams=n,this.fragment=k}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mp(this.queryParams)),this._queryParamMap}toString(){return kO.serialize(this)}}class fo{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Bl(n,(k,V)=>k.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mv(this)}}class Z0{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=mp(this.parameters)),this._parameterMap}toString(){return OM(this)}}function Zh(r,t){return r.length===t.length&&r.every((n,k)=>n.path===t[k].path)}class DM{}class IM{parse(t){const n=new RO(t);return new Yh(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${X0(t.root,!0)}`,k=function CO(r){const t=Object.keys(r).map(n=>{const k=r[n];return Array.isArray(k)?k.map(V=>`${Av(n)}=${Av(V)}`).join("&"):`${Av(n)}=${Av(k)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${k}${"string"==typeof t.fragment?`#${function EO(r){return encodeURI(r)}(t.fragment)}`:""}`}}const kO=new IM;function Mv(r){return r.segments.map(t=>OM(t)).join("/")}function X0(r,t){if(!r.hasChildren())return Mv(r);if(t){const n=r.children[to]?X0(r.children[to],!1):"",k=[];return Bl(r.children,(V,ie)=>{ie!==to&&k.push(`${ie}:${X0(V,!1)}`)}),k.length>0?`${n}(${k.join("//")})`:n}{const n=function AO(r,t){let n=[];return Bl(r.children,(k,V)=>{V===to&&(n=n.concat(t(k,V)))}),Bl(r.children,(k,V)=>{V!==to&&(n=n.concat(t(k,V)))}),n}(r,(k,V)=>V===to?[X0(r.children[to],!1)]:[`${V}:${X0(k,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[to]?`${Mv(r)}/${n[0]}`:`${Mv(r)}/(${n.join("//")})`}}function LM(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Av(r){return LM(r).replace(/%3B/gi,";")}function h_(r){return LM(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kv(r){return decodeURIComponent(r)}function PM(r){return kv(r.replace(/\+/g,"%20"))}function OM(r){return`${h_(r.path)}${function SO(r){return Object.keys(r).map(t=>`;${h_(t)}=${h_(r[t])}`).join("")}(r.parameters)}`}const DO=/^[^\/()?;=#]+/;function Ev(r){const t=r.match(DO);return t?t[0]:""}const IO=/^[^=?&#]+/,PO=/^[^&#]+/;class RO{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fo([],{}):new fo([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let k={};return this.peekStartsWith("(")&&(k=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(k[to]=new fo(t,n)),k}parseSegment(){const t=Ev(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Z0(kv(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Ev(this.remaining);if(!n)return;this.capture(n);let k="";if(this.consumeOptional("=")){const V=Ev(this.remaining);V&&(k=V,this.capture(k))}t[kv(n)]=kv(k)}parseQueryParam(t){const n=function LO(r){const t=r.match(IO);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let k="";if(this.consumeOptional("=")){const ge=function OO(r){const t=r.match(PO);return t?t[0]:""}(this.remaining);ge&&(k=ge,this.capture(k))}const V=PM(n),ie=PM(k);if(t.hasOwnProperty(V)){let ge=t[V];Array.isArray(ge)||(ge=[ge],t[V]=ge),ge.push(ie)}else t[V]=ie}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const k=Ev(this.remaining),V=this.remaining[k.length];if("/"!==V&&")"!==V&&";"!==V)throw new Error(`Cannot parse url '${this.url}'`);let ie;k.indexOf(":")>-1?(ie=k.substr(0,k.indexOf(":")),this.capture(ie),this.capture(":")):t&&(ie=to);const ge=this.parseChildren();n[ie]=1===Object.keys(ge).length?ge[to]:new fo([],ge),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class RM{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=d_(t,this._root);return n?n.children.map(k=>k.value):[]}firstChild(t){const n=d_(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=p_(t,this._root);return n.length<2?[]:n[n.length-2].children.map(V=>V.value).filter(V=>V!==t)}pathFromRoot(t){return p_(t,this._root).map(n=>n.value)}}function d_(r,t){if(r===t.value)return t;for(const n of t.children){const k=d_(r,n);if(k)return k}return null}function p_(r,t){if(r===t.value)return[t];for(const n of t.children){const k=p_(r,n);if(k.length)return k.unshift(t),k}return[]}class xf{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function vp(r){const t={};return r&&r.children.forEach(n=>t[n.value.outlet]=n),t}class FM extends RM{constructor(t,n){super(t),this.snapshot=n,g_(this,t)}toString(){return this.snapshot.toString()}}function NM(r,t){const n=function FO(r,t){const ge=new Sv([],{},{},"",{},to,t,null,r.root,-1,{});return new BM("",new xf(ge,[]))}(r,t),k=new Hu([new Z0("",{})]),V=new Hu({}),ie=new Hu({}),ge=new Hu({}),ke=new Hu(""),Ue=new yp(k,V,ge,ke,ie,to,t,n.root);return Ue.snapshot=n.root,new FM(new xf(Ue,[]),n)}class yp{constructor(t,n,k,V,ie,ge,ke,Ue){this.url=t,this.params=n,this.queryParams=k,this.fragment=V,this.data=ie,this.outlet=ge,this.component=ke,this._futureSnapshot=Ue}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(oe(t=>mp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(oe(t=>mp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zM(r,t="emptyOnly"){const n=r.pathFromRoot;let k=0;if("always"!==t)for(k=n.length-1;k>=1;){const V=n[k],ie=n[k-1];if(V.routeConfig&&""===V.routeConfig.path)k--;else{if(ie.component)break;k--}}return function NO(r){return r.reduce((t,n)=>({params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign({},t.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(k))}class Sv{constructor(t,n,k,V,ie,ge,ke,Ue,et,yt,Ht){this.url=t,this.params=n,this.queryParams=k,this.fragment=V,this.data=ie,this.outlet=ge,this.component=ke,this.routeConfig=Ue,this._urlSegment=et,this._lastPathIndex=yt,this._resolve=Ht}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(k=>k.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class BM extends RM{constructor(t,n){super(n),this.url=t,g_(this,n)}toString(){return jM(this._root)}}function g_(r,t){t.value._routerState=r,t.children.forEach(n=>g_(r,n))}function jM(r){const t=r.children.length>0?` { ${r.children.map(jM).join(", ")} } `:"";return`${r.value}${t}`}function m_(r){if(r.snapshot){const t=r.snapshot,n=r._futureSnapshot;r.snapshot=n,Oc(t.queryParams,n.queryParams)||r.queryParams.next(n.queryParams),t.fragment!==n.fragment&&r.fragment.next(n.fragment),Oc(t.params,n.params)||r.params.next(n.params),function bO(r,t){if(r.length!==t.length)return!1;for(let n=0;n<r.length;++n)if(!Oc(r[n],t[n]))return!1;return!0}(t.url,n.url)||r.url.next(n.url),Oc(t.data,n.data)||r.data.next(n.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function v_(r,t){const n=Oc(r.params,t.params)&&function MO(r,t){return Zh(r,t)&&r.every((n,k)=>Oc(n.parameters,t[k].parameters))}(r.url,t.url);return n&&!(!r.parent!=!t.parent)&&(!r.parent||v_(r.parent,t.parent))}function $0(r,t,n){if(n&&r.shouldReuseRoute(t.value,n.value.snapshot)){const k=n.value;k._futureSnapshot=t.value;const V=function BO(r,t,n){return t.children.map(k=>{for(const V of n.children)if(r.shouldReuseRoute(k.value,V.value.snapshot))return $0(r,k,V);return $0(r,k)})}(r,t,n);return new xf(k,V)}{if(r.shouldAttach(t.value)){const ie=r.retrieve(t.value);if(null!==ie){const ge=ie.route;return ge.value._futureSnapshot=t.value,ge.children=t.children.map(ke=>$0(r,ke)),ge}}const k=function jO(r){return new yp(new Hu(r.url),new Hu(r.params),new Hu(r.queryParams),new Hu(r.fragment),new Hu(r.data),r.outlet,r.component,r)}(t.value),V=t.children.map(ie=>$0(r,ie));return new xf(k,V)}}function Cv(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function K0(r){return"object"==typeof r&&null!=r&&r.outlets}function y_(r,t,n,k,V){let ie={};if(k&&Bl(k,(ke,Ue)=>{ie[Ue]=Array.isArray(ke)?ke.map(et=>`${et}`):`${ke}`}),r===t)return new Yh(n,ie,V);const ge=VM(r,t,n);return new Yh(ge,ie,V)}function VM(r,t,n){const k={};return Bl(r.children,(V,ie)=>{k[ie]=V===t?n:VM(V,t,n)}),new fo(r.segments,k)}class UM{constructor(t,n,k){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=k,t&&k.length>0&&Cv(k[0]))throw new Error("Root segment cannot have matrix parameters");const V=k.find(K0);if(V&&V!==MM(k))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class b_{constructor(t,n,k){this.segmentGroup=t,this.processChildren=n,this.index=k}}function HM(r,t,n){if(r||(r=new fo([],{})),0===r.segments.length&&r.hasChildren())return Dv(r,t,n);const k=function WO(r,t,n){let k=0,V=t;const ie={match:!1,pathIndex:0,commandIndex:0};for(;V<r.segments.length;){if(k>=n.length)return ie;const ge=r.segments[V],ke=n[k];if(K0(ke))break;const Ue=`${ke}`,et=k<n.length-1?n[k+1]:null;if(V>0&&void 0===Ue)break;if(Ue&&et&&"object"==typeof et&&void 0===et.outlets){if(!GM(Ue,et,ge))return ie;k+=2}else{if(!GM(Ue,{},ge))return ie;k++}V++}return{match:!0,pathIndex:V,commandIndex:k}}(r,t,n),V=n.slice(k.commandIndex);if(k.match&&k.pathIndex<r.segments.length){const ie=new fo(r.segments.slice(0,k.pathIndex),{});return ie.children[to]=new fo(r.segments.slice(k.pathIndex),r.children),Dv(ie,0,V)}return k.match&&0===V.length?new fo(r.segments,{}):k.match&&!r.hasChildren()?__(r,t,n):k.match?Dv(r,0,V):__(r,t,n)}function Dv(r,t,n){if(0===n.length)return new fo(r.segments,{});{const k=function GO(r){return K0(r[0])?r[0].outlets:{[to]:r}}(n),V={};return Bl(k,(ie,ge)=>{"string"==typeof ie&&(ie=[ie]),null!==ie&&(V[ge]=HM(r.children[ge],t,ie))}),Bl(r.children,(ie,ge)=>{void 0===k[ge]&&(V[ge]=ie)}),new fo(r.segments,V)}}function __(r,t,n){const k=r.segments.slice(0,t);let V=0;for(;V<n.length;){const ie=n[V];if(K0(ie)){const Ue=YO(ie.outlets);return new fo(k,Ue)}if(0===V&&Cv(n[0])){k.push(new Z0(r.segments[t].path,qM(n[0]))),V++;continue}const ge=K0(ie)?ie.outlets[to]:`${ie}`,ke=V<n.length-1?n[V+1]:null;ge&&ke&&Cv(ke)?(k.push(new Z0(ge,qM(ke))),V+=2):(k.push(new Z0(ge,{})),V++)}return new fo(k,{})}function YO(r){const t={};return Bl(r,(n,k)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[k]=__(new fo([],{}),0,n))}),t}function qM(r){const t={};return Bl(r,(n,k)=>t[k]=`${n}`),t}function GM(r,t,n){return r==n.path&&Oc(t,n.parameters)}class XO{constructor(t,n,k,V){this.routeReuseStrategy=t,this.futureState=n,this.currState=k,this.forwardEvent=V}activate(t){const n=this.futureState._root,k=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,k,t),m_(this.futureState.root),this.activateChildRoutes(n,k,t)}deactivateChildRoutes(t,n,k){const V=vp(n);t.children.forEach(ie=>{const ge=ie.value.outlet;this.deactivateRoutes(ie,V[ge],k),delete V[ge]}),Bl(V,(ie,ge)=>{this.deactivateRouteAndItsChildren(ie,k)})}deactivateRoutes(t,n,k){const V=t.value,ie=n?n.value:null;if(V===ie)if(V.component){const ge=k.getContext(V.outlet);ge&&this.deactivateChildRoutes(t,n,ge.children)}else this.deactivateChildRoutes(t,n,k);else ie&&this.deactivateRouteAndItsChildren(n,k)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const k=n.getContext(t.value.outlet),V=k&&t.value.component?k.children:n,ie=vp(t);for(const ge of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[ge],V);if(k&&k.outlet){const ge=k.outlet.detach(),ke=k.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:ge,route:t,contexts:ke})}}deactivateRouteAndOutlet(t,n){const k=n.getContext(t.value.outlet),V=k&&t.value.component?k.children:n,ie=vp(t);for(const ge of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[ge],V);k&&k.outlet&&(k.outlet.deactivate(),k.children.onOutletDeactivated(),k.attachRef=null,k.resolver=null,k.route=null)}activateChildRoutes(t,n,k){const V=vp(n);t.children.forEach(ie=>{this.activateRoutes(ie,V[ie.value.outlet],k),this.forwardEvent(new gO(ie.value.snapshot))}),t.children.length&&this.forwardEvent(new dO(t.value.snapshot))}activateRoutes(t,n,k){const V=t.value,ie=n?n.value:null;if(m_(V),V===ie)if(V.component){const ge=k.getOrCreateContext(V.outlet);this.activateChildRoutes(t,n,ge.children)}else this.activateChildRoutes(t,n,k);else if(V.component){const ge=k.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const ke=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),ge.children.onOutletReAttached(ke.contexts),ge.attachRef=ke.componentRef,ge.route=ke.route.value,ge.outlet&&ge.outlet.attach(ke.componentRef,ke.route.value),m_(ke.route.value),this.activateChildRoutes(t,null,ge.children)}else{const ke=function $O(r){for(let t=r.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(V.snapshot),Ue=ke?ke.module.componentFactoryResolver:null;ge.attachRef=null,ge.route=V,ge.resolver=Ue,ge.outlet&&ge.outlet.activateWith(V,Ue),this.activateChildRoutes(t,null,ge.children)}}else this.activateChildRoutes(t,null,k)}}class x_{constructor(t,n){this.routes=t,this.module=n}}function ih(r){return"function"==typeof r}function Xh(r){return r instanceof Yh}const J0=Symbol("INITIAL_VALUE");function Q0(){return Wh(r=>KP(r.map(t=>t.pipe(kn(1),function tO(...r){const t=$t(r);return G((n,k)=>{(t?l_(r,n,t):l_(r,n)).subscribe(k)})}(J0)))).pipe(pM((t,n)=>{let k=!1;return n.reduce((V,ie,ge)=>V!==J0?V:(ie===J0&&(k=!0),k||!1!==ie&&ge!==n.length-1&&!Xh(ie)?V:ie),t)},J0),Bh(t=>t!==J0),oe(t=>Xh(t)?t:!0===t),kn(1)))}class n9{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new eg,this.attachRef=null}}class eg{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const k=this.getOrCreateContext(t);k.outlet=n,this.contexts.set(t,k)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new n9,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}let WM=(()=>{class r{constructor(n,k,V,ie,ge){this.parentContexts=n,this.location=k,this.resolver=V,this.changeDetector=ge,this.activated=null,this._activatedRoute=null,this.activateEvents=new ta,this.deactivateEvents=new ta,this.attachEvents=new ta,this.detachEvents=new ta,this.name=ie||to,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,k){this.activated=n,this._activatedRoute=k,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,k){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const ge=(k=k||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),ke=this.parentContexts.getOrCreateContext(this.name).children,Ue=new r9(n,ke,this.location.injector);this.activated=this.location.createComponent(ge,this.location.length,Ue),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(n){return new(n||r)(Qr(eg),Qr(uc),Qr(b0),Uc("name"),Qr(k0))},r.\u0275dir=Wi({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),r})();class r9{constructor(t,n,k){this.route=t,this.childContexts=n,this.parent=k}get(t,n){return t===yp?this.route:t===eg?this.childContexts:this.parent.get(t,n)}}let YM=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=Fs({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,k){1&n&&oc(0,"router-outlet")},directives:[WM],encapsulation:2}),r})();function ZM(r,t=""){for(let n=0;n<r.length;n++){const k=r[n];i9(k,a9(t,k))}}function i9(r,t){r.children&&ZM(r.children,t)}function a9(r,t){return t?r||t.path?r&&!t.path?`${r}/`:!r&&t.path?t.path:`${r}/${t.path}`:"":r}function w_(r){const t=r.children&&r.children.map(w_),n=t?Object.assign(Object.assign({},r),{children:t}):Object.assign({},r);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==to&&(n.component=YM),n}function Yu(r){return r.outlet||to}function XM(r,t){const n=r.filter(k=>Yu(k)===t);return n.push(...r.filter(k=>Yu(k)!==t)),n}const $M={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Iv(r,t,n){var k;if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||n.length>0)?Object.assign({},$M):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const ie=(t.matcher||yO)(n,r,t);if(!ie)return Object.assign({},$M);const ge={};Bl(ie.posParams,(Ue,et)=>{ge[et]=Ue.path});const ke=ie.consumed.length>0?Object.assign(Object.assign({},ge),ie.consumed[ie.consumed.length-1].parameters):ge;return{matched:!0,consumedSegments:ie.consumed,remainingSegments:n.slice(ie.consumed.length),parameters:ke,positionalParamSegments:null!==(k=ie.posParams)&&void 0!==k?k:{}}}function Lv(r,t,n,k,V="corrected"){if(n.length>0&&function l9(r,t,n){return n.some(k=>Pv(r,t,k)&&Yu(k)!==to)}(r,n,k)){const ge=new fo(t,function s9(r,t,n,k){const V={};V[to]=k,k._sourceSegment=r,k._segmentIndexShift=t.length;for(const ie of n)if(""===ie.path&&Yu(ie)!==to){const ge=new fo([],{});ge._sourceSegment=r,ge._segmentIndexShift=t.length,V[Yu(ie)]=ge}return V}(r,t,k,new fo(n,r.children)));return ge._sourceSegment=r,ge._segmentIndexShift=t.length,{segmentGroup:ge,slicedSegments:[]}}if(0===n.length&&function u9(r,t,n){return n.some(k=>Pv(r,t,k))}(r,n,k)){const ge=new fo(r.segments,function o9(r,t,n,k,V,ie){const ge={};for(const ke of k)if(Pv(r,n,ke)&&!V[Yu(ke)]){const Ue=new fo([],{});Ue._sourceSegment=r,Ue._segmentIndexShift="legacy"===ie?r.segments.length:t.length,ge[Yu(ke)]=Ue}return Object.assign(Object.assign({},V),ge)}(r,t,n,k,r.children,V));return ge._sourceSegment=r,ge._segmentIndexShift=t.length,{segmentGroup:ge,slicedSegments:n}}const ie=new fo(r.segments,r.children);return ie._sourceSegment=r,ie._segmentIndexShift=t.length,{segmentGroup:ie,slicedSegments:n}}function Pv(r,t,n){return(!(r.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function KM(r,t,n,k){return!!(Yu(r)===k||k!==to&&Pv(t,n,r))&&("**"===r.path||Iv(t,r,n).matched)}function JM(r,t,n){return 0===t.length&&!r.children[n]}class Ov{constructor(t){this.segmentGroup=t||null}}class QM{constructor(t){this.urlTree=t}}function tg(r){return xv(new Ov(r))}function eA(r){return xv(new QM(r))}class d9{constructor(t,n,k,V,ie){this.configLoader=n,this.urlSerializer=k,this.urlTree=V,this.config=ie,this.allowRedirects=!0,this.ngModule=t.get(pf)}apply(){const t=Lv(this.urlTree.root,[],[],this.config).segmentGroup,n=new fo(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,to).pipe(oe(ie=>this.createUrlTree(T_(ie),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rh(ie=>{if(ie instanceof QM)return this.allowRedirects=!1,this.match(ie.urlTree);throw ie instanceof Ov?this.noMatchError(ie):ie}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,to).pipe(oe(V=>this.createUrlTree(T_(V),t.queryParams,t.fragment))).pipe(rh(V=>{throw V instanceof Ov?this.noMatchError(V):V}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,k){const V=t.segments.length>0?new fo([],{[to]:t}):t;return new Yh(V,n,k)}expandSegmentGroup(t,n,k,V){return 0===k.segments.length&&k.hasChildren()?this.expandChildren(t,n,k).pipe(oe(ie=>new fo([],ie))):this.expandSegment(t,k,n,k.segments,V,!0)}expandChildren(t,n,k){const V=[];for(const ie of Object.keys(k.children))"primary"===ie?V.unshift(ie):V.push(ie);return Sn(V).pipe(W0(ie=>{const ge=k.children[ie],ke=XM(n,ie);return this.expandSegmentGroup(t,ke,ge,ie).pipe(oe(Ue=>({segment:Ue,outlet:ie})))}),pM((ie,ge)=>(ie[ge.outlet]=ge.segment,ie),{}),function iO(r,t){const n=arguments.length>=2;return k=>k.pipe(r?Bh((V,ie)=>r(V,ie,k)):L,u_(1),n?mM(t):gM(()=>new wv))}())}expandSegment(t,n,k,V,ie,ge){return Sn(k).pipe(W0(ke=>this.expandSegmentAgainstRoute(t,n,k,ke,V,ie,ge).pipe(rh(et=>{if(et instanceof Ov)return Ua(null);throw et}))),gp(ke=>!!ke),rh((ke,Ue)=>{if(ke instanceof wv||"EmptyError"===ke.name)return JM(n,V,ie)?Ua(new fo([],{})):tg(n);throw ke}))}expandSegmentAgainstRoute(t,n,k,V,ie,ge,ke){return KM(V,n,ie,ge)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(t,n,V,ie,ge):ke&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,k,V,ie,ge):tg(n):tg(n)}expandSegmentAgainstRouteUsingRedirect(t,n,k,V,ie,ge){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,k,V,ge):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,k,V,ie,ge)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,k,V){const ie=this.applyRedirectCommands([],k.redirectTo,{});return k.redirectTo.startsWith("/")?eA(ie):this.lineralizeSegments(k,ie).pipe(ot(ge=>{const ke=new fo(ge,{});return this.expandSegment(t,ke,n,ge,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,k,V,ie,ge){const{matched:ke,consumedSegments:Ue,remainingSegments:et,positionalParamSegments:yt}=Iv(n,V,ie);if(!ke)return tg(n);const Ht=this.applyRedirectCommands(Ue,V.redirectTo,yt);return V.redirectTo.startsWith("/")?eA(Ht):this.lineralizeSegments(V,Ht).pipe(ot(mn=>this.expandSegment(t,n,k,mn.concat(et),ge,!1)))}matchSegmentAgainstRoute(t,n,k,V,ie){if("**"===k.path)return k.loadChildren?(k._loadedConfig?Ua(k._loadedConfig):this.configLoader.load(t.injector,k)).pipe(oe(Ht=>(k._loadedConfig=Ht,new fo(V,{})))):Ua(new fo(V,{}));const{matched:ge,consumedSegments:ke,remainingSegments:Ue}=Iv(n,k,V);return ge?this.getChildConfig(t,k,V).pipe(ot(yt=>{const Ht=yt.module,mn=yt.routes,{segmentGroup:In,slicedSegments:Kn}=Lv(n,ke,Ue,mn),xr=new fo(In.segments,In.children);if(0===Kn.length&&xr.hasChildren())return this.expandChildren(Ht,mn,xr).pipe(oe(zi=>new fo(ke,zi)));if(0===mn.length&&0===Kn.length)return Ua(new fo(ke,{}));const Kr=Yu(k)===ie;return this.expandSegment(Ht,xr,mn,Kn,Kr?to:ie,!0).pipe(oe(Ir=>new fo(ke.concat(Ir.segments),Ir.children)))})):tg(n)}getChildConfig(t,n,k){return n.children?Ua(new x_(n.children,t)):n.loadChildren?void 0!==n._loadedConfig?Ua(n._loadedConfig):this.runCanLoadGuards(t.injector,n,k).pipe(ot(V=>V?this.configLoader.load(t.injector,n).pipe(oe(ie=>(n._loadedConfig=ie,ie))):function f9(r){return xv(f_(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`))}(n))):Ua(new x_([],t))}runCanLoadGuards(t,n,k){const V=n.canLoad;return V&&0!==V.length?Ua(V.map(ge=>{const ke=t.get(ge);let Ue;if(function JO(r){return r&&ih(r.canLoad)}(ke))Ue=ke.canLoad(n,k);else{if(!ih(ke))throw new Error("Invalid CanLoad guard");Ue=ke(n,k)}return Rc(Ue)})).pipe(Q0(),Au(ge=>{if(!Xh(ge))return;const ke=f_(`Redirecting to "${this.urlSerializer.serialize(ge)}"`);throw ke.url=ge,ke}),oe(ge=>!0===ge)):Ua(!0)}lineralizeSegments(t,n){let k=[],V=n.root;for(;;){if(k=k.concat(V.segments),0===V.numberOfChildren)return Ua(k);if(V.numberOfChildren>1||!V.children[to])return xv(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));V=V.children[to]}}applyRedirectCommands(t,n,k){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,k)}applyRedirectCreatreUrlTree(t,n,k,V){const ie=this.createSegmentGroup(t,n.root,k,V);return new Yh(ie,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const k={};return Bl(t,(V,ie)=>{if("string"==typeof V&&V.startsWith(":")){const ke=V.substring(1);k[ie]=n[ke]}else k[ie]=V}),k}createSegmentGroup(t,n,k,V){const ie=this.createSegments(t,n.segments,k,V);let ge={};return Bl(n.children,(ke,Ue)=>{ge[Ue]=this.createSegmentGroup(t,ke,k,V)}),new fo(ie,ge)}createSegments(t,n,k,V){return n.map(ie=>ie.path.startsWith(":")?this.findPosParam(t,ie,V):this.findOrReturn(ie,k))}findPosParam(t,n,k){const V=k[n.path.substring(1)];if(!V)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return V}findOrReturn(t,n){let k=0;for(const V of n){if(V.path===t.path)return n.splice(k),V;k++}return t}}function T_(r){const t={};for(const k of Object.keys(r.children)){const ie=T_(r.children[k]);(ie.segments.length>0||ie.hasChildren())&&(t[k]=ie)}return function p9(r){if(1===r.numberOfChildren&&r.children[to]){const t=r.children[to];return new fo(r.segments.concat(t.segments),t.children)}return r}(new fo(r.segments,t))}class tA{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Rv{constructor(t,n){this.component=t,this.route=n}}function m9(r,t,n){const k=r._root;return ng(k,t?t._root:null,n,[k.value])}function Fv(r,t,n){const k=function y9(r){if(!r)return null;for(let t=r.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(k?k.module.injector:n).get(r)}function ng(r,t,n,k,V={canDeactivateChecks:[],canActivateChecks:[]}){const ie=vp(t);return r.children.forEach(ge=>{(function b9(r,t,n,k,V={canDeactivateChecks:[],canActivateChecks:[]}){const ie=r.value,ge=t?t.value:null,ke=n?n.getContext(r.value.outlet):null;if(ge&&ie.routeConfig===ge.routeConfig){const Ue=function _9(r,t,n){if("function"==typeof n)return n(r,t);switch(n){case"pathParamsChange":return!Zh(r.url,t.url);case"pathParamsOrQueryParamsChange":return!Zh(r.url,t.url)||!Oc(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!v_(r,t)||!Oc(r.queryParams,t.queryParams);default:return!v_(r,t)}}(ge,ie,ie.routeConfig.runGuardsAndResolvers);Ue?V.canActivateChecks.push(new tA(k)):(ie.data=ge.data,ie._resolvedData=ge._resolvedData),ng(r,t,ie.component?ke?ke.children:null:n,k,V),Ue&&ke&&ke.outlet&&ke.outlet.isActivated&&V.canDeactivateChecks.push(new Rv(ke.outlet.component,ge))}else ge&&rg(t,ke,V),V.canActivateChecks.push(new tA(k)),ng(r,null,ie.component?ke?ke.children:null:n,k,V)})(ge,ie[ge.value.outlet],n,k.concat([ge.value]),V),delete ie[ge.value.outlet]}),Bl(ie,(ge,ke)=>rg(ge,n.getContext(ke),V)),V}function rg(r,t,n){const k=vp(r),V=r.value;Bl(k,(ie,ge)=>{rg(ie,V.component?t?t.children.getContext(ge):null:t,n)}),n.canDeactivateChecks.push(new Rv(V.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,V))}class C9{}function nA(r){return new U(t=>t.error(r))}class I9{constructor(t,n,k,V,ie,ge){this.rootComponentType=t,this.config=n,this.urlTree=k,this.url=V,this.paramsInheritanceStrategy=ie,this.relativeLinkResolution=ge}recognize(){const t=Lv(this.urlTree.root,[],[],this.config.filter(ge=>void 0===ge.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,to);if(null===n)return null;const k=new Sv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},to,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new xf(k,n),ie=new BM(this.url,V);return this.inheritParamsAndData(ie._root),ie}inheritParamsAndData(t){const n=t.value,k=zM(n,this.paramsInheritanceStrategy);n.params=Object.freeze(k.params),n.data=Object.freeze(k.data),t.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(t,n,k){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,k)}processChildren(t,n){const k=[];for(const ie of Object.keys(n.children)){const ge=n.children[ie],ke=XM(t,ie),Ue=this.processSegmentGroup(ke,ge,ie);if(null===Ue)return null;k.push(...Ue)}const V=rA(k);return function L9(r){r.sort((t,n)=>t.value.outlet===to?-1:n.value.outlet===to?1:t.value.outlet.localeCompare(n.value.outlet))}(V),V}processSegment(t,n,k,V){for(const ie of t){const ge=this.processSegmentAgainstRoute(ie,n,k,V);if(null!==ge)return ge}return JM(n,k,V)?[]:null}processSegmentAgainstRoute(t,n,k,V){if(t.redirectTo||!KM(t,n,k,V))return null;let ie,ge=[],ke=[];if("**"===t.path){const In=k.length>0?MM(k).parameters:{};ie=new Sv(k,In,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,oA(t),Yu(t),t.component,t,iA(n),aA(n)+k.length,sA(t))}else{const In=Iv(n,t,k);if(!In.matched)return null;ge=In.consumedSegments,ke=In.remainingSegments,ie=new Sv(ge,In.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,oA(t),Yu(t),t.component,t,iA(n),aA(n)+ge.length,sA(t))}const Ue=function P9(r){return r.children?r.children:r.loadChildren?r._loadedConfig.routes:[]}(t),{segmentGroup:et,slicedSegments:yt}=Lv(n,ge,ke,Ue.filter(In=>void 0===In.redirectTo),this.relativeLinkResolution);if(0===yt.length&&et.hasChildren()){const In=this.processChildren(Ue,et);return null===In?null:[new xf(ie,In)]}if(0===Ue.length&&0===yt.length)return[new xf(ie,[])];const Ht=Yu(t)===V,mn=this.processSegment(Ue,et,yt,Ht?to:V);return null===mn?null:[new xf(ie,mn)]}}function O9(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function rA(r){const t=[],n=new Set;for(const k of r){if(!O9(k)){t.push(k);continue}const V=t.find(ie=>k.value.routeConfig===ie.value.routeConfig);void 0!==V?(V.children.push(...k.children),n.add(V)):t.push(k)}for(const k of n){const V=rA(k.children);t.push(new xf(k.value,V))}return t.filter(k=>!n.has(k))}function iA(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function aA(r){let t=r,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function oA(r){return r.data||{}}function sA(r){return r.resolve||{}}function lA(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function M_(r){return Wh(t=>{const n=r(t);return n?Sn(n).pipe(oe(()=>t)):Ua(t)})}class U9 extends class V9{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const A_=new fa("ROUTES");class uA{constructor(t,n,k,V){this.injector=t,this.compiler=n,this.onLoadStartListener=k,this.onLoadEndListener=V}load(t,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const V=this.loadModuleFactory(n.loadChildren).pipe(oe(ie=>{this.onLoadEndListener&&this.onLoadEndListener(n);const ge=ie.create(t);return new x_(TM(ge.injector.get(A_,void 0,hi.Self|hi.Optional)).map(w_),ge)}),rh(ie=>{throw n._loader$=void 0,ie}));return n._loader$=new eO(V,()=>new J).pipe(dM()),n._loader$}loadModuleFactory(t){return Rc(t()).pipe(ot(n=>n instanceof rw?Ua(n):Sn(this.compiler.compileModuleAsync(n))))}}class q9{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function G9(r){throw r}function W9(r,t,n){return t.parse("/")}function cA(r,t){return Ua(null)}const Y9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ku=(()=>{class r{constructor(n,k,V,ie,ge,ke,Ue){this.rootComponentType=n,this.urlSerializer=k,this.rootContexts=V,this.location=ie,this.config=Ue,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new J,this.errorHandler=G9,this.malformedUriErrorHandler=W9,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:cA,afterPreactivation:cA},this.urlHandlingStrategy=new q9,this.routeReuseStrategy=new U9,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ge.get(pf),this.console=ge.get(kS);const Ht=ge.get(Is);this.isNgZoneEnabled=Ht instanceof Is&&Is.isInAngularZone(),this.resetConfig(Ue),this.currentUrlTree=function _O(){return new Yh(new fo([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new uA(ge,ke,mn=>this.triggerEvent(new yM(mn)),mn=>this.triggerEvent(new bM(mn))),this.routerState=NM(this.currentUrlTree,this.rootComponentType),this.transitions=new Hu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const k=this.events;return n.pipe(Bh(V=>0!==V.id),oe(V=>Object.assign(Object.assign({},V),{extractedUrl:this.urlHandlingStrategy.extract(V.rawUrl)})),Wh(V=>{let ie=!1,ge=!1;return Ua(V).pipe(Au(ke=>{this.currentNavigation={id:ke.id,initialUrl:ke.currentRawUrl,extractedUrl:ke.extractedUrl,trigger:ke.source,extras:ke.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Wh(ke=>{const Ue=this.browserUrlTree.toString(),et=!this.navigated||ke.extractedUrl.toString()!==Ue||Ue!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||et)&&this.urlHandlingStrategy.shouldProcessUrl(ke.rawUrl))return fA(ke.source)&&(this.browserUrlTree=ke.extractedUrl),Ua(ke).pipe(Wh(Ht=>{const mn=this.transitions.getValue();return k.next(new c_(Ht.id,this.serializeUrl(Ht.extractedUrl),Ht.source,Ht.restoredState)),mn!==this.transitions.getValue()?bt:Promise.resolve(Ht)}),function g9(r,t,n,k){return Wh(V=>function h9(r,t,n,k,V){return new d9(r,t,n,k,V).apply()}(r,t,n,V.extractedUrl,k).pipe(oe(ie=>Object.assign(Object.assign({},V),{urlAfterRedirects:ie}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Au(Ht=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Ht.urlAfterRedirects})}),function R9(r,t,n,k,V){return ot(ie=>function D9(r,t,n,k,V="emptyOnly",ie="legacy"){try{const ge=new I9(r,t,n,k,V,ie).recognize();return null===ge?nA(new C9):Ua(ge)}catch(ge){return nA(ge)}}(r,t,ie.urlAfterRedirects,n(ie.urlAfterRedirects),k,V).pipe(oe(ge=>Object.assign(Object.assign({},ie),{targetSnapshot:ge}))))}(this.rootComponentType,this.config,Ht=>this.serializeUrl(Ht),this.paramsInheritanceStrategy,this.relativeLinkResolution),Au(Ht=>{if("eager"===this.urlUpdateStrategy){if(!Ht.extras.skipLocationChange){const In=this.urlHandlingStrategy.merge(Ht.urlAfterRedirects,Ht.rawUrl);this.setBrowserUrl(In,Ht)}this.browserUrlTree=Ht.urlAfterRedirects}const mn=new sO(Ht.id,this.serializeUrl(Ht.extractedUrl),this.serializeUrl(Ht.urlAfterRedirects),Ht.targetSnapshot);k.next(mn)}));if(et&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:mn,extractedUrl:In,source:Kn,restoredState:xr,extras:Kr}=ke,ui=new c_(mn,this.serializeUrl(In),Kn,xr);k.next(ui);const Ir=NM(In,this.rootComponentType).snapshot;return Ua(Object.assign(Object.assign({},ke),{targetSnapshot:Ir,urlAfterRedirects:In,extras:Object.assign(Object.assign({},Kr),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ke.rawUrl,ke.resolve(null),bt}),M_(ke=>{const{targetSnapshot:Ue,id:et,extractedUrl:yt,rawUrl:Ht,extras:{skipLocationChange:mn,replaceUrl:In}}=ke;return this.hooks.beforePreactivation(Ue,{navigationId:et,appliedUrlTree:yt,rawUrlTree:Ht,skipLocationChange:!!mn,replaceUrl:!!In})}),Au(ke=>{const Ue=new lO(ke.id,this.serializeUrl(ke.extractedUrl),this.serializeUrl(ke.urlAfterRedirects),ke.targetSnapshot);this.triggerEvent(Ue)}),oe(ke=>Object.assign(Object.assign({},ke),{guards:m9(ke.targetSnapshot,ke.currentSnapshot,this.rootContexts)})),function x9(r,t){return ot(n=>{const{targetSnapshot:k,currentSnapshot:V,guards:{canActivateChecks:ie,canDeactivateChecks:ge}}=n;return 0===ge.length&&0===ie.length?Ua(Object.assign(Object.assign({},n),{guardsResult:!0})):function w9(r,t,n,k){return Sn(r).pipe(ot(V=>function S9(r,t,n,k,V){const ie=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return ie&&0!==ie.length?Ua(ie.map(ke=>{const Ue=Fv(ke,t,V);let et;if(function t9(r){return r&&ih(r.canDeactivate)}(Ue))et=Rc(Ue.canDeactivate(r,t,n,k));else{if(!ih(Ue))throw new Error("Invalid CanDeactivate guard");et=Rc(Ue(r,t,n,k))}return et.pipe(gp())})).pipe(Q0()):Ua(!0)}(V.component,V.route,n,t,k)),gp(V=>!0!==V,!0))}(ge,k,V,r).pipe(ot(ke=>ke&&function KO(r){return"boolean"==typeof r}(ke)?function T9(r,t,n,k){return Sn(t).pipe(W0(V=>l_(function A9(r,t){return null!==r&&t&&t(new hO(r)),Ua(!0)}(V.route.parent,k),function M9(r,t){return null!==r&&t&&t(new pO(r)),Ua(!0)}(V.route,k),function E9(r,t,n){const k=t[t.length-1],ie=t.slice(0,t.length-1).reverse().map(ge=>function v9(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(ge)).filter(ge=>null!==ge).map(ge=>hM(()=>Ua(ge.guards.map(Ue=>{const et=Fv(Ue,ge.node,n);let yt;if(function e9(r){return r&&ih(r.canActivateChild)}(et))yt=Rc(et.canActivateChild(k,r));else{if(!ih(et))throw new Error("Invalid CanActivateChild guard");yt=Rc(et(k,r))}return yt.pipe(gp())})).pipe(Q0())));return Ua(ie).pipe(Q0())}(r,V.path,n),function k9(r,t,n){const k=t.routeConfig?t.routeConfig.canActivate:null;if(!k||0===k.length)return Ua(!0);const V=k.map(ie=>hM(()=>{const ge=Fv(ie,t,n);let ke;if(function QO(r){return r&&ih(r.canActivate)}(ge))ke=Rc(ge.canActivate(t,r));else{if(!ih(ge))throw new Error("Invalid CanActivate guard");ke=Rc(ge(t,r))}return ke.pipe(gp())}));return Ua(V).pipe(Q0())}(r,V.route,n))),gp(V=>!0!==V,!0))}(k,ie,r,t):Ua(ke)),oe(ke=>Object.assign(Object.assign({},n),{guardsResult:ke})))})}(this.ngModule.injector,ke=>this.triggerEvent(ke)),Au(ke=>{if(Xh(ke.guardsResult)){const et=f_(`Redirecting to "${this.serializeUrl(ke.guardsResult)}"`);throw et.url=ke.guardsResult,et}const Ue=new uO(ke.id,this.serializeUrl(ke.extractedUrl),this.serializeUrl(ke.urlAfterRedirects),ke.targetSnapshot,!!ke.guardsResult);this.triggerEvent(Ue)}),Bh(ke=>!!ke.guardsResult||(this.restoreHistory(ke),this.cancelNavigationTransition(ke,""),!1)),M_(ke=>{if(ke.guards.canActivateChecks.length)return Ua(ke).pipe(Au(Ue=>{const et=new cO(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot);this.triggerEvent(et)}),Wh(Ue=>{let et=!1;return Ua(Ue).pipe(function F9(r,t){return ot(n=>{const{targetSnapshot:k,guards:{canActivateChecks:V}}=n;if(!V.length)return Ua(n);let ie=0;return Sn(V).pipe(W0(ge=>function N9(r,t,n,k){return function z9(r,t,n,k){const V=lA(r);if(0===V.length)return Ua({});const ie={};return Sn(V).pipe(ot(ge=>function B9(r,t,n,k){const V=Fv(r,t,k);return Rc(V.resolve?V.resolve(t,n):V(t,n))}(r[ge],t,n,k).pipe(Au(ke=>{ie[ge]=ke}))),u_(1),ot(()=>lA(ie).length===V.length?Ua(ie):bt))}(r._resolve,r,t,k).pipe(oe(ie=>(r._resolvedData=ie,r.data=Object.assign(Object.assign({},r.data),zM(r,n).resolve),null)))}(ge.route,k,r,t)),Au(()=>ie++),u_(1),ot(ge=>ie===V.length?Ua(n):bt))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Au({next:()=>et=!0,complete:()=>{et||(this.restoreHistory(Ue),this.cancelNavigationTransition(Ue,"At least one route resolver didn't emit any value."))}}))}),Au(Ue=>{const et=new fO(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot);this.triggerEvent(et)}))}),M_(ke=>{const{targetSnapshot:Ue,id:et,extractedUrl:yt,rawUrl:Ht,extras:{skipLocationChange:mn,replaceUrl:In}}=ke;return this.hooks.afterPreactivation(Ue,{navigationId:et,appliedUrlTree:yt,rawUrlTree:Ht,skipLocationChange:!!mn,replaceUrl:!!In})}),oe(ke=>{const Ue=function zO(r,t,n){const k=$0(r,t._root,n?n._root:void 0);return new FM(k,t)}(this.routeReuseStrategy,ke.targetSnapshot,ke.currentRouterState);return Object.assign(Object.assign({},ke),{targetRouterState:Ue})}),Au(ke=>{this.currentUrlTree=ke.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ke.urlAfterRedirects,ke.rawUrl),this.routerState=ke.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ke.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ke),this.browserUrlTree=ke.urlAfterRedirects)}),((r,t,n)=>oe(k=>(new XO(t,k.targetRouterState,k.currentRouterState,n).activate(r),k)))(this.rootContexts,this.routeReuseStrategy,ke=>this.triggerEvent(ke)),Au({next(){ie=!0},complete(){ie=!0}}),function aO(r){return G((t,n)=>{try{t.subscribe(n)}finally{n.add(r)}})}(()=>{var ke;ie||ge||this.cancelNavigationTransition(V,`Navigation ID ${V.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ke=this.currentNavigation)||void 0===ke?void 0:ke.id)===V.id&&(this.currentNavigation=null)}),rh(ke=>{if(ge=!0,function vO(r){return r&&r[xM]}(ke)){const Ue=Xh(ke.url);Ue||(this.navigated=!0,this.restoreHistory(V,!0));const et=new vM(V.id,this.serializeUrl(V.extractedUrl),ke.message);k.next(et),Ue?setTimeout(()=>{const yt=this.urlHandlingStrategy.merge(ke.url,this.rawUrlTree),Ht={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fA(V.source)};this.scheduleNavigation(yt,"imperative",null,Ht,{resolve:V.resolve,reject:V.reject,promise:V.promise})},0):V.resolve(!1)}else{this.restoreHistory(V,!0);const Ue=new oO(V.id,this.serializeUrl(V.extractedUrl),ke);k.next(Ue);try{V.resolve(this.errorHandler(ke))}catch(et){V.reject(et)}}return bt}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const k="popstate"===n.type?"popstate":"hashchange";"popstate"===k&&setTimeout(()=>{var V;const ie={replaceUrl:!0},ge=(null===(V=n.state)||void 0===V?void 0:V.navigationId)?n.state:null;if(ge){const Ue=Object.assign({},ge);delete Ue.navigationId,delete Ue.\u0275routerPageId,0!==Object.keys(Ue).length&&(ie.state=Ue)}const ke=this.parseUrl(n.url);this.scheduleNavigation(ke,k,ge,ie)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){ZM(n),this.config=n.map(w_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,k={}){const{relativeTo:V,queryParams:ie,fragment:ge,queryParamsHandling:ke,preserveFragment:Ue}=k,et=V||this.routerState.root,yt=Ue?this.currentUrlTree.fragment:ge;let Ht=null;switch(ke){case"merge":Ht=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ie);break;case"preserve":Ht=this.currentUrlTree.queryParams;break;default:Ht=ie||null}return null!==Ht&&(Ht=this.removeEmptyProps(Ht)),function VO(r,t,n,k,V){if(0===n.length)return y_(t.root,t.root,t.root,k,V);const ie=function UO(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new UM(!0,0,r);let t=0,n=!1;const k=r.reduce((V,ie,ge)=>{if("object"==typeof ie&&null!=ie){if(ie.outlets){const ke={};return Bl(ie.outlets,(Ue,et)=>{ke[et]="string"==typeof Ue?Ue.split("/"):Ue}),[...V,{outlets:ke}]}if(ie.segmentPath)return[...V,ie.segmentPath]}return"string"!=typeof ie?[...V,ie]:0===ge?(ie.split("/").forEach((ke,Ue)=>{0==Ue&&"."===ke||(0==Ue&&""===ke?n=!0:".."===ke?t++:""!=ke&&V.push(ke))}),V):[...V,ie]},[]);return new UM(n,t,k)}(n);if(ie.toRoot())return y_(t.root,t.root,new fo([],{}),k,V);const ge=function HO(r,t,n){if(r.isAbsolute)return new b_(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const ie=n.snapshot._urlSegment;return new b_(ie,ie===t.root,0)}const k=Cv(r.commands[0])?0:1;return function qO(r,t,n){let k=r,V=t,ie=n;for(;ie>V;){if(ie-=V,k=k.parent,!k)throw new Error("Invalid number of '../'");V=k.segments.length}return new b_(k,!1,V-ie)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+k,r.numberOfDoubleDots)}(ie,t,r),ke=ge.processChildren?Dv(ge.segmentGroup,ge.index,ie.commands):HM(ge.segmentGroup,ge.index,ie.commands);return y_(t.root,ge.segmentGroup,ke,k,V)}(et,this.currentUrlTree,n,Ht,null!=yt?yt:null)}navigateByUrl(n,k={skipLocationChange:!1}){const V=Xh(n)?n:this.parseUrl(n),ie=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(ie,"imperative",null,k)}navigate(n,k={skipLocationChange:!1}){return function X9(r){for(let t=0;t<r.length;t++){const n=r[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,k),k)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let k;try{k=this.urlSerializer.parse(n)}catch(V){k=this.malformedUriErrorHandler(V,this.urlSerializer,n)}return k}isActive(n,k){let V;if(V=!0===k?Object.assign({},Y9):!1===k?Object.assign({},Z9):k,Xh(n))return kM(this.currentUrlTree,n,V);const ie=this.parseUrl(n);return kM(this.currentUrlTree,ie,V)}removeEmptyProps(n){return Object.keys(n).reduce((k,V)=>{const ie=n[V];return null!=ie&&(k[V]=ie),k},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Y0(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,k,V,ie,ge){var ke,Ue;if(this.disposed)return Promise.resolve(!1);let et,yt,Ht;ge?(et=ge.resolve,yt=ge.reject,Ht=ge.promise):Ht=new Promise((Kn,xr)=>{et=Kn,yt=xr});const mn=++this.navigationId;let In;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(V=this.location.getState()),In=V&&V.\u0275routerPageId?V.\u0275routerPageId:ie.replaceUrl||ie.skipLocationChange?null!==(ke=this.browserPageId)&&void 0!==ke?ke:0:(null!==(Ue=this.browserPageId)&&void 0!==Ue?Ue:0)+1):In=0,this.setTransition({id:mn,targetPageId:In,source:k,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:ie,resolve:et,reject:yt,promise:Ht,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ht.catch(Kn=>Promise.reject(Kn))}setBrowserUrl(n,k){const V=this.urlSerializer.serialize(n),ie=Object.assign(Object.assign({},k.extras.state),this.generateNgRouterState(k.id,k.targetPageId));this.location.isCurrentPathEqualTo(V)||k.extras.replaceUrl?this.location.replaceState(V,"",ie):this.location.go(V,"",ie)}restoreHistory(n,k=!1){var V,ie;if("computed"===this.canceledNavigationResolution){const ge=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(V=this.currentNavigation)||void 0===V?void 0:V.finalUrl)||0===ge?this.currentUrlTree===(null===(ie=this.currentNavigation)||void 0===ie?void 0:ie.finalUrl)&&0===ge&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ge)}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,k){const V=new vM(n.id,this.serializeUrl(n.extractedUrl),k);this.triggerEvent(V),n.resolve(!1)}generateNgRouterState(n,k){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:k}:{navigationId:n}}}return r.\u0275fac=function(n){qy()},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();function fA(r){return"imperative"!==r}class hA{}class dA{preload(t,n){return Ua(null)}}let pA=(()=>{class r{constructor(n,k,V,ie){this.router=n,this.injector=V,this.preloadingStrategy=ie,this.loader=new uA(V,k,Ue=>n.triggerEvent(new yM(Ue)),Ue=>n.triggerEvent(new bM(Ue)))}setUpPreloading(){this.subscription=this.router.events.pipe(Bh(n=>n instanceof Y0),W0(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(pf);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,k){const V=[];for(const ie of k)if(ie.loadChildren&&!ie.canLoad&&ie._loadedConfig){const ge=ie._loadedConfig;V.push(this.processRoutes(ge.module,ge.routes))}else ie.loadChildren&&!ie.canLoad?V.push(this.preloadConfig(n,ie)):ie.children&&V.push(this.processRoutes(n,ie.children));return Sn(V).pipe(st(),oe(ie=>{}))}preloadConfig(n,k){return this.preloadingStrategy.preload(k,()=>(k._loadedConfig?Ua(k._loadedConfig):this.loader.load(n.injector,k)).pipe(ot(ie=>(k._loadedConfig=ie,this.processRoutes(ie.module,ie.routes)))))}}return r.\u0275fac=function(n){return new(n||r)(Ni(ku),Ni(jw),Ni(hu),Ni(hA))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})(),S_=(()=>{class r{constructor(n,k,V={}){this.router=n,this.viewportScroller=k,this.options=V,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},V.scrollPositionRestoration=V.scrollPositionRestoration||"disabled",V.anchorScrolling=V.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof c_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Y0&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof _M&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,k){this.router.triggerEvent(new _M(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(n){qy()},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();const $h=new fa("ROUTER_CONFIGURATION"),gA=new fa("ROUTER_FORROOT_GUARD"),Q9=[H1,{provide:DM,useClass:IM},{provide:ku,useFactory:function i7(r,t,n,k,V,ie,ge={},ke,Ue){const et=new ku(null,r,t,n,k,V,TM(ie));return ke&&(et.urlHandlingStrategy=ke),Ue&&(et.routeReuseStrategy=Ue),function a7(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(t.canceledNavigationResolution=r.canceledNavigationResolution)}(ge,et),ge.enableTracing&&et.events.subscribe(yt=>{var Ht,mn;null===(Ht=console.group)||void 0===Ht||Ht.call(console,`Router Event: ${yt.constructor.name}`),console.log(yt.toString()),console.log(yt),null===(mn=console.groupEnd)||void 0===mn||mn.call(console)}),et},deps:[DM,eg,H1,hu,jw,A_,$h,[class H9{},new Qu],[class j9{},new Qu]]},eg,{provide:yp,useFactory:function o7(r){return r.routerState.root},deps:[ku]},pA,dA,class J9{preload(t,n){return n().pipe(rh(()=>Ua(null)))}},{provide:$h,useValue:{enableTracing:!1}}];function e7(){return new Gw("Router",ku)}let mA=(()=>{class r{constructor(n,k){}static forRoot(n,k){return{ngModule:r,providers:[Q9,vA(n),{provide:gA,useFactory:r7,deps:[[ku,new Qu,new gh]]},{provide:$h,useValue:k||{}},{provide:ap,useFactory:n7,deps:[Nh,[new ph(U1),new Qu],$h]},{provide:S_,useFactory:t7,deps:[ku,N6,$h]},{provide:hA,useExisting:k&&k.preloadingStrategy?k.preloadingStrategy:dA},{provide:Gw,multi:!0,useFactory:e7},[C_,{provide:A1,multi:!0,useFactory:s7,deps:[C_]},{provide:yA,useFactory:l7,deps:[C_]},{provide:Bw,multi:!0,useExisting:yA}]]}}static forChild(n){return{ngModule:r,providers:[vA(n)]}}}return r.\u0275fac=function(n){return new(n||r)(Ni(gA,8),Ni(ku,8))},r.\u0275mod=no({type:r}),r.\u0275inj=ir({}),r})();function t7(r,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new S_(r,t,n)}function n7(r,t,n={}){return n.useHash?new yC(r,t):new f3(r,t)}function r7(r){return"guarded"}function vA(r){return[{provide:Ap,multi:!0,useValue:r},{provide:A_,multi:!0,useValue:r}]}let C_=(()=>{class r{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new J}appInitializer(){return this.injector.get(gC,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let k=null;const V=new Promise(ke=>k=ke),ie=this.injector.get(ku),ge=this.injector.get($h);return"disabled"===ge.initialNavigation?(ie.setUpLocationChangeListener(),k(!0)):"enabled"===ge.initialNavigation||"enabledBlocking"===ge.initialNavigation?(ie.hooks.afterPreactivation=()=>this.initNavigation?Ua(null):(this.initNavigation=!0,k(!0),this.resultOfPreactivationDone),ie.initialNavigation()):k(!0),V})}bootstrapListener(n){const k=this.injector.get($h),V=this.injector.get(pA),ie=this.injector.get(S_),ge=this.injector.get(ku),ke=this.injector.get(R1);n===ke.components[0]&&(("enabledNonBlocking"===k.initialNavigation||void 0===k.initialNavigation)&&ge.initialNavigation(),V.setUpPreloading(),ie.init(),ge.resetRootComponentType(ke.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(n){return new(n||r)(Ni(hu))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})();function s7(r){return r.appInitializer.bind(r)}function l7(r){return r.bootstrapListener.bind(r)}const yA=new fa("Router Initializer"),c7=[];let f7=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r}),r.\u0275inj=ir({imports:[[mA.forRoot(c7)],mA]}),r})(),h7=(()=>{class r{constructor(n){this.plotlyService=n,this.minCoeff=-2,this.maxCoeff=2,this.stepCoeff=.1,this.alphaCoeff=-1,this.betaCoeff=1,this.x_start=-10,this.x_stop=10,this.step=.1,this.N_samples=8,this.samples_xs=Array(),this.x=this.range(this.x_start,this.x_stop,this.step),this.equation_label=this.getModelEquation(),this.graph={data:[{x:this.x,y:this.x.map(k=>k>0?1:-1),type:"scatter",mode:"lines",marker:{color:"black"},name:"Mod\xe8le id\xe9al"},{x:this.x,y:this.x.map(this.f,this),type:"scatter",mode:"lines",name:"f(x)"},{x:[],y:[],type:"bar",mode:"markers+points",marker:{color:"green"},width:this.step/2,name:"Points correctement classifi\xe9s"},{x:[],y:[],type:"bar",mode:"markers+points",marker:{color:"red"},width:this.step/2,name:"Points mal classifi\xe9s"},{x:[],y:[],type:"bar",mode:"markers+points",marker:{color:"purple"},width:this.step/5,name:"Erreur",enabled:!1}],layout:{width:"80%",height:500,title:"",barmode:"relative",yaxis:{range:[-2,2],enabled:!0}}},this.errorPlot={data:[{x:Array(),y:Array(),z:Array(),type:"surface",opacity:.85,name:"Fonction de cout"},{x:Array(),y:Array(),z:Array(),type:"scatter3d",mode:"markers",marker:{size:3.5,color:"green"}}],layout:{width:500,height:500,title:"",zaxis:{range:[-4,4]},xaxis:{range:[this.minCoeff,this.maxCoeff]},yaxis:{range:[this.minCoeff,this.maxCoeff]}}},n.getPlotly().then(k=>this.plotly=k)}range(n,k,V=1){return Array(Math.ceil((k-n)/V)).fill(n).map((ie,ge)=>ie+ge*V)}f(n){return Math.tanh(Math.pow(n,3)*this.alphaCoeff+Math.pow(n,2)*this.betaCoeff)}f_explicit(n,k,V){return Math.tanh(Math.pow(n,3)*k+Math.pow(n,2)*V)}ngOnInit(){}getModelEquation(){return"$f(x) = \\tanh(a_{("+this.alphaCoeff.toString()+")}x^3"+(this.betaCoeff<0?"-":"+")+"b_{("+this.betaCoeff+")}x^2)$"}alphaFactorChanged(n){this.alphaCoeff=null==n.value?0:n.value,this.updateY()}betaFactorChanged(n){this.betaCoeff=null==n.value?0:n.value,this.updateY()}NSamplesChanged(n){this.N_samples=null==n.value?2:n.value,this.generateNewPoints()}updateY(){this.graph.data[1].y=this.x.map(this.f,this),this.equation_label=this.getModelEquation(),this.updatePointsOnGraph(),this.updatePointOnLoss()}updatePointOnLoss(){this.errorPlot.data[1].x=[this.alphaCoeff],this.errorPlot.data[1].y=[this.betaCoeff],this.errorPlot.data[1].z=[this.getLoss(this.alphaCoeff,this.betaCoeff)]}createRandomAbscissa(n){var k=new Array;for(let V=0;V<n;V++)k.push(Math.random()*(this.x_stop-this.x_start)+this.x_start);return k}generateNewPoints(){this.samples_xs=this.createRandomAbscissa(this.N_samples),this.updatePointsOnGraph(),this.plotLossFunction()}getLoss(n,k){var V=0;for(let ke=0;ke<this.samples_xs.length;ke++){var ie=this.samples_xs[ke]>0?1:0,ge=(this.f_explicit(this.samples_xs[ke],n,k)+1)/2;V+=(ie-.05)*Math.log(ge+.01)+(1-ie+.05)*Math.log(1-ge+.01)}return 1-V/this.samples_xs.length}plotLossFunction(){var n=this.range(this.minCoeff,this.maxCoeff,this.stepCoeff),k=new Array,V=new Array,ie=new Array;for(let et=0;et<n.length;et++){var ge=new Array,ke=new Array;for(let yt=0;yt<n.length;yt++){var Ue=this.getLoss(n[et],n[yt]);ge.push(n[et]),ke.push(Ue)}k.push(ge),V.push(n),ie.push(ke)}this.errorPlot.data[0].x=k,this.errorPlot.data[0].y=V,this.errorPlot.data[0].z=ie,this.updatePointOnLoss()}updatePointsOnGraph(){if(this.samples_xs.length>0){var n=this.samples_xs,k=n.map(this.f,this),V=new Array,ie=new Array,ge=new Array,ke=new Array,Ue=new Array;for(let et=0;et<k.length;et++)k[et]*n[et]>=0?(V.push(n[et]),ie.push(k[et]),Ue.push(n[et]>=0?1-k[et]:-1-k[et])):(ge.push(n[et]),ke.push(k[et]),Ue.push(n[et]>=0?1:-1));this.graph.data[2].x=V,this.graph.data[2].y=ie,this.graph.data[3].x=ge,this.graph.data[3].y=ke,this.graph.data[4].x=this.samples_xs,this.graph.data[4].y=Ue}}}return r.\u0275fac=function(n){return new(n||r)(Qr(ao))},r.\u0275cmp=Fs({type:r,selectors:[["app-polynomial-function"]],decls:11,vars:14,consts:[["mat-button","","color","primary",3,"click"],["min","2","thumbLabel","","max","150","step","1",3,"value","input"],["thumbLabel","",3,"min","max","step","value","input"],["thumbLabel","","label","a",3,"min","max","step","value","input"],[1,"container-plot"],[1,"function-plot"],[3,"mathjax"],["divId","myDiv",3,"data","layout"]],template:function(n,k){1&n&&(Sl(0,"button",0),Cl("click",function(){return k.generateNewPoints()}),$d(1," G\xe9n\xe9rer"),xl(),Sl(2,"div")(3,"mat-slider",1),Cl("input",function(ie){return k.NSamplesChanged(ie)}),xl(),Sl(4,"mat-slider",2),Cl("input",function(ie){return k.alphaFactorChanged(ie)}),xl(),Sl(5,"mat-slider",3),Cl("input",function(ie){return k.betaFactorChanged(ie)}),xl()(),Sl(6,"div",4)(7,"div",5),oc(8,"p",6)(9,"plotly-plot",7),xl(),oc(10,"plotly-plot",7),xl()),2&n&&(jo(3),El("value",k.N_samples),jo(1),Xf("min",k.minCoeff),Xf("max",k.maxCoeff),Xf("step",k.stepCoeff),El("value",k.alphaCoeff),jo(1),Xf("min",k.minCoeff),Xf("max",k.maxCoeff),Xf("step",k.stepCoeff),El("value",k.betaCoeff),jo(3),El("mathjax",k.equation_label),jo(1),El("data",k.graph.data)("layout",k.graph.layout),jo(1),El("data",k.errorPlot.data)("layout",k.errorPlot.layout))},directives:[XP,lM,SD,MD],styles:[".container-plot[_ngcontent-%COMP%]{display:flex}"]}),r})();const d7=JSON.parse('[{"imageUrl":"/assets/histoire/images/Alan_Turing_Aged_16.jpg","title":"Alan Turing","date":1950,"description":"Dans un article pour Computing Machinery and Intelligence, le c\xe9l\xe8bre math\xe9maticien et informaticien Alan Turing se demande si les machines peuvent penser"},{"imageUrl":"/assets/histoire/images/1280px-Dartmouth_College_campus_2007-06-23_Dartmouth_Hall_02.JPG","title":"Apparition du terme IA","date":1956,"description":"La notion d\'Intelligence Artificielle appara\xeet durant la conf\xe9rence de Darmouth"},{"imageUrl":"/assets/histoire/images/Loi_de_Moore.png","title":"Loi de Moore","date":1965,"description":"Gordon Moore postule que la complexit\xe9 des semi-conducteurs double tous les ans"},{"imageUrl":"","title":"Clarke et Kubrik","date":1968,"description":"\\"D\'ici 2021, nous obtiendrons des machines dont l\'intelligence \xe9galera ou surpassera celle des humains\\""},{"imageUrl":"/assets/histoire/images/hiver.jpg","title":"1er Hiver de l\'IA","date":1974,"description":"En raison de progr\xe8s limit\xe9s obtenus par les m\xe9thodes symboliques, les fonds de recherche en IA sont drastiquement r\xe9duits"},{"imageUrl":"/assets/histoire/images/Shibuya_tokyo.jpg","title":"Relance au Japon","date":1982,"description":"En raison de progr\xe8s limit\xe9s obtenus par les m\xe9thodes symboliques, les fonds de recherche en IA sont drastiquement r\xe9duits"},{"imageUrl":"/assets/histoire/images/Deep_Blue.jpg","title":"Deep Blue bat Kasparov","date":1997,"description":"D\xe9velopp\xe9 par IBM, Deep Blue d\xe9fie le champion du monde d\'\xe9chec Garry Kasparov"}]'),p7=function(r){return{"background-image":r}};let g7=(()=>{class r{constructor(){this.title="",this.content="",this.bgImageUrl=""}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=Fs({type:r,selectors:[["app-animated-card"]],inputs:{title:"title",content:"content",bgImageUrl:"bgImageUrl"},decls:6,vars:5,consts:[[1,"card-event",3,"ngStyle"],[1,"card-content"],[1,"event-title"],[1,"event-content"]],template:function(n,k){1&n&&(Sl(0,"div",0)(1,"div",1)(2,"h2",2),$d(3),xl(),Sl(4,"p",3),$d(5),xl()()()),2&n&&(El("ngStyle",sw(3,p7,"url("+k.bgImageUrl+")")),jo(3),p0(" ",k.title," "),jo(2),p0(" ",k.content," "))},directives:[Nm],styles:['.card-event[_ngcontent-%COMP%]{--transition-duration: .25s;--transform-transition: transform var(--transition-duration) ease;color:var(--clr-neutral-100);background-size:cover;width:35ch;aspect-ratio:1;border-radius:.5rem;padding:1rem 0 0;overflow:hidden;transition:var(--transform-transition);box-shadow:#00000030 0 10px 20px,#0000003b 0 6px 6px}.card-content[_ngcontent-%COMP%]{--padding: 1.5rem;height:100%;padding:var(--padding);padding-top:3rem;background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.75) 50%,black)}.event-title[_ngcontent-%COMP%]{position:relative;width:max-content;font-size:1.5rem}.event-title[_ngcontent-%COMP%]:after{content:"";position:absolute;height:4px;width:calc(100% + var(--padding));left:calc(var(--padding) * -1);bottom:0;background-color:var(--clr-accent-400)}@media (hover){.event-title[_ngcontent-%COMP%]:after{transform-origin:left;transform:scaleX(0);transition:var(--transform-transition)}.card-content[_ngcontent-%COMP%]{transform:translateY(70%);transition:var(--transform-transition)}.card-event[_ngcontent-%COMP%]:hover, .card[_ngcontent-%COMP%]:focus-within{transform:scale(1.025)}.card-event[_ngcontent-%COMP%]:hover   .event-title[_ngcontent-%COMP%]:after, .card-event[_ngcontent-%COMP%]:focus-within   .event-title[_ngcontent-%COMP%]:after{transform:scaleX(1);transition-delay:var(--transition-duration)}.card-event[_ngcontent-%COMP%]:hover   .card-content[_ngcontent-%COMP%], .card-event[_ngcontent-%COMP%]:focus-within   .card-content[_ngcontent-%COMP%]{transform:translateY(0)}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important;transition-delay:0ms!important}}']}),r})();function m7(r,t){if(1&r&&(Sl(0,"div",2)(1,"p"),$d(2),xl(),oc(3,"app-animated-card",3),xl()),2&r){const n=t.$implicit;jo(2),dm(n.date),jo(1),El("title",n.title)("content",n.description)("bgImageUrl",n.imageUrl)}}let v7=(()=>{class r{constructor(){this.listItems=d7}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=Fs({type:r,selectors:[["app-timeline"]],decls:2,vars:1,consts:[[1,"container-timeline"],["class","event-container",4,"ngFor","ngForOf"],[1,"event-container"],[3,"title","content","bgImageUrl"]],template:function(n,k){1&n&&(Sl(0,"div",0),function Tx(r,t,n,k,V,ie,ge,ke){const Ue=qr(),et=Sa(),yt=r+20,Ht=et.firstCreatePass?function ak(r,t,n,k,V,ie,ge,ke,Ue){const et=t.consts,yt=uf(t,r,4,ge||null,ll(et,ke));ff(t,n,yt,ll(et,Ue)),Fi(t,yt);const Ht=yt.tViews=ic(2,yt,k,V,ie,t.directiveRegistry,t.pipeRegistry,null,t.schemas,et);return null!==t.queries&&(t.queries.template(t,yt),Ht.queries=t.queries.embeddedTView(yt)),yt}(yt,et,Ue,t,n,k,V,ie,ge):et.data[yt];cl(Ht,!1);const mn=Ue[11].createComment("");Ia(et,Ue,mn,Ht),ya(mn,Ue),sm(Ue,Ue[yt]=H_(mn,Ue,mn,Ht)),Go(Ht)&&Ec(et,Ue,Ht),null!=ge&&Sc(Ue,Ht,ke)}(1,m7,4,4,"div",1),xl()),2&n&&(jo(1),El("ngForOf",k.listItems))},directives:[w3,g7],styles:['.container-timeline[_ngcontent-%COMP%]{display:flex;width:100%;flex-wrap:wrap;gap:1ch;margin:1rem}.event-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;gap:10px;align-items:center}.event-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;width:8ch;aspect-ratio:1;border-radius:50%;background-color:var(--clr-neutral-900);color:var(--clr-neutral-100);align-items:center;justify-content:center}.event-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:after{content:"";position:absolute;height:5px;width:30ch;background-color:var(--clr-neutral-900);z-index:-1;border-radius:100vw;transition:transform .25s ease}.event-container[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%]:after{transform:scaleX(1.15);transition:transform .75s ease}.event-container[_ngcontent-%COMP%]   app-animated-card[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content}']}),r})(),y7=(()=>{class r{constructor(){this.title="personal-website"}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=Fs({type:r,selectors:[["app-root"]],decls:2,vars:0,template:function(n,k){1&n&&oc(0,"app-polynomial-function")(1,"app-timeline")},directives:[h7,v7],styles:["app-timeline[_ngcontent-%COMP%]{display:inline-block;overflow:hidden}"]}),r})();U3.plotlyjs=xD;let b7=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=no({type:r,bootstrap:[y7]}),r.\u0275inj=ir({providers:[],imports:[[B3,f7,U3,pL,HP,$P,CD.forRoot()]]}),r})();(function ZS(){$w=!1})(),uD().bootstrapModule(b7).catch(r=>console.error(r))},102:Tp=>{Tp.exports=function x(ue,le,y){function b(e,o){if(!le[e]){if(!ue[e]){if(T)return T(e,!0);var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}var i=le[e]={exports:{}};ue[e][0].call(i.exports,function(v){return b(ue[e][1][v]||v)},i,i.exports,x,ue,le,y)}return le[e].exports}for(var T=void 0,_=0;_<y.length;_++)b(y[_]);return b}({1:[function(x,ue,le){"use strict";var y=x("../src/lib"),b={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var T in b){var _=T.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");y.addStyleRule(_,b[T])}},{"../src/lib":503}],2:[function(x,ue,le){"use strict";ue.exports=x("../src/transforms/aggregate")},{"../src/transforms/aggregate":1118}],3:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/box")},{"../src/traces/box":679}],6:[function(x,ue,le){"use strict";ue.exports=x("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(x,ue,le){"use strict";ue.exports=x("../src/core")},{"../src/core":481}],15:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(x,ue,le){"use strict";ue.exports=x("../src/transforms/filter")},{"../src/transforms/filter":1119}],17:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(x,ue,le){"use strict";ue.exports=x("../src/transforms/groupby")},{"../src/transforms/groupby":1120}],20:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/image")},{"../src/traces/image":852}],27:[function(x,ue,le){"use strict";var y=x("./core");y.register([x("./bar"),x("./box"),x("./heatmap"),x("./histogram"),x("./histogram2d"),x("./histogram2dcontour"),x("./contour"),x("./scatterternary"),x("./violin"),x("./funnel"),x("./waterfall"),x("./image"),x("./pie"),x("./sunburst"),x("./treemap"),x("./icicle"),x("./funnelarea"),x("./scatter3d"),x("./surface"),x("./isosurface"),x("./volume"),x("./mesh3d"),x("./cone"),x("./streamtube"),x("./scattergeo"),x("./choropleth"),x("./scattergl"),x("./splom"),x("./pointcloud"),x("./heatmapgl"),x("./parcoords"),x("./parcats"),x("./scattermapbox"),x("./choroplethmapbox"),x("./densitymapbox"),x("./sankey"),x("./indicator"),x("./table"),x("./carpet"),x("./scattercarpet"),x("./contourcarpet"),x("./ohlc"),x("./candlestick"),x("./scatterpolar"),x("./scatterpolargl"),x("./barpolar"),x("./scattersmith"),x("./aggregate"),x("./filter"),x("./groupby"),x("./sort"),x("./calendars")]),ue.exports=y},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/parcoords")},{"../src/traces/parcoords":896}],34:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/pie")},{"../src/traces/pie":907}],35:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/pointcloud")},{"../src/traces/pointcloud":916}],36:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/sankey")},{"../src/traces/sankey":922}],37:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/scatter3d")},{"../src/traces/scatter3d":960}],38:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":967}],39:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/scattergeo")},{"../src/traces/scattergeo":975}],40:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/scattergl")},{"../src/traces/scattergl":989}],41:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":999}],42:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1007}],43:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1015}],44:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/scattersmith")},{"../src/traces/scattersmith":1022}],45:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/scatterternary")},{"../src/traces/scatterternary":1030}],46:[function(x,ue,le){"use strict";ue.exports=x("../src/transforms/sort")},{"../src/transforms/sort":1122}],47:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/splom")},{"../src/traces/splom":1040}],48:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/streamtube")},{"../src/traces/streamtube":1048}],49:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/sunburst")},{"../src/traces/sunburst":1056}],50:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/surface")},{"../src/traces/surface":1065}],51:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/table")},{"../src/traces/table":1073}],52:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/treemap")},{"../src/traces/treemap":1084}],53:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/violin")},{"../src/traces/violin":1097}],54:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/volume")},{"../src/traces/volume":1105}],55:[function(x,ue,le){"use strict";ue.exports=x("../src/traces/waterfall")},{"../src/traces/waterfall":1113}],56:[function(x,ue,le){var y,b;y=this,b=function(y,b,T,_,e){"use strict";function o(ce){return ce.target.depth}function a(ce,fe){return ce.sourceLinks.length?ce.depth:fe-1}function l(ce){return function(){return ce}}e=e&&e.hasOwnProperty("default")?e.default:e;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ce){return typeof ce}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce};function v(ce,fe){return s(ce.source,fe.source)||ce.index-fe.index}function h(ce,fe){return s(ce.target,fe.target)||ce.index-fe.index}function s(ce,fe){return ce.partOfCycle===fe.partOfCycle?ce.y0-fe.y0:"top"===ce.circularLinkType||"bottom"===fe.circularLinkType?-1:1}function d(ce){return ce.value}function p(ce){return(ce.y0+ce.y1)/2}function f(ce){return p(ce.source)}function g(ce){return p(ce.target)}function m(ce){return ce.index}function u(ce){return ce.nodes}function w(ce){return ce.links}function c(ce,fe){var me=ce.get(fe);if(!me)throw new Error("missing: "+fe);return me}function E(ce,fe){return fe(ce)}function M(ce,fe,me){var pe=0;if(null===me){for(var we=[],ye=0;ye<ce.links.length;ye++){var Te=ce.links[ye],Le=Te.source.index,Oe=Te.target.index;we[Le]||(we[Le]=[]),we[Oe]||(we[Oe]=[]),-1===we[Le].indexOf(Oe)&&we[Le].push(Oe)}var Re=e(we);Re.sort(function(Ae,Fe){return Ae.length-Fe.length});var Ve={};for(ye=0;ye<Re.length;ye++){var _e=Re[ye].slice(-2);Ve[_e[0]]||(Ve[_e[0]]={}),Ve[_e[0]][_e[1]]=!0}ce.links.forEach(function(Ae){var Fe=Ae.target.index,Pe=Ae.source.index;Fe===Pe||Ve[Pe]&&Ve[Pe][Fe]?(Ae.circular=!0,Ae.circularLinkID=pe,pe+=1):Ae.circular=!1})}else ce.links.forEach(function(Ae){Ae.source[me]<Ae.target[me]?Ae.circular=!1:(Ae.circular=!0,Ae.circularLinkID=pe,pe+=1)})}function S(ce,fe){var me=0,pe=0;ce.links.forEach(function(we){we.circular&&(we.circularLinkType=we.source.circularLinkType||we.target.circularLinkType?we.source.circularLinkType?we.source.circularLinkType:we.target.circularLinkType:me<pe?"top":"bottom","top"==we.circularLinkType?me+=1:pe+=1,ce.nodes.forEach(function(ye){E(ye,fe)!=E(we.source,fe)&&E(ye,fe)!=E(we.target,fe)||(ye.circularLinkType=we.circularLinkType)}))}),ce.links.forEach(function(we){we.circular&&(we.source.circularLinkType==we.target.circularLinkType&&(we.circularLinkType=we.source.circularLinkType),ne(we,fe)&&(we.circularLinkType=we.source.circularLinkType))})}function C(ce){var fe=Math.abs(ce.y1-ce.y0),me=Math.abs(ce.target.x0-ce.source.x1);return Math.atan(me/fe)}function O(ce,fe){var me=0;ce.sourceLinks.forEach(function(we){me=we.circular&&!ne(we,fe)?me+1:me});var pe=0;return ce.targetLinks.forEach(function(we){pe=we.circular&&!ne(we,fe)?pe+1:pe}),me+pe}function I(ce){var me=0;ce.source.sourceLinks.forEach(function(ye){me=ye.circular?me+1:me});var we=0;return ce.target.targetLinks.forEach(function(ye){we=ye.circular?we+1:we}),!(me>1||we>1)}function N(ce,fe,me){return ce.sort(L),ce.forEach(function(pe,we){var ye,Te,Le=0;if(ne(pe,me)&&I(pe))pe.circularPathData.verticalBuffer=Le+pe.width/2;else{for(var Oe=0;Oe<we;Oe++)if(!((ye=ce[we]).source.column<(Te=ce[Oe]).target.column||ye.target.column>Te.source.column)){var Re=ce[Oe].circularPathData.verticalBuffer+ce[Oe].width/2+fe;Le=Re>Le?Re:Le}pe.circularPathData.verticalBuffer=Le+pe.width/2}}),ce}function F(ce,fe,me,pe){var we=b.min(ce.links,function(ye){return ye.source.y0});ce.links.forEach(function(ye){ye.circular&&(ye.circularPathData={})}),N(ce.links.filter(function(ye){return"top"==ye.circularLinkType}),fe,pe),N(ce.links.filter(function(ye){return"bottom"==ye.circularLinkType}),fe,pe),ce.links.forEach(function(ye){if(ye.circular){if(ye.circularPathData.arcRadius=ye.width+10,ye.circularPathData.leftNodeBuffer=5,ye.circularPathData.rightNodeBuffer=5,ye.circularPathData.sourceWidth=ye.source.x1-ye.source.x0,ye.circularPathData.sourceX=ye.source.x0+ye.circularPathData.sourceWidth,ye.circularPathData.targetX=ye.target.x0,ye.circularPathData.sourceY=ye.y0,ye.circularPathData.targetY=ye.y1,ne(ye,pe)&&I(ye))ye.circularPathData.leftSmallArcRadius=10+ye.width/2,ye.circularPathData.leftLargeArcRadius=10+ye.width/2,ye.circularPathData.rightSmallArcRadius=10+ye.width/2,ye.circularPathData.rightLargeArcRadius=10+ye.width/2,"bottom"==ye.circularLinkType?(ye.circularPathData.verticalFullExtent=ye.source.y1+25+ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.rightLargeArcRadius):(ye.circularPathData.verticalFullExtent=ye.source.y0-25-ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.rightLargeArcRadius);else{var Te=ye.source.column,Le=ye.circularLinkType,Oe=ce.links.filter(function(_e){return _e.source.column==Te&&_e.circularLinkType==Le});Oe.sort("bottom"==ye.circularLinkType?j:P);var Re=0;Oe.forEach(function(_e,Ae){_e.circularLinkID==ye.circularLinkID&&(ye.circularPathData.leftSmallArcRadius=10+ye.width/2+Re,ye.circularPathData.leftLargeArcRadius=10+ye.width/2+Ae*fe+Re),Re+=_e.width}),Te=ye.target.column,(Oe=ce.links.filter(function(_e){return _e.target.column==Te&&_e.circularLinkType==Le})).sort("bottom"==ye.circularLinkType?$:U),Re=0,Oe.forEach(function(_e,Ae){_e.circularLinkID==ye.circularLinkID&&(ye.circularPathData.rightSmallArcRadius=10+ye.width/2+Re,ye.circularPathData.rightLargeArcRadius=10+ye.width/2+Ae*fe+Re),Re+=_e.width}),"bottom"==ye.circularLinkType?(ye.circularPathData.verticalFullExtent=Math.max(me,ye.source.y1,ye.target.y1)+25+ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.rightLargeArcRadius):(ye.circularPathData.verticalFullExtent=we-25-ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.rightLargeArcRadius)}ye.circularPathData.leftInnerExtent=ye.circularPathData.sourceX+ye.circularPathData.leftNodeBuffer,ye.circularPathData.rightInnerExtent=ye.circularPathData.targetX-ye.circularPathData.rightNodeBuffer,ye.circularPathData.leftFullExtent=ye.circularPathData.sourceX+ye.circularPathData.leftLargeArcRadius+ye.circularPathData.leftNodeBuffer,ye.circularPathData.rightFullExtent=ye.circularPathData.targetX-ye.circularPathData.rightLargeArcRadius-ye.circularPathData.rightNodeBuffer}if(ye.circular)ye.path="top"==(_e=ye).circularLinkType?"M"+_e.circularPathData.sourceX+" "+_e.circularPathData.sourceY+" L"+_e.circularPathData.leftInnerExtent+" "+_e.circularPathData.sourceY+" A"+_e.circularPathData.leftLargeArcRadius+" "+_e.circularPathData.leftSmallArcRadius+" 0 0 0 "+_e.circularPathData.leftFullExtent+" "+(_e.circularPathData.sourceY-_e.circularPathData.leftSmallArcRadius)+" L"+_e.circularPathData.leftFullExtent+" "+_e.circularPathData.verticalLeftInnerExtent+" A"+_e.circularPathData.leftLargeArcRadius+" "+_e.circularPathData.leftLargeArcRadius+" 0 0 0 "+_e.circularPathData.leftInnerExtent+" "+_e.circularPathData.verticalFullExtent+" L"+_e.circularPathData.rightInnerExtent+" "+_e.circularPathData.verticalFullExtent+" A"+_e.circularPathData.rightLargeArcRadius+" "+_e.circularPathData.rightLargeArcRadius+" 0 0 0 "+_e.circularPathData.rightFullExtent+" "+_e.circularPathData.verticalRightInnerExtent+" L"+_e.circularPathData.rightFullExtent+" "+(_e.circularPathData.targetY-_e.circularPathData.rightSmallArcRadius)+" A"+_e.circularPathData.rightLargeArcRadius+" "+_e.circularPathData.rightSmallArcRadius+" 0 0 0 "+_e.circularPathData.rightInnerExtent+" "+_e.circularPathData.targetY+" L"+_e.circularPathData.targetX+" "+_e.circularPathData.targetY:"M"+_e.circularPathData.sourceX+" "+_e.circularPathData.sourceY+" L"+_e.circularPathData.leftInnerExtent+" "+_e.circularPathData.sourceY+" A"+_e.circularPathData.leftLargeArcRadius+" "+_e.circularPathData.leftSmallArcRadius+" 0 0 1 "+_e.circularPathData.leftFullExtent+" "+(_e.circularPathData.sourceY+_e.circularPathData.leftSmallArcRadius)+" L"+_e.circularPathData.leftFullExtent+" "+_e.circularPathData.verticalLeftInnerExtent+" A"+_e.circularPathData.leftLargeArcRadius+" "+_e.circularPathData.leftLargeArcRadius+" 0 0 1 "+_e.circularPathData.leftInnerExtent+" "+_e.circularPathData.verticalFullExtent+" L"+_e.circularPathData.rightInnerExtent+" "+_e.circularPathData.verticalFullExtent+" A"+_e.circularPathData.rightLargeArcRadius+" "+_e.circularPathData.rightLargeArcRadius+" 0 0 1 "+_e.circularPathData.rightFullExtent+" "+_e.circularPathData.verticalRightInnerExtent+" L"+_e.circularPathData.rightFullExtent+" "+(_e.circularPathData.targetY+_e.circularPathData.rightSmallArcRadius)+" A"+_e.circularPathData.rightLargeArcRadius+" "+_e.circularPathData.rightSmallArcRadius+" 0 0 1 "+_e.circularPathData.rightInnerExtent+" "+_e.circularPathData.targetY+" L"+_e.circularPathData.targetX+" "+_e.circularPathData.targetY;else{var Ve=_.linkHorizontal().source(function(_e){return[_e.source.x0+(_e.source.x1-_e.source.x0),_e.y0]}).target(function(_e){return[_e.target.x0,_e.y1]});ye.path=Ve(ye)}var _e})}function L(ce,fe){return X(ce)==X(fe)?"bottom"==ce.circularLinkType?j(ce,fe):P(ce,fe):X(fe)-X(ce)}function P(ce,fe){return ce.y0-fe.y0}function j(ce,fe){return fe.y0-ce.y0}function U(ce,fe){return ce.y1-fe.y1}function $(ce,fe){return fe.y1-ce.y1}function X(ce){return ce.target.column-ce.source.column}function te(ce){return ce.target.x0-ce.source.x1}function ae(ce,fe){var me=C(ce),pe=te(fe)/Math.tan(me);return"up"==W(ce)?ce.y1+pe:ce.y1-pe}function J(ce,fe){var me=C(ce),pe=te(fe)/Math.tan(me);return"up"==W(ce)?ce.y1-pe:ce.y1+pe}function ee(ce,fe,me,pe){ce.links.forEach(function(we){if(!we.circular&&we.target.column-we.source.column>1){var ye=we.source.column+1,Te=we.target.column-1,Le=1,Oe=Te-ye+1;for(Le=1;ye<=Te;ye++,Le++)ce.nodes.forEach(function(Re){if(Re.column==ye){var Ve,_e=Le/(Oe+1),Ae=Math.pow(1-_e,3),Fe=3*_e*Math.pow(1-_e,2),Pe=3*Math.pow(_e,2)*(1-_e),Be=Math.pow(_e,3),qe=Ae*we.y0+Fe*we.y0+Pe*we.y1+Be*we.y1,We=qe-we.width/2,Je=qe+we.width/2;We>Re.y0&&We<Re.y1?(Ve=Re.y1-We+10,Re=G(Re,Ve="bottom"==Re.circularLinkType?Ve:-Ve,fe,me),ce.nodes.forEach(function(ut){E(ut,pe)!=E(Re,pe)&&ut.column==Re.column&&se(Re,ut)&&G(ut,Ve,fe,me)})):(Je>Re.y0&&Je<Re.y1||We<Re.y0&&Je>Re.y1)&&(Re=G(Re,Ve=Je-Re.y0+10,fe,me),ce.nodes.forEach(function(ut){E(ut,pe)!=E(Re,pe)&&ut.column==Re.column&&ut.y0<Re.y1&&ut.y1>Re.y1&&G(ut,Ve,fe,me)}))}})}})}function se(ce,fe){return ce.y0>fe.y0&&ce.y0<fe.y1||ce.y1>fe.y0&&ce.y1<fe.y1||ce.y0<fe.y0&&ce.y1>fe.y1}function G(ce,fe,me,pe){return ce.y0+fe>=me&&ce.y1+fe<=pe&&(ce.y0=ce.y0+fe,ce.y1=ce.y1+fe,ce.targetLinks.forEach(function(we){we.y1=we.y1+fe}),ce.sourceLinks.forEach(function(we){we.y0=we.y0+fe})),ce}function H(ce,fe,me,pe){ce.nodes.forEach(function(we){pe&&we.y+(we.y1-we.y0)>fe&&(we.y=we.y-(we.y+(we.y1-we.y0)-fe));var ye=ce.links.filter(function(Oe){return E(Oe.source,me)==E(we,me)}),Te=ye.length;Te>1&&ye.sort(function(Oe,Re){if(!Oe.circular&&!Re.circular){if(Oe.target.column==Re.target.column||!oe(Oe,Re))return Oe.y1-Re.y1;if(Oe.target.column>Re.target.column){var Ve=J(Re,Oe);return Oe.y1-Ve}if(Re.target.column>Oe.target.column)return J(Oe,Re)-Re.y1}return Oe.circular&&!Re.circular?"top"==Oe.circularLinkType?-1:1:Re.circular&&!Oe.circular?"top"==Re.circularLinkType?1:-1:Oe.circular&&Re.circular?Oe.circularLinkType===Re.circularLinkType&&"top"==Oe.circularLinkType?Oe.target.column===Re.target.column?Oe.target.y1-Re.target.y1:Re.target.column-Oe.target.column:Oe.circularLinkType===Re.circularLinkType&&"bottom"==Oe.circularLinkType?Oe.target.column===Re.target.column?Re.target.y1-Oe.target.y1:Oe.target.column-Re.target.column:"top"==Oe.circularLinkType?-1:1:void 0});var Le=we.y0;ye.forEach(function(Oe){Oe.y0=Le+Oe.width/2,Le+=Oe.width}),ye.forEach(function(Oe,Re){if("bottom"==Oe.circularLinkType){for(var Ve=Re+1,_e=0;Ve<Te;Ve++)_e+=ye[Ve].width;Oe.y0=we.y1-_e-Oe.width/2}})})}function Y(ce,fe,me){ce.nodes.forEach(function(pe){var we=ce.links.filter(function(Le){return E(Le.target,me)==E(pe,me)}),ye=we.length;ye>1&&we.sort(function(Le,Oe){if(!Le.circular&&!Oe.circular){if(Le.source.column==Oe.source.column||!oe(Le,Oe))return Le.y0-Oe.y0;if(Oe.source.column<Le.source.column){var Re=ae(Oe,Le);return Le.y0-Re}if(Le.source.column<Oe.source.column)return ae(Le,Oe)-Oe.y0}return Le.circular&&!Oe.circular?"top"==Le.circularLinkType?-1:1:Oe.circular&&!Le.circular?"top"==Oe.circularLinkType?1:-1:Le.circular&&Oe.circular?Le.circularLinkType===Oe.circularLinkType&&"top"==Le.circularLinkType?Le.source.column===Oe.source.column?Le.source.y1-Oe.source.y1:Le.source.column-Oe.source.column:Le.circularLinkType===Oe.circularLinkType&&"bottom"==Le.circularLinkType?Le.source.column===Oe.source.column?Le.source.y1-Oe.source.y1:Oe.source.column-Le.source.column:"top"==Le.circularLinkType?-1:1:void 0});var Te=pe.y0;we.forEach(function(Le){Le.y1=Te+Le.width/2,Te+=Le.width}),we.forEach(function(Le,Oe){if("bottom"==Le.circularLinkType){for(var Re=Oe+1,Ve=0;Re<ye;Re++)Ve+=we[Re].width;Le.y1=pe.y1-Ve-Le.width/2}})})}function oe(ce,fe){return W(ce)==W(fe)}function W(ce){return ce.y0-ce.y1>0?"up":"down"}function ne(ce,fe){return E(ce.source,fe)==E(ce.target,fe)}function re(ce,fe,me){var pe=ce.nodes,we=ce.links,ye=!1,Te=!1;if(we.forEach(function(Re){"top"==Re.circularLinkType?ye=!0:"bottom"==Re.circularLinkType&&(Te=!0)}),0==ye||0==Te){var Le=b.min(pe,function(Re){return Re.y0}),Oe=(me-fe)/(b.max(pe,function(Re){return Re.y1})-Le);pe.forEach(function(Re){var Ve=(Re.y1-Re.y0)*Oe;Re.y0=(Re.y0-Le)*Oe,Re.y1=Re.y0+Ve}),we.forEach(function(Re){Re.y0=(Re.y0-Le)*Oe,Re.y1=(Re.y1-Le)*Oe,Re.width=Re.width*Oe})}}y.sankeyCircular=function(){var ce,fe,me=0,pe=0,we=1,ye=1,Te=24,Le=m,Oe=a,Re=u,Ve=w,_e=32,Ae=2,Fe=null;function Pe(){var Ge={nodes:Re.apply(null,arguments),links:Ve.apply(null,arguments)};Be(Ge),M(Ge,0,Fe),qe(Ge),We(Ge),S(Ge,Le),Je(Ge,_e,Le),ut(Ge);for(var Ke=4,nt=0;nt<Ke;nt++)H(Ge,ye,Le),Y(Ge,0,Le),ee(Ge,pe,ye,Le),H(Ge,ye,Le),Y(Ge,0,Le);return re(Ge,pe,ye),F(Ge,Ae,ye,Le),Ge}function Be(Ge){Ge.nodes.forEach(function(nt,it){nt.index=it,nt.sourceLinks=[],nt.targetLinks=[]});var Ke=T.map(Ge.nodes,Le);return Ge.links.forEach(function(nt,it){nt.index=it;var ht=nt.source,Tt=nt.target;"object"!==(void 0===ht?"undefined":i(ht))&&(ht=nt.source=c(Ke,ht)),"object"!==(void 0===Tt?"undefined":i(Tt))&&(Tt=nt.target=c(Ke,Tt)),ht.sourceLinks.push(nt),Tt.targetLinks.push(nt)}),Ge}function qe(Ge){Ge.nodes.forEach(function(Ke){Ke.partOfCycle=!1,Ke.value=Math.max(b.sum(Ke.sourceLinks,d),b.sum(Ke.targetLinks,d)),Ke.sourceLinks.forEach(function(nt){nt.circular&&(Ke.partOfCycle=!0,Ke.circularLinkType=nt.circularLinkType)}),Ke.targetLinks.forEach(function(nt){nt.circular&&(Ke.partOfCycle=!0,Ke.circularLinkType=nt.circularLinkType)})})}function We(Ge){var Ke,nt,it;for(Ke=Ge.nodes,nt=[],it=0;Ke.length;++it,Ke=nt,nt=[])Ke.forEach(function(ht){ht.depth=it,ht.sourceLinks.forEach(function(Tt){nt.indexOf(Tt.target)<0&&!Tt.circular&&nt.push(Tt.target)})});for(Ke=Ge.nodes,nt=[],it=0;Ke.length;++it,Ke=nt,nt=[])Ke.forEach(function(ht){ht.height=it,ht.targetLinks.forEach(function(Tt){nt.indexOf(Tt.source)<0&&!Tt.circular&&nt.push(Tt.source)})});Ge.nodes.forEach(function(ht){ht.column=Math.floor(Oe.call(null,ht,it))})}function Je(Ge,Ke,nt){var it=T.nest().key(function(Ft){return Ft.column}).sortKeys(b.ascending).entries(Ge.nodes).map(function(Ft){return Ft.values});(function(Ft){if(fe){var gt=1/0;it.forEach(function(un){var pn=ye*fe/(un.length+1);gt=pn<gt?pn:gt}),ce=gt}var ft=b.min(it,function(un){return(ye-pe-(un.length-1)*ce)/b.sum(un,d)});ft*=.3,Ge.links.forEach(function(un){un.width=un.value*ft});var un,pn,dn,Mn,ln,Ee,Bt=(pn=0,dn=0,Mn=0,ln=0,Ee=b.max((un=Ge).nodes,function(De){return De.column}),un.links.forEach(function(De){De.circular&&("top"==De.circularLinkType?pn+=De.width:dn+=De.width,0==De.target.column&&(ln+=De.width),De.source.column==Ee&&(Mn+=De.width))}),{top:pn=pn>0?pn+25+10:pn,bottom:dn=dn>0?dn+25+10:dn,left:ln=ln>0?ln+25+10:ln,right:Mn=Mn>0?Mn+25+10:Mn}),rn=function(un,pn){var dn=b.max(un.nodes,function(Ie){return Ie.column}),Mn=we-me,ln=ye-pe,Ee=Mn/(Mn+pn.right+pn.left),De=ln/(ln+pn.top+pn.bottom);return me=me*Ee+pn.left,we=0==pn.right?we:we*Ee,pe=pe*De+pn.top,ye*=De,un.nodes.forEach(function(Ie){Ie.x0=me+Ie.column*((we-me-Te)/dn),Ie.x1=Ie.x0+Te}),De}(Ge,Bt);ft*=rn,Ge.links.forEach(function(un){un.width=un.value*ft}),it.forEach(function(un){var pn=un.length;un.forEach(function(dn,Mn){dn.depth==it.length-1&&1==pn||0==dn.depth&&1==pn?(dn.y0=ye/2-dn.value*ft,dn.y1=dn.y0+dn.value*ft):dn.partOfCycle?0==O(dn,Ft)?(dn.y0=ye/2+Mn,dn.y1=dn.y0+dn.value*ft):"top"==dn.circularLinkType?(dn.y0=pe+Mn,dn.y1=dn.y0+dn.value*ft):(dn.y0=ye-dn.value*ft-Mn,dn.y1=dn.y0+dn.value*ft):0==Bt.top||0==Bt.bottom?(dn.y0=(ye-pe)/pn*Mn,dn.y1=dn.y0+dn.value*ft):(dn.y0=(ye-pe)/2-pn/2+Mn,dn.y1=dn.y0+dn.value*ft)})})})(nt),Vt();for(var ht=1,Tt=Ke;Tt>0;--Tt)Ct(ht*=.99,nt),Vt();function Ct(Ft,gt){var ft=it.length;it.forEach(function(Bt){var rn=Bt.length,un=Bt[0].depth;Bt.forEach(function(pn){var dn;if((pn.sourceLinks.length||pn.targetLinks.length)&&!(pn.partOfCycle&&O(pn,gt)>0))if(0==un&&1==rn)pn.y0=ye/2-(dn=pn.y1-pn.y0)/2,pn.y1=ye/2+dn/2;else if(un==ft-1&&1==rn)pn.y0=ye/2-(dn=pn.y1-pn.y0)/2,pn.y1=ye/2+dn/2;else{var Mn=b.mean(pn.sourceLinks,g),ln=b.mean(pn.targetLinks,f),Ee=((Mn&&ln?(Mn+ln)/2:Mn||ln)-p(pn))*Ft;pn.y0+=Ee,pn.y1+=Ee}})})}function Vt(){it.forEach(function(Ft){var gt,ft,Bt,rn=pe,un=Ft.length;for(Ft.sort(s),Bt=0;Bt<un;++Bt)(ft=rn-(gt=Ft[Bt]).y0)>0&&(gt.y0+=ft,gt.y1+=ft),rn=gt.y1+ce;if((ft=rn-ce-ye)>0)for(rn=gt.y0-=ft,gt.y1-=ft,Bt=un-2;Bt>=0;--Bt)(ft=(gt=Ft[Bt]).y1+ce-rn)>0&&(gt.y0-=ft,gt.y1-=ft),rn=gt.y0})}}function ut(Ge){Ge.nodes.forEach(function(Ke){Ke.sourceLinks.sort(h),Ke.targetLinks.sort(v)}),Ge.nodes.forEach(function(Ke){var nt=Ke.y0,it=nt,ht=Ke.y1,Tt=ht;Ke.sourceLinks.forEach(function(Ct){Ct.circular?(Ct.y0=ht-Ct.width/2,ht-=Ct.width):(Ct.y0=nt+Ct.width/2,nt+=Ct.width)}),Ke.targetLinks.forEach(function(Ct){Ct.circular?(Ct.y1=Tt-Ct.width/2,Tt-=Ct.width):(Ct.y1=it+Ct.width/2,it+=Ct.width)})})}return Pe.nodeId=function(Ge){return arguments.length?(Le="function"==typeof Ge?Ge:l(Ge),Pe):Le},Pe.nodeAlign=function(Ge){return arguments.length?(Oe="function"==typeof Ge?Ge:l(Ge),Pe):Oe},Pe.nodeWidth=function(Ge){return arguments.length?(Te=+Ge,Pe):Te},Pe.nodePadding=function(Ge){return arguments.length?(ce=+Ge,Pe):ce},Pe.nodes=function(Ge){return arguments.length?(Re="function"==typeof Ge?Ge:l(Ge),Pe):Re},Pe.links=function(Ge){return arguments.length?(Ve="function"==typeof Ge?Ge:l(Ge),Pe):Ve},Pe.size=function(Ge){return arguments.length?(me=pe=0,we=+Ge[0],ye=+Ge[1],Pe):[we-me,ye-pe]},Pe.extent=function(Ge){return arguments.length?(me=+Ge[0][0],we=+Ge[1][0],pe=+Ge[0][1],ye=+Ge[1][1],Pe):[[me,pe],[we,ye]]},Pe.iterations=function(Ge){return arguments.length?(_e=+Ge,Pe):_e},Pe.circularLinkGap=function(Ge){return arguments.length?(Ae=+Ge,Pe):Ae},Pe.nodePaddingRatio=function(Ge){return arguments.length?(fe=+Ge,Pe):fe},Pe.sortNodes=function(Ge){return arguments.length?(Fe=Ge,Pe):Fe},Pe.update=function(Ge){return S(Ge,Le),ut(Ge),Ge.links.forEach(function(Ke){Ke.circular&&(Ke.circularLinkType=Ke.y0+Ke.y1<ye?"top":"bottom",Ke.source.circularLinkType=Ke.circularLinkType,Ke.target.circularLinkType=Ke.circularLinkType)}),H(Ge,ye,Le,!1),Y(Ge,0,Le),F(Ge,Ae,ye,Le),Ge},Pe},y.sankeyCenter=function(ce){return ce.targetLinks.length?ce.depth:ce.sourceLinks.length?b.min(ce.sourceLinks,o)-1:0},y.sankeyLeft=function(ce){return ce.depth},y.sankeyRight=function(ce,fe){return fe-1-ce.height},y.sankeyJustify=a,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof le&&void 0!==ue?b(le,x("d3-array"),x("d3-collection"),x("d3-shape"),x("elementary-circuits-directed-graph")):b(y.d3=y.d3||{},y.d3,y.d3,y.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(x,ue,le){var y,b;y=this,b=function(y,b,T,_){"use strict";function e(E){return E.target.depth}function o(E,M){return E.sourceLinks.length?E.depth:M-1}function a(E){return function(){return E}}function l(E,M){return v(E.source,M.source)||E.index-M.index}function i(E,M){return v(E.target,M.target)||E.index-M.index}function v(E,M){return E.y0-M.y0}function h(E){return E.value}function s(E){return(E.y0+E.y1)/2}function d(E){return s(E.source)*E.value}function p(E){return s(E.target)*E.value}function f(E){return E.index}function g(E){return E.nodes}function m(E){return E.links}function u(E,M){var S=E.get(M);if(!S)throw new Error("missing: "+M);return S}function w(E){return[E.source.x1,E.y0]}function c(E){return[E.target.x0,E.y1]}y.sankey=function(){var E=0,M=0,S=1,C=1,O=24,I=8,N=f,F=o,L=g,P=m,j=32;function U(){var ee={nodes:L.apply(null,arguments),links:P.apply(null,arguments)};return $(ee),X(ee),te(ee),ae(ee),J(ee),ee}function $(ee){ee.nodes.forEach(function(G,H){G.index=H,G.sourceLinks=[],G.targetLinks=[]});var se=T.map(ee.nodes,N);ee.links.forEach(function(G,H){G.index=H;var Y=G.source,oe=G.target;"object"!=typeof Y&&(Y=G.source=u(se,Y)),"object"!=typeof oe&&(oe=G.target=u(se,oe)),Y.sourceLinks.push(G),oe.targetLinks.push(G)})}function X(ee){ee.nodes.forEach(function(se){se.value=Math.max(b.sum(se.sourceLinks,h),b.sum(se.targetLinks,h))})}function te(ee){var se,G,H;for(se=ee.nodes,G=[],H=0;se.length;++H,se=G,G=[])se.forEach(function(oe){oe.depth=H,oe.sourceLinks.forEach(function(W){G.indexOf(W.target)<0&&G.push(W.target)})});for(se=ee.nodes,G=[],H=0;se.length;++H,se=G,G=[])se.forEach(function(oe){oe.height=H,oe.targetLinks.forEach(function(W){G.indexOf(W.source)<0&&G.push(W.source)})});var Y=(S-E-O)/(H-1);ee.nodes.forEach(function(oe){oe.x1=(oe.x0=E+Math.max(0,Math.min(H-1,Math.floor(F.call(null,oe,H))))*Y)+O})}function ae(ee){var se=T.nest().key(function(ne){return ne.x0}).sortKeys(b.ascending).entries(ee.nodes).map(function(ne){return ne.values});(function(){var ne=b.max(se,function(fe){return fe.length}),re=2/3*(C-M)/(ne-1);I>re&&(I=re);var ce=b.min(se,function(fe){return(C-M-(fe.length-1)*I)/b.sum(fe,h)});se.forEach(function(fe){fe.forEach(function(me,pe){me.y1=(me.y0=pe)+me.value*ce})}),ee.links.forEach(function(fe){fe.width=fe.value*ce})})(),W();for(var G=1,H=j;H>0;--H)oe(G*=.99),W(),Y(G),W();function Y(ne){se.forEach(function(re){re.forEach(function(ce){if(ce.targetLinks.length){var fe=(b.sum(ce.targetLinks,d)/b.sum(ce.targetLinks,h)-s(ce))*ne;ce.y0+=fe,ce.y1+=fe}})})}function oe(ne){se.slice().reverse().forEach(function(re){re.forEach(function(ce){if(ce.sourceLinks.length){var fe=(b.sum(ce.sourceLinks,p)/b.sum(ce.sourceLinks,h)-s(ce))*ne;ce.y0+=fe,ce.y1+=fe}})})}function W(){se.forEach(function(ne){var re,ce,fe,me=M,pe=ne.length;for(ne.sort(v),fe=0;fe<pe;++fe)(ce=me-(re=ne[fe]).y0)>0&&(re.y0+=ce,re.y1+=ce),me=re.y1+I;if((ce=me-I-C)>0)for(me=re.y0-=ce,re.y1-=ce,fe=pe-2;fe>=0;--fe)(ce=(re=ne[fe]).y1+I-me)>0&&(re.y0-=ce,re.y1-=ce),me=re.y0})}}function J(ee){ee.nodes.forEach(function(se){se.sourceLinks.sort(i),se.targetLinks.sort(l)}),ee.nodes.forEach(function(se){var G=se.y0,H=G;se.sourceLinks.forEach(function(Y){Y.y0=G+Y.width/2,G+=Y.width}),se.targetLinks.forEach(function(Y){Y.y1=H+Y.width/2,H+=Y.width})})}return U.update=function(ee){return J(ee),ee},U.nodeId=function(ee){return arguments.length?(N="function"==typeof ee?ee:a(ee),U):N},U.nodeAlign=function(ee){return arguments.length?(F="function"==typeof ee?ee:a(ee),U):F},U.nodeWidth=function(ee){return arguments.length?(O=+ee,U):O},U.nodePadding=function(ee){return arguments.length?(I=+ee,U):I},U.nodes=function(ee){return arguments.length?(L="function"==typeof ee?ee:a(ee),U):L},U.links=function(ee){return arguments.length?(P="function"==typeof ee?ee:a(ee),U):P},U.size=function(ee){return arguments.length?(E=M=0,S=+ee[0],C=+ee[1],U):[S-E,C-M]},U.extent=function(ee){return arguments.length?(E=+ee[0][0],S=+ee[1][0],M=+ee[0][1],C=+ee[1][1],U):[[E,M],[S,C]]},U.iterations=function(ee){return arguments.length?(j=+ee,U):j},U},y.sankeyCenter=function(E){return E.targetLinks.length?E.depth:E.sourceLinks.length?b.min(E.sourceLinks,e)-1:0},y.sankeyLeft=function(E){return E.depth},y.sankeyRight=function(E,M){return M-1-E.height},y.sankeyJustify=o,y.sankeyLinkHorizontal=function(){return _.linkHorizontal().source(w).target(c)},Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof le&&void 0!==ue?b(le,x("d3-array"),x("d3-collection"),x("d3-shape")):b(y.d3=y.d3||{},y.d3,y.d3,y.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(x,ue,le){(function(){var y={version:"3.8.0"},b=[].slice,T=function(ve){return b.call(ve)},_=self.document;function e(ve){return ve&&(ve.ownerDocument||ve.document||ve).documentElement}function o(ve){return ve&&(ve.ownerDocument&&ve.ownerDocument.defaultView||ve.document&&ve||ve.defaultView)}if(_)try{T(_.documentElement.childNodes)}catch(ve){T=function(R){for(var B=R.length,q=new Array(B);B--;)q[B]=R[B];return q}}if(Date.now||(Date.now=function(){return+new Date}),_)try{_.createElement("DIV").style.setProperty("opacity",0,"")}catch(ve){var a=this.Element.prototype,l=a.setAttribute,i=a.setAttributeNS,v=this.CSSStyleDeclaration.prototype,h=v.setProperty;a.setAttribute=function(R,B){l.call(this,R,B+"")},a.setAttributeNS=function(R,B,q){i.call(this,R,B,q+"")},v.setProperty=function(R,B,q){h.call(this,R,B+"",q)}}function s(ve,R){return ve<R?-1:ve>R?1:ve>=R?0:NaN}function d(ve){return null===ve?NaN:+ve}function p(ve){return!isNaN(ve)}function f(ve){return{left:function(R,B,q,K){for(arguments.length<3&&(q=0),arguments.length<4&&(K=R.length);q<K;){var de=q+K>>>1;ve(R[de],B)<0?q=de+1:K=de}return q},right:function(R,B,q,K){for(arguments.length<3&&(q=0),arguments.length<4&&(K=R.length);q<K;){var de=q+K>>>1;ve(R[de],B)>0?K=de:q=de+1}return q}}}y.ascending=s,y.descending=function(ve,R){return R<ve?-1:R>ve?1:R>=ve?0:NaN},y.min=function(ve,R){var B,q,K=-1,de=ve.length;if(1===arguments.length){for(;++K<de;)if(null!=(q=ve[K])&&q>=q){B=q;break}for(;++K<de;)null!=(q=ve[K])&&B>q&&(B=q)}else{for(;++K<de;)if(null!=(q=R.call(ve,ve[K],K))&&q>=q){B=q;break}for(;++K<de;)null!=(q=R.call(ve,ve[K],K))&&B>q&&(B=q)}return B},y.max=function(ve,R){var B,q,K=-1,de=ve.length;if(1===arguments.length){for(;++K<de;)if(null!=(q=ve[K])&&q>=q){B=q;break}for(;++K<de;)null!=(q=ve[K])&&q>B&&(B=q)}else{for(;++K<de;)if(null!=(q=R.call(ve,ve[K],K))&&q>=q){B=q;break}for(;++K<de;)null!=(q=R.call(ve,ve[K],K))&&q>B&&(B=q)}return B},y.extent=function(ve,R){var B,q,K,de=-1,be=ve.length;if(1===arguments.length){for(;++de<be;)if(null!=(q=ve[de])&&q>=q){B=K=q;break}for(;++de<be;)null!=(q=ve[de])&&(B>q&&(B=q),K<q&&(K=q))}else{for(;++de<be;)if(null!=(q=R.call(ve,ve[de],de))&&q>=q){B=K=q;break}for(;++de<be;)null!=(q=R.call(ve,ve[de],de))&&(B>q&&(B=q),K<q&&(K=q))}return[B,K]},y.sum=function(ve,R){var B,q=0,K=ve.length,de=-1;if(1===arguments.length)for(;++de<K;)p(B=+ve[de])&&(q+=B);else for(;++de<K;)p(B=+R.call(ve,ve[de],de))&&(q+=B);return q},y.mean=function(ve,R){var B,q=0,K=ve.length,de=-1,be=K;if(1===arguments.length)for(;++de<K;)p(B=d(ve[de]))?q+=B:--be;else for(;++de<K;)p(B=d(R.call(ve,ve[de],de)))?q+=B:--be;if(be)return q/be},y.quantile=function(ve,R){var B=(ve.length-1)*R+1,q=Math.floor(B),K=+ve[q-1],de=B-q;return de?K+de*(ve[q]-K):K},y.median=function(ve,R){var B,q=[],K=ve.length,de=-1;if(1===arguments.length)for(;++de<K;)p(B=d(ve[de]))&&q.push(B);else for(;++de<K;)p(B=d(R.call(ve,ve[de],de)))&&q.push(B);if(q.length)return y.quantile(q.sort(s),.5)},y.variance=function(ve,R){var B,q,K=ve.length,de=0,be=0,Me=-1,Ce=0;if(1===arguments.length)for(;++Me<K;)p(B=d(ve[Me]))&&(be+=(q=B-de)*(B-(de+=q/++Ce)));else for(;++Me<K;)p(B=d(R.call(ve,ve[Me],Me)))&&(be+=(q=B-de)*(B-(de+=q/++Ce)));if(Ce>1)return be/(Ce-1)},y.deviation=function(){var ve=y.variance.apply(this,arguments);return ve&&Math.sqrt(ve)};var g=f(s);function m(ve){return ve.length}y.bisectLeft=g.left,y.bisect=y.bisectRight=g.right,y.bisector=function(ve){return f(1===ve.length?function(R,B){return s(ve(R),B)}:ve)},y.shuffle=function(ve,R,B){(de=arguments.length)<3&&(B=ve.length,de<2&&(R=0));for(var q,K,de=B-R;de;)K=Math.random()*de--|0,q=ve[de+R],ve[de+R]=ve[K+R],ve[K+R]=q;return ve},y.permute=function(ve,R){for(var B=R.length,q=new Array(B);B--;)q[B]=ve[R[B]];return q},y.pairs=function(ve){for(var R=0,B=ve.length-1,q=ve[0],K=new Array(B<0?0:B);R<B;)K[R]=[q,q=ve[++R]];return K},y.transpose=function(ve){if(!(K=ve.length))return[];for(var R=-1,B=y.min(ve,m),q=new Array(B);++R<B;)for(var K,de=-1,be=q[R]=new Array(K);++de<K;)be[de]=ve[de][R];return q},y.zip=function(){return y.transpose(arguments)},y.keys=function(ve){var R=[];for(var B in ve)R.push(B);return R},y.values=function(ve){var R=[];for(var B in ve)R.push(ve[B]);return R},y.entries=function(ve){var R=[];for(var B in ve)R.push({key:B,value:ve[B]});return R},y.merge=function(ve){for(var R,B,q,K=ve.length,de=-1,be=0;++de<K;)be+=ve[de].length;for(B=new Array(be);--K>=0;)for(R=(q=ve[K]).length;--R>=0;)B[--be]=q[R];return B};var u=Math.abs;function w(ve){for(var R=1;ve*R%1;)R*=10;return R}function c(ve,R){for(var B in R)Object.defineProperty(ve.prototype,B,{value:R[B],enumerable:!1})}function E(){this._=Object.create(null)}function M(ve){return"__proto__"==(ve+="")||"\0"===ve[0]?"\0"+ve:ve}function S(ve){return"\0"===(ve+="")[0]?ve.slice(1):ve}function C(ve){return M(ve)in this._}function O(ve){return(ve=M(ve))in this._&&delete this._[ve]}function I(){var ve=[];for(var R in this._)ve.push(S(R));return ve}function N(){var ve=0;for(var R in this._)++ve;return ve}function F(){for(var ve in this._)return!1;return!0}function L(){this._=Object.create(null)}function P(ve){return ve}function j(ve,R,B){return function(){var q=B.apply(R,arguments);return q===R?ve:q}}function U(ve,R){if(R in ve)return R;R=R.charAt(0).toUpperCase()+R.slice(1);for(var B=0,q=$.length;B<q;++B){var K=$[B]+R;if(K in ve)return K}}y.range=function(ve,R,B){if(arguments.length<3&&(B=1,arguments.length<2&&(R=ve,ve=0)),(R-ve)/B==1/0)throw new Error("infinite range");var q,K=[],de=w(u(B)),be=-1;if(ve*=de,R*=de,(B*=de)<0)for(;(q=ve+B*++be)>R;)K.push(q/de);else for(;(q=ve+B*++be)<R;)K.push(q/de);return K},y.map=function(ve,R){var B=new E;if(ve instanceof E)ve.forEach(function(Me,Ce){B.set(Me,Ce)});else if(Array.isArray(ve)){var q,K=-1,de=ve.length;if(1===arguments.length)for(;++K<de;)B.set(K,ve[K]);else for(;++K<de;)B.set(R.call(ve,q=ve[K],K),q)}else for(var be in ve)B.set(be,ve[be]);return B},c(E,{has:C,get:function(ve){return this._[M(ve)]},set:function(ve,R){return this._[M(ve)]=R},remove:O,keys:I,values:function(){var ve=[];for(var R in this._)ve.push(this._[R]);return ve},entries:function(){var ve=[];for(var R in this._)ve.push({key:S(R),value:this._[R]});return ve},size:N,empty:F,forEach:function(ve){for(var R in this._)ve.call(this,S(R),this._[R])}}),y.nest=function(){var ve,R,B={},q=[],K=[];function de(be,Me,Ce){if(Ce>=q.length)return R?R.call(B,Me):ve?Me.sort(ve):Me;for(var Ne,$e,at,dt,Ot=-1,zt=Me.length,Rt=q[Ce++],Nt=new E;++Ot<zt;)(dt=Nt.get(Ne=Rt($e=Me[Ot])))?dt.push($e):Nt.set(Ne,[$e]);return be?($e=be(),at=function(Lt,Yt){$e.set(Lt,de(be,Yt,Ce))}):($e={},at=function(Lt,Yt){$e[Lt]=de(be,Yt,Ce)}),Nt.forEach(at),$e}return B.map=function(be,Me){return de(Me,be,0)},B.entries=function(be){return function Me(Ce,Ne){if(Ne>=q.length)return Ce;var $e=[],at=K[Ne++];return Ce.forEach(function(dt,Ot){$e.push({key:dt,values:Me(Ot,Ne)})}),at?$e.sort(function(dt,Ot){return at(dt.key,Ot.key)}):$e}(de(y.map,be,0),0)},B.key=function(be){return q.push(be),B},B.sortKeys=function(be){return K[q.length-1]=be,B},B.sortValues=function(be){return ve=be,B},B.rollup=function(be){return R=be,B},B},y.set=function(ve){var R=new L;if(ve)for(var B=0,q=ve.length;B<q;++B)R.add(ve[B]);return R},c(L,{has:C,add:function(ve){return this._[M(ve+="")]=!0,ve},remove:O,values:I,size:N,empty:F,forEach:function(ve){for(var R in this._)ve.call(this,S(R))}}),y.behavior={},y.rebind=function(ve,R){for(var B,q=1,K=arguments.length;++q<K;)ve[B=arguments[q]]=j(ve,R,R[B]);return ve};var $=["webkit","ms","moz","Moz","o","O"];function X(){}function te(){}function ae(ve){var R=[],B=new E;function q(){for(var K,de=R,be=-1,Me=de.length;++be<Me;)(K=de[be].on)&&K.apply(this,arguments);return ve}return q.on=function(K,de){var be,Me=B.get(K);return arguments.length<2?Me&&Me.on:(Me&&(Me.on=null,R=R.slice(0,be=R.indexOf(Me)).concat(R.slice(be+1)),B.remove(K)),de&&R.push(B.set(K,{on:de})),ve)},q}function J(){y.event.preventDefault()}function ee(){for(var ve,R=y.event;ve=R.sourceEvent;)R=ve;return R}function se(ve){for(var R=new te,B=0,q=arguments.length;++B<q;)R[arguments[B]]=ae(R);return R.of=function(K,de){return function(be){try{var Me=be.sourceEvent=y.event;be.target=ve,y.event=be,R[be.type].apply(K,de)}finally{y.event=Me}}},R}y.dispatch=function(){for(var ve=new te,R=-1,B=arguments.length;++R<B;)ve[arguments[R]]=ae(ve);return ve},te.prototype.on=function(ve,R){var B=ve.indexOf("."),q="";if(B>=0&&(q=ve.slice(B+1),ve=ve.slice(0,B)),ve)return arguments.length<2?this[ve].on(q):this[ve].on(q,R);if(2===arguments.length){if(null==R)for(ve in this)this.hasOwnProperty(ve)&&this[ve].on(q,null);return this}},y.event=null,y.requote=function(ve){return ve.replace(G,"\\$&")};var G=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,H={}.__proto__?function(ve,R){ve.__proto__=R}:function(ve,R){for(var B in R)ve[B]=R[B]};function Y(ve){return H(ve,re),ve}var oe=function(ve,R){return R.querySelector(ve)},W=function(ve,R){return R.querySelectorAll(ve)},ne=function(ve,R){var B=ve.matches||ve[U(ve,"matchesSelector")];return(ne=function(q,K){return B.call(q,K)})(ve,R)};"function"==typeof Sizzle&&(oe=function(ve,R){return Sizzle(ve,R)[0]||null},W=Sizzle,ne=Sizzle.matchesSelector),y.selection=function(){return y.select(_.documentElement)};var re=y.selection.prototype=[];function ce(ve){return"function"==typeof ve?ve:function(){return oe(ve,this)}}function fe(ve){return"function"==typeof ve?ve:function(){return W(ve,this)}}re.select=function(ve){var R,B,q,K,de=[];ve=ce(ve);for(var be=-1,Me=this.length;++be<Me;){de.push(R=[]),R.parentNode=(q=this[be]).parentNode;for(var Ce=-1,Ne=q.length;++Ce<Ne;)(K=q[Ce])?(R.push(B=ve.call(K,K.__data__,Ce,be)),B&&"__data__"in K&&(B.__data__=K.__data__)):R.push(null)}return Y(de)},re.selectAll=function(ve){var R,B,q=[];ve=fe(ve);for(var K=-1,de=this.length;++K<de;)for(var be=this[K],Me=-1,Ce=be.length;++Me<Ce;)(B=be[Me])&&(q.push(R=T(ve.call(B,B.__data__,Me,K))),R.parentNode=B);return Y(q)};var me="http://www.w3.org/1999/xhtml",pe={svg:"http://www.w3.org/2000/svg",xhtml:me,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function we(ve,R){return ve=y.ns.qualify(ve),null==R?ve.local?function(){this.removeAttributeNS(ve.space,ve.local)}:function(){this.removeAttribute(ve)}:"function"==typeof R?ve.local?function(){var B=R.apply(this,arguments);null==B?this.removeAttributeNS(ve.space,ve.local):this.setAttributeNS(ve.space,ve.local,B)}:function(){var B=R.apply(this,arguments);null==B?this.removeAttribute(ve):this.setAttribute(ve,B)}:ve.local?function(){this.setAttributeNS(ve.space,ve.local,R)}:function(){this.setAttribute(ve,R)}}function ye(ve){return ve.trim().replace(/\s+/g," ")}function Te(ve){return new RegExp("(?:^|\\s+)"+y.requote(ve)+"(?:\\s+|$)","g")}function Le(ve){return(ve+"").trim().split(/^|\s+/)}function Oe(ve,R){var B=(ve=Le(ve).map(Re)).length;return"function"==typeof R?function(){for(var q=-1,K=R.apply(this,arguments);++q<B;)ve[q](this,K)}:function(){for(var q=-1;++q<B;)ve[q](this,R)}}function Re(ve){var R=Te(ve);return function(B,q){if(K=B.classList)return q?K.add(ve):K.remove(ve);var K=B.getAttribute("class")||"";q?(R.lastIndex=0,R.test(K)||B.setAttribute("class",ye(K+" "+ve))):B.setAttribute("class",ye(K.replace(R," ")))}}function Ve(ve,R,B){return null==R?function(){this.style.removeProperty(ve)}:"function"==typeof R?function(){var q=R.apply(this,arguments);null==q?this.style.removeProperty(ve):this.style.setProperty(ve,q,B)}:function(){this.style.setProperty(ve,R,B)}}function _e(ve,R){return null==R?function(){delete this[ve]}:"function"==typeof R?function(){var B=R.apply(this,arguments);null==B?delete this[ve]:this[ve]=B}:function(){this[ve]=R}}function Ae(ve){return"function"==typeof ve?ve:(ve=y.ns.qualify(ve)).local?function(){return this.ownerDocument.createElementNS(ve.space,ve.local)}:function(){var R=this.ownerDocument,B=this.namespaceURI;return B===me&&R.documentElement.namespaceURI===me?R.createElement(ve):R.createElementNS(B,ve)}}function Fe(){var ve=this.parentNode;ve&&ve.removeChild(this)}function Pe(ve){return{__data__:ve}}function Be(ve){return function(){return ne(this,ve)}}function qe(ve){return arguments.length||(ve=s),function(R,B){return R&&B?ve(R.__data__,B.__data__):!R-!B}}function We(ve,R){for(var B=0,q=ve.length;B<q;B++)for(var K,de=ve[B],be=0,Me=de.length;be<Me;be++)(K=de[be])&&R(K,be,B);return ve}function Je(ve){return H(ve,ut),ve}y.ns={prefix:pe,qualify:function(ve){var R=ve.indexOf(":"),B=ve;return R>=0&&"xmlns"!==(B=ve.slice(0,R))&&(ve=ve.slice(R+1)),pe.hasOwnProperty(B)?{space:pe[B],local:ve}:ve}},re.attr=function(ve,R){if(arguments.length<2){if("string"==typeof ve){var B=this.node();return(ve=y.ns.qualify(ve)).local?B.getAttributeNS(ve.space,ve.local):B.getAttribute(ve)}for(R in ve)this.each(we(R,ve[R]));return this}return this.each(we(ve,R))},re.classed=function(ve,R){if(arguments.length<2){if("string"==typeof ve){var B=this.node(),q=(ve=Le(ve)).length,K=-1;if(R=B.classList){for(;++K<q;)if(!R.contains(ve[K]))return!1}else for(R=B.getAttribute("class");++K<q;)if(!Te(ve[K]).test(R))return!1;return!0}for(R in ve)this.each(Oe(R,ve[R]));return this}return this.each(Oe(ve,R))},re.style=function(ve,R,B){var q=arguments.length;if(q<3){if("string"!=typeof ve){for(B in q<2&&(R=""),ve)this.each(Ve(B,ve[B],R));return this}if(q<2){var K=this.node();return o(K).getComputedStyle(K,null).getPropertyValue(ve)}B=""}return this.each(Ve(ve,R,B))},re.property=function(ve,R){if(arguments.length<2){if("string"==typeof ve)return this.node()[ve];for(R in ve)this.each(_e(R,ve[R]));return this}return this.each(_e(ve,R))},re.text=function(ve){return arguments.length?this.each("function"==typeof ve?function(){var R=ve.apply(this,arguments);this.textContent=null==R?"":R}:null==ve?function(){this.textContent=""}:function(){this.textContent=ve}):this.node().textContent},re.html=function(ve){return arguments.length?this.each("function"==typeof ve?function(){var R=ve.apply(this,arguments);this.innerHTML=null==R?"":R}:null==ve?function(){this.innerHTML=""}:function(){this.innerHTML=ve}):this.node().innerHTML},re.append=function(ve){return ve=Ae(ve),this.select(function(){return this.appendChild(ve.apply(this,arguments))})},re.insert=function(ve,R){return ve=Ae(ve),R=ce(R),this.select(function(){return this.insertBefore(ve.apply(this,arguments),R.apply(this,arguments)||null)})},re.remove=function(){return this.each(Fe)},re.data=function(ve,R){var B,q,K=-1,de=this.length;if(!arguments.length){for(ve=new Array(de=(B=this[0]).length);++K<de;)(q=B[K])&&(ve[K]=q.__data__);return ve}function be($e,at){var dt,Ot,zt,Rt=$e.length,Nt=at.length,Lt=Math.min(Rt,Nt),Yt=new Array(Nt),Gt=new Array(Nt),Xt=new Array(Rt);if(R){var bn,En=new E,Un=new Array(Rt);for(dt=-1;++dt<Rt;)(Ot=$e[dt])&&(En.has(bn=R.call(Ot,Ot.__data__,dt))?Xt[dt]=Ot:En.set(bn,Ot),Un[dt]=bn);for(dt=-1;++dt<Nt;)(Ot=En.get(bn=R.call(at,zt=at[dt],dt)))?!0!==Ot&&(Yt[dt]=Ot,Ot.__data__=zt):Gt[dt]=Pe(zt),En.set(bn,!0);for(dt=-1;++dt<Rt;)dt in Un&&!0!==En.get(Un[dt])&&(Xt[dt]=$e[dt])}else{for(dt=-1;++dt<Lt;)zt=at[dt],(Ot=$e[dt])?(Ot.__data__=zt,Yt[dt]=Ot):Gt[dt]=Pe(zt);for(;dt<Nt;++dt)Gt[dt]=Pe(at[dt]);for(;dt<Rt;++dt)Xt[dt]=$e[dt]}Gt.update=Yt,Gt.parentNode=Yt.parentNode=Xt.parentNode=$e.parentNode,Me.push(Gt),Ce.push(Yt),Ne.push(Xt)}var Me=Je([]),Ce=Y([]),Ne=Y([]);if("function"==typeof ve)for(;++K<de;)be(B=this[K],ve.call(B,B.parentNode.__data__,K));else for(;++K<de;)be(B=this[K],ve);return Ce.enter=function(){return Me},Ce.exit=function(){return Ne},Ce},re.datum=function(ve){return arguments.length?this.property("__data__",ve):this.property("__data__")},re.filter=function(ve){var R,B,q,K=[];"function"!=typeof ve&&(ve=Be(ve));for(var de=0,be=this.length;de<be;de++){K.push(R=[]),R.parentNode=(B=this[de]).parentNode;for(var Me=0,Ce=B.length;Me<Ce;Me++)(q=B[Me])&&ve.call(q,q.__data__,Me,de)&&R.push(q)}return Y(K)},re.order=function(){for(var ve=-1,R=this.length;++ve<R;)for(var B,q=this[ve],K=q.length-1,de=q[K];--K>=0;)(B=q[K])&&(de&&de!==B.nextSibling&&de.parentNode.insertBefore(B,de),de=B);return this},re.sort=function(ve){ve=qe.apply(this,arguments);for(var R=-1,B=this.length;++R<B;)this[R].sort(ve);return this.order()},re.each=function(ve){return We(this,function(R,B,q){ve.call(R,R.__data__,B,q)})},re.call=function(ve){var R=T(arguments);return ve.apply(R[0]=this,R),this},re.empty=function(){return!this.node()},re.node=function(){for(var ve=0,R=this.length;ve<R;ve++)for(var B=this[ve],q=0,K=B.length;q<K;q++){var de=B[q];if(de)return de}return null},re.size=function(){var ve=0;return We(this,function(){++ve}),ve};var ut=[];function Ge(ve){var R,B;return function(q,K,de){var be,Me=ve[de].update,Ce=Me.length;for(de!=B&&(B=de,R=0),K>=R&&(R=K+1);!(be=Me[R])&&++R<Ce;);return be}}function Ke(ve,R,B){var q="__on"+ve,K=ve.indexOf("."),de=it;K>0&&(ve=ve.slice(0,K));var be=nt.get(ve);function Me(){var Ce=this[q];Ce&&(this.removeEventListener(ve,Ce,Ce.$),delete this[q])}return be&&(ve=be,de=ht),K?R?function(){var Ce=de(R,T(arguments));Me.call(this),this.addEventListener(ve,this[q]=Ce,Ce.$=B),Ce._=R}:Me:R?X:function(){var Ce,Ne=new RegExp("^__on([^.]+)"+y.requote(ve)+"$");for(var $e in this)if(Ce=$e.match(Ne)){var at=this[$e];this.removeEventListener(Ce[1],at,at.$),delete this[$e]}}}y.selection.enter=Je,y.selection.enter.prototype=ut,ut.append=re.append,ut.empty=re.empty,ut.node=re.node,ut.call=re.call,ut.size=re.size,ut.select=function(ve){for(var R,B,q,K,de,be=[],Me=-1,Ce=this.length;++Me<Ce;){q=(K=this[Me]).update,be.push(R=[]),R.parentNode=K.parentNode;for(var Ne=-1,$e=K.length;++Ne<$e;)(de=K[Ne])?(R.push(q[Ne]=B=ve.call(K.parentNode,de.__data__,Ne,Me)),B.__data__=de.__data__):R.push(null)}return Y(be)},ut.insert=function(ve,R){return arguments.length<2&&(R=Ge(this)),re.insert.call(this,ve,R)},y.select=function(ve){var R;return"string"==typeof ve?(R=[oe(ve,_)]).parentNode=_.documentElement:(R=[ve]).parentNode=e(ve),Y([R])},y.selectAll=function(ve){var R;return"string"==typeof ve?(R=T(W(ve,_))).parentNode=_.documentElement:(R=T(ve)).parentNode=null,Y([R])},re.on=function(ve,R,B){var q=arguments.length;if(q<3){if("string"!=typeof ve){for(B in q<2&&(R=!1),ve)this.each(Ke(B,ve[B],R));return this}if(q<2)return(q=this.node()["__on"+ve])&&q._;B=!1}return this.each(Ke(ve,R,B))};var nt=y.map({mouseenter:"mouseover",mouseleave:"mouseout"});function it(ve,R){return function(B){var q=y.event;y.event=B,R[0]=this.__data__;try{ve.apply(this,R)}finally{y.event=q}}}function ht(ve,R){var B=it(ve,R);return function(q){var K=q.relatedTarget;K&&(K===this||8&K.compareDocumentPosition(this))||B.call(this,q)}}_&&nt.forEach(function(ve){"on"+ve in _&&nt.remove(ve)});var Tt,Ct=0;function Vt(ve){var R=".dragsuppress-"+ ++Ct,B="click"+R,q=y.select(o(ve)).on("touchmove"+R,J).on("dragstart"+R,J).on("selectstart"+R,J);if(null==Tt&&(Tt=!("onselectstart"in ve)&&U(ve.style,"userSelect")),Tt){var K=e(ve).style,de=K[Tt];K[Tt]="none"}return function(be){if(q.on(R,null),Tt&&(K[Tt]=de),be){var Me=function(){q.on(B,null)};q.on(B,function(){J(),Me()},!0),setTimeout(Me,0)}}}y.mouse=function(ve){return gt(ve,ee())};var Ft=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function gt(ve,R){R.changedTouches&&(R=R.changedTouches[0]);var B=ve.ownerSVGElement||ve;if(B.createSVGPoint){var q=B.createSVGPoint();if(Ft<0){var K=o(ve);if(K.scrollX||K.scrollY){var de=(B=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ft=!(de.f||de.e),B.remove()}}return Ft?(q.x=R.pageX,q.y=R.pageY):(q.x=R.clientX,q.y=R.clientY),[(q=q.matrixTransform(ve.getScreenCTM().inverse())).x,q.y]}var be=ve.getBoundingClientRect();return[R.clientX-be.left-ve.clientLeft,R.clientY-be.top-ve.clientTop]}function ft(){return y.event.changedTouches[0].identifier}y.touch=function(ve,R,B){if(arguments.length<3&&(B=R,R=ee().changedTouches),R)for(var q,K=0,de=R.length;K<de;++K)if((q=R[K]).identifier===B)return gt(ve,q)},y.behavior.drag=function(){var ve=se(K,"drag","dragstart","dragend"),R=null,B=de(X,y.mouse,o,"mousemove","mouseup"),q=de(ft,y.touch,P,"touchmove","touchend");function K(){this.on("mousedown.drag",B).on("touchstart.drag",q)}function de(be,Me,Ce,Ne,$e){return function(){var at,dt=this,Ot=y.event.target.correspondingElement||y.event.target,zt=dt.parentNode,Rt=ve.of(dt,arguments),Nt=0,Lt=be(),Yt=".drag"+(null==Lt?"":"-"+Lt),Gt=y.select(Ce(Ot)).on(Ne+Yt,En).on($e+Yt,Un),Xt=Vt(Ot),bn=Me(zt,Lt);function En(){var Nn,yr,vr=Me(zt,Lt);vr&&(Nt|=(Nn=vr[0]-bn[0])|(yr=vr[1]-bn[1]),bn=vr,Rt({type:"drag",x:vr[0]+at[0],y:vr[1]+at[1],dx:Nn,dy:yr}))}function Un(){Me(zt,Lt)&&(Gt.on(Ne+Yt,null).on($e+Yt,null),Xt(Nt),Rt({type:"dragend"}))}at=R?[(at=R.apply(dt,arguments)).x-bn[0],at.y-bn[1]]:[0,0],Rt({type:"dragstart"})}}return K.origin=function(be){return arguments.length?(R=be,K):R},y.rebind(K,ve,"on")},y.touches=function(ve,R){return arguments.length<2&&(R=ee().touches),R?T(R).map(function(B){var q=gt(ve,B);return q.identifier=B.identifier,q}):[]};var Bt=1e-6,rn=Math.PI,un=2*rn,pn=un-Bt,dn=rn/2,Mn=rn/180,ln=180/rn;function Ee(ve){return ve>1?dn:ve<-1?-dn:Math.asin(ve)}function De(ve){return((ve=Math.exp(ve))+1/ve)/2}var Ie=Math.SQRT2;y.interpolateZoom=function(ve,R){var B,q,K=ve[0],de=ve[1],be=ve[2],Ne=R[2],$e=R[0]-K,at=R[1]-de,dt=$e*$e+at*at;if(dt<1e-12)q=Math.log(Ne/be)/Ie,B=function(Yt){return[K+Yt*$e,de+Yt*at,be*Math.exp(Ie*Yt*q)]};else{var Ot=Math.sqrt(dt),zt=(Ne*Ne-be*be+4*dt)/(2*be*2*Ot),Rt=(Ne*Ne-be*be-4*dt)/(2*Ne*2*Ot),Nt=Math.log(Math.sqrt(zt*zt+1)-zt),Lt=Math.log(Math.sqrt(Rt*Rt+1)-Rt);q=(Lt-Nt)/Ie,B=function(Yt){var Gt,Un,Xt=Yt*q,bn=De(Nt),En=be/(2*Ot)*(bn*(Gt=Ie*Xt+Nt,((Gt=Math.exp(2*Gt))-1)/(Gt+1))-(Un=Nt,((Un=Math.exp(Un))-1/Un)/2));return[K+En*$e,de+En*at,be*bn/De(Ie*Xt+Nt)]}}return B.duration=1e3*q,B},y.behavior.zoom=function(){var ve,R,B,q,K,de,be,Me,Ce,Ne={x:0,y:0,k:1},$e=[960,500],at=tt,dt=250,Ot=0,zt="mousedown.zoom",Rt="mousemove.zoom",Nt="mouseup.zoom",Lt="touchstart.zoom",Yt=se(Gt,"zoomstart","zoom","zoomend");function Gt(ur){ur.on(zt,Ar).on(Ye+".zoom",wi).on("dblclick.zoom",Fi).on(Lt,fi)}function Xt(ur){return[(ur[0]-Ne.x)/Ne.k,(ur[1]-Ne.y)/Ne.k]}function bn(ur){Ne.k=Math.max(at[0],Math.min(at[1],ur))}function En(ur,Hr){var bi;Ne.x+=ur[0]-(Hr=[(bi=Hr)[0]*Ne.k+Ne.x,bi[1]*Ne.k+Ne.y])[0],Ne.y+=ur[1]-Hr[1]}function Un(ur,Hr,bi,mi){ur.__chart__={x:Ne.x,y:Ne.y,k:Ne.k},bn(Math.pow(2,mi)),En(R=Hr,bi),ur=y.select(ur),dt>0&&(ur=ur.transition().duration(dt)),ur.call(Gt.event)}function Nn(){be&&be.domain(de.range().map(function(ur){return(ur-Ne.x)/Ne.k}).map(de.invert)),Ce&&Ce.domain(Me.range().map(function(ur){return(ur-Ne.y)/Ne.k}).map(Me.invert))}function yr(ur){Ot++||ur({type:"zoomstart"})}function vr(ur){Nn(),ur({type:"zoom",scale:Ne.k,translate:[Ne.x,Ne.y]})}function Pr(ur){--Ot||(ur({type:"zoomend"}),R=null)}function Ar(){var ur=this,Hr=Yt.of(ur,arguments),bi=0,mi=y.select(o(ur)).on(Rt,na).on(Nt,Ai),Si=Xt(y.mouse(ur)),Ri=Vt(ur);function na(){bi=1,En(y.mouse(ur),Si),vr(Hr)}function Ai(){mi.on(Rt,null).on(Nt,null),Ri(bi),Pr(Hr)}mu.call(ur),yr(Hr)}function fi(){var ur,Hr=this,bi=Yt.of(Hr,arguments),mi={},Si=0,Ri=".zoom-"+y.event.changedTouches[0].identifier,na="touchmove"+Ri,Ai="touchend"+Ri,Qi=[],Gi=y.select(Hr),ca=Vt(Hr);function ea(){var Ao=y.touches(Hr);return ur=Ne.k,Ao.forEach(function(No){No.identifier in mi&&(mi[No.identifier]=Xt(No))}),Ao}function ma(){var Ao=y.event.target;y.select(Ao).on(na,Ra).on(Ai,Mo),Qi.push(Ao);for(var No=y.event.changedTouches,ro=0,_o=No.length;ro<_o;++ro)mi[No[ro].identifier]=null;var xo=ea(),vs=Date.now();if(1===xo.length){if(vs-K<500){var Lo=xo[0];Un(Hr,Lo,mi[Lo.identifier],Math.floor(Math.log(Ne.k)/Math.LN2)+1),J()}K=vs}else if(xo.length>1){var el=xo[1],fl=(Lo=xo[0])[0]-el[0],au=Lo[1]-el[1];Si=fl*fl+au*au}}function Ra(){var Ao,No,ro,_o,xo=y.touches(Hr);mu.call(Hr);for(var vs=0,Lo=xo.length;vs<Lo;++vs,_o=null)if(_o=mi[(ro=xo[vs]).identifier]){if(No)break;Ao=ro,No=_o}if(_o){var el=(el=ro[0]-Ao[0])*el+(el=ro[1]-Ao[1])*el,fl=Si&&Math.sqrt(el/Si);Ao=[(Ao[0]+ro[0])/2,(Ao[1]+ro[1])/2],No=[(No[0]+_o[0])/2,(No[1]+_o[1])/2],bn(fl*ur)}K=null,En(Ao,No),vr(bi)}function Mo(){if(y.event.touches.length){for(var Ao=y.event.changedTouches,No=0,ro=Ao.length;No<ro;++No)delete mi[Ao[No].identifier];for(var _o in mi)return void ea()}y.selectAll(Qi).on(Ri,null),Gi.on(zt,Ar).on(Lt,fi),ca(),Pr(bi)}ma(),yr(bi),Gi.on(zt,null).on(Lt,ma)}function wi(){var ur=Yt.of(this,arguments);q?clearTimeout(q):(mu.call(this),ve=Xt(R=B||y.mouse(this)),yr(ur)),q=setTimeout(function(){q=null,Pr(ur)},50),J(),bn(Math.pow(2,.002*He())*Ne.k),En(R,ve),vr(ur)}function Fi(){var ur=y.mouse(this),Hr=Math.log(Ne.k)/Math.LN2;Un(this,ur,Xt(ur),y.event.shiftKey?Math.ceil(Hr)-1:Math.floor(Hr)+1)}return Ye||(Ye="onwheel"in _?(He=function(){return-y.event.deltaY*(y.event.deltaMode?120:1)},"wheel"):"onmousewheel"in _?(He=function(){return y.event.wheelDelta},"mousewheel"):(He=function(){return-y.event.detail},"MozMousePixelScroll")),Gt.event=function(ur){ur.each(function(){var Hr=Yt.of(this,arguments),bi=Ne;Zl?y.select(this).transition().each("start.zoom",function(){Ne=this.__chart__||{x:0,y:0,k:1},yr(Hr)}).tween("zoom:zoom",function(){var mi=$e[0],Ri=R?R[0]:mi/2,na=R?R[1]:$e[1]/2,Ai=y.interpolateZoom([(Ri-Ne.x)/Ne.k,(na-Ne.y)/Ne.k,mi/Ne.k],[(Ri-bi.x)/bi.k,(na-bi.y)/bi.k,mi/bi.k]);return function(Qi){var Gi=Ai(Qi),ca=mi/Gi[2];this.__chart__=Ne={x:Ri-Gi[0]*ca,y:na-Gi[1]*ca,k:ca},vr(Hr)}}).each("interrupt.zoom",function(){Pr(Hr)}).each("end.zoom",function(){Pr(Hr)}):(this.__chart__=Ne,yr(Hr),vr(Hr),Pr(Hr))})},Gt.translate=function(ur){return arguments.length?(Ne={x:+ur[0],y:+ur[1],k:Ne.k},Nn(),Gt):[Ne.x,Ne.y]},Gt.scale=function(ur){return arguments.length?(Ne={x:Ne.x,y:Ne.y,k:null},bn(+ur),Nn(),Gt):Ne.k},Gt.scaleExtent=function(ur){return arguments.length?(at=null==ur?tt:[+ur[0],+ur[1]],Gt):at},Gt.center=function(ur){return arguments.length?(B=ur&&[+ur[0],+ur[1]],Gt):B},Gt.size=function(ur){return arguments.length?($e=ur&&[+ur[0],+ur[1]],Gt):$e},Gt.duration=function(ur){return arguments.length?(dt=+ur,Gt):dt},Gt.x=function(ur){return arguments.length?(be=ur,de=ur.copy(),Ne={x:0,y:0,k:1},Gt):be},Gt.y=function(ur){return arguments.length?(Ce=ur,Me=ur.copy(),Ne={x:0,y:0,k:1},Gt):Ce},y.rebind(Gt,Yt,"on")};var He,Ye,tt=[0,1/0];function ot(){}function st(ve,R,B){return this instanceof st?(this.h=+ve,this.s=+R,void(this.l=+B)):arguments.length<2?ve instanceof st?new st(ve.h,ve.s,ve.l):Yn(""+ve,kn,st):new st(ve,R,B)}y.color=ot,ot.prototype.toString=function(){return this.rgb()+""},y.hsl=st;var bt=st.prototype=new ot;function wt(ve,R,B){var q,K;function de(be){return Math.round(255*((Me=be)>360?Me-=360:Me<0&&(Me+=360),Me<60?q+(K-q)*Me/60:Me<180?K:Me<240?q+(K-q)*(240-Me)/60:q));var Me}return ve=isNaN(ve)?0:(ve%=360)<0?ve+360:ve,R=isNaN(R)||R<0?0:R>1?1:R,q=2*(B=B<0?0:B>1?1:B)-(K=B<=.5?B*(1+R):B+R-B*R),new jt(de(ve+120),de(ve),de(ve-120))}function Ut(ve,R,B){return this instanceof Ut?(this.h=+ve,this.c=+R,void(this.l=+B)):arguments.length<2?ve instanceof Ut?new Ut(ve.h,ve.c,ve.l):je(ve instanceof Et?ve.l:(ve=cn((ve=y.rgb(ve)).r,ve.g,ve.b)).l,ve.a,ve.b):new Ut(ve,R,B)}bt.brighter=function(ve){return ve=Math.pow(.7,arguments.length?ve:1),new st(this.h,this.s,this.l/ve)},bt.darker=function(ve){return ve=Math.pow(.7,arguments.length?ve:1),new st(this.h,this.s,ve*this.l)},bt.rgb=function(){return wt(this.h,this.s,this.l)},y.hcl=Ut;var Kt=Ut.prototype=new ot;function vt(ve,R,B){return isNaN(ve)&&(ve=0),isNaN(R)&&(R=0),new Et(B,Math.cos(ve*=Mn)*R,Math.sin(ve)*R)}function Et(ve,R,B){return this instanceof Et?(this.l=+ve,this.a=+R,void(this.b=+B)):arguments.length<2?ve instanceof Et?new Et(ve.l,ve.a,ve.b):ve instanceof Ut?vt(ve.h,ve.c,ve.l):cn((ve=jt(ve)).r,ve.g,ve.b):new Et(ve,R,B)}Kt.brighter=function(ve){return new Ut(this.h,this.c,Math.min(100,this.l+$t*(arguments.length?ve:1)))},Kt.darker=function(ve){return new Ut(this.h,this.c,Math.max(0,this.l-$t*(arguments.length?ve:1)))},Kt.rgb=function(){return vt(this.h,this.c,this.l).rgb()},y.lab=Et;var $t=18,Dt=Et.prototype=new ot;function Pt(ve,R,B){var q=(ve+16)/116,K=q+R/500,de=q-B/200;return new jt(It(3.2404542*(K=.95047*rt(K))-1.5371385*(q=1*rt(q))-.4985314*(de=1.08883*rt(de))),It(-.969266*K+1.8760108*q+.041556*de),It(.0556434*K-.2040259*q+1.0572252*de))}function je(ve,R,B){return ve>0?new Ut(Math.atan2(B,R)*ln,Math.sqrt(R*R+B*B),ve):new Ut(NaN,NaN,ve)}function rt(ve){return ve>.206893034?ve*ve*ve:(ve-4/29)/7.787037}function pt(ve){return ve>.008856?Math.pow(ve,1/3):7.787037*ve+4/29}function It(ve){return Math.round(255*(ve<=.00304?12.92*ve:1.055*Math.pow(ve,1/2.4)-.055))}function jt(ve,R,B){return this instanceof jt?(this.r=~~ve,this.g=~~R,void(this.b=~~B)):arguments.length<2?ve instanceof jt?new jt(ve.r,ve.g,ve.b):Yn(""+ve,jt,wt):new jt(ve,R,B)}function Qt(ve){return new jt(ve>>16,ve>>8&255,255&ve)}function fn(ve){return Qt(ve)+""}Dt.brighter=function(ve){return new Et(Math.min(100,this.l+$t*(arguments.length?ve:1)),this.a,this.b)},Dt.darker=function(ve){return new Et(Math.max(0,this.l-$t*(arguments.length?ve:1)),this.a,this.b)},Dt.rgb=function(){return Pt(this.l,this.a,this.b)},y.rgb=jt;var an=jt.prototype=new ot;function Sn(ve){return ve<16?"0"+Math.max(0,ve).toString(16):Math.min(255,ve).toString(16)}function Yn(ve,R,B){var q,K,de,be=0,Me=0,Ce=0;if(q=/([a-z]+)\((.*)\)/.exec(ve=ve.toLowerCase()))switch(K=q[2].split(","),q[1]){case"hsl":return B(parseFloat(K[0]),parseFloat(K[1])/100,parseFloat(K[2])/100);case"rgb":return R(hn(K[0]),hn(K[1]),hn(K[2]))}return(de=Dn.get(ve))?R(de.r,de.g,de.b):(null==ve||"#"!==ve.charAt(0)||isNaN(de=parseInt(ve.slice(1),16))||(4===ve.length?(be=(3840&de)>>4,be|=be>>4,Me=240&de,Me|=Me>>4,Ce=15&de,Ce|=Ce<<4):7===ve.length&&(be=(16711680&de)>>16,Me=(65280&de)>>8,Ce=255&de)),R(be,Me,Ce))}function kn(ve,R,B){var q,K,de=Math.min(ve/=255,R/=255,B/=255),be=Math.max(ve,R,B),Me=be-de,Ce=(be+de)/2;return Me?(K=Ce<.5?Me/(be+de):Me/(2-be-de),q=ve==be?(R-B)/Me+(R<B?6:0):R==be?(B-ve)/Me+2:(ve-R)/Me+4,q*=60):(q=NaN,K=Ce>0&&Ce<1?0:q),new st(q,K,Ce)}function cn(ve,R,B){var q=pt((.4124564*(ve=vn(ve))+.3575761*(R=vn(R))+.1804375*(B=vn(B)))/.95047),K=pt((.2126729*ve+.7151522*R+.072175*B)/1);return Et(116*K-16,500*(q-K),200*(K-pt((.0193339*ve+.119192*R+.9503041*B)/1.08883)))}function vn(ve){return(ve/=255)<=.04045?ve/12.92:Math.pow((ve+.055)/1.055,2.4)}function hn(ve){var R=parseFloat(ve);return"%"===ve.charAt(ve.length-1)?Math.round(2.55*R):R}an.brighter=function(ve){ve=Math.pow(.7,arguments.length?ve:1);var R=this.r,B=this.g,q=this.b,K=30;return R||B||q?(R&&R<K&&(R=K),B&&B<K&&(B=K),q&&q<K&&(q=K),new jt(Math.min(255,R/ve),Math.min(255,B/ve),Math.min(255,q/ve))):new jt(K,K,K)},an.darker=function(ve){return new jt((ve=Math.pow(.7,arguments.length?ve:1))*this.r,ve*this.g,ve*this.b)},an.hsl=function(){return kn(this.r,this.g,this.b)},an.toString=function(){return"#"+Sn(this.r)+Sn(this.g)+Sn(this.b)};var Dn=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Pn(ve){return"function"==typeof ve?ve:function(){return ve}}function $n(ve){return function(R,B,q){return 2===arguments.length&&"function"==typeof B&&(q=B,B=null),rr(R,B,ve,q)}}function rr(ve,R,B,q){var $e,K={},de=y.dispatch("beforesend","progress","load","error"),be={},Me=new XMLHttpRequest,Ce=null;function Ne(){var $e,dt,Ot,at=Me.status;if(!at&&((Ot=(dt=Me).responseType)&&"text"!==Ot?dt.response:dt.responseText)||at>=200&&at<300||304===at){try{$e=B.call(K,Me)}catch(dt){return void de.error.call(K,dt)}de.load.call(K,$e)}else de.error.call(K,Me)}return self.XDomainRequest&&!("withCredentials"in Me)&&/^(http(s)?:)?\/\//.test(ve)&&(Me=new XDomainRequest),"onload"in Me?Me.onload=Me.onerror=Ne:Me.onreadystatechange=function(){Me.readyState>3&&Ne()},Me.onprogress=function($e){var at=y.event;y.event=$e;try{de.progress.call(K,Me)}finally{y.event=at}},K.header=function($e,at){return $e=($e+"").toLowerCase(),arguments.length<2?be[$e]:(null==at?delete be[$e]:be[$e]=at+"",K)},K.mimeType=function($e){return arguments.length?(R=null==$e?null:$e+"",K):R},K.responseType=function($e){return arguments.length?(Ce=$e,K):Ce},K.response=function($e){return B=$e,K},["get","post"].forEach(function($e){K[$e]=function(){return K.send.apply(K,[$e].concat(T(arguments)))}}),K.send=function($e,at,dt){if(2===arguments.length&&"function"==typeof at&&(dt=at,at=null),Me.open($e,ve,!0),null==R||"accept"in be||(be.accept=R+",*/*"),Me.setRequestHeader)for(var Ot in be)Me.setRequestHeader(Ot,be[Ot]);return null!=R&&Me.overrideMimeType&&Me.overrideMimeType(R),null!=Ce&&(Me.responseType=Ce),null!=dt&&K.on("error",dt).on("load",function(zt){dt(null,zt)}),de.beforesend.call(K,Me),Me.send(null==at?null:at),K},K.abort=function(){return Me.abort(),K},y.rebind(K,de,"on"),null==q?K:K.get(1===($e=q).length?function(at,dt){$e(null==at?dt:null)}:$e)}Dn.forEach(function(ve,R){Dn.set(ve,Qt(R))}),y.functor=Pn,y.xhr=$n(P),y.dsv=function(ve,R){var B=new RegExp('["'+ve+"\n]"),q=ve.charCodeAt(0);function K(Ne,$e,at){arguments.length<3&&(at=$e,$e=null);var dt=rr(Ne,R,null==$e?de:be($e),at);return dt.row=function(Ot){return arguments.length?dt.response(null==($e=Ot)?de:be(Ot)):$e},dt}function de(Ne){return K.parse(Ne.responseText)}function be(Ne){return function($e){return K.parse($e.responseText,Ne)}}function Me(Ne){return Ne.map(Ce).join(ve)}function Ce(Ne){return B.test(Ne)?'"'+Ne.replace(/\"/g,'""')+'"':Ne}return K.parse=function(Ne,$e){var at;return K.parseRows(Ne,function(dt,Ot){if(at)return at(dt,Ot-1);var zt=function(Rt){for(var Nt={},Lt=dt.length,Yt=0;Yt<Lt;++Yt)Nt[dt[Yt]]=Rt[Yt];return Nt};at=$e?function(Rt,Nt){return $e(zt(Rt),Nt)}:zt})},K.parseRows=function(Ne,$e){var at,dt,Ot={},zt={},Rt=[],Nt=Ne.length,Lt=0,Yt=0;function Gt(){if(Lt>=Nt)return zt;if(dt)return dt=!1,Ot;var bn=Lt;if(34===Ne.charCodeAt(bn)){for(var En=bn;En++<Nt;)if(34===Ne.charCodeAt(En)){if(34!==Ne.charCodeAt(En+1))break;++En}return Lt=En+2,13===(Un=Ne.charCodeAt(En+1))?(dt=!0,10===Ne.charCodeAt(En+2)&&++Lt):10===Un&&(dt=!0),Ne.slice(bn+1,En).replace(/""/g,'"')}for(;Lt<Nt;){var Un,Nn=1;if(10===(Un=Ne.charCodeAt(Lt++)))dt=!0;else if(13===Un)dt=!0,10===Ne.charCodeAt(Lt)&&(++Lt,++Nn);else if(Un!==q)continue;return Ne.slice(bn,Lt-Nn)}return Ne.slice(bn)}for(;(at=Gt())!==zt;){for(var Xt=[];at!==Ot&&at!==zt;)Xt.push(at),at=Gt();$e&&null==(Xt=$e(Xt,Yt++))||Rt.push(Xt)}return Rt},K.format=function(Ne){if(Array.isArray(Ne[0]))return K.formatRows(Ne);var $e=new L,at=[];return Ne.forEach(function(dt){for(var Ot in dt)$e.has(Ot)||at.push($e.add(Ot))}),[at.map(Ce).join(ve)].concat(Ne.map(function(dt){return at.map(function(Ot){return Ce(dt[Ot])}).join(ve)})).join("\n")},K.formatRows=function(Ne){return Ne.map(Me).join("\n")},K},y.csv=y.dsv(",","text/csv"),y.tsv=y.dsv("\t","text/tab-separated-values");var er,or,Zr,zr,pr=this[U(this,"requestAnimationFrame")]||function(ve){setTimeout(ve,17)};function Br(ve,R,B){var q=arguments.length;q<2&&(R=0),q<3&&(B=Date.now());var de={c:ve,t:B+R,n:null};return or?or.n=de:er=de,or=de,Zr||(zr=clearTimeout(zr),Zr=1,pr(fr)),de}function fr(){var ve=Nr(),R=xi()-ve;R>24?(isFinite(R)&&(clearTimeout(zr),zr=setTimeout(fr,R)),Zr=0):(Zr=1,pr(fr))}function Nr(){for(var ve=Date.now(),R=er;R;)ve>=R.t&&R.c(ve-R.t)&&(R.c=null),R=R.n;return ve}function xi(){for(var ve,R=er,B=1/0;R;)R.c?(R.t<B&&(B=R.t),R=(ve=R).n):R=ve?ve.n=R.n:er=R.n;return or=ve,B}function Qn(ve){return ve[0]}function Er(ve){return ve[1]}function kr(ve){for(var R,B,q,K=ve.length,de=[0,1],be=2,Me=2;Me<K;Me++){for(;be>1&&((B=ve[de[be-1]])[0]-(R=ve[de[be-2]])[0])*((q=ve[Me])[1]-R[1])-(B[1]-R[1])*(q[0]-R[0])<=0;)--be;de[be++]=Me}return de.slice(0,be)}function sr(ve,R){return ve[0]-R[0]||ve[1]-R[1]}y.timer=function(){Br.apply(this,arguments)},y.timer.flush=function(){Nr(),xi()},y.round=function(ve,R){return R?Math.round(ve*(R=Math.pow(10,R)))/R:Math.round(ve)},y.geom={},y.geom.hull=function(ve){var R=Qn,B=Er;if(arguments.length)return q(ve);function q(K){if(K.length<3)return[];var de,be=Pn(R),Me=Pn(B),Ce=K.length,Ne=[],$e=[];for(de=0;de<Ce;de++)Ne.push([+be.call(this,K[de],de),+Me.call(this,K[de],de),de]);for(Ne.sort(sr),de=0;de<Ce;de++)$e.push([Ne[de][0],-Ne[de][1]]);var at=kr(Ne),dt=kr($e),Ot=dt[0]===at[0],zt=dt[dt.length-1]===at[at.length-1],Rt=[];for(de=at.length-1;de>=0;--de)Rt.push(K[Ne[at[de]][2]]);for(de=+Ot;de<dt.length-zt;++de)Rt.push(K[Ne[dt[de]][2]]);return Rt}return q.x=function(K){return arguments.length?(R=K,q):R},q.y=function(K){return arguments.length?(B=K,q):B},q},y.geom.polygon=function(ve){return H(ve,ci),ve};var ci=y.geom.polygon.prototype=[];function oi(ve,R,B){return(B[0]-R[0])*(ve[1]-R[1])<(B[1]-R[1])*(ve[0]-R[0])}function Or(ve,R,B,q){var K=ve[0],de=B[0],be=R[0]-K,Me=q[0]-de,Ce=ve[1],Ne=B[1],$e=R[1]-Ce,at=q[1]-Ne,dt=(Me*(Ce-Ne)-at*(K-de))/(at*be-Me*$e);return[K+dt*be,Ce+dt*$e]}function Dr(ve){var R=ve[0],B=ve[ve.length-1];return!(R[0]-B[0]||R[1]-B[1])}ci.area=function(){for(var ve,R=-1,B=this.length,q=this[B-1],K=0;++R<B;)K+=(ve=q)[1]*(q=this[R])[0]-ve[0]*q[1];return.5*K},ci.centroid=function(ve){var R,B,q=-1,K=this.length,de=0,be=0,Me=this[K-1];for(arguments.length||(ve=-1/(6*this.area()));++q<K;)de+=((R=Me)[0]+(Me=this[q])[0])*(B=R[0]*Me[1]-Me[0]*R[1]),be+=(R[1]+Me[1])*B;return[de*ve,be*ve]},ci.clip=function(ve){for(var R,B,q,K,de,be,Me=Dr(ve),Ce=-1,Ne=this.length-Dr(this),$e=this[Ne-1];++Ce<Ne;){for(R=ve.slice(),ve.length=0,K=this[Ce],de=R[(q=R.length-Me)-1],B=-1;++B<q;)oi(be=R[B],$e,K)?(oi(de,$e,K)||ve.push(Or(de,be,$e,K)),ve.push(be)):oi(de,$e,K)&&ve.push(Or(de,be,$e,K)),de=be;Me&&ve.push(ve[0]),$e=K}return ve};var wr,gn,tr,qt,_n,Cn=[],Jn=[];function Xn(){Gr(this),this.edge=this.site=this.circle=null}function Hn(ve){var R=Cn.pop()||new Xn;return R.site=ve,R}function Bn(ve){Fr(ve),tr.remove(ve),Cn.push(ve),Gr(ve)}function zn(ve){var R=ve.circle,B=R.x,q=R.cy,K={x:B,y:q},de=ve.P,be=ve.N,Me=[ve];Bn(ve);for(var Ce=de;Ce.circle&&u(B-Ce.circle.x)<Bt&&u(q-Ce.circle.cy)<Bt;)de=Ce.P,Me.unshift(Ce),Bn(Ce),Ce=de;Me.unshift(Ce),Fr(Ce);for(var Ne=be;Ne.circle&&u(B-Ne.circle.x)<Bt&&u(q-Ne.circle.cy)<Bt;)be=Ne.N,Me.push(Ne),Bn(Ne),Ne=be;Me.push(Ne),Fr(Ne);var $e,at=Me.length;for($e=1;$e<at;++$e)_i((Ne=Me[$e]).edge,(Ce=Me[$e-1]).site,Ne.site,K);(Ne=Me[at-1]).edge=Xr((Ce=Me[0]).site,Ne.site,null,K),Tr(Ce),Tr(Ne)}function jn(ve){for(var R,B,q,K,de=ve.x,be=ve.y,Me=tr._;Me;)if((q=Vn(Me,be)-de)>Bt)Me=Me.L;else{if(!((K=de-On(Me,be))>Bt)){q>-Bt?(R=Me.P,B=Me):K>-Bt?(R=Me,B=Me.N):R=B=Me;break}if(!Me.R){R=Me;break}Me=Me.R}var Ce=Hn(ve);if(tr.insert(R,Ce),R||B){if(R===B)return Fr(R),B=Hn(R.site),tr.insert(Ce,B),Ce.edge=B.edge=Xr(R.site,Ce.site),Tr(R),void Tr(B);if(B){Fr(R),Fr(B);var Ne=R.site,$e=Ne.x,at=Ne.y,dt=ve.x-$e,Ot=ve.y-at,zt=B.site,Rt=zt.x-$e,Nt=zt.y-at,Lt=2*(dt*Nt-Ot*Rt),Yt=dt*dt+Ot*Ot,Gt=Rt*Rt+Nt*Nt,Xt={x:(Nt*Yt-Ot*Gt)/Lt+$e,y:(dt*Gt-Rt*Yt)/Lt+at};_i(B.edge,Ne,zt,Xt),Ce.edge=Xr(Ne,ve,null,Xt),B.edge=Xr(ve,zt,null,Xt),Tr(R),Tr(B)}else Ce.edge=Xr(R.site,Ce.site)}}function Vn(ve,R){var B=ve.site,q=B.x,K=B.y,de=K-R;if(!de)return q;var be=ve.P;if(!be)return-1/0;var Me=(B=be.site).x,Ce=B.y,Ne=Ce-R;if(!Ne)return Me;var $e=Me-q,at=1/de-1/Ne,dt=$e/Ne;return at?(-dt+Math.sqrt(dt*dt-2*at*($e*$e/(-2*Ne)-Ce+Ne/2+K-de/2)))/at+q:(q+Me)/2}function On(ve,R){var B=ve.N;if(B)return Vn(B,R);var q=ve.site;return q.y===R?q.x:1/0}function dr(ve){this.site=ve,this.edges=[]}function ir(ve,R){return R.angle-ve.angle}function br(){Gr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Tr(ve){var R=ve.P,B=ve.N;if(R&&B){var q=R.site,K=ve.site,de=B.site;if(q!==de){var be=K.x,Me=K.y,Ce=q.x-be,Ne=q.y-Me,$e=de.x-be,at=2*(Ce*(Nt=de.y-Me)-Ne*$e);if(!(at>=-1e-12)){var dt=Ce*Ce+Ne*Ne,Ot=$e*$e+Nt*Nt,zt=(Nt*dt-Ne*Ot)/at,Rt=(Ce*Ot-$e*dt)/at,Nt=Rt+Me,Lt=Jn.pop()||new br;Lt.arc=ve,Lt.site=K,Lt.x=zt+be,Lt.y=Nt+Math.sqrt(zt*zt+Rt*Rt),Lt.cy=Nt,ve.circle=Lt;for(var Yt=null,Gt=_n._;Gt;)if(Lt.y<Gt.y||Lt.y===Gt.y&&Lt.x<=Gt.x){if(!Gt.L){Yt=Gt.P;break}Gt=Gt.L}else{if(!Gt.R){Yt=Gt;break}Gt=Gt.R}_n.insert(Yt,Lt),Yt||(qt=Lt)}}}}function Fr(ve){var R=ve.circle;R&&(R.P||(qt=R.N),_n.remove(R),Jn.push(R),Gr(R),ve.circle=null)}function Vr(ve,R){var B=ve.b;if(B)return!0;var q,K,de=ve.a,be=R[0][0],Me=R[1][0],Ce=R[0][1],Ne=R[1][1],$e=ve.l,at=ve.r,dt=$e.x,Ot=$e.y,zt=at.x,Rt=at.y,Nt=(dt+zt)/2;if(Rt===Ot){if(Nt<be||Nt>=Me)return;if(dt>zt){if(de){if(de.y>=Ne)return}else de={x:Nt,y:Ce};B={x:Nt,y:Ne}}else{if(de){if(de.y<Ce)return}else de={x:Nt,y:Ne};B={x:Nt,y:Ce}}}else if(K=(Ot+Rt)/2-(q=(dt-zt)/(Rt-Ot))*Nt,q<-1||q>1)if(dt>zt){if(de){if(de.y>=Ne)return}else de={x:(Ce-K)/q,y:Ce};B={x:(Ne-K)/q,y:Ne}}else{if(de){if(de.y<Ce)return}else de={x:(Ne-K)/q,y:Ne};B={x:(Ce-K)/q,y:Ce}}else if(Ot<Rt){if(de){if(de.x>=Me)return}else de={x:be,y:q*be+K};B={x:Me,y:q*Me+K}}else{if(de){if(de.x<be)return}else de={x:Me,y:q*Me+K};B={x:be,y:q*be+K}}return ve.a=de,ve.b=B,!0}function Ur(ve,R){this.l=ve,this.r=R,this.a=this.b=null}function Xr(ve,R,B,q){var K=new Ur(ve,R);return wr.push(K),B&&_i(K,ve,R,B),q&&_i(K,R,ve,q),gn[ve.i].edges.push(new ra(K,ve,R)),gn[R.i].edges.push(new ra(K,R,ve)),K}function ri(ve,R,B){var q=new Ur(ve,null);return q.a=R,q.b=B,wr.push(q),q}function _i(ve,R,B,q){ve.a||ve.b?ve.l===B?ve.b=q:ve.a=q:(ve.a=q,ve.l=R,ve.r=B)}function ra(ve,R,B){var q=ve.a,K=ve.b;this.edge=ve,this.site=R,this.angle=B?Math.atan2(B.y-R.y,B.x-R.x):ve.l===R?Math.atan2(K.x-q.x,q.y-K.y):Math.atan2(q.x-K.x,K.y-q.y)}function hi(){this._=null}function Gr(ve){ve.U=ve.C=ve.L=ve.R=ve.P=ve.N=null}function Mi(ve,R){var B=R,q=R.R,K=B.U;K?K.L===B?K.L=q:K.R=q:ve._=q,q.U=K,B.U=q,B.R=q.L,B.R&&(B.R.U=B),q.L=B}function vi(ve,R){var B=R,q=R.L,K=B.U;K?K.L===B?K.L=q:K.R=q:ve._=q,q.U=K,B.U=q,B.L=q.R,B.L&&(B.L.U=B),q.R=B}function _a(ve){for(;ve.L;)ve=ve.L;return ve}function Co(ve,R){var B,q,K,de=ve.sort(oo).pop();for(wr=[],gn=new Array(ve.length),tr=new hi,_n=new hi;;)if(K=qt,de&&(!K||de.y<K.y||de.y===K.y&&de.x<K.x))de.x===B&&de.y===q||(gn[de.i]=new dr(de),jn(de),B=de.x,q=de.y),de=ve.pop();else{if(!K)break;zn(K.arc)}R&&(function(Me){for(var Ce,Ne,$e,at,dt,Ot=wr,zt=(Ne=Me[0][0],$e=Me[0][1],at=Me[1][0],dt=Me[1][1],function(Nt){var Lt,Yt=Nt.a,Gt=Nt.b,Xt=Yt.x,bn=Yt.y,En=0,Un=1,Nn=Gt.x-Xt,yr=Gt.y-bn;if(Lt=Ne-Xt,Nn||!(Lt>0)){if(Lt/=Nn,Nn<0){if(Lt<En)return;Lt<Un&&(Un=Lt)}else if(Nn>0){if(Lt>Un)return;Lt>En&&(En=Lt)}if(Lt=at-Xt,Nn||!(Lt<0)){if(Lt/=Nn,Nn<0){if(Lt>Un)return;Lt>En&&(En=Lt)}else if(Nn>0){if(Lt<En)return;Lt<Un&&(Un=Lt)}if(Lt=$e-bn,yr||!(Lt>0)){if(Lt/=yr,yr<0){if(Lt<En)return;Lt<Un&&(Un=Lt)}else if(yr>0){if(Lt>Un)return;Lt>En&&(En=Lt)}if(Lt=dt-bn,yr||!(Lt<0)){if(Lt/=yr,yr<0){if(Lt>Un)return;Lt>En&&(En=Lt)}else if(yr>0){if(Lt<En)return;Lt<Un&&(Un=Lt)}return En>0&&(Nt.a={x:Xt+En*Nn,y:bn+En*yr}),Un<1&&(Nt.b={x:Xt+Un*Nn,y:bn+Un*yr}),Nt}}}}}),Rt=Ot.length;Rt--;)(!Vr(Ce=Ot[Rt],Me)||!zt(Ce)||u(Ce.a.x-Ce.b.x)<Bt&&u(Ce.a.y-Ce.b.y)<Bt)&&(Ce.a=Ce.b=null,Ot.splice(Rt,1))}(R),function(Me){for(var Ce,Ne,$e,at,dt,Ot,zt,Rt,Nt,Lt,Yt=Me[0][0],Gt=Me[1][0],Xt=Me[0][1],bn=Me[1][1],En=gn,Un=En.length;Un--;)if((dt=En[Un])&&dt.prepare())for(Rt=(zt=dt.edges).length,Ot=0;Ot<Rt;)$e=(Lt=zt[Ot].end()).x,at=Lt.y,Ce=(Nt=zt[++Ot%Rt].start()).x,Ne=Nt.y,(u($e-Ce)>Bt||u(at-Ne)>Bt)&&(zt.splice(Ot,0,new ra(ri(dt.site,Lt,u($e-Yt)<Bt&&bn-at>Bt?{x:Yt,y:u(Ce-Yt)<Bt?Ne:bn}:u(at-bn)<Bt&&Gt-$e>Bt?{x:u(Ne-bn)<Bt?Ce:Gt,y:bn}:u($e-Gt)<Bt&&at-Xt>Bt?{x:Gt,y:u(Ce-Gt)<Bt?Ne:Xt}:u(at-Xt)<Bt&&$e-Yt>Bt?{x:u(Ne-Xt)<Bt?Ce:Yt,y:Xt}:null),dt.site,null)),++Rt)}(R));var be={cells:gn,edges:wr};return tr=_n=wr=gn=null,be}function oo(ve,R){return R.y-ve.y||R.x-ve.x}dr.prototype.prepare=function(){for(var ve,R=this.edges,B=R.length;B--;)(ve=R[B].edge).b&&ve.a||R.splice(B,1);return R.sort(ir),R.length},ra.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},hi.prototype={insert:function(ve,R){var B,q,K;if(ve){if(R.P=ve,R.N=ve.N,ve.N&&(ve.N.P=R),ve.N=R,ve.R){for(ve=ve.R;ve.L;)ve=ve.L;ve.L=R}else ve.R=R;B=ve}else this._?(ve=_a(this._),R.P=null,R.N=ve,ve.P=ve.L=R,B=ve):(R.P=R.N=null,this._=R,B=null);for(R.L=R.R=null,R.U=B,R.C=!0,ve=R;B&&B.C;)B===(q=B.U).L?(K=q.R)&&K.C?(B.C=K.C=!1,q.C=!0,ve=q):(ve===B.R&&(Mi(this,B),B=(ve=B).U),B.C=!1,q.C=!0,vi(this,q)):(K=q.L)&&K.C?(B.C=K.C=!1,q.C=!0,ve=q):(ve===B.L&&(vi(this,B),B=(ve=B).U),B.C=!1,q.C=!0,Mi(this,q)),B=ve.U;this._.C=!1},remove:function(ve){ve.N&&(ve.N.P=ve.P),ve.P&&(ve.P.N=ve.N),ve.N=ve.P=null;var R,B,q,K=ve.U,de=ve.L,be=ve.R;if(B=de?be?_a(be):de:be,K?K.L===ve?K.L=B:K.R=B:this._=B,de&&be?(q=B.C,B.C=ve.C,B.L=de,de.U=B,B!==be?(K=B.U,B.U=ve.U,K.L=ve=B.R,B.R=be,be.U=B):(B.U=K,K=B,ve=B.R)):(q=ve.C,ve=B),ve&&(ve.U=K),!q)if(ve&&ve.C)ve.C=!1;else{do{if(ve===this._)break;if(ve===K.L){if((R=K.R).C&&(R.C=!1,K.C=!0,Mi(this,K),R=K.R),R.L&&R.L.C||R.R&&R.R.C){R.R&&R.R.C||(R.L.C=!1,R.C=!0,vi(this,R),R=K.R),R.C=K.C,K.C=R.R.C=!1,Mi(this,K),ve=this._;break}}else if((R=K.L).C&&(R.C=!1,K.C=!0,vi(this,K),R=K.L),R.L&&R.L.C||R.R&&R.R.C){R.L&&R.L.C||(R.R.C=!1,R.C=!0,Mi(this,R),R=K.L),R.C=K.C,K.C=R.L.C=!1,vi(this,K),ve=this._;break}R.C=!0,ve=K,K=K.U}while(!ve.C);ve&&(ve.C=!1)}}},y.geom.voronoi=function(ve){var R=Qn,B=Er,q=R,K=B,de=yo;if(ve)return be(ve);function be(Ce){var Ne=new Array(Ce.length),$e=de[0][0],at=de[0][1],dt=de[1][0],Ot=de[1][1];return Co(Me(Ce),de).cells.forEach(function(zt,Rt){var Nt=zt.edges,Lt=zt.site;(Ne[Rt]=Nt.length?Nt.map(function(Yt){var Gt=Yt.start();return[Gt.x,Gt.y]}):Lt.x>=$e&&Lt.x<=dt&&Lt.y>=at&&Lt.y<=Ot?[[$e,Ot],[dt,Ot],[dt,at],[$e,at]]:[]).point=Ce[Rt]}),Ne}function Me(Ce){return Ce.map(function(Ne,$e){return{x:Math.round(q(Ne,$e)/Bt)*Bt,y:Math.round(K(Ne,$e)/Bt)*Bt,i:$e}})}return be.links=function(Ce){return Co(Me(Ce)).edges.filter(function(Ne){return Ne.l&&Ne.r}).map(function(Ne){return{source:Ce[Ne.l.i],target:Ce[Ne.r.i]}})},be.triangles=function(Ce){var Ne=[];return Co(Me(Ce)).cells.forEach(function($e,at){for(var dt,Ot,zt,Rt,Nt=$e.site,Lt=$e.edges.sort(ir),Yt=-1,Gt=Lt.length,Xt=Lt[Gt-1].edge,bn=Xt.l===Nt?Xt.r:Xt.l;++Yt<Gt;)dt=bn,bn=(Xt=Lt[Yt].edge).l===Nt?Xt.r:Xt.l,at<dt.i&&at<bn.i&&((Ot=Nt).x-(Rt=bn).x)*((zt=dt).y-Ot.y)-(Ot.x-zt.x)*(Rt.y-Ot.y)<0&&Ne.push([Ce[at],Ce[dt.i],Ce[bn.i]])}),Ne},be.x=function(Ce){return arguments.length?(q=Pn(R=Ce),be):R},be.y=function(Ce){return arguments.length?(K=Pn(B=Ce),be):B},be.clipExtent=function(Ce){return arguments.length?(de=null==Ce?yo:Ce,be):de===yo?null:de},be.size=function(Ce){return arguments.length?be.clipExtent(Ce&&[[0,0],Ce]):de===yo?null:de&&de[1]},be};var yo=[[-1e6,-1e6],[1e6,1e6]];function Ha(ve){return ve.x}function qa(ve){return ve.y}function ho(ve,R,B,q,K,de){if(!ve(R,B,q,K,de)){var be=.5*(B+K),Me=.5*(q+de),Ce=R.nodes;Ce[0]&&ho(ve,Ce[0],B,q,be,Me),Ce[1]&&ho(ve,Ce[1],be,q,K,Me),Ce[2]&&ho(ve,Ce[2],B,Me,be,de),Ce[3]&&ho(ve,Ce[3],be,Me,K,de)}}function ka(ve,R,B,q,K,de,be){var Me,Ce=1/0;return function Ne($e,at,dt,Ot,zt){if(!(at>de||dt>be||Ot<q||zt<K)){if(Rt=$e.point){var Rt,Nt=R-$e.x,Lt=B-$e.y,Yt=Nt*Nt+Lt*Lt;if(Yt<Ce){var Gt=Math.sqrt(Ce=Yt);q=R-Gt,K=B-Gt,de=R+Gt,be=B+Gt,Me=Rt}}for(var Xt=$e.nodes,bn=.5*(at+Ot),En=.5*(dt+zt),Un=(B>=En)<<1|R>=bn,Nn=Un+4;Un<Nn;++Un)if($e=Xt[3&Un])switch(3&Un){case 0:Ne($e,at,dt,bn,En);break;case 1:Ne($e,bn,dt,Ot,En);break;case 2:Ne($e,at,En,bn,zt);break;case 3:Ne($e,bn,En,Ot,zt)}}}(ve,q,K,de,be),Me}function ds(ve,R){ve=y.rgb(ve),R=y.rgb(R);var B=ve.r,q=ve.g,K=ve.b,de=R.r-B,be=R.g-q,Me=R.b-K;return function(Ce){return"#"+Sn(Math.round(B+de*Ce))+Sn(Math.round(q+be*Ce))+Sn(Math.round(K+Me*Ce))}}function Ts(ve,R){var B,q={},K={};for(B in ve)B in R?q[B]=wo(ve[B],R[B]):K[B]=ve[B];for(B in R)B in ve||(K[B]=R[B]);return function(de){for(B in q)K[B]=q[B](de);return K}}function Uo(ve,R){return ve=+ve,R=+R,function(B){return ve*(1-B)+R*B}}function pa(ve,R){var B,q,K,de=Rs.lastIndex=Us.lastIndex=0,be=-1,Me=[],Ce=[];for(ve+="",R+="";(B=Rs.exec(ve))&&(q=Us.exec(R));)(K=q.index)>de&&(K=R.slice(de,K),Me[be]?Me[be]+=K:Me[++be]=K),(B=B[0])===(q=q[0])?Me[be]?Me[be]+=q:Me[++be]=q:(Me[++be]=null,Ce.push({i:be,x:Uo(B,q)})),de=Us.lastIndex;return de<R.length&&(K=R.slice(de),Me[be]?Me[be]+=K:Me[++be]=K),Me.length<2?Ce[0]?(R=Ce[0].x,function(Ne){return R(Ne)+""}):function(){return R}:(R=Ce.length,function(Ne){for(var $e,at=0;at<R;++at)Me[($e=Ce[at]).i]=$e.x(Ne);return Me.join("")})}y.geom.delaunay=function(ve){return y.geom.voronoi().triangles(ve)},y.geom.quadtree=function(ve,R,B,q,K){var de,be=Qn,Me=Er;if(de=arguments.length)return be=Ha,Me=qa,3===de&&(K=B,q=R,B=R=0),Ce(ve);function Ce(Ne){var $e,at,dt,Ot,zt,Rt,Nt,Lt,Yt,Gt=Pn(be),Xt=Pn(Me);if(null!=R)Rt=R,Nt=B,Lt=q,Yt=K;else if(Lt=Yt=-(Rt=Nt=1/0),at=[],dt=[],zt=Ne.length,de)for(Ot=0;Ot<zt;++Ot)($e=Ne[Ot]).x<Rt&&(Rt=$e.x),$e.y<Nt&&(Nt=$e.y),$e.x>Lt&&(Lt=$e.x),$e.y>Yt&&(Yt=$e.y),at.push($e.x),dt.push($e.y);else for(Ot=0;Ot<zt;++Ot){var bn=+Gt($e=Ne[Ot],Ot),En=+Xt($e,Ot);bn<Rt&&(Rt=bn),En<Nt&&(Nt=En),bn>Lt&&(Lt=bn),En>Yt&&(Yt=En),at.push(bn),dt.push(En)}var Un=Lt-Rt,Nn=Yt-Nt;function yr(Ar,fi,wi,Fi,ur,Hr,bi,mi){if(!isNaN(wi)&&!isNaN(Fi))if(Ar.leaf){var Si=Ar.x,Ri=Ar.y;if(null!=Si)if(u(Si-wi)+u(Ri-Fi)<.01)vr(Ar,fi,wi,Fi,ur,Hr,bi,mi);else{var na=Ar.point;Ar.x=Ar.y=Ar.point=null,vr(Ar,na,Si,Ri,ur,Hr,bi,mi),vr(Ar,fi,wi,Fi,ur,Hr,bi,mi)}else Ar.x=wi,Ar.y=Fi,Ar.point=fi}else vr(Ar,fi,wi,Fi,ur,Hr,bi,mi)}function vr(Ar,fi,wi,Fi,ur,Hr,bi,mi){var Si=.5*(ur+bi),Ri=.5*(Hr+mi),na=wi>=Si,Ai=Fi>=Ri,Qi=Ai<<1|na;Ar.leaf=!1,na?ur=Si:bi=Si,Ai?Hr=Ri:mi=Ri,yr(Ar=Ar.nodes[Qi]||(Ar.nodes[Qi]={leaf:!0,nodes:[],point:null,x:null,y:null}),fi,wi,Fi,ur,Hr,bi,mi)}Un>Nn?Yt=Nt+Un:Lt=Rt+Nn;var Pr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Ar){yr(Pr,Ar,+Gt(Ar,++Ot),+Xt(Ar,Ot),Rt,Nt,Lt,Yt)},visit:function(Ar){ho(Ar,Pr,Rt,Nt,Lt,Yt)},find:function(Ar){return ka(Pr,Ar[0],Ar[1],Rt,Nt,Lt,Yt)}};if(Ot=-1,null==R){for(;++Ot<zt;)yr(Pr,Ne[Ot],at[Ot],dt[Ot],Rt,Nt,Lt,Yt);--Ot}else Ne.forEach(Pr.add);return at=dt=Ne=$e=null,Pr}return Ce.x=function(Ne){return arguments.length?(be=Ne,Ce):be},Ce.y=function(Ne){return arguments.length?(Me=Ne,Ce):Me},Ce.extent=function(Ne){return arguments.length?(null==Ne?R=B=q=K=null:(R=+Ne[0][0],B=+Ne[0][1],q=+Ne[1][0],K=+Ne[1][1]),Ce):null==R?null:[[R,B],[q,K]]},Ce.size=function(Ne){return arguments.length?(null==Ne?R=B=q=K=null:(R=B=0,q=+Ne[0],K=+Ne[1]),Ce):null==R?null:[q-R,K-B]},Ce},y.interpolateRgb=ds,y.interpolateObject=Ts,y.interpolateNumber=Uo,y.interpolateString=pa;var Rs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Us=new RegExp(Rs.source,"g");function wo(ve,R){for(var B,q=y.interpolators.length;--q>=0&&!(B=y.interpolators[q](ve,R)););return B}function ia(ve,R){var B,q=[],K=[],de=ve.length,be=R.length,Me=Math.min(ve.length,R.length);for(B=0;B<Me;++B)q.push(wo(ve[B],R[B]));for(;B<de;++B)K[B]=ve[B];for(;B<be;++B)K[B]=R[B];return function(Ce){for(B=0;B<Me;++B)K[B]=q[B](Ce);return K}}y.interpolate=wo,y.interpolators=[function(ve,R){var B=typeof R;return("string"===B?Dn.has(R.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(R)?ds:pa:R instanceof ot?ds:Array.isArray(R)?ia:"object"===B&&isNaN(R)?Ts:Uo)(ve,R)}],y.interpolateArray=ia;var qo=function(){return P},jl=y.map({linear:qo,poly:function(ve){return function(R){return Math.pow(R,ve)}},quad:function(){return pu},cubic:function(){return Fs},sin:function(){return ru},exp:function(){return Ns},circle:function(){return zs},elastic:function(ve,R){var B;return arguments.length<2&&(R=.45),arguments.length?B=R/un*Math.asin(1/ve):(ve=1,B=R/4),function(q){return 1+ve*Math.pow(2,-10*q)*Math.sin((q-B)*un/R)}},back:function(ve){return ve||(ve=1.70158),function(R){return R*R*((ve+1)*R-ve)}},bounce:function(){return no}}),Yl=y.map({in:P,out:Ms,"in-out":Hs,"out-in":function(ve){return Hs(Ms(ve))}});function Fa(ve){return function(R){return R<=0?0:R>=1?1:ve(R)}}function Ms(ve){return function(R){return 1-ve(1-R)}}function Hs(ve){return function(R){return.5*(R<.5?ve(2*R):2-ve(2-2*R))}}function pu(ve){return ve*ve}function Fs(ve){return ve*ve*ve}function nu(ve){if(ve<=0)return 0;if(ve>=1)return 1;var R=ve*ve,B=R*ve;return 4*(ve<.5?B:3*(ve-R)+B-.75)}function ru(ve){return 1-Math.cos(ve*dn)}function Ns(ve){return Math.pow(2,10*(ve-1))}function zs(ve){return 1-Math.sqrt(1-ve*ve)}function no(ve){return ve<1/2.75?7.5625*ve*ve:ve<2/2.75?7.5625*(ve-=1.5/2.75)*ve+.75:ve<2.5/2.75?7.5625*(ve-=2.25/2.75)*ve+.9375:7.5625*(ve-=2.625/2.75)*ve+.984375}function ol(ve,R){return R-=ve,function(B){return Math.round(ve+R*B)}}function $s(ve){var R,B,q,K=[ve.a,ve.b],de=[ve.c,ve.d],be=so(K),Me=Wi(K,de),Ce=so(((R=de)[0]+=(q=-Me)*(B=K)[0],R[1]+=q*B[1],R))||0;K[0]*de[1]<de[0]*K[1]&&(K[0]*=-1,K[1]*=-1,be*=-1,Me*=-1),this.rotate=(be?Math.atan2(K[1],K[0]):Math.atan2(-de[0],de[1]))*ln,this.translate=[ve.e,ve.f],this.scale=[be,Ce],this.skew=Ce?Math.atan2(Me,Ce)*ln:0}function Wi(ve,R){return ve[0]*R[0]+ve[1]*R[1]}function so(ve){var R=Math.sqrt(Wi(ve,ve));return R&&(ve[0]/=R,ve[1]/=R),R}y.ease=function(ve){var R=ve.indexOf("-"),B=R>=0?ve.slice(0,R):ve,q=R>=0?ve.slice(R+1):"in";return B=jl.get(B)||qo,Fa((q=Yl.get(q)||P)(B.apply(null,b.call(arguments,1))))},y.interpolateHcl=function(ve,R){ve=y.hcl(ve),R=y.hcl(R);var B=ve.h,q=ve.c,K=ve.l,de=R.h-B,be=R.c-q,Me=R.l-K;return isNaN(be)&&(be=0,q=isNaN(q)?R.c:q),isNaN(de)?(de=0,B=isNaN(B)?R.h:B):de>180?de-=360:de<-180&&(de+=360),function(Ce){return vt(B+de*Ce,q+be*Ce,K+Me*Ce)+""}},y.interpolateHsl=function(ve,R){ve=y.hsl(ve),R=y.hsl(R);var B=ve.h,q=ve.s,K=ve.l,de=R.h-B,be=R.s-q,Me=R.l-K;return isNaN(be)&&(be=0,q=isNaN(q)?R.s:q),isNaN(de)?(de=0,B=isNaN(B)?R.h:B):de>180?de-=360:de<-180&&(de+=360),function(Ce){return wt(B+de*Ce,q+be*Ce,K+Me*Ce)+""}},y.interpolateLab=function(ve,R){ve=y.lab(ve),R=y.lab(R);var B=ve.l,q=ve.a,K=ve.b,de=R.l-B,be=R.a-q,Me=R.b-K;return function(Ce){return Pt(B+de*Ce,q+be*Ce,K+Me*Ce)+""}},y.interpolateRound=ol,y.transform=function(ve){var R=_.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(B){if(null!=B){R.setAttribute("transform",B);var q=R.transform.baseVal.consolidate()}return new $s(q?q.matrix:Ho)})(ve)},$s.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ho={a:1,b:0,c:0,d:1,e:0,f:0};function Po(ve){return ve.length?ve.pop()+",":""}function os(ve,R){var K,de,be,B=[],q=[];return ve=y.transform(ve),R=y.transform(R),function(K,de,be,Me){if(K[0]!==de[0]||K[1]!==de[1]){var Ce=be.push("translate(",null,",",null,")");Me.push({i:Ce-4,x:Uo(K[0],de[0])},{i:Ce-2,x:Uo(K[1],de[1])})}else(de[0]||de[1])&&be.push("translate("+de+")")}(ve.translate,R.translate,B,q),be=B,(K=ve.rotate)!==(de=R.rotate)?(K-de>180?de+=360:de-K>180&&(K+=360),q.push({i:be.push(Po(be)+"rotate(",null,")")-2,x:Uo(K,de)})):de&&be.push(Po(be)+"rotate("+de+")"),function(K,de,be,Me){K!==de?Me.push({i:be.push(Po(be)+"skewX(",null,")")-2,x:Uo(K,de)}):de&&be.push(Po(be)+"skewX("+de+")")}(ve.skew,R.skew,B,q),function(K,de,be,Me){if(K[0]!==de[0]||K[1]!==de[1]){var Ce=be.push(Po(be)+"scale(",null,",",null,")");Me.push({i:Ce-4,x:Uo(K[0],de[0])},{i:Ce-2,x:Uo(K[1],de[1])})}else 1===de[0]&&1===de[1]||be.push(Po(be)+"scale("+de+")")}(ve.scale,R.scale,B,q),ve=R=null,function(K){for(var de,be=-1,Me=q.length;++be<Me;)B[(de=q[be]).i]=de.x(K);return B.join("")}}function ns(ve,R){return R=(R-=ve=+ve)||1/R,function(B){return(B-ve)/R}}function ps(ve,R){return R=(R-=ve=+ve)||1/R,function(B){return Math.max(0,Math.min(1,(B-ve)/R))}}function La(ve){for(var R=ve.source,B=ve.target,q=function(be,Me){if(be===Me)return be;for(var Ce=Xe(be),Ne=Xe(Me),$e=Ce.pop(),at=Ne.pop(),dt=null;$e===at;)dt=$e,$e=Ce.pop(),at=Ne.pop();return dt}(R,B),K=[R];R!==q;)K.push(R=R.parent);for(var de=K.length;B!==q;)K.splice(de,0,B),B=B.parent;return K}function Xe(ve){for(var R=[],B=ve.parent;null!=B;)R.push(ve),ve=B,B=B.parent;return R.push(ve),R}function Qe(ve){ve.fixed|=2}function ct(ve){ve.fixed&=-7}function mt(ve){ve.fixed|=4,ve.px=ve.x,ve.py=ve.y}function St(ve){ve.fixed&=-5}y.interpolateTransform=os,y.layout={},y.layout.bundle=function(){return function(ve){for(var R=[],B=-1,q=ve.length;++B<q;)R.push(La(ve[B]));return R}},y.layout.chord=function(){var ve,R,B,q,K,de,be,Me={},Ce=0;function Ne(){var at,dt,Ot,zt,Rt,Nt={},Lt=[],Yt=y.range(q),Gt=[];for(ve=[],R=[],at=0,zt=-1;++zt<q;){for(dt=0,Rt=-1;++Rt<q;)dt+=B[zt][Rt];Lt.push(dt),Gt.push(y.range(q)),at+=dt}for(K&&Yt.sort(function(Pr,Ar){return K(Lt[Pr],Lt[Ar])}),de&&Gt.forEach(function(Pr,Ar){Pr.sort(function(fi,wi){return de(B[Ar][fi],B[Ar][wi])})}),at=(un-Ce*q)/at,dt=0,zt=-1;++zt<q;){for(Ot=dt,Rt=-1;++Rt<q;){var Xt=Yt[zt],bn=Gt[Xt][Rt],En=B[Xt][bn],Un=dt,Nn=dt+=En*at;Nt[Xt+"-"+bn]={index:Xt,subindex:bn,startAngle:Un,endAngle:Nn,value:En}}R[Xt]={index:Xt,startAngle:Ot,endAngle:dt,value:Lt[Xt]},dt+=Ce}for(zt=-1;++zt<q;)for(Rt=zt-1;++Rt<q;){var yr=Nt[zt+"-"+Rt],vr=Nt[Rt+"-"+zt];(yr.value||vr.value)&&ve.push(yr.value<vr.value?{source:vr,target:yr}:{source:yr,target:vr})}be&&$e()}function $e(){ve.sort(function(at,dt){return be((at.source.value+at.target.value)/2,(dt.source.value+dt.target.value)/2)})}return Me.matrix=function(at){return arguments.length?(q=(B=at)&&B.length,ve=R=null,Me):B},Me.padding=function(at){return arguments.length?(Ce=at,ve=R=null,Me):Ce},Me.sortGroups=function(at){return arguments.length?(K=at,ve=R=null,Me):K},Me.sortSubgroups=function(at){return arguments.length?(de=at,ve=null,Me):de},Me.sortChords=function(at){return arguments.length?(be=at,ve&&$e(),Me):be},Me.chords=function(){return ve||Ne(),ve},Me.groups=function(){return R||Ne(),R},Me},y.layout.force=function(){var ve,R,B,q,K,de,be={},Me=y.dispatch("start","tick","end"),Ce=[1,1],Ne=.9,$e=Mt,at=xt,dt=-30,Ot=Jt,zt=.1,Rt=.64,Nt=[],Lt=[];function Yt(Xt){return function(bn,En,Un,Nn){if(bn.point!==Xt){var yr=bn.cx-Xt.x,vr=bn.cy-Xt.y,Pr=Nn-En,Ar=yr*yr+vr*vr;if(Pr*Pr/Rt<Ar){if(Ar<Ot){var fi=bn.charge/Ar;Xt.px-=yr*fi,Xt.py-=vr*fi}return!0}bn.point&&Ar&&Ar<Ot&&(Xt.px-=yr*(fi=bn.pointCharge/Ar),Xt.py-=vr*fi)}return!bn.charge}}function Gt(Xt){Xt.px=y.event.x,Xt.py=y.event.y,be.resume()}return be.tick=function(){if((B*=.99)<.005)return ve=null,Me.end({type:"end",alpha:B=0}),!0;var Xt,bn,En,Un,Nn,yr,vr,Pr,Ar,fi=Nt.length,wi=Lt.length;for(bn=0;bn<wi;++bn)Un=(En=Lt[bn]).source,(yr=(Pr=(Nn=En.target).x-Un.x)*Pr+(Ar=Nn.y-Un.y)*Ar)&&(Pr*=yr=B*K[bn]*((yr=Math.sqrt(yr))-q[bn])/yr,Ar*=yr,Nn.x-=Pr*(vr=Un.weight+Nn.weight?Un.weight/(Un.weight+Nn.weight):.5),Nn.y-=Ar*vr,Un.x+=Pr*(vr=1-vr),Un.y+=Ar*vr);if((vr=B*zt)&&(Pr=Ce[0]/2,Ar=Ce[1]/2,bn=-1,vr))for(;++bn<fi;)(En=Nt[bn]).x+=(Pr-En.x)*vr,En.y+=(Ar-En.y)*vr;if(dt)for(function Fi(ur,Hr,bi){var mi=0,Si=0;if(ur.charge=0,!ur.leaf)for(var Ri,na=ur.nodes,Ai=na.length,Qi=-1;++Qi<Ai;)null!=(Ri=na[Qi])&&(Fi(Ri,Hr,bi),ur.charge+=Ri.charge,mi+=Ri.charge*Ri.cx,Si+=Ri.charge*Ri.cy);if(ur.point){ur.leaf||(ur.point.x+=Math.random()-.5,ur.point.y+=Math.random()-.5);var Gi=Hr*bi[ur.point.index];ur.charge+=ur.pointCharge=Gi,mi+=Gi*ur.point.x,Si+=Gi*ur.point.y}ur.cx=mi/ur.charge,ur.cy=Si/ur.charge}(Xt=y.geom.quadtree(Nt),B,de),bn=-1;++bn<fi;)(En=Nt[bn]).fixed||Xt.visit(Yt(En));for(bn=-1;++bn<fi;)(En=Nt[bn]).fixed?(En.x=En.px,En.y=En.py):(En.x-=(En.px-(En.px=En.x))*Ne,En.y-=(En.py-(En.py=En.y))*Ne);Me.tick({type:"tick",alpha:B})},be.nodes=function(Xt){return arguments.length?(Nt=Xt,be):Nt},be.links=function(Xt){return arguments.length?(Lt=Xt,be):Lt},be.size=function(Xt){return arguments.length?(Ce=Xt,be):Ce},be.linkDistance=function(Xt){return arguments.length?($e="function"==typeof Xt?Xt:+Xt,be):$e},be.distance=be.linkDistance,be.linkStrength=function(Xt){return arguments.length?(at="function"==typeof Xt?Xt:+Xt,be):at},be.friction=function(Xt){return arguments.length?(Ne=+Xt,be):Ne},be.charge=function(Xt){return arguments.length?(dt="function"==typeof Xt?Xt:+Xt,be):dt},be.chargeDistance=function(Xt){return arguments.length?(Ot=Xt*Xt,be):Math.sqrt(Ot)},be.gravity=function(Xt){return arguments.length?(zt=+Xt,be):zt},be.theta=function(Xt){return arguments.length?(Rt=Xt*Xt,be):Math.sqrt(Rt)},be.alpha=function(Xt){return arguments.length?(Xt=+Xt,B?Xt>0?B=Xt:(ve.c=null,ve.t=NaN,ve=null,Me.end({type:"end",alpha:B=0})):Xt>0&&(Me.start({type:"start",alpha:B=Xt}),ve=Br(be.tick)),be):B},be.start=function(){var Xt,bn,En,Un=Nt.length,Nn=Lt.length,yr=Ce[0],vr=Ce[1];for(Xt=0;Xt<Un;++Xt)(En=Nt[Xt]).index=Xt,En.weight=0;for(Xt=0;Xt<Nn;++Xt)"number"==typeof(En=Lt[Xt]).source&&(En.source=Nt[En.source]),"number"==typeof En.target&&(En.target=Nt[En.target]),++En.source.weight,++En.target.weight;for(Xt=0;Xt<Un;++Xt)En=Nt[Xt],isNaN(En.x)&&(En.x=Pr("x",yr)),isNaN(En.y)&&(En.y=Pr("y",vr)),isNaN(En.px)&&(En.px=En.x),isNaN(En.py)&&(En.py=En.y);if(q=[],"function"==typeof $e)for(Xt=0;Xt<Nn;++Xt)q[Xt]=+$e.call(this,Lt[Xt],Xt);else for(Xt=0;Xt<Nn;++Xt)q[Xt]=$e;if(K=[],"function"==typeof at)for(Xt=0;Xt<Nn;++Xt)K[Xt]=+at.call(this,Lt[Xt],Xt);else for(Xt=0;Xt<Nn;++Xt)K[Xt]=at;if(de=[],"function"==typeof dt)for(Xt=0;Xt<Un;++Xt)de[Xt]=+dt.call(this,Nt[Xt],Xt);else for(Xt=0;Xt<Un;++Xt)de[Xt]=dt;function Pr(Ar,fi){if(!bn){for(bn=new Array(Un),Hr=0;Hr<Un;++Hr)bn[Hr]=[];for(Hr=0;Hr<Nn;++Hr){var wi=Lt[Hr];bn[wi.source.index].push(wi.target),bn[wi.target.index].push(wi.source)}}for(var Fi,ur=bn[Xt],Hr=-1,bi=ur.length;++Hr<bi;)if(!isNaN(Fi=ur[Hr][Ar]))return Fi;return Math.random()*fi}return be.resume()},be.resume=function(){return be.alpha(.1)},be.stop=function(){return be.alpha(0)},be.drag=function(){if(R||(R=y.behavior.drag().origin(P).on("dragstart.force",Qe).on("drag.force",Gt).on("dragend.force",ct)),!arguments.length)return R;this.on("mouseover.force",mt).on("mouseout.force",St).call(R)},y.rebind(be,Me,"on")};var Mt=20,xt=1,Jt=1/0;function on(ve,R){return y.rebind(ve,R,"sort","children","value"),ve.nodes=ve,ve.links=Zn,ve}function nn(ve,R){for(var B=[ve];null!=(ve=B.pop());)if(R(ve),(K=ve.children)&&(q=K.length))for(var q,K;--q>=0;)B.push(K[q])}function yn(ve,R){for(var B=[ve],q=[];null!=(ve=B.pop());)if(q.push(ve),(de=ve.children)&&(K=de.length))for(var K,de,be=-1;++be<K;)B.push(de[be]);for(;null!=(ve=q.pop());)R(ve)}function An(ve){return ve.children}function Rn(ve){return ve.value}function Ln(ve,R){return R.value-ve.value}function Zn(ve){return y.merge(ve.map(function(R){return(R.children||[]).map(function(B){return{source:R,target:B}})}))}y.layout.hierarchy=function(){var ve=Ln,R=An,B=Rn;function q(K){var de,be=[K],Me=[];for(K.depth=0;null!=(de=be.pop());)if(Me.push(de),(Ne=R.call(q,de,de.depth))&&(Ce=Ne.length)){for(var Ce,Ne,$e;--Ce>=0;)be.push($e=Ne[Ce]),$e.parent=de,$e.depth=de.depth+1;B&&(de.value=0),de.children=Ne}else B&&(de.value=+B.call(q,de,de.depth)||0),delete de.children;return yn(K,function(at){var dt,Ot;ve&&(dt=at.children)&&dt.sort(ve),B&&(Ot=at.parent)&&(Ot.value+=at.value)}),Me}return q.sort=function(K){return arguments.length?(ve=K,q):ve},q.children=function(K){return arguments.length?(R=K,q):R},q.value=function(K){return arguments.length?(B=K,q):B},q.revalue=function(K){return B&&(nn(K,function(de){de.children&&(de.value=0)}),yn(K,function(de){var be;de.children||(de.value=+B.call(q,de,de.depth)||0),(be=de.parent)&&(be.value+=de.value)})),K},q},y.layout.partition=function(){var ve=y.layout.hierarchy(),R=[1,1];function B(q,K){var de=ve.call(this,q,K);return function be(Me,Ce,Ne,$e){var at=Me.children;if(Me.x=Ce,Me.y=Me.depth*$e,Me.dx=Ne,Me.dy=$e,at&&(dt=at.length)){var dt,Ot,zt,Rt=-1;for(Ne=Me.value?Ne/Me.value:0;++Rt<dt;)be(Ot=at[Rt],Ce,zt=Ot.value*Ne,$e),Ce+=zt}}(de[0],0,R[0],R[1]/function be(Me){var Ce=Me.children,Ne=0;if(Ce&&($e=Ce.length))for(var $e,at=-1;++at<$e;)Ne=Math.max(Ne,be(Ce[at]));return 1+Ne}(de[0])),de}return B.size=function(q){return arguments.length?(R=q,B):R},on(B,ve)},y.layout.pie=function(){var ve=Number,R=_r,B=0,q=un,K=0;function de(be){var Me,Ce=be.length,Ne=be.map(function(Yt,Gt){return+ve.call(de,Yt,Gt)}),$e=+("function"==typeof B?B.apply(this,arguments):B),at=("function"==typeof q?q.apply(this,arguments):q)-$e,dt=Math.min(Math.abs(at)/Ce,+("function"==typeof K?K.apply(this,arguments):K)),Ot=dt*(at<0?-1:1),zt=y.sum(Ne),Rt=zt?(at-Ce*Ot)/zt:0,Nt=y.range(Ce),Lt=[];return null!=R&&Nt.sort(R===_r?function(Yt,Gt){return Ne[Gt]-Ne[Yt]}:function(Yt,Gt){return R(be[Yt],be[Gt])}),Nt.forEach(function(Yt){Lt[Yt]={data:be[Yt],value:Me=Ne[Yt],startAngle:$e,endAngle:$e+=Me*Rt+Ot,padAngle:dt}}),Lt}return de.value=function(be){return arguments.length?(ve=be,de):ve},de.sort=function(be){return arguments.length?(R=be,de):R},de.startAngle=function(be){return arguments.length?(B=be,de):B},de.endAngle=function(be){return arguments.length?(q=be,de):q},de.padAngle=function(be){return arguments.length?(K=be,de):K},de};var _r={};function cr(ve){return ve.x}function Jr(ve){return ve.y}function ti(ve,R,B){ve.y0=R,ve.y=B}y.layout.stack=function(){var ve=P,R=Ci,B=Ji,q=ti,K=cr,de=Jr;function be(Me,Ce){if(!(dt=Me.length))return Me;var Ne=Me.map(function(Yt,Gt){return ve.call(be,Yt,Gt)}),$e=Ne.map(function(Yt){return Yt.map(function(Gt,Xt){return[K.call(be,Gt,Xt),de.call(be,Gt,Xt)]})}),at=R.call(be,$e,Ce);Ne=y.permute(Ne,at),$e=y.permute($e,at);var dt,Ot,zt,Rt,Nt=B.call(be,$e,Ce),Lt=Ne[0].length;for(zt=0;zt<Lt;++zt)for(q.call(be,Ne[0][zt],Rt=Nt[zt],$e[0][zt][1]),Ot=1;Ot<dt;++Ot)q.call(be,Ne[Ot][zt],Rt+=$e[Ot-1][zt][1],$e[Ot][zt][1]);return Me}return be.values=function(Me){return arguments.length?(ve=Me,be):ve},be.order=function(Me){return arguments.length?(R="function"==typeof Me?Me:di.get(Me)||Ci,be):R},be.offset=function(Me){return arguments.length?(B="function"==typeof Me?Me:ni.get(Me)||Ji,be):B},be.x=function(Me){return arguments.length?(K=Me,be):K},be.y=function(Me){return arguments.length?(de=Me,be):de},be.out=function(Me){return arguments.length?(q=Me,be):q},be};var di=y.map({"inside-out":function(ve){var R,B,q=ve.length,K=ve.map(va),de=ve.map(sa),be=y.range(q).sort(function(at,dt){return K[at]-K[dt]}),Me=0,Ce=0,Ne=[],$e=[];for(R=0;R<q;++R)B=be[R],Me<Ce?(Me+=de[B],Ne.push(B)):(Ce+=de[B],$e.push(B));return $e.reverse().concat(Ne)},reverse:function(ve){return y.range(ve.length).reverse()},default:Ci}),ni=y.map({silhouette:function(ve){var R,B,q,K=ve.length,de=ve[0].length,be=[],Me=0,Ce=[];for(B=0;B<de;++B){for(R=0,q=0;R<K;R++)q+=ve[R][B][1];q>Me&&(Me=q),be.push(q)}for(B=0;B<de;++B)Ce[B]=(Me-be[B])/2;return Ce},wiggle:function(ve){var R,B,q,K,de,be,Me,Ce,Ne,$e=ve.length,at=ve[0],dt=at.length,Ot=[];for(Ot[0]=Ce=Ne=0,B=1;B<dt;++B){for(R=0,K=0;R<$e;++R)K+=ve[R][B][1];for(R=0,de=0,Me=at[B][0]-at[B-1][0];R<$e;++R){for(q=0,be=(ve[R][B][1]-ve[R][B-1][1])/(2*Me);q<R;++q)be+=(ve[q][B][1]-ve[q][B-1][1])/Me;de+=be*ve[R][B][1]}Ot[B]=Ce-=K?de/K*Me:0,Ce<Ne&&(Ne=Ce)}for(B=0;B<dt;++B)Ot[B]-=Ne;return Ot},expand:function(ve){var R,B,q,K=ve.length,de=ve[0].length,be=1/K,Me=[];for(B=0;B<de;++B){for(R=0,q=0;R<K;R++)q+=ve[R][B][1];if(q)for(R=0;R<K;R++)ve[R][B][1]/=q;else for(R=0;R<K;R++)ve[R][B][1]=be}for(B=0;B<de;++B)Me[B]=0;return Me},zero:Ji});function Ci(ve){return y.range(ve.length)}function Ji(ve){for(var R=-1,B=ve[0].length,q=[];++R<B;)q[R]=0;return q}function va(ve){for(var R,B=1,q=0,K=ve[0][1],de=ve.length;B<de;++B)(R=ve[B][1])>K&&(q=B,K=R);return q}function sa(ve){return ve.reduce(qi,0)}function qi(ve,R){return ve+R[1]}function Oo(ve,R){return Do(ve,Math.ceil(Math.log(R.length)/Math.LN2+1))}function Do(ve,R){for(var B=-1,q=+ve[0],K=(ve[1]-q)/R,de=[];++B<=R;)de[B]=K*B+q;return de}function Da(ve){return[y.min(ve),y.max(ve)]}function Ea(ve,R){return ve.value-R.value}function bo(ve,R){var B=ve._pack_next;ve._pack_next=R,R._pack_prev=ve,R._pack_next=B,B._pack_prev=R}function Ro(ve,R){ve._pack_next=R,R._pack_prev=ve}function Go(ve,R){var B=R.x-ve.x,q=R.y-ve.y,K=ve.r+R.r;return.999*K*K>B*B+q*q}function po(ve){if((R=ve.children)&&(Ce=R.length)){var R,B,q,K,de,be,Me,Ce,Ne=1/0,$e=-1/0,at=1/0,dt=-1/0;if(R.forEach(ss),(B=R[0]).x=-B.r,B.y=0,Gt(B),Ce>1&&((q=R[1]).x=q.r,q.y=0,Gt(q),Ce>2))for(xa(B,q,K=R[2]),Gt(K),bo(B,K),B._pack_prev=K,bo(K,q),q=B._pack_next,de=3;de<Ce;de++){xa(B,q,K=R[de]);var Ot=0,zt=1,Rt=1;for(be=q._pack_next;be!==q;be=be._pack_next,zt++)if(Go(be,K)){Ot=1;break}if(1==Ot)for(Me=B._pack_prev;Me!==be._pack_prev&&!Go(Me,K);Me=Me._pack_prev,Rt++);Ot?(zt<Rt||zt==Rt&&q.r<B.r?Ro(B,q=be):Ro(B=Me,q),de--):(bo(B,K),q=K,Gt(K))}var Nt=(Ne+$e)/2,Lt=(at+dt)/2,Yt=0;for(de=0;de<Ce;de++)(K=R[de]).x-=Nt,K.y-=Lt,Yt=Math.max(Yt,K.r+Math.sqrt(K.x*K.x+K.y*K.y));ve.r=Yt,R.forEach(gs)}function Gt(Xt){Ne=Math.min(Xt.x-Xt.r,Ne),$e=Math.max(Xt.x+Xt.r,$e),at=Math.min(Xt.y-Xt.r,at),dt=Math.max(Xt.y+Xt.r,dt)}}function ss(ve){ve._pack_next=ve._pack_prev=ve}function gs(ve){delete ve._pack_next,delete ve._pack_prev}function xa(ve,R,B){var q=ve.r+B.r,K=R.x-ve.x,de=R.y-ve.y;if(q&&(K||de)){var be=R.r+B.r,Me=K*K+de*de,Ce=.5+((q*=q)-(be*=be))/(2*Me),Ne=Math.sqrt(Math.max(0,2*be*(q+Me)-(q-=Me)*q-be*be))/(2*Me);B.x=ve.x+Ce*K+Ne*de,B.y=ve.y+Ce*de-Ne*K}else B.x=ve.x+q,B.y=ve.y}function At(ve,R){return ve.parent==R.parent?1:2}function Wt(ve){var R=ve.children;return R.length?R[0]:ve.t}function wn(ve){var R,B=ve.children;return(R=B.length)?B[R-1]:ve.t}function tn(ve,R,B){var q=B/(R.i-ve.i);R.c-=q,R.s+=B,ve.c+=q,R.z+=B,R.m+=B}function Tn(ve,R,B){return ve.a.parent===R.parent?ve.a:B}function Wn(ve){return{x:ve.x,y:ve.y,dx:ve.dx,dy:ve.dy}}function nr(ve,R){var B=ve.x+R[3],q=ve.y+R[0],K=ve.dx-R[1]-R[3],de=ve.dy-R[0]-R[2];return K<0&&(B+=K/2,K=0),de<0&&(q+=de/2,de=0),{x:B,y:q,dx:K,dy:de}}function gr(ve){var R=ve[0],B=ve[ve.length-1];return R<B?[R,B]:[B,R]}function Sr(ve){return ve.rangeExtent?ve.rangeExtent():gr(ve.range())}function Mr(ve,R,B,q){var K=B(ve[0],ve[1]),de=q(R[0],R[1]);return function(be){return de(K(be))}}function Rr(ve,R){var B,q=0,K=ve.length-1,de=ve[q],be=ve[K];return be<de&&(B=q,q=K,K=B,B=de,de=be,be=B),ve[q]=R.floor(de),ve[K]=R.ceil(be),ve}function Wr(ve){return ve?{floor:function(R){return Math.floor(R/ve)*ve},ceil:function(R){return Math.ceil(R/ve)*ve}}:Cr}y.layout.histogram=function(){var ve=!0,R=Number,B=Da,q=Oo;function K(de,be){for(var Me,Ce,Ne=[],$e=de.map(R,this),at=B.call(this,$e,be),dt=q.call(this,at,$e,be),Ot=(be=-1,$e.length),zt=dt.length-1,Rt=ve?1:1/Ot;++be<zt;)(Me=Ne[be]=[]).dx=dt[be+1]-(Me.x=dt[be]),Me.y=0;if(zt>0)for(be=-1;++be<Ot;)(Ce=$e[be])>=at[0]&&Ce<=at[1]&&((Me=Ne[y.bisect(dt,Ce,1,zt)-1]).y+=Rt,Me.push(de[be]));return Ne}return K.value=function(de){return arguments.length?(R=de,K):R},K.range=function(de){return arguments.length?(B=Pn(de),K):B},K.bins=function(de){return arguments.length?(q="number"==typeof de?function(be){return Do(be,de)}:Pn(de),K):q},K.frequency=function(de){return arguments.length?(ve=!!de,K):ve},K},y.layout.pack=function(){var ve,R=y.layout.hierarchy().sort(Ea),B=0,q=[1,1];function K(de,be){var Me=R.call(this,de,be),Ce=Me[0],Ne=q[0],$e=q[1],at=null==ve?Math.sqrt:"function"==typeof ve?ve:function(){return ve};if(Ce.x=Ce.y=0,yn(Ce,function(Ot){Ot.r=+at(Ot.value)}),yn(Ce,po),B){var dt=B*(ve?1:Math.max(2*Ce.r/Ne,2*Ce.r/$e))/2;yn(Ce,function(Ot){Ot.r+=dt}),yn(Ce,po),yn(Ce,function(Ot){Ot.r-=dt})}return function Ot(zt,Rt,Nt,Lt){var Yt=zt.children;if(zt.x=Rt+=Lt*zt.x,zt.y=Nt+=Lt*zt.y,zt.r*=Lt,Yt)for(var Gt=-1,Xt=Yt.length;++Gt<Xt;)Ot(Yt[Gt],Rt,Nt,Lt)}(Ce,Ne/2,$e/2,ve?1:1/Math.max(2*Ce.r/Ne,2*Ce.r/$e)),Me}return K.size=function(de){return arguments.length?(q=de,K):q},K.radius=function(de){return arguments.length?(ve=null==de||"function"==typeof de?de:+de,K):ve},K.padding=function(de){return arguments.length?(B=+de,K):B},on(K,R)},y.layout.tree=function(){var ve=y.layout.hierarchy().sort(null).value(null),R=At,B=[1,1],q=null;function K(Ce,Ne){var $e=ve.call(this,Ce,Ne),at=$e[0],dt=function(Gt){for(var Xt,bn={A:null,children:[Gt]},En=[bn];null!=(Xt=En.pop());)for(var Un,Nn=Xt.children,yr=0,vr=Nn.length;yr<vr;++yr)En.push((Nn[yr]=Un={_:Nn[yr],parent:Xt,children:(Un=Nn[yr].children)&&Un.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:yr}).a=Un);return bn.children[0]}(at);if(yn(dt,de),dt.parent.m=-dt.z,nn(dt,be),q)nn(at,Me);else{var Ot=at,zt=at,Rt=at;nn(at,function(Gt){Gt.x<Ot.x&&(Ot=Gt),Gt.x>zt.x&&(zt=Gt),Gt.depth>Rt.depth&&(Rt=Gt)});var Nt=R(Ot,zt)/2-Ot.x,Lt=B[0]/(zt.x+R(zt,Ot)/2+Nt),Yt=B[1]/(Rt.depth||1);nn(at,function(Gt){Gt.x=(Gt.x+Nt)*Lt,Gt.y=Gt.depth*Yt})}return $e}function de(Ce){var Ne=Ce.children,$e=Ce.parent.children,at=Ce.i?$e[Ce.i-1]:null;if(Ne.length){!function(Ot){for(var zt,Rt=0,Nt=0,Lt=Ot.children,Yt=Lt.length;--Yt>=0;)(zt=Lt[Yt]).z+=Rt,zt.m+=Rt,Rt+=zt.s+(Nt+=zt.c)}(Ce);var dt=(Ne[0].z+Ne[Ne.length-1].z)/2;at?(Ce.z=at.z+R(Ce._,at._),Ce.m=Ce.z-dt):Ce.z=dt}else at&&(Ce.z=at.z+R(Ce._,at._));Ce.parent.A=function(Ot,zt,Rt){if(zt){for(var Nt,Lt=Ot,Yt=Ot,Gt=zt,Xt=Lt.parent.children[0],bn=Lt.m,En=Yt.m,Un=Gt.m,Nn=Xt.m;Gt=wn(Gt),Lt=Wt(Lt),Gt&&Lt;)Xt=Wt(Xt),(Yt=wn(Yt)).a=Ot,(Nt=Gt.z+Un-Lt.z-bn+R(Gt._,Lt._))>0&&(tn(Tn(Gt,Ot,Rt),Ot,Nt),bn+=Nt,En+=Nt),Un+=Gt.m,bn+=Lt.m,Nn+=Xt.m,En+=Yt.m;Gt&&!wn(Yt)&&(Yt.t=Gt,Yt.m+=Un-En),Lt&&!Wt(Xt)&&(Xt.t=Lt,Xt.m+=bn-Nn,Rt=Ot)}return Rt}(Ce,at,Ce.parent.A||$e[0])}function be(Ce){Ce._.x=Ce.z+Ce.parent.m,Ce.m+=Ce.parent.m}function Me(Ce){Ce.x*=B[0],Ce.y=Ce.depth*B[1]}return K.separation=function(Ce){return arguments.length?(R=Ce,K):R},K.size=function(Ce){return arguments.length?(q=null==(B=Ce)?Me:null,K):q?null:B},K.nodeSize=function(Ce){return arguments.length?(q=null==(B=Ce)?null:Me,K):q?B:null},on(K,ve)},y.layout.cluster=function(){var ve=y.layout.hierarchy().sort(null).value(null),R=At,B=[1,1],q=!1;function K(de,be){var Me,Ce=ve.call(this,de,be),Ne=Ce[0],$e=0;yn(Ne,function(Rt){var Lt,Nt=Rt.children;Nt&&Nt.length?(Rt.x=(Lt=Nt).reduce(function(Yt,Gt){return Yt+Gt.x},0)/Lt.length,Rt.y=function(Lt){return 1+y.max(Lt,function(Yt){return Yt.y})}(Nt)):(Rt.x=Me?$e+=R(Rt,Me):0,Rt.y=0,Me=Rt)});var at=function Rt(Nt){var Lt=Nt.children;return Lt&&Lt.length?Rt(Lt[0]):Nt}(Ne),dt=function Rt(Nt){var Lt,Yt=Nt.children;return Yt&&(Lt=Yt.length)?Rt(Yt[Lt-1]):Nt}(Ne),Ot=at.x-R(at,dt)/2,zt=dt.x+R(dt,at)/2;return yn(Ne,q?function(Rt){Rt.x=(Rt.x-Ne.x)*B[0],Rt.y=(Ne.y-Rt.y)*B[1]}:function(Rt){Rt.x=(Rt.x-Ot)/(zt-Ot)*B[0],Rt.y=(1-(Ne.y?Rt.y/Ne.y:1))*B[1]}),Ce}return K.separation=function(de){return arguments.length?(R=de,K):R},K.size=function(de){return arguments.length?(q=null==(B=de),K):q?null:B},K.nodeSize=function(de){return arguments.length?(q=null!=(B=de),K):q?B:null},on(K,ve)},y.layout.treemap=function(){var ve,R=y.layout.hierarchy(),B=Math.round,q=[1,1],K=null,de=Wn,be=!1,Me="squarify",Ce=.5*(1+Math.sqrt(5));function Ne(Rt,Nt){for(var Lt,Yt,Gt=-1,Xt=Rt.length;++Gt<Xt;)Yt=(Lt=Rt[Gt]).value*(Nt<0?0:Nt),Lt.area=isNaN(Yt)||Yt<=0?0:Yt}function $e(Rt){var Nt=Rt.children;if(Nt&&Nt.length){var Lt,Yt,Gt,Xt=de(Rt),bn=[],En=Nt.slice(),Un=1/0,Nn="slice"===Me?Xt.dx:"dice"===Me?Xt.dy:"slice-dice"===Me?1&Rt.depth?Xt.dy:Xt.dx:Math.min(Xt.dx,Xt.dy);for(Ne(En,Xt.dx*Xt.dy/Rt.value),bn.area=0;(Gt=En.length)>0;)bn.push(Lt=En[Gt-1]),bn.area+=Lt.area,"squarify"!==Me||(Yt=dt(bn,Nn))<=Un?(En.pop(),Un=Yt):(bn.area-=bn.pop().area,Ot(bn,Nn,Xt,!1),Nn=Math.min(Xt.dx,Xt.dy),bn.length=bn.area=0,Un=1/0);bn.length&&(Ot(bn,Nn,Xt,!0),bn.length=bn.area=0),Nt.forEach($e)}}function at(Rt){var Nt=Rt.children;if(Nt&&Nt.length){var Lt,Yt=de(Rt),Gt=Nt.slice(),Xt=[];for(Ne(Gt,Yt.dx*Yt.dy/Rt.value),Xt.area=0;Lt=Gt.pop();)Xt.push(Lt),Xt.area+=Lt.area,null!=Lt.z&&(Ot(Xt,Lt.z?Yt.dx:Yt.dy,Yt,!Gt.length),Xt.length=Xt.area=0);Nt.forEach(at)}}function dt(Rt,Nt){for(var Lt,Yt=Rt.area,Gt=0,Xt=1/0,bn=-1,En=Rt.length;++bn<En;)(Lt=Rt[bn].area)&&(Lt<Xt&&(Xt=Lt),Lt>Gt&&(Gt=Lt));return Nt*=Nt,(Yt*=Yt)?Math.max(Nt*Gt*Ce/Yt,Yt/(Nt*Xt*Ce)):1/0}function Ot(Rt,Nt,Lt,Yt){var Gt,Xt=-1,bn=Rt.length,En=Lt.x,Un=Lt.y,Nn=Nt?B(Rt.area/Nt):0;if(Nt==Lt.dx){for((Yt||Nn>Lt.dy)&&(Nn=Lt.dy);++Xt<bn;)(Gt=Rt[Xt]).x=En,Gt.y=Un,Gt.dy=Nn,En+=Gt.dx=Math.min(Lt.x+Lt.dx-En,Nn?B(Gt.area/Nn):0);Gt.z=!0,Gt.dx+=Lt.x+Lt.dx-En,Lt.y+=Nn,Lt.dy-=Nn}else{for((Yt||Nn>Lt.dx)&&(Nn=Lt.dx);++Xt<bn;)(Gt=Rt[Xt]).x=En,Gt.y=Un,Gt.dx=Nn,Un+=Gt.dy=Math.min(Lt.y+Lt.dy-Un,Nn?B(Gt.area/Nn):0);Gt.z=!1,Gt.dy+=Lt.y+Lt.dy-Un,Lt.x+=Nn,Lt.dx-=Nn}}function zt(Rt){var Nt=ve||R(Rt),Lt=Nt[0];return Lt.x=Lt.y=0,Lt.value?(Lt.dx=q[0],Lt.dy=q[1]):Lt.dx=Lt.dy=0,ve&&R.revalue(Lt),Ne([Lt],Lt.dx*Lt.dy/Lt.value),(ve?at:$e)(Lt),be&&(ve=Nt),Nt}return zt.size=function(Rt){return arguments.length?(q=Rt,zt):q},zt.padding=function(Rt){if(!arguments.length)return K;function Nt(Gt){var Xt=Rt.call(zt,Gt,Gt.depth);return null==Xt?Wn(Gt):nr(Gt,"number"==typeof Xt?[Xt,Xt,Xt,Xt]:Xt)}function Lt(Gt){return nr(Gt,Rt)}var Yt;return de=null==(K=Rt)?Wn:"function"==(Yt=typeof Rt)?Nt:("number"===Yt&&(Rt=[Rt,Rt,Rt,Rt]),Lt),zt},zt.round=function(Rt){return arguments.length?(B=Rt?Math.round:Number,zt):B!=Number},zt.sticky=function(Rt){return arguments.length?(be=Rt,ve=null,zt):be},zt.ratio=function(Rt){return arguments.length?(Ce=Rt,zt):Ce},zt.mode=function(Rt){return arguments.length?(Me=Rt+"",zt):Me},on(zt,R)},y.random={normal:function(ve,R){var B=arguments.length;return B<2&&(R=1),B<1&&(ve=0),function(){var q,K,de;do{de=(q=2*Math.random()-1)*q+(K=2*Math.random()-1)*K}while(!de||de>1);return ve+R*q*Math.sqrt(-2*Math.log(de)/de)}},logNormal:function(){var ve=y.random.normal.apply(y,arguments);return function(){return Math.exp(ve())}},bates:function(ve){var R=y.random.irwinHall(ve);return function(){return R()/ve}},irwinHall:function(ve){return function(){for(var R=0,B=0;B<ve;B++)R+=Math.random();return R}}},y.scale={};var Cr={floor:P,ceil:P};function Yr(ve,R,B,q){var K=[],de=[],be=0,Me=Math.min(ve.length,R.length)-1;for(ve[Me]<ve[0]&&(ve=ve.slice().reverse(),R=R.slice().reverse());++be<=Me;)K.push(B(ve[be-1],ve[be])),de.push(q(R[be-1],R[be]));return function(Ce){var Ne=y.bisect(ve,Ce,1,Me)-1;return de[Ne](K[Ne](Ce))}}function si(ve,R){return y.rebind(ve,R,"range","rangeRound","interpolate","clamp")}function pi(ve,R){return Rr(ve,Wr(Ei(ve,R)[2])),Rr(ve,Wr(Ei(ve,R)[2])),ve}function Ei(ve,R){null==R&&(R=10);var B=gr(ve),q=B[1]-B[0],K=Math.pow(10,Math.floor(Math.log(q/R)/Math.LN10)),de=R/q*K;return de<=.15?K*=10:de<=.35?K*=5:de<=.75&&(K*=2),B[0]=Math.ceil(B[0]/K)*K,B[1]=Math.floor(B[1]/K)*K+.5*K,B[2]=K,B}function mr(ve,R){return y.range.apply(y,Ei(ve,R))}y.scale.linear=function(){return function ve(R,B,q,K){var de,be;function Me(){var Ne=Math.min(R.length,B.length)>2?Yr:Mr,$e=K?ps:ns;return de=Ne(R,B,$e,q),be=Ne(B,R,$e,wo),Ce}function Ce(Ne){return de(Ne)}return Ce.invert=function(Ne){return be(Ne)},Ce.domain=function(Ne){return arguments.length?(R=Ne.map(Number),Me()):R},Ce.range=function(Ne){return arguments.length?(B=Ne,Me()):B},Ce.rangeRound=function(Ne){return Ce.range(Ne).interpolate(ol)},Ce.clamp=function(Ne){return arguments.length?(K=Ne,Me()):K},Ce.interpolate=function(Ne){return arguments.length?(q=Ne,Me()):q},Ce.ticks=function(Ne){return mr(R,Ne)},Ce.tickFormat=function(Ne,$e){return d3_scale_linearTickFormat(R,Ne,$e)},Ce.nice=function(Ne){return pi(R,Ne),Me()},Ce.copy=function(){return ve(R,B,q,K)},Me()}([0,1],[0,1],wo,!1)},y.scale.log=function(){return function ve(R,B,q,K){function de(Ce){return(q?Math.log(Ce<0?0:Ce):-Math.log(Ce>0?0:-Ce))/Math.log(B)}function be(Ce){return q?Math.pow(B,Ce):-Math.pow(B,-Ce)}function Me(Ce){return R(de(Ce))}return Me.invert=function(Ce){return be(R.invert(Ce))},Me.domain=function(Ce){return arguments.length?(q=Ce[0]>=0,R.domain((K=Ce.map(Number)).map(de)),Me):K},Me.base=function(Ce){return arguments.length?(B=+Ce,R.domain(K.map(de)),Me):B},Me.nice=function(){var Ce=Rr(K.map(de),q?Math:Di);return R.domain(Ce),K=Ce.map(be),Me},Me.ticks=function(){var Ce=gr(K),Ne=[],$e=Ce[0],at=Ce[1],dt=Math.floor(de($e)),Ot=Math.ceil(de(at)),zt=B%1?2:B;if(isFinite(Ot-dt)){if(q){for(;dt<Ot;dt++)for(var Rt=1;Rt<zt;Rt++)Ne.push(be(dt)*Rt);Ne.push(be(dt))}else for(Ne.push(be(dt));dt++<Ot;)for(Rt=zt-1;Rt>0;Rt--)Ne.push(be(dt)*Rt);for(dt=0;Ne[dt]<$e;dt++);for(Ot=Ne.length;Ne[Ot-1]>at;Ot--);Ne=Ne.slice(dt,Ot)}return Ne},Me.copy=function(){return ve(R.copy(),B,q,K)},si(Me,R)}(y.scale.linear().domain([0,1]),10,!0,[1,10])};var Di={floor:function(ve){return-Math.ceil(-ve)},ceil:function(ve){return-Math.floor(-ve)}};function ei(ve){return function(R){return R<0?-Math.pow(-R,ve):Math.pow(R,ve)}}y.scale.pow=function(){return function ve(R,B,q){var K=ei(B),de=ei(1/B);function be(Me){return R(K(Me))}return be.invert=function(Me){return de(R.invert(Me))},be.domain=function(Me){return arguments.length?(R.domain((q=Me.map(Number)).map(K)),be):q},be.ticks=function(Me){return mr(q,Me)},be.tickFormat=function(Me,Ce){return d3_scale_linearTickFormat(q,Me,Ce)},be.nice=function(Me){return be.domain(pi(q,Me))},be.exponent=function(Me){return arguments.length?(K=ei(B=Me),de=ei(1/B),R.domain(q.map(K)),be):B},be.copy=function(){return ve(R.copy(),B,q)},si(be,R)}(y.scale.linear(),1,[0,1])},y.scale.sqrt=function(){return y.scale.pow().exponent(.5)},y.scale.ordinal=function(){return function ve(R,B){var q,K,de;function be(Ce){return K[((q.get(Ce)||("range"===B.t?q.set(Ce,R.push(Ce)):NaN))-1)%K.length]}function Me(Ce,Ne){return y.range(R.length).map(function($e){return Ce+Ne*$e})}return be.domain=function(Ce){if(!arguments.length)return R;R=[],q=new E;for(var Ne,$e=-1,at=Ce.length;++$e<at;)q.has(Ne=Ce[$e])||q.set(Ne,R.push(Ne));return be[B.t].apply(be,B.a)},be.range=function(Ce){return arguments.length?(K=Ce,de=0,B={t:"range",a:arguments},be):K},be.rangePoints=function(Ce,Ne){arguments.length<2&&(Ne=0);var $e=Ce[0],at=Ce[1],dt=R.length<2?($e=($e+at)/2,0):(at-$e)/(R.length-1+Ne);return K=Me($e+dt*Ne/2,dt),de=0,B={t:"rangePoints",a:arguments},be},be.rangeRoundPoints=function(Ce,Ne){arguments.length<2&&(Ne=0);var $e=Ce[0],at=Ce[1],dt=R.length<2?($e=at=Math.round(($e+at)/2),0):(at-$e)/(R.length-1+Ne)|0;return K=Me($e+Math.round(dt*Ne/2+(at-$e-(R.length-1+Ne)*dt)/2),dt),de=0,B={t:"rangeRoundPoints",a:arguments},be},be.rangeBands=function(Ce,Ne,$e){arguments.length<2&&(Ne=0),arguments.length<3&&($e=Ne);var at=Ce[1]<Ce[0],dt=Ce[at-0],zt=(Ce[1-at]-dt)/(R.length-Ne+2*$e);return K=Me(dt+zt*$e,zt),at&&K.reverse(),de=zt*(1-Ne),B={t:"rangeBands",a:arguments},be},be.rangeRoundBands=function(Ce,Ne,$e){arguments.length<2&&(Ne=0),arguments.length<3&&($e=Ne);var at=Ce[1]<Ce[0],dt=Ce[at-0],Ot=Ce[1-at],zt=Math.floor((Ot-dt)/(R.length-Ne+2*$e));return K=Me(dt+Math.round((Ot-dt-(R.length-Ne)*zt)/2),zt),at&&K.reverse(),de=Math.round(zt*(1-Ne)),B={t:"rangeRoundBands",a:arguments},be},be.rangeBand=function(){return de},be.rangeExtent=function(){return gr(B.a[0])},be.copy=function(){return ve(R,B)},be.domain(R)}([],{t:"range",a:[[]]})},y.scale.category10=function(){return y.scale.ordinal().range(ii)},y.scale.category20=function(){return y.scale.ordinal().range(ki)},y.scale.category20b=function(){return y.scale.ordinal().range(Vi)},y.scale.category20c=function(){return y.scale.ordinal().range(ha)};var ii=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(fn),ki=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(fn),Vi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(fn),ha=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(fn);function $r(){return 0}y.scale.quantile=function(){return function ve(R,B){var q;function K(){var be=0,Me=B.length;for(q=[];++be<Me;)q[be-1]=y.quantile(R,be/Me);return de}function de(be){if(!isNaN(be=+be))return B[y.bisect(q,be)]}return de.domain=function(be){return arguments.length?(R=be.map(d).filter(p).sort(s),K()):R},de.range=function(be){return arguments.length?(B=be,K()):B},de.quantiles=function(){return q},de.invertExtent=function(be){return(be=B.indexOf(be))<0?[NaN,NaN]:[be>0?q[be-1]:R[0],be<q.length?q[be]:R[R.length-1]]},de.copy=function(){return ve(R,B)},K()}([],[])},y.scale.quantize=function(){return function ve(R,B,q){var K,de;function be(Ce){return q[Math.max(0,Math.min(de,Math.floor(K*(Ce-R))))]}function Me(){return K=q.length/(B-R),de=q.length-1,be}return be.domain=function(Ce){return arguments.length?(R=+Ce[0],B=+Ce[Ce.length-1],Me()):[R,B]},be.range=function(Ce){return arguments.length?(q=Ce,Me()):q},be.invertExtent=function(Ce){return[Ce=(Ce=q.indexOf(Ce))<0?NaN:Ce/K+R,Ce+1/K]},be.copy=function(){return ve(R,B,q)},Me()}(0,1,[0,1])},y.scale.threshold=function(){return function ve(R,B){function q(K){if(K<=K)return B[y.bisect(R,K)]}return q.domain=function(K){return arguments.length?(R=K,q):R},q.range=function(K){return arguments.length?(B=K,q):B},q.invertExtent=function(K){return K=B.indexOf(K),[R[K-1],R[K]]},q.copy=function(){return ve(R,B)},q}([.5],[0,1])},y.scale.identity=function(){return function ve(R){function B(q){return+q}return B.invert=B,B.domain=B.range=function(q){return arguments.length?(R=q.map(B),B):R},B.ticks=function(q){return mr(R,q)},B.tickFormat=function(q,K){return d3_scale_linearTickFormat(R,q,K)},B.copy=function(){return ve(R)},B}([0,1])},y.svg={},y.svg.arc=function(){var ve=ua,R=Ui,B=$r,q=wa,K=Ta,de=aa,be=Za;function Me(){var Ne=Math.max(0,+ve.apply(this,arguments)),$e=Math.max(0,+R.apply(this,arguments)),at=K.apply(this,arguments)-dn,dt=de.apply(this,arguments)-dn,Ot=Math.abs(dt-at),zt=at>dt?0:1;if($e<Ne&&(Rt=$e,$e=Ne,Ne=Rt),Ot>=pn)return Ce($e,zt)+(Ne?Ce(Ne,1-zt):"")+"Z";var Rt,Nt,Lt,Yt,Gt,Xt,bn,En,Un,Nn,yr,vr,Pr=0,Ar=0,fi=[];if((Yt=(+be.apply(this,arguments)||0)/2)&&(Lt=q===wa?Math.sqrt(Ne*Ne+$e*$e):+q.apply(this,arguments),zt||(Ar*=-1),$e&&(Ar=Ee(Lt/$e*Math.sin(Yt))),Ne&&(Pr=Ee(Lt/Ne*Math.sin(Yt)))),$e){Gt=$e*Math.cos(at+Ar),Xt=$e*Math.sin(at+Ar),bn=$e*Math.cos(dt-Ar),En=$e*Math.sin(dt-Ar);var wi=Math.abs(dt-at-2*Ar)<=rn?0:1;if(Ar&&yi(Gt,Xt,bn,En)===zt^wi){var Fi=(at+dt)/2;Gt=$e*Math.cos(Fi),Xt=$e*Math.sin(Fi),bn=En=null}}else Gt=Xt=0;if(Ne){Un=Ne*Math.cos(dt-Pr),Nn=Ne*Math.sin(dt-Pr),yr=Ne*Math.cos(at+Pr),vr=Ne*Math.sin(at+Pr);var ur=Math.abs(at-dt+2*Pr)<=rn?0:1;if(Pr&&yi(Un,Nn,yr,vr)===1-zt^ur){var Hr=(at+dt)/2;Un=Ne*Math.cos(Hr),Nn=Ne*Math.sin(Hr),yr=vr=null}}else Un=Nn=0;if(Ot>Bt&&(Rt=Math.min(Math.abs($e-Ne)/2,+B.apply(this,arguments)))>.001){Nt=Ne<$e^zt?0:1;var bi=Rt,mi=Rt;if(Ot<rn){var Si=null==yr?[Un,Nn]:null==bn?[Gt,Xt]:Or([Gt,Xt],[yr,vr],[bn,En],[Un,Nn]),Ri=Gt-Si[0],na=Xt-Si[1],Ai=bn-Si[0],Qi=En-Si[1],Gi=1/Math.sin(Math.acos((Ri*Ai+na*Qi)/(Math.sqrt(Ri*Ri+na*na)*Math.sqrt(Ai*Ai+Qi*Qi)))/2),ca=Math.sqrt(Si[0]*Si[0]+Si[1]*Si[1]);mi=Math.min(Rt,(Ne-ca)/(Gi-1)),bi=Math.min(Rt,($e-ca)/(Gi+1))}if(null!=bn){var ea=Oa(null==yr?[Un,Nn]:[yr,vr],[Gt,Xt],$e,bi,zt),ma=Oa([bn,En],[Un,Nn],$e,bi,zt);Rt===bi?fi.push("M",ea[0],"A",bi,",",bi," 0 0,",Nt," ",ea[1],"A",$e,",",$e," 0 ",1-zt^yi(ea[1][0],ea[1][1],ma[1][0],ma[1][1]),",",zt," ",ma[1],"A",bi,",",bi," 0 0,",Nt," ",ma[0]):fi.push("M",ea[0],"A",bi,",",bi," 0 1,",Nt," ",ma[0])}else fi.push("M",Gt,",",Xt);if(null!=yr){var Ra=Oa([Gt,Xt],[yr,vr],Ne,-mi,zt),Mo=Oa([Un,Nn],null==bn?[Gt,Xt]:[bn,En],Ne,-mi,zt);Rt===mi?fi.push("L",Mo[0],"A",mi,",",mi," 0 0,",Nt," ",Mo[1],"A",Ne,",",Ne," 0 ",zt^yi(Mo[1][0],Mo[1][1],Ra[1][0],Ra[1][1]),",",1-zt," ",Ra[1],"A",mi,",",mi," 0 0,",Nt," ",Ra[0]):fi.push("L",Mo[0],"A",mi,",",mi," 0 0,",Nt," ",Ra[0])}else fi.push("L",Un,",",Nn)}else fi.push("M",Gt,",",Xt),null!=bn&&fi.push("A",$e,",",$e," 0 ",wi,",",zt," ",bn,",",En),fi.push("L",Un,",",Nn),null!=yr&&fi.push("A",Ne,",",Ne," 0 ",ur,",",1-zt," ",yr,",",vr);return fi.push("Z"),fi.join("")}function Ce(Ne,$e){return"M0,"+Ne+"A"+Ne+","+Ne+" 0 1,"+$e+" 0,"+-Ne+"A"+Ne+","+Ne+" 0 1,"+$e+" 0,"+Ne}return Me.innerRadius=function(Ne){return arguments.length?(ve=Pn(Ne),Me):ve},Me.outerRadius=function(Ne){return arguments.length?(R=Pn(Ne),Me):R},Me.cornerRadius=function(Ne){return arguments.length?(B=Pn(Ne),Me):B},Me.padRadius=function(Ne){return arguments.length?(q=Ne==wa?wa:Pn(Ne),Me):q},Me.startAngle=function(Ne){return arguments.length?(K=Pn(Ne),Me):K},Me.endAngle=function(Ne){return arguments.length?(de=Pn(Ne),Me):de},Me.padAngle=function(Ne){return arguments.length?(be=Pn(Ne),Me):be},Me.centroid=function(){var Ne=(+ve.apply(this,arguments)+ +R.apply(this,arguments))/2,$e=(+K.apply(this,arguments)+ +de.apply(this,arguments))/2-dn;return[Math.cos($e)*Ne,Math.sin($e)*Ne]},Me};var wa="auto";function ua(ve){return ve.innerRadius}function Ui(ve){return ve.outerRadius}function Ta(ve){return ve.startAngle}function aa(ve){return ve.endAngle}function Za(ve){return ve&&ve.padAngle}function yi(ve,R,B,q){return(ve-B)*R-(R-q)*ve>0?0:1}function Oa(ve,R,B,q,K){var de=ve[0]-R[0],be=ve[1]-R[1],Me=(K?q:-q)/Math.sqrt(de*de+be*be),Ce=Me*be,Ne=-Me*de,$e=ve[0]+Ce,at=ve[1]+Ne,dt=R[0]+Ce,Ot=R[1]+Ne,zt=($e+dt)/2,Rt=(at+Ot)/2,Nt=dt-$e,Lt=Ot-at,Yt=Nt*Nt+Lt*Lt,Gt=B-q,Xt=$e*Ot-dt*at,bn=(Lt<0?-1:1)*Math.sqrt(Math.max(0,Gt*Gt*Yt-Xt*Xt)),En=(Xt*Lt-Nt*bn)/Yt,Un=(-Xt*Nt-Lt*bn)/Yt,Nn=(Xt*Lt+Nt*bn)/Yt,yr=(-Xt*Nt+Lt*bn)/Yt,vr=En-zt,Pr=Un-Rt,Ar=Nn-zt,fi=yr-Rt;return vr*vr+Pr*Pr>Ar*Ar+fi*fi&&(En=Nn,Un=yr),[[En-Ce,Un-Ne],[En*B/Gt,Un*B/Gt]]}function Wo(){return!0}function Ks(ve){var R=Qn,B=Er,q=Wo,K=As,de=K.key,be=.7;function Me(Ce){var Ne,$e=[],at=[],dt=-1,Ot=Ce.length,zt=Pn(R),Rt=Pn(B);function Nt(){$e.push("M",K(ve(at),be))}for(;++dt<Ot;)q.call(this,Ne=Ce[dt],dt)?at.push([+zt.call(this,Ne,dt),+Rt.call(this,Ne,dt)]):at.length&&(Nt(),at=[]);return at.length&&Nt(),$e.length?$e.join(""):null}return Me.x=function(Ce){return arguments.length?(R=Ce,Me):R},Me.y=function(Ce){return arguments.length?(B=Ce,Me):B},Me.defined=function(Ce){return arguments.length?(q=Ce,Me):q},Me.interpolate=function(Ce){return arguments.length?(de="function"==typeof Ce?K=Ce:(K=Js.get(Ce)||As).key,Me):de},Me.tension=function(Ce){return arguments.length?(be=Ce,Me):be},Me}y.svg.line=function(){return Ks(P)};var Js=y.map({linear:As,"linear-closed":Yi,step:function(ve){for(var R=0,B=ve.length,q=ve[0],K=[q[0],",",q[1]];++R<B;)K.push("H",(q[0]+(q=ve[R])[0])/2,"V",q[1]);return B>1&&K.push("H",q[0]),K.join("")},"step-before":To,"step-after":ls,basis:Yo,"basis-open":function(ve){if(ve.length<4)return As(ve);for(var R,B=[],q=-1,K=ve.length,de=[0],be=[0];++q<3;)de.push((R=ve[q])[0]),be.push(R[1]);for(B.push(Ja(ms,de)+","+Ja(ms,be)),--q;++q<K;)R=ve[q],de.shift(),de.push(R[0]),be.shift(),be.push(R[1]),sl(B,de,be);return B.join("")},"basis-closed":function(ve){for(var R,B,q=-1,K=ve.length,de=K+4,be=[],Me=[];++q<4;)be.push((B=ve[q%K])[0]),Me.push(B[1]);for(R=[Ja(ms,be),",",Ja(ms,Me)],--q;++q<de;)B=ve[q%K],be.shift(),be.push(B[0]),Me.shift(),Me.push(B[1]),sl(R,be,Me);return R.join("")},bundle:function(ve,R){var B=ve.length-1;if(B)for(var q,K,de=ve[0][0],be=ve[0][1],Me=ve[B][0]-de,Ce=ve[B][1]-be,Ne=-1;++Ne<=B;)(q=ve[Ne])[0]=R*q[0]+(1-R)*(de+(K=Ne/B)*Me),q[1]=R*q[1]+(1-R)*(be+K*Ce);return Yo(ve)},cardinal:function(ve,R){return ve.length<3?As(ve):ve[0]+Ga(ve,ga(ve,R))},"cardinal-open":function(ve,R){return ve.length<4?As(ve):ve[1]+Ga(ve.slice(1,-1),ga(ve,R))},"cardinal-closed":function(ve,R){return ve.length<3?Yi(ve):ve[0]+Ga((ve.push(ve[0]),ve),ga([ve[ve.length-2]].concat(ve,[ve[1]]),R))},monotone:function(ve){return ve.length<3?As(ve):ve[0]+Ga(ve,function(R){for(var B,q,K,de,be=[],Me=function($e){for(var at=0,dt=$e.length-1,Ot=[],zt=$e[0],Rt=$e[1],Nt=Ot[0]=Zo(zt,Rt);++at<dt;)Ot[at]=(Nt+(Nt=Zo(zt=Rt,Rt=$e[at+1])))/2;return Ot[at]=Nt,Ot}(R),Ce=-1,Ne=R.length-1;++Ce<Ne;)B=Zo(R[Ce],R[Ce+1]),u(B)<Bt?Me[Ce]=Me[Ce+1]=0:(de=(q=Me[Ce]/B)*q+(K=Me[Ce+1]/B)*K)>9&&(de=3*B/Math.sqrt(de),Me[Ce]=de*q,Me[Ce+1]=de*K);for(Ce=-1;++Ce<=Ne;)de=(R[Math.min(Ne,Ce+1)][0]-R[Math.max(0,Ce-1)][0])/(6*(1+Me[Ce]*Me[Ce])),be.push([de||0,Me[Ce]*de||0]);return be}(ve))}});function As(ve){return ve.length>1?ve.join("L"):ve+"Z"}function Yi(ve){return ve.join("L")+"Z"}function To(ve){for(var R=0,B=ve.length,q=ve[0],K=[q[0],",",q[1]];++R<B;)K.push("V",(q=ve[R])[1],"H",q[0]);return K.join("")}function ls(ve){for(var R=0,B=ve.length,q=ve[0],K=[q[0],",",q[1]];++R<B;)K.push("H",(q=ve[R])[0],"V",q[1]);return K.join("")}function Ga(ve,R){if(R.length<1||ve.length!=R.length&&ve.length!=R.length+2)return As(ve);var B=ve.length!=R.length,q="",K=ve[0],de=ve[1],be=R[0],Me=be,Ce=1;if(B&&(q+="Q"+(de[0]-2*be[0]/3)+","+(de[1]-2*be[1]/3)+","+de[0]+","+de[1],K=ve[1],Ce=2),R.length>1){de=ve[Ce],Ce++,q+="C"+(K[0]+be[0])+","+(K[1]+be[1])+","+(de[0]-(Me=R[1])[0])+","+(de[1]-Me[1])+","+de[0]+","+de[1];for(var Ne=2;Ne<R.length;Ne++,Ce++)q+="S"+((de=ve[Ce])[0]-(Me=R[Ne])[0])+","+(de[1]-Me[1])+","+de[0]+","+de[1]}if(B){var $e=ve[Ce];q+="Q"+(de[0]+2*Me[0]/3)+","+(de[1]+2*Me[1]/3)+","+$e[0]+","+$e[1]}return q}function ga(ve,R){for(var B,q=[],K=(1-R)/2,de=ve[0],be=ve[1],Me=1,Ce=ve.length;++Me<Ce;)B=de,de=be,q.push([K*((be=ve[Me])[0]-B[0]),K*(be[1]-B[1])]);return q}function Yo(ve){if(ve.length<3)return As(ve);var R=1,B=ve.length,q=ve[0],K=q[0],de=q[1],be=[K,K,K,(q=ve[1])[0]],Me=[de,de,de,q[1]],Ce=[K,",",de,"L",Ja(ms,be),",",Ja(ms,Me)];for(ve.push(ve[B-1]);++R<=B;)q=ve[R],be.shift(),be.push(q[0]),Me.shift(),Me.push(q[1]),sl(Ce,be,Me);return ve.pop(),Ce.push("L",q),Ce.join("")}function Ja(ve,R){return ve[0]*R[0]+ve[1]*R[1]+ve[2]*R[2]+ve[3]*R[3]}Js.forEach(function(ve,R){R.key=ve,R.closed=/-closed$/.test(ve)});var Na=[0,2/3,1/3,0],Qa=[0,1/3,2/3,0],ms=[0,1/6,2/3,1/6];function sl(ve,R,B){ve.push("C",Ja(Na,R),",",Ja(Na,B),",",Ja(Qa,R),",",Ja(Qa,B),",",Ja(ms,R),",",Ja(ms,B))}function Zo(ve,R){return(R[1]-ve[1])/(R[0]-ve[0])}function Iu(ve){for(var R,B,q,K=-1,de=ve.length;++K<de;)B=(R=ve[K])[0],q=R[1]-dn,R[0]=B*Math.cos(q),R[1]=B*Math.sin(q);return ve}function Fo(ve){var R=Qn,B=Qn,q=0,K=Er,de=Wo,be=As,Me=be.key,Ce=be,Ne="L",$e=.7;function at(dt){var Ot,zt,Rt,Nt=[],Lt=[],Yt=[],Gt=-1,Xt=dt.length,bn=Pn(R),En=Pn(q),Un=R===B?function(){return zt}:Pn(B),Nn=q===K?function(){return Rt}:Pn(K);function yr(){Nt.push("M",be(ve(Yt),$e),Ne,Ce(ve(Lt.reverse()),$e),"Z")}for(;++Gt<Xt;)de.call(this,Ot=dt[Gt],Gt)?(Lt.push([zt=+bn.call(this,Ot,Gt),Rt=+En.call(this,Ot,Gt)]),Yt.push([+Un.call(this,Ot,Gt),+Nn.call(this,Ot,Gt)])):Lt.length&&(yr(),Lt=[],Yt=[]);return Lt.length&&yr(),Nt.length?Nt.join(""):null}return at.x=function(dt){return arguments.length?(R=B=dt,at):B},at.x0=function(dt){return arguments.length?(R=dt,at):R},at.x1=function(dt){return arguments.length?(B=dt,at):B},at.y=function(dt){return arguments.length?(q=K=dt,at):K},at.y0=function(dt){return arguments.length?(q=dt,at):q},at.y1=function(dt){return arguments.length?(K=dt,at):K},at.defined=function(dt){return arguments.length?(de=dt,at):de},at.interpolate=function(dt){return arguments.length?(Me="function"==typeof dt?be=dt:(be=Js.get(dt)||As).key,Ce=be.reverse||be,Ne=be.closed?"M":"L",at):Me},at.tension=function(dt){return arguments.length?($e=dt,at):$e},at}function Ll(ve){return ve.source}function Wa(ve){return ve.target}function Ml(ve){return ve.radius}function Oi(ve){return[ve.x,ve.y]}function $i(ve){return function(){var R=ve.apply(this,arguments),B=R[0],q=R[1]-dn;return[B*Math.cos(q),B*Math.sin(q)]}}function ll(){return 64}function gu(){return"circle"}function ul(ve){var R=Math.sqrt(ve/rn);return"M0,"+R+"A"+R+","+R+" 0 1,1 0,"+-R+"A"+R+","+R+" 0 1,1 0,"+R+"Z"}y.svg.line.radial=function(){var ve=Ks(Iu);return ve.radius=ve.x,delete ve.x,ve.angle=ve.y,delete ve.y,ve},To.reverse=ls,ls.reverse=To,y.svg.area=function(){return Fo(P)},y.svg.area.radial=function(){var ve=Fo(Iu);return ve.radius=ve.x,delete ve.x,ve.innerRadius=ve.x0,delete ve.x0,ve.outerRadius=ve.x1,delete ve.x1,ve.angle=ve.y,delete ve.y,ve.startAngle=ve.y0,delete ve.y0,ve.endAngle=ve.y1,delete ve.y1,ve},y.svg.chord=function(){var ve=Ll,R=Wa,B=Ml,q=Ta,K=aa;function de(Ne,$e){var at,dt,Ot=be(this,ve,Ne,$e),zt=be(this,R,Ne,$e);return"M"+Ot.p0+Me(Ot.r,Ot.p1,Ot.a1-Ot.a0)+((at=Ot).a0==(dt=zt).a0&&at.a1==dt.a1?Ce(0,0,0,Ot.p0):Ce(0,0,0,zt.p0)+Me(zt.r,zt.p1,zt.a1-zt.a0)+Ce(0,0,0,Ot.p0))+"Z"}function be(Ne,$e,at,dt){var Ot=$e.call(Ne,at,dt),zt=B.call(Ne,Ot,dt),Rt=q.call(Ne,Ot,dt)-dn,Nt=K.call(Ne,Ot,dt)-dn;return{r:zt,a0:Rt,a1:Nt,p0:[zt*Math.cos(Rt),zt*Math.sin(Rt)],p1:[zt*Math.cos(Nt),zt*Math.sin(Nt)]}}function Me(Ne,$e,at){return"A"+Ne+","+Ne+" 0 "+ +(at>rn)+",1 "+$e}function Ce(Ne,$e,at,dt){return"Q 0,0 "+dt}return de.radius=function(Ne){return arguments.length?(B=Pn(Ne),de):B},de.source=function(Ne){return arguments.length?(ve=Pn(Ne),de):ve},de.target=function(Ne){return arguments.length?(R=Pn(Ne),de):R},de.startAngle=function(Ne){return arguments.length?(q=Pn(Ne),de):q},de.endAngle=function(Ne){return arguments.length?(K=Pn(Ne),de):K},de},y.svg.diagonal=function(){var ve=Ll,R=Wa,B=Oi;function q(K,de){var be=ve.call(this,K,de),Me=R.call(this,K,de),Ce=(be.y+Me.y)/2,Ne=[be,{x:be.x,y:Ce},{x:Me.x,y:Ce},Me];return"M"+(Ne=Ne.map(B))[0]+"C"+Ne[1]+" "+Ne[2]+" "+Ne[3]}return q.source=function(K){return arguments.length?(ve=Pn(K),q):ve},q.target=function(K){return arguments.length?(R=Pn(K),q):R},q.projection=function(K){return arguments.length?(B=K,q):B},q},y.svg.diagonal.radial=function(){var ve=y.svg.diagonal(),R=Oi,B=ve.projection;return ve.projection=function(q){return arguments.length?B($i(R=q)):R},ve},y.svg.symbol=function(){var ve=gu,R=ll;function B(q,K){return(Zi.get(ve.call(this,q,K))||ul)(R.call(this,q,K))}return B.type=function(q){return arguments.length?(ve=Pn(q),B):ve},B.size=function(q){return arguments.length?(R=Pn(q),B):R},B};var Zi=y.map({circle:ul,cross:function(ve){var R=Math.sqrt(ve/5)/2;return"M"+-3*R+","+-R+"H"+-R+"V"+-3*R+"H"+R+"V"+-R+"H"+3*R+"V"+R+"H"+R+"V"+3*R+"H"+-R+"V"+R+"H"+-3*R+"Z"},diamond:function(ve){var R=Math.sqrt(ve/(2*pc)),B=R*pc;return"M0,"+-R+"L"+B+",0 0,"+R+" "+-B+",0Z"},square:function(ve){var R=Math.sqrt(ve)/2;return"M"+-R+","+-R+"L"+R+","+-R+" "+R+","+R+" "+-R+","+R+"Z"},"triangle-down":function(ve){var R=Math.sqrt(ve/Al),B=R*Al/2;return"M0,"+B+"L"+R+","+-B+" "+-R+","+-B+"Z"},"triangle-up":function(ve){var R=Math.sqrt(ve/Al),B=R*Al/2;return"M0,"+-B+"L"+R+","+B+" "+-R+","+B+"Z"}});y.svg.symbolTypes=Zi.keys();var Al=Math.sqrt(3),pc=Math.tan(30*Mn);re.transition=function(ve){for(var R,B,q=Zl||++Sa,K=iu(ve),de=[],be=Vl||{time:Date.now(),ease:nu,delay:0,duration:250},Me=-1,Ce=this.length;++Me<Ce;){de.push(R=[]);for(var Ne=this[Me],$e=-1,at=Ne.length;++$e<at;)(B=Ne[$e])&&Qs(B,$e,K,q,be),R.push(B)}return Xa(de,K,q)},re.interrupt=function(ve){return this.each(null==ve?mu:Ba(iu(ve)))};var mu=Ba(iu());function Ba(ve){return function(){var R,B,q;(R=this[ve])&&(q=R[B=R.active])&&(q.timer.c=null,q.timer.t=NaN,--R.count?delete R[B]:delete this[ve],R.active+=.5,q.event&&q.event.interrupt.call(this,this.__data__,q.index))}}function Xa(ve,R,B){return H(ve,qr),ve.namespace=R,ve.id=B,ve}var Zl,Vl,qr=[],Sa=0;function vu(ve,R,B,q){var K=ve.id,de=ve.namespace;return We(ve,"function"==typeof B?function(be,Me,Ce){be[de][K].tween.set(R,q(B.call(be,be.__data__,Me,Ce)))}:(B=q(B),function(be){be[de][K].tween.set(R,B)}))}function Io(ve){return null==ve&&(ve=""),function(){this.textContent=ve}}function iu(ve){return null==ve?"__transition__":"__transition_"+ve+"__"}function Qs(ve,R,B,q,K){var de,be,Me,Ce,Ne,$e=ve[B]||(ve[B]={active:0,count:0}),at=$e[q];function dt(zt){var Rt=$e.active,Nt=$e[Rt];for(var Lt in Nt&&(Nt.timer.c=null,Nt.timer.t=NaN,--$e.count,delete $e[Rt],Nt.event&&Nt.event.interrupt.call(ve,ve.__data__,Nt.index)),$e)if(+Lt<q){var Yt=$e[Lt];Yt.timer.c=null,Yt.timer.t=NaN,--$e.count,delete $e[Lt]}be.c=Ot,Br(function(){return be.c&&Ot(zt||1)&&(be.c=null,be.t=NaN),1},0,de),$e.active=q,at.event&&at.event.start.call(ve,ve.__data__,R),Ne=[],at.tween.forEach(function(Gt,Xt){(Xt=Xt.call(ve,ve.__data__,R))&&Ne.push(Xt)}),Ce=at.ease,Me=at.duration}function Ot(zt){for(var Rt=zt/Me,Nt=Ce(Rt),Lt=Ne.length;Lt>0;)Ne[--Lt].call(ve,Nt);if(Rt>=1)return at.event&&at.event.end.call(ve,ve.__data__,R),--$e.count?delete $e[q]:delete ve[B],1}at||(be=Br(function(zt){var Rt=at.delay;if(be.t=Rt+de,Rt<=zt)return dt(zt-Rt);be.c=dt},0,de=K.time),at=$e[q]={tween:new E,time:de,timer:be,delay:K.delay,duration:K.duration,ease:K.ease,index:R},K=null,++$e.count)}qr.call=re.call,qr.empty=re.empty,qr.node=re.node,qr.size=re.size,y.transition=function(ve,R){return ve&&ve.transition?Zl?ve.transition(R):ve:y.selection().transition(ve)},y.transition.prototype=qr,qr.select=function(ve){var R,B,q,K=this.id,de=this.namespace,be=[];ve=ce(ve);for(var Me=-1,Ce=this.length;++Me<Ce;){be.push(R=[]);for(var Ne=this[Me],$e=-1,at=Ne.length;++$e<at;)(q=Ne[$e])&&(B=ve.call(q,q.__data__,$e,Me))?("__data__"in q&&(B.__data__=q.__data__),Qs(B,$e,de,K,q[de][K]),R.push(B)):R.push(null)}return Xa(be,de,K)},qr.selectAll=function(ve){var R,B,q,K,de,be=this.id,Me=this.namespace,Ce=[];ve=fe(ve);for(var Ne=-1,$e=this.length;++Ne<$e;)for(var at=this[Ne],dt=-1,Ot=at.length;++dt<Ot;)if(q=at[dt]){de=q[Me][be],B=ve.call(q,q.__data__,dt,Ne),Ce.push(R=[]);for(var zt=-1,Rt=B.length;++zt<Rt;)(K=B[zt])&&Qs(K,zt,Me,be,de),R.push(K)}return Xa(Ce,Me,be)},qr.filter=function(ve){var R,B,q=[];"function"!=typeof ve&&(ve=Be(ve));for(var K=0,de=this.length;K<de;K++){q.push(R=[]);for(var be,Me=0,Ce=(be=this[K]).length;Me<Ce;Me++)(B=be[Me])&&ve.call(B,B.__data__,Me,K)&&R.push(B)}return Xa(q,this.namespace,this.id)},qr.tween=function(ve,R){var B=this.id,q=this.namespace;return arguments.length<2?this.node()[q][B].tween.get(ve):We(this,null==R?function(K){K[q][B].tween.remove(ve)}:function(K){K[q][B].tween.set(ve,R)})},qr.attr=function(ve,R){if(arguments.length<2){for(R in ve)this.attr(R,ve[R]);return this}var B="transform"==ve?os:wo,q=y.ns.qualify(ve);function K(){this.removeAttribute(q)}function de(){this.removeAttributeNS(q.space,q.local)}function be(Ce){return null==Ce?K:(Ce+="",function(){var Ne,$e=this.getAttribute(q);return $e!==Ce&&(Ne=B($e,Ce),function(at){this.setAttribute(q,Ne(at))})})}function Me(Ce){return null==Ce?de:(Ce+="",function(){var Ne,$e=this.getAttributeNS(q.space,q.local);return $e!==Ce&&(Ne=B($e,Ce),function(at){this.setAttributeNS(q.space,q.local,Ne(at))})})}return vu(this,"attr."+ve,R,q.local?Me:be)},qr.attrTween=function(ve,R){var B=y.ns.qualify(ve);return this.tween("attr."+ve,B.local?function(q,K){var de=R.call(this,q,K,this.getAttributeNS(B.space,B.local));return de&&function(be){this.setAttributeNS(B.space,B.local,de(be))}}:function(q,K){var de=R.call(this,q,K,this.getAttribute(B));return de&&function(be){this.setAttribute(B,de(be))}})},qr.style=function(ve,R,B){var q=arguments.length;if(q<3){if("string"!=typeof ve){for(B in q<2&&(R=""),ve)this.style(B,ve[B],R);return this}B=""}function K(){this.style.removeProperty(ve)}function de(be){return null==be?K:(be+="",function(){var Me,Ce=o(this).getComputedStyle(this,null).getPropertyValue(ve);return Ce!==be&&(Me=wo(Ce,be),function(Ne){this.style.setProperty(ve,Me(Ne),B)})})}return vu(this,"style."+ve,R,de)},qr.styleTween=function(ve,R,B){function q(K,de){var be=R.call(this,K,de,o(this).getComputedStyle(this,null).getPropertyValue(ve));return be&&function(Me){this.style.setProperty(ve,be(Me),B)}}return arguments.length<3&&(B=""),this.tween("style."+ve,q)},qr.text=function(ve){return vu(this,"text",ve,Io)},qr.remove=function(){var ve=this.namespace;return this.each("end.transition",function(){var R;this[ve].count<2&&(R=this.parentNode)&&R.removeChild(this)})},qr.ease=function(ve){var R=this.id,B=this.namespace;return arguments.length<1?this.node()[B][R].ease:("function"!=typeof ve&&(ve=y.ease.apply(y,arguments)),We(this,function(q){q[B][R].ease=ve}))},qr.delay=function(ve){var R=this.id,B=this.namespace;return arguments.length<1?this.node()[B][R].delay:We(this,"function"==typeof ve?function(q,K,de){q[B][R].delay=+ve.call(q,q.__data__,K,de)}:(ve=+ve,function(q){q[B][R].delay=ve}))},qr.duration=function(ve){var R=this.id,B=this.namespace;return arguments.length<1?this.node()[B][R].duration:We(this,"function"==typeof ve?function(q,K,de){q[B][R].duration=Math.max(1,ve.call(q,q.__data__,K,de))}:(ve=Math.max(1,ve),function(q){q[B][R].duration=ve}))},qr.each=function(ve,R){var B=this.id,q=this.namespace;if(arguments.length<2){var K=Vl,de=Zl;try{Zl=B,We(this,function(be,Me,Ce){Vl=be[q][B],ve.call(be,be.__data__,Me,Ce)})}finally{Vl=K,Zl=de}}else We(this,function(be){var Me=be[q][B];(Me.event||(Me.event=y.dispatch("start","end","interrupt"))).on(ve,R)});return this},qr.transition=function(){for(var ve,R,B,q=this.id,K=++Sa,de=this.namespace,be=[],Me=0,Ce=this.length;Me<Ce;Me++){be.push(ve=[]);for(var Ne,$e=0,at=(Ne=this[Me]).length;$e<at;$e++)(R=Ne[$e])&&Qs(R,$e,de,K,{time:(B=R[de][q]).time,ease:B.ease,delay:B.delay+B.duration,duration:B.duration}),ve.push(R)}return Xa(be,de,K)},y.svg.axis=function(){var ve,R=y.scale.linear(),B=cl,q=6,K=6,de=3,be=[10],Me=null;function Ce(Ne){Ne.each(function(){var $e,at=y.select(this),dt=this.__chart__||R,Ot=this.__chart__=R.copy(),zt=null==Me?Ot.ticks?Ot.ticks.apply(Ot,be):Ot.domain():Me,Rt=null==ve?Ot.tickFormat?Ot.tickFormat.apply(Ot,be):P:ve,Nt=at.selectAll(".tick").data(zt,Ot),Lt=Nt.enter().insert("g",".domain").attr("class","tick").style("opacity",Bt),Yt=y.transition(Nt.exit()).style("opacity",Bt).remove(),Gt=y.transition(Nt.order()).style("opacity",1),Xt=Math.max(q,0)+de,bn=Sr(Ot),En=at.selectAll(".domain").data([0]),Un=(En.enter().append("path").attr("class","domain"),y.transition(En));Lt.append("line"),Lt.append("text");var Nn,yr,vr,Pr,Ar=Lt.select("line"),fi=Gt.select("line"),wi=Nt.select("text").text(Rt),Fi=Lt.select("text"),ur=Gt.select("text"),Hr="top"===B||"left"===B?-1:1;if("bottom"===B||"top"===B?($e=Pl,Nn="x",vr="y",yr="x2",Pr="y2",wi.attr("dy",Hr<0?"0em":".71em").style("text-anchor","middle"),Un.attr("d","M"+bn[0]+","+Hr*K+"V0H"+bn[1]+"V"+Hr*K)):($e=Nc,Nn="y",vr="x",yr="y2",Pr="x2",wi.attr("dy",".32em").style("text-anchor",Hr<0?"end":"start"),Un.attr("d","M"+Hr*K+","+bn[0]+"H0V"+bn[1]+"H"+Hr*K)),Ar.attr(Pr,Hr*q),Fi.attr(vr,Hr*Xt),fi.attr(yr,0).attr(Pr,Hr*q),ur.attr(Nn,0).attr(vr,Hr*Xt),Ot.rangeBand){var bi=Ot,mi=bi.rangeBand()/2;dt=Ot=function(Si){return bi(Si)+mi}}else dt.rangeBand?dt=Ot:Yt.call($e,Ot,dt);Lt.call($e,dt,Ot),Gt.call($e,Ot,Ot)})}return Ce.scale=function(Ne){return arguments.length?(R=Ne,Ce):R},Ce.orient=function(Ne){return arguments.length?(B=Ne in Zu?Ne+"":cl,Ce):B},Ce.ticks=function(){return arguments.length?(be=T(arguments),Ce):be},Ce.tickValues=function(Ne){return arguments.length?(Me=Ne,Ce):Me},Ce.tickFormat=function(Ne){return arguments.length?(ve=Ne,Ce):ve},Ce.tickSize=function(Ne){var $e=arguments.length;return $e?(q=+Ne,K=+arguments[$e-1],Ce):q},Ce.innerTickSize=function(Ne){return arguments.length?(q=+Ne,Ce):q},Ce.outerTickSize=function(Ne){return arguments.length?(K=+Ne,Ce):K},Ce.tickPadding=function(Ne){return arguments.length?(de=+Ne,Ce):de},Ce.tickSubdivide=function(){return arguments.length&&Ce},Ce};var cl="bottom",Zu={top:1,right:1,bottom:1,left:1};function Pl(ve,R,B){ve.attr("transform",function(q){var K=R(q);return"translate("+(isFinite(K)?K:B(q))+",0)"})}function Nc(ve,R,B){ve.attr("transform",function(q){var K=R(q);return"translate(0,"+(isFinite(K)?K:B(q))+")"})}y.svg.brush=function(){var ve,R,B=se($e,"brushstart","brush","brushend"),q=null,K=null,de=[0,0],be=[0,0],Me=!0,Ce=!0,Ne=Xo[0];function $e(Rt){Rt.each(function(){var Nt=y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",zt).on("touchstart.brush",zt),Lt=Nt.selectAll(".background").data([0]);Lt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Nt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Yt=Nt.selectAll(".resize").data(Ne,P);Yt.exit().remove(),Yt.enter().append("g").attr("class",function(En){return"resize "+En}).style("cursor",function(En){return yu[En]}).append("rect").attr("x",function(En){return/[ew]$/.test(En)?-3:null}).attr("y",function(En){return/^[ns]/.test(En)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Yt.style("display",$e.empty()?"none":null);var Gt,Xt=y.transition(Nt),bn=y.transition(Lt);q&&(Gt=Sr(q),bn.attr("x",Gt[0]).attr("width",Gt[1]-Gt[0]),dt(Xt)),K&&(Gt=Sr(K),bn.attr("y",Gt[0]).attr("height",Gt[1]-Gt[0]),Ot(Xt)),at(Xt)})}function at(Rt){Rt.selectAll(".resize").attr("transform",function(Nt){return"translate("+de[+/e$/.test(Nt)]+","+be[+/^s/.test(Nt)]+")"})}function dt(Rt){Rt.select(".extent").attr("x",de[0]),Rt.selectAll(".extent,.n>rect,.s>rect").attr("width",de[1]-de[0])}function Ot(Rt){Rt.select(".extent").attr("y",be[0]),Rt.selectAll(".extent,.e>rect,.w>rect").attr("height",be[1]-be[0])}function zt(){var Rt,Nt,Lt=this,Yt=y.select(y.event.target),Gt=B.of(Lt,arguments),Xt=y.select(Lt),bn=Yt.datum(),En=!/^(n|s)$/.test(bn)&&q,Un=!/^(e|w)$/.test(bn)&&K,Nn=Yt.classed("extent"),yr=Vt(Lt),vr=y.mouse(Lt),Pr=y.select(o(Lt)).on("keydown.brush",wi).on("keyup.brush",Fi);if(y.event.changedTouches?Pr.on("touchmove.brush",ur).on("touchend.brush",bi):Pr.on("mousemove.brush",ur).on("mouseup.brush",bi),Xt.interrupt().selectAll("*").interrupt(),Nn)vr[0]=de[0]-vr[0],vr[1]=be[0]-vr[1];else if(bn){var Ar=+/w$/.test(bn),fi=+/^n/.test(bn);Nt=[de[1-Ar]-vr[0],be[1-fi]-vr[1]],vr[0]=de[Ar],vr[1]=be[fi]}else y.event.altKey&&(Rt=vr.slice());function wi(){32==y.event.keyCode&&(Nn||(Rt=null,vr[0]-=de[1],vr[1]-=be[1],Nn=2),J())}function Fi(){32==y.event.keyCode&&2==Nn&&(vr[0]+=de[1],vr[1]+=be[1],Nn=0,J())}function ur(){var mi=y.mouse(Lt),Si=!1;Nt&&(mi[0]+=Nt[0],mi[1]+=Nt[1]),Nn||(y.event.altKey?(Rt||(Rt=[(de[0]+de[1])/2,(be[0]+be[1])/2]),vr[0]=de[+(mi[0]<Rt[0])],vr[1]=be[+(mi[1]<Rt[1])]):Rt=null),En&&Hr(mi,q,0)&&(dt(Xt),Si=!0),Un&&Hr(mi,K,1)&&(Ot(Xt),Si=!0),Si&&(at(Xt),Gt({type:"brush",mode:Nn?"move":"resize"}))}function Hr(mi,Si,Ri){var na,Ai,Qi=Sr(Si),Gi=Qi[0],ca=Qi[1],ea=vr[Ri],ma=Ri?be:de,Ra=ma[1]-ma[0];if(Nn&&(Gi-=ea,ca-=Ra+ea),na=(Ri?Ce:Me)?Math.max(Gi,Math.min(ca,mi[Ri])):mi[Ri],Nn?Ai=(na+=ea)+Ra:(Rt&&(ea=Math.max(Gi,Math.min(ca,2*Rt[Ri]-na))),ea<na?(Ai=na,na=ea):Ai=ea),ma[0]!=na||ma[1]!=Ai)return Ri?R=null:ve=null,ma[0]=na,ma[1]=Ai,!0}function bi(){ur(),Xt.style("pointer-events","all").selectAll(".resize").style("display",$e.empty()?"none":null),y.select("body").style("cursor",null),Pr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),yr(),Gt({type:"brushend"})}Xt.style("pointer-events","none").selectAll(".resize").style("display",null),y.select("body").style("cursor",Yt.style("cursor")),Gt({type:"brushstart"}),ur()}return $e.event=function(Rt){Rt.each(function(){var Nt=B.of(this,arguments),Lt={x:de,y:be,i:ve,j:R},Yt=this.__chart__||Lt;this.__chart__=Lt,Zl?y.select(this).transition().each("start.brush",function(){ve=Yt.i,R=Yt.j,de=Yt.x,be=Yt.y,Nt({type:"brushstart"})}).tween("brush:brush",function(){var Gt=ia(de,Lt.x),Xt=ia(be,Lt.y);return ve=R=null,function(bn){de=Lt.x=Gt(bn),be=Lt.y=Xt(bn),Nt({type:"brush",mode:"resize"})}}).each("end.brush",function(){ve=Lt.i,R=Lt.j,Nt({type:"brush",mode:"resize"}),Nt({type:"brushend"})}):(Nt({type:"brushstart"}),Nt({type:"brush",mode:"resize"}),Nt({type:"brushend"}))})},$e.x=function(Rt){return arguments.length?(Ne=Xo[!(q=Rt)<<1|!K],$e):q},$e.y=function(Rt){return arguments.length?(Ne=Xo[!q<<1|!(K=Rt)],$e):K},$e.clamp=function(Rt){return arguments.length?(q&&K?(Me=!!Rt[0],Ce=!!Rt[1]):q?Me=!!Rt:K&&(Ce=!!Rt),$e):q&&K?[Me,Ce]:q?Me:K?Ce:null},$e.extent=function(Rt){var Nt,Lt,Yt,Gt,Xt;return arguments.length?(q&&(Nt=Rt[0],Lt=Rt[1],K&&(Nt=Nt[0],Lt=Lt[0]),ve=[Nt,Lt],q.invert&&(Nt=q(Nt),Lt=q(Lt)),Lt<Nt&&(Xt=Nt,Nt=Lt,Lt=Xt),Nt==de[0]&&Lt==de[1]||(de=[Nt,Lt])),K&&(Yt=Rt[0],Gt=Rt[1],q&&(Yt=Yt[1],Gt=Gt[1]),R=[Yt,Gt],K.invert&&(Yt=K(Yt),Gt=K(Gt)),Gt<Yt&&(Xt=Yt,Yt=Gt,Gt=Xt),Yt==be[0]&&Gt==be[1]||(be=[Yt,Gt])),$e):(q&&(ve?(Nt=ve[0],Lt=ve[1]):(Nt=de[0],Lt=de[1],q.invert&&(Nt=q.invert(Nt),Lt=q.invert(Lt)),Lt<Nt&&(Xt=Nt,Nt=Lt,Lt=Xt))),K&&(R?(Yt=R[0],Gt=R[1]):(Yt=be[0],Gt=be[1],K.invert&&(Yt=K.invert(Yt),Gt=K.invert(Gt)),Gt<Yt&&(Xt=Yt,Yt=Gt,Gt=Xt))),q&&K?[[Nt,Yt],[Lt,Gt]]:q?[Nt,Lt]:K&&[Yt,Gt])},$e.clear=function(){return $e.empty()||(de=[0,0],be=[0,0],ve=R=null),$e},$e.empty=function(){return!!q&&de[0]==de[1]||!!K&&be[0]==be[1]},y.rebind($e,B,"on")};var yu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Lu(ve){return JSON.parse(ve.responseText)}function ks(ve){var R=_.createRange();return R.selectNode(_.body),R.createContextualFragment(ve.responseText)}y.text=$n(function(ve){return ve.responseText}),y.json=function(ve,R){return rr(ve,"application/json",Lu,R)},y.html=function(ve,R){return rr(ve,"text/html",ks,R)},y.xml=$n(function(ve){return ve.responseXML}),"object"==typeof ue&&ue.exports?ue.exports=y:this.d3=y}).apply(self)},{}],59:[function(x,ue,le){"use strict";ue.exports=x("./quad")},{"./quad":60}],60:[function(x,ue,le){"use strict";var y=x("binary-search-bounds"),b=x("clamp"),T=x("parse-rect"),_=x("array-bounds"),e=x("pick-by-alias"),o=x("defined"),a=x("flatten-vertex-data"),l=x("is-obj"),i=x("dtype"),v=x("math-log2");function h(s,d){for(var p=d[0],f=d[1],g=1/(d[2]-p),m=1/(d[3]-f),u=new Array(s.length),w=0,c=s.length/2;w<c;w++)u[2*w]=b((s[2*w]-p)*g,0,1),u[2*w+1]=b((s[2*w+1]-f)*m,0,1);return u}ue.exports=function(s,d){d||(d={}),s=a(s,"float64"),d=e(d,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var p=o(d.maxDepth,255),f=o(d.bounds,_(s,2));f[0]===f[2]&&f[2]++,f[1]===f[3]&&f[3]++;var g,m=h(s,f),u=s.length>>>1;d.dtype||(d.dtype="array"),"string"==typeof d.dtype?g=new(i(d.dtype))(u):d.dtype&&(g=d.dtype,Array.isArray(g)&&(g.length=u));for(var w=0;w<u;++w)g[w]=w;var c=[],E=[],M=[],S=[];!function U($,X,te,ae,J,ee){if(!ae.length)return null;var se=c[J]||(c[J]=[]),G=M[J]||(M[J]=[]),H=E[J]||(E[J]=[]),Y=se.length;if(++J>p||ee>1073741824){for(var oe=0;oe<ae.length;oe++)se.push(ae[oe]),G.push(ee),H.push(null,null,null,null);return Y}if(se.push(ae[0]),G.push(ee),ae.length<=1)return H.push(null,null,null,null),Y;for(var W=.5*te,ne=$+W,re=X+W,ce=[],fe=[],me=[],pe=[],we=1,ye=ae.length;we<ye;we++){var Te=ae[we],Oe=m[2*Te+1];m[2*Te]<ne?Oe<re?ce.push(Te):fe.push(Te):Oe<re?me.push(Te):pe.push(Te)}return H.push(U($,X,W,ce,J,ee<<=2),U($,re,W,fe,J,ee+1),U(ne,X,W,me,J,ee+2),U(ne,re,W,pe,J,ee+3)),Y}(0,0,1,g,0,1);for(var C=0,O=0;O<c.length;O++){var I=c[O];if(g.set)g.set(I,C);else for(var N=0,F=I.length;N<F;N++)g[N+C]=I[N];var L=C+c[O].length;S[O]=[C,L],C=L}return g.range=function(){for(var U,$=[],X=arguments.length;X--;)$[X]=arguments[X];if(l($[$.length-1])){var te=$.pop();$.length||null==te.x&&null==te.l&&null==te.left||($=[te],U={}),U=e(te,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else U={};$.length||($=f);var fe,ae=T.apply(void 0,$),J=[Math.min(ae.x,ae.x+ae.width),Math.min(ae.y,ae.y+ae.height),Math.max(ae.x,ae.x+ae.width),Math.max(ae.y,ae.y+ae.height)],ee=J[0],se=J[1],G=J[2],H=J[3],Y=h([ee,se,G,H],f),oe=Y[0],W=Y[1],ne=Y[2],re=Y[3],ce=o(U.level,c.length);if(null!=U.d&&("number"==typeof U.d?fe=[U.d,U.d]:U.d.length&&(fe=U.d),ce=Math.min(Math.max(Math.ceil(-v(Math.abs(fe[0])/(f[2]-f[0]))),Math.ceil(-v(Math.abs(fe[1])/(f[3]-f[1])))),ce)),ce=Math.min(ce,c.length),U.lod)return P(oe,W,ne,re,ce);var me=[];function pe(ye,Te,Le,Oe,Re,Ve){if(null!==Re&&null!==Ve&&!(oe>ye+Le||W>Te+Le||ne<ye||re<Te||Oe>=ce||Re===Ve)){var _e=c[Oe];void 0===Ve&&(Ve=_e.length);for(var Ae=Re;Ae<Ve;Ae++){var Fe=_e[Ae],Pe=s[2*Fe],Be=s[2*Fe+1];Pe>=ee&&Pe<=G&&Be>=se&&Be<=H&&me.push(Fe)}var qe=E[Oe],We=qe[4*Re+0],Je=qe[4*Re+1],ut=qe[4*Re+2],Ge=qe[4*Re+3],Ke=we(qe,Re+1),nt=.5*Le,it=Oe+1;pe(ye,Te,nt,it,We,Je||ut||Ge||Ke),pe(ye,Te+nt,nt,it,Je,ut||Ge||Ke),pe(ye+nt,Te,nt,it,ut,Ge||Ke),pe(ye+nt,Te+nt,nt,it,Ge,Ke)}}function we(ye,Te){for(var Le=null,Oe=0;null===Le;)if(Le=ye[4*Te+Oe],++Oe>ye.length)return null;return Le}return pe(0,0,1,0,0,1),me},g;function P(U,$,X,te,ae){for(var J=[],ee=0;ee<ae;ee++){var se=M[ee],G=S[ee][0],H=j(U,$,ee),Y=j(X,te,ee),oe=y.ge(se,H),W=y.gt(se,Y,oe,se.length-1);J[ee]=[oe+G,W+G]}return J}function j(U,$,X){for(var te=1,ae=.5,J=.5,ee=.5,se=0;se<X;se++)te<<=2,te+=U<ae?$<J?0:1:$<J?2:3,ee*=.5,ae+=U<ae?-ee:ee,J+=$<J?-ee:ee;return te}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(x,ue,le){"use strict";Object.defineProperty(le,"__esModule",{value:!0});var y=x("@turf/meta");function b(e){var o=0;if(e&&e.length>0){o+=Math.abs(T(e[0]));for(var a=1;a<e.length;a++)o-=Math.abs(T(e[a]))}return o}function T(e){var o,a,l,i,v,h,s=0,d=e.length;if(d>2){for(h=0;h<d;h++)h===d-2?(l=d-2,i=d-1,v=0):h===d-1?(l=d-1,i=0,v=1):(l=h,i=h+1,v=h+2),o=e[l],a=e[i],s+=(_(e[v][0])-_(o[0]))*Math.sin(_(a[1]));s=6378137*s*6378137/2}return s}function _(e){return e*Math.PI/180}le.default=function(e){return y.geomReduce(e,function(o,a){return o+function(l){var i,v=0;switch(l.type){case"Polygon":return b(l.coordinates);case"MultiPolygon":for(i=0;i<l.coordinates.length;i++)v+=b(l.coordinates[i]);return v;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(a)},0)}},{"@turf/meta":63}],62:[function(x,ue,le){"use strict";function y(d,p,f){void 0===f&&(f={});var g={type:"Feature"};return(0===f.id||f.id)&&(g.id=f.id),f.bbox&&(g.bbox=f.bbox),g.properties=p||{},g.geometry=d,g}function b(d,p,f){if(void 0===f&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(d[0])||!s(d[1]))throw new Error("coordinates must contain numbers");return y({type:"Point",coordinates:d},p,f)}function T(d,p,f){void 0===f&&(f={});for(var g=0,m=d;g<m.length;g++){var u=m[g];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<u[u.length-1].length;w++)if(u[u.length-1][w]!==u[0][w])throw new Error("First and last Position are not equivalent.")}return y({type:"Polygon",coordinates:d},p,f)}function _(d,p,f){if(void 0===f&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");return y({type:"LineString",coordinates:d},p,f)}function e(d,p){void 0===p&&(p={});var f={type:"FeatureCollection"};return p.id&&(f.id=p.id),p.bbox&&(f.bbox=p.bbox),f.features=d,f}function o(d,p,f){return void 0===f&&(f={}),y({type:"MultiLineString",coordinates:d},p,f)}function a(d,p,f){return void 0===f&&(f={}),y({type:"MultiPoint",coordinates:d},p,f)}function l(d,p,f){return void 0===f&&(f={}),y({type:"MultiPolygon",coordinates:d},p,f)}function i(d,p){void 0===p&&(p="kilometers");var f=le.factors[p];if(!f)throw new Error(p+" units is invalid");return d*f}function v(d,p){void 0===p&&(p="kilometers");var f=le.factors[p];if(!f)throw new Error(p+" units is invalid");return d/f}function h(d){return d%(2*Math.PI)*180/Math.PI}function s(d){return!isNaN(d)&&null!==d&&!Array.isArray(d)}Object.defineProperty(le,"__esModule",{value:!0}),le.earthRadius=6371008.8,le.factors={centimeters:100*le.earthRadius,centimetres:100*le.earthRadius,degrees:le.earthRadius/111325,feet:3.28084*le.earthRadius,inches:39.37*le.earthRadius,kilometers:le.earthRadius/1e3,kilometres:le.earthRadius/1e3,meters:le.earthRadius,metres:le.earthRadius,miles:le.earthRadius/1609.344,millimeters:1e3*le.earthRadius,millimetres:1e3*le.earthRadius,nauticalmiles:le.earthRadius/1852,radians:1,yards:1.0936*le.earthRadius},le.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/le.earthRadius,yards:1.0936133},le.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},le.feature=y,le.geometry=function(d,p,f){switch(void 0===f&&(f={}),d){case"Point":return b(p).geometry;case"LineString":return _(p).geometry;case"Polygon":return T(p).geometry;case"MultiPoint":return a(p).geometry;case"MultiLineString":return o(p).geometry;case"MultiPolygon":return l(p).geometry;default:throw new Error(d+" is invalid")}},le.point=b,le.points=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return b(g,p)}),f)},le.polygon=T,le.polygons=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return T(g,p)}),f)},le.lineString=_,le.lineStrings=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return _(g,p)}),f)},le.featureCollection=e,le.multiLineString=o,le.multiPoint=a,le.multiPolygon=l,le.geometryCollection=function(d,p,f){return void 0===f&&(f={}),y({type:"GeometryCollection",geometries:d},p,f)},le.round=function(d,p){if(void 0===p&&(p=0),p&&!(p>=0))throw new Error("precision must be a positive number");var f=Math.pow(10,p||0);return Math.round(d*f)/f},le.radiansToLength=i,le.lengthToRadians=v,le.lengthToDegrees=function(d,p){return h(v(d,p))},le.bearingToAzimuth=function(d){var p=d%360;return p<0&&(p+=360),p},le.radiansToDegrees=h,le.degreesToRadians=function(d){return d%360*Math.PI/180},le.convertLength=function(d,p,f){if(void 0===p&&(p="kilometers"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("length must be a positive number");return i(v(d,p),f)},le.convertArea=function(d,p,f){if(void 0===p&&(p="meters"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("area must be a positive number");var g=le.areaFactors[p];if(!g)throw new Error("invalid original units");var m=le.areaFactors[f];if(!m)throw new Error("invalid final units");return d/g*m},le.isNumber=s,le.isObject=function(d){return!!d&&d.constructor===Object},le.validateBBox=function(d){if(!d)throw new Error("bbox is required");if(!Array.isArray(d))throw new Error("bbox must be an Array");if(4!==d.length&&6!==d.length)throw new Error("bbox must be an Array of 4 or 6 numbers");d.forEach(function(p){if(!s(p))throw new Error("bbox must only contain numbers")})},le.validateId=function(d){if(!d)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof d))throw new Error("id must be a number or a string")}},{}],63:[function(x,ue,le){"use strict";Object.defineProperty(le,"__esModule",{value:!0});var y=x("@turf/helpers");function b(i,v,h){if(null!==i)for(var s,d,p,f,g,m,u,w,c=0,E=0,M=i.type,S="FeatureCollection"===M,C="Feature"===M,O=S?i.features.length:1,I=0;I<O;I++){g=(w=!!(u=S?i.features[I].geometry:C?i.geometry:i)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var N=0;N<g;N++){var F=0,L=0;if(null!==(f=w?u.geometries[N]:u)){m=f.coordinates;var P=f.type;switch(c=!h||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===v(m,E,I,F,L))return!1;E++,F++;break;case"LineString":case"MultiPoint":for(s=0;s<m.length;s++){if(!1===v(m[s],E,I,F,L))return!1;E++,"MultiPoint"===P&&F++}"LineString"===P&&F++;break;case"Polygon":case"MultiLineString":for(s=0;s<m.length;s++){for(d=0;d<m[s].length-c;d++){if(!1===v(m[s][d],E,I,F,L))return!1;E++}"MultiLineString"===P&&F++,"Polygon"===P&&L++}"Polygon"===P&&F++;break;case"MultiPolygon":for(s=0;s<m.length;s++){for(L=0,d=0;d<m[s].length;d++){for(p=0;p<m[s][d].length-c;p++){if(!1===v(m[s][d][p],E,I,F,L))return!1;E++}L++}F++}break;case"GeometryCollection":for(s=0;s<f.geometries.length;s++)if(!1===b(f.geometries[s],v,h))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(i,v){var h;switch(i.type){case"FeatureCollection":for(h=0;h<i.features.length&&!1!==v(i.features[h].properties,h);h++);break;case"Feature":v(i.properties,0)}}function _(i,v){if("Feature"===i.type)v(i,0);else if("FeatureCollection"===i.type)for(var h=0;h<i.features.length&&!1!==v(i.features[h],h);h++);}function e(i,v){var h,s,d,p,f,g,m,u,w,c,E=0,M="FeatureCollection"===i.type,S="Feature"===i.type,C=M?i.features.length:1;for(h=0;h<C;h++){for(u=M?i.features[h].properties:S?i.properties:{},w=M?i.features[h].bbox:S?i.bbox:void 0,c=M?i.features[h].id:S?i.id:void 0,f=(m=!!(g=M?i.features[h].geometry:S?i.geometry:i)&&"GeometryCollection"===g.type)?g.geometries.length:1,d=0;d<f;d++)if(null!==(p=m?g.geometries[d]:g))switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===v(p,E,u,w,c))return!1;break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(!1===v(p.geometries[s],E,u,w,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===v(null,E,u,w,c))return!1;E++}}function o(i,v){e(i,function(h,s,d,p,f){var g,m=null===h?null:h.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return!1!==v(y.feature(h,d,{bbox:p,id:f}),s,0)&&void 0}switch(m){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon"}for(var u=0;u<h.coordinates.length;u++)if(!1===v(y.feature({type:g,coordinates:h.coordinates[u]},d),s,u))return!1})}function a(i,v){o(i,function(h,s,d){var p=0;if(h.geometry){var f=h.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var g,m=0,u=0,w=0;return!1!==b(h,function(c,E,M,S,C){if(void 0===g||s>m||S>u||C>w)return g=c,m=s,u=S,w=C,void(p=0);var O=y.lineString([g,c],h.properties);if(!1===v(O,s,d,C,p))return!1;p++,g=c})&&void 0}}})}function l(i,v){if(!i)throw new Error("geojson is required");o(i,function(h,s,d){if(null!==h.geometry){var f=h.geometry.coordinates;switch(h.geometry.type){case"LineString":if(!1===v(h,s,d,0,0))return!1;break;case"Polygon":for(var g=0;g<f.length;g++)if(!1===v(y.lineString(f[g],h.properties),s,d,g))return!1}}})}le.coordEach=b,le.coordReduce=function(i,v,h,s){var d=h;return b(i,function(p,f,g,m,u){d=0===f&&void 0===h?p:v(d,p,f,g,m,u)},s),d},le.propEach=T,le.propReduce=function(i,v,h){var s=h;return T(i,function(d,p){s=0===p&&void 0===h?d:v(s,d,p)}),s},le.featureEach=_,le.featureReduce=function(i,v,h){var s=h;return _(i,function(d,p){s=0===p&&void 0===h?d:v(s,d,p)}),s},le.coordAll=function(i){var v=[];return b(i,function(h){v.push(h)}),v},le.geomEach=e,le.geomReduce=function(i,v,h){var s=h;return e(i,function(d,p,f,g,m){s=0===p&&void 0===h?d:v(s,d,p,f,g,m)}),s},le.flattenEach=o,le.flattenReduce=function(i,v,h){var s=h;return o(i,function(d,p,f){s=0===p&&0===f&&void 0===h?d:v(s,d,p,f)}),s},le.segmentEach=a,le.segmentReduce=function(i,v,h){var s=h,d=!1;return a(i,function(p,f,g,m,u){s=!1===d&&void 0===h?p:v(s,p,f,g,m,u),d=!0}),s},le.lineEach=l,le.lineReduce=function(i,v,h){var s=h;return l(i,function(d,p,f,g){s=0===p&&void 0===h?d:v(s,d,p,f,g)}),s},le.findSegment=function(i,v){if(!y.isObject(v=v||{}))throw new Error("options is invalid");var h,s=v.featureIndex||0,d=v.multiFeatureIndex||0,p=v.geometryIndex||0,f=v.segmentIndex||0,g=v.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),g=g||i.features[s].properties,h=i.features[s].geometry;break;case"Feature":g=g||i.properties,h=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=i;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=m.length+f-1),y.lineString([m[f],m[f+1]],g,v);case"Polygon":return p<0&&(p=m.length+p),f<0&&(f=m[p].length+f-1),y.lineString([m[p][f],m[p][f+1]],g,v);case"MultiLineString":return d<0&&(d=m.length+d),f<0&&(f=m[d].length+f-1),y.lineString([m[d][f],m[d][f+1]],g,v);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),f<0&&(f=m[d][p].length-f-1),y.lineString([m[d][p][f],m[d][p][f+1]],g,v)}throw new Error("geojson is invalid")},le.findPoint=function(i,v){if(!y.isObject(v=v||{}))throw new Error("options is invalid");var h,s=v.featureIndex||0,d=v.multiFeatureIndex||0,p=v.geometryIndex||0,f=v.coordIndex||0,g=v.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),g=g||i.features[s].properties,h=i.features[s].geometry;break;case"Feature":g=g||i.properties,h=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=i;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":return y.point(m,g,v);case"MultiPoint":return d<0&&(d=m.length+d),y.point(m[d],g,v);case"LineString":return f<0&&(f=m.length+f),y.point(m[f],g,v);case"Polygon":return p<0&&(p=m.length+p),f<0&&(f=m[p].length+f),y.point(m[p][f],g,v);case"MultiLineString":return d<0&&(d=m.length+d),f<0&&(f=m[d].length+f),y.point(m[d][f],g,v);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),f<0&&(f=m[d][p].length-f),y.point(m[d][p][f],g,v)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(x,ue,le){"use strict";Object.defineProperty(le,"__esModule",{value:!0});var y=x("@turf/meta");function b(T){var _=[1/0,1/0,-1/0,-1/0];return y.coordEach(T,function(e){_[0]>e[0]&&(_[0]=e[0]),_[1]>e[1]&&(_[1]=e[1]),_[2]<e[0]&&(_[2]=e[0]),_[3]<e[1]&&(_[3]=e[1])}),_}b.default=b,le.default=b},{"@turf/meta":66}],65:[function(x,ue,le){arguments[4][62][0].apply(le,arguments)},{dup:62}],66:[function(x,ue,le){arguments[4][63][0].apply(le,arguments)},{"@turf/helpers":65,dup:63}],67:[function(x,ue,le){"use strict";Object.defineProperty(le,"__esModule",{value:!0});var y=x("@turf/meta"),b=x("@turf/helpers");le.default=function(T,_){void 0===_&&(_={});var e=0,o=0,a=0;return y.coordEach(T,function(l){e+=l[0],o+=l[1],a++}),b.point([e/a,o/a],_.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(x,ue,le){"use strict";function y(d,p,f){void 0===f&&(f={});var g={type:"Feature"};return(0===f.id||f.id)&&(g.id=f.id),f.bbox&&(g.bbox=f.bbox),g.properties=p||{},g.geometry=d,g}function b(d,p,f){return void 0===f&&(f={}),y({type:"Point",coordinates:d},p,f)}function T(d,p,f){void 0===f&&(f={});for(var g=0,m=d;g<m.length;g++){var u=m[g];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<u[u.length-1].length;w++)if(u[u.length-1][w]!==u[0][w])throw new Error("First and last Position are not equivalent.")}return y({type:"Polygon",coordinates:d},p,f)}function _(d,p,f){if(void 0===f&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");return y({type:"LineString",coordinates:d},p,f)}function e(d,p){void 0===p&&(p={});var f={type:"FeatureCollection"};return p.id&&(f.id=p.id),p.bbox&&(f.bbox=p.bbox),f.features=d,f}function o(d,p,f){return void 0===f&&(f={}),y({type:"MultiLineString",coordinates:d},p,f)}function a(d,p,f){return void 0===f&&(f={}),y({type:"MultiPoint",coordinates:d},p,f)}function l(d,p,f){return void 0===f&&(f={}),y({type:"MultiPolygon",coordinates:d},p,f)}function i(d,p){void 0===p&&(p="kilometers");var f=le.factors[p];if(!f)throw new Error(p+" units is invalid");return d*f}function v(d,p){void 0===p&&(p="kilometers");var f=le.factors[p];if(!f)throw new Error(p+" units is invalid");return d/f}function h(d){return d%(2*Math.PI)*180/Math.PI}function s(d){return!isNaN(d)&&null!==d&&!Array.isArray(d)&&!/^\s*$/.test(d)}Object.defineProperty(le,"__esModule",{value:!0}),le.earthRadius=6371008.8,le.factors={centimeters:100*le.earthRadius,centimetres:100*le.earthRadius,degrees:le.earthRadius/111325,feet:3.28084*le.earthRadius,inches:39.37*le.earthRadius,kilometers:le.earthRadius/1e3,kilometres:le.earthRadius/1e3,meters:le.earthRadius,metres:le.earthRadius,miles:le.earthRadius/1609.344,millimeters:1e3*le.earthRadius,millimetres:1e3*le.earthRadius,nauticalmiles:le.earthRadius/1852,radians:1,yards:le.earthRadius/1.0936},le.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/le.earthRadius,yards:1/1.0936},le.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},le.feature=y,le.geometry=function(d,p,f){switch(void 0===f&&(f={}),d){case"Point":return b(p).geometry;case"LineString":return _(p).geometry;case"Polygon":return T(p).geometry;case"MultiPoint":return a(p).geometry;case"MultiLineString":return o(p).geometry;case"MultiPolygon":return l(p).geometry;default:throw new Error(d+" is invalid")}},le.point=b,le.points=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return b(g,p)}),f)},le.polygon=T,le.polygons=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return T(g,p)}),f)},le.lineString=_,le.lineStrings=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return _(g,p)}),f)},le.featureCollection=e,le.multiLineString=o,le.multiPoint=a,le.multiPolygon=l,le.geometryCollection=function(d,p,f){return void 0===f&&(f={}),y({type:"GeometryCollection",geometries:d},p,f)},le.round=function(d,p){if(void 0===p&&(p=0),p&&!(p>=0))throw new Error("precision must be a positive number");var f=Math.pow(10,p||0);return Math.round(d*f)/f},le.radiansToLength=i,le.lengthToRadians=v,le.lengthToDegrees=function(d,p){return h(v(d,p))},le.bearingToAzimuth=function(d){var p=d%360;return p<0&&(p+=360),p},le.radiansToDegrees=h,le.degreesToRadians=function(d){return d%360*Math.PI/180},le.convertLength=function(d,p,f){if(void 0===p&&(p="kilometers"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("length must be a positive number");return i(v(d,p),f)},le.convertArea=function(d,p,f){if(void 0===p&&(p="meters"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("area must be a positive number");var g=le.areaFactors[p];if(!g)throw new Error("invalid original units");var m=le.areaFactors[f];if(!m)throw new Error("invalid final units");return d/g*m},le.isNumber=s,le.isObject=function(d){return!!d&&d.constructor===Object},le.validateBBox=function(d){if(!d)throw new Error("bbox is required");if(!Array.isArray(d))throw new Error("bbox must be an Array");if(4!==d.length&&6!==d.length)throw new Error("bbox must be an Array of 4 or 6 numbers");d.forEach(function(p){if(!s(p))throw new Error("bbox must only contain numbers")})},le.validateId=function(d){if(!d)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof d))throw new Error("id must be a number or a string")},le.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},le.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},le.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},le.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},le.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},le.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},le.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(x,ue,le){"use strict";Object.defineProperty(le,"__esModule",{value:!0});var y=x("@turf/helpers");function b(i,v,h){if(null!==i)for(var s,d,p,f,g,m,u,w,c=0,E=0,M=i.type,S="FeatureCollection"===M,C="Feature"===M,O=S?i.features.length:1,I=0;I<O;I++){g=(w=!!(u=S?i.features[I].geometry:C?i.geometry:i)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var N=0;N<g;N++){var F=0,L=0;if(null!==(f=w?u.geometries[N]:u)){m=f.coordinates;var P=f.type;switch(c=!h||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===v(m,E,I,F,L))return!1;E++,F++;break;case"LineString":case"MultiPoint":for(s=0;s<m.length;s++){if(!1===v(m[s],E,I,F,L))return!1;E++,"MultiPoint"===P&&F++}"LineString"===P&&F++;break;case"Polygon":case"MultiLineString":for(s=0;s<m.length;s++){for(d=0;d<m[s].length-c;d++){if(!1===v(m[s][d],E,I,F,L))return!1;E++}"MultiLineString"===P&&F++,"Polygon"===P&&L++}"Polygon"===P&&F++;break;case"MultiPolygon":for(s=0;s<m.length;s++){for(L=0,d=0;d<m[s].length;d++){for(p=0;p<m[s][d].length-c;p++){if(!1===v(m[s][d][p],E,I,F,L))return!1;E++}L++}F++}break;case"GeometryCollection":for(s=0;s<f.geometries.length;s++)if(!1===b(f.geometries[s],v,h))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(i,v){var h;switch(i.type){case"FeatureCollection":for(h=0;h<i.features.length&&!1!==v(i.features[h].properties,h);h++);break;case"Feature":v(i.properties,0)}}function _(i,v){if("Feature"===i.type)v(i,0);else if("FeatureCollection"===i.type)for(var h=0;h<i.features.length&&!1!==v(i.features[h],h);h++);}function e(i,v){var h,s,d,p,f,g,m,u,w,c,E=0,M="FeatureCollection"===i.type,S="Feature"===i.type,C=M?i.features.length:1;for(h=0;h<C;h++){for(u=M?i.features[h].properties:S?i.properties:{},w=M?i.features[h].bbox:S?i.bbox:void 0,c=M?i.features[h].id:S?i.id:void 0,f=(m=!!(g=M?i.features[h].geometry:S?i.geometry:i)&&"GeometryCollection"===g.type)?g.geometries.length:1,d=0;d<f;d++)if(null!==(p=m?g.geometries[d]:g))switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===v(p,E,u,w,c))return!1;break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(!1===v(p.geometries[s],E,u,w,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===v(null,E,u,w,c))return!1;E++}}function o(i,v){e(i,function(h,s,d,p,f){var g,m=null===h?null:h.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return!1!==v(y.feature(h,d,{bbox:p,id:f}),s,0)&&void 0}switch(m){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon"}for(var u=0;u<h.coordinates.length;u++)if(!1===v(y.feature({type:g,coordinates:h.coordinates[u]},d),s,u))return!1})}function a(i,v){o(i,function(h,s,d){var p=0;if(h.geometry){var f=h.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var g,m=0,u=0,w=0;return!1!==b(h,function(c,E,M,S,C){if(void 0===g||s>m||S>u||C>w)return g=c,m=s,u=S,w=C,void(p=0);var O=y.lineString([g,c],h.properties);if(!1===v(O,s,d,C,p))return!1;p++,g=c})&&void 0}}})}function l(i,v){if(!i)throw new Error("geojson is required");o(i,function(h,s,d){if(null!==h.geometry){var f=h.geometry.coordinates;switch(h.geometry.type){case"LineString":if(!1===v(h,s,d,0,0))return!1;break;case"Polygon":for(var g=0;g<f.length;g++)if(!1===v(y.lineString(f[g],h.properties),s,d,g))return!1}}})}le.coordEach=b,le.coordReduce=function(i,v,h,s){var d=h;return b(i,function(p,f,g,m,u){d=0===f&&void 0===h?p:v(d,p,f,g,m,u)},s),d},le.propEach=T,le.propReduce=function(i,v,h){var s=h;return T(i,function(d,p){s=0===p&&void 0===h?d:v(s,d,p)}),s},le.featureEach=_,le.featureReduce=function(i,v,h){var s=h;return _(i,function(d,p){s=0===p&&void 0===h?d:v(s,d,p)}),s},le.coordAll=function(i){var v=[];return b(i,function(h){v.push(h)}),v},le.geomEach=e,le.geomReduce=function(i,v,h){var s=h;return e(i,function(d,p,f,g,m){s=0===p&&void 0===h?d:v(s,d,p,f,g,m)}),s},le.flattenEach=o,le.flattenReduce=function(i,v,h){var s=h;return o(i,function(d,p,f){s=0===p&&0===f&&void 0===h?d:v(s,d,p,f)}),s},le.segmentEach=a,le.segmentReduce=function(i,v,h){var s=h,d=!1;return a(i,function(p,f,g,m,u){s=!1===d&&void 0===h?p:v(s,p,f,g,m,u),d=!0}),s},le.lineEach=l,le.lineReduce=function(i,v,h){var s=h;return l(i,function(d,p,f,g){s=0===p&&void 0===h?d:v(s,d,p,f,g)}),s},le.findSegment=function(i,v){if(!y.isObject(v=v||{}))throw new Error("options is invalid");var h,s=v.featureIndex||0,d=v.multiFeatureIndex||0,p=v.geometryIndex||0,f=v.segmentIndex||0,g=v.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),g=g||i.features[s].properties,h=i.features[s].geometry;break;case"Feature":g=g||i.properties,h=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=i;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=m.length+f-1),y.lineString([m[f],m[f+1]],g,v);case"Polygon":return p<0&&(p=m.length+p),f<0&&(f=m[p].length+f-1),y.lineString([m[p][f],m[p][f+1]],g,v);case"MultiLineString":return d<0&&(d=m.length+d),f<0&&(f=m[d].length+f-1),y.lineString([m[d][f],m[d][f+1]],g,v);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),f<0&&(f=m[d][p].length-f-1),y.lineString([m[d][p][f],m[d][p][f+1]],g,v)}throw new Error("geojson is invalid")},le.findPoint=function(i,v){if(!y.isObject(v=v||{}))throw new Error("options is invalid");var h,s=v.featureIndex||0,d=v.multiFeatureIndex||0,p=v.geometryIndex||0,f=v.coordIndex||0,g=v.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),g=g||i.features[s].properties,h=i.features[s].geometry;break;case"Feature":g=g||i.properties,h=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=i;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":return y.point(m,g,v);case"MultiPoint":return d<0&&(d=m.length+d),y.point(m[d],g,v);case"LineString":return f<0&&(f=m.length+f),y.point(m[f],g,v);case"Polygon":return p<0&&(p=m.length+p),f<0&&(f=m[p].length+f),y.point(m[p][f],g,v);case"MultiLineString":return d<0&&(d=m.length+d),f<0&&(f=m[d].length+f),y.point(m[d][f],g,v);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),f<0&&(f=m[d][p].length-f),y.point(m[d][p][f],g,v)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(x,ue,le){ue.exports=function(y){var b=0,T=0,_=0,e=0;return y.map(function(o){var a=(o=o.slice())[0],l=a.toUpperCase();if(a!=l)switch(o[0]=l,a){case"a":o[6]+=_,o[7]+=e;break;case"v":o[1]+=e;break;case"h":o[1]+=_;break;default:for(var i=1;i<o.length;)o[i++]+=_,o[i++]+=e}switch(l){case"Z":_=b,e=T;break;case"H":_=o[1];break;case"V":e=o[1];break;case"M":_=b=o[1],e=T=o[2];break;default:_=o[o.length-2],e=o[o.length-1]}return o})}},{}],71:[function(x,ue,le){"use strict";ue.exports=function(y,b){if(!y||null==y.length)throw Error("Argument should be an array");b=null==b?1:Math.floor(b);for(var T=Array(2*b),_=0;_<b;_++){for(var e=-1/0,o=1/0,a=_,l=y.length;a<l;a+=b)y[a]>e&&(e=y[a]),y[a]<o&&(o=y[a]);T[_]=o,T[b+_]=e}return T}},{}],72:[function(x,ue,le){"use strict";ue.exports=function(y,b,T){if("function"==typeof Array.prototype.findIndex)return y.findIndex(b,T);if("function"!=typeof b)throw new TypeError("predicate must be a function");var _=Object(y),e=_.length;if(0===e)return-1;for(var o=0;o<e;o++)if(b.call(T,_[o],o,_))return o;return-1}},{}],73:[function(x,ue,le){"use strict";var y=x("array-bounds");ue.exports=function(b,T,_){if(!b||null==b.length)throw Error("Argument should be an array");null==T&&(T=1),null==_&&(_=y(b,T));for(var e=0;e<T;e++){var o=_[T+e],a=_[e],l=e,i=b.length;if(o===1/0&&a===-1/0)for(l=e;l<i;l+=T)b[l]=b[l]===o?1:b[l]===a?0:.5;else if(o===1/0)for(l=e;l<i;l+=T)b[l]=b[l]===o?1:0;else if(a===-1/0)for(l=e;l<i;l+=T)b[l]=b[l]===a?0:1;else{var v=o-a;for(l=e;l<i;l+=T)isNaN(b[l])||(b[l]=0===v?.5:(b[l]-a)/v)}}return b}},{"array-bounds":71}],74:[function(x,ue,le){ue.exports=function(y,b){var T="number"==typeof y,_="number"==typeof b;T&&!_?(b=y,y=0):T||_||(y=0,b=0);var e=(b|=0)-(y|=0);if(e<0)throw new Error("array length must be positive");for(var o=new Array(e),a=0,l=y;a<e;a++,l++)o[a]=l;return o}},{}],75:[function(x,ue,le){(function(y){(function(){"use strict";var b=x("object-assign");function T(S,C){if(S===C)return 0;for(var O=S.length,I=C.length,N=0,F=Math.min(O,I);N<F;++N)if(S[N]!==C[N]){O=S[N],I=C[N];break}return O<I?-1:I<O?1:0}function _(S){return y.Buffer&&"function"==typeof y.Buffer.isBuffer?y.Buffer.isBuffer(S):!(null==S||!S._isBuffer)}var e=x("util/"),o=Object.prototype.hasOwnProperty,a=Array.prototype.slice,l="foo"===function(){}.name;function i(S){return Object.prototype.toString.call(S)}function v(S){return!_(S)&&"function"==typeof y.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(S):!!S&&(S instanceof DataView||!!(S.buffer&&S.buffer instanceof ArrayBuffer)))}var h=ue.exports=m,s=/\s*function\s+([^\(\s]*)\s*/;function d(S){if(e.isFunction(S)){if(l)return S.name;var C=S.toString().match(s);return C&&C[1]}}function p(S,C){return"string"==typeof S?S.length<C?S:S.slice(0,C):S}function f(S){if(l||!e.isFunction(S))return e.inspect(S);var C=d(S);return"[Function"+(C?": "+C:"")+"]"}function g(S,C,O,I,N){throw new h.AssertionError({message:O,actual:S,expected:C,operator:I,stackStartFunction:N})}function m(S,C){S||g(S,!0,C,"==",h.ok)}function u(S,C,O,I){if(S===C)return!0;if(_(S)&&_(C))return 0===T(S,C);if(e.isDate(S)&&e.isDate(C))return S.getTime()===C.getTime();if(e.isRegExp(S)&&e.isRegExp(C))return S.source===C.source&&S.global===C.global&&S.multiline===C.multiline&&S.lastIndex===C.lastIndex&&S.ignoreCase===C.ignoreCase;if(null!==S&&"object"==typeof S||null!==C&&"object"==typeof C){if(v(S)&&v(C)&&i(S)===i(C)&&!(S instanceof Float32Array||S instanceof Float64Array))return 0===T(new Uint8Array(S.buffer),new Uint8Array(C.buffer));if(_(S)!==_(C))return!1;var N=(I=I||{actual:[],expected:[]}).actual.indexOf(S);return-1!==N&&N===I.expected.indexOf(C)||(I.actual.push(S),I.expected.push(C),function(F,L,P,j){if(null==F||null==L)return!1;if(e.isPrimitive(F)||e.isPrimitive(L))return F===L;if(P&&Object.getPrototypeOf(F)!==Object.getPrototypeOf(L))return!1;var U=w(F),$=w(L);if(U&&!$||!U&&$)return!1;if(U)return u(F=a.call(F),L=a.call(L),P);var X,te,ae=M(F),J=M(L);if(ae.length!==J.length)return!1;for(ae.sort(),J.sort(),te=ae.length-1;te>=0;te--)if(ae[te]!==J[te])return!1;for(te=ae.length-1;te>=0;te--)if(!u(F[X=ae[te]],L[X],P,j))return!1;return!0}(S,C,O,I))}return O?S===C:S==C}function w(S){return"[object Arguments]"==Object.prototype.toString.call(S)}function c(S,C){if(!S||!C)return!1;if("[object RegExp]"==Object.prototype.toString.call(C))return C.test(S);try{if(S instanceof C)return!0}catch(O){}return!Error.isPrototypeOf(C)&&!0===C.call({},S)}function E(S,C,O,I){var N;if("function"!=typeof C)throw new TypeError('"block" argument must be a function');"string"==typeof O&&(I=O,O=null),N=function(P){var j;try{P()}catch(U){j=U}return j}(C),I=(O&&O.name?" ("+O.name+").":".")+(I?" "+I:"."),S&&!N&&g(N,O,"Missing expected exception"+I);var F="string"==typeof I,L=!S&&N&&!O;if((!S&&e.isError(N)&&F&&c(N,O)||L)&&g(N,O,"Got unwanted exception"+I),S&&N&&O&&!c(N,O)||!S&&N)throw N}h.AssertionError=function(S){this.name="AssertionError",this.actual=S.actual,this.expected=S.expected,this.operator=S.operator,S.message?(this.message=S.message,this.generatedMessage=!1):(this.message=p(f(this.actual),128)+" "+this.operator+" "+p(f(this.expected),128),this.generatedMessage=!0);var C=S.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var O=new Error;if(O.stack){var I=O.stack,N=d(C),F=I.indexOf("\n"+N);if(F>=0){var L=I.indexOf("\n",F+1);I=I.substring(L+1)}this.stack=I}}},e.inherits(h.AssertionError,Error),h.fail=g,h.ok=m,h.equal=function(S,C,O){S!=C&&g(S,C,O,"==",h.equal)},h.notEqual=function(S,C,O){S==C&&g(S,C,O,"!=",h.notEqual)},h.deepEqual=function(S,C,O){u(S,C,!1)||g(S,C,O,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(S,C,O){u(S,C,!0)||g(S,C,O,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(S,C,O){u(S,C,!1)&&g(S,C,O,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function S(C,O,I){u(C,O,!0)&&g(C,O,I,"notDeepStrictEqual",S)},h.strictEqual=function(S,C,O){S!==C&&g(S,C,O,"===",h.strictEqual)},h.notStrictEqual=function(S,C,O){S===C&&g(S,C,O,"!==",h.notStrictEqual)},h.throws=function(S,C,O){E(!0,S,C,O)},h.doesNotThrow=function(S,C,O){E(!1,S,C,O)},h.ifError=function(S){if(S)throw S},h.strict=b(function S(C,O){C||g(C,!0,O,"==",S)},h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var M=Object.keys||function(S){var C=[];for(var O in S)o.call(S,O)&&C.push(O);return C}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(x,ue,le){ue.exports="function"==typeof Object.create?function(y,b){y.super_=b,y.prototype=Object.create(b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}})}:function(y,b){y.super_=b;var T=function(){};T.prototype=b.prototype,y.prototype=new T,y.prototype.constructor=y}},{}],77:[function(x,ue,le){ue.exports=function(y){return y&&"object"==typeof y&&"function"==typeof y.copy&&"function"==typeof y.fill&&"function"==typeof y.readUInt8}},{}],78:[function(x,ue,le){(function(y,b){(function(){var T=/%[sdj%]/g;le.format=function(F){if(!g(F)){for(var L=[],P=0;P<arguments.length;P++)L.push(o(arguments[P]));return L.join(" ")}P=1;for(var j=arguments,U=j.length,$=String(F).replace(T,function(te){if("%%"===te)return"%";if(P>=U)return te;switch(te){case"%s":return String(j[P++]);case"%d":return Number(j[P++]);case"%j":try{return JSON.stringify(j[P++])}catch(ae){return"[Circular]"}default:return te}}),X=j[P];P<U;X=j[++P])p(X)||!w(X)?$+=" "+X:$+=" "+o(X);return $},le.deprecate=function(F,L){if(m(b.process))return function(){return le.deprecate(F,L).apply(this,arguments)};if(!0===y.noDeprecation)return F;var P=!1;return function(){if(!P){if(y.throwDeprecation)throw new Error(L);y.traceDeprecation?console.trace(L):console.error(L),P=!0}return F.apply(this,arguments)}};var _,e={};function o(F,L){var P={seen:[],stylize:l};return arguments.length>=3&&(P.depth=arguments[2]),arguments.length>=4&&(P.colors=arguments[3]),d(L)?P.showHidden=L:L&&le._extend(P,L),m(P.showHidden)&&(P.showHidden=!1),m(P.depth)&&(P.depth=2),m(P.colors)&&(P.colors=!1),m(P.customInspect)&&(P.customInspect=!0),P.colors&&(P.stylize=a),i(P,F,P.depth)}function a(F,L){var P=o.styles[L];return P?"\x1b["+o.colors[P][0]+"m"+F+"\x1b["+o.colors[P][1]+"m":F}function l(F,L){return F}function i(F,L,P){if(F.customInspect&&L&&M(L.inspect)&&L.inspect!==le.inspect&&(!L.constructor||L.constructor.prototype!==L)){var j=L.inspect(P,F);return g(j)||(j=i(F,j,P)),j}var U=function(G,H){if(m(H))return G.stylize("undefined","undefined");if(g(H)){var Y="'"+JSON.stringify(H).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return G.stylize(Y,"string")}return f(H)?G.stylize(""+H,"number"):d(H)?G.stylize(""+H,"boolean"):p(H)?G.stylize("null","null"):void 0}(F,L);if(U)return U;var H,$=Object.keys(L),X=(H={},$.forEach(function(Y,oe){H[Y]=!0}),H);if(F.showHidden&&($=Object.getOwnPropertyNames(L)),E(L)&&($.indexOf("message")>=0||$.indexOf("description")>=0))return v(L);if(0===$.length){if(M(L))return F.stylize("[Function"+(L.name?": "+L.name:"")+"]","special");if(u(L))return F.stylize(RegExp.prototype.toString.call(L),"regexp");if(c(L))return F.stylize(Date.prototype.toString.call(L),"date");if(E(L))return v(L)}var ae,J="",ee=!1,se=["{","}"];return s(L)&&(ee=!0,se=["[","]"]),M(L)&&(J=" [Function"+(L.name?": "+L.name:"")+"]"),u(L)&&(J=" "+RegExp.prototype.toString.call(L)),c(L)&&(J=" "+Date.prototype.toUTCString.call(L)),E(L)&&(J=" "+v(L)),0!==$.length||ee&&0!=L.length?P<0?u(L)?F.stylize(RegExp.prototype.toString.call(L),"regexp"):F.stylize("[Object]","special"):(F.seen.push(L),ae=ee?function(G,H,Y,oe,W){for(var ne=[],re=0,ce=H.length;re<ce;++re)N(H,String(re))?ne.push(h(G,H,Y,oe,String(re),!0)):ne.push("");return W.forEach(function(fe){fe.match(/^\d+$/)||ne.push(h(G,H,Y,oe,fe,!0))}),ne}(F,L,P,X,$):$.map(function(G){return h(F,L,P,X,G,ee)}),F.seen.pop(),function(G,H,Y){return G.reduce(function(oe,W){return W.indexOf("\n"),oe+W.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Y[0]+(""===H?"":H+"\n ")+" "+G.join(",\n  ")+" "+Y[1]:Y[0]+H+" "+G.join(", ")+" "+Y[1]}(ae,J,se)):se[0]+J+se[1]}function v(F){return"["+Error.prototype.toString.call(F)+"]"}function h(F,L,P,j,U,$){var X,te,ae;if((ae=Object.getOwnPropertyDescriptor(L,U)||{value:L[U]}).get?te=F.stylize(ae.set?"[Getter/Setter]":"[Getter]","special"):ae.set&&(te=F.stylize("[Setter]","special")),N(j,U)||(X="["+U+"]"),te||(F.seen.indexOf(ae.value)<0?(te=p(P)?i(F,ae.value,null):i(F,ae.value,P-1)).indexOf("\n")>-1&&(te=$?te.split("\n").map(function(J){return"  "+J}).join("\n").substr(2):"\n"+te.split("\n").map(function(J){return"   "+J}).join("\n")):te=F.stylize("[Circular]","special")),m(X)){if($&&U.match(/^\d+$/))return te;(X=JSON.stringify(""+U)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(X=X.substr(1,X.length-2),X=F.stylize(X,"name")):(X=X.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),X=F.stylize(X,"string"))}return X+": "+te}function s(F){return Array.isArray(F)}function d(F){return"boolean"==typeof F}function p(F){return null===F}function f(F){return"number"==typeof F}function g(F){return"string"==typeof F}function m(F){return void 0===F}function u(F){return w(F)&&"[object RegExp]"===S(F)}function w(F){return"object"==typeof F&&null!==F}function c(F){return w(F)&&"[object Date]"===S(F)}function E(F){return w(F)&&("[object Error]"===S(F)||F instanceof Error)}function M(F){return"function"==typeof F}function S(F){return Object.prototype.toString.call(F)}function C(F){return F<10?"0"+F.toString(10):F.toString(10)}le.debuglog=function(F){if(m(_)&&(_=y.env.NODE_DEBUG||""),F=F.toUpperCase(),!e[F])if(new RegExp("\\b"+F+"\\b","i").test(_)){var L=y.pid;e[F]=function(){var P=le.format.apply(le,arguments);console.error("%s %d: %s",F,L,P)}}else e[F]=function(){};return e[F]},le.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},le.isArray=s,le.isBoolean=d,le.isNull=p,le.isNullOrUndefined=function(F){return null==F},le.isNumber=f,le.isString=g,le.isSymbol=function(F){return"symbol"==typeof F},le.isUndefined=m,le.isRegExp=u,le.isObject=w,le.isDate=c,le.isError=E,le.isFunction=M,le.isPrimitive=function(F){return null===F||"boolean"==typeof F||"number"==typeof F||"string"==typeof F||"symbol"==typeof F||void 0===F},le.isBuffer=x("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var F=new Date,L=[C(F.getHours()),C(F.getMinutes()),C(F.getSeconds())].join(":");return[F.getDate(),O[F.getMonth()],L].join(" ")}function N(F,L){return Object.prototype.hasOwnProperty.call(F,L)}le.log=function(){console.log("%s - %s",I(),le.format.apply(le,arguments))},le.inherits=x("inherits"),le._extend=function(F,L){if(!L||!w(L))return F;for(var P=Object.keys(L),j=P.length;j--;)F[P[j]]=L[P[j]];return F}}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(x,ue,le){"use strict";le.byteLength=function(i){var v=a(i),s=v[1];return 3*(v[0]+s)/4-s},le.toByteArray=function(i){var v,h,c,s=a(i),d=s[0],p=s[1],f=new T(3*(d+(c=p))/4-c),g=0,m=p>0?d-4:d;for(h=0;h<m;h+=4)v=b[i.charCodeAt(h)]<<18|b[i.charCodeAt(h+1)]<<12|b[i.charCodeAt(h+2)]<<6|b[i.charCodeAt(h+3)],f[g++]=v>>16&255,f[g++]=v>>8&255,f[g++]=255&v;return 2===p&&(v=b[i.charCodeAt(h)]<<2|b[i.charCodeAt(h+1)]>>4,f[g++]=255&v),1===p&&(v=b[i.charCodeAt(h)]<<10|b[i.charCodeAt(h+1)]<<4|b[i.charCodeAt(h+2)]>>2,f[g++]=v>>8&255,f[g++]=255&v),f},le.fromByteArray=function(i){for(var v,h=i.length,s=h%3,d=[],p=0,f=h-s;p<f;p+=16383)d.push(l(i,p,p+16383>f?f:p+16383));return 1===s?d.push(y[(v=i[h-1])>>2]+y[v<<4&63]+"=="):2===s&&d.push(y[(v=(i[h-2]<<8)+i[h-1])>>10]+y[v>>4&63]+y[v<<2&63]+"="),d.join("")};for(var y=[],b=[],T="undefined"!=typeof Uint8Array?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=_.length;e<o;++e)y[e]=_[e],b[_.charCodeAt(e)]=e;function a(i){var v=i.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=i.indexOf("=");return-1===h&&(h=v),[h,h===v?0:4-h%4]}function l(i,v,h){for(var d,p=[],f=v;f<h;f+=3)p.push(y[(d=(i[f]<<16&16711680)+(i[f+1]<<8&65280)+(255&i[f+2]))>>18&63]+y[d>>12&63]+y[d>>6&63]+y[63&d]);return p.join("")}b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63},{}],80:[function(x,ue,le){"use strict";function y(a,l,i,v,h){for(var s=h+1;v<=h;){var d=v+h>>>1,p=a[d];(void 0!==i?i(p,l):p-l)>=0?(s=d,h=d-1):v=d+1}return s}function b(a,l,i,v,h){for(var s=h+1;v<=h;){var d=v+h>>>1,p=a[d];(void 0!==i?i(p,l):p-l)>0?(s=d,h=d-1):v=d+1}return s}function T(a,l,i,v,h){for(var s=v-1;v<=h;){var d=v+h>>>1,p=a[d];(void 0!==i?i(p,l):p-l)<0?(s=d,v=d+1):h=d-1}return s}function _(a,l,i,v,h){for(var s=v-1;v<=h;){var d=v+h>>>1,p=a[d];(void 0!==i?i(p,l):p-l)<=0?(s=d,v=d+1):h=d-1}return s}function e(a,l,i,v,h){for(;v<=h;){var s=v+h>>>1,d=a[s],p=void 0!==i?i(d,l):d-l;if(0===p)return s;p<=0?v=s+1:h=s-1}return-1}function o(a,l,i,v,h,s){return"function"==typeof i?s(a,l,i,void 0===v?0:0|v,void 0===h?a.length-1:0|h):s(a,l,void 0,void 0===i?0:0|i,void 0===v?a.length-1:0|v)}ue.exports={ge:function(a,l,i,v,h){return o(a,l,i,v,h,y)},gt:function(a,l,i,v,h){return o(a,l,i,v,h,b)},lt:function(a,l,i,v,h){return o(a,l,i,v,h,T)},le:function(a,l,i,v,h){return o(a,l,i,v,h,_)},eq:function(a,l,i,v,h){return o(a,l,i,v,h,e)}}},{}],81:[function(x,ue,le){"use strict";function y(T){var _=32;return(T&=-T)&&_--,65535&T&&(_-=16),16711935&T&&(_-=8),252645135&T&&(_-=4),858993459&T&&(_-=2),1431655765&T&&(_-=1),_}le.INT_BITS=32,le.INT_MAX=2147483647,le.INT_MIN=-1<<31,le.sign=function(T){return(T>0)-(T<0)},le.abs=function(T){var _=T>>31;return(T^_)-_},le.min=function(T,_){return _^(T^_)&-(T<_)},le.max=function(T,_){return T^(T^_)&-(T<_)},le.isPow2=function(T){return!(T&T-1||!T)},le.log2=function(T){var _,e;return _=(T>65535)<<4,_|=e=((T>>>=_)>255)<<3,_|=e=((T>>>=e)>15)<<2,(_|=e=((T>>>=e)>3)<<1)|(T>>>=e)>>1},le.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},le.popCount=function(T){return 16843009*((T=(858993459&(T-=T>>>1&1431655765))+(T>>>2&858993459))+(T>>>4)&252645135)>>>24},le.countTrailingZeros=y,le.nextPow2=function(T){return T+=0===T,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,1+((T|=T>>>8)|T>>>16)},le.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,(T|=T>>>16)-(T>>>1)},le.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,27030>>>(T&=15)&1};var b=new Array(256);(function(T){for(var _=0;_<256;++_){var e=_,o=_,a=7;for(e>>>=1;e;e>>>=1)o<<=1,o|=1&e,--a;T[_]=o<<a&255}})(b),le.reverse=function(T){return b[255&T]<<24|b[T>>>8&255]<<16|b[T>>>16&255]<<8|b[T>>>24&255]},le.interleave2=function(T,_){return(T=1431655765&((T=858993459&((T=252645135&((T=16711935&((T&=65535)|T<<8))|T<<4))|T<<2))|T<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_&=65535)|_<<8))|_<<4))|_<<2))|_<<1))<<1},le.deinterleave2=function(T,_){return(T=65535&((T=16711935&((T=252645135&((T=858993459&((T=T>>>_&1431655765)|T>>>1))|T>>>2))|T>>>4))|T>>>16))<<16>>16},le.interleave3=function(T,_,e){return T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2),(T|=(_=1227133513&((_=3272356035&((_=251719695&((_=4278190335&((_&=1023)|_<<16))|_<<8))|_<<4))|_<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},le.deinterleave3=function(T,_){return(T=1023&((T=4278190335&((T=251719695&((T=3272356035&((T=T>>>_&1227133513)|T>>>2))|T>>>4))|T>>>8))|T>>>16))<<22>>22},le.nextCombination=function(T){var _=T|T-1;return _+1|(~_&-~_)-1>>>y(T)+1}},{}],82:[function(x,ue,le){"use strict";var y=x("clamp");ue.exports=function(e,o){o||(o={});var a,l,i,v,h,s,p,g,m,u=null==o.cutoff?.25:o.cutoff,w=null==o.radius?8:o.radius,c=o.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!o.width||!o.height)throw Error("For raw data width and height should be provided by options");a=o.width,l=o.height,v=e,s=o.stride?o.stride:Math.floor(e.length/a/l)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(v=(p=e).getContext("2d").getImageData(0,0,a=p.width,l=p.height).data,s=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(v=e.getImageData(0,0,a=(p=e.canvas).width,l=p.height).data,s=4):window.ImageData&&e instanceof window.ImageData&&(a=e.width,l=e.height,v=e.data,s=4);if(i=Math.max(a,l),window.Uint8ClampedArray&&v instanceof window.Uint8ClampedArray||window.Uint8Array&&v instanceof window.Uint8Array)for(h=v,v=Array(a*l),g=0,m=h.length;g<m;g++)v[g]=h[g*s+c]/255;else if(1!==s)throw Error("Raw data can have only 1 value per pixel");var E=Array(a*l),M=Array(a*l),S=Array(i),C=Array(i),O=Array(i+1),I=Array(i);for(g=0,m=a*l;g<m;g++){var N=v[g];E[g]=1===N?0:0===N?b:Math.pow(Math.max(0,.5-N),2),M[g]=1===N?b:0===N?0:Math.pow(Math.max(0,N-.5),2)}T(E,a,l,S,C,I,O),T(M,a,l,S,C,I,O);var F=window.Float32Array?new Float32Array(a*l):new Array(a*l);for(g=0,m=a*l;g<m;g++)F[g]=y(1-((E[g]-M[g])/w+u),0,1);return F};var b=1e20;function T(e,o,a,l,i,v,h){for(var s=0;s<o;s++){for(var d=0;d<a;d++)l[d]=e[d*o+s];for(_(l,i,v,h,a),d=0;d<a;d++)e[d*o+s]=i[d]}for(d=0;d<a;d++){for(s=0;s<o;s++)l[s]=e[d*o+s];for(_(l,i,v,h,o),s=0;s<o;s++)e[d*o+s]=Math.sqrt(i[s])}}function _(e,o,a,l,i){a[0]=0,l[0]=-b,l[1]=+b;for(var v=1,h=0;v<i;v++){for(var s=(e[v]+v*v-(e[a[h]]+a[h]*a[h]))/(2*v-2*a[h]);s<=l[h];)h--,s=(e[v]+v*v-(e[a[h]]+a[h]*a[h]))/(2*v-2*a[h]);a[++h]=v,l[h]=s,l[h+1]=+b}for(v=0,h=0;v<i;v++){for(;l[h+1]<v;)h++;o[v]=(v-a[h])*(v-a[h])+e[a[h]]}}},{clamp:86}],83:[function(x,ue,le){},{}],84:[function(x,ue,le){"use strict";var y,b="object"==typeof Reflect?Reflect:null,T=b&&"function"==typeof b.apply?b.apply:function(f,g,m){return Function.prototype.apply.call(f,g,m)};y=b&&"function"==typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var _=Number.isNaN||function(f){return f!=f};function e(){e.init.call(this)}ue.exports=e,ue.exports.once=function(f,g){return new Promise(function(m,u){function w(){void 0!==c&&f.removeListener("error",c),m([].slice.call(arguments))}var c;"error"!==g&&(c=function(E){f.removeListener(g,w),u(E)},f.once("error",c)),f.once(g,w)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var o=10;function a(f){if("function"!=typeof f)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}function l(f){return void 0===f._maxListeners?e.defaultMaxListeners:f._maxListeners}function i(f,g,m,u){var w,c,E;if(a(m),void 0===(c=f._events)?(c=f._events=Object.create(null),f._eventsCount=0):(void 0!==c.newListener&&(f.emit("newListener",g,m.listener?m.listener:m),c=f._events),E=c[g]),void 0===E)E=c[g]=m,++f._eventsCount;else if("function"==typeof E?E=c[g]=u?[m,E]:[E,m]:u?E.unshift(m):E.push(m),(w=l(f))>0&&E.length>w&&!E.warned){E.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");S.name="MaxListenersExceededWarning",S.emitter=f,S.type=g,S.count=E.length,console&&console.warn&&console.warn(S)}return f}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(f,g,m){var u={fired:!1,wrapFn:void 0,target:f,type:g,listener:m},w=v.bind(u);return w.listener=m,u.wrapFn=w,w}function s(f,g,m){var u=f._events;if(void 0===u)return[];var w=u[g];return void 0===w?[]:"function"==typeof w?m?[w.listener||w]:[w]:m?function(c){for(var E=new Array(c.length),M=0;M<E.length;++M)E[M]=c[M].listener||c[M];return E}(w):p(w,w.length)}function d(f){var g=this._events;if(void 0!==g){var m=g[f];if("function"==typeof m)return 1;if(void 0!==m)return m.length}return 0}function p(f,g){for(var m=new Array(g),u=0;u<g;++u)m[u]=f[u];return m}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(f){if("number"!=typeof f||f<0||_(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");o=f}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(f){if("number"!=typeof f||f<0||_(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},e.prototype.getMaxListeners=function(){return l(this)},e.prototype.emit=function(f){for(var g=[],m=1;m<arguments.length;m++)g.push(arguments[m]);var u="error"===f,w=this._events;if(void 0!==w)u=u&&void 0===w.error;else if(!u)return!1;if(u){var c;if(g.length>0&&(c=g[0]),c instanceof Error)throw c;var E=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw E.context=c,E}var M=w[f];if(void 0===M)return!1;if("function"==typeof M)T(M,this,g);else{var S=M.length,C=p(M,S);for(m=0;m<S;++m)T(C[m],this,g)}return!0},e.prototype.on=e.prototype.addListener=function(f,g){return i(this,f,g,!1)},e.prototype.prependListener=function(f,g){return i(this,f,g,!0)},e.prototype.once=function(f,g){return a(g),this.on(f,h(this,f,g)),this},e.prototype.prependOnceListener=function(f,g){return a(g),this.prependListener(f,h(this,f,g)),this},e.prototype.off=e.prototype.removeListener=function(f,g){var m,u,w,c,E;if(a(g),void 0===(u=this._events))return this;if(void 0===(m=u[f]))return this;if(m===g||m.listener===g)0==--this._eventsCount?this._events=Object.create(null):(delete u[f],u.removeListener&&this.emit("removeListener",f,m.listener||g));else if("function"!=typeof m){for(w=-1,c=m.length-1;c>=0;c--)if(m[c]===g||m[c].listener===g){E=m[c].listener,w=c;break}if(w<0)return this;0===w?m.shift():function(M,S){for(;S+1<M.length;S++)M[S]=M[S+1];M.pop()}(m,w),1===m.length&&(u[f]=m[0]),void 0!==u.removeListener&&this.emit("removeListener",f,E||g)}return this},e.prototype.removeAllListeners=function(f){var g,m,u;if(void 0===(m=this._events))return this;if(void 0===m.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==m[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete m[f]),this;if(0===arguments.length){var w,c=Object.keys(m);for(u=0;u<c.length;++u)"removeListener"!==(w=c[u])&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(g=m[f]))this.removeListener(f,g);else if(void 0!==g)for(u=g.length-1;u>=0;u--)this.removeListener(f,g[u]);return this},e.prototype.listeners=function(f){return s(this,f,!0)},e.prototype.rawListeners=function(f){return s(this,f,!1)},e.listenerCount=function(f,g){return"function"==typeof f.listenerCount?f.listenerCount(g):d.call(f,g)},e.prototype.listenerCount=d,e.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]}},{}],85:[function(x,ue,le){(function(y){(function(){"use strict";var b=x("base64-js"),T=x("ieee754");function _(G){if(G>2147483647)throw new RangeError('The value "'+G+'" is invalid for option "size"');var H=new Uint8Array(G);return H.__proto__=e.prototype,H}function e(G,H,Y){if("number"==typeof G){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return l(G)}return o(G,H,Y)}function o(G,H,Y){if("string"==typeof G)return function(ne,re){if("string"==typeof re&&""!==re||(re="utf8"),!e.isEncoding(re))throw new TypeError("Unknown encoding: "+re);var ce=0|h(ne,re),fe=_(ce),me=fe.write(ne,re);return me!==ce&&(fe=fe.slice(0,me)),fe}(G,H);if(ArrayBuffer.isView(G))return i(G);if(null==G)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(ee(G,ArrayBuffer)||G&&ee(G.buffer,ArrayBuffer))return function(ne,re,ce){if(re<0||ne.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(ne.byteLength<re+(ce||0))throw new RangeError('"length" is outside of buffer bounds');var fe;return(fe=void 0===re&&void 0===ce?new Uint8Array(ne):void 0===ce?new Uint8Array(ne,re):new Uint8Array(ne,re,ce)).__proto__=e.prototype,fe}(G,H,Y);if("number"==typeof G)throw new TypeError('The "value" argument must not be of type number. Received type number');var oe=G.valueOf&&G.valueOf();if(null!=oe&&oe!==G)return e.from(oe,H,Y);var W=function(ne){if(e.isBuffer(ne)){var re=0|v(ne.length),ce=_(re);return 0===ce.length||ne.copy(ce,0,0,re),ce}return void 0!==ne.length?"number"!=typeof ne.length||se(ne.length)?_(0):i(ne):"Buffer"===ne.type&&Array.isArray(ne.data)?i(ne.data):void 0}(G);if(W)return W;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof G[Symbol.toPrimitive])return e.from(G[Symbol.toPrimitive]("string"),H,Y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}function a(G){if("number"!=typeof G)throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function l(G){return a(G),_(G<0?0:0|v(G))}function i(G){for(var H=G.length<0?0:0|v(G.length),Y=_(H),oe=0;oe<H;oe+=1)Y[oe]=255&G[oe];return Y}function v(G){if(G>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|G}function h(G,H){if(e.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||ee(G,ArrayBuffer))return G.byteLength;if("string"!=typeof G)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);var Y=G.length,oe=arguments.length>2&&!0===arguments[2];if(!oe&&0===Y)return 0;for(var W=!1;;)switch(H){case"ascii":case"latin1":case"binary":return Y;case"utf8":case"utf-8":return te(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Y;case"hex":return Y>>>1;case"base64":return ae(G).length;default:if(W)return oe?-1:te(G).length;H=(""+H).toLowerCase(),W=!0}}function s(G,H,Y){var oe=!1;if((void 0===H||H<0)&&(H=0),H>this.length||((void 0===Y||Y>this.length)&&(Y=this.length),Y<=0)||(Y>>>=0)<=(H>>>=0))return"";for(G||(G="utf8");;)switch(G){case"hex":return I(this,H,Y);case"utf8":case"utf-8":return S(this,H,Y);case"ascii":return C(this,H,Y);case"latin1":case"binary":return O(this,H,Y);case"base64":return M(this,H,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,H,Y);default:if(oe)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),oe=!0}}function d(G,H,Y){var oe=G[H];G[H]=G[Y],G[Y]=oe}function p(G,H,Y,oe,W){if(0===G.length)return-1;if("string"==typeof Y?(oe=Y,Y=0):Y>2147483647?Y=2147483647:Y<-2147483648&&(Y=-2147483648),se(Y=+Y)&&(Y=W?0:G.length-1),Y<0&&(Y=G.length+Y),Y>=G.length){if(W)return-1;Y=G.length-1}else if(Y<0){if(!W)return-1;Y=0}if("string"==typeof H&&(H=e.from(H,oe)),e.isBuffer(H))return 0===H.length?-1:f(G,H,Y,oe,W);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?W?Uint8Array.prototype.indexOf.call(G,H,Y):Uint8Array.prototype.lastIndexOf.call(G,H,Y):f(G,[H],Y,oe,W);throw new TypeError("val must be string, number or Buffer")}function f(G,H,Y,oe,W){var ne,re=1,ce=G.length,fe=H.length;if(void 0!==oe&&("ucs2"===(oe=String(oe).toLowerCase())||"ucs-2"===oe||"utf16le"===oe||"utf-16le"===oe)){if(G.length<2||H.length<2)return-1;re=2,ce/=2,fe/=2,Y/=2}function me(Te,Le){return 1===re?Te[Le]:Te.readUInt16BE(Le*re)}if(W){var pe=-1;for(ne=Y;ne<ce;ne++)if(me(G,ne)===me(H,-1===pe?0:ne-pe)){if(-1===pe&&(pe=ne),ne-pe+1===fe)return pe*re}else-1!==pe&&(ne-=ne-pe),pe=-1}else for(Y+fe>ce&&(Y=ce-fe),ne=Y;ne>=0;ne--){for(var we=!0,ye=0;ye<fe;ye++)if(me(G,ne+ye)!==me(H,ye)){we=!1;break}if(we)return ne}return-1}function g(G,H,Y,oe){Y=Number(Y)||0;var W=G.length-Y;oe?(oe=Number(oe))>W&&(oe=W):oe=W;var ne=H.length;oe>ne/2&&(oe=ne/2);for(var re=0;re<oe;++re){var ce=parseInt(H.substr(2*re,2),16);if(se(ce))return re;G[Y+re]=ce}return re}function m(G,H,Y,oe){return J(te(H,G.length-Y),G,Y,oe)}function u(G,H,Y,oe){return J(function(W){for(var ne=[],re=0;re<W.length;++re)ne.push(255&W.charCodeAt(re));return ne}(H),G,Y,oe)}function w(G,H,Y,oe){return u(G,H,Y,oe)}function c(G,H,Y,oe){return J(ae(H),G,Y,oe)}function E(G,H,Y,oe){return J(function(W,ne){for(var re,ce,me=[],pe=0;pe<W.length&&!((ne-=2)<0);++pe)ce=(re=W.charCodeAt(pe))>>8,me.push(re%256),me.push(ce);return me}(H,G.length-Y),G,Y,oe)}function M(G,H,Y){return b.fromByteArray(0===H&&Y===G.length?G:G.slice(H,Y))}function S(G,H,Y){Y=Math.min(G.length,Y);for(var oe=[],W=H;W<Y;){var ne,re,ce,fe,me=G[W],pe=null,we=me>239?4:me>223?3:me>191?2:1;if(W+we<=Y)switch(we){case 1:me<128&&(pe=me);break;case 2:128==(192&(ne=G[W+1]))&&(fe=(31&me)<<6|63&ne)>127&&(pe=fe);break;case 3:re=G[W+2],128==(192&(ne=G[W+1]))&&128==(192&re)&&(fe=(15&me)<<12|(63&ne)<<6|63&re)>2047&&(fe<55296||fe>57343)&&(pe=fe);break;case 4:re=G[W+2],ce=G[W+3],128==(192&(ne=G[W+1]))&&128==(192&re)&&128==(192&ce)&&(fe=(15&me)<<18|(63&ne)<<12|(63&re)<<6|63&ce)>65535&&fe<1114112&&(pe=fe)}null===pe?(pe=65533,we=1):pe>65535&&(oe.push((pe-=65536)>>>10&1023|55296),pe=56320|1023&pe),oe.push(pe),W+=we}return function(ye){var Te=ye.length;if(Te<=4096)return String.fromCharCode.apply(String,ye);for(var Le="",Oe=0;Oe<Te;)Le+=String.fromCharCode.apply(String,ye.slice(Oe,Oe+=4096));return Le}(oe)}function C(G,H,Y){var oe="";Y=Math.min(G.length,Y);for(var W=H;W<Y;++W)oe+=String.fromCharCode(127&G[W]);return oe}function O(G,H,Y){var oe="";Y=Math.min(G.length,Y);for(var W=H;W<Y;++W)oe+=String.fromCharCode(G[W]);return oe}function I(G,H,Y){var oe=G.length;(!H||H<0)&&(H=0),(!Y||Y<0||Y>oe)&&(Y=oe);for(var W="",ne=H;ne<Y;++ne)W+=X(G[ne]);return W}function N(G,H,Y){for(var oe=G.slice(H,Y),W="",ne=0;ne<oe.length;ne+=2)W+=String.fromCharCode(oe[ne]+256*oe[ne+1]);return W}function F(G,H,Y){if(G%1!=0||G<0)throw new RangeError("offset is not uint");if(G+H>Y)throw new RangeError("Trying to access beyond buffer length")}function L(G,H,Y,oe,W,ne){if(!e.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>W||H<ne)throw new RangeError('"value" argument is out of bounds');if(Y+oe>G.length)throw new RangeError("Index out of range")}function P(G,H,Y,oe,W,ne){if(Y+oe>G.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("Index out of range")}function j(G,H,Y,oe,W){return H=+H,Y>>>=0,W||P(G,0,Y,4),T.write(G,H,Y,oe,23,4),Y+4}function U(G,H,Y,oe,W){return H=+H,Y>>>=0,W||P(G,0,Y,8),T.write(G,H,Y,oe,52,8),Y+8}le.Buffer=e,le.SlowBuffer=function(G){return+G!=G&&(G=0),e.alloc(+G)},le.INSPECT_MAX_BYTES=50,le.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var G=new Uint8Array(1);return G.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===G.foo()}catch(H){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(G,H,Y){return o(G,H,Y)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(G,H,Y){return W=H,ne=Y,a(oe=G),oe<=0?_(oe):void 0!==W?"string"==typeof ne?_(oe).fill(W,ne):_(oe).fill(W):_(oe);var oe,W,ne},e.allocUnsafe=function(G){return l(G)},e.allocUnsafeSlow=function(G){return l(G)},e.isBuffer=function(G){return null!=G&&!0===G._isBuffer&&G!==e.prototype},e.compare=function(G,H){if(ee(G,Uint8Array)&&(G=e.from(G,G.offset,G.byteLength)),ee(H,Uint8Array)&&(H=e.from(H,H.offset,H.byteLength)),!e.isBuffer(G)||!e.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(G===H)return 0;for(var Y=G.length,oe=H.length,W=0,ne=Math.min(Y,oe);W<ne;++W)if(G[W]!==H[W]){Y=G[W],oe=H[W];break}return Y<oe?-1:oe<Y?1:0},e.isEncoding=function(G){switch(String(G).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(G,H){if(!Array.isArray(G))throw new TypeError('"list" argument must be an Array of Buffers');if(0===G.length)return e.alloc(0);var Y;if(void 0===H)for(H=0,Y=0;Y<G.length;++Y)H+=G[Y].length;var oe=e.allocUnsafe(H),W=0;for(Y=0;Y<G.length;++Y){var ne=G[Y];if(ee(ne,Uint8Array)&&(ne=e.from(ne)),!e.isBuffer(ne))throw new TypeError('"list" argument must be an Array of Buffers');ne.copy(oe,W),W+=ne.length}return oe},e.byteLength=h,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var G=this.length;if(G%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<G;H+=2)d(this,H,H+1);return this},e.prototype.swap32=function(){var G=this.length;if(G%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<G;H+=4)d(this,H,H+3),d(this,H+1,H+2);return this},e.prototype.swap64=function(){var G=this.length;if(G%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<G;H+=8)d(this,H,H+7),d(this,H+1,H+6),d(this,H+2,H+5),d(this,H+3,H+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var G=this.length;return 0===G?"":0===arguments.length?S(this,0,G):s.apply(this,arguments)},e.prototype.equals=function(G){if(!e.isBuffer(G))throw new TypeError("Argument must be a Buffer");return this===G||0===e.compare(this,G)},e.prototype.inspect=function(){var G="",H=le.INSPECT_MAX_BYTES;return G=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(G+=" ... "),"<Buffer "+G+">"},e.prototype.compare=function(G,H,Y,oe,W){if(ee(G,Uint8Array)&&(G=e.from(G,G.offset,G.byteLength)),!e.isBuffer(G))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof G);if(void 0===H&&(H=0),void 0===Y&&(Y=G?G.length:0),void 0===oe&&(oe=0),void 0===W&&(W=this.length),H<0||Y>G.length||oe<0||W>this.length)throw new RangeError("out of range index");if(oe>=W&&H>=Y)return 0;if(oe>=W)return-1;if(H>=Y)return 1;if(this===G)return 0;for(var ne=(W>>>=0)-(oe>>>=0),re=(Y>>>=0)-(H>>>=0),ce=Math.min(ne,re),fe=this.slice(oe,W),me=G.slice(H,Y),pe=0;pe<ce;++pe)if(fe[pe]!==me[pe]){ne=fe[pe],re=me[pe];break}return ne<re?-1:re<ne?1:0},e.prototype.includes=function(G,H,Y){return-1!==this.indexOf(G,H,Y)},e.prototype.indexOf=function(G,H,Y){return p(this,G,H,Y,!0)},e.prototype.lastIndexOf=function(G,H,Y){return p(this,G,H,Y,!1)},e.prototype.write=function(G,H,Y,oe){if(void 0===H)oe="utf8",Y=this.length,H=0;else if(void 0===Y&&"string"==typeof H)oe=H,Y=this.length,H=0;else{if(!isFinite(H))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");H>>>=0,isFinite(Y)?(Y>>>=0,void 0===oe&&(oe="utf8")):(oe=Y,Y=void 0)}var W=this.length-H;if((void 0===Y||Y>W)&&(Y=W),G.length>0&&(Y<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");for(var ne=!1;;)switch(oe){case"hex":return g(this,G,H,Y);case"utf8":case"utf-8":return m(this,G,H,Y);case"ascii":return u(this,G,H,Y);case"latin1":case"binary":return w(this,G,H,Y);case"base64":return c(this,G,H,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,G,H,Y);default:if(ne)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),ne=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(G,H){var Y=this.length;(G=~~G)<0?(G+=Y)<0&&(G=0):G>Y&&(G=Y),(H=void 0===H?Y:~~H)<0?(H+=Y)<0&&(H=0):H>Y&&(H=Y),H<G&&(H=G);var oe=this.subarray(G,H);return oe.__proto__=e.prototype,oe},e.prototype.readUIntLE=function(G,H,Y){G>>>=0,H>>>=0,Y||F(G,H,this.length);for(var oe=this[G],W=1,ne=0;++ne<H&&(W*=256);)oe+=this[G+ne]*W;return oe},e.prototype.readUIntBE=function(G,H,Y){G>>>=0,H>>>=0,Y||F(G,H,this.length);for(var oe=this[G+--H],W=1;H>0&&(W*=256);)oe+=this[G+--H]*W;return oe},e.prototype.readUInt8=function(G,H){return G>>>=0,H||F(G,1,this.length),this[G]},e.prototype.readUInt16LE=function(G,H){return G>>>=0,H||F(G,2,this.length),this[G]|this[G+1]<<8},e.prototype.readUInt16BE=function(G,H){return G>>>=0,H||F(G,2,this.length),this[G]<<8|this[G+1]},e.prototype.readUInt32LE=function(G,H){return G>>>=0,H||F(G,4,this.length),(this[G]|this[G+1]<<8|this[G+2]<<16)+16777216*this[G+3]},e.prototype.readUInt32BE=function(G,H){return G>>>=0,H||F(G,4,this.length),16777216*this[G]+(this[G+1]<<16|this[G+2]<<8|this[G+3])},e.prototype.readIntLE=function(G,H,Y){G>>>=0,H>>>=0,Y||F(G,H,this.length);for(var oe=this[G],W=1,ne=0;++ne<H&&(W*=256);)oe+=this[G+ne]*W;return oe>=(W*=128)&&(oe-=Math.pow(2,8*H)),oe},e.prototype.readIntBE=function(G,H,Y){G>>>=0,H>>>=0,Y||F(G,H,this.length);for(var oe=H,W=1,ne=this[G+--oe];oe>0&&(W*=256);)ne+=this[G+--oe]*W;return ne>=(W*=128)&&(ne-=Math.pow(2,8*H)),ne},e.prototype.readInt8=function(G,H){return G>>>=0,H||F(G,1,this.length),128&this[G]?-1*(255-this[G]+1):this[G]},e.prototype.readInt16LE=function(G,H){G>>>=0,H||F(G,2,this.length);var Y=this[G]|this[G+1]<<8;return 32768&Y?4294901760|Y:Y},e.prototype.readInt16BE=function(G,H){G>>>=0,H||F(G,2,this.length);var Y=this[G+1]|this[G]<<8;return 32768&Y?4294901760|Y:Y},e.prototype.readInt32LE=function(G,H){return G>>>=0,H||F(G,4,this.length),this[G]|this[G+1]<<8|this[G+2]<<16|this[G+3]<<24},e.prototype.readInt32BE=function(G,H){return G>>>=0,H||F(G,4,this.length),this[G]<<24|this[G+1]<<16|this[G+2]<<8|this[G+3]},e.prototype.readFloatLE=function(G,H){return G>>>=0,H||F(G,4,this.length),T.read(this,G,!0,23,4)},e.prototype.readFloatBE=function(G,H){return G>>>=0,H||F(G,4,this.length),T.read(this,G,!1,23,4)},e.prototype.readDoubleLE=function(G,H){return G>>>=0,H||F(G,8,this.length),T.read(this,G,!0,52,8)},e.prototype.readDoubleBE=function(G,H){return G>>>=0,H||F(G,8,this.length),T.read(this,G,!1,52,8)},e.prototype.writeUIntLE=function(G,H,Y,oe){G=+G,H>>>=0,Y>>>=0,oe||L(this,G,H,Y,Math.pow(2,8*Y)-1,0);var W=1,ne=0;for(this[H]=255&G;++ne<Y&&(W*=256);)this[H+ne]=G/W&255;return H+Y},e.prototype.writeUIntBE=function(G,H,Y,oe){G=+G,H>>>=0,Y>>>=0,oe||L(this,G,H,Y,Math.pow(2,8*Y)-1,0);var W=Y-1,ne=1;for(this[H+W]=255&G;--W>=0&&(ne*=256);)this[H+W]=G/ne&255;return H+Y},e.prototype.writeUInt8=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,1,255,0),this[H]=255&G,H+1},e.prototype.writeUInt16LE=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,2,65535,0),this[H]=255&G,this[H+1]=G>>>8,H+2},e.prototype.writeUInt16BE=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,2,65535,0),this[H]=G>>>8,this[H+1]=255&G,H+2},e.prototype.writeUInt32LE=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,4,4294967295,0),this[H+3]=G>>>24,this[H+2]=G>>>16,this[H+1]=G>>>8,this[H]=255&G,H+4},e.prototype.writeUInt32BE=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,4,4294967295,0),this[H]=G>>>24,this[H+1]=G>>>16,this[H+2]=G>>>8,this[H+3]=255&G,H+4},e.prototype.writeIntLE=function(G,H,Y,oe){if(G=+G,H>>>=0,!oe){var W=Math.pow(2,8*Y-1);L(this,G,H,Y,W-1,-W)}var ne=0,re=1,ce=0;for(this[H]=255&G;++ne<Y&&(re*=256);)G<0&&0===ce&&0!==this[H+ne-1]&&(ce=1),this[H+ne]=(G/re>>0)-ce&255;return H+Y},e.prototype.writeIntBE=function(G,H,Y,oe){if(G=+G,H>>>=0,!oe){var W=Math.pow(2,8*Y-1);L(this,G,H,Y,W-1,-W)}var ne=Y-1,re=1,ce=0;for(this[H+ne]=255&G;--ne>=0&&(re*=256);)G<0&&0===ce&&0!==this[H+ne+1]&&(ce=1),this[H+ne]=(G/re>>0)-ce&255;return H+Y},e.prototype.writeInt8=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,1,127,-128),G<0&&(G=255+G+1),this[H]=255&G,H+1},e.prototype.writeInt16LE=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,2,32767,-32768),this[H]=255&G,this[H+1]=G>>>8,H+2},e.prototype.writeInt16BE=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,2,32767,-32768),this[H]=G>>>8,this[H+1]=255&G,H+2},e.prototype.writeInt32LE=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,4,2147483647,-2147483648),this[H]=255&G,this[H+1]=G>>>8,this[H+2]=G>>>16,this[H+3]=G>>>24,H+4},e.prototype.writeInt32BE=function(G,H,Y){return G=+G,H>>>=0,Y||L(this,G,H,4,2147483647,-2147483648),G<0&&(G=4294967295+G+1),this[H]=G>>>24,this[H+1]=G>>>16,this[H+2]=G>>>8,this[H+3]=255&G,H+4},e.prototype.writeFloatLE=function(G,H,Y){return j(this,G,H,!0,Y)},e.prototype.writeFloatBE=function(G,H,Y){return j(this,G,H,!1,Y)},e.prototype.writeDoubleLE=function(G,H,Y){return U(this,G,H,!0,Y)},e.prototype.writeDoubleBE=function(G,H,Y){return U(this,G,H,!1,Y)},e.prototype.copy=function(G,H,Y,oe){if(!e.isBuffer(G))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),oe||0===oe||(oe=this.length),H>=G.length&&(H=G.length),H||(H=0),oe>0&&oe<Y&&(oe=Y),oe===Y||0===G.length||0===this.length)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),G.length-H<oe-Y&&(oe=G.length-H+Y);var W=oe-Y;if(this===G&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(H,Y,oe);else if(this===G&&Y<H&&H<oe)for(var ne=W-1;ne>=0;--ne)G[ne+H]=this[ne+Y];else Uint8Array.prototype.set.call(G,this.subarray(Y,oe),H);return W},e.prototype.fill=function(G,H,Y,oe){if("string"==typeof G){if("string"==typeof H?(oe=H,H=0,Y=this.length):"string"==typeof Y&&(oe=Y,Y=this.length),void 0!==oe&&"string"!=typeof oe)throw new TypeError("encoding must be a string");if("string"==typeof oe&&!e.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(1===G.length){var W=G.charCodeAt(0);("utf8"===oe&&W<128||"latin1"===oe)&&(G=W)}}else"number"==typeof G&&(G&=255);if(H<0||this.length<H||this.length<Y)throw new RangeError("Out of range index");if(Y<=H)return this;var ne;if(H>>>=0,Y=void 0===Y?this.length:Y>>>0,G||(G=0),"number"==typeof G)for(ne=H;ne<Y;++ne)this[ne]=G;else{var re=e.isBuffer(G)?G:e.from(G,oe),ce=re.length;if(0===ce)throw new TypeError('The value "'+G+'" is invalid for argument "value"');for(ne=0;ne<Y-H;++ne)this[ne+H]=re[ne%ce]}return this};var $=/[^+/0-9A-Za-z-_]/g;function X(G){return G<16?"0"+G.toString(16):G.toString(16)}function te(G,H){var Y;H=H||1/0;for(var oe=G.length,W=null,ne=[],re=0;re<oe;++re){if((Y=G.charCodeAt(re))>55295&&Y<57344){if(!W){if(Y>56319){(H-=3)>-1&&ne.push(239,191,189);continue}if(re+1===oe){(H-=3)>-1&&ne.push(239,191,189);continue}W=Y;continue}if(Y<56320){(H-=3)>-1&&ne.push(239,191,189),W=Y;continue}Y=65536+(W-55296<<10|Y-56320)}else W&&(H-=3)>-1&&ne.push(239,191,189);if(W=null,Y<128){if((H-=1)<0)break;ne.push(Y)}else if(Y<2048){if((H-=2)<0)break;ne.push(Y>>6|192,63&Y|128)}else if(Y<65536){if((H-=3)<0)break;ne.push(Y>>12|224,Y>>6&63|128,63&Y|128)}else{if(!(Y<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;ne.push(Y>>18|240,Y>>12&63|128,Y>>6&63|128,63&Y|128)}}return ne}function ae(G){return b.toByteArray(function(H){if((H=(H=H.split("=")[0]).trim().replace($,"")).length<2)return"";for(;H.length%4!=0;)H+="=";return H}(G))}function J(G,H,Y,oe){for(var W=0;W<oe&&!(W+Y>=H.length||W>=G.length);++W)H[W+Y]=G[W];return W}function ee(G,H){return G instanceof H||null!=G&&null!=G.constructor&&null!=G.constructor.name&&G.constructor.name===H.name}function se(G){return G!=G}}).call(this)}).call(this,x("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(x,ue,le){ue.exports=function(y,b,T){return b<T?y<b?b:y>T?T:y:y<T?T:y>b?b:y}},{}],87:[function(x,ue,le){"use strict";var y=x("clamp");function b(T,_){null==_&&(_=!0);var e=T[0],o=T[1],a=T[2],l=T[3];return null==l&&(l=_?1:255),_&&(e*=255,o*=255,a*=255,l*=255),16777216*(e=255&y(e,0,255))+((o=255&y(o,0,255))<<16)+((a=255&y(a,0,255))<<8)+(255&y(l,0,255))}ue.exports=b,ue.exports.to=b,ue.exports.from=function(T,_){var e=(T=+T)>>>24,o=(16711680&T)>>>16,a=(65280&T)>>>8,l=255&T;return!1===_?[e,o,a,l]:[e/255,o/255,a/255,l/255]}},{clamp:86}],88:[function(x,ue,le){"use strict";ue.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(x,ue,le){"use strict";var y=x("color-rgba"),b=x("clamp"),T=x("dtype");ue.exports=function(_,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var l,o=new(T(e))(4),a="uint8"!==e&&"uint8_clamped"!==e;return _.length&&"string"!=typeof _||((_=y(_))[0]/=255,_[1]/=255,_[2]/=255),(l=_)instanceof Uint8Array||l instanceof Uint8ClampedArray||Array.isArray(l)&&(l[0]>1||0===l[0])&&(l[1]>1||0===l[1])&&(l[2]>1||0===l[2])&&(!l[3]||l[3]>1)?(o[0]=_[0],o[1]=_[1],o[2]=_[2],o[3]=null!=_[3]?_[3]:255,a&&(o[0]/=255,o[1]/=255,o[2]/=255,o[3]/=255),o):(a?(o[0]=_[0],o[1]=_[1],o[2]=_[2],o[3]=null!=_[3]?_[3]:1):(o[0]=b(Math.floor(255*_[0]),0,255),o[1]=b(Math.floor(255*_[1]),0,255),o[2]=b(Math.floor(255*_[2]),0,255),o[3]=null==_[3]?255:b(Math.floor(255*_[3]),0,255)),o)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(x,ue,le){(function(y){(function(){"use strict";var b=x("color-name"),T=x("is-plain-obj"),_=x("defined");ue.exports=function(o){var a,l,i=[],v=1;if("string"==typeof o)if(b[o])i=b[o].slice(),l="rgb";else if("transparent"===o)v=0,l="rgb",i=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var h=(p=o.slice(1)).length;v=1,h<=4?(i=[parseInt(p[0]+p[0],16),parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16)],4===h&&(v=parseInt(p[3]+p[3],16)/255)):(i=[parseInt(p[0]+p[1],16),parseInt(p[2]+p[3],16),parseInt(p[4]+p[5],16)],8===h&&(v=parseInt(p[6]+p[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),l="rgb"}else if(a=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var s=a[1],d="rgb"===s,p=s.replace(/a$/,"");l=p,h="cmyk"===p?4:"gray"===p?1:3,i=a[2].trim().split(/\s*,\s*/).map(function(g,m){if(/%$/.test(g))return m===h?parseFloat(g)/100:"rgb"===p?255*parseFloat(g)/100:parseFloat(g);if("h"===p[m]){if(/deg$/.test(g))return parseFloat(g);if(void 0!==e[g])return e[g]}return parseFloat(g)}),s===p&&i.push(1),v=d||void 0===i[h]?1:i[h],i=i.slice(0,h)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(i=o.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),l=o.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(o))if(T(o)){var f=_(o.r,o.red,o.R,null);null!==f?(l="rgb",i=[f,_(o.g,o.green,o.G),_(o.b,o.blue,o.B)]):(l="hsl",i=[_(o.h,o.hue,o.H),_(o.s,o.saturation,o.S),_(o.l,o.lightness,o.L,o.b,o.brightness)]),v=_(o.a,o.alpha,o.opacity,1),null!=o.opacity&&(v/=100)}else(Array.isArray(o)||y.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o))&&(i=[o[0],o[1],o[2]],l="rgb",v=4===o.length?o[3]:1);else l="rgb",i=[o>>>16,(65280&o)>>>8,255&o];return{space:l,values:i,alpha:v}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(x,ue,le){"use strict";var y=x("color-parse"),b=x("color-space/hsl"),T=x("clamp");ue.exports=function(_){var e,o=y(_);return o.space?((e=Array(3))[0]=T(o.values[0],0,255),e[1]=T(o.values[1],0,255),e[2]=T(o.values[2],0,255),"h"===o.space[0]&&(e=b.rgb(e)),e.push(T(o.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(x,ue,le){"use strict";var y=x("./rgb");ue.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(b){var T,_,e,o,a,l=b[0]/360,i=b[1]/100,v=b[2]/100;if(0===i)return[a=255*v,a,a];T=2*v-(_=v<.5?v*(1+i):v+i-v*i),o=[0,0,0];for(var h=0;h<3;h++)(e=l+1/3*-(h-1))<0?e++:e>1&&e--,o[h]=255*(a=6*e<1?T+6*(_-T)*e:2*e<1?_:3*e<2?T+(_-T)*(2/3-e)*6:T);return o}},y.hsl=function(b){var T,_,e=b[0]/255,o=b[1]/255,a=b[2]/255,l=Math.min(e,o,a),i=Math.max(e,o,a),v=i-l;return i===l?T=0:e===i?T=(o-a)/v:o===i?T=2+(a-e)/v:a===i&&(T=4+(e-o)/v),(T=Math.min(60*T,360))<0&&(T+=360),_=(l+i)/2,[T,100*(i===l?0:_<=.5?v/(i+l):v/(2-i-l)),100*_]}},{"./rgb":93}],93:[function(x,ue,le){"use strict";ue.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(x,ue,le){ue.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(x,ue,le){ue.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(x,ue,le){ue.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(x,ue,le){ue.exports=["normal","italic","oblique"]},{}],98:[function(x,ue,le){ue.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(x,ue,le){"use strict";ue.exports={parse:x("./parse"),stringify:x("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(x,ue,le){"use strict";var y=x("css-font-size-keywords");ue.exports={isSize:function(b){return/^[\d\.]/.test(b)||-1!==b.indexOf("/")||-1!==y.indexOf(b)}}},{"css-font-size-keywords":95}],101:[function(x,ue,le){"use strict";var y=x("unquote"),b=x("css-global-keywords"),T=x("css-system-font-keywords"),_=x("css-font-weight-keywords"),e=x("css-font-style-keywords"),o=x("css-font-stretch-keywords"),a=x("string-split-by"),l=x("./lib/util").isSize;ue.exports=v;var i=v.cache={};function v(s){if("string"!=typeof s)throw new Error("Font argument must be a string.");if(i[s])return i[s];if(""===s)throw new Error("Cannot parse an empty string.");if(-1!==T.indexOf(s))return i[s]={system:s};for(var d,p={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},f=a(s,/\s+/);d=f.shift();){if(-1!==b.indexOf(d))return["style","variant","weight","stretch"].forEach(function(m){p[m]=d}),i[s]=p;if(-1===e.indexOf(d))if("normal"!==d&&"small-caps"!==d)if(-1===o.indexOf(d)){if(-1===_.indexOf(d)){if(l(d)){var g=a(d,"/");if(p.size=g[0],null!=g[1]?p.lineHeight=h(g[1]):"/"===f[0]&&(f.shift(),p.lineHeight=h(f.shift())),!f.length)throw new Error("Missing required font-family.");return p.family=a(f.join(" "),/\s*,\s*/).map(y),i[s]=p}throw new Error("Unknown or unsupported font token: "+d)}p.weight=d}else p.stretch=d;else p.variant=d;else p.style=d}throw new Error("Missing required font-size.")}function h(s){var d=parseFloat(s);return d.toString()===s?d:s}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(x,ue,le){"use strict";var y=x("pick-by-alias"),b=x("./lib/util").isSize,T=d(x("css-global-keywords")),_=d(x("css-system-font-keywords")),e=d(x("css-font-weight-keywords")),o=d(x("css-font-style-keywords")),a=d(x("css-font-stretch-keywords")),l={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},h="serif";function s(p,f){if(p&&!f[p]&&!T[p])throw Error("Unknown keyword `"+p+"`");return p}function d(p){for(var f={},g=0;g<p.length;g++)f[p[g]]=1;return f}ue.exports=function(p){if((p=y(p,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return p.system&&s(p.system,_),p.system;if(s(p.style,o),s(p.variant,l),s(p.weight,e),s(p.stretch,a),null==p.size&&(p.size="1rem"),"number"==typeof p.size&&(p.size+="px"),!b)throw Error("Bad size value `"+p.size+"`");p.family||(p.family=h),Array.isArray(p.family)&&(p.family.length||(p.family=[h]),p.family=p.family.map(function(g){return i[g]?g:'"'+g+'"'}).join(", "));var f=[];return f.push(p.style),p.variant!==p.style&&f.push(p.variant),p.weight!==p.variant&&p.weight!==p.style&&f.push(p.weight),p.stretch!==p.weight&&p.stretch!==p.variant&&p.stretch!==p.style&&f.push(p.stretch),f.push(p.size+(null==p.lineHeight||"normal"===p.lineHeight||p.lineHeight+""=="1"?"":"/"+p.lineHeight)),f.push(p.family),f.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(x,ue,le){ue.exports=["inherit","initial","unset"]},{}],104:[function(x,ue,le){ue.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(x,ue,le){"use strict";var y,b=x("type/value/is"),T=x("type/value/ensure"),_=x("type/plain-function/ensure"),e=x("es5-ext/object/copy"),o=x("es5-ext/object/normalize-options"),a=x("es5-ext/object/map"),l=Function.prototype.bind,i=Object.defineProperty,v=Object.prototype.hasOwnProperty;y=function(h,s,d){var p,f=T(s)&&_(s.value);return delete(p=e(s)).writable,delete p.value,p.get=function(){return!d.overwriteDefinition&&v.call(this,h)?f:(s.value=l.call(f,d.resolveContext?d.resolveContext(this):this),i(this,h,s),this[h])},p},ue.exports=function(h){var s=o(arguments[1]);return b(s.resolveContext)&&_(s.resolveContext),a(h,function(d,p){return y(p,d,s)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(x,ue,le){"use strict";var y=x("type/value/is"),b=x("type/plain-function/is"),T=x("es5-ext/object/assign"),_=x("es5-ext/object/normalize-options"),e=x("es5-ext/string/#/contains");(ue.exports=function(o,a){var l,i,v,h,s;return arguments.length<2||"string"!=typeof o?(h=a,a=o,o=null):h=arguments[2],y(o)?(l=e.call(o,"c"),i=e.call(o,"e"),v=e.call(o,"w")):(l=v=!0,i=!1),s={value:a,configurable:l,enumerable:i,writable:v},h?T(_(h),s):s}).gs=function(o,a,l){var i,v,h,s;return"string"!=typeof o?(h=l,l=a,a=o,o=null):h=arguments[3],y(a)?b(a)?y(l)?b(l)||(h=l,l=void 0):l=void 0:(h=a,a=l=void 0):a=void 0,y(o)?(i=e.call(o,"c"),v=e.call(o,"e")):(i=!0,v=!1),s={get:a,set:l,configurable:i,enumerable:v},h?T(_(h),s):s}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(x,ue,le){var b;b=function(y){"use strict";function b(F,L){return F<L?-1:F>L?1:F>=L?0:NaN}function T(F){var L;return 1===F.length&&(L=F,F=function(P,j){return b(L(P),j)}),{left:function(P,j,U,$){for(null==U&&(U=0),null==$&&($=P.length);U<$;){var X=U+$>>>1;F(P[X],j)<0?U=X+1:$=X}return U},right:function(P,j,U,$){for(null==U&&(U=0),null==$&&($=P.length);U<$;){var X=U+$>>>1;F(P[X],j)>0?$=X:U=X+1}return U}}}var _=T(b),e=_.right,o=_.left;function a(F,L){return[F,L]}function l(F){return null===F?NaN:+F}function i(F,L){var P,j,U=F.length,$=0,X=-1,te=0,ae=0;if(null==L)for(;++X<U;)isNaN(P=l(F[X]))||(ae+=(j=P-te)*(P-(te+=j/++$)));else for(;++X<U;)isNaN(P=l(L(F[X],X,F)))||(ae+=(j=P-te)*(P-(te+=j/++$)));if($>1)return ae/($-1)}function v(F,L){var P=i(F,L);return P&&Math.sqrt(P)}function h(F,L){var P,j,U,$=F.length,X=-1;if(null==L){for(;++X<$;)if(null!=(P=F[X])&&P>=P)for(j=U=P;++X<$;)null!=(P=F[X])&&(j>P&&(j=P),U<P&&(U=P))}else for(;++X<$;)if(null!=(P=L(F[X],X,F))&&P>=P)for(j=U=P;++X<$;)null!=(P=L(F[X],X,F))&&(j>P&&(j=P),U<P&&(U=P));return[j,U]}var s=Array.prototype,d=s.slice,p=s.map;function f(F){return function(){return F}}function g(F){return F}function m(F,L,P){F=+F,L=+L,P=(U=arguments.length)<2?(L=F,F=0,1):U<3?1:+P;for(var j=-1,U=0|Math.max(0,Math.ceil((L-F)/P)),$=new Array(U);++j<U;)$[j]=F+j*P;return $}var u=Math.sqrt(50),w=Math.sqrt(10),c=Math.sqrt(2);function E(F,L,P){var j=(L-F)/Math.max(0,P),U=Math.floor(Math.log(j)/Math.LN10),$=j/Math.pow(10,U);return U>=0?($>=u?10:$>=w?5:$>=c?2:1)*Math.pow(10,U):-Math.pow(10,-U)/($>=u?10:$>=w?5:$>=c?2:1)}function M(F,L,P){var j=Math.abs(L-F)/Math.max(0,P),U=Math.pow(10,Math.floor(Math.log(j)/Math.LN10)),$=j/U;return $>=u?U*=10:$>=w?U*=5:$>=c&&(U*=2),L<F?-U:U}function S(F){return Math.ceil(Math.log(F.length)/Math.LN2)+1}function C(F,L,P){if(null==P&&(P=l),j=F.length){if((L=+L)<=0||j<2)return+P(F[0],0,F);if(L>=1)return+P(F[j-1],j-1,F);var j,U=(j-1)*L,$=Math.floor(U),X=+P(F[$],$,F);return X+(+P(F[$+1],$+1,F)-X)*(U-$)}}function O(F,L){var P,j,U=F.length,$=-1;if(null==L){for(;++$<U;)if(null!=(P=F[$])&&P>=P)for(j=P;++$<U;)null!=(P=F[$])&&j>P&&(j=P)}else for(;++$<U;)if(null!=(P=L(F[$],$,F))&&P>=P)for(j=P;++$<U;)null!=(P=L(F[$],$,F))&&j>P&&(j=P);return j}function I(F){if(!(U=F.length))return[];for(var L=-1,P=O(F,N),j=new Array(P);++L<P;)for(var U,$=-1,X=j[L]=new Array(U);++$<U;)X[$]=F[$][L];return j}function N(F){return F.length}y.bisect=e,y.bisectRight=e,y.bisectLeft=o,y.ascending=b,y.bisector=T,y.cross=function(F,L,P){var j,U,$,X,te=F.length,ae=L.length,J=new Array(te*ae);for(null==P&&(P=a),j=$=0;j<te;++j)for(X=F[j],U=0;U<ae;++U,++$)J[$]=P(X,L[U]);return J},y.descending=function(F,L){return L<F?-1:L>F?1:L>=F?0:NaN},y.deviation=v,y.extent=h,y.histogram=function(){var F=g,L=h,P=S;function j(U){var $,X,te=U.length,ae=new Array(te);for($=0;$<te;++$)ae[$]=F(U[$],$,U);var J=L(ae),ee=J[0],se=J[1],G=P(ae,ee,se);Array.isArray(G)||(G=M(ee,se,G),G=m(Math.ceil(ee/G)*G,se,G));for(var H=G.length;G[0]<=ee;)G.shift(),--H;for(;G[H-1]>se;)G.pop(),--H;var Y,oe=new Array(H+1);for($=0;$<=H;++$)(Y=oe[$]=[]).x0=$>0?G[$-1]:ee,Y.x1=$<H?G[$]:se;for($=0;$<te;++$)ee<=(X=ae[$])&&X<=se&&oe[e(G,X,0,H)].push(U[$]);return oe}return j.value=function(U){return arguments.length?(F="function"==typeof U?U:f(U),j):F},j.domain=function(U){return arguments.length?(L="function"==typeof U?U:f([U[0],U[1]]),j):L},j.thresholds=function(U){return arguments.length?(P="function"==typeof U?U:Array.isArray(U)?f(d.call(U)):f(U),j):P},j},y.thresholdFreedmanDiaconis=function(F,L,P){return F=p.call(F,l).sort(b),Math.ceil((P-L)/(2*(C(F,.75)-C(F,.25))*Math.pow(F.length,-1/3)))},y.thresholdScott=function(F,L,P){return Math.ceil((P-L)/(3.5*v(F)*Math.pow(F.length,-1/3)))},y.thresholdSturges=S,y.max=function(F,L){var P,j,U=F.length,$=-1;if(null==L){for(;++$<U;)if(null!=(P=F[$])&&P>=P)for(j=P;++$<U;)null!=(P=F[$])&&P>j&&(j=P)}else for(;++$<U;)if(null!=(P=L(F[$],$,F))&&P>=P)for(j=P;++$<U;)null!=(P=L(F[$],$,F))&&P>j&&(j=P);return j},y.mean=function(F,L){var P,j=F.length,U=j,$=-1,X=0;if(null==L)for(;++$<j;)isNaN(P=l(F[$]))?--U:X+=P;else for(;++$<j;)isNaN(P=l(L(F[$],$,F)))?--U:X+=P;if(U)return X/U},y.median=function(F,L){var P,j=F.length,U=-1,$=[];if(null==L)for(;++U<j;)isNaN(P=l(F[U]))||$.push(P);else for(;++U<j;)isNaN(P=l(L(F[U],U,F)))||$.push(P);return C($.sort(b),.5)},y.merge=function(F){for(var L,P,j,U=F.length,$=-1,X=0;++$<U;)X+=F[$].length;for(P=new Array(X);--U>=0;)for(L=(j=F[U]).length;--L>=0;)P[--X]=j[L];return P},y.min=O,y.pairs=function(F,L){null==L&&(L=a);for(var P=0,j=F.length-1,U=F[0],$=new Array(j<0?0:j);P<j;)$[P]=L(U,U=F[++P]);return $},y.permute=function(F,L){for(var P=L.length,j=new Array(P);P--;)j[P]=F[L[P]];return j},y.quantile=C,y.range=m,y.scan=function(F,L){if(P=F.length){var P,j,U=0,$=0,X=F[$];for(null==L&&(L=b);++U<P;)(L(j=F[U],X)<0||0!==L(X,X))&&(X=j,$=U);return 0===L(X,X)?$:void 0}},y.shuffle=function(F,L,P){for(var j,U,$=(null==P?F.length:P)-(L=null==L?0:+L);$;)U=Math.random()*$--|0,j=F[$+L],F[$+L]=F[U+L],F[U+L]=j;return F},y.sum=function(F,L){var P,j=F.length,U=-1,$=0;if(null==L)for(;++U<j;)(P=+F[U])&&($+=P);else for(;++U<j;)(P=+L(F[U],U,F))&&($+=P);return $},y.ticks=function(F,L,P){var j,U,$,X,te=-1;if(P=+P,(F=+F)==(L=+L)&&P>0)return[F];if((j=L<F)&&(U=F,F=L,L=U),0===(X=E(F,L,P))||!isFinite(X))return[];if(X>0)for(F=Math.ceil(F/X),L=Math.floor(L/X),$=new Array(U=Math.ceil(L-F+1));++te<U;)$[te]=(F+te)*X;else for(F=Math.floor(F*X),L=Math.ceil(L*X),$=new Array(U=Math.ceil(F-L+1));++te<U;)$[te]=(F-te)/X;return j&&$.reverse(),$},y.tickIncrement=E,y.tickStep=M,y.transpose=I,y.variance=i,y.zip=function(){return I(arguments)},Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:this.d3=this.d3||{})},{}],108:[function(x,ue,le){var b;b=function(y){"use strict";function b(){}function T(h,s){var d=new b;if(h instanceof b)h.each(function(u,w){d.set(w,u)});else if(Array.isArray(h)){var p,f=-1,g=h.length;if(null==s)for(;++f<g;)d.set(f,h[f]);else for(;++f<g;)d.set(s(p=h[f],f,h),p)}else if(h)for(var m in h)d.set(m,h[m]);return d}function _(){return{}}function e(h,s,d){h[s]=d}function o(){return T()}function a(h,s,d){h.set(s,d)}function l(){}b.prototype=T.prototype={constructor:b,has:function(h){return"$"+h in this},get:function(h){return this["$"+h]},set:function(h,s){return this["$"+h]=s,this},remove:function(h){var s="$"+h;return s in this&&delete this[s]},clear:function(){for(var h in this)"$"===h[0]&&delete this[h]},keys:function(){var h=[];for(var s in this)"$"===s[0]&&h.push(s.slice(1));return h},values:function(){var h=[];for(var s in this)"$"===s[0]&&h.push(this[s]);return h},entries:function(){var h=[];for(var s in this)"$"===s[0]&&h.push({key:s.slice(1),value:this[s]});return h},size:function(){var h=0;for(var s in this)"$"===s[0]&&++h;return h},empty:function(){for(var h in this)if("$"===h[0])return!1;return!0},each:function(h){for(var s in this)"$"===s[0]&&h(this[s],s.slice(1),this)}};var i=T.prototype;function v(h,s){var d=new l;if(h instanceof l)h.each(function(g){d.add(g)});else if(h){var p=-1,f=h.length;if(null==s)for(;++p<f;)d.add(h[p]);else for(;++p<f;)d.add(s(h[p],p,h))}return d}l.prototype=v.prototype={constructor:l,has:i.has,add:function(h){return this["$"+(h+="")]=h,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each},y.nest=function(){var h,s,d,p=[],f=[];function g(m,u,w,c){if(u>=p.length)return null!=h&&m.sort(h),null!=s?s(m):m;for(var E,M,S,C=-1,O=m.length,I=p[u++],N=T(),F=w();++C<O;)(S=N.get(E=I(M=m[C])+""))?S.push(M):N.set(E,[M]);return N.each(function(L,P){c(F,P,g(L,u,w,c))}),F}return d={object:function(m){return g(m,0,_,e)},map:function(m){return g(m,0,o,a)},entries:function(m){return function u(w,c){if(++c>p.length)return w;var E,M=f[c-1];return null!=s&&c>=p.length?E=w.entries():(E=[],w.each(function(S,C){E.push({key:C,values:u(S,c)})})),null!=M?E.sort(function(S,C){return M(S.key,C.key)}):E}(g(m,0,o,a),0)},key:function(m){return p.push(m),d},sortKeys:function(m){return f[p.length-1]=m,d},sortValues:function(m){return h=m,d},rollup:function(m){return s=m,d}}},y.set=v,y.map=T,y.keys=function(h){var s=[];for(var d in h)s.push(d);return s},y.values=function(h){var s=[];for(var d in h)s.push(h[d]);return s},y.entries=function(h){var s=[];for(var d in h)s.push({key:d,value:h[d]});return s},Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:this.d3=this.d3||{})},{}],109:[function(x,ue,le){var y,b;y=this,b=function(y){"use strict";function b(_e,Ae,Fe){_e.prototype=Ae.prototype=Fe,Fe.constructor=_e}function T(_e,Ae){var Fe=Object.create(_e.prototype);for(var Pe in Ae)Fe[Pe]=Ae[Pe];return Fe}function _(){}var e="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,i=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),v=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),h=new RegExp("^rgba\\("+[e,e,e,o]+"\\)$"),s=new RegExp("^rgba\\("+[a,a,a,o]+"\\)$"),d=new RegExp("^hsl\\("+[o,a,a]+"\\)$"),p=new RegExp("^hsla\\("+[o,a,a,o]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function u(_e){var Ae,Fe;return _e=(_e+"").trim().toLowerCase(),(Ae=l.exec(_e))?(Fe=Ae[1].length,Ae=parseInt(Ae[1],16),6===Fe?w(Ae):3===Fe?new S(Ae>>8&15|Ae>>4&240,Ae>>4&15|240&Ae,(15&Ae)<<4|15&Ae,1):8===Fe?c(Ae>>24&255,Ae>>16&255,Ae>>8&255,(255&Ae)/255):4===Fe?c(Ae>>12&15|Ae>>8&240,Ae>>8&15|Ae>>4&240,Ae>>4&15|240&Ae,((15&Ae)<<4|15&Ae)/255):null):(Ae=i.exec(_e))?new S(Ae[1],Ae[2],Ae[3],1):(Ae=v.exec(_e))?new S(255*Ae[1]/100,255*Ae[2]/100,255*Ae[3]/100,1):(Ae=h.exec(_e))?c(Ae[1],Ae[2],Ae[3],Ae[4]):(Ae=s.exec(_e))?c(255*Ae[1]/100,255*Ae[2]/100,255*Ae[3]/100,Ae[4]):(Ae=d.exec(_e))?N(Ae[1],Ae[2]/100,Ae[3]/100,1):(Ae=p.exec(_e))?N(Ae[1],Ae[2]/100,Ae[3]/100,Ae[4]):f.hasOwnProperty(_e)?w(f[_e]):"transparent"===_e?new S(NaN,NaN,NaN,0):null}function w(_e){return new S(_e>>16&255,_e>>8&255,255&_e,1)}function c(_e,Ae,Fe,Pe){return Pe<=0&&(_e=Ae=Fe=NaN),new S(_e,Ae,Fe,Pe)}function E(_e){return _e instanceof _||(_e=u(_e)),_e?new S((_e=_e.rgb()).r,_e.g,_e.b,_e.opacity):new S}function M(_e,Ae,Fe,Pe){return 1===arguments.length?E(_e):new S(_e,Ae,Fe,null==Pe?1:Pe)}function S(_e,Ae,Fe,Pe){this.r=+_e,this.g=+Ae,this.b=+Fe,this.opacity=+Pe}function C(){return"#"+I(this.r)+I(this.g)+I(this.b)}function O(){var _e=this.opacity;return(1===(_e=isNaN(_e)?1:Math.max(0,Math.min(1,_e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===_e?")":", "+_e+")")}function I(_e){return((_e=Math.max(0,Math.min(255,Math.round(_e)||0)))<16?"0":"")+_e.toString(16)}function N(_e,Ae,Fe,Pe){return Pe<=0?_e=Ae=Fe=NaN:Fe<=0||Fe>=1?_e=Ae=NaN:Ae<=0&&(_e=NaN),new P(_e,Ae,Fe,Pe)}function F(_e){if(_e instanceof P)return new P(_e.h,_e.s,_e.l,_e.opacity);if(_e instanceof _||(_e=u(_e)),!_e)return new P;if(_e instanceof P)return _e;var Ae=(_e=_e.rgb()).r/255,Fe=_e.g/255,Pe=_e.b/255,Be=Math.min(Ae,Fe,Pe),qe=Math.max(Ae,Fe,Pe),We=NaN,Je=qe-Be,ut=(qe+Be)/2;return Je?(We=Ae===qe?(Fe-Pe)/Je+6*(Fe<Pe):Fe===qe?(Pe-Ae)/Je+2:(Ae-Fe)/Je+4,Je/=ut<.5?qe+Be:2-qe-Be,We*=60):Je=ut>0&&ut<1?0:We,new P(We,Je,ut,_e.opacity)}function L(_e,Ae,Fe,Pe){return 1===arguments.length?F(_e):new P(_e,Ae,Fe,null==Pe?1:Pe)}function P(_e,Ae,Fe,Pe){this.h=+_e,this.s=+Ae,this.l=+Fe,this.opacity=+Pe}function j(_e,Ae,Fe){return 255*(_e<60?Ae+(Fe-Ae)*_e/60:_e<180?Fe:_e<240?Ae+(Fe-Ae)*(240-_e)/60:Ae)}b(_,u,{copy:function(_e){return Object.assign(new this.constructor,this,_e)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return F(this).formatHsl()},formatRgb:m,toString:m}),b(S,M,T(_,{brighter:function(_e){return _e=null==_e?1/.7:Math.pow(1/.7,_e),new S(this.r*_e,this.g*_e,this.b*_e,this.opacity)},darker:function(_e){return _e=null==_e?.7:Math.pow(.7,_e),new S(this.r*_e,this.g*_e,this.b*_e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C,formatHex:C,formatRgb:O,toString:O})),b(P,L,T(_,{brighter:function(_e){return _e=null==_e?1/.7:Math.pow(1/.7,_e),new P(this.h,this.s,this.l*_e,this.opacity)},darker:function(_e){return _e=null==_e?.7:Math.pow(.7,_e),new P(this.h,this.s,this.l*_e,this.opacity)},rgb:function(){var _e=this.h%360+360*(this.h<0),Ae=isNaN(_e)||isNaN(this.s)?0:this.s,Fe=this.l,Pe=Fe+(Fe<.5?Fe:1-Fe)*Ae,Be=2*Fe-Pe;return new S(j(_e>=240?_e-240:_e+120,Be,Pe),j(_e,Be,Pe),j(_e<120?_e+240:_e-120,Be,Pe),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var _e=this.opacity;return(1===(_e=isNaN(_e)?1:Math.max(0,Math.min(1,_e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===_e?")":", "+_e+")")}}));var U=Math.PI/180,$=180/Math.PI,X=6/29,te=3*X*X;function ae(_e){if(_e instanceof ee)return new ee(_e.l,_e.a,_e.b,_e.opacity);if(_e instanceof ne)return re(_e);_e instanceof S||(_e=E(_e));var Ae,Fe,Pe=Y(_e.r),Be=Y(_e.g),qe=Y(_e.b),We=se((.2225045*Pe+.7168786*Be+.0606169*qe)/1);return Pe===Be&&Be===qe?Ae=Fe=We:(Ae=se((.4360747*Pe+.3850649*Be+.1430804*qe)/.96422),Fe=se((.0139322*Pe+.0971045*Be+.7141733*qe)/.82521)),new ee(116*We-16,500*(Ae-We),200*(We-Fe),_e.opacity)}function J(_e,Ae,Fe,Pe){return 1===arguments.length?ae(_e):new ee(_e,Ae,Fe,null==Pe?1:Pe)}function ee(_e,Ae,Fe,Pe){this.l=+_e,this.a=+Ae,this.b=+Fe,this.opacity=+Pe}function se(_e){return _e>.008856451679035631?Math.pow(_e,1/3):_e/te+4/29}function G(_e){return _e>X?_e*_e*_e:te*(_e-4/29)}function H(_e){return 255*(_e<=.0031308?12.92*_e:1.055*Math.pow(_e,1/2.4)-.055)}function Y(_e){return(_e/=255)<=.04045?_e/12.92:Math.pow((_e+.055)/1.055,2.4)}function oe(_e){if(_e instanceof ne)return new ne(_e.h,_e.c,_e.l,_e.opacity);if(_e instanceof ee||(_e=ae(_e)),0===_e.a&&0===_e.b)return new ne(NaN,0<_e.l&&_e.l<100?0:NaN,_e.l,_e.opacity);var Ae=Math.atan2(_e.b,_e.a)*$;return new ne(Ae<0?Ae+360:Ae,Math.sqrt(_e.a*_e.a+_e.b*_e.b),_e.l,_e.opacity)}function W(_e,Ae,Fe,Pe){return 1===arguments.length?oe(_e):new ne(_e,Ae,Fe,null==Pe?1:Pe)}function ne(_e,Ae,Fe,Pe){this.h=+_e,this.c=+Ae,this.l=+Fe,this.opacity=+Pe}function re(_e){if(isNaN(_e.h))return new ee(_e.l,0,0,_e.opacity);var Ae=_e.h*U;return new ee(_e.l,Math.cos(Ae)*_e.c,Math.sin(Ae)*_e.c,_e.opacity)}b(ee,J,T(_,{brighter:function(_e){return new ee(this.l+18*(null==_e?1:_e),this.a,this.b,this.opacity)},darker:function(_e){return new ee(this.l-18*(null==_e?1:_e),this.a,this.b,this.opacity)},rgb:function(){var _e=(this.l+16)/116,Ae=isNaN(this.a)?_e:_e+this.a/500,Fe=isNaN(this.b)?_e:_e-this.b/200;return new S(H(3.1338561*(Ae=.96422*G(Ae))-1.6168667*(_e=1*G(_e))-.4906146*(Fe=.82521*G(Fe))),H(-.9787684*Ae+1.9161415*_e+.033454*Fe),H(.0719453*Ae-.2289914*_e+1.4052427*Fe),this.opacity)}})),b(ne,W,T(_,{brighter:function(_e){return new ne(this.h,this.c,this.l+18*(null==_e?1:_e),this.opacity)},darker:function(_e){return new ne(this.h,this.c,this.l-18*(null==_e?1:_e),this.opacity)},rgb:function(){return re(this).rgb()}}));var fe=1.78277,me=-.29227,pe=-.90649,we=1.97294,ye=we*pe,Te=we*fe,Le=fe*me- -.14861*pe;function Oe(_e){if(_e instanceof Ve)return new Ve(_e.h,_e.s,_e.l,_e.opacity);_e instanceof S||(_e=E(_e));var Fe=_e.g/255,Pe=_e.b/255,Be=(Le*Pe+ye*(_e.r/255)-Te*Fe)/(Le+ye-Te),qe=Pe-Be,We=(we*(Fe-Be)-me*qe)/pe,Je=Math.sqrt(We*We+qe*qe)/(we*Be*(1-Be)),ut=Je?Math.atan2(We,qe)*$-120:NaN;return new Ve(ut<0?ut+360:ut,Je,Be,_e.opacity)}function Re(_e,Ae,Fe,Pe){return 1===arguments.length?Oe(_e):new Ve(_e,Ae,Fe,null==Pe?1:Pe)}function Ve(_e,Ae,Fe,Pe){this.h=+_e,this.s=+Ae,this.l=+Fe,this.opacity=+Pe}b(Ve,Re,T(_,{brighter:function(_e){return _e=null==_e?1/.7:Math.pow(1/.7,_e),new Ve(this.h,this.s,this.l*_e,this.opacity)},darker:function(_e){return _e=null==_e?.7:Math.pow(.7,_e),new Ve(this.h,this.s,this.l*_e,this.opacity)},rgb:function(){var _e=isNaN(this.h)?0:(this.h+120)*U,Ae=+this.l,Fe=isNaN(this.s)?0:this.s*Ae*(1-Ae),Pe=Math.cos(_e),Be=Math.sin(_e);return new S(255*(Ae+Fe*(-.14861*Pe+fe*Be)),255*(Ae+Fe*(me*Pe+pe*Be)),255*(Ae+Fe*(we*Pe)),this.opacity)}})),y.color=u,y.cubehelix=Re,y.gray=function(_e,Ae){return new ee(_e,0,0,null==Ae?1:Ae)},y.hcl=W,y.hsl=L,y.lab=J,y.lch=function(_e,Ae,Fe,Pe){return 1===arguments.length?oe(_e):new ne(Fe,Ae,_e,null==Pe?1:Pe)},y.rgb=M,Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:(y=y||self).d3=y.d3||{})},{}],110:[function(x,ue,le){var y,b;y=this,b=function(y){"use strict";var b={value:function(){}};function T(){for(var l,i=0,v=arguments.length,h={};i<v;++i){if(!(l=arguments[i]+"")||l in h||/[\s.]/.test(l))throw new Error("illegal type: "+l);h[l]=[]}return new _(h)}function _(l){this._=l}function e(l,i){return l.trim().split(/^|\s+/).map(function(v){var h="",s=v.indexOf(".");if(s>=0&&(h=v.slice(s+1),v=v.slice(0,s)),v&&!i.hasOwnProperty(v))throw new Error("unknown type: "+v);return{type:v,name:h}})}function o(l,i){for(var v,h=0,s=l.length;h<s;++h)if((v=l[h]).name===i)return v.value}function a(l,i,v){for(var h=0,s=l.length;h<s;++h)if(l[h].name===i){l[h]=b,l=l.slice(0,h).concat(l.slice(h+1));break}return null!=v&&l.push({name:i,value:v}),l}_.prototype=T.prototype={constructor:_,on:function(l,i){var v,h=this._,s=e(l+"",h),d=-1,p=s.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++d<p;)if(v=(l=s[d]).type)h[v]=a(h[v],l.name,i);else if(null==i)for(v in h)h[v]=a(h[v],l.name,null);return this}for(;++d<p;)if((v=(l=s[d]).type)&&(v=o(h[v],l.name)))return v},copy:function(){var l={},i=this._;for(var v in i)l[v]=i[v].slice();return new _(l)},call:function(l,i){if((v=arguments.length-2)>0)for(var v,h,s=new Array(v),d=0;d<v;++d)s[d]=arguments[d+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(d=0,v=(h=this._[l]).length;d<v;++d)h[d].value.apply(i,s)},apply:function(l,i,v){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var h=this._[l],s=0,d=h.length;s<d;++s)h[s].value.apply(i,v)}},y.dispatch=T,Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:(y=y||self).d3=y.d3||{})},{}],111:[function(x,ue,le){var y,b;y=this,b=function(y,b,T,_,e){"use strict";function o(f){return function(){return f}}function a(){return 1e-6*(Math.random()-.5)}function l(f){return f.x+f.vx}function i(f){return f.y+f.vy}function v(f){return f.index}function h(f,g){var m=f.get(g);if(!m)throw new Error("missing: "+g);return m}function s(f){return f.x}function d(f){return f.y}var p=Math.PI*(3-Math.sqrt(5));y.forceCenter=function(f,g){var m;function u(){var w,c,E=m.length,M=0,S=0;for(w=0;w<E;++w)M+=(c=m[w]).x,S+=c.y;for(M=M/E-f,S=S/E-g,w=0;w<E;++w)(c=m[w]).x-=M,c.y-=S}return null==f&&(f=0),null==g&&(g=0),u.initialize=function(w){m=w},u.x=function(w){return arguments.length?(f=+w,u):f},u.y=function(w){return arguments.length?(g=+w,u):g},u},y.forceCollide=function(f){var g,m,u=1,w=1;function c(){for(var S,C,O,I,N,F,L,P=g.length,j=0;j<w;++j)for(C=b.quadtree(g,l,i).visitAfter(E),S=0;S<P;++S)L=(F=m[(O=g[S]).index])*F,I=O.x+O.vx,N=O.y+O.vy,C.visit(U);function U($,X,te,ae,J){var ee=$.data,se=$.r,G=F+se;if(!ee)return X>I+G||ae<I-G||te>N+G||J<N-G;if(ee.index>O.index){var H=I-ee.x-ee.vx,Y=N-ee.y-ee.vy,oe=H*H+Y*Y;oe<G*G&&(0===H&&(oe+=(H=a())*H),0===Y&&(oe+=(Y=a())*Y),oe=(G-(oe=Math.sqrt(oe)))/oe*u,O.vx+=(H*=oe)*(G=(se*=se)/(L+se)),O.vy+=(Y*=oe)*G,ee.vx-=H*(G=1-G),ee.vy-=Y*G)}}}function E(S){if(S.data)return S.r=m[S.data.index];for(var C=S.r=0;C<4;++C)S[C]&&S[C].r>S.r&&(S.r=S[C].r)}function M(){if(g){var S,C,O=g.length;for(m=new Array(O),S=0;S<O;++S)m[(C=g[S]).index]=+f(C,S,g)}}return"function"!=typeof f&&(f=o(null==f?1:+f)),c.initialize=function(S){g=S,M()},c.iterations=function(S){return arguments.length?(w=+S,c):w},c.strength=function(S){return arguments.length?(u=+S,c):u},c.radius=function(S){return arguments.length?(f="function"==typeof S?S:o(+S),M(),c):f},c},y.forceLink=function(f){var g,m,u,w,c,E=v,M=function(L){return 1/Math.min(w[L.source.index],w[L.target.index])},S=o(30),C=1;function O(L){for(var P=0,j=f.length;P<C;++P)for(var U,$,X,te,ae,J,ee,se=0;se<j;++se)$=(U=f[se]).source,te=(X=U.target).x+X.vx-$.x-$.vx||a(),ae=X.y+X.vy-$.y-$.vy||a(),te*=J=((J=Math.sqrt(te*te+ae*ae))-m[se])/J*L*g[se],ae*=J,X.vx-=te*(ee=c[se]),X.vy-=ae*ee,$.vx+=te*(ee=1-ee),$.vy+=ae*ee}function I(){if(u){var L,P,j=u.length,U=f.length,$=T.map(u,E);for(L=0,w=new Array(j);L<U;++L)(P=f[L]).index=L,"object"!=typeof P.source&&(P.source=h($,P.source)),"object"!=typeof P.target&&(P.target=h($,P.target)),w[P.source.index]=(w[P.source.index]||0)+1,w[P.target.index]=(w[P.target.index]||0)+1;for(L=0,c=new Array(U);L<U;++L)c[L]=w[(P=f[L]).source.index]/(w[P.source.index]+w[P.target.index]);g=new Array(U),N(),m=new Array(U),F()}}function N(){if(u)for(var L=0,P=f.length;L<P;++L)g[L]=+M(f[L],L,f)}function F(){if(u)for(var L=0,P=f.length;L<P;++L)m[L]=+S(f[L],L,f)}return null==f&&(f=[]),O.initialize=function(L){u=L,I()},O.links=function(L){return arguments.length?(f=L,I(),O):f},O.id=function(L){return arguments.length?(E=L,O):E},O.iterations=function(L){return arguments.length?(C=+L,O):C},O.strength=function(L){return arguments.length?(M="function"==typeof L?L:o(+L),N(),O):M},O.distance=function(L){return arguments.length?(S="function"==typeof L?L:o(+L),F(),O):S},O},y.forceManyBody=function(){var f,g,m,u,w=o(-30),c=1,E=1/0,M=.81;function S(N){var F,L=f.length,P=b.quadtree(f,s,d).visitAfter(O);for(m=N,F=0;F<L;++F)g=f[F],P.visit(I)}function C(){if(f){var N,F,L=f.length;for(u=new Array(L),N=0;N<L;++N)u[(F=f[N]).index]=+w(F,N,f)}}function O(N){var F,L,P,j,U,$=0,X=0;if(N.length){for(P=j=U=0;U<4;++U)(F=N[U])&&(L=Math.abs(F.value))&&($+=F.value,X+=L,P+=L*F.x,j+=L*F.y);N.x=P/X,N.y=j/X}else{(F=N).x=F.data.x,F.y=F.data.y;do{$+=u[F.data.index]}while(F=F.next)}N.value=$}function I(N,F,L,P){if(!N.value)return!0;var j=N.x-g.x,U=N.y-g.y,$=P-F,X=j*j+U*U;if($*$/M<X)return X<E&&(0===j&&(X+=(j=a())*j),0===U&&(X+=(U=a())*U),X<c&&(X=Math.sqrt(c*X)),g.vx+=j*N.value*m/X,g.vy+=U*N.value*m/X),!0;if(!(N.length||X>=E)){(N.data!==g||N.next)&&(0===j&&(X+=(j=a())*j),0===U&&(X+=(U=a())*U),X<c&&(X=Math.sqrt(c*X)));do{N.data!==g&&(g.vx+=j*($=u[N.data.index]*m/X),g.vy+=U*$)}while(N=N.next)}}return S.initialize=function(N){f=N,C()},S.strength=function(N){return arguments.length?(w="function"==typeof N?N:o(+N),C(),S):w},S.distanceMin=function(N){return arguments.length?(c=N*N,S):Math.sqrt(c)},S.distanceMax=function(N){return arguments.length?(E=N*N,S):Math.sqrt(E)},S.theta=function(N){return arguments.length?(M=N*N,S):Math.sqrt(M)},S},y.forceRadial=function(f,g,m){var u,w,c,E=o(.1);function M(C){for(var O=0,I=u.length;O<I;++O){var N=u[O],F=N.x-g||1e-6,L=N.y-m||1e-6,P=Math.sqrt(F*F+L*L),j=(c[O]-P)*w[O]*C/P;N.vx+=F*j,N.vy+=L*j}}function S(){if(u){var C,O=u.length;for(w=new Array(O),c=new Array(O),C=0;C<O;++C)c[C]=+f(u[C],C,u),w[C]=isNaN(c[C])?0:+E(u[C],C,u)}}return"function"!=typeof f&&(f=o(+f)),null==g&&(g=0),null==m&&(m=0),M.initialize=function(C){u=C,S()},M.strength=function(C){return arguments.length?(E="function"==typeof C?C:o(+C),S(),M):E},M.radius=function(C){return arguments.length?(f="function"==typeof C?C:o(+C),S(),M):f},M.x=function(C){return arguments.length?(g=+C,M):g},M.y=function(C){return arguments.length?(m=+C,M):m},M},y.forceSimulation=function(f){var g,m=1,u=.001,w=1-Math.pow(u,1/300),c=0,E=.6,M=T.map(),S=e.timer(O),C=_.dispatch("tick","end");function O(){I(),C.call("tick",g),m<u&&(S.stop(),C.call("end",g))}function I(L){var P,j,U=f.length;void 0===L&&(L=1);for(var $=0;$<L;++$)for(m+=(c-m)*w,M.each(function(X){X(m)}),P=0;P<U;++P)null==(j=f[P]).fx?j.x+=j.vx*=E:(j.x=j.fx,j.vx=0),null==j.fy?j.y+=j.vy*=E:(j.y=j.fy,j.vy=0);return g}function N(){for(var L,P=0,j=f.length;P<j;++P){if((L=f[P]).index=P,null!=L.fx&&(L.x=L.fx),null!=L.fy&&(L.y=L.fy),isNaN(L.x)||isNaN(L.y)){var U=10*Math.sqrt(P),$=P*p;L.x=U*Math.cos($),L.y=U*Math.sin($)}(isNaN(L.vx)||isNaN(L.vy))&&(L.vx=L.vy=0)}}function F(L){return L.initialize&&L.initialize(f),L}return null==f&&(f=[]),N(),g={tick:I,restart:function(){return S.restart(O),g},stop:function(){return S.stop(),g},nodes:function(L){return arguments.length?(f=L,N(),M.each(F),g):f},alpha:function(L){return arguments.length?(m=+L,g):m},alphaMin:function(L){return arguments.length?(u=+L,g):u},alphaDecay:function(L){return arguments.length?(w=+L,g):+w},alphaTarget:function(L){return arguments.length?(c=+L,g):c},velocityDecay:function(L){return arguments.length?(E=1-L,g):1-E},force:function(L,P){return arguments.length>1?(null==P?M.remove(L):M.set(L,F(P)),g):M.get(L)},find:function(L,P,j){var U,$,X,te,ae,J=0,ee=f.length;for(null==j?j=1/0:j*=j,J=0;J<ee;++J)(X=(U=L-(te=f[J]).x)*U+($=P-te.y)*$)<j&&(ae=te,j=X);return ae},on:function(L,P){return arguments.length>1?(C.on(L,P),g):C.on(L)}}},y.forceX=function(f){var g,m,u,w=o(.1);function c(M){for(var S,C=0,O=g.length;C<O;++C)(S=g[C]).vx+=(u[C]-S.x)*m[C]*M}function E(){if(g){var M,S=g.length;for(m=new Array(S),u=new Array(S),M=0;M<S;++M)m[M]=isNaN(u[M]=+f(g[M],M,g))?0:+w(g[M],M,g)}}return"function"!=typeof f&&(f=o(null==f?0:+f)),c.initialize=function(M){g=M,E()},c.strength=function(M){return arguments.length?(w="function"==typeof M?M:o(+M),E(),c):w},c.x=function(M){return arguments.length?(f="function"==typeof M?M:o(+M),E(),c):f},c},y.forceY=function(f){var g,m,u,w=o(.1);function c(M){for(var S,C=0,O=g.length;C<O;++C)(S=g[C]).vy+=(u[C]-S.y)*m[C]*M}function E(){if(g){var M,S=g.length;for(m=new Array(S),u=new Array(S),M=0;M<S;++M)m[M]=isNaN(u[M]=+f(g[M],M,g))?0:+w(g[M],M,g)}}return"function"!=typeof f&&(f=o(null==f?0:+f)),c.initialize=function(M){g=M,E()},c.strength=function(M){return arguments.length?(w="function"==typeof M?M:o(+M),E(),c):w},c.y=function(M){return arguments.length?(f="function"==typeof M?M:o(+M),E(),c):f},c},Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof le&&void 0!==ue?b(le,x("d3-quadtree"),x("d3-collection"),x("d3-dispatch"),x("d3-timer")):b(y.d3=y.d3||{},y.d3,y.d3,y.d3,y.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(x,ue,le){var y,b;y=this,b=function(y){"use strict";function b(g,m){if((u=(g=m?g.toExponential(m-1):g.toExponential()).indexOf("e"))<0)return null;var u,w=g.slice(0,u);return[w.length>1?w[0]+w.slice(2):w,+g.slice(u+1)]}function T(g){return(g=b(Math.abs(g)))?g[1]:NaN}var _,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(g){if(!(m=e.exec(g)))throw new Error("invalid format: "+g);var m;return new a({fill:m[1],align:m[2],sign:m[3],symbol:m[4],zero:m[5],width:m[6],comma:m[7],precision:m[8]&&m[8].slice(1),trim:m[9],type:m[10]})}function a(g){this.fill=void 0===g.fill?" ":g.fill+"",this.align=void 0===g.align?">":g.align+"",this.sign=void 0===g.sign?"-":g.sign+"",this.symbol=void 0===g.symbol?"":g.symbol+"",this.zero=!!g.zero,this.width=void 0===g.width?void 0:+g.width,this.comma=!!g.comma,this.precision=void 0===g.precision?void 0:+g.precision,this.trim=!!g.trim,this.type=void 0===g.type?"":g.type+""}function l(g,m){var u=b(g,m);if(!u)return g+"";var w=u[0],c=u[1];return c<0?"0."+new Array(-c).join("0")+w:w.length>c+1?w.slice(0,c+1)+"."+w.slice(c+1):w+new Array(c-w.length+2).join("0")}o.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var i={"%":function(g,m){return(100*g).toFixed(m)},b:function(g){return Math.round(g).toString(2)},c:function(g){return g+""},d:function(g){return Math.abs(g=Math.round(g))>=1e21?g.toLocaleString("en").replace(/,/g,""):g.toString(10)},e:function(g,m){return g.toExponential(m)},f:function(g,m){return g.toFixed(m)},g:function(g,m){return g.toPrecision(m)},o:function(g){return Math.round(g).toString(8)},p:function(g,m){return l(100*g,m)},r:l,s:function(g,m){var u=b(g,m);if(!u)return g+"";var w=u[0],c=u[1],E=c-(_=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1,M=w.length;return E===M?w:E>M?w+new Array(E-M+1).join("0"):E>0?w.slice(0,E)+"."+w.slice(E):"0."+new Array(1-E).join("0")+b(g,Math.max(0,m+E-1))[0]},X:function(g){return Math.round(g).toString(16).toUpperCase()},x:function(g){return Math.round(g).toString(16)}};function v(g){return g}var h,s=Array.prototype.map,d=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function p(g){var m,u,F,w=void 0===g.grouping||void 0===g.thousands?v:(m=s.call(g.grouping,Number),u=g.thousands+"",function(F,L){for(var P=F.length,j=[],U=0,$=m[0],X=0;P>0&&$>0&&(X+$+1>L&&($=Math.max(1,L-X)),j.push(F.substring(P-=$,P+$)),!((X+=$+1)>L));)$=m[U=(U+1)%m.length];return j.reverse().join(u)}),c=void 0===g.currency?"":g.currency[0]+"",E=void 0===g.currency?"":g.currency[1]+"",M=void 0===g.decimal?".":g.decimal+"",S=void 0===g.numerals?v:(F=s.call(g.numerals,String),function(L){return L.replace(/[0-9]/g,function(P){return F[+P]})}),C=void 0===g.percent?"%":g.percent+"",O=void 0===g.minus?"-":g.minus+"",I=void 0===g.nan?"NaN":g.nan+"";function N(F){var L=(F=o(F)).fill,P=F.align,j=F.sign,U=F.symbol,$=F.zero,X=F.width,te=F.comma,ae=F.precision,J=F.trim,ee=F.type;"n"===ee?(te=!0,ee="g"):i[ee]||(void 0===ae&&(ae=12),J=!0,ee="g"),($||"0"===L&&"="===P)&&($=!0,L="0",P="=");var se="$"===U?c:"#"===U&&/[boxX]/.test(ee)?"0"+ee.toLowerCase():"",G="$"===U?E:/[%p]/.test(ee)?C:"",H=i[ee],Y=/[defgprs%]/.test(ee);function oe(W){var ne,re,ce,fe=se,me=G;if("c"===ee)me=H(W)+me,W="";else{var pe=(W=+W)<0||1/W<0;if(W=isNaN(W)?I:H(Math.abs(W),ae),J&&(W=function(Te){e:for(var Le,Oe=Te.length,Re=1,Ve=-1;Re<Oe;++Re)switch(Te[Re]){case".":Ve=Le=Re;break;case"0":0===Ve&&(Ve=Re),Le=Re;break;default:if(!+Te[Re])break e;Ve>0&&(Ve=0)}return Ve>0?Te.slice(0,Ve)+Te.slice(Le+1):Te}(W)),pe&&0==+W&&"+"!==j&&(pe=!1),fe=(pe?"("===j?j:O:"-"===j||"("===j?"":j)+fe,me=("s"===ee?d[8+_/3]:"")+me+(pe&&"("===j?")":""),Y)for(ne=-1,re=W.length;++ne<re;)if(48>(ce=W.charCodeAt(ne))||ce>57){me=(46===ce?M+W.slice(ne+1):W.slice(ne))+me,W=W.slice(0,ne);break}}te&&!$&&(W=w(W,1/0));var we=fe.length+W.length+me.length,ye=we<X?new Array(X-we+1).join(L):"";switch(te&&$&&(W=w(ye+W,ye.length?X-me.length:1/0),ye=""),P){case"<":W=fe+W+me+ye;break;case"=":W=fe+ye+W+me;break;case"^":W=ye.slice(0,we=ye.length>>1)+fe+W+me+ye.slice(we);break;default:W=ye+fe+W+me}return S(W)}return ae=void 0===ae?6:/[gprs]/.test(ee)?Math.max(1,Math.min(21,ae)):Math.max(0,Math.min(20,ae)),oe.toString=function(){return F+""},oe}return{format:N,formatPrefix:function(F,L){var P=N(((F=o(F)).type="f",F)),j=3*Math.max(-8,Math.min(8,Math.floor(T(L)/3))),U=Math.pow(10,-j),$=d[8+j/3];return function(X){return P(U*X)+$}}}}function f(g){return h=p(g),y.format=h.format,y.formatPrefix=h.formatPrefix,h}f({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),y.FormatSpecifier=a,y.formatDefaultLocale=f,y.formatLocale=p,y.formatSpecifier=o,y.precisionFixed=function(g){return Math.max(0,-T(Math.abs(g)))},y.precisionPrefix=function(g,m){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(T(m)/3)))-T(Math.abs(g)))},y.precisionRound=function(g,m){return g=Math.abs(g),m=Math.abs(m)-g,Math.max(0,T(m)-T(g))+1},Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:(y="undefined"!=typeof globalThis?globalThis:y||self).d3=y.d3||{})},{}],113:[function(x,ue,le){var y,b;y=this,b=function(y,b,T){"use strict";var _=Math.abs,e=Math.atan,o=Math.atan2,a=Math.cos,l=Math.exp,i=Math.floor,v=Math.log,h=Math.max,s=Math.min,d=Math.pow,p=Math.round,f=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},g=Math.sin,m=Math.tan,u=1e-6,w=Math.PI,c=w/2,E=w/4,M=Math.SQRT1_2,S=P(2),C=P(w),O=2*w,I=180/w,N=w/180;function F(Xe){return Xe>1?c:Xe<-1?-c:Math.asin(Xe)}function L(Xe){return Xe>1?0:Xe<-1?w:Math.acos(Xe)}function P(Xe){return Xe>0?Math.sqrt(Xe):0}function j(Xe){return(l(Xe)-l(-Xe))/2}function U(Xe){return(l(Xe)+l(-Xe))/2}function $(Xe){var Qe=m(Xe/2),ct=2*v(a(Xe/2))/(Qe*Qe);function mt(St,Mt){var xt=a(St),Jt=a(Mt),on=g(Mt),nn=Jt*xt,yn=-((1-nn?v((1+nn)/2)/(1-nn):-.5)+ct/(1+nn));return[yn*Jt*g(St),yn*on]}return mt.invert=function(St,Mt){var xt,Jt=P(St*St+Mt*Mt),on=-Xe/2,nn=50;if(!Jt)return[0,0];do{var yn=on/2,An=a(yn),Rn=g(yn),Ln=Rn/An,Zn=-v(_(An));on-=xt=(2/Ln*Zn-ct*Ln-Jt)/(-Zn/(Rn*Rn)+1-ct/(2*An*An))*(An<0?.7:1)}while(_(xt)>u&&--nn>0);var _r=g(on);return[o(St*_r,Jt*a(on)),F(Mt*_r/Jt)]},mt}function X(Xe,Qe){var St,ct=a(Qe),mt=(St=L(ct*a(Xe/=2)))?St/Math.sin(St):1;return[2*ct*g(Xe)*mt,g(Qe)*mt]}function te(Xe){var Qe=g(Xe),ct=a(Xe),mt=Xe>=0?1:-1,St=m(mt*Xe),Mt=(1+Qe-ct)/2;function xt(Jt,on){var nn=a(on),yn=a(Jt/=2);return[(1+nn)*g(Jt),(mt*on>-o(yn,St)-.001?0:10*-mt)+Mt+g(on)*ct-(1+nn)*Qe*yn]}return xt.invert=function(Jt,on){var nn=0,yn=0,An=50;do{var Rn=a(nn),Ln=g(nn),Zn=a(yn),_r=g(yn),cr=1+Zn,Jr=cr*Ln-Jt,ti=Mt+_r*ct-cr*Qe*Rn-on,di=cr*Rn/2,ni=-Ln*_r,Ci=Qe*cr*Ln/2,Ji=ct*Zn+Qe*Rn*_r,va=ni*Ci-Ji*di,sa=(ti*ni-Jr*Ji)/va/2,qi=(Jr*Ci-ti*di)/va;_(qi)>2&&(qi/=2),nn-=sa,yn-=qi}while((_(sa)>u||_(qi)>u)&&--An>0);return mt*yn>-o(a(nn),St)-.001?[2*nn,yn]:null},xt}function ae(Xe,Qe){var ct=m(Qe/2),mt=P(1-ct*ct),St=1+mt*a(Xe/=2),Mt=g(Xe)*mt/St,xt=ct/St,Jt=Mt*Mt,on=xt*xt;return[4/3*Mt*(3+Jt-3*on),4/3*xt*(3+3*Jt-on)]}X.invert=function(Xe,Qe){if(!(Xe*Xe+4*Qe*Qe>w*w+u)){var ct=Xe,mt=Qe,St=25;do{var Mt,xt=g(ct),Jt=g(ct/2),on=a(ct/2),nn=g(mt),yn=a(mt),An=g(2*mt),Rn=nn*nn,Ln=yn*yn,Zn=Jt*Jt,_r=1-Ln*on*on,cr=_r?L(yn*on)*P(Mt=1/_r):Mt=0,Jr=2*cr*yn*Jt-Xe,ti=cr*nn-Qe,di=Mt*(Ln*Zn+cr*yn*on*Rn),ni=Mt*(.5*xt*An-2*cr*nn*Jt),Ci=.25*Mt*(An*Jt-cr*nn*Ln*xt),Ji=Mt*(Rn*on+cr*Zn*yn),va=ni*Ci-Ji*di;if(!va)break;var sa=(ti*ni-Jr*Ji)/va,qi=(Jr*Ci-ti*di)/va;ct-=sa,mt-=qi}while((_(sa)>u||_(qi)>u)&&--St>0);return[ct,mt]}},ae.invert=function(Xe,Qe){if(Qe*=3/8,!(Xe*=3/8)&&_(Qe)>1)return null;var nn,ct=1+Xe*Xe+Qe*Qe,mt=P((ct-P(ct*ct-4*Qe*Qe))/2),St=F(mt)/3,Mt=mt?(nn=_(Qe/mt),v(nn+P(nn*nn-1))/3):function(nn){return v(nn+P(nn*nn+1))}(_(Xe))/3,xt=a(St),Jt=U(Mt),on=Jt*Jt-xt*xt;return[2*f(Xe)*o(j(Mt)*xt,.25-on),2*f(Qe)*o(Jt*g(St),.25+on)]};var J=P(8),ee=v(1+S);function se(Xe,Qe){var ct=_(Qe);return ct<E?[Xe,v(m(E+Qe/2))]:[Xe*a(ct)*(2*S-1/g(ct)),f(Qe)*(2*S*(ct-E)-v(m(ct/2)))]}function G(Xe){var Qe=2*w/Xe;function ct(mt,St){var Mt=b.geoAzimuthalEquidistantRaw(mt,St);if(_(mt)>c){var xt=o(Mt[1],Mt[0]),Jt=P(Mt[0]*Mt[0]+Mt[1]*Mt[1]),on=Qe*p((xt-c)/Qe)+c,nn=o(g(xt-=on),2-a(xt));xt=on+F(w/Jt*g(nn))-nn,Mt[0]=Jt*a(xt),Mt[1]=Jt*g(xt)}return Mt}return ct.invert=function(mt,St){var Mt=P(mt*mt+St*St);if(Mt>c){var xt=o(St,mt),Jt=Qe*p((xt-c)/Qe)+c,on=xt>Jt?-1:1,nn=Mt*a(Jt-xt),yn=1/m(on*L((nn-w)/P(w*(w-2*nn)+Mt*Mt)));xt=Jt+2*e((yn+on*P(yn*yn-3))/3),mt=Mt*a(xt),St=Mt*g(xt)}return b.geoAzimuthalEquidistantRaw.invert(mt,St)},ct}function H(Xe,Qe){if(arguments.length<2&&(Qe=Xe),1===Qe)return b.geoAzimuthalEqualAreaRaw;if(Qe===1/0)return Y;function ct(mt,St){var Mt=b.geoAzimuthalEqualAreaRaw(mt/Qe,St);return Mt[0]*=Xe,Mt}return ct.invert=function(mt,St){var Mt=b.geoAzimuthalEqualAreaRaw.invert(mt/Xe,St);return Mt[0]*=Qe,Mt},ct}function Y(Xe,Qe){return[Xe*a(Qe)/a(Qe/=2),2*g(Qe)]}function oe(Xe,Qe,ct){var mt,St,Mt,xt=100;ct=void 0===ct?0:+ct,Qe=+Qe;do{(St=Xe(ct))===(Mt=Xe(ct+u))&&(Mt=St+u),ct-=mt=-1*u*(St-Qe)/(St-Mt)}while(xt-- >0&&_(mt)>u);return xt<0?NaN:ct}function W(Xe,Qe,ct){return void 0===Qe&&(Qe=40),void 0===ct&&(ct=1e-12),function(mt,St,Mt,xt){var Jt,on,nn;Mt=void 0===Mt?0:+Mt,xt=void 0===xt?0:+xt;for(var yn=0;yn<Qe;yn++){var An=Xe(Mt,xt),Rn=An[0]-mt,Ln=An[1]-St;if(_(Rn)<ct&&_(Ln)<ct)break;var Zn=Rn*Rn+Ln*Ln;if(Zn>Jt)Mt-=on/=2,xt-=nn/=2;else{Jt=Zn;var _r=(Mt>0?-1:1)*ct,cr=(xt>0?-1:1)*ct,Jr=Xe(Mt+_r,xt),ti=Xe(Mt,xt+cr),di=(Jr[0]-An[0])/_r,ni=(Jr[1]-An[1])/_r,Ci=(ti[0]-An[0])/cr,Ji=(ti[1]-An[1])/cr,va=Ji*di-ni*Ci,sa=(_(va)<.5?.5:1)/va;if(Mt+=on=(Ln*Ci-Rn*Ji)*sa,xt+=nn=(Rn*ni-Ln*di)*sa,_(on)<ct&&_(nn)<ct)break}}return[Mt,xt]}}function ne(){var Xe=H(1.68,2);function Qe(ct,mt){if(ct+mt<-1.4){var St=(ct-mt+1.6)*(ct+mt+1.4)/8;ct+=St,mt-=.8*St*g(mt+w/2)}var Mt=Xe(ct,mt),xt=(1-a(ct*mt))/12;return Mt[1]<0&&(Mt[0]*=1+xt),Mt[1]>0&&(Mt[1]*=1+xt/1.5*Mt[0]*Mt[0]),Mt}return Qe.invert=W(Qe),Qe}function re(Xe,Qe){var ct,mt=Xe*g(Qe),St=30;do{Qe-=ct=(Qe+g(Qe)-mt)/(1+a(Qe))}while(_(ct)>u&&--St>0);return Qe/2}function ce(Xe,Qe,ct){function mt(St,Mt){return[Xe*St*a(Mt=re(ct,Mt)),Qe*g(Mt)]}return mt.invert=function(St,Mt){return Mt=F(Mt/Qe),[St/(Xe*a(Mt)),F((2*Mt+g(2*Mt))/ct)]},mt}se.invert=function(Xe,Qe){if((mt=_(Qe))<ee)return[Xe,2*e(l(Qe))-c];var ct,mt,St=E,Mt=25;do{var xt=a(St/2),Jt=m(St/2);St-=ct=(J*(St-E)-v(Jt)-mt)/(J-xt*xt/(2*Jt))}while(_(ct)>1e-12&&--Mt>0);return[Xe/(a(St)*(J-1/g(St))),f(Qe)*St]},Y.invert=function(Xe,Qe){var ct=2*F(Qe/2);return[Xe*a(ct/2)/a(ct),ct]};var fe=ce(S/c,S,w),me=2.00276;function we(Xe,Qe){var ct=re(w,Qe);return[me*Xe/(1/a(Qe)+1.11072/a(ct)),(Qe+S*g(ct))/me]}function ye(Xe){var Qe=0,ct=b.geoProjectionMutator(Xe),mt=ct(Qe);return mt.parallel=function(St){return arguments.length?ct(Qe=St*N):Qe*I},mt}function Te(Xe,Qe){return[Xe*a(Qe),Qe]}function Le(Xe){if(!Xe)return Te;var Qe=1/m(Xe);function ct(mt,St){var Mt=Qe+Xe-St,xt=Mt&&mt*a(St)/Mt;return[Mt*g(xt),Qe-Mt*a(xt)]}return ct.invert=function(mt,St){var Mt=P(mt*mt+(St=Qe-St)*St),xt=Qe+Xe-Mt;return[Mt/a(xt)*o(mt,St),xt]},ct}function Oe(Xe){function Qe(ct,mt){var St=c-mt,Mt=St&&ct*Xe*g(St)/St;return[St*g(Mt)/Xe,c-St*a(Mt)]}return Qe.invert=function(ct,mt){var St=ct*Xe,Mt=c-mt,xt=P(St*St+Mt*Mt),Jt=o(St,Mt);return[(xt?xt/g(xt):1)*Jt/Xe,c-xt]},Qe}we.invert=function(Xe,Qe){var ct,mt,St=me*Qe,Mt=Qe<0?-E:E,xt=25;do{mt=St-S*g(Mt),Mt-=ct=(g(2*Mt)+2*Mt-w*g(mt))/(2*a(2*Mt)+2+w*a(mt)*S*a(Mt))}while(_(ct)>u&&--xt>0);return mt=St-S*g(Mt),[Xe*(1/a(mt)+1.11072/a(Mt))/me,mt]},Te.invert=function(Xe,Qe){return[Xe/a(Qe),Qe]};var Re=ce(1,4/w,w);function Ve(Xe,Qe,ct,mt,St,Mt){var xt,Jt=a(Mt);if(_(Xe)>1||_(Mt)>1)xt=L(ct*St+Qe*mt*Jt);else{var on=g(Xe/2),nn=g(Mt/2);xt=2*F(P(on*on+Qe*mt*nn*nn))}return _(xt)>u?[xt,o(mt*g(Mt),Qe*St-ct*mt*Jt)]:[0,0]}function _e(Xe,Qe,ct){return L((Xe*Xe+Qe*Qe-ct*ct)/(2*Xe*Qe))}function Ae(Xe){return Xe-2*w*i((Xe+w)/(2*w))}function Fe(Xe,Qe,ct){for(var mt,St=[[Xe[0],Xe[1],g(Xe[1]),a(Xe[1])],[Qe[0],Qe[1],g(Qe[1]),a(Qe[1])],[ct[0],ct[1],g(ct[1]),a(ct[1])]],Mt=St[2],xt=0;xt<3;++xt,Mt=mt)Mt.v=Ve((mt=St[xt])[1]-Mt[1],Mt[3],Mt[2],mt[3],mt[2],mt[0]-Mt[0]),Mt.point=[0,0];var Jt=_e(St[0].v[0],St[2].v[0],St[1].v[0]),on=_e(St[0].v[0],St[1].v[0],St[2].v[0]),nn=w-Jt;St[2].point[1]=0,St[0].point[0]=-(St[1].point[0]=St[0].v[0]/2);var yn=[St[2].point[0]=St[0].point[0]+St[2].v[0]*a(Jt),2*(St[0].point[1]=St[1].point[1]=St[2].v[0]*g(Jt))];return function(An,Rn){var Ln,Zn=g(Rn),_r=a(Rn),cr=new Array(3);for(Ln=0;Ln<3;++Ln){var Jr=St[Ln];if(cr[Ln]=Ve(Rn-Jr[1],Jr[3],Jr[2],_r,Zn,An-Jr[0]),!cr[Ln][0])return Jr.point;cr[Ln][1]=Ae(cr[Ln][1]-Jr.v[1])}var ti=yn.slice();for(Ln=0;Ln<3;++Ln){var ni=_e(St[Ln].v[0],cr[Ln][0],cr[2==Ln?0:Ln+1][0]);cr[Ln][1]<0&&(ni=-ni),Ln?1==Ln?(ti[0]-=cr[Ln][0]*a(ni=on-ni),ti[1]-=cr[Ln][0]*g(ni)):(ti[0]+=cr[Ln][0]*a(ni=nn-ni),ti[1]+=cr[Ln][0]*g(ni)):(ti[0]+=cr[Ln][0]*a(ni),ti[1]-=cr[Ln][0]*g(ni))}return ti[0]/=3,ti[1]/=3,ti}}function Pe(Xe){return Xe[0]*=N,Xe[1]*=N,Xe}function Be(Xe,Qe,ct){var mt=b.geoCentroid({type:"MultiPoint",coordinates:[Xe,Qe,ct]}),St=[-mt[0],-mt[1]],Mt=b.geoRotation(St),xt=Fe(Pe(Mt(Xe)),Pe(Mt(Qe)),Pe(Mt(ct)));xt.invert=W(xt);var Jt=b.geoProjection(xt).rotate(St),on=Jt.center;return delete Jt.rotate,Jt.center=function(nn){return arguments.length?on(Mt(nn)):Mt.invert(on())},Jt.clipAngle(90)}function qe(Xe,Qe){var ct=P(1-g(Qe));return[2/C*Xe*ct,C*(1-ct)]}function We(Xe){var Qe=m(Xe);function ct(mt,St){return[mt,(mt?mt/g(mt):1)*(g(St)*a(mt)-Qe*a(St))]}return ct.invert=Qe?function(mt,St){mt&&(St*=g(mt)/mt);var Mt=a(mt);return[mt,2*o(P(Mt*Mt+Qe*Qe-St*St)-Mt,Qe-St)]}:function(mt,St){return[mt,F(mt?St*m(mt)/mt:St)]},ct}qe.invert=function(Xe,Qe){var ct=(ct=Qe/C-1)*ct;return[ct>0?Xe*P(w/ct)/2:0,F(1-ct)]};var Je=P(3);function ut(Xe,Qe){return[Je*Xe*(2*a(2*Qe/3)-1)/C,Je*C*g(Qe/3)]}function Ge(Xe){var Qe=a(Xe);function ct(mt,St){return[mt*Qe,g(St)/Qe]}return ct.invert=function(mt,St){return[mt/Qe,F(St*Qe)]},ct}function Ke(Xe){var Qe=a(Xe);function ct(mt,St){return[mt*Qe,(1+Qe)*m(St/2)]}return ct.invert=function(mt,St){return[mt/Qe,2*e(St/(1+Qe))]},ct}function nt(Xe,Qe){var ct=P(8/(3*w));return[ct*Xe*(1-_(Qe)/w),ct*Qe]}function it(Xe,Qe){var ct=P(4-3*g(_(Qe)));return[2/P(6*w)*Xe*ct,f(Qe)*P(2*w/3)*(2-ct)]}function ht(Xe,Qe){var ct=P(w*(4+w));return[2/ct*Xe*(1+P(1-4*Qe*Qe/(w*w))),4/ct*Qe]}function Tt(Xe,Qe){var ct=(2+c)*g(Qe);Qe/=2;for(var mt=0,St=1/0;mt<10&&_(St)>u;mt++){var Mt=a(Qe);Qe-=St=(Qe+g(Qe)*(Mt+2)-ct)/(2*Mt*(1+Mt))}return[2/P(w*(4+w))*Xe*(1+a(Qe)),2*P(w/(4+w))*g(Qe)]}function Ct(Xe,Qe){return[Xe*(1+a(Qe))/P(2+w),2*Qe/P(2+w)]}function Vt(Xe,Qe){for(var ct=(1+c)*g(Qe),mt=0,St=1/0;mt<10&&_(St)>u;mt++)Qe-=St=(Qe+g(Qe)-ct)/(1+a(Qe));return ct=P(2+w),[Xe*(1+a(Qe))/ct,2*Qe/ct]}ut.invert=function(Xe,Qe){var ct=3*F(Qe/(Je*C));return[C*Xe/(Je*(2*a(2*ct/3)-1)),ct]},nt.invert=function(Xe,Qe){var ct=P(8/(3*w)),mt=Qe/ct;return[Xe/(ct*(1-_(mt)/w)),mt]},it.invert=function(Xe,Qe){var ct=2-_(Qe)/P(2*w/3);return[Xe*P(6*w)/(2*ct),f(Qe)*F((4-ct*ct)/3)]},ht.invert=function(Xe,Qe){var ct=P(w*(4+w))/2;return[Xe*ct/(1+P(1-Qe*Qe*(4+w)/(4*w))),Qe*ct/2]},Tt.invert=function(Xe,Qe){var ct=Qe*P((4+w)/w)/2,mt=F(ct),St=a(mt);return[Xe/(2/P(w*(4+w))*(1+St)),F((mt+ct*(St+2))/(2+c))]},Ct.invert=function(Xe,Qe){var ct=P(2+w),mt=Qe*ct/2;return[ct*Xe/(1+a(mt)),mt]},Vt.invert=function(Xe,Qe){var ct=1+c,mt=P(ct/2);return[2*Xe*mt/(1+a(Qe*=mt)),F((Qe+g(Qe))/ct)]};var Ft=3+2*S;function gt(Xe,Qe){var ct=g(Xe/=2),mt=a(Xe),St=P(a(Qe)),Mt=a(Qe/=2),xt=g(Qe)/(Mt+S*mt*St),Jt=P(2/(1+xt*xt)),on=P((S*Mt+(mt+ct)*St)/(S*Mt+(mt-ct)*St));return[Ft*(Jt*(on-1/on)-2*v(on)),Ft*(Jt*xt*(on+1/on)-2*e(xt))]}gt.invert=function(Xe,Qe){if(!(ct=ae.invert(Xe/1.2,1.065*Qe)))return null;var ct,mt=ct[0],St=ct[1],Mt=20;Xe/=Ft,Qe/=Ft;do{var xt=mt/2,Jt=St/2,on=g(xt),nn=a(xt),yn=g(Jt),An=a(Jt),Rn=a(St),Ln=P(Rn),Zn=yn/(An+S*nn*Ln),_r=Zn*Zn,cr=P(2/(1+_r)),Jr=(S*An+(nn+on)*Ln)/(S*An+(nn-on)*Ln),ti=P(Jr),di=ti-1/ti,ni=ti+1/ti,Ci=cr*di-2*v(ti)-Xe,Ji=cr*Zn*ni-2*e(Zn)-Qe,va=yn&&M*Ln*on*_r/yn,sa=(S*nn*An+Ln)/(2*(An+S*nn*Ln)*(An+S*nn*Ln)*Ln),qi=-.5*Zn*cr*cr*cr,Oo=qi*va,Do=qi*sa,Da=(Da=2*An+S*Ln*(nn-on))*Da*ti,Ea=(S*nn*An*Ln+Rn)/Da,bo=-S*on*yn/(Ln*Da),Ro=di*Oo-2*Ea/ti+cr*(Ea+Ea/Jr),Go=di*Do-2*bo/ti+cr*(bo+bo/Jr),po=Zn*ni*Oo-2*va/(1+_r)+cr*ni*va+cr*Zn*(Ea-Ea/Jr),ss=Zn*ni*Do-2*sa/(1+_r)+cr*ni*sa+cr*Zn*(bo-bo/Jr),gs=Go*po-ss*Ro;if(!gs)break;var xa=(Ji*Go-Ci*ss)/gs,At=(Ci*po-Ji*Ro)/gs;mt-=xa,St=h(-c,s(c,St-At))}while((_(xa)>u||_(At)>u)&&--Mt>0);return _(_(St)-c)<u?[0,St]:Mt&&[mt,St]};var ft=a(35*N);function Bt(Xe,Qe){var ct=m(Qe/2);return[Xe*ft*P(1-ct*ct),(1+ft)*ct]}function rn(Xe,Qe){var ct=Qe/2,mt=a(ct);return[2*Xe/C*a(Qe)*mt*mt,C*m(ct)]}function un(Xe){var Qe=1-Xe,ct=St(w,0)[0]-St(-w,0)[0],mt=P(2*(St(0,c)[1]-St(0,-c)[1])/ct);function St(Jt,on){var nn=a(on),yn=g(on);return[nn/(Qe+Xe*nn)*Jt,Qe*on+Xe*yn]}function Mt(Jt,on){var nn=St(Jt,on);return[nn[0]*mt,nn[1]/mt]}function xt(Jt){return Mt(0,Jt)[1]}return Mt.invert=function(Jt,on){var nn=oe(xt,on);return[Jt/mt*(Xe+Qe/a(nn)),nn]},Mt}function pn(Xe){return[Xe[0]/2,F(m(Xe[1]/2*N))*I]}function dn(Xe){return[2*Xe[0],2*e(g(Xe[1]*N))*I]}function Mn(Xe,Qe){var ct=2*w/Qe,mt=Xe*Xe;function St(Mt,xt){var Jt=b.geoAzimuthalEquidistantRaw(Mt,xt),on=Jt[0],nn=Jt[1],yn=on*on+nn*nn;if(yn>mt){var An=P(yn),Rn=o(nn,on),Ln=ct*p(Rn/ct),Zn=Rn-Ln,_r=Xe*a(Zn),cr=(Xe*g(Zn)-Zn*g(_r))/(c-_r),Jr=ln(Zn,cr),ti=(w-Xe)/Ee(Jr,_r,w);on=An;var di,ni=50;do{on-=di=(Xe+Ee(Jr,_r,on)*ti-An)/(Jr(on)*ti)}while(_(di)>u&&--ni>0);nn=Zn*g(on),on<c&&(nn-=cr*(on-c));var Ci=g(Ln),Ji=a(Ln);Jt[0]=on*Ji-nn*Ci,Jt[1]=on*Ci+nn*Ji}return Jt}return St.invert=function(Mt,xt){var Jt=Mt*Mt+xt*xt;if(Jt>mt){var on=P(Jt),nn=o(xt,Mt),yn=ct*p(nn/ct),An=nn-yn;Mt=on*a(An),xt=on*g(An);for(var Rn=Mt-c,Ln=g(Mt),Zn=xt/Ln,_r=Mt<c?1/0:0,cr=10;;){var Jr=Xe*g(Zn),ti=Xe*a(Zn),di=g(ti),ni=c-ti,Ci=(Jr-Zn*di)/ni,Ji=ln(Zn,Ci);if(_(_r)<1e-12||!--cr)break;Zn-=_r=(Zn*Ln-Ci*Rn-xt)/(Ln-2*Rn*(ni*(ti+Zn*Jr*a(ti)-di)-Jr*(Jr-Zn*di))/(ni*ni))}Mt=(on=Xe+Ee(Ji,ti,Mt)*(w-Xe)/Ee(Ji,ti,w))*a(nn=yn+Zn),xt=on*g(nn)}return b.geoAzimuthalEquidistantRaw.invert(Mt,xt)},St}function ln(Xe,Qe){return function(ct){var mt=Xe*a(ct);return ct<c&&(mt-=Qe),P(1+mt*mt)}}function Ee(Xe,Qe,ct){for(var mt=(ct-Qe)/50,St=Xe(Qe)+Xe(ct),Mt=1,xt=Qe;Mt<50;++Mt)St+=2*Xe(xt+=mt);return.5*St*mt}function De(Xe,Qe,ct,mt,St,Mt,xt,Jt){function on(nn,yn){if(!yn)return[Xe*nn/w,0];var An=yn*yn,Rn=Xe+An*(Qe+An*(ct+An*mt)),Ln=yn*(St-1+An*(Mt-Jt+An*xt)),Zn=(Rn*Rn+Ln*Ln)/(2*Ln),_r=nn*F(Rn/Zn)/w;return[Zn*g(_r),yn*(1+An*Jt)+Zn*(1-a(_r))]}return arguments.length<8&&(Jt=0),on.invert=function(nn,yn){var An,Rn,Ln=w*nn/Xe,Zn=yn,_r=50;do{var cr=Zn*Zn,Jr=Xe+cr*(Qe+cr*(ct+cr*mt)),ti=Zn*(St-1+cr*(Mt-Jt+cr*xt)),di=Jr*Jr+ti*ti,ni=2*ti,Ci=di/ni,Ji=Ci*Ci,va=F(Jr/Ci)/w,sa=Ln*va,qi=Jr*Jr,Oo=(2*Qe+cr*(4*ct+6*cr*mt))*Zn,Do=St+cr*(3*Mt+5*cr*xt),Da=(2*(Jr*Oo+ti*(Do-1))*ni-di*(2*(Do-1)))/(ni*ni),Ea=a(sa),bo=g(sa),Ro=Ci*Ea,Go=Ci*bo,po=Ln/w*(1/P(1-qi/Ji))*(Oo*Ci-Jr*Da)/Ji,ss=Go-nn,gs=Zn*(1+cr*Jt)+Ci-Ro-yn,xa=Da*bo+Ro*po,At=Ro*va,Wt=1+Da-(Da*Ea-Go*po),wn=Go*va,tn=xa*wn-Wt*At;if(!tn)break;Ln-=An=(gs*xa-ss*Wt)/tn,Zn-=Rn=(ss*wn-gs*At)/tn}while((_(An)>u||_(Rn)>u)&&--_r>0);return[Ln,Zn]},on}Bt.invert=function(Xe,Qe){var ct=Qe/(1+ft);return[Xe&&Xe/(ft*P(1-ct*ct)),2*e(ct)]},rn.invert=function(Xe,Qe){var ct=e(Qe/C),mt=a(ct),St=2*ct;return[Xe*C/2/(a(St)*mt*mt),St]};var Ie=De(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),He=De(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Ye=De(5/6*w,-.62636,-.0344,0,1.3493,-.05524,0,.045);function tt(Xe,Qe){var ct=Xe*Xe,mt=Qe*Qe;return[Xe*(1-.162388*mt)*(.87-952426e-9*ct*ct),Qe*(1+mt/12)]}tt.invert=function(Xe,Qe){var ct,mt=Xe,St=Qe,Mt=50;do{var xt=St*St;St-=ct=(St*(1+xt/12)-Qe)/(1+xt/4)}while(_(ct)>u&&--Mt>0);Mt=50,Xe/=1-.162388*xt;do{var Jt=(Jt=mt*mt)*Jt;mt-=ct=(mt*(.87-952426e-9*Jt)-Xe)/(.87-.00476213*Jt)}while(_(ct)>u&&--Mt>0);return[mt,St]};var ot=De(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function st(Xe){var Qe=Xe(c,0)[0]-Xe(-c,0)[0];function ct(mt,St){var Mt=mt>0?-.5:.5,xt=Xe(mt+Mt*w,St);return xt[0]-=Mt*Qe,xt}return Xe.invert&&(ct.invert=function(mt,St){var Mt=mt>0?-.5:.5,xt=Xe.invert(mt+Mt*Qe,St),Jt=xt[0]-Mt*w;return Jt<-w?Jt+=2*w:Jt>w&&(Jt-=2*w),xt[0]=Jt,xt}),ct}function bt(Xe,Qe){var ct=f(Xe),mt=f(Qe),St=a(Qe),Mt=a(Xe)*St,xt=g(Xe)*St,Jt=g(mt*Qe);Xe=_(o(xt,Jt)),Qe=F(Mt),_(Xe-c)>u&&(Xe%=c);var on=function(nn,yn){if(yn===c)return[0,0];var An,Rn,Ln=g(yn),Zn=Ln*Ln,_r=Zn*Zn,cr=1+_r,Jr=1+3*_r,ti=1-_r,di=F(1/P(cr)),ni=ti+Zn*cr*di,Ci=(1-Ln)/ni,Ji=P(Ci),va=Ci*cr,sa=P(va),qi=Ji*ti;if(0===nn)return[0,-(qi+Zn*sa)];var Oo,Do=a(yn),Da=1/Do,Ea=2*Ln*Do,bo=(-ni*Do-(-3*Zn+di*Jr)*Ea*(1-Ln))/(ni*ni),Ro=-Da*Ea,Go=-Da*(Zn*cr*bo+Ci*Jr*Ea),po=-2*Da*(ti*(.5*bo/Ji)-2*Zn*Ji*Ea),ss=4*nn/w;if(nn>.222*w||yn<w/4&&nn>.175*w){if(An=(qi+Zn*P(va*(1+_r)-qi*qi))/(1+_r),nn>w/4)return[An,An];var gs=An,xa=.5*An;An=.5*(xa+gs),Rn=50;do{var Wt=An*(po+Ro*P(va-An*An))+Go*F(An/sa)-ss;if(!Wt)break;Wt<0?xa=An:gs=An,An=.5*(xa+gs)}while(_(gs-xa)>u&&--Rn>0)}else{An=u,Rn=25;do{var wn=An*An,tn=P(va-wn),Tn=po+Ro*tn,Wn=An*Tn+Go*F(An/sa)-ss;An-=Oo=tn?Wn/(Tn+(Go-Ro*wn)/tn):0}while(_(Oo)>u&&--Rn>0)}return[An,-qi-Zn*P(va-An*An)]}(Xe>w/4?c-Xe:Xe,Qe);return Xe>w/4&&(Jt=on[0],on[0]=-on[1],on[1]=-Jt),on[0]*=ct,on[1]*=-mt,on}function wt(Xe,Qe){var ct,mt,St,Mt,xt,Jt;if(Qe<u)return[(Mt=g(Xe))-(ct=Qe*(Xe-Mt*(mt=a(Xe)))/4)*mt,mt+ct*Mt,1-Qe*Mt*Mt/2,Xe-ct];if(Qe>=1-u)return ct=(1-Qe)/4,St=1/(mt=U(Xe)),[(Mt=((Jt=l(2*(Jt=Xe)))-1)/(Jt+1))+ct*((xt=mt*j(Xe))-Xe)/(mt*mt),St-ct*Mt*St*(xt-Xe),St+ct*Mt*St*(xt+Xe),2*e(l(Xe))-c+ct*(xt-Xe)/mt];var on=[1,0,0,0,0,0,0,0,0],nn=[P(Qe),0,0,0,0,0,0,0,0],yn=0;for(mt=P(1-Qe),xt=1;_(nn[yn]/on[yn])>u&&yn<8;)ct=on[yn++],nn[yn]=(ct-mt)/2,on[yn]=(ct+mt)/2,mt=P(ct*mt),xt*=2;St=xt*on[yn]*Xe;do{St=(F(Mt=nn[yn]*g(mt=St)/on[yn])+St)/2}while(--yn);return[g(St),Mt=a(St),Mt/a(St-mt),St]}function Ut(Xe,Qe){if(!Qe)return Xe;if(1===Qe)return v(m(Xe/2+E));for(var ct=1,mt=P(1-Qe),St=P(Qe),Mt=0;_(St)>u;Mt++){if(Xe%w){var xt=e(mt*m(Xe)/ct);xt<0&&(xt+=w),Xe+=xt+~~(Xe/w)*w}else Xe+=Xe;St=(ct+mt)/2,mt=P(ct*mt),St=((ct=St)-mt)/2}return Xe/(d(2,Mt)*ct)}function Kt(Xe,Qe){var nn,yn,An,Rn,Ln,ct=(S-1)/(S+1),mt=P(1-ct*ct),St=Ut(c,mt*mt),Mt=v(m(w/4+_(Qe)/2)),xt=l(-1*Mt)/P(ct),Jt=(nn=xt*a(-1*Xe),Rn=(yn=xt*g(-1*Xe))+1,[.5*((nn>=0?c:-c)-o(Ln=1-(An=nn*nn)-yn*yn,2*nn)),-.25*v(Ln*Ln+4*An)+.5*v(Rn*Rn+An)]),on=function(nn,yn,An){var Rn=_(nn),Ln=j(_(yn));if(Rn){var Zn=1/g(Rn),_r=1/(m(Rn)*m(Rn)),cr=-(_r+An*(Ln*Ln*Zn*Zn)-1+An),Jr=(-cr+P(cr*cr-(An-1)*_r*4))/2;return[Ut(e(1/P(Jr)),An)*f(nn),Ut(e(P((Jr/_r-1)/An)),1-An)*f(yn)]}return[0,Ut(e(Ln),1-An)*f(yn)]}(Jt[0],Jt[1],mt*mt);return[-on[1],(Qe>=0?1:-1)*(.5*St-on[0])]}function vt(Xe){var Qe=g(Xe),ct=a(Xe),mt=Et(Xe);function St(Mt,xt){var Jt=mt(Mt,xt);Mt=Jt[0];var on=g(xt=Jt[1]),nn=a(xt),yn=a(Mt),An=L(Qe*on+ct*nn*yn),Rn=g(An),Ln=_(Rn)>u?An/Rn:1;return[Ln*ct*g(Mt),(_(Mt)>c?Ln:-Ln)*(Qe*nn-ct*on*yn)]}return mt.invert=Et(-Xe),St.invert=function(Mt,xt){var Jt=P(Mt*Mt+xt*xt),on=-g(Jt),nn=a(Jt),yn=Jt*nn,An=-xt*on,Rn=Jt*Qe,Ln=P(yn*yn+An*An-Rn*Rn),Zn=o(yn*Rn+An*Ln,An*Rn-yn*Ln),_r=(Jt>c?-1:1)*o(Mt*on,Jt*a(Zn)*nn+xt*g(Zn)*on);return mt.invert(_r,Zn)},St}function Et(Xe){var Qe=g(Xe),ct=a(Xe);return function(mt,St){var Mt=a(St),xt=a(mt)*Mt,Jt=g(mt)*Mt,on=g(St);return[o(Jt,xt*ct-on*Qe),F(on*ct+xt*Qe)]}}bt.invert=function(Xe,Qe){_(Xe)>1&&(Xe=2*f(Xe)-Xe),_(Qe)>1&&(Qe=2*f(Qe)-Qe);var ct=f(Xe),mt=f(Qe),St=-ct*Xe,Mt=-mt*Qe,xt=Mt/St<1,Jt=function(An,Rn){for(var Ln=0,Zn=1,_r=.5,cr=50;;){var Jr=_r*_r,ti=P(_r),di=F(1/P(1+Jr)),ni=1-Jr+_r*(1+Jr)*di,Ci=(1-ti)/ni,Ji=P(Ci),va=Ci*(1+Jr),sa=Ji*(1-Jr),qi=P(va-An*An),Oo=Rn+sa+_r*qi;if(_(Zn-Ln)<1e-12||0==--cr||0===Oo)break;Oo>0?Ln=_r:Zn=_r,_r=.5*(Ln+Zn)}if(!cr)return null;var Do=F(ti),Da=a(Do),Ea=1/Da,bo=2*ti*Da,Ro=(-ni*Da-(-3*_r+di*(1+3*Jr))*bo*(1-ti))/(ni*ni);return[w/4*(An*(-2*Ea*(.5*Ro/Ji*(1-Jr)-2*_r*Ji*bo)+-Ea*bo*qi)+-Ea*(_r*(1+Jr)*Ro+Ci*(1+3*Jr)*bo)*F(An/P(va))),Do]}(xt?Mt:St,xt?St:Mt),on=Jt[0],nn=Jt[1],yn=a(nn);return xt&&(on=-c-on),[ct*(o(g(on)*yn,-g(nn))+w),mt*F(a(on)*yn)]},Kt.invert=function(Xe,Qe){var ct,mt,St,Mt,xt,Jt,Ln,Zn,_r,on=(S-1)/(S+1),nn=P(1-on*on),An=(mt=-Xe,St=nn*nn,(ct=.5*Ut(c,nn*nn)-Qe)?(Mt=wt(ct,St),mt?(Jt=(xt=wt(mt,1-St))[1]*xt[1]+St*Mt[0]*Mt[0]*xt[0]*xt[0],[[Mt[0]*xt[2]/Jt,Mt[1]*Mt[2]*xt[0]*xt[1]/Jt],[Mt[1]*xt[1]/Jt,-Mt[0]*Mt[2]*xt[0]*xt[2]/Jt],[Mt[2]*xt[1]*xt[2]/Jt,-St*Mt[0]*Mt[1]*xt[0]/Jt]]):[[Mt[0],0],[Mt[1],0],[Mt[2],0]]):[[0,(xt=wt(mt,1-St))[0]/xt[1]],[1/xt[1],0],[xt[2]/xt[1],0]]),Rn=[((Ln=An[0])[0]*(Zn=An[1])[0]+Ln[1]*Zn[1])/(_r=Zn[0]*Zn[0]+Zn[1]*Zn[1]),(Ln[1]*Zn[0]-Ln[0]*Zn[1])/_r];return[o(Rn[1],Rn[0])/-1,2*e(l(-.5*v(on*Rn[0]*Rn[0]+on*Rn[1]*Rn[1])))-c]};var $t=F(1-1/3)*I,Dt=Ge(0);function Pt(Xe){var Qe=$t*N,ct=qe(w,Qe)[0]-qe(-w,Qe)[0],mt=Dt(0,Qe)[1],St=qe(0,Qe)[1],Mt=C-St,xt=O/Xe,Jt=4/O,on=mt+Mt*Mt*4/O;function nn(yn,An){var Rn,Ln=_(An);if(Ln>Qe){var Zn=s(Xe-1,h(0,i((yn+w)/xt)));(Rn=qe(yn+=w*(Xe-1)/Xe-Zn*xt,Ln))[0]=Rn[0]*O/ct-O*(Xe-1)/(2*Xe)+Zn*O/Xe,Rn[1]=mt+4*(Rn[1]-St)*Mt/O,An<0&&(Rn[1]=-Rn[1])}else Rn=Dt(yn,An);return Rn[0]*=Jt,Rn[1]/=on,Rn}return nn.invert=function(yn,An){yn/=Jt;var Rn=_(An*=on);if(Rn>mt){var Ln=s(Xe-1,h(0,i((yn+w)/xt))),Zn=qe.invert(yn=(yn+w*(Xe-1)/Xe-Ln*xt)*ct/O,.25*(Rn-mt)*O/Mt+St);return Zn[0]-=w*(Xe-1)/Xe-Ln*xt,An<0&&(Zn[1]=-Zn[1]),Zn}return Dt.invert(yn,An)},nn}function je(Xe,Qe){return[Xe,1&Qe?90-u:$t]}function rt(Xe,Qe){return[Xe,1&Qe?-90+u:-$t]}function pt(Xe){return[Xe[0]*(1-u),Xe[1]]}function It(Xe){var Qe,ct=1+Xe,mt=F(g(1/ct)),St=2*P(w/(Qe=w+4*mt*ct)),Mt=.5*St*(ct+P(Xe*(2+Xe))),xt=Xe*Xe,Jt=ct*ct;function on(nn,yn){var An,Rn,Ln=1-g(yn);if(Ln&&Ln<2){var Zn,_r=c-yn,cr=25;do{var Jr=g(_r),ti=a(_r),di=mt+o(Jr,ct-ti),ni=1+Jt-2*ct*ti;_r-=Zn=(_r-xt*mt-ct*Jr+ni*di-.5*Ln*Qe)/(2*ct*Jr*di)}while(_(Zn)>1e-12&&--cr>0);An=St*P(ni),Rn=nn*di/w}else An=St*(Xe+Ln),Rn=nn*mt/w;return[An*g(Rn),Mt-An*a(Rn)]}return on.invert=function(nn,yn){var An=nn*nn+(yn-=Mt)*yn,Rn=(1+Jt-An/(St*St))/(2*ct),Ln=L(Rn),Zn=g(Ln),_r=mt+o(Zn,ct-Rn);return[F(nn/P(An))*w/_r,F(1-2*(Ln-xt*mt-ct*Zn+(1+Jt-2*ct*Rn)*_r)/Qe)]},on}function jt(Xe,Qe){return Qe>-.7109889596207567?((Xe=fe(Xe,Qe))[1]+=.0528035274542,Xe):Te(Xe,Qe)}function Qt(Xe,Qe){return _(Qe)>.7109889596207567?((Xe=fe(Xe,Qe))[1]-=Qe>0?.0528035274542:-.0528035274542,Xe):Te(Xe,Qe)}function fn(Xe,Qe,ct,mt){var St=P(4*w/(2*ct+(1+Xe-Qe/2)*g(2*ct)+(Xe+Qe)/2*g(4*ct)+Qe/2*g(6*ct))),Mt=P(mt*g(ct)*P((1+Xe*a(2*ct)+Qe*a(4*ct))/(1+Xe+Qe))),xt=ct*on(1);function Jt(An){return P(1+Xe*a(2*An)+Qe*a(4*An))}function on(An){var Rn=An*ct;return(2*Rn+(1+Xe-Qe/2)*g(2*Rn)+(Xe+Qe)/2*g(4*Rn)+Qe/2*g(6*Rn))/ct}function nn(An){return Jt(An)*g(An)}var yn=function(An,Rn){var Ln=ct*oe(on,xt*g(Rn)/ct,Rn/w);isNaN(Ln)&&(Ln=ct*f(Rn));var Zn=St*Jt(Ln);return[Zn*Mt*An/w*a(Ln),Zn/Mt*g(Ln)]};return yn.invert=function(An,Rn){var Ln=oe(nn,Rn*Mt/St);return[An*w/(a(Ln)*St*Mt*Jt(Ln)),F(ct*on(Ln/ct)/xt)]},0===ct&&(St=P(mt/w),(yn=function(An,Rn){return[An*St,g(Rn)/St]}).invert=function(An,Rn){return[An/St,F(Rn*St)]}),yn}function Sn(Xe,Qe,ct){function mt(Ln){return Xe+(1-Xe)*d(1-d(Ln,Qe),1/Qe)}function St(Ln){return function an(Xe,Qe,ct,mt,St){void 0===mt&&(mt=1e-8),void 0===St&&(St=20);var Mt=Xe(Qe),xt=Xe(.5*(Qe+ct)),Jt=Xe(ct);return function on(nn,yn,An,Rn,Ln,Zn,_r,cr,Jr,ti,di){if(di.nanEncountered)return NaN;var ni,Ci,Ji,va,sa,qi,Oo,Do,Da,Ea;if(Ci=nn(yn+.25*(ni=An-yn)),Ji=nn(An-.25*ni),isNaN(Ci))di.nanEncountered=!0;else{if(!isNaN(Ji))return Ea=((qi=(va=ni*(Rn+4*Ci+Ln)/12)+(sa=ni*(Ln+4*Ji+Zn)/12))-_r)/15,ti>Jr?(di.maxDepthCount++,qi+Ea):Math.abs(Ea)<cr?qi+Ea:(Do=on(nn,yn,Oo=yn+.5*ni,Rn,Ci,Ln,va,.5*cr,Jr,ti+1,di),isNaN(Do)?(di.nanEncountered=!0,NaN):(Da=on(nn,Oo,An,Ln,Ji,Zn,sa,.5*cr,Jr,ti+1,di),isNaN(Da)?(di.nanEncountered=!0,NaN):Do+Da));di.nanEncountered=!0}}(Xe,Qe,ct,Mt,xt,Jt,(Mt+4*xt+Jt)*(ct-Qe)/6,mt,St,1,{maxDepthCount:0,nanEncountered:!1})}(mt,0,Ln,1e-4)}for(var Mt=1/St(1),Jt=(1+1e-8)*Mt,on=[],nn=0;nn<=1e3;nn++)on.push(St(nn/1e3)*Jt);function yn(Ln){var Zn=0,_r=1e3,cr=500;do{on[cr]>Ln?_r=cr:Zn=cr,cr=Zn+_r>>1}while(cr>Zn);var Jr=on[cr+1]-on[cr];return Jr&&(Jr=(Ln-on[cr+1])/Jr),(cr+1+Jr)/1e3}var An=2*yn(1)/w*Mt/ct,Rn=function(Ln,Zn){var _r=yn(_(g(Zn))),cr=mt(_r)*Ln;return _r/=An,[cr,Zn>=0?_r:-_r]};return Rn.invert=function(Ln,Zn){var _r;return _(Zn*=An)<1&&(_r=f(Zn)*F(St(_(Zn))*Mt)),[Ln/mt(_(Zn)),_r]},Rn}function Yn(Xe,Qe){return _(Xe[0]-Qe[0])<u&&_(Xe[1]-Qe[1])<u}function kn(Xe,Qe){for(var ct,mt,St,Mt=-1,xt=Xe.length,Jt=Xe[0],on=[];++Mt<xt;){mt=((ct=Xe[Mt])[0]-Jt[0])/Qe,St=(ct[1]-Jt[1])/Qe;for(var nn=0;nn<Qe;++nn)on.push([Jt[0]+nn*mt,Jt[1]+nn*St]);Jt=ct}return on.push(ct),on}function cn(Xe){var Qe,ct,St,Mt,Jt,on=[],nn=Xe[0].length;for(Jt=0;Jt<nn;++Jt)ct=(Qe=Xe[0][Jt])[0][0],on.push(kn([[ct+u,Qe[0][1]+u],[ct+u,(St=Qe[1][1])-u],[(Mt=Qe[2][0])-u,St-u],[Mt-u,Qe[2][1]+u]],30));for(Jt=Xe[1].length-1;Jt>=0;--Jt)ct=(Qe=Xe[1][Jt])[0][0],on.push(kn([[(Mt=Qe[2][0])-u,Qe[2][1]-u],[Mt-u,(St=Qe[1][1])+u],[ct+u,St+u],[ct+u,Qe[0][1]-u]],30));return{type:"Polygon",coordinates:[T.merge(on)]}}function vn(Xe,Qe,ct){var mt,St;function Mt(on,nn){for(var yn=nn<0?-1:1,An=Qe[+(nn<0)],Rn=0,Ln=An.length-1;Rn<Ln&&on>An[Rn][2][0];++Rn);var Zn=Xe(on-An[Rn][1][0],nn);return Zn[0]+=Xe(An[Rn][1][0],yn*nn>yn*An[Rn][0][1]?An[Rn][0][1]:nn)[0],Zn}ct?Mt.invert=ct(Mt):Xe.invert&&(Mt.invert=function(on,nn){for(var yn=St[+(nn<0)],An=Qe[+(nn<0)],Rn=0,Ln=yn.length;Rn<Ln;++Rn){var Zn=yn[Rn];if(Zn[0][0]<=on&&on<Zn[1][0]&&Zn[0][1]<=nn&&nn<Zn[1][1]){var _r=Xe.invert(on-Xe(An[Rn][1][0],0)[0],nn);return _r[0]+=An[Rn][1][0],Yn(Mt(_r[0],_r[1]),[on,nn])?_r:null}}});var xt=b.geoProjection(Mt),Jt=xt.stream;return xt.stream=function(on){var nn=xt.rotate(),yn=Jt(on),An=(xt.rotate([0,0]),Jt(on));return xt.rotate(nn),yn.sphere=function(){b.geoStream(mt,An)},yn},xt.lobes=function(on){return arguments.length?(mt=cn(on),Qe=on.map(function(nn){return nn.map(function(yn){return[[yn[0][0]*N,yn[0][1]*N],[yn[1][0]*N,yn[1][1]*N],[yn[2][0]*N,yn[2][1]*N]]})}),St=Qe.map(function(nn){return nn.map(function(yn){var An,Rn=Xe(yn[0][0],yn[0][1])[0],Ln=Xe(yn[2][0],yn[2][1])[0],Zn=Xe(yn[1][0],yn[0][1])[1],_r=Xe(yn[1][0],yn[1][1])[1];return Zn>_r&&(An=Zn,Zn=_r,_r=An),[[Rn,Zn],[Ln,_r]]})}),xt):Qe.map(function(nn){return nn.map(function(yn){return[[yn[0][0]*I,yn[0][1]*I],[yn[1][0]*I,yn[1][1]*I],[yn[2][0]*I,yn[2][1]*I]]})})},null!=Qe&&xt.lobes(Qe),xt}jt.invert=function(Xe,Qe){return Qe>-.7109889596207567?fe.invert(Xe,Qe-.0528035274542):Te.invert(Xe,Qe)},Qt.invert=function(Xe,Qe){return _(Qe)>.7109889596207567?fe.invert(Xe,Qe+(Qe>0?.0528035274542:-.0528035274542)):Te.invert(Xe,Qe)};var hn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Dn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Pn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],$n=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],rr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],er=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function or(Xe,Qe){return[3/O*Xe*P(w*w/3-Qe*Qe),Qe]}function Zr(Xe){function Qe(ct,mt){if(_(_(mt)-c)<u)return[0,mt<0?-2:2];var St=g(mt),Mt=d((1+St)/(1-St),Xe/2),xt=.5*(Mt+1/Mt)+a(ct*=Xe);return[2*g(ct)/xt,(Mt-1/Mt)/xt]}return Qe.invert=function(ct,mt){var St=_(mt);if(_(St-2)<u)return ct?null:[0,f(mt)*c];if(St>2)return null;var Mt=(ct/=2)*ct,xt=(mt/=2)*mt,Jt=2*mt/(1+Mt+xt);return Jt=d((1+Jt)/(1-Jt),1/Xe),[o(2*ct,1-Mt-xt)/Xe,F((Jt-1)/(Jt+1))]},Qe}or.invert=function(Xe,Qe){return[O/3*Xe/P(w*w/3-Qe*Qe),Qe]};var zr=w/S;function pr(Xe,Qe){return[Xe*(1+P(a(Qe)))/2,Qe/(a(Qe/2)*a(Xe/6))]}function Br(Xe,Qe){var ct=Xe*Xe,mt=Qe*Qe;return[Xe*(.975534+mt*(-.0143059*ct-.119161+-.0547009*mt)),Qe*(1.00384+ct*(.0802894+-.02855*mt+199025e-9*ct)+mt*(.0998909+-.0491032*mt))]}function fr(Xe,Qe){return[g(Xe)/a(Qe),m(Qe)*a(Xe)]}function Nr(Xe){var Qe=a(Xe),ct=m(E+Xe/2);function mt(St,Mt){var xt=Mt-Xe,Jt=_(xt)<u?St*Qe:_(Jt=E+Mt/2)<u||_(_(Jt)-c)<u?0:St*xt/v(m(Jt)/ct);return[Jt,xt]}return mt.invert=function(St,Mt){var xt,Jt=Mt+Xe;return[_(Mt)<u?St/Qe:_(xt=E+Jt/2)<u||_(_(xt)-c)<u?0:St*v(m(xt)/ct)/Mt,Jt]},mt}function xi(Xe,Qe){return[Xe,1.25*v(m(E+.4*Qe))]}function Qn(Xe){var Qe=Xe.length-1;function ct(mt,St){for(var Mt,xt=a(St),Jt=2/(1+xt*a(mt)),on=Jt*xt*g(mt),nn=Jt*g(St),yn=Qe,An=Xe[yn],Rn=An[0],Ln=An[1];--yn>=0;)Rn=(An=Xe[yn])[0]+on*(Mt=Rn)-nn*Ln,Ln=An[1]+on*Ln+nn*Mt;return[Rn=on*(Mt=Rn)-nn*Ln,Ln=on*Ln+nn*Mt]}return ct.invert=function(mt,St){var Mt=20,xt=mt,Jt=St;do{for(var on,nn=Qe,yn=Xe[nn],An=yn[0],Rn=yn[1],Ln=0,Zn=0;--nn>=0;)Ln=An+xt*(on=Ln)-Jt*Zn,Zn=Rn+xt*Zn+Jt*on,An=(yn=Xe[nn])[0]+xt*(on=An)-Jt*Rn,Rn=yn[1]+xt*Rn+Jt*on;var _r,cr,Jr=(Ln=An+xt*(on=Ln)-Jt*Zn)*Ln+(Zn=Rn+xt*Zn+Jt*on)*Zn;xt-=_r=((An=xt*(on=An)-Jt*Rn-mt)*Ln+(Rn=xt*Rn+Jt*on-St)*Zn)/Jr,Jt-=cr=(Rn*Ln-An*Zn)/Jr}while(_(_r)+_(cr)>1e-12&&--Mt>0);if(Mt){var ti=P(xt*xt+Jt*Jt),di=2*e(.5*ti),ni=g(di);return[o(xt*ni,ti*a(di)),ti?F(Jt*ni/ti):0]}},ct}pr.invert=function(Xe,Qe){var ct=_(Xe),mt=_(Qe),St=u,Mt=c;mt<zr?Mt*=mt/zr:St+=6*L(zr/mt);for(var xt=0;xt<25;xt++){var Jt=g(Mt),on=P(a(Mt)),nn=g(Mt/2),yn=a(Mt/2),An=g(St/6),Rn=a(St/6),Ln=.5*St*(1+on)-ct,Zn=Mt/(yn*Rn)-mt,_r=on?-.25*St*Jt/on:0,cr=.5*(1+on),Jr=(1+.5*Mt*nn/yn)/(yn*Rn),ti=Mt/yn*(An/6)/(Rn*Rn),di=_r*ti-Jr*cr,ni=(Ln*ti-Zn*cr)/di,Ci=(Zn*_r-Ln*Jr)/di;if(Mt-=ni,St-=Ci,_(ni)<u&&_(Ci)<u)break}return[Xe<0?-St:St,Qe<0?-Mt:Mt]},Br.invert=function(Xe,Qe){var ct=f(Xe)*w,mt=Qe/2,St=50;do{var Mt=ct*ct,xt=mt*mt,Jt=ct*mt,on=ct*(.975534+xt*(-.0143059*Mt-.119161+-.0547009*xt))-Xe,nn=mt*(1.00384+Mt*(.0802894+-.02855*xt+199025e-9*Mt)+xt*(.0998909+-.0491032*xt))-Qe,yn=.975534-xt*(.119161+3*Mt*.0143059+.0547009*xt),An=-Jt*(.238322+.2188036*xt+.0286118*Mt),Rn=Jt*(.1605788+7961e-7*Mt+-.0571*xt),Ln=1.00384+Mt*(.0802894+199025e-9*Mt)+xt*(3*(.0998909-.02855*Mt)-.245516*xt),Zn=An*Rn-Ln*yn,_r=(nn*An-on*Ln)/Zn,cr=(on*Rn-nn*yn)/Zn;ct-=_r,mt-=cr}while((_(_r)>u||_(cr)>u)&&--St>0);return St&&[ct,mt]},fr.invert=function(Xe,Qe){var ct=Xe*Xe,mt=Qe*Qe+1,St=ct+mt,Mt=Xe?M*P((St-P(St*St-4*ct))/ct):1/P(mt);return[F(Xe*Mt),f(Qe)*L(Mt)]},xi.invert=function(Xe,Qe){return[Xe,2.5*e(l(.8*Qe))-.625*w]};var Er=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],kr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],sr=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ci=[[.9245,0],[0,0],[.01943,0]],oi=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Or(Xe,Qe){var ct=b.geoProjection(Qn(Xe)).rotate(Qe).clipAngle(90),mt=b.geoRotation(Qe),St=ct.center;return delete ct.rotate,ct.center=function(Mt){return arguments.length?St(mt(Mt)):mt.invert(St())},ct}var Dr=P(6),wr=P(7);function gn(Xe,Qe){var ct=F(7*g(Qe)/(3*Dr));return[Dr*Xe*(2*a(2*ct/3)-1)/wr,9*g(ct/3)/wr]}function tr(Xe,Qe){for(var ct,mt=(1+M)*g(Qe),St=Qe,Mt=0;Mt<25&&(St-=ct=(g(St/2)+g(St)-mt)/(.5*a(St/2)+a(St)),!(_(ct)<u));Mt++);return[Xe*(1+2*a(St)/a(St/2))/(3*S),2*P(3)*g(St/2)/P(2+S)]}function qt(Xe,Qe){for(var ct,mt=P(6/(4+w)),St=(1+w/4)*g(Qe),Mt=Qe/2,xt=0;xt<25&&(Mt-=ct=(Mt/2+g(Mt)-St)/(.5+a(Mt)),!(_(ct)<u));xt++);return[mt*(.5+a(Mt))*Xe/1.5,mt*Mt]}function _n(Xe,Qe){var ct=Qe*Qe,mt=ct*ct,St=ct*mt;return[Xe*(.84719-.13063*ct+St*St*(.05494*ct-.04515-.02326*mt+.00331*St)),Qe*(1.01183+mt*mt*(.01926*ct-.02625-.00396*mt))]}function Cn(Xe,Qe){return[Xe*(1+a(Qe))/2,2*(Qe-m(Qe/2))]}gn.invert=function(Xe,Qe){var ct=3*F(Qe*wr/9);return[Xe*wr/(Dr*(2*a(2*ct/3)-1)),F(3*g(ct)*Dr/7)]},tr.invert=function(Xe,Qe){var ct=Qe*P(2+S)/(2*P(3)),mt=2*F(ct);return[3*S*Xe/(1+2*a(mt)/a(mt/2)),F((ct+g(mt))/(1+M))]},qt.invert=function(Xe,Qe){var ct=P(6/(4+w)),mt=Qe/ct;return _(_(mt)-c)<u&&(mt=mt<0?-c:c),[1.5*Xe/(ct*(.5+a(mt))),F((mt/2+g(mt))/(1+w/4))]},_n.invert=function(Xe,Qe){var ct,mt,St,Mt,xt=Qe,Jt=25;do{xt-=ct=(xt*(1.01183+(St=(mt=xt*xt)*mt)*St*(.01926*mt-.02625-.00396*St))-Qe)/(1.01183+St*St*(.21186*mt-.23625+-.05148*St))}while(_(ct)>1e-12&&--Jt>0);return[Xe/(.84719-.13063*(mt=xt*xt)+(Mt=mt*(St=mt*mt))*Mt*(.05494*mt-.04515-.02326*St+.00331*Mt)),xt]},Cn.invert=function(Xe,Qe){for(var ct=Qe/2,mt=0,St=1/0;mt<10&&_(St)>u;++mt){var Mt=a(Qe/2);Qe-=St=(Qe-m(Qe/2)-ct)/(1-.5/(Mt*Mt))}return[2*Xe/(1+a(Qe)),Qe]};var Jn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Xn(Xe,Qe){var ct=g(Qe),mt=a(Qe),St=f(Xe);if(0===Xe||_(Qe)===c)return[0,Qe];if(0===Qe)return[Xe,0];if(_(Xe)===c)return[Xe*mt,c*ct];var Mt=w/(2*Xe)-2*Xe/w,xt=2*Qe/w,Jt=(1-xt*xt)/(ct-xt),on=Mt*Mt,nn=Jt*Jt,yn=1+on/nn,An=1+nn/on,Rn=(Mt*ct/Jt-Mt/2)/yn,Ln=(nn*ct/on+Jt/2)/An,Zn=Ln*Ln-(nn*ct*ct/on+Jt*ct-1)/An;return[c*(Rn+P(Rn*Rn+mt*mt/yn)*St),c*(Ln+P(Zn<0?0:Zn)*f(-Qe*Mt)*St)]}function Hn(Xe,Qe){var ct=Qe*Qe;return[Xe,Qe*(1.0148+ct*ct*(.23185+ct*(.02406*ct-.14499)))]}function Bn(Xe,Qe){if(_(Qe)<u)return[Xe,0];var ct=m(Qe),mt=Xe*g(Qe);return[g(mt)/ct,Qe+(1-a(mt))/ct]}function jn(Xe,Qe){return[Xe[0]*Qe[0]+Xe[1]*Qe[3],Xe[0]*Qe[1]+Xe[1]*Qe[4],Xe[0]*Qe[2]+Xe[1]*Qe[5]+Xe[2],Xe[3]*Qe[0]+Xe[4]*Qe[3],Xe[3]*Qe[1]+Xe[4]*Qe[4],Xe[3]*Qe[2]+Xe[4]*Qe[5]+Xe[5]]}function Vn(Xe,Qe){return[Xe[0]-Qe[0],Xe[1]-Qe[1]]}function On(Xe){return P(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function dr(Xe,Qe,ct){function mt(xt,Jt){var on,nn=Qe(xt,Jt),yn=nn.project([xt*I,Jt*I]);return(on=nn.transform)?[on[0]*yn[0]+on[1]*yn[1]+on[2],-(on[3]*yn[0]+on[4]*yn[1]+on[5])]:(yn[1]=-yn[1],yn)}(function xt(Jt,on){if(Jt.edges=function(Zn){for(var _r=Zn.length,cr=[],Jr=Zn[_r-1],ti=0;ti<_r;++ti)cr.push([Jr,Jr=Zn[ti]]);return cr}(Jt.face),on.face){var nn=Jt.shared=function(Zn,_r){for(var cr,Jr,ti=Zn.length,di=null,ni=0;ni<ti;++ni){cr=Zn[ni];for(var Ci=_r.length;--Ci>=0;)if(cr[0]===(Jr=_r[Ci])[0]&&cr[1]===Jr[1]){if(di)return[di,cr];di=cr}}}(Jt.face,on.face),yn=function zn(Xe,Qe){var xt,Jt,ct=Vn(Xe[1],Xe[0]),mt=Vn(Qe[1],Qe[0]),St=o((xt=ct)[0]*(Jt=mt)[1]-xt[1]*Jt[0],xt[0]*Jt[0]+xt[1]*Jt[1]),Mt=On(ct)/On(mt);return jn([1,0,Xe[0][0],0,1,Xe[0][1]],jn([Mt,0,0,0,Mt,0],jn([a(St),g(St),0,-g(St),a(St),0],[1,0,-Qe[0][0],0,1,-Qe[0][1]])))}(nn.map(on.project),nn.map(Jt.project));Jt.transform=on.transform?jn(on.transform,yn):yn;for(var An=on.edges,Rn=0,Ln=An.length;Rn<Ln;++Rn)ir(nn[0],An[Rn][1])&&ir(nn[1],An[Rn][0])&&(An[Rn]=Jt),ir(nn[0],An[Rn][0])&&ir(nn[1],An[Rn][1])&&(An[Rn]=Jt);for(Rn=0,Ln=(An=Jt.edges).length;Rn<Ln;++Rn)ir(nn[0],An[Rn][0])&&ir(nn[1],An[Rn][1])&&(An[Rn]=on),ir(nn[0],An[Rn][1])&&ir(nn[1],An[Rn][0])&&(An[Rn]=on)}else Jt.transform=on.transform;return Jt.children&&Jt.children.forEach(function(Zn){xt(Zn,Jt)}),Jt})(Xe,{transform:null}),br(Xe)&&(mt.invert=function(xt,Jt){var on=function nn(yn,An){var di,ni,Rn=yn.project.invert,Ln=yn.transform,Zn=An;if(Ln&&(Zn=[(Ln=[(ni=1/((di=Ln)[0]*di[4]-di[1]*di[3]))*di[4],-ni*di[1],ni*(di[1]*di[5]-di[2]*di[4]),-ni*di[3],ni*di[0],ni*(di[2]*di[3]-di[0]*di[5])])[0]*Zn[0]+Ln[1]*Zn[1]+Ln[2],Ln[3]*Zn[0]+Ln[4]*Zn[1]+Ln[5]]),Rn&&yn===function(di){return Qe(di[0]*N,di[1]*N)}(_r=Rn(Zn)))return _r;for(var _r,cr=yn.children,Jr=0,ti=cr&&cr.length;Jr<ti;++Jr)if(_r=nn(cr[Jr],An))return _r}(Xe,[xt,-Jt]);return on&&(on[0]*=N,on[1]*=N,on)});var St=b.geoProjection(mt),Mt=St.stream;return St.stream=function(xt){var Jt=St.rotate(),on=Mt(xt),nn=(St.rotate([0,0]),Mt(xt));return St.rotate(Jt),on.sphere=function(){nn.polygonStart(),nn.lineStart(),function yn(An,Rn,Ln){var Zn,_r,cr=Rn.edges,Jr=cr.length,ti={type:"MultiPoint",coordinates:Rn.face},di=Rn.face.filter(function(Oo){return 90!==_(Oo[1])}),ni=b.geoBounds({type:"MultiPoint",coordinates:di}),Ci=!1,Ji=-1,va=ni[1][0]-ni[0][0],sa=180===va||360===va?[(ni[0][0]+ni[1][0])/2,(ni[0][1]+ni[1][1])/2]:b.geoCentroid(ti);if(Ln)for(;++Ji<Jr&&cr[Ji]!==Ln;);++Ji;for(var qi=0;qi<Jr;++qi)_r=cr[(qi+Ji)%Jr],Array.isArray(_r)?(Ci||(An.point((Zn=b.geoInterpolate(_r[0],sa)(u))[0],Zn[1]),Ci=!0),An.point((Zn=b.geoInterpolate(_r[1],sa)(u))[0],Zn[1])):(Ci=!1,_r!==Ln&&yn(An,_r,Rn))}(nn,Xe),nn.lineEnd(),nn.polygonEnd()},on},St.angle(null==ct?-30:ct*I)}function ir(Xe,Qe){return Xe&&Qe&&Xe[0]===Qe[0]&&Xe[1]===Qe[1]}function br(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(br)}Xn.invert=function(Xe,Qe){var ct=(Xe/=c)*Xe,mt=ct+(Qe/=c)*Qe,St=w*w;return[Xe?(mt-1+P((1-mt)*(1-mt)+4*ct))/(2*Xe)*c:0,oe(function(Mt){return mt*(w*g(Mt)-2*Mt)*w+4*Mt*Mt*(Qe-g(Mt))+2*w*Mt-St*Qe},0)]},Hn.invert=function(Xe,Qe){Qe>1.790857183?Qe=1.790857183:Qe<-1.790857183&&(Qe=-1.790857183);var ct,mt=Qe;do{var St=mt*mt;mt-=ct=(mt*(1.0148+St*St*(.23185+St*(.02406*St-.14499)))-Qe)/(1.0148+St*St*(5*.23185+St*(.21654*St-1.01493)))}while(_(ct)>u);return[Xe,mt]},Bn.invert=function(Xe,Qe){if(_(Qe)<u)return[Xe,0];var ct,mt=Xe*Xe+Qe*Qe,St=.5*Qe,Mt=10;do{var xt=m(St),Jt=1/a(St),on=mt-2*Qe*St+St*St;St-=ct=(xt*on+2*(St-Qe))/(2+on*Jt*Jt+2*(St-Qe)*xt)}while(_(ct)>u&&--Mt>0);return xt=m(St),[(_(Qe)<_(St+1/xt)?F(Xe*xt):f(Qe)*f(Xe)*(L(_(Xe*xt))+c))/g(St),St]};var Tr=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Fr=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function(Qe){return Tr[Qe]})}),Vr=2/P(3);function Ur(Xe,Qe){var ct=qe(Xe,Qe);return[ct[0]*Vr,ct[1]]}function Xr(Xe,Qe){for(var ct=0,mt=Xe.length,St=0;ct<mt;++ct)St+=Xe[ct]*Qe[ct];return St}function ri(Xe){return[o(Xe[1],Xe[0])*I,F(h(-1,s(1,Xe[2])))*I]}function _i(Xe){var Qe=Xe[0]*N,ct=Xe[1]*N,mt=a(ct);return[mt*a(Qe),mt*g(Qe),g(ct)]}function ra(){}function hi(Xe,Qe){return{type:"FeatureCollection",features:Xe.features.map(function(ct){return Gr(ct,Qe)})}}function Gr(Xe,Qe){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:Mi(Xe.geometry,Qe)}}function Mi(Xe,Qe){if(!Xe)return null;if("GeometryCollection"===Xe.type)return St=Qe,{type:"GeometryCollection",geometries:Xe.geometries.map(function(Mt){return Mi(Mt,St)})};var St,ct;switch(Xe.type){case"Point":case"MultiPoint":ct=Co;break;case"LineString":case"MultiLineString":ct=oo;break;case"Polygon":case"MultiPolygon":case"Sphere":ct=yo;break;default:return null}return b.geoStream(Xe,Qe(ct)),ct.result()}Ur.invert=function(Xe,Qe){return qe.invert(Xe/Vr,Qe)};var vi=[],_a=[],Co={point:function(Xe,Qe){vi.push([Xe,Qe])},result:function(){var Xe=vi.length?vi.length<2?{type:"Point",coordinates:vi[0]}:{type:"MultiPoint",coordinates:vi}:null;return vi=[],Xe}},oo={lineStart:ra,point:function(Xe,Qe){vi.push([Xe,Qe])},lineEnd:function(){vi.length&&(_a.push(vi),vi=[])},result:function(){var Xe=_a.length?_a.length<2?{type:"LineString",coordinates:_a[0]}:{type:"MultiLineString",coordinates:_a}:null;return _a=[],Xe}},yo={polygonStart:ra,lineStart:ra,point:function(Xe,Qe){vi.push([Xe,Qe])},lineEnd:function(){var Xe=vi.length;if(Xe){do{vi.push(vi[0].slice())}while(++Xe<4);_a.push(vi),vi=[]}},polygonEnd:ra,result:function(){if(!_a.length)return null;var Xe=[],Qe=[];return _a.forEach(function(ct){!function(mt){if((St=mt.length)<4)return!1;for(var St,Mt=0,xt=mt[St-1][1]*mt[0][0]-mt[St-1][0]*mt[0][1];++Mt<St;)xt+=mt[Mt-1][1]*mt[Mt][0]-mt[Mt-1][0]*mt[Mt][1];return xt<=0}(ct)?Qe.push(ct):Xe.push([ct])}),Qe.forEach(function(ct){var mt=ct[0];Xe.some(function(St){if(function(Mt,xt){for(var Jt=xt[0],on=xt[1],nn=!1,yn=0,An=Mt.length,Rn=An-1;yn<An;Rn=yn++){var Ln=Mt[yn],Zn=Ln[0],_r=Ln[1],cr=Mt[Rn],ti=cr[1];_r>on^ti>on&&Jt<(cr[0]-Zn)*(on-_r)/(ti-_r)+Zn&&(nn=!nn)}return nn}(St[0],mt))return St.push(ct),!0})||Xe.push([ct])}),_a=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function Ha(Xe){var Qe=Xe(c,0)[0]-Xe(-c,0)[0];function ct(mt,St){var Mt=_(mt)<c,xt=Xe(Mt?mt:mt>0?mt-w:mt+w,St),Jt=(xt[0]-xt[1])*M,on=(xt[0]+xt[1])*M;if(Mt)return[Jt,on];var nn=Qe*M,yn=Jt>0^on>0?-1:1;return[yn*Jt-f(on)*nn,yn*on-f(Jt)*nn]}return Xe.invert&&(ct.invert=function(mt,St){var Mt=(mt+St)*M,xt=(St-mt)*M,Jt=_(Mt)<.5*Qe&&_(xt)<.5*Qe;if(!Jt){var on=Qe*M,nn=Mt>0^xt>0?-1:1,yn=-nn*mt+(xt>0?1:-1)*on,An=-nn*St+(Mt>0?1:-1)*on;Mt=(-yn-An)*M,xt=(yn-An)*M}var Rn=Xe.invert(Mt,xt);return Jt||(Rn[0]+=Mt>0?w:-w),Rn}),b.geoProjection(ct).rotate([-90,-90,45]).clipAngle(179.999)}function qa(){return Ha(Kt).scale(111.48)}function ho(Xe){var Qe=g(Xe);function ct(mt,St){var Mt=Qe?m(mt*Qe/2)/Qe:mt/2;if(!St)return[2*Mt,-Xe];var xt=2*e(Mt*g(St)),Jt=1/m(St);return[g(xt)*Jt,St+(1-a(xt))*Jt-Xe]}return ct.invert=function(mt,St){if(_(St+=Xe)<u)return[Qe?2*e(Qe*mt/2)/Qe:mt,0];var Mt,xt=mt*mt+St*St,Jt=0,on=10;do{var nn=m(Jt),yn=1/a(Jt),An=xt-2*St*Jt+Jt*Jt;Jt-=Mt=(nn*An+2*(Jt-St))/(2+An*yn*yn+2*(Jt-St)*nn)}while(_(Mt)>u&&--on>0);var Rn=mt*(nn=m(Jt)),Ln=m(_(St)<_(Jt+1/nn)?.5*F(Rn):.5*L(Rn)+w/4)/g(Jt);return[Qe?2*e(Qe*Ln)/Qe:2*Ln,Jt]},ct}var ka=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function ds(Xe,Qe){var ct,mt=s(18,36*_(Qe)/w),St=i(mt),Mt=mt-St,xt=(ct=ka[St])[0],Jt=ct[1],on=(ct=ka[++St])[0],nn=ct[1],yn=(ct=ka[s(19,++St)])[0],An=ct[1];return[Xe*(on+Mt*(yn-xt)/2+Mt*Mt*(yn-2*on+xt)/2),(Qe>0?c:-c)*(nn+Mt*(An-Jt)/2+Mt*Mt*(An-2*nn+Jt)/2)]}function Ts(Xe,Qe){var ct=function(xt){function Jt(on,nn){var yn=a(nn),An=(xt-1)/(xt-yn*a(on));return[An*yn*g(on),An*g(nn)]}return Jt.invert=function(on,nn){var yn=on*on+nn*nn,An=P(yn),Rn=(xt-P(1-yn*(xt+1)/(xt-1)))/((xt-1)/An+An/(xt-1));return[o(on*Rn,An*P(1-Rn*Rn)),An?F(nn*Rn/An):0]},Jt}(Xe);if(!Qe)return ct;var mt=a(Qe),St=g(Qe);function Mt(xt,Jt){var on=ct(xt,Jt),nn=on[1],yn=nn*St/(Xe-1)+mt;return[on[0]*mt/yn,nn/yn]}return Mt.invert=function(xt,Jt){var on=(Xe-1)/(Xe-1-Jt*St);return ct.invert(on*xt,on*Jt*mt)},Mt}ka.forEach(function(Xe){Xe[1]*=1.0144}),ds.invert=function(Xe,Qe){var ct=Qe/c,mt=90*ct,St=s(18,_(mt/5)),Mt=h(0,i(St));do{var xt=ka[Mt][1],Jt=ka[Mt+1][1],on=ka[s(19,Mt+2)][1],nn=on-xt,yn=on-2*Jt+xt,An=2*(_(ct)-Jt)/nn,Rn=yn/nn,Ln=An*(1-Rn*An*(1-2*Rn*An));if(Ln>=0||1===Mt){mt=(Qe>=0?5:-5)*(Ln+St);var Zn,_r=50;do{Ln=(St=s(18,_(mt)/5))-(Mt=i(St)),xt=ka[Mt][1],Jt=ka[Mt+1][1],on=ka[s(19,Mt+2)][1],mt-=(Zn=(Qe>=0?c:-c)*(Jt+Ln*(on-xt)/2+Ln*Ln*(on-2*Jt+xt)/2)-Qe)*I}while(_(Zn)>1e-12&&--_r>0);break}}while(--Mt>=0);var cr=ka[Mt][0],Jr=ka[Mt+1][0],ti=ka[s(19,Mt+2)][0];return[Xe/(Jr+Ln*(ti-cr)/2+Ln*Ln*(ti-2*Jr+cr)/2),mt*N]};var Uo=-179.9999,pa=179.9999,Rs=-89.9999;function Us(Xe){return Xe.length>0}function wo(Xe){return-90===Xe||90===Xe?[0,Xe]:[-180,(Qe=Xe,Math.floor(1e4*Qe)/1e4)];var Qe}function ia(Xe){var Qe=Xe[0],ct=Xe[1],mt=!1;return Qe<=Uo?(Qe=-180,mt=!0):Qe>=pa&&(Qe=180,mt=!0),ct<=Rs?(ct=-90,mt=!0):ct>=89.9999&&(ct=90,mt=!0),mt?[Qe,ct]:Xe}function qo(Xe){return Xe.map(ia)}function jl(Xe,Qe,ct){for(var mt=0,St=Xe.length;mt<St;++mt){var Mt=Xe[mt].slice();ct.push({index:-1,polygon:Qe,ring:Mt});for(var xt=0,Jt=Mt.length;xt<Jt;++xt){var on=Mt[xt],nn=on[0],yn=on[1];if(nn<=Uo||nn>=pa||yn<=Rs||yn>=89.9999){Mt[xt]=ia(on);for(var An=xt+1;An<Jt;++An){var Rn=Mt[An],Ln=Rn[0],Zn=Rn[1];if(Ln>Uo&&Ln<pa&&Zn>Rs&&Zn<89.9999)break}if(An===xt+1)continue;if(xt){var _r={index:-1,polygon:Qe,ring:Mt.slice(0,xt+1)};_r.ring[_r.ring.length-1]=wo(yn),ct[ct.length-1]=_r}else ct.pop();if(An>=Jt)break;ct.push({index:-1,polygon:Qe,ring:Mt=Mt.slice(An-1)}),Mt[0]=wo(Mt[0][1]),xt=-1,Jt=Mt.length}}}}function Yl(Xe){var Qe,ct,mt,St,Mt,xt,Jt=Xe.length,on={},nn={};for(Qe=0;Qe<Jt;++Qe)(mt=(ct=Xe[Qe]).ring[0])[0]!==(Mt=ct.ring[ct.ring.length-1])[0]||mt[1]!==Mt[1]?(ct.index=Qe,on[mt]=nn[Mt]=ct):(ct.polygon.push(ct.ring),Xe[Qe]=null);for(Qe=0;Qe<Jt;++Qe)if(ct=Xe[Qe]){if(St=nn[mt=ct.ring[0]],xt=on[Mt=ct.ring[ct.ring.length-1]],delete on[mt],delete nn[Mt],mt[0]===Mt[0]&&mt[1]===Mt[1]){ct.polygon.push(ct.ring);continue}St?(delete nn[mt],delete on[St.ring[0]],St.ring.pop(),Xe[St.index]=null,ct={index:-1,polygon:St.polygon,ring:St.ring.concat(ct.ring)},St===xt?ct.polygon.push(ct.ring):(ct.index=Jt++,Xe.push(on[ct.ring[0]]=nn[ct.ring[ct.ring.length-1]]=ct))):xt?(delete on[Mt],delete nn[xt.ring[xt.ring.length-1]],ct.ring.pop(),ct={index:Jt++,polygon:xt.polygon,ring:ct.ring.concat(xt.ring)},Xe[xt.index]=null,Xe.push(on[ct.ring[0]]=nn[ct.ring[ct.ring.length-1]]=ct)):(ct.ring.push(ct.ring[0]),ct.polygon.push(ct.ring))}}function Fa(Xe){var Qe={type:"Feature",geometry:Ms(Xe.geometry)};return null!=Xe.id&&(Qe.id=Xe.id),null!=Xe.bbox&&(Qe.bbox=Xe.bbox),null!=Xe.properties&&(Qe.properties=Xe.properties),Qe}function Ms(Xe){if(null==Xe)return Xe;var Qe,ct,mt,St;switch(Xe.type){case"GeometryCollection":Qe={type:"GeometryCollection",geometries:Xe.geometries.map(Ms)};break;case"Point":Qe={type:"Point",coordinates:ia(Xe.coordinates)};break;case"MultiPoint":case"LineString":Qe={type:Xe.type,coordinates:qo(Xe.coordinates)};break;case"MultiLineString":Qe={type:"MultiLineString",coordinates:Xe.coordinates.map(qo)};break;case"Polygon":var Mt=[];jl(Xe.coordinates,Mt,ct=[]),Yl(ct),Qe={type:"Polygon",coordinates:Mt};break;case"MultiPolygon":ct=[],mt=-1,St=Xe.coordinates.length;for(var xt=new Array(St);++mt<St;)jl(Xe.coordinates[mt],xt[mt]=[],ct);Yl(ct),Qe={type:"MultiPolygon",coordinates:xt.filter(Us)};break;default:return Xe}return null!=Xe.bbox&&(Qe.bbox=Xe.bbox),Qe}function Hs(Xe,Qe){var ct=m(Qe/2),mt=g(E*ct);return[Xe*(.74482-.34588*mt*mt),1.70711*ct]}function pu(Xe,Qe,ct){var mt=b.geoInterpolate(Qe,ct),St=mt(.5),Mt=b.geoRotation([-St[0],-St[1]])(Qe),xt=mt.distance/2,Jt=-F(g(Mt[1]*N)/g(xt)),on=[-St[0],-St[1],-(Mt[0]>0?w-Jt:Jt)*I],nn=b.geoProjection(Xe(xt)).rotate(on),yn=b.geoRotation(on),An=nn.center;return delete nn.rotate,nn.center=function(Rn){return arguments.length?An(yn(Rn)):yn.invert(An())},nn.clipAngle(90)}function Fs(Xe){var Qe=a(Xe);function ct(mt,St){var Mt=b.geoGnomonicRaw(mt,St);return Mt[0]*=Qe,Mt}return ct.invert=function(mt,St){return b.geoGnomonicRaw.invert(mt/Qe,St)},ct}function nu(Xe,Qe){return pu(Fs,Xe,Qe)}function ru(Xe){if(!(Xe*=2))return b.geoAzimuthalEquidistantRaw;var Qe=-Xe/2,ct=-Qe,mt=Xe*Xe,St=m(ct),Mt=.5/g(ct);function xt(Jt,on){var nn=L(a(on)*a(Jt-Qe)),yn=L(a(on)*a(Jt-ct));return[((nn*=nn)-(yn*=yn))/(2*Xe),(on<0?-1:1)*P(4*mt*yn-(mt-nn+yn)*(mt-nn+yn))/(2*Xe)]}return xt.invert=function(Jt,on){var nn,yn,An=on*on,Rn=a(P(An+(nn=Jt+Qe)*nn)),Ln=a(P(An+(nn=Jt+ct)*nn));return[o(yn=Rn-Ln,nn=(Rn+Ln)*St),(on<0?-1:1)*L(P(nn*nn+yn*yn)*Mt)]},xt}function Ns(Xe,Qe){return pu(ru,Xe,Qe)}function zs(Xe,Qe){if(_(Qe)<u)return[Xe,0];var ct=_(Qe/c),mt=F(ct);if(_(Xe)<u||_(_(Qe)-c)<u)return[0,f(Qe)*w*m(mt/2)];var St=a(mt),Mt=_(w/Xe-Xe/w)/2,xt=Mt*Mt,Jt=St/(ct+St-1),on=Jt*(2/ct-1),nn=on*on,yn=nn+xt,An=Jt-nn,Rn=xt+Jt;return[f(Xe)*w*(Mt*An+P(xt*An*An-yn*(Jt*Jt-nn)))/yn,f(Qe)*w*(on*Rn-Mt*P((xt+1)*yn-Rn*Rn))/yn]}function no(Xe,Qe){if(_(Qe)<u)return[Xe,0];var ct=_(Qe/c),mt=F(ct);if(_(Xe)<u||_(_(Qe)-c)<u)return[0,f(Qe)*w*m(mt/2)];var St=a(mt),Mt=_(w/Xe-Xe/w)/2,xt=Mt*Mt,Jt=St*(P(1+xt)-Mt*St)/(1+xt*ct*ct);return[f(Xe)*w*Jt,f(Qe)*w*P(1-Jt*(2*Mt+Jt))]}function ol(Xe,Qe){if(_(Qe)<u)return[Xe,0];var ct=Qe/c,mt=F(ct);if(_(Xe)<u||_(_(Qe)-c)<u)return[0,w*m(mt/2)];var St=(w/Xe-Xe/w)/2,Mt=ct/(1+a(mt));return[w*(f(Xe)*P(St*St+1-Mt*Mt)-St),w*Mt]}function $s(Xe,Qe){if(!Qe)return[Xe,0];var ct=_(Qe);if(!Xe||ct===c)return[0,Qe];var mt=ct/c,St=mt*mt,Mt=(8*mt-St*(St+2)-5)/(2*St*(mt-1)),xt=Mt*Mt,Jt=mt*Mt,on=St+xt+2*Jt,nn=mt+3*Mt,yn=Xe/c,An=yn+1/yn,Rn=f(_(Xe)-c)*P(An*An-4),Ln=Rn*Rn,Zn=(Rn*(on+xt-1)+2*P(on*(St+xt*Ln-1)+(1-St)*(St*(nn*nn+4*xt)+12*Jt*xt+4*xt*xt)))/(4*on+Ln);return[f(Xe)*c*Zn,f(Qe)*c*P(1+Rn*_(Zn)-Zn*Zn)]}function Wi(Xe,Qe,ct,mt){var St=w/3;Xe=h(Xe,u),Qe=h(Qe,u),Xe=s(Xe,c),Qe=s(Qe,w-u),ct=h(ct,0),ct=s(ct,100-u);var Mt=(mt=h(mt,u))/100,xt=L((ct/100+1)*a(St))/St,Jt=g(Xe)/g(xt*c),on=Qe/w,nn=P(Mt*g(Xe/2)/g(Qe/2));return function(yn,An,Rn,Ln,Zn){function _r(cr,Jr){var ti=Rn*g(Ln*Jr),di=P(1-ti*ti),ni=P(2/(1+di*a(cr*=Zn)));return[yn*di*ni*g(cr),An*ti*ni]}return _r.invert=function(cr,Jr){var ti=cr/yn,di=Jr/An,ni=P(ti*ti+di*di),Ci=2*F(ni/2);return[o(cr*m(Ci),yn*ni)/Zn,ni&&F(Jr*g(Ci)/(An*Rn*ni))/Ln]},_r}(nn/P(on*Jt*xt),1/(nn*P(on*Jt*xt)),Jt,xt,on)}function so(){var Xe=65*N,Qe=60*N,ct=20,mt=200,St=b.geoProjectionMutator(Wi),Mt=St(Xe,Qe,ct,mt);return Mt.poleline=function(xt){return arguments.length?St(Xe=+xt*N,Qe,ct,mt):Xe*I},Mt.parallels=function(xt){return arguments.length?St(Xe,Qe=+xt*N,ct,mt):Qe*I},Mt.inflation=function(xt){return arguments.length?St(Xe,Qe,ct=+xt,mt):ct},Mt.ratio=function(xt){return arguments.length?St(Xe,Qe,ct,mt=+xt):mt},Mt.scale(163.775)}Hs.invert=function(Xe,Qe){var ct=Qe/1.70711,mt=g(E*ct);return[Xe/(.74482-.34588*mt*mt),2*e(ct)]},zs.invert=function(Xe,Qe){if(_(Qe)<u)return[Xe,0];if(_(Xe)<u)return[0,c*g(2*e(Qe/w))];var ct=(Xe/=w)*Xe,mt=(Qe/=w)*Qe,St=ct+mt,Mt=St*St,xt=-_(Qe)*(1+St),Jt=xt-2*mt+ct,on=-2*xt+1+2*mt+Mt,nn=mt/on+(2*Jt*Jt*Jt/(on*on*on)-9*xt*Jt/(on*on))/27,yn=(xt-Jt*Jt/(3*on))/on,An=2*P(-yn/3),Rn=L(3*nn/(yn*An))/3;return[w*(St-1+P(1+2*(ct-mt)+Mt))/(2*Xe),f(Qe)*w*(-An*a(Rn+w/3)-Jt/(3*on))]},no.invert=function(Xe,Qe){if(!Xe)return[0,c*g(2*e(Qe/w))];var ct=_(Xe/w),mt=(1-ct*ct-(Qe/=w)*Qe)/(2*ct),St=P(mt*mt+1);return[f(Xe)*w*(St-mt),f(Qe)*c*g(2*o(P((1-2*mt*ct)*(mt+St)-ct),P(St+mt+ct)))]},ol.invert=function(Xe,Qe){if(!Qe)return[Xe,0];var ct=Qe/w,mt=(w*w*(1-ct*ct)-Xe*Xe)/(2*w*Xe);return[Xe?w*(f(Xe)*P(mt*mt+1)-mt):0,c*g(2*e(ct))]},$s.invert=function(Xe,Qe){var ct;if(!Xe||!Qe)return[Xe,Qe];Qe/=w;var mt=f(Xe)*Xe/c,St=(mt*mt-1+4*Qe*Qe)/_(mt),Mt=St*St,xt=2*Qe,Jt=50;do{var on=xt*xt,nn=(8*xt-on*(on+2)-5)/(2*on*(xt-1)),yn=(3*xt-on*xt-10)/(2*on*xt),An=nn*nn,Rn=xt*nn,Ln=xt+nn,Zn=Ln*Ln,_r=xt+3*nn,cr=-2*Ln*(4*Rn*An+(1-4*on+3*on*on)*(1+yn)+An*(14*on-6-Mt+(8*on-8-2*Mt)*yn)+Rn*(12*on-8+(10*on-10-Mt)*yn)),Jr=P(Zn*(on+An*Mt-1)+(1-on)*(on*(_r*_r+4*An)+An*(12*Rn+4*An)));xt-=ct=(St*(Zn+An-1)+2*Jr-mt*(4*Zn+Mt))/(St*(2*nn*yn+2*Ln*(1+yn))+cr/Jr-8*Ln*(St*(-1+An+Zn)+2*Jr)*(1+yn)/(Mt+4*Zn))}while(ct>u&&--Jt>0);return[f(Xe)*(P(St*St+4)+St)*w/4,c*xt]};var Ho=4*w+3*P(3),Po=2*P(2*w*P(3)/Ho),os=ce(Po*P(3)/w,Po,Ho/6);function ns(Xe,Qe){return[Xe*P(1-3*Qe*Qe/(w*w)),Qe]}function ps(Xe,Qe){var ct=a(Qe),mt=a(Xe)*ct,St=1-mt,Mt=a(Xe=o(g(Xe)*ct,-g(Qe))),xt=g(Xe);return[xt*(ct=P(1-mt*mt))-Mt*St,-Mt*ct-xt*St]}function La(Xe,Qe){var ct=X(Xe,Qe);return[(ct[0]+Xe/c)/2,(ct[1]+Qe)/2]}ns.invert=function(Xe,Qe){return[Xe/P(1-3*Qe*Qe/(w*w)),Qe]},ps.invert=function(Xe,Qe){var ct=(Xe*Xe+Qe*Qe)/-2,mt=P(-ct*(2+ct)),St=Qe*ct+Xe*mt,Mt=Xe*ct-Qe*mt,xt=P(Mt*Mt+St*St);return[o(mt*St,xt*(1+ct)),xt?-F(mt*Mt/xt):0]},La.invert=function(Xe,Qe){var ct=Xe,mt=Qe,St=25;do{var Mt,xt=a(mt),Jt=g(mt),on=g(2*mt),nn=Jt*Jt,yn=xt*xt,An=g(ct),Rn=a(ct/2),Ln=g(ct/2),Zn=Ln*Ln,_r=1-yn*Rn*Rn,cr=_r?L(xt*Rn)*P(Mt=1/_r):Mt=0,Jr=.5*(2*cr*xt*Ln+ct/c)-Xe,ti=.5*(cr*Jt+mt)-Qe,di=.5*Mt*(yn*Zn+cr*xt*Rn*nn)+.5/c,ni=Mt*(An*on/4-cr*Jt*Ln),Ci=.125*Mt*(on*Ln-cr*Jt*yn*An),Ji=.5*Mt*(nn*Rn+cr*Zn*xt)+.5,va=ni*Ci-Ji*di,sa=(ti*ni-Jr*Ji)/va,qi=(Jr*Ci-ti*di)/va;ct-=sa,mt-=qi}while((_(sa)>u||_(qi)>u)&&--St>0);return[ct,mt]},y.geoNaturalEarth=b.geoNaturalEarth1,y.geoNaturalEarthRaw=b.geoNaturalEarth1Raw,y.geoAiry=function(){var Xe=c,Qe=b.geoProjectionMutator($),ct=Qe(Xe);return ct.radius=function(mt){return arguments.length?Qe(Xe=mt*N):Xe*I},ct.scale(179.976).clipAngle(147)},y.geoAiryRaw=$,y.geoAitoff=function(){return b.geoProjection(X).scale(152.63)},y.geoAitoffRaw=X,y.geoArmadillo=function(){var Xe=20*N,Qe=Xe>=0?1:-1,ct=m(Qe*Xe),mt=b.geoProjectionMutator(te),St=mt(Xe),Mt=St.stream;return St.parallel=function(xt){return arguments.length?(ct=m((Qe=(Xe=xt*N)>=0?1:-1)*Xe),mt(Xe)):Xe*I},St.stream=function(xt){var Jt=St.rotate(),on=Mt(xt),nn=(St.rotate([0,0]),Mt(xt)),yn=St.precision();return St.rotate(Jt),on.sphere=function(){nn.polygonStart(),nn.lineStart();for(var An=-180*Qe;Qe*An<180;An+=90*Qe)nn.point(An,90*Qe);if(Xe)for(;Qe*(An-=3*Qe*yn)>=-180;)nn.point(An,Qe*-o(a(An*N/2),ct)*I);nn.lineEnd(),nn.polygonEnd()},on},St.scale(218.695).center([0,28.0974])},y.geoArmadilloRaw=te,y.geoAugust=function(){return b.geoProjection(ae).scale(66.1603)},y.geoAugustRaw=ae,y.geoBaker=function(){return b.geoProjection(se).scale(112.314)},y.geoBakerRaw=se,y.geoBerghaus=function(){var Xe=5,Qe=b.geoProjectionMutator(G),ct=Qe(Xe),mt=ct.stream,St=-a(.01*N),Mt=g(.01*N);return ct.lobes=function(xt){return arguments.length?Qe(Xe=+xt):Xe},ct.stream=function(xt){var Jt=ct.rotate(),on=mt(xt),nn=(ct.rotate([0,0]),mt(xt));return ct.rotate(Jt),on.sphere=function(){nn.polygonStart(),nn.lineStart();for(var yn=0,An=360/Xe,Rn=2*w/Xe,Ln=90-180/Xe,Zn=c;yn<Xe;++yn,Ln-=An,Zn-=Rn)nn.point(o(Mt*a(Zn),St)*I,F(Mt*g(Zn))*I),Ln<-90?(nn.point(-90,-180-Ln-.01),nn.point(-90,-180-Ln+.01)):(nn.point(90,Ln+.01),nn.point(90,Ln-.01));nn.lineEnd(),nn.polygonEnd()},on},ct.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},y.geoBerghausRaw=G,y.geoBertin1953=function(){return b.geoProjection(ne()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},y.geoBertin1953Raw=ne,y.geoBoggs=function(){return b.geoProjection(we).scale(160.857)},y.geoBoggsRaw=we,y.geoBonne=function(){return ye(Le).scale(123.082).center([0,26.1441]).parallel(45)},y.geoBonneRaw=Le,y.geoBottomley=function(){var Xe=.5,Qe=b.geoProjectionMutator(Oe),ct=Qe(Xe);return ct.fraction=function(mt){return arguments.length?Qe(Xe=+mt):Xe},ct.scale(158.837)},y.geoBottomleyRaw=Oe,y.geoBromley=function(){return b.geoProjection(Re).scale(152.63)},y.geoBromleyRaw=Re,y.geoChamberlin=Be,y.geoChamberlinRaw=Fe,y.geoChamberlinAfrica=function(){return Be([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},y.geoCollignon=function(){return b.geoProjection(qe).scale(95.6464).center([0,30])},y.geoCollignonRaw=qe,y.geoCraig=function(){return ye(We).scale(249.828).clipAngle(90)},y.geoCraigRaw=We,y.geoCraster=function(){return b.geoProjection(ut).scale(156.19)},y.geoCrasterRaw=ut,y.geoCylindricalEqualArea=function(){return ye(Ge).parallel(38.58).scale(195.044)},y.geoCylindricalEqualAreaRaw=Ge,y.geoCylindricalStereographic=function(){return ye(Ke).scale(124.75)},y.geoCylindricalStereographicRaw=Ke,y.geoEckert1=function(){return b.geoProjection(nt).scale(165.664)},y.geoEckert1Raw=nt,y.geoEckert2=function(){return b.geoProjection(it).scale(165.664)},y.geoEckert2Raw=it,y.geoEckert3=function(){return b.geoProjection(ht).scale(180.739)},y.geoEckert3Raw=ht,y.geoEckert4=function(){return b.geoProjection(Tt).scale(180.739)},y.geoEckert4Raw=Tt,y.geoEckert5=function(){return b.geoProjection(Ct).scale(173.044)},y.geoEckert5Raw=Ct,y.geoEckert6=function(){return b.geoProjection(Vt).scale(173.044)},y.geoEckert6Raw=Vt,y.geoEisenlohr=function(){return b.geoProjection(gt).scale(62.5271)},y.geoEisenlohrRaw=gt,y.geoFahey=function(){return b.geoProjection(Bt).scale(137.152)},y.geoFaheyRaw=Bt,y.geoFoucaut=function(){return b.geoProjection(rn).scale(135.264)},y.geoFoucautRaw=rn,y.geoFoucautSinusoidal=function(){var Xe=.5,Qe=b.geoProjectionMutator(un),ct=Qe(Xe);return ct.alpha=function(mt){return arguments.length?Qe(Xe=+mt):Xe},ct.scale(168.725)},y.geoFoucautSinusoidalRaw=un,y.geoGilbert=function(Xe){null==Xe&&(Xe=b.geoOrthographic);var Qe=Xe(),ct=b.geoEquirectangular().scale(I).precision(0).clipAngle(null).translate([0,0]);function mt(Mt){return Qe(pn(Mt))}function St(Mt){mt[Mt]=function(){return arguments.length?(Qe[Mt].apply(Qe,arguments),mt):Qe[Mt]()}}return Qe.invert&&(mt.invert=function(Mt){return dn(Qe.invert(Mt))}),mt.stream=function(Mt){var xt=Qe.stream(Mt),Jt=ct.stream({point:function(on,nn){xt.point(on/2,F(m(-nn/2*N))*I)},lineStart:function(){xt.lineStart()},lineEnd:function(){xt.lineEnd()},polygonStart:function(){xt.polygonStart()},polygonEnd:function(){xt.polygonEnd()}});return Jt.sphere=xt.sphere,Jt},mt.rotate=function(Mt){return arguments.length?(ct.rotate(Mt),mt):ct.rotate()},mt.center=function(Mt){return arguments.length?(Qe.center(pn(Mt)),mt):dn(Qe.center())},St("angle"),St("clipAngle"),St("clipExtent"),St("fitExtent"),St("fitHeight"),St("fitSize"),St("fitWidth"),St("scale"),St("translate"),St("precision"),mt.scale(249.5)},y.geoGingery=function(){var Xe=6,Qe=30*N,ct=a(Qe),mt=g(Qe),St=b.geoProjectionMutator(Mn),Mt=St(Qe,Xe),xt=Mt.stream,Jt=-a(.01*N),on=g(.01*N);return Mt.radius=function(nn){return arguments.length?(ct=a(Qe=nn*N),mt=g(Qe),St(Qe,Xe)):Qe*I},Mt.lobes=function(nn){return arguments.length?St(Qe,Xe=+nn):Xe},Mt.stream=function(nn){var yn=Mt.rotate(),An=xt(nn),Rn=(Mt.rotate([0,0]),xt(nn));return Mt.rotate(yn),An.sphere=function(){Rn.polygonStart(),Rn.lineStart();for(var Ln=0,Zn=2*w/Xe,_r=0;Ln<Xe;++Ln,_r-=Zn)Rn.point(o(on*a(_r),Jt)*I,F(on*g(_r))*I),Rn.point(o(mt*a(_r-Zn/2),ct)*I,F(mt*g(_r-Zn/2))*I);Rn.lineEnd(),Rn.polygonEnd()},An},Mt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},y.geoGingeryRaw=Mn,y.geoGinzburg4=function(){return b.geoProjection(Ie).scale(149.995)},y.geoGinzburg4Raw=Ie,y.geoGinzburg5=function(){return b.geoProjection(He).scale(153.93)},y.geoGinzburg5Raw=He,y.geoGinzburg6=function(){return b.geoProjection(Ye).scale(130.945)},y.geoGinzburg6Raw=Ye,y.geoGinzburg8=function(){return b.geoProjection(tt).scale(131.747)},y.geoGinzburg8Raw=tt,y.geoGinzburg9=function(){return b.geoProjection(ot).scale(131.087)},y.geoGinzburg9Raw=ot,y.geoGringorten=function(){return b.geoProjection(st(bt)).scale(239.75)},y.geoGringortenRaw=bt,y.geoGuyou=function(){return b.geoProjection(st(Kt)).scale(151.496)},y.geoGuyouRaw=Kt,y.geoHammer=function(){var Xe=2,Qe=b.geoProjectionMutator(H),ct=Qe(Xe);return ct.coefficient=function(mt){return arguments.length?Qe(Xe=+mt):Xe},ct.scale(169.529)},y.geoHammerRaw=H,y.geoHammerRetroazimuthal=function(){var Xe=0,Qe=b.geoProjectionMutator(vt),ct=Qe(Xe),mt=ct.rotate,St=ct.stream,Mt=b.geoCircle();return ct.parallel=function(xt){if(!arguments.length)return Xe*I;var Jt=ct.rotate();return Qe(Xe=xt*N).rotate(Jt)},ct.rotate=function(xt){return arguments.length?(mt.call(ct,[xt[0],xt[1]-Xe*I]),Mt.center([-xt[0],-xt[1]]),ct):((xt=mt.call(ct))[1]+=Xe*I,xt)},ct.stream=function(xt){return(xt=St(xt)).sphere=function(){xt.polygonStart();var Jt,on=Mt.radius(89.99)().coordinates[0],nn=on.length-1,yn=-1;for(xt.lineStart();++yn<nn;)xt.point((Jt=on[yn])[0],Jt[1]);for(xt.lineEnd(),nn=(on=Mt.radius(90.01)().coordinates[0]).length-1,xt.lineStart();--yn>=0;)xt.point((Jt=on[yn])[0],Jt[1]);xt.lineEnd(),xt.polygonEnd()},xt},ct.scale(79.4187).parallel(45).clipAngle(179.999)},y.geoHammerRetroazimuthalRaw=vt,y.geoHealpix=function(){var Xe=4,Qe=b.geoProjectionMutator(Pt),ct=Qe(Xe),mt=ct.stream;return ct.lobes=function(St){return arguments.length?Qe(Xe=+St):Xe},ct.stream=function(St){var Mt=ct.rotate(),xt=mt(St),Jt=(ct.rotate([0,0]),mt(St));return ct.rotate(Mt),xt.sphere=function(){var on,nn;b.geoStream((nn=[].concat(T.range(-180,180+(on=180/Xe)/2,on).map(je),T.range(180,-180-on/2,-on).map(rt)),{type:"Polygon",coordinates:[180===on?nn.map(pt):nn]}),Jt)},xt},ct.scale(239.75)},y.geoHealpixRaw=Pt,y.geoHill=function(){var Xe=1,Qe=b.geoProjectionMutator(It),ct=Qe(Xe);return ct.ratio=function(mt){return arguments.length?Qe(Xe=+mt):Xe},ct.scale(167.774).center([0,18.67])},y.geoHillRaw=It,y.geoHomolosine=function(){return b.geoProjection(Qt).scale(152.63)},y.geoHomolosineRaw=Qt,y.geoHufnagel=function(){var Xe=1,Qe=0,ct=45*N,mt=2,St=b.geoProjectionMutator(fn),Mt=St(Xe,Qe,ct,mt);return Mt.a=function(xt){return arguments.length?St(Xe=+xt,Qe,ct,mt):Xe},Mt.b=function(xt){return arguments.length?St(Xe,Qe=+xt,ct,mt):Qe},Mt.psiMax=function(xt){return arguments.length?St(Xe,Qe,ct=+xt*N,mt):ct*I},Mt.ratio=function(xt){return arguments.length?St(Xe,Qe,ct,mt=+xt):mt},Mt.scale(180.739)},y.geoHufnagelRaw=fn,y.geoHyperelliptical=function(){var Xe=0,Qe=2.5,ct=1.183136,mt=b.geoProjectionMutator(Sn),St=mt(Xe,Qe,ct);return St.alpha=function(Mt){return arguments.length?mt(Xe=+Mt,Qe,ct):Xe},St.k=function(Mt){return arguments.length?mt(Xe,Qe=+Mt,ct):Qe},St.gamma=function(Mt){return arguments.length?mt(Xe,Qe,ct=+Mt):ct},St.scale(152.63)},y.geoHyperellipticalRaw=Sn,y.geoInterrupt=vn,y.geoInterruptedBoggs=function(){return vn(we,hn).scale(160.857)},y.geoInterruptedHomolosine=function(){return vn(Qt,Dn).scale(152.63)},y.geoInterruptedMollweide=function(){return vn(fe,Pn).scale(169.529)},y.geoInterruptedMollweideHemispheres=function(){return vn(fe,$n).scale(169.529).rotate([20,0])},y.geoInterruptedSinuMollweide=function(){return vn(jt,rr,W).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},y.geoInterruptedSinusoidal=function(){return vn(Te,er).scale(152.63).rotate([-20,0])},y.geoKavrayskiy7=function(){return b.geoProjection(or).scale(158.837)},y.geoKavrayskiy7Raw=or,y.geoLagrange=function(){var Xe=.5,Qe=b.geoProjectionMutator(Zr),ct=Qe(Xe);return ct.spacing=function(mt){return arguments.length?Qe(Xe=+mt):Xe},ct.scale(124.75)},y.geoLagrangeRaw=Zr,y.geoLarrivee=function(){return b.geoProjection(pr).scale(97.2672)},y.geoLarriveeRaw=pr,y.geoLaskowski=function(){return b.geoProjection(Br).scale(139.98)},y.geoLaskowskiRaw=Br,y.geoLittrow=function(){return b.geoProjection(fr).scale(144.049).clipAngle(89.999)},y.geoLittrowRaw=fr,y.geoLoximuthal=function(){return ye(Nr).parallel(40).scale(158.837)},y.geoLoximuthalRaw=Nr,y.geoMiller=function(){return b.geoProjection(xi).scale(108.318)},y.geoMillerRaw=xi,y.geoModifiedStereographic=Or,y.geoModifiedStereographicRaw=Qn,y.geoModifiedStereographicAlaska=function(){return Or(Er,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},y.geoModifiedStereographicGs48=function(){return Or(kr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},y.geoModifiedStereographicGs50=function(){return Or(sr,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},y.geoModifiedStereographicMiller=function(){return Or(ci,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},y.geoModifiedStereographicLee=function(){return Or(oi,[165,10]).scale(250).clipAngle(130).center([-165,-10])},y.geoMollweide=function(){return b.geoProjection(fe).scale(169.529)},y.geoMollweideRaw=fe,y.geoMtFlatPolarParabolic=function(){return b.geoProjection(gn).scale(164.859)},y.geoMtFlatPolarParabolicRaw=gn,y.geoMtFlatPolarQuartic=function(){return b.geoProjection(tr).scale(188.209)},y.geoMtFlatPolarQuarticRaw=tr,y.geoMtFlatPolarSinusoidal=function(){return b.geoProjection(qt).scale(166.518)},y.geoMtFlatPolarSinusoidalRaw=qt,y.geoNaturalEarth2=function(){return b.geoProjection(_n).scale(175.295)},y.geoNaturalEarth2Raw=_n,y.geoNellHammer=function(){return b.geoProjection(Cn).scale(152.63)},y.geoNellHammerRaw=Cn,y.geoInterruptedQuarticAuthalic=function(){return vn(H(1/0),Jn).rotate([20,0]).scale(152.63)},y.geoNicolosi=function(){return b.geoProjection(Xn).scale(127.267)},y.geoNicolosiRaw=Xn,y.geoPatterson=function(){return b.geoProjection(Hn).scale(139.319)},y.geoPattersonRaw=Hn,y.geoPolyconic=function(){return b.geoProjection(Bn).scale(103.74)},y.geoPolyconicRaw=Bn,y.geoPolyhedral=dr,y.geoPolyhedralButterfly=function(Xe){Xe=Xe||function(ct){var mt=b.geoCentroid({type:"MultiPoint",coordinates:ct});return b.geoGnomonic().scale(1).translate([0,0]).rotate([-mt[0],-mt[1]])};var Qe=Fr.map(function(ct){return{face:ct,project:Xe(ct)}});return[-1,0,0,1,0,1,4,5].forEach(function(ct,mt){var St=Qe[ct];St&&(St.children||(St.children=[])).push(Qe[mt])}),dr(Qe[0],function(ct,mt){return Qe[ct<-w/2?mt<0?6:4:ct<0?mt<0?2:0:ct<w/2?mt<0?3:1:mt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},y.geoPolyhedralCollignon=function(Xe){Xe=Xe||function(ct){var mt=b.geoCentroid({type:"MultiPoint",coordinates:ct});return b.geoProjection(Ur).translate([0,0]).scale(1).rotate(mt[1]>0?[-mt[0],0]:[180-mt[0],180])};var Qe=Fr.map(function(ct){return{face:ct,project:Xe(ct)}});return[-1,0,0,1,0,1,4,5].forEach(function(ct,mt){var St=Qe[ct];St&&(St.children||(St.children=[])).push(Qe[mt])}),dr(Qe[0],function(ct,mt){return Qe[ct<-w/2?mt<0?6:4:ct<0?mt<0?2:0:ct<w/2?mt<0?3:1:mt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},y.geoPolyhedralWaterman=function(Xe){Xe=Xe||function(Mt){var xt=6===Mt.length?b.geoCentroid({type:"MultiPoint",coordinates:Mt}):Mt[0];return b.geoGnomonic().scale(1).translate([0,0]).rotate([-xt[0],-xt[1]])};var Qe=Fr.map(function(Mt){for(var xt,Jt=Mt.map(_i),on=Jt.length,nn=Jt[on-1],yn=[],An=0;An<on;++An)yn.push(ri([.9486832980505138*nn[0]+.31622776601683794*(xt=Jt[An])[0],.9486832980505138*nn[1]+.31622776601683794*xt[1],.9486832980505138*nn[2]+.31622776601683794*xt[2]]),ri([.9486832980505138*xt[0]+.31622776601683794*nn[0],.9486832980505138*xt[1]+.31622776601683794*nn[1],.9486832980505138*xt[2]+.31622776601683794*nn[2]])),nn=xt;return yn}),ct=[],mt=[-1,0,0,1,0,1,4,5];Qe.forEach(function(Mt,xt){for(var Jt,on,nn=Fr[xt],yn=nn.length,An=ct[xt]=[],Rn=0;Rn<yn;++Rn)Qe.push([nn[Rn],Mt[(2*Rn+2)%(2*yn)],Mt[(2*Rn+1)%(2*yn)]]),mt.push(xt),An.push((Jt=_i(Mt[(2*Rn+2)%(2*yn)]),on=_i(Mt[(2*Rn+1)%(2*yn)]),[Jt[1]*on[2]-Jt[2]*on[1],Jt[2]*on[0]-Jt[0]*on[2],Jt[0]*on[1]-Jt[1]*on[0]]))});var St=Qe.map(function(Mt){return{project:Xe(Mt),face:Mt}});return mt.forEach(function(Mt,xt){var Jt=St[Mt];Jt&&(Jt.children||(Jt.children=[])).push(St[xt])}),dr(St[0],function(Mt,xt){var Jt=a(xt),on=[Jt*a(Mt),Jt*g(Mt),g(xt)],nn=Mt<-w/2?xt<0?6:4:Mt<0?xt<0?2:0:Mt<w/2?xt<0?3:1:xt<0?7:5,yn=ct[nn];return St[Xr(yn[0],on)<0?8+3*nn:Xr(yn[1],on)<0?8+3*nn+1:Xr(yn[2],on)<0?8+3*nn+2:nn]}).angle(-30).scale(110.625).center([0,45])},y.geoProject=function(Xe,Qe){var ct,mt=Qe.stream;if(!mt)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":ct=Gr;break;case"FeatureCollection":ct=hi;break;default:ct=Mi}return ct(Xe,mt)},y.geoGringortenQuincuncial=function(){return Ha(bt).scale(176.423)},y.geoPeirceQuincuncial=qa,y.geoPierceQuincuncial=qa,y.geoQuantize=function(Xe,Qe){if(!(0<=(Qe=+Qe)&&Qe<=20))throw new Error("invalid digits");function ct(nn){var yn=nn.length,An=2,Rn=new Array(yn);for(Rn[0]=+nn[0].toFixed(Qe),Rn[1]=+nn[1].toFixed(Qe);An<yn;)Rn[An]=nn[An],++An;return Rn}function mt(nn){return nn.map(ct)}function St(nn){for(var yn=ct(nn[0]),An=[yn],Rn=1;Rn<nn.length;Rn++){var Ln=ct(nn[Rn]);(Ln.length>2||Ln[0]!=yn[0]||Ln[1]!=yn[1])&&(An.push(Ln),yn=Ln)}return 1===An.length&&nn.length>1&&An.push(ct(nn[nn.length-1])),An}function Mt(nn){return nn.map(St)}function xt(nn){if(null==nn)return nn;var yn;switch(nn.type){case"GeometryCollection":yn={type:"GeometryCollection",geometries:nn.geometries.map(xt)};break;case"Point":yn={type:"Point",coordinates:ct(nn.coordinates)};break;case"MultiPoint":yn={type:nn.type,coordinates:mt(nn.coordinates)};break;case"LineString":yn={type:nn.type,coordinates:St(nn.coordinates)};break;case"MultiLineString":case"Polygon":yn={type:nn.type,coordinates:Mt(nn.coordinates)};break;case"MultiPolygon":yn={type:"MultiPolygon",coordinates:nn.coordinates.map(Mt)};break;default:return nn}return null!=nn.bbox&&(yn.bbox=nn.bbox),yn}function Jt(nn){var yn={type:"Feature",properties:nn.properties,geometry:xt(nn.geometry)};return null!=nn.id&&(yn.id=nn.id),null!=nn.bbox&&(yn.bbox=nn.bbox),yn}if(null!=Xe)switch(Xe.type){case"Feature":return Jt(Xe);case"FeatureCollection":var on={type:"FeatureCollection",features:Xe.features.map(Jt)};return null!=Xe.bbox&&(on.bbox=Xe.bbox),on;default:return xt(Xe)}return Xe},y.geoQuincuncial=Ha,y.geoRectangularPolyconic=function(){return ye(ho).scale(131.215)},y.geoRectangularPolyconicRaw=ho,y.geoRobinson=function(){return b.geoProjection(ds).scale(152.63)},y.geoRobinsonRaw=ds,y.geoSatellite=function(){var Xe=2,Qe=0,ct=b.geoProjectionMutator(Ts),mt=ct(Xe,Qe);return mt.distance=function(St){return arguments.length?ct(Xe=+St,Qe):Xe},mt.tilt=function(St){return arguments.length?ct(Xe,Qe=St*N):Qe*I},mt.scale(432.147).clipAngle(L(1/Xe)*I-1e-6)},y.geoSatelliteRaw=Ts,y.geoSinuMollweide=function(){return b.geoProjection(jt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},y.geoSinuMollweideRaw=jt,y.geoSinusoidal=function(){return b.geoProjection(Te).scale(152.63)},y.geoSinusoidalRaw=Te,y.geoStitch=function(Xe){if(null==Xe)return Xe;switch(Xe.type){case"Feature":return Fa(Xe);case"FeatureCollection":var Qe={type:"FeatureCollection",features:Xe.features.map(Fa)};return null!=Xe.bbox&&(Qe.bbox=Xe.bbox),Qe;default:return Ms(Xe)}},y.geoTimes=function(){return b.geoProjection(Hs).scale(146.153)},y.geoTimesRaw=Hs,y.geoTwoPointAzimuthal=nu,y.geoTwoPointAzimuthalRaw=Fs,y.geoTwoPointAzimuthalUsa=function(){return nu([-158,21.5],[-77,39]).clipAngle(60).scale(400)},y.geoTwoPointEquidistant=Ns,y.geoTwoPointEquidistantRaw=ru,y.geoTwoPointEquidistantUsa=function(){return Ns([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},y.geoVanDerGrinten=function(){return b.geoProjection(zs).scale(79.4183)},y.geoVanDerGrintenRaw=zs,y.geoVanDerGrinten2=function(){return b.geoProjection(no).scale(79.4183)},y.geoVanDerGrinten2Raw=no,y.geoVanDerGrinten3=function(){return b.geoProjection(ol).scale(79.4183)},y.geoVanDerGrinten3Raw=ol,y.geoVanDerGrinten4=function(){return b.geoProjection($s).scale(127.16)},y.geoVanDerGrinten4Raw=$s,y.geoWagner=so,y.geoWagner7=function(){return so().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},y.geoWagnerRaw=Wi,y.geoWagner4=function(){return b.geoProjection(os).scale(176.84)},y.geoWagner4Raw=os,y.geoWagner6=function(){return b.geoProjection(ns).scale(152.63)},y.geoWagner6Raw=ns,y.geoWiechel=function(){return b.geoProjection(ps).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},y.geoWiechelRaw=ps,y.geoWinkel3=function(){return b.geoProjection(La).scale(158.837)},y.geoWinkel3Raw=La,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof le&&void 0!==ue?b(le,x("d3-geo"),x("d3-array")):b(y.d3=y.d3||{},y.d3,y.d3)},{"d3-array":107,"d3-geo":114}],114:[function(x,ue,le){var y,b;y=this,b=function(y,b){"use strict";function T(){return new _}function _(){this.reset()}_.prototype={constructor:_,reset:function(){this.s=this.t=0},add:function(At){o(e,At,this.t),o(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new _;function o(At,Wt,wn){var tn=At.s=Wt+wn,Tn=tn-Wt;At.t=Wt-(tn-Tn)+(wn-Tn)}var a=1e-6,l=Math.PI,i=l/2,v=l/4,h=2*l,s=180/l,d=l/180,p=Math.abs,f=Math.atan,g=Math.atan2,m=Math.cos,u=Math.ceil,w=Math.exp,c=Math.log,E=Math.pow,M=Math.sin,S=Math.sign||function(At){return At>0?1:At<0?-1:0},C=Math.sqrt,O=Math.tan;function I(At){return At>1?0:At<-1?l:Math.acos(At)}function N(At){return At>1?i:At<-1?-i:Math.asin(At)}function F(At){return(At=M(At/2))*At}function L(){}function P(At,Wt){At&&U.hasOwnProperty(At.type)&&U[At.type](At,Wt)}var j={Feature:function(At,Wt){P(At.geometry,Wt)},FeatureCollection:function(At,Wt){for(var wn=At.features,tn=-1,Tn=wn.length;++tn<Tn;)P(wn[tn].geometry,Wt)}},U={Sphere:function(At,Wt){Wt.sphere()},Point:function(At,Wt){Wt.point((At=At.coordinates)[0],At[1],At[2])},MultiPoint:function(At,Wt){for(var wn=At.coordinates,tn=-1,Tn=wn.length;++tn<Tn;)Wt.point((At=wn[tn])[0],At[1],At[2])},LineString:function(At,Wt){$(At.coordinates,Wt,0)},MultiLineString:function(At,Wt){for(var wn=At.coordinates,tn=-1,Tn=wn.length;++tn<Tn;)$(wn[tn],Wt,0)},Polygon:function(At,Wt){X(At.coordinates,Wt)},MultiPolygon:function(At,Wt){for(var wn=At.coordinates,tn=-1,Tn=wn.length;++tn<Tn;)X(wn[tn],Wt)},GeometryCollection:function(At,Wt){for(var wn=At.geometries,tn=-1,Tn=wn.length;++tn<Tn;)P(wn[tn],Wt)}};function $(At,Wt,wn){var tn,Tn=-1,Wn=At.length-wn;for(Wt.lineStart();++Tn<Wn;)Wt.point((tn=At[Tn])[0],tn[1],tn[2]);Wt.lineEnd()}function X(At,Wt){var wn=-1,tn=At.length;for(Wt.polygonStart();++wn<tn;)$(At[wn],Wt,1);Wt.polygonEnd()}function te(At,Wt){At&&j.hasOwnProperty(At.type)?j[At.type](At,Wt):P(At,Wt)}var ae,J,ee,se,G,H=T(),Y=T(),oe={point:L,lineStart:L,lineEnd:L,polygonStart:function(){H.reset(),oe.lineStart=W,oe.lineEnd=ne},polygonEnd:function(){var At=+H;Y.add(At<0?h+At:At),this.lineStart=this.lineEnd=this.point=L},sphere:function(){Y.add(h)}};function W(){oe.point=re}function ne(){ce(ae,J)}function re(At,Wt){oe.point=ce,ae=At,J=Wt,ee=At*=d,se=m(Wt=(Wt*=d)/2+v),G=M(Wt)}function ce(At,Wt){var wn=(At*=d)-ee,tn=wn>=0?1:-1,Tn=tn*wn,Wn=m(Wt=(Wt*=d)/2+v),nr=M(Wt),gr=G*nr,Sr=se*Wn+gr*m(Tn),Mr=gr*tn*M(Tn);H.add(g(Mr,Sr)),ee=At,se=Wn,G=nr}function fe(At){return[g(At[1],At[0]),N(At[2])]}function me(At){var Wt=At[0],wn=At[1],tn=m(wn);return[tn*m(Wt),tn*M(Wt),M(wn)]}function pe(At,Wt){return At[0]*Wt[0]+At[1]*Wt[1]+At[2]*Wt[2]}function we(At,Wt){return[At[1]*Wt[2]-At[2]*Wt[1],At[2]*Wt[0]-At[0]*Wt[2],At[0]*Wt[1]-At[1]*Wt[0]]}function ye(At,Wt){At[0]+=Wt[0],At[1]+=Wt[1],At[2]+=Wt[2]}function Te(At,Wt){return[At[0]*Wt,At[1]*Wt,At[2]*Wt]}function Le(At){var Wt=C(At[0]*At[0]+At[1]*At[1]+At[2]*At[2]);At[0]/=Wt,At[1]/=Wt,At[2]/=Wt}var Oe,Re,Ve,_e,Ae,Fe,Pe,Be,qe,We,Je,ut,Ge,Ke,nt,it,ht,Tt,Ct,Vt,Ft,gt,ft,Bt,rn,un,pn=T(),dn={point:Mn,lineStart:Ee,lineEnd:De,polygonStart:function(){dn.point=Ie,dn.lineStart=He,dn.lineEnd=Ye,pn.reset(),oe.polygonStart()},polygonEnd:function(){oe.polygonEnd(),dn.point=Mn,dn.lineStart=Ee,dn.lineEnd=De,H<0?(Oe=-(Ve=180),Re=-(_e=90)):pn>a?_e=90:pn<-a&&(Re=-90),We[0]=Oe,We[1]=Ve},sphere:function(){Oe=-(Ve=180),Re=-(_e=90)}};function Mn(At,Wt){qe.push(We=[Oe=At,Ve=At]),Wt<Re&&(Re=Wt),Wt>_e&&(_e=Wt)}function ln(At,Wt){var wn=me([At*d,Wt*d]);if(Be){var tn=we(Be,wn),Tn=we([tn[1],-tn[0],0],tn);Le(Tn),Tn=fe(Tn);var Wn,nr=At-Ae,gr=nr>0?1:-1,Sr=Tn[0]*s*gr,Mr=p(nr)>180;Mr^(gr*Ae<Sr&&Sr<gr*At)?(Wn=Tn[1]*s)>_e&&(_e=Wn):Mr^(gr*Ae<(Sr=(Sr+360)%360-180)&&Sr<gr*At)?(Wn=-Tn[1]*s)<Re&&(Re=Wn):(Wt<Re&&(Re=Wt),Wt>_e&&(_e=Wt)),Mr?At<Ae?tt(Oe,At)>tt(Oe,Ve)&&(Ve=At):tt(At,Ve)>tt(Oe,Ve)&&(Oe=At):Ve>=Oe?(At<Oe&&(Oe=At),At>Ve&&(Ve=At)):At>Ae?tt(Oe,At)>tt(Oe,Ve)&&(Ve=At):tt(At,Ve)>tt(Oe,Ve)&&(Oe=At)}else qe.push(We=[Oe=At,Ve=At]);Wt<Re&&(Re=Wt),Wt>_e&&(_e=Wt),Be=wn,Ae=At}function Ee(){dn.point=ln}function De(){We[0]=Oe,We[1]=Ve,dn.point=Mn,Be=null}function Ie(At,Wt){if(Be){var wn=At-Ae;pn.add(p(wn)>180?wn+(wn>0?360:-360):wn)}else Fe=At,Pe=Wt;oe.point(At,Wt),ln(At,Wt)}function He(){oe.lineStart()}function Ye(){Ie(Fe,Pe),oe.lineEnd(),p(pn)>a&&(Oe=-(Ve=180)),We[0]=Oe,We[1]=Ve,Be=null}function tt(At,Wt){return(Wt-=At)<0?Wt+360:Wt}function ot(At,Wt){return At[0]-Wt[0]}function st(At,Wt){return At[0]<=At[1]?At[0]<=Wt&&Wt<=At[1]:Wt<At[0]||At[1]<Wt}var bt={sphere:L,point:wt,lineStart:Kt,lineEnd:$t,polygonStart:function(){bt.lineStart=Dt,bt.lineEnd=Pt},polygonEnd:function(){bt.lineStart=Kt,bt.lineEnd=$t}};function wt(At,Wt){At*=d;var wn=m(Wt*=d);Ut(wn*m(At),wn*M(At),M(Wt))}function Ut(At,Wt,wn){++Je,Ge+=(At-Ge)/Je,Ke+=(Wt-Ke)/Je,nt+=(wn-nt)/Je}function Kt(){bt.point=vt}function vt(At,Wt){At*=d;var wn=m(Wt*=d);Bt=wn*m(At),rn=wn*M(At),un=M(Wt),bt.point=Et,Ut(Bt,rn,un)}function Et(At,Wt){At*=d;var wn=m(Wt*=d),tn=wn*m(At),Tn=wn*M(At),Wn=M(Wt),nr=g(C((nr=rn*Wn-un*Tn)*nr+(nr=un*tn-Bt*Wn)*nr+(nr=Bt*Tn-rn*tn)*nr),Bt*tn+rn*Tn+un*Wn);ut+=nr,it+=nr*(Bt+(Bt=tn)),ht+=nr*(rn+(rn=Tn)),Tt+=nr*(un+(un=Wn)),Ut(Bt,rn,un)}function $t(){bt.point=wt}function Dt(){bt.point=je}function Pt(){rt(gt,ft),bt.point=wt}function je(At,Wt){gt=At,ft=Wt,At*=d,Wt*=d,bt.point=rt;var wn=m(Wt);Bt=wn*m(At),rn=wn*M(At),un=M(Wt),Ut(Bt,rn,un)}function rt(At,Wt){At*=d;var wn=m(Wt*=d),tn=wn*m(At),Tn=wn*M(At),Wn=M(Wt),nr=rn*Wn-un*Tn,gr=un*tn-Bt*Wn,Sr=Bt*Tn-rn*tn,Mr=C(nr*nr+gr*gr+Sr*Sr),Rr=N(Mr),Wr=Mr&&-Rr/Mr;Ct+=Wr*nr,Vt+=Wr*gr,Ft+=Wr*Sr,ut+=Rr,it+=Rr*(Bt+(Bt=tn)),ht+=Rr*(rn+(rn=Tn)),Tt+=Rr*(un+(un=Wn)),Ut(Bt,rn,un)}function pt(At){return function(){return At}}function It(At,Wt){function wn(tn,Tn){return tn=At(tn,Tn),Wt(tn[0],tn[1])}return At.invert&&Wt.invert&&(wn.invert=function(tn,Tn){return(tn=Wt.invert(tn,Tn))&&At.invert(tn[0],tn[1])}),wn}function jt(At,Wt){return[p(At)>l?At+Math.round(-At/h)*h:At,Wt]}function Qt(At,Wt,wn){return(At%=h)?Wt||wn?It(an(At),Sn(Wt,wn)):an(At):Wt||wn?Sn(Wt,wn):jt}function fn(At){return function(Wt,wn){return[(Wt+=At)>l?Wt-h:Wt<-l?Wt+h:Wt,wn]}}function an(At){var Wt=fn(At);return Wt.invert=fn(-At),Wt}function Sn(At,Wt){var wn=m(At),tn=M(At),Tn=m(Wt),Wn=M(Wt);function nr(gr,Sr){var Mr=m(Sr),Rr=m(gr)*Mr,Wr=M(gr)*Mr,Cr=M(Sr),Yr=Cr*wn+Rr*tn;return[g(Wr*Tn-Yr*Wn,Rr*wn-Cr*tn),N(Yr*Tn+Wr*Wn)]}return nr.invert=function(gr,Sr){var Mr=m(Sr),Rr=m(gr)*Mr,Wr=M(gr)*Mr,Cr=M(Sr),Yr=Cr*Tn-Wr*Wn;return[g(Wr*Tn+Cr*Wn,Rr*wn+Yr*tn),N(Yr*wn-Rr*tn)]},nr}function Yn(At){function Wt(wn){return(wn=At(wn[0]*d,wn[1]*d))[0]*=s,wn[1]*=s,wn}return At=Qt(At[0]*d,At[1]*d,At.length>2?At[2]*d:0),Wt.invert=function(wn){return(wn=At.invert(wn[0]*d,wn[1]*d))[0]*=s,wn[1]*=s,wn},Wt}function kn(At,Wt,wn,tn,Tn,Wn){if(wn){var nr=m(Wt),gr=M(Wt),Sr=tn*wn;null==Tn?(Tn=Wt+tn*h,Wn=Wt-Sr/2):(Tn=cn(nr,Tn),Wn=cn(nr,Wn),(tn>0?Tn<Wn:Tn>Wn)&&(Tn+=tn*h));for(var Mr,Rr=Tn;tn>0?Rr>Wn:Rr<Wn;Rr-=Sr)Mr=fe([nr,-gr*m(Rr),-gr*M(Rr)]),At.point(Mr[0],Mr[1])}}function cn(At,Wt){(Wt=me(Wt))[0]-=At,Le(Wt);var wn=I(-Wt[1]);return((-Wt[2]<0?-wn:wn)+h-a)%h}function vn(){var At,Wt=[];return{point:function(wn,tn,Tn){At.push([wn,tn,Tn])},lineStart:function(){Wt.push(At=[])},lineEnd:L,rejoin:function(){Wt.length>1&&Wt.push(Wt.pop().concat(Wt.shift()))},result:function(){var wn=Wt;return Wt=[],At=null,wn}}}function hn(At,Wt){return p(At[0]-Wt[0])<a&&p(At[1]-Wt[1])<a}function Dn(At,Wt,wn,tn){this.x=At,this.z=Wt,this.o=wn,this.e=tn,this.v=!1,this.n=this.p=null}function Pn(At,Wt,wn,tn,Tn){var Wn,nr,gr=[],Sr=[];if(At.forEach(function(si){if(!((pi=si.length-1)<=0)){var pi,Ei,mr=si[0],Di=si[pi];if(hn(mr,Di)){if(!mr[2]&&!Di[2]){for(Tn.lineStart(),Wn=0;Wn<pi;++Wn)Tn.point((mr=si[Wn])[0],mr[1]);return void Tn.lineEnd()}Di[0]+=2*a}gr.push(Ei=new Dn(mr,si,null,!0)),Sr.push(Ei.o=new Dn(mr,null,Ei,!1)),gr.push(Ei=new Dn(Di,si,null,!1)),Sr.push(Ei.o=new Dn(Di,null,Ei,!0))}}),gr.length){for(Sr.sort(Wt),$n(gr),$n(Sr),Wn=0,nr=Sr.length;Wn<nr;++Wn)Sr[Wn].e=wn=!wn;for(var Mr,Rr,Wr=gr[0];;){for(var Cr=Wr,Yr=!0;Cr.v;)if((Cr=Cr.n)===Wr)return;Mr=Cr.z,Tn.lineStart();do{if(Cr.v=Cr.o.v=!0,Cr.e){if(Yr)for(Wn=0,nr=Mr.length;Wn<nr;++Wn)Tn.point((Rr=Mr[Wn])[0],Rr[1]);else tn(Cr.x,Cr.n.x,1,Tn);Cr=Cr.n}else{if(Yr)for(Wn=(Mr=Cr.p.z).length-1;Wn>=0;--Wn)Tn.point((Rr=Mr[Wn])[0],Rr[1]);else tn(Cr.x,Cr.p.x,-1,Tn);Cr=Cr.p}Mr=(Cr=Cr.o).z,Yr=!Yr}while(!Cr.v);Tn.lineEnd()}}}function $n(At){if(Wt=At.length){for(var Wt,wn,tn=0,Tn=At[0];++tn<Wt;)Tn.n=wn=At[tn],wn.p=Tn,Tn=wn;Tn.n=wn=At[0],wn.p=Tn}}jt.invert=jt;var rr=T();function er(At){return p(At[0])<=l?At[0]:S(At[0])*((p(At[0])+l)%h-l)}function or(At,Wt){var wn=er(Wt),tn=Wt[1],Tn=M(tn),Wn=[M(wn),-m(wn),0],nr=0,gr=0;rr.reset(),1===Tn?tn=i+a:-1===Tn&&(tn=-i-a);for(var Sr=0,Mr=At.length;Sr<Mr;++Sr)if(Wr=(Rr=At[Sr]).length)for(var Rr,Wr,Cr=Rr[Wr-1],Yr=er(Cr),si=Cr[1]/2+v,pi=M(si),Ei=m(si),mr=0;mr<Wr;++mr,Yr=ei,pi=ki,Ei=Vi,Cr=Di){var Di=Rr[mr],ei=er(Di),ii=Di[1]/2+v,ki=M(ii),Vi=m(ii),ha=ei-Yr,$r=ha>=0?1:-1,wa=$r*ha,ua=wa>l,Ui=pi*ki;if(rr.add(g(Ui*$r*M(wa),Ei*Vi+Ui*m(wa))),nr+=ua?ha+$r*h:ha,ua^Yr>=wn^ei>=wn){var Ta=we(me(Cr),me(Di));Le(Ta);var aa=we(Wn,Ta);Le(aa);var Za=(ua^ha>=0?-1:1)*N(aa[2]);(tn>Za||tn===Za&&(Ta[0]||Ta[1]))&&(gr+=ua^ha>=0?1:-1)}}return(nr<-a||nr<a&&rr<-a)^1&gr}function Zr(At,Wt,wn,tn){return function(Tn){var Wn,nr,gr,Sr=Wt(Tn),Mr=vn(),Rr=Wt(Mr),Wr=!1,Cr={point:Yr,lineStart:pi,lineEnd:Ei,polygonStart:function(){Cr.point=mr,Cr.lineStart=Di,Cr.lineEnd=ei,nr=[],Wn=[]},polygonEnd:function(){Cr.point=Yr,Cr.lineStart=pi,Cr.lineEnd=Ei,nr=b.merge(nr);var ii=or(Wn,tn);nr.length?(Wr||(Tn.polygonStart(),Wr=!0),Pn(nr,pr,ii,wn,Tn)):ii&&(Wr||(Tn.polygonStart(),Wr=!0),Tn.lineStart(),wn(null,null,1,Tn),Tn.lineEnd()),Wr&&(Tn.polygonEnd(),Wr=!1),nr=Wn=null},sphere:function(){Tn.polygonStart(),Tn.lineStart(),wn(null,null,1,Tn),Tn.lineEnd(),Tn.polygonEnd()}};function Yr(ii,ki){At(ii,ki)&&Tn.point(ii,ki)}function si(ii,ki){Sr.point(ii,ki)}function pi(){Cr.point=si,Sr.lineStart()}function Ei(){Cr.point=Yr,Sr.lineEnd()}function mr(ii,ki){gr.push([ii,ki]),Rr.point(ii,ki)}function Di(){Rr.lineStart(),gr=[]}function ei(){mr(gr[0][0],gr[0][1]),Rr.lineEnd();var ii,ki,Vi,ha,$r=Rr.clean(),wa=Mr.result(),ua=wa.length;if(gr.pop(),Wn.push(gr),gr=null,ua)if(1&$r){if((ki=(Vi=wa[0]).length-1)>0){for(Wr||(Tn.polygonStart(),Wr=!0),Tn.lineStart(),ii=0;ii<ki;++ii)Tn.point((ha=Vi[ii])[0],ha[1]);Tn.lineEnd()}}else ua>1&&2&$r&&wa.push(wa.pop().concat(wa.shift())),nr.push(wa.filter(zr))}return Cr}}function zr(At){return At.length>1}function pr(At,Wt){return((At=At.x)[0]<0?At[1]-i-a:i-At[1])-((Wt=Wt.x)[0]<0?Wt[1]-i-a:i-Wt[1])}var Br=Zr(function(){return!0},function(At){var Wt,wn=NaN,tn=NaN,Tn=NaN;return{lineStart:function(){At.lineStart(),Wt=1},point:function(Wn,nr){var Mr,Rr,Wr,Cr,Yr,si,pi,gr=Wn>0?l:-l,Sr=p(Wn-wn);p(Sr-l)<a?(At.point(wn,tn=(tn+nr)/2>0?i:-i),At.point(Tn,tn),At.lineEnd(),At.lineStart(),At.point(gr,tn),At.point(Wn,tn),Wt=0):Tn!==gr&&Sr>=l&&(p(wn-Tn)<a&&(wn-=Tn*a),p(Wn-gr)<a&&(Wn-=gr*a),Rr=tn,Cr=nr,pi=M((Mr=wn)-(Wr=Wn)),tn=p(pi)>a?f((M(Rr)*(si=m(Cr))*M(Wr)-M(Cr)*(Yr=m(Rr))*M(Mr))/(Yr*si*pi)):(Rr+Cr)/2,At.point(Tn,tn),At.lineEnd(),At.lineStart(),At.point(gr,tn),Wt=0),At.point(wn=Wn,tn=nr),Tn=gr},lineEnd:function(){At.lineEnd(),wn=tn=NaN},clean:function(){return 2-Wt}}},function(At,Wt,wn,tn){var Tn;if(null==At)tn.point(-l,Tn=wn*i),tn.point(0,Tn),tn.point(l,Tn),tn.point(l,0),tn.point(l,-Tn),tn.point(0,-Tn),tn.point(-l,-Tn),tn.point(-l,0),tn.point(-l,Tn);else if(p(At[0]-Wt[0])>a){var Wn=At[0]<Wt[0]?l:-l;tn.point(-Wn,Tn=wn*Wn/2),tn.point(0,Tn),tn.point(Wn,Tn)}else tn.point(Wt[0],Wt[1])},[-l,-i]);function fr(At){var Wt=m(At),wn=6*d,tn=Wt>0,Tn=p(Wt)>a;function Wn(Sr,Mr){return m(Sr)*m(Mr)>Wt}function nr(Sr,Mr,Rr){var Wr=[1,0,0],Cr=we(me(Sr),me(Mr)),Yr=pe(Cr,Cr),si=Cr[0],pi=Yr-si*si;if(!pi)return!Rr&&Sr;var Ei=Wt*Yr/pi,mr=-Wt*si/pi,Di=we(Wr,Cr),ei=Te(Wr,Ei);ye(ei,Te(Cr,mr));var ii=Di,ki=pe(ei,ii),Vi=pe(ii,ii),ha=ki*ki-Vi*(pe(ei,ei)-1);if(!(ha<0)){var $r=C(ha),wa=Te(ii,(-ki-$r)/Vi);if(ye(wa,ei),wa=fe(wa),!Rr)return wa;var ua,Ui=Sr[0],Ta=Mr[0],aa=Sr[1],Za=Mr[1];Ta<Ui&&(ua=Ui,Ui=Ta,Ta=ua);var yi=Ta-Ui,Oa=p(yi-l)<a;if(!Oa&&Za<aa&&(ua=aa,aa=Za,Za=ua),Oa||yi<a?Oa?aa+Za>0^wa[1]<(p(wa[0]-Ui)<a?aa:Za):aa<=wa[1]&&wa[1]<=Za:yi>l^(Ui<=wa[0]&&wa[0]<=Ta)){var Wo=Te(ii,(-ki+$r)/Vi);return ye(Wo,ei),[wa,fe(Wo)]}}}function gr(Sr,Mr){var Rr=tn?At:l-At,Wr=0;return Sr<-Rr?Wr|=1:Sr>Rr&&(Wr|=2),Mr<-Rr?Wr|=4:Mr>Rr&&(Wr|=8),Wr}return Zr(Wn,function(Sr){var Mr,Rr,Wr,Cr,Yr;return{lineStart:function(){Cr=Wr=!1,Yr=1},point:function(si,pi){var Ei,mr=[si,pi],Di=Wn(si,pi),ei=tn?Di?0:gr(si,pi):Di?gr(si+(si<0?l:-l),pi):0;if(!Mr&&(Cr=Wr=Di)&&Sr.lineStart(),Di!==Wr&&(!(Ei=nr(Mr,mr))||hn(Mr,Ei)||hn(mr,Ei))&&(mr[2]=1),Di!==Wr)Yr=0,Di?(Sr.lineStart(),Ei=nr(mr,Mr),Sr.point(Ei[0],Ei[1])):(Ei=nr(Mr,mr),Sr.point(Ei[0],Ei[1],2),Sr.lineEnd()),Mr=Ei;else if(Tn&&Mr&&tn^Di){var ii;ei&Rr||!(ii=nr(mr,Mr,!0))||(Yr=0,tn?(Sr.lineStart(),Sr.point(ii[0][0],ii[0][1]),Sr.point(ii[1][0],ii[1][1]),Sr.lineEnd()):(Sr.point(ii[1][0],ii[1][1]),Sr.lineEnd(),Sr.lineStart(),Sr.point(ii[0][0],ii[0][1],3)))}!Di||Mr&&hn(Mr,mr)||Sr.point(mr[0],mr[1]),Mr=mr,Wr=Di,Rr=ei},lineEnd:function(){Wr&&Sr.lineEnd(),Mr=null},clean:function(){return Yr|(Cr&&Wr)<<1}}},function(Sr,Mr,Rr,Wr){kn(Wr,At,wn,Rr,Sr,Mr)},tn?[0,-At]:[-l,At-l])}function Nr(At,Wt,wn,tn){function Tn(Mr,Rr){return At<=Mr&&Mr<=wn&&Wt<=Rr&&Rr<=tn}function Wn(Mr,Rr,Wr,Cr){var Yr=0,si=0;if(null==Mr||(Yr=nr(Mr,Wr))!==(si=nr(Rr,Wr))||Sr(Mr,Rr)<0^Wr>0)do{Cr.point(0===Yr||3===Yr?At:wn,Yr>1?tn:Wt)}while((Yr=(Yr+Wr+4)%4)!==si);else Cr.point(Rr[0],Rr[1])}function nr(Mr,Rr){return p(Mr[0]-At)<a?Rr>0?0:3:p(Mr[0]-wn)<a?Rr>0?2:1:p(Mr[1]-Wt)<a?Rr>0?1:0:Rr>0?3:2}function gr(Mr,Rr){return Sr(Mr.x,Rr.x)}function Sr(Mr,Rr){var Wr=nr(Mr,1),Cr=nr(Rr,1);return Wr!==Cr?Wr-Cr:0===Wr?Rr[1]-Mr[1]:1===Wr?Mr[0]-Rr[0]:2===Wr?Mr[1]-Rr[1]:Rr[0]-Mr[0]}return function(Mr){var Rr,Wr,Cr,Yr,si,pi,Ei,mr,Di,ei,ii,ki=Mr,Vi=vn(),ha={point:$r,lineStart:function(){ha.point=wa,Wr&&Wr.push(Cr=[]),ei=!0,Di=!1,Ei=mr=NaN},lineEnd:function(){Rr&&(wa(Yr,si),pi&&Di&&Vi.rejoin(),Rr.push(Vi.result())),ha.point=$r,Di&&ki.lineEnd()},polygonStart:function(){ki=Vi,Rr=[],Wr=[],ii=!0},polygonEnd:function(){var ua=function(){for(var aa=0,Za=0,yi=Wr.length;Za<yi;++Za)for(var Oa,Wo,Ks=Wr[Za],Js=1,As=Ks.length,Yi=Ks[0],To=Yi[0],ls=Yi[1];Js<As;++Js)Oa=To,Wo=ls,To=(Yi=Ks[Js])[0],ls=Yi[1],Wo<=tn?ls>tn&&(To-Oa)*(tn-Wo)>(ls-Wo)*(At-Oa)&&++aa:ls<=tn&&(To-Oa)*(tn-Wo)<(ls-Wo)*(At-Oa)&&--aa;return aa}(),Ui=ii&&ua,Ta=(Rr=b.merge(Rr)).length;(Ui||Ta)&&(Mr.polygonStart(),Ui&&(Mr.lineStart(),Wn(null,null,1,Mr),Mr.lineEnd()),Ta&&Pn(Rr,gr,ua,Wn,Mr),Mr.polygonEnd()),ki=Mr,Rr=Wr=Cr=null}};function $r(ua,Ui){Tn(ua,Ui)&&ki.point(ua,Ui)}function wa(ua,Ui){var Ta=Tn(ua,Ui);if(Wr&&Cr.push([ua,Ui]),ei)Yr=ua,si=Ui,pi=Ta,ei=!1,Ta&&(ki.lineStart(),ki.point(ua,Ui));else if(Ta&&Di)ki.point(ua,Ui);else{var aa=[Ei=Math.max(-1e9,Math.min(1e9,Ei)),mr=Math.max(-1e9,Math.min(1e9,mr))],Za=[ua=Math.max(-1e9,Math.min(1e9,ua)),Ui=Math.max(-1e9,Math.min(1e9,Ui))];!function(yi,Oa,Wo,Ks,Js,As){var Yi,To=yi[0],ls=yi[1],Ga=0,ga=1,Yo=Oa[0]-To,Ja=Oa[1]-ls;if(Yi=Wo-To,Yo||!(Yi>0)){if(Yi/=Yo,Yo<0){if(Yi<Ga)return;Yi<ga&&(ga=Yi)}else if(Yo>0){if(Yi>ga)return;Yi>Ga&&(Ga=Yi)}if(Yi=Js-To,Yo||!(Yi<0)){if(Yi/=Yo,Yo<0){if(Yi>ga)return;Yi>Ga&&(Ga=Yi)}else if(Yo>0){if(Yi<Ga)return;Yi<ga&&(ga=Yi)}if(Yi=Ks-ls,Ja||!(Yi>0)){if(Yi/=Ja,Ja<0){if(Yi<Ga)return;Yi<ga&&(ga=Yi)}else if(Ja>0){if(Yi>ga)return;Yi>Ga&&(Ga=Yi)}if(Yi=As-ls,Ja||!(Yi<0)){if(Yi/=Ja,Ja<0){if(Yi>ga)return;Yi>Ga&&(Ga=Yi)}else if(Ja>0){if(Yi<Ga)return;Yi<ga&&(ga=Yi)}return Ga>0&&(yi[0]=To+Ga*Yo,yi[1]=ls+Ga*Ja),ga<1&&(Oa[0]=To+ga*Yo,Oa[1]=ls+ga*Ja),!0}}}}}(aa,Za,At,Wt,wn,tn)?Ta&&(ki.lineStart(),ki.point(ua,Ui),ii=!1):(Di||(ki.lineStart(),ki.point(aa[0],aa[1])),ki.point(Za[0],Za[1]),Ta||ki.lineEnd(),ii=!1)}Ei=ua,mr=Ui,Di=Ta}return ha}}var xi,Qn,Er,kr=T(),sr={sphere:L,point:L,lineStart:function(){sr.point=oi,sr.lineEnd=ci},lineEnd:L,polygonStart:L,polygonEnd:L};function ci(){sr.point=sr.lineEnd=L}function oi(At,Wt){xi=At*=d,Qn=M(Wt*=d),Er=m(Wt),sr.point=Or}function Or(At,Wt){At*=d;var wn=M(Wt*=d),tn=m(Wt),Tn=p(At-xi),Wn=m(Tn),nr=tn*M(Tn),gr=Er*wn-Qn*tn*Wn,Sr=Qn*wn+Er*tn*Wn;kr.add(g(C(nr*nr+gr*gr),Sr)),xi=At,Qn=wn,Er=tn}function Dr(At){return kr.reset(),te(At,sr),+kr}var wr=[null,null],gn={type:"LineString",coordinates:wr};function tr(At,Wt){return wr[0]=At,wr[1]=Wt,Dr(gn)}var qt={Feature:function(At,Wt){return Cn(At.geometry,Wt)},FeatureCollection:function(At,Wt){for(var wn=At.features,tn=-1,Tn=wn.length;++tn<Tn;)if(Cn(wn[tn].geometry,Wt))return!0;return!1}},_n={Sphere:function(){return!0},Point:function(At,Wt){return Jn(At.coordinates,Wt)},MultiPoint:function(At,Wt){for(var wn=At.coordinates,tn=-1,Tn=wn.length;++tn<Tn;)if(Jn(wn[tn],Wt))return!0;return!1},LineString:function(At,Wt){return Xn(At.coordinates,Wt)},MultiLineString:function(At,Wt){for(var wn=At.coordinates,tn=-1,Tn=wn.length;++tn<Tn;)if(Xn(wn[tn],Wt))return!0;return!1},Polygon:function(At,Wt){return Hn(At.coordinates,Wt)},MultiPolygon:function(At,Wt){for(var wn=At.coordinates,tn=-1,Tn=wn.length;++tn<Tn;)if(Hn(wn[tn],Wt))return!0;return!1},GeometryCollection:function(At,Wt){for(var wn=At.geometries,tn=-1,Tn=wn.length;++tn<Tn;)if(Cn(wn[tn],Wt))return!0;return!1}};function Cn(At,Wt){return!(!At||!_n.hasOwnProperty(At.type))&&_n[At.type](At,Wt)}function Jn(At,Wt){return 0===tr(At,Wt)}function Xn(At,Wt){for(var wn,tn,Tn,Wn=0,nr=At.length;Wn<nr;Wn++){if(0===(tn=tr(At[Wn],Wt))||Wn>0&&(Tn=tr(At[Wn],At[Wn-1]))>0&&wn<=Tn&&tn<=Tn&&(wn+tn-Tn)*(1-Math.pow((wn-tn)/Tn,2))<1e-12*Tn)return!0;wn=tn}return!1}function Hn(At,Wt){return!!or(At.map(Bn),zn(Wt))}function Bn(At){return(At=At.map(zn)).pop(),At}function zn(At){return[At[0]*d,At[1]*d]}function jn(At,Wt,wn){var tn=b.range(At,Wt-a,wn).concat(Wt);return function(Tn){return tn.map(function(Wn){return[Tn,Wn]})}}function Vn(At,Wt,wn){var tn=b.range(At,Wt-a,wn).concat(Wt);return function(Tn){return tn.map(function(Wn){return[Wn,Tn]})}}function On(){var At,Wt,wn,tn,Tn,Wn,nr,gr,Sr,Mr,Rr,Wr,Cr=10,Yr=Cr,si=90,pi=360,Ei=2.5;function mr(){return{type:"MultiLineString",coordinates:Di()}}function Di(){return b.range(u(tn/si)*si,wn,si).map(Rr).concat(b.range(u(gr/pi)*pi,nr,pi).map(Wr)).concat(b.range(u(Wt/Cr)*Cr,At,Cr).filter(function(ei){return p(ei%si)>a}).map(Sr)).concat(b.range(u(Wn/Yr)*Yr,Tn,Yr).filter(function(ei){return p(ei%pi)>a}).map(Mr))}return mr.lines=function(){return Di().map(function(ei){return{type:"LineString",coordinates:ei}})},mr.outline=function(){return{type:"Polygon",coordinates:[Rr(tn).concat(Wr(nr).slice(1),Rr(wn).reverse().slice(1),Wr(gr).reverse().slice(1))]}},mr.extent=function(ei){return arguments.length?mr.extentMajor(ei).extentMinor(ei):mr.extentMinor()},mr.extentMajor=function(ei){return arguments.length?(gr=+ei[0][1],nr=+ei[1][1],(tn=+ei[0][0])>(wn=+ei[1][0])&&(ei=tn,tn=wn,wn=ei),gr>nr&&(ei=gr,gr=nr,nr=ei),mr.precision(Ei)):[[tn,gr],[wn,nr]]},mr.extentMinor=function(ei){return arguments.length?(Wn=+ei[0][1],Tn=+ei[1][1],(Wt=+ei[0][0])>(At=+ei[1][0])&&(ei=Wt,Wt=At,At=ei),Wn>Tn&&(ei=Wn,Wn=Tn,Tn=ei),mr.precision(Ei)):[[Wt,Wn],[At,Tn]]},mr.step=function(ei){return arguments.length?mr.stepMajor(ei).stepMinor(ei):mr.stepMinor()},mr.stepMajor=function(ei){return arguments.length?(si=+ei[0],pi=+ei[1],mr):[si,pi]},mr.stepMinor=function(ei){return arguments.length?(Cr=+ei[0],Yr=+ei[1],mr):[Cr,Yr]},mr.precision=function(ei){return arguments.length?(Ei=+ei,Sr=jn(Wn,Tn,90),Mr=Vn(Wt,At,Ei),Rr=jn(gr,nr,90),Wr=Vn(tn,wn,Ei),mr):Ei},mr.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function dr(At){return At}var ir,br,Tr,Fr,Vr=T(),Ur=T(),Xr={point:L,lineStart:L,lineEnd:L,polygonStart:function(){Xr.lineStart=ri,Xr.lineEnd=hi},polygonEnd:function(){Xr.lineStart=Xr.lineEnd=Xr.point=L,Vr.add(p(Ur)),Ur.reset()},result:function(){var At=Vr/2;return Vr.reset(),At}};function ri(){Xr.point=_i}function _i(At,Wt){Xr.point=ra,ir=Tr=At,br=Fr=Wt}function ra(At,Wt){Ur.add(Fr*At-Tr*Wt),Tr=At,Fr=Wt}function hi(){ra(ir,br)}var oo,yo,Ha,qa,Gr=1/0,Mi=Gr,vi=-Gr,_a=vi,Co={point:function(At,Wt){At<Gr&&(Gr=At),At>vi&&(vi=At),Wt<Mi&&(Mi=Wt),Wt>_a&&(_a=Wt)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L,result:function(){var At=[[Gr,Mi],[vi,_a]];return vi=_a=-(Mi=Gr=1/0),At}},ho=0,ka=0,ds=0,Ts=0,Uo=0,pa=0,Rs=0,Us=0,wo=0,ia={point:qo,lineStart:jl,lineEnd:Ms,polygonStart:function(){ia.lineStart=Hs,ia.lineEnd=pu},polygonEnd:function(){ia.point=qo,ia.lineStart=jl,ia.lineEnd=Ms},result:function(){var At=wo?[Rs/wo,Us/wo]:pa?[Ts/pa,Uo/pa]:ds?[ho/ds,ka/ds]:[NaN,NaN];return ho=ka=ds=Ts=Uo=pa=Rs=Us=wo=0,At}};function qo(At,Wt){ho+=At,ka+=Wt,++ds}function jl(){ia.point=Yl}function Yl(At,Wt){ia.point=Fa,qo(Ha=At,qa=Wt)}function Fa(At,Wt){var wn=At-Ha,tn=Wt-qa,Tn=C(wn*wn+tn*tn);Ts+=Tn*(Ha+At)/2,Uo+=Tn*(qa+Wt)/2,pa+=Tn,qo(Ha=At,qa=Wt)}function Ms(){ia.point=qo}function Hs(){ia.point=Fs}function pu(){nu(oo,yo)}function Fs(At,Wt){ia.point=nu,qo(oo=Ha=At,yo=qa=Wt)}function nu(At,Wt){var wn=At-Ha,tn=Wt-qa,Tn=C(wn*wn+tn*tn);Ts+=Tn*(Ha+At)/2,Uo+=Tn*(qa+Wt)/2,pa+=Tn,Rs+=(Tn=qa*At-Ha*Wt)*(Ha+At),Us+=Tn*(qa+Wt),wo+=3*Tn,qo(Ha=At,qa=Wt)}function ru(At){this._context=At}ru.prototype={_radius:4.5,pointRadius:function(At){return this._radius=At,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(At,Wt){switch(this._point){case 0:this._context.moveTo(At,Wt),this._point=1;break;case 1:this._context.lineTo(At,Wt);break;default:this._context.moveTo(At+this._radius,Wt),this._context.arc(At,Wt,this._radius,0,h)}},result:L};var Ns,zs,no,ol,$s,Wi=T(),so={point:L,lineStart:function(){so.point=Ho},lineEnd:function(){Ns&&Po(zs,no),so.point=L},polygonStart:function(){Ns=!0},polygonEnd:function(){Ns=null},result:function(){var At=+Wi;return Wi.reset(),At}};function Ho(At,Wt){so.point=Po,zs=ol=At,no=$s=Wt}function Po(At,Wt){Wi.add(C((ol-=At)*ol+($s-=Wt)*$s)),ol=At,$s=Wt}function os(){this._string=[]}function ns(At){return"m0,"+At+"a"+At+","+At+" 0 1,1 0,"+-2*At+"a"+At+","+At+" 0 1,1 0,"+2*At+"z"}function ps(At){return function(Wt){var wn=new La;for(var tn in At)wn[tn]=At[tn];return wn.stream=Wt,wn}}function La(){}function Xe(At,Wt,wn){var tn=At.clipExtent&&At.clipExtent();return At.scale(150).translate([0,0]),null!=tn&&At.clipExtent(null),te(wn,At.stream(Co)),Wt(Co.result()),null!=tn&&At.clipExtent(tn),At}function Qe(At,Wt,wn){return Xe(At,function(tn){var Tn=Wt[1][0]-Wt[0][0],Wn=Wt[1][1]-Wt[0][1],nr=Math.min(Tn/(tn[1][0]-tn[0][0]),Wn/(tn[1][1]-tn[0][1])),gr=+Wt[0][0]+(Tn-nr*(tn[1][0]+tn[0][0]))/2,Sr=+Wt[0][1]+(Wn-nr*(tn[1][1]+tn[0][1]))/2;At.scale(150*nr).translate([gr,Sr])},wn)}function ct(At,Wt,wn){return Qe(At,[[0,0],Wt],wn)}function mt(At,Wt,wn){return Xe(At,function(tn){var Tn=+Wt,Wn=Tn/(tn[1][0]-tn[0][0]),nr=(Tn-Wn*(tn[1][0]+tn[0][0]))/2,gr=-Wn*tn[0][1];At.scale(150*Wn).translate([nr,gr])},wn)}function St(At,Wt,wn){return Xe(At,function(tn){var Tn=+Wt,Wn=Tn/(tn[1][1]-tn[0][1]),nr=-Wn*tn[0][0],gr=(Tn-Wn*(tn[1][1]+tn[0][1]))/2;At.scale(150*Wn).translate([nr,gr])},wn)}os.prototype={_radius:4.5,_circle:ns(4.5),pointRadius:function(At){return(At=+At)!==this._radius&&(this._radius=At,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(At,Wt){switch(this._point){case 0:this._string.push("M",At,",",Wt),this._point=1;break;case 1:this._string.push("L",At,",",Wt);break;default:null==this._circle&&(this._circle=ns(this._radius)),this._string.push("M",At,",",Wt,this._circle)}},result:function(){if(this._string.length){var At=this._string.join("");return this._string=[],At}return null}},La.prototype={constructor:La,point:function(At,Wt){this.stream.point(At,Wt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Mt=m(30*d);function xt(At,Wt){return+Wt?function(wn,tn){function Tn(Wn,nr,gr,Sr,Mr,Rr,Wr,Cr,Yr,si,pi,Ei,mr,Di){var ei=Wr-Wn,ii=Cr-nr,ki=ei*ei+ii*ii;if(ki>4*tn&&mr--){var Vi=Sr+si,ha=Mr+pi,$r=Rr+Ei,wa=C(Vi*Vi+ha*ha+$r*$r),ua=N($r/=wa),Ui=p(p($r)-1)<a||p(gr-Yr)<a?(gr+Yr)/2:g(ha,Vi),Ta=wn(Ui,ua),aa=Ta[0],Za=Ta[1],yi=aa-Wn,Oa=Za-nr,Wo=ii*yi-ei*Oa;(Wo*Wo/ki>tn||p((ei*yi+ii*Oa)/ki-.5)>.3||Sr*si+Mr*pi+Rr*Ei<Mt)&&(Tn(Wn,nr,gr,Sr,Mr,Rr,aa,Za,Ui,Vi/=wa,ha/=wa,$r,mr,Di),Di.point(aa,Za),Tn(aa,Za,Ui,Vi,ha,$r,Wr,Cr,Yr,si,pi,Ei,mr,Di))}}return function(Wn){var nr,gr,Sr,Mr,Rr,Wr,Cr,Yr,si,pi,Ei,mr,Di={point:ei,lineStart:ii,lineEnd:Vi,polygonStart:function(){Wn.polygonStart(),Di.lineStart=ha},polygonEnd:function(){Wn.polygonEnd(),Di.lineStart=ii}};function ei(ua,Ui){ua=wn(ua,Ui),Wn.point(ua[0],ua[1])}function ii(){Yr=NaN,Di.point=ki,Wn.lineStart()}function ki(ua,Ui){var Ta=me([ua,Ui]),aa=wn(ua,Ui);Tn(Yr,si,Cr,pi,Ei,mr,Yr=aa[0],si=aa[1],Cr=ua,pi=Ta[0],Ei=Ta[1],mr=Ta[2],16,Wn),Wn.point(Yr,si)}function Vi(){Di.point=ei,Wn.lineEnd()}function ha(){ii(),Di.point=$r,Di.lineEnd=wa}function $r(ua,Ui){ki(nr=ua,Ui),gr=Yr,Sr=si,Mr=pi,Rr=Ei,Wr=mr,Di.point=ki}function wa(){Tn(Yr,si,Cr,pi,Ei,mr,gr,Sr,nr,Mr,Rr,Wr,16,Wn),Di.lineEnd=Vi,Vi()}return Di}}(At,Wt):(wn=At,ps({point:function(tn,Tn){tn=wn(tn,Tn),this.stream.point(tn[0],tn[1])}}));var wn}var Jt=ps({point:function(At,Wt){this.stream.point(At*d,Wt*d)}});function on(At,Wt,wn,tn,Tn){function Wn(nr,gr){return[Wt+At*(nr*=tn),wn-At*(gr*=Tn)]}return Wn.invert=function(nr,gr){return[(nr-Wt)/At*tn,(wn-gr)/At*Tn]},Wn}function nn(At,Wt,wn,tn,Tn,Wn){var nr=m(Wn),gr=M(Wn),Sr=nr*At,Mr=gr*At,Rr=nr/At,Wr=gr/At,Cr=(gr*wn-nr*Wt)/At,Yr=(gr*Wt+nr*wn)/At;function si(pi,Ei){return[Sr*(pi*=tn)-Mr*(Ei*=Tn)+Wt,wn-Mr*pi-Sr*Ei]}return si.invert=function(pi,Ei){return[tn*(Rr*pi-Wr*Ei+Cr),Tn*(Yr-Wr*pi-Rr*Ei)]},si}function yn(At){return An(function(){return At})()}function An(At){var Wt,wn,tn,Tn,Wn,nr,gr,Sr,Mr,Rr,Wr=150,Cr=480,Yr=250,si=0,pi=0,Ei=0,mr=0,Di=0,ei=0,ii=1,ki=1,Vi=null,ha=Br,$r=null,wa=dr,ua=.5;function Ui(yi){return Sr(yi[0]*d,yi[1]*d)}function Ta(yi){return(yi=Sr.invert(yi[0],yi[1]))&&[yi[0]*s,yi[1]*s]}function aa(){var yi=nn(Wr,0,0,ii,ki,ei).apply(null,Wt(si,pi)),Oa=(ei?nn:on)(Wr,Cr-yi[0],Yr-yi[1],ii,ki,ei);return wn=Qt(Ei,mr,Di),gr=It(Wt,Oa),Sr=It(wn,gr),nr=xt(gr,ua),Za()}function Za(){return Mr=Rr=null,Ui}return Ui.stream=function(yi){return Mr&&Rr===yi?Mr:Mr=Jt((Oa=wn,ps({point:function(Wo,Ks){var Js=Oa(Wo,Ks);return this.stream.point(Js[0],Js[1])}}))(ha(nr(wa(Rr=yi)))));var Oa},Ui.preclip=function(yi){return arguments.length?(ha=yi,Vi=void 0,Za()):ha},Ui.postclip=function(yi){return arguments.length?(wa=yi,$r=tn=Tn=Wn=null,Za()):wa},Ui.clipAngle=function(yi){return arguments.length?(ha=+yi?fr(Vi=yi*d):(Vi=null,Br),Za()):Vi*s},Ui.clipExtent=function(yi){return arguments.length?(wa=null==yi?($r=tn=Tn=Wn=null,dr):Nr($r=+yi[0][0],tn=+yi[0][1],Tn=+yi[1][0],Wn=+yi[1][1]),Za()):null==$r?null:[[$r,tn],[Tn,Wn]]},Ui.scale=function(yi){return arguments.length?(Wr=+yi,aa()):Wr},Ui.translate=function(yi){return arguments.length?(Cr=+yi[0],Yr=+yi[1],aa()):[Cr,Yr]},Ui.center=function(yi){return arguments.length?(si=yi[0]%360*d,pi=yi[1]%360*d,aa()):[si*s,pi*s]},Ui.rotate=function(yi){return arguments.length?(Ei=yi[0]%360*d,mr=yi[1]%360*d,Di=yi.length>2?yi[2]%360*d:0,aa()):[Ei*s,mr*s,Di*s]},Ui.angle=function(yi){return arguments.length?(ei=yi%360*d,aa()):ei*s},Ui.reflectX=function(yi){return arguments.length?(ii=yi?-1:1,aa()):ii<0},Ui.reflectY=function(yi){return arguments.length?(ki=yi?-1:1,aa()):ki<0},Ui.precision=function(yi){return arguments.length?(nr=xt(gr,ua=yi*yi),Za()):C(ua)},Ui.fitExtent=function(yi,Oa){return Qe(Ui,yi,Oa)},Ui.fitSize=function(yi,Oa){return ct(Ui,yi,Oa)},Ui.fitWidth=function(yi,Oa){return mt(Ui,yi,Oa)},Ui.fitHeight=function(yi,Oa){return St(Ui,yi,Oa)},function(){return Wt=At.apply(this,arguments),Ui.invert=Wt.invert&&Ta,aa()}}function Rn(At){var Wt=0,wn=l/3,tn=An(At),Tn=tn(Wt,wn);return Tn.parallels=function(Wn){return arguments.length?tn(Wt=Wn[0]*d,wn=Wn[1]*d):[Wt*s,wn*s]},Tn}function Ln(At,Wt){var wn=M(At),tn=(wn+M(Wt))/2;if(p(tn)<a)return function(gr){var Sr=m(gr);function Mr(Rr,Wr){return[Rr*Sr,M(Wr)/Sr]}return Mr.invert=function(Rr,Wr){return[Rr/Sr,N(Wr*Sr)]},Mr}(At);var Tn=1+wn*(2*tn-wn),Wn=C(Tn)/tn;function nr(gr,Sr){var Mr=C(Tn-2*tn*M(Sr))/tn;return[Mr*M(gr*=tn),Wn-Mr*m(gr)]}return nr.invert=function(gr,Sr){var Mr=Wn-Sr,Rr=g(gr,p(Mr))*S(Mr);return Mr*tn<0&&(Rr-=l*S(gr)*S(Mr)),[Rr/tn,N((Tn-(gr*gr+Mr*Mr)*tn*tn)/(2*tn))]},nr}function Zn(){return Rn(Ln).scale(155.424).center([0,33.6442])}function _r(){return Zn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function cr(At){return function(Wt,wn){var tn=m(Wt),Tn=m(wn),Wn=At(tn*Tn);return[Wn*Tn*M(Wt),Wn*M(wn)]}}function Jr(At){return function(Wt,wn){var tn=C(Wt*Wt+wn*wn),Tn=At(tn),Wn=M(Tn),nr=m(Tn);return[g(Wt*Wn,tn*nr),N(tn&&wn*Wn/tn)]}}var ti=cr(function(At){return C(2/(1+At))});ti.invert=Jr(function(At){return 2*N(At/2)});var di=cr(function(At){return(At=I(At))&&At/M(At)});function ni(At,Wt){return[At,c(O((i+Wt)/2))]}function Ci(At){var Wt,wn,tn,Tn=yn(At),Wn=Tn.center,nr=Tn.scale,gr=Tn.translate,Sr=Tn.clipExtent,Mr=null;function Rr(){var Wr=l*nr(),Cr=Tn(Yn(Tn.rotate()).invert([0,0]));return Sr(null==Mr?[[Cr[0]-Wr,Cr[1]-Wr],[Cr[0]+Wr,Cr[1]+Wr]]:At===ni?[[Math.max(Cr[0]-Wr,Mr),Wt],[Math.min(Cr[0]+Wr,wn),tn]]:[[Mr,Math.max(Cr[1]-Wr,Wt)],[wn,Math.min(Cr[1]+Wr,tn)]])}return Tn.scale=function(Wr){return arguments.length?(nr(Wr),Rr()):nr()},Tn.translate=function(Wr){return arguments.length?(gr(Wr),Rr()):gr()},Tn.center=function(Wr){return arguments.length?(Wn(Wr),Rr()):Wn()},Tn.clipExtent=function(Wr){return arguments.length?(null==Wr?Mr=Wt=wn=tn=null:(Mr=+Wr[0][0],Wt=+Wr[0][1],wn=+Wr[1][0],tn=+Wr[1][1]),Rr()):null==Mr?null:[[Mr,Wt],[wn,tn]]},Rr()}function Ji(At){return O((i+At)/2)}function va(At,Wt){var wn=m(At),tn=At===Wt?M(At):c(wn/m(Wt))/c(Ji(Wt)/Ji(At)),Tn=wn*E(Ji(At),tn)/tn;if(!tn)return ni;function Wn(nr,gr){Tn>0?gr<-i+a&&(gr=-i+a):gr>i-a&&(gr=i-a);var Sr=Tn/E(Ji(gr),tn);return[Sr*M(tn*nr),Tn-Sr*m(tn*nr)]}return Wn.invert=function(nr,gr){var Sr=Tn-gr,Mr=S(tn)*C(nr*nr+Sr*Sr),Rr=g(nr,p(Sr))*S(Sr);return Sr*tn<0&&(Rr-=l*S(nr)*S(Sr)),[Rr/tn,2*f(E(Tn/Mr,1/tn))-i]},Wn}function sa(At,Wt){return[At,Wt]}function qi(At,Wt){var wn=m(At),tn=At===Wt?M(At):(wn-m(Wt))/(Wt-At),Tn=wn/tn+At;if(p(tn)<a)return sa;function Wn(nr,gr){var Sr=Tn-gr,Mr=tn*nr;return[Sr*M(Mr),Tn-Sr*m(Mr)]}return Wn.invert=function(nr,gr){var Sr=Tn-gr,Mr=g(nr,p(Sr))*S(Sr);return Sr*tn<0&&(Mr-=l*S(nr)*S(Sr)),[Mr/tn,Tn-S(tn)*C(nr*nr+Sr*Sr)]},Wn}di.invert=Jr(function(At){return At}),ni.invert=function(At,Wt){return[At,2*f(w(Wt))-i]},sa.invert=sa;var Oo=1.340264,Do=-.081106,Da=893e-6,Ea=.003796,bo=C(3)/2;function Ro(At,Wt){var wn=N(bo*M(Wt)),tn=wn*wn,Tn=tn*tn*tn;return[At*m(wn)/(bo*(Oo+3*Do*tn+Tn*(7*Da+9*Ea*tn))),wn*(Oo+Do*tn+Tn*(Da+Ea*tn))]}function Go(At,Wt){var wn=m(Wt),tn=m(At)*wn;return[wn*M(At)/tn,M(Wt)/tn]}function po(At,Wt){var wn=Wt*Wt,tn=wn*wn;return[At*(.8707-.131979*wn+tn*(tn*(.003971*wn-.001529*tn)-.013791)),Wt*(1.007226+wn*(.015085+tn*(.028874*wn-.044475-.005916*tn)))]}function ss(At,Wt){return[m(Wt)*M(At),M(Wt)]}function gs(At,Wt){var wn=m(Wt),tn=1+m(At)*wn;return[wn*M(At)/tn,M(Wt)/tn]}function xa(At,Wt){return[c(O((i+Wt)/2)),-At]}Ro.invert=function(At,Wt){for(var wn,tn=Wt,Tn=tn*tn,Wn=Tn*Tn*Tn,nr=0;nr<12&&(Wn=(Tn=(tn-=wn=(tn*(Oo+Do*Tn+Wn*(Da+Ea*Tn))-Wt)/(Oo+3*Do*Tn+Wn*(7*Da+9*Ea*Tn)))*tn)*Tn*Tn,!(p(wn)<1e-12));++nr);return[bo*At*(Oo+3*Do*Tn+Wn*(7*Da+9*Ea*Tn))/m(tn),N(M(tn)/bo)]},Go.invert=Jr(f),po.invert=function(At,Wt){var wn,tn=Wt,Tn=25;do{var Wn=tn*tn,nr=Wn*Wn;tn-=wn=(tn*(1.007226+Wn*(.015085+nr*(.028874*Wn-.044475-.005916*nr)))-Wt)/(1.007226+Wn*(.045255+nr*(.259866*Wn-.311325-.005916*11*nr)))}while(p(wn)>a&&--Tn>0);return[At/(.8707+(Wn=tn*tn)*(Wn*(Wn*Wn*Wn*(.003971-.001529*Wn)-.013791)-.131979)),tn]},ss.invert=Jr(N),gs.invert=Jr(function(At){return 2*f(At)}),xa.invert=function(At,Wt){return[-Wt,2*f(w(At))-i]},y.geoAlbers=_r,y.geoAlbersUsa=function(){var At,Wt,wn,tn,Tn,Wn,nr=_r(),gr=Zn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Sr=Zn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Mr={point:function(Cr,Yr){Wn=[Cr,Yr]}};function Rr(Cr){var Yr=Cr[0],si=Cr[1];return Wn=null,wn.point(Yr,si),Wn||(tn.point(Yr,si),Wn)||(Tn.point(Yr,si),Wn)}function Wr(){return At=Wt=null,Rr}return Rr.invert=function(Cr){var Yr=nr.scale(),si=nr.translate(),pi=(Cr[0]-si[0])/Yr,Ei=(Cr[1]-si[1])/Yr;return(Ei>=.12&&Ei<.234&&pi>=-.425&&pi<-.214?gr:Ei>=.166&&Ei<.234&&pi>=-.214&&pi<-.115?Sr:nr).invert(Cr)},Rr.stream=function(Cr){return At&&Wt===Cr?At:(Yr=[nr.stream(Wt=Cr),gr.stream(Cr),Sr.stream(Cr)],si=Yr.length,At={point:function(pi,Ei){for(var mr=-1;++mr<si;)Yr[mr].point(pi,Ei)},sphere:function(){for(var pi=-1;++pi<si;)Yr[pi].sphere()},lineStart:function(){for(var pi=-1;++pi<si;)Yr[pi].lineStart()},lineEnd:function(){for(var pi=-1;++pi<si;)Yr[pi].lineEnd()},polygonStart:function(){for(var pi=-1;++pi<si;)Yr[pi].polygonStart()},polygonEnd:function(){for(var pi=-1;++pi<si;)Yr[pi].polygonEnd()}});var Yr,si},Rr.precision=function(Cr){return arguments.length?(nr.precision(Cr),gr.precision(Cr),Sr.precision(Cr),Wr()):nr.precision()},Rr.scale=function(Cr){return arguments.length?(nr.scale(Cr),gr.scale(.35*Cr),Sr.scale(Cr),Rr.translate(nr.translate())):nr.scale()},Rr.translate=function(Cr){if(!arguments.length)return nr.translate();var Yr=nr.scale(),si=+Cr[0],pi=+Cr[1];return wn=nr.translate(Cr).clipExtent([[si-.455*Yr,pi-.238*Yr],[si+.455*Yr,pi+.238*Yr]]).stream(Mr),tn=gr.translate([si-.307*Yr,pi+.201*Yr]).clipExtent([[si-.425*Yr+a,pi+.12*Yr+a],[si-.214*Yr-a,pi+.234*Yr-a]]).stream(Mr),Tn=Sr.translate([si-.205*Yr,pi+.212*Yr]).clipExtent([[si-.214*Yr+a,pi+.166*Yr+a],[si-.115*Yr-a,pi+.234*Yr-a]]).stream(Mr),Wr()},Rr.fitExtent=function(Cr,Yr){return Qe(Rr,Cr,Yr)},Rr.fitSize=function(Cr,Yr){return ct(Rr,Cr,Yr)},Rr.fitWidth=function(Cr,Yr){return mt(Rr,Cr,Yr)},Rr.fitHeight=function(Cr,Yr){return St(Rr,Cr,Yr)},Rr.scale(1070)},y.geoArea=function(At){return Y.reset(),te(At,oe),2*Y},y.geoAzimuthalEqualArea=function(){return yn(ti).scale(124.75).clipAngle(179.999)},y.geoAzimuthalEqualAreaRaw=ti,y.geoAzimuthalEquidistant=function(){return yn(di).scale(79.4188).clipAngle(179.999)},y.geoAzimuthalEquidistantRaw=di,y.geoBounds=function(At){var Wt,wn,tn,Tn,Wn,nr,gr;if(_e=Ve=-(Oe=Re=1/0),qe=[],te(At,dn),wn=qe.length){for(qe.sort(ot),Wt=1,Wn=[tn=qe[0]];Wt<wn;++Wt)st(tn,(Tn=qe[Wt])[0])||st(tn,Tn[1])?(tt(tn[0],Tn[1])>tt(tn[0],tn[1])&&(tn[1]=Tn[1]),tt(Tn[0],tn[1])>tt(tn[0],tn[1])&&(tn[0]=Tn[0])):Wn.push(tn=Tn);for(nr=-1/0,Wt=0,tn=Wn[wn=Wn.length-1];Wt<=wn;tn=Tn,++Wt)(gr=tt(tn[1],(Tn=Wn[Wt])[0]))>nr&&(nr=gr,Oe=Tn[0],Ve=tn[1])}return qe=We=null,Oe===1/0||Re===1/0?[[NaN,NaN],[NaN,NaN]]:[[Oe,Re],[Ve,_e]]},y.geoCentroid=function(At){Je=ut=Ge=Ke=nt=it=ht=Tt=Ct=Vt=Ft=0,te(At,bt);var Wt=Ct,wn=Vt,tn=Ft,Tn=Wt*Wt+wn*wn+tn*tn;return Tn<1e-12&&(Wt=it,wn=ht,tn=Tt,ut<a&&(Wt=Ge,wn=Ke,tn=nt),(Tn=Wt*Wt+wn*wn+tn*tn)<1e-12)?[NaN,NaN]:[g(wn,Wt)*s,N(tn/C(Tn))*s]},y.geoCircle=function(){var At,Wt,wn=pt([0,0]),tn=pt(90),Tn=pt(6),Wn={point:function(gr,Sr){At.push(gr=Wt(gr,Sr)),gr[0]*=s,gr[1]*=s}};function nr(){var gr=wn.apply(this,arguments),Sr=tn.apply(this,arguments)*d,Mr=Tn.apply(this,arguments)*d;return At=[],Wt=Qt(-gr[0]*d,-gr[1]*d,0).invert,kn(Wn,Sr,Mr,1),gr={type:"Polygon",coordinates:[At]},At=Wt=null,gr}return nr.center=function(gr){return arguments.length?(wn="function"==typeof gr?gr:pt([+gr[0],+gr[1]]),nr):wn},nr.radius=function(gr){return arguments.length?(tn="function"==typeof gr?gr:pt(+gr),nr):tn},nr.precision=function(gr){return arguments.length?(Tn="function"==typeof gr?gr:pt(+gr),nr):Tn},nr},y.geoClipAntimeridian=Br,y.geoClipCircle=fr,y.geoClipExtent=function(){var At,Wt,wn,tn=0,Tn=0,Wn=960,nr=500;return wn={stream:function(gr){return At&&Wt===gr?At:At=Nr(tn,Tn,Wn,nr)(Wt=gr)},extent:function(gr){return arguments.length?(tn=+gr[0][0],Tn=+gr[0][1],Wn=+gr[1][0],nr=+gr[1][1],At=Wt=null,wn):[[tn,Tn],[Wn,nr]]}}},y.geoClipRectangle=Nr,y.geoConicConformal=function(){return Rn(va).scale(109.5).parallels([30,30])},y.geoConicConformalRaw=va,y.geoConicEqualArea=Zn,y.geoConicEqualAreaRaw=Ln,y.geoConicEquidistant=function(){return Rn(qi).scale(131.154).center([0,13.9389])},y.geoConicEquidistantRaw=qi,y.geoContains=function(At,Wt){return(At&&qt.hasOwnProperty(At.type)?qt[At.type]:Cn)(At,Wt)},y.geoDistance=tr,y.geoEqualEarth=function(){return yn(Ro).scale(177.158)},y.geoEqualEarthRaw=Ro,y.geoEquirectangular=function(){return yn(sa).scale(152.63)},y.geoEquirectangularRaw=sa,y.geoGnomonic=function(){return yn(Go).scale(144.049).clipAngle(60)},y.geoGnomonicRaw=Go,y.geoGraticule=On,y.geoGraticule10=function(){return On()()},y.geoIdentity=function(){var At,Wt,wn,tn,Tn,Wn,nr,gr=1,Sr=0,Mr=0,Rr=1,Wr=1,Cr=0,Yr=null,si=1,pi=1,Ei=ps({point:function(ii,ki){var Vi=ei([ii,ki]);this.stream.point(Vi[0],Vi[1])}}),mr=dr;function Di(){return si=gr*Rr,pi=gr*Wr,Wn=nr=null,ei}function ei(ii){var ki=ii[0]*si,Vi=ii[1]*pi;if(Cr){var ha=Vi*At-ki*Wt;ki=ki*At+Vi*Wt,Vi=ha}return[ki+Sr,Vi+Mr]}return ei.invert=function(ii){var ki=ii[0]-Sr,Vi=ii[1]-Mr;if(Cr){var ha=Vi*At+ki*Wt;ki=ki*At-Vi*Wt,Vi=ha}return[ki/si,Vi/pi]},ei.stream=function(ii){return Wn&&nr===ii?Wn:Wn=Ei(mr(nr=ii))},ei.postclip=function(ii){return arguments.length?(mr=ii,Yr=wn=tn=Tn=null,Di()):mr},ei.clipExtent=function(ii){return arguments.length?(mr=null==ii?(Yr=wn=tn=Tn=null,dr):Nr(Yr=+ii[0][0],wn=+ii[0][1],tn=+ii[1][0],Tn=+ii[1][1]),Di()):null==Yr?null:[[Yr,wn],[tn,Tn]]},ei.scale=function(ii){return arguments.length?(gr=+ii,Di()):gr},ei.translate=function(ii){return arguments.length?(Sr=+ii[0],Mr=+ii[1],Di()):[Sr,Mr]},ei.angle=function(ii){return arguments.length?(Wt=M(Cr=ii%360*d),At=m(Cr),Di()):Cr*s},ei.reflectX=function(ii){return arguments.length?(Rr=ii?-1:1,Di()):Rr<0},ei.reflectY=function(ii){return arguments.length?(Wr=ii?-1:1,Di()):Wr<0},ei.fitExtent=function(ii,ki){return Qe(ei,ii,ki)},ei.fitSize=function(ii,ki){return ct(ei,ii,ki)},ei.fitWidth=function(ii,ki){return mt(ei,ii,ki)},ei.fitHeight=function(ii,ki){return St(ei,ii,ki)},ei},y.geoInterpolate=function(At,Wt){var wn=At[0]*d,tn=At[1]*d,Tn=Wt[0]*d,Wn=Wt[1]*d,nr=m(tn),gr=M(tn),Sr=m(Wn),Mr=M(Wn),Rr=nr*m(wn),Wr=nr*M(wn),Cr=Sr*m(Tn),Yr=Sr*M(Tn),si=2*N(C(F(Wn-tn)+nr*Sr*F(Tn-wn))),pi=M(si),Ei=si?function(mr){var Di=M(mr*=si)/pi,ei=M(si-mr)/pi,ii=ei*Rr+Di*Cr,ki=ei*Wr+Di*Yr,Vi=ei*gr+Di*Mr;return[g(ki,ii)*s,g(Vi,C(ii*ii+ki*ki))*s]}:function(){return[wn*s,tn*s]};return Ei.distance=si,Ei},y.geoLength=Dr,y.geoMercator=function(){return Ci(ni).scale(961/h)},y.geoMercatorRaw=ni,y.geoNaturalEarth1=function(){return yn(po).scale(175.295)},y.geoNaturalEarth1Raw=po,y.geoOrthographic=function(){return yn(ss).scale(249.5).clipAngle(90+a)},y.geoOrthographicRaw=ss,y.geoPath=function(At,Wt){var wn,tn,Tn=4.5;function Wn(nr){return nr&&("function"==typeof Tn&&tn.pointRadius(+Tn.apply(this,arguments)),te(nr,wn(tn))),tn.result()}return Wn.area=function(nr){return te(nr,wn(Xr)),Xr.result()},Wn.measure=function(nr){return te(nr,wn(so)),so.result()},Wn.bounds=function(nr){return te(nr,wn(Co)),Co.result()},Wn.centroid=function(nr){return te(nr,wn(ia)),ia.result()},Wn.projection=function(nr){return arguments.length?(wn=null==nr?(At=null,dr):(At=nr).stream,Wn):At},Wn.context=function(nr){return arguments.length?(tn=null==nr?(Wt=null,new os):new ru(Wt=nr),"function"!=typeof Tn&&tn.pointRadius(Tn),Wn):Wt},Wn.pointRadius=function(nr){return arguments.length?(Tn="function"==typeof nr?nr:(tn.pointRadius(+nr),+nr),Wn):Tn},Wn.projection(At).context(Wt)},y.geoProjection=yn,y.geoProjectionMutator=An,y.geoRotation=Yn,y.geoStereographic=function(){return yn(gs).scale(250).clipAngle(142)},y.geoStereographicRaw=gs,y.geoStream=te,y.geoTransform=function(At){return{stream:ps(At)}},y.geoTransverseMercator=function(){var At=Ci(xa),Wt=At.center,wn=At.rotate;return At.center=function(tn){return arguments.length?Wt([-tn[1],tn[0]]):[(tn=Wt())[1],-tn[0]]},At.rotate=function(tn){return arguments.length?wn([tn[0],tn[1],tn.length>2?tn[2]+90:90]):[(tn=wn())[0],tn[1],tn[2]-90]},wn([0,0,90]).scale(159.155)},y.geoTransverseMercatorRaw=xa,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof le&&void 0!==ue?b(le,x("d3-array")):b((y=y||self).d3=y.d3||{},y.d3)},{"d3-array":107}],115:[function(x,ue,le){var y,b;y=this,b=function(y){"use strict";function b(pe,we){return pe.parent===we.parent?1:2}function T(pe,we){return pe+we.x}function _(pe,we){return Math.max(pe,we.y)}function e(pe){var we=0,ye=pe.children,Te=ye&&ye.length;if(Te)for(;--Te>=0;)we+=ye[Te].value;else we=1;pe.value=we}function o(pe,we){var ye,Te,Le,Oe,Re,Ve=new v(pe),_e=+pe.value&&(Ve.value=pe.value),Ae=[Ve];for(null==we&&(we=a);ye=Ae.pop();)if(_e&&(ye.value=+ye.data.value),(Le=we(ye.data))&&(Re=Le.length))for(ye.children=new Array(Re),Oe=Re-1;Oe>=0;--Oe)Ae.push(Te=ye.children[Oe]=new v(Le[Oe])),Te.parent=ye,Te.depth=ye.depth+1;return Ve.eachBefore(i)}function a(pe){return pe.children}function l(pe){pe.data=pe.data.data}function i(pe){var we=0;do{pe.height=we}while((pe=pe.parent)&&pe.height<++we)}function v(pe){this.data=pe,this.depth=this.height=0,this.parent=null}v.prototype=o.prototype={constructor:v,count:function(){return this.eachAfter(e)},each:function(pe){var we,ye,Te,Le,Oe=this,Re=[Oe];do{for(we=Re.reverse(),Re=[];Oe=we.pop();)if(pe(Oe),ye=Oe.children)for(Te=0,Le=ye.length;Te<Le;++Te)Re.push(ye[Te])}while(Re.length);return this},eachAfter:function(pe){for(var we,ye,Te,Le=this,Oe=[Le],Re=[];Le=Oe.pop();)if(Re.push(Le),we=Le.children)for(ye=0,Te=we.length;ye<Te;++ye)Oe.push(we[ye]);for(;Le=Re.pop();)pe(Le);return this},eachBefore:function(pe){for(var we,ye,Te=this,Le=[Te];Te=Le.pop();)if(pe(Te),we=Te.children)for(ye=we.length-1;ye>=0;--ye)Le.push(we[ye]);return this},sum:function(pe){return this.eachAfter(function(we){for(var ye=+pe(we.data)||0,Te=we.children,Le=Te&&Te.length;--Le>=0;)ye+=Te[Le].value;we.value=ye})},sort:function(pe){return this.eachBefore(function(we){we.children&&we.children.sort(pe)})},path:function(pe){for(var we=this,ye=function(Oe,Re){if(Oe===Re)return Oe;var Ve=Oe.ancestors(),_e=Re.ancestors(),Ae=null;for(Oe=Ve.pop(),Re=_e.pop();Oe===Re;)Ae=Oe,Oe=Ve.pop(),Re=_e.pop();return Ae}(we,pe),Te=[we];we!==ye;)Te.push(we=we.parent);for(var Le=Te.length;pe!==ye;)Te.splice(Le,0,pe),pe=pe.parent;return Te},ancestors:function(){for(var pe=this,we=[pe];pe=pe.parent;)we.push(pe);return we},descendants:function(){var pe=[];return this.each(function(we){pe.push(we)}),pe},leaves:function(){var pe=[];return this.eachBefore(function(we){we.children||pe.push(we)}),pe},links:function(){var pe=this,we=[];return pe.each(function(ye){ye!==pe&&we.push({source:ye.parent,target:ye})}),we},copy:function(){return o(this).eachBefore(l)}};var h=Array.prototype.slice;function s(pe){for(var we,ye,Te=0,Le=(pe=function(Re){for(var Ve,_e,Ae=Re.length;Ae;)_e=Math.random()*Ae--|0,Ve=Re[Ae],Re[Ae]=Re[_e],Re[_e]=Ve;return Re}(h.call(pe))).length,Oe=[];Te<Le;)we=pe[Te],ye&&f(ye,we)?++Te:(ye=m(Oe=d(Oe,we)),Te=0);return ye}function d(pe,we){var ye,Te;if(g(we,pe))return[we];for(ye=0;ye<pe.length;++ye)if(p(we,pe[ye])&&g(u(pe[ye],we),pe))return[pe[ye],we];for(ye=0;ye<pe.length-1;++ye)for(Te=ye+1;Te<pe.length;++Te)if(p(u(pe[ye],pe[Te]),we)&&p(u(pe[ye],we),pe[Te])&&p(u(pe[Te],we),pe[ye])&&g(w(pe[ye],pe[Te],we),pe))return[pe[ye],pe[Te],we];throw new Error}function p(pe,we){var ye=pe.r-we.r,Te=we.x-pe.x,Le=we.y-pe.y;return ye<0||ye*ye<Te*Te+Le*Le}function f(pe,we){var ye=pe.r-we.r+1e-6,Te=we.x-pe.x,Le=we.y-pe.y;return ye>0&&ye*ye>Te*Te+Le*Le}function g(pe,we){for(var ye=0;ye<we.length;++ye)if(!f(pe,we[ye]))return!1;return!0}function m(pe){switch(pe.length){case 1:return{x:(we=pe[0]).x,y:we.y,r:we.r};case 2:return u(pe[0],pe[1]);case 3:return w(pe[0],pe[1],pe[2])}var we}function u(pe,we){var ye=pe.x,Te=pe.y,Le=pe.r,Oe=we.x,Re=we.y,Ve=we.r,_e=Oe-ye,Ae=Re-Te,Fe=Ve-Le,Pe=Math.sqrt(_e*_e+Ae*Ae);return{x:(ye+Oe+_e/Pe*Fe)/2,y:(Te+Re+Ae/Pe*Fe)/2,r:(Pe+Le+Ve)/2}}function w(pe,we,ye){var Te=pe.x,Le=pe.y,Oe=pe.r,Re=we.x,Ve=we.y,_e=we.r,Ae=ye.x,Fe=ye.y,Pe=ye.r,Be=Te-Re,qe=Te-Ae,We=Le-Ve,Je=Le-Fe,ut=_e-Oe,Ge=Pe-Oe,Ke=Te*Te+Le*Le-Oe*Oe,nt=Ke-Re*Re-Ve*Ve+_e*_e,it=Ke-Ae*Ae-Fe*Fe+Pe*Pe,ht=qe*We-Be*Je,Tt=(We*it-Je*nt)/(2*ht)-Te,Ct=(Je*ut-We*Ge)/ht,Vt=(qe*nt-Be*it)/(2*ht)-Le,Ft=(Be*Ge-qe*ut)/ht,gt=Ct*Ct+Ft*Ft-1,ft=2*(Oe+Tt*Ct+Vt*Ft),Bt=Tt*Tt+Vt*Vt-Oe*Oe,rn=-(gt?(ft+Math.sqrt(ft*ft-4*gt*Bt))/(2*gt):Bt/ft);return{x:Te+Tt+Ct*rn,y:Le+Vt+Ft*rn,r:rn}}function c(pe,we,ye){var Te,Le,Oe,Re,Ve=pe.x-we.x,_e=pe.y-we.y,Ae=Ve*Ve+_e*_e;Ae?(Le=we.r+ye.r,Re=pe.r+ye.r,(Le*=Le)>(Re*=Re)?(Te=(Ae+Re-Le)/(2*Ae),Oe=Math.sqrt(Math.max(0,Re/Ae-Te*Te)),ye.x=pe.x-Te*Ve-Oe*_e,ye.y=pe.y-Te*_e+Oe*Ve):(Te=(Ae+Le-Re)/(2*Ae),Oe=Math.sqrt(Math.max(0,Le/Ae-Te*Te)),ye.x=we.x+Te*Ve-Oe*_e,ye.y=we.y+Te*_e+Oe*Ve)):(ye.x=we.x+ye.r,ye.y=we.y)}function E(pe,we){var ye=pe.r+we.r-1e-6,Te=we.x-pe.x,Le=we.y-pe.y;return ye>0&&ye*ye>Te*Te+Le*Le}function M(pe){var we=pe._,ye=pe.next._,Te=we.r+ye.r,Le=(we.x*ye.r+ye.x*we.r)/Te,Oe=(we.y*ye.r+ye.y*we.r)/Te;return Le*Le+Oe*Oe}function S(pe){this._=pe,this.next=null,this.previous=null}function C(pe){if(!(Le=pe.length))return 0;var we,ye,Te,Le,Oe,Re,Ve,_e,Ae,Fe,Pe;if((we=pe[0]).x=0,we.y=0,!(Le>1))return we.r;if(we.x=-(ye=pe[1]).r,ye.x=we.r,ye.y=0,!(Le>2))return we.r+ye.r;c(ye,we,Te=pe[2]),we=new S(we),ye=new S(ye),Te=new S(Te),we.next=Te.previous=ye,ye.next=we.previous=Te,Te.next=ye.previous=we;e:for(Ve=3;Ve<Le;++Ve){c(we._,ye._,Te=pe[Ve]),Te=new S(Te),_e=ye.next,Ae=we.previous,Fe=ye._.r,Pe=we._.r;do{if(Fe<=Pe){if(E(_e._,Te._)){we.next=ye=_e,ye.previous=we,--Ve;continue e}Fe+=_e._.r,_e=_e.next}else{if(E(Ae._,Te._)){(we=Ae).next=ye,ye.previous=we,--Ve;continue e}Pe+=Ae._.r,Ae=Ae.previous}}while(_e!==Ae.next);for(Te.previous=we,Te.next=ye,we.next=ye.previous=ye=Te,Oe=M(we);(Te=Te.next)!==ye;)(Re=M(Te))<Oe&&(we=Te,Oe=Re);ye=we.next}for(we=[ye._],Te=ye;(Te=Te.next)!==ye;)we.push(Te._);for(Te=s(we),Ve=0;Ve<Le;++Ve)(we=pe[Ve]).x-=Te.x,we.y-=Te.y;return Te.r}function O(pe){return null==pe?null:I(pe)}function I(pe){if("function"!=typeof pe)throw new Error;return pe}function N(){return 0}function F(pe){return function(){return pe}}function L(pe){return Math.sqrt(pe.value)}function P(pe){return function(we){we.children||(we.r=Math.max(0,+pe(we)||0))}}function j(pe,we){return function(ye){if(Te=ye.children){var Te,Le,Oe,Re=Te.length,Ve=pe(ye)*we||0;if(Ve)for(Le=0;Le<Re;++Le)Te[Le].r+=Ve;if(Oe=C(Te),Ve)for(Le=0;Le<Re;++Le)Te[Le].r-=Ve;ye.r=Oe+Ve}}}function U(pe){return function(we){var ye=we.parent;we.r*=pe,ye&&(we.x=ye.x+pe*we.x,we.y=ye.y+pe*we.y)}}function $(pe){pe.x0=Math.round(pe.x0),pe.y0=Math.round(pe.y0),pe.x1=Math.round(pe.x1),pe.y1=Math.round(pe.y1)}function X(pe,we,ye,Te,Le){for(var Oe,Re=pe.children,Ve=-1,_e=Re.length,Ae=pe.value&&(Te-we)/pe.value;++Ve<_e;)(Oe=Re[Ve]).y0=ye,Oe.y1=Le,Oe.x0=we,Oe.x1=we+=Oe.value*Ae}var te={depth:-1},ae={};function J(pe){return pe.id}function ee(pe){return pe.parentId}function se(pe,we){return pe.parent===we.parent?1:2}function G(pe){var we=pe.children;return we?we[0]:pe.t}function H(pe){var we=pe.children;return we?we[we.length-1]:pe.t}function Y(pe,we,ye){var Te=ye/(we.i-pe.i);we.c-=Te,we.s+=ye,pe.c+=Te,we.z+=ye,we.m+=ye}function oe(pe,we,ye){return pe.a.parent===we.parent?pe.a:ye}function W(pe,we){this._=pe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=we}function ne(pe,we,ye,Te,Le){for(var Oe,Re=pe.children,Ve=-1,_e=Re.length,Ae=pe.value&&(Le-ye)/pe.value;++Ve<_e;)(Oe=Re[Ve]).x0=we,Oe.x1=Te,Oe.y0=ye,Oe.y1=ye+=Oe.value*Ae}W.prototype=Object.create(v.prototype);var re=(1+Math.sqrt(5))/2;function ce(pe,we,ye,Te,Le,Oe){for(var Re,Ve,_e,Ae,Fe,Pe,Be,qe,We,Je,ut,Ge=[],Ke=we.children,nt=0,it=0,ht=Ke.length,Tt=we.value;nt<ht;){_e=Le-ye,Ae=Oe-Te;do{Fe=Ke[it++].value}while(!Fe&&it<ht);for(Pe=Be=Fe,ut=Fe*Fe*(Je=Math.max(Ae/_e,_e/Ae)/(Tt*pe)),We=Math.max(Be/ut,ut/Pe);it<ht;++it){if(Fe+=Ve=Ke[it].value,Ve<Pe&&(Pe=Ve),Ve>Be&&(Be=Ve),ut=Fe*Fe*Je,(qe=Math.max(Be/ut,ut/Pe))>We){Fe-=Ve;break}We=qe}Ge.push(Re={value:Fe,dice:_e<Ae,children:Ke.slice(nt,it)}),Re.dice?X(Re,ye,Te,Le,Tt?Te+=Ae*Fe/Tt:Oe):ne(Re,ye,Te,Tt?ye+=_e*Fe/Tt:Le,Oe),Tt-=Fe,nt=it}return Ge}var fe=function pe(we){function ye(Te,Le,Oe,Re,Ve){ce(we,Te,Le,Oe,Re,Ve)}return ye.ratio=function(Te){return pe((Te=+Te)>1?Te:1)},ye}(re),me=function pe(we){function ye(Te,Le,Oe,Re,Ve){if((_e=Te._squarify)&&_e.ratio===we)for(var _e,Ae,Fe,Pe,Be,qe=-1,We=_e.length,Je=Te.value;++qe<We;){for(Fe=(Ae=_e[qe]).children,Pe=Ae.value=0,Be=Fe.length;Pe<Be;++Pe)Ae.value+=Fe[Pe].value;Ae.dice?X(Ae,Le,Oe,Re,Oe+=(Ve-Oe)*Ae.value/Je):ne(Ae,Le,Oe,Le+=(Re-Le)*Ae.value/Je,Ve),Je-=Ae.value}else Te._squarify=_e=ce(we,Te,Le,Oe,Re,Ve),_e.ratio=we}return ye.ratio=function(Te){return pe((Te=+Te)>1?Te:1)},ye}(re);y.cluster=function(){var pe=b,we=1,ye=1,Te=!1;function Le(Oe){var Re,Ve=0;Oe.eachAfter(function(Be){var We,qe=Be.children;qe?(Be.x=(We=qe).reduce(T,0)/We.length,Be.y=function(We){return 1+We.reduce(_,0)}(qe)):(Be.x=Re?Ve+=pe(Be,Re):0,Be.y=0,Re=Be)});var _e=function(Be){for(var qe;qe=Be.children;)Be=qe[0];return Be}(Oe),Ae=function(Be){for(var qe;qe=Be.children;)Be=qe[qe.length-1];return Be}(Oe),Fe=_e.x-pe(_e,Ae)/2,Pe=Ae.x+pe(Ae,_e)/2;return Oe.eachAfter(Te?function(Be){Be.x=(Be.x-Oe.x)*we,Be.y=(Oe.y-Be.y)*ye}:function(Be){Be.x=(Be.x-Fe)/(Pe-Fe)*we,Be.y=(1-(Oe.y?Be.y/Oe.y:1))*ye})}return Le.separation=function(Oe){return arguments.length?(pe=Oe,Le):pe},Le.size=function(Oe){return arguments.length?(Te=!1,we=+Oe[0],ye=+Oe[1],Le):Te?null:[we,ye]},Le.nodeSize=function(Oe){return arguments.length?(Te=!0,we=+Oe[0],ye=+Oe[1],Le):Te?[we,ye]:null},Le},y.hierarchy=o,y.pack=function(){var pe=null,we=1,ye=1,Te=N;function Le(Oe){return Oe.x=we/2,Oe.y=ye/2,pe?Oe.eachBefore(P(pe)).eachAfter(j(Te,.5)).eachBefore(U(1)):Oe.eachBefore(P(L)).eachAfter(j(N,1)).eachAfter(j(Te,Oe.r/Math.min(we,ye))).eachBefore(U(Math.min(we,ye)/(2*Oe.r))),Oe}return Le.radius=function(Oe){return arguments.length?(pe=O(Oe),Le):pe},Le.size=function(Oe){return arguments.length?(we=+Oe[0],ye=+Oe[1],Le):[we,ye]},Le.padding=function(Oe){return arguments.length?(Te="function"==typeof Oe?Oe:F(+Oe),Le):Te},Le},y.packEnclose=s,y.packSiblings=function(pe){return C(pe),pe},y.partition=function(){var pe=1,we=1,ye=0,Te=!1;function Le(Oe){var Ve,_e,Re=Oe.height+1;return Oe.x0=Oe.y0=ye,Oe.x1=pe,Oe.y1=we/Re,Oe.eachBefore((Ve=we,_e=Re,function(Ae){Ae.children&&X(Ae,Ae.x0,Ve*(Ae.depth+1)/_e,Ae.x1,Ve*(Ae.depth+2)/_e);var Fe=Ae.x0,Pe=Ae.y0,Be=Ae.x1-ye,qe=Ae.y1-ye;Be<Fe&&(Fe=Be=(Fe+Be)/2),qe<Pe&&(Pe=qe=(Pe+qe)/2),Ae.x0=Fe,Ae.y0=Pe,Ae.x1=Be,Ae.y1=qe})),Te&&Oe.eachBefore($),Oe}return Le.round=function(Oe){return arguments.length?(Te=!!Oe,Le):Te},Le.size=function(Oe){return arguments.length?(pe=+Oe[0],we=+Oe[1],Le):[pe,we]},Le.padding=function(Oe){return arguments.length?(ye=+Oe,Le):ye},Le},y.stratify=function(){var pe=J,we=ee;function ye(Te){var Le,Oe,Re,Ve,_e,Ae,Fe,Pe=Te.length,Be=new Array(Pe),qe={};for(Oe=0;Oe<Pe;++Oe)_e=Be[Oe]=new v(Le=Te[Oe]),null!=(Ae=pe(Le,Oe,Te))&&(Ae+="")&&(qe[Fe="$"+(_e.id=Ae)]=Fe in qe?ae:_e);for(Oe=0;Oe<Pe;++Oe)if(_e=Be[Oe],null!=(Ae=we(Te[Oe],Oe,Te))&&(Ae+="")){if(!(Ve=qe["$"+Ae]))throw new Error("missing: "+Ae);if(Ve===ae)throw new Error("ambiguous: "+Ae);Ve.children?Ve.children.push(_e):Ve.children=[_e],_e.parent=Ve}else{if(Re)throw new Error("multiple roots");Re=_e}if(!Re)throw new Error("no root");if(Re.parent=te,Re.eachBefore(function(We){We.depth=We.parent.depth+1,--Pe}).eachBefore(i),Re.parent=null,Pe>0)throw new Error("cycle");return Re}return ye.id=function(Te){return arguments.length?(pe=I(Te),ye):pe},ye.parentId=function(Te){return arguments.length?(we=I(Te),ye):we},ye},y.tree=function(){var pe=se,we=1,ye=1,Te=null;function Le(_e){var Ae=function(Ge){for(var Ke,nt,it,ht,Tt,Ct=new W(Ge,0),Vt=[Ct];Ke=Vt.pop();)if(it=Ke._.children)for(Ke.children=new Array(Tt=it.length),ht=Tt-1;ht>=0;--ht)Vt.push(nt=Ke.children[ht]=new W(it[ht],ht)),nt.parent=Ke;return(Ct.parent=new W(null,0)).children=[Ct],Ct}(_e);if(Ae.eachAfter(Oe),Ae.parent.m=-Ae.z,Ae.eachBefore(Re),Te)_e.eachBefore(Ve);else{var Fe=_e,Pe=_e,Be=_e;_e.eachBefore(function(Ge){Ge.x<Fe.x&&(Fe=Ge),Ge.x>Pe.x&&(Pe=Ge),Ge.depth>Be.depth&&(Be=Ge)});var qe=Fe===Pe?1:pe(Fe,Pe)/2,We=qe-Fe.x,Je=we/(Pe.x+qe+We),ut=ye/(Be.depth||1);_e.eachBefore(function(Ge){Ge.x=(Ge.x+We)*Je,Ge.y=Ge.depth*ut})}return _e}function Oe(_e){var Ae=_e.children,Fe=_e.parent.children,Pe=_e.i?Fe[_e.i-1]:null;if(Ae){!function(qe){for(var We,Je=0,ut=0,Ge=qe.children,Ke=Ge.length;--Ke>=0;)(We=Ge[Ke]).z+=Je,We.m+=Je,Je+=We.s+(ut+=We.c)}(_e);var Be=(Ae[0].z+Ae[Ae.length-1].z)/2;Pe?(_e.z=Pe.z+pe(_e._,Pe._),_e.m=_e.z-Be):_e.z=Be}else Pe&&(_e.z=Pe.z+pe(_e._,Pe._));_e.parent.A=function(qe,We,Je){if(We){for(var ut,Ge=qe,Ke=qe,nt=We,it=Ge.parent.children[0],ht=Ge.m,Tt=Ke.m,Ct=nt.m,Vt=it.m;nt=H(nt),Ge=G(Ge),nt&&Ge;)it=G(it),(Ke=H(Ke)).a=qe,(ut=nt.z+Ct-Ge.z-ht+pe(nt._,Ge._))>0&&(Y(oe(nt,qe,Je),qe,ut),ht+=ut,Tt+=ut),Ct+=nt.m,ht+=Ge.m,Vt+=it.m,Tt+=Ke.m;nt&&!H(Ke)&&(Ke.t=nt,Ke.m+=Ct-Tt),Ge&&!G(it)&&(it.t=Ge,it.m+=ht-Vt,Je=qe)}return Je}(_e,Pe,_e.parent.A||Fe[0])}function Re(_e){_e._.x=_e.z+_e.parent.m,_e.m+=_e.parent.m}function Ve(_e){_e.x*=we,_e.y=_e.depth*ye}return Le.separation=function(_e){return arguments.length?(pe=_e,Le):pe},Le.size=function(_e){return arguments.length?(Te=!1,we=+_e[0],ye=+_e[1],Le):Te?null:[we,ye]},Le.nodeSize=function(_e){return arguments.length?(Te=!0,we=+_e[0],ye=+_e[1],Le):Te?[we,ye]:null},Le},y.treemap=function(){var pe=fe,we=!1,ye=1,Te=1,Le=[0],Oe=N,Re=N,Ve=N,_e=N,Ae=N;function Fe(Be){return Be.x0=Be.y0=0,Be.x1=ye,Be.y1=Te,Be.eachBefore(Pe),Le=[0],we&&Be.eachBefore($),Be}function Pe(Be){var qe=Le[Be.depth],We=Be.x0+qe,Je=Be.y0+qe,ut=Be.x1-qe,Ge=Be.y1-qe;ut<We&&(We=ut=(We+ut)/2),Ge<Je&&(Je=Ge=(Je+Ge)/2),Be.x0=We,Be.y0=Je,Be.x1=ut,Be.y1=Ge,Be.children&&(qe=Le[Be.depth+1]=Oe(Be)/2,We+=Ae(Be)-qe,Je+=Re(Be)-qe,(ut-=Ve(Be)-qe)<We&&(We=ut=(We+ut)/2),(Ge-=_e(Be)-qe)<Je&&(Je=Ge=(Je+Ge)/2),pe(Be,We,Je,ut,Ge))}return Fe.round=function(Be){return arguments.length?(we=!!Be,Fe):we},Fe.size=function(Be){return arguments.length?(ye=+Be[0],Te=+Be[1],Fe):[ye,Te]},Fe.tile=function(Be){return arguments.length?(pe=I(Be),Fe):pe},Fe.padding=function(Be){return arguments.length?Fe.paddingInner(Be).paddingOuter(Be):Fe.paddingInner()},Fe.paddingInner=function(Be){return arguments.length?(Oe="function"==typeof Be?Be:F(+Be),Fe):Oe},Fe.paddingOuter=function(Be){return arguments.length?Fe.paddingTop(Be).paddingRight(Be).paddingBottom(Be).paddingLeft(Be):Fe.paddingTop()},Fe.paddingTop=function(Be){return arguments.length?(Re="function"==typeof Be?Be:F(+Be),Fe):Re},Fe.paddingRight=function(Be){return arguments.length?(Ve="function"==typeof Be?Be:F(+Be),Fe):Ve},Fe.paddingBottom=function(Be){return arguments.length?(_e="function"==typeof Be?Be:F(+Be),Fe):_e},Fe.paddingLeft=function(Be){return arguments.length?(Ae="function"==typeof Be?Be:F(+Be),Fe):Ae},Fe},y.treemapBinary=function(pe,we,ye,Te,Le){var Oe,Re,Ve=pe.children,_e=Ve.length,Ae=new Array(_e+1);for(Ae[0]=Re=Oe=0;Oe<_e;++Oe)Ae[Oe+1]=Re+=Ve[Oe].value;!function Fe(Pe,Be,qe,We,Je,ut,Ge){if(Pe>=Be-1){var Ke=Ve[Pe];return Ke.x0=We,Ke.y0=Je,Ke.x1=ut,void(Ke.y1=Ge)}for(var nt=Ae[Pe],it=qe/2+nt,ht=Pe+1,Tt=Be-1;ht<Tt;){var Ct=ht+Tt>>>1;Ae[Ct]<it?ht=Ct+1:Tt=Ct}it-Ae[ht-1]<Ae[ht]-it&&Pe+1<ht&&--ht;var Vt=Ae[ht]-nt,Ft=qe-Vt;if(ut-We>Ge-Je){var gt=(We*Ft+ut*Vt)/qe;Fe(Pe,ht,Vt,We,Je,gt,Ge),Fe(ht,Be,Ft,gt,Je,ut,Ge)}else{var ft=(Je*Ft+Ge*Vt)/qe;Fe(Pe,ht,Vt,We,Je,ut,ft),Fe(ht,Be,Ft,We,ft,ut,Ge)}}(0,_e,pe.value,we,ye,Te,Le)},y.treemapDice=X,y.treemapResquarify=me,y.treemapSlice=ne,y.treemapSliceDice=function(pe,we,ye,Te,Le){(1&pe.depth?ne:X)(pe,we,ye,Te,Le)},y.treemapSquarify=fe,Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:(y=y||self).d3=y.d3||{})},{}],116:[function(x,ue,le){var y,b;y=this,b=function(y,b){"use strict";function T(re,ce,fe,me,pe){var we=re*re,ye=we*re;return((1-3*re+3*we-ye)*ce+(4-6*we+3*ye)*fe+(1+3*re+3*we-3*ye)*me+ye*pe)/6}function _(re){var ce=re.length-1;return function(fe){var me=fe<=0?fe=0:fe>=1?(fe=1,ce-1):Math.floor(fe*ce),pe=re[me],we=re[me+1];return T((fe-me/ce)*ce,me>0?re[me-1]:2*pe-we,pe,we,me<ce-1?re[me+2]:2*we-pe)}}function e(re){var ce=re.length;return function(fe){var me=Math.floor(((fe%=1)<0?++fe:fe)*ce);return T((fe-me/ce)*ce,re[(me+ce-1)%ce],re[me%ce],re[(me+1)%ce],re[(me+2)%ce])}}function o(re){return function(){return re}}function a(re,ce){return function(fe){return re+fe*ce}}function l(re,ce){var fe=ce-re;return fe?a(re,fe>180||fe<-180?fe-360*Math.round(fe/360):fe):o(isNaN(re)?ce:re)}function v(re,ce){var fe=ce-re;return fe?a(re,fe):o(isNaN(re)?ce:re)}var h=function re(ce){var fe=function i(re){return 1==(re=+re)?v:function(ce,fe){return fe-ce?(me=ce,pe=fe,we=re,me=Math.pow(me,we),pe=Math.pow(pe,we)-me,we=1/we,function(ye){return Math.pow(me+ye*pe,we)}):o(isNaN(ce)?fe:ce);var me,pe,we}}(ce);function me(pe,we){var ye=fe((pe=b.rgb(pe)).r,(we=b.rgb(we)).r),Te=fe(pe.g,we.g),Le=fe(pe.b,we.b),Oe=v(pe.opacity,we.opacity);return function(Re){return pe.r=ye(Re),pe.g=Te(Re),pe.b=Le(Re),pe.opacity=Oe(Re),pe+""}}return me.gamma=re,me}(1);function s(re){return function(ce){var fe,me,pe=ce.length,we=new Array(pe),ye=new Array(pe),Te=new Array(pe);for(fe=0;fe<pe;++fe)me=b.rgb(ce[fe]),we[fe]=me.r||0,ye[fe]=me.g||0,Te[fe]=me.b||0;return we=re(we),ye=re(ye),Te=re(Te),me.opacity=1,function(Le){return me.r=we(Le),me.g=ye(Le),me.b=Te(Le),me+""}}}var d=s(_),p=s(e);function f(re,ce){ce||(ce=[]);var fe,me=re?Math.min(ce.length,re.length):0,pe=ce.slice();return function(we){for(fe=0;fe<me;++fe)pe[fe]=re[fe]*(1-we)+ce[fe]*we;return pe}}function g(re){return ArrayBuffer.isView(re)&&!(re instanceof DataView)}function m(re,ce){var fe,me=ce?ce.length:0,pe=re?Math.min(me,re.length):0,we=new Array(pe),ye=new Array(me);for(fe=0;fe<pe;++fe)we[fe]=C(re[fe],ce[fe]);for(;fe<me;++fe)ye[fe]=ce[fe];return function(Te){for(fe=0;fe<pe;++fe)ye[fe]=we[fe](Te);return ye}}function u(re,ce){var fe=new Date;return re=+re,ce=+ce,function(me){return fe.setTime(re*(1-me)+ce*me),fe}}function w(re,ce){return re=+re,ce=+ce,function(fe){return re*(1-fe)+ce*fe}}function c(re,ce){var fe,me={},pe={};for(fe in null!==re&&"object"==typeof re||(re={}),null!==ce&&"object"==typeof ce||(ce={}),ce)fe in re?me[fe]=C(re[fe],ce[fe]):pe[fe]=ce[fe];return function(we){for(fe in me)pe[fe]=me[fe](we);return pe}}var E=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M=new RegExp(E.source,"g");function S(re,ce){var fe,me,pe,Oe,we=E.lastIndex=M.lastIndex=0,ye=-1,Te=[],Le=[];for(re+="",ce+="";(fe=E.exec(re))&&(me=M.exec(ce));)(pe=me.index)>we&&(pe=ce.slice(we,pe),Te[ye]?Te[ye]+=pe:Te[++ye]=pe),(fe=fe[0])===(me=me[0])?Te[ye]?Te[ye]+=me:Te[++ye]=me:(Te[++ye]=null,Le.push({i:ye,x:w(fe,me)})),we=M.lastIndex;return we<ce.length&&(pe=ce.slice(we),Te[ye]?Te[ye]+=pe:Te[++ye]=pe),Te.length<2?Le[0]?(Oe=Le[0].x,function(Re){return Oe(Re)+""}):function(Oe){return function(){return Oe}}(ce):(ce=Le.length,function(Oe){for(var Re,Ve=0;Ve<ce;++Ve)Te[(Re=Le[Ve]).i]=Re.x(Oe);return Te.join("")})}function C(re,ce){var fe,me=typeof ce;return null==ce||"boolean"===me?o(ce):("number"===me?w:"string"===me?(fe=b.color(ce))?(ce=fe,h):S:ce instanceof b.color?h:ce instanceof Date?u:g(ce)?f:Array.isArray(ce)?m:"function"!=typeof ce.valueOf&&"function"!=typeof ce.toString||isNaN(ce)?c:w)(re,ce)}var O,I,N,F,L=180/Math.PI,P={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function j(re,ce,fe,me,pe,we){var ye,Te,Le;return(ye=Math.sqrt(re*re+ce*ce))&&(re/=ye,ce/=ye),(Le=re*fe+ce*me)&&(fe-=re*Le,me-=ce*Le),(Te=Math.sqrt(fe*fe+me*me))&&(fe/=Te,me/=Te,Le/=Te),re*me<ce*fe&&(re=-re,ce=-ce,Le=-Le,ye=-ye),{translateX:pe,translateY:we,rotate:Math.atan2(ce,re)*L,skewX:Math.atan(Le)*L,scaleX:ye,scaleY:Te}}function U(re,ce,fe,me){function pe(we){return we.length?we.pop()+" ":""}return function(we,ye){var Oe,Re,Ve,Te=[],Le=[];return we=re(we),ye=re(ye),function(Oe,Re,Ve,_e,Ae,Fe){if(Oe!==Ve||Re!==_e){var Pe=Ae.push("translate(",null,ce,null,fe);Fe.push({i:Pe-4,x:w(Oe,Ve)},{i:Pe-2,x:w(Re,_e)})}else(Ve||_e)&&Ae.push("translate("+Ve+ce+_e+fe)}(we.translateX,we.translateY,ye.translateX,ye.translateY,Te,Le),Ve=Te,(Oe=we.rotate)!==(Re=ye.rotate)?(Oe-Re>180?Re+=360:Re-Oe>180&&(Oe+=360),Le.push({i:Ve.push(pe(Ve)+"rotate(",null,me)-2,x:w(Oe,Re)})):Re&&Ve.push(pe(Ve)+"rotate("+Re+me),function(Oe,Re,Ve,_e){Oe!==Re?_e.push({i:Ve.push(pe(Ve)+"skewX(",null,me)-2,x:w(Oe,Re)}):Re&&Ve.push(pe(Ve)+"skewX("+Re+me)}(we.skewX,ye.skewX,Te,Le),function(Oe,Re,Ve,_e,Ae,Fe){if(Oe!==Ve||Re!==_e){var Pe=Ae.push(pe(Ae)+"scale(",null,",",null,")");Fe.push({i:Pe-4,x:w(Oe,Ve)},{i:Pe-2,x:w(Re,_e)})}else 1===Ve&&1===_e||Ae.push(pe(Ae)+"scale("+Ve+","+_e+")")}(we.scaleX,we.scaleY,ye.scaleX,ye.scaleY,Te,Le),we=ye=null,function(Oe){for(var Re,Ve=-1,_e=Le.length;++Ve<_e;)Te[(Re=Le[Ve]).i]=Re.x(Oe);return Te.join("")}}}var $=U(function(re){return"none"===re?P:(O||(O=document.createElement("DIV"),I=document.documentElement,N=document.defaultView),O.style.transform=re,re=N.getComputedStyle(I.appendChild(O),null).getPropertyValue("transform"),I.removeChild(O),j(+(re=re.slice(7,-1).split(","))[0],+re[1],+re[2],+re[3],+re[4],+re[5]))},"px, ","px)","deg)"),X=U(function(re){return null==re?P:(F||(F=document.createElementNS("http://www.w3.org/2000/svg","g")),F.setAttribute("transform",re),(re=F.transform.baseVal.consolidate())?j((re=re.matrix).a,re.b,re.c,re.d,re.e,re.f):P)},", ",")",")"),te=Math.SQRT2;function ae(re){return((re=Math.exp(re))+1/re)/2}function J(re){return function(ce,fe){var me=re((ce=b.hsl(ce)).h,(fe=b.hsl(fe)).h),pe=v(ce.s,fe.s),we=v(ce.l,fe.l),ye=v(ce.opacity,fe.opacity);return function(Te){return ce.h=me(Te),ce.s=pe(Te),ce.l=we(Te),ce.opacity=ye(Te),ce+""}}}var ee=J(l),se=J(v);function G(re){return function(ce,fe){var me=re((ce=b.hcl(ce)).h,(fe=b.hcl(fe)).h),pe=v(ce.c,fe.c),we=v(ce.l,fe.l),ye=v(ce.opacity,fe.opacity);return function(Te){return ce.h=me(Te),ce.c=pe(Te),ce.l=we(Te),ce.opacity=ye(Te),ce+""}}}var H=G(l),Y=G(v);function oe(re){return function ce(fe){function me(pe,we){var ye=re((pe=b.cubehelix(pe)).h,(we=b.cubehelix(we)).h),Te=v(pe.s,we.s),Le=v(pe.l,we.l),Oe=v(pe.opacity,we.opacity);return function(Re){return pe.h=ye(Re),pe.s=Te(Re),pe.l=Le(Math.pow(Re,fe)),pe.opacity=Oe(Re),pe+""}}return fe=+fe,me.gamma=ce,me}(1)}var W=oe(l),ne=oe(v);y.interpolate=C,y.interpolateArray=function(re,ce){return(g(ce)?f:m)(re,ce)},y.interpolateBasis=_,y.interpolateBasisClosed=e,y.interpolateCubehelix=W,y.interpolateCubehelixLong=ne,y.interpolateDate=u,y.interpolateDiscrete=function(re){var ce=re.length;return function(fe){return re[Math.max(0,Math.min(ce-1,Math.floor(fe*ce)))]}},y.interpolateHcl=H,y.interpolateHclLong=Y,y.interpolateHsl=ee,y.interpolateHslLong=se,y.interpolateHue=function(re,ce){var fe=l(+re,+ce);return function(me){var pe=fe(me);return pe-360*Math.floor(pe/360)}},y.interpolateLab=function(re,ce){var fe=v((re=b.lab(re)).l,(ce=b.lab(ce)).l),me=v(re.a,ce.a),pe=v(re.b,ce.b),we=v(re.opacity,ce.opacity);return function(ye){return re.l=fe(ye),re.a=me(ye),re.b=pe(ye),re.opacity=we(ye),re+""}},y.interpolateNumber=w,y.interpolateNumberArray=f,y.interpolateObject=c,y.interpolateRgb=h,y.interpolateRgbBasis=d,y.interpolateRgbBasisClosed=p,y.interpolateRound=function(re,ce){return re=+re,ce=+ce,function(fe){return Math.round(re*(1-fe)+ce*fe)}},y.interpolateString=S,y.interpolateTransformCss=$,y.interpolateTransformSvg=X,y.interpolateZoom=function(re,ce){var fe,me,pe=re[0],we=re[1],ye=re[2],Oe=ce[2],Re=ce[0]-pe,Ve=ce[1]-we,_e=Re*Re+Ve*Ve;if(_e<1e-12)me=Math.log(Oe/ye)/te,fe=function(We){return[pe+We*Re,we+We*Ve,ye*Math.exp(te*We*me)]};else{var Ae=Math.sqrt(_e),Fe=(Oe*Oe-ye*ye+4*_e)/(2*ye*2*Ae),Pe=(Oe*Oe-ye*ye-4*_e)/(2*Oe*2*Ae),Be=Math.log(Math.sqrt(Fe*Fe+1)-Fe),qe=Math.log(Math.sqrt(Pe*Pe+1)-Pe);me=(qe-Be)/te,fe=function(We){var Je,nt,ut=We*me,Ge=ae(Be),Ke=ye/(2*Ae)*(Ge*(Je=te*ut+Be,((Je=Math.exp(2*Je))-1)/(Je+1))-(nt=Be,((nt=Math.exp(nt))-1/nt)/2));return[pe+Ke*Re,we+Ke*Ve,ye*Ge/ae(te*ut+Be)]}}return fe.duration=1e3*me,fe},y.piecewise=function(re,ce){for(var fe=0,me=ce.length-1,pe=ce[0],we=new Array(me<0?0:me);fe<me;)we[fe]=re(pe,pe=ce[++fe]);return function(ye){var Te=Math.max(0,Math.min(me-1,Math.floor(ye*=me)));return we[Te](ye-Te)}},y.quantize=function(re,ce){for(var fe=new Array(ce),me=0;me<ce;++me)fe[me]=re(me/(ce-1));return fe},Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof le&&void 0!==ue?b(le,x("d3-color")):b((y=y||self).d3=y.d3||{},y.d3)},{"d3-color":109}],117:[function(x,ue,le){var y,b;y=this,b=function(y){"use strict";var b=Math.PI,T=2*b,_=T-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new e}e.prototype=o.prototype={constructor:e,moveTo:function(a,l){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,l){this._+="L"+(this._x1=+a)+","+(this._y1=+l)},quadraticCurveTo:function(a,l,i,v){this._+="Q"+ +a+","+ +l+","+(this._x1=+i)+","+(this._y1=+v)},bezierCurveTo:function(a,l,i,v,h,s){this._+="C"+ +a+","+ +l+","+ +i+","+ +v+","+(this._x1=+h)+","+(this._y1=+s)},arcTo:function(a,l,i,v,h){var s=this._x1,d=this._y1,p=(i=+i)-(a=+a),f=(v=+v)-(l=+l),g=s-a,m=d-l,u=g*g+m*m;if((h=+h)<0)throw new Error("negative radius: "+h);if(null===this._x1)this._+="M"+(this._x1=a)+","+(this._y1=l);else if(u>1e-6)if(Math.abs(m*p-f*g)>1e-6&&h){var w=i-s,c=v-d,E=p*p+f*f,M=w*w+c*c,S=Math.sqrt(E),C=Math.sqrt(u),O=h*Math.tan((b-Math.acos((E+u-M)/(2*S*C)))/2),I=O/C,N=O/S;Math.abs(I-1)>1e-6&&(this._+="L"+(a+I*g)+","+(l+I*m)),this._+="A"+h+","+h+",0,0,"+ +(m*w>g*c)+","+(this._x1=a+N*p)+","+(this._y1=l+N*f)}else this._+="L"+(this._x1=a)+","+(this._y1=l)},arc:function(a,l,i,v,h,s){a=+a,l=+l,s=!!s;var d=(i=+i)*Math.cos(v),p=i*Math.sin(v),f=a+d,g=l+p,m=1^s,u=s?v-h:h-v;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+f+","+g:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-g)>1e-6)&&(this._+="L"+f+","+g),i&&(u<0&&(u=u%T+T),u>_?this._+="A"+i+","+i+",0,1,"+m+","+(a-d)+","+(l-p)+"A"+i+","+i+",0,1,"+m+","+(this._x1=f)+","+(this._y1=g):u>1e-6&&(this._+="A"+i+","+i+",0,"+ +(u>=b)+","+m+","+(this._x1=a+i*Math.cos(h))+","+(this._y1=l+i*Math.sin(h))))},rect:function(a,l,i,v){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+l)+"h"+ +i+"v"+ +v+"h"+-i+"Z"},toString:function(){return this._}},y.path=o,Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:(y=y||self).d3=y.d3||{})},{}],118:[function(x,ue,le){var y,b;y=this,b=function(y){"use strict";function b(v,h,s,d){if(isNaN(h)||isNaN(s))return v;var p,f,g,m,u,w,c,E,M,S=v._root,C={data:d},O=v._x0,I=v._y0,N=v._x1,F=v._y1;if(!S)return v._root=C,v;for(;S.length;)if((w=h>=(f=(O+N)/2))?O=f:N=f,(c=s>=(g=(I+F)/2))?I=g:F=g,p=S,!(S=S[E=c<<1|w]))return p[E]=C,v;if(m=+v._x.call(null,S.data),u=+v._y.call(null,S.data),h===m&&s===u)return C.next=S,p?p[E]=C:v._root=C,v;do{p=p?p[E]=new Array(4):v._root=new Array(4),(w=h>=(f=(O+N)/2))?O=f:N=f,(c=s>=(g=(I+F)/2))?I=g:F=g}while((E=c<<1|w)==(M=(u>=g)<<1|m>=f));return p[M]=S,p[E]=C,v}function T(v,h,s,d,p){this.node=v,this.x0=h,this.y0=s,this.x1=d,this.y1=p}function _(v){return v[0]}function e(v){return v[1]}function o(v,h,s){var d=new a(null==h?_:h,null==s?e:s,NaN,NaN,NaN,NaN);return null==v?d:d.addAll(v)}function a(v,h,s,d,p,f){this._x=v,this._y=h,this._x0=s,this._y0=d,this._x1=p,this._y1=f,this._root=void 0}function l(v){for(var h={data:v.data},s=h;v=v.next;)s=s.next={data:v.data};return h}var i=o.prototype=a.prototype;i.copy=function(){var v,h,s=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root;if(!d)return s;if(!d.length)return s._root=l(d),s;for(v=[{source:d,target:s._root=new Array(4)}];d=v.pop();)for(var p=0;p<4;++p)(h=d.source[p])&&(h.length?v.push({source:h,target:d.target[p]=new Array(4)}):d.target[p]=l(h));return s},i.add=function(v){var h=+this._x.call(null,v),s=+this._y.call(null,v);return b(this.cover(h,s),h,s,v)},i.addAll=function(v){var h,s,d,p,f=v.length,g=new Array(f),m=new Array(f),u=1/0,w=1/0,c=-1/0,E=-1/0;for(s=0;s<f;++s)isNaN(d=+this._x.call(null,h=v[s]))||isNaN(p=+this._y.call(null,h))||(g[s]=d,m[s]=p,d<u&&(u=d),d>c&&(c=d),p<w&&(w=p),p>E&&(E=p));if(u>c||w>E)return this;for(this.cover(u,w).cover(c,E),s=0;s<f;++s)b(this,g[s],m[s],v[s]);return this},i.cover=function(v,h){if(isNaN(v=+v)||isNaN(h=+h))return this;var s=this._x0,d=this._y0,p=this._x1,f=this._y1;if(isNaN(s))p=(s=Math.floor(v))+1,f=(d=Math.floor(h))+1;else{for(var g,m,u=p-s,w=this._root;s>v||v>=p||d>h||h>=f;)switch(m=(h<d)<<1|v<s,(g=new Array(4))[m]=w,w=g,u*=2,m){case 0:p=s+u,f=d+u;break;case 1:s=p-u,f=d+u;break;case 2:p=s+u,d=f-u;break;case 3:s=p-u,d=f-u}this._root&&this._root.length&&(this._root=w)}return this._x0=s,this._y0=d,this._x1=p,this._y1=f,this},i.data=function(){var v=[];return this.visit(function(h){if(!h.length)do{v.push(h.data)}while(h=h.next)}),v},i.extent=function(v){return arguments.length?this.cover(+v[0][0],+v[0][1]).cover(+v[1][0],+v[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},i.find=function(v,h,s){var d,p,f,g,m,u,w,c=this._x0,E=this._y0,M=this._x1,S=this._y1,C=[],O=this._root;for(O&&C.push(new T(O,c,E,M,S)),null==s?s=1/0:(c=v-s,E=h-s,M=v+s,S=h+s,s*=s);u=C.pop();)if(!(!(O=u.node)||(p=u.x0)>M||(f=u.y0)>S||(g=u.x1)<c||(m=u.y1)<E))if(O.length){var I=(p+g)/2,N=(f+m)/2;C.push(new T(O[3],I,N,g,m),new T(O[2],p,N,I,m),new T(O[1],I,f,g,N),new T(O[0],p,f,I,N)),(w=(h>=N)<<1|v>=I)&&(u=C[C.length-1],C[C.length-1]=C[C.length-1-w],C[C.length-1-w]=u)}else{var F=v-+this._x.call(null,O.data),L=h-+this._y.call(null,O.data),P=F*F+L*L;if(P<s){var j=Math.sqrt(s=P);c=v-j,E=h-j,M=v+j,S=h+j,d=O.data}}return d},i.remove=function(v){if(isNaN(f=+this._x.call(null,v))||isNaN(g=+this._y.call(null,v)))return this;var h,s,d,p,f,g,m,u,w,c,E,M,S=this._root,C=this._x0,O=this._y0,I=this._x1,N=this._y1;if(!S)return this;if(S.length)for(;;){if((w=f>=(m=(C+I)/2))?C=m:I=m,(c=g>=(u=(O+N)/2))?O=u:N=u,h=S,!(S=S[E=c<<1|w]))return this;if(!S.length)break;(h[E+1&3]||h[E+2&3]||h[E+3&3])&&(s=h,M=E)}for(;S.data!==v;)if(d=S,!(S=S.next))return this;return(p=S.next)&&delete S.next,d?(p?d.next=p:delete d.next,this):h?(p?h[E]=p:delete h[E],(S=h[0]||h[1]||h[2]||h[3])&&S===(h[3]||h[2]||h[1]||h[0])&&!S.length&&(s?s[M]=S:this._root=S),this):(this._root=p,this)},i.removeAll=function(v){for(var h=0,s=v.length;h<s;++h)this.remove(v[h]);return this},i.root=function(){return this._root},i.size=function(){var v=0;return this.visit(function(h){if(!h.length)do{++v}while(h=h.next)}),v},i.visit=function(v){var h,s,d,p,f,g,m=[],u=this._root;for(u&&m.push(new T(u,this._x0,this._y0,this._x1,this._y1));h=m.pop();)if(!v(u=h.node,d=h.x0,p=h.y0,f=h.x1,g=h.y1)&&u.length){var w=(d+f)/2,c=(p+g)/2;(s=u[3])&&m.push(new T(s,w,c,f,g)),(s=u[2])&&m.push(new T(s,d,c,w,g)),(s=u[1])&&m.push(new T(s,w,p,f,c)),(s=u[0])&&m.push(new T(s,d,p,w,c))}return this},i.visitAfter=function(v){var h,s=[],d=[];for(this._root&&s.push(new T(this._root,this._x0,this._y0,this._x1,this._y1));h=s.pop();){var p=h.node;if(p.length){var f,g=h.x0,m=h.y0,u=h.x1,w=h.y1,c=(g+u)/2,E=(m+w)/2;(f=p[0])&&s.push(new T(f,g,m,c,E)),(f=p[1])&&s.push(new T(f,c,m,u,E)),(f=p[2])&&s.push(new T(f,g,E,c,w)),(f=p[3])&&s.push(new T(f,c,E,u,w))}d.push(h)}for(;h=d.pop();)v(h.node,h.x0,h.y0,h.x1,h.y1);return this},i.x=function(v){return arguments.length?(this._x=v,this):this._x},i.y=function(v){return arguments.length?(this._y=v,this):this._y},y.quadtree=o,Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:(y=y||self).d3=y.d3||{})},{}],119:[function(x,ue,le){var y,b;y=this,b=function(y,b){"use strict";function T(je){return function(){return je}}var _=Math.abs,e=Math.atan2,o=Math.cos,a=Math.max,l=Math.min,i=Math.sin,v=Math.sqrt,h=Math.PI,s=h/2,d=2*h;function p(je){return je>1?0:je<-1?h:Math.acos(je)}function f(je){return je>=1?s:je<=-1?-s:Math.asin(je)}function g(je){return je.innerRadius}function m(je){return je.outerRadius}function u(je){return je.startAngle}function w(je){return je.endAngle}function c(je){return je&&je.padAngle}function E(je,rt,pt,It,jt,Qt,fn,an){var Sn=pt-je,Yn=It-rt,kn=fn-jt,cn=an-Qt,vn=cn*Sn-kn*Yn;if(!(vn*vn<1e-12))return[je+(vn=(kn*(rt-Qt)-cn*(je-jt))/vn)*Sn,rt+vn*Yn]}function M(je,rt,pt,It,jt,Qt,fn){var an=je-pt,Sn=rt-It,Yn=(fn?Qt:-Qt)/v(an*an+Sn*Sn),kn=Yn*Sn,cn=-Yn*an,vn=je+kn,hn=rt+cn,Dn=pt+kn,Pn=It+cn,$n=(vn+Dn)/2,rr=(hn+Pn)/2,er=Dn-vn,or=Pn-hn,Zr=er*er+or*or,zr=jt-Qt,pr=vn*Pn-Dn*hn,Br=(or<0?-1:1)*v(a(0,zr*zr*Zr-pr*pr)),fr=(pr*or-er*Br)/Zr,Nr=(-pr*er-or*Br)/Zr,xi=(pr*or+er*Br)/Zr,Qn=(-pr*er+or*Br)/Zr,Er=fr-$n,kr=Nr-rr,sr=xi-$n,ci=Qn-rr;return Er*Er+kr*kr>sr*sr+ci*ci&&(fr=xi,Nr=Qn),{cx:fr,cy:Nr,x01:-kn,y01:-cn,x11:fr*(jt/zr-1),y11:Nr*(jt/zr-1)}}function S(je){this._context=je}function C(je){return new S(je)}function O(je){return je[0]}function I(je){return je[1]}function N(){var je=O,rt=I,pt=T(!0),It=null,jt=C,Qt=null;function fn(an){var Sn,Yn,kn,cn=an.length,vn=!1;for(null==It&&(Qt=jt(kn=b.path())),Sn=0;Sn<=cn;++Sn)!(Sn<cn&&pt(Yn=an[Sn],Sn,an))===vn&&((vn=!vn)?Qt.lineStart():Qt.lineEnd()),vn&&Qt.point(+je(Yn,Sn,an),+rt(Yn,Sn,an));if(kn)return Qt=null,kn+""||null}return fn.x=function(an){return arguments.length?(je="function"==typeof an?an:T(+an),fn):je},fn.y=function(an){return arguments.length?(rt="function"==typeof an?an:T(+an),fn):rt},fn.defined=function(an){return arguments.length?(pt="function"==typeof an?an:T(!!an),fn):pt},fn.curve=function(an){return arguments.length?(jt=an,null!=It&&(Qt=jt(It)),fn):jt},fn.context=function(an){return arguments.length?(null==an?It=Qt=null:Qt=jt(It=an),fn):It},fn}function F(){var je=O,rt=null,pt=T(0),It=I,jt=T(!0),Qt=null,fn=C,an=null;function Sn(kn){var cn,vn,hn,Dn,Pn,$n=kn.length,rr=!1,er=new Array($n),or=new Array($n);for(null==Qt&&(an=fn(Pn=b.path())),cn=0;cn<=$n;++cn){if(!(cn<$n&&jt(Dn=kn[cn],cn,kn))===rr)if(rr=!rr)vn=cn,an.areaStart(),an.lineStart();else{for(an.lineEnd(),an.lineStart(),hn=cn-1;hn>=vn;--hn)an.point(er[hn],or[hn]);an.lineEnd(),an.areaEnd()}rr&&(er[cn]=+je(Dn,cn,kn),or[cn]=+pt(Dn,cn,kn),an.point(rt?+rt(Dn,cn,kn):er[cn],It?+It(Dn,cn,kn):or[cn]))}if(Pn)return an=null,Pn+""||null}function Yn(){return N().defined(jt).curve(fn).context(Qt)}return Sn.x=function(kn){return arguments.length?(je="function"==typeof kn?kn:T(+kn),rt=null,Sn):je},Sn.x0=function(kn){return arguments.length?(je="function"==typeof kn?kn:T(+kn),Sn):je},Sn.x1=function(kn){return arguments.length?(rt=null==kn?null:"function"==typeof kn?kn:T(+kn),Sn):rt},Sn.y=function(kn){return arguments.length?(pt="function"==typeof kn?kn:T(+kn),It=null,Sn):pt},Sn.y0=function(kn){return arguments.length?(pt="function"==typeof kn?kn:T(+kn),Sn):pt},Sn.y1=function(kn){return arguments.length?(It=null==kn?null:"function"==typeof kn?kn:T(+kn),Sn):It},Sn.lineX0=Sn.lineY0=function(){return Yn().x(je).y(pt)},Sn.lineY1=function(){return Yn().x(je).y(It)},Sn.lineX1=function(){return Yn().x(rt).y(pt)},Sn.defined=function(kn){return arguments.length?(jt="function"==typeof kn?kn:T(!!kn),Sn):jt},Sn.curve=function(kn){return arguments.length?(fn=kn,null!=Qt&&(an=fn(Qt)),Sn):fn},Sn.context=function(kn){return arguments.length?(null==kn?Qt=an=null:an=fn(Qt=kn),Sn):Qt},Sn}function L(je,rt){return rt<je?-1:rt>je?1:rt>=je?0:NaN}function P(je){return je}S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(je,rt){switch(je=+je,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(je,rt):this._context.moveTo(je,rt);break;case 1:this._point=2;default:this._context.lineTo(je,rt)}}};var j=$(C);function U(je){this._curve=je}function $(je){function rt(pt){return new U(je(pt))}return rt._curve=je,rt}function X(je){var rt=je.curve;return je.angle=je.x,delete je.x,je.radius=je.y,delete je.y,je.curve=function(pt){return arguments.length?rt($(pt)):rt()._curve},je}function te(){return X(N().curve(j))}function ae(){var je=F().curve(j),rt=je.curve,pt=je.lineX0,It=je.lineX1,jt=je.lineY0,Qt=je.lineY1;return je.angle=je.x,delete je.x,je.startAngle=je.x0,delete je.x0,je.endAngle=je.x1,delete je.x1,je.radius=je.y,delete je.y,je.innerRadius=je.y0,delete je.y0,je.outerRadius=je.y1,delete je.y1,je.lineStartAngle=function(){return X(pt())},delete je.lineX0,je.lineEndAngle=function(){return X(It())},delete je.lineX1,je.lineInnerRadius=function(){return X(jt())},delete je.lineY0,je.lineOuterRadius=function(){return X(Qt())},delete je.lineY1,je.curve=function(fn){return arguments.length?rt($(fn)):rt()._curve},je}function J(je,rt){return[(rt=+rt)*Math.cos(je-=Math.PI/2),rt*Math.sin(je)]}U.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(je,rt){this._curve.point(rt*Math.sin(je),rt*-Math.cos(je))}};var ee=Array.prototype.slice;function se(je){return je.source}function G(je){return je.target}function H(je){var rt=se,pt=G,It=O,jt=I,Qt=null;function fn(){var an,Sn=ee.call(arguments),Yn=rt.apply(this,Sn),kn=pt.apply(this,Sn);if(Qt||(Qt=an=b.path()),je(Qt,+It.apply(this,(Sn[0]=Yn,Sn)),+jt.apply(this,Sn),+It.apply(this,(Sn[0]=kn,Sn)),+jt.apply(this,Sn)),an)return Qt=null,an+""||null}return fn.source=function(an){return arguments.length?(rt=an,fn):rt},fn.target=function(an){return arguments.length?(pt=an,fn):pt},fn.x=function(an){return arguments.length?(It="function"==typeof an?an:T(+an),fn):It},fn.y=function(an){return arguments.length?(jt="function"==typeof an?an:T(+an),fn):jt},fn.context=function(an){return arguments.length?(Qt=null==an?null:an,fn):Qt},fn}function Y(je,rt,pt,It,jt){je.moveTo(rt,pt),je.bezierCurveTo(rt=(rt+It)/2,pt,rt,jt,It,jt)}function oe(je,rt,pt,It,jt){je.moveTo(rt,pt),je.bezierCurveTo(rt,pt=(pt+jt)/2,It,pt,It,jt)}function W(je,rt,pt,It,jt){var Qt=J(rt,pt),fn=J(rt,pt=(pt+jt)/2),an=J(It,pt),Sn=J(It,jt);je.moveTo(Qt[0],Qt[1]),je.bezierCurveTo(fn[0],fn[1],an[0],an[1],Sn[0],Sn[1])}var ne={draw:function(je,rt){var pt=Math.sqrt(rt/h);je.moveTo(pt,0),je.arc(0,0,pt,0,d)}},re={draw:function(je,rt){var pt=Math.sqrt(rt/5)/2;je.moveTo(-3*pt,-pt),je.lineTo(-pt,-pt),je.lineTo(-pt,-3*pt),je.lineTo(pt,-3*pt),je.lineTo(pt,-pt),je.lineTo(3*pt,-pt),je.lineTo(3*pt,pt),je.lineTo(pt,pt),je.lineTo(pt,3*pt),je.lineTo(-pt,3*pt),je.lineTo(-pt,pt),je.lineTo(-3*pt,pt),je.closePath()}},ce=Math.sqrt(1/3),fe=2*ce,me={draw:function(je,rt){var pt=Math.sqrt(rt/fe),It=pt*ce;je.moveTo(0,-pt),je.lineTo(It,0),je.lineTo(0,pt),je.lineTo(-It,0),je.closePath()}},pe=Math.sin(h/10)/Math.sin(7*h/10),we=Math.sin(d/10)*pe,ye=-Math.cos(d/10)*pe,Te={draw:function(je,rt){var pt=Math.sqrt(.8908130915292852*rt),It=we*pt,jt=ye*pt;je.moveTo(0,-pt),je.lineTo(It,jt);for(var Qt=1;Qt<5;++Qt){var fn=d*Qt/5,an=Math.cos(fn),Sn=Math.sin(fn);je.lineTo(Sn*pt,-an*pt),je.lineTo(an*It-Sn*jt,Sn*It+an*jt)}je.closePath()}},Le={draw:function(je,rt){var pt=Math.sqrt(rt),It=-pt/2;je.rect(It,It,pt,pt)}},Oe=Math.sqrt(3),Re={draw:function(je,rt){var pt=-Math.sqrt(rt/(3*Oe));je.moveTo(0,2*pt),je.lineTo(-Oe*pt,-pt),je.lineTo(Oe*pt,-pt),je.closePath()}},Ve=-.5,_e=Math.sqrt(3)/2,Ae=1/Math.sqrt(12),Fe=3*(Ae/2+1),Pe={draw:function(je,rt){var pt=Math.sqrt(rt/Fe),It=pt/2,jt=pt*Ae,Qt=It,fn=pt*Ae+pt,an=-Qt,Sn=fn;je.moveTo(It,jt),je.lineTo(Qt,fn),je.lineTo(an,Sn),je.lineTo(Ve*It-_e*jt,_e*It+Ve*jt),je.lineTo(Ve*Qt-_e*fn,_e*Qt+Ve*fn),je.lineTo(Ve*an-_e*Sn,_e*an+Ve*Sn),je.lineTo(Ve*It+_e*jt,Ve*jt-_e*It),je.lineTo(Ve*Qt+_e*fn,Ve*fn-_e*Qt),je.lineTo(Ve*an+_e*Sn,Ve*Sn-_e*an),je.closePath()}},Be=[ne,re,me,Le,Te,Re,Pe];function qe(){}function We(je,rt,pt){je._context.bezierCurveTo((2*je._x0+je._x1)/3,(2*je._y0+je._y1)/3,(je._x0+2*je._x1)/3,(je._y0+2*je._y1)/3,(je._x0+4*je._x1+rt)/6,(je._y0+4*je._y1+pt)/6)}function Je(je){this._context=je}function ut(je){this._context=je}function Ge(je){this._context=je}function Ke(je,rt){this._basis=new Je(je),this._beta=rt}Je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:We(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(je,rt){switch(je=+je,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(je,rt):this._context.moveTo(je,rt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:We(this,je,rt)}this._x0=this._x1,this._x1=je,this._y0=this._y1,this._y1=rt}},ut.prototype={areaStart:qe,areaEnd:qe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(je,rt){switch(je=+je,rt=+rt,this._point){case 0:this._point=1,this._x2=je,this._y2=rt;break;case 1:this._point=2,this._x3=je,this._y3=rt;break;case 2:this._point=3,this._x4=je,this._y4=rt,this._context.moveTo((this._x0+4*this._x1+je)/6,(this._y0+4*this._y1+rt)/6);break;default:We(this,je,rt)}this._x0=this._x1,this._x1=je,this._y0=this._y1,this._y1=rt}},Ge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(je,rt){switch(je=+je,rt=+rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var pt=(this._x0+4*this._x1+je)/6,It=(this._y0+4*this._y1+rt)/6;this._line?this._context.lineTo(pt,It):this._context.moveTo(pt,It);break;case 3:this._point=4;default:We(this,je,rt)}this._x0=this._x1,this._x1=je,this._y0=this._y1,this._y1=rt}},Ke.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var je=this._x,rt=this._y,pt=je.length-1;if(pt>0)for(var It,jt=je[0],Qt=rt[0],fn=je[pt]-jt,an=rt[pt]-Qt,Sn=-1;++Sn<=pt;)this._basis.point(this._beta*je[Sn]+(1-this._beta)*(jt+(It=Sn/pt)*fn),this._beta*rt[Sn]+(1-this._beta)*(Qt+It*an));this._x=this._y=null,this._basis.lineEnd()},point:function(je,rt){this._x.push(+je),this._y.push(+rt)}};var nt=function je(rt){function pt(It){return 1===rt?new Je(It):new Ke(It,rt)}return pt.beta=function(It){return je(+It)},pt}(.85);function it(je,rt,pt){je._context.bezierCurveTo(je._x1+je._k*(je._x2-je._x0),je._y1+je._k*(je._y2-je._y0),je._x2+je._k*(je._x1-rt),je._y2+je._k*(je._y1-pt),je._x2,je._y2)}function ht(je,rt){this._context=je,this._k=(1-rt)/6}ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:it(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(je,rt){switch(je=+je,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(je,rt):this._context.moveTo(je,rt);break;case 1:this._point=2,this._x1=je,this._y1=rt;break;case 2:this._point=3;default:it(this,je,rt)}this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};var Tt=function je(rt){function pt(It){return new ht(It,rt)}return pt.tension=function(It){return je(+It)},pt}(0);function Ct(je,rt){this._context=je,this._k=(1-rt)/6}Ct.prototype={areaStart:qe,areaEnd:qe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(je,rt){switch(je=+je,rt=+rt,this._point){case 0:this._point=1,this._x3=je,this._y3=rt;break;case 1:this._point=2,this._context.moveTo(this._x4=je,this._y4=rt);break;case 2:this._point=3,this._x5=je,this._y5=rt;break;default:it(this,je,rt)}this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};var Vt=function je(rt){function pt(It){return new Ct(It,rt)}return pt.tension=function(It){return je(+It)},pt}(0);function Ft(je,rt){this._context=je,this._k=(1-rt)/6}Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(je,rt){switch(je=+je,rt=+rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:it(this,je,rt)}this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};var gt=function je(rt){function pt(It){return new Ft(It,rt)}return pt.tension=function(It){return je(+It)},pt}(0);function ft(je,rt,pt){var It=je._x1,jt=je._y1,Qt=je._x2,fn=je._y2;if(je._l01_a>1e-12){var an=2*je._l01_2a+3*je._l01_a*je._l12_a+je._l12_2a,Sn=3*je._l01_a*(je._l01_a+je._l12_a);It=(It*an-je._x0*je._l12_2a+je._x2*je._l01_2a)/Sn,jt=(jt*an-je._y0*je._l12_2a+je._y2*je._l01_2a)/Sn}if(je._l23_a>1e-12){var Yn=2*je._l23_2a+3*je._l23_a*je._l12_a+je._l12_2a,kn=3*je._l23_a*(je._l23_a+je._l12_a);Qt=(Qt*Yn+je._x1*je._l23_2a-rt*je._l12_2a)/kn,fn=(fn*Yn+je._y1*je._l23_2a-pt*je._l12_2a)/kn}je._context.bezierCurveTo(It,jt,Qt,fn,je._x2,je._y2)}function Bt(je,rt){this._context=je,this._alpha=rt}Bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(je,rt){if(je=+je,rt=+rt,this._point){var pt=this._x2-je,It=this._y2-rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(pt*pt+It*It,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(je,rt):this._context.moveTo(je,rt);break;case 1:this._point=2;break;case 2:this._point=3;default:ft(this,je,rt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};var rn=function je(rt){function pt(It){return rt?new Bt(It,rt):new ht(It,0)}return pt.alpha=function(It){return je(+It)},pt}(.5);function un(je,rt){this._context=je,this._alpha=rt}un.prototype={areaStart:qe,areaEnd:qe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(je,rt){if(je=+je,rt=+rt,this._point){var pt=this._x2-je,It=this._y2-rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(pt*pt+It*It,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=je,this._y3=rt;break;case 1:this._point=2,this._context.moveTo(this._x4=je,this._y4=rt);break;case 2:this._point=3,this._x5=je,this._y5=rt;break;default:ft(this,je,rt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};var pn=function je(rt){function pt(It){return rt?new un(It,rt):new Ct(It,0)}return pt.alpha=function(It){return je(+It)},pt}(.5);function dn(je,rt){this._context=je,this._alpha=rt}dn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(je,rt){if(je=+je,rt=+rt,this._point){var pt=this._x2-je,It=this._y2-rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(pt*pt+It*It,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ft(this,je,rt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};var Mn=function je(rt){function pt(It){return rt?new dn(It,rt):new Ft(It,0)}return pt.alpha=function(It){return je(+It)},pt}(.5);function ln(je){this._context=je}function Ee(je){return je<0?-1:1}function De(je,rt,pt){var It=je._x1-je._x0,jt=rt-je._x1,Qt=(je._y1-je._y0)/(It||jt<0&&-0),fn=(pt-je._y1)/(jt||It<0&&-0),an=(Qt*jt+fn*It)/(It+jt);return(Ee(Qt)+Ee(fn))*Math.min(Math.abs(Qt),Math.abs(fn),.5*Math.abs(an))||0}function Ie(je,rt){var pt=je._x1-je._x0;return pt?(3*(je._y1-je._y0)/pt-rt)/2:rt}function He(je,rt,pt){var It=je._x0,Qt=je._x1,fn=je._y1,an=(Qt-It)/3;je._context.bezierCurveTo(It+an,je._y0+an*rt,Qt-an,fn-an*pt,Qt,fn)}function Ye(je){this._context=je}function tt(je){this._context=new ot(je)}function ot(je){this._context=je}function st(je){this._context=je}function bt(je){var rt,pt,It=je.length-1,jt=new Array(It),Qt=new Array(It),fn=new Array(It);for(jt[0]=0,Qt[0]=2,fn[0]=je[0]+2*je[1],rt=1;rt<It-1;++rt)jt[rt]=1,Qt[rt]=4,fn[rt]=4*je[rt]+2*je[rt+1];for(jt[It-1]=2,Qt[It-1]=7,fn[It-1]=8*je[It-1]+je[It],rt=1;rt<It;++rt)Qt[rt]-=pt=jt[rt]/Qt[rt-1],fn[rt]-=pt*fn[rt-1];for(jt[It-1]=fn[It-1]/Qt[It-1],rt=It-2;rt>=0;--rt)jt[rt]=(fn[rt]-jt[rt+1])/Qt[rt];for(Qt[It-1]=(je[It]+jt[It-1])/2,rt=0;rt<It-1;++rt)Qt[rt]=2*je[rt+1]-jt[rt+1];return[jt,Qt]}function wt(je,rt){this._context=je,this._t=rt}function Ut(je,rt){if((jt=je.length)>1)for(var pt,It,jt,Qt=1,fn=je[rt[0]],an=fn.length;Qt<jt;++Qt)for(It=fn,fn=je[rt[Qt]],pt=0;pt<an;++pt)fn[pt][1]+=fn[pt][0]=isNaN(It[pt][1])?It[pt][0]:It[pt][1]}function Kt(je){for(var rt=je.length,pt=new Array(rt);--rt>=0;)pt[rt]=rt;return pt}function vt(je,rt){return je[rt]}function Et(je){var rt=je.map($t);return Kt(je).sort(function(pt,It){return rt[pt]-rt[It]})}function $t(je){for(var rt,pt=-1,It=0,jt=je.length,Qt=-1/0;++pt<jt;)(rt=+je[pt][1])>Qt&&(Qt=rt,It=pt);return It}function Dt(je){var rt=je.map(Pt);return Kt(je).sort(function(pt,It){return rt[pt]-rt[It]})}function Pt(je){for(var rt,pt=0,It=-1,jt=je.length;++It<jt;)(rt=+je[It][1])&&(pt+=rt);return pt}ln.prototype={areaStart:qe,areaEnd:qe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(je,rt){je=+je,rt=+rt,this._point?this._context.lineTo(je,rt):(this._point=1,this._context.moveTo(je,rt))}},Ye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:He(this,this._t0,Ie(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(je,rt){var pt=NaN;if(rt=+rt,(je=+je)!==this._x1||rt!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(je,rt):this._context.moveTo(je,rt);break;case 1:this._point=2;break;case 2:this._point=3,He(this,Ie(this,pt=De(this,je,rt)),pt);break;default:He(this,this._t0,pt=De(this,je,rt))}this._x0=this._x1,this._x1=je,this._y0=this._y1,this._y1=rt,this._t0=pt}}},(tt.prototype=Object.create(Ye.prototype)).point=function(je,rt){Ye.prototype.point.call(this,rt,je)},ot.prototype={moveTo:function(je,rt){this._context.moveTo(rt,je)},closePath:function(){this._context.closePath()},lineTo:function(je,rt){this._context.lineTo(rt,je)},bezierCurveTo:function(je,rt,pt,It,jt,Qt){this._context.bezierCurveTo(rt,je,It,pt,Qt,jt)}},st.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var je=this._x,rt=this._y,pt=je.length;if(pt)if(this._line?this._context.lineTo(je[0],rt[0]):this._context.moveTo(je[0],rt[0]),2===pt)this._context.lineTo(je[1],rt[1]);else for(var It=bt(je),jt=bt(rt),Qt=0,fn=1;fn<pt;++Qt,++fn)this._context.bezierCurveTo(It[0][Qt],jt[0][Qt],It[1][Qt],jt[1][Qt],je[fn],rt[fn]);(this._line||0!==this._line&&1===pt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(je,rt){this._x.push(+je),this._y.push(+rt)}},wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(je,rt){switch(je=+je,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(je,rt):this._context.moveTo(je,rt);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,rt),this._context.lineTo(je,rt);else{var pt=this._x*(1-this._t)+je*this._t;this._context.lineTo(pt,this._y),this._context.lineTo(pt,rt)}}this._x=je,this._y=rt}},y.arc=function(){var je=g,rt=m,pt=T(0),It=null,jt=u,Qt=w,fn=c,an=null;function Sn(){var Yn,kn,cn=+je.apply(this,arguments),vn=+rt.apply(this,arguments),hn=jt.apply(this,arguments)-s,Dn=Qt.apply(this,arguments)-s,Pn=_(Dn-hn),$n=Dn>hn;if(an||(an=Yn=b.path()),vn<cn&&(kn=vn,vn=cn,cn=kn),vn>1e-12)if(Pn>d-1e-12)an.moveTo(vn*o(hn),vn*i(hn)),an.arc(0,0,vn,hn,Dn,!$n),cn>1e-12&&(an.moveTo(cn*o(Dn),cn*i(Dn)),an.arc(0,0,cn,Dn,hn,$n));else{var rr,er,or=hn,Zr=Dn,zr=hn,pr=Dn,Br=Pn,fr=Pn,Nr=fn.apply(this,arguments)/2,xi=Nr>1e-12&&(It?+It.apply(this,arguments):v(cn*cn+vn*vn)),Qn=l(_(vn-cn)/2,+pt.apply(this,arguments)),Er=Qn,kr=Qn;if(xi>1e-12){var sr=f(xi/cn*i(Nr)),ci=f(xi/vn*i(Nr));(Br-=2*sr)>1e-12?(zr+=sr*=$n?1:-1,pr-=sr):(Br=0,zr=pr=(hn+Dn)/2),(fr-=2*ci)>1e-12?(or+=ci*=$n?1:-1,Zr-=ci):(fr=0,or=Zr=(hn+Dn)/2)}var oi=vn*o(or),Or=vn*i(or),Dr=cn*o(pr),wr=cn*i(pr);if(Qn>1e-12){var gn,tr=vn*o(Zr),qt=vn*i(Zr),_n=cn*o(zr),Cn=cn*i(zr);if(Pn<h&&(gn=E(oi,Or,_n,Cn,tr,qt,Dr,wr))){var Jn=oi-gn[0],Xn=Or-gn[1],Hn=tr-gn[0],Bn=qt-gn[1],zn=1/i(p((Jn*Hn+Xn*Bn)/(v(Jn*Jn+Xn*Xn)*v(Hn*Hn+Bn*Bn)))/2),jn=v(gn[0]*gn[0]+gn[1]*gn[1]);Er=l(Qn,(cn-jn)/(zn-1)),kr=l(Qn,(vn-jn)/(zn+1))}}fr>1e-12?kr>1e-12?(rr=M(_n,Cn,oi,Or,vn,kr,$n),er=M(tr,qt,Dr,wr,vn,kr,$n),an.moveTo(rr.cx+rr.x01,rr.cy+rr.y01),kr<Qn?an.arc(rr.cx,rr.cy,kr,e(rr.y01,rr.x01),e(er.y01,er.x01),!$n):(an.arc(rr.cx,rr.cy,kr,e(rr.y01,rr.x01),e(rr.y11,rr.x11),!$n),an.arc(0,0,vn,e(rr.cy+rr.y11,rr.cx+rr.x11),e(er.cy+er.y11,er.cx+er.x11),!$n),an.arc(er.cx,er.cy,kr,e(er.y11,er.x11),e(er.y01,er.x01),!$n))):(an.moveTo(oi,Or),an.arc(0,0,vn,or,Zr,!$n)):an.moveTo(oi,Or),cn>1e-12&&Br>1e-12?Er>1e-12?(rr=M(Dr,wr,tr,qt,cn,-Er,$n),er=M(oi,Or,_n,Cn,cn,-Er,$n),an.lineTo(rr.cx+rr.x01,rr.cy+rr.y01),Er<Qn?an.arc(rr.cx,rr.cy,Er,e(rr.y01,rr.x01),e(er.y01,er.x01),!$n):(an.arc(rr.cx,rr.cy,Er,e(rr.y01,rr.x01),e(rr.y11,rr.x11),!$n),an.arc(0,0,cn,e(rr.cy+rr.y11,rr.cx+rr.x11),e(er.cy+er.y11,er.cx+er.x11),$n),an.arc(er.cx,er.cy,Er,e(er.y11,er.x11),e(er.y01,er.x01),!$n))):an.arc(0,0,cn,pr,zr,$n):an.lineTo(Dr,wr)}else an.moveTo(0,0);if(an.closePath(),Yn)return an=null,Yn+""||null}return Sn.centroid=function(){var Yn=(+je.apply(this,arguments)+ +rt.apply(this,arguments))/2,kn=(+jt.apply(this,arguments)+ +Qt.apply(this,arguments))/2-h/2;return[o(kn)*Yn,i(kn)*Yn]},Sn.innerRadius=function(Yn){return arguments.length?(je="function"==typeof Yn?Yn:T(+Yn),Sn):je},Sn.outerRadius=function(Yn){return arguments.length?(rt="function"==typeof Yn?Yn:T(+Yn),Sn):rt},Sn.cornerRadius=function(Yn){return arguments.length?(pt="function"==typeof Yn?Yn:T(+Yn),Sn):pt},Sn.padRadius=function(Yn){return arguments.length?(It=null==Yn?null:"function"==typeof Yn?Yn:T(+Yn),Sn):It},Sn.startAngle=function(Yn){return arguments.length?(jt="function"==typeof Yn?Yn:T(+Yn),Sn):jt},Sn.endAngle=function(Yn){return arguments.length?(Qt="function"==typeof Yn?Yn:T(+Yn),Sn):Qt},Sn.padAngle=function(Yn){return arguments.length?(fn="function"==typeof Yn?Yn:T(+Yn),Sn):fn},Sn.context=function(Yn){return arguments.length?(an=null==Yn?null:Yn,Sn):an},Sn},y.area=F,y.areaRadial=ae,y.curveBasis=function(je){return new Je(je)},y.curveBasisClosed=function(je){return new ut(je)},y.curveBasisOpen=function(je){return new Ge(je)},y.curveBundle=nt,y.curveCardinal=Tt,y.curveCardinalClosed=Vt,y.curveCardinalOpen=gt,y.curveCatmullRom=rn,y.curveCatmullRomClosed=pn,y.curveCatmullRomOpen=Mn,y.curveLinear=C,y.curveLinearClosed=function(je){return new ln(je)},y.curveMonotoneX=function(je){return new Ye(je)},y.curveMonotoneY=function(je){return new tt(je)},y.curveNatural=function(je){return new st(je)},y.curveStep=function(je){return new wt(je,.5)},y.curveStepAfter=function(je){return new wt(je,1)},y.curveStepBefore=function(je){return new wt(je,0)},y.line=N,y.lineRadial=te,y.linkHorizontal=function(){return H(Y)},y.linkRadial=function(){var je=H(W);return je.angle=je.x,delete je.x,je.radius=je.y,delete je.y,je},y.linkVertical=function(){return H(oe)},y.pie=function(){var je=P,rt=L,pt=null,It=T(0),jt=T(d),Qt=T(0);function fn(an){var Sn,Yn,kn,cn,vn,hn=an.length,Dn=0,Pn=new Array(hn),$n=new Array(hn),rr=+It.apply(this,arguments),er=Math.min(d,Math.max(-d,jt.apply(this,arguments)-rr)),or=Math.min(Math.abs(er)/hn,Qt.apply(this,arguments)),Zr=or*(er<0?-1:1);for(Sn=0;Sn<hn;++Sn)(vn=$n[Pn[Sn]=Sn]=+je(an[Sn],Sn,an))>0&&(Dn+=vn);for(null!=rt?Pn.sort(function(zr,pr){return rt($n[zr],$n[pr])}):null!=pt&&Pn.sort(function(zr,pr){return pt(an[zr],an[pr])}),Sn=0,kn=Dn?(er-hn*Zr)/Dn:0;Sn<hn;++Sn,rr=cn)cn=rr+((vn=$n[Yn=Pn[Sn]])>0?vn*kn:0)+Zr,$n[Yn]={data:an[Yn],index:Sn,value:vn,startAngle:rr,endAngle:cn,padAngle:or};return $n}return fn.value=function(an){return arguments.length?(je="function"==typeof an?an:T(+an),fn):je},fn.sortValues=function(an){return arguments.length?(rt=an,pt=null,fn):rt},fn.sort=function(an){return arguments.length?(pt=an,rt=null,fn):pt},fn.startAngle=function(an){return arguments.length?(It="function"==typeof an?an:T(+an),fn):It},fn.endAngle=function(an){return arguments.length?(jt="function"==typeof an?an:T(+an),fn):jt},fn.padAngle=function(an){return arguments.length?(Qt="function"==typeof an?an:T(+an),fn):Qt},fn},y.pointRadial=J,y.radialArea=ae,y.radialLine=te,y.stack=function(){var je=T([]),rt=Kt,pt=Ut,It=vt;function jt(Qt){var fn,an,Sn=je.apply(this,arguments),Yn=Qt.length,kn=Sn.length,cn=new Array(kn);for(fn=0;fn<kn;++fn){for(var vn,hn=Sn[fn],Dn=cn[fn]=new Array(Yn),Pn=0;Pn<Yn;++Pn)Dn[Pn]=vn=[0,+It(Qt[Pn],hn,Pn,Qt)],vn.data=Qt[Pn];Dn.key=hn}for(fn=0,an=rt(cn);fn<kn;++fn)cn[an[fn]].index=fn;return pt(cn,an),cn}return jt.keys=function(Qt){return arguments.length?(je="function"==typeof Qt?Qt:T(ee.call(Qt)),jt):je},jt.value=function(Qt){return arguments.length?(It="function"==typeof Qt?Qt:T(+Qt),jt):It},jt.order=function(Qt){return arguments.length?(rt=null==Qt?Kt:"function"==typeof Qt?Qt:T(ee.call(Qt)),jt):rt},jt.offset=function(Qt){return arguments.length?(pt=null==Qt?Ut:Qt,jt):pt},jt},y.stackOffsetDiverging=function(je,rt){if((an=je.length)>0)for(var pt,It,jt,Qt,fn,an,Sn=0,Yn=je[rt[0]].length;Sn<Yn;++Sn)for(Qt=fn=0,pt=0;pt<an;++pt)(jt=(It=je[rt[pt]][Sn])[1]-It[0])>0?(It[0]=Qt,It[1]=Qt+=jt):jt<0?(It[1]=fn,It[0]=fn+=jt):(It[0]=0,It[1]=jt)},y.stackOffsetExpand=function(je,rt){if((It=je.length)>0){for(var pt,It,jt,Qt=0,fn=je[0].length;Qt<fn;++Qt){for(jt=pt=0;pt<It;++pt)jt+=je[pt][Qt][1]||0;if(jt)for(pt=0;pt<It;++pt)je[pt][Qt][1]/=jt}Ut(je,rt)}},y.stackOffsetNone=Ut,y.stackOffsetSilhouette=function(je,rt){if((pt=je.length)>0){for(var pt,It=0,jt=je[rt[0]],Qt=jt.length;It<Qt;++It){for(var fn=0,an=0;fn<pt;++fn)an+=je[fn][It][1]||0;jt[It][1]+=jt[It][0]=-an/2}Ut(je,rt)}},y.stackOffsetWiggle=function(je,rt){if((jt=je.length)>0&&(It=(pt=je[rt[0]]).length)>0){for(var pt,It,jt,Qt=0,fn=1;fn<It;++fn){for(var an=0,Sn=0,Yn=0;an<jt;++an){for(var kn=je[rt[an]],cn=kn[fn][1]||0,vn=(cn-(kn[fn-1][1]||0))/2,hn=0;hn<an;++hn){var Dn=je[rt[hn]];vn+=(Dn[fn][1]||0)-(Dn[fn-1][1]||0)}Sn+=cn,Yn+=vn*cn}pt[fn-1][1]+=pt[fn-1][0]=Qt,Sn&&(Qt-=Yn/Sn)}pt[fn-1][1]+=pt[fn-1][0]=Qt,Ut(je,rt)}},y.stackOrderAppearance=Et,y.stackOrderAscending=Dt,y.stackOrderDescending=function(je){return Dt(je).reverse()},y.stackOrderInsideOut=function(je){var rt,pt,It=je.length,jt=je.map(Pt),Qt=Et(je),fn=0,an=0,Sn=[],Yn=[];for(rt=0;rt<It;++rt)pt=Qt[rt],fn<an?(fn+=jt[pt],Sn.push(pt)):(an+=jt[pt],Yn.push(pt));return Yn.reverse().concat(Sn)},y.stackOrderNone=Kt,y.stackOrderReverse=function(je){return Kt(je).reverse()},y.symbol=function(){var je=T(ne),rt=T(64),pt=null;function It(){var jt;if(pt||(pt=jt=b.path()),je.apply(this,arguments).draw(pt,+rt.apply(this,arguments)),jt)return pt=null,jt+""||null}return It.type=function(jt){return arguments.length?(je="function"==typeof jt?jt:T(jt),It):je},It.size=function(jt){return arguments.length?(rt="function"==typeof jt?jt:T(+jt),It):rt},It.context=function(jt){return arguments.length?(pt=null==jt?null:jt,It):pt},It},y.symbolCircle=ne,y.symbolCross=re,y.symbolDiamond=me,y.symbolSquare=Le,y.symbolStar=Te,y.symbolTriangle=Re,y.symbolWye=Pe,y.symbols=Be,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof le&&void 0!==ue?b(le,x("d3-path")):b((y=y||self).d3=y.d3||{},y.d3)},{"d3-path":117}],120:[function(x,ue,le){var y,b;y=this,b=function(y,b){"use strict";function T(gt){if(0<=gt.y&&gt.y<100){var ft=new Date(-1,gt.m,gt.d,gt.H,gt.M,gt.S,gt.L);return ft.setFullYear(gt.y),ft}return new Date(gt.y,gt.m,gt.d,gt.H,gt.M,gt.S,gt.L)}function _(gt){if(0<=gt.y&&gt.y<100){var ft=new Date(Date.UTC(-1,gt.m,gt.d,gt.H,gt.M,gt.S,gt.L));return ft.setUTCFullYear(gt.y),ft}return new Date(Date.UTC(gt.y,gt.m,gt.d,gt.H,gt.M,gt.S,gt.L))}function e(gt,ft,Bt){return{y:gt,m:ft,d:Bt,H:0,M:0,S:0,L:0}}function o(gt){var ft=gt.dateTime,Bt=gt.date,rn=gt.time,un=gt.periods,pn=gt.days,dn=gt.shortDays,Mn=gt.months,ln=gt.shortMonths,Ee=p(un),De=f(un),Ie=p(pn),He=f(pn),Ye=p(dn),tt=f(dn),ot=p(Mn),st=f(Mn),bt=p(ln),wt=f(ln),Ut={a:function(Pt){return dn[Pt.getDay()]},A:function(Pt){return pn[Pt.getDay()]},b:function(Pt){return ln[Pt.getMonth()]},B:function(Pt){return Mn[Pt.getMonth()]},c:null,d:ae,e:ae,f:H,H:J,I:ee,j:se,L:G,m:Y,M:oe,p:function(Pt){return un[+(Pt.getHours()>=12)]},q:function(Pt){return 1+~~(Pt.getMonth()/3)},Q:ht,s:Tt,S:W,u:ne,U:re,V:ce,w:fe,W:me,x:null,X:null,y:pe,Y:we,Z:ye,"%":it},Kt={a:function(Pt){return dn[Pt.getUTCDay()]},A:function(Pt){return pn[Pt.getUTCDay()]},b:function(Pt){return ln[Pt.getUTCMonth()]},B:function(Pt){return Mn[Pt.getUTCMonth()]},c:null,d:Te,e:Te,f:_e,H:Le,I:Oe,j:Re,L:Ve,m:Ae,M:Fe,p:function(Pt){return un[+(Pt.getUTCHours()>=12)]},q:function(Pt){return 1+~~(Pt.getUTCMonth()/3)},Q:ht,s:Tt,S:Pe,u:Be,U:qe,V:We,w:Je,W:ut,x:null,X:null,y:Ge,Y:Ke,Z:nt,"%":it},vt={a:function(Pt,je,rt){var pt=Ye.exec(je.slice(rt));return pt?(Pt.w=tt[pt[0].toLowerCase()],rt+pt[0].length):-1},A:function(Pt,je,rt){var pt=Ie.exec(je.slice(rt));return pt?(Pt.w=He[pt[0].toLowerCase()],rt+pt[0].length):-1},b:function(Pt,je,rt){var pt=bt.exec(je.slice(rt));return pt?(Pt.m=wt[pt[0].toLowerCase()],rt+pt[0].length):-1},B:function(Pt,je,rt){var pt=ot.exec(je.slice(rt));return pt?(Pt.m=st[pt[0].toLowerCase()],rt+pt[0].length):-1},c:function(Pt,je,rt){return Dt(Pt,ft,je,rt)},d:I,e:I,f:U,H:F,I:F,j:N,L:j,m:O,M:L,p:function(Pt,je,rt){var pt=Ee.exec(je.slice(rt));return pt?(Pt.p=De[pt[0].toLowerCase()],rt+pt[0].length):-1},q:C,Q:X,s:te,S:P,u:m,U:u,V:w,w:g,W:c,x:function(Pt,je,rt){return Dt(Pt,Bt,je,rt)},X:function(Pt,je,rt){return Dt(Pt,rn,je,rt)},y:M,Y:E,Z:S,"%":$};function Et(Pt,je){return function(rt){var pt,It,jt,Qt=[],fn=-1,an=0,Sn=Pt.length;for(rt instanceof Date||(rt=new Date(+rt));++fn<Sn;)37===Pt.charCodeAt(fn)&&(Qt.push(Pt.slice(an,fn)),null!=(It=l[pt=Pt.charAt(++fn)])?pt=Pt.charAt(++fn):It="e"===pt?" ":"0",(jt=je[pt])&&(pt=jt(rt,It)),Qt.push(pt),an=fn+1);return Qt.push(Pt.slice(an,fn)),Qt.join("")}}function $t(Pt,je){return function(rt){var pt,It,jt=e(1900,void 0,1);if(Dt(jt,Pt,rt+="",0)!=rt.length)return null;if("Q"in jt)return new Date(jt.Q);if("s"in jt)return new Date(1e3*jt.s+("L"in jt?jt.L:0));if(je&&!("Z"in jt)&&(jt.Z=0),"p"in jt&&(jt.H=jt.H%12+12*jt.p),void 0===jt.m&&(jt.m="q"in jt?jt.q:0),"V"in jt){if(jt.V<1||jt.V>53)return null;"w"in jt||(jt.w=1),"Z"in jt?(It=(pt=_(e(jt.y,0,1))).getUTCDay(),pt=It>4||0===It?b.utcMonday.ceil(pt):b.utcMonday(pt),pt=b.utcDay.offset(pt,7*(jt.V-1)),jt.y=pt.getUTCFullYear(),jt.m=pt.getUTCMonth(),jt.d=pt.getUTCDate()+(jt.w+6)%7):(It=(pt=T(e(jt.y,0,1))).getDay(),pt=It>4||0===It?b.timeMonday.ceil(pt):b.timeMonday(pt),pt=b.timeDay.offset(pt,7*(jt.V-1)),jt.y=pt.getFullYear(),jt.m=pt.getMonth(),jt.d=pt.getDate()+(jt.w+6)%7)}else("W"in jt||"U"in jt)&&("w"in jt||(jt.w="u"in jt?jt.u%7:"W"in jt?1:0),It="Z"in jt?_(e(jt.y,0,1)).getUTCDay():T(e(jt.y,0,1)).getDay(),jt.m=0,jt.d="W"in jt?(jt.w+6)%7+7*jt.W-(It+5)%7:jt.w+7*jt.U-(It+6)%7);return"Z"in jt?(jt.H+=jt.Z/100|0,jt.M+=jt.Z%100,_(jt)):T(jt)}}function Dt(Pt,je,rt,pt){for(var It,jt,Qt=0,fn=je.length,an=rt.length;Qt<fn;){if(pt>=an)return-1;if(37===(It=je.charCodeAt(Qt++))){if(It=je.charAt(Qt++),!(jt=vt[It in l?je.charAt(Qt++):It])||(pt=jt(Pt,rt,pt))<0)return-1}else if(It!=rt.charCodeAt(pt++))return-1}return pt}return Ut.x=Et(Bt,Ut),Ut.X=Et(rn,Ut),Ut.c=Et(ft,Ut),Kt.x=Et(Bt,Kt),Kt.X=Et(rn,Kt),Kt.c=Et(ft,Kt),{format:function(Pt){var je=Et(Pt+="",Ut);return je.toString=function(){return Pt},je},parse:function(Pt){var je=$t(Pt+="",!1);return je.toString=function(){return Pt},je},utcFormat:function(Pt){var je=Et(Pt+="",Kt);return je.toString=function(){return Pt},je},utcParse:function(Pt){var je=$t(Pt+="",!0);return je.toString=function(){return Pt},je}}}var a,l={"-":"",_:" ",0:"0"},i=/^\s*\d+/,v=/^%/,h=/[\\^$*+?|[\]().{}]/g;function s(gt,ft,Bt){var rn=gt<0?"-":"",un=(rn?-gt:gt)+"",pn=un.length;return rn+(pn<Bt?new Array(Bt-pn+1).join(ft)+un:un)}function d(gt){return gt.replace(h,"\\$&")}function p(gt){return new RegExp("^(?:"+gt.map(d).join("|")+")","i")}function f(gt){for(var ft={},Bt=-1,rn=gt.length;++Bt<rn;)ft[gt[Bt].toLowerCase()]=Bt;return ft}function g(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+1));return rn?(gt.w=+rn[0],Bt+rn[0].length):-1}function m(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+1));return rn?(gt.u=+rn[0],Bt+rn[0].length):-1}function u(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+2));return rn?(gt.U=+rn[0],Bt+rn[0].length):-1}function w(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+2));return rn?(gt.V=+rn[0],Bt+rn[0].length):-1}function c(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+2));return rn?(gt.W=+rn[0],Bt+rn[0].length):-1}function E(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+4));return rn?(gt.y=+rn[0],Bt+rn[0].length):-1}function M(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+2));return rn?(gt.y=+rn[0]+(+rn[0]>68?1900:2e3),Bt+rn[0].length):-1}function S(gt,ft,Bt){var rn=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ft.slice(Bt,Bt+6));return rn?(gt.Z=rn[1]?0:-(rn[2]+(rn[3]||"00")),Bt+rn[0].length):-1}function C(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+1));return rn?(gt.q=3*rn[0]-3,Bt+rn[0].length):-1}function O(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+2));return rn?(gt.m=rn[0]-1,Bt+rn[0].length):-1}function I(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+2));return rn?(gt.d=+rn[0],Bt+rn[0].length):-1}function N(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+3));return rn?(gt.m=0,gt.d=+rn[0],Bt+rn[0].length):-1}function F(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+2));return rn?(gt.H=+rn[0],Bt+rn[0].length):-1}function L(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+2));return rn?(gt.M=+rn[0],Bt+rn[0].length):-1}function P(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+2));return rn?(gt.S=+rn[0],Bt+rn[0].length):-1}function j(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+3));return rn?(gt.L=+rn[0],Bt+rn[0].length):-1}function U(gt,ft,Bt){var rn=i.exec(ft.slice(Bt,Bt+6));return rn?(gt.L=Math.floor(rn[0]/1e3),Bt+rn[0].length):-1}function $(gt,ft,Bt){var rn=v.exec(ft.slice(Bt,Bt+1));return rn?Bt+rn[0].length:-1}function X(gt,ft,Bt){var rn=i.exec(ft.slice(Bt));return rn?(gt.Q=+rn[0],Bt+rn[0].length):-1}function te(gt,ft,Bt){var rn=i.exec(ft.slice(Bt));return rn?(gt.s=+rn[0],Bt+rn[0].length):-1}function ae(gt,ft){return s(gt.getDate(),ft,2)}function J(gt,ft){return s(gt.getHours(),ft,2)}function ee(gt,ft){return s(gt.getHours()%12||12,ft,2)}function se(gt,ft){return s(1+b.timeDay.count(b.timeYear(gt),gt),ft,3)}function G(gt,ft){return s(gt.getMilliseconds(),ft,3)}function H(gt,ft){return G(gt,ft)+"000"}function Y(gt,ft){return s(gt.getMonth()+1,ft,2)}function oe(gt,ft){return s(gt.getMinutes(),ft,2)}function W(gt,ft){return s(gt.getSeconds(),ft,2)}function ne(gt){var ft=gt.getDay();return 0===ft?7:ft}function re(gt,ft){return s(b.timeSunday.count(b.timeYear(gt)-1,gt),ft,2)}function ce(gt,ft){var Bt=gt.getDay();return gt=Bt>=4||0===Bt?b.timeThursday(gt):b.timeThursday.ceil(gt),s(b.timeThursday.count(b.timeYear(gt),gt)+(4===b.timeYear(gt).getDay()),ft,2)}function fe(gt){return gt.getDay()}function me(gt,ft){return s(b.timeMonday.count(b.timeYear(gt)-1,gt),ft,2)}function pe(gt,ft){return s(gt.getFullYear()%100,ft,2)}function we(gt,ft){return s(gt.getFullYear()%1e4,ft,4)}function ye(gt){var ft=gt.getTimezoneOffset();return(ft>0?"-":(ft*=-1,"+"))+s(ft/60|0,"0",2)+s(ft%60,"0",2)}function Te(gt,ft){return s(gt.getUTCDate(),ft,2)}function Le(gt,ft){return s(gt.getUTCHours(),ft,2)}function Oe(gt,ft){return s(gt.getUTCHours()%12||12,ft,2)}function Re(gt,ft){return s(1+b.utcDay.count(b.utcYear(gt),gt),ft,3)}function Ve(gt,ft){return s(gt.getUTCMilliseconds(),ft,3)}function _e(gt,ft){return Ve(gt,ft)+"000"}function Ae(gt,ft){return s(gt.getUTCMonth()+1,ft,2)}function Fe(gt,ft){return s(gt.getUTCMinutes(),ft,2)}function Pe(gt,ft){return s(gt.getUTCSeconds(),ft,2)}function Be(gt){var ft=gt.getUTCDay();return 0===ft?7:ft}function qe(gt,ft){return s(b.utcSunday.count(b.utcYear(gt)-1,gt),ft,2)}function We(gt,ft){var Bt=gt.getUTCDay();return gt=Bt>=4||0===Bt?b.utcThursday(gt):b.utcThursday.ceil(gt),s(b.utcThursday.count(b.utcYear(gt),gt)+(4===b.utcYear(gt).getUTCDay()),ft,2)}function Je(gt){return gt.getUTCDay()}function ut(gt,ft){return s(b.utcMonday.count(b.utcYear(gt)-1,gt),ft,2)}function Ge(gt,ft){return s(gt.getUTCFullYear()%100,ft,2)}function Ke(gt,ft){return s(gt.getUTCFullYear()%1e4,ft,4)}function nt(){return"+0000"}function it(){return"%"}function ht(gt){return+gt}function Tt(gt){return Math.floor(+gt/1e3)}function Ct(gt){return a=o(gt),y.timeFormat=a.format,y.timeParse=a.parse,y.utcFormat=a.utcFormat,y.utcParse=a.utcParse,a}Ct({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Vt=Date.prototype.toISOString?function(gt){return gt.toISOString()}:y.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Ft=+new Date("2000-01-01T00:00:00.000Z")?function(gt){var ft=new Date(gt);return isNaN(ft)?null:ft}:y.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");y.isoFormat=Vt,y.isoParse=Ft,y.timeFormatDefaultLocale=Ct,y.timeFormatLocale=o,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof le&&void 0!==ue?b(le,x("d3-time")):b((y=y||self).d3=y.d3||{},y.d3)},{"d3-time":121}],121:[function(x,ue,le){var y,b;y=this,b=function(y){"use strict";var b=new Date,T=new Date;function _(Ae,Fe,Pe,Be){function qe(We){return Ae(We=0===arguments.length?new Date:new Date(+We)),We}return qe.floor=function(We){return Ae(We=new Date(+We)),We},qe.ceil=function(We){return Ae(We=new Date(We-1)),Fe(We,1),Ae(We),We},qe.round=function(We){var Je=qe(We),ut=qe.ceil(We);return We-Je<ut-We?Je:ut},qe.offset=function(We,Je){return Fe(We=new Date(+We),null==Je?1:Math.floor(Je)),We},qe.range=function(We,Je,ut){var Ge,Ke=[];if(We=qe.ceil(We),ut=null==ut?1:Math.floor(ut),!(We<Je&&ut>0))return Ke;do{Ke.push(Ge=new Date(+We)),Fe(We,ut),Ae(We)}while(Ge<We&&We<Je);return Ke},qe.filter=function(We){return _(function(Je){if(Je>=Je)for(;Ae(Je),!We(Je);)Je.setTime(Je-1)},function(Je,ut){if(Je>=Je)if(ut<0)for(;++ut<=0;)for(;Fe(Je,-1),!We(Je););else for(;--ut>=0;)for(;Fe(Je,1),!We(Je););})},Pe&&(qe.count=function(We,Je){return b.setTime(+We),T.setTime(+Je),Ae(b),Ae(T),Math.floor(Pe(b,T))},qe.every=function(We){return We=Math.floor(We),isFinite(We)&&We>0?We>1?qe.filter(Be?function(Je){return Be(Je)%We==0}:function(Je){return qe.count(0,Je)%We==0}):qe:null}),qe}var e=_(function(){},function(Ae,Fe){Ae.setTime(+Ae+Fe)},function(Ae,Fe){return Fe-Ae});e.every=function(Ae){return Ae=Math.floor(Ae),isFinite(Ae)&&Ae>0?Ae>1?_(function(Fe){Fe.setTime(Math.floor(Fe/Ae)*Ae)},function(Fe,Pe){Fe.setTime(+Fe+Pe*Ae)},function(Fe,Pe){return(Pe-Fe)/Ae}):e:null};var o=e.range,a=_(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds())},function(Ae,Fe){Ae.setTime(+Ae+1e3*Fe)},function(Ae,Fe){return(Fe-Ae)/1e3},function(Ae){return Ae.getUTCSeconds()}),l=a.range,i=_(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-1e3*Ae.getSeconds())},function(Ae,Fe){Ae.setTime(+Ae+6e4*Fe)},function(Ae,Fe){return(Fe-Ae)/6e4},function(Ae){return Ae.getMinutes()}),v=i.range,h=_(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-1e3*Ae.getSeconds()-6e4*Ae.getMinutes())},function(Ae,Fe){Ae.setTime(+Ae+36e5*Fe)},function(Ae,Fe){return(Fe-Ae)/36e5},function(Ae){return Ae.getHours()}),s=h.range,d=_(function(Ae){Ae.setHours(0,0,0,0)},function(Ae,Fe){Ae.setDate(Ae.getDate()+Fe)},function(Ae,Fe){return(Fe-Ae-6e4*(Fe.getTimezoneOffset()-Ae.getTimezoneOffset()))/864e5},function(Ae){return Ae.getDate()-1}),p=d.range;function f(Ae){return _(function(Fe){Fe.setDate(Fe.getDate()-(Fe.getDay()+7-Ae)%7),Fe.setHours(0,0,0,0)},function(Fe,Pe){Fe.setDate(Fe.getDate()+7*Pe)},function(Fe,Pe){return(Pe-Fe-6e4*(Pe.getTimezoneOffset()-Fe.getTimezoneOffset()))/6048e5})}var g=f(0),m=f(1),u=f(2),w=f(3),c=f(4),E=f(5),M=f(6),S=g.range,C=m.range,O=u.range,I=w.range,N=c.range,F=E.range,L=M.range,P=_(function(Ae){Ae.setDate(1),Ae.setHours(0,0,0,0)},function(Ae,Fe){Ae.setMonth(Ae.getMonth()+Fe)},function(Ae,Fe){return Fe.getMonth()-Ae.getMonth()+12*(Fe.getFullYear()-Ae.getFullYear())},function(Ae){return Ae.getMonth()}),j=P.range,U=_(function(Ae){Ae.setMonth(0,1),Ae.setHours(0,0,0,0)},function(Ae,Fe){Ae.setFullYear(Ae.getFullYear()+Fe)},function(Ae,Fe){return Fe.getFullYear()-Ae.getFullYear()},function(Ae){return Ae.getFullYear()});U.every=function(Ae){return isFinite(Ae=Math.floor(Ae))&&Ae>0?_(function(Fe){Fe.setFullYear(Math.floor(Fe.getFullYear()/Ae)*Ae),Fe.setMonth(0,1),Fe.setHours(0,0,0,0)},function(Fe,Pe){Fe.setFullYear(Fe.getFullYear()+Pe*Ae)}):null};var $=U.range,X=_(function(Ae){Ae.setUTCSeconds(0,0)},function(Ae,Fe){Ae.setTime(+Ae+6e4*Fe)},function(Ae,Fe){return(Fe-Ae)/6e4},function(Ae){return Ae.getUTCMinutes()}),te=X.range,ae=_(function(Ae){Ae.setUTCMinutes(0,0,0)},function(Ae,Fe){Ae.setTime(+Ae+36e5*Fe)},function(Ae,Fe){return(Fe-Ae)/36e5},function(Ae){return Ae.getUTCHours()}),J=ae.range,ee=_(function(Ae){Ae.setUTCHours(0,0,0,0)},function(Ae,Fe){Ae.setUTCDate(Ae.getUTCDate()+Fe)},function(Ae,Fe){return(Fe-Ae)/864e5},function(Ae){return Ae.getUTCDate()-1}),se=ee.range;function G(Ae){return _(function(Fe){Fe.setUTCDate(Fe.getUTCDate()-(Fe.getUTCDay()+7-Ae)%7),Fe.setUTCHours(0,0,0,0)},function(Fe,Pe){Fe.setUTCDate(Fe.getUTCDate()+7*Pe)},function(Fe,Pe){return(Pe-Fe)/6048e5})}var H=G(0),Y=G(1),oe=G(2),W=G(3),ne=G(4),re=G(5),ce=G(6),fe=H.range,me=Y.range,pe=oe.range,we=W.range,ye=ne.range,Te=re.range,Le=ce.range,Oe=_(function(Ae){Ae.setUTCDate(1),Ae.setUTCHours(0,0,0,0)},function(Ae,Fe){Ae.setUTCMonth(Ae.getUTCMonth()+Fe)},function(Ae,Fe){return Fe.getUTCMonth()-Ae.getUTCMonth()+12*(Fe.getUTCFullYear()-Ae.getUTCFullYear())},function(Ae){return Ae.getUTCMonth()}),Re=Oe.range,Ve=_(function(Ae){Ae.setUTCMonth(0,1),Ae.setUTCHours(0,0,0,0)},function(Ae,Fe){Ae.setUTCFullYear(Ae.getUTCFullYear()+Fe)},function(Ae,Fe){return Fe.getUTCFullYear()-Ae.getUTCFullYear()},function(Ae){return Ae.getUTCFullYear()});Ve.every=function(Ae){return isFinite(Ae=Math.floor(Ae))&&Ae>0?_(function(Fe){Fe.setUTCFullYear(Math.floor(Fe.getUTCFullYear()/Ae)*Ae),Fe.setUTCMonth(0,1),Fe.setUTCHours(0,0,0,0)},function(Fe,Pe){Fe.setUTCFullYear(Fe.getUTCFullYear()+Pe*Ae)}):null};var _e=Ve.range;y.timeDay=d,y.timeDays=p,y.timeFriday=E,y.timeFridays=F,y.timeHour=h,y.timeHours=s,y.timeInterval=_,y.timeMillisecond=e,y.timeMilliseconds=o,y.timeMinute=i,y.timeMinutes=v,y.timeMonday=m,y.timeMondays=C,y.timeMonth=P,y.timeMonths=j,y.timeSaturday=M,y.timeSaturdays=L,y.timeSecond=a,y.timeSeconds=l,y.timeSunday=g,y.timeSundays=S,y.timeThursday=c,y.timeThursdays=N,y.timeTuesday=u,y.timeTuesdays=O,y.timeWednesday=w,y.timeWednesdays=I,y.timeWeek=g,y.timeWeeks=S,y.timeYear=U,y.timeYears=$,y.utcDay=ee,y.utcDays=se,y.utcFriday=re,y.utcFridays=Te,y.utcHour=ae,y.utcHours=J,y.utcMillisecond=e,y.utcMilliseconds=o,y.utcMinute=X,y.utcMinutes=te,y.utcMonday=Y,y.utcMondays=me,y.utcMonth=Oe,y.utcMonths=Re,y.utcSaturday=ce,y.utcSaturdays=Le,y.utcSecond=a,y.utcSeconds=l,y.utcSunday=H,y.utcSundays=fe,y.utcThursday=ne,y.utcThursdays=ye,y.utcTuesday=oe,y.utcTuesdays=pe,y.utcWednesday=W,y.utcWednesdays=we,y.utcWeek=H,y.utcWeeks=fe,y.utcYear=Ve,y.utcYears=_e,Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:(y=y||self).d3=y.d3||{})},{}],122:[function(x,ue,le){arguments[4][121][0].apply(le,arguments)},{dup:121}],123:[function(x,ue,le){var y,b;y=this,b=function(y){"use strict";var b,T,_=0,e=0,o=0,a=0,l=0,i=0,v="object"==typeof performance&&performance.now?performance:Date,h="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(c){setTimeout(c,17)};function s(){return l||(h(d),l=v.now()+i)}function d(){l=0}function p(){this._call=this._time=this._next=null}function f(c,E,M){var S=new p;return S.restart(c,E,M),S}function g(){s(),++_;for(var c,E=b;E;)(c=l-E._time)>=0&&E._call.call(null,c),E=E._next;--_}function m(){l=(a=v.now())+i,_=e=0;try{g()}finally{_=0,function(){for(var c,E,M=b,S=1/0;M;)M._call?(S>M._time&&(S=M._time),c=M,M=M._next):(E=M._next,M._next=null,M=c?c._next=E:b=E);T=c,w(S)}(),l=0}}function u(){var c=v.now(),E=c-a;E>1e3&&(i-=E,a=c)}function w(c){_||(e&&(e=clearTimeout(e)),c-l>24?(c<1/0&&(e=setTimeout(m,c-v.now()-i)),o&&(o=clearInterval(o))):(o||(a=v.now(),o=setInterval(u,1e3)),_=1,h(m)))}p.prototype=f.prototype={constructor:p,restart:function(c,E,M){if("function"!=typeof c)throw new TypeError("callback is not a function");M=(null==M?s():+M)+(null==E?0:+E),this._next||T===this||(T?T._next=this:b=this,T=this),this._call=c,this._time=M,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}},y.interval=function(c,E,M){var S=new p,C=E;return null==E?(S.restart(c,E,M),S):(E=+E,M=null==M?s():+M,S.restart(function O(I){I+=C,S.restart(O,C+=E,M),c(I)},E,M),S)},y.now=s,y.timeout=function(c,E,M){var S=new p;return S.restart(function(C){S.stop(),c(C+E)},E=null==E?0:+E,M),S},y.timer=f,y.timerFlush=g,Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:(y=y||self).d3=y.d3||{})},{}],124:[function(x,ue,le){ue.exports=function(){for(var y=0;y<arguments.length;y++)if(void 0!==arguments[y])return arguments[y]}},{}],125:[function(x,ue,le){"use strict";ue.exports=T;var y=(T.canvas=document.createElement("canvas")).getContext("2d"),b=_([32,126]);function T(e,o){Array.isArray(e)&&(e=e.join(", "));var a,l={},i=16,v=.05;o&&(2===o.length&&"number"==typeof o[0]?a=_(o):Array.isArray(o)?a=o:(o.o?a=_(o.o):o.pairs&&(a=o.pairs),o.fontSize&&(i=o.fontSize),null!=o.threshold&&(v=o.threshold))),a||(a=b),y.font=i+"px "+e;for(var h=0;h<a.length;h++){var s=a[h],d=y.measureText(s[0]).width+y.measureText(s[1]).width,p=y.measureText(s).width;Math.abs(d-p)>i*v&&(l[s]=(p-d)/i*1e3)}return l}function _(e){for(var o=[],a=e[0];a<=e[1];a++)for(var l=String.fromCharCode(a),i=e[0];i<e[1];i++){var v=l+String.fromCharCode(i);o.push(v)}return o}T.createPairs=_,T.ascii=b},{}],126:[function(x,ue,le){var y=x("abs-svg-path"),b=x("normalize-svg-path"),T={M:"moveTo",C:"bezierCurveTo"};ue.exports=function(_,e){_.beginPath(),b(y(e)).forEach(function(o){var a=o[0],l=o.slice(1);_[T[a]].apply(_,l)}),_.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(x,ue,le){ue.exports=function(y){switch(y){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(x,ue,le){"use strict";ue.exports=function(y,b){switch(void 0===b&&(b=0),typeof y){case"number":if(y>0)return function(T,_){var e,o;for(e=new Array(T),o=0;o<T;++o)e[o]=_;return e}(0|y,b);break;case"object":if("number"==typeof y.length)return function T(_,e,o){var a=0|_[o];if(a<=0)return[];var l,i=new Array(a);if(o===_.length-1)for(l=0;l<a;++l)i[l]=e;else for(l=0;l<a;++l)i[l]=T(_,e,o+1);return i}(y,b,0)}return[]}},{}],129:[function(x,ue,le){"use strict";function y(N,F,L){L=L||2;var P,j,U,$,X,te,ae,J=F&&F.length,ee=J?F[0]*L:N.length,se=b(N,0,ee,L,!0),G=[];if(!se||se.next===se.prev)return G;if(J&&(se=function(Y,oe,W,ne){var re,ce,pe,we=[];for(re=0,ce=oe.length;re<ce;re++)(pe=b(Y,oe[re]*ne,re<ce-1?oe[re+1]*ne:Y.length,ne,!1))===pe.next&&(pe.steiner=!0),we.push(d(pe));for(we.sort(i),re=0;re<we.length;re++)v(we[re],W),W=T(W,W.next);return W}(N,F,se,L)),N.length>80*L){P=U=N[0],j=$=N[1];for(var H=L;H<ee;H+=L)(X=N[H])<P&&(P=X),(te=N[H+1])<j&&(j=te),X>U&&(U=X),te>$&&($=te);ae=0!==(ae=Math.max(U-P,$-j))?1/ae:0}return _(se,G,L,P,j,ae),G}function b(N,F,L,P,j){var U,$;if(j===I(N,F,L,P)>0)for(U=F;U<L;U+=P)$=S(U,N[U],N[U+1],$);else for(U=L-P;U>=F;U-=P)$=S(U,N[U],N[U+1],$);return $&&m($,$.next)&&(C($),$=$.next),$}function T(N,F){if(!N)return N;F||(F=N);var L,P=N;do{if(L=!1,P.steiner||!m(P,P.next)&&0!==g(P.prev,P,P.next))P=P.next;else{if(C(P),(P=F=P.prev)===P.next)break;L=!0}}while(L||P!==F);return F}function _(N,F,L,P,j,U,$){if(N){!$&&U&&function(J,ee,se,G){var H=J;do{null===H.z&&(H.z=s(H.x,H.y,ee,se,G)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next}while(H!==J);H.prevZ.nextZ=null,H.prevZ=null,function(Y){var oe,W,ne,re,ce,fe,me,pe,we=1;do{for(W=Y,Y=null,ce=null,fe=0;W;){for(fe++,ne=W,me=0,oe=0;oe<we&&(me++,ne=ne.nextZ);oe++);for(pe=we;me>0||pe>0&&ne;)0!==me&&(0===pe||!ne||W.z<=ne.z)?(re=W,W=W.nextZ,me--):(re=ne,ne=ne.nextZ,pe--),ce?ce.nextZ=re:Y=re,re.prevZ=ce,ce=re;W=ne}ce.nextZ=null,we*=2}while(fe>1)}(H)}(N,P,j,U);for(var X,te,ae=N;N.prev!==N.next;)if(X=N.prev,te=N.next,U?o(N,P,j,U):e(N))F.push(X.i/L),F.push(N.i/L),F.push(te.i/L),C(N),N=te.next,ae=te.next;else if((N=te)===ae){$?1===$?_(N=a(T(N),F,L),F,L,P,j,U,2):2===$&&l(N,F,L,P,j,U):_(T(N),F,L,P,j,U,1);break}}}function e(N){var F=N.prev,L=N,P=N.next;if(g(F,L,P)>=0)return!1;for(var j=N.next.next;j!==N.prev;){if(p(F.x,F.y,L.x,L.y,P.x,P.y,j.x,j.y)&&g(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function o(N,F,L,P){var j=N.prev,U=N,$=N.next;if(g(j,U,$)>=0)return!1;for(var ae=j.x>U.x?j.x>$.x?j.x:$.x:U.x>$.x?U.x:$.x,J=j.y>U.y?j.y>$.y?j.y:$.y:U.y>$.y?U.y:$.y,ee=s(j.x<U.x?j.x<$.x?j.x:$.x:U.x<$.x?U.x:$.x,j.y<U.y?j.y<$.y?j.y:$.y:U.y<$.y?U.y:$.y,F,L,P),se=s(ae,J,F,L,P),G=N.prevZ,H=N.nextZ;G&&G.z>=ee&&H&&H.z<=se;){if(G!==N.prev&&G!==N.next&&p(j.x,j.y,U.x,U.y,$.x,$.y,G.x,G.y)&&g(G.prev,G,G.next)>=0||(G=G.prevZ,H!==N.prev&&H!==N.next&&p(j.x,j.y,U.x,U.y,$.x,$.y,H.x,H.y)&&g(H.prev,H,H.next)>=0))return!1;H=H.nextZ}for(;G&&G.z>=ee;){if(G!==N.prev&&G!==N.next&&p(j.x,j.y,U.x,U.y,$.x,$.y,G.x,G.y)&&g(G.prev,G,G.next)>=0)return!1;G=G.prevZ}for(;H&&H.z<=se;){if(H!==N.prev&&H!==N.next&&p(j.x,j.y,U.x,U.y,$.x,$.y,H.x,H.y)&&g(H.prev,H,H.next)>=0)return!1;H=H.nextZ}return!0}function a(N,F,L){var P=N;do{var j=P.prev,U=P.next.next;!m(j,U)&&u(j,P,P.next,U)&&E(j,U)&&E(U,j)&&(F.push(j.i/L),F.push(P.i/L),F.push(U.i/L),C(P),C(P.next),P=N=U),P=P.next}while(P!==N);return T(P)}function l(N,F,L,P,j,U){var $=N;do{for(var X=$.next.next;X!==$.prev;){if($.i!==X.i&&f($,X)){var te=M($,X);return $=T($,$.next),te=T(te,te.next),_($,F,L,P,j,U),void _(te,F,L,P,j,U)}X=X.next}$=$.next}while($!==N)}function i(N,F){return N.x-F.x}function v(N,F){if(F=function(P,j){var U,$=j,X=P.x,te=P.y,ae=-1/0;do{if(te<=$.y&&te>=$.next.y&&$.next.y!==$.y){var J=$.x+(te-$.y)*($.next.x-$.x)/($.next.y-$.y);if(J<=X&&J>ae){if(ae=J,J===X){if(te===$.y)return $;if(te===$.next.y)return $.next}U=$.x<$.next.x?$:$.next}}$=$.next}while($!==j);if(!U)return null;if(X===ae)return U;var ee,se=U,G=U.x,H=U.y,Y=1/0;$=U;do{X>=$.x&&$.x>=G&&X!==$.x&&p(te<H?X:ae,te,G,H,te<H?ae:X,te,$.x,$.y)&&(ee=Math.abs(te-$.y)/(X-$.x),E($,P)&&(ee<Y||ee===Y&&($.x>U.x||$.x===U.x&&h(U,$)))&&(U=$,Y=ee)),$=$.next}while($!==se);return U}(N,F)){var L=M(F,N);T(F,F.next),T(L,L.next)}}function h(N,F){return g(N.prev,N,F.prev)<0&&g(F.next,N,N.next)<0}function s(N,F,L,P,j){return(N=1431655765&((N=858993459&((N=252645135&((N=16711935&((N=32767*(N-L)*j)|N<<8))|N<<4))|N<<2))|N<<1))|(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=32767*(F-P)*j)|F<<8))|F<<4))|F<<2))|F<<1))<<1}function d(N){var F=N,L=N;do{(F.x<L.x||F.x===L.x&&F.y<L.y)&&(L=F),F=F.next}while(F!==N);return L}function p(N,F,L,P,j,U,$,X){return(j-$)*(F-X)-(N-$)*(U-X)>=0&&(N-$)*(P-X)-(L-$)*(F-X)>=0&&(L-$)*(U-X)-(j-$)*(P-X)>=0}function f(N,F){return N.next.i!==F.i&&N.prev.i!==F.i&&!function(L,P){var j=L;do{if(j.i!==L.i&&j.next.i!==L.i&&j.i!==P.i&&j.next.i!==P.i&&u(j,j.next,L,P))return!0;j=j.next}while(j!==L);return!1}(N,F)&&(E(N,F)&&E(F,N)&&function(L,P){var j=L,U=!1,$=(L.x+P.x)/2,X=(L.y+P.y)/2;do{j.y>X!=j.next.y>X&&j.next.y!==j.y&&$<(j.next.x-j.x)*(X-j.y)/(j.next.y-j.y)+j.x&&(U=!U),j=j.next}while(j!==L);return U}(N,F)&&(g(N.prev,N,F.prev)||g(N,F.prev,F))||m(N,F)&&g(N.prev,N,N.next)>0&&g(F.prev,F,F.next)>0)}function g(N,F,L){return(F.y-N.y)*(L.x-F.x)-(F.x-N.x)*(L.y-F.y)}function m(N,F){return N.x===F.x&&N.y===F.y}function u(N,F,L,P){var j=c(g(N,F,L)),U=c(g(N,F,P)),$=c(g(L,P,N)),X=c(g(L,P,F));return j!==U&&$!==X||!(0!==j||!w(N,L,F))||!(0!==U||!w(N,P,F))||!(0!==$||!w(L,N,P))||!(0!==X||!w(L,F,P))}function w(N,F,L){return F.x<=Math.max(N.x,L.x)&&F.x>=Math.min(N.x,L.x)&&F.y<=Math.max(N.y,L.y)&&F.y>=Math.min(N.y,L.y)}function c(N){return N>0?1:N<0?-1:0}function E(N,F){return g(N.prev,N,N.next)<0?g(N,F,N.next)>=0&&g(N,N.prev,F)>=0:g(N,F,N.prev)<0||g(N,N.next,F)<0}function M(N,F){var L=new O(N.i,N.x,N.y),P=new O(F.i,F.x,F.y),j=N.next,U=F.prev;return N.next=F,F.prev=N,L.next=j,j.prev=L,P.next=L,L.prev=P,U.next=P,P.prev=U,P}function S(N,F,L,P){var j=new O(N,F,L);return P?(j.next=P.next,j.prev=P,P.next.prev=j,P.next=j):(j.prev=j,j.next=j),j}function C(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function O(N,F,L){this.i=N,this.x=F,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(N,F,L,P){for(var j=0,U=F,$=L-P;U<L;U+=P)j+=(N[$]-N[U])*(N[U+1]+N[$+1]),$=U;return j}ue.exports=y,ue.exports.default=y,y.deviation=function(N,F,L,P){var j=F&&F.length,$=Math.abs(I(N,0,j?F[0]*L:N.length,L));if(j)for(var X=0,te=F.length;X<te;X++)$-=Math.abs(I(N,F[X]*L,X<te-1?F[X+1]*L:N.length,L));var ee=0;for(X=0;X<P.length;X+=3){var se=P[X]*L,G=P[X+1]*L,H=P[X+2]*L;ee+=Math.abs((N[se]-N[H])*(N[G+1]-N[se+1])-(N[se]-N[G])*(N[H+1]-N[se+1]))}return 0===$&&0===ee?0:Math.abs((ee-$)/$)},y.flatten=function(N){for(var F=N[0][0].length,L={vertices:[],holes:[],dimensions:F},P=0,j=0;j<N.length;j++){for(var U=0;U<N[j].length;U++)for(var $=0;$<F;$++)L.vertices.push(N[j][U][$]);j>0&&L.holes.push(P+=N[j-1].length)}return L}},{}],130:[function(x,ue,le){var y=x("strongly-connected-components");ue.exports=function(b,T){var _,e=[],o=[],a=[],l={},i=[];function v(u){var w,c,E=!1;for(o.push(u),a[u]=!0,w=0;w<i[u].length;w++)(c=i[u][w])===_?(h(_,o),E=!0):a[c]||(E=v(c));if(E)!function S(C){a[C]=!1,l.hasOwnProperty(C)&&Object.keys(l[C]).forEach(function(O){delete l[C][O],a[O]&&S(O)})}(u);else for(w=0;w<i[u].length;w++){var M=l[c=i[u][w]];M||(l[c]=M={}),M[c]=!0}return o.pop(),E}function h(u,w){var c=[].concat(w).concat(u);T?T(v):e.push(c)}function s(u){!function(O){for(var I=0;I<b.length;I++)I<O&&(b[I]=[]),b[I]=b[I].filter(function(N){return N>=O})}(u);for(var w,c=y(b).components.filter(function(O){return O.length>1}),E=1/0,M=0;M<c.length;M++)for(var S=0;S<c[M].length;S++)c[M][S]<E&&(E=c[M][S],w=M);var C=c[w];return!!C&&{leastVertex:E,adjList:b.map(function(O,I){return-1===C.indexOf(I)?[]:O.filter(function(N){return-1!==C.indexOf(N)})})}}_=0;for(var d=b.length;_<d;){var p=s(_);if(_=p.leastVertex,i=p.adjList){for(var f=0;f<i.length;f++)for(var g=0;g<i[f].length;g++){var m=i[f][g];a[+m]=!1,l[m]={}}v(_),_+=1}else _=d}return T?void 0:e}},{"strongly-connected-components":306}],131:[function(x,ue,le){"use strict";var y=x("../../object/valid-value");ue.exports=function(){return y(this).length=0,this}},{"../../object/valid-value":162}],132:[function(x,ue,le){"use strict";ue.exports=x("./is-implemented")()?Array.from:x("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(x,ue,le){"use strict";ue.exports=function(){var y,b,T=Array.from;return"function"==typeof T&&(b=T(y=["raz","dwa"]),Boolean(b&&b!==y&&"dwa"===b[1]))}},{}],134:[function(x,ue,le){"use strict";var y=x("es6-symbol").iterator,b=x("../../function/is-arguments"),T=x("../../function/is-function"),_=x("../../number/to-pos-integer"),e=x("../../object/valid-callable"),o=x("../../object/valid-value"),a=x("../../object/is-value"),l=x("../../string/is-string"),i=Array.isArray,v=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;ue.exports=function(d){var p,f,g,m,u,w,c,E,M,S,C=arguments[1],O=arguments[2];if(d=Object(o(d)),a(C)&&e(C),this&&this!==Array&&T(this))p=this;else{if(!C){if(b(d))return 1!==(u=d.length)?Array.apply(null,d):((m=new Array(1))[0]=d[0],m);if(i(d)){for(m=new Array(u=d.length),f=0;f<u;++f)m[f]=d[f];return m}}m=[]}if(!i(d))if(void 0!==(M=d[y])){for(c=e(M).call(d),p&&(m=new p),E=c.next(),f=0;!E.done;)S=C?v.call(C,O,E.value,f):E.value,p?(h.value=S,s(m,f,h)):m[f]=S,E=c.next(),++f;u=f}else if(l(d)){for(u=d.length,p&&(m=new p),f=0,g=0;f<u;++f)S=d[f],f+1<u&&(w=S.charCodeAt(0))>=55296&&w<=56319&&(S+=d[++f]),S=C?v.call(C,O,S,g):S,p?(h.value=S,s(m,g,h)):m[g]=S,++g;u=g}if(void 0===u)for(u=_(d.length),p&&(m=new p(u)),f=0;f<u;++f)S=C?v.call(C,O,d[f],f):d[f],p?(h.value=S,s(m,f,h)):m[f]=S;return p&&(h.value=null,m.length=u),m}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(x,ue,le){"use strict";var y=Object.prototype.toString,b=y.call(function(){return arguments}());ue.exports=function(T){return y.call(T)===b}},{}],136:[function(x,ue,le){"use strict";var y=Object.prototype.toString,b=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ue.exports=function(T){return"function"==typeof T&&b(y.call(T))}},{}],137:[function(x,ue,le){"use strict";ue.exports=function(){}},{}],138:[function(x,ue,le){"use strict";ue.exports=x("./is-implemented")()?Math.sign:x("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(x,ue,le){"use strict";ue.exports=function(){var y=Math.sign;return"function"==typeof y&&1===y(10)&&-1===y(-20)}},{}],140:[function(x,ue,le){"use strict";ue.exports=function(y){return y=Number(y),isNaN(y)||0===y?y:y>0?1:-1}},{}],141:[function(x,ue,le){"use strict";var y=x("../math/sign"),b=Math.abs,T=Math.floor;ue.exports=function(_){return isNaN(_)?0:0!==(_=Number(_))&&isFinite(_)?y(_)*T(b(_)):_}},{"../math/sign":138}],142:[function(x,ue,le){"use strict";var y=x("./to-integer"),b=Math.max;ue.exports=function(T){return b(0,y(T))}},{"./to-integer":141}],143:[function(x,ue,le){"use strict";var y=x("./valid-callable"),b=x("./valid-value"),T=Function.prototype.bind,_=Function.prototype.call,e=Object.keys,o=Object.prototype.propertyIsEnumerable;ue.exports=function(a,l){return function(i,v){var h,s=arguments[2],d=arguments[3];return i=Object(b(i)),y(v),h=e(i),d&&h.sort("function"==typeof d?T.call(d,i):void 0),"function"!=typeof a&&(a=h[a]),_.call(a,h,function(p,f){return o.call(i,p)?_.call(v,s,i[p],p,i,f):l})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(x,ue,le){"use strict";ue.exports=x("./is-implemented")()?Object.assign:x("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(x,ue,le){"use strict";ue.exports=function(){var y,b=Object.assign;return"function"==typeof b&&(b(y={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),y.foo+y.bar+y.trzy==="razdwatrzy")}},{}],146:[function(x,ue,le){"use strict";var y=x("../keys"),b=x("../valid-value"),T=Math.max;ue.exports=function(_,e){var o,a,l,i=T(arguments.length,2);for(_=Object(b(_)),l=function(v){try{_[v]=e[v]}catch(h){o||(o=h)}},a=1;a<i;++a)y(e=arguments[a]).forEach(l);if(void 0!==o)throw o;return _}},{"../keys":152,"../valid-value":162}],147:[function(x,ue,le){"use strict";var y=x("../array/from"),b=x("./assign"),T=x("./valid-value");ue.exports=function(_){var e=Object(T(_)),o=arguments[1],a=Object(arguments[2]);if(e!==_&&!o)return e;var l={};return o?y(o,function(i){(a.ensure||i in _)&&(l[i]=_[i])}):b(l,_),l}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(x,ue,le){"use strict";var y,b,T,_,e=Object.create;x("./set-prototype-of/is-implemented")()||(y=x("./set-prototype-of/shim")),ue.exports=y?1!==y.level?e:(b={},T={},_={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(o){T[o]="__proto__"!==o?_:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(b,T),Object.defineProperty(y,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:b}),function(o,a){return e(null===o?b:o,a)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(x,ue,le){"use strict";ue.exports=x("./_iterate")("forEach")},{"./_iterate":143}],150:[function(x,ue,le){"use strict";var y=x("./is-value"),b={function:!0,object:!0};ue.exports=function(T){return y(T)&&b[typeof T]||!1}},{"./is-value":151}],151:[function(x,ue,le){"use strict";var y=x("../function/noop")();ue.exports=function(b){return b!==y&&null!==b}},{"../function/noop":137}],152:[function(x,ue,le){"use strict";ue.exports=x("./is-implemented")()?Object.keys:x("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(x,ue,le){"use strict";ue.exports=function(){try{return Object.keys("primitive"),!0}catch(y){return!1}}},{}],154:[function(x,ue,le){"use strict";var y=x("../is-value"),b=Object.keys;ue.exports=function(T){return b(y(T)?Object(T):T)}},{"../is-value":151}],155:[function(x,ue,le){"use strict";var y=x("./valid-callable"),b=x("./for-each"),T=Function.prototype.call;ue.exports=function(_,e){var o={},a=arguments[2];return y(e),b(_,function(l,i,v,h){o[i]=T.call(e,a,l,i,v,h)}),o}},{"./for-each":149,"./valid-callable":160}],156:[function(x,ue,le){"use strict";var y=x("./is-value"),b=Array.prototype.forEach,T=Object.create,_=function(e,o){var a;for(a in e)o[a]=e[a]};ue.exports=function(e){var o=T(null);return b.call(arguments,function(a){y(a)&&_(Object(a),o)}),o}},{"./is-value":151}],157:[function(x,ue,le){"use strict";ue.exports=x("./is-implemented")()?Object.setPrototypeOf:x("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(x,ue,le){"use strict";var y=Object.create,b=Object.getPrototypeOf,T={};ue.exports=function(){var _=Object.setPrototypeOf;return"function"==typeof _&&b(_((arguments[0]||y)(null),T))===T}},{}],159:[function(x,ue,le){"use strict";var y,a,l,i,b=x("../is-object"),T=x("../valid-value"),_=Object.prototype.isPrototypeOf,e=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};y=function(a,l){if(T(a),null===l||b(l))return a;throw new TypeError("Prototype must be null or an object")},ue.exports=(a=function(){var a,l=Object.create(null),i={},v=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(v){try{(a=v.set).call(l,i)}catch(h){}if(Object.getPrototypeOf(l)===i)return{set:a,level:2}}return l.__proto__=i,Object.getPrototypeOf(l)===i?{level:2}:((l={}).__proto__=i,Object.getPrototypeOf(l)===i&&{level:1})}(),a?(2===a.level?a.set?(i=a.set,l=function(v,h){return i.call(y(v,h),h),v}):l=function(v,h){return y(v,h).__proto__=h,v}:l=function v(h,s){var d;return y(h,s),(d=_.call(v.nullPolyfill,h))&&delete v.nullPolyfill.__proto__,null===s&&(s=v.nullPolyfill),h.__proto__=s,d&&e(v.nullPolyfill,"__proto__",o),h},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null),x("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(x,ue,le){"use strict";ue.exports=function(y){if("function"!=typeof y)throw new TypeError(y+" is not a function");return y}},{}],161:[function(x,ue,le){"use strict";var y=x("./is-object");ue.exports=function(b){if(!y(b))throw new TypeError(b+" is not an Object");return b}},{"./is-object":150}],162:[function(x,ue,le){"use strict";var y=x("./is-value");ue.exports=function(b){if(!y(b))throw new TypeError("Cannot use null or undefined");return b}},{"./is-value":151}],163:[function(x,ue,le){"use strict";ue.exports=x("./is-implemented")()?String.prototype.contains:x("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(x,ue,le){"use strict";var y="razdwatrzy";ue.exports=function(){return"function"==typeof y.contains&&!0===y.contains("dwa")&&!1===y.contains("foo")}},{}],165:[function(x,ue,le){"use strict";var y=String.prototype.indexOf;ue.exports=function(b){return y.call(this,b,arguments[1])>-1}},{}],166:[function(x,ue,le){"use strict";var y=Object.prototype.toString,b=y.call("");ue.exports=function(T){return"string"==typeof T||T&&"object"==typeof T&&(T instanceof String||y.call(T)===b)||!1}},{}],167:[function(x,ue,le){"use strict";var y=Object.create(null),b=Math.random;ue.exports=function(){var T;do{T=b().toString(36).slice(2)}while(y[T]);return T}},{}],168:[function(x,ue,le){"use strict";var y,b=x("es5-ext/object/set-prototype-of"),T=x("es5-ext/string/#/contains"),_=x("d"),e=x("es6-symbol"),o=x("./"),a=Object.defineProperty;y=ue.exports=function(l,i){if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");o.call(this,l),i=i?T.call(i,"key+value")?"key+value":T.call(i,"key")?"key":"value":"value",a(this,"__kind__",_("",i))},b&&b(y,o),delete y.prototype.constructor,y.prototype=Object.create(o.prototype,{_resolve:_(function(l){return"value"===this.__kind__?this.__list__[l]:"key+value"===this.__kind__?[l,this.__list__[l]]:l})}),a(y.prototype,e.toStringTag,_("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(x,ue,le){"use strict";var y=x("es5-ext/function/is-arguments"),b=x("es5-ext/object/valid-callable"),T=x("es5-ext/string/is-string"),_=x("./get"),e=Array.isArray,o=Function.prototype.call,a=Array.prototype.some;ue.exports=function(l,i){var v,h,s,d,p,f,g,m,u=arguments[2];if(e(l)||y(l)?v="array":T(l)?v="string":l=_(l),b(i),s=function(){d=!0},"array"!==v)if("string"!==v)for(h=l.next();!h.done;){if(o.call(i,u,h.value,s),d)return;h=l.next()}else for(f=l.length,p=0;p<f&&(g=l[p],p+1<f&&(m=g.charCodeAt(0))>=55296&&m<=56319&&(g+=l[++p]),o.call(i,u,g,s),!d);++p);else a.call(l,function(w){return o.call(i,u,w,s),d})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(x,ue,le){"use strict";var y=x("es5-ext/function/is-arguments"),b=x("es5-ext/string/is-string"),T=x("./array"),_=x("./string"),e=x("./valid-iterable"),o=x("es6-symbol").iterator;ue.exports=function(a){return"function"==typeof e(a)[o]?a[o]():y(a)?new T(a):b(a)?new _(a):new T(a)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(x,ue,le){"use strict";var y,b=x("es5-ext/array/#/clear"),T=x("es5-ext/object/assign"),_=x("es5-ext/object/valid-callable"),e=x("es5-ext/object/valid-value"),o=x("d"),a=x("d/auto-bind"),l=x("es6-symbol"),i=Object.defineProperty,v=Object.defineProperties;ue.exports=y=function(h,s){if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");v(this,{__list__:o("w",e(h)),__context__:o("w",s),__nextIndex__:o("w",0)}),s&&(_(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete y.prototype.constructor,v(y.prototype,T({_next:o(function(){var h;if(this.__list__)return this.__redo__&&void 0!==(h=this.__redo__.shift())?h:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:o(function(){return this._createResult(this._next())}),_createResult:o(function(h){return void 0===h?{done:!0,value:void 0}:{done:!1,value:this._resolve(h)}}),_resolve:o(function(h){return this.__list__[h]}),_unBind:o(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:o(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},a({_onAdd:o(function(h){h>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(s,d){s>=h&&(this.__redo__[d]=++s)},this),this.__redo__.push(h)):i(this,"__redo__",o("c",[h])))}),_onDelete:o(function(h){var s;h>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(s=this.__redo__.indexOf(h))&&this.__redo__.splice(s,1),this.__redo__.forEach(function(d,p){d>h&&(this.__redo__[p]=--d)},this)))}),_onClear:o(function(){this.__redo__&&b.call(this.__redo__),this.__nextIndex__=0})}))),i(y.prototype,l.iterator,o(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(x,ue,le){"use strict";var y=x("es5-ext/function/is-arguments"),b=x("es5-ext/object/is-value"),T=x("es5-ext/string/is-string"),_=x("es6-symbol").iterator,e=Array.isArray;ue.exports=function(o){return!(!b(o)||!e(o)&&!T(o)&&!y(o)&&"function"!=typeof o[_])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(x,ue,le){"use strict";var y,b=x("es5-ext/object/set-prototype-of"),T=x("d"),_=x("es6-symbol"),e=x("./"),o=Object.defineProperty;y=ue.exports=function(a){if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");a=String(a),e.call(this,a),o(this,"__length__",T("",a.length))},b&&b(y,e),delete y.prototype.constructor,y.prototype=Object.create(e.prototype,{_next:T(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:T(function(a){var l,i=this.__list__[a];return this.__nextIndex__===this.__length__?i:(l=i.charCodeAt(0))>=55296&&l<=56319?i+this.__list__[this.__nextIndex__++]:i})}),o(y.prototype,_.toStringTag,T("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(x,ue,le){"use strict";var y=x("./is-iterable");ue.exports=function(b){if(!y(b))throw new TypeError(b+" is not iterable");return b}},{"./is-iterable":172}],175:[function(x,ue,le){"use strict";ue.exports=x("./is-implemented")()?x("ext/global-this").Symbol:x("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(x,ue,le){"use strict";var y=x("ext/global-this"),b={object:!0,symbol:!0};ue.exports=function(){var T,_=y.Symbol;if("function"!=typeof _)return!1;T=_("test symbol");try{String(T)}catch(e){return!1}return!!b[typeof _.iterator]&&!!b[typeof _.toPrimitive]&&!!b[typeof _.toStringTag]}},{"ext/global-this":188}],177:[function(x,ue,le){"use strict";ue.exports=function(y){return!!y&&("symbol"==typeof y||!!y.constructor&&"Symbol"===y.constructor.name&&"Symbol"===y[y.constructor.toStringTag])}},{}],178:[function(x,ue,le){"use strict";var y=x("d"),T=Object.defineProperty,_=Object.prototype,e=(0,Object.create)(null);ue.exports=function(o){for(var a,l,i=0;e[o+(i||"")];)++i;return e[o+=i||""]=!0,T(_,a="@@"+o,y.gs(null,function(v){l||(l=!0,T(this,a,y(v)),l=!1)})),a}},{d:106}],179:[function(x,ue,le){"use strict";var y=x("d"),b=x("ext/global-this").Symbol;ue.exports=function(T){return Object.defineProperties(T,{hasInstance:y("",b&&b.hasInstance||T("hasInstance")),isConcatSpreadable:y("",b&&b.isConcatSpreadable||T("isConcatSpreadable")),iterator:y("",b&&b.iterator||T("iterator")),match:y("",b&&b.match||T("match")),replace:y("",b&&b.replace||T("replace")),search:y("",b&&b.search||T("search")),species:y("",b&&b.species||T("species")),split:y("",b&&b.split||T("split")),toPrimitive:y("",b&&b.toPrimitive||T("toPrimitive")),toStringTag:y("",b&&b.toStringTag||T("toStringTag")),unscopables:y("",b&&b.unscopables||T("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(x,ue,le){"use strict";var y=x("d"),b=x("../../../validate-symbol"),T=Object.create(null);ue.exports=function(_){return Object.defineProperties(_,{for:y(function(e){return T[e]?T[e]:T[e]=_(String(e))}),keyFor:y(function(e){var o;for(o in b(e),T)if(T[o]===e)return o})})}},{"../../../validate-symbol":182,d:106}],181:[function(x,ue,le){"use strict";var y,b,T,_=x("d"),e=x("./validate-symbol"),o=x("ext/global-this").Symbol,a=x("./lib/private/generate-name"),l=x("./lib/private/setup/standard-symbols"),i=x("./lib/private/setup/symbol-registry"),v=Object.create,h=Object.defineProperties,s=Object.defineProperty;if("function"==typeof o)try{String(o()),T=!0}catch(d){}else o=null;b=function(d){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return y(d)},ue.exports=y=function d(p){var f;if(this instanceof d)throw new TypeError("Symbol is not a constructor");return T?o(p):(f=v(b.prototype),p=void 0===p?"":String(p),h(f,{__description__:_("",p),__name__:_("",a(p))}))},l(y),i(y),h(b.prototype,{constructor:_(y),toString:_("",function(){return this.__name__})}),h(y.prototype,{toString:_(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:_(function(){return e(this)})}),s(y.prototype,y.toPrimitive,_("",function(){var d=e(this);return"symbol"==typeof d?d:d.toString()})),s(y.prototype,y.toStringTag,_("c","Symbol")),s(b.prototype,y.toStringTag,_("c",y.prototype[y.toStringTag])),s(b.prototype,y.toPrimitive,_("c",y.prototype[y.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(x,ue,le){"use strict";var y=x("./is-symbol");ue.exports=function(b){if(!y(b))throw new TypeError(b+" is not a symbol");return b}},{"./is-symbol":177}],183:[function(x,ue,le){"use strict";ue.exports=x("./is-implemented")()?WeakMap:x("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(x,ue,le){"use strict";ue.exports=function(){var y,b;if("function"!=typeof WeakMap)return!1;try{y=new WeakMap([[b={},"one"],[{},"two"],[{},"three"]])}catch(T){return!1}return"[object WeakMap]"===String(y)&&"function"==typeof y.set&&y.set({},1)===y&&"function"==typeof y.delete&&"function"==typeof y.has&&"one"===y.get(b)}},{}],185:[function(x,ue,le){"use strict";ue.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(x,ue,le){"use strict";var y,b=x("es5-ext/object/is-value"),T=x("es5-ext/object/set-prototype-of"),_=x("es5-ext/object/valid-object"),e=x("es5-ext/object/valid-value"),o=x("es5-ext/string/random-uniq"),a=x("d"),l=x("es6-iterator/get"),i=x("es6-iterator/for-of"),v=x("es6-symbol").toStringTag,h=x("./is-native-implemented"),s=Array.isArray,d=Object.defineProperty,p=Object.prototype.hasOwnProperty,f=Object.getPrototypeOf;ue.exports=y=function(){var g,m=arguments[0];if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");return g=h&&T&&WeakMap!==y?T(new WeakMap,f(this)):this,b(m)&&(s(m)||(m=l(m))),d(g,"__weakMapData__",a("c","$weakMap$"+o())),m&&i(m,function(u){e(u),g.set(u[0],u[1])}),g},h&&(T&&T(y,WeakMap),y.prototype=Object.create(WeakMap.prototype,{constructor:a(y)})),Object.defineProperties(y.prototype,{delete:a(function(g){return!!p.call(_(g),this.__weakMapData__)&&(delete g[this.__weakMapData__],!0)}),get:a(function(g){if(p.call(_(g),this.__weakMapData__))return g[this.__weakMapData__]}),has:a(function(g){return p.call(_(g),this.__weakMapData__)}),set:a(function(g,m){return d(_(g),this.__weakMapData__,a("c",m)),this}),toString:a(function(){return"[object WeakMap]"})}),d(y.prototype,v,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(x,ue,le){var y=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};ue.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(b){return y()}try{return __global__||y()}finally{delete Object.prototype.__global__}}()},{}],188:[function(x,ue,le){"use strict";ue.exports=x("./is-implemented")()?globalThis:x("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(x,ue,le){"use strict";ue.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(x,ue,le){"use strict";var y=x("is-string-blank");ue.exports=function(b){var T=typeof b;if("string"===T){var _=b;if(0==(b=+b)&&y(_))return!1}else if("number"!==T)return!1;return b-b<1}},{"is-string-blank":237}],191:[function(x,ue,le){var y=x("dtype");ue.exports=function(b,T,_){if(!b)throw new TypeError("must specify data as first parameter");if(_=0|+(_||0),Array.isArray(b)&&b[0]&&"number"==typeof b[0][0]){var e,o,a,l,i=b[0].length,v=b.length*i;T&&"string"!=typeof T||(T=new(y(T||"float32"))(v+_));var h=T.length-_;if(v!==h)throw new Error("source length "+v+" ("+i+"x"+b.length+") does not match destination length "+h);for(e=0,a=_;e<b.length;e++)for(o=0;o<i;o++)T[a++]=null===b[e][o]?NaN:b[e][o]}else if(T&&"string"!=typeof T)T.set(b,_);else{var s=y(T||"float32");if(Array.isArray(b)||"array"===T)for(e=0,a=_,l=(T=new s(b.length+_)).length;a<l;a++,e++)T[a]=null===b[e]?NaN:b[e];else 0===_?T=new s(b):(T=new s(b.length+_)).set(b,_)}return T}},{dtype:127}],192:[function(x,ue,le){"use strict";var y=x("css-font/stringify"),b=[32,126];ue.exports=function(T){var _=(T=T||{}).shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],e=T.canvas||document.createElement("canvas"),o=T.font,a="number"==typeof T.step?[T.step,T.step]:T.step||[32,32],l=T.chars||b;if(o&&"string"!=typeof o&&(o=y(o)),Array.isArray(l)){if(2===l.length&&"number"==typeof l[0]&&"number"==typeof l[1]){for(var i=[],v=l[0],h=0;v<=l[1];v++)i[h++]=String.fromCharCode(v);l=i}}else l=String(l).split("");_=_.slice(),e.width=_[0],e.height=_[1];var s=e.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,e.width,e.height),s.font=o,s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff";var d=a[0]/2,p=a[1]/2;for(v=0;v<l.length;v++)s.fillText(l[v],d,p),(d+=a[0])>_[0]-a[0]/2&&(d=a[0]/2,p+=a[1]);return e}},{"css-font/stringify":102}],193:[function(x,ue,le){"use strict";function y(e,o){o||(o={}),("string"==typeof e||Array.isArray(e))&&(o.family=e);var a=Array.isArray(o.family)?o.family.join(", "):o.family;if(!a)throw Error("`family` must be defined");var l=o.size||o.fontSize||o.em||48,v=(e=[o.style||o.fontStyle||"",o.weight||o.fontWeight||"",l].join(" ")+"px "+a,o.origin||"top");if(y.cache[a]&&l<=y.cache[a].em)return b(y.cache[a],v);var h=o.canvas||y.canvas,s=h.getContext("2d"),d={upper:void 0!==o.upper?o.upper:"H",lower:void 0!==o.lower?o.lower:"x",descent:void 0!==o.descent?o.descent:"p",ascent:void 0!==o.ascent?o.ascent:"h",tittle:void 0!==o.tittle?o.tittle:"i",overshoot:void 0!==o.overshoot?o.overshoot:"O"},p=Math.ceil(1.5*l);h.height=p,h.width=.5*p,s.font=e;var f={top:0};s.clearRect(0,0,p,p),s.textBaseline="top",s.fillStyle="black",s.fillText("H",0,0);var g=T(s.getImageData(0,0,p,p));s.clearRect(0,0,p,p),s.textBaseline="bottom",s.fillText("H",0,p);var m=T(s.getImageData(0,0,p,p));f.lineHeight=f.bottom=p-m+g,s.clearRect(0,0,p,p),s.textBaseline="alphabetic",s.fillText("H",0,p);var u=p-T(s.getImageData(0,0,p,p))-1+g;f.baseline=f.alphabetic=u,s.clearRect(0,0,p,p),s.textBaseline="middle",s.fillText("H",0,.5*p);var w=T(s.getImageData(0,0,p,p));f.median=f.middle=p-w-1+g-.5*p,s.clearRect(0,0,p,p),s.textBaseline="hanging",s.fillText("H",0,.5*p);var c=T(s.getImageData(0,0,p,p));f.hanging=p-c-1+g-.5*p,s.clearRect(0,0,p,p),s.textBaseline="ideographic",s.fillText("H",0,p);var E=T(s.getImageData(0,0,p,p));if(f.ideographic=p-E-1+g,d.upper&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.upper,0,0),f.upper=T(s.getImageData(0,0,p,p)),f.capHeight=f.baseline-f.upper),d.lower&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.lower,0,0),f.lower=T(s.getImageData(0,0,p,p)),f.xHeight=f.baseline-f.lower),d.tittle&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.tittle,0,0),f.tittle=T(s.getImageData(0,0,p,p))),d.ascent&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.ascent,0,0),f.ascent=T(s.getImageData(0,0,p,p))),d.descent&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.descent,0,0),f.descent=_(s.getImageData(0,0,p,p))),d.overshoot){s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.overshoot,0,0);var M=_(s.getImageData(0,0,p,p));f.overshoot=M-u}for(var S in f)f[S]/=l;return f.em=l,y.cache[a]=f,b(f,v)}function b(e,o){var a={};for(var l in"string"==typeof o&&(o=e[o]),e)"em"!==l&&(a[l]=e[l]-o);return a}function T(e){for(var o=e.height,a=e.data,l=3;l<a.length;l+=4)if(0!==a[l])return Math.floor(.25*(l-3)/o)}function _(e){for(var o=e.height,a=e.data,l=a.length-1;l>0;l-=4)if(0!==a[l])return Math.floor(.25*(l-3)/o)}ue.exports=y,y.canvas=document.createElement("canvas"),y.cache={}},{}],194:[function(x,ue,le){ue.exports=function(y,b){if("string"!=typeof y)throw new TypeError("must specify type string");if(b=b||{},"undefined"==typeof document&&!b.canvas)return null;var T=b.canvas||document.createElement("canvas");"number"==typeof b.width&&(T.width=b.width),"number"==typeof b.height&&(T.height=b.height);var _,e=b;try{var o=[y];0===y.indexOf("webgl")&&o.push("experimental-"+y);for(var a=0;a<o.length;a++)if(_=T.getContext(o[a],e))return _}catch(l){_=null}return _||null}},{}],195:[function(x,ue,le){ue.exports=function(y,b){var T=b[0],_=b[1],e=b[2],o=b[3],a=b[4],l=b[5],i=b[6],v=b[7],h=b[8],s=b[9],d=b[10],p=b[11],f=b[12],g=b[13],m=b[14],u=b[15];return y[0]=l*(d*u-p*m)-s*(i*u-v*m)+g*(i*p-v*d),y[1]=-(_*(d*u-p*m)-s*(e*u-o*m)+g*(e*p-o*d)),y[2]=_*(i*u-v*m)-l*(e*u-o*m)+g*(e*v-o*i),y[3]=-(_*(i*p-v*d)-l*(e*p-o*d)+s*(e*v-o*i)),y[4]=-(a*(d*u-p*m)-h*(i*u-v*m)+f*(i*p-v*d)),y[5]=T*(d*u-p*m)-h*(e*u-o*m)+f*(e*p-o*d),y[6]=-(T*(i*u-v*m)-a*(e*u-o*m)+f*(e*v-o*i)),y[7]=T*(i*p-v*d)-a*(e*p-o*d)+h*(e*v-o*i),y[8]=a*(s*u-p*g)-h*(l*u-v*g)+f*(l*p-v*s),y[9]=-(T*(s*u-p*g)-h*(_*u-o*g)+f*(_*p-o*s)),y[10]=T*(l*u-v*g)-a*(_*u-o*g)+f*(_*v-o*l),y[11]=-(T*(l*p-v*s)-a*(_*p-o*s)+h*(_*v-o*l)),y[12]=-(a*(s*m-d*g)-h*(l*m-i*g)+f*(l*d-i*s)),y[13]=T*(s*m-d*g)-h*(_*m-e*g)+f*(_*d-e*s),y[14]=-(T*(l*m-i*g)-a*(_*m-e*g)+f*(_*i-e*l)),y[15]=T*(l*d-i*s)-a*(_*d-e*s)+h*(_*i-e*l),y}},{}],196:[function(x,ue,le){ue.exports=function(y){var b=new Float32Array(16);return b[0]=y[0],b[1]=y[1],b[2]=y[2],b[3]=y[3],b[4]=y[4],b[5]=y[5],b[6]=y[6],b[7]=y[7],b[8]=y[8],b[9]=y[9],b[10]=y[10],b[11]=y[11],b[12]=y[12],b[13]=y[13],b[14]=y[14],b[15]=y[15],b}},{}],197:[function(x,ue,le){ue.exports=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[3],y[4]=b[4],y[5]=b[5],y[6]=b[6],y[7]=b[7],y[8]=b[8],y[9]=b[9],y[10]=b[10],y[11]=b[11],y[12]=b[12],y[13]=b[13],y[14]=b[14],y[15]=b[15],y}},{}],198:[function(x,ue,le){ue.exports=function(){var y=new Float32Array(16);return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],199:[function(x,ue,le){ue.exports=function(y){var b=y[0],T=y[1],_=y[2],e=y[3],o=y[4],a=y[5],l=y[6],i=y[7],v=y[8],h=y[9],s=y[10],d=y[11],p=y[12],f=y[13],g=y[14],m=y[15];return(b*a-T*o)*(s*m-d*g)-(b*l-_*o)*(h*m-d*f)+(b*i-e*o)*(h*g-s*f)+(T*l-_*a)*(v*m-d*p)-(T*i-e*a)*(v*g-s*p)+(_*i-e*l)*(v*f-h*p)}},{}],200:[function(x,ue,le){ue.exports=function(y,b){var T=b[0],_=b[1],e=b[2],o=b[3],a=T+T,l=_+_,i=e+e,v=T*a,h=_*a,s=_*l,d=e*a,p=e*l,f=e*i,g=o*a,m=o*l,u=o*i;return y[0]=1-s-f,y[1]=h+u,y[2]=d-m,y[3]=0,y[4]=h-u,y[5]=1-v-f,y[6]=p+g,y[7]=0,y[8]=d+m,y[9]=p-g,y[10]=1-v-s,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],201:[function(x,ue,le){ue.exports=function(y,b,T){var _,e,o,a=T[0],l=T[1],i=T[2],v=Math.sqrt(a*a+l*l+i*i);return Math.abs(v)<1e-6?null:(a*=v=1/v,l*=v,i*=v,_=Math.sin(b),e=Math.cos(b),y[0]=a*a*(o=1-e)+e,y[1]=l*a*o+i*_,y[2]=i*a*o-l*_,y[3]=0,y[4]=a*l*o-i*_,y[5]=l*l*o+e,y[6]=i*l*o+a*_,y[7]=0,y[8]=a*i*o+l*_,y[9]=l*i*o-a*_,y[10]=i*i*o+e,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y)}},{}],202:[function(x,ue,le){ue.exports=function(y,b,T){var _=b[0],e=b[1],o=b[2],a=b[3],l=_+_,i=e+e,v=o+o,h=_*l,s=_*i,d=_*v,p=e*i,f=e*v,g=o*v,m=a*l,u=a*i,w=a*v;return y[0]=1-(p+g),y[1]=s+w,y[2]=d-u,y[3]=0,y[4]=s-w,y[5]=1-(h+g),y[6]=f+m,y[7]=0,y[8]=d+u,y[9]=f-m,y[10]=1-(h+p),y[11]=0,y[12]=T[0],y[13]=T[1],y[14]=T[2],y[15]=1,y}},{}],203:[function(x,ue,le){ue.exports=function(y,b){return y[0]=b[0],y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=b[1],y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=b[2],y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],204:[function(x,ue,le){ue.exports=function(y,b){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=b[0],y[13]=b[1],y[14]=b[2],y[15]=1,y}},{}],205:[function(x,ue,le){ue.exports=function(y,b){var T=Math.sin(b),_=Math.cos(b);return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=_,y[6]=T,y[7]=0,y[8]=0,y[9]=-T,y[10]=_,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],206:[function(x,ue,le){ue.exports=function(y,b){var T=Math.sin(b),_=Math.cos(b);return y[0]=_,y[1]=0,y[2]=-T,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=T,y[9]=0,y[10]=_,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],207:[function(x,ue,le){ue.exports=function(y,b){var T=Math.sin(b),_=Math.cos(b);return y[0]=_,y[1]=T,y[2]=0,y[3]=0,y[4]=-T,y[5]=_,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],208:[function(x,ue,le){ue.exports=function(y,b,T,_,e,o,a){var l=1/(T-b),i=1/(e-_),v=1/(o-a);return y[0]=2*o*l,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=2*o*i,y[6]=0,y[7]=0,y[8]=(T+b)*l,y[9]=(e+_)*i,y[10]=(a+o)*v,y[11]=-1,y[12]=0,y[13]=0,y[14]=a*o*2*v,y[15]=0,y}},{}],209:[function(x,ue,le){ue.exports=function(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],210:[function(x,ue,le){ue.exports={create:x("./create"),clone:x("./clone"),copy:x("./copy"),identity:x("./identity"),transpose:x("./transpose"),invert:x("./invert"),adjoint:x("./adjoint"),determinant:x("./determinant"),multiply:x("./multiply"),translate:x("./translate"),scale:x("./scale"),rotate:x("./rotate"),rotateX:x("./rotateX"),rotateY:x("./rotateY"),rotateZ:x("./rotateZ"),fromRotation:x("./fromRotation"),fromRotationTranslation:x("./fromRotationTranslation"),fromScaling:x("./fromScaling"),fromTranslation:x("./fromTranslation"),fromXRotation:x("./fromXRotation"),fromYRotation:x("./fromYRotation"),fromZRotation:x("./fromZRotation"),fromQuat:x("./fromQuat"),frustum:x("./frustum"),perspective:x("./perspective"),perspectiveFromFieldOfView:x("./perspectiveFromFieldOfView"),ortho:x("./ortho"),lookAt:x("./lookAt"),str:x("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(x,ue,le){ue.exports=function(y,b){var T=b[0],_=b[1],e=b[2],o=b[3],a=b[4],l=b[5],i=b[6],v=b[7],h=b[8],s=b[9],d=b[10],p=b[11],f=b[12],g=b[13],m=b[14],u=b[15],w=T*l-_*a,c=T*i-e*a,E=T*v-o*a,M=_*i-e*l,S=_*v-o*l,C=e*v-o*i,O=h*g-s*f,I=h*m-d*f,N=h*u-p*f,F=s*m-d*g,L=s*u-p*g,P=d*u-p*m,j=w*P-c*L+E*F+M*N-S*I+C*O;return j?(y[0]=(l*P-i*L+v*F)*(j=1/j),y[1]=(e*L-_*P-o*F)*j,y[2]=(g*C-m*S+u*M)*j,y[3]=(d*S-s*C-p*M)*j,y[4]=(i*N-a*P-v*I)*j,y[5]=(T*P-e*N+o*I)*j,y[6]=(m*E-f*C-u*c)*j,y[7]=(h*C-d*E+p*c)*j,y[8]=(a*L-l*N+v*O)*j,y[9]=(_*N-T*L-o*O)*j,y[10]=(f*S-g*E+u*w)*j,y[11]=(s*E-h*S-p*w)*j,y[12]=(l*I-a*F-i*O)*j,y[13]=(T*F-_*I+e*O)*j,y[14]=(g*c-f*M-m*w)*j,y[15]=(h*M-s*c+d*w)*j,y):null}},{}],212:[function(x,ue,le){var y=x("./identity");ue.exports=function(b,T,_,e){var o,a,l,i,v,h,s,d,p,f,g=T[0],m=T[1],u=T[2],w=e[0],c=e[1],E=e[2],M=_[0],S=_[1],C=_[2];return Math.abs(g-M)<1e-6&&Math.abs(m-S)<1e-6&&Math.abs(u-C)<1e-6?y(b):(s=g-M,d=m-S,p=u-C,o=c*(p*=f=1/Math.sqrt(s*s+d*d+p*p))-E*(d*=f),a=E*(s*=f)-w*p,l=w*d-c*s,(f=Math.sqrt(o*o+a*a+l*l))?(o*=f=1/f,a*=f,l*=f):(o=0,a=0,l=0),i=d*l-p*a,v=p*o-s*l,h=s*a-d*o,(f=Math.sqrt(i*i+v*v+h*h))?(i*=f=1/f,v*=f,h*=f):(i=0,v=0,h=0),b[0]=o,b[1]=i,b[2]=s,b[3]=0,b[4]=a,b[5]=v,b[6]=d,b[7]=0,b[8]=l,b[9]=h,b[10]=p,b[11]=0,b[12]=-(o*g+a*m+l*u),b[13]=-(i*g+v*m+h*u),b[14]=-(s*g+d*m+p*u),b[15]=1,b)}},{"./identity":209}],213:[function(x,ue,le){ue.exports=function(y,b,T){var _=b[0],e=b[1],o=b[2],a=b[3],l=b[4],i=b[5],v=b[6],h=b[7],s=b[8],d=b[9],p=b[10],f=b[11],g=b[12],m=b[13],u=b[14],w=b[15],c=T[0],E=T[1],M=T[2],S=T[3];return y[0]=c*_+E*l+M*s+S*g,y[1]=c*e+E*i+M*d+S*m,y[2]=c*o+E*v+M*p+S*u,y[3]=c*a+E*h+M*f+S*w,y[4]=(c=T[4])*_+(E=T[5])*l+(M=T[6])*s+(S=T[7])*g,y[5]=c*e+E*i+M*d+S*m,y[6]=c*o+E*v+M*p+S*u,y[7]=c*a+E*h+M*f+S*w,y[8]=(c=T[8])*_+(E=T[9])*l+(M=T[10])*s+(S=T[11])*g,y[9]=c*e+E*i+M*d+S*m,y[10]=c*o+E*v+M*p+S*u,y[11]=c*a+E*h+M*f+S*w,y[12]=(c=T[12])*_+(E=T[13])*l+(M=T[14])*s+(S=T[15])*g,y[13]=c*e+E*i+M*d+S*m,y[14]=c*o+E*v+M*p+S*u,y[15]=c*a+E*h+M*f+S*w,y}},{}],214:[function(x,ue,le){ue.exports=function(y,b,T,_,e,o,a){var l=1/(b-T),i=1/(_-e),v=1/(o-a);return y[0]=-2*l,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*i,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*v,y[11]=0,y[12]=(b+T)*l,y[13]=(e+_)*i,y[14]=(a+o)*v,y[15]=1,y}},{}],215:[function(x,ue,le){ue.exports=function(y,b,T,_,e){var o=1/Math.tan(b/2),a=1/(_-e);return y[0]=o/T,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=o,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=(e+_)*a,y[11]=-1,y[12]=0,y[13]=0,y[14]=2*e*_*a,y[15]=0,y}},{}],216:[function(x,ue,le){ue.exports=function(y,b,T,_){var e=Math.tan(b.upDegrees*Math.PI/180),o=Math.tan(b.downDegrees*Math.PI/180),a=Math.tan(b.leftDegrees*Math.PI/180),l=Math.tan(b.rightDegrees*Math.PI/180),i=2/(a+l),v=2/(e+o);return y[0]=i,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=v,y[6]=0,y[7]=0,y[8]=-(a-l)*i*.5,y[9]=(e-o)*v*.5,y[10]=_/(T-_),y[11]=-1,y[12]=0,y[13]=0,y[14]=_*T/(T-_),y[15]=0,y}},{}],217:[function(x,ue,le){ue.exports=function(y,b,T,_){var e,o,a,l,i,v,h,s,d,p,f,g,m,u,w,c,E,M,S,C,O,I,N,F,L=_[0],P=_[1],j=_[2],U=Math.sqrt(L*L+P*P+j*j);return Math.abs(U)<1e-6?null:(L*=U=1/U,P*=U,j*=U,e=Math.sin(T),o=Math.cos(T),i=b[1],v=b[2],h=b[3],d=b[5],p=b[6],f=b[7],m=b[9],u=b[10],w=b[11],S=L*P*(a=1-o)-j*e,C=P*P*a+o,O=j*P*a+L*e,I=L*j*a+P*e,N=P*j*a-L*e,F=j*j*a+o,y[0]=(l=b[0])*(c=L*L*a+o)+(s=b[4])*(E=P*L*a+j*e)+(g=b[8])*(M=j*L*a-P*e),y[1]=i*c+d*E+m*M,y[2]=v*c+p*E+u*M,y[3]=h*c+f*E+w*M,y[4]=l*S+s*C+g*O,y[5]=i*S+d*C+m*O,y[6]=v*S+p*C+u*O,y[7]=h*S+f*C+w*O,y[8]=l*I+s*N+g*F,y[9]=i*I+d*N+m*F,y[10]=v*I+p*N+u*F,y[11]=h*I+f*N+w*F,b!==y&&(y[12]=b[12],y[13]=b[13],y[14]=b[14],y[15]=b[15]),y)}},{}],218:[function(x,ue,le){ue.exports=function(y,b,T){var _=Math.sin(T),e=Math.cos(T),o=b[4],a=b[5],l=b[6],i=b[7],v=b[8],h=b[9],s=b[10],d=b[11];return b!==y&&(y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[3],y[12]=b[12],y[13]=b[13],y[14]=b[14],y[15]=b[15]),y[4]=o*e+v*_,y[5]=a*e+h*_,y[6]=l*e+s*_,y[7]=i*e+d*_,y[8]=v*e-o*_,y[9]=h*e-a*_,y[10]=s*e-l*_,y[11]=d*e-i*_,y}},{}],219:[function(x,ue,le){ue.exports=function(y,b,T){var _=Math.sin(T),e=Math.cos(T),o=b[0],a=b[1],l=b[2],i=b[3],v=b[8],h=b[9],s=b[10],d=b[11];return b!==y&&(y[4]=b[4],y[5]=b[5],y[6]=b[6],y[7]=b[7],y[12]=b[12],y[13]=b[13],y[14]=b[14],y[15]=b[15]),y[0]=o*e-v*_,y[1]=a*e-h*_,y[2]=l*e-s*_,y[3]=i*e-d*_,y[8]=o*_+v*e,y[9]=a*_+h*e,y[10]=l*_+s*e,y[11]=i*_+d*e,y}},{}],220:[function(x,ue,le){ue.exports=function(y,b,T){var _=Math.sin(T),e=Math.cos(T),o=b[0],a=b[1],l=b[2],i=b[3],v=b[4],h=b[5],s=b[6],d=b[7];return b!==y&&(y[8]=b[8],y[9]=b[9],y[10]=b[10],y[11]=b[11],y[12]=b[12],y[13]=b[13],y[14]=b[14],y[15]=b[15]),y[0]=o*e+v*_,y[1]=a*e+h*_,y[2]=l*e+s*_,y[3]=i*e+d*_,y[4]=v*e-o*_,y[5]=h*e-a*_,y[6]=s*e-l*_,y[7]=d*e-i*_,y}},{}],221:[function(x,ue,le){ue.exports=function(y,b,T){var _=T[0],e=T[1],o=T[2];return y[0]=b[0]*_,y[1]=b[1]*_,y[2]=b[2]*_,y[3]=b[3]*_,y[4]=b[4]*e,y[5]=b[5]*e,y[6]=b[6]*e,y[7]=b[7]*e,y[8]=b[8]*o,y[9]=b[9]*o,y[10]=b[10]*o,y[11]=b[11]*o,y[12]=b[12],y[13]=b[13],y[14]=b[14],y[15]=b[15],y}},{}],222:[function(x,ue,le){ue.exports=function(y){return"mat4("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+", "+y[6]+", "+y[7]+", "+y[8]+", "+y[9]+", "+y[10]+", "+y[11]+", "+y[12]+", "+y[13]+", "+y[14]+", "+y[15]+")"}},{}],223:[function(x,ue,le){ue.exports=function(y,b,T){var _,e,o,a,l,i,v,h,s,d,p,f,g=T[0],m=T[1],u=T[2];return b===y?(y[12]=b[0]*g+b[4]*m+b[8]*u+b[12],y[13]=b[1]*g+b[5]*m+b[9]*u+b[13],y[14]=b[2]*g+b[6]*m+b[10]*u+b[14],y[15]=b[3]*g+b[7]*m+b[11]*u+b[15]):(e=b[1],o=b[2],a=b[3],l=b[4],i=b[5],v=b[6],h=b[7],s=b[8],d=b[9],p=b[10],f=b[11],y[0]=_=b[0],y[1]=e,y[2]=o,y[3]=a,y[4]=l,y[5]=i,y[6]=v,y[7]=h,y[8]=s,y[9]=d,y[10]=p,y[11]=f,y[12]=_*g+l*m+s*u+b[12],y[13]=e*g+i*m+d*u+b[13],y[14]=o*g+v*m+p*u+b[14],y[15]=a*g+h*m+f*u+b[15]),y}},{}],224:[function(x,ue,le){ue.exports=function(y,b){if(y===b){var T=b[1],_=b[2],e=b[3],o=b[6],a=b[7],l=b[11];y[1]=b[4],y[2]=b[8],y[3]=b[12],y[4]=T,y[6]=b[9],y[7]=b[13],y[8]=_,y[9]=o,y[11]=b[14],y[12]=e,y[13]=a,y[14]=l}else y[0]=b[0],y[1]=b[4],y[2]=b[8],y[3]=b[12],y[4]=b[1],y[5]=b[5],y[6]=b[9],y[7]=b[13],y[8]=b[2],y[9]=b[6],y[10]=b[10],y[11]=b[14],y[12]=b[3],y[13]=b[7],y[14]=b[11],y[15]=b[15];return y}},{}],225:[function(x,ue,le){"use strict";var y=x("css-font"),b=x("pick-by-alias"),T=x("regl"),_=x("gl-util/context"),e=x("es6-weak-map"),o=x("color-normalize"),a=x("font-atlas"),l=x("typedarray-pool"),i=x("parse-rect"),v=x("is-plain-obj"),h=x("parse-unit"),s=x("to-px"),d=x("detect-kerning"),p=x("object-assign"),f=x("font-measure"),g=x("flatten-vertex-data"),m=x("bit-twiddle").nextPow2,u=new e,w=!1;if(document.body){var c=document.body.appendChild(document.createElement("div"));c.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(c).fontStretch&&(w=!0),document.body.removeChild(c)}var E=function(M){var S;this.gl="function"==typeof(S=M)&&S._gl&&S.prop&&S.texture&&S.buffer?(M={regl:M}).regl._gl:_(M),this.shader=u.get(this.gl),this.regl=this.shader?this.shader.regl:M.regl||T({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),u.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(v(M)?M:{})};E.prototype.createShader=function(){var M=this.regl,S=M({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:M.prop("count"),offset:M.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:M.this("sizeBuffer")},width:{offset:0,stride:8,buffer:M.this("sizeBuffer")},char:M.this("charBuffer"),position:M.this("position")},uniforms:{atlasSize:function(C,O){return[O.atlas.width,O.atlas.height]},atlasDim:function(C,O){return[O.atlas.cols,O.atlas.rows]},atlas:function(C,O){return O.atlas.texture},charStep:function(C,O){return O.atlas.step},em:function(C,O){return O.atlas.em},color:M.prop("color"),opacity:M.prop("opacity"),viewport:M.this("viewportArray"),scale:M.this("scale"),align:M.prop("align"),baseline:M.prop("baseline"),translate:M.this("translate"),positionOffset:M.prop("positionOffset")},primitive:"points",viewport:M.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:M,draw:S,atlas:{}}},E.prototype.update=function(M){var S=this;if("string"==typeof M)M={text:M};else if(!M)return;null!=(M=b(M,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(M.opacity)?M.opacity.map(function(Ae){return parseFloat(Ae)}):parseFloat(M.opacity)),null!=M.viewport&&(this.viewport=i(M.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=M.kerning&&(this.kerning=M.kerning),null!=M.offset&&("number"==typeof M.offset&&(M.offset=[M.offset,0]),this.positionOffset=g(M.offset)),M.direction&&(this.direction=M.direction),M.range&&(this.range=M.range,this.scale=[1/(M.range[2]-M.range[0]),1/(M.range[3]-M.range[1])],this.translate=[-M.range[0],-M.range[1]]),M.scale&&(this.scale=M.scale),M.translate&&(this.translate=M.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||M.font||(M.font=E.baseFontSize+"px sans-serif");var C,O=!1,I=!1;if(M.font&&(Array.isArray(M.font)?M.font:[M.font]).forEach(function(Ae,Fe){if("string"==typeof Ae)try{Ae=y.parse(Ae)}catch(ut){Ae=y.parse(E.baseFontSize+"px "+Ae)}else Ae=y.parse(y.stringify(Ae));var Pe=y.stringify({size:E.baseFontSize,family:Ae.family,stretch:w?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style}),Be=h(Ae.size),qe=Math.round(Be[0]*s(Be[1]));if(qe!==S.fontSize[Fe]&&(I=!0,S.fontSize[Fe]=qe),!(S.font[Fe]&&Pe==S.font[Fe].baseString||(O=!0,S.font[Fe]=E.fonts[Pe],S.font[Fe]))){var We=Ae.family.join(", "),Je=[Ae.style];Ae.style!=Ae.variant&&Je.push(Ae.variant),Ae.variant!=Ae.weight&&Je.push(Ae.weight),w&&Ae.weight!=Ae.stretch&&Je.push(Ae.stretch),S.font[Fe]={baseString:Pe,family:We,weight:Ae.weight,stretch:Ae.stretch,style:Ae.style,variant:Ae.variant,width:{},kerning:{},metrics:f(We,{origin:"top",fontSize:E.baseFontSize,fontStyle:Je.join(" ")})},E.fonts[Pe]=S.font[Fe]}}),(O||I)&&this.font.forEach(function(Ae,Fe){var Pe=y.stringify({size:S.fontSize[Fe],family:Ae.family,stretch:w?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style});S.fontAtlas[Fe]=S.shader.atlas[Pe],S.fontAtlas[Fe]||(S.shader.atlas[Pe]=S.fontAtlas[Fe]={fontString:Pe,step:2*Math.ceil(S.fontSize[Fe]*Ae.metrics.bottom*.5),em:S.fontSize[Fe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:S.regl.texture()}),null==M.text&&(M.text=S.text)}),"string"==typeof M.text&&M.position&&M.position.length>2){for(var N=Array(.5*M.position.length),F=0;F<N.length;F++)N[F]=M.text;M.text=N}if(null!=M.text||O){if(this.textOffsets=[0],Array.isArray(M.text)){this.count=M.text[0].length,this.counts=[this.count];for(var L=1;L<M.text.length;L++)this.textOffsets[L]=this.textOffsets[L-1]+M.text[L-1].length,this.count+=M.text[L].length,this.counts.push(M.text[L].length);this.text=M.text.join("")}else this.text=M.text,this.count=this.text.length,this.counts=[this.count];C=[],this.font.forEach(function(Ae,Fe){E.atlasContext.font=Ae.baseString;for(var Pe=S.fontAtlas[Fe],Be=0;Be<S.text.length;Be++){var qe=S.text.charAt(Be);if(null==Pe.ids[qe]&&(Pe.ids[qe]=Pe.chars.length,Pe.chars.push(qe),C.push(qe)),null==Ae.width[qe]&&(Ae.width[qe]=E.atlasContext.measureText(qe).width/E.baseFontSize,S.kerning)){var We=[];for(var Je in Ae.width)We.push(Je+qe,qe+Je);p(Ae.kerning,d(Ae.family,{pairs:We}))}}})}if(M.position)if(M.position.length>2){for(var P=!M.position[0].length,j=l.mallocFloat(2*this.count),U=0,$=0;U<this.counts.length;U++){var X=this.counts[U];if(P)for(var te=0;te<X;te++)j[$++]=M.position[2*U],j[$++]=M.position[2*U+1];else for(var ae=0;ae<X;ae++)j[$++]=M.position[U][0],j[$++]=M.position[U][1]}this.position.call?this.position({type:"float",data:j}):this.position=this.regl.buffer({type:"float",data:j}),l.freeFloat(j)}else this.position.destroy&&this.position.destroy(),this.position={constant:M.position};if(M.text||O){var J=l.mallocUint8(this.count),ee=l.mallocFloat(2*this.count);this.textWidth=[];for(var se=0,G=0;se<this.counts.length;se++){for(var H=this.counts[se],Y=this.font[se]||this.font[0],oe=this.fontAtlas[se]||this.fontAtlas[0],W=0;W<H;W++){var ne=this.text.charAt(G),re=this.text.charAt(G-1);if(J[G]=oe.ids[ne],ee[2*G]=Y.width[ne],W){var me=ee[2*G-1]+.5*ee[2*G-2]+.5*ee[2*G];if(this.kerning){var pe=Y.kerning[re+ne];pe&&(me+=.001*pe)}ee[2*G+1]=me}else ee[2*G+1]=.5*ee[2*G];G++}this.textWidth.push(ee.length?.5*ee[2*G-2]+ee[2*G-1]:0)}M.align||(M.align=this.align),this.charBuffer({data:J,type:"uint8",usage:"stream"}),this.sizeBuffer({data:ee,type:"float",usage:"stream"}),l.freeUint8(J),l.freeFloat(ee),C.length&&this.font.forEach(function(Ae,Fe){var Pe=S.fontAtlas[Fe],Be=Pe.step,qe=Math.floor(E.maxAtlasSize/Be),We=Math.min(qe,Pe.chars.length),Je=Math.ceil(Pe.chars.length/We),ut=m(We*Be),Ge=m(Je*Be);Pe.width=ut,Pe.height=Ge,Pe.rows=Je,Pe.cols=We,Pe.em&&Pe.texture({data:a({canvas:E.atlasCanvas,font:Pe.fontString,chars:Pe.chars,shape:[ut,Ge],step:[Be,Be]})})})}if(M.align&&(this.align=M.align,this.alignOffset=this.textWidth.map(function(Ae,Fe){var Pe=Array.isArray(S.align)?S.align.length>1?S.align[Fe]:S.align[0]:S.align;if("number"==typeof Pe)return Pe;switch(Pe){case"right":case"end":return-Ae;case"center":case"centre":case"middle":return.5*-Ae}return 0})),null==this.baseline&&null==M.baseline&&(M.baseline=0),null!=M.baseline&&(this.baseline=M.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Ae,Fe){var Pe=(S.font[Fe]||S.font[0]).metrics,Be=0;return-1*((Be+=.5*Pe.bottom)+("number"==typeof Ae?Ae-Pe.baseline:-Pe[Ae]))})),null!=M.color)if(M.color||(M.color="transparent"),"string"!=typeof M.color&&isNaN(M.color)){var we;if("number"==typeof M.color[0]&&M.color.length>this.counts.length){var ye=M.color.length;we=l.mallocUint8(ye);for(var Te=(M.color.subarray||M.color.slice).bind(M.color),Le=0;Le<ye;Le+=4)we.set(o(Te(Le,Le+4),"uint8"),Le)}else{var Oe=M.color.length;we=l.mallocUint8(4*Oe);for(var Re=0;Re<Oe;Re++)we.set(o(M.color[Re]||0,"uint8"),4*Re)}this.color=we}else this.color=o(M.color,"uint8");if(M.position||M.text||M.color||M.baseline||M.align||M.font||M.offset||M.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Ve=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Ve);for(var _e=0;_e<this.batch.length;_e++)this.batch[_e]={count:this.counts.length>1?this.counts[_e]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[_e]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*_e,4*_e+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[_e]:this.opacity,baseline:null!=this.baselineOffset[_e]?this.baselineOffset[_e]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[_e]?this.alignOffset[_e]:this.alignOffset[0]:0,atlas:this.fontAtlas[_e]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*_e,2*_e+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},E.prototype.destroy=function(){},E.prototype.kerning=!0,E.prototype.position={constant:new Float32Array(2)},E.prototype.translate=null,E.prototype.scale=null,E.prototype.font=null,E.prototype.text="",E.prototype.positionOffset=[0,0],E.prototype.opacity=1,E.prototype.color=new Uint8Array([0,0,0,255]),E.prototype.alignOffset=[0,0],E.maxAtlasSize=1024,E.atlasCanvas=document.createElement("canvas"),E.atlasContext=E.atlasCanvas.getContext("2d",{alpha:!1}),E.baseFontSize=64,E.fonts={},ue.exports=E},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(x,ue,le){(function(y){(function(){"use strict";var b=x("pick-by-alias");function T(o){if(o.container)if(o.container==document.body)document.body.style.width||(o.canvas.width=o.width||o.pixelRatio*y.innerWidth),document.body.style.height||(o.canvas.height=o.height||o.pixelRatio*y.innerHeight);else{var a=o.container.getBoundingClientRect();o.canvas.width=o.width||a.right-a.left,o.canvas.height=o.height||a.bottom-a.top}}function _(o){return"function"==typeof o.getContext&&"width"in o&&"height"in o}function e(){var o=document.createElement("canvas");return o.style.position="absolute",o.style.top=0,o.style.left=0,o}ue.exports=function(o){var a,i;if(o?"string"==typeof o&&(o={container:o}):o={},(o=_(o)||"string"==typeof(a=o).nodeName&&"function"==typeof a.appendChild&&"function"==typeof a.getBoundingClientRect?{container:o}:"function"==typeof(i=o).drawArrays||"function"==typeof i.drawElements?{gl:o}:b(o,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(o.pixelRatio=y.pixelRatio||1),o.gl)return o.gl;if(o.canvas&&(o.container=o.canvas.parentNode),o.container){if("string"==typeof o.container){var l=document.querySelector(o.container);if(!l)throw Error("Element "+o.container+" is not found");o.container=l}_(o.container)?(o.canvas=o.container,o.container=o.canvas.parentNode):o.canvas||(o.canvas=e(),o.container.appendChild(o.canvas),T(o))}else if(!o.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");o.container=document.body||document.documentElement,o.canvas=e(),o.container.appendChild(o.canvas),T(o)}return o.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(i){try{o.gl=o.canvas.getContext(i,o.attrs)}catch(v){}return o.gl}),o.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(x,ue,le){ue.exports=function(y){"string"==typeof y&&(y=[y]);for(var b=[].slice.call(arguments,1),T=[],_=0;_<y.length-1;_++)T.push(y[_],b[_]||"");return T.push(y[_]),T.join("")}},{}],228:[function(x,ue,le){(function(y){(function(){"use strict";var b,T=x("is-browser");b="function"==typeof y.matchMedia?!y.matchMedia("(hover: none)").matches:T,ue.exports=b}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(x,ue,le){"use strict";var y=x("is-browser");ue.exports=y&&function(){var b=!1;try{var T=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch(_){b=!1}return b}()},{"is-browser":232}],230:[function(x,ue,le){le.read=function(y,b,T,_,e){var o,a,l=8*e-_-1,i=(1<<l)-1,v=i>>1,h=-7,s=T?e-1:0,d=T?-1:1,p=y[b+s];for(s+=d,o=p&(1<<-h)-1,p>>=-h,h+=l;h>0;o=256*o+y[b+s],s+=d,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=_;h>0;a=256*a+y[b+s],s+=d,h-=8);if(0===o)o=1-v;else{if(o===i)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,_),o-=v}return(p?-1:1)*a*Math.pow(2,o-_)},le.write=function(y,b,T,_,e,o){var a,l,i,v=8*o-e-1,h=(1<<v)-1,s=h>>1,d=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,p=_?0:o-1,f=_?1:-1,g=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(l=isNaN(b)?1:0,a=h):(a=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-a))<1&&(a--,i*=2),(b+=a+s>=1?d/i:d*Math.pow(2,1-s))*i>=2&&(a++,i/=2),a+s>=h?(l=0,a=h):a+s>=1?(l=(b*i-1)*Math.pow(2,e),a+=s):(l=b*Math.pow(2,s-1)*Math.pow(2,e),a=0));e>=8;y[T+p]=255&l,p+=f,l/=256,e-=8);for(a=a<<e|l,v+=e;v>0;y[T+p]=255&a,p+=f,a/=256,v-=8);y[T+p-f]|=128*g}},{}],231:[function(x,ue,le){ue.exports="function"==typeof Object.create?function(y,b){b&&(y.super_=b,y.prototype=Object.create(b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}))}:function(y,b){if(b){y.super_=b;var T=function(){};T.prototype=b.prototype,y.prototype=new T,y.prototype.constructor=y}}},{}],232:[function(x,ue,le){ue.exports=!0},{}],233:[function(x,ue,le){"use strict";ue.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(x,ue,le){"use strict";ue.exports=T,ue.exports.isMobile=T,ue.exports.default=T;var y=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,b=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function T(_){_||(_={});var e=_.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var o=_.tablet?b.test(e):y.test(e);return!o&&_.tablet&&_.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(o=!0),o}},{}],235:[function(x,ue,le){"use strict";ue.exports=function(y){var b=typeof y;return null!==y&&("object"===b||"function"===b)}},{}],236:[function(x,ue,le){"use strict";var y=Object.prototype.toString;ue.exports=function(b){var T;return"[object Object]"===y.call(b)&&(null===(T=Object.getPrototypeOf(b))||T===Object.getPrototypeOf({}))}},{}],237:[function(x,ue,le){"use strict";ue.exports=function(y){for(var b,T=y.length,_=0;_<T;_++)if(((b=y.charCodeAt(_))<9||b>13)&&32!==b&&133!==b&&160!==b&&5760!==b&&6158!==b&&(b<8192||b>8205)&&8232!==b&&8233!==b&&8239!==b&&8287!==b&&8288!==b&&12288!==b&&65279!==b)return!1;return!0}},{}],238:[function(x,ue,le){"use strict";ue.exports=function(y){return"string"==typeof y&&(y=y.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(y)&&/[\dz]$/i.test(y)&&y.length>4))}},{}],239:[function(x,ue,le){var y,b;y=this,b=function(){"use strict";var y,b,T;function _(e,o){if(y)if(b){var a="var sharedChunk = {}; ("+y+")(sharedChunk); ("+b+")(sharedChunk);",l={};y(l),(T=o(l)).workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else b=o;else y=o}return _(0,function(e){function o(D,z){return D(z={exports:{}},z.exports),z.exports}var a=l;function l(D,z,Q,he){this.cx=3*D,this.bx=3*(Q-D)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(he-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=D,this.p1y=he,this.p2x=Q,this.p2y=he}l.prototype.sampleCurveX=function(D){return((this.ax*D+this.bx)*D+this.cx)*D},l.prototype.sampleCurveY=function(D){return((this.ay*D+this.by)*D+this.cy)*D},l.prototype.sampleCurveDerivativeX=function(D){return(3*this.ax*D+2*this.bx)*D+this.cx},l.prototype.solveCurveX=function(D,z){var Q,he,xe,Se,ze;for(void 0===z&&(z=1e-6),xe=D,ze=0;ze<8;ze++){if(Se=this.sampleCurveX(xe)-D,Math.abs(Se)<z)return xe;var Ze=this.sampleCurveDerivativeX(xe);if(Math.abs(Ze)<1e-6)break;xe-=Se/Ze}if((xe=D)<(Q=0))return Q;if(xe>(he=1))return he;for(;Q<he;){if(Se=this.sampleCurveX(xe),Math.abs(Se-D)<z)return xe;D>Se?Q=xe:he=xe,xe=.5*(he-Q)+Q}return xe},l.prototype.solve=function(D,z){return this.sampleCurveY(this.solveCurveX(D,z))};var i=v;function v(D,z){this.x=D,this.y=z}function h(D,z,Q,he){var xe=new a(D,z,Q,he);return function(Se){return xe.solve(Se)}}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(D){return this.clone()._add(D)},sub:function(D){return this.clone()._sub(D)},multByPoint:function(D){return this.clone()._multByPoint(D)},divByPoint:function(D){return this.clone()._divByPoint(D)},mult:function(D){return this.clone()._mult(D)},div:function(D){return this.clone()._div(D)},rotate:function(D){return this.clone()._rotate(D)},rotateAround:function(D,z){return this.clone()._rotateAround(D,z)},matMult:function(D){return this.clone()._matMult(D)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(D){return this.x===D.x&&this.y===D.y},dist:function(D){return Math.sqrt(this.distSqr(D))},distSqr:function(D){var z=D.x-this.x,Q=D.y-this.y;return z*z+Q*Q},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(D){return Math.atan2(this.y-D.y,this.x-D.x)},angleWith:function(D){return this.angleWithSep(D.x,D.y)},angleWithSep:function(D,z){return Math.atan2(this.x*z-this.y*D,this.x*D+this.y*z)},_matMult:function(D){var Q=D[2]*this.x+D[3]*this.y;return this.x=D[0]*this.x+D[1]*this.y,this.y=Q,this},_add:function(D){return this.x+=D.x,this.y+=D.y,this},_sub:function(D){return this.x-=D.x,this.y-=D.y,this},_mult:function(D){return this.x*=D,this.y*=D,this},_div:function(D){return this.x/=D,this.y/=D,this},_multByPoint:function(D){return this.x*=D.x,this.y*=D.y,this},_divByPoint:function(D){return this.x/=D.x,this.y/=D.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var D=this.y;return this.y=this.x,this.x=-D,this},_rotate:function(D){var z=Math.cos(D),Q=Math.sin(D),xe=Q*this.x+z*this.y;return this.x=z*this.x-Q*this.y,this.y=xe,this},_rotateAround:function(D,z){var Q=Math.cos(D),he=Math.sin(D),Se=z.y+he*(this.x-z.x)+Q*(this.y-z.y);return this.x=z.x+Q*(this.x-z.x)-he*(this.y-z.y),this.y=Se,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(D){return D instanceof v?D:Array.isArray(D)?new v(D[0],D[1]):D};var s=h(.25,.1,.25,1);function d(D,z,Q){return Math.min(Q,Math.max(z,D))}function p(D,z,Q){var he=Q-z,xe=((D-z)%he+he)%he+z;return xe===z?Q:xe}function f(D){for(var z=[],Q=arguments.length-1;Q-- >0;)z[Q]=arguments[Q+1];for(var he=0,xe=z;he<xe.length;he+=1){var Se=xe[he];for(var ze in Se)D[ze]=Se[ze]}return D}var g=1;function m(){return g++}function u(){return function D(z){return z?(z^16*Math.random()>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,D)}()}function w(D){return!!D&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(D)}function c(D,z){D.forEach(function(Q){z[Q]&&(z[Q]=z[Q].bind(z))})}function E(D,z){return-1!==D.indexOf(z,D.length-z.length)}function M(D,z,Q){var he={};for(var xe in D)he[xe]=z.call(Q||this,D[xe],xe,D);return he}function S(D,z,Q){var he={};for(var xe in D)z.call(Q||this,D[xe],xe,D)&&(he[xe]=D[xe]);return he}function C(D){return Array.isArray(D)?D.map(C):"object"==typeof D&&D?M(D,C):D}var O={};function I(D){O[D]||("undefined"!=typeof console&&console.warn(D),O[D]=!0)}function N(D,z,Q){return(Q.y-D.y)*(z.x-D.x)>(z.y-D.y)*(Q.x-D.x)}function F(D){for(var z=0,Q=0,he=D.length,xe=he-1,Se=void 0,ze=void 0;Q<he;xe=Q++)z+=((ze=D[xe]).x-(Se=D[Q]).x)*(Se.y+ze.y);return z}function L(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function P(D){var z={};if(D.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(he,xe,Se,ze){var Ze=Se||ze;return z[xe]=!Ze||Ze.toLowerCase(),""}),z["max-age"]){var Q=parseInt(z["max-age"],10);isNaN(Q)?delete z["max-age"]:z["max-age"]=Q}return z}var j=null;function U(D){if(null==j){var z=D.navigator?D.navigator.userAgent:null;j=!!D.safari||!(!z||!(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return j}function $(D){try{var z=self[D];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch(Q){return!1}}var X,te,ae,J,ee=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),se=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,G=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,H={now:ee,frame:function(D){var z=se(D);return{cancel:function(){return G(z)}}},getImageData:function(D,z){void 0===z&&(z=0);var Q=self.document.createElement("canvas"),he=Q.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return Q.width=D.width,Q.height=D.height,he.drawImage(D,0,0,D.width,D.height),he.getImageData(-z,-z,D.width+2*z,D.height+2*z)},resolveURL:function(D){return X||(X=self.document.createElement("a")),X.href=D,X.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==te&&(te=self.matchMedia("(prefers-reduced-motion: reduce)")),te.matches)}},Y={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},oe={supported:!1,testSupport:function(D){W||!J||(ne?re(D):ae=D)}},W=!1,ne=!1;function re(D){var z=D.createTexture();D.bindTexture(D.TEXTURE_2D,z);try{if(D.texImage2D(D.TEXTURE_2D,0,D.RGBA,D.RGBA,D.UNSIGNED_BYTE,J),D.isContextLost())return;oe.supported=!0}catch(Q){}D.deleteTexture(z),W=!0}self.document&&((J=self.document.createElement("img")).onload=function(){ae&&re(ae),ae=null,ne=!0},J.onerror=function(){W=!0,ae=null},J.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ce="01",fe=function(D,z){this._transformRequestFn=D,this._customAccessToken=z,this._createSkuToken()};function me(D){return 0===D.indexOf("mapbox:")}fe.prototype._createSkuToken=function(){var D=function(){for(var z="",Q=0;Q<10;Q++)z+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ce,z].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=D.token,this._skuTokenExpiresAt=D.tokenExpiresAt},fe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},fe.prototype.transformRequest=function(D,z){return this._transformRequestFn&&this._transformRequestFn(D,z)||{url:D}},fe.prototype.normalizeStyleURL=function(D,z){if(!me(D))return D;var Q=Te(D);return Q.path="/styles/v1"+Q.path,this._makeAPIURL(Q,this._customAccessToken||z)},fe.prototype.normalizeGlyphsURL=function(D,z){if(!me(D))return D;var Q=Te(D);return Q.path="/fonts/v1"+Q.path,this._makeAPIURL(Q,this._customAccessToken||z)},fe.prototype.normalizeSourceURL=function(D,z){if(!me(D))return D;var Q=Te(D);return Q.path="/v4/"+Q.authority+".json",Q.params.push("secure"),this._makeAPIURL(Q,this._customAccessToken||z)},fe.prototype.normalizeSpriteURL=function(D,z,Q,he){var xe=Te(D);return me(D)?(xe.path="/styles/v1"+xe.path+"/sprite"+z+Q,this._makeAPIURL(xe,this._customAccessToken||he)):(xe.path+=""+z+Q,Le(xe))},fe.prototype.normalizeTileURL=function(D,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),D&&!me(D))return D;var Q=Te(D);Q.path=Q.path.replace(/(\.(png|jpg)\d*)(?=$)/,(H.devicePixelRatio>=2||512===z?"@2x":"")+(oe.supported?".webp":"$1")),Q.path=Q.path.replace(/^.+\/v4\//,"/"),Q.path="/v4"+Q.path;var Se=this._customAccessToken||function(ze){for(var Ze=0,lt=ze;Ze<lt.length;Ze+=1){var _t=lt[Ze].match(/^access_token=(.*)$/);if(_t)return _t[1]}return null}(Q.params)||Y.ACCESS_TOKEN;return Y.REQUIRE_ACCESS_TOKEN&&Se&&this._skuToken&&Q.params.push("sku="+this._skuToken),this._makeAPIURL(Q,Se)},fe.prototype.canonicalizeTileURL=function(D,z){var Q=Te(D);if(!Q.path.match(/(^\/v4\/)/)||!Q.path.match(/\.[\w]+$/))return D;var he="mapbox://tiles/";he+=Q.path.replace("/v4/","");var xe=Q.params;return z&&(xe=xe.filter(function(Se){return!Se.match(/^access_token=/)})),xe.length&&(he+="?"+xe.join("&")),he},fe.prototype.canonicalizeTileset=function(D,z){for(var Q=!!z&&me(z),he=[],xe=0,Se=D.tiles||[];xe<Se.length;xe+=1){var ze=Se[xe];we(ze)?he.push(this.canonicalizeTileURL(ze,Q)):he.push(ze)}return he},fe.prototype._makeAPIURL=function(D,z){var Q="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",he=Te(Y.API_URL);if(D.protocol=he.protocol,D.authority=he.authority,"/"!==he.path&&(D.path=""+he.path+D.path),!Y.REQUIRE_ACCESS_TOKEN)return Le(D);if(!(z=z||Y.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Q);if("s"===z[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Q);return D.params=D.params.filter(function(xe){return-1===xe.indexOf("access_token")}),D.params.push("access_token="+z),Le(D)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function we(D){return pe.test(D)}var ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Te(D){var z=D.match(ye);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function Le(D){var z=D.params.length?"?"+D.params.join("&"):"";return D.protocol+"://"+D.authority+D.path+z}function Oe(D){if(!D)return null;var Q=D.split(".");if(!Q||3!==Q.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(Q[1]).split("").map(function(he){return"%"+("00"+he.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(he){return null}}var Re=function(D){this.type=D,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Re.prototype.getStorageKey=function(D){var he,Q=Oe(Y.ACCESS_TOKEN);return he=Q&&Q.u?self.btoa(encodeURIComponent(Q.u).replace(/%([0-9A-F]{2})/g,function(xe,Se){return String.fromCharCode(Number("0x"+Se))})):Y.ACCESS_TOKEN||"",D?"mapbox.eventData."+D+":"+he:"mapbox.eventData:"+he},Re.prototype.fetchEventData=function(){var D=$("localStorage"),z=this.getStorageKey(),Q=this.getStorageKey("uuid");if(D)try{var he=self.localStorage.getItem(z);he&&(this.eventData=JSON.parse(he));var xe=self.localStorage.getItem(Q);xe&&(this.anonId=xe)}catch(Se){I("Unable to read from LocalStorage")}},Re.prototype.saveEventData=function(){var D=$("localStorage"),z=this.getStorageKey(),Q=this.getStorageKey("uuid");if(D)try{self.localStorage.setItem(Q,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(z,JSON.stringify(this.eventData))}catch(he){I("Unable to write to LocalStorage")}},Re.prototype.processRequests=function(D){},Re.prototype.postEvent=function(D,z,Q,he){var xe=this;if(Y.EVENTS_URL){var Se=Te(Y.EVENTS_URL);Se.params.push("access_token="+(he||Y.ACCESS_TOKEN||""));var ze={event:this.type,created:new Date(D).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:ce,userId:this.anonId},Ze=z?f(ze,z):ze,lt={url:Le(Se),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ze])};this.pendingRequest=rn(lt,function(_t){xe.pendingRequest=null,Q(_t),xe.saveEventData(),xe.processRequests(he)})}},Re.prototype.queueRequest=function(D,z){this.queue.push(D),this.processRequests(z)};var Ve,_e,Ae=function(D){function z(){D.call(this,"map.load"),this.success={},this.skuToken=""}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.postMapLoadEvent=function(Q,he,xe,Se){this.skuToken=xe,(Y.EVENTS_URL&&Se||Y.ACCESS_TOKEN&&Array.isArray(Q)&&Q.some(function(ze){return me(ze)||we(ze)}))&&this.queueRequest({id:he,timestamp:Date.now()},Se)},z.prototype.processRequests=function(Q){var he=this;if(!this.pendingRequest&&0!==this.queue.length){var xe=this.queue.shift(),Se=xe.id,ze=xe.timestamp;Se&&this.success[Se]||(this.anonId||this.fetchEventData(),w(this.anonId)||(this.anonId=u()),this.postEvent(ze,{skuToken:this.skuToken},function(Ze){Ze||Se&&(he.success[Se]=!0)},Q))}},z}(Re),Fe=new(function(D){function z(Q){D.call(this,"appUserTurnstile"),this._customAccessToken=Q}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.postTurnstileEvent=function(Q,he){Y.EVENTS_URL&&Y.ACCESS_TOKEN&&Array.isArray(Q)&&Q.some(function(xe){return me(xe)||we(xe)})&&this.queueRequest(Date.now(),he)},z.prototype.processRequests=function(Q){var he=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var xe=Oe(Y.ACCESS_TOKEN),Se=xe?xe.u:Y.ACCESS_TOKEN,ze=Se!==this.eventData.tokenU;w(this.anonId)||(this.anonId=u(),ze=!0);var Ze=this.queue.shift();if(this.eventData.lastSuccess){var lt=new Date(this.eventData.lastSuccess),_t=new Date(Ze),kt=(Ze-this.eventData.lastSuccess)/864e5;ze=ze||kt>=1||kt<-1||lt.getDate()!==_t.getDate()}else ze=!0;if(!ze)return this.processRequests();this.postEvent(Ze,{"enabled.telemetry":!1},function(Zt){Zt||(he.eventData.lastSuccess=Ze,he.eventData.tokenU=Se)},Q)}},z}(Re)),Pe=Fe.postTurnstileEvent.bind(Fe),Be=new Ae,qe=Be.postMapLoadEvent.bind(Be),We=500,Je=50;function ut(){self.caches&&!Ve&&(Ve=self.caches.open("mapbox-tiles"))}function Ke(D){var z=D.indexOf("?");return z<0?D:D.slice(0,z)}var it,ht=1/0;function Tt(){return null==it&&(it=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),it}var Ct={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ct);var Vt=function(D){function z(Q,he,xe){401===he&&we(xe)&&(Q+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),D.call(this,Q),this.status=he,this.url=xe,this.name=this.constructor.name,this.message=Q}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),Ft=L()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function gt(D,z){var Q,he=new self.AbortController,xe=new self.Request(D.url,{method:D.method||"GET",body:D.body,credentials:D.credentials,headers:D.headers,referrer:Ft(),signal:he.signal}),Se=!1,ze=!1,Ze=(Q=xe.url).indexOf("sku=")>0&&we(Q);"json"===D.type&&xe.headers.set("Accept","application/json");var lt=function(kt,Zt,sn){if(!ze){if(kt&&"SecurityError"!==kt.message&&I(kt),Zt&&sn)return _t(Zt);var en=Date.now();self.fetch(xe).then(function(xn){if(xn.ok){var Fn=Ze?xn.clone():null;return _t(xn,Fn,en)}return z(new Vt(xn.statusText,xn.status,D.url))}).catch(function(xn){20!==xn.code&&z(new Error(xn.message))})}},_t=function(kt,Zt,sn){("arrayBuffer"===D.type?kt.arrayBuffer():"json"===D.type?kt.json():kt.text()).then(function(en){ze||(Zt&&sn&&function Ge(D,z,Q){if(ut(),Ve){var he={status:z.status,statusText:z.statusText,headers:new self.Headers};z.headers.forEach(function(Se,ze){return he.headers.set(ze,Se)});var xe=P(z.headers.get("Cache-Control")||"");xe["no-store"]||(xe["max-age"]&&he.headers.set("Expires",new Date(Q+1e3*xe["max-age"]).toUTCString()),new Date(he.headers.get("Expires")).getTime()-Q<42e4||function(Se,ze){if(void 0===_e)try{new Response(new ReadableStream),_e=!0}catch(Ze){_e=!1}_e?ze(Se.body):Se.blob().then(ze)}(z,function(Se){var ze=new self.Response(Se,he);ut(),Ve&&Ve.then(function(Ze){return Ze.put(Ke(D.url),ze)}).catch(function(Ze){return I(Ze.message)})}))}}(xe,Zt,sn),Se=!0,z(null,en,kt.headers.get("Cache-Control"),kt.headers.get("Expires")))}).catch(function(en){ze||z(new Error(en.message))})};return Ze?function nt(D,z){if(ut(),!Ve)return z(null);var Q=Ke(D.url);Ve.then(function(he){he.match(Q).then(function(xe){var Se=function(ze){if(!ze)return!1;var Ze=new Date(ze.headers.get("Expires")||0),lt=P(ze.headers.get("Cache-Control")||"");return Ze>Date.now()&&!lt["no-cache"]}(xe);he.delete(Q),Se&&he.put(Q,xe.clone()),z(null,xe,Se)}).catch(z)}).catch(z)}(xe,lt):lt(null,null),{cancel:function(){ze=!0,Se||he.abort()}}}var un,pn,ft=function(D,z){if(!(/^file:/.test(Q=D.url)||/^file:/.test(Ft())&&!/^\w+:/.test(Q))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return gt(D,z);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",D,z,void 0,!0)}var Q;return function(he,xe){var Se=new self.XMLHttpRequest;for(var ze in Se.open(he.method||"GET",he.url,!0),"arrayBuffer"===he.type&&(Se.responseType="arraybuffer"),he.headers)Se.setRequestHeader(ze,he.headers[ze]);return"json"===he.type&&(Se.responseType="text",Se.setRequestHeader("Accept","application/json")),Se.withCredentials="include"===he.credentials,Se.onerror=function(){xe(new Error(Se.statusText))},Se.onload=function(){if((Se.status>=200&&Se.status<300||0===Se.status)&&null!==Se.response){var Ze=Se.response;if("json"===he.type)try{Ze=JSON.parse(Se.response)}catch(lt){return xe(lt)}xe(null,Ze,Se.getResponseHeader("Cache-Control"),Se.getResponseHeader("Expires"))}else xe(new Vt(Se.statusText,Se.status,he.url))},Se.send(he.body),{cancel:function(){return Se.abort()}}}(D,z)},Bt=function(D,z){return ft(f(D,{type:"arrayBuffer"}),z)},rn=function(D,z){return ft(f(D,{method:"POST"}),z)};un=[],pn=0;var dn=function(D,z){if(oe.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*"),pn>=Y.MAX_PARALLEL_IMAGE_REQUESTS){var Q={requestParameters:D,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return un.push(Q),Q}pn++;var he=!1,xe=function(){if(!he)for(he=!0,pn--;un.length&&pn<Y.MAX_PARALLEL_IMAGE_REQUESTS;){var ze=un.shift();ze.cancelled||(ze.cancel=dn(ze.requestParameters,ze.callback).cancel)}},Se=Bt(D,function(ze,Ze,lt,_t){var Zt,sn;xe(),ze?z(ze):Ze&&(Tt()?(Zt=z,sn=new self.Blob([new Uint8Array(Ze)],{type:"image/png"}),self.createImageBitmap(sn).then(function(en){Zt(null,en)}).catch(function(en){Zt(new Error("Could not load image because of "+en.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(kt,Zt,sn,en){var xn=new self.Image,Fn=self.URL;xn.onload=function(){Zt(null,xn),Fn.revokeObjectURL(xn.src)},xn.onerror=function(){return Zt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Gn=new self.Blob([new Uint8Array(kt)],{type:"image/png"});xn.cacheControl=sn,xn.expires=en,xn.src=kt.byteLength?Fn.createObjectURL(Gn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ze,z,lt,_t))});return{cancel:function(){Se.cancel(),xe()}}};function Mn(D,z,Q){Q[D]&&-1!==Q[D].indexOf(z)||(Q[D]=Q[D]||[],Q[D].push(z))}function ln(D,z,Q){if(Q&&Q[D]){var he=Q[D].indexOf(z);-1!==he&&Q[D].splice(he,1)}}var Ee=function(D,z){void 0===z&&(z={}),f(this,z),this.type=D},De=function(D){function z(Q,he){void 0===he&&(he={}),D.call(this,"error",f({error:Q},he))}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z}(Ee),Ie=function(){};Ie.prototype.on=function(D,z){return this._listeners=this._listeners||{},Mn(D,z,this._listeners),this},Ie.prototype.off=function(D,z){return ln(D,z,this._listeners),ln(D,z,this._oneTimeListeners),this},Ie.prototype.once=function(D,z){return this._oneTimeListeners=this._oneTimeListeners||{},Mn(D,z,this._oneTimeListeners),this},Ie.prototype.fire=function(D,z){"string"==typeof D&&(D=new Ee(D,z||{}));var Q=D.type;if(this.listens(Q)){D.target=this;for(var he=0,xe=this._listeners&&this._listeners[Q]?this._listeners[Q].slice():[];he<xe.length;he+=1)xe[he].call(this,D);for(var Se=0,ze=this._oneTimeListeners&&this._oneTimeListeners[Q]?this._oneTimeListeners[Q].slice():[];Se<ze.length;Se+=1){var Ze=ze[Se];ln(Q,Ze,this._oneTimeListeners),Ze.call(this,D)}var lt=this._eventedParent;lt&&(f(D,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),lt.fire(D))}else D instanceof De&&console.error(D.error);return this},Ie.prototype.listens=function(D){return this._listeners&&this._listeners[D]&&this._listeners[D].length>0||this._oneTimeListeners&&this._oneTimeListeners[D]&&this._oneTimeListeners[D].length>0||this._eventedParent&&this._eventedParent.listens(D)},Ie.prototype.setEventedParent=function(D,z){return this._eventedParent=D,this._eventedParentData=z,this};var He={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ye=function(D,z,Q,he){this.message=(D?D+": ":"")+Q,he&&(this.identifier=he),null!=z&&z.__line__&&(this.line=z.__line__)};function tt(D){var Q=D.value;return Q?[new Ye(D.key,Q,"constants have been deprecated as of v8")]:[]}function ot(D){for(var z=[],Q=arguments.length-1;Q-- >0;)z[Q]=arguments[Q+1];for(var he=0,xe=z;he<xe.length;he+=1){var Se=xe[he];for(var ze in Se)D[ze]=Se[ze]}return D}function st(D){return D instanceof Number||D instanceof String||D instanceof Boolean?D.valueOf():D}function bt(D){if(Array.isArray(D))return D.map(bt);if(D instanceof Object&&!(D instanceof Number||D instanceof String||D instanceof Boolean)){var z={};for(var Q in D)z[Q]=bt(D[Q]);return z}return st(D)}var wt=function(D){function z(Q,he){D.call(this,he),this.message=he,this.key=Q}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z}(Error),Ut=function(D,z){void 0===z&&(z=[]),this.parent=D,this.bindings={};for(var Q=0,he=z;Q<he.length;Q+=1){var xe=he[Q];this.bindings[xe[0]]=xe[1]}};Ut.prototype.concat=function(D){return new Ut(this,D)},Ut.prototype.get=function(D){if(this.bindings[D])return this.bindings[D];if(this.parent)return this.parent.get(D);throw new Error(D+" not found in scope.")},Ut.prototype.has=function(D){return!!this.bindings[D]||!!this.parent&&this.parent.has(D)};var Kt={kind:"null"},vt={kind:"number"},Et={kind:"string"},$t={kind:"boolean"},Dt={kind:"color"},Pt={kind:"object"},je={kind:"value"},rt={kind:"collator"},pt={kind:"formatted"},It={kind:"resolvedImage"};function jt(D,z){return{kind:"array",itemType:D,N:z}}function Qt(D){if("array"===D.kind){var z=Qt(D.itemType);return"number"==typeof D.N?"array<"+z+", "+D.N+">":"value"===D.itemType.kind?"array":"array<"+z+">"}return D.kind}var fn=[Kt,vt,Et,$t,Dt,pt,Pt,jt(je),It];function an(D,z){if("error"===z.kind)return null;if("array"===D.kind){if("array"===z.kind&&(0===z.N&&"value"===z.itemType.kind||!an(D.itemType,z.itemType))&&("number"!=typeof D.N||D.N===z.N))return null}else{if(D.kind===z.kind)return null;if("value"===D.kind)for(var Q=0,he=fn;Q<he.length;Q+=1)if(!an(he[Q],z))return null}return"Expected "+Qt(D)+" but found "+Qt(z)+" instead."}function Sn(D,z){return z.some(function(Q){return Q.kind===D.kind})}function Yn(D,z){return z.some(function(Q){return"null"===Q?null===D:"array"===Q?Array.isArray(D):"object"===Q?D&&!Array.isArray(D)&&"object"==typeof D:Q===typeof D})}var kn=o(function(D,z){var Q={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function he(lt){return(lt=Math.round(lt))<0?0:lt>255?255:lt}function Se(lt){return he("%"===lt[lt.length-1]?parseFloat(lt)/100*255:parseInt(lt))}function ze(lt){return function xe(lt){return lt<0?0:lt>1?1:lt}("%"===lt[lt.length-1]?parseFloat(lt)/100:parseFloat(lt))}function Ze(lt,_t,kt){return kt<0?kt+=1:kt>1&&(kt-=1),6*kt<1?lt+(_t-lt)*kt*6:2*kt<1?_t:3*kt<2?lt+(_t-lt)*(2/3-kt)*6:lt}try{z.parseCSSColor=function(lt){var _t,kt=lt.replace(/ /g,"").toLowerCase();if(kt in Q)return Q[kt].slice();if("#"===kt[0])return 4===kt.length?(_t=parseInt(kt.substr(1),16))>=0&&_t<=4095?[(3840&_t)>>4|(3840&_t)>>8,240&_t|(240&_t)>>4,15&_t|(15&_t)<<4,1]:null:7===kt.length&&(_t=parseInt(kt.substr(1),16))>=0&&_t<=16777215?[(16711680&_t)>>16,(65280&_t)>>8,255&_t,1]:null;var Zt=kt.indexOf("("),sn=kt.indexOf(")");if(-1!==Zt&&sn+1===kt.length){var en=kt.substr(0,Zt),xn=kt.substr(Zt+1,sn-(Zt+1)).split(","),Fn=1;switch(en){case"rgba":if(4!==xn.length)return null;Fn=ze(xn.pop());case"rgb":return 3!==xn.length?null:[Se(xn[0]),Se(xn[1]),Se(xn[2]),Fn];case"hsla":if(4!==xn.length)return null;Fn=ze(xn.pop());case"hsl":if(3!==xn.length)return null;var Gn=(parseFloat(xn[0])%360+360)%360/360,qn=ze(xn[1]),ar=ze(xn[2]),lr=ar<=.5?ar*(qn+1):ar+qn-ar*qn,hr=2*ar-lr;return[he(255*Ze(hr,lr,Gn+1/3)),he(255*Ze(hr,lr,Gn)),he(255*Ze(hr,lr,Gn-1/3)),Fn];default:return null}}return null}}catch(lt){}}).parseCSSColor,cn=function(D,z,Q,he){void 0===he&&(he=1),this.r=D,this.g=z,this.b=Q,this.a=he};cn.parse=function(D){if(D){if(D instanceof cn)return D;if("string"==typeof D){var z=kn(D);if(z)return new cn(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},cn.prototype.toString=function(){var D=this.toArray(),Q=D[1],he=D[2],xe=D[3];return"rgba("+Math.round(D[0])+","+Math.round(Q)+","+Math.round(he)+","+xe+")"},cn.prototype.toArray=function(){var he=this.a;return 0===he?[0,0,0,0]:[255*this.r/he,255*this.g/he,255*this.b/he,he]},cn.black=new cn(0,0,0,1),cn.white=new cn(1,1,1,1),cn.transparent=new cn(0,0,0,0),cn.red=new cn(1,0,0,1);var vn=function(D,z,Q){this.sensitivity=D?z?"variant":"case":z?"accent":"base",this.locale=Q,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};vn.prototype.compare=function(D,z){return this.collator.compare(D,z)},vn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var hn=function(D,z,Q,he,xe){this.text=D,this.image=z,this.scale=Q,this.fontStack=he,this.textColor=xe},Dn=function(D){this.sections=D};Dn.fromString=function(D){return new Dn([new hn(D,null,null,null,null)])},Dn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(D){return 0!==D.text.length||D.image&&0!==D.image.name.length})},Dn.factory=function(D){return D instanceof Dn?D:Dn.fromString(D)},Dn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(D){return D.text}).join("")},Dn.prototype.serialize=function(){for(var D=["format"],z=0,Q=this.sections;z<Q.length;z+=1){var he=Q[z];if(he.image)D.push(["image",he.image.name]);else{D.push(he.text);var xe={};he.fontStack&&(xe["text-font"]=["literal",he.fontStack.split(",")]),he.scale&&(xe["font-scale"]=he.scale),he.textColor&&(xe["text-color"]=["rgba"].concat(he.textColor.toArray())),D.push(xe)}}return D};var Pn=function(D){this.name=D.name,this.available=D.available};function $n(D,z,Q,he){return"number"==typeof D&&D>=0&&D<=255&&"number"==typeof z&&z>=0&&z<=255&&"number"==typeof Q&&Q>=0&&Q<=255?void 0===he||"number"==typeof he&&he>=0&&he<=1?null:"Invalid rgba value ["+[D,z,Q,he].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof he?[D,z,Q,he]:[D,z,Q]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function rr(D){if(null===D||"string"==typeof D||"boolean"==typeof D||"number"==typeof D||D instanceof cn||D instanceof vn||D instanceof Dn||D instanceof Pn)return!0;if(Array.isArray(D)){for(var z=0,Q=D;z<Q.length;z+=1)if(!rr(Q[z]))return!1;return!0}if("object"==typeof D){for(var he in D)if(!rr(D[he]))return!1;return!0}return!1}function er(D){if(null===D)return Kt;if("string"==typeof D)return Et;if("boolean"==typeof D)return $t;if("number"==typeof D)return vt;if(D instanceof cn)return Dt;if(D instanceof vn)return rt;if(D instanceof Dn)return pt;if(D instanceof Pn)return It;if(Array.isArray(D)){for(var z,Q=D.length,he=0,xe=D;he<xe.length;he+=1){var Se=er(xe[he]);if(z){if(z===Se)continue;z=je;break}z=Se}return jt(z||je,Q)}return Pt}function or(D){var z=typeof D;return null===D?"":"string"===z||"number"===z||"boolean"===z?String(D):D instanceof cn||D instanceof Dn||D instanceof Pn?D.toString():JSON.stringify(D)}Pn.prototype.toString=function(){return this.name},Pn.fromString=function(D){return D?new Pn({name:D,available:!1}):null},Pn.prototype.serialize=function(){return["image",this.name]};var Zr=function(D,z){this.type=D,this.value=z};Zr.parse=function(D,z){if(2!==D.length)return z.error("'literal' expression requires exactly one argument, but found "+(D.length-1)+" instead.");if(!rr(D[1]))return z.error("invalid value");var Q=D[1],he=er(Q),xe=z.expectedType;return"array"!==he.kind||0!==he.N||!xe||"array"!==xe.kind||"number"==typeof xe.N&&0!==xe.N||(he=xe),new Zr(he,Q)},Zr.prototype.evaluate=function(){return this.value},Zr.prototype.eachChild=function(){},Zr.prototype.outputDefined=function(){return!0},Zr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof cn?["rgba"].concat(this.value.toArray()):this.value instanceof Dn?this.value.serialize():this.value};var zr=function(D){this.name="ExpressionEvaluationError",this.message=D};zr.prototype.toJSON=function(){return this.message};var pr={string:Et,number:vt,boolean:$t,object:Pt},Br=function(D,z){this.type=D,this.args=z};Br.parse=function(D,z){if(D.length<2)return z.error("Expected at least one argument.");var Q,he=1,xe=D[0];if("array"===xe){var Se,ze;if(D.length>2){var Ze=D[1];if("string"!=typeof Ze||!(Ze in pr)||"object"===Ze)return z.error('The item type argument of "array" must be one of string, number, boolean',1);Se=pr[Ze],he++}else Se=je;if(D.length>3){if(null!==D[2]&&("number"!=typeof D[2]||D[2]<0||D[2]!==Math.floor(D[2])))return z.error('The length argument to "array" must be a positive integer literal',2);ze=D[2],he++}Q=jt(Se,ze)}else Q=pr[xe];for(var lt=[];he<D.length;he++){var _t=z.parse(D[he],he,je);if(!_t)return null;lt.push(_t)}return new Br(Q,lt)},Br.prototype.evaluate=function(D){for(var z=0;z<this.args.length;z++){var Q=this.args[z].evaluate(D);if(!an(this.type,er(Q)))return Q;if(z===this.args.length-1)throw new zr("Expected value to be of type "+Qt(this.type)+", but found "+Qt(er(Q))+" instead.")}return null},Br.prototype.eachChild=function(D){this.args.forEach(D)},Br.prototype.outputDefined=function(){return this.args.every(function(D){return D.outputDefined()})},Br.prototype.serialize=function(){var D=this.type,z=[D.kind];if("array"===D.kind){var Q=D.itemType;if("string"===Q.kind||"number"===Q.kind||"boolean"===Q.kind){z.push(Q.kind);var he=D.N;("number"==typeof he||this.args.length>1)&&z.push(he)}}return z.concat(this.args.map(function(xe){return xe.serialize()}))};var fr=function(D){this.type=pt,this.sections=D};fr.parse=function(D,z){if(D.length<2)return z.error("Expected at least one argument.");var Q=D[1];if(!Array.isArray(Q)&&"object"==typeof Q)return z.error("First argument must be an image or text section.");for(var he=[],xe=!1,Se=1;Se<=D.length-1;++Se){var ze=D[Se];if(xe&&"object"==typeof ze&&!Array.isArray(ze)){xe=!1;var Ze=null;if(ze["font-scale"]&&!(Ze=z.parse(ze["font-scale"],1,vt)))return null;var lt=null;if(ze["text-font"]&&!(lt=z.parse(ze["text-font"],1,jt(Et))))return null;var _t=null;if(ze["text-color"]&&!(_t=z.parse(ze["text-color"],1,Dt)))return null;var kt=he[he.length-1];kt.scale=Ze,kt.font=lt,kt.textColor=_t}else{var Zt=z.parse(D[Se],1,je);if(!Zt)return null;var sn=Zt.type.kind;if("string"!==sn&&"value"!==sn&&"null"!==sn&&"resolvedImage"!==sn)return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xe=!0,he.push({content:Zt,scale:null,font:null,textColor:null})}}return new fr(he)},fr.prototype.evaluate=function(D){return new Dn(this.sections.map(function(z){var Q=z.content.evaluate(D);return er(Q)===It?new hn("",Q,null,null,null):new hn(or(Q),null,z.scale?z.scale.evaluate(D):null,z.font?z.font.evaluate(D).join(","):null,z.textColor?z.textColor.evaluate(D):null)}))},fr.prototype.eachChild=function(D){for(var z=0,Q=this.sections;z<Q.length;z+=1){var he=Q[z];D(he.content),he.scale&&D(he.scale),he.font&&D(he.font),he.textColor&&D(he.textColor)}},fr.prototype.outputDefined=function(){return!1},fr.prototype.serialize=function(){for(var D=["format"],z=0,Q=this.sections;z<Q.length;z+=1){var he=Q[z];D.push(he.content.serialize());var xe={};he.scale&&(xe["font-scale"]=he.scale.serialize()),he.font&&(xe["text-font"]=he.font.serialize()),he.textColor&&(xe["text-color"]=he.textColor.serialize()),D.push(xe)}return D};var Nr=function(D){this.type=It,this.input=D};Nr.parse=function(D,z){if(2!==D.length)return z.error("Expected two arguments.");var Q=z.parse(D[1],1,Et);return Q?new Nr(Q):z.error("No image name provided.")},Nr.prototype.evaluate=function(D){var z=this.input.evaluate(D),Q=Pn.fromString(z);return Q&&D.availableImages&&(Q.available=D.availableImages.indexOf(z)>-1),Q},Nr.prototype.eachChild=function(D){D(this.input)},Nr.prototype.outputDefined=function(){return!1},Nr.prototype.serialize=function(){return["image",this.input.serialize()]};var xi={"to-boolean":$t,"to-color":Dt,"to-number":vt,"to-string":Et},Qn=function(D,z){this.type=D,this.args=z};Qn.parse=function(D,z){if(D.length<2)return z.error("Expected at least one argument.");var Q=D[0];if(("to-boolean"===Q||"to-string"===Q)&&2!==D.length)return z.error("Expected one argument.");for(var he=xi[Q],xe=[],Se=1;Se<D.length;Se++){var ze=z.parse(D[Se],Se,je);if(!ze)return null;xe.push(ze)}return new Qn(he,xe)},Qn.prototype.evaluate=function(D){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(D));if("color"===this.type.kind){for(var z,Q,he=0,xe=this.args;he<xe.length;he+=1){if(Q=null,(z=xe[he].evaluate(D))instanceof cn)return z;if("string"==typeof z){var Se=D.parseColor(z);if(Se)return Se}else if(Array.isArray(z)&&!(Q=z.length<3||z.length>4?"Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":$n(z[0],z[1],z[2],z[3])))return new cn(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new zr(Q||"Could not parse color from value '"+("string"==typeof z?z:String(JSON.stringify(z)))+"'")}if("number"===this.type.kind){for(var ze=null,Ze=0,lt=this.args;Ze<lt.length;Ze+=1){if(null===(ze=lt[Ze].evaluate(D)))return 0;var _t=Number(ze);if(!isNaN(_t))return _t}throw new zr("Could not convert "+JSON.stringify(ze)+" to number.")}return"formatted"===this.type.kind?Dn.fromString(or(this.args[0].evaluate(D))):"resolvedImage"===this.type.kind?Pn.fromString(or(this.args[0].evaluate(D))):or(this.args[0].evaluate(D))},Qn.prototype.eachChild=function(D){this.args.forEach(D)},Qn.prototype.outputDefined=function(){return this.args.every(function(D){return D.outputDefined()})},Qn.prototype.serialize=function(){if("formatted"===this.type.kind)return new fr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Nr(this.args[0]).serialize();var D=["to-"+this.type.kind];return this.eachChild(function(z){D.push(z.serialize())}),D};var Er=["Unknown","Point","LineString","Polygon"],kr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};kr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},kr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Er[this.feature.type]:this.feature.type:null},kr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},kr.prototype.canonicalID=function(){return this.canonical},kr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},kr.prototype.parseColor=function(D){var z=this._parseColorCache[D];return z||(z=this._parseColorCache[D]=cn.parse(D)),z};var sr=function(D,z,Q,he){this.name=D,this.type=z,this._evaluate=Q,this.args=he};sr.prototype.evaluate=function(D){return this._evaluate(D,this.args)},sr.prototype.eachChild=function(D){this.args.forEach(D)},sr.prototype.outputDefined=function(){return!1},sr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(D){return D.serialize()}))},sr.parse=function(D,z){var Q,he=D[0],xe=sr.definitions[he];if(!xe)return z.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Se=Array.isArray(xe)?xe[0]:xe.type,ze=Array.isArray(xe)?[[xe[1],xe[2]]]:xe.overloads,Ze=ze.filter(function(Li){var Ti=Li[0];return!Array.isArray(Ti)||Ti.length===D.length-1}),lt=null,_t=0,kt=Ze;_t<kt.length;_t+=1){var Zt=kt[_t],sn=Zt[0],en=Zt[1];lt=new Tr(z.registry,z.path,null,z.scope);for(var xn=[],Fn=!1,Gn=1;Gn<D.length;Gn++){var qn=D[Gn],ar=Array.isArray(sn)?sn[Gn-1]:sn.type,lr=lt.parse(qn,1+xn.length,ar);if(!lr){Fn=!0;break}xn.push(lr)}if(!Fn)if(Array.isArray(sn)&&sn.length!==xn.length)lt.error("Expected "+sn.length+" arguments, but found "+xn.length+" instead.");else{for(var hr=0;hr<xn.length;hr++){var Lr=Array.isArray(sn)?sn[hr]:sn.type,jr=xn[hr];lt.concat(hr+1).checkSubtype(Lr,jr.type)}if(0===lt.errors.length)return new sr(he,Se,en,xn)}}if(1===Ze.length)(Q=z.errors).push.apply(Q,lt.errors);else{for(var li=(Ze.length?Ze:ze).map(function(Li){var Ti;return Ti=Li[0],Array.isArray(Ti)?"("+Ti.map(Qt).join(", ")+")":"("+Qt(Ti.type)+"...)"}).join(" | "),ai=[],gi=1;gi<D.length;gi++){var Ii=z.parse(D[gi],1+ai.length);if(!Ii)return null;ai.push(Qt(Ii.type))}z.error("Expected arguments of type "+li+", but found ("+ai.join(", ")+") instead.")}return null},sr.register=function(D,z){for(var Q in sr.definitions=z,z)D[Q]=sr};var ci=function(D,z,Q){this.type=rt,this.locale=Q,this.caseSensitive=D,this.diacriticSensitive=z};function oi(D,z){D[0]=Math.min(D[0],z[0]),D[1]=Math.min(D[1],z[1]),D[2]=Math.max(D[2],z[0]),D[3]=Math.max(D[3],z[1])}function Or(D,z){return!(D[0]<=z[0]||D[2]>=z[2]||D[1]<=z[1]||D[3]>=z[3])}function Dr(D,z){var he=(180+D[0])/360,xe=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+D[1]*Math.PI/360)))/360,Se=Math.pow(2,z.z);return[Math.round(he*Se*8192),Math.round(xe*Se*8192)]}function wr(D,z,Q){return z[1]>D[1]!=Q[1]>D[1]&&D[0]<(Q[0]-z[0])*(D[1]-z[1])/(Q[1]-z[1])+z[0]}function gn(D,z){for(var Q,he,xe,Se,ze,Ze,lt,_t=!1,kt=0,Zt=z.length;kt<Zt;kt++)for(var sn=z[kt],en=0,xn=sn.length;en<xn-1;en++){if(void 0,void 0,void 0,void 0,(Se=(Q=D)[0]-(he=sn[en])[0])*(lt=Q[1]-(xe=sn[en+1])[1])-(Ze=Q[0]-xe[0])*(ze=Q[1]-he[1])==0&&Se*Ze<=0&&ze*lt<=0)return!1;wr(D,sn[en],sn[en+1])&&(_t=!_t)}return _t}function tr(D,z){for(var Q=0;Q<z.length;Q++)if(gn(D,z[Q]))return!0;return!1}function qt(D,z,Q,he){var lt=he[0]-Q[0],_t=he[1]-Q[1],kt=(D[0]-Q[0])*_t-lt*(D[1]-Q[1]),Zt=(z[0]-Q[0])*_t-lt*(z[1]-Q[1]);return kt>0&&Zt<0||kt<0&&Zt>0}function _n(D,z,Q){for(var he=0,xe=Q;he<xe.length;he+=1)for(var Se=xe[he],ze=0;ze<Se.length-1;++ze)if(void 0,void 0,(Zt=[(kt=Se[ze+1])[0]-(_t=Se[ze])[0],kt[1]-_t[1]])[0]*(sn=[(lt=z)[0]-(Ze=D)[0],lt[1]-Ze[1]])[1]-Zt[1]*sn[0]!=0&&qt(Ze,lt,_t,kt)&&qt(_t,kt,Ze,lt))return!0;var Ze,lt,_t,kt,Zt,sn;return!1}function Cn(D,z){for(var Q=0;Q<D.length;++Q)if(!gn(D[Q],z))return!1;for(var he=0;he<D.length-1;++he)if(_n(D[he],D[he+1],z))return!1;return!0}function Jn(D,z){for(var Q=0;Q<z.length;Q++)if(Cn(D,z[Q]))return!0;return!1}function Xn(D,z,Q){for(var he=[],xe=0;xe<D.length;xe++){for(var Se=[],ze=0;ze<D[xe].length;ze++){var Ze=Dr(D[xe][ze],Q);oi(z,Ze),Se.push(Ze)}he.push(Se)}return he}function Hn(D,z,Q){for(var he=[],xe=0;xe<D.length;xe++){var Se=Xn(D[xe],z,Q);he.push(Se)}return he}function Bn(D,z,Q,he){if(D[0]<Q[0]||D[0]>Q[2]){var xe=.5*he,Se=D[0]-Q[0]>xe?-he:Q[0]-D[0]>xe?he:0;0===Se&&(Se=D[0]-Q[2]>xe?-he:Q[2]-D[0]>xe?he:0),D[0]+=Se}oi(z,D)}function zn(D,z,Q,he){for(var xe=8192*Math.pow(2,he.z),Se=[8192*he.x,8192*he.y],ze=[],Ze=0,lt=D;Ze<lt.length;Ze+=1)for(var _t=0,kt=lt[Ze];_t<kt.length;_t+=1){var Zt=kt[_t],sn=[Zt.x+Se[0],Zt.y+Se[1]];Bn(sn,z,Q,xe),ze.push(sn)}return ze}function jn(D,z,Q,he){for(var xe,Se=8192*Math.pow(2,he.z),ze=[8192*he.x,8192*he.y],Ze=[],lt=0,_t=D;lt<_t.length;lt+=1){for(var kt=[],Zt=0,sn=_t[lt];Zt<sn.length;Zt+=1){var en=sn[Zt],xn=[en.x+ze[0],en.y+ze[1]];oi(z,xn),kt.push(xn)}Ze.push(kt)}if(z[2]-z[0]<=Se/2){(xe=z)[0]=xe[1]=1/0,xe[2]=xe[3]=-1/0;for(var Fn=0,Gn=Ze;Fn<Gn.length;Fn+=1)for(var qn=0,ar=Gn[Fn];qn<ar.length;qn+=1)Bn(ar[qn],z,Q,Se)}return Ze}ci.parse=function(D,z){if(2!==D.length)return z.error("Expected one argument.");var Q=D[1];if("object"!=typeof Q||Array.isArray(Q))return z.error("Collator options argument must be an object.");var he=z.parse(void 0!==Q["case-sensitive"]&&Q["case-sensitive"],1,$t);if(!he)return null;var xe=z.parse(void 0!==Q["diacritic-sensitive"]&&Q["diacritic-sensitive"],1,$t);if(!xe)return null;var Se=null;return Q.locale&&!(Se=z.parse(Q.locale,1,Et))?null:new ci(he,xe,Se)},ci.prototype.evaluate=function(D){return new vn(this.caseSensitive.evaluate(D),this.diacriticSensitive.evaluate(D),this.locale?this.locale.evaluate(D):null)},ci.prototype.eachChild=function(D){D(this.caseSensitive),D(this.diacriticSensitive),this.locale&&D(this.locale)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){var D={};return D["case-sensitive"]=this.caseSensitive.serialize(),D["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(D.locale=this.locale.serialize()),["collator",D]};var Vn=function(D,z){this.type=$t,this.geojson=D,this.geometries=z};function On(D){if(D instanceof sr&&("get"===D.name&&1===D.args.length||"feature-state"===D.name||"has"===D.name&&1===D.args.length||"properties"===D.name||"geometry-type"===D.name||"id"===D.name||/^filter-/.test(D.name))||D instanceof Vn)return!1;var z=!0;return D.eachChild(function(Q){z&&!On(Q)&&(z=!1)}),z}function dr(D){if(D instanceof sr&&"feature-state"===D.name)return!1;var z=!0;return D.eachChild(function(Q){z&&!dr(Q)&&(z=!1)}),z}function ir(D,z){if(D instanceof sr&&z.indexOf(D.name)>=0)return!1;var Q=!0;return D.eachChild(function(he){Q&&!ir(he,z)&&(Q=!1)}),Q}Vn.parse=function(D,z){if(2!==D.length)return z.error("'within' expression requires exactly one argument, but found "+(D.length-1)+" instead.");if(rr(D[1])){var Q=D[1];if("FeatureCollection"===Q.type)for(var he=0;he<Q.features.length;++he){var xe=Q.features[he].geometry.type;if("Polygon"===xe||"MultiPolygon"===xe)return new Vn(Q,Q.features[he].geometry)}else if("Feature"===Q.type){var Se=Q.geometry.type;if("Polygon"===Se||"MultiPolygon"===Se)return new Vn(Q,Q.geometry)}else if("Polygon"===Q.type||"MultiPolygon"===Q.type)return new Vn(Q,Q)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Vn.prototype.evaluate=function(D){if(null!=D.geometry()&&null!=D.canonicalID()){if("Point"===D.geometryType())return function(z,Q){var he=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Se=z.canonicalID();if("Polygon"===Q.type){var ze=Xn(Q.coordinates,xe,Se),Ze=zn(z.geometry(),he,xe,Se);if(!Or(he,xe))return!1;for(var lt=0,_t=Ze;lt<_t.length;lt+=1)if(!gn(_t[lt],ze))return!1}if("MultiPolygon"===Q.type){var kt=Hn(Q.coordinates,xe,Se),Zt=zn(z.geometry(),he,xe,Se);if(!Or(he,xe))return!1;for(var sn=0,en=Zt;sn<en.length;sn+=1)if(!tr(en[sn],kt))return!1}return!0}(D,this.geometries);if("LineString"===D.geometryType())return function(z,Q){var he=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Se=z.canonicalID();if("Polygon"===Q.type){var ze=Xn(Q.coordinates,xe,Se),Ze=jn(z.geometry(),he,xe,Se);if(!Or(he,xe))return!1;for(var lt=0,_t=Ze;lt<_t.length;lt+=1)if(!Cn(_t[lt],ze))return!1}if("MultiPolygon"===Q.type){var kt=Hn(Q.coordinates,xe,Se),Zt=jn(z.geometry(),he,xe,Se);if(!Or(he,xe))return!1;for(var sn=0,en=Zt;sn<en.length;sn+=1)if(!Jn(en[sn],kt))return!1}return!0}(D,this.geometries)}return!1},Vn.prototype.eachChild=function(){},Vn.prototype.outputDefined=function(){return!0},Vn.prototype.serialize=function(){return["within",this.geojson]};var br=function(D,z){this.type=z.type,this.name=D,this.boundExpression=z};br.parse=function(D,z){if(2!==D.length||"string"!=typeof D[1])return z.error("'var' expression requires exactly one string literal argument.");var Q=D[1];return z.scope.has(Q)?new br(Q,z.scope.get(Q)):z.error('Unknown variable "'+Q+'". Make sure "'+Q+'" has been bound in an enclosing "let" expression before using it.',1)},br.prototype.evaluate=function(D){return this.boundExpression.evaluate(D)},br.prototype.eachChild=function(){},br.prototype.outputDefined=function(){return!1},br.prototype.serialize=function(){return["var",this.name]};var Tr=function(D,z,Q,he,xe){void 0===z&&(z=[]),void 0===he&&(he=new Ut),void 0===xe&&(xe=[]),this.registry=D,this.path=z,this.key=z.map(function(Se){return"["+Se+"]"}).join(""),this.scope=he,this.errors=xe,this.expectedType=Q};function Fr(D,z){for(var Q,xe=D.length-1,Se=0,ze=xe,Ze=0;Se<=ze;)if((Q=D[Ze=Math.floor((Se+ze)/2)])<=z){if(Ze===xe||z<D[Ze+1])return Ze;Se=Ze+1}else{if(!(Q>z))throw new zr("Input is not a number.");ze=Ze-1}return 0}Tr.prototype.parse=function(D,z,Q,he,xe){return void 0===xe&&(xe={}),z?this.concat(z,Q,he)._parse(D,xe):this._parse(D,xe)},Tr.prototype._parse=function(D,z){function Q(_t,kt,Zt){return"assert"===Zt?new Br(kt,[_t]):"coerce"===Zt?new Qn(kt,[_t]):_t}if(null!==D&&"string"!=typeof D&&"boolean"!=typeof D&&"number"!=typeof D||(D=["literal",D]),Array.isArray(D)){if(0===D.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var he=D[0];if("string"!=typeof he)return this.error("Expression name must be a string, but found "+typeof he+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var xe=this.registry[he];if(xe){var Se=xe.parse(D,this);if(!Se)return null;if(this.expectedType){var ze=this.expectedType,Ze=Se.type;if("string"!==ze.kind&&"number"!==ze.kind&&"boolean"!==ze.kind&&"object"!==ze.kind&&"array"!==ze.kind||"value"!==Ze.kind)if("color"!==ze.kind&&"formatted"!==ze.kind&&"resolvedImage"!==ze.kind||"value"!==Ze.kind&&"string"!==Ze.kind){if(this.checkSubtype(ze,Ze))return null}else Se=Q(Se,ze,z.typeAnnotation||"coerce");else Se=Q(Se,ze,z.typeAnnotation||"assert")}if(!(Se instanceof Zr)&&"resolvedImage"!==Se.type.kind&&function _t(kt){if(kt instanceof br)return _t(kt.boundExpression);if(kt instanceof sr&&"error"===kt.name||kt instanceof ci||kt instanceof Vn)return!1;var Zt=kt instanceof Qn||kt instanceof Br,sn=!0;return kt.eachChild(function(en){sn=Zt?sn&&_t(en):sn&&en instanceof Zr}),!!sn&&On(kt)&&ir(kt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(Se)){var lt=new kr;try{Se=new Zr(Se.type,Se.evaluate(lt))}catch(_t){return this.error(_t.message),null}}return Se}return this.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===D?"'undefined' value invalid. Use null instead.":"object"==typeof D?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof D+" instead.")},Tr.prototype.concat=function(D,z,Q){var he="number"==typeof D?this.path.concat(D):this.path,xe=Q?this.scope.concat(Q):this.scope;return new Tr(this.registry,he,z||null,xe,this.errors)},Tr.prototype.error=function(D){for(var z=[],Q=arguments.length-1;Q-- >0;)z[Q]=arguments[Q+1];var he=""+this.key+z.map(function(xe){return"["+xe+"]"}).join("");this.errors.push(new wt(he,D))},Tr.prototype.checkSubtype=function(D,z){var Q=an(D,z);return Q&&this.error(Q),Q};var Vr=function(D,z,Q){this.type=D,this.input=z,this.labels=[],this.outputs=[];for(var he=0,xe=Q;he<xe.length;he+=1){var Se=xe[he],Ze=Se[1];this.labels.push(Se[0]),this.outputs.push(Ze)}};function Ur(D,z,Q){return D*(1-Q)+z*Q}Vr.parse=function(D,z){if(D.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(D.length-1)+".");if((D.length-1)%2!=0)return z.error("Expected an even number of arguments.");var Q=z.parse(D[1],1,vt);if(!Q)return null;var he=[],xe=null;z.expectedType&&"value"!==z.expectedType.kind&&(xe=z.expectedType);for(var Se=1;Se<D.length;Se+=2){var ze=1===Se?-1/0:D[Se],Ze=D[Se+1],lt=Se,_t=Se+1;if("number"!=typeof ze)return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lt);if(he.length&&he[he.length-1][0]>=ze)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',lt);var kt=z.parse(Ze,_t,xe);if(!kt)return null;xe=xe||kt.type,he.push([ze,kt])}return new Vr(xe,Q,he)},Vr.prototype.evaluate=function(D){var z=this.labels,Q=this.outputs;if(1===z.length)return Q[0].evaluate(D);var he=this.input.evaluate(D);if(he<=z[0])return Q[0].evaluate(D);var xe=z.length;return he>=z[xe-1]?Q[xe-1].evaluate(D):Q[Fr(z,he)].evaluate(D)},Vr.prototype.eachChild=function(D){D(this.input);for(var z=0,Q=this.outputs;z<Q.length;z+=1)D(Q[z])},Vr.prototype.outputDefined=function(){return this.outputs.every(function(D){return D.outputDefined()})},Vr.prototype.serialize=function(){for(var D=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&D.push(this.labels[z]),D.push(this.outputs[z].serialize());return D};var Xr=Object.freeze({__proto__:null,number:Ur,color:function(D,z,Q){return new cn(Ur(D.r,z.r,Q),Ur(D.g,z.g,Q),Ur(D.b,z.b,Q),Ur(D.a,z.a,Q))},array:function(D,z,Q){return D.map(function(he,xe){return Ur(he,z[xe],Q)})}}),ri=6/29,_i=3*ri*ri,ra=Math.PI/180,hi=180/Math.PI;function Gr(D){return D>.008856451679035631?Math.pow(D,1/3):D/_i+4/29}function Mi(D){return D>ri?D*D*D:_i*(D-4/29)}function vi(D){return 255*(D<=.0031308?12.92*D:1.055*Math.pow(D,1/2.4)-.055)}function _a(D){return(D/=255)<=.04045?D/12.92:Math.pow((D+.055)/1.055,2.4)}function Co(D){var z=_a(D.r),Q=_a(D.g),he=_a(D.b),xe=Gr((.4124564*z+.3575761*Q+.1804375*he)/.95047),Se=Gr((.2126729*z+.7151522*Q+.072175*he)/1);return{l:116*Se-16,a:500*(xe-Se),b:200*(Se-Gr((.0193339*z+.119192*Q+.9503041*he)/1.08883)),alpha:D.a}}function oo(D){var z=(D.l+16)/116,Q=isNaN(D.a)?z:z+D.a/500,he=isNaN(D.b)?z:z-D.b/200;return z=1*Mi(z),Q=.95047*Mi(Q),he=1.08883*Mi(he),new cn(vi(3.2404542*Q-1.5371385*z-.4985314*he),vi(-.969266*Q+1.8760108*z+.041556*he),vi(.0556434*Q-.2040259*z+1.0572252*he),D.alpha)}function yo(D,z,Q){var he=z-D;return D+Q*(he>180||he<-180?he-360*Math.round(he/360):he)}var Ha={forward:Co,reverse:oo,interpolate:function(D,z,Q){return{l:Ur(D.l,z.l,Q),a:Ur(D.a,z.a,Q),b:Ur(D.b,z.b,Q),alpha:Ur(D.alpha,z.alpha,Q)}}},qa={forward:function(D){var z=Co(D),Q=z.l,he=z.a,xe=z.b,Se=Math.atan2(xe,he)*hi;return{h:Se<0?Se+360:Se,c:Math.sqrt(he*he+xe*xe),l:Q,alpha:D.a}},reverse:function(D){var z=D.h*ra,Q=D.c;return oo({l:D.l,a:Math.cos(z)*Q,b:Math.sin(z)*Q,alpha:D.alpha})},interpolate:function(D,z,Q){return{h:yo(D.h,z.h,Q),c:Ur(D.c,z.c,Q),l:Ur(D.l,z.l,Q),alpha:Ur(D.alpha,z.alpha,Q)}}},ho=Object.freeze({__proto__:null,lab:Ha,hcl:qa}),ka=function(D,z,Q,he,xe){this.type=D,this.operator=z,this.interpolation=Q,this.input=he,this.labels=[],this.outputs=[];for(var Se=0,ze=xe;Se<ze.length;Se+=1){var Ze=ze[Se],_t=Ze[1];this.labels.push(Ze[0]),this.outputs.push(_t)}};function ds(D,z,Q,he){var xe=he-Q,Se=D-Q;return 0===xe?0:1===z?Se/xe:(Math.pow(z,Se)-1)/(Math.pow(z,xe)-1)}ka.interpolationFactor=function(D,z,Q,he){var xe=0;if("exponential"===D.name)xe=ds(z,D.base,Q,he);else if("linear"===D.name)xe=ds(z,1,Q,he);else if("cubic-bezier"===D.name){var Se=D.controlPoints;xe=new a(Se[0],Se[1],Se[2],Se[3]).solve(ds(z,1,Q,he))}return xe},ka.parse=function(D,z){var Q=D[0],he=D[1],xe=D[2],Se=D.slice(3);if(!Array.isArray(he)||0===he.length)return z.error("Expected an interpolation type expression.",1);if("linear"===he[0])he={name:"linear"};else if("exponential"===he[0]){var ze=he[1];if("number"!=typeof ze)return z.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:ze}}else{if("cubic-bezier"!==he[0])return z.error("Unknown interpolation type "+String(he[0]),1,0);var Ze=he.slice(1);if(4!==Ze.length||Ze.some(function(Gn){return"number"!=typeof Gn||Gn<0||Gn>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:Ze}}if(D.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(D.length-1)+".");if((D.length-1)%2!=0)return z.error("Expected an even number of arguments.");if(!(xe=z.parse(xe,2,vt)))return null;var lt=[],_t=null;"interpolate-hcl"===Q||"interpolate-lab"===Q?_t=Dt:z.expectedType&&"value"!==z.expectedType.kind&&(_t=z.expectedType);for(var kt=0;kt<Se.length;kt+=2){var Zt=Se[kt],sn=Se[kt+1],en=kt+3,xn=kt+4;if("number"!=typeof Zt)return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',en);if(lt.length&&lt[lt.length-1][0]>=Zt)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',en);var Fn=z.parse(sn,xn,_t);if(!Fn)return null;_t=_t||Fn.type,lt.push([Zt,Fn])}return"number"===_t.kind||"color"===_t.kind||"array"===_t.kind&&"number"===_t.itemType.kind&&"number"==typeof _t.N?new ka(_t,Q,he,xe,lt):z.error("Type "+Qt(_t)+" is not interpolatable.")},ka.prototype.evaluate=function(D){var z=this.labels,Q=this.outputs;if(1===z.length)return Q[0].evaluate(D);var he=this.input.evaluate(D);if(he<=z[0])return Q[0].evaluate(D);var xe=z.length;if(he>=z[xe-1])return Q[xe-1].evaluate(D);var Se=Fr(z,he),lt=ka.interpolationFactor(this.interpolation,he,z[Se],z[Se+1]),_t=Q[Se].evaluate(D),kt=Q[Se+1].evaluate(D);return"interpolate"===this.operator?Xr[this.type.kind.toLowerCase()](_t,kt,lt):"interpolate-hcl"===this.operator?qa.reverse(qa.interpolate(qa.forward(_t),qa.forward(kt),lt)):Ha.reverse(Ha.interpolate(Ha.forward(_t),Ha.forward(kt),lt))},ka.prototype.eachChild=function(D){D(this.input);for(var z=0,Q=this.outputs;z<Q.length;z+=1)D(Q[z])},ka.prototype.outputDefined=function(){return this.outputs.every(function(D){return D.outputDefined()})},ka.prototype.serialize=function(){var D;D="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,D,this.input.serialize()],Q=0;Q<this.labels.length;Q++)z.push(this.labels[Q],this.outputs[Q].serialize());return z};var Ts=function(D,z){this.type=D,this.args=z};Ts.parse=function(D,z){if(D.length<2)return z.error("Expectected at least one argument.");var Q=null,he=z.expectedType;he&&"value"!==he.kind&&(Q=he);for(var xe=[],Se=0,ze=D.slice(1);Se<ze.length;Se+=1){var lt=z.parse(ze[Se],1+xe.length,Q,void 0,{typeAnnotation:"omit"});if(!lt)return null;Q=Q||lt.type,xe.push(lt)}var _t=he&&xe.some(function(kt){return an(he,kt.type)});return new Ts(_t?je:Q,xe)},Ts.prototype.evaluate=function(D){for(var z,Q=null,he=0,xe=0,Se=this.args;xe<Se.length&&(he++,(Q=Se[xe].evaluate(D))&&Q instanceof Pn&&!Q.available&&(z||(z=Q.name),Q=null,he===this.args.length&&(Q=z)),null===Q);xe+=1);return Q},Ts.prototype.eachChild=function(D){this.args.forEach(D)},Ts.prototype.outputDefined=function(){return this.args.every(function(D){return D.outputDefined()})},Ts.prototype.serialize=function(){var D=["coalesce"];return this.eachChild(function(z){D.push(z.serialize())}),D};var Uo=function(D,z){this.type=z.type,this.bindings=[].concat(D),this.result=z};Uo.prototype.evaluate=function(D){return this.result.evaluate(D)},Uo.prototype.eachChild=function(D){for(var z=0,Q=this.bindings;z<Q.length;z+=1)D(Q[z][1]);D(this.result)},Uo.parse=function(D,z){if(D.length<4)return z.error("Expected at least 3 arguments, but found "+(D.length-1)+" instead.");for(var Q=[],he=1;he<D.length-1;he+=2){var xe=D[he];if("string"!=typeof xe)return z.error("Expected string, but found "+typeof xe+" instead.",he);if(/[^a-zA-Z0-9_]/.test(xe))return z.error("Variable names must contain only alphanumeric characters or '_'.",he);var Se=z.parse(D[he+1],he+1);if(!Se)return null;Q.push([xe,Se])}var ze=z.parse(D[D.length-1],D.length-1,z.expectedType,Q);return ze?new Uo(Q,ze):null},Uo.prototype.outputDefined=function(){return this.result.outputDefined()},Uo.prototype.serialize=function(){for(var D=["let"],z=0,Q=this.bindings;z<Q.length;z+=1){var he=Q[z];D.push(he[0],he[1].serialize())}return D.push(this.result.serialize()),D};var pa=function(D,z,Q){this.type=D,this.index=z,this.input=Q};pa.parse=function(D,z){if(3!==D.length)return z.error("Expected 2 arguments, but found "+(D.length-1)+" instead.");var Q=z.parse(D[1],1,vt),he=z.parse(D[2],2,jt(z.expectedType||je));return Q&&he?new pa(he.type.itemType,Q,he):null},pa.prototype.evaluate=function(D){var z=this.index.evaluate(D),Q=this.input.evaluate(D);if(z<0)throw new zr("Array index out of bounds: "+z+" < 0.");if(z>=Q.length)throw new zr("Array index out of bounds: "+z+" > "+(Q.length-1)+".");if(z!==Math.floor(z))throw new zr("Array index must be an integer, but found "+z+" instead.");return Q[z]},pa.prototype.eachChild=function(D){D(this.index),D(this.input)},pa.prototype.outputDefined=function(){return!1},pa.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Rs=function(D,z){this.type=$t,this.needle=D,this.haystack=z};Rs.parse=function(D,z){if(3!==D.length)return z.error("Expected 2 arguments, but found "+(D.length-1)+" instead.");var Q=z.parse(D[1],1,je),he=z.parse(D[2],2,je);return Q&&he?Sn(Q.type,[$t,Et,vt,Kt,je])?new Rs(Q,he):z.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Q.type)+" instead"):null},Rs.prototype.evaluate=function(D){var z=this.needle.evaluate(D),Q=this.haystack.evaluate(D);if(!Q)return!1;if(!Yn(z,["boolean","string","number","null"]))throw new zr("Expected first argument to be of type boolean, string, number or null, but found "+Qt(er(z))+" instead.");if(!Yn(Q,["string","array"]))throw new zr("Expected second argument to be of type array or string, but found "+Qt(er(Q))+" instead.");return Q.indexOf(z)>=0},Rs.prototype.eachChild=function(D){D(this.needle),D(this.haystack)},Rs.prototype.outputDefined=function(){return!0},Rs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Us=function(D,z,Q){this.type=vt,this.needle=D,this.haystack=z,this.fromIndex=Q};Us.parse=function(D,z){if(D.length<=2||D.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(D.length-1)+" instead.");var Q=z.parse(D[1],1,je),he=z.parse(D[2],2,je);if(!Q||!he)return null;if(!Sn(Q.type,[$t,Et,vt,Kt,je]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Q.type)+" instead");if(4===D.length){var xe=z.parse(D[3],3,vt);return xe?new Us(Q,he,xe):null}return new Us(Q,he)},Us.prototype.evaluate=function(D){var z=this.needle.evaluate(D),Q=this.haystack.evaluate(D);if(!Yn(z,["boolean","string","number","null"]))throw new zr("Expected first argument to be of type boolean, string, number or null, but found "+Qt(er(z))+" instead.");if(!Yn(Q,["string","array"]))throw new zr("Expected second argument to be of type array or string, but found "+Qt(er(Q))+" instead.");if(this.fromIndex){var he=this.fromIndex.evaluate(D);return Q.indexOf(z,he)}return Q.indexOf(z)},Us.prototype.eachChild=function(D){D(this.needle),D(this.haystack),this.fromIndex&&D(this.fromIndex)},Us.prototype.outputDefined=function(){return!1},Us.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var D=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),D]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var wo=function(D,z,Q,he,xe,Se){this.inputType=D,this.type=z,this.input=Q,this.cases=he,this.outputs=xe,this.otherwise=Se};wo.parse=function(D,z){if(D.length<5)return z.error("Expected at least 4 arguments, but found only "+(D.length-1)+".");if(D.length%2!=1)return z.error("Expected an even number of arguments.");var Q,he;z.expectedType&&"value"!==z.expectedType.kind&&(he=z.expectedType);for(var xe={},Se=[],ze=2;ze<D.length-1;ze+=2){var Ze=D[ze],lt=D[ze+1];Array.isArray(Ze)||(Ze=[Ze]);var _t=z.concat(ze);if(0===Ze.length)return _t.error("Expected at least one branch label.");for(var kt=0,Zt=Ze;kt<Zt.length;kt+=1){var sn=Zt[kt];if("number"!=typeof sn&&"string"!=typeof sn)return _t.error("Branch labels must be numbers or strings.");if("number"==typeof sn&&Math.abs(sn)>Number.MAX_SAFE_INTEGER)return _t.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof sn&&Math.floor(sn)!==sn)return _t.error("Numeric branch labels must be integer values.");if(Q){if(_t.checkSubtype(Q,er(sn)))return null}else Q=er(sn);if(void 0!==xe[String(sn)])return _t.error("Branch labels must be unique.");xe[String(sn)]=Se.length}var en=z.parse(lt,ze,he);if(!en)return null;he=he||en.type,Se.push(en)}var xn=z.parse(D[1],1,je);if(!xn)return null;var Fn=z.parse(D[D.length-1],D.length-1,he);return Fn?"value"!==xn.type.kind&&z.concat(1).checkSubtype(Q,xn.type)?null:new wo(Q,he,xn,xe,Se,Fn):null},wo.prototype.evaluate=function(D){var z=this.input.evaluate(D);return(er(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise).evaluate(D)},wo.prototype.eachChild=function(D){D(this.input),this.outputs.forEach(D),D(this.otherwise)},wo.prototype.outputDefined=function(){return this.outputs.every(function(D){return D.outputDefined()})&&this.otherwise.outputDefined()},wo.prototype.serialize=function(){for(var D=this,z=["match",this.input.serialize()],Q=[],he={},xe=0,Se=Object.keys(this.cases).sort();xe<Se.length;xe+=1){var ze=Se[xe];void 0===(Zt=he[this.cases[ze]])?(he[this.cases[ze]]=Q.length,Q.push([this.cases[ze],[ze]])):Q[Zt][1].push(ze)}for(var Ze=function(en){return"number"===D.inputType.kind?Number(en):en},lt=0,_t=Q;lt<_t.length;lt+=1){var kt=_t[lt],Zt=kt[0],sn=kt[1];z.push(1===sn.length?Ze(sn[0]):sn.map(Ze)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var ia=function(D,z,Q){this.type=D,this.branches=z,this.otherwise=Q};ia.parse=function(D,z){if(D.length<4)return z.error("Expected at least 3 arguments, but found only "+(D.length-1)+".");if(D.length%2!=0)return z.error("Expected an odd number of arguments.");var Q;z.expectedType&&"value"!==z.expectedType.kind&&(Q=z.expectedType);for(var he=[],xe=1;xe<D.length-1;xe+=2){var Se=z.parse(D[xe],xe,$t);if(!Se)return null;var ze=z.parse(D[xe+1],xe+1,Q);if(!ze)return null;he.push([Se,ze]),Q=Q||ze.type}var Ze=z.parse(D[D.length-1],D.length-1,Q);return Ze?new ia(Q,he,Ze):null},ia.prototype.evaluate=function(D){for(var z=0,Q=this.branches;z<Q.length;z+=1){var he=Q[z],Se=he[1];if(he[0].evaluate(D))return Se.evaluate(D)}return this.otherwise.evaluate(D)},ia.prototype.eachChild=function(D){for(var z=0,Q=this.branches;z<Q.length;z+=1){var he=Q[z],Se=he[1];D(he[0]),D(Se)}D(this.otherwise)},ia.prototype.outputDefined=function(){return this.branches.every(function(D){return D[1].outputDefined()})&&this.otherwise.outputDefined()},ia.prototype.serialize=function(){var D=["case"];return this.eachChild(function(z){D.push(z.serialize())}),D};var qo=function(D,z,Q,he){this.type=D,this.input=z,this.beginIndex=Q,this.endIndex=he};function jl(D,z){return"=="===D||"!="===D?"boolean"===z.kind||"string"===z.kind||"number"===z.kind||"null"===z.kind||"value"===z.kind:"string"===z.kind||"number"===z.kind||"value"===z.kind}function Yl(D,z,Q,he){return 0===he.compare(z,Q)}function Fa(D,z,Q){var he="=="!==D&&"!="!==D;return function(){function xe(Se,ze,Ze){this.type=$t,this.lhs=Se,this.rhs=ze,this.collator=Ze,this.hasUntypedArgument="value"===Se.type.kind||"value"===ze.type.kind}return xe.parse=function(Se,ze){if(3!==Se.length&&4!==Se.length)return ze.error("Expected two or three arguments.");var Ze=Se[0],lt=ze.parse(Se[1],1,je);if(!lt)return null;if(!jl(Ze,lt.type))return ze.concat(1).error('"'+Ze+"\" comparisons are not supported for type '"+Qt(lt.type)+"'.");var _t=ze.parse(Se[2],2,je);if(!_t)return null;if(!jl(Ze,_t.type))return ze.concat(2).error('"'+Ze+"\" comparisons are not supported for type '"+Qt(_t.type)+"'.");if(lt.type.kind!==_t.type.kind&&"value"!==lt.type.kind&&"value"!==_t.type.kind)return ze.error("Cannot compare types '"+Qt(lt.type)+"' and '"+Qt(_t.type)+"'.");he&&("value"===lt.type.kind&&"value"!==_t.type.kind?lt=new Br(_t.type,[lt]):"value"!==lt.type.kind&&"value"===_t.type.kind&&(_t=new Br(lt.type,[_t])));var kt=null;if(4===Se.length){if("string"!==lt.type.kind&&"string"!==_t.type.kind&&"value"!==lt.type.kind&&"value"!==_t.type.kind)return ze.error("Cannot use collator to compare non-string types.");if(!(kt=ze.parse(Se[3],3,rt)))return null}return new xe(lt,_t,kt)},xe.prototype.evaluate=function(Se){var ze=this.lhs.evaluate(Se),Ze=this.rhs.evaluate(Se);if(he&&this.hasUntypedArgument){var lt=er(ze),_t=er(Ze);if(lt.kind!==_t.kind||"string"!==lt.kind&&"number"!==lt.kind)throw new zr('Expected arguments for "'+D+'" to be (string, string) or (number, number), but found ('+lt.kind+", "+_t.kind+") instead.")}if(this.collator&&!he&&this.hasUntypedArgument){var kt=er(ze),Zt=er(Ze);if("string"!==kt.kind||"string"!==Zt.kind)return z(Se,ze,Ze)}return this.collator?Q(Se,ze,Ze,this.collator.evaluate(Se)):z(Se,ze,Ze)},xe.prototype.eachChild=function(Se){Se(this.lhs),Se(this.rhs),this.collator&&Se(this.collator)},xe.prototype.outputDefined=function(){return!0},xe.prototype.serialize=function(){var Se=[D];return this.eachChild(function(ze){Se.push(ze.serialize())}),Se},xe}()}qo.parse=function(D,z){if(D.length<=2||D.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(D.length-1)+" instead.");var Q=z.parse(D[1],1,je),he=z.parse(D[2],2,vt);if(!Q||!he)return null;if(!Sn(Q.type,[jt(je),Et,je]))return z.error("Expected first argument to be of type array or string, but found "+Qt(Q.type)+" instead");if(4===D.length){var xe=z.parse(D[3],3,vt);return xe?new qo(Q.type,Q,he,xe):null}return new qo(Q.type,Q,he)},qo.prototype.evaluate=function(D){var z=this.input.evaluate(D),Q=this.beginIndex.evaluate(D);if(!Yn(z,["string","array"]))throw new zr("Expected first argument to be of type array or string, but found "+Qt(er(z))+" instead.");if(this.endIndex){var he=this.endIndex.evaluate(D);return z.slice(Q,he)}return z.slice(Q)},qo.prototype.eachChild=function(D){D(this.input),D(this.beginIndex),this.endIndex&&D(this.endIndex)},qo.prototype.outputDefined=function(){return!1},qo.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var D=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),D]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ms=Fa("==",function(D,z,Q){return z===Q},Yl),Hs=Fa("!=",function(D,z,Q){return z!==Q},function(D,z,Q,he){return!Yl(0,z,Q,he)}),pu=Fa("<",function(D,z,Q){return z<Q},function(D,z,Q,he){return he.compare(z,Q)<0}),Fs=Fa(">",function(D,z,Q){return z>Q},function(D,z,Q,he){return he.compare(z,Q)>0}),nu=Fa("<=",function(D,z,Q){return z<=Q},function(D,z,Q,he){return he.compare(z,Q)<=0}),ru=Fa(">=",function(D,z,Q){return z>=Q},function(D,z,Q,he){return he.compare(z,Q)>=0}),Ns=function(D,z,Q,he,xe){this.type=Et,this.number=D,this.locale=z,this.currency=Q,this.minFractionDigits=he,this.maxFractionDigits=xe};Ns.parse=function(D,z){if(3!==D.length)return z.error("Expected two arguments.");var Q=z.parse(D[1],1,vt);if(!Q)return null;var he=D[2];if("object"!=typeof he||Array.isArray(he))return z.error("NumberFormat options argument must be an object.");var xe=null;if(he.locale&&!(xe=z.parse(he.locale,1,Et)))return null;var Se=null;if(he.currency&&!(Se=z.parse(he.currency,1,Et)))return null;var ze=null;if(he["min-fraction-digits"]&&!(ze=z.parse(he["min-fraction-digits"],1,vt)))return null;var Ze=null;return he["max-fraction-digits"]&&!(Ze=z.parse(he["max-fraction-digits"],1,vt))?null:new Ns(Q,xe,Se,ze,Ze)},Ns.prototype.evaluate=function(D){return new Intl.NumberFormat(this.locale?this.locale.evaluate(D):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(D):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(D):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(D):void 0}).format(this.number.evaluate(D))},Ns.prototype.eachChild=function(D){D(this.number),this.locale&&D(this.locale),this.currency&&D(this.currency),this.minFractionDigits&&D(this.minFractionDigits),this.maxFractionDigits&&D(this.maxFractionDigits)},Ns.prototype.outputDefined=function(){return!1},Ns.prototype.serialize=function(){var D={};return this.locale&&(D.locale=this.locale.serialize()),this.currency&&(D.currency=this.currency.serialize()),this.minFractionDigits&&(D["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(D["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),D]};var zs=function(D){this.type=vt,this.input=D};zs.parse=function(D,z){if(2!==D.length)return z.error("Expected 1 argument, but found "+(D.length-1)+" instead.");var Q=z.parse(D[1],1);return Q?"array"!==Q.type.kind&&"string"!==Q.type.kind&&"value"!==Q.type.kind?z.error("Expected argument of type string or array, but found "+Qt(Q.type)+" instead."):new zs(Q):null},zs.prototype.evaluate=function(D){var z=this.input.evaluate(D);if("string"==typeof z||Array.isArray(z))return z.length;throw new zr("Expected value to be of type string or array, but found "+Qt(er(z))+" instead.")},zs.prototype.eachChild=function(D){D(this.input)},zs.prototype.outputDefined=function(){return!1},zs.prototype.serialize=function(){var D=["length"];return this.eachChild(function(z){D.push(z.serialize())}),D};var no={"==":Ms,"!=":Hs,">":Fs,"<":pu,">=":ru,"<=":nu,array:Br,at:pa,boolean:Br,case:ia,coalesce:Ts,collator:ci,format:fr,image:Nr,in:Rs,"index-of":Us,interpolate:ka,"interpolate-hcl":ka,"interpolate-lab":ka,length:zs,let:Uo,literal:Zr,match:wo,number:Br,"number-format":Ns,object:Br,slice:qo,step:Vr,string:Br,"to-boolean":Qn,"to-color":Qn,"to-number":Qn,"to-string":Qn,var:br,within:Vn};function ol(D,z){var Q=z[0],he=z[1],xe=z[2],Se=z[3];Q=Q.evaluate(D),he=he.evaluate(D),xe=xe.evaluate(D);var ze=Se?Se.evaluate(D):1,Ze=$n(Q,he,xe,ze);if(Ze)throw new zr(Ze);return new cn(Q/255*ze,he/255*ze,xe/255*ze,ze)}function $s(D,z){return D in z}function Wi(D,z){var Q=z[D];return void 0===Q?null:Q}function so(D){return{type:D}}function Ho(D){return{result:"success",value:D}}function Po(D){return{result:"error",value:D}}function os(D){return"data-driven"===D["property-type"]||"cross-faded-data-driven"===D["property-type"]}function ns(D){return!!D.expression&&D.expression.parameters.indexOf("zoom")>-1}function ps(D){return!!D.expression&&D.expression.interpolated}function La(D){return D instanceof Number?"number":D instanceof String?"string":D instanceof Boolean?"boolean":Array.isArray(D)?"array":null===D?"null":typeof D}function Xe(D){return"object"==typeof D&&null!==D&&!Array.isArray(D)}function Qe(D){return D}function ct(D,z,Q){return void 0!==D?D:void 0!==z?z:void 0!==Q?Q:void 0}function mt(D,z,Q,he,xe){return ct(typeof Q===xe?he[Q]:void 0,D.default,z.default)}function St(D,z,Q){if("number"!==La(Q))return ct(D.default,z.default);var he=D.stops.length;if(1===he||Q<=D.stops[0][0])return D.stops[0][1];if(Q>=D.stops[he-1][0])return D.stops[he-1][1];var xe=Fr(D.stops.map(function(Se){return Se[0]}),Q);return D.stops[xe][1]}function Mt(D,z,Q){var he=void 0!==D.base?D.base:1;if("number"!==La(Q))return ct(D.default,z.default);var xe=D.stops.length;if(1===xe||Q<=D.stops[0][0])return D.stops[0][1];if(Q>=D.stops[xe-1][0])return D.stops[xe-1][1];var sn,en,Fn,Gn,Se=Fr(D.stops.map(function(Zt){return Zt[0]}),Q),ze=(sn=he,Gn=Q-(en=D.stops[Se][0]),0==(Fn=D.stops[Se+1][0]-en)?0:1===sn?Gn/Fn:(Math.pow(sn,Gn)-1)/(Math.pow(sn,Fn)-1)),Ze=D.stops[Se][1],lt=D.stops[Se+1][1],_t=Xr[z.type]||Qe;if(D.colorSpace&&"rgb"!==D.colorSpace){var kt=ho[D.colorSpace];_t=function(Zt,sn){return kt.reverse(kt.interpolate(kt.forward(Zt),kt.forward(sn),ze))}}return"function"==typeof Ze.evaluate?{evaluate:function(){for(var Zt=[],sn=arguments.length;sn--;)Zt[sn]=arguments[sn];var en=Ze.evaluate.apply(void 0,Zt),xn=lt.evaluate.apply(void 0,Zt);if(void 0!==en&&void 0!==xn)return _t(en,xn,ze)}}:_t(Ze,lt,ze)}function xt(D,z,Q){return"color"===z.type?Q=cn.parse(Q):"formatted"===z.type?Q=Dn.fromString(Q.toString()):"resolvedImage"===z.type?Q=Pn.fromString(Q.toString()):La(Q)===z.type||"enum"===z.type&&z.values[Q]||(Q=void 0),ct(Q,D.default,z.default)}sr.register(no,{error:[{kind:"error"},[Et],function(D,z){throw new zr(z[0].evaluate(D))}],typeof:[Et,[je],function(D,z){return Qt(er(z[0].evaluate(D)))}],"to-rgba":[jt(vt,4),[Dt],function(D,z){return z[0].evaluate(D).toArray()}],rgb:[Dt,[vt,vt,vt],ol],rgba:[Dt,[vt,vt,vt,vt],ol],has:{type:$t,overloads:[[[Et],function(D,z){return $s(z[0].evaluate(D),D.properties())}],[[Et,Pt],function(D,z){var he=z[1];return $s(z[0].evaluate(D),he.evaluate(D))}]]},get:{type:je,overloads:[[[Et],function(D,z){return Wi(z[0].evaluate(D),D.properties())}],[[Et,Pt],function(D,z){var he=z[1];return Wi(z[0].evaluate(D),he.evaluate(D))}]]},"feature-state":[je,[Et],function(D,z){return Wi(z[0].evaluate(D),D.featureState||{})}],properties:[Pt,[],function(D){return D.properties()}],"geometry-type":[Et,[],function(D){return D.geometryType()}],id:[je,[],function(D){return D.id()}],zoom:[vt,[],function(D){return D.globals.zoom}],"heatmap-density":[vt,[],function(D){return D.globals.heatmapDensity||0}],"line-progress":[vt,[],function(D){return D.globals.lineProgress||0}],accumulated:[je,[],function(D){return void 0===D.globals.accumulated?null:D.globals.accumulated}],"+":[vt,so(vt),function(D,z){for(var Q=0,he=0,xe=z;he<xe.length;he+=1)Q+=xe[he].evaluate(D);return Q}],"*":[vt,so(vt),function(D,z){for(var Q=1,he=0,xe=z;he<xe.length;he+=1)Q*=xe[he].evaluate(D);return Q}],"-":{type:vt,overloads:[[[vt,vt],function(D,z){var he=z[1];return z[0].evaluate(D)-he.evaluate(D)}],[[vt],function(D,z){return-z[0].evaluate(D)}]]},"/":[vt,[vt,vt],function(D,z){var he=z[1];return z[0].evaluate(D)/he.evaluate(D)}],"%":[vt,[vt,vt],function(D,z){var he=z[1];return z[0].evaluate(D)%he.evaluate(D)}],ln2:[vt,[],function(){return Math.LN2}],pi:[vt,[],function(){return Math.PI}],e:[vt,[],function(){return Math.E}],"^":[vt,[vt,vt],function(D,z){var he=z[1];return Math.pow(z[0].evaluate(D),he.evaluate(D))}],sqrt:[vt,[vt],function(D,z){return Math.sqrt(z[0].evaluate(D))}],log10:[vt,[vt],function(D,z){return Math.log(z[0].evaluate(D))/Math.LN10}],ln:[vt,[vt],function(D,z){return Math.log(z[0].evaluate(D))}],log2:[vt,[vt],function(D,z){return Math.log(z[0].evaluate(D))/Math.LN2}],sin:[vt,[vt],function(D,z){return Math.sin(z[0].evaluate(D))}],cos:[vt,[vt],function(D,z){return Math.cos(z[0].evaluate(D))}],tan:[vt,[vt],function(D,z){return Math.tan(z[0].evaluate(D))}],asin:[vt,[vt],function(D,z){return Math.asin(z[0].evaluate(D))}],acos:[vt,[vt],function(D,z){return Math.acos(z[0].evaluate(D))}],atan:[vt,[vt],function(D,z){return Math.atan(z[0].evaluate(D))}],min:[vt,so(vt),function(D,z){return Math.min.apply(Math,z.map(function(Q){return Q.evaluate(D)}))}],max:[vt,so(vt),function(D,z){return Math.max.apply(Math,z.map(function(Q){return Q.evaluate(D)}))}],abs:[vt,[vt],function(D,z){return Math.abs(z[0].evaluate(D))}],round:[vt,[vt],function(D,z){var Q=z[0].evaluate(D);return Q<0?-Math.round(-Q):Math.round(Q)}],floor:[vt,[vt],function(D,z){return Math.floor(z[0].evaluate(D))}],ceil:[vt,[vt],function(D,z){return Math.ceil(z[0].evaluate(D))}],"filter-==":[$t,[Et,je],function(D,z){var Q=z[0],he=z[1];return D.properties()[Q.value]===he.value}],"filter-id-==":[$t,[je],function(D,z){var Q=z[0];return D.id()===Q.value}],"filter-type-==":[$t,[Et],function(D,z){var Q=z[0];return D.geometryType()===Q.value}],"filter-<":[$t,[Et,je],function(D,z){var Q=z[0],he=z[1],xe=D.properties()[Q.value],Se=he.value;return typeof xe==typeof Se&&xe<Se}],"filter-id-<":[$t,[je],function(D,z){var Q=z[0],he=D.id(),xe=Q.value;return typeof he==typeof xe&&he<xe}],"filter->":[$t,[Et,je],function(D,z){var Q=z[0],he=z[1],xe=D.properties()[Q.value],Se=he.value;return typeof xe==typeof Se&&xe>Se}],"filter-id->":[$t,[je],function(D,z){var Q=z[0],he=D.id(),xe=Q.value;return typeof he==typeof xe&&he>xe}],"filter-<=":[$t,[Et,je],function(D,z){var Q=z[0],he=z[1],xe=D.properties()[Q.value],Se=he.value;return typeof xe==typeof Se&&xe<=Se}],"filter-id-<=":[$t,[je],function(D,z){var Q=z[0],he=D.id(),xe=Q.value;return typeof he==typeof xe&&he<=xe}],"filter->=":[$t,[Et,je],function(D,z){var Q=z[0],he=z[1],xe=D.properties()[Q.value],Se=he.value;return typeof xe==typeof Se&&xe>=Se}],"filter-id->=":[$t,[je],function(D,z){var Q=z[0],he=D.id(),xe=Q.value;return typeof he==typeof xe&&he>=xe}],"filter-has":[$t,[je],function(D,z){return z[0].value in D.properties()}],"filter-has-id":[$t,[],function(D){return null!==D.id()&&void 0!==D.id()}],"filter-type-in":[$t,[jt(Et)],function(D,z){return z[0].value.indexOf(D.geometryType())>=0}],"filter-id-in":[$t,[jt(je)],function(D,z){return z[0].value.indexOf(D.id())>=0}],"filter-in-small":[$t,[Et,jt(je)],function(D,z){var Q=z[0];return z[1].value.indexOf(D.properties()[Q.value])>=0}],"filter-in-large":[$t,[Et,jt(je)],function(D,z){var Q=z[0],he=z[1];return function(xe,Se,ze,Ze){for(;ze<=Ze;){var lt=ze+Ze>>1;if(Se[lt]===xe)return!0;Se[lt]>xe?Ze=lt-1:ze=lt+1}return!1}(D.properties()[Q.value],he.value,0,he.value.length-1)}],all:{type:$t,overloads:[[[$t,$t],function(D,z){var he=z[1];return z[0].evaluate(D)&&he.evaluate(D)}],[so($t),function(D,z){for(var Q=0,he=z;Q<he.length;Q+=1)if(!he[Q].evaluate(D))return!1;return!0}]]},any:{type:$t,overloads:[[[$t,$t],function(D,z){var he=z[1];return z[0].evaluate(D)||he.evaluate(D)}],[so($t),function(D,z){for(var Q=0,he=z;Q<he.length;Q+=1)if(he[Q].evaluate(D))return!0;return!1}]]},"!":[$t,[$t],function(D,z){return!z[0].evaluate(D)}],"is-supported-script":[$t,[Et],function(D,z){var he=D.globals&&D.globals.isSupportedScript;return!he||he(z[0].evaluate(D))}],upcase:[Et,[Et],function(D,z){return z[0].evaluate(D).toUpperCase()}],downcase:[Et,[Et],function(D,z){return z[0].evaluate(D).toLowerCase()}],concat:[Et,so(je),function(D,z){return z.map(function(Q){return or(Q.evaluate(D))}).join("")}],"resolved-locale":[Et,[rt],function(D,z){return z[0].evaluate(D).resolvedLocale()}]});var Jt=function(D,z){var Q;this.expression=D,this._warningHistory={},this._evaluator=new kr,this._defaultValue=z?"color"===(Q=z).type&&Xe(Q.default)?new cn(0,0,0,0):"color"===Q.type?cn.parse(Q.default)||null:void 0===Q.default?null:Q.default:null,this._enumValues=z&&"enum"===z.type?z.values:null};function on(D){return Array.isArray(D)&&D.length>0&&"string"==typeof D[0]&&D[0]in no}function nn(D,z){var xe,Se,Q=new Tr(no,[],z?(Se={color:Dt,string:Et,number:vt,enum:Et,boolean:$t,formatted:pt,resolvedImage:It},"array"===(xe=z).type?jt(Se[xe.value]||je,xe.length):Se[xe.type]):void 0),he=Q.parse(D,void 0,void 0,void 0,z&&"string"===z.type?{typeAnnotation:"coerce"}:void 0);return he?Ho(new Jt(he,z)):Po(Q.errors)}Jt.prototype.evaluateWithoutErrorHandling=function(D,z,Q,he,xe,Se){return this._evaluator.globals=D,this._evaluator.feature=z,this._evaluator.featureState=Q,this._evaluator.canonical=he,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Se,this.expression.evaluate(this._evaluator)},Jt.prototype.evaluate=function(D,z,Q,he,xe,Se){this._evaluator.globals=D,this._evaluator.feature=z||null,this._evaluator.featureState=Q||null,this._evaluator.canonical=he,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Se||null;try{var ze=this.expression.evaluate(this._evaluator);if(null==ze||"number"==typeof ze&&ze!=ze)return this._defaultValue;if(this._enumValues&&!(ze in this._enumValues))throw new zr("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ze){return JSON.stringify(Ze)}).join(", ")+", but found "+JSON.stringify(ze)+" instead.");return ze}catch(Ze){return this._warningHistory[Ze.message]||(this._warningHistory[Ze.message]=!0,"undefined"!=typeof console&&console.warn(Ze.message)),this._defaultValue}};var yn=function(D,z){this.kind=D,this._styleExpression=z,this.isStateDependent="constant"!==D&&!dr(z.expression)};yn.prototype.evaluateWithoutErrorHandling=function(D,z,Q,he,xe,Se){return this._styleExpression.evaluateWithoutErrorHandling(D,z,Q,he,xe,Se)},yn.prototype.evaluate=function(D,z,Q,he,xe,Se){return this._styleExpression.evaluate(D,z,Q,he,xe,Se)};var An=function(D,z,Q,he){this.kind=D,this.zoomStops=Q,this._styleExpression=z,this.isStateDependent="camera"!==D&&!dr(z.expression),this.interpolationType=he};function Rn(D,z){if("error"===(D=nn(D,z)).result)return D;var Q=D.value.expression,he=On(Q);if(!he&&!os(z))return Po([new wt("","data expressions not supported")]);var xe=ir(Q,["zoom"]);if(!xe&&!ns(z))return Po([new wt("","zoom expressions not supported")]);var Se=function Ze(lt){var _t=null;if(lt instanceof Uo)_t=Ze(lt.result);else if(lt instanceof Ts)for(var kt=0,Zt=lt.args;kt<Zt.length&&!(_t=Ze(Zt[kt]));kt+=1);else(lt instanceof Vr||lt instanceof ka)&&lt.input instanceof sr&&"zoom"===lt.input.name&&(_t=lt);return _t instanceof wt||lt.eachChild(function(en){var xn=Ze(en);xn instanceof wt?_t=xn:!_t&&xn?_t=new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):_t&&xn&&_t!==xn&&(_t=new wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),_t}(Q);return Se||xe?Se instanceof wt?Po([Se]):Se instanceof ka&&!ps(z)?Po([new wt("",'"interpolate" expressions cannot be used with this property')]):Ho(Se?new An(he?"camera":"composite",D.value,Se.labels,Se instanceof ka?Se.interpolation:void 0):new yn(he?"constant":"source",D.value)):Po([new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}An.prototype.evaluateWithoutErrorHandling=function(D,z,Q,he,xe,Se){return this._styleExpression.evaluateWithoutErrorHandling(D,z,Q,he,xe,Se)},An.prototype.evaluate=function(D,z,Q,he,xe,Se){return this._styleExpression.evaluate(D,z,Q,he,xe,Se)},An.prototype.interpolationFactor=function(D,z,Q){return this.interpolationType?ka.interpolationFactor(this.interpolationType,D,z,Q):0};var Ln=function(D,z){this._parameters=D,this._specification=z,ot(this,function Q(he,xe){var Se,ze,Ze,lt="color"===xe.type,_t=he.stops&&"object"==typeof he.stops[0][0],Zt=_t||!(_t||void 0!==he.property),sn=he.type||(ps(xe)?"exponential":"interval");if(lt&&((he=ot({},he)).stops&&(he.stops=he.stops.map(function(Li){return[Li[0],cn.parse(Li[1])]})),he.default=cn.parse(he.default?he.default:xe.default)),he.colorSpace&&"rgb"!==he.colorSpace&&!ho[he.colorSpace])throw new Error("Unknown color space: "+he.colorSpace);if("exponential"===sn)Se=Mt;else if("interval"===sn)Se=St;else if("categorical"===sn){Se=mt,ze=Object.create(null);for(var en=0,xn=he.stops;en<xn.length;en+=1){var Fn=xn[en];ze[Fn[0]]=Fn[1]}Ze=typeof he.stops[0][0]}else{if("identity"!==sn)throw new Error('Unknown function type "'+sn+'"');Se=xt}if(_t){for(var Gn={},qn=[],ar=0;ar<he.stops.length;ar++){var lr=he.stops[ar],hr=lr[0].zoom;void 0===Gn[hr]&&(Gn[hr]={zoom:hr,type:he.type,property:he.property,default:he.default,stops:[]},qn.push(hr)),Gn[hr].stops.push([lr[0].value,lr[1]])}for(var Lr=[],jr=0,li=qn;jr<li.length;jr+=1){var ai=li[jr];Lr.push([Gn[ai].zoom,Q(Gn[ai],xe)])}var gi={name:"linear"};return{kind:"composite",interpolationType:gi,interpolationFactor:ka.interpolationFactor.bind(void 0,gi),zoomStops:Lr.map(function(Li){return Li[0]}),evaluate:function(Li,Ti){var Bi=Li.zoom;return Mt({stops:Lr,base:he.base},xe,Bi).evaluate(Bi,Ti)}}}if(Zt){var Ii="exponential"===sn?{name:"exponential",base:void 0!==he.base?he.base:1}:null;return{kind:"camera",interpolationType:Ii,interpolationFactor:ka.interpolationFactor.bind(void 0,Ii),zoomStops:he.stops.map(function(Li){return Li[0]}),evaluate:function(Li){return Se(he,xe,Li.zoom,ze,Ze)}}}return{kind:"source",evaluate:function(Li,Ti){var Bi=Ti&&Ti.properties?Ti.properties[he.property]:void 0;return void 0===Bi?ct(he.default,xe.default):Se(he,xe,Bi,ze,Ze)}}}(this._parameters,this._specification))};function Zn(D){var z=D.key,Q=D.value,he=D.valueSpec||{},xe=D.objectElementValidators||{},Se=D.style,ze=D.styleSpec,Ze=[],lt=La(Q);if("object"!==lt)return[new Ye(z,Q,"object expected, "+lt+" found")];for(var _t in Q){var kt=_t.split(".")[0],Zt=he[kt]||he["*"],sn=void 0;if(xe[kt])sn=xe[kt];else if(he[kt])sn=wn;else if(xe["*"])sn=xe["*"];else{if(!he["*"]){Ze.push(new Ye(z,Q[_t],'unknown property "'+_t+'"'));continue}sn=wn}Ze=Ze.concat(sn({key:(z&&z+".")+_t,value:Q[_t],valueSpec:Zt,style:Se,styleSpec:ze,object:Q,objectKey:_t},Q))}for(var en in he)xe[en]||he[en].required&&void 0===he[en].default&&void 0===Q[en]&&Ze.push(new Ye(z,Q,'missing required property "'+en+'"'));return Ze}function _r(D){var z=D.value,Q=D.valueSpec,he=D.style,xe=D.styleSpec,Se=D.key,ze=D.arrayElementValidator||wn;if("array"!==La(z))return[new Ye(Se,z,"array expected, "+La(z)+" found")];if(Q.length&&z.length!==Q.length)return[new Ye(Se,z,"array length "+Q.length+" expected, length "+z.length+" found")];if(Q["min-length"]&&z.length<Q["min-length"])return[new Ye(Se,z,"array length at least "+Q["min-length"]+" expected, length "+z.length+" found")];var Ze={type:Q.value,values:Q.values};xe.$version<7&&(Ze.function=Q.function),"object"===La(Q.value)&&(Ze=Q.value);for(var lt=[],_t=0;_t<z.length;_t++)lt=lt.concat(ze({array:z,arrayIndex:_t,value:z[_t],valueSpec:Ze,style:he,styleSpec:xe,key:Se+"["+_t+"]"}));return lt}function cr(D){var z=D.key,Q=D.value,he=D.valueSpec,xe=La(Q);return"number"===xe&&Q!=Q&&(xe="NaN"),"number"!==xe?[new Ye(z,Q,"number expected, "+xe+" found")]:"minimum"in he&&Q<he.minimum?[new Ye(z,Q,Q+" is less than the minimum value "+he.minimum)]:"maximum"in he&&Q>he.maximum?[new Ye(z,Q,Q+" is greater than the maximum value "+he.maximum)]:[]}function Jr(D){var z,Q,he,xe=D.valueSpec,Se=st(D.value.type),ze={},Ze="categorical"!==Se&&void 0===D.value.property,lt=!Ze,_t="array"===La(D.value.stops)&&"array"===La(D.value.stops[0])&&"object"===La(D.value.stops[0][0]),kt=Zn({key:D.key,value:D.value,valueSpec:D.styleSpec.function,style:D.style,styleSpec:D.styleSpec,objectElementValidators:{stops:function(en){if("identity"===Se)return[new Ye(en.key,en.value,'identity function may not have a "stops" property')];var xn=[],Fn=en.value;return xn=xn.concat(_r({key:en.key,value:Fn,valueSpec:en.valueSpec,style:en.style,styleSpec:en.styleSpec,arrayElementValidator:Zt})),"array"===La(Fn)&&0===Fn.length&&xn.push(new Ye(en.key,Fn,"array must have at least one stop")),xn},default:function(en){return wn({key:en.key,value:en.value,valueSpec:xe,style:en.style,styleSpec:en.styleSpec})}}});return"identity"===Se&&Ze&&kt.push(new Ye(D.key,D.value,'missing required property "property"')),"identity"===Se||D.value.stops||kt.push(new Ye(D.key,D.value,'missing required property "stops"')),"exponential"===Se&&D.valueSpec.expression&&!ps(D.valueSpec)&&kt.push(new Ye(D.key,D.value,"exponential functions not supported")),D.styleSpec.$version>=8&&(lt&&!os(D.valueSpec)?kt.push(new Ye(D.key,D.value,"property functions not supported")):Ze&&!ns(D.valueSpec)&&kt.push(new Ye(D.key,D.value,"zoom functions not supported"))),"categorical"!==Se&&!_t||void 0!==D.value.property||kt.push(new Ye(D.key,D.value,'"property" property is required')),kt;function Zt(en){var xn=[],Fn=en.value,Gn=en.key;if("array"!==La(Fn))return[new Ye(Gn,Fn,"array expected, "+La(Fn)+" found")];if(2!==Fn.length)return[new Ye(Gn,Fn,"array length 2 expected, length "+Fn.length+" found")];if(_t){if("object"!==La(Fn[0]))return[new Ye(Gn,Fn,"object expected, "+La(Fn[0])+" found")];if(void 0===Fn[0].zoom)return[new Ye(Gn,Fn,"object stop key must have zoom")];if(void 0===Fn[0].value)return[new Ye(Gn,Fn,"object stop key must have value")];if(he&&he>st(Fn[0].zoom))return[new Ye(Gn,Fn[0].zoom,"stop zoom values must appear in ascending order")];st(Fn[0].zoom)!==he&&(he=st(Fn[0].zoom),Q=void 0,ze={}),xn=xn.concat(Zn({key:Gn+"[0]",value:Fn[0],valueSpec:{zoom:{}},style:en.style,styleSpec:en.styleSpec,objectElementValidators:{zoom:cr,value:sn}}))}else xn=xn.concat(sn({key:Gn+"[0]",value:Fn[0],valueSpec:{},style:en.style,styleSpec:en.styleSpec},Fn));return on(bt(Fn[1]))?xn.concat([new Ye(Gn+"[1]",Fn[1],"expressions are not allowed in function stops.")]):xn.concat(wn({key:Gn+"[1]",value:Fn[1],valueSpec:xe,style:en.style,styleSpec:en.styleSpec}))}function sn(en,xn){var Fn=La(en.value),Gn=st(en.value),qn=null!==en.value?en.value:xn;if(z){if(Fn!==z)return[new Ye(en.key,qn,Fn+" stop domain type must match previous stop domain type "+z)]}else z=Fn;if("number"!==Fn&&"string"!==Fn&&"boolean"!==Fn)return[new Ye(en.key,qn,"stop domain value must be a number, string, or boolean")];if("number"!==Fn&&"categorical"!==Se){var ar="number expected, "+Fn+" found";return os(xe)&&void 0===Se&&(ar+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ye(en.key,qn,ar)]}return"categorical"!==Se||"number"!==Fn||isFinite(Gn)&&Math.floor(Gn)===Gn?"categorical"!==Se&&"number"===Fn&&void 0!==Q&&Gn<Q?[new Ye(en.key,qn,"stop domain values must appear in ascending order")]:(Q=Gn,"categorical"===Se&&Gn in ze?[new Ye(en.key,qn,"stop domain values must be unique")]:(ze[Gn]=!0,[])):[new Ye(en.key,qn,"integer expected, found "+Gn)]}}function ti(D){var z=("property"===D.expressionContext?Rn:nn)(bt(D.value),D.valueSpec);if("error"===z.result)return z.value.map(function(he){return new Ye(""+D.key+he.key,D.value,he.message)});var Q=z.value.expression||z.value._styleExpression.expression;if("property"===D.expressionContext&&"text-font"===D.propertyKey&&!Q.outputDefined())return[new Ye(D.key,D.value,'Invalid data expression for "'+D.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===D.expressionContext&&"layout"===D.propertyType&&!dr(Q))return[new Ye(D.key,D.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===D.expressionContext&&!dr(Q))return[new Ye(D.key,D.value,'"feature-state" data expressions are not supported with filters.')];if(D.expressionContext&&0===D.expressionContext.indexOf("cluster")){if(!ir(Q,["zoom","feature-state"]))return[new Ye(D.key,D.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===D.expressionContext&&!On(Q))return[new Ye(D.key,D.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function di(D){var z=D.key,Q=D.value,he=D.valueSpec,xe=[];return Array.isArray(he.values)?-1===he.values.indexOf(st(Q))&&xe.push(new Ye(z,Q,"expected one of ["+he.values.join(", ")+"], "+JSON.stringify(Q)+" found")):-1===Object.keys(he.values).indexOf(st(Q))&&xe.push(new Ye(z,Q,"expected one of ["+Object.keys(he.values).join(", ")+"], "+JSON.stringify(Q)+" found")),xe}function ni(D){if(!0===D||!1===D)return!0;if(!Array.isArray(D)||0===D.length)return!1;switch(D[0]){case"has":return D.length>=2&&"$id"!==D[1]&&"$type"!==D[1];case"in":return D.length>=3&&("string"!=typeof D[1]||Array.isArray(D[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==D.length||Array.isArray(D[1])||Array.isArray(D[2]);case"any":case"all":for(var z=0,Q=D.slice(1);z<Q.length;z+=1){var he=Q[z];if(!ni(he)&&"boolean"!=typeof he)return!1}return!0;default:return!0}}Ln.deserialize=function(D){return new Ln(D._parameters,D._specification)},Ln.serialize=function(D){return{_parameters:D._parameters,_specification:D._specification}};var Ci={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ji(D){if(null==D)return{filter:function(){return!0},needGeometry:!1};ni(D)||(D=sa(D));var z=nn(D,Ci);if("error"===z.result)throw new Error(z.value.map(function(Q){return Q.key+": "+Q.message}).join(", "));return{filter:function(Q,he,xe){return z.value.evaluate(Q,he,{},xe)},needGeometry:function Q(he){if(!Array.isArray(he))return!1;if("within"===he[0])return!0;for(var xe=1;xe<he.length;xe++)if(Q(he[xe]))return!0;return!1}(D)}}function va(D,z){return D<z?-1:D>z?1:0}function sa(D){if(!D)return!0;var z,Q=D[0];return D.length<=1?"any"!==Q:"=="===Q?qi(D[1],D[2],"=="):"!="===Q?Da(qi(D[1],D[2],"==")):"<"===Q||">"===Q||"<="===Q||">="===Q?qi(D[1],D[2],Q):"any"===Q?(z=D.slice(1),["any"].concat(z.map(sa))):"all"===Q?["all"].concat(D.slice(1).map(sa)):"none"===Q?["all"].concat(D.slice(1).map(sa).map(Da)):"in"===Q?Oo(D[1],D.slice(2)):"!in"===Q?Da(Oo(D[1],D.slice(2))):"has"===Q?Do(D[1]):"!has"===Q?Da(Do(D[1])):"within"!==Q||D}function qi(D,z,Q){switch(D){case"$type":return["filter-type-"+Q,z];case"$id":return["filter-id-"+Q,z];default:return["filter-"+Q,D,z]}}function Oo(D,z){if(0===z.length)return!1;switch(D){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(Q){return typeof Q!=typeof z[0]})?["filter-in-large",D,["literal",z.sort(va)]]:["filter-in-small",D,["literal",z]]}}function Do(D){switch(D){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",D]}}function Da(D){return["!",D]}function Ea(D){return ni(bt(D.value))?ti(ot({},D,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function z(Q){var he=Q.value,xe=Q.key;if("array"!==La(he))return[new Ye(xe,he,"array expected, "+La(he)+" found")];var Se,ze=Q.styleSpec,Ze=[];if(he.length<1)return[new Ye(xe,he,"filter array must have at least 1 element")];switch(Ze=Ze.concat(di({key:xe+"[0]",value:he[0],valueSpec:ze.filter_operator,style:Q.style,styleSpec:Q.styleSpec})),st(he[0])){case"<":case"<=":case">":case">=":he.length>=2&&"$type"===st(he[1])&&Ze.push(new Ye(xe,he,'"$type" cannot be use with operator "'+he[0]+'"'));case"==":case"!=":3!==he.length&&Ze.push(new Ye(xe,he,'filter array for operator "'+he[0]+'" must have 3 elements'));case"in":case"!in":he.length>=2&&"string"!==(Se=La(he[1]))&&Ze.push(new Ye(xe+"[1]",he[1],"string expected, "+Se+" found"));for(var lt=2;lt<he.length;lt++)Se=La(he[lt]),"$type"===st(he[1])?Ze=Ze.concat(di({key:xe+"["+lt+"]",value:he[lt],valueSpec:ze.geometry_type,style:Q.style,styleSpec:Q.styleSpec})):"string"!==Se&&"number"!==Se&&"boolean"!==Se&&Ze.push(new Ye(xe+"["+lt+"]",he[lt],"string, number, or boolean expected, "+Se+" found"));break;case"any":case"all":case"none":for(var _t=1;_t<he.length;_t++)Ze=Ze.concat(z({key:xe+"["+_t+"]",value:he[_t],style:Q.style,styleSpec:Q.styleSpec}));break;case"has":case"!has":Se=La(he[1]),2!==he.length?Ze.push(new Ye(xe,he,'filter array for "'+he[0]+'" operator must have 2 elements')):"string"!==Se&&Ze.push(new Ye(xe+"[1]",he[1],"string expected, "+Se+" found"));break;case"within":Se=La(he[1]),2!==he.length?Ze.push(new Ye(xe,he,'filter array for "'+he[0]+'" operator must have 2 elements')):"object"!==Se&&Ze.push(new Ye(xe+"[1]",he[1],"object expected, "+Se+" found"))}return Ze}(D)}function bo(D,z){var Q=D.key,he=D.style,xe=D.styleSpec,Se=D.value,ze=D.objectKey,Ze=xe[z+"_"+D.layerType];if(!Ze)return[];var lt=ze.match(/^(.*)-transition$/);if("paint"===z&&lt&&Ze[lt[1]]&&Ze[lt[1]].transition)return wn({key:Q,value:Se,valueSpec:xe.transition,style:he,styleSpec:xe});var _t,kt=D.valueSpec||Ze[ze];if(!kt)return[new Ye(Q,Se,'unknown property "'+ze+'"')];if("string"===La(Se)&&os(kt)&&!kt.tokens&&(_t=/^{([^}]+)}$/.exec(Se)))return[new Ye(Q,Se,'"'+ze+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(_t[1])+" }`.")];var Zt=[];return"symbol"===D.layerType&&("text-field"===ze&&he&&!he.glyphs&&Zt.push(new Ye(Q,Se,'use of "text-field" requires a style "glyphs" property')),"text-font"===ze&&Xe(bt(Se))&&"identity"===st(Se.type)&&Zt.push(new Ye(Q,Se,'"text-font" does not support identity functions'))),Zt.concat(wn({key:D.key,value:Se,valueSpec:kt,style:he,styleSpec:xe,expressionContext:"property",propertyType:z,propertyKey:ze}))}function Ro(D){return bo(D,"paint")}function Go(D){return bo(D,"layout")}function po(D){var z=[],Q=D.value,he=D.key,xe=D.style,Se=D.styleSpec;Q.type||Q.ref||z.push(new Ye(he,Q,'either "type" or "ref" is required'));var ze,Ze=st(Q.type),lt=st(Q.ref);if(Q.id)for(var _t=st(Q.id),kt=0;kt<D.arrayIndex;kt++){var Zt=xe.layers[kt];st(Zt.id)===_t&&z.push(new Ye(he,Q.id,'duplicate layer id "'+Q.id+'", previously used at line '+Zt.id.__line__))}if("ref"in Q)["type","source","source-layer","filter","layout"].forEach(function(xn){xn in Q&&z.push(new Ye(he,Q[xn],'"'+xn+'" is prohibited for ref layers'))}),xe.layers.forEach(function(xn){st(xn.id)===lt&&(ze=xn)}),ze?ze.ref?z.push(new Ye(he,Q.ref,"ref cannot reference another ref layer")):Ze=st(ze.type):z.push(new Ye(he,Q.ref,'ref layer "'+lt+'" not found'));else if("background"!==Ze)if(Q.source){var sn=xe.sources&&xe.sources[Q.source],en=sn&&st(sn.type);sn?"vector"===en&&"raster"===Ze?z.push(new Ye(he,Q.source,'layer "'+Q.id+'" requires a raster source')):"raster"===en&&"raster"!==Ze?z.push(new Ye(he,Q.source,'layer "'+Q.id+'" requires a vector source')):"vector"!==en||Q["source-layer"]?"raster-dem"===en&&"hillshade"!==Ze?z.push(new Ye(he,Q.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ze||!Q.paint||!Q.paint["line-gradient"]||"geojson"===en&&sn.lineMetrics||z.push(new Ye(he,Q,'layer "'+Q.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new Ye(he,Q,'layer "'+Q.id+'" must specify a "source-layer"')):z.push(new Ye(he,Q.source,'source "'+Q.source+'" not found'))}else z.push(new Ye(he,Q,'missing required property "source"'));return z=z.concat(Zn({key:he,value:Q,valueSpec:Se.layer,style:D.style,styleSpec:D.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return wn({key:he+".type",value:Q.type,valueSpec:Se.layer.type,style:D.style,styleSpec:D.styleSpec,object:Q,objectKey:"type"})},filter:Ea,layout:function(xn){return Zn({layer:Q,key:xn.key,value:xn.value,style:xn.style,styleSpec:xn.styleSpec,objectElementValidators:{"*":function(Fn){return Go(ot({layerType:Ze},Fn))}}})},paint:function(xn){return Zn({layer:Q,key:xn.key,value:xn.value,style:xn.style,styleSpec:xn.styleSpec,objectElementValidators:{"*":function(Fn){return Ro(ot({layerType:Ze},Fn))}}})}}}))}function ss(D){var z=D.value,Q=D.key,he=La(z);return"string"!==he?[new Ye(Q,z,"string expected, "+he+" found")]:[]}var gs={promoteId:function(D){var z=D.key,Q=D.value;if("string"===La(Q))return ss({key:z,value:Q});var he=[];for(var xe in Q)he.push.apply(he,ss({key:z+"."+xe,value:Q[xe]}));return he}};function xa(D){var z=D.value,Q=D.key,he=D.styleSpec,xe=D.style;if(!z.type)return[new Ye(Q,z,'"type" is required')];var Se,ze=st(z.type);switch(ze){case"vector":case"raster":case"raster-dem":return Zn({key:Q,value:z,valueSpec:he["source_"+ze.replace("-","_")],style:D.style,styleSpec:he,objectElementValidators:gs});case"geojson":if(Se=Zn({key:Q,value:z,valueSpec:he.source_geojson,style:xe,styleSpec:he,objectElementValidators:gs}),z.cluster)for(var Ze in z.clusterProperties){var lt=z.clusterProperties[Ze],_t=lt[0],Zt="string"==typeof _t?[_t,["accumulated"],["get",Ze]]:_t;Se.push.apply(Se,ti({key:Q+"."+Ze+".map",value:lt[1],expressionContext:"cluster-map"})),Se.push.apply(Se,ti({key:Q+"."+Ze+".reduce",value:Zt,expressionContext:"cluster-reduce"}))}return Se;case"video":return Zn({key:Q,value:z,valueSpec:he.source_video,style:xe,styleSpec:he});case"image":return Zn({key:Q,value:z,valueSpec:he.source_image,style:xe,styleSpec:he});case"canvas":return[new Ye(Q,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return di({key:Q+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:xe,styleSpec:he})}}function At(D){var z=D.value,Q=D.styleSpec,he=Q.light,xe=D.style,Se=[],ze=La(z);if(void 0===z)return Se;if("object"!==ze)return Se.concat([new Ye("light",z,"object expected, "+ze+" found")]);for(var Ze in z){var lt=Ze.match(/^(.*)-transition$/);Se=Se.concat(lt&&he[lt[1]]&&he[lt[1]].transition?wn({key:Ze,value:z[Ze],valueSpec:Q.transition,style:xe,styleSpec:Q}):he[Ze]?wn({key:Ze,value:z[Ze],valueSpec:he[Ze],style:xe,styleSpec:Q}):[new Ye(Ze,z[Ze],'unknown property "'+Ze+'"')])}return Se}var Wt={"*":function(){return[]},array:_r,boolean:function(D){var z=D.value,Q=D.key,he=La(z);return"boolean"!==he?[new Ye(Q,z,"boolean expected, "+he+" found")]:[]},number:cr,color:function(D){var z=D.key,Q=D.value,he=La(Q);return"string"!==he?[new Ye(z,Q,"color expected, "+he+" found")]:null===kn(Q)?[new Ye(z,Q,'color expected, "'+Q+'" found')]:[]},constants:tt,enum:di,filter:Ea,function:Jr,layer:po,object:Zn,source:xa,light:At,string:ss,formatted:function(D){return 0===ss(D).length?[]:ti(D)},resolvedImage:function(D){return 0===ss(D).length?[]:ti(D)}};function wn(D){var z=D.value,Q=D.valueSpec,he=D.styleSpec;return Q.expression&&Xe(st(z))?Jr(D):Q.expression&&on(bt(z))?ti(D):Q.type&&Wt[Q.type]?Wt[Q.type](D):Zn(ot({},D,{valueSpec:Q.type?he[Q.type]:Q}))}function tn(D){var z=D.value,Q=D.key,he=ss(D);return he.length||(-1===z.indexOf("{fontstack}")&&he.push(new Ye(Q,z,'"glyphs" url must include a "{fontstack}" token')),-1===z.indexOf("{range}")&&he.push(new Ye(Q,z,'"glyphs" url must include a "{range}" token'))),he}function Tn(D,z){void 0===z&&(z=He);var Q=[];return Q=Q.concat(wn({key:"",value:D,valueSpec:z.$root,styleSpec:z,style:D,objectElementValidators:{glyphs:tn,"*":function(){return[]}}})),D.constants&&(Q=Q.concat(tt({key:"constants",value:D.constants,style:D,styleSpec:z}))),Wn(Q)}function Wn(D){return[].concat(D).sort(function(z,Q){return z.line-Q.line})}function nr(D){return function(){for(var z=[],Q=arguments.length;Q--;)z[Q]=arguments[Q];return Wn(D.apply(this,z))}}Tn.source=nr(xa),Tn.light=nr(At),Tn.layer=nr(po),Tn.filter=nr(Ea),Tn.paintProperty=nr(Ro),Tn.layoutProperty=nr(Go);var gr=Tn,Sr=gr.light,Mr=gr.paintProperty,Rr=gr.layoutProperty;function Wr(D,z){var Q=!1;if(z&&z.length)for(var he=0,xe=z;he<xe.length;he+=1)D.fire(new De(new Error(xe[he].message))),Q=!0;return Q}var Cr=Yr;function Yr(D,z,Q){var he=this.cells=[];if(D instanceof ArrayBuffer){this.arrayBuffer=D;var xe=new Int32Array(this.arrayBuffer);D=xe[0],this.d=(z=xe[1])+2*(Q=xe[2]);for(var Se=0;Se<this.d*this.d;Se++){var ze=xe[3+Se],Ze=xe[3+Se+1];he.push(ze===Ze?null:xe.subarray(ze,Ze))}var _t=xe[3+he.length+1];this.keys=xe.subarray(xe[3+he.length],_t),this.bboxes=xe.subarray(_t),this.insert=this._insertReadonly}else{this.d=z+2*Q;for(var kt=0;kt<this.d*this.d;kt++)he.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=D,this.padding=Q,this.scale=z/D,this.uid=0;var Zt=Q/z*D;this.min=-Zt,this.max=D+Zt}Yr.prototype.insert=function(D,z,Q,he,xe){this._forEachCell(z,Q,he,xe,this._insertCell,this.uid++),this.keys.push(D),this.bboxes.push(z),this.bboxes.push(Q),this.bboxes.push(he),this.bboxes.push(xe)},Yr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Yr.prototype._insertCell=function(D,z,Q,he,xe,Se){this.cells[xe].push(Se)},Yr.prototype.query=function(D,z,Q,he,xe){var Se=this.min,ze=this.max;if(D<=Se&&z<=Se&&ze<=Q&&ze<=he&&!xe)return Array.prototype.slice.call(this.keys);var Ze=[];return this._forEachCell(D,z,Q,he,this._queryCell,Ze,{},xe),Ze},Yr.prototype._queryCell=function(D,z,Q,he,xe,Se,ze,Ze){var lt=this.cells[xe];if(null!==lt)for(var _t=this.keys,kt=this.bboxes,Zt=0;Zt<lt.length;Zt++){var sn=lt[Zt];if(void 0===ze[sn]){var en=4*sn;(Ze?Ze(kt[en+0],kt[en+1],kt[en+2],kt[en+3]):D<=kt[en+2]&&z<=kt[en+3]&&Q>=kt[en+0]&&he>=kt[en+1])?(ze[sn]=!0,Se.push(_t[sn])):ze[sn]=!1}}},Yr.prototype._forEachCell=function(D,z,Q,he,xe,Se,ze,Ze){for(var lt=this._convertToCellCoord(D),_t=this._convertToCellCoord(z),kt=this._convertToCellCoord(Q),Zt=this._convertToCellCoord(he),sn=lt;sn<=kt;sn++)for(var en=_t;en<=Zt;en++){var xn=this.d*en+sn;if((!Ze||Ze(this._convertFromCellCoord(sn),this._convertFromCellCoord(en),this._convertFromCellCoord(sn+1),this._convertFromCellCoord(en+1)))&&xe.call(this,D,z,Q,he,xn,Se,ze,Ze))return}},Yr.prototype._convertFromCellCoord=function(D){return(D-this.padding)/this.scale},Yr.prototype._convertToCellCoord=function(D){return Math.max(0,Math.min(this.d-1,Math.floor(D*this.scale)+this.padding))},Yr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var D=this.cells,z=3+this.cells.length+1+1,Q=0,he=0;he<this.cells.length;he++)Q+=this.cells[he].length;var xe=new Int32Array(z+Q+this.keys.length+this.bboxes.length);xe[0]=this.extent,xe[1]=this.n,xe[2]=this.padding;for(var Se=z,ze=0;ze<D.length;ze++){var Ze=D[ze];xe[3+ze]=Se,xe.set(Ze,Se),Se+=Ze.length}return xe[3+D.length]=Se,xe.set(this.keys,Se),xe[3+D.length+1]=Se+=this.keys.length,xe.set(this.bboxes,Se),Se+=this.bboxes.length,xe.buffer};var si=self.ImageData,pi=self.ImageBitmap,Ei={};function mr(D,z,Q){void 0===Q&&(Q={}),Object.defineProperty(z,"_classRegistryKey",{value:D,writeable:!1}),Ei[D]={klass:z,omit:Q.omit||[],shallow:Q.shallow||[]}}for(var Di in mr("Object",Object),Cr.serialize=function(D,z){var Q=D.toArrayBuffer();return z&&z.push(Q),{buffer:Q}},Cr.deserialize=function(D){return new Cr(D.buffer)},mr("Grid",Cr),mr("Color",cn),mr("Error",Error),mr("ResolvedImage",Pn),mr("StylePropertyFunction",Ln),mr("StyleExpression",Jt,{omit:["_evaluator"]}),mr("ZoomDependentExpression",An),mr("ZoomConstantExpression",yn),mr("CompoundExpression",sr,{omit:["_evaluate"]}),no)no[Di]._classRegistryKey||mr("Expression_"+Di,no[Di]);function ei(D){return D&&"undefined"!=typeof ArrayBuffer&&(D instanceof ArrayBuffer||D.constructor&&"ArrayBuffer"===D.constructor.name)}function ii(D){return pi&&D instanceof pi}function ki(D,z){if(null==D||"boolean"==typeof D||"number"==typeof D||"string"==typeof D||D instanceof Boolean||D instanceof Number||D instanceof String||D instanceof Date||D instanceof RegExp)return D;if(ei(D)||ii(D))return z&&z.push(D),D;if(ArrayBuffer.isView(D)){var Q=D;return z&&z.push(Q.buffer),Q}if(D instanceof si)return z&&z.push(D.data.buffer),D;if(Array.isArray(D)){for(var he=[],xe=0,Se=D;xe<Se.length;xe+=1)he.push(ki(Se[xe],z));return he}if("object"==typeof D){var Ze=D.constructor,lt=Ze._classRegistryKey;if(!lt)throw new Error("can't serialize object of unregistered class");var _t=Ze.serialize?Ze.serialize(D,z):{};if(!Ze.serialize){for(var kt in D)if(D.hasOwnProperty(kt)&&!(Ei[lt].omit.indexOf(kt)>=0)){var Zt=D[kt];_t[kt]=Ei[lt].shallow.indexOf(kt)>=0?Zt:ki(Zt,z)}D instanceof Error&&(_t.message=D.message)}if(_t.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==lt&&(_t.$name=lt),_t}throw new Error("can't serialize object of type "+typeof D)}function Vi(D){if(null==D||"boolean"==typeof D||"number"==typeof D||"string"==typeof D||D instanceof Boolean||D instanceof Number||D instanceof String||D instanceof Date||D instanceof RegExp||ei(D)||ii(D)||ArrayBuffer.isView(D)||D instanceof si)return D;if(Array.isArray(D))return D.map(Vi);if("object"==typeof D){var z=D.$name||"Object",Q=Ei[z].klass;if(!Q)throw new Error("can't deserialize unregistered class "+z);if(Q.deserialize)return Q.deserialize(D);for(var he=Object.create(Q.prototype),xe=0,Se=Object.keys(D);xe<Se.length;xe+=1){var ze=Se[xe];if("$name"!==ze){var Ze=D[ze];he[ze]=Ei[z].shallow.indexOf(ze)>=0?Ze:Vi(Ze)}}return he}throw new Error("can't deserialize object of type "+typeof D)}var ha=function(){this.first=!0};ha.prototype.update=function(D,z){var Q=Math.floor(D);return this.first?(this.first=!1,this.lastIntegerZoom=Q,this.lastIntegerZoomTime=0,this.lastZoom=D,this.lastFloorZoom=Q,!0):(this.lastFloorZoom>Q?(this.lastIntegerZoom=Q+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<Q&&(this.lastIntegerZoom=Q,this.lastIntegerZoomTime=z),D!==this.lastZoom&&(this.lastZoom=D,this.lastFloorZoom=Q,!0))};var $r={"Latin-1 Supplement":function(D){return D>=128&&D<=255},Arabic:function(D){return D>=1536&&D<=1791},"Arabic Supplement":function(D){return D>=1872&&D<=1919},"Arabic Extended-A":function(D){return D>=2208&&D<=2303},"Hangul Jamo":function(D){return D>=4352&&D<=4607},"Unified Canadian Aboriginal Syllabics":function(D){return D>=5120&&D<=5759},Khmer:function(D){return D>=6016&&D<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(D){return D>=6320&&D<=6399},"General Punctuation":function(D){return D>=8192&&D<=8303},"Letterlike Symbols":function(D){return D>=8448&&D<=8527},"Number Forms":function(D){return D>=8528&&D<=8591},"Miscellaneous Technical":function(D){return D>=8960&&D<=9215},"Control Pictures":function(D){return D>=9216&&D<=9279},"Optical Character Recognition":function(D){return D>=9280&&D<=9311},"Enclosed Alphanumerics":function(D){return D>=9312&&D<=9471},"Geometric Shapes":function(D){return D>=9632&&D<=9727},"Miscellaneous Symbols":function(D){return D>=9728&&D<=9983},"Miscellaneous Symbols and Arrows":function(D){return D>=11008&&D<=11263},"CJK Radicals Supplement":function(D){return D>=11904&&D<=12031},"Kangxi Radicals":function(D){return D>=12032&&D<=12255},"Ideographic Description Characters":function(D){return D>=12272&&D<=12287},"CJK Symbols and Punctuation":function(D){return D>=12288&&D<=12351},Hiragana:function(D){return D>=12352&&D<=12447},Katakana:function(D){return D>=12448&&D<=12543},Bopomofo:function(D){return D>=12544&&D<=12591},"Hangul Compatibility Jamo":function(D){return D>=12592&&D<=12687},Kanbun:function(D){return D>=12688&&D<=12703},"Bopomofo Extended":function(D){return D>=12704&&D<=12735},"CJK Strokes":function(D){return D>=12736&&D<=12783},"Katakana Phonetic Extensions":function(D){return D>=12784&&D<=12799},"Enclosed CJK Letters and Months":function(D){return D>=12800&&D<=13055},"CJK Compatibility":function(D){return D>=13056&&D<=13311},"CJK Unified Ideographs Extension A":function(D){return D>=13312&&D<=19903},"Yijing Hexagram Symbols":function(D){return D>=19904&&D<=19967},"CJK Unified Ideographs":function(D){return D>=19968&&D<=40959},"Yi Syllables":function(D){return D>=40960&&D<=42127},"Yi Radicals":function(D){return D>=42128&&D<=42191},"Hangul Jamo Extended-A":function(D){return D>=43360&&D<=43391},"Hangul Syllables":function(D){return D>=44032&&D<=55215},"Hangul Jamo Extended-B":function(D){return D>=55216&&D<=55295},"Private Use Area":function(D){return D>=57344&&D<=63743},"CJK Compatibility Ideographs":function(D){return D>=63744&&D<=64255},"Arabic Presentation Forms-A":function(D){return D>=64336&&D<=65023},"Vertical Forms":function(D){return D>=65040&&D<=65055},"CJK Compatibility Forms":function(D){return D>=65072&&D<=65103},"Small Form Variants":function(D){return D>=65104&&D<=65135},"Arabic Presentation Forms-B":function(D){return D>=65136&&D<=65279},"Halfwidth and Fullwidth Forms":function(D){return D>=65280&&D<=65519}};function wa(D){for(var z=0,Q=D;z<Q.length;z+=1)if(Ui(Q[z].charCodeAt(0)))return!0;return!1}function ua(D){return!($r.Arabic(D)||$r["Arabic Supplement"](D)||$r["Arabic Extended-A"](D)||$r["Arabic Presentation Forms-A"](D)||$r["Arabic Presentation Forms-B"](D))}function Ui(D){return!(746!==D&&747!==D&&(D<4352||!($r["Bopomofo Extended"](D)||$r.Bopomofo(D)||$r["CJK Compatibility Forms"](D)&&!(D>=65097&&D<=65103)||$r["CJK Compatibility Ideographs"](D)||$r["CJK Compatibility"](D)||$r["CJK Radicals Supplement"](D)||$r["CJK Strokes"](D)||!(!$r["CJK Symbols and Punctuation"](D)||D>=12296&&D<=12305||D>=12308&&D<=12319||12336===D)||$r["CJK Unified Ideographs Extension A"](D)||$r["CJK Unified Ideographs"](D)||$r["Enclosed CJK Letters and Months"](D)||$r["Hangul Compatibility Jamo"](D)||$r["Hangul Jamo Extended-A"](D)||$r["Hangul Jamo Extended-B"](D)||$r["Hangul Jamo"](D)||$r["Hangul Syllables"](D)||$r.Hiragana(D)||$r["Ideographic Description Characters"](D)||$r.Kanbun(D)||$r["Kangxi Radicals"](D)||$r["Katakana Phonetic Extensions"](D)||$r.Katakana(D)&&12540!==D||!(!$r["Halfwidth and Fullwidth Forms"](D)||65288===D||65289===D||65293===D||D>=65306&&D<=65310||65339===D||65341===D||65343===D||D>=65371&&D<=65503||65507===D||D>=65512&&D<=65519)||!(!$r["Small Form Variants"](D)||D>=65112&&D<=65118||D>=65123&&D<=65126)||$r["Unified Canadian Aboriginal Syllabics"](D)||$r["Unified Canadian Aboriginal Syllabics Extended"](D)||$r["Vertical Forms"](D)||$r["Yijing Hexagram Symbols"](D)||$r["Yi Syllables"](D)||$r["Yi Radicals"](D))))}function Ta(D){return!(Ui(D)||(z=D,$r["Latin-1 Supplement"](z)&&(167===z||169===z||174===z||177===z||188===z||189===z||190===z||215===z||247===z)||$r["General Punctuation"](z)&&(8214===z||8224===z||8225===z||8240===z||8241===z||8251===z||8252===z||8258===z||8263===z||8264===z||8265===z||8273===z)||$r["Letterlike Symbols"](z)||$r["Number Forms"](z)||$r["Miscellaneous Technical"](z)&&(z>=8960&&z<=8967||z>=8972&&z<=8991||z>=8996&&z<=9e3||9003===z||z>=9085&&z<=9114||z>=9150&&z<=9165||9167===z||z>=9169&&z<=9179||z>=9186&&z<=9215)||$r["Control Pictures"](z)&&9251!==z||$r["Optical Character Recognition"](z)||$r["Enclosed Alphanumerics"](z)||$r["Geometric Shapes"](z)||$r["Miscellaneous Symbols"](z)&&!(z>=9754&&z<=9759)||$r["Miscellaneous Symbols and Arrows"](z)&&(z>=11026&&z<=11055||z>=11088&&z<=11097||z>=11192&&z<=11243)||$r["CJK Symbols and Punctuation"](z)||$r.Katakana(z)||$r["Private Use Area"](z)||$r["CJK Compatibility Forms"](z)||$r["Small Form Variants"](z)||$r["Halfwidth and Fullwidth Forms"](z)||8734===z||8756===z||8757===z||z>=9984&&z<=10087||z>=10102&&z<=10131||65532===z||65533===z));var z}function aa(D){return D>=1424&&D<=2303||$r["Arabic Presentation Forms-A"](D)||$r["Arabic Presentation Forms-B"](D)}function Za(D,z){return!(!z&&aa(D)||D>=2304&&D<=3583||D>=3840&&D<=4255||$r.Khmer(D))}function yi(D){for(var z=0,Q=D;z<Q.length;z+=1)if(aa(Q[z].charCodeAt(0)))return!0;return!1}var Oa="deferred",Wo="loading",Ks="loaded",As=null,Yi="unavailable",To=null,ls=function(D){D&&"string"==typeof D&&D.indexOf("NetworkError")>-1&&(Yi="error"),As&&As(D)};function Ga(){ga.fire(new Ee("pluginStateChange",{pluginStatus:Yi,pluginURL:To}))}var ga=new Ie,Yo=function(){return Yi},Ja=function(){if(Yi!==Oa||!To)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yi=Wo,Ga(),To&&Bt({url:To},function(D){D?ls(D):(Yi=Ks,Ga())})},Na={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Yi===Ks||null!=Na.applyArabicShaping},isLoading:function(){return Yi===Wo},setState:function(D){Yi=D.pluginStatus,To=D.pluginURL},isParsed:function(){return null!=Na.applyArabicShaping&&null!=Na.processBidirectionalText&&null!=Na.processStyledBidirectionalText},getPluginURL:function(){return To}},Qa=function(D,z){this.zoom=D,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ha,this.transition={})};Qa.prototype.isSupportedScript=function(D){return function(z,Q){for(var he=0,xe=z;he<xe.length;he+=1)if(!Za(xe[he].charCodeAt(0),Q))return!1;return!0}(D,Na.isLoaded())},Qa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Qa.prototype.getCrossfadeParameters=function(){var D=this.zoom,z=D-Math.floor(D),Q=this.crossFadingFactor();return D>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*Q}:{fromScale:.5,toScale:1,t:1-(1-Q)*z}};var ms=function(D,z){this.property=D,this.value=z,this.expression=function(Q,he){if(Xe(Q))return new Ln(Q,he);if(on(Q)){var xe=Rn(Q,he);if("error"===xe.result)throw new Error(xe.value.map(function(ze){return ze.key+": "+ze.message}).join(", "));return xe.value}var Se=Q;return"string"==typeof Q&&"color"===he.type&&(Se=cn.parse(Q)),{kind:"constant",evaluate:function(){return Se}}}(void 0===z?D.specification.default:z,D.specification)};ms.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ms.prototype.possiblyEvaluate=function(D,z,Q){return this.property.possiblyEvaluate(this,D,z,Q)};var sl=function(D){this.property=D,this.value=new ms(D,void 0)};sl.prototype.transitioned=function(D,z){return new Iu(this.property,this.value,z,f({},D.transition,this.transition),D.now)},sl.prototype.untransitioned=function(){return new Iu(this.property,this.value,null,{},0)};var Zo=function(D){this._properties=D,this._values=Object.create(D.defaultTransitionablePropertyValues)};Zo.prototype.getValue=function(D){return C(this._values[D].value.value)},Zo.prototype.setValue=function(D,z){this._values.hasOwnProperty(D)||(this._values[D]=new sl(this._values[D].property)),this._values[D].value=new ms(this._values[D].property,null===z?void 0:C(z))},Zo.prototype.getTransition=function(D){return C(this._values[D].transition)},Zo.prototype.setTransition=function(D,z){this._values.hasOwnProperty(D)||(this._values[D]=new sl(this._values[D].property)),this._values[D].transition=C(z)||void 0},Zo.prototype.serialize=function(){for(var D={},z=0,Q=Object.keys(this._values);z<Q.length;z+=1){var he=Q[z],xe=this.getValue(he);void 0!==xe&&(D[he]=xe);var Se=this.getTransition(he);void 0!==Se&&(D[he+"-transition"]=Se)}return D},Zo.prototype.transitioned=function(D,z){for(var Q=new Fo(this._properties),he=0,xe=Object.keys(this._values);he<xe.length;he+=1){var Se=xe[he];Q._values[Se]=this._values[Se].transitioned(D,z._values[Se])}return Q},Zo.prototype.untransitioned=function(){for(var D=new Fo(this._properties),z=0,Q=Object.keys(this._values);z<Q.length;z+=1){var he=Q[z];D._values[he]=this._values[he].untransitioned()}return D};var Iu=function(D,z,Q,he,xe){this.property=D,this.value=z,this.begin=xe+he.delay||0,this.end=this.begin+he.duration||0,D.specification.transition&&(he.delay||he.duration)&&(this.prior=Q)};Iu.prototype.possiblyEvaluate=function(D,z,Q){var he=D.now||0,xe=this.value.possiblyEvaluate(D,z,Q),Se=this.prior;if(Se){if(he>this.end)return this.prior=null,xe;if(this.value.isDataDriven())return this.prior=null,xe;if(he<this.begin)return Se.possiblyEvaluate(D,z,Q);var ze=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(Se.possiblyEvaluate(D,z,Q),xe,function(Ze){if(Ze<=0)return 0;if(Ze>=1)return 1;var lt=Ze*Ze,_t=lt*Ze;return 4*(Ze<.5?_t:3*(Ze-lt)+_t-.75)}(ze))}return xe};var Fo=function(D){this._properties=D,this._values=Object.create(D.defaultTransitioningPropertyValues)};Fo.prototype.possiblyEvaluate=function(D,z,Q){for(var he=new Ml(this._properties),xe=0,Se=Object.keys(this._values);xe<Se.length;xe+=1){var ze=Se[xe];he._values[ze]=this._values[ze].possiblyEvaluate(D,z,Q)}return he},Fo.prototype.hasTransition=function(){for(var D=0,z=Object.keys(this._values);D<z.length;D+=1)if(this._values[z[D]].prior)return!0;return!1};var Ll=function(D){this._properties=D,this._values=Object.create(D.defaultPropertyValues)};Ll.prototype.getValue=function(D){return C(this._values[D].value)},Ll.prototype.setValue=function(D,z){this._values[D]=new ms(this._values[D].property,null===z?void 0:C(z))},Ll.prototype.serialize=function(){for(var D={},z=0,Q=Object.keys(this._values);z<Q.length;z+=1){var he=Q[z],xe=this.getValue(he);void 0!==xe&&(D[he]=xe)}return D},Ll.prototype.possiblyEvaluate=function(D,z,Q){for(var he=new Ml(this._properties),xe=0,Se=Object.keys(this._values);xe<Se.length;xe+=1){var ze=Se[xe];he._values[ze]=this._values[ze].possiblyEvaluate(D,z,Q)}return he};var Wa=function(D,z,Q){this.property=D,this.value=z,this.parameters=Q};Wa.prototype.isConstant=function(){return"constant"===this.value.kind},Wa.prototype.constantOr=function(D){return"constant"===this.value.kind?this.value.value:D},Wa.prototype.evaluate=function(D,z,Q,he){return this.property.evaluate(this.value,this.parameters,D,z,Q,he)};var Ml=function(D){this._properties=D,this._values=Object.create(D.defaultPossiblyEvaluatedValues)};Ml.prototype.get=function(D){return this._values[D]};var Oi=function(D){this.specification=D};Oi.prototype.possiblyEvaluate=function(D,z){return D.expression.evaluate(z)},Oi.prototype.interpolate=function(D,z,Q){var he=Xr[this.specification.type];return he?he(D,z,Q):D};var $i=function(D,z){this.specification=D,this.overrides=z};$i.prototype.possiblyEvaluate=function(D,z,Q,he){return new Wa(this,"constant"===D.expression.kind||"camera"===D.expression.kind?{kind:"constant",value:D.expression.evaluate(z,null,{},Q,he)}:D.expression,z)},$i.prototype.interpolate=function(D,z,Q){if("constant"!==D.value.kind||"constant"!==z.value.kind)return D;if(void 0===D.value.value||void 0===z.value.value)return new Wa(this,{kind:"constant",value:void 0},D.parameters);var he=Xr[this.specification.type];return he?new Wa(this,{kind:"constant",value:he(D.value.value,z.value.value,Q)},D.parameters):D},$i.prototype.evaluate=function(D,z,Q,he,xe,Se){return"constant"===D.kind?D.value:D.evaluate(z,Q,he,xe,Se)};var ll=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(Q,he,xe,Se){if(void 0===Q.value)return new Wa(this,{kind:"constant",value:void 0},he);if("constant"===Q.expression.kind){var ze=Q.expression.evaluate(he,null,{},xe,Se),Ze="resolvedImage"===Q.property.specification.type&&"string"!=typeof ze?ze.name:ze,lt=this._calculate(Ze,Ze,Ze,he);return new Wa(this,{kind:"constant",value:lt},he)}if("camera"===Q.expression.kind){var _t=this._calculate(Q.expression.evaluate({zoom:he.zoom-1}),Q.expression.evaluate({zoom:he.zoom}),Q.expression.evaluate({zoom:he.zoom+1}),he);return new Wa(this,{kind:"constant",value:_t},he)}return new Wa(this,Q.expression,he)},z.prototype.evaluate=function(Q,he,xe,Se,ze,Ze){if("source"===Q.kind){var lt=Q.evaluate(he,xe,Se,ze,Ze);return this._calculate(lt,lt,lt,he)}return"composite"===Q.kind?this._calculate(Q.evaluate({zoom:Math.floor(he.zoom)-1},xe,Se),Q.evaluate({zoom:Math.floor(he.zoom)},xe,Se),Q.evaluate({zoom:Math.floor(he.zoom)+1},xe,Se),he):Q.value},z.prototype._calculate=function(Q,he,xe,Se){return Se.zoom>Se.zoomHistory.lastIntegerZoom?{from:Q,to:he}:{from:xe,to:he}},z.prototype.interpolate=function(Q){return Q},z}($i),gu=function(D){this.specification=D};gu.prototype.possiblyEvaluate=function(D,z,Q,he){if(void 0!==D.value){if("constant"===D.expression.kind){var xe=D.expression.evaluate(z,null,{},Q,he);return this._calculate(xe,xe,xe,z)}return this._calculate(D.expression.evaluate(new Qa(Math.floor(z.zoom-1),z)),D.expression.evaluate(new Qa(Math.floor(z.zoom),z)),D.expression.evaluate(new Qa(Math.floor(z.zoom+1),z)),z)}},gu.prototype._calculate=function(D,z,Q,he){return he.zoom>he.zoomHistory.lastIntegerZoom?{from:D,to:z}:{from:Q,to:z}},gu.prototype.interpolate=function(D){return D};var ul=function(D){this.specification=D};ul.prototype.possiblyEvaluate=function(D,z,Q,he){return!!D.expression.evaluate(z,null,{},Q,he)},ul.prototype.interpolate=function(){return!1};var Zi=function(D){for(var z in this.properties=D,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],D){var Q=D[z];Q.specification.overridable&&this.overridableProperties.push(z);var he=this.defaultPropertyValues[z]=new ms(Q,void 0),xe=this.defaultTransitionablePropertyValues[z]=new sl(Q);this.defaultTransitioningPropertyValues[z]=xe.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=he.possiblyEvaluate({})}};mr("DataDrivenProperty",$i),mr("DataConstantProperty",Oi),mr("CrossFadedDataDrivenProperty",ll),mr("CrossFadedProperty",gu),mr("ColorRampProperty",ul);var Al=function(D){function z(Q,he){if(D.call(this),this.id=Q.id,this.type=Q.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==Q.type&&(this.metadata=(Q=Q).metadata,this.minzoom=Q.minzoom,this.maxzoom=Q.maxzoom,"background"!==Q.type&&(this.source=Q.source,this.sourceLayer=Q["source-layer"],this.filter=Q.filter),he.layout&&(this._unevaluatedLayout=new Ll(he.layout)),he.paint)){for(var xe in this._transitionablePaint=new Zo(he.paint),Q.paint)this.setPaintProperty(xe,Q.paint[xe],{validate:!1});for(var Se in Q.layout)this.setLayoutProperty(Se,Q.layout[Se],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ml(he.paint)}}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(Q){return"visibility"===Q?this.visibility:this._unevaluatedLayout.getValue(Q)},z.prototype.setLayoutProperty=function(Q,he,xe){void 0===xe&&(xe={}),null!=he&&this._validate(Rr,"layers."+this.id+".layout."+Q,Q,he,xe)||("visibility"!==Q?this._unevaluatedLayout.setValue(Q,he):this.visibility=he)},z.prototype.getPaintProperty=function(Q){return E(Q,"-transition")?this._transitionablePaint.getTransition(Q.slice(0,-11)):this._transitionablePaint.getValue(Q)},z.prototype.setPaintProperty=function(Q,he,xe){if(void 0===xe&&(xe={}),null!=he&&this._validate(Mr,"layers."+this.id+".paint."+Q,Q,he,xe))return!1;if(E(Q,"-transition"))return this._transitionablePaint.setTransition(Q.slice(0,-11),he||void 0),!1;var ze=this._transitionablePaint._values[Q],Ze="cross-faded-data-driven"===ze.property.specification["property-type"],lt=ze.value.isDataDriven(),_t=ze.value;this._transitionablePaint.setValue(Q,he),this._handleSpecialPaintPropertyUpdate(Q);var kt=this._transitionablePaint._values[Q].value;return kt.isDataDriven()||lt||Ze||this._handleOverridablePaintPropertyUpdate(Q,_t,kt)},z.prototype._handleSpecialPaintPropertyUpdate=function(Q){},z.prototype._handleOverridablePaintPropertyUpdate=function(Q,he,xe){return!1},z.prototype.isHidden=function(Q){return!!(this.minzoom&&Q<this.minzoom)||!!(this.maxzoom&&Q>=this.maxzoom)||"none"===this.visibility},z.prototype.updateTransitions=function(Q){this._transitioningPaint=this._transitionablePaint.transitioned(Q,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(Q,he){Q.getCrossfadeParameters&&(this._crossfadeParameters=Q.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Q,void 0,he)),this.paint=this._transitioningPaint.possiblyEvaluate(Q,void 0,he)},z.prototype.serialize=function(){var Q={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Q.layout=Q.layout||{},Q.layout.visibility=this.visibility),S(Q,function(he,xe){return!(void 0===he||"layout"===xe&&!Object.keys(he).length||"paint"===xe&&!Object.keys(he).length)})},z.prototype._validate=function(Q,he,xe,Se,ze){return void 0===ze&&(ze={}),(!ze||!1!==ze.validate)&&Wr(this,Q.call(gr,{key:he,layerType:this.type,objectKey:xe,value:Se,styleSpec:He,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var Q in this.paint._values){var he=this.paint.get(Q);if(he instanceof Wa&&os(he.property.specification)&&("source"===he.value.kind||"composite"===he.value.kind)&&he.value.isStateDependent)return!0}return!1},z}(Ie),pc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},mu=function(D,z){this._structArray=D,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ba=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Xa(D,z){void 0===z&&(z=1);var Q=0,he=0;return{members:D.map(function(xe){var ze=pc[xe.type].BYTES_PER_ELEMENT,Ze=Q=Zl(Q,Math.max(z,ze)),lt=xe.components||1;return he=Math.max(he,ze),Q+=ze*lt,{name:xe.name,type:xe.type,components:lt,offset:Ze}}),size:Zl(Q,Math.max(he,z)),alignment:z}}function Zl(D,z){return Math.ceil(D/z)*z}Ba.serialize=function(D,z){return D._trim(),z&&(D.isTransferred=!0,z.push(D.arrayBuffer)),{length:D.length,arrayBuffer:D.arrayBuffer}},Ba.deserialize=function(D){var z=Object.create(this.prototype);return z.arrayBuffer=D.arrayBuffer,z.length=D.length,z.capacity=D.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},Ba.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ba.prototype.clear=function(){this.length=0},Ba.prototype.resize=function(D){this.reserve(D),this.length=D},Ba.prototype.reserve=function(D){if(D>this.capacity){this.capacity=Math.max(D,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},Ba.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Vl=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he){var xe=this.length;return this.resize(xe+1),this.emplace(xe,Q,he)},z.prototype.emplace=function(Q,he,xe){var Se=2*Q;return this.int16[Se+0]=he,this.int16[Se+1]=xe,Q},z}(Ba);Vl.prototype.bytesPerElement=4,mr("StructArrayLayout2i4",Vl);var qr=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se){var ze=this.length;return this.resize(ze+1),this.emplace(ze,Q,he,xe,Se)},z.prototype.emplace=function(Q,he,xe,Se,ze){var Ze=4*Q;return this.int16[Ze+0]=he,this.int16[Ze+1]=xe,this.int16[Ze+2]=Se,this.int16[Ze+3]=ze,Q},z}(Ba);qr.prototype.bytesPerElement=8,mr("StructArrayLayout4i8",qr);var Sa=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se,ze,Ze){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Q,he,xe,Se,ze,Ze)},z.prototype.emplace=function(Q,he,xe,Se,ze,Ze,lt){var _t=6*Q;return this.int16[_t+0]=he,this.int16[_t+1]=xe,this.int16[_t+2]=Se,this.int16[_t+3]=ze,this.int16[_t+4]=Ze,this.int16[_t+5]=lt,Q},z}(Ba);Sa.prototype.bytesPerElement=12,mr("StructArrayLayout2i4i12",Sa);var vu=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se,ze,Ze){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Q,he,xe,Se,ze,Ze)},z.prototype.emplace=function(Q,he,xe,Se,ze,Ze,lt){var _t=4*Q,kt=8*Q;return this.int16[_t+0]=he,this.int16[_t+1]=xe,this.uint8[kt+4]=Se,this.uint8[kt+5]=ze,this.uint8[kt+6]=Ze,this.uint8[kt+7]=lt,Q},z}(Ba);vu.prototype.bytesPerElement=8,mr("StructArrayLayout2i4ub8",vu);var Io=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt){var sn=this.length;return this.resize(sn+1),this.emplace(sn,Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt)},z.prototype.emplace=function(Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn){var en=9*Q,xn=18*Q;return this.uint16[en+0]=he,this.uint16[en+1]=xe,this.uint16[en+2]=Se,this.uint16[en+3]=ze,this.uint16[en+4]=Ze,this.uint16[en+5]=lt,this.uint16[en+6]=_t,this.uint16[en+7]=kt,this.uint8[xn+16]=Zt,this.uint8[xn+17]=sn,Q},z}(Ba);Io.prototype.bytesPerElement=18,mr("StructArrayLayout8ui2ub18",Io);var iu=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en){var xn=this.length;return this.resize(xn+1),this.emplace(xn,Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en)},z.prototype.emplace=function(Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn){var Fn=12*Q;return this.int16[Fn+0]=he,this.int16[Fn+1]=xe,this.int16[Fn+2]=Se,this.int16[Fn+3]=ze,this.uint16[Fn+4]=Ze,this.uint16[Fn+5]=lt,this.uint16[Fn+6]=_t,this.uint16[Fn+7]=kt,this.int16[Fn+8]=Zt,this.int16[Fn+9]=sn,this.int16[Fn+10]=en,this.int16[Fn+11]=xn,Q},z}(Ba);iu.prototype.bytesPerElement=24,mr("StructArrayLayout4i4ui4i24",iu);var Qs=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Q,he,xe)},z.prototype.emplace=function(Q,he,xe,Se){var ze=3*Q;return this.float32[ze+0]=he,this.float32[ze+1]=xe,this.float32[ze+2]=Se,Q},z}(Ba);Qs.prototype.bytesPerElement=12,mr("StructArrayLayout3f12",Qs);var cl=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q){var he=this.length;return this.resize(he+1),this.emplace(he,Q)},z.prototype.emplace=function(Q,he){return this.uint32[1*Q+0]=he,Q},z}(Ba);cl.prototype.bytesPerElement=4,mr("StructArrayLayout1ul4",cl);var Zu=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se,ze,Ze,lt,_t,kt){var Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,Q,he,xe,Se,ze,Ze,lt,_t,kt)},z.prototype.emplace=function(Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt){var sn=10*Q,en=5*Q;return this.int16[sn+0]=he,this.int16[sn+1]=xe,this.int16[sn+2]=Se,this.int16[sn+3]=ze,this.int16[sn+4]=Ze,this.int16[sn+5]=lt,this.uint32[en+3]=_t,this.uint16[sn+8]=kt,this.uint16[sn+9]=Zt,Q},z}(Ba);Zu.prototype.bytesPerElement=20,mr("StructArrayLayout6i1ul2ui20",Zu);var Pl=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se,ze,Ze){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Q,he,xe,Se,ze,Ze)},z.prototype.emplace=function(Q,he,xe,Se,ze,Ze,lt){var _t=6*Q;return this.int16[_t+0]=he,this.int16[_t+1]=xe,this.int16[_t+2]=Se,this.int16[_t+3]=ze,this.int16[_t+4]=Ze,this.int16[_t+5]=lt,Q},z}(Ba);Pl.prototype.bytesPerElement=12,mr("StructArrayLayout2i2i2i12",Pl);var Nc=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se,ze){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,Q,he,xe,Se,ze)},z.prototype.emplace=function(Q,he,xe,Se,ze,Ze){var lt=4*Q,_t=8*Q;return this.float32[lt+0]=he,this.float32[lt+1]=xe,this.float32[lt+2]=Se,this.int16[_t+6]=ze,this.int16[_t+7]=Ze,Q},z}(Ba);Nc.prototype.bytesPerElement=16,mr("StructArrayLayout2f1f2i16",Nc);var yu=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se){var ze=this.length;return this.resize(ze+1),this.emplace(ze,Q,he,xe,Se)},z.prototype.emplace=function(Q,he,xe,Se,ze){var Ze=12*Q,lt=3*Q;return this.uint8[Ze+0]=he,this.uint8[Ze+1]=xe,this.float32[lt+1]=Se,this.float32[lt+2]=ze,Q},z}(Ba);yu.prototype.bytesPerElement=12,mr("StructArrayLayout2ub2f12",yu);var Xo=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Q,he,xe)},z.prototype.emplace=function(Q,he,xe,Se){var ze=3*Q;return this.uint16[ze+0]=he,this.uint16[ze+1]=xe,this.uint16[ze+2]=Se,Q},z}(Ba);Xo.prototype.bytesPerElement=6,mr("StructArrayLayout3ui6",Xo);var Lu=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn,Fn,Gn,qn,ar){var lr=this.length;return this.resize(lr+1),this.emplace(lr,Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn,Fn,Gn,qn,ar)},z.prototype.emplace=function(Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn,Fn,Gn,qn,ar,lr){var hr=24*Q,Lr=12*Q,jr=48*Q;return this.int16[hr+0]=he,this.int16[hr+1]=xe,this.uint16[hr+2]=Se,this.uint16[hr+3]=ze,this.uint32[Lr+2]=Ze,this.uint32[Lr+3]=lt,this.uint32[Lr+4]=_t,this.uint16[hr+10]=kt,this.uint16[hr+11]=Zt,this.uint16[hr+12]=sn,this.float32[Lr+7]=en,this.float32[Lr+8]=xn,this.uint8[jr+36]=Fn,this.uint8[jr+37]=Gn,this.uint8[jr+38]=qn,this.uint32[Lr+10]=ar,this.int16[hr+22]=lr,Q},z}(Ba);Lu.prototype.bytesPerElement=48,mr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Lu);var ks=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn,Fn,Gn,qn,ar,lr,hr,Lr,jr,li,ai,gi,Ii,Li,Ti,Bi){var ji=this.length;return this.resize(ji+1),this.emplace(ji,Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn,Fn,Gn,qn,ar,lr,hr,Lr,jr,li,ai,gi,Ii,Li,Ti,Bi)},z.prototype.emplace=function(Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn,Fn,Gn,qn,ar,lr,hr,Lr,jr,li,ai,gi,Ii,Li,Ti,Bi,ji){var Pi=34*Q,za=17*Q;return this.int16[Pi+0]=he,this.int16[Pi+1]=xe,this.int16[Pi+2]=Se,this.int16[Pi+3]=ze,this.int16[Pi+4]=Ze,this.int16[Pi+5]=lt,this.int16[Pi+6]=_t,this.int16[Pi+7]=kt,this.uint16[Pi+8]=Zt,this.uint16[Pi+9]=sn,this.uint16[Pi+10]=en,this.uint16[Pi+11]=xn,this.uint16[Pi+12]=Fn,this.uint16[Pi+13]=Gn,this.uint16[Pi+14]=qn,this.uint16[Pi+15]=ar,this.uint16[Pi+16]=lr,this.uint16[Pi+17]=hr,this.uint16[Pi+18]=Lr,this.uint16[Pi+19]=jr,this.uint16[Pi+20]=li,this.uint16[Pi+21]=ai,this.uint16[Pi+22]=gi,this.uint32[za+12]=Ii,this.float32[za+13]=Li,this.float32[za+14]=Ti,this.float32[za+15]=Bi,this.float32[za+16]=ji,Q},z}(Ba);ks.prototype.bytesPerElement=68,mr("StructArrayLayout8i15ui1ul4f68",ks);var ve=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q){var he=this.length;return this.resize(he+1),this.emplace(he,Q)},z.prototype.emplace=function(Q,he){return this.float32[1*Q+0]=he,Q},z}(Ba);ve.prototype.bytesPerElement=4,mr("StructArrayLayout1f4",ve);var R=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Q,he,xe)},z.prototype.emplace=function(Q,he,xe,Se){var ze=3*Q;return this.int16[ze+0]=he,this.int16[ze+1]=xe,this.int16[ze+2]=Se,Q},z}(Ba);R.prototype.bytesPerElement=6,mr("StructArrayLayout3i6",R);var B=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Q,he,xe)},z.prototype.emplace=function(Q,he,xe,Se){var Ze=4*Q;return this.uint32[2*Q+0]=he,this.uint16[Ze+2]=xe,this.uint16[Ze+3]=Se,Q},z}(Ba);B.prototype.bytesPerElement=8,mr("StructArrayLayout1ul2ui8",B);var q=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he){var xe=this.length;return this.resize(xe+1),this.emplace(xe,Q,he)},z.prototype.emplace=function(Q,he,xe){var Se=2*Q;return this.uint16[Se+0]=he,this.uint16[Se+1]=xe,Q},z}(Ba);q.prototype.bytesPerElement=4,mr("StructArrayLayout2ui4",q);var K=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q){var he=this.length;return this.resize(he+1),this.emplace(he,Q)},z.prototype.emplace=function(Q,he){return this.uint16[1*Q+0]=he,Q},z}(Ba);K.prototype.bytesPerElement=2,mr("StructArrayLayout1ui2",K);var de=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he){var xe=this.length;return this.resize(xe+1),this.emplace(xe,Q,he)},z.prototype.emplace=function(Q,he,xe){var Se=2*Q;return this.float32[Se+0]=he,this.float32[Se+1]=xe,Q},z}(Ba);de.prototype.bytesPerElement=8,mr("StructArrayLayout2f8",de);var be=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Q,he,xe,Se){var ze=this.length;return this.resize(ze+1),this.emplace(ze,Q,he,xe,Se)},z.prototype.emplace=function(Q,he,xe,Se,ze){var Ze=4*Q;return this.float32[Ze+0]=he,this.float32[Ze+1]=xe,this.float32[Ze+2]=Se,this.float32[Ze+3]=ze,Q},z}(Ba);be.prototype.bytesPerElement=16,mr("StructArrayLayout4f16",be);var Me=function(D){function z(){D.apply(this,arguments)}D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z;var Q={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Q.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Q.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Q.x1.get=function(){return this._structArray.int16[this._pos2+2]},Q.y1.get=function(){return this._structArray.int16[this._pos2+3]},Q.x2.get=function(){return this._structArray.int16[this._pos2+4]},Q.y2.get=function(){return this._structArray.int16[this._pos2+5]},Q.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Q.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Q.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Q.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,Q),z}(mu);Me.prototype.size=20;var Ce=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.get=function(Q){return new Me(this,Q)},z}(Zu);mr("CollisionBoxArray",Ce);var Ne=function(D){function z(){D.apply(this,arguments)}D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z;var Q={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Q.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Q.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Q.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Q.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Q.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Q.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Q.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Q.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Q.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Q.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Q.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Q.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Q.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Q.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Q.placedOrientation.set=function(he){this._structArray.uint8[this._pos1+37]=he},Q.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Q.hidden.set=function(he){this._structArray.uint8[this._pos1+38]=he},Q.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Q.crossTileID.set=function(he){this._structArray.uint32[this._pos4+10]=he},Q.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,Q),z}(mu);Ne.prototype.size=48;var $e=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.get=function(Q){return new Ne(this,Q)},z}(Lu);mr("PlacedSymbolArray",$e);var at=function(D){function z(){D.apply(this,arguments)}D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z;var Q={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Q.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Q.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Q.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Q.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Q.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Q.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Q.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Q.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Q.key.get=function(){return this._structArray.uint16[this._pos2+8]},Q.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Q.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Q.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Q.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Q.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Q.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Q.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Q.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Q.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Q.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Q.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Q.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Q.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Q.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Q.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Q.crossTileID.set=function(he){this._structArray.uint32[this._pos4+12]=he},Q.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Q.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Q.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Q.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,Q),z}(mu);at.prototype.size=68;var dt=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.get=function(Q){return new at(this,Q)},z}(ks);mr("SymbolInstanceArray",dt);var Ot=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.getoffsetX=function(Q){return this.float32[1*Q+0]},z}(ve);mr("GlyphOffsetArray",Ot);var zt=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.getx=function(Q){return this.int16[3*Q+0]},z.prototype.gety=function(Q){return this.int16[3*Q+1]},z.prototype.gettileUnitDistanceFromAnchor=function(Q){return this.int16[3*Q+2]},z}(R);mr("SymbolLineVertexArray",zt);var Rt=function(D){function z(){D.apply(this,arguments)}D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z;var Q={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Q.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Q.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Q.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,Q),z}(mu);Rt.prototype.size=8;var Nt=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.get=function(Q){return new Rt(this,Q)},z}(B);mr("FeatureIndexArray",Nt);var Lt=Xa([{name:"a_pos",components:2,type:"Int16"}],4).members,Yt=function(D){void 0===D&&(D=[]),this.segments=D};function Gt(D,z){return 256*(D=d(Math.floor(D),0,255))+d(Math.floor(z),0,255)}Yt.prototype.prepareSegment=function(D,z,Q,he){var xe=this.segments[this.segments.length-1];return D>Yt.MAX_VERTEX_ARRAY_LENGTH&&I("Max vertices per segment is "+Yt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+D),(!xe||xe.vertexLength+D>Yt.MAX_VERTEX_ARRAY_LENGTH||xe.sortKey!==he)&&(xe={vertexOffset:z.length,primitiveOffset:Q.length,vertexLength:0,primitiveLength:0},void 0!==he&&(xe.sortKey=he),this.segments.push(xe)),xe},Yt.prototype.get=function(){return this.segments},Yt.prototype.destroy=function(){for(var D=0,z=this.segments;D<z.length;D+=1){var Q=z[D];for(var he in Q.vaos)Q.vaos[he].destroy()}},Yt.simpleSegment=function(D,z,Q,he){return new Yt([{vertexOffset:D,primitiveOffset:z,vertexLength:Q,primitiveLength:he,vaos:{},sortKey:0}])},Yt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,mr("SegmentVector",Yt);var Xt=Xa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),bn=o(function(D){D.exports=function(z,Q){var he,xe,Se,ze,Ze,lt,_t,kt;for(xe=z.length-(he=3&z.length),Se=Q,Ze=3432918353,lt=461845907,kt=0;kt<xe;)_t=255&z.charCodeAt(kt)|(255&z.charCodeAt(++kt))<<8|(255&z.charCodeAt(++kt))<<16|(255&z.charCodeAt(++kt))<<24,++kt,Se=27492+(65535&(ze=5*(65535&(Se=(Se^=_t=(65535&(_t=(_t=(65535&_t)*Ze+(((_t>>>16)*Ze&65535)<<16)&4294967295)<<15|_t>>>17))*lt+(((_t>>>16)*lt&65535)<<16)&4294967295)<<13|Se>>>19))+((5*(Se>>>16)&65535)<<16)&4294967295))+((58964+(ze>>>16)&65535)<<16);switch(_t=0,he){case 3:_t^=(255&z.charCodeAt(kt+2))<<16;case 2:_t^=(255&z.charCodeAt(kt+1))<<8;case 1:Se^=_t=(65535&(_t=(_t=(65535&(_t^=255&z.charCodeAt(kt)))*Ze+(((_t>>>16)*Ze&65535)<<16)&4294967295)<<15|_t>>>17))*lt+(((_t>>>16)*lt&65535)<<16)&4294967295}return Se^=z.length,Se=2246822507*(65535&(Se^=Se>>>16))+((2246822507*(Se>>>16)&65535)<<16)&4294967295,Se=3266489909*(65535&(Se^=Se>>>13))+((3266489909*(Se>>>16)&65535)<<16)&4294967295,(Se^=Se>>>16)>>>0}}),En=o(function(D){D.exports=function(z,Q){for(var he,xe=z.length,Se=Q^xe,ze=0;xe>=4;)he=1540483477*(65535&(he=255&z.charCodeAt(ze)|(255&z.charCodeAt(++ze))<<8|(255&z.charCodeAt(++ze))<<16|(255&z.charCodeAt(++ze))<<24))+((1540483477*(he>>>16)&65535)<<16),Se=1540483477*(65535&Se)+((1540483477*(Se>>>16)&65535)<<16)^(he=1540483477*(65535&(he^=he>>>24))+((1540483477*(he>>>16)&65535)<<16)),xe-=4,++ze;switch(xe){case 3:Se^=(255&z.charCodeAt(ze+2))<<16;case 2:Se^=(255&z.charCodeAt(ze+1))<<8;case 1:Se=1540483477*(65535&(Se^=255&z.charCodeAt(ze)))+((1540483477*(Se>>>16)&65535)<<16)}return Se=1540483477*(65535&(Se^=Se>>>13))+((1540483477*(Se>>>16)&65535)<<16),(Se^=Se>>>15)>>>0}}),Un=bn,yr=En;Un.murmur3=bn,Un.murmur2=yr;var vr=function(){this.ids=[],this.positions=[],this.indexed=!1};vr.prototype.add=function(D,z,Q,he){this.ids.push(Ar(D)),this.positions.push(z,Q,he)},vr.prototype.getPositions=function(D){for(var z=Ar(D),Q=0,he=this.ids.length-1;Q<he;){var xe=Q+he>>1;this.ids[xe]>=z?he=xe:Q=xe+1}for(var Se=[];this.ids[Q]===z;)Se.push({index:this.positions[3*Q],start:this.positions[3*Q+1],end:this.positions[3*Q+2]}),Q++;return Se},vr.serialize=function(D,z){var Q=new Float64Array(D.ids),he=new Uint32Array(D.positions);return function xe(Se,ze,Ze,lt){for(;Ze<lt;){for(var _t=Se[Ze+lt>>1],kt=Ze-1,Zt=lt+1;;){do{kt++}while(Se[kt]<_t);do{Zt--}while(Se[Zt]>_t);if(kt>=Zt)break;fi(Se,kt,Zt),fi(ze,3*kt,3*Zt),fi(ze,3*kt+1,3*Zt+1),fi(ze,3*kt+2,3*Zt+2)}Zt-Ze<lt-Zt?(xe(Se,ze,Ze,Zt),Ze=Zt+1):(xe(Se,ze,Zt+1,lt),lt=Zt)}}(Q,he,0,Q.length-1),z&&z.push(Q.buffer,he.buffer),{ids:Q,positions:he}},vr.deserialize=function(D){var z=new vr;return z.ids=D.ids,z.positions=D.positions,z.indexed=!0,z};var Pr=Math.pow(2,53)-1;function Ar(D){var z=+D;return!isNaN(z)&&z<=Pr?z:Un(String(D))}function fi(D,z,Q){var he=D[z];D[z]=D[Q],D[Q]=he}mr("FeaturePositionMap",vr);var wi=function(D,z){this.gl=D.gl,this.location=z},Fi=function(D){function z(Q,he){D.call(this,Q,he),this.current=0}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.set=function(Q){this.current!==Q&&(this.current=Q,this.gl.uniform1i(this.location,Q))},z}(wi),ur=function(D){function z(Q,he){D.call(this,Q,he),this.current=0}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.set=function(Q){this.current!==Q&&(this.current=Q,this.gl.uniform1f(this.location,Q))},z}(wi),Hr=function(D){function z(Q,he){D.call(this,Q,he),this.current=[0,0]}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.set=function(Q){Q[0]===this.current[0]&&Q[1]===this.current[1]||(this.current=Q,this.gl.uniform2f(this.location,Q[0],Q[1]))},z}(wi),bi=function(D){function z(Q,he){D.call(this,Q,he),this.current=[0,0,0]}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.set=function(Q){Q[0]===this.current[0]&&Q[1]===this.current[1]&&Q[2]===this.current[2]||(this.current=Q,this.gl.uniform3f(this.location,Q[0],Q[1],Q[2]))},z}(wi),mi=function(D){function z(Q,he){D.call(this,Q,he),this.current=[0,0,0,0]}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.set=function(Q){Q[0]===this.current[0]&&Q[1]===this.current[1]&&Q[2]===this.current[2]&&Q[3]===this.current[3]||(this.current=Q,this.gl.uniform4f(this.location,Q[0],Q[1],Q[2],Q[3]))},z}(wi),Si=function(D){function z(Q,he){D.call(this,Q,he),this.current=cn.transparent}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.set=function(Q){Q.r===this.current.r&&Q.g===this.current.g&&Q.b===this.current.b&&Q.a===this.current.a||(this.current=Q,this.gl.uniform4f(this.location,Q.r,Q.g,Q.b,Q.a))},z}(wi),Ri=new Float32Array(16),na=function(D){function z(Q,he){D.call(this,Q,he),this.current=Ri}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.set=function(Q){if(Q[12]!==this.current[12]||Q[0]!==this.current[0])return this.current=Q,void this.gl.uniformMatrix4fv(this.location,!1,Q);for(var he=1;he<16;he++)if(Q[he]!==this.current[he]){this.current=Q,this.gl.uniformMatrix4fv(this.location,!1,Q);break}},z}(wi);function Ai(D){return[Gt(255*D.r,255*D.g),Gt(255*D.b,255*D.a)]}var Qi=function(D,z,Q){this.value=D,this.uniformNames=z.map(function(he){return"u_"+he}),this.type=Q};Qi.prototype.setUniform=function(D,z,Q){D.set(Q.constantOr(this.value))},Qi.prototype.getBinding=function(D,z,Q){return"color"===this.type?new Si(D,z):new ur(D,z)};var Gi=function(D,z){this.uniformNames=z.map(function(Q){return"u_"+Q}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Gi.prototype.setConstantPatternPositions=function(D,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=D.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=D.tlbr},Gi.prototype.setUniform=function(D,z,Q,he){var xe="u_pattern_to"===he?this.patternTo:"u_pattern_from"===he?this.patternFrom:"u_pixel_ratio_to"===he?this.pixelRatioTo:"u_pixel_ratio_from"===he?this.pixelRatioFrom:null;xe&&D.set(xe)},Gi.prototype.getBinding=function(D,z,Q){return"u_pattern"===Q.substr(0,9)?new mi(D,z):new ur(D,z)};var ca=function(D,z,Q,he){this.expression=D,this.type=Q,this.maxValue=0,this.paintVertexAttributes=z.map(function(xe){return{name:"a_"+xe,type:"Float32",components:"color"===Q?2:1,offset:0}}),this.paintVertexArray=new he};ca.prototype.populatePaintArray=function(D,z,Q,he,xe){var Se=this.paintVertexArray.length,ze=this.expression.evaluate(new Qa(0),z,{},he,[],xe);this.paintVertexArray.resize(D),this._setPaintValue(Se,D,ze)},ca.prototype.updatePaintArray=function(D,z,Q,he){var xe=this.expression.evaluate({zoom:0},Q,he);this._setPaintValue(D,z,xe)},ca.prototype._setPaintValue=function(D,z,Q){if("color"===this.type)for(var he=Ai(Q),xe=D;xe<z;xe++)this.paintVertexArray.emplace(xe,he[0],he[1]);else{for(var Se=D;Se<z;Se++)this.paintVertexArray.emplace(Se,Q);this.maxValue=Math.max(this.maxValue,Math.abs(Q))}},ca.prototype.upload=function(D){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=D.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ea=function(D,z,Q,he,xe,Se){this.expression=D,this.uniformNames=z.map(function(ze){return"u_"+ze+"_t"}),this.type=Q,this.useIntegerZoom=he,this.zoom=xe,this.maxValue=0,this.paintVertexAttributes=z.map(function(ze){return{name:"a_"+ze,type:"Float32",components:"color"===Q?4:2,offset:0}}),this.paintVertexArray=new Se};ea.prototype.populatePaintArray=function(D,z,Q,he,xe){var Se=this.expression.evaluate(new Qa(this.zoom),z,{},he,[],xe),ze=this.expression.evaluate(new Qa(this.zoom+1),z,{},he,[],xe),Ze=this.paintVertexArray.length;this.paintVertexArray.resize(D),this._setPaintValue(Ze,D,Se,ze)},ea.prototype.updatePaintArray=function(D,z,Q,he){var xe=this.expression.evaluate({zoom:this.zoom},Q,he),Se=this.expression.evaluate({zoom:this.zoom+1},Q,he);this._setPaintValue(D,z,xe,Se)},ea.prototype._setPaintValue=function(D,z,Q,he){if("color"===this.type)for(var xe=Ai(Q),Se=Ai(he),ze=D;ze<z;ze++)this.paintVertexArray.emplace(ze,xe[0],xe[1],Se[0],Se[1]);else{for(var Ze=D;Ze<z;Ze++)this.paintVertexArray.emplace(Ze,Q,he);this.maxValue=Math.max(this.maxValue,Math.abs(Q),Math.abs(he))}},ea.prototype.upload=function(D){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=D.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ea.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ea.prototype.setUniform=function(D,z){var Q=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,he=d(this.expression.interpolationFactor(Q,this.zoom,this.zoom+1),0,1);D.set(he)},ea.prototype.getBinding=function(D,z,Q){return new ur(D,z)};var ma=function(D,z,Q,he,xe,Se){this.expression=D,this.type=z,this.useIntegerZoom=Q,this.zoom=he,this.layerId=Se,this.zoomInPaintVertexArray=new xe,this.zoomOutPaintVertexArray=new xe};ma.prototype.populatePaintArray=function(D,z,Q){var he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(D),this.zoomOutPaintVertexArray.resize(D),this._setPaintValues(he,D,z.patterns&&z.patterns[this.layerId],Q)},ma.prototype.updatePaintArray=function(D,z,Q,he,xe){this._setPaintValues(D,z,Q.patterns&&Q.patterns[this.layerId],xe)},ma.prototype._setPaintValues=function(D,z,Q,he){if(he&&Q){var Ze=he[Q.min],lt=he[Q.mid],_t=he[Q.max];if(Ze&&lt&&_t)for(var kt=D;kt<z;kt++)this.zoomInPaintVertexArray.emplace(kt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Ze.tl[0],Ze.tl[1],Ze.br[0],Ze.br[1],lt.pixelRatio,Ze.pixelRatio),this.zoomOutPaintVertexArray.emplace(kt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],_t.tl[0],_t.tl[1],_t.br[0],_t.br[1],lt.pixelRatio,_t.pixelRatio)}},ma.prototype.upload=function(D){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=D.createVertexBuffer(this.zoomInPaintVertexArray,Xt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=D.createVertexBuffer(this.zoomOutPaintVertexArray,Xt.members,this.expression.isStateDependent))},ma.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ra=function(D,z,Q,he){this.binders={},this.layoutAttributes=he,this._buffers=[];var xe=[];for(var Se in D.paint._values)if(Q(Se)){var ze=D.paint.get(Se);if(ze instanceof Wa&&os(ze.property.specification)){var Ze=Ao(Se,D.type),lt=ze.value,_t=ze.property.specification.type,kt=ze.property.useIntegerZoom,Zt=ze.property.specification["property-type"],sn="cross-faded"===Zt||"cross-faded-data-driven"===Zt;if("constant"===lt.kind)this.binders[Se]=sn?new Gi(lt.value,Ze):new Qi(lt.value,Ze,_t),xe.push("/u_"+Se);else if("source"===lt.kind||sn){var en=No(Se,_t,"source");this.binders[Se]=sn?new ma(lt,_t,kt,z,en,D.id):new ca(lt,Ze,_t,en),xe.push("/a_"+Se)}else{var xn=No(Se,_t,"composite");this.binders[Se]=new ea(lt,Ze,_t,kt,z,xn),xe.push("/z_"+Se)}}}this.cacheKey=xe.sort().join("")};Ra.prototype.getMaxValue=function(D){var z=this.binders[D];return z instanceof ca||z instanceof ea?z.maxValue:0},Ra.prototype.populatePaintArrays=function(D,z,Q,he,xe){for(var Se in this.binders){var ze=this.binders[Se];(ze instanceof ca||ze instanceof ea||ze instanceof ma)&&ze.populatePaintArray(D,z,Q,he,xe)}},Ra.prototype.setConstantPatternPositions=function(D,z){for(var Q in this.binders){var he=this.binders[Q];he instanceof Gi&&he.setConstantPatternPositions(D,z)}},Ra.prototype.updatePaintArrays=function(D,z,Q,he,xe){var Se=!1;for(var ze in D)for(var Ze=0,lt=z.getPositions(ze);Ze<lt.length;Ze+=1){var _t=lt[Ze],kt=Q.feature(_t.index);for(var Zt in this.binders){var sn=this.binders[Zt];if((sn instanceof ca||sn instanceof ea||sn instanceof ma)&&!0===sn.expression.isStateDependent){var en=he.paint.get(Zt);sn.expression=en.value,sn.updatePaintArray(_t.start,_t.end,kt,D[ze],xe),Se=!0}}}return Se},Ra.prototype.defines=function(){var D=[];for(var z in this.binders){var Q=this.binders[z];(Q instanceof Qi||Q instanceof Gi)&&D.push.apply(D,Q.uniformNames.map(function(he){return"#define HAS_UNIFORM_"+he}))}return D},Ra.prototype.getPaintVertexBuffers=function(){return this._buffers},Ra.prototype.getUniforms=function(D,z){var Q=[];for(var he in this.binders){var xe=this.binders[he];if(xe instanceof Qi||xe instanceof Gi||xe instanceof ea)for(var Se=0,ze=xe.uniformNames;Se<ze.length;Se+=1){var Ze=ze[Se];if(z[Ze]){var lt=xe.getBinding(D,z[Ze],Ze);Q.push({name:Ze,property:he,binding:lt})}}}return Q},Ra.prototype.setUniforms=function(D,z,Q,he){for(var xe=0,Se=z;xe<Se.length;xe+=1){var ze=Se[xe],Ze=ze.name,lt=ze.property;this.binders[lt].setUniform(ze.binding,he,Q.get(lt),Ze)}},Ra.prototype.updatePaintBuffers=function(D){for(var z in this._buffers=[],this.binders){var Q=this.binders[z];if(D&&Q instanceof ma){var he=2===D.fromScale?Q.zoomInPaintVertexBuffer:Q.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else(Q instanceof ca||Q instanceof ea)&&Q.paintVertexBuffer&&this._buffers.push(Q.paintVertexBuffer)}},Ra.prototype.upload=function(D){for(var z in this.binders){var Q=this.binders[z];(Q instanceof ca||Q instanceof ea||Q instanceof ma)&&Q.upload(D)}this.updatePaintBuffers()},Ra.prototype.destroy=function(){for(var D in this.binders){var z=this.binders[D];(z instanceof ca||z instanceof ea||z instanceof ma)&&z.destroy()}};var Mo=function(D,z,Q,he){void 0===he&&(he=function(){return!0}),this.programConfigurations={};for(var xe=0,Se=z;xe<Se.length;xe+=1){var ze=Se[xe];this.programConfigurations[ze.id]=new Ra(ze,Q,he,D)}this.needsUpload=!1,this._featureMap=new vr,this._bufferOffset=0};function Ao(D,z){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[D]||[D.replace(z+"-","").replace(/-/g,"_")]}function No(D,z,Q){var xe={"line-pattern":{source:Io,composite:Io},"fill-pattern":{source:Io,composite:Io},"fill-extrusion-pattern":{source:Io,composite:Io}}[D];return xe&&xe[Q]||{color:{source:de,composite:be},number:{source:ve,composite:de}}[z][Q]}Mo.prototype.populatePaintArrays=function(D,z,Q,he,xe,Se){for(var ze in this.programConfigurations)this.programConfigurations[ze].populatePaintArrays(D,z,he,xe,Se);void 0!==z.id&&this._featureMap.add(z.id,Q,this._bufferOffset,D),this._bufferOffset=D,this.needsUpload=!0},Mo.prototype.updatePaintArrays=function(D,z,Q,he){for(var xe=0,Se=Q;xe<Se.length;xe+=1){var ze=Se[xe];this.needsUpload=this.programConfigurations[ze.id].updatePaintArrays(D,this._featureMap,z,ze,he)||this.needsUpload}},Mo.prototype.get=function(D){return this.programConfigurations[D]},Mo.prototype.upload=function(D){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(D);this.needsUpload=!1}},Mo.prototype.destroy=function(){for(var D in this.programConfigurations)this.programConfigurations[D].destroy()},mr("ConstantBinder",Qi),mr("CrossFadedConstantBinder",Gi),mr("SourceExpressionBinder",ca),mr("CrossFadedCompositeBinder",ma),mr("CompositeExpressionBinder",ea),mr("ProgramConfiguration",Ra,{omit:["_buffers"]}),mr("ProgramConfigurationSet",Mo);var _o=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function xo(D){for(var z=8192/D.extent,Q=D.loadGeometry(),he=0;he<Q.length;he++)for(var xe=Q[he],Se=0;Se<xe.length;Se++){var ze=xe[Se];ze.x=Math.round(ze.x*z),ze.y=Math.round(ze.y*z),(ze.x<_o.min||ze.x>_o.max||ze.y<_o.min||ze.y>_o.max)&&(I("Geometry exceeds allowed extent, reduce your vector tile buffer size"),ze.x=d(ze.x,_o.min,_o.max),ze.y=d(ze.y,_o.min,_o.max))}return Q}function vs(D,z,Q,he,xe){D.emplaceBack(2*z+(he+1)/2,2*Q+(xe+1)/2)}var Lo=function(D){this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=D.index,this.hasPattern=!1,this.layoutVertexArray=new Vl,this.indexArray=new Xo,this.segments=new Yt,this.programConfigurations=new Mo(Lt,D.layers,D.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function el(D,z){for(var Q=0;Q<D.length;Q++)if(qs(z,D[Q]))return!0;for(var he=0;he<z.length;he++)if(qs(D,z[he]))return!0;return!!zc(D,z)}function fl(D,z,Q){return!!qs(D,z)||!!ys(z,D,Q)}function au(D,z){if(1===D.length)return Bc(z,D[0]);for(var Q=0;Q<z.length;Q++)for(var he=z[Q],xe=0;xe<he.length;xe++)if(qs(D,he[xe]))return!0;for(var Se=0;Se<D.length;Se++)if(Bc(z,D[Se]))return!0;for(var ze=0;ze<z.length;ze++)if(zc(D,z[ze]))return!0;return!1}function Pu(D,z,Q){if(D.length>1){if(zc(D,z))return!0;for(var he=0;he<z.length;he++)if(ys(z[he],D,Q))return!0}for(var xe=0;xe<D.length;xe++)if(ys(D[xe],z,Q))return!0;return!1}function zc(D,z){if(0===D.length||0===z.length)return!1;for(var Q=0;Q<D.length-1;Q++)for(var he=D[Q],xe=D[Q+1],Se=0;Se<z.length-1;Se++)if(Xu(he,xe,z[Se],z[Se+1]))return!0;return!1}function Xu(D,z,Q,he){return N(D,Q,he)!==N(z,Q,he)&&N(D,z,Q)!==N(D,z,he)}function ys(D,z,Q){var he=Q*Q;if(1===z.length)return D.distSqr(z[0])<he;for(var xe=1;xe<z.length;xe++)if($u(D,z[xe-1],z[xe])<he)return!0;return!1}function $u(D,z,Q){var he=z.distSqr(Q);if(0===he)return D.distSqr(z);var xe=((D.x-z.x)*(Q.x-z.x)+(D.y-z.y)*(Q.y-z.y))/he;return D.distSqr(xe<0?z:xe>1?Q:Q.sub(z)._mult(xe)._add(z))}function Bc(D,z){for(var Q,he,xe,Se=!1,ze=0;ze<D.length;ze++)for(var Ze=0,lt=(Q=D[ze]).length-1;Ze<Q.length;lt=Ze++)(he=Q[Ze]).y>z.y!=(xe=Q[lt]).y>z.y&&z.x<(xe.x-he.x)*(z.y-he.y)/(xe.y-he.y)+he.x&&(Se=!Se);return Se}function qs(D,z){for(var Q=!1,he=0,xe=D.length-1;he<D.length;xe=he++){var Se=D[he],ze=D[xe];Se.y>z.y!=ze.y>z.y&&z.x<(ze.x-Se.x)*(z.y-Se.y)/(ze.y-Se.y)+Se.x&&(Q=!Q)}return Q}function Ku(D,z,Q){var he=Q[0],xe=Q[2];if(D.x<he.x&&z.x<he.x||D.x>xe.x&&z.x>xe.x||D.y<he.y&&z.y<he.y||D.y>xe.y&&z.y>xe.y)return!1;var Se=N(D,z,Q[0]);return Se!==N(D,z,Q[1])||Se!==N(D,z,Q[2])||Se!==N(D,z,Q[3])}function ko(D,z,Q){var he=z.paint.get(D).value;return"constant"===he.kind?he.value:Q.programConfigurations.get(z.id).getMaxValue(D)}function bs(D){return Math.sqrt(D[0]*D[0]+D[1]*D[1])}function _s(D,z,Q,he,xe){if(!z[0]&&!z[1])return D;var Se=i.convert(z)._mult(xe);"viewport"===Q&&Se._rotate(-he);for(var ze=[],Ze=0;Ze<D.length;Ze++)ze.push(D[Ze].sub(Se));return ze}Lo.prototype.populate=function(D,z,Q){var he=this.layers[0],xe=[],Se=null;"circle"===he.type&&(Se=he.layout.get("circle-sort-key"));for(var ze=0,Ze=D;ze<Ze.length;ze+=1){var lt=Ze[ze],_t=lt.feature,kt=lt.id,Zt=lt.index,sn=lt.sourceLayerIndex,en=this.layers[0]._featureFilter.needGeometry,xn={type:_t.type,id:kt,properties:_t.properties,geometry:en?xo(_t):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),xn,Q)){en||(xn.geometry=xo(_t));var Fn=Se?Se.evaluate(xn,{},Q):void 0;xe.push({id:kt,properties:_t.properties,type:_t.type,sourceLayerIndex:sn,index:Zt,geometry:xn.geometry,patterns:{},sortKey:Fn})}}Se&&xe.sort(function(gi,Ii){return gi.sortKey-Ii.sortKey});for(var qn=0,ar=xe;qn<ar.length;qn+=1){var lr=ar[qn],Lr=lr.geometry,jr=lr.index,li=lr.sourceLayerIndex,ai=D[jr].feature;this.addFeature(lr,Lr,jr,Q),z.featureIndex.insert(ai,Lr,jr,li,this.index)}},Lo.prototype.update=function(D,z,Q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(D,z,this.stateDependentLayers,Q)},Lo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Lo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Lo.prototype.upload=function(D){this.uploaded||(this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,Lt),this.indexBuffer=D.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(D),this.uploaded=!0},Lo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Lo.prototype.addFeature=function(D,z,Q,he){for(var xe=0,Se=z;xe<Se.length;xe+=1)for(var ze=0,Ze=Se[xe];ze<Ze.length;ze+=1){var lt=Ze[ze],_t=lt.x,kt=lt.y;if(!(_t<0||_t>=8192||kt<0||kt>=8192)){var Zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,D.sortKey),sn=Zt.vertexLength;vs(this.layoutVertexArray,_t,kt,-1,-1),vs(this.layoutVertexArray,_t,kt,1,-1),vs(this.layoutVertexArray,_t,kt,1,1),vs(this.layoutVertexArray,_t,kt,-1,1),this.indexArray.emplaceBack(sn,sn+1,sn+2),this.indexArray.emplaceBack(sn,sn+3,sn+2),Zt.vertexLength+=4,Zt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,D,Q,{},he)},mr("CircleBucket",Lo,{omit:["layers"]});var Tf=new Zi({"circle-sort-key":new $i(He.layout_circle["circle-sort-key"])}),Qh={paint:new Zi({"circle-radius":new $i(He.paint_circle["circle-radius"]),"circle-color":new $i(He.paint_circle["circle-color"]),"circle-blur":new $i(He.paint_circle["circle-blur"]),"circle-opacity":new $i(He.paint_circle["circle-opacity"]),"circle-translate":new Oi(He.paint_circle["circle-translate"]),"circle-translate-anchor":new Oi(He.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Oi(He.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Oi(He.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new $i(He.paint_circle["circle-stroke-width"]),"circle-stroke-color":new $i(He.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new $i(He.paint_circle["circle-stroke-opacity"])}),layout:Tf},hl="undefined"!=typeof Float32Array?Float32Array:Array;function Mf(D){return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function gc(D,z,Q){var he=z[0],xe=z[1],Se=z[2],ze=z[3],Ze=z[4],lt=z[5],_t=z[6],kt=z[7],Zt=z[8],sn=z[9],en=z[10],xn=z[11],Fn=z[12],Gn=z[13],qn=z[14],ar=z[15],lr=Q[0],hr=Q[1],Lr=Q[2],jr=Q[3];return D[0]=lr*he+hr*Ze+Lr*Zt+jr*Fn,D[1]=lr*xe+hr*lt+Lr*sn+jr*Gn,D[2]=lr*Se+hr*_t+Lr*en+jr*qn,D[3]=lr*ze+hr*kt+Lr*xn+jr*ar,D[4]=(lr=Q[4])*he+(hr=Q[5])*Ze+(Lr=Q[6])*Zt+(jr=Q[7])*Fn,D[5]=lr*xe+hr*lt+Lr*sn+jr*Gn,D[6]=lr*Se+hr*_t+Lr*en+jr*qn,D[7]=lr*ze+hr*kt+Lr*xn+jr*ar,D[8]=(lr=Q[8])*he+(hr=Q[9])*Ze+(Lr=Q[10])*Zt+(jr=Q[11])*Fn,D[9]=lr*xe+hr*lt+Lr*sn+jr*Gn,D[10]=lr*Se+hr*_t+Lr*en+jr*qn,D[11]=lr*ze+hr*kt+Lr*xn+jr*ar,D[12]=(lr=Q[12])*he+(hr=Q[13])*Ze+(Lr=Q[14])*Zt+(jr=Q[15])*Fn,D[13]=lr*xe+hr*lt+Lr*sn+jr*Gn,D[14]=lr*Se+hr*_t+Lr*en+jr*qn,D[15]=lr*ze+hr*kt+Lr*xn+jr*ar,D}Math.hypot||(Math.hypot=function(){for(var D=arguments,z=0,Q=arguments.length;Q--;)z+=D[Q]*D[Q];return Math.sqrt(z)});var Ou,z,Mp=gc;function mc(D,z,Q){var he=z[0],xe=z[1],Se=z[2],ze=z[3];return D[0]=Q[0]*he+Q[4]*xe+Q[8]*Se+Q[12]*ze,D[1]=Q[1]*he+Q[5]*xe+Q[9]*Se+Q[13]*ze,D[2]=Q[2]*he+Q[6]*xe+Q[10]*Se+Q[14]*ze,D[3]=Q[3]*he+Q[7]*xe+Q[11]*Se+Q[15]*ze,D}Ou=new hl(3),hl!=Float32Array&&(Ou[0]=0,Ou[1]=0,Ou[2]=0),z=new hl(4),hl!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0);var ag=(function(){var z=new hl(2);hl!=Float32Array&&(z[0]=0,z[1]=0)}(),function(D){function z(Q){D.call(this,Q,Qh)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.createBucket=function(Q){return new Lo(Q)},z.prototype.queryRadius=function(Q){var he=Q;return ko("circle-radius",this,he)+ko("circle-stroke-width",this,he)+bs(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(Q,he,xe,Se,ze,Ze,lt,_t){for(var kt=_s(Q,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ze.angle,lt),Zt=this.paint.get("circle-radius").evaluate(he,xe)+this.paint.get("circle-stroke-width").evaluate(he,xe),sn="map"===this.paint.get("circle-pitch-alignment"),en=sn?kt:function(li,ai){return li.map(function(gi){return Vc(gi,ai)})}(kt,_t),xn=sn?Zt*lt:Zt,Fn=0,Gn=Se;Fn<Gn.length;Fn+=1)for(var qn=0,ar=Gn[Fn];qn<ar.length;qn+=1){var lr=ar[qn],hr=sn?lr:Vc(lr,_t),Lr=xn,jr=mc([],[lr.x,lr.y,0,1],_t);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Lr*=jr[3]/Ze.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Lr*=Ze.cameraToCenterDistance/jr[3]),fl(en,hr,Lr))return!0}return!1},z}(Al));function Vc(D,z){var Q=mc([],[D.x,D.y,0,1],z);return new i(Q[0]/Q[3],Q[1]/Q[3])}var dl=function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z}(Lo);function sh(D,z,Q,he){var xe=z.width,Se=z.height;if(he){if(he instanceof Uint8ClampedArray)he=new Uint8Array(he.buffer);else if(he.length!==xe*Se*Q)throw new RangeError("mismatched image size")}else he=new Uint8Array(xe*Se*Q);return D.width=xe,D.height=Se,D.data=he,D}function Uc(D,z,Q){var he=z.width,xe=z.height;if(he!==D.width||xe!==D.height){var Se=sh({},{width:he,height:xe},Q);vc(D,Se,{x:0,y:0},{x:0,y:0},{width:Math.min(D.width,he),height:Math.min(D.height,xe)},Q),D.width=he,D.height=xe,D.data=Se.data}}function vc(D,z,Q,he,xe,Se){if(0===xe.width||0===xe.height)return z;if(xe.width>D.width||xe.height>D.height||Q.x>D.width-xe.width||Q.y>D.height-xe.height)throw new RangeError("out of range source coordinates for image copy");if(xe.width>z.width||xe.height>z.height||he.x>z.width-xe.width||he.y>z.height-xe.height)throw new RangeError("out of range destination coordinates for image copy");for(var ze=D.data,Ze=z.data,lt=0;lt<xe.height;lt++)for(var _t=((Q.y+lt)*D.width+Q.x)*Se,kt=((he.y+lt)*z.width+he.x)*Se,Zt=0;Zt<xe.width*Se;Zt++)Ze[kt+Zt]=ze[_t+Zt];return z}mr("HeatmapBucket",dl,{omit:["layers"]});var ou=function(D,z){sh(this,D,1,z)};ou.prototype.resize=function(D){Uc(this,D,1)},ou.prototype.clone=function(){return new ou({width:this.width,height:this.height},new Uint8Array(this.data))},ou.copy=function(D,z,Q,he,xe){vc(D,z,Q,he,xe,1)};var Es=function(D,z){sh(this,D,4,z)};Es.prototype.resize=function(D){Uc(this,D,4)},Es.prototype.replace=function(D,z){z?this.data.set(D):this.data=D instanceof Uint8ClampedArray?new Uint8Array(D.buffer):D},Es.prototype.clone=function(){return new Es({width:this.width,height:this.height},new Uint8Array(this.data))},Es.copy=function(D,z,Q,he,xe){vc(D,z,Q,he,xe,4)},mr("AlphaImage",ou),mr("RGBAImage",Es);var og={paint:new Zi({"heatmap-radius":new $i(He.paint_heatmap["heatmap-radius"]),"heatmap-weight":new $i(He.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Oi(He.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ul(He.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Oi(He.paint_heatmap["heatmap-opacity"])})};function ed(D,z){for(var Q=new Uint8Array(1024),he={},xe=0,Se=0;xe<256;xe++,Se+=4){he[z]=xe/255;var ze=D.evaluate(he);Q[Se+0]=Math.floor(255*ze.r/ze.a),Q[Se+1]=Math.floor(255*ze.g/ze.a),Q[Se+2]=Math.floor(255*ze.b/ze.a),Q[Se+3]=Math.floor(255*ze.a)}return new Es({width:256,height:1},Q)}var kf=function(D){function z(Q){D.call(this,Q,og),this._updateColorRamp()}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.createBucket=function(Q){return new dl(Q)},z.prototype._handleSpecialPaintPropertyUpdate=function(Q){"heatmap-color"===Q&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){this.colorRamp=ed(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},z}(Al),I_={paint:new Zi({"hillshade-illumination-direction":new Oi(He.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Oi(He.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Oi(He.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Oi(He.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Oi(He.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Oi(He.paint_hillshade["hillshade-accent-color"])})},Nv=function(D){function z(Q){D.call(this,Q,I_)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},z}(Al),fa=Xa([{name:"a_pos",components:2,type:"Int16"}],4).members,Ap=kp,L_=kp;function kp(D,z,Q){Q=Q||2;var he,xe,Se,ze,Ze,lt,_t,kt=z&&z.length,Zt=kt?z[0]*Q:D.length,sn=zv(D,0,Zt,Q,!0),en=[];if(!sn||sn.next===sn.prev)return en;if(kt&&(sn=function(Fn,Gn,qn,ar){var lr,hr,li,ai=[];for(lr=0,hr=Gn.length;lr<hr;lr++)(li=zv(Fn,Gn[lr]*ar,lr<hr-1?Gn[lr+1]*ar:Fn.length,ar,!1))===li.next&&(li.steiner=!0),ai.push(su(li));for(ai.sort(Ep),lr=0;lr<ai.length;lr++)uh(ai[lr],qn),qn=Hc(qn,qn.next);return qn}(D,z,sn,Q)),D.length>80*Q){he=Se=D[0],xe=ze=D[1];for(var xn=Q;xn<Zt;xn+=Q)(Ze=D[xn])<he&&(he=Ze),(lt=D[xn+1])<xe&&(xe=lt),Ze>Se&&(Se=Ze),lt>ze&&(ze=lt);_t=0!==(_t=Math.max(Se-he,ze-xe))?1/_t:0}return td(sn,en,Q,he,xe,_t),en}function zv(D,z,Q,he,xe){var Se,ze;if(xe===bc(D,z,Q,he)>0)for(Se=z;Se<Q;Se+=he)ze=Dp(Se,D[Se],D[Se+1],ze);else for(Se=Q-he;Se>=z;Se-=he)ze=Dp(Se,D[Se],D[Se+1],ze);return ze&&yc(ze,ze.next)&&(pl(ze),ze=ze.next),ze}function Hc(D,z){if(!D)return D;z||(z=D);var Q,he=D;do{if(Q=!1,he.steiner||!yc(he,he.next)&&0!==$o(he.prev,he,he.next))he=he.next;else{if(pl(he),(he=z=he.prev)===he.next)break;Q=!0}}while(Q||he!==z);return z}function td(D,z,Q,he,xe,Se,ze){if(D){!ze&&Se&&function(kt,Zt,sn,en){var xn=kt;do{null===xn.z&&(xn.z=Sp(xn.x,xn.y,Zt,sn,en)),xn.prevZ=xn.prev,xn.nextZ=xn.next,xn=xn.next}while(xn!==kt);xn.prevZ.nextZ=null,xn.prevZ=null,function(Fn){var Gn,qn,ar,lr,hr,Lr,jr,li,ai=1;do{for(qn=Fn,Fn=null,hr=null,Lr=0;qn;){for(Lr++,ar=qn,jr=0,Gn=0;Gn<ai&&(jr++,ar=ar.nextZ);Gn++);for(li=ai;jr>0||li>0&&ar;)0!==jr&&(0===li||!ar||qn.z<=ar.z)?(lr=qn,qn=qn.nextZ,jr--):(lr=ar,ar=ar.nextZ,li--),hr?hr.nextZ=lr:Fn=lr,lr.prevZ=hr,hr=lr;qn=ar}hr.nextZ=null,ai*=2}while(Lr>1)}(xn)}(D,he,xe,Se);for(var Ze,lt,_t=D;D.prev!==D.next;)if(Ze=D.prev,lt=D.next,Se?lh(D,he,xe,Se):P_(D))z.push(Ze.i/Q),z.push(D.i/Q),z.push(lt.i/Q),pl(D),D=lt.next,_t=lt.next;else if((D=lt)===_t){ze?1===ze?td(D=O_(Hc(D),z,Q),z,Q,he,xe,Se,2):2===ze&&Gs(D,z,Q,he,xe,Se):td(Hc(D),z,Q,he,xe,Se,1);break}}}function P_(D){var z=D.prev,Q=D,he=D.next;if($o(z,Q,he)>=0)return!1;for(var xe=D.next.next;xe!==D.prev;){if(Ol(z.x,z.y,Q.x,Q.y,he.x,he.y,xe.x,xe.y)&&$o(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function lh(D,z,Q,he){var xe=D.prev,Se=D,ze=D.next;if($o(xe,Se,ze)>=0)return!1;for(var _t=xe.x>Se.x?xe.x>ze.x?xe.x:ze.x:Se.x>ze.x?Se.x:ze.x,kt=xe.y>Se.y?xe.y>ze.y?xe.y:ze.y:Se.y>ze.y?Se.y:ze.y,Zt=Sp(xe.x<Se.x?xe.x<ze.x?xe.x:ze.x:Se.x<ze.x?Se.x:ze.x,xe.y<Se.y?xe.y<ze.y?xe.y:ze.y:Se.y<ze.y?Se.y:ze.y,z,Q,he),sn=Sp(_t,kt,z,Q,he),en=D.prevZ,xn=D.nextZ;en&&en.z>=Zt&&xn&&xn.z<=sn;){if(en!==D.prev&&en!==D.next&&Ol(xe.x,xe.y,Se.x,Se.y,ze.x,ze.y,en.x,en.y)&&$o(en.prev,en,en.next)>=0||(en=en.prevZ,xn!==D.prev&&xn!==D.next&&Ol(xe.x,xe.y,Se.x,Se.y,ze.x,ze.y,xn.x,xn.y)&&$o(xn.prev,xn,xn.next)>=0))return!1;xn=xn.nextZ}for(;en&&en.z>=Zt;){if(en!==D.prev&&en!==D.next&&Ol(xe.x,xe.y,Se.x,Se.y,ze.x,ze.y,en.x,en.y)&&$o(en.prev,en,en.next)>=0)return!1;en=en.prevZ}for(;xn&&xn.z<=sn;){if(xn!==D.prev&&xn!==D.next&&Ol(xe.x,xe.y,Se.x,Se.y,ze.x,ze.y,xn.x,xn.y)&&$o(xn.prev,xn,xn.next)>=0)return!1;xn=xn.nextZ}return!0}function O_(D,z,Q){var he=D;do{var xe=he.prev,Se=he.next.next;!yc(xe,Se)&&Cp(xe,he,he.next,Se)&&id(xe,Se)&&id(Se,xe)&&(z.push(xe.i/Q),z.push(he.i/Q),z.push(Se.i/Q),pl(he),pl(he.next),he=D=Se),he=he.next}while(he!==D);return Hc(he)}function Gs(D,z,Q,he,xe,Se){var ze=D;do{for(var Ze=ze.next.next;Ze!==ze.prev;){if(ze.i!==Ze.i&&sg(ze,Ze)){var lt=Bv(ze,Ze);return ze=Hc(ze,ze.next),lt=Hc(lt,lt.next),td(ze,z,Q,he,xe,Se),void td(lt,z,Q,he,xe,Se)}Ze=Ze.next}ze=ze.next}while(ze!==D)}function Ep(D,z){return D.x-z.x}function uh(D,z){if(z=function(he,xe){var Se,ze=xe,Ze=he.x,lt=he.y,_t=-1/0;do{if(lt<=ze.y&&lt>=ze.next.y&&ze.next.y!==ze.y){var kt=ze.x+(lt-ze.y)*(ze.next.x-ze.x)/(ze.next.y-ze.y);if(kt<=Ze&&kt>_t){if(_t=kt,kt===Ze){if(lt===ze.y)return ze;if(lt===ze.next.y)return ze.next}Se=ze.x<ze.next.x?ze:ze.next}}ze=ze.next}while(ze!==xe);if(!Se)return null;if(Ze===_t)return Se;var Zt,sn=Se,en=Se.x,xn=Se.y,Fn=1/0;ze=Se;do{Ze>=ze.x&&ze.x>=en&&Ze!==ze.x&&Ol(lt<xn?Ze:_t,lt,en,xn,lt<xn?_t:Ze,lt,ze.x,ze.y)&&(Zt=Math.abs(lt-ze.y)/(Ze-ze.x),id(ze,he)&&(Zt<Fn||Zt===Fn&&(ze.x>Se.x||ze.x===Se.x&&R_(Se,ze)))&&(Se=ze,Fn=Zt)),ze=ze.next}while(ze!==sn);return Se}(D,z)){var Q=Bv(z,D);Hc(z,z.next),Hc(Q,Q.next)}}function R_(D,z){return $o(D.prev,D,z.prev)<0&&$o(z.next,D,D.next)<0}function Sp(D,z,Q,he,xe){return(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-Q)*xe)|D<<8))|D<<4))|D<<2))|D<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-he)*xe)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function su(D){var z=D,Q=D;do{(z.x<Q.x||z.x===Q.x&&z.y<Q.y)&&(Q=z),z=z.next}while(z!==D);return Q}function Ol(D,z,Q,he,xe,Se,ze,Ze){return(xe-ze)*(z-Ze)-(D-ze)*(Se-Ze)>=0&&(D-ze)*(he-Ze)-(Q-ze)*(z-Ze)>=0&&(Q-ze)*(Se-Ze)-(xe-ze)*(he-Ze)>=0}function sg(D,z){return D.next.i!==z.i&&D.prev.i!==z.i&&!function(Q,he){var xe=Q;do{if(xe.i!==Q.i&&xe.next.i!==Q.i&&xe.i!==he.i&&xe.next.i!==he.i&&Cp(xe,xe.next,Q,he))return!0;xe=xe.next}while(xe!==Q);return!1}(D,z)&&(id(D,z)&&id(z,D)&&function(Q,he){var xe=Q,Se=!1,ze=(Q.x+he.x)/2,Ze=(Q.y+he.y)/2;do{xe.y>Ze!=xe.next.y>Ze&&xe.next.y!==xe.y&&ze<(xe.next.x-xe.x)*(Ze-xe.y)/(xe.next.y-xe.y)+xe.x&&(Se=!Se),xe=xe.next}while(xe!==Q);return Se}(D,z)&&($o(D.prev,D,z.prev)||$o(D,z.prev,z))||yc(D,z)&&$o(D.prev,D,D.next)>0&&$o(z.prev,z,z.next)>0)}function $o(D,z,Q){return(z.y-D.y)*(Q.x-z.x)-(z.x-D.x)*(Q.y-z.y)}function yc(D,z){return D.x===z.x&&D.y===z.y}function Cp(D,z,Q,he){var xe=rd($o(D,z,Q)),Se=rd($o(D,z,he)),ze=rd($o(Q,he,D)),Ze=rd($o(Q,he,z));return xe!==Se&&ze!==Ze||!(0!==xe||!nd(D,Q,z))||!(0!==Se||!nd(D,he,z))||!(0!==ze||!nd(Q,D,he))||!(0!==Ze||!nd(Q,z,he))}function nd(D,z,Q){return z.x<=Math.max(D.x,Q.x)&&z.x>=Math.min(D.x,Q.x)&&z.y<=Math.max(D.y,Q.y)&&z.y>=Math.min(D.y,Q.y)}function rd(D){return D>0?1:D<0?-1:0}function id(D,z){return $o(D.prev,D,D.next)<0?$o(D,z,D.next)>=0&&$o(D,D.prev,z)>=0:$o(D,z,D.prev)<0||$o(D,D.next,z)<0}function Bv(D,z){var Q=new ch(D.i,D.x,D.y),he=new ch(z.i,z.x,z.y),xe=D.next,Se=z.prev;return D.next=z,z.prev=D,Q.next=xe,xe.prev=Q,he.next=Q,Q.prev=he,Se.next=he,he.prev=Se,he}function Dp(D,z,Q,he){var xe=new ch(D,z,Q);return he?(xe.next=he.next,xe.prev=he,he.next.prev=xe,he.next=xe):(xe.prev=xe,xe.next=xe),xe}function pl(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function ch(D,z,Q){this.i=D,this.x=z,this.y=Q,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bc(D,z,Q,he){for(var xe=0,Se=z,ze=Q-he;Se<Q;Se+=he)xe+=(D[ze]-D[Se])*(D[Se+1]+D[ze+1]),ze=Se;return xe}function F_(D,z,Q,he,xe){!function Se(ze,Ze,lt,_t,kt){for(;_t>lt;){if(_t-lt>600){var Zt=_t-lt+1,sn=Ze-lt+1,en=Math.log(Zt),xn=.5*Math.exp(2*en/3),Fn=.5*Math.sqrt(en*xn*(Zt-xn)/Zt)*(sn-Zt/2<0?-1:1);Se(ze,Ze,Math.max(lt,Math.floor(Ze-sn*xn/Zt+Fn)),Math.min(_t,Math.floor(Ze+(Zt-sn)*xn/Zt+Fn)),kt)}var ar=ze[Ze],lr=lt,hr=_t;for(Ef(ze,lt,Ze),kt(ze[_t],ar)>0&&Ef(ze,lt,_t);lr<hr;){for(Ef(ze,lr,hr),lr++,hr--;kt(ze[lr],ar)<0;)lr++;for(;kt(ze[hr],ar)>0;)hr--}0===kt(ze[lt],ar)?Ef(ze,lt,hr):Ef(ze,++hr,_t),hr<=Ze&&(lt=hr+1),Ze<=hr&&(_t=hr-1)}}(D,z,Q||0,he||D.length-1,xe||jv)}function Ef(D,z,Q){var he=D[z];D[z]=D[Q],D[Q]=he}function jv(D,z){return D<z?-1:D>z?1:0}function Ip(D,z){var Q=D.length;if(Q<=1)return[D];for(var he,xe,Se=[],ze=0;ze<Q;ze++){var Ze=F(D[ze]);0!==Ze&&(D[ze].area=Math.abs(Ze),void 0===xe&&(xe=Ze<0),xe===Ze<0?(he&&Se.push(he),he=[D[ze]]):he.push(D[ze]))}if(he&&Se.push(he),z>1)for(var lt=0;lt<Se.length;lt++)Se[lt].length<=z||(F_(Se[lt],z,1,Se[lt].length-1,Vv),Se[lt]=Se[lt].slice(0,z));return Se}function Vv(D,z){return z.area-D.area}function Lp(D,z,Q){for(var he=Q.patternDependencies,xe=!1,Se=0,ze=z;Se<ze.length;Se+=1){var Ze=ze[Se].paint.get(D+"-pattern");Ze.isConstant()||(xe=!0);var lt=Ze.constantOr(null);lt&&(xe=!0,he[lt.to]=!0,he[lt.from]=!0)}return xe}function Pp(D,z,Q,he,xe){for(var Se=xe.patternDependencies,ze=0,Ze=z;ze<Ze.length;ze+=1){var lt=Ze[ze],_t=lt.paint.get(D+"-pattern").value;if("constant"!==_t.kind){var kt=_t.evaluate({zoom:he-1},Q,{},xe.availableImages),Zt=_t.evaluate({zoom:he},Q,{},xe.availableImages),sn=_t.evaluate({zoom:he+1},Q,{},xe.availableImages);Zt=Zt&&Zt.name?Zt.name:Zt,sn=sn&&sn.name?sn.name:sn,Se[kt=kt&&kt.name?kt.name:kt]=!0,Se[Zt]=!0,Se[sn]=!0,Q.patterns[lt.id]={min:kt,mid:Zt,max:sn}}}return Q}kp.deviation=function(D,z,Q,he){var xe=z&&z.length,ze=Math.abs(bc(D,0,xe?z[0]*Q:D.length,Q));if(xe)for(var Ze=0,lt=z.length;Ze<lt;Ze++)ze-=Math.abs(bc(D,z[Ze]*Q,Ze<lt-1?z[Ze+1]*Q:D.length,Q));var Zt=0;for(Ze=0;Ze<he.length;Ze+=3){var sn=he[Ze]*Q,en=he[Ze+1]*Q,xn=he[Ze+2]*Q;Zt+=Math.abs((D[sn]-D[xn])*(D[en+1]-D[sn+1])-(D[sn]-D[en])*(D[xn+1]-D[sn+1]))}return 0===ze&&0===Zt?0:Math.abs((Zt-ze)/ze)},kp.flatten=function(D){for(var z=D[0][0].length,Q={vertices:[],holes:[],dimensions:z},he=0,xe=0;xe<D.length;xe++){for(var Se=0;Se<D[xe].length;Se++)for(var ze=0;ze<z;ze++)Q.vertices.push(D[xe][Se][ze]);xe>0&&Q.holes.push(he+=D[xe-1].length)}return Q},Ap.default=L_;var lu=function(D){this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=D.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vl,this.indexArray=new Xo,this.indexArray2=new q,this.programConfigurations=new Mo(fa,D.layers,D.zoom),this.segments=new Yt,this.segments2=new Yt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};lu.prototype.populate=function(D,z,Q){this.hasPattern=Lp("fill",this.layers,z);for(var he=this.layers[0].layout.get("fill-sort-key"),xe=[],Se=0,ze=D;Se<ze.length;Se+=1){var Ze=ze[Se],lt=Ze.feature,_t=Ze.id,kt=Ze.index,Zt=Ze.sourceLayerIndex,sn=this.layers[0]._featureFilter.needGeometry,en={type:lt.type,id:_t,properties:lt.properties,geometry:sn?xo(lt):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),en,Q)){sn||(en.geometry=xo(lt));var xn=he?he.evaluate(en,{},Q,z.availableImages):void 0;xe.push({id:_t,properties:lt.properties,type:lt.type,sourceLayerIndex:Zt,index:kt,geometry:en.geometry,patterns:{},sortKey:xn})}}he&&xe.sort(function(gi,Ii){return gi.sortKey-Ii.sortKey});for(var Gn=0,qn=xe;Gn<qn.length;Gn+=1){var ar=qn[Gn],hr=ar.geometry,Lr=ar.index,jr=ar.sourceLayerIndex;if(this.hasPattern){var li=Pp("fill",this.layers,ar,this.zoom,z);this.patternFeatures.push(li)}else this.addFeature(ar,hr,Lr,Q,{});z.featureIndex.insert(D[Lr].feature,hr,Lr,jr,this.index)}},lu.prototype.update=function(D,z,Q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(D,z,this.stateDependentLayers,Q)},lu.prototype.addFeatures=function(D,z,Q){for(var he=0,xe=this.patternFeatures;he<xe.length;he+=1){var Se=xe[he];this.addFeature(Se,Se.geometry,Se.index,z,Q)}},lu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},lu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},lu.prototype.upload=function(D){this.uploaded||(this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,fa),this.indexBuffer=D.createIndexBuffer(this.indexArray),this.indexBuffer2=D.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(D),this.uploaded=!0},lu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},lu.prototype.addFeature=function(D,z,Q,he,xe){for(var Se=0,ze=Ip(z,500);Se<ze.length;Se+=1){for(var Ze=ze[Se],lt=0,_t=0,kt=Ze;_t<kt.length;_t+=1)lt+=kt[_t].length;for(var Zt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray),sn=Zt.vertexLength,en=[],xn=[],Fn=0,Gn=Ze;Fn<Gn.length;Fn+=1){var qn=Gn[Fn];if(0!==qn.length){qn!==Ze[0]&&xn.push(en.length/2);var ar=this.segments2.prepareSegment(qn.length,this.layoutVertexArray,this.indexArray2),lr=ar.vertexLength;this.layoutVertexArray.emplaceBack(qn[0].x,qn[0].y),this.indexArray2.emplaceBack(lr+qn.length-1,lr),en.push(qn[0].x),en.push(qn[0].y);for(var hr=1;hr<qn.length;hr++)this.layoutVertexArray.emplaceBack(qn[hr].x,qn[hr].y),this.indexArray2.emplaceBack(lr+hr-1,lr+hr),en.push(qn[hr].x),en.push(qn[hr].y);ar.vertexLength+=qn.length,ar.primitiveLength+=qn.length}}for(var Lr=Ap(en,xn),jr=0;jr<Lr.length;jr+=3)this.indexArray.emplaceBack(sn+Lr[jr],sn+Lr[jr+1],sn+Lr[jr+2]);Zt.vertexLength+=lt,Zt.primitiveLength+=Lr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,D,Q,xe,he)},mr("FillBucket",lu,{omit:["layers","patternFeatures"]});var Op=new Zi({"fill-sort-key":new $i(He.layout_fill["fill-sort-key"])}),ad={paint:new Zi({"fill-antialias":new Oi(He.paint_fill["fill-antialias"]),"fill-opacity":new $i(He.paint_fill["fill-opacity"]),"fill-color":new $i(He.paint_fill["fill-color"]),"fill-outline-color":new $i(He.paint_fill["fill-outline-color"]),"fill-translate":new Oi(He.paint_fill["fill-translate"]),"fill-translate-anchor":new Oi(He.paint_fill["fill-translate-anchor"]),"fill-pattern":new ll(He.paint_fill["fill-pattern"])}),layout:Op},N_=function(D){function z(Q){D.call(this,Q,ad)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.recalculate=function(Q,he){D.prototype.recalculate.call(this,Q,he);var xe=this.paint._values["fill-outline-color"];"constant"===xe.value.kind&&void 0===xe.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(Q){return new lu(Q)},z.prototype.queryRadius=function(){return bs(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(Q,he,xe,Se,ze,Ze,lt){return au(_s(Q,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ze.angle,lt),Se)},z.prototype.isTileClipped=function(){return!0},z}(Al),Sf=Xa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,od=Ju;function Ju(D,z,Q,he,xe){this.properties={},this.extent=Q,this.type=0,this._pbf=D,this._geometry=-1,this._keys=he,this._values=xe,D.readFields(Uv,this,z)}function Uv(D,z,Q){1==D?z.id=Q.readVarint():2==D?function(he,xe){for(var Se=he.readVarint()+he.pos;he.pos<Se;){var ze=xe._keys[he.readVarint()],Ze=xe._values[he.readVarint()];xe.properties[ze]=Ze}}(Q,z):3==D?z.type=Q.readVarint():4==D&&(z._geometry=Q.pos)}function Hv(D){for(var z,Q,he=0,xe=0,Se=D.length,ze=Se-1;xe<Se;ze=xe++)he+=((Q=D[ze]).x-(z=D[xe]).x)*(z.y+Q.y);return he}Ju.types=["Unknown","Point","LineString","Polygon"],Ju.prototype.loadGeometry=function(){var D=this._pbf;D.pos=this._geometry;for(var z,Q=D.readVarint()+D.pos,he=1,xe=0,Se=0,ze=0,Ze=[];D.pos<Q;){if(xe<=0){var lt=D.readVarint();he=7&lt,xe=lt>>3}if(xe--,1===he||2===he)Se+=D.readSVarint(),ze+=D.readSVarint(),1===he&&(z&&Ze.push(z),z=[]),z.push(new i(Se,ze));else{if(7!==he)throw new Error("unknown command "+he);z&&z.push(z[0].clone())}}return z&&Ze.push(z),Ze},Ju.prototype.bbox=function(){var D=this._pbf;D.pos=this._geometry;for(var z=D.readVarint()+D.pos,Q=1,he=0,xe=0,Se=0,ze=1/0,Ze=-1/0,lt=1/0,_t=-1/0;D.pos<z;){if(he<=0){var kt=D.readVarint();Q=7&kt,he=kt>>3}if(he--,1===Q||2===Q)(xe+=D.readSVarint())<ze&&(ze=xe),xe>Ze&&(Ze=xe),(Se+=D.readSVarint())<lt&&(lt=Se),Se>_t&&(_t=Se);else if(7!==Q)throw new Error("unknown command "+Q)}return[ze,lt,Ze,_t]},Ju.prototype.toGeoJSON=function(D,z,Q){var he,xe,Se=this.extent*Math.pow(2,Q),ze=this.extent*D,Ze=this.extent*z,lt=this.loadGeometry(),_t=Ju.types[this.type];function kt(en){for(var xn=0;xn<en.length;xn++){var Fn=en[xn];en[xn]=[360*(Fn.x+ze)/Se-180,360/Math.PI*Math.atan(Math.exp((180-360*(Fn.y+Ze)/Se)*Math.PI/180))-90]}}switch(this.type){case 1:var Zt=[];for(he=0;he<lt.length;he++)Zt[he]=lt[he][0];kt(lt=Zt);break;case 2:for(he=0;he<lt.length;he++)kt(lt[he]);break;case 3:for(lt=function(en){var xn=en.length;if(xn<=1)return[en];for(var Fn,Gn,qn=[],ar=0;ar<xn;ar++){var lr=Hv(en[ar]);0!==lr&&(void 0===Gn&&(Gn=lr<0),Gn===lr<0?(Fn&&qn.push(Fn),Fn=[en[ar]]):Fn.push(en[ar]))}return Fn&&qn.push(Fn),qn}(lt),he=0;he<lt.length;he++)for(xe=0;xe<lt[he].length;xe++)kt(lt[he][xe])}1===lt.length?lt=lt[0]:_t="Multi"+_t;var sn={type:"Feature",geometry:{type:_t,coordinates:lt},properties:this.properties};return"id"in this&&(sn.id=this.id),sn};var lg=Rp;function Rp(D,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=D,this._keys=[],this._values=[],this._features=[],D.readFields(qv,this,z),this.length=this._features.length}function qv(D,z,Q){15===D?z.version=Q.readVarint():1===D?z.name=Q.readString():5===D?z.extent=Q.readVarint():2===D?z._features.push(Q.pos):3===D?z._keys.push(Q.readString()):4===D&&z._values.push(function(he){for(var xe=null,Se=he.readVarint()+he.pos;he.pos<Se;){var ze=he.readVarint()>>3;xe=1===ze?he.readString():2===ze?he.readFloat():3===ze?he.readDouble():4===ze?he.readVarint64():5===ze?he.readVarint():6===ze?he.readSVarint():7===ze?he.readBoolean():null}return xe}(Q))}function fh(D,z,Q){if(3===D){var he=new lg(Q,Q.readVarint()+Q.pos);he.length&&(z[he.name]=he)}}Rp.prototype.feature=function(D){if(D<0||D>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[D];var z=this._pbf.readVarint()+this._pbf.pos;return new od(this._pbf,z,this.extent,this._keys,this._values)};var qc={VectorTile:function(D,z){this.layers=D.readFields(fh,{},z)},VectorTileFeature:od,VectorTileLayer:lg},Gv=qc.VectorTileFeature.types,Ni=Math.pow(2,13);function Cf(D,z,Q,he,xe,Se,ze,Ze){D.emplaceBack(z,Q,2*Math.floor(he*Ni)+ze,xe*Ni*2,Se*Ni*2,Math.round(Ze))}var Xl=function(D){this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=D.index,this.hasPattern=!1,this.layoutVertexArray=new Sa,this.indexArray=new Xo,this.programConfigurations=new Mo(Sf,D.layers,D.zoom),this.segments=new Yt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function Fp(D,z){return D.x===z.x&&(D.x<0||D.x>8192)||D.y===z.y&&(D.y<0||D.y>8192)}function hh(D){return D.every(function(z){return z.x<0})||D.every(function(z){return z.x>8192})||D.every(function(z){return z.y<0})||D.every(function(z){return z.y>8192})}Xl.prototype.populate=function(D,z,Q){this.features=[],this.hasPattern=Lp("fill-extrusion",this.layers,z);for(var he=0,xe=D;he<xe.length;he+=1){var Se=xe[he],ze=Se.feature,Ze=Se.id,lt=Se.index,_t=Se.sourceLayerIndex,kt=this.layers[0]._featureFilter.needGeometry,Zt={type:ze.type,id:Ze,properties:ze.properties,geometry:kt?xo(ze):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),Zt,Q)){var sn={id:Ze,sourceLayerIndex:_t,index:lt,geometry:kt?Zt.geometry:xo(ze),properties:ze.properties,type:ze.type,patterns:{}};void 0!==ze.id&&(sn.id=ze.id),this.hasPattern?this.features.push(Pp("fill-extrusion",this.layers,sn,this.zoom,z)):this.addFeature(sn,sn.geometry,lt,Q,{}),z.featureIndex.insert(ze,sn.geometry,lt,_t,this.index,!0)}}},Xl.prototype.addFeatures=function(D,z,Q){for(var he=0,xe=this.features;he<xe.length;he+=1){var Se=xe[he];this.addFeature(Se,Se.geometry,Se.index,z,Q)}},Xl.prototype.update=function(D,z,Q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(D,z,this.stateDependentLayers,Q)},Xl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Xl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xl.prototype.upload=function(D){this.uploaded||(this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,Sf),this.indexBuffer=D.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(D),this.uploaded=!0},Xl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xl.prototype.addFeature=function(D,z,Q,he,xe){for(var Se=0,ze=Ip(z,500);Se<ze.length;Se+=1){for(var Ze=ze[Se],lt=0,_t=0,kt=Ze;_t<kt.length;_t+=1)lt+=kt[_t].length;for(var Zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),sn=0,en=Ze;sn<en.length;sn+=1){var xn=en[sn];if(0!==xn.length&&!hh(xn))for(var Fn=0,Gn=0;Gn<xn.length;Gn++){var qn=xn[Gn];if(Gn>=1){var ar=xn[Gn-1];if(!Fp(qn,ar)){Zt.vertexLength+4>Yt.MAX_VERTEX_ARRAY_LENGTH&&(Zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var lr=qn.sub(ar)._perp()._unit(),hr=ar.dist(qn);Fn+hr>32768&&(Fn=0),Cf(this.layoutVertexArray,qn.x,qn.y,lr.x,lr.y,0,0,Fn),Cf(this.layoutVertexArray,qn.x,qn.y,lr.x,lr.y,0,1,Fn),Cf(this.layoutVertexArray,ar.x,ar.y,lr.x,lr.y,0,0,Fn+=hr),Cf(this.layoutVertexArray,ar.x,ar.y,lr.x,lr.y,0,1,Fn);var Lr=Zt.vertexLength;this.indexArray.emplaceBack(Lr,Lr+2,Lr+1),this.indexArray.emplaceBack(Lr+1,Lr+2,Lr+3),Zt.vertexLength+=4,Zt.primitiveLength+=2}}}}if(Zt.vertexLength+lt>Yt.MAX_VERTEX_ARRAY_LENGTH&&(Zt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray)),"Polygon"===Gv[D.type]){for(var jr=[],li=[],ai=Zt.vertexLength,gi=0,Ii=Ze;gi<Ii.length;gi+=1){var Li=Ii[gi];if(0!==Li.length){Li!==Ze[0]&&li.push(jr.length/2);for(var Ti=0;Ti<Li.length;Ti++){var Bi=Li[Ti];Cf(this.layoutVertexArray,Bi.x,Bi.y,0,0,1,1,0),jr.push(Bi.x),jr.push(Bi.y)}}}for(var ji=Ap(jr,li),Pi=0;Pi<ji.length;Pi+=3)this.indexArray.emplaceBack(ai+ji[Pi],ai+ji[Pi+2],ai+ji[Pi+1]);Zt.primitiveLength+=ji.length/3,Zt.vertexLength+=lt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,D,Q,xe,he)},mr("FillExtrusionBucket",Xl,{omit:["layers","features"]});var Wv={paint:new Zi({"fill-extrusion-opacity":new Oi(He["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new $i(He["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Oi(He["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Oi(He["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ll(He["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new $i(He["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new $i(He["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Oi(He["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Yv=function(D){function z(Q){D.call(this,Q,Wv)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.createBucket=function(Q){return new Xl(Q)},z.prototype.queryRadius=function(){return bs(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(Q,he,xe,Se,ze,Ze,lt,_t){var kt=_s(Q,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ze.angle,lt),Zt=this.paint.get("fill-extrusion-height").evaluate(he,xe),sn=this.paint.get("fill-extrusion-base").evaluate(he,xe),en=function(Fn,Gn,qn,ar){for(var lr=[],hr=0,Lr=Fn;hr<Lr.length;hr+=1){var jr=Lr[hr],li=[jr.x,jr.y,0,1];mc(li,li,Gn),lr.push(new i(li[0]/li[3],li[1]/li[3]))}return lr}(kt,_t),xn=function(Fn,Gn,qn,ar){for(var lr=[],hr=[],Lr=ar[8]*Gn,jr=ar[9]*Gn,li=ar[10]*Gn,ai=ar[11]*Gn,gi=ar[8]*qn,Ii=ar[9]*qn,Li=ar[10]*qn,Ti=ar[11]*qn,Bi=0,ji=Fn;Bi<ji.length;Bi+=1){for(var za=[],Pa=[],ja=0,Ki=ji[Bi];ja<Ki.length;ja+=1){var Ia=Ki[ja],uo=Ia.x,go=Ia.y,Eo=ar[0]*uo+ar[4]*go+ar[12],mo=ar[1]*uo+ar[5]*go+ar[13],es=ar[2]*uo+ar[6]*go+ar[14],vo=ar[3]*uo+ar[7]*go+ar[15],Ws=es+li,xs=vo+ai,js=Eo+gi,yl=mo+Ii,Ys=es+Li,ts=vo+Ti,Cs=new i((Eo+Lr)/xs,(mo+jr)/xs);Cs.z=Ws/xs,za.push(Cs);var fs=new i(js/ts,yl/ts);fs.z=Ys/ts,Pa.push(fs)}lr.push(za),hr.push(Pa)}return[lr,hr]}(Se,sn,Zt,_t);return function(Fn,Gn,qn){var ar=1/0;au(qn,Gn)&&(ar=ph(qn,Gn[0]));for(var lr=0;lr<Gn.length;lr++)for(var hr=Gn[lr],Lr=Fn[lr],jr=0;jr<hr.length-1;jr++){var li=hr[jr],Li=[li,hr[jr+1],Lr[jr+1],Lr[jr],li];el(qn,Li)&&(ar=Math.min(ar,ph(qn,Li)))}return ar!==1/0&&ar}(xn[0],xn[1],en)},z}(Al);function dh(D,z){return D.x*z.x+D.y*z.y}function ph(D,z){if(1===D.length){for(var Q,he=0,xe=z[he++];!Q||xe.equals(Q);)if(!(Q=z[he++]))return 1/0;for(;he<z.length;he++){var Se=z[he],ze=D[0],Ze=Q.sub(xe),lt=Se.sub(xe),_t=ze.sub(xe),kt=dh(Ze,Ze),Zt=dh(Ze,lt),sn=dh(lt,lt),en=dh(_t,Ze),xn=dh(_t,lt),Fn=kt*sn-Zt*Zt,Gn=(sn*en-Zt*xn)/Fn,qn=(kt*xn-Zt*en)/Fn,lr=xe.z*(1-Gn-qn)+Q.z*Gn+Se.z*qn;if(isFinite(lr))return lr}return 1/0}for(var hr=1/0,Lr=0,jr=z;Lr<jr.length;Lr+=1)hr=Math.min(hr,jr[Lr].z);return hr}var Qu=Xa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ug=qc.VectorTileFeature.types,gh=Math.cos(Math.PI/180*37.5),cg=Math.pow(2,14)/.5,ml=function(D){this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=D.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new vu,this.indexArray=new Xo,this.programConfigurations=new Mo(Qu,D.layers,D.zoom),this.segments=new Yt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};ml.prototype.populate=function(D,z,Q){this.hasPattern=Lp("line",this.layers,z);for(var he=this.layers[0].layout.get("line-sort-key"),xe=[],Se=0,ze=D;Se<ze.length;Se+=1){var Ze=ze[Se],lt=Ze.feature,_t=Ze.id,kt=Ze.index,Zt=Ze.sourceLayerIndex,sn=this.layers[0]._featureFilter.needGeometry,en={type:lt.type,id:_t,properties:lt.properties,geometry:sn?xo(lt):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),en,Q)){sn||(en.geometry=xo(lt));var xn=he?he.evaluate(en,{},Q):void 0;xe.push({id:_t,properties:lt.properties,type:lt.type,sourceLayerIndex:Zt,index:kt,geometry:en.geometry,patterns:{},sortKey:xn})}}he&&xe.sort(function(gi,Ii){return gi.sortKey-Ii.sortKey});for(var Gn=0,qn=xe;Gn<qn.length;Gn+=1){var ar=qn[Gn],hr=ar.geometry,Lr=ar.index,jr=ar.sourceLayerIndex;if(this.hasPattern){var li=Pp("line",this.layers,ar,this.zoom,z);this.patternFeatures.push(li)}else this.addFeature(ar,hr,Lr,Q,{});z.featureIndex.insert(D[Lr].feature,hr,Lr,jr,this.index)}},ml.prototype.update=function(D,z,Q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(D,z,this.stateDependentLayers,Q)},ml.prototype.addFeatures=function(D,z,Q){for(var he=0,xe=this.patternFeatures;he<xe.length;he+=1){var Se=xe[he];this.addFeature(Se,Se.geometry,Se.index,z,Q)}},ml.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ml.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ml.prototype.upload=function(D){this.uploaded||(this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,Qu),this.indexBuffer=D.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(D),this.uploaded=!0},ml.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ml.prototype.addFeature=function(D,z,Q,he,xe){for(var Se=this.layers[0].layout,ze=Se.get("line-join").evaluate(D,{}),Ze=Se.get("line-cap"),lt=Se.get("line-miter-limit"),_t=Se.get("line-round-limit"),kt=0,Zt=z;kt<Zt.length;kt+=1)this.addLine(Zt[kt],D,ze,Ze,lt,_t);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,D,Q,xe,he)},ml.prototype.addLine=function(D,z,Q,he,xe,Se){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,z.properties&&z.properties.hasOwnProperty("mapbox_clip_start")&&z.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+z.properties.mapbox_clip_start,this.clipEnd=+z.properties.mapbox_clip_end;for(var ze=0;ze<D.length-1;ze++)this.totalDistance+=D[ze].dist(D[ze+1]);this.updateScaledDistance()}for(var Ze="Polygon"===ug[z.type],lt=D.length;lt>=2&&D[lt-1].equals(D[lt-2]);)lt--;for(var _t=0;_t<lt-1&&D[_t].equals(D[_t+1]);)_t++;if(!(lt<(Ze?3:2))){"bevel"===Q&&(xe=1.05);var kt,Zt=this.overscaling<=16?122880/(512*this.overscaling):0,sn=this.segments.prepareSegment(10*lt,this.layoutVertexArray,this.indexArray),en=void 0,xn=void 0,Fn=void 0,Gn=void 0;this.e1=this.e2=-1,Ze&&(Gn=D[_t].sub(kt=D[lt-2])._unit()._perp());for(var qn=_t;qn<lt;qn++)if(!(xn=qn===lt-1?Ze?D[_t+1]:void 0:D[qn+1])||!D[qn].equals(xn)){Gn&&(Fn=Gn),kt&&(en=kt),kt=D[qn],Gn=xn?xn.sub(kt)._unit()._perp():Fn;var ar=(Fn=Fn||Gn).add(Gn);0===ar.x&&0===ar.y||ar._unit();var lr=Fn.x*Gn.x+Fn.y*Gn.y,hr=ar.x*Gn.x+ar.y*Gn.y,Lr=0!==hr?1/hr:1/0,jr=2*Math.sqrt(2-2*hr),li=hr<gh&&en&&xn,ai=Fn.x*Gn.y-Fn.y*Gn.x>0;if(li&&qn>_t){var gi=kt.dist(en);if(gi>2*Zt){var Ii=kt.sub(kt.sub(en)._mult(Zt/gi)._round());this.updateDistance(en,Ii),this.addCurrentVertex(Ii,Fn,0,0,sn),en=Ii}}var Li=en&&xn,Ti=Li?Q:Ze?"butt":he;if(Li&&"round"===Ti&&(Lr<Se?Ti="miter":Lr<=2&&(Ti="fakeround")),"miter"===Ti&&Lr>xe&&(Ti="bevel"),"bevel"===Ti&&(Lr>2&&(Ti="flipbevel"),Lr<xe&&(Ti="miter")),en&&this.updateDistance(en,kt),"miter"===Ti)ar._mult(Lr),this.addCurrentVertex(kt,ar,0,0,sn);else if("flipbevel"===Ti){if(Lr>100)ar=Gn.mult(-1);else{var Bi=Lr*Fn.add(Gn).mag()/Fn.sub(Gn).mag();ar._perp()._mult(Bi*(ai?-1:1))}this.addCurrentVertex(kt,ar,0,0,sn),this.addCurrentVertex(kt,ar.mult(-1),0,0,sn)}else if("bevel"===Ti||"fakeround"===Ti){var ji=-Math.sqrt(Lr*Lr-1),Pi=ai?ji:0,za=ai?0:ji;if(en&&this.addCurrentVertex(kt,Fn,Pi,za,sn),"fakeround"===Ti)for(var Pa=Math.round(180*jr/Math.PI/20),ja=1;ja<Pa;ja++){var Ki=ja/Pa;if(.5!==Ki){var Ia=Ki-.5;Ki+=Ki*Ia*(Ki-1)*((1.0904+lr*(lr*(3.55645-1.43519*lr)-3.2452))*Ia*Ia+(.848013+lr*(.215638*lr-1.06021)))}var uo=Gn.sub(Fn)._mult(Ki)._add(Fn)._unit()._mult(ai?-1:1);this.addHalfVertex(kt,uo.x,uo.y,!1,ai,0,sn)}xn&&this.addCurrentVertex(kt,Gn,-Pi,-za,sn)}else if("butt"===Ti)this.addCurrentVertex(kt,ar,0,0,sn);else if("square"===Ti){var go=en?1:-1;this.addCurrentVertex(kt,ar,go,go,sn)}else"round"===Ti&&(en&&(this.addCurrentVertex(kt,Fn,0,0,sn),this.addCurrentVertex(kt,Fn,1,1,sn,!0)),xn&&(this.addCurrentVertex(kt,Gn,-1,-1,sn,!0),this.addCurrentVertex(kt,Gn,0,0,sn)));if(li&&qn<lt-1){var Eo=kt.dist(xn);if(Eo>2*Zt){var mo=kt.add(xn.sub(kt)._mult(Zt/Eo)._round());this.updateDistance(kt,mo),this.addCurrentVertex(mo,Gn,0,0,sn),kt=mo}}}}},ml.prototype.addCurrentVertex=function(D,z,Q,he,xe,Se){void 0===Se&&(Se=!1);var lt=z.y*he-z.x,_t=-z.y-z.x*he;this.addHalfVertex(D,z.x+z.y*Q,z.y-z.x*Q,Se,!1,Q,xe),this.addHalfVertex(D,lt,_t,Se,!0,-he,xe),this.distance>cg/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(D,z,Q,he,xe,Se))},ml.prototype.addHalfVertex=function(D,z,Q,he,xe,Se,ze){var _t=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((D.x<<1)+(he?1:0),(D.y<<1)+(xe?1:0),Math.round(63*z)+128,Math.round(63*Q)+128,1+(0===Se?0:Se<0?-1:1)|(63&_t)<<2,_t>>6);var kt=ze.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,kt),ze.primitiveLength++),xe?this.e2=kt:this.e1=kt},ml.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(cg-1):this.distance},ml.prototype.updateDistance=function(D,z){this.distance+=D.dist(z),this.updateScaledDistance()},mr("LineBucket",ml,{omit:["layers","patternFeatures"]});var Np=new Zi({"line-cap":new Oi(He.layout_line["line-cap"]),"line-join":new $i(He.layout_line["line-join"]),"line-miter-limit":new Oi(He.layout_line["line-miter-limit"]),"line-round-limit":new Oi(He.layout_line["line-round-limit"]),"line-sort-key":new $i(He.layout_line["line-sort-key"])}),mh={paint:new Zi({"line-opacity":new $i(He.paint_line["line-opacity"]),"line-color":new $i(He.paint_line["line-color"]),"line-translate":new Oi(He.paint_line["line-translate"]),"line-translate-anchor":new Oi(He.paint_line["line-translate-anchor"]),"line-width":new $i(He.paint_line["line-width"]),"line-gap-width":new $i(He.paint_line["line-gap-width"]),"line-offset":new $i(He.paint_line["line-offset"]),"line-blur":new $i(He.paint_line["line-blur"]),"line-dasharray":new gu(He.paint_line["line-dasharray"]),"line-pattern":new ll(He.paint_line["line-pattern"]),"line-gradient":new ul(He.paint_line["line-gradient"])}),layout:Np},zp=new(function(D){function z(){D.apply(this,arguments)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(Q,he){return he=new Qa(Math.floor(he.zoom),{now:he.now,fadeDuration:he.fadeDuration,zoomHistory:he.zoomHistory,transition:he.transition}),D.prototype.possiblyEvaluate.call(this,Q,he)},z.prototype.evaluate=function(Q,he,xe,Se){return he=f({},he,{zoom:Math.floor(he.zoom)}),D.prototype.evaluate.call(this,Q,he,xe,Se)},z}($i))(mh.paint.properties["line-width"].specification);zp.useIntegerZoom=!0;var Zv=function(D){function z(Q){D.call(this,Q,mh)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(Q){"line-gradient"===Q&&this._updateGradient()},z.prototype._updateGradient=function(){this.gradient=ed(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},z.prototype.recalculate=function(Q,he){D.prototype.recalculate.call(this,Q,he),this.paint._values["line-floorwidth"]=zp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Q)},z.prototype.createBucket=function(Q){return new ml(Q)},z.prototype.queryRadius=function(Q){var he=Q,xe=fg(ko("line-width",this,he),ko("line-gap-width",this,he)),Se=ko("line-offset",this,he);return xe/2+Math.abs(Se)+bs(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(Q,he,xe,Se,ze,Ze,lt){var _t=_s(Q,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ze.angle,lt),kt=lt/2*fg(this.paint.get("line-width").evaluate(he,xe),this.paint.get("line-gap-width").evaluate(he,xe)),Zt=this.paint.get("line-offset").evaluate(he,xe);return Zt&&(Se=function(sn,en){for(var xn=[],Fn=new i(0,0),Gn=0;Gn<sn.length;Gn++){for(var qn=sn[Gn],ar=[],lr=0;lr<qn.length;lr++){var Lr=qn[lr],jr=qn[lr+1],li=0===lr?Fn:Lr.sub(qn[lr-1])._unit()._perp(),ai=lr===qn.length-1?Fn:jr.sub(Lr)._unit()._perp(),gi=li._add(ai)._unit();gi._mult(1/(gi.x*ai.x+gi.y*ai.y)),ar.push(gi._mult(en)._add(Lr))}xn.push(ar)}return xn}(Se,Zt*lt)),function(sn,en,xn){for(var Fn=0;Fn<en.length;Fn++){var Gn=en[Fn];if(sn.length>=3)for(var qn=0;qn<Gn.length;qn++)if(qs(sn,Gn[qn]))return!0;if(Pu(sn,Gn,xn))return!0}return!1}(_t,Se,kt)},z.prototype.isTileClipped=function(){return!0},z}(Al);function fg(D,z){return z>0?z+2*D:D}var _c=Xa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vh=Xa([{name:"a_projected_pos",components:3,type:"Float32"}],4),Xv=(Xa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Xa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),$v=(Xa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Xa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),hg=Xa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Kv(D,z,Q){return D.sections.forEach(function(he){var xe,ze,Ze;he.text=(xe=he.text,ze=Q,"uppercase"===(Ze=z.layout.get("text-transform").evaluate(ze,{}))?xe=xe.toLocaleUpperCase():"lowercase"===Ze&&(xe=xe.toLocaleLowerCase()),Na.applyArabicShaping&&(xe=Na.applyArabicShaping(xe)),xe)}),D}Xa([{name:"triangle",components:3,type:"Uint16"}]),Xa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Xa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Xa([{type:"Float32",name:"offsetX"}]),Xa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var sd={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},dg=function(D,z,Q,he,xe){var Se,ze,Ze=8*xe-he-1,lt=(1<<Ze)-1,_t=lt>>1,kt=-7,Zt=Q?xe-1:0,sn=Q?-1:1,en=D[z+Zt];for(Zt+=sn,Se=en&(1<<-kt)-1,en>>=-kt,kt+=Ze;kt>0;Se=256*Se+D[z+Zt],Zt+=sn,kt-=8);for(ze=Se&(1<<-kt)-1,Se>>=-kt,kt+=he;kt>0;ze=256*ze+D[z+Zt],Zt+=sn,kt-=8);if(0===Se)Se=1-_t;else{if(Se===lt)return ze?NaN:1/0*(en?-1:1);ze+=Math.pow(2,he),Se-=_t}return(en?-1:1)*ze*Math.pow(2,Se-he)},pg=function(D,z,Q,he,xe,Se){var ze,Ze,lt,_t=8*Se-xe-1,kt=(1<<_t)-1,Zt=kt>>1,sn=23===xe?Math.pow(2,-24)-Math.pow(2,-77):0,en=he?0:Se-1,xn=he?1:-1,Fn=z<0||0===z&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(Ze=isNaN(z)?1:0,ze=kt):(ze=Math.floor(Math.log(z)/Math.LN2),z*(lt=Math.pow(2,-ze))<1&&(ze--,lt*=2),(z+=ze+Zt>=1?sn/lt:sn*Math.pow(2,1-Zt))*lt>=2&&(ze++,lt/=2),ze+Zt>=kt?(Ze=0,ze=kt):ze+Zt>=1?(Ze=(z*lt-1)*Math.pow(2,xe),ze+=Zt):(Ze=z*Math.pow(2,Zt-1)*Math.pow(2,xe),ze=0));xe>=8;D[Q+en]=255&Ze,en+=xn,Ze/=256,xe-=8);for(ze=ze<<xe|Ze,_t+=xe;_t>0;D[Q+en]=255&ze,en+=xn,ze/=256,_t-=8);D[Q+en-xn]|=128*Fn},ld=lo;function lo(D){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(D)?D:new Uint8Array(D||0),this.pos=0,this.type=0,this.length=this.buf.length}lo.Varint=0,lo.Fixed64=1,lo.Bytes=2,lo.Fixed32=5;var ud="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ul(D){return D.type===lo.Bytes?D.readVarint()+D.pos:D.pos+1}function gg(D,z,Q){var he=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(7*Math.LN2));Q.realloc(he);for(var xe=Q.pos-1;xe>=D;xe--)Q.buf[xe+he]=Q.buf[xe]}function z_(D,z){for(var Q=0;Q<D.length;Q++)z.writeVarint(D[Q])}function cd(D,z){for(var Q=0;Q<D.length;Q++)z.writeSVarint(D[Q])}function Bp(D,z){for(var Q=0;Q<D.length;Q++)z.writeFloat(D[Q])}function mg(D,z){for(var Q=0;Q<D.length;Q++)z.writeDouble(D[Q])}function vg(D,z){for(var Q=0;Q<D.length;Q++)z.writeBoolean(D[Q])}function yg(D,z){for(var Q=0;Q<D.length;Q++)z.writeFixed32(D[Q])}function bg(D,z){for(var Q=0;Q<D.length;Q++)z.writeSFixed32(D[Q])}function Jv(D,z){for(var Q=0;Q<D.length;Q++)z.writeFixed64(D[Q])}function Qv(D,z){for(var Q=0;Q<D.length;Q++)z.writeSFixed64(D[Q])}function fd(D,z){return(D[z]|D[z+1]<<8|D[z+2]<<16)+16777216*D[z+3]}function If(D,z,Q){D[Q]=z,D[Q+1]=z>>>8,D[Q+2]=z>>>16,D[Q+3]=z>>>24}function _g(D,z){return(D[z]|D[z+1]<<8|D[z+2]<<16)+(D[z+3]<<24)}function xc(D,z,Q){1===D&&Q.readMessage(yh,z)}function yh(D,z,Q){if(3===D){var he=Q.readMessage(ey,{}),ze=he.width,Ze=he.height,lt=he.left,_t=he.top,kt=he.advance;z.push({id:he.id,bitmap:new ou({width:ze+6,height:Ze+6},he.bitmap),metrics:{width:ze,height:Ze,left:lt,top:_t,advance:kt}})}}function ey(D,z,Q){1===D?z.id=Q.readVarint():2===D?z.bitmap=Q.readBytes():3===D?z.width=Q.readVarint():4===D?z.height=Q.readVarint():5===D?z.left=Q.readSVarint():6===D?z.top=Q.readSVarint():7===D&&(z.advance=Q.readVarint())}function ty(D){for(var z=0,Q=0,he=0,xe=D;he<xe.length;he+=1){var Se=xe[he];z+=Se.w*Se.h,Q=Math.max(Q,Se.w)}D.sort(function(Fn,Gn){return Gn.h-Fn.h});for(var ze=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(z/.95)),Q),h:1/0}],Ze=0,lt=0,_t=0,kt=D;_t<kt.length;_t+=1)for(var Zt=kt[_t],sn=ze.length-1;sn>=0;sn--){var en=ze[sn];if(!(Zt.w>en.w||Zt.h>en.h)){if(Zt.x=en.x,Zt.y=en.y,lt=Math.max(lt,Zt.y+Zt.h),Ze=Math.max(Ze,Zt.x+Zt.w),Zt.w===en.w&&Zt.h===en.h){var xn=ze.pop();sn<ze.length&&(ze[sn]=xn)}else Zt.h===en.h?(en.x+=Zt.w,en.w-=Zt.w):Zt.w===en.w?(en.y+=Zt.h,en.h-=Zt.h):(ze.push({x:en.x+Zt.w,y:en.y,w:en.w-Zt.w,h:Zt.h}),en.y+=Zt.h,en.h-=Zt.h);break}}return{w:Ze,h:lt,fill:z/(Ze*lt)||0}}lo.prototype={destroy:function(){this.buf=null},readFields:function(D,z,Q){for(Q=Q||this.length;this.pos<Q;){var he=this.readVarint(),xe=he>>3,Se=this.pos;this.type=7&he,D(xe,z,this),this.pos===Se&&this.skip(he)}return z},readMessage:function(D,z){return this.readFields(D,z,this.readVarint()+this.pos)},readFixed32:function(){var D=fd(this.buf,this.pos);return this.pos+=4,D},readSFixed32:function(){var D=_g(this.buf,this.pos);return this.pos+=4,D},readFixed64:function(){var D=fd(this.buf,this.pos)+4294967296*fd(this.buf,this.pos+4);return this.pos+=8,D},readSFixed64:function(){var D=fd(this.buf,this.pos)+4294967296*_g(this.buf,this.pos+4);return this.pos+=8,D},readFloat:function(){var D=dg(this.buf,this.pos,!0,23,4);return this.pos+=4,D},readDouble:function(){var D=dg(this.buf,this.pos,!0,52,8);return this.pos+=8,D},readVarint:function(D){var z,Q,he=this.buf;return z=127&(Q=he[this.pos++]),Q<128?z:(z|=(127&(Q=he[this.pos++]))<<7,Q<128?z:(z|=(127&(Q=he[this.pos++]))<<14,Q<128?z:(z|=(127&(Q=he[this.pos++]))<<21,Q<128?z:function(xe,Se,ze){var Ze,lt,_t=ze.buf;if(Ze=(112&(lt=_t[ze.pos++]))>>4,lt<128||(Ze|=(127&(lt=_t[ze.pos++]))<<3,lt<128)||(Ze|=(127&(lt=_t[ze.pos++]))<<10,lt<128)||(Ze|=(127&(lt=_t[ze.pos++]))<<17,lt<128)||(Ze|=(127&(lt=_t[ze.pos++]))<<24,lt<128)||(Ze|=(1&(lt=_t[ze.pos++]))<<31,lt<128))return function Df(D,z,Q){return Q?4294967296*z+(D>>>0):4294967296*(z>>>0)+(D>>>0)}(xe,Ze,Se);throw new Error("Expected varint not more than 10 bytes")}(z|=(15&(Q=he[this.pos]))<<28,D,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var D=this.readVarint();return D%2==1?(D+1)/-2:D/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var D=this.readVarint()+this.pos,z=this.pos;return this.pos=D,D-z>=12&&ud?ud.decode(this.buf.subarray(z,D)):function(Q,he,xe){for(var Se="",ze=he;ze<xe;){var Ze,lt,_t,kt=Q[ze],Zt=null,sn=kt>239?4:kt>223?3:kt>191?2:1;if(ze+sn>xe)break;1===sn?kt<128&&(Zt=kt):2===sn?128==(192&(Ze=Q[ze+1]))&&(Zt=(31&kt)<<6|63&Ze)<=127&&(Zt=null):3===sn?(lt=Q[ze+2],128==(192&(Ze=Q[ze+1]))&&128==(192&lt)&&((Zt=(15&kt)<<12|(63&Ze)<<6|63&lt)<=2047||Zt>=55296&&Zt<=57343)&&(Zt=null)):4===sn&&(lt=Q[ze+2],_t=Q[ze+3],128==(192&(Ze=Q[ze+1]))&&128==(192&lt)&&128==(192&_t)&&((Zt=(15&kt)<<18|(63&Ze)<<12|(63&lt)<<6|63&_t)<=65535||Zt>=1114112)&&(Zt=null)),null===Zt?(Zt=65533,sn=1):Zt>65535&&(Zt-=65536,Se+=String.fromCharCode(Zt>>>10&1023|55296),Zt=56320|1023&Zt),Se+=String.fromCharCode(Zt),ze+=sn}return Se}(this.buf,z,D)},readBytes:function(){var D=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,D);return this.pos=D,z},readPackedVarint:function(D,z){if(this.type!==lo.Bytes)return D.push(this.readVarint(z));var Q=Ul(this);for(D=D||[];this.pos<Q;)D.push(this.readVarint(z));return D},readPackedSVarint:function(D){if(this.type!==lo.Bytes)return D.push(this.readSVarint());var z=Ul(this);for(D=D||[];this.pos<z;)D.push(this.readSVarint());return D},readPackedBoolean:function(D){if(this.type!==lo.Bytes)return D.push(this.readBoolean());var z=Ul(this);for(D=D||[];this.pos<z;)D.push(this.readBoolean());return D},readPackedFloat:function(D){if(this.type!==lo.Bytes)return D.push(this.readFloat());var z=Ul(this);for(D=D||[];this.pos<z;)D.push(this.readFloat());return D},readPackedDouble:function(D){if(this.type!==lo.Bytes)return D.push(this.readDouble());var z=Ul(this);for(D=D||[];this.pos<z;)D.push(this.readDouble());return D},readPackedFixed32:function(D){if(this.type!==lo.Bytes)return D.push(this.readFixed32());var z=Ul(this);for(D=D||[];this.pos<z;)D.push(this.readFixed32());return D},readPackedSFixed32:function(D){if(this.type!==lo.Bytes)return D.push(this.readSFixed32());var z=Ul(this);for(D=D||[];this.pos<z;)D.push(this.readSFixed32());return D},readPackedFixed64:function(D){if(this.type!==lo.Bytes)return D.push(this.readFixed64());var z=Ul(this);for(D=D||[];this.pos<z;)D.push(this.readFixed64());return D},readPackedSFixed64:function(D){if(this.type!==lo.Bytes)return D.push(this.readSFixed64());var z=Ul(this);for(D=D||[];this.pos<z;)D.push(this.readSFixed64());return D},skip:function(D){var z=7&D;if(z===lo.Varint)for(;this.buf[this.pos++]>127;);else if(z===lo.Bytes)this.pos=this.readVarint()+this.pos;else if(z===lo.Fixed32)this.pos+=4;else{if(z!==lo.Fixed64)throw new Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(D,z){this.writeVarint(D<<3|z)},realloc:function(D){for(var z=this.length||16;z<this.pos+D;)z*=2;if(z!==this.length){var Q=new Uint8Array(z);Q.set(this.buf),this.buf=Q,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(D){this.realloc(4),If(this.buf,D,this.pos),this.pos+=4},writeSFixed32:function(D){this.realloc(4),If(this.buf,D,this.pos),this.pos+=4},writeFixed64:function(D){this.realloc(8),If(this.buf,-1&D,this.pos),If(this.buf,Math.floor(D*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(D){this.realloc(8),If(this.buf,-1&D,this.pos),If(this.buf,Math.floor(D*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(D){(D=+D||0)>268435455||D<0?function(z,Q){var he,xe,Se,Ze;if(z>=0?(he=z%4294967296|0,xe=z/4294967296|0):(xe=~(-z/4294967296),4294967295^(he=~(-z%4294967296))?he=he+1|0:(he=0,xe=xe+1|0)),z>=0x10000000000000000||z<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");Q.realloc(10),Se=he,(Ze=Q).buf[Ze.pos++]=127&Se|128,Se>>>=7,Ze.buf[Ze.pos++]=127&Se|128,Se>>>=7,Ze.buf[Ze.pos++]=127&Se|128,Se>>>=7,Ze.buf[Ze.pos++]=127&Se|128,Ze.buf[Ze.pos]=127&(Se>>>=7),function(Se,ze){var Ze=(7&Se)<<4;ze.buf[ze.pos++]|=Ze|((Se>>>=3)?128:0),Se&&(ze.buf[ze.pos++]=127&Se|((Se>>>=7)?128:0),Se&&(ze.buf[ze.pos++]=127&Se|((Se>>>=7)?128:0),Se&&(ze.buf[ze.pos++]=127&Se|((Se>>>=7)?128:0),Se&&(ze.buf[ze.pos++]=127&Se|((Se>>>=7)?128:0),Se&&(ze.buf[ze.pos++]=127&Se)))))}(xe,Q)}(D,this):(this.realloc(4),this.buf[this.pos++]=127&D|(D>127?128:0),D<=127||(this.buf[this.pos++]=127&(D>>>=7)|(D>127?128:0),D<=127||(this.buf[this.pos++]=127&(D>>>=7)|(D>127?128:0),D<=127||(this.buf[this.pos++]=D>>>7&127))))},writeSVarint:function(D){this.writeVarint(D<0?2*-D-1:2*D)},writeBoolean:function(D){this.writeVarint(Boolean(D))},writeString:function(D){D=String(D),this.realloc(4*D.length),this.pos++;var z=this.pos;this.pos=function(he,xe,Se){for(var ze,Ze,lt=0;lt<xe.length;lt++){if((ze=xe.charCodeAt(lt))>55295&&ze<57344){if(!Ze){ze>56319||lt+1===xe.length?(he[Se++]=239,he[Se++]=191,he[Se++]=189):Ze=ze;continue}if(ze<56320){he[Se++]=239,he[Se++]=191,he[Se++]=189,Ze=ze;continue}ze=Ze-55296<<10|ze-56320|65536,Ze=null}else Ze&&(he[Se++]=239,he[Se++]=191,he[Se++]=189,Ze=null);ze<128?he[Se++]=ze:(ze<2048?he[Se++]=ze>>6|192:(ze<65536?he[Se++]=ze>>12|224:(he[Se++]=ze>>18|240,he[Se++]=ze>>12&63|128),he[Se++]=ze>>6&63|128),he[Se++]=63&ze|128)}return Se}(this.buf,D,this.pos);var Q=this.pos-z;Q>=128&&gg(z,Q,this),this.pos=z-1,this.writeVarint(Q),this.pos+=Q},writeFloat:function(D){this.realloc(4),pg(this.buf,D,this.pos,!0,23,4),this.pos+=4},writeDouble:function(D){this.realloc(8),pg(this.buf,D,this.pos,!0,52,8),this.pos+=8},writeBytes:function(D){var z=D.length;this.writeVarint(z),this.realloc(z);for(var Q=0;Q<z;Q++)this.buf[this.pos++]=D[Q]},writeRawMessage:function(D,z){this.pos++;var Q=this.pos;D(z,this);var he=this.pos-Q;he>=128&&gg(Q,he,this),this.pos=Q-1,this.writeVarint(he),this.pos+=he},writeMessage:function(D,z,Q){this.writeTag(D,lo.Bytes),this.writeRawMessage(z,Q)},writePackedVarint:function(D,z){z.length&&this.writeMessage(D,z_,z)},writePackedSVarint:function(D,z){z.length&&this.writeMessage(D,cd,z)},writePackedBoolean:function(D,z){z.length&&this.writeMessage(D,vg,z)},writePackedFloat:function(D,z){z.length&&this.writeMessage(D,Bp,z)},writePackedDouble:function(D,z){z.length&&this.writeMessage(D,mg,z)},writePackedFixed32:function(D,z){z.length&&this.writeMessage(D,yg,z)},writePackedSFixed32:function(D,z){z.length&&this.writeMessage(D,bg,z)},writePackedFixed64:function(D,z){z.length&&this.writeMessage(D,Jv,z)},writePackedSFixed64:function(D,z){z.length&&this.writeMessage(D,Qv,z)},writeBytesField:function(D,z){this.writeTag(D,lo.Bytes),this.writeBytes(z)},writeFixed32Field:function(D,z){this.writeTag(D,lo.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(D,z){this.writeTag(D,lo.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(D,z){this.writeTag(D,lo.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(D,z){this.writeTag(D,lo.Fixed64),this.writeSFixed64(z)},writeVarintField:function(D,z){this.writeTag(D,lo.Varint),this.writeVarint(z)},writeSVarintField:function(D,z){this.writeTag(D,lo.Varint),this.writeSVarint(z)},writeStringField:function(D,z){this.writeTag(D,lo.Bytes),this.writeString(z)},writeFloatField:function(D,z){this.writeTag(D,lo.Fixed32),this.writeFloat(z)},writeDoubleField:function(D,z){this.writeTag(D,lo.Fixed64),this.writeDouble(z)},writeBooleanField:function(D,z){this.writeVarintField(D,Boolean(z))}};var jp=function(D,z){var Q=z.pixelRatio,he=z.version,xe=z.stretchX,Se=z.stretchY,ze=z.content;this.paddedRect=D,this.pixelRatio=Q,this.stretchX=xe,this.stretchY=Se,this.content=ze,this.version=he},hd={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};hd.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},hd.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},hd.tlbr.get=function(){return this.tl.concat(this.br)},hd.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(jp.prototype,hd);var dd=function(D,z){var Q={},he={};this.haveRenderCallbacks=[];var xe=[];this.addImages(D,Q,xe),this.addImages(z,he,xe);var Se=ty(xe),lt=new Es({width:Se.w||1,height:Se.h||1});for(var _t in D){var kt=D[_t],Zt=Q[_t].paddedRect;Es.copy(kt.data,lt,{x:0,y:0},{x:Zt.x+1,y:Zt.y+1},kt.data)}for(var sn in z){var en=z[sn],xn=he[sn].paddedRect,Fn=xn.x+1,Gn=xn.y+1,qn=en.data.width,ar=en.data.height;Es.copy(en.data,lt,{x:0,y:0},{x:Fn,y:Gn},en.data),Es.copy(en.data,lt,{x:0,y:ar-1},{x:Fn,y:Gn-1},{width:qn,height:1}),Es.copy(en.data,lt,{x:0,y:0},{x:Fn,y:Gn+ar},{width:qn,height:1}),Es.copy(en.data,lt,{x:qn-1,y:0},{x:Fn-1,y:Gn},{width:1,height:ar}),Es.copy(en.data,lt,{x:0,y:0},{x:Fn+qn,y:Gn},{width:1,height:ar})}this.image=lt,this.iconPositions=Q,this.patternPositions=he};dd.prototype.addImages=function(D,z,Q){for(var he in D){var xe=D[he],Se={x:0,y:0,w:xe.data.width+2,h:xe.data.height+2};Q.push(Se),z[he]=new jp(Se,xe),xe.hasRenderCallback&&this.haveRenderCallbacks.push(he)}},dd.prototype.patchUpdatedImages=function(D,z){for(var Q in D.dispatchRenderCallbacks(this.haveRenderCallbacks),D.updatedImages)this.patchUpdatedImage(this.iconPositions[Q],D.getImage(Q),z),this.patchUpdatedImage(this.patternPositions[Q],D.getImage(Q),z)},dd.prototype.patchUpdatedImage=function(D,z,Q){if(D&&z&&D.version!==z.version){D.version=z.version;var he=D.tl;Q.update(z.data,void 0,{x:he[0],y:he[1]})}},mr("ImagePosition",jp),mr("ImageAtlas",dd);var $l={horizontal:1,vertical:2,horizontalOnly:3},Gc=function(){this.scale=1,this.fontStack="",this.imageName=null};Gc.forText=function(D,z){var Q=new Gc;return Q.scale=D||1,Q.fontStack=z,Q},Gc.forImage=function(D){var z=new Gc;return z.imageName=D,z};var tl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function pd(D,z,Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn,Fn){var Gn,qn=tl.fromFeature(D,xe);Zt===$l.vertical&&qn.verticalizePunctuation();var ar=Na.processBidirectionalText,lr=Na.processStyledBidirectionalText;if(ar&&1===qn.sections.length){Gn=[];for(var hr=0,Lr=ar(qn.toString(),uu(qn,_t,Se,z,he,en,xn));hr<Lr.length;hr+=1){var jr=Lr[hr],li=new tl;li.text=jr,li.sections=qn.sections;for(var ai=0;ai<jr.length;ai++)li.sectionIndex.push(0);Gn.push(li)}}else if(lr){Gn=[];for(var gi=0,Ii=lr(qn.text,qn.sectionIndex,uu(qn,_t,Se,z,he,en,xn));gi<Ii.length;gi+=1){var Li=Ii[gi],Ti=new tl;Ti.text=Li[0],Ti.sectionIndex=Li[1],Ti.sections=qn.sections,Gn.push(Ti)}}else Gn=function(Pi,za){for(var Pa=[],ja=Pi.text,Ki=0,Ia=0,uo=za;Ia<uo.length;Ia+=1){var go=uo[Ia];Pa.push(Pi.substring(Ki,go)),Ki=go}return Ki<ja.length&&Pa.push(Pi.substring(Ki,ja.length)),Pa}(qn,uu(qn,_t,Se,z,he,en,xn));var Bi=[],ji={positionedLines:Bi,text:qn.toString(),top:kt[1],bottom:kt[1],left:kt[0],right:kt[0],writingMode:Zt,iconsInText:!1,verticalizable:!1};return function(Pi,za,Pa,ja,Ki,Ia,uo,go,Eo,mo,es,vo){for(var Ws=0,xs=-17,js=0,yl=0,Ys="right"===go?1:"left"===go?0:.5,ts=0,Cs=0,fs=Ki;Cs<fs.length;Cs+=1){var hs=fs[Cs];hs.trim();var Ma=hs.getMaxScale(),Va=24*(Ma-1),Ko={positionedGlyphs:[],lineOffset:0};Pi.positionedLines[ts]=Ko;var Jo=Ko.positionedGlyphs,eo=0;if(hs.length()){for(var Bo=0;Bo<hs.length();Bo++){var $a=hs.getSection(Bo),Qo=hs.getSectionIndex(Bo),bl=hs.getCharCode(Bo),Fl=0,nl=null,cu=null,tc=null,Ds=24,bu=!(Eo===$l.horizontal||!es&&!Ui(bl)||es&&(gd[bl]||(Fu=bl,$r.Arabic(Fu)||$r["Arabic Supplement"](Fu)||$r["Arabic Extended-A"](Fu)||$r["Arabic Presentation Forms-A"](Fu)||$r["Arabic Presentation Forms-B"](Fu))));if($a.imageName){var la=ja[$a.imageName];if(!la)continue;tc=$a.imageName,Pi.iconsInText=Pi.iconsInText||!0,cu=la.paddedRect;var jo=la.displaySize;$a.scale=24*$a.scale/vo,Fl=Va+(24-jo[1]*$a.scale),Ds=(nl={width:jo[0],height:jo[1],left:1,top:-3,advance:bu?jo[1]:jo[0]}).advance;var ef=bu?jo[0]*$a.scale-24*Ma:jo[1]*$a.scale-24*Ma;ef>0&&ef>eo&&(eo=ef)}else{var tf=Pa[$a.fontStack],_l=tf&&tf[bl];if(_l&&_l.rect)cu=_l.rect,nl=_l.metrics;else{var wh=za[$a.fontStack],Ad=wh&&wh[bl];if(!Ad)continue;nl=Ad.metrics}Fl=24*(Ma-$a.scale)}bu?(Pi.verticalizable=!0,Jo.push({glyph:bl,imageName:tc,x:Ws,y:xs+Fl,vertical:bu,scale:$a.scale,fontStack:$a.fontStack,sectionIndex:Qo,metrics:nl,rect:cu}),Ws+=Ds*$a.scale+mo):(Jo.push({glyph:bl,imageName:tc,x:Ws,y:xs+Fl,vertical:bu,scale:$a.scale,fontStack:$a.fontStack,sectionIndex:Qo,metrics:nl,rect:cu}),Ws+=nl.advance*$a.scale+mo)}0!==Jo.length&&(js=Math.max(Ws-mo,js),wg(Jo,0,Jo.length-1,Ys,eo)),Ws=0;var fu=Ia*Ma+eo;Ko.lineOffset=Math.max(eo,Va),xs+=fu,yl=Math.max(fu,yl),++ts}else xs+=Ia,++ts}var Fu,nf=xs- -17,Bf=Wc(uo),Th=Bf.horizontalAlign,nc=Bf.verticalAlign;(function(kd,rf,af,jf,of,Vf,Ed,Sd,Mh){var Uf,Cd=(rf-af)*of;Uf=Vf!==Ed?-Sd*jf- -17:(-jf*Mh+.5)*Ed;for(var sf=0,Ah=kd;sf<Ah.length;sf+=1)for(var kh=0,Hf=Ah[sf].positionedGlyphs;kh<Hf.length;kh+=1){var lf=Hf[kh];lf.x+=Cd,lf.y+=Uf}})(Pi.positionedLines,Ys,Th,nc,js,yl,Ia,nf,Ki.length),Pi.top+=-nc*nf,Pi.bottom=Pi.top+nf,Pi.left+=-Th*js,Pi.right=Pi.left+js}(ji,z,Q,he,Gn,ze,Ze,lt,Zt,_t,sn,Fn),!function(Pi){for(var za=0,Pa=Pi;za<Pa.length;za+=1)if(0!==Pa[za].positionedGlyphs.length)return!1;return!0}(Bi)&&ji}tl.fromFeature=function(D,z){for(var Q=new tl,he=0;he<D.sections.length;he++){var xe=D.sections[he];xe.image?Q.addImageSection(xe):Q.addTextSection(xe,z)}return Q},tl.prototype.length=function(){return this.text.length},tl.prototype.getSection=function(D){return this.sections[this.sectionIndex[D]]},tl.prototype.getSectionIndex=function(D){return this.sectionIndex[D]},tl.prototype.getCharCode=function(D){return this.text.charCodeAt(D)},tl.prototype.verticalizePunctuation=function(){this.text=function(D){for(var z="",Q=0;Q<D.length;Q++){var he=D.charCodeAt(Q+1)||null,xe=D.charCodeAt(Q-1)||null;he&&Ta(he)&&!sd[D[Q+1]]||xe&&Ta(xe)&&!sd[D[Q-1]]||!sd[D[Q]]?z+=D[Q]:z+=sd[D[Q]]}return z}(this.text)},tl.prototype.trim=function(){for(var D=0,z=0;z<this.text.length&&gd[this.text.charCodeAt(z)];z++)D++;for(var Q=this.text.length,he=this.text.length-1;he>=0&&he>=D&&gd[this.text.charCodeAt(he)];he--)Q--;this.text=this.text.substring(D,Q),this.sectionIndex=this.sectionIndex.slice(D,Q)},tl.prototype.substring=function(D,z){var Q=new tl;return Q.text=this.text.substring(D,z),Q.sectionIndex=this.sectionIndex.slice(D,z),Q.sections=this.sections,Q},tl.prototype.toString=function(){return this.text},tl.prototype.getMaxScale=function(){var D=this;return this.sectionIndex.reduce(function(z,Q){return Math.max(z,D.sections[Q].scale)},0)},tl.prototype.addTextSection=function(D,z){this.text+=D.text,this.sections.push(Gc.forText(D.scale,D.fontStack||z));for(var Q=this.sections.length-1,he=0;he<D.text.length;++he)this.sectionIndex.push(Q)},tl.prototype.addImageSection=function(D){var z=D.image?D.image.name:"";if(0!==z.length){var Q=this.getNextImageSectionCharCode();Q?(this.text+=String.fromCharCode(Q),this.sections.push(Gc.forImage(z)),this.sectionIndex.push(this.sections.length-1)):I("Reached maximum number of images 6401")}else I("Can't add FormattedSection with an empty image.")},tl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var gd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Rl={};function ny(D,z,Q,he,xe,Se){if(z.imageName){var ze=he[z.imageName];return ze?ze.displaySize[0]*z.scale*24/Se+xe:0}var Ze=Q[z.fontStack],lt=Ze&&Ze[D];return lt?lt.metrics.advance*z.scale+xe:0}function xg(D,z,Q,he){var xe=Math.pow(D-z,2);return he?D<z?xe/2:2*xe:xe+Math.abs(Q)*Q}function md(D,z,Q){var he=0;return 10===D&&(he-=1e4),Q&&(he+=150),40!==D&&65288!==D||(he+=50),41!==z&&65289!==z||(he+=50),he}function Vp(D,z,Q,he,xe,Se){for(var ze=null,Ze=xg(z,Q,xe,Se),lt=0,_t=he;lt<_t.length;lt+=1){var kt=_t[lt],Zt=xg(z-kt.x,Q,xe,Se)+kt.badness;Zt<=Ze&&(ze=kt,Ze=Zt)}return{index:D,x:z,priorBreak:ze,badness:Ze}}function uu(D,z,Q,he,xe,Se,ze){if("point"!==Se)return[];if(!D)return[];for(var Ze,lt=[],_t=function(Gn,qn,ar,lr,hr,Lr){for(var jr=0,li=0;li<Gn.length();li++){var ai=Gn.getSection(li);jr+=ny(Gn.getCharCode(li),ai,lr,hr,qn,Lr)}return jr/Math.max(1,Math.ceil(jr/ar))}(D,z,Q,he,xe,ze),kt=D.text.indexOf("\u200b")>=0,Zt=0,sn=0;sn<D.length();sn++){var en=D.getSection(sn),xn=D.getCharCode(sn);if(gd[xn]||(Zt+=ny(xn,en,he,xe,z,ze)),sn<D.length()-1){var Fn=!((Ze=xn)<11904||!($r["Bopomofo Extended"](Ze)||$r.Bopomofo(Ze)||$r["CJK Compatibility Forms"](Ze)||$r["CJK Compatibility Ideographs"](Ze)||$r["CJK Compatibility"](Ze)||$r["CJK Radicals Supplement"](Ze)||$r["CJK Strokes"](Ze)||$r["CJK Symbols and Punctuation"](Ze)||$r["CJK Unified Ideographs Extension A"](Ze)||$r["CJK Unified Ideographs"](Ze)||$r["Enclosed CJK Letters and Months"](Ze)||$r["Halfwidth and Fullwidth Forms"](Ze)||$r.Hiragana(Ze)||$r["Ideographic Description Characters"](Ze)||$r["Kangxi Radicals"](Ze)||$r["Katakana Phonetic Extensions"](Ze)||$r.Katakana(Ze)||$r["Vertical Forms"](Ze)||$r["Yi Radicals"](Ze)||$r["Yi Syllables"](Ze)));(Rl[xn]||Fn||en.imageName)&&lt.push(Vp(sn+1,Zt,_t,lt,md(xn,D.getCharCode(sn+1),Fn&&kt),!1))}}return function Gn(qn){return qn?Gn(qn.priorBreak).concat(qn.index):[]}(Vp(D.length(),Zt,_t,lt,0,!0))}function Wc(D){var z=.5,Q=.5;switch(D){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0}switch(D){case"bottom":case"bottom-right":case"bottom-left":Q=1;break;case"top":case"top-right":case"top-left":Q=0}return{horizontalAlign:z,verticalAlign:Q}}function wg(D,z,Q,he,xe){if(he||xe)for(var Se=D[Q],Ze=(D[Q].x+Se.metrics.advance*Se.scale)*he,lt=z;lt<=Q;lt++)D[lt].x-=Ze,D[lt].y+=xe}function Up(D,z,Q,he,xe,Se){var ze,Ze=D.image;if(Ze.content){var lt=Ze.content,_t=Ze.pixelRatio||1;ze=[lt[0]/_t,lt[1]/_t,Ze.displaySize[0]-lt[2]/_t,Ze.displaySize[1]-lt[3]/_t]}var kt,Zt,sn,en,xn=z.left*Se,Fn=z.right*Se;"width"===Q||"both"===Q?(en=xe[0]+xn-he[3],Zt=xe[0]+Fn+he[1]):Zt=(en=xe[0]+(xn+Fn-Ze.displaySize[0])/2)+Ze.displaySize[0];var Gn=z.top*Se,qn=z.bottom*Se;return"height"===Q||"both"===Q?(kt=xe[1]+Gn-he[0],sn=xe[1]+qn+he[2]):sn=(kt=xe[1]+(Gn+qn-Ze.displaySize[1])/2)+Ze.displaySize[1],{image:Ze,top:kt,right:Zt,bottom:sn,left:en,collisionPadding:ze}}Rl[10]=!0,Rl[32]=!0,Rl[38]=!0,Rl[40]=!0,Rl[41]=!0,Rl[43]=!0,Rl[45]=!0,Rl[47]=!0,Rl[173]=!0,Rl[183]=!0,Rl[8203]=!0,Rl[8208]=!0,Rl[8211]=!0,Rl[8231]=!0;var Yc=function(D){function z(Q,he,xe,Se){D.call(this,Q,he),this.angle=xe,void 0!==Se&&(this.segment=Se)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(i);function Tg(D,z){var Q=z.expression;if("constant"===Q.kind)return{kind:"constant",layoutSize:Q.evaluate(new Qa(D+1))};if("source"===Q.kind)return{kind:"source"};for(var he=Q.zoomStops,xe=Q.interpolationType,Se=0;Se<he.length&&he[Se]<=D;)Se++;for(var ze=Se=Math.max(0,Se-1);ze<he.length&&he[ze]<D+1;)ze++;ze=Math.min(he.length-1,ze);var Ze=he[Se],lt=he[ze];return"composite"===Q.kind?{kind:"composite",minZoom:Ze,maxZoom:lt,interpolationType:xe}:{kind:"camera",minZoom:Ze,maxZoom:lt,minSize:Q.evaluate(new Qa(Ze)),maxSize:Q.evaluate(new Qa(lt)),interpolationType:xe}}function ry(D,z,Q){var he=z.uSize,Se=Q.lowerSize;return"source"===D.kind?Se/128:"composite"===D.kind?Ur(Se/128,Q.upperSize/128,z.uSizeT):he}function iy(D,z){var Q=0,he=0;if("constant"===D.kind)he=D.layoutSize;else if("source"!==D.kind){var xe=D.interpolationType,Ze=xe?d(ka.interpolationFactor(xe,z,D.minZoom,D.maxZoom),0,1):0;"camera"===D.kind?he=Ur(D.minSize,D.maxSize,Ze):Q=Ze}return{uSizeT:Q,uSize:he}}mr("Anchor",Yc);var Hp=Object.freeze({__proto__:null,getSizeData:Tg,evaluateSizeForFeature:ry,evaluateSizeForZoom:iy,SIZE_PACK_FACTOR:128});function vd(D,z,Q,he,xe){if(void 0===z.segment)return!0;for(var Se=z,ze=z.segment+1,Ze=0;Ze>-Q/2;){if(--ze<0)return!1;Ze-=D[ze].dist(Se),Se=D[ze]}Ze+=D[ze].dist(D[ze+1]),ze++;for(var lt=[],_t=0;Ze<Q/2;){var Zt=D[ze],sn=D[ze+1];if(!sn)return!1;var en=D[ze-1].angleTo(Zt)-Zt.angleTo(sn);for(en=Math.abs((en+3*Math.PI)%(2*Math.PI)-Math.PI),lt.push({distance:Ze,angleDelta:en}),_t+=en;Ze-lt[0].distance>he;)_t-=lt.shift().angleDelta;if(_t>xe)return!1;ze++,Ze+=Zt.dist(sn)}return!0}function yd(D){for(var z=0,Q=0;Q<D.length-1;Q++)z+=D[Q].dist(D[Q+1]);return z}function ay(D,z,Q){return D?.6*z*Q:0}function oy(D,z){return Math.max(D?D.right-D.left:0,z?z.right-z.left:0)}function Mg(D,z,Q,he,xe,Se){for(var ze=ay(Q,xe,Se),Ze=oy(Q,he)*Se,lt=0,_t=yd(D)/2,kt=0;kt<D.length-1;kt++){var Zt=D[kt],sn=D[kt+1],en=Zt.dist(sn);if(lt+en>_t){var xn=(_t-lt)/en,Fn=Ur(Zt.x,sn.x,xn),Gn=Ur(Zt.y,sn.y,xn),qn=new Yc(Fn,Gn,sn.angleTo(Zt),kt);return qn._round(),!ze||vd(D,qn,Ze,ze,z)?qn:void 0}lt+=en}}function sy(D,z,Q,he,xe,Se,ze,Ze,lt){var _t=ay(he,Se,ze),kt=oy(he,xe),Zt=kt*ze,sn=0===D[0].x||D[0].x===lt||0===D[0].y||D[0].y===lt;return z-Zt<z/4&&(z=Zt+z/4),function en(xn,Fn,Gn,qn,ar,lr,hr,Lr,jr){for(var li=lr/2,ai=yd(xn),gi=0,Ii=Fn-Gn,Li=[],Ti=0;Ti<xn.length-1;Ti++){for(var Bi=xn[Ti],ji=xn[Ti+1],Pi=Bi.dist(ji),za=ji.angleTo(Bi);Ii+Gn<gi+Pi;){var Pa=((Ii+=Gn)-gi)/Pi,ja=Ur(Bi.x,ji.x,Pa),Ki=Ur(Bi.y,ji.y,Pa);if(ja>=0&&ja<jr&&Ki>=0&&Ki<jr&&Ii-li>=0&&Ii+li<=ai){var Ia=new Yc(ja,Ki,za,Ti);Ia._round(),qn&&!vd(xn,Ia,lr,qn,ar)||Li.push(Ia)}}gi+=Pi}return Lr||Li.length||hr||(Li=en(xn,gi/2,Gn,qn,ar,lr,hr,!0,jr)),Li}(D,sn?z/2*Ze%z:(kt/2+2*Se)*ze*Ze%z,z,_t,Q,Zt,sn,!1,lt)}function Ag(D,z,Q,he,xe){for(var Se=[],ze=0;ze<D.length;ze++)for(var Ze=D[ze],lt=void 0,_t=0;_t<Ze.length-1;_t++){var kt=Ze[_t],Zt=Ze[_t+1];kt.x<z&&Zt.x<z||(kt.x<z?kt=new i(z,kt.y+(z-kt.x)/(Zt.x-kt.x)*(Zt.y-kt.y))._round():Zt.x<z&&(Zt=new i(z,kt.y+(z-kt.x)/(Zt.x-kt.x)*(Zt.y-kt.y))._round()),kt.y<Q&&Zt.y<Q||(kt.y<Q?kt=new i(kt.x+(Q-kt.y)/(Zt.y-kt.y)*(Zt.x-kt.x),Q)._round():Zt.y<Q&&(Zt=new i(kt.x+(Q-kt.y)/(Zt.y-kt.y)*(Zt.x-kt.x),Q)._round()),kt.x>=he&&Zt.x>=he||(kt.x>=he?kt=new i(he,kt.y+(he-kt.x)/(Zt.x-kt.x)*(Zt.y-kt.y))._round():Zt.x>=he&&(Zt=new i(he,kt.y+(he-kt.x)/(Zt.x-kt.x)*(Zt.y-kt.y))._round()),kt.y>=xe&&Zt.y>=xe||(kt.y>=xe?kt=new i(kt.x+(xe-kt.y)/(Zt.y-kt.y)*(Zt.x-kt.x),xe)._round():Zt.y>=xe&&(Zt=new i(kt.x+(xe-kt.y)/(Zt.y-kt.y)*(Zt.x-kt.x),xe)._round()),lt&&kt.equals(lt[lt.length-1])||Se.push(lt=[kt]),lt.push(Zt)))))}return Se}function kg(D,z,Q,he){var xe=[],Se=D.image,ze=Se.pixelRatio,Ze=Se.paddedRect.w-2,lt=Se.paddedRect.h-2,_t=D.right-D.left,kt=D.bottom-D.top,Zt=Se.stretchX||[[0,Ze]],sn=Se.stretchY||[[0,lt]],en=function(Ia,uo){return Ia+uo[1]-uo[0]},xn=Zt.reduce(en,0),Fn=sn.reduce(en,0),Gn=Ze-xn,qn=lt-Fn,ar=0,lr=xn,hr=0,Lr=Fn,jr=0,li=Gn,ai=0,gi=qn;if(Se.content&&he){var Ii=Se.content;ar=bd(Zt,0,Ii[0]),hr=bd(sn,0,Ii[1]),lr=bd(Zt,Ii[0],Ii[2]),Lr=bd(sn,Ii[1],Ii[3]),jr=Ii[0]-ar,ai=Ii[1]-hr,li=Ii[2]-Ii[0]-lr,gi=Ii[3]-Ii[1]-Lr}var Li=function(Ia,uo,go,Eo){var mo=Zc(Ia.stretch-ar,lr,_t,D.left),es=_d(Ia.fixed-jr,li,Ia.stretch,xn),vo=Zc(uo.stretch-hr,Lr,kt,D.top),Ws=_d(uo.fixed-ai,gi,uo.stretch,Fn),xs=Zc(go.stretch-ar,lr,_t,D.left),js=_d(go.fixed-jr,li,go.stretch,xn),yl=Zc(Eo.stretch-hr,Lr,kt,D.top),Ys=_d(Eo.fixed-ai,gi,Eo.stretch,Fn),ts=new i(mo,vo),Cs=new i(xs,vo),fs=new i(xs,yl),hs=new i(mo,yl),Ma=new i(es/ze,Ws/ze),Va=new i(js/ze,Ys/ze),Ko=z*Math.PI/180;if(Ko){var Jo=Math.sin(Ko),eo=Math.cos(Ko),Bo=[eo,-Jo,Jo,eo];ts._matMult(Bo),Cs._matMult(Bo),hs._matMult(Bo),fs._matMult(Bo)}var $a=Ia.stretch+Ia.fixed,bl=uo.stretch+uo.fixed;return{tl:ts,tr:Cs,bl:hs,br:fs,tex:{x:Se.paddedRect.x+1+$a,y:Se.paddedRect.y+1+bl,w:go.stretch+go.fixed-$a,h:Eo.stretch+Eo.fixed-bl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ma,pixelOffsetBR:Va,minFontScaleX:li/ze/_t,minFontScaleY:gi/ze/kt,isSDF:Q}};if(he&&(Se.stretchX||Se.stretchY))for(var Ti=qp(Zt,Gn,xn),Bi=qp(sn,qn,Fn),ji=0;ji<Ti.length-1;ji++)for(var Pi=Ti[ji],za=Ti[ji+1],Pa=0;Pa<Bi.length-1;Pa++)xe.push(Li(Pi,Bi[Pa],za,Bi[Pa+1]));else xe.push(Li({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ze+1},{fixed:0,stretch:lt+1}));return xe}function bd(D,z,Q){for(var he=0,xe=0,Se=D;xe<Se.length;xe+=1){var ze=Se[xe];he+=Math.max(z,Math.min(Q,ze[1]))-Math.max(z,Math.min(Q,ze[0]))}return he}function qp(D,z,Q){for(var he=[{fixed:-1,stretch:0}],xe=0,Se=D;xe<Se.length;xe+=1){var ze=Se[xe],Ze=ze[0],lt=ze[1],_t=he[he.length-1];he.push({fixed:Ze-_t.stretch,stretch:_t.stretch}),he.push({fixed:Ze-_t.stretch,stretch:_t.stretch+(lt-Ze)})}return he.push({fixed:z+1,stretch:Q}),he}function Zc(D,z,Q,he){return D/z*Q+he}function _d(D,z,Q,he){return D-z*Q/he}var Lf=function(D,z,Q,he,xe,Se,ze,Ze,lt,_t){if(this.boxStartIndex=D.length,lt){var kt=Se.top,Zt=Se.bottom,sn=Se.collisionPadding;sn&&(kt-=sn[1],Zt+=sn[3]);var en=Zt-kt;en>0&&(en=Math.max(10,en),this.circleDiameter=en)}else{var xn=Se.top*ze-Ze,Fn=Se.bottom*ze+Ze,Gn=Se.left*ze-Ze,qn=Se.right*ze+Ze,ar=Se.collisionPadding;if(ar&&(Gn-=ar[0]*ze,xn-=ar[1]*ze,qn+=ar[2]*ze,Fn+=ar[3]*ze),_t){var lr=new i(Gn,xn),hr=new i(qn,xn),Lr=new i(Gn,Fn),jr=new i(qn,Fn),li=_t*Math.PI/180;lr._rotate(li),hr._rotate(li),Lr._rotate(li),jr._rotate(li),Gn=Math.min(lr.x,hr.x,Lr.x,jr.x),qn=Math.max(lr.x,hr.x,Lr.x,jr.x),xn=Math.min(lr.y,hr.y,Lr.y,jr.y),Fn=Math.max(lr.y,hr.y,Lr.y,jr.y)}D.emplaceBack(z.x,z.y,Gn,xn,qn,Fn,Q,he,xe)}this.boxEndIndex=D.length},Pf=function(D,z){if(void 0===D&&(D=[]),void 0===z&&(z=Bs),this.data=D,this.length=this.data.length,this.compare=z,this.length>0)for(var Q=(this.length>>1)-1;Q>=0;Q--)this._down(Q)};function Bs(D,z){return D<z?-1:D>z?1:0}function ly(D,z,Q){void 0===z&&(z=1),void 0===Q&&(Q=!1);for(var he=1/0,xe=1/0,Se=-1/0,ze=-1/0,Ze=D[0],lt=0;lt<Ze.length;lt++){var _t=Ze[lt];(!lt||_t.x<he)&&(he=_t.x),(!lt||_t.y<xe)&&(xe=_t.y),(!lt||_t.x>Se)&&(Se=_t.x),(!lt||_t.y>ze)&&(ze=_t.y)}var sn=Math.min(Se-he,ze-xe),en=sn/2,xn=new Pf([],uy);if(0===sn)return new i(he,xe);for(var Fn=he;Fn<Se;Fn+=sn)for(var Gn=xe;Gn<ze;Gn+=sn)xn.push(new wc(Fn+en,Gn+en,en,D));for(var qn=function(hr){for(var Lr=0,jr=0,li=0,ai=hr[0],gi=0,Ii=ai.length,Li=Ii-1;gi<Ii;Li=gi++){var Ti=ai[gi],Bi=ai[Li],ji=Ti.x*Bi.y-Bi.x*Ti.y;jr+=(Ti.x+Bi.x)*ji,li+=(Ti.y+Bi.y)*ji,Lr+=3*ji}return new wc(jr/Lr,li/Lr,0,hr)}(D),ar=xn.length;xn.length;){var lr=xn.pop();(lr.d>qn.d||!qn.d)&&(qn=lr,Q&&console.log("found best %d after %d probes",Math.round(1e4*lr.d)/1e4,ar)),lr.max-qn.d<=z||(xn.push(new wc(lr.p.x-(en=lr.h/2),lr.p.y-en,en,D)),xn.push(new wc(lr.p.x+en,lr.p.y-en,en,D)),xn.push(new wc(lr.p.x-en,lr.p.y+en,en,D)),xn.push(new wc(lr.p.x+en,lr.p.y+en,en,D)),ar+=4)}return Q&&(console.log("num probes: "+ar),console.log("best distance: "+qn.d)),qn.p}function uy(D,z){return z.max-D.max}function wc(D,z,Q,he){this.p=new i(D,z),this.h=Q,this.d=function(xe,Se){for(var ze=!1,Ze=1/0,lt=0;lt<Se.length;lt++)for(var _t=Se[lt],kt=0,Zt=_t.length,sn=Zt-1;kt<Zt;sn=kt++){var en=_t[kt],xn=_t[sn];en.y>xe.y!=xn.y>xe.y&&xe.x<(xn.x-en.x)*(xe.y-en.y)/(xn.y-en.y)+en.x&&(ze=!ze),Ze=Math.min(Ze,$u(xe,en,xn))}return(ze?1:-1)*Math.sqrt(Ze)}(this.p,he),this.max=this.d+this.h*Math.SQRT2}Pf.prototype.push=function(D){this.data.push(D),this.length++,this._up(this.length-1)},Pf.prototype.pop=function(){if(0!==this.length){var D=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),D}},Pf.prototype.peek=function(){return this.data[0]},Pf.prototype._up=function(D){for(var z=this.data,Q=this.compare,he=z[D];D>0;){var xe=D-1>>1,Se=z[xe];if(Q(he,Se)>=0)break;z[D]=Se,D=xe}z[D]=he},Pf.prototype._down=function(D){for(var z=this.data,Q=this.compare,he=this.length>>1,xe=z[D];D<he;){var Se=1+(D<<1),ze=z[Se],Ze=Se+1;if(Ze<this.length&&Q(z[Ze],ze)<0&&(Se=Ze,ze=z[Ze]),Q(ze,xe)>=0)break;z[D]=ze,D=Se}z[D]=xe};var xd=Number.POSITIVE_INFINITY;function Eg(D,z){return z[1]!==xd?function(Q,he,xe){var Se=0,ze=0;switch(he=Math.abs(he),xe=Math.abs(xe),Q){case"top-right":case"top-left":case"top":ze=xe-7;break;case"bottom-right":case"bottom-left":case"bottom":ze=7-xe}switch(Q){case"top-right":case"bottom-right":case"right":Se=-he;break;case"top-left":case"bottom-left":case"left":Se=he}return[Se,ze]}(D,z[0],z[1]):function(Q,he){var xe=0,Se=0;he<0&&(he=0);var ze=he/Math.sqrt(2);switch(Q){case"top-right":case"top-left":Se=ze-7;break;case"bottom-right":case"bottom-left":Se=7-ze;break;case"bottom":Se=7-he;break;case"top":Se=he-7}switch(Q){case"top-right":case"bottom-right":xe=-ze;break;case"top-left":case"bottom-left":xe=ze;break;case"left":xe=he;break;case"right":xe=-he}return[xe,Se]}(D,z[0])}function Gp(D){switch(D){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Sg(D,z,Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn){var Fn=function(hr,Lr,jr,li,ai,gi,Ii,Li){for(var Ti=li.layout.get("text-rotate").evaluate(gi,{})*Math.PI/180,Bi=[],ji=0,Pi=Lr.positionedLines;ji<Pi.length;ji+=1)for(var za=Pi[ji],Pa=0,ja=za.positionedGlyphs;Pa<ja.length;Pa+=1){var Ki=ja[Pa];if(Ki.rect){var Ia=Ki.rect||{},uo=4,go=!0,Eo=1,mo=0,es=(ai||Li)&&Ki.vertical,vo=Ki.metrics.advance*Ki.scale/2;if(Li&&Lr.verticalizable&&(mo=za.lineOffset/2-(Ki.imageName?-(24-Ki.metrics.width*Ki.scale)/2:24*(Ki.scale-1))),Ki.imageName){var js=Ii[Ki.imageName];go=js.sdf,uo=1/(Eo=js.pixelRatio)}var yl=ai?[Ki.x+vo,Ki.y]:[0,0],Ys=ai?[0,0]:[Ki.x+vo+jr[0],Ki.y+jr[1]-mo],ts=[0,0];es&&(ts=Ys,Ys=[0,0]);var Cs=(Ki.metrics.left-uo)*Ki.scale-vo+Ys[0],fs=(-Ki.metrics.top-uo)*Ki.scale+Ys[1],hs=Cs+Ia.w*Ki.scale/Eo,Ma=fs+Ia.h*Ki.scale/Eo,Va=new i(Cs,fs),Ko=new i(hs,fs),Jo=new i(Cs,Ma),eo=new i(hs,Ma);if(es){var Bo=new i(-vo,vo- -17),$a=-Math.PI/2,Qo=12-vo,Fl=new i(22-Qo,-(Ki.imageName?Qo:0)),nl=new(Function.prototype.bind.apply(i,[null].concat(ts)));Va._rotateAround($a,Bo)._add(Fl)._add(nl),Ko._rotateAround($a,Bo)._add(Fl)._add(nl),Jo._rotateAround($a,Bo)._add(Fl)._add(nl),eo._rotateAround($a,Bo)._add(Fl)._add(nl)}if(Ti){var cu=Math.sin(Ti),tc=Math.cos(Ti),Ds=[tc,-cu,cu,tc];Va._matMult(Ds),Ko._matMult(Ds),Jo._matMult(Ds),eo._matMult(Ds)}var bu=new i(0,0),la=new i(0,0);Bi.push({tl:Va,tr:Ko,bl:Jo,br:eo,tex:Ia,writingMode:Lr.writingMode,glyphOffset:yl,sectionIndex:Ki.sectionIndex,isSDF:go,pixelOffsetTL:bu,pixelOffsetBR:la,minFontScaleX:0,minFontScaleY:0})}}return Bi}(0,Q,Ze,xe,Se,ze,he,D.allowVerticalPlacement),Gn=D.textSizeData,qn=null;"source"===Gn.kind?(qn=[128*xe.layout.get("text-size").evaluate(ze,{})])[0]>32640&&I(D.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Gn.kind&&((qn=[128*en.compositeTextSizes[0].evaluate(ze,{},xn),128*en.compositeTextSizes[1].evaluate(ze,{},xn)])[0]>32640||qn[1]>32640)&&I(D.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),D.addSymbols(D.text,Fn,qn,Ze,Se,ze,_t,z,lt.lineStartIndex,lt.lineLength,sn,xn);for(var ar=0,lr=kt;ar<lr.length;ar+=1)Zt[lr[ar]]=D.text.placedSymbolArray.length-1;return 4*Fn.length}function Cg(D){for(var z in D)return D[z];return null}function cy(D,z,Q,he){var xe=D.compareText;if(z in xe){for(var Se=xe[z],ze=Se.length-1;ze>=0;ze--)if(he.dist(Se[ze])<Q)return!0}else xe[z]=[];return xe[z].push(he),!1}var B_=qc.VectorTileFeature.types,j_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tc(D,z,Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn){var en=Ze?Math.min(32640,Math.round(Ze[0])):0,xn=Ze?Math.min(32640,Math.round(Ze[1])):0;D.emplaceBack(z,Q,Math.round(32*he),Math.round(32*xe),Se,ze,(en<<1)+(lt?1:0),xn,16*_t,16*kt,256*Zt,256*sn)}function vl(D,z,Q){D.emplaceBack(z.x,z.y,Q),D.emplaceBack(z.x,z.y,Q),D.emplaceBack(z.x,z.y,Q),D.emplaceBack(z.x,z.y,Q)}function Wp(D){for(var z=0,Q=D.sections;z<Q.length;z+=1)if(yi(Q[z].text))return!0;return!1}var Xc=function(D){this.layoutVertexArray=new iu,this.indexArray=new Xo,this.programConfigurations=D,this.segments=new Yt,this.dynamicLayoutVertexArray=new Qs,this.opacityVertexArray=new cl,this.placedSymbolArray=new $e};Xc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Xc.prototype.upload=function(D,z,Q,he){this.isEmpty()||(Q&&(this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,_c.members),this.indexBuffer=D.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=D.createVertexBuffer(this.dynamicLayoutVertexArray,vh.members,!0),this.opacityVertexBuffer=D.createVertexBuffer(this.opacityVertexArray,j_,!0),this.opacityVertexBuffer.itemSize=1),(Q||he)&&this.programConfigurations.upload(D))},Xc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},mr("SymbolBuffers",Xc);var Of=function(D,z,Q){this.layoutVertexArray=new D,this.layoutAttributes=z,this.indexArray=new Q,this.segments=new Yt,this.collisionVertexArray=new yu};Of.prototype.upload=function(D){this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=D.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=D.createVertexBuffer(this.collisionVertexArray,Xv.members,!0)},Of.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},mr("CollisionBuffers",Of);var ya=function(D){this.collisionBoxArray=D.collisionBoxArray,this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(ze){return ze.id}),this.index=D.index,this.pixelRatio=D.pixelRatio,this.sourceLayerIndex=D.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Mf([]),this.placementViewportMatrix=Mf([]);var z=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tg(this.zoom,z["text-size"]),this.iconSizeData=Tg(this.zoom,z["icon-size"]);var Q=this.layers[0].layout,he=Q.get("symbol-sort-key"),xe=Q.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==xe&&void 0!==he.constantOr(1),this.sortFeaturesByY=("viewport-y"===xe||"auto"===xe&&!this.sortFeaturesByKey)&&(Q.get("text-allow-overlap")||Q.get("icon-allow-overlap")||Q.get("text-ignore-placement")||Q.get("icon-ignore-placement")),"point"===Q.get("symbol-placement")&&(this.writingModes=Q.get("text-writing-mode").map(function(ze){return $l[ze]})),this.stateDependentLayerIds=this.layers.filter(function(ze){return ze.isStateDependent()}).map(function(ze){return ze.id}),this.sourceID=D.sourceID};ya.prototype.createArrays=function(){this.text=new Xc(new Mo(_c.members,this.layers,this.zoom,function(D){return/^text/.test(D)})),this.icon=new Xc(new Mo(_c.members,this.layers,this.zoom,function(D){return/^icon/.test(D)})),this.glyphOffsetArray=new Ot,this.lineVertexArray=new zt,this.symbolInstances=new dt},ya.prototype.calculateGlyphDependencies=function(D,z,Q,he,xe){for(var Se=0;Se<D.length;Se++)if(z[D.charCodeAt(Se)]=!0,(Q||he)&&xe){var ze=sd[D.charAt(Se)];ze&&(z[ze.charCodeAt(0)]=!0)}},ya.prototype.populate=function(D,z,Q){var he=this.layers[0],xe=he.layout,Se=xe.get("text-font"),ze=xe.get("text-field"),Ze=xe.get("icon-image"),lt=("constant"!==ze.value.kind||ze.value.value instanceof Dn&&!ze.value.value.isEmpty()||ze.value.value.toString().length>0)&&("constant"!==Se.value.kind||Se.value.value.length>0),_t="constant"!==Ze.value.kind||!!Ze.value.value||Object.keys(Ze.parameters).length>0,kt=xe.get("symbol-sort-key");if(this.features=[],lt||_t){for(var Zt=z.iconDependencies,sn=z.glyphDependencies,en=z.availableImages,xn=new Qa(this.zoom),Fn=0,Gn=D;Fn<Gn.length;Fn+=1){var qn=Gn[Fn],ar=qn.feature,lr=qn.id,hr=qn.index,Lr=qn.sourceLayerIndex,jr=he._featureFilter.needGeometry,li={type:ar.type,id:lr,properties:ar.properties,geometry:jr?xo(ar):[]};if(he._featureFilter.filter(xn,li,Q)){jr||(li.geometry=xo(ar));var ai=void 0;if(lt){var gi=he.getValueAndResolveTokens("text-field",li,Q,en),Ii=Dn.factory(gi);Wp(Ii)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Yo()||this.hasRTLText&&Na.isParsed())&&(ai=Kv(Ii,he,li))}var Li=void 0;if(_t){var Ti=he.getValueAndResolveTokens("icon-image",li,Q,en);Li=Ti instanceof Pn?Ti:Pn.fromString(Ti)}if(ai||Li){var Bi=this.sortFeaturesByKey?kt.evaluate(li,{},Q):void 0,ji={id:lr,text:ai,icon:Li,index:hr,sourceLayerIndex:Lr,geometry:xo(ar),properties:ar.properties,type:B_[ar.type],sortKey:Bi};if(this.features.push(ji),Li&&(Zt[Li.name]=!0),ai){var Pi=Se.evaluate(li,{},Q).join(","),za="map"===xe.get("text-rotation-alignment")&&"point"!==xe.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf($l.vertical)>=0;for(var Pa=0,ja=ai.sections;Pa<ja.length;Pa+=1){var Ki=ja[Pa];if(Ki.image)Zt[Ki.image.name]=!0;else{var Ia=wa(ai.toString()),uo=Ki.fontStack||Pi,go=sn[uo]=sn[uo]||{};this.calculateGlyphDependencies(Ki.text,go,za,this.allowVerticalPlacement,Ia)}}}}}}"line"===xe.get("symbol-placement")&&(this.features=function(Eo){var mo={},es={},vo=[],Ws=0;function xs(eo){vo.push(Eo[eo]),Ws++}function js(eo,Bo,$a){var Qo=es[eo];return delete es[eo],es[Bo]=Qo,vo[Qo].geometry[0].pop(),vo[Qo].geometry[0]=vo[Qo].geometry[0].concat($a[0]),Qo}function yl(eo,Bo,$a){var Qo=mo[Bo];return delete mo[Bo],mo[eo]=Qo,vo[Qo].geometry[0].shift(),vo[Qo].geometry[0]=$a[0].concat(vo[Qo].geometry[0]),Qo}function Ys(eo,Bo,$a){var Qo=$a?Bo[0][Bo[0].length-1]:Bo[0][0];return eo+":"+Qo.x+":"+Qo.y}for(var ts=0;ts<Eo.length;ts++){var Cs=Eo[ts],fs=Cs.geometry,hs=Cs.text?Cs.text.toString():null;if(hs){var Ma=Ys(hs,fs),Va=Ys(hs,fs,!0);if(Ma in es&&Va in mo&&es[Ma]!==mo[Va]){var Ko=yl(Ma,Va,fs),Jo=js(Ma,Va,vo[Ko].geometry);delete mo[Ma],delete es[Va],es[Ys(hs,vo[Jo].geometry,!0)]=Jo,vo[Ko].geometry=null}else Ma in es?js(Ma,Va,fs):Va in mo?yl(Ma,Va,fs):(xs(ts),mo[Ma]=Ws-1,es[Va]=Ws-1)}else xs(ts)}return vo.filter(function(eo){return eo.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Eo,mo){return Eo.sortKey-mo.sortKey})}},ya.prototype.update=function(D,z,Q){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(D,z,this.layers,Q),this.icon.programConfigurations.updatePaintArrays(D,z,this.layers,Q))},ya.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},ya.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ya.prototype.upload=function(D){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(D),this.iconCollisionBox.upload(D)),this.text.upload(D,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(D,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ya.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ya.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ya.prototype.addToLineVertexArray=function(D,z){var Q=this.lineVertexArray.length;if(void 0!==D.segment){for(var he=D.dist(z[D.segment+1]),xe=D.dist(z[D.segment]),Se={},ze=D.segment+1;ze<z.length;ze++)Se[ze]={x:z[ze].x,y:z[ze].y,tileUnitDistanceFromAnchor:he},ze<z.length-1&&(he+=z[ze+1].dist(z[ze]));for(var Ze=D.segment||0;Ze>=0;Ze--)Se[Ze]={x:z[Ze].x,y:z[Ze].y,tileUnitDistanceFromAnchor:xe},Ze>0&&(xe+=z[Ze-1].dist(z[Ze]));for(var lt=0;lt<z.length;lt++){var _t=Se[lt];this.lineVertexArray.emplaceBack(_t.x,_t.y,_t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Q,lineLength:this.lineVertexArray.length-Q}},ya.prototype.addSymbols=function(D,z,Q,he,xe,Se,ze,Ze,lt,_t,kt,Zt){for(var sn=D.indexArray,en=D.layoutVertexArray,xn=D.segments.prepareSegment(4*z.length,en,sn,Se.sortKey),Fn=this.glyphOffsetArray.length,Gn=xn.vertexLength,qn=this.allowVerticalPlacement&&ze===$l.vertical?Math.PI/2:0,ar=Se.text&&Se.text.sections,lr=0;lr<z.length;lr++){var hr=z[lr],Lr=hr.tl,jr=hr.tr,li=hr.bl,ai=hr.br,gi=hr.tex,Ii=hr.pixelOffsetTL,Li=hr.pixelOffsetBR,Ti=hr.minFontScaleX,Bi=hr.minFontScaleY,ji=hr.glyphOffset,Pi=hr.isSDF,za=hr.sectionIndex,Pa=xn.vertexLength,ja=ji[1];Tc(en,Ze.x,Ze.y,Lr.x,ja+Lr.y,gi.x,gi.y,Q,Pi,Ii.x,Ii.y,Ti,Bi),Tc(en,Ze.x,Ze.y,jr.x,ja+jr.y,gi.x+gi.w,gi.y,Q,Pi,Li.x,Ii.y,Ti,Bi),Tc(en,Ze.x,Ze.y,li.x,ja+li.y,gi.x,gi.y+gi.h,Q,Pi,Ii.x,Li.y,Ti,Bi),Tc(en,Ze.x,Ze.y,ai.x,ja+ai.y,gi.x+gi.w,gi.y+gi.h,Q,Pi,Li.x,Li.y,Ti,Bi),vl(D.dynamicLayoutVertexArray,Ze,qn),sn.emplaceBack(Pa,Pa+1,Pa+2),sn.emplaceBack(Pa+1,Pa+2,Pa+3),xn.vertexLength+=4,xn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ji[0]),lr!==z.length-1&&za===z[lr+1].sectionIndex||D.programConfigurations.populatePaintArrays(en.length,Se,Se.index,{},Zt,ar&&ar[za])}D.placedSymbolArray.emplaceBack(Ze.x,Ze.y,Fn,this.glyphOffsetArray.length-Fn,Gn,lt,_t,Ze.segment,Q?Q[0]:0,Q?Q[1]:0,he[0],he[1],ze,0,!1,0,kt)},ya.prototype._addCollisionDebugVertex=function(D,z,Q,he,xe,Se){return z.emplaceBack(0,0),D.emplaceBack(Q.x,Q.y,he,xe,Math.round(Se.x),Math.round(Se.y))},ya.prototype.addCollisionDebugVertices=function(D,z,Q,he,xe,Se,ze){var Ze=xe.segments.prepareSegment(4,xe.layoutVertexArray,xe.indexArray),lt=Ze.vertexLength,_t=xe.layoutVertexArray,kt=xe.collisionVertexArray,Zt=ze.anchorX,sn=ze.anchorY;this._addCollisionDebugVertex(_t,kt,Se,Zt,sn,new i(D,z)),this._addCollisionDebugVertex(_t,kt,Se,Zt,sn,new i(Q,z)),this._addCollisionDebugVertex(_t,kt,Se,Zt,sn,new i(Q,he)),this._addCollisionDebugVertex(_t,kt,Se,Zt,sn,new i(D,he)),Ze.vertexLength+=4;var en=xe.indexArray;en.emplaceBack(lt,lt+1),en.emplaceBack(lt+1,lt+2),en.emplaceBack(lt+2,lt+3),en.emplaceBack(lt+3,lt),Ze.primitiveLength+=4},ya.prototype.addDebugCollisionBoxes=function(D,z,Q,he){for(var xe=D;xe<z;xe++){var Se=this.collisionBoxArray.get(xe);this.addCollisionDebugVertices(Se.x1,Se.y1,Se.x2,Se.y2,he?this.textCollisionBox:this.iconCollisionBox,Se.anchorPoint,Q)}},ya.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Of(Pl,$v.members,q),this.iconCollisionBox=new Of(Pl,$v.members,q);for(var D=0;D<this.symbolInstances.length;D++){var z=this.symbolInstances.get(D);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},ya.prototype._deserializeCollisionBoxesForSymbol=function(D,z,Q,he,xe,Se,ze,Ze,lt){for(var _t={},kt=z;kt<Q;kt++){var Zt=D.get(kt);_t.textBox={x1:Zt.x1,y1:Zt.y1,x2:Zt.x2,y2:Zt.y2,anchorPointX:Zt.anchorPointX,anchorPointY:Zt.anchorPointY},_t.textFeatureIndex=Zt.featureIndex;break}for(var sn=he;sn<xe;sn++){var en=D.get(sn);_t.verticalTextBox={x1:en.x1,y1:en.y1,x2:en.x2,y2:en.y2,anchorPointX:en.anchorPointX,anchorPointY:en.anchorPointY},_t.verticalTextFeatureIndex=en.featureIndex;break}for(var xn=Se;xn<ze;xn++){var Fn=D.get(xn);_t.iconBox={x1:Fn.x1,y1:Fn.y1,x2:Fn.x2,y2:Fn.y2,anchorPointX:Fn.anchorPointX,anchorPointY:Fn.anchorPointY},_t.iconFeatureIndex=Fn.featureIndex;break}for(var Gn=Ze;Gn<lt;Gn++){var qn=D.get(Gn);_t.verticalIconBox={x1:qn.x1,y1:qn.y1,x2:qn.x2,y2:qn.y2,anchorPointX:qn.anchorPointX,anchorPointY:qn.anchorPointY},_t.verticalIconFeatureIndex=qn.featureIndex;break}return _t},ya.prototype.deserializeCollisionBoxes=function(D){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var Q=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(D,Q.textBoxStartIndex,Q.textBoxEndIndex,Q.verticalTextBoxStartIndex,Q.verticalTextBoxEndIndex,Q.iconBoxStartIndex,Q.iconBoxEndIndex,Q.verticalIconBoxStartIndex,Q.verticalIconBoxEndIndex))}},ya.prototype.hasTextData=function(){return this.text.segments.get().length>0},ya.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ya.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ya.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ya.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ya.prototype.addIndicesForPlacedSymbol=function(D,z){for(var Q=D.placedSymbolArray.get(z),he=Q.vertexStartIndex+4*Q.numGlyphs,xe=Q.vertexStartIndex;xe<he;xe+=4)D.indexArray.emplaceBack(xe,xe+1,xe+2),D.indexArray.emplaceBack(xe+1,xe+2,xe+3)},ya.prototype.getSortedSymbolIndexes=function(D){if(this.sortedAngle===D&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var z=Math.sin(D),Q=Math.cos(D),he=[],xe=[],Se=[],ze=0;ze<this.symbolInstances.length;++ze){Se.push(ze);var Ze=this.symbolInstances.get(ze);he.push(0|Math.round(z*Ze.anchorX+Q*Ze.anchorY)),xe.push(Ze.featureIndex)}return Se.sort(function(lt,_t){return he[lt]-he[_t]||xe[_t]-xe[lt]}),Se},ya.prototype.addToSortKeyRanges=function(D,z){var Q=this.sortKeyRanges[this.sortKeyRanges.length-1];Q&&Q.sortKey===z?Q.symbolInstanceEnd=D+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:D,symbolInstanceEnd:D+1})},ya.prototype.sortFeatures=function(D){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==D&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(D),this.sortedAngle=D,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Q=0,he=this.symbolInstanceIndexes;Q<he.length;Q+=1){var Se=this.symbolInstances.get(he[Q]);this.featureSortOrder.push(Se.featureIndex),[Se.rightJustifiedTextSymbolIndex,Se.centerJustifiedTextSymbolIndex,Se.leftJustifiedTextSymbolIndex].forEach(function(ze,Ze,lt){ze>=0&&lt.indexOf(ze)===Ze&&z.addIndicesForPlacedSymbol(z.text,ze)}),Se.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Se.verticalPlacedTextSymbolIndex),Se.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Se.placedIconSymbolIndex),Se.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Se.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},mr("SymbolBucket",ya,{omit:["layers","collisionBoxArray","features","compareText"]}),ya.MAX_GLYPHS=65535,ya.addDynamicAttributes=vl;var bh=new Zi({"symbol-placement":new Oi(He.layout_symbol["symbol-placement"]),"symbol-spacing":new Oi(He.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Oi(He.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new $i(He.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Oi(He.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Oi(He.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Oi(He.layout_symbol["icon-ignore-placement"]),"icon-optional":new Oi(He.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Oi(He.layout_symbol["icon-rotation-alignment"]),"icon-size":new $i(He.layout_symbol["icon-size"]),"icon-text-fit":new Oi(He.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Oi(He.layout_symbol["icon-text-fit-padding"]),"icon-image":new $i(He.layout_symbol["icon-image"]),"icon-rotate":new $i(He.layout_symbol["icon-rotate"]),"icon-padding":new Oi(He.layout_symbol["icon-padding"]),"icon-keep-upright":new Oi(He.layout_symbol["icon-keep-upright"]),"icon-offset":new $i(He.layout_symbol["icon-offset"]),"icon-anchor":new $i(He.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Oi(He.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Oi(He.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Oi(He.layout_symbol["text-rotation-alignment"]),"text-field":new $i(He.layout_symbol["text-field"]),"text-font":new $i(He.layout_symbol["text-font"]),"text-size":new $i(He.layout_symbol["text-size"]),"text-max-width":new $i(He.layout_symbol["text-max-width"]),"text-line-height":new Oi(He.layout_symbol["text-line-height"]),"text-letter-spacing":new $i(He.layout_symbol["text-letter-spacing"]),"text-justify":new $i(He.layout_symbol["text-justify"]),"text-radial-offset":new $i(He.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Oi(He.layout_symbol["text-variable-anchor"]),"text-anchor":new $i(He.layout_symbol["text-anchor"]),"text-max-angle":new Oi(He.layout_symbol["text-max-angle"]),"text-writing-mode":new Oi(He.layout_symbol["text-writing-mode"]),"text-rotate":new $i(He.layout_symbol["text-rotate"]),"text-padding":new Oi(He.layout_symbol["text-padding"]),"text-keep-upright":new Oi(He.layout_symbol["text-keep-upright"]),"text-transform":new $i(He.layout_symbol["text-transform"]),"text-offset":new $i(He.layout_symbol["text-offset"]),"text-allow-overlap":new Oi(He.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Oi(He.layout_symbol["text-ignore-placement"]),"text-optional":new Oi(He.layout_symbol["text-optional"])}),_h={paint:new Zi({"icon-opacity":new $i(He.paint_symbol["icon-opacity"]),"icon-color":new $i(He.paint_symbol["icon-color"]),"icon-halo-color":new $i(He.paint_symbol["icon-halo-color"]),"icon-halo-width":new $i(He.paint_symbol["icon-halo-width"]),"icon-halo-blur":new $i(He.paint_symbol["icon-halo-blur"]),"icon-translate":new Oi(He.paint_symbol["icon-translate"]),"icon-translate-anchor":new Oi(He.paint_symbol["icon-translate-anchor"]),"text-opacity":new $i(He.paint_symbol["text-opacity"]),"text-color":new $i(He.paint_symbol["text-color"],{runtimeType:Dt,getOverride:function(D){return D.textColor},hasOverride:function(D){return!!D.textColor}}),"text-halo-color":new $i(He.paint_symbol["text-halo-color"]),"text-halo-width":new $i(He.paint_symbol["text-halo-width"]),"text-halo-blur":new $i(He.paint_symbol["text-halo-blur"]),"text-translate":new Oi(He.paint_symbol["text-translate"]),"text-translate-anchor":new Oi(He.paint_symbol["text-translate-anchor"])}),layout:bh},Rf=function(D){this.type=D.property.overrides?D.property.overrides.runtimeType:Kt,this.defaultValue=D};Rf.prototype.evaluate=function(D){if(D.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(D.formattedSection))return z.getOverride(D.formattedSection)}return D.feature&&D.featureState?this.defaultValue.evaluate(D.feature,D.featureState):this.defaultValue.property.specification.default},Rf.prototype.eachChild=function(D){this.defaultValue.isConstant()||D(this.defaultValue.value._styleExpression.expression)},Rf.prototype.outputDefined=function(){return!1},Rf.prototype.serialize=function(){return null},mr("FormatSectionOverride",Rf,{omit:["defaultValue"]});var fy=function(D){function z(Q){D.call(this,Q,_h)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.recalculate=function(Q,he){if(D.prototype.recalculate.call(this,Q,he),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var xe=this.layout.get("text-writing-mode");if(xe){for(var Se=[],ze=0,Ze=xe;ze<Ze.length;ze+=1){var lt=Ze[ze];Se.indexOf(lt)<0&&Se.push(lt)}this.layout._values["text-writing-mode"]=Se}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(Q,he,xe,Se){var lt,ze=this.layout.get(Q).evaluate(he,{},xe,Se),Ze=this._unevaluatedLayout._values[Q];return Ze.isDataDriven()||on(Ze.value)||!ze?ze:(lt=he.properties,ze.replace(/{([^{}]+)}/g,function(kt,Zt){return Zt in lt?String(lt[Zt]):""}))},z.prototype.createBucket=function(Q){return new ya(Q)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var Q=0,he=_h.paint.overridableProperties;Q<he.length;Q+=1){var xe=he[Q];if(z.hasPaintOverride(this.layout,xe)){var lt,Se=this.paint.get(xe),ze=new Rf(Se),Ze=new Jt(ze,Se.property.specification);lt="constant"===Se.value.kind||"source"===Se.value.kind?new yn("source",Ze):new An("composite",Ze,Se.value.zoomStops,Se.value._interpolationType),this.paint._values[xe]=new Wa(Se.property,lt,Se.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(Q,he,xe){return!(!this.layout||he.isDataDriven()||xe.isDataDriven())&&z.hasPaintOverride(this.layout,Q)},z.hasPaintOverride=function(Q,he){var xe=Q.get("text-field"),Se=_h.paint.properties[he],ze=!1,Ze=function(kt){for(var Zt=0,sn=kt;Zt<sn.length;Zt+=1)if(Se.overrides&&Se.overrides.hasOverride(sn[Zt]))return void(ze=!0)};if("constant"===xe.value.kind&&xe.value.value instanceof Dn)Ze(xe.value.value.sections);else if("source"===xe.value.kind){var lt=function(kt){ze||(kt instanceof Zr&&er(kt.value)===pt?Ze(kt.value.sections):kt instanceof fr?Ze(kt.sections):kt.eachChild(lt))},_t=xe.value;_t._styleExpression&&lt(_t._styleExpression.expression)}return ze},z}(Al),Dg={paint:new Zi({"background-color":new Oi(He.paint_background["background-color"]),"background-pattern":new gu(He.paint_background["background-pattern"]),"background-opacity":new Oi(He.paint_background["background-opacity"])})},hy=function(D){function z(Q){D.call(this,Q,Dg)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z}(Al),Ig={paint:new Zi({"raster-opacity":new Oi(He.paint_raster["raster-opacity"]),"raster-hue-rotate":new Oi(He.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Oi(He.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Oi(He.paint_raster["raster-brightness-max"]),"raster-saturation":new Oi(He.paint_raster["raster-saturation"]),"raster-contrast":new Oi(He.paint_raster["raster-contrast"]),"raster-resampling":new Oi(He.paint_raster["raster-resampling"]),"raster-fade-duration":new Oi(He.paint_raster["raster-fade-duration"])})},dy=function(D){function z(Q){D.call(this,Q,Ig)}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z}(Al),Lg=function(D){function z(Q){D.call(this,Q,{}),this.implementation=Q}return D&&(z.__proto__=D),(z.prototype=Object.create(D&&D.prototype)).constructor=z,z.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},z.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(Q){this.implementation.onAdd&&this.implementation.onAdd(Q,Q.painter.context.gl)},z.prototype.onRemove=function(Q){this.implementation.onRemove&&this.implementation.onRemove(Q,Q.painter.context.gl)},z}(Al),py={circle:ag,heatmap:kf,hillshade:Nv,fill:N_,"fill-extrusion":Yv,line:Zv,symbol:fy,background:hy,raster:dy},Pg=self.HTMLImageElement,wd=self.HTMLCanvasElement,Og=self.HTMLVideoElement,Rg=self.ImageData,Ff=self.ImageBitmap,$c=function(D,z,Q,he){this.context=D,this.format=Q,this.texture=D.gl.createTexture(),this.update(z,he)};$c.prototype.update=function(D,z,Q){var he=D.width,xe=D.height,Se=!(this.size&&this.size[0]===he&&this.size[1]===xe||Q),ze=this.context,Ze=ze.gl;if(this.useMipmap=Boolean(z&&z.useMipmap),Ze.bindTexture(Ze.TEXTURE_2D,this.texture),ze.pixelStoreUnpackFlipY.set(!1),ze.pixelStoreUnpack.set(1),ze.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ze.RGBA&&(!z||!1!==z.premultiply)),Se)this.size=[he,xe],D instanceof Pg||D instanceof wd||D instanceof Og||D instanceof Rg||Ff&&D instanceof Ff?Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,this.format,Ze.UNSIGNED_BYTE,D):Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,he,xe,0,this.format,Ze.UNSIGNED_BYTE,D.data);else{var lt=Q||{x:0,y:0},_t=lt.x,kt=lt.y;D instanceof Pg||D instanceof wd||D instanceof Og||D instanceof Rg||Ff&&D instanceof Ff?Ze.texSubImage2D(Ze.TEXTURE_2D,0,_t,kt,Ze.RGBA,Ze.UNSIGNED_BYTE,D):Ze.texSubImage2D(Ze.TEXTURE_2D,0,_t,kt,he,xe,Ze.RGBA,Ze.UNSIGNED_BYTE,D.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ze.generateMipmap(Ze.TEXTURE_2D)},$c.prototype.bind=function(D,z,Q){var he=this.context.gl;he.bindTexture(he.TEXTURE_2D,this.texture),Q!==he.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Q=he.LINEAR),D!==this.filter&&(he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,D),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,Q||D),this.filter=D),z!==this.wrap&&(he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,z),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,z),this.wrap=z)},$c.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},$c.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Yp=function(D){var z=this;this._callback=D,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};Yp.prototype.trigger=function(){var D=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){D._triggered=!1,D._callback()},0))},Yp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ru=function(D,z,Q){this.target=D,this.parent=z,this.mapId=Q,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},c(["receive","process"],this),this.invoker=new Yp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?D:self};function Fg(D,z,Q){var he=2*Math.PI*6378137/256/Math.pow(2,Q);return[D*he-2*Math.PI*6378137/2,z*he-2*Math.PI*6378137/2]}Ru.prototype.send=function(D,z,Q,he,xe){var Se=this;void 0===xe&&(xe=!1);var ze=Math.round(1e18*Math.random()).toString(36).substring(0,10);Q&&(this.callbacks[ze]=Q);var Ze=U(this.globalScope)?void 0:[];return this.target.postMessage({id:ze,type:D,hasCallback:!!Q,targetMapId:he,mustQueue:xe,sourceMapId:this.mapId,data:ki(z,Ze)},Ze),{cancel:function(){Q&&delete Se.callbacks[ze],Se.target.postMessage({id:ze,type:"<cancel>",targetMapId:he,sourceMapId:Se.mapId})}}},Ru.prototype.receive=function(D){var z=D.data,Q=z.id;if(Q&&(!z.targetMapId||this.mapId===z.targetMapId))if("<cancel>"===z.type){delete this.tasks[Q];var he=this.cancelCallbacks[Q];delete this.cancelCallbacks[Q],he&&he()}else L()||z.mustQueue?(this.tasks[Q]=z,this.taskQueue.push(Q),this.invoker.trigger()):this.processTask(Q,z)},Ru.prototype.process=function(){if(this.taskQueue.length){var D=this.taskQueue.shift(),z=this.tasks[D];delete this.tasks[D],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(D,z)}},Ru.prototype.processTask=function(D,z){var Q=this;if("<response>"===z.type){var he=this.callbacks[D];delete this.callbacks[D],he&&(z.error?he(Vi(z.error)):he(null,Vi(z.data)))}else{var xe=!1,Se=U(this.globalScope)?void 0:[],ze=z.hasCallback?function(kt,Zt){xe=!0,delete Q.cancelCallbacks[D],Q.target.postMessage({id:D,type:"<response>",sourceMapId:Q.mapId,error:kt?ki(kt):null,data:ki(Zt,Se)},Se)}:function(kt){xe=!0},Ze=null,lt=Vi(z.data);if(this.parent[z.type])Ze=this.parent[z.type](z.sourceMapId,lt,ze);else if(this.parent.getWorkerSource){var _t=z.type.split(".");Ze=this.parent.getWorkerSource(z.sourceMapId,_t[0],lt.source)[_t[1]](lt,ze)}else ze(new Error("Could not find function "+z.type));!xe&&Ze&&Ze.cancel&&(this.cancelCallbacks[D]=Ze.cancel)}},Ru.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var us=function(D,z){D&&(z?this.setSouthWest(D).setNorthEast(z):4===D.length?this.setSouthWest([D[0],D[1]]).setNorthEast([D[2],D[3]]):this.setSouthWest(D[0]).setNorthEast(D[1]))};us.prototype.setNorthEast=function(D){return this._ne=D instanceof zo?new zo(D.lng,D.lat):zo.convert(D),this},us.prototype.setSouthWest=function(D){return this._sw=D instanceof zo?new zo(D.lng,D.lat):zo.convert(D),this},us.prototype.extend=function(D){var z,Q,he=this._sw,xe=this._ne;if(D instanceof zo)z=D,Q=D;else{if(!(D instanceof us))return Array.isArray(D)?4===D.length||D.every(Array.isArray)?this.extend(us.convert(D)):this.extend(zo.convert(D)):this;if(Q=D._ne,!(z=D._sw)||!Q)return this}return he||xe?(he.lng=Math.min(z.lng,he.lng),he.lat=Math.min(z.lat,he.lat),xe.lng=Math.max(Q.lng,xe.lng),xe.lat=Math.max(Q.lat,xe.lat)):(this._sw=new zo(z.lng,z.lat),this._ne=new zo(Q.lng,Q.lat)),this},us.prototype.getCenter=function(){return new zo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},us.prototype.getSouthWest=function(){return this._sw},us.prototype.getNorthEast=function(){return this._ne},us.prototype.getNorthWest=function(){return new zo(this.getWest(),this.getNorth())},us.prototype.getSouthEast=function(){return new zo(this.getEast(),this.getSouth())},us.prototype.getWest=function(){return this._sw.lng},us.prototype.getSouth=function(){return this._sw.lat},us.prototype.getEast=function(){return this._ne.lng},us.prototype.getNorth=function(){return this._ne.lat},us.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},us.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},us.prototype.isEmpty=function(){return!(this._sw&&this._ne)},us.prototype.contains=function(D){var z=zo.convert(D),Q=z.lng,he=z.lat,Se=this._sw.lng<=Q&&Q<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Se=this._sw.lng>=Q&&Q>=this._ne.lng),this._sw.lat<=he&&he<=this._ne.lat&&Se},us.convert=function(D){return!D||D instanceof us?D:new us(D)};var zo=function(D,z){if(isNaN(D)||isNaN(z))throw new Error("Invalid LngLat object: ("+D+", "+z+")");if(this.lng=+D,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};zo.prototype.wrap=function(){return new zo(p(this.lng,-180,180),this.lat)},zo.prototype.toArray=function(){return[this.lng,this.lat]},zo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},zo.prototype.distanceTo=function(D){var z=Math.PI/180,Q=this.lat*z,he=D.lat*z,xe=Math.sin(Q)*Math.sin(he)+Math.cos(Q)*Math.cos(he)*Math.cos((D.lng-this.lng)*z);return 6371008.8*Math.acos(Math.min(xe,1))},zo.prototype.toBounds=function(D){void 0===D&&(D=0);var z=360*D/40075017,Q=z/Math.cos(Math.PI/180*this.lat);return new us(new zo(this.lng-Q,this.lat-z),new zo(this.lng+Q,this.lat+z))},zo.convert=function(D){if(D instanceof zo)return D;if(Array.isArray(D)&&(2===D.length||3===D.length))return new zo(Number(D[0]),Number(D[1]));if(!Array.isArray(D)&&"object"==typeof D&&null!==D)return new zo(Number("lng"in D?D.lng:D.lon),Number(D.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ng=2*Math.PI*6371008.8;function zg(D){return Ng*Math.cos(D*Math.PI/180)}function Zp(D){return(180+D)/360}function Bg(D){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+D*Math.PI/360)))/360}function jg(D,z){return D/zg(z)}function Xp(D){return 360/Math.PI*Math.atan(Math.exp((180-360*D)*Math.PI/180))-90}var Kc=function(D,z,Q){void 0===Q&&(Q=0),this.x=+D,this.y=+z,this.z=+Q};Kc.fromLngLat=function(D,z){void 0===z&&(z=0);var Q=zo.convert(D);return new Kc(Zp(Q.lng),Bg(Q.lat),jg(z,Q.lat))},Kc.prototype.toLngLat=function(){return new zo(360*this.x-180,Xp(this.y))},Kc.prototype.toAltitude=function(){return this.z*zg(Xp(this.y))},Kc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ng*(D=Xp(this.y),1/Math.cos(D*Math.PI/180));var D};var Jc=function(D,z,Q){this.z=D,this.x=z,this.y=Q,this.key=xh(0,D,D,z,Q)};Jc.prototype.equals=function(D){return this.z===D.z&&this.x===D.x&&this.y===D.y},Jc.prototype.url=function(D,z){var Q,he,xe,Se,ze,Ze=(he=this.y,xe=this.z,Se=Fg(256*(Q=this.x),256*(he=Math.pow(2,xe)-he-1),xe),ze=Fg(256*(Q+1),256*(he+1),xe),Se[0]+","+Se[1]+","+ze[0]+","+ze[1]),lt=function(_t,kt,Zt){for(var sn,en="",xn=_t;xn>0;xn--)en+=(kt&(sn=1<<xn-1)?1:0)+(Zt&sn?2:0);return en}(this.z,this.x,this.y);return D[(this.x+this.y)%D.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===z?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",lt).replace("{bbox-epsg-3857}",Ze)},Jc.prototype.getTilePoint=function(D){var z=Math.pow(2,this.z);return new i(8192*(D.x*z-this.x),8192*(D.y*z-this.y))},Jc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Vg=function(D,z){this.wrap=D,this.canonical=z,this.key=xh(D,z.z,z.z,z.x,z.y)},cs=function(D,z,Q,he,xe){this.overscaledZ=D,this.wrap=z,this.canonical=new Jc(Q,+he,+xe),this.key=xh(z,D,Q,he,xe)};function xh(D,z,Q,he,xe){(D*=2)<0&&(D=-1*D-1);var Se=1<<Q;return(Se*Se*D+Se*xe+he).toString(36)+Q.toString(36)+z.toString(36)}cs.prototype.equals=function(D){return this.overscaledZ===D.overscaledZ&&this.wrap===D.wrap&&this.canonical.equals(D.canonical)},cs.prototype.scaledTo=function(D){var z=this.canonical.z-D;return D>this.canonical.z?new cs(D,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new cs(D,this.wrap,D,this.canonical.x>>z,this.canonical.y>>z)},cs.prototype.calculateScaledKey=function(D,z){var Q=this.canonical.z-D;return D>this.canonical.z?xh(this.wrap*+z,D,this.canonical.z,this.canonical.x,this.canonical.y):xh(this.wrap*+z,D,D,this.canonical.x>>Q,this.canonical.y>>Q)},cs.prototype.isChildOf=function(D){if(D.wrap!==this.wrap)return!1;var z=this.canonical.z-D.canonical.z;return 0===D.overscaledZ||D.overscaledZ<this.overscaledZ&&D.canonical.x===this.canonical.x>>z&&D.canonical.y===this.canonical.y>>z},cs.prototype.children=function(D){if(this.overscaledZ>=D)return[new cs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,Q=2*this.canonical.x,he=2*this.canonical.y;return[new cs(z,this.wrap,z,Q,he),new cs(z,this.wrap,z,Q+1,he),new cs(z,this.wrap,z,Q,he+1),new cs(z,this.wrap,z,Q+1,he+1)]},cs.prototype.isLessThan=function(D){return this.wrap<D.wrap||!(this.wrap>D.wrap)&&(this.overscaledZ<D.overscaledZ||!(this.overscaledZ>D.overscaledZ)&&(this.canonical.x<D.canonical.x||!(this.canonical.x>D.canonical.x)&&this.canonical.y<D.canonical.y))},cs.prototype.wrapped=function(){return new cs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},cs.prototype.unwrapTo=function(D){return new cs(this.overscaledZ,D,this.canonical.z,this.canonical.x,this.canonical.y)},cs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},cs.prototype.toUnwrapped=function(){return new Vg(this.wrap,this.canonical)},cs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},cs.prototype.getTilePoint=function(D){return this.canonical.getTilePoint(new Kc(D.x-this.wrap,D.y))},mr("CanonicalTileID",Jc),mr("OverscaledTileID",cs,{omit:["posMatrix"]});var Hl=function(D,z,Q){if(this.uid=D,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(Q&&"mapbox"!==Q&&"terrarium"!==Q)return I('"'+Q+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var he=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=Q||"mapbox";for(var xe=0;xe<he;xe++)this.data[this._idx(-1,xe)]=this.data[this._idx(0,xe)],this.data[this._idx(he,xe)]=this.data[this._idx(he-1,xe)],this.data[this._idx(xe,-1)]=this.data[this._idx(xe,0)],this.data[this._idx(xe,he)]=this.data[this._idx(xe,he-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(he,-1)]=this.data[this._idx(he-1,0)],this.data[this._idx(-1,he)]=this.data[this._idx(0,he-1)],this.data[this._idx(he,he)]=this.data[this._idx(he-1,he-1)]};Hl.prototype.get=function(D,z){var Q=new Uint8Array(this.data.buffer),he=4*this._idx(D,z);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(Q[he],Q[he+1],Q[he+2])},Hl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Hl.prototype._idx=function(D,z){if(D<-1||D>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(D+1)},Hl.prototype._unpackMapbox=function(D,z,Q){return(256*D*256+256*z+Q)/10-1e4},Hl.prototype._unpackTerrarium=function(D,z,Q){return 256*D+z+Q/256-32768},Hl.prototype.getPixels=function(){return new Es({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Hl.prototype.backfillBorder=function(D,z,Q){if(this.dim!==D.dim)throw new Error("dem dimension mismatch");var he=z*this.dim,xe=z*this.dim+this.dim,Se=Q*this.dim,ze=Q*this.dim+this.dim;switch(z){case-1:he=xe-1;break;case 1:xe=he+1}switch(Q){case-1:Se=ze-1;break;case 1:ze=Se+1}for(var Ze=-z*this.dim,lt=-Q*this.dim,_t=Se;_t<ze;_t++)for(var kt=he;kt<xe;kt++)this.data[this._idx(kt,_t)]=D.data[this._idx(kt+Ze,_t+lt)]},mr("DEMData",Hl);var Kl=function(D){this._stringToNumber={},this._numberToString=[];for(var z=0;z<D.length;z++){var Q=D[z];this._stringToNumber[Q]=z,this._numberToString[z]=Q}};Kl.prototype.encode=function(D){return this._stringToNumber[D]},Kl.prototype.decode=function(D){return this._numberToString[D]};var $p=function(D,z,Q,he,xe){this.type="Feature",this._vectorTileFeature=D,D._z=z,D._x=Q,D._y=he,this.properties=D.properties,this.id=xe},Ug={geometry:{configurable:!0}};Ug.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ug.geometry.set=function(D){this._geometry=D},$p.prototype.toJSON=function(){var D={geometry:this.geometry};for(var z in this)"_geometry"!==z&&"_vectorTileFeature"!==z&&(D[z]=this[z]);return D},Object.defineProperties($p.prototype,Ug);var Qc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Qc.prototype.updateState=function(D,z,Q){var he=String(z);if(this.stateChanges[D]=this.stateChanges[D]||{},this.stateChanges[D][he]=this.stateChanges[D][he]||{},f(this.stateChanges[D][he],Q),null===this.deletedStates[D])for(var xe in this.deletedStates[D]={},this.state[D])xe!==he&&(this.deletedStates[D][xe]=null);else if(this.deletedStates[D]&&null===this.deletedStates[D][he])for(var Se in this.deletedStates[D][he]={},this.state[D][he])Q[Se]||(this.deletedStates[D][he][Se]=null);else for(var ze in Q)this.deletedStates[D]&&this.deletedStates[D][he]&&null===this.deletedStates[D][he][ze]&&delete this.deletedStates[D][he][ze]},Qc.prototype.removeFeatureState=function(D,z,Q){if(null!==this.deletedStates[D]){var he=String(z);if(this.deletedStates[D]=this.deletedStates[D]||{},Q&&void 0!==z)null!==this.deletedStates[D][he]&&(this.deletedStates[D][he]=this.deletedStates[D][he]||{},this.deletedStates[D][he][Q]=null);else if(void 0!==z)if(this.stateChanges[D]&&this.stateChanges[D][he])for(Q in this.deletedStates[D][he]={},this.stateChanges[D][he])this.deletedStates[D][he][Q]=null;else this.deletedStates[D][he]=null;else this.deletedStates[D]=null}},Qc.prototype.getState=function(D,z){var Q=String(z),Se=f({},(this.state[D]||{})[Q],(this.stateChanges[D]||{})[Q]);if(null===this.deletedStates[D])return{};if(this.deletedStates[D]){var ze=this.deletedStates[D][z];if(null===ze)return{};for(var Ze in ze)delete Se[Ze]}return Se},Qc.prototype.initializeTileState=function(D,z){D.setFeatureState(this.state,z)},Qc.prototype.coalesceChanges=function(D,z){var Q={};for(var he in this.stateChanges){this.state[he]=this.state[he]||{};var xe={};for(var Se in this.stateChanges[he])this.state[he][Se]||(this.state[he][Se]={}),f(this.state[he][Se],this.stateChanges[he][Se]),xe[Se]=this.state[he][Se];Q[he]=xe}for(var ze in this.deletedStates){this.state[ze]=this.state[ze]||{};var Ze={};if(null===this.deletedStates[ze])for(var lt in this.state[ze])Ze[lt]={},this.state[ze][lt]={};else for(var _t in this.deletedStates[ze]){if(null===this.deletedStates[ze][_t])this.state[ze][_t]={};else for(var kt=0,Zt=Object.keys(this.deletedStates[ze][_t]);kt<Zt.length;kt+=1)delete this.state[ze][_t][Zt[kt]];Ze[_t]=this.state[ze][_t]}Q[ze]=Q[ze]||{},f(Q[ze],Ze)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(Q).length)for(var en in D)D[en].setFeatureState(Q,z)};var Mc=function(D,z){this.tileID=D,this.x=D.canonical.x,this.y=D.canonical.y,this.z=D.canonical.z,this.grid=new Cr(8192,16,0),this.grid3D=new Cr(8192,16,0),this.featureIndexArray=new Nt,this.promoteId=z};function ql(D,z,Q,he,xe){return M(D,function(Se,ze){var Ze=z instanceof Ml?z.get(ze):null;return Ze&&Ze.evaluate?Ze.evaluate(Q,he,xe):Ze})}function Td(D){for(var z=1/0,Q=1/0,he=-1/0,xe=-1/0,Se=0,ze=D;Se<ze.length;Se+=1){var Ze=ze[Se];z=Math.min(z,Ze.x),Q=Math.min(Q,Ze.y),he=Math.max(he,Ze.x),xe=Math.max(xe,Ze.y)}return{minX:z,minY:Q,maxX:he,maxY:xe}}function Kp(D,z){return z-D}Mc.prototype.insert=function(D,z,Q,he,xe,Se){var ze=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Q,he,xe);for(var Ze=Se?this.grid3D:this.grid,lt=0;lt<z.length;lt++){for(var _t=z[lt],kt=[1/0,1/0,-1/0,-1/0],Zt=0;Zt<_t.length;Zt++){var sn=_t[Zt];kt[0]=Math.min(kt[0],sn.x),kt[1]=Math.min(kt[1],sn.y),kt[2]=Math.max(kt[2],sn.x),kt[3]=Math.max(kt[3],sn.y)}kt[0]<8192&&kt[1]<8192&&kt[2]>=0&&kt[3]>=0&&Ze.insert(ze,kt[0],kt[1],kt[2],kt[3])}},Mc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new qc.VectorTile(new ld(this.rawTileData)).layers,this.sourceLayerCoder=new Kl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Mc.prototype.query=function(D,z,Q,he){var xe=this;this.loadVTLayers();for(var Se=D.params||{},ze=8192/D.tileSize/D.scale,Ze=Ji(Se.filter),lt=D.queryGeometry,_t=D.queryPadding*ze,kt=Td(lt),Zt=this.grid.query(kt.minX-_t,kt.minY-_t,kt.maxX+_t,kt.maxY+_t),sn=Td(D.cameraQueryGeometry),xn=0,Fn=this.grid3D.query(sn.minX-_t,sn.minY-_t,sn.maxX+_t,sn.maxY+_t,function(Lr,jr,li,ai){return function(gi,Ii,Li,Ti,Bi){for(var ji=0,Pi=gi;ji<Pi.length;ji+=1){var za=Pi[ji];if(Ii<=za.x&&Li<=za.y&&Ti>=za.x&&Bi>=za.y)return!0}var Pa=[new i(Ii,Li),new i(Ii,Bi),new i(Ti,Bi),new i(Ti,Li)];if(gi.length>2)for(var ja=0,Ki=Pa;ja<Ki.length;ja+=1)if(qs(gi,Ki[ja]))return!0;for(var Ia=0;Ia<gi.length-1;Ia++)if(Ku(gi[Ia],gi[Ia+1],Pa))return!0;return!1}(D.cameraQueryGeometry,Lr-_t,jr-_t,li+_t,ai+_t)});xn<Fn.length;xn+=1)Zt.push(Fn[xn]);Zt.sort(Kp);for(var qn,ar={},lr=function(Lr){var jr=Zt[Lr];if(jr!==qn){qn=jr;var li=xe.featureIndexArray.get(jr),ai=null;xe.loadMatchingFeature(ar,li.bucketIndex,li.sourceLayerIndex,li.featureIndex,Ze,Se.layers,Se.availableImages,z,Q,he,function(gi,Ii,Li){return ai||(ai=xo(gi)),Ii.queryIntersectsFeature(lt,gi,Li,ai,xe.z,D.transform,ze,D.pixelPosMatrix)})}},hr=0;hr<Zt.length;hr++)lr(hr);return ar},Mc.prototype.loadMatchingFeature=function(D,z,Q,he,xe,Se,ze,Ze,lt,_t,kt){var Zt=this.bucketLayerIDs[z];if(!Se||function(li,ai){for(var gi=0;gi<li.length;gi++)if(ai.indexOf(li[gi])>=0)return!0;return!1}(Se,Zt)){var sn=this.sourceLayerCoder.decode(Q),en=this.vtLayers[sn].feature(he);if(xe.filter(new Qa(this.tileID.overscaledZ),en))for(var xn=this.getId(en,sn),Fn=0;Fn<Zt.length;Fn++){var Gn=Zt[Fn];if(!(Se&&Se.indexOf(Gn)<0)){var qn=Ze[Gn];if(qn){var ar={};void 0!==xn&&_t&&(ar=_t.getState(qn.sourceLayer||"_geojsonTileLayer",xn));var lr=lt[Gn];lr.paint=ql(lr.paint,qn.paint,en,ar,ze),lr.layout=ql(lr.layout,qn.layout,en,ar,ze);var hr=!kt||kt(en,qn,ar);if(hr){var Lr=new $p(en,this.z,this.x,this.y,xn);Lr.layer=lr;var jr=D[Gn];void 0===jr&&(jr=D[Gn]=[]),jr.push({featureIndex:he,feature:Lr,intersectionZ:hr})}}}}}},Mc.prototype.lookupSymbolFeatures=function(D,z,Q,he,xe,Se,ze,Ze){var lt={};this.loadVTLayers();for(var _t=Ji(xe),kt=0,Zt=D;kt<Zt.length;kt+=1)this.loadMatchingFeature(lt,Q,he,Zt[kt],_t,Se,ze,Ze,z);return lt},Mc.prototype.hasLayer=function(D){for(var z=0,Q=this.bucketLayerIDs;z<Q.length;z+=1)for(var he=0,xe=Q[z];he<xe.length;he+=1)if(D===xe[he])return!0;return!1},Mc.prototype.getId=function(D,z){var Q=D.id;return this.promoteId&&"boolean"==typeof(Q=D.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[z]])&&(Q=Number(Q)),Q},mr("FeatureIndex",Mc,{omit:["rawTileData","sourceLayerCoder"]});var Ss=function(D,z){this.tileID=D,this.uid=m(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ss.prototype.registerFadeDuration=function(D){var z=D+this.timeAdded;z<H.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},Ss.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ss.prototype.loadVectorData=function(D,z,Q){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",D){for(var he in D.featureIndex&&(this.latestFeatureIndex=D.featureIndex,D.rawTileData?(this.latestRawTileData=D.rawTileData,this.latestFeatureIndex.rawTileData=D.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=D.collisionBoxArray,this.buckets=function(_t,kt){var Zt={};if(!kt)return Zt;for(var sn=function(){var Fn=xn[en],Gn=Fn.layerIds.map(function(hr){return kt.getLayer(hr)}).filter(Boolean);if(0!==Gn.length){Fn.layers=Gn,Fn.stateDependentLayerIds&&(Fn.stateDependentLayers=Fn.stateDependentLayerIds.map(function(hr){return Gn.filter(function(Lr){return Lr.id===hr})[0]}));for(var qn=0,ar=Gn;qn<ar.length;qn+=1)Zt[ar[qn].id]=Fn}},en=0,xn=_t;en<xn.length;en+=1)sn();return Zt}(D.buckets,z.style),this.hasSymbolBuckets=!1,this.buckets){var xe=this.buckets[he];if(xe instanceof ya){if(this.hasSymbolBuckets=!0,!Q)break;xe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Se in this.buckets){var ze=this.buckets[Se];if(ze instanceof ya&&ze.hasRTLText){this.hasRTLText=!0,Na.isLoading()||Na.isLoaded()||"deferred"!==Yo()||Ja();break}}for(var Ze in this.queryPadding=0,this.buckets){var lt=this.buckets[Ze];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer(Ze).queryRadius(lt))}D.imageAtlas&&(this.imageAtlas=D.imageAtlas),D.glyphAtlasImage&&(this.glyphAtlasImage=D.glyphAtlasImage)}else this.collisionBoxArray=new Ce},Ss.prototype.unloadVectorData=function(){for(var D in this.buckets)this.buckets[D].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ss.prototype.getBucket=function(D){return this.buckets[D.id]},Ss.prototype.upload=function(D){for(var z in this.buckets){var Q=this.buckets[z];Q.uploadPending()&&Q.upload(D)}var he=D.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new $c(D,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new $c(D,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)},Ss.prototype.prepare=function(D){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(D,this.imageAtlasTexture)},Ss.prototype.queryRenderedFeatures=function(D,z,Q,he,xe,Se,ze,Ze,lt,_t){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:he,cameraQueryGeometry:xe,scale:Se,tileSize:this.tileSize,pixelPosMatrix:_t,transform:Ze,params:ze,queryPadding:this.queryPadding*lt},D,z,Q):{}},Ss.prototype.querySourceFeatures=function(D,z){var Q=this.latestFeatureIndex;if(Q&&Q.rawTileData){var he=Q.loadVTLayers(),xe=z?z.sourceLayer:"",Se=he._geojsonTileLayer||he[xe];if(Se)for(var ze=Ji(z&&z.filter),Ze=this.tileID.canonical,lt=Ze.z,_t=Ze.x,kt=Ze.y,Zt={z:lt,x:_t,y:kt},sn=0;sn<Se.length;sn++){var en=Se.feature(sn);if(ze.filter(new Qa(this.tileID.overscaledZ),en)){var xn=Q.getId(en,xe),Fn=new $p(en,lt,_t,kt,xn);Fn.tile=Zt,D.push(Fn)}}}},Ss.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ss.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ss.prototype.setExpiryData=function(D){var z=this.expirationTime;if(D.cacheControl){var Q=P(D.cacheControl);Q["max-age"]&&(this.expirationTime=Date.now()+1e3*Q["max-age"])}else D.expires&&(this.expirationTime=new Date(D.expires).getTime());if(this.expirationTime){var he=Date.now(),xe=!1;if(this.expirationTime>he)xe=!1;else if(z)if(this.expirationTime<z)xe=!0;else{var Se=this.expirationTime-z;Se?this.expirationTime=he+Math.max(Se,3e4):xe=!0}else xe=!0;xe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ss.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ss.prototype.setFeatureState=function(D,z){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(D).length){var Q=this.latestFeatureIndex.loadVTLayers();for(var he in this.buckets)if(z.style.hasLayer(he)){var xe=this.buckets[he],Se=xe.layers[0].sourceLayer||"_geojsonTileLayer",ze=Q[Se],Ze=D[Se];if(ze&&Ze&&0!==Object.keys(Ze).length){xe.update(Ze,ze,this.imageAtlas&&this.imageAtlas.patternPositions||{});var lt=z&&z.style&&z.style.getLayer(he);lt&&(this.queryPadding=Math.max(this.queryPadding,lt.queryRadius(xe)))}}}},Ss.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ss.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<H.now()},Ss.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ss.prototype.setHoldDuration=function(D){this.symbolFadeHoldUntil=H.now()+D},Ss.prototype.setDependencies=function(D,z){for(var Q={},he=0,xe=z;he<xe.length;he+=1)Q[xe[he]]=!0;this.dependencies[D]=Q},Ss.prototype.hasDependency=function(D,z){for(var Q=0,he=D;Q<he.length;Q+=1){var Se=this.dependencies[he[Q]];if(Se)for(var ze=0,Ze=z;ze<Ze.length;ze+=1)if(Se[Ze[ze]])return!0}return!1};var ec=self.performance,Nf=function(D){this._marks={start:[D.url,"start"].join("#"),end:[D.url,"end"].join("#"),measure:D.url.toString()},ec.mark(this._marks.start)};Nf.prototype.finish=function(){ec.mark(this._marks.end);var D=ec.getEntriesByName(this._marks.measure);return 0===D.length&&(ec.measure(this._marks.measure,this._marks.start,this._marks.end),D=ec.getEntriesByName(this._marks.measure),ec.clearMarks(this._marks.start),ec.clearMarks(this._marks.end),ec.clearMeasures(this._marks.measure)),D},e.Actor=Ru,e.AlphaImage=ou,e.CanonicalTileID=Jc,e.CollisionBoxArray=Ce,e.Color=cn,e.DEMData=Hl,e.DataConstantProperty=Oi,e.DictionaryCoder=Kl,e.EXTENT=8192,e.ErrorEvent=De,e.EvaluationParameters=Qa,e.Event=Ee,e.Evented=Ie,e.FeatureIndex=Mc,e.FillBucket=lu,e.FillExtrusionBucket=Xl,e.ImageAtlas=dd,e.ImagePosition=jp,e.LineBucket=ml,e.LngLat=zo,e.LngLatBounds=us,e.MercatorCoordinate=Kc,e.ONE_EM=24,e.OverscaledTileID=cs,e.Point=i,e.Point$1=i,e.Properties=Zi,e.Protobuf=ld,e.RGBAImage=Es,e.RequestManager=fe,e.RequestPerformance=Nf,e.ResourceType=Ct,e.SegmentVector=Yt,e.SourceFeatureState=Qc,e.StructArrayLayout1ui2=K,e.StructArrayLayout2f1f2i16=Nc,e.StructArrayLayout2i4=Vl,e.StructArrayLayout3ui6=Xo,e.StructArrayLayout4i8=qr,e.SymbolBucket=ya,e.Texture=$c,e.Tile=Ss,e.Transitionable=Zo,e.Uniform1f=ur,e.Uniform1i=Fi,e.Uniform2f=Hr,e.Uniform3f=bi,e.Uniform4f=mi,e.UniformColor=Si,e.UniformMatrix4f=na,e.UnwrappedTileID=Vg,e.ValidationError=Ye,e.WritingMode=$l,e.ZoomHistory=ha,e.add=function(D,z,Q){return D[0]=z[0]+Q[0],D[1]=z[1]+Q[1],D[2]=z[2]+Q[2],D},e.addDynamicAttributes=vl,e.asyncAll=function(D,z,Q){if(!D.length)return Q(null,[]);var he=D.length,xe=new Array(D.length),Se=null;D.forEach(function(ze,Ze){z(ze,function(lt,_t){lt&&(Se=lt),xe[Ze]=_t,0==--he&&Q(Se,xe)})})},e.bezier=h,e.bindAll=c,e.browser=H,e.cacheEntryPossiblyAdded=function(D){++ht>Je&&(D.getActor().send("enforceCacheSizeLimit",We),ht=0)},e.clamp=d,e.clearTileCache=function(D){var z=self.caches.delete("mapbox-tiles");D&&z.catch(D).then(function(){return D()})},e.clipLine=Ag,e.clone=function(D){var z=new hl(16);return z[0]=D[0],z[1]=D[1],z[2]=D[2],z[3]=D[3],z[4]=D[4],z[5]=D[5],z[6]=D[6],z[7]=D[7],z[8]=D[8],z[9]=D[9],z[10]=D[10],z[11]=D[11],z[12]=D[12],z[13]=D[13],z[14]=D[14],z[15]=D[15],z},e.clone$1=C,e.clone$2=function(D){var z=new hl(3);return z[0]=D[0],z[1]=D[1],z[2]=D[2],z},e.collisionCircleLayout=hg,e.config=Y,e.create=function(){var D=new hl(16);return hl!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=0,D[12]=0,D[13]=0,D[14]=0),D[0]=1,D[5]=1,D[10]=1,D[15]=1,D},e.create$1=function(){var D=new hl(9);return hl!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D},e.create$2=function(){var D=new hl(4);return hl!=Float32Array&&(D[1]=0,D[2]=0),D[0]=1,D[3]=1,D},e.createCommonjsModule=o,e.createExpression=nn,e.createLayout=Xa,e.createStyleLayer=function(D){return"custom"===D.type?new Lg(D):new py[D.type](D)},e.cross=function(D,z,Q){var he=z[0],xe=z[1],Se=z[2],ze=Q[0],Ze=Q[1],lt=Q[2];return D[0]=xe*lt-Se*Ze,D[1]=Se*ze-he*lt,D[2]=he*Ze-xe*ze,D},e.deepEqual=function D(z,Q){if(Array.isArray(z)){if(!Array.isArray(Q)||z.length!==Q.length)return!1;for(var he=0;he<z.length;he++)if(!D(z[he],Q[he]))return!1;return!0}if("object"==typeof z&&null!==z&&null!==Q){if("object"!=typeof Q||Object.keys(z).length!==Object.keys(Q).length)return!1;for(var xe in z)if(!D(z[xe],Q[xe]))return!1;return!0}return z===Q},e.dot=function(D,z){return D[0]*z[0]+D[1]*z[1]+D[2]*z[2]},e.dot$1=function(D,z){return D[0]*z[0]+D[1]*z[1]+D[2]*z[2]+D[3]*z[3]},e.ease=s,e.emitValidationErrors=Wr,e.endsWith=E,e.enforceCacheSizeLimit=function(D){ut(),Ve&&Ve.then(function(z){z.keys().then(function(Q){for(var he=0;he<Q.length-D;he++)z.delete(Q[he])})})},e.evaluateSizeForFeature=ry,e.evaluateSizeForZoom=iy,e.evaluateVariableOffset=Eg,e.evented=ga,e.extend=f,e.featureFilter=Ji,e.filterObject=S,e.fromRotation=function(D,z){var Q=Math.sin(z),he=Math.cos(z);return D[0]=he,D[1]=Q,D[2]=0,D[3]=-Q,D[4]=he,D[5]=0,D[6]=0,D[7]=0,D[8]=1,D},e.getAnchorAlignment=Wc,e.getAnchorJustification=Gp,e.getArrayBuffer=Bt,e.getImage=dn,e.getJSON=function(D,z){return ft(f(D,{type:"json"}),z)},e.getRTLTextPluginStatus=Yo,e.getReferrer=Ft,e.getVideo=function(D,z){var Q,he,xe=self.document.createElement("video");xe.muted=!0,xe.onloadstart=function(){z(null,xe)};for(var Se=0;Se<D.length;Se++){var ze=self.document.createElement("source");Q=D[Se],he=void 0,(he=self.document.createElement("a")).href=Q,(he.protocol!==self.document.location.protocol||he.host!==self.document.location.host)&&(xe.crossOrigin="Anonymous"),ze.src=D[Se],xe.appendChild(ze)}return{cancel:function(){}}},e.identity=Mf,e.invert=function(D,z){var Q=z[0],he=z[1],xe=z[2],Se=z[3],ze=z[4],Ze=z[5],lt=z[6],_t=z[7],kt=z[8],Zt=z[9],sn=z[10],en=z[11],xn=z[12],Fn=z[13],Gn=z[14],qn=z[15],ar=Q*Ze-he*ze,lr=Q*lt-xe*ze,hr=Q*_t-Se*ze,Lr=he*lt-xe*Ze,jr=he*_t-Se*Ze,li=xe*_t-Se*lt,ai=kt*Fn-Zt*xn,gi=kt*Gn-sn*xn,Ii=kt*qn-en*xn,Li=Zt*Gn-sn*Fn,Ti=Zt*qn-en*Fn,Bi=sn*qn-en*Gn,ji=ar*Bi-lr*Ti+hr*Li+Lr*Ii-jr*gi+li*ai;return ji?(D[0]=(Ze*Bi-lt*Ti+_t*Li)*(ji=1/ji),D[1]=(xe*Ti-he*Bi-Se*Li)*ji,D[2]=(Fn*li-Gn*jr+qn*Lr)*ji,D[3]=(sn*jr-Zt*li-en*Lr)*ji,D[4]=(lt*Ii-ze*Bi-_t*gi)*ji,D[5]=(Q*Bi-xe*Ii+Se*gi)*ji,D[6]=(Gn*hr-xn*li-qn*lr)*ji,D[7]=(kt*li-sn*hr+en*lr)*ji,D[8]=(ze*Ti-Ze*Ii+_t*ai)*ji,D[9]=(he*Ii-Q*Ti-Se*ai)*ji,D[10]=(xn*jr-Fn*hr+qn*ar)*ji,D[11]=(Zt*hr-kt*jr-en*ar)*ji,D[12]=(Ze*gi-ze*Li-lt*ai)*ji,D[13]=(Q*Li-he*gi+xe*ai)*ji,D[14]=(Fn*lr-xn*Lr-Gn*ar)*ji,D[15]=(kt*Lr-Zt*lr+sn*ar)*ji,D):null},e.isChar=$r,e.isMapboxURL=me,e.keysDifference=function(D,z){var Q=[];for(var he in D)he in z||Q.push(he);return Q},e.makeRequest=ft,e.mapObject=M,e.mercatorXfromLng=Zp,e.mercatorYfromLat=Bg,e.mercatorZfromAltitude=jg,e.mul=Mp,e.multiply=gc,e.mvt=qc,e.normalize=function(D,z){var Q=z[0],he=z[1],xe=z[2],Se=Q*Q+he*he+xe*xe;return Se>0&&(Se=1/Math.sqrt(Se)),D[0]=z[0]*Se,D[1]=z[1]*Se,D[2]=z[2]*Se,D},e.number=Ur,e.offscreenCanvasSupported=Tt,e.ortho=function(D,z,Q,he,xe,Se,ze){var Ze=1/(z-Q),lt=1/(he-xe),_t=1/(Se-ze);return D[0]=-2*Ze,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=-2*lt,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=2*_t,D[11]=0,D[12]=(z+Q)*Ze,D[13]=(xe+he)*lt,D[14]=(ze+Se)*_t,D[15]=1,D},e.parseGlyphPBF=function(D){return new ld(D).readFields(xc,[])},e.pbf=ld,e.performSymbolLayout=function(D,z,Q,he,xe,Se,ze){D.createArrays(),D.tilePixelRatio=8192/(512*D.overscaling),D.compareText={},D.iconsNeedLinear=!1;var lt=D.layers[0].layout,_t=D.layers[0]._unevaluatedLayout._values,kt={};if("composite"===D.textSizeData.kind){var Zt=D.textSizeData,en=Zt.maxZoom;kt.compositeTextSizes=[_t["text-size"].possiblyEvaluate(new Qa(Zt.minZoom),ze),_t["text-size"].possiblyEvaluate(new Qa(en),ze)]}if("composite"===D.iconSizeData.kind){var xn=D.iconSizeData,Gn=xn.maxZoom;kt.compositeIconSizes=[_t["icon-size"].possiblyEvaluate(new Qa(xn.minZoom),ze),_t["icon-size"].possiblyEvaluate(new Qa(Gn),ze)]}kt.layoutTextSize=_t["text-size"].possiblyEvaluate(new Qa(D.zoom+1),ze),kt.layoutIconSize=_t["icon-size"].possiblyEvaluate(new Qa(D.zoom+1),ze),kt.textMaxSize=_t["text-size"].possiblyEvaluate(new Qa(18));for(var qn=24*lt.get("text-line-height"),ar="map"===lt.get("text-rotation-alignment")&&"point"!==lt.get("symbol-placement"),lr=lt.get("text-keep-upright"),hr=lt.get("text-size"),Lr=function(){var ai=li[jr],gi=lt.get("text-font").evaluate(ai,{},ze).join(","),Ii=hr.evaluate(ai,{},ze),Li=kt.layoutTextSize.evaluate(ai,{},ze),Ti=kt.layoutIconSize.evaluate(ai,{},ze),Bi={horizontal:{},vertical:void 0},ji=ai.text,Pi=[0,0];if(ji){var za=ji.toString(),Pa=24*lt.get("text-letter-spacing").evaluate(ai,{},ze),ja=function(Ma){for(var Va=0,Ko=Ma;Va<Ko.length;Va+=1)if(!ua(Ko[Va].charCodeAt(0)))return!1;return!0}(za)?Pa:0,Ki=lt.get("text-anchor").evaluate(ai,{},ze),Ia=lt.get("text-variable-anchor");if(!Ia){var uo=lt.get("text-radial-offset").evaluate(ai,{},ze);Pi=uo?Eg(Ki,[24*uo,xd]):lt.get("text-offset").evaluate(ai,{},ze).map(function(Ma){return 24*Ma})}var go=ar?"center":lt.get("text-justify").evaluate(ai,{},ze),Eo=lt.get("symbol-placement"),mo="point"===Eo?24*lt.get("text-max-width").evaluate(ai,{},ze):0,es=function(){D.allowVerticalPlacement&&wa(za)&&(Bi.vertical=pd(ji,z,Q,xe,gi,mo,qn,Ki,"left",ja,Pi,$l.vertical,!0,Eo,Li,Ii))};if(!ar&&Ia){for(var vo="auto"===go?Ia.map(function(Ma){return Gp(Ma)}):[go],Ws=!1,xs=0;xs<vo.length;xs++){var js=vo[xs];if(!Bi.horizontal[js])if(Ws)Bi.horizontal[js]=Bi.horizontal[0];else{var yl=pd(ji,z,Q,xe,gi,mo,qn,"center",js,ja,Pi,$l.horizontal,!1,Eo,Li,Ii);yl&&(Bi.horizontal[js]=yl,Ws=1===yl.positionedLines.length)}}es()}else{"auto"===go&&(go=Gp(Ki));var Ys=pd(ji,z,Q,xe,gi,mo,qn,Ki,go,ja,Pi,$l.horizontal,!1,Eo,Li,Ii);Ys&&(Bi.horizontal[go]=Ys),es(),wa(za)&&ar&&lr&&(Bi.vertical=pd(ji,z,Q,xe,gi,mo,qn,Ki,go,ja,Pi,$l.vertical,!1,Eo,Li,Ii))}}var Ma,Va,Jo,bl,nl,ts=void 0,Cs=!1;if(ai.icon&&ai.icon.name){var fs=he[ai.icon.name];fs&&(Ma=xe[ai.icon.name],Va=lt.get("icon-offset").evaluate(ai,{},ze),Jo=Wc(lt.get("icon-anchor").evaluate(ai,{},ze)),ts={image:Ma,top:nl=Va[1]-Ma.displaySize[1]*Jo.verticalAlign,bottom:nl+Ma.displaySize[1],left:bl=Va[0]-Ma.displaySize[0]*Jo.horizontalAlign,right:bl+Ma.displaySize[0]},Cs=fs.sdf,void 0===D.sdfIcons?D.sdfIcons=fs.sdf:D.sdfIcons!==fs.sdf&&I("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(fs.pixelRatio!==D.pixelRatio||0!==lt.get("icon-rotate").constantOr(1))&&(D.iconsNeedLinear=!0))}var hs=Cg(Bi.horizontal)||Bi.vertical;D.iconsInText=!!hs&&hs.iconsInText,(hs||ts)&&function(Ma,Va,Ko,Jo,eo,Bo,$a,Qo,bl,Fl,nl){var cu=Bo.textMaxSize.evaluate(Va,{});void 0===cu&&(cu=$a);var tc,Ds=Ma.layers[0].layout,bu=Ds.get("icon-offset").evaluate(Va,{},nl),la=Cg(Ko.horizontal),jo=$a/24,Md=Ma.tilePixelRatio*jo,ef=Ma.tilePixelRatio*cu/24,tf=Ma.tilePixelRatio*Qo,_l=Ma.tilePixelRatio*Ds.get("symbol-spacing"),wh=Ds.get("text-padding")*Ma.tilePixelRatio,Ad=Ds.get("icon-padding")*Ma.tilePixelRatio,zf=Ds.get("text-max-angle")/180*Math.PI,fu="map"===Ds.get("text-rotation-alignment")&&"point"!==Ds.get("symbol-placement"),Fu="map"===Ds.get("icon-rotation-alignment")&&"point"!==Ds.get("symbol-placement"),nf=Ds.get("symbol-placement"),Bf=_l/2,Th=Ds.get("icon-text-fit");Jo&&"none"!==Th&&(Ma.allowVerticalPlacement&&Ko.vertical&&(tc=Up(Jo,Ko.vertical,Th,Ds.get("icon-text-fit-padding"),bu,jo)),la&&(Jo=Up(Jo,la,Th,Ds.get("icon-text-fit-padding"),bu,jo)));var nc=function(U_,Id){Id.x<0||Id.x>=8192||Id.y<0||Id.y>=8192||function(rs,Nu,Ac,zu,Jp,Qp,qf,_u,Gf,Sh,xu,Ch,e0,Ld,Dh,t0,Yg,Zg,Wf,uf,kl,rc,Yf,Nl,vy){var Pd,kc,Ec,Sc,cf,ic=rs.addToLineVertexArray(Nu,Ac),Xg=0,n0=0,yy=0,r0=0,Od=-1,a0=-1,Bu={},$g=Un(""),o0=0,zl=0;if(void 0===_u._unevaluatedLayout.getValue("text-radial-offset")?(o0=(Pd=_u.layout.get("text-offset").evaluate(kl,{},Nl).map(function(Ih){return 24*Ih}))[0],zl=Pd[1]):(o0=24*_u.layout.get("text-radial-offset").evaluate(kl,{},Nl),zl=xd),rs.allowVerticalPlacement&&zu.vertical){var Kg=_u.layout.get("text-rotate").evaluate(kl,{},Nl)+90;Sc=new Lf(Gf,Nu,Sh,xu,Ch,zu.vertical,e0,Ld,Dh,Kg),qf&&(cf=new Lf(Gf,Nu,Sh,xu,Ch,qf,Yg,Zg,Dh,Kg))}if(Jp){var Jg=_u.layout.get("icon-rotate").evaluate(kl,{}),_y="none"!==_u.layout.get("icon-text-fit"),s0=kg(Jp,Jg,Yf,_y),Qg=qf?kg(qf,Jg,Yf,_y):void 0;Ec=new Lf(Gf,Nu,Sh,xu,Ch,Jp,Yg,Zg,!1,Jg),Xg=4*s0.length;var em=rs.iconSizeData,ff=null;"source"===em.kind?(ff=[128*_u.layout.get("icon-size").evaluate(kl,{})])[0]>32640&&I(rs.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===em.kind&&((ff=[128*rc.compositeIconSizes[0].evaluate(kl,{},Nl),128*rc.compositeIconSizes[1].evaluate(kl,{},Nl)])[0]>32640||ff[1]>32640)&&I(rs.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),rs.addSymbols(rs.icon,s0,ff,uf,Wf,kl,!1,Nu,ic.lineStartIndex,ic.lineLength,-1,Nl),Od=rs.icon.placedSymbolArray.length-1,Qg&&(n0=4*Qg.length,rs.addSymbols(rs.icon,Qg,ff,uf,Wf,kl,$l.vertical,Nu,ic.lineStartIndex,ic.lineLength,-1,Nl),a0=rs.icon.placedSymbolArray.length-1)}for(var l0 in zu.horizontal){var Rd=zu.horizontal[l0];if(!kc){$g=Un(Rd.text);var xy=_u.layout.get("text-rotate").evaluate(kl,{},Nl);kc=new Lf(Gf,Nu,Sh,xu,Ch,Rd,e0,Ld,Dh,xy)}var tm=1===Rd.positionedLines.length;if(yy+=Sg(rs,Nu,Rd,Qp,_u,Dh,kl,t0,ic,zu.vertical?$l.horizontal:$l.horizontalOnly,tm?Object.keys(zu.horizontal):[l0],Bu,Od,rc,Nl),tm)break}zu.vertical&&(r0+=Sg(rs,Nu,zu.vertical,Qp,_u,Dh,kl,t0,ic,$l.vertical,["vertical"],Bu,a0,rc,Nl));var nm=kc?kc.boxStartIndex:rs.collisionBoxArray.length,wy=kc?kc.boxEndIndex:rs.collisionBoxArray.length,rm=Sc?Sc.boxStartIndex:rs.collisionBoxArray.length,Ty=Sc?Sc.boxEndIndex:rs.collisionBoxArray.length,My=Ec?Ec.boxStartIndex:rs.collisionBoxArray.length,im=Ec?Ec.boxEndIndex:rs.collisionBoxArray.length,am=cf?cf.boxStartIndex:rs.collisionBoxArray.length,Ay=cf?cf.boxEndIndex:rs.collisionBoxArray.length,Zs=-1,Zf=function(Ih,ky){return Ih&&Ih.circleDiameter?Math.max(Ih.circleDiameter,ky):ky};Zs=Zf(kc,Zs),Zs=Zf(Sc,Zs),Zs=Zf(Ec,Zs);var om=(Zs=Zf(cf,Zs))>-1?1:0;om&&(Zs*=vy/24),rs.glyphOffsetArray.length>=ya.MAX_GLYPHS&&I("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==kl.sortKey&&rs.addToSortKeyRanges(rs.symbolInstances.length,kl.sortKey),rs.symbolInstances.emplaceBack(Nu.x,Nu.y,Bu.right>=0?Bu.right:-1,Bu.center>=0?Bu.center:-1,Bu.left>=0?Bu.left:-1,Bu.vertical||-1,Od,a0,$g,nm,wy,rm,Ty,My,im,am,Ay,Sh,yy,r0,Xg,n0,om,0,e0,o0,zl,Zs)}(Ma,Id,U_,Ko,Jo,eo,tc,Ma.layers[0],Ma.collisionBoxArray,Va.index,Va.sourceLayerIndex,Ma.index,Md,wh,fu,bl,tf,Ad,Fu,bu,Va,Bo,Fl,nl,$a)};if("line"===nf)for(var kd=0,rf=Ag(Va.geometry,0,0,8192,8192);kd<rf.length;kd+=1)for(var af=rf[kd],of=0,Vf=sy(af,_l,zf,Ko.vertical||la,Jo,24,ef,Ma.overscaling,8192);of<Vf.length;of+=1){var Ed=Vf[of];la&&cy(Ma,la.text,Bf,Ed)||nc(af,Ed)}else if("line-center"===nf)for(var Mh=0,Cd=Va.geometry;Mh<Cd.length;Mh+=1){var Uf=Cd[Mh];if(Uf.length>1){var sf=Mg(Uf,zf,Ko.vertical||la,Jo,24,ef);sf&&nc(Uf,sf)}}else if("Polygon"===Va.type)for(var Ah=0,Dd=Ip(Va.geometry,0);Ah<Dd.length;Ah+=1){var kh=Dd[Ah],Hf=ly(kh,16);nc(kh[0],new Yc(Hf.x,Hf.y,0))}else if("LineString"===Va.type)for(var lf=0,Hg=Va.geometry;lf<Hg.length;lf+=1){var Eh=Hg[lf];nc(Eh,new Yc(Eh[0].x,Eh[0].y,0))}else if("Point"===Va.type)for(var qg=0,gy=Va.geometry;qg<gy.length;qg+=1)for(var Gg=0,my=gy[qg];Gg<my.length;Gg+=1){var Wg=my[Gg];nc([Wg],new Yc(Wg.x,Wg.y,0))}}(D,ai,Bi,ts,he,kt,Li,Ti,Pi,Cs,ze)},jr=0,li=D.features;jr<li.length;jr+=1)Lr();Se&&D.generateCollisionDebugBuffers()},e.perspective=function(D,z,Q,he,xe){var Se,ze=1/Math.tan(z/2);return D[0]=ze/Q,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=ze,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,null!=xe&&xe!==1/0?(D[10]=(xe+he)*(Se=1/(he-xe)),D[14]=2*xe*he*Se):(D[10]=-1,D[14]=-2*he),D},e.pick=function(D,z){for(var Q={},he=0;he<z.length;he++){var xe=z[he];xe in D&&(Q[xe]=D[xe])}return Q},e.plugin=Na,e.polygonIntersectsPolygon=el,e.postMapLoadEvent=qe,e.postTurnstileEvent=Pe,e.potpack=ty,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=mr,e.registerForPluginStateChange=function(D){return D({pluginStatus:Yi,pluginURL:To}),ga.on("pluginStateChange",D),D},e.rotate=function(D,z,Q){var he=z[0],xe=z[1],Se=z[2],ze=z[3],Ze=Math.sin(Q),lt=Math.cos(Q);return D[0]=he*lt+Se*Ze,D[1]=xe*lt+ze*Ze,D[2]=he*-Ze+Se*lt,D[3]=xe*-Ze+ze*lt,D},e.rotateX=function(D,z,Q){var he=Math.sin(Q),xe=Math.cos(Q),Se=z[4],ze=z[5],Ze=z[6],lt=z[7],_t=z[8],kt=z[9],Zt=z[10],sn=z[11];return z!==D&&(D[0]=z[0],D[1]=z[1],D[2]=z[2],D[3]=z[3],D[12]=z[12],D[13]=z[13],D[14]=z[14],D[15]=z[15]),D[4]=Se*xe+_t*he,D[5]=ze*xe+kt*he,D[6]=Ze*xe+Zt*he,D[7]=lt*xe+sn*he,D[8]=_t*xe-Se*he,D[9]=kt*xe-ze*he,D[10]=Zt*xe-Ze*he,D[11]=sn*xe-lt*he,D},e.rotateZ=function(D,z,Q){var he=Math.sin(Q),xe=Math.cos(Q),Se=z[0],ze=z[1],Ze=z[2],lt=z[3],_t=z[4],kt=z[5],Zt=z[6],sn=z[7];return z!==D&&(D[8]=z[8],D[9]=z[9],D[10]=z[10],D[11]=z[11],D[12]=z[12],D[13]=z[13],D[14]=z[14],D[15]=z[15]),D[0]=Se*xe+_t*he,D[1]=ze*xe+kt*he,D[2]=Ze*xe+Zt*he,D[3]=lt*xe+sn*he,D[4]=_t*xe-Se*he,D[5]=kt*xe-ze*he,D[6]=Zt*xe-Ze*he,D[7]=sn*xe-lt*he,D},e.scale=function(D,z,Q){var he=Q[0],xe=Q[1],Se=Q[2];return D[0]=z[0]*he,D[1]=z[1]*he,D[2]=z[2]*he,D[3]=z[3]*he,D[4]=z[4]*xe,D[5]=z[5]*xe,D[6]=z[6]*xe,D[7]=z[7]*xe,D[8]=z[8]*Se,D[9]=z[9]*Se,D[10]=z[10]*Se,D[11]=z[11]*Se,D[12]=z[12],D[13]=z[13],D[14]=z[14],D[15]=z[15],D},e.scale$1=function(D,z,Q){return D[0]=z[0]*Q,D[1]=z[1]*Q,D[2]=z[2]*Q,D[3]=z[3]*Q,D},e.scale$2=function(D,z,Q){return D[0]=z[0]*Q,D[1]=z[1]*Q,D[2]=z[2]*Q,D},e.setCacheLimits=function(D,z){We=D,Je=z},e.setRTLTextPlugin=function(D,z,Q){if(void 0===Q&&(Q=!1),Yi===Oa||Yi===Wo||Yi===Ks)throw new Error("setRTLTextPlugin cannot be called multiple times.");To=H.resolveURL(D),Yi=Oa,As=z,Ga(),Q||Ja()},e.sphericalToCartesian=function(D){var z=D[0],Q=D[1],he=D[2];return Q+=90,Q*=Math.PI/180,he*=Math.PI/180,{x:z*Math.cos(Q)*Math.sin(he),y:z*Math.sin(Q)*Math.sin(he),z:z*Math.cos(he)}},e.sqrLen=function(D){var z=D[0],Q=D[1];return z*z+Q*Q},e.styleSpec=He,e.sub=function(D,z,Q){return D[0]=z[0]-Q[0],D[1]=z[1]-Q[1],D[2]=z[2]-Q[2],D},e.symbolSize=Hp,e.transformMat3=function(D,z,Q){var he=z[0],xe=z[1],Se=z[2];return D[0]=he*Q[0]+xe*Q[3]+Se*Q[6],D[1]=he*Q[1]+xe*Q[4]+Se*Q[7],D[2]=he*Q[2]+xe*Q[5]+Se*Q[8],D},e.transformMat4=mc,e.translate=function(D,z,Q){var he,xe,Se,ze,Ze,lt,_t,kt,Zt,sn,en,xn,Fn=Q[0],Gn=Q[1],qn=Q[2];return z===D?(D[12]=z[0]*Fn+z[4]*Gn+z[8]*qn+z[12],D[13]=z[1]*Fn+z[5]*Gn+z[9]*qn+z[13],D[14]=z[2]*Fn+z[6]*Gn+z[10]*qn+z[14],D[15]=z[3]*Fn+z[7]*Gn+z[11]*qn+z[15]):(xe=z[1],Se=z[2],ze=z[3],Ze=z[4],lt=z[5],_t=z[6],kt=z[7],Zt=z[8],sn=z[9],en=z[10],xn=z[11],D[0]=he=z[0],D[1]=xe,D[2]=Se,D[3]=ze,D[4]=Ze,D[5]=lt,D[6]=_t,D[7]=kt,D[8]=Zt,D[9]=sn,D[10]=en,D[11]=xn,D[12]=he*Fn+Ze*Gn+Zt*qn+z[12],D[13]=xe*Fn+lt*Gn+sn*qn+z[13],D[14]=Se*Fn+_t*Gn+en*qn+z[14],D[15]=ze*Fn+kt*Gn+xn*qn+z[15]),D},e.triggerPluginCompletionEvent=ls,e.uniqueId=m,e.validateCustomStyleLayer=function(D){var z=[],Q=D.id;return void 0===Q&&z.push({message:"layers."+Q+': missing required property "id"'}),void 0===D.render&&z.push({message:"layers."+Q+': missing required method "render"'}),D.renderingMode&&"2d"!==D.renderingMode&&"3d"!==D.renderingMode&&z.push({message:"layers."+Q+': property "renderingMode" must be either "2d" or "3d"'}),z},e.validateLight=Sr,e.validateStyle=gr,e.values=function(D){var z=[];for(var Q in D)z.push(D[Q]);return z},e.vectorTile=qc,e.version="1.10.1",e.warnOnce=I,e.webpSupported=oe,e.window=self,e.wrap=p}),_(0,function(e){function o(Ee){var De=typeof Ee;if("number"===De||"boolean"===De||"string"===De||null==Ee)return JSON.stringify(Ee);if(Array.isArray(Ee)){for(var Ie="[",He=0,Ye=Ee;He<Ye.length;He+=1)Ie+=o(Ye[He])+",";return Ie+"]"}for(var tt=Object.keys(Ee).sort(),ot="{",st=0;st<tt.length;st++)ot+=JSON.stringify(tt[st])+":"+o(Ee[tt[st]])+",";return ot+"}"}function a(Ee){for(var De="",Ie=0,He=e.refProperties;Ie<He.length;Ie+=1)De+="/"+o(Ee[He[Ie]]);return De}var l=function(Ee){this.keyCache={},Ee&&this.replace(Ee)};l.prototype.replace=function(Ee){this._layerConfigs={},this._layers={},this.update(Ee,[])},l.prototype.update=function(Ee,De){for(var Ie=this,He=0,Ye=Ee;He<Ye.length;He+=1){var tt=Ye[He];this._layerConfigs[tt.id]=tt;var ot=this._layers[tt.id]=e.createStyleLayer(tt);ot._featureFilter=e.featureFilter(ot.filter),this.keyCache[tt.id]&&delete this.keyCache[tt.id]}for(var st=0,bt=De;st<bt.length;st+=1){var wt=bt[st];delete this.keyCache[wt],delete this._layerConfigs[wt],delete this._layers[wt]}this.familiesBySource={};for(var Ut=0,Kt=function(rt,pt){for(var It={},jt=0;jt<rt.length;jt++){var Qt=pt&&pt[rt[jt].id]||a(rt[jt]);pt&&(pt[rt[jt].id]=Qt);var fn=It[Qt];fn||(fn=It[Qt]=[]),fn.push(rt[jt])}var an=[];for(var Sn in It)an.push(It[Sn]);return an}(e.values(this._layerConfigs),this.keyCache);Ut<Kt.length;Ut+=1){var vt=Kt[Ut].map(function(rt){return Ie._layers[rt.id]}),Et=vt[0];if("none"!==Et.visibility){var $t=Et.source||"",Dt=this.familiesBySource[$t];Dt||(Dt=this.familiesBySource[$t]={});var Pt=Et.sourceLayer||"_geojsonTileLayer",je=Dt[Pt];je||(je=Dt[Pt]=[]),je.push(vt)}}};var i=function(Ee){var De={},Ie=[];for(var He in Ee){var Ye=Ee[He],tt=De[He]={};for(var ot in Ye){var st=Ye[+ot];if(st&&0!==st.bitmap.width&&0!==st.bitmap.height){var bt={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};Ie.push(bt),tt[ot]={rect:bt,metrics:st.metrics}}}}var wt=e.potpack(Ie),vt=new e.AlphaImage({width:wt.w||1,height:wt.h||1});for(var Et in Ee){var $t=Ee[Et];for(var Dt in $t){var Pt=$t[+Dt];if(Pt&&0!==Pt.bitmap.width&&0!==Pt.bitmap.height){var je=De[Et][Dt].rect;e.AlphaImage.copy(Pt.bitmap,vt,{x:0,y:0},{x:je.x+1,y:je.y+1},Pt.bitmap)}}}this.image=vt,this.positions=De};e.register("GlyphAtlas",i);var v=function(Ee){this.tileID=new e.OverscaledTileID(Ee.tileID.overscaledZ,Ee.tileID.wrap,Ee.tileID.canonical.z,Ee.tileID.canonical.x,Ee.tileID.canonical.y),this.uid=Ee.uid,this.zoom=Ee.zoom,this.pixelRatio=Ee.pixelRatio,this.tileSize=Ee.tileSize,this.source=Ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ee.showCollisionBoxes,this.collectResourceTiming=!!Ee.collectResourceTiming,this.returnDependencies=!!Ee.returnDependencies,this.promoteId=Ee.promoteId};function h(Ee,De,Ie){for(var He=new e.EvaluationParameters(De),Ye=0,tt=Ee;Ye<tt.length;Ye+=1)tt[Ye].recalculate(He,Ie)}function s(Ee,De){var Ie=e.getArrayBuffer(Ee.request,function(He,Ye,tt,ot){He?De(He):Ye&&De(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Ye)),rawData:Ye,cacheControl:tt,expires:ot})});return function(){Ie.cancel(),De()}}v.prototype.parse=function(Ee,De,Ie,He,Ye){var tt=this;this.status="parsing",this.data=Ee,this.collisionBoxArray=new e.CollisionBoxArray;var ot=new e.DictionaryCoder(Object.keys(Ee.layers).sort()),st=new e.FeatureIndex(this.tileID,this.promoteId);st.bucketLayerIDs=[];var bt,wt,Ut,Kt,vt={},Et={featureIndex:st,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ie},$t=De.familiesBySource[this.source];for(var Dt in $t){var Pt=Ee.layers[Dt];if(Pt){1===Pt.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Dt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var je=ot.encode(Dt),rt=[],pt=0;pt<Pt.length;pt++){var It=Pt.feature(pt),jt=st.getId(It,Dt);rt.push({feature:It,id:jt,index:pt,sourceLayerIndex:je})}for(var Qt=0,fn=$t[Dt];Qt<fn.length;Qt+=1){var an=fn[Qt],Sn=an[0];Sn.minzoom&&this.zoom<Math.floor(Sn.minzoom)||Sn.maxzoom&&this.zoom>=Sn.maxzoom||"none"!==Sn.visibility&&(h(an,this.zoom,Ie),(vt[Sn.id]=Sn.createBucket({index:st.bucketLayerIDs.length,layers:an,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:je,sourceID:this.source})).populate(rt,Et,this.tileID.canonical),st.bucketLayerIDs.push(an.map(function(hn){return hn.id})))}}}var Yn=e.mapObject(Et.glyphDependencies,function(hn){return Object.keys(hn).map(Number)});Object.keys(Yn).length?He.send("getGlyphs",{uid:this.uid,stacks:Yn},function(hn,Dn){bt||(bt=hn,wt=Dn,vn.call(tt))}):wt={};var kn=Object.keys(Et.iconDependencies);kn.length?He.send("getImages",{icons:kn,source:this.source,tileID:this.tileID,type:"icons"},function(hn,Dn){bt||(bt=hn,Ut=Dn,vn.call(tt))}):Ut={};var cn=Object.keys(Et.patternDependencies);function vn(){if(bt)return Ye(bt);if(wt&&Ut&&Kt){var hn=new i(wt),Dn=new e.ImageAtlas(Ut,Kt);for(var Pn in vt){var $n=vt[Pn];$n instanceof e.SymbolBucket?(h($n.layers,this.zoom,Ie),e.performSymbolLayout($n,wt,hn.positions,Ut,Dn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):$n.hasPattern&&($n instanceof e.LineBucket||$n instanceof e.FillBucket||$n instanceof e.FillExtrusionBucket)&&(h($n.layers,this.zoom,Ie),$n.addFeatures(Et,this.tileID.canonical,Dn.patternPositions))}this.status="done",Ye(null,{buckets:e.values(vt).filter(function(rr){return!rr.isEmpty()}),featureIndex:st,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:hn.image,imageAtlas:Dn,glyphMap:this.returnDependencies?wt:null,iconMap:this.returnDependencies?Ut:null,glyphPositions:this.returnDependencies?hn.positions:null})}}cn.length?He.send("getImages",{icons:cn,source:this.source,tileID:this.tileID,type:"patterns"},function(hn,Dn){bt||(bt=hn,Kt=Dn,vn.call(tt))}):Kt={},vn.call(this)};var d=function(Ee,De,Ie,He){this.actor=Ee,this.layerIndex=De,this.availableImages=Ie,this.loadVectorData=He||s,this.loading={},this.loaded={}};d.prototype.loadTile=function(Ee,De){var Ie=this,He=Ee.uid;this.loading||(this.loading={});var Ye=!!(Ee&&Ee.request&&Ee.request.collectResourceTiming)&&new e.RequestPerformance(Ee.request),tt=this.loading[He]=new v(Ee);tt.abort=this.loadVectorData(Ee,function(ot,st){if(delete Ie.loading[He],ot||!st)return tt.status="done",Ie.loaded[He]=tt,De(ot);var bt=st.rawData,wt={};st.expires&&(wt.expires=st.expires),st.cacheControl&&(wt.cacheControl=st.cacheControl);var Ut={};if(Ye){var Kt=Ye.finish();Kt&&(Ut.resourceTiming=JSON.parse(JSON.stringify(Kt)))}tt.vectorTile=st.vectorTile,tt.parse(st.vectorTile,Ie.layerIndex,Ie.availableImages,Ie.actor,function(vt,Et){if(vt||!Et)return De(vt);De(null,e.extend({rawTileData:bt.slice(0)},Et,wt,Ut))}),Ie.loaded=Ie.loaded||{},Ie.loaded[He]=tt})},d.prototype.reloadTile=function(Ee,De){var Ie=this,He=this.loaded,Ye=Ee.uid,tt=this;if(He&&He[Ye]){var ot=He[Ye];ot.showCollisionBoxes=Ee.showCollisionBoxes;var st=function(bt,wt){var Ut=ot.reloadCallback;Ut&&(delete ot.reloadCallback,ot.parse(ot.vectorTile,tt.layerIndex,Ie.availableImages,tt.actor,Ut)),De(bt,wt)};"parsing"===ot.status?ot.reloadCallback=st:"done"===ot.status&&(ot.vectorTile?ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,st):st())}},d.prototype.abortTile=function(Ee,De){var Ie=this.loading,He=Ee.uid;Ie&&Ie[He]&&Ie[He].abort&&(Ie[He].abort(),delete Ie[He]),De()},d.prototype.removeTile=function(Ee,De){var Ie=this.loaded,He=Ee.uid;Ie&&Ie[He]&&delete Ie[He],De()};var p=e.window.ImageBitmap,f=function(){this.loaded={}};f.prototype.loadTile=function(Ee,De){var Ie=Ee.uid,He=Ee.encoding,Ye=Ee.rawImageData,tt=p&&Ye instanceof p?this.getImageData(Ye):Ye,ot=new e.DEMData(Ie,tt,He);this.loaded=this.loaded||{},this.loaded[Ie]=ot,De(null,ot)},f.prototype.getImageData=function(Ee){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ee.width,Ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ee.width,this.offscreenCanvas.height=Ee.height,this.offscreenCanvasContext.drawImage(Ee,0,0,Ee.width,Ee.height);var De=this.offscreenCanvasContext.getImageData(-1,-1,Ee.width+2,Ee.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:De.width,height:De.height},De.data)},f.prototype.removeTile=function(Ee){var De=this.loaded,Ie=Ee.uid;De&&De[Ie]&&delete De[Ie]};var g=function Ee(De,Ie){var He,Ye=De&&De.type;if("FeatureCollection"===Ye)for(He=0;He<De.features.length;He++)Ee(De.features[He],Ie);else if("GeometryCollection"===Ye)for(He=0;He<De.geometries.length;He++)Ee(De.geometries[He],Ie);else if("Feature"===Ye)Ee(De.geometry,Ie);else if("Polygon"===Ye)m(De.coordinates,Ie);else if("MultiPolygon"===Ye)for(He=0;He<De.coordinates.length;He++)m(De.coordinates[He],Ie);return De};function m(Ee,De){if(0!==Ee.length){u(Ee[0],De);for(var Ie=1;Ie<Ee.length;Ie++)u(Ee[Ie],!De)}}function u(Ee,De){for(var Ie=0,He=0,Ye=Ee.length,tt=Ye-1;He<Ye;tt=He++)Ie+=(Ee[He][0]-Ee[tt][0])*(Ee[tt][1]+Ee[He][1]);Ie>=0!=!!De&&Ee.reverse()}var w=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,c=function(Ee){this._feature=Ee,this.extent=e.EXTENT,this.type=Ee.type,this.properties=Ee.tags,"id"in Ee&&!isNaN(Ee.id)&&(this.id=parseInt(Ee.id,10))};c.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Ee=[],De=0,Ie=this._feature.geometry;De<Ie.length;De+=1){var He=Ie[De];Ee.push([new e.Point$1(He[0],He[1])])}return Ee}for(var Ye=[],tt=0,ot=this._feature.geometry;tt<ot.length;tt+=1){for(var st=[],bt=0,wt=ot[tt];bt<wt.length;bt+=1){var Ut=wt[bt];st.push(new e.Point$1(Ut[0],Ut[1]))}Ye.push(st)}return Ye},c.prototype.toGeoJSON=function(Ee,De,Ie){return w.call(this,Ee,De,Ie)};var E=function(Ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Ee.length,this._features=Ee};E.prototype.feature=function(Ee){return new c(this._features[Ee])};var M=e.vectorTile.VectorTileFeature,S=C;function C(Ee,De){this.options=De||{},this.features=Ee,this.length=Ee.length}function O(Ee,De){this.id="number"==typeof Ee.id?Ee.id:void 0,this.type=Ee.type,this.rawGeometry=1===Ee.type?[Ee.geometry]:Ee.geometry,this.properties=Ee.tags,this.extent=De||4096}C.prototype.feature=function(Ee){return new O(this.features[Ee],this.options.extent)},O.prototype.loadGeometry=function(){var Ee=this.rawGeometry;this.geometry=[];for(var De=0;De<Ee.length;De++){for(var Ie=Ee[De],He=[],Ye=0;Ye<Ie.length;Ye++)He.push(new e.Point$1(Ie[Ye][0],Ie[Ye][1]));this.geometry.push(He)}return this.geometry},O.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ee=this.geometry,De=1/0,Ie=-1/0,He=1/0,Ye=-1/0,tt=0;tt<Ee.length;tt++)for(var ot=Ee[tt],st=0;st<ot.length;st++){var bt=ot[st];De=Math.min(De,bt.x),Ie=Math.max(Ie,bt.x),He=Math.min(He,bt.y),Ye=Math.max(Ye,bt.y)}return[De,He,Ie,Ye]},O.prototype.toGeoJSON=M.prototype.toGeoJSON;var I=P,L=S;function P(Ee){var De=new e.pbf;return function(Ie,He){for(var Ye in Ie.layers)He.writeMessage(3,j,Ie.layers[Ye])}(Ee,De),De.finish()}function j(Ee,De){var Ie;De.writeVarintField(15,Ee.version||1),De.writeStringField(1,Ee.name||""),De.writeVarintField(5,Ee.extent||4096);var He={keys:[],values:[],keycache:{},valuecache:{}};for(Ie=0;Ie<Ee.length;Ie++)He.feature=Ee.feature(Ie),De.writeMessage(2,U,He);var Ye=He.keys;for(Ie=0;Ie<Ye.length;Ie++)De.writeStringField(3,Ye[Ie]);var tt=He.values;for(Ie=0;Ie<tt.length;Ie++)De.writeMessage(4,J,tt[Ie])}function U(Ee,De){var Ie=Ee.feature;void 0!==Ie.id&&De.writeVarintField(1,Ie.id),De.writeMessage(2,$,Ee),De.writeVarintField(3,Ie.type),De.writeMessage(4,ae,Ie)}function $(Ee,De){var Ie=Ee.feature,He=Ee.keys,Ye=Ee.values,tt=Ee.keycache,ot=Ee.valuecache;for(var st in Ie.properties){var bt=tt[st];void 0===bt&&(He.push(st),tt[st]=bt=He.length-1),De.writeVarint(bt);var wt=Ie.properties[st],Ut=typeof wt;"string"!==Ut&&"boolean"!==Ut&&"number"!==Ut&&(wt=JSON.stringify(wt));var Kt=Ut+":"+wt,vt=ot[Kt];void 0===vt&&(Ye.push(wt),ot[Kt]=vt=Ye.length-1),De.writeVarint(vt)}}function X(Ee,De){return(De<<3)+(7&Ee)}function te(Ee){return Ee<<1^Ee>>31}function ae(Ee,De){for(var Ie=Ee.loadGeometry(),He=Ee.type,Ye=0,tt=0,ot=Ie.length,st=0;st<ot;st++){var bt=Ie[st],wt=1;1===He&&(wt=bt.length),De.writeVarint(X(1,wt));for(var Ut=3===He?bt.length-1:bt.length,Kt=0;Kt<Ut;Kt++){1===Kt&&1!==He&&De.writeVarint(X(2,Ut-1));var vt=bt[Kt].x-Ye,Et=bt[Kt].y-tt;De.writeVarint(te(vt)),De.writeVarint(te(Et)),Ye+=vt,tt+=Et}3===He&&De.writeVarint(X(7,1))}}function J(Ee,De){var Ie=typeof Ee;"string"===Ie?De.writeStringField(1,Ee):"boolean"===Ie?De.writeBooleanField(7,Ee):"number"===Ie&&(Ee%1!=0?De.writeDoubleField(3,Ee):Ee<0?De.writeSVarintField(6,Ee):De.writeVarintField(5,Ee))}function ee(Ee,De,Ie,He,Ye,tt){if(!(Ye-He<=Ie)){var ot=He+Ye>>1;(function st(bt,wt,Ut,Kt,vt,Et){for(;vt>Kt;){if(vt-Kt>600){var $t=vt-Kt+1,Dt=Ut-Kt+1,Pt=Math.log($t),je=.5*Math.exp(2*Pt/3),rt=.5*Math.sqrt(Pt*je*($t-je)/$t)*(Dt-$t/2<0?-1:1);st(bt,wt,Ut,Math.max(Kt,Math.floor(Ut-Dt*je/$t+rt)),Math.min(vt,Math.floor(Ut+($t-Dt)*je/$t+rt)),Et)}var jt=wt[2*Ut+Et],Qt=Kt,fn=vt;for(se(bt,wt,Kt,Ut),wt[2*vt+Et]>jt&&se(bt,wt,Kt,vt);Qt<fn;){for(se(bt,wt,Qt,fn),Qt++,fn--;wt[2*Qt+Et]<jt;)Qt++;for(;wt[2*fn+Et]>jt;)fn--}wt[2*Kt+Et]===jt?se(bt,wt,Kt,fn):se(bt,wt,++fn,vt),fn<=Ut&&(Kt=fn+1),Ut<=fn&&(vt=fn-1)}})(Ee,De,ot,He,Ye,tt%2),ee(Ee,De,Ie,He,ot-1,tt+1),ee(Ee,De,Ie,ot+1,Ye,tt+1)}}function se(Ee,De,Ie,He){G(Ee,Ie,He),G(De,2*Ie,2*He),G(De,2*Ie+1,2*He+1)}function G(Ee,De,Ie){var He=Ee[De];Ee[De]=Ee[Ie],Ee[Ie]=He}function H(Ee,De,Ie,He){var Ye=Ee-Ie,tt=De-He;return Ye*Ye+tt*tt}I.fromVectorTileJs=P,I.fromGeojsonVt=function(Ee,De){De=De||{};var Ie={};for(var He in Ee)Ie[He]=new S(Ee[He].features,De),Ie[He].name=He,Ie[He].version=De.version,Ie[He].extent=De.extent;return P({layers:Ie})},I.GeoJSONWrapper=L;var Y=function(Ee){return Ee[0]},oe=function(Ee){return Ee[1]},W=function(Ee,De,Ie,He,Ye){void 0===De&&(De=Y),void 0===Ie&&(Ie=oe),void 0===He&&(He=64),void 0===Ye&&(Ye=Float64Array),this.nodeSize=He,this.points=Ee;for(var tt=Ee.length<65536?Uint16Array:Uint32Array,ot=this.ids=new tt(Ee.length),st=this.coords=new Ye(2*Ee.length),bt=0;bt<Ee.length;bt++)ot[bt]=bt,st[2*bt]=De(Ee[bt]),st[2*bt+1]=Ie(Ee[bt]);ee(ot,st,He,0,ot.length-1,0)};W.prototype.range=function(Ee,De,Ie,He){return function(Ye,tt,ot,st,bt,wt,Ut){for(var Kt,vt,Et=[0,Ye.length-1,0],$t=[];Et.length;){var Dt=Et.pop(),Pt=Et.pop(),je=Et.pop();if(Pt-je<=Ut)for(var rt=je;rt<=Pt;rt++)vt=tt[2*rt+1],(Kt=tt[2*rt])>=ot&&Kt<=bt&&vt>=st&&vt<=wt&&$t.push(Ye[rt]);else{var pt=Math.floor((je+Pt)/2);vt=tt[2*pt+1],(Kt=tt[2*pt])>=ot&&Kt<=bt&&vt>=st&&vt<=wt&&$t.push(Ye[pt]);var It=(Dt+1)%2;(0===Dt?ot<=Kt:st<=vt)&&(Et.push(je),Et.push(pt-1),Et.push(It)),(0===Dt?bt>=Kt:wt>=vt)&&(Et.push(pt+1),Et.push(Pt),Et.push(It))}}return $t}(this.ids,this.coords,Ee,De,Ie,He,this.nodeSize)},W.prototype.within=function(Ee,De,Ie){return function(He,Ye,tt,ot,st,bt){for(var wt=[0,He.length-1,0],Ut=[],Kt=st*st;wt.length;){var vt=wt.pop(),Et=wt.pop(),$t=wt.pop();if(Et-$t<=bt)for(var Dt=$t;Dt<=Et;Dt++)H(Ye[2*Dt],Ye[2*Dt+1],tt,ot)<=Kt&&Ut.push(He[Dt]);else{var Pt=Math.floor(($t+Et)/2),je=Ye[2*Pt],rt=Ye[2*Pt+1];H(je,rt,tt,ot)<=Kt&&Ut.push(He[Pt]);var pt=(vt+1)%2;(0===vt?tt-st<=je:ot-st<=rt)&&(wt.push($t),wt.push(Pt-1),wt.push(pt)),(0===vt?tt+st>=je:ot+st>=rt)&&(wt.push(Pt+1),wt.push(Et),wt.push(pt))}}return Ut}(this.ids,this.coords,Ee,De,Ie,this.nodeSize)};var ne={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ee){return Ee}},re=function(Ee){this.options=Te(Object.create(ne),Ee),this.trees=new Array(this.options.maxZoom+1)};function ce(Ee,De,Ie,He,Ye){return{x:Ee,y:De,zoom:1/0,id:Ie,parentId:-1,numPoints:He,properties:Ye}}function fe(Ee,De){var Ie=Ee.geometry.coordinates,Ye=Ie[1];return{x:we(Ie[0]),y:ye(Ye),zoom:1/0,index:De,parentId:-1}}function me(Ee){return{type:"Feature",id:Ee.id,properties:pe(Ee),geometry:{type:"Point",coordinates:[(He=Ee.x,360*(He-.5)),(De=Ee.y,Ie=(180-360*De)*Math.PI/180,360*Math.atan(Math.exp(Ie))/Math.PI-90)]}};var De,Ie,He}function pe(Ee){var De=Ee.numPoints,Ie=De>=1e4?Math.round(De/1e3)+"k":De>=1e3?Math.round(De/100)/10+"k":De;return Te(Te({},Ee.properties),{cluster:!0,cluster_id:Ee.id,point_count:De,point_count_abbreviated:Ie})}function we(Ee){return Ee/360+.5}function ye(Ee){var De=Math.sin(Ee*Math.PI/180),Ie=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return Ie<0?0:Ie>1?1:Ie}function Te(Ee,De){for(var Ie in De)Ee[Ie]=De[Ie];return Ee}function Le(Ee){return Ee.x}function Oe(Ee){return Ee.y}function Re(Ee,De,Ie,He,Ye,tt){var ot=Ye-Ie,st=tt-He;if(0!==ot||0!==st){var bt=((Ee-Ie)*ot+(De-He)*st)/(ot*ot+st*st);bt>1?(Ie=Ye,He=tt):bt>0&&(Ie+=ot*bt,He+=st*bt)}return(ot=Ee-Ie)*ot+(st=De-He)*st}function Ve(Ee,De,Ie,He){var Ye={id:void 0===Ee?null:Ee,type:De,geometry:Ie,tags:He,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(tt){var ot=tt.geometry,st=tt.type;if("Point"===st||"MultiPoint"===st||"LineString"===st)_e(tt,ot);else if("Polygon"===st||"MultiLineString"===st)for(var bt=0;bt<ot.length;bt++)_e(tt,ot[bt]);else if("MultiPolygon"===st)for(bt=0;bt<ot.length;bt++)for(var wt=0;wt<ot[bt].length;wt++)_e(tt,ot[bt][wt])}(Ye),Ye}function _e(Ee,De){for(var Ie=0;Ie<De.length;Ie+=3)Ee.minX=Math.min(Ee.minX,De[Ie]),Ee.minY=Math.min(Ee.minY,De[Ie+1]),Ee.maxX=Math.max(Ee.maxX,De[Ie]),Ee.maxY=Math.max(Ee.maxY,De[Ie+1])}function Ae(Ee,De,Ie,He){if(De.geometry){var Ye=De.geometry.coordinates,tt=De.geometry.type,ot=Math.pow(Ie.tolerance/((1<<Ie.maxZoom)*Ie.extent),2),st=[],bt=De.id;if(Ie.promoteId?bt=De.properties[Ie.promoteId]:Ie.generateId&&(bt=He||0),"Point"===tt)Fe(Ye,st);else if("MultiPoint"===tt)for(var wt=0;wt<Ye.length;wt++)Fe(Ye[wt],st);else if("LineString"===tt)Pe(Ye,st,ot,!1);else if("MultiLineString"===tt){if(Ie.lineMetrics){for(wt=0;wt<Ye.length;wt++)Pe(Ye[wt],st=[],ot,!1),Ee.push(Ve(bt,"LineString",st,De.properties));return}Be(Ye,st,ot,!1)}else if("Polygon"===tt)Be(Ye,st,ot,!0);else{if("MultiPolygon"!==tt){if("GeometryCollection"===tt){for(wt=0;wt<De.geometry.geometries.length;wt++)Ae(Ee,{id:bt,geometry:De.geometry.geometries[wt],properties:De.properties},Ie,He);return}throw new Error("Input data is not a valid GeoJSON object.")}for(wt=0;wt<Ye.length;wt++){var Ut=[];Be(Ye[wt],Ut,ot,!0),st.push(Ut)}}Ee.push(Ve(bt,tt,st,De.properties))}}function Fe(Ee,De){De.push(qe(Ee[0])),De.push(We(Ee[1])),De.push(0)}function Pe(Ee,De,Ie,He){for(var Ye,tt,ot=0,st=0;st<Ee.length;st++){var bt=qe(Ee[st][0]),wt=We(Ee[st][1]);De.push(bt),De.push(wt),De.push(0),st>0&&(ot+=He?(Ye*wt-bt*tt)/2:Math.sqrt(Math.pow(bt-Ye,2)+Math.pow(wt-tt,2))),Ye=bt,tt=wt}var Ut=De.length-3;De[2]=1,function Kt(vt,Et,$t,Dt){for(var Pt,je=Dt,rt=$t-Et>>1,pt=$t-Et,It=vt[Et],jt=vt[Et+1],Qt=vt[$t],fn=vt[$t+1],an=Et+3;an<$t;an+=3){var Sn=Re(vt[an],vt[an+1],It,jt,Qt,fn);if(Sn>je)Pt=an,je=Sn;else if(Sn===je){var Yn=Math.abs(an-rt);Yn<pt&&(Pt=an,pt=Yn)}}je>Dt&&(Pt-Et>3&&Kt(vt,Et,Pt,Dt),vt[Pt+2]=je,$t-Pt>3&&Kt(vt,Pt,$t,Dt))}(De,0,Ut,Ie),De[Ut+2]=1,De.size=Math.abs(ot),De.start=0,De.end=De.size}function Be(Ee,De,Ie,He){for(var Ye=0;Ye<Ee.length;Ye++){var tt=[];Pe(Ee[Ye],tt,Ie,He),De.push(tt)}}function qe(Ee){return Ee/360+.5}function We(Ee){var De=Math.sin(Ee*Math.PI/180),Ie=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return Ie<0?0:Ie>1?1:Ie}function Je(Ee,De,Ie,He,Ye,tt,ot,st){if(He/=De,tt>=(Ie/=De)&&ot<He)return Ee;if(ot<Ie||tt>=He)return null;for(var bt=[],wt=0;wt<Ee.length;wt++){var Ut=Ee[wt],Kt=Ut.geometry,vt=Ut.type,Et=0===Ye?Ut.minX:Ut.minY,$t=0===Ye?Ut.maxX:Ut.maxY;if(Et>=Ie&&$t<He)bt.push(Ut);else if(!($t<Ie||Et>=He)){var Dt=[];if("Point"===vt||"MultiPoint"===vt)ut(Kt,Dt,Ie,He,Ye);else if("LineString"===vt)Ge(Kt,Dt,Ie,He,Ye,!1,st.lineMetrics);else if("MultiLineString"===vt)nt(Kt,Dt,Ie,He,Ye,!1);else if("Polygon"===vt)nt(Kt,Dt,Ie,He,Ye,!0);else if("MultiPolygon"===vt)for(var Pt=0;Pt<Kt.length;Pt++){var je=[];nt(Kt[Pt],je,Ie,He,Ye,!0),je.length&&Dt.push(je)}if(Dt.length){if(st.lineMetrics&&"LineString"===vt){for(Pt=0;Pt<Dt.length;Pt++)bt.push(Ve(Ut.id,vt,Dt[Pt],Ut.tags));continue}"LineString"!==vt&&"MultiLineString"!==vt||(1===Dt.length?(vt="LineString",Dt=Dt[0]):vt="MultiLineString"),"Point"!==vt&&"MultiPoint"!==vt||(vt=3===Dt.length?"Point":"MultiPoint"),bt.push(Ve(Ut.id,vt,Dt,Ut.tags))}}}return bt.length?bt:null}function ut(Ee,De,Ie,He,Ye){for(var tt=0;tt<Ee.length;tt+=3){var ot=Ee[tt+Ye];ot>=Ie&&ot<=He&&(De.push(Ee[tt]),De.push(Ee[tt+1]),De.push(Ee[tt+2]))}}function Ge(Ee,De,Ie,He,Ye,tt,ot){for(var st,bt,wt=Ke(Ee),Ut=0===Ye?ht:Tt,Kt=Ee.start,vt=0;vt<Ee.length-3;vt+=3){var Et=Ee[vt],$t=Ee[vt+1],Dt=Ee[vt+2],Pt=Ee[vt+3],je=Ee[vt+4],rt=0===Ye?Et:$t,pt=0===Ye?Pt:je,It=!1;ot&&(st=Math.sqrt(Math.pow(Et-Pt,2)+Math.pow($t-je,2))),rt<Ie?pt>Ie&&(bt=Ut(wt,Et,$t,Pt,je,Ie),ot&&(wt.start=Kt+st*bt)):rt>He?pt<He&&(bt=Ut(wt,Et,$t,Pt,je,He),ot&&(wt.start=Kt+st*bt)):it(wt,Et,$t,Dt),pt<Ie&&rt>=Ie&&(bt=Ut(wt,Et,$t,Pt,je,Ie),It=!0),pt>He&&rt<=He&&(bt=Ut(wt,Et,$t,Pt,je,He),It=!0),!tt&&It&&(ot&&(wt.end=Kt+st*bt),De.push(wt),wt=Ke(Ee)),ot&&(Kt+=st)}var jt=Ee.length-3;Et=Ee[jt],$t=Ee[jt+1],Dt=Ee[jt+2],(rt=0===Ye?Et:$t)>=Ie&&rt<=He&&it(wt,Et,$t,Dt),jt=wt.length-3,tt&&jt>=3&&(wt[jt]!==wt[0]||wt[jt+1]!==wt[1])&&it(wt,wt[0],wt[1],wt[2]),wt.length&&De.push(wt)}function Ke(Ee){var De=[];return De.size=Ee.size,De.start=Ee.start,De.end=Ee.end,De}function nt(Ee,De,Ie,He,Ye,tt){for(var ot=0;ot<Ee.length;ot++)Ge(Ee[ot],De,Ie,He,Ye,tt,!1)}function it(Ee,De,Ie,He){Ee.push(De),Ee.push(Ie),Ee.push(He)}function ht(Ee,De,Ie,He,Ye,tt){var ot=(tt-De)/(He-De);return Ee.push(tt),Ee.push(Ie+(Ye-Ie)*ot),Ee.push(1),ot}function Tt(Ee,De,Ie,He,Ye,tt){var ot=(tt-Ie)/(Ye-Ie);return Ee.push(De+(He-De)*ot),Ee.push(tt),Ee.push(1),ot}function Ct(Ee,De){for(var Ie=[],He=0;He<Ee.length;He++){var Ye,tt=Ee[He],ot=tt.type;if("Point"===ot||"MultiPoint"===ot||"LineString"===ot)Ye=Vt(tt.geometry,De);else if("MultiLineString"===ot||"Polygon"===ot){Ye=[];for(var st=0;st<tt.geometry.length;st++)Ye.push(Vt(tt.geometry[st],De))}else if("MultiPolygon"===ot)for(Ye=[],st=0;st<tt.geometry.length;st++){for(var bt=[],wt=0;wt<tt.geometry[st].length;wt++)bt.push(Vt(tt.geometry[st][wt],De));Ye.push(bt)}Ie.push(Ve(tt.id,ot,Ye,tt.tags))}return Ie}function Vt(Ee,De){var Ie=[];Ie.size=Ee.size,void 0!==Ee.start&&(Ie.start=Ee.start,Ie.end=Ee.end);for(var He=0;He<Ee.length;He+=3)Ie.push(Ee[He]+De,Ee[He+1],Ee[He+2]);return Ie}function Ft(Ee,De){if(Ee.transformed)return Ee;var Ie,He,Ye,tt=1<<Ee.z,ot=Ee.x,st=Ee.y;for(Ie=0;Ie<Ee.features.length;Ie++){var bt=Ee.features[Ie],wt=bt.geometry,Ut=bt.type;if(bt.geometry=[],1===Ut)for(He=0;He<wt.length;He+=2)bt.geometry.push(gt(wt[He],wt[He+1],De,tt,ot,st));else for(He=0;He<wt.length;He++){var Kt=[];for(Ye=0;Ye<wt[He].length;Ye+=2)Kt.push(gt(wt[He][Ye],wt[He][Ye+1],De,tt,ot,st));bt.geometry.push(Kt)}}return Ee.transformed=!0,Ee}function gt(Ee,De,Ie,He,Ye,tt){return[Math.round(Ie*(Ee*He-Ye)),Math.round(Ie*(De*He-tt))]}function ft(Ee,De,Ie,He,Ye){for(var tt=De===Ye.maxZoom?0:Ye.tolerance/((1<<De)*Ye.extent),ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ie,y:He,z:De,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},st=0;st<Ee.length;st++){ot.numFeatures++,Bt(ot,Ee[st],tt,Ye);var bt=Ee[st].minX,wt=Ee[st].minY,Ut=Ee[st].maxX,Kt=Ee[st].maxY;bt<ot.minX&&(ot.minX=bt),wt<ot.minY&&(ot.minY=wt),Ut>ot.maxX&&(ot.maxX=Ut),Kt>ot.maxY&&(ot.maxY=Kt)}return ot}function Bt(Ee,De,Ie,He){var Ye=De.geometry,tt=De.type,ot=[];if("Point"===tt||"MultiPoint"===tt)for(var st=0;st<Ye.length;st+=3)ot.push(Ye[st]),ot.push(Ye[st+1]),Ee.numPoints++,Ee.numSimplified++;else if("LineString"===tt)rn(ot,Ye,Ee,Ie,!1,!1);else if("MultiLineString"===tt||"Polygon"===tt)for(st=0;st<Ye.length;st++)rn(ot,Ye[st],Ee,Ie,"Polygon"===tt,0===st);else if("MultiPolygon"===tt)for(var bt=0;bt<Ye.length;bt++){var wt=Ye[bt];for(st=0;st<wt.length;st++)rn(ot,wt[st],Ee,Ie,!0,0===st)}if(ot.length){var Ut=De.tags||null;if("LineString"===tt&&He.lineMetrics){for(var Kt in Ut={},De.tags)Ut[Kt]=De.tags[Kt];Ut.mapbox_clip_start=Ye.start/Ye.size,Ut.mapbox_clip_end=Ye.end/Ye.size}var vt={geometry:ot,type:"Polygon"===tt||"MultiPolygon"===tt?3:"LineString"===tt||"MultiLineString"===tt?2:1,tags:Ut};null!==De.id&&(vt.id=De.id),Ee.features.push(vt)}}function rn(Ee,De,Ie,He,Ye,tt){var ot=He*He;if(He>0&&De.size<(Ye?ot:He))Ie.numPoints+=De.length/3;else{for(var st=[],bt=0;bt<De.length;bt+=3)(0===He||De[bt+2]>ot)&&(Ie.numSimplified++,st.push(De[bt]),st.push(De[bt+1])),Ie.numPoints++;Ye&&function(wt,Ut){for(var Kt=0,vt=0,Et=wt.length,$t=Et-2;vt<Et;$t=vt,vt+=2)Kt+=(wt[vt]-wt[$t])*(wt[vt+1]+wt[$t+1]);if(Kt>0===Ut)for(vt=0,Et=wt.length;vt<Et/2;vt+=2){var Dt=wt[vt],Pt=wt[vt+1];wt[vt]=wt[Et-2-vt],wt[vt+1]=wt[Et-1-vt],wt[Et-2-vt]=Dt,wt[Et-1-vt]=Pt}}(st,tt),Ee.push(st)}}function un(Ee,De){var Ie=(De=this.options=function(Ye,tt){for(var ot in tt)Ye[ot]=tt[ot];return Ye}(Object.create(this.options),De)).debug;if(Ie&&console.time("preprocess data"),De.maxZoom<0||De.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(De.promoteId&&De.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ye,tt,ot,st,bt,wt,He=function(Ye,tt){var ot=[];if("FeatureCollection"===Ye.type)for(var st=0;st<Ye.features.length;st++)Ae(ot,Ye.features[st],tt,st);else Ae(ot,"Feature"===Ye.type?Ye:{geometry:Ye},tt);return ot}(Ee,De);this.tiles={},this.tileCoords=[],Ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",De.indexMaxZoom,De.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ye=He,tt=De,ot=tt.buffer/tt.extent,st=Ye,bt=Je(Ye,1,-1-ot,ot,0,-1,2,tt),wt=Je(Ye,1,1-ot,2+ot,0,-1,2,tt),(bt||wt)&&(st=Je(Ye,1,-ot,1+ot,0,-1,2,tt)||[],bt&&(st=Ct(bt,1).concat(st)),wt&&(st=st.concat(Ct(wt,-1)))),He=st).length&&this.splitTile(He,0,0,0),Ie&&(He.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pn(Ee,De,Ie){return 32*((1<<Ee)*Ie+De)+Ee}function dn(Ee,De){var Ie=Ee.tileID.canonical;if(!this._geoJSONIndex)return De(null,null);var He=this._geoJSONIndex.getTile(Ie.z,Ie.x,Ie.y);if(!He)return De(null,null);var Ye=new E(He.features),tt=I(Ye);0===tt.byteOffset&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),De(null,{vectorTile:Ye,rawData:tt.buffer})}re.prototype.load=function(Ee){var De=this.options,Ie=De.log,He=De.minZoom,Ye=De.maxZoom,tt=De.nodeSize;Ie&&console.time("total time");var ot="prepare "+Ee.length+" points";Ie&&console.time(ot),this.points=Ee;for(var st=[],bt=0;bt<Ee.length;bt++)Ee[bt].geometry&&st.push(fe(Ee[bt],bt));this.trees[Ye+1]=new W(st,Le,Oe,tt,Float32Array),Ie&&console.timeEnd(ot);for(var wt=Ye;wt>=He;wt--){var Ut=+Date.now();st=this._cluster(st,wt),this.trees[wt]=new W(st,Le,Oe,tt,Float32Array),Ie&&console.log("z%d: %d clusters in %dms",wt,st.length,+Date.now()-Ut)}return Ie&&console.timeEnd("total time"),this},re.prototype.getClusters=function(Ee,De){var Ie=((Ee[0]+180)%360+360)%360-180,He=Math.max(-90,Math.min(90,Ee[1])),Ye=180===Ee[2]?180:((Ee[2]+180)%360+360)%360-180,tt=Math.max(-90,Math.min(90,Ee[3]));if(Ee[2]-Ee[0]>=360)Ie=-180,Ye=180;else if(Ie>Ye){var ot=this.getClusters([Ie,He,180,tt],De),st=this.getClusters([-180,He,Ye,tt],De);return ot.concat(st)}for(var bt=this.trees[this._limitZoom(De)],wt=[],Ut=0,Kt=bt.range(we(Ie),ye(tt),we(Ye),ye(He));Ut<Kt.length;Ut+=1){var Et=bt.points[Kt[Ut]];wt.push(Et.numPoints?me(Et):this.points[Et.index])}return wt},re.prototype.getChildren=function(Ee){var De=this._getOriginId(Ee),Ie=this._getOriginZoom(Ee),He="No cluster with the specified id.",Ye=this.trees[Ie];if(!Ye)throw new Error(He);var tt=Ye.points[De];if(!tt)throw new Error(He);for(var ot=this.options.radius/(this.options.extent*Math.pow(2,Ie-1)),st=[],bt=0,wt=Ye.within(tt.x,tt.y,ot);bt<wt.length;bt+=1){var Kt=Ye.points[wt[bt]];Kt.parentId===Ee&&st.push(Kt.numPoints?me(Kt):this.points[Kt.index])}if(0===st.length)throw new Error(He);return st},re.prototype.getLeaves=function(Ee,De,Ie){var He=[];return this._appendLeaves(He,Ee,De=De||10,Ie=Ie||0,0),He},re.prototype.getTile=function(Ee,De,Ie){var He=this.trees[this._limitZoom(Ee)],Ye=Math.pow(2,Ee),tt=this.options,st=tt.radius/tt.extent,bt=(Ie-st)/Ye,wt=(Ie+1+st)/Ye,Ut={features:[]};return this._addTileFeatures(He.range((De-st)/Ye,bt,(De+1+st)/Ye,wt),He.points,De,Ie,Ye,Ut),0===De&&this._addTileFeatures(He.range(1-st/Ye,bt,1,wt),He.points,Ye,Ie,Ye,Ut),De===Ye-1&&this._addTileFeatures(He.range(0,bt,st/Ye,wt),He.points,-1,Ie,Ye,Ut),Ut.features.length?Ut:null},re.prototype.getClusterExpansionZoom=function(Ee){for(var De=this._getOriginZoom(Ee)-1;De<=this.options.maxZoom;){var Ie=this.getChildren(Ee);if(De++,1!==Ie.length)break;Ee=Ie[0].properties.cluster_id}return De},re.prototype._appendLeaves=function(Ee,De,Ie,He,Ye){for(var tt=0,ot=this.getChildren(De);tt<ot.length;tt+=1){var st=ot[tt],bt=st.properties;if(bt&&bt.cluster?Ye+bt.point_count<=He?Ye+=bt.point_count:Ye=this._appendLeaves(Ee,bt.cluster_id,Ie,He,Ye):Ye<He?Ye++:Ee.push(st),Ee.length===Ie)break}return Ye},re.prototype._addTileFeatures=function(Ee,De,Ie,He,Ye,tt){for(var ot=0,st=Ee;ot<st.length;ot+=1){var bt=De[st[ot]],wt=bt.numPoints,Ut={type:1,geometry:[[Math.round(this.options.extent*(bt.x*Ye-Ie)),Math.round(this.options.extent*(bt.y*Ye-He))]],tags:wt?pe(bt):this.points[bt.index].properties},Kt=void 0;wt?Kt=bt.id:this.options.generateId?Kt=bt.index:this.points[bt.index].id&&(Kt=this.points[bt.index].id),void 0!==Kt&&(Ut.id=Kt),tt.features.push(Ut)}},re.prototype._limitZoom=function(Ee){return Math.max(this.options.minZoom,Math.min(Ee,this.options.maxZoom+1))},re.prototype._cluster=function(Ee,De){for(var Ie=[],He=this.options,ot=He.reduce,st=He.radius/(He.extent*Math.pow(2,De)),bt=0;bt<Ee.length;bt++){var wt=Ee[bt];if(!(wt.zoom<=De)){wt.zoom=De;for(var Ut=this.trees[De+1],Kt=Ut.within(wt.x,wt.y,st),vt=wt.numPoints||1,Et=wt.x*vt,$t=wt.y*vt,Dt=ot&&vt>1?this._map(wt,!0):null,Pt=(bt<<5)+(De+1)+this.points.length,je=0,rt=Kt;je<rt.length;je+=1){var It=Ut.points[rt[je]];if(!(It.zoom<=De)){It.zoom=De;var jt=It.numPoints||1;Et+=It.x*jt,$t+=It.y*jt,vt+=jt,It.parentId=Pt,ot&&(Dt||(Dt=this._map(wt,!0)),ot(Dt,this._map(It)))}}1===vt?Ie.push(wt):(wt.parentId=Pt,Ie.push(ce(Et/vt,$t/vt,Pt,vt,Dt)))}}return Ie},re.prototype._getOriginId=function(Ee){return Ee-this.points.length>>5},re.prototype._getOriginZoom=function(Ee){return(Ee-this.points.length)%32},re.prototype._map=function(Ee,De){if(Ee.numPoints)return De?Te({},Ee.properties):Ee.properties;var Ie=this.points[Ee.index].properties,He=this.options.map(Ie);return De&&He===Ie?Te({},He):He},un.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},un.prototype.splitTile=function(Ee,De,Ie,He,Ye,tt,ot){for(var st=[Ee,De,Ie,He],bt=this.options,wt=bt.debug;st.length;){He=st.pop(),Ie=st.pop(),De=st.pop(),Ee=st.pop();var Ut=1<<De,Kt=pn(De,Ie,He),vt=this.tiles[Kt];if(!vt&&(wt>1&&console.time("creation"),vt=this.tiles[Kt]=ft(Ee,De,Ie,He,bt),this.tileCoords.push({z:De,x:Ie,y:He}),wt)){wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",De,Ie,He,vt.numFeatures,vt.numPoints,vt.numSimplified),console.timeEnd("creation"));var Et="z"+De;this.stats[Et]=(this.stats[Et]||0)+1,this.total++}if(vt.source=Ee,Ye){if(De===bt.maxZoom||De===Ye)continue;var $t=1<<Ye-De;if(Ie!==Math.floor(tt/$t)||He!==Math.floor(ot/$t))continue}else if(De===bt.indexMaxZoom||vt.numPoints<=bt.indexMaxPoints)continue;if(vt.source=null,0!==Ee.length){wt>1&&console.time("clipping");var Dt,Pt,je,rt,pt,It,jt=.5*bt.buffer/bt.extent,Qt=.5-jt,fn=.5+jt,an=1+jt;Dt=Pt=je=rt=null,pt=Je(Ee,Ut,Ie-jt,Ie+fn,0,vt.minX,vt.maxX,bt),It=Je(Ee,Ut,Ie+Qt,Ie+an,0,vt.minX,vt.maxX,bt),Ee=null,pt&&(Dt=Je(pt,Ut,He-jt,He+fn,1,vt.minY,vt.maxY,bt),Pt=Je(pt,Ut,He+Qt,He+an,1,vt.minY,vt.maxY,bt),pt=null),It&&(je=Je(It,Ut,He-jt,He+fn,1,vt.minY,vt.maxY,bt),rt=Je(It,Ut,He+Qt,He+an,1,vt.minY,vt.maxY,bt),It=null),wt>1&&console.timeEnd("clipping"),st.push(Dt||[],De+1,2*Ie,2*He),st.push(Pt||[],De+1,2*Ie,2*He+1),st.push(je||[],De+1,2*Ie+1,2*He),st.push(rt||[],De+1,2*Ie+1,2*He+1)}}},un.prototype.getTile=function(Ee,De,Ie){var He=this.options,Ye=He.extent,tt=He.debug;if(Ee<0||Ee>24)return null;var ot=1<<Ee,st=pn(Ee,De=(De%ot+ot)%ot,Ie);if(this.tiles[st])return Ft(this.tiles[st],Ye);tt>1&&console.log("drilling down to z%d-%d-%d",Ee,De,Ie);for(var bt,wt=Ee,Ut=De,Kt=Ie;!bt&&wt>0;)wt--,Ut=Math.floor(Ut/2),Kt=Math.floor(Kt/2),bt=this.tiles[pn(wt,Ut,Kt)];return bt&&bt.source?(tt>1&&console.log("found parent tile z%d-%d-%d",wt,Ut,Kt),tt>1&&console.time("drilling down"),this.splitTile(bt.source,wt,Ut,Kt,Ee,De,Ie),tt>1&&console.timeEnd("drilling down"),this.tiles[st]?Ft(this.tiles[st],Ye):null):null};var Mn=function(Ee){function De(Ie,He,Ye,tt){Ee.call(this,Ie,He,Ye,dn),tt&&(this.loadGeoJSON=tt)}return Ee&&(De.__proto__=Ee),(De.prototype=Object.create(Ee&&Ee.prototype)).constructor=De,De.prototype.loadData=function(Ie,He){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=He,this._pendingLoadDataParams=Ie,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},De.prototype._loadData=function(){var Ie=this;if(this._pendingCallback&&this._pendingLoadDataParams){var He=this._pendingCallback,Ye=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var tt=!!(Ye&&Ye.request&&Ye.request.collectResourceTiming)&&new e.RequestPerformance(Ye.request);this.loadGeoJSON(Ye,function(ot,st){if(ot||!st)return He(ot);if("object"!=typeof st)return He(new Error("Input data given to '"+Ye.source+"' is not a valid GeoJSON object."));g(st,!0);try{Ie._geoJSONIndex=Ye.cluster?new re(function(Ut){var Kt=Ut.superclusterOptions,vt=Ut.clusterProperties;if(!vt||!Kt)return Kt;for(var Et={},$t={},Dt={accumulated:null,zoom:0},Pt={properties:null},je=Object.keys(vt),rt=0,pt=je;rt<pt.length;rt+=1){var It=pt[rt],jt=vt[It],Qt=jt[0],an=e.createExpression(jt[1]),Sn=e.createExpression("string"==typeof Qt?[Qt,["accumulated"],["get",It]]:Qt);Et[It]=an.value,$t[It]=Sn.value}return Kt.map=function(Yn){Pt.properties=Yn;for(var kn={},cn=0,vn=je;cn<vn.length;cn+=1){var hn=vn[cn];kn[hn]=Et[hn].evaluate(Dt,Pt)}return kn},Kt.reduce=function(Yn,kn){Pt.properties=kn;for(var cn=0,vn=je;cn<vn.length;cn+=1){var hn=vn[cn];Dt.accumulated=Yn[hn],Yn[hn]=$t[hn].evaluate(Dt,Pt)}},Kt}(Ye)).load(st.features):new un(Ut=st,Ye.geojsonVtOptions)}catch(Ut){return He(Ut)}var Ut;Ie.loaded={};var bt={};if(tt){var wt=tt.finish();wt&&(bt.resourceTiming={},bt.resourceTiming[Ye.source]=JSON.parse(JSON.stringify(wt)))}He(null,bt)})}},De.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},De.prototype.reloadTile=function(Ie,He){var Ye=this.loaded;return Ye&&Ye[Ie.uid]?Ee.prototype.reloadTile.call(this,Ie,He):this.loadTile(Ie,He)},De.prototype.loadGeoJSON=function(Ie,He){if(Ie.request)e.getJSON(Ie.request,He);else{if("string"!=typeof Ie.data)return He(new Error("Input data given to '"+Ie.source+"' is not a valid GeoJSON object."));try{return He(null,JSON.parse(Ie.data))}catch(Ye){return He(new Error("Input data given to '"+Ie.source+"' is not a valid GeoJSON object."))}}},De.prototype.removeSource=function(Ie,He){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),He()},De.prototype.getClusterExpansionZoom=function(Ie,He){try{He(null,this._geoJSONIndex.getClusterExpansionZoom(Ie.clusterId))}catch(Ye){He(Ye)}},De.prototype.getClusterChildren=function(Ie,He){try{He(null,this._geoJSONIndex.getChildren(Ie.clusterId))}catch(Ye){He(Ye)}},De.prototype.getClusterLeaves=function(Ie,He){try{He(null,this._geoJSONIndex.getLeaves(Ie.clusterId,Ie.limit,Ie.offset))}catch(Ye){He(Ye)}},De}(d),ln=function(Ee){var De=this;this.self=Ee,this.actor=new e.Actor(Ee,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:Mn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ie,He){if(De.workerSourceTypes[Ie])throw new Error('Worker source with name "'+Ie+'" already registered.');De.workerSourceTypes[Ie]=He},this.self.registerRTLTextPlugin=function(Ie){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Ie.applyArabicShaping,e.plugin.processBidirectionalText=Ie.processBidirectionalText,e.plugin.processStyledBidirectionalText=Ie.processStyledBidirectionalText}};return ln.prototype.setReferrer=function(Ee,De){this.referrer=De},ln.prototype.setImages=function(Ee,De,Ie){for(var He in this.availableImages[Ee]=De,this.workerSources[Ee]){var Ye=this.workerSources[Ee][He];for(var tt in Ye)Ye[tt].availableImages=De}Ie()},ln.prototype.setLayers=function(Ee,De,Ie){this.getLayerIndex(Ee).replace(De),Ie()},ln.prototype.updateLayers=function(Ee,De,Ie){this.getLayerIndex(Ee).update(De.layers,De.removedIds),Ie()},ln.prototype.loadTile=function(Ee,De,Ie){this.getWorkerSource(Ee,De.type,De.source).loadTile(De,Ie)},ln.prototype.loadDEMTile=function(Ee,De,Ie){this.getDEMWorkerSource(Ee,De.source).loadTile(De,Ie)},ln.prototype.reloadTile=function(Ee,De,Ie){this.getWorkerSource(Ee,De.type,De.source).reloadTile(De,Ie)},ln.prototype.abortTile=function(Ee,De,Ie){this.getWorkerSource(Ee,De.type,De.source).abortTile(De,Ie)},ln.prototype.removeTile=function(Ee,De,Ie){this.getWorkerSource(Ee,De.type,De.source).removeTile(De,Ie)},ln.prototype.removeDEMTile=function(Ee,De){this.getDEMWorkerSource(Ee,De.source).removeTile(De)},ln.prototype.removeSource=function(Ee,De,Ie){if(this.workerSources[Ee]&&this.workerSources[Ee][De.type]&&this.workerSources[Ee][De.type][De.source]){var He=this.workerSources[Ee][De.type][De.source];delete this.workerSources[Ee][De.type][De.source],void 0!==He.removeSource?He.removeSource(De,Ie):Ie()}},ln.prototype.loadWorkerSource=function(Ee,De,Ie){try{this.self.importScripts(De.url),Ie()}catch(He){Ie(He.toString())}},ln.prototype.syncRTLPluginState=function(Ee,De,Ie){try{e.plugin.setState(De);var He=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=He){this.self.importScripts(He);var Ye=e.plugin.isParsed();Ie(Ye?void 0:new Error("RTL Text Plugin failed to import scripts from "+He),Ye)}}catch(tt){Ie(tt.toString())}},ln.prototype.getAvailableImages=function(Ee){var De=this.availableImages[Ee];return De||(De=[]),De},ln.prototype.getLayerIndex=function(Ee){var De=this.layerIndexes[Ee];return De||(De=this.layerIndexes[Ee]=new l),De},ln.prototype.getWorkerSource=function(Ee,De,Ie){var He=this;return this.workerSources[Ee]||(this.workerSources[Ee]={}),this.workerSources[Ee][De]||(this.workerSources[Ee][De]={}),this.workerSources[Ee][De][Ie]||(this.workerSources[Ee][De][Ie]=new this.workerSourceTypes[De]({send:function(tt,ot,st){He.actor.send(tt,ot,st,Ee)}},this.getLayerIndex(Ee),this.getAvailableImages(Ee))),this.workerSources[Ee][De][Ie]},ln.prototype.getDEMWorkerSource=function(Ee,De){return this.demWorkerSources[Ee]||(this.demWorkerSources[Ee]={}),this.demWorkerSources[Ee][De]||(this.demWorkerSources[Ee][De]=new f),this.demWorkerSources[Ee][De]},ln.prototype.enforceCacheSizeLimit=function(Ee,De){e.enforceCacheSizeLimit(De)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new ln(e.window)),ln}),_(0,function(e){var o=e.createCommonjsModule(function(R){function B(de){return!q(de)}function q(de){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var be,Me,Ce=new Blob([""],{type:"text/javascript"}),Ne=URL.createObjectURL(Ce);try{Me=new Worker(Ne),be=!0}catch($e){be=!1}return Me&&Me.terminate(),URL.revokeObjectURL(Ne),be}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var be=document.createElement("canvas");be.width=be.height=1;var Me=be.getContext("2d");if(!Me)return!1;var Ce=Me.getImageData(0,0,1,1);return Ce&&Ce.width===be.width}()?(void 0===K[be=de&&de.failIfMajorPerformanceCaveat]&&(K[be]=function(Me){var $e,at,dt,Ce=($e=Me,at=document.createElement("canvas"),(dt=Object.create(B.webGLContextAttributes)).failIfMajorPerformanceCaveat=$e,at.probablySupportsContext?at.probablySupportsContext("webgl",dt)||at.probablySupportsContext("experimental-webgl",dt):at.supportsContext?at.supportsContext("webgl",dt)||at.supportsContext("experimental-webgl",dt):at.getContext("webgl",dt)||at.getContext("experimental-webgl",dt));if(!Ce)return!1;var Ne=Ce.createShader(Ce.VERTEX_SHADER);return!(!Ne||Ce.isContextLost())&&(Ce.shaderSource(Ne,"void main() {}"),Ce.compileShader(Ne),!0===Ce.getShaderParameter(Ne,Ce.COMPILE_STATUS))}(be)),K[be]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var be}R.exports?R.exports=B:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=B,window.mapboxgl.notSupportedReason=q);var K={};B.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),a={create:function(R,B,q){var K=e.window.document.createElement(R);return void 0!==B&&(K.className=B),q&&q.appendChild(K),K},createNS:function(R,B){return e.window.document.createElementNS(R,B)}},l=e.window.document.documentElement.style;function i(R){if(!l)return R[0];for(var B=0;B<R.length;B++)if(R[B]in l)return R[B];return R[0]}var v,h=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);a.disableDrag=function(){l&&h&&(v=l[h],l[h]="none")},a.enableDrag=function(){l&&h&&(l[h]=v)};var s=i(["transform","WebkitTransform"]);a.setTransform=function(R,B){R.style[s]=B};var d=!1;try{var p=Object.defineProperty({},"passive",{get:function(){d=!0}});e.window.addEventListener("test",p,p),e.window.removeEventListener("test",p,p)}catch(R){d=!1}a.addEventListener=function(R,B,q,K){void 0===K&&(K={}),R.addEventListener(B,q,"passive"in K&&d?K:K.capture)},a.removeEventListener=function(R,B,q,K){void 0===K&&(K={}),R.removeEventListener(B,q,"passive"in K&&d?K:K.capture)};var f=function(R){R.preventDefault(),R.stopPropagation(),e.window.removeEventListener("click",f,!0)};function g(R){var B=R.userImage;return!!(B&&B.render&&B.render())&&(R.data.replace(new Uint8Array(B.data.buffer)),!0)}a.suppressClick=function(){e.window.addEventListener("click",f,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",f,!0)},0)},a.mousePos=function(R,B){var q=R.getBoundingClientRect();return new e.Point(B.clientX-q.left-R.clientLeft,B.clientY-q.top-R.clientTop)},a.touchPos=function(R,B){for(var q=R.getBoundingClientRect(),K=[],de=0;de<B.length;de++)K.push(new e.Point(B[de].clientX-q.left-R.clientLeft,B[de].clientY-q.top-R.clientTop));return K},a.mouseButton=function(R){return void 0!==e.window.InstallTrigger&&2===R.button&&R.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:R.button},a.remove=function(R){R.parentNode&&R.parentNode.removeChild(R)};var m=function(R){function B(){R.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.isLoaded=function(){return this.loaded},B.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var K=0,de=this.requestors;K<de.length;K+=1){var be=de[K];this._notify(be.ids,be.callback)}this.requestors=[]}},B.prototype.getImage=function(q){return this.images[q]},B.prototype.addImage=function(q,K){this._validate(q,K)&&(this.images[q]=K)},B.prototype._validate=function(q,K){var de=!0;return this._validateStretch(K.stretchX,K.data&&K.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),de=!1),this._validateStretch(K.stretchY,K.data&&K.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),de=!1),this._validateContent(K.content,K)||(this.fire(new e.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),de=!1),de},B.prototype._validateStretch=function(q,K){if(!q)return!0;for(var de=0,be=0,Me=q;be<Me.length;be+=1){var Ce=Me[be];if(Ce[0]<de||Ce[1]<Ce[0]||K<Ce[1])return!1;de=Ce[1]}return!0},B.prototype._validateContent=function(q,K){return!(q&&(4!==q.length||q[0]<0||K.data.width<q[0]||q[1]<0||K.data.height<q[1]||q[2]<0||K.data.width<q[2]||q[3]<0||K.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))},B.prototype.updateImage=function(q,K){K.version=this.images[q].version+1,this.images[q]=K,this.updatedImages[q]=!0},B.prototype.removeImage=function(q){var K=this.images[q];delete this.images[q],delete this.patterns[q],K.userImage&&K.userImage.onRemove&&K.userImage.onRemove()},B.prototype.listImages=function(){return Object.keys(this.images)},B.prototype.getImages=function(q,K){var de=!0;if(!this.isLoaded())for(var be=0,Me=q;be<Me.length;be+=1)this.images[Me[be]]||(de=!1);this.isLoaded()||de?this._notify(q,K):this.requestors.push({ids:q,callback:K})},B.prototype._notify=function(q,K){for(var de={},be=0,Me=q;be<Me.length;be+=1){var Ce=Me[be];this.images[Ce]||this.fire(new e.Event("styleimagemissing",{id:Ce}));var Ne=this.images[Ce];Ne?de[Ce]={data:Ne.data.clone(),pixelRatio:Ne.pixelRatio,sdf:Ne.sdf,version:Ne.version,stretchX:Ne.stretchX,stretchY:Ne.stretchY,content:Ne.content,hasRenderCallback:Boolean(Ne.userImage&&Ne.userImage.render)}:e.warnOnce('Image "'+Ce+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}K(null,de)},B.prototype.getPixelSize=function(){var q=this.atlasImage;return{width:q.width,height:q.height}},B.prototype.getPattern=function(q){var K=this.patterns[q],de=this.getImage(q);if(!de)return null;if(K&&K.position.version===de.version)return K.position;if(K)K.position.version=de.version;else{var be={w:de.data.width+2,h:de.data.height+2,x:0,y:0},Me=new e.ImagePosition(be,de);this.patterns[q]={bin:be,position:Me}}return this._updatePatternAtlas(),this.patterns[q].position},B.prototype.bind=function(q){var K=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(q,this.atlasImage,K.RGBA),this.atlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE)},B.prototype._updatePatternAtlas=function(){var q=[];for(var K in this.patterns)q.push(this.patterns[K].bin);var de=e.potpack(q),be=de.w,Me=de.h,Ce=this.atlasImage;for(var Ne in Ce.resize({width:be||1,height:Me||1}),this.patterns){var $e=this.patterns[Ne].bin,at=$e.x+1,dt=$e.y+1,Ot=this.images[Ne].data,zt=Ot.width,Rt=Ot.height;e.RGBAImage.copy(Ot,Ce,{x:0,y:0},{x:at,y:dt},{width:zt,height:Rt}),e.RGBAImage.copy(Ot,Ce,{x:0,y:Rt-1},{x:at,y:dt-1},{width:zt,height:1}),e.RGBAImage.copy(Ot,Ce,{x:0,y:0},{x:at,y:dt+Rt},{width:zt,height:1}),e.RGBAImage.copy(Ot,Ce,{x:zt-1,y:0},{x:at-1,y:dt},{width:1,height:Rt}),e.RGBAImage.copy(Ot,Ce,{x:0,y:0},{x:at+zt,y:dt},{width:1,height:Rt})}this.dirty=!0},B.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},B.prototype.dispatchRenderCallbacks=function(q){for(var K=0,de=q;K<de.length;K+=1){var be=de[K];if(!this.callbackDispatchedThisFrame[be]){this.callbackDispatchedThisFrame[be]=!0;var Me=this.images[be];g(Me)&&this.updateImage(be,Me)}}},B}(e.Evented),u=E,w=E,c=1e20;function E(R,B,q,K,de,be){this.fontSize=R||24,this.buffer=void 0===B?3:B,this.cutoff=K||.25,this.fontFamily=de||"sans-serif",this.fontWeight=be||"normal",this.radius=q||8;var Me=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Me,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Me*Me),this.gridInner=new Float64Array(Me*Me),this.f=new Float64Array(Me),this.d=new Float64Array(Me),this.z=new Float64Array(Me+1),this.v=new Int16Array(Me),this.middle=Math.round(Me/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(R,B,q,K,de,be,Me){for(var Ce=0;Ce<B;Ce++){for(var Ne=0;Ne<q;Ne++)K[Ne]=R[Ne*B+Ce];for(S(K,de,be,Me,q),Ne=0;Ne<q;Ne++)R[Ne*B+Ce]=de[Ne]}for(Ne=0;Ne<q;Ne++){for(Ce=0;Ce<B;Ce++)K[Ce]=R[Ne*B+Ce];for(S(K,de,be,Me,B),Ce=0;Ce<B;Ce++)R[Ne*B+Ce]=Math.sqrt(de[Ce])}}function S(R,B,q,K,de){q[0]=0,K[0]=-c,K[1]=+c;for(var be=1,Me=0;be<de;be++){for(var Ce=(R[be]+be*be-(R[q[Me]]+q[Me]*q[Me]))/(2*be-2*q[Me]);Ce<=K[Me];)Me--,Ce=(R[be]+be*be-(R[q[Me]]+q[Me]*q[Me]))/(2*be-2*q[Me]);q[++Me]=be,K[Me]=Ce,K[Me+1]=+c}for(be=0,Me=0;be<de;be++){for(;K[Me+1]<be;)Me++;B[be]=(be-q[Me])*(be-q[Me])+R[q[Me]]}}E.prototype.draw=function(R){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(R,this.buffer,this.middle);for(var B=this.ctx.getImageData(0,0,this.size,this.size),q=new Uint8ClampedArray(this.size*this.size),K=0;K<this.size*this.size;K++){var de=B.data[4*K+3]/255;this.gridOuter[K]=1===de?0:0===de?c:Math.pow(Math.max(0,.5-de),2),this.gridInner[K]=1===de?c:0===de?0:Math.pow(Math.max(0,de-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),K=0;K<this.size*this.size;K++)q[K]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[K]-this.gridInner[K])/this.radius+this.cutoff))));return q},u.default=w;var C=function(R,B){this.requestManager=R,this.localIdeographFontFamily=B,this.entries={}};C.prototype.setURL=function(R){this.url=R},C.prototype.getGlyphs=function(R,B){var q=this,K=[];for(var de in R)for(var be=0,Me=R[de];be<Me.length;be+=1)K.push({stack:de,id:Me[be]});e.asyncAll(K,function(Ne,$e){var at=Ne.stack,dt=Ne.id,Ot=q.entries[at];Ot||(Ot=q.entries[at]={glyphs:{},requests:{},ranges:{}});var zt=Ot.glyphs[dt];if(void 0===zt){if(zt=q._tinySDF(Ot,at,dt))return Ot.glyphs[dt]=zt,void $e(null,{stack:at,id:dt,glyph:zt});var Rt=Math.floor(dt/256);if(256*Rt>65535)$e(new Error("glyphs > 65535 not supported"));else if(Ot.ranges[Rt])$e(null,{stack:at,id:dt,glyph:zt});else{var Nt=Ot.requests[Rt];Nt||(Nt=Ot.requests[Rt]=[],C.loadGlyphRange(at,Rt,q.url,q.requestManager,function(Lt,Yt){if(Yt){for(var Gt in Yt)q._doesCharSupportLocalGlyph(+Gt)||(Ot.glyphs[+Gt]=Yt[+Gt]);Ot.ranges[Rt]=!0}for(var Xt=0,bn=Nt;Xt<bn.length;Xt+=1)(0,bn[Xt])(Lt,Yt);delete Ot.requests[Rt]})),Nt.push(function(Lt,Yt){Lt?$e(Lt):Yt&&$e(null,{stack:at,id:dt,glyph:Yt[dt]||null})})}}else $e(null,{stack:at,id:dt,glyph:zt})},function(Ne,$e){if(Ne)B(Ne);else if($e){for(var at={},dt=0,Ot=$e;dt<Ot.length;dt+=1){var zt=Ot[dt],Rt=zt.stack,Nt=zt.id,Lt=zt.glyph;(at[Rt]||(at[Rt]={}))[Nt]=Lt&&{id:Lt.id,bitmap:Lt.bitmap.clone(),metrics:Lt.metrics}}B(null,at)}})},C.prototype._doesCharSupportLocalGlyph=function(R){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](R)||e.isChar["Hangul Syllables"](R)||e.isChar.Hiragana(R)||e.isChar.Katakana(R))},C.prototype._tinySDF=function(R,B,q){var K=this.localIdeographFontFamily;if(K&&this._doesCharSupportLocalGlyph(q)){var de=R.tinySDF;if(!de){var be="400";/bold/i.test(B)?be="900":/medium/i.test(B)?be="500":/light/i.test(B)&&(be="200"),de=R.tinySDF=new C.TinySDF(24,3,8,.25,K,be)}return{id:q,bitmap:new e.AlphaImage({width:30,height:30},de.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},C.loadGlyphRange=function(R,B,q,K,de){var be=256*B,Me=be+255,Ce=K.transformRequest(K.normalizeGlyphsURL(q).replace("{fontstack}",R).replace("{range}",be+"-"+Me),e.ResourceType.Glyphs);e.getArrayBuffer(Ce,function(Ne,$e){if(Ne)de(Ne);else if($e){for(var at={},dt=0,Ot=e.parseGlyphPBF($e);dt<Ot.length;dt+=1){var zt=Ot[dt];at[zt.id]=zt}de(null,at)}})},C.TinySDF=u;var O=function(){this.specification=e.styleSpec.light.position};O.prototype.possiblyEvaluate=function(R,B){return e.sphericalToCartesian(R.expression.evaluate(B))},O.prototype.interpolate=function(R,B,q){return{x:e.number(R.x,B.x,q),y:e.number(R.y,B.y,q),z:e.number(R.z,B.z,q)}};var I=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new O,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),N=function(R){function B(q){R.call(this),this._transitionable=new e.Transitionable(I),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getLight=function(){return this._transitionable.serialize()},B.prototype.setLight=function(q,K){if(void 0===K&&(K={}),!this._validate(e.validateLight,q,K))for(var de in q){var be=q[de];e.endsWith(de,"-transition")?this._transitionable.setTransition(de.slice(0,-11),be):this._transitionable.setValue(de,be)}},B.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},B.prototype.hasTransition=function(){return this._transitioning.hasTransition()},B.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},B.prototype._validate=function(q,K,de){return(!de||!1!==de.validate)&&e.emitValidationErrors(this,q.call(e.validateStyle,e.extend({value:K,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},B}(e.Evented),F=function(R,B){this.width=R,this.height=B,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};F.prototype.getDash=function(R,B){var q=R.join(",")+String(B);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(R,B)),this.dashEntry[q]},F.prototype.getDashRanges=function(R,B,q){var K=[],de=R.length%2==1?-R[R.length-1]*q:0,be=R[0]*q,Me=!0;K.push({left:de,right:be,isDash:Me,zeroLength:0===R[0]});for(var Ce=R[0],Ne=1;Ne<R.length;Ne++){var $e=R[Ne];de=Ce*q,be=(Ce+=$e)*q,K.push({left:de,right:be,isDash:Me=!Me,zeroLength:0===$e})}return K},F.prototype.addRoundDash=function(R,B,q){for(var K=B/2,de=-q;de<=q;de++)for(var Me=this.width*(this.nextRow+q+de),Ce=0,Ne=R[Ce],$e=0;$e<this.width;$e++){$e/Ne.right>1&&(Ne=R[++Ce]);var at=Math.abs($e-Ne.left),dt=Math.abs($e-Ne.right),Ot=Math.min(at,dt),zt=void 0,Rt=de/q*(K+1);if(Ne.isDash){var Nt=K-Math.abs(Rt);zt=Math.sqrt(Ot*Ot+Nt*Nt)}else zt=K-Math.sqrt(Ot*Ot+Rt*Rt);this.data[Me+$e]=Math.max(0,Math.min(255,zt+128))}},F.prototype.addRegularDash=function(R){for(var B=R.length-1;B>=0;--B){var q=R[B],K=R[B+1];q.zeroLength?R.splice(B,1):K&&K.isDash===q.isDash&&(K.left=q.left,R.splice(B,1))}var de=R[0],be=R[R.length-1];de.isDash===be.isDash&&(de.left=be.left-this.width,be.right=de.right+this.width);for(var Me=this.width*this.nextRow,Ce=0,Ne=R[Ce],$e=0;$e<this.width;$e++){$e/Ne.right>1&&(Ne=R[++Ce]);var at=Math.abs($e-Ne.left),dt=Math.abs($e-Ne.right),Ot=Math.min(at,dt);this.data[Me+$e]=Math.max(0,Math.min(255,(Ne.isDash?Ot:-Ot)+128))}},F.prototype.addDash=function(R,B){var q=B?7:0,K=2*q+1;if(this.nextRow+K>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var de=0,be=0;be<R.length;be++)de+=R[be];if(0!==de){var Me=this.width/de,Ce=this.getDashRanges(R,this.width,Me);B?this.addRoundDash(Ce,Me,q):this.addRegularDash(Ce)}var Ne={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:de};return this.nextRow+=K,this.dirty=!0,Ne},F.prototype.bind=function(R){var B=R.gl;this.texture?(B.bindTexture(B.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,B.texSubImage2D(B.TEXTURE_2D,0,0,0,this.width,this.height,B.ALPHA,B.UNSIGNED_BYTE,this.data))):(this.texture=B.createTexture(),B.bindTexture(B.TEXTURE_2D,this.texture),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.REPEAT),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.REPEAT),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR),B.texImage2D(B.TEXTURE_2D,0,B.ALPHA,this.width,this.height,0,B.ALPHA,B.UNSIGNED_BYTE,this.data))};var L=function R(B,q){this.workerPool=B,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var K=this.workerPool.acquire(this.id),de=0;de<K.length;de++){var Me=new R.Actor(K[de],q,this.id);Me.name="Worker "+de,this.actors.push(Me)}};function P(R,B,q){var K=function(de,be){if(de)return q(de);if(be){var Me=e.pick(e.extend(be,R),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);be.vector_layers&&(Me.vectorLayers=be.vector_layers,Me.vectorLayerIds=Me.vectorLayers.map(function(Ce){return Ce.id})),Me.tiles=B.canonicalizeTileset(Me,R.url),q(null,Me)}};return R.url?e.getJSON(B.transformRequest(B.normalizeSourceURL(R.url),e.ResourceType.Source),K):e.browser.frame(function(){return K(null,R)})}L.prototype.broadcast=function(R,B,q){e.asyncAll(this.actors,function(K,de){K.send(R,B,de)},q=q||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(R){R.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=e.Actor;var j=function(R,B,q){this.bounds=e.LngLatBounds.convert(this.validateBounds(R)),this.minzoom=B||0,this.maxzoom=q||24};j.prototype.validateBounds=function(R){return Array.isArray(R)&&4===R.length?[Math.max(-180,R[0]),Math.max(-90,R[1]),Math.min(180,R[2]),Math.min(90,R[3])]:[-180,-90,180,90]},j.prototype.contains=function(R){var B=Math.pow(2,R.z),q=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*B),K=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*B),de=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*B),be=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*B);return R.x>=q&&R.x<de&&R.y>=K&&R.y<be};var U=function(R){function B(q,K,de,be){if(R.call(this),this.id=q,this.dispatcher=de,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(K,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},K),this._collectResourceTiming=K.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(be)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,function(K,de){q._tileJSONRequest=null,q._loaded=!0,K?q.fire(new e.ErrorEvent(K)):de&&(e.extend(q,de),de.bounds&&(q.tileBounds=new j(de.bounds,q.minzoom,q.maxzoom)),e.postTurnstileEvent(de.tiles,q.map._requestManager._customAccessToken),e.postMapLoadEvent(de.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},B.prototype.loaded=function(){return this._loaded},B.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},B.prototype.onAdd=function(q){this.map=q,this.load()},B.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},B.prototype.serialize=function(){return e.extend({},this._options)},B.prototype.loadTile=function(q,K){var de=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),be={request:this.map._requestManager.transformRequest(de,e.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Me(Ce,Ne){return delete q.request,q.aborted?K(null):Ce&&404!==Ce.status?K(Ce):(Ne&&Ne.resourceTiming&&(q.resourceTiming=Ne.resourceTiming),this.map._refreshExpiredTiles&&Ne&&q.setExpiryData(Ne),q.loadVectorData(Ne,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),K(null),void(q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)))}be.request.collectResourceTiming=this._collectResourceTiming,q.actor&&"expired"!==q.state?"loading"===q.state?q.reloadCallback=K:q.request=q.actor.send("reloadTile",be,Me.bind(this)):(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",be,Me.bind(this)))},B.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},B.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},B.prototype.hasTransition=function(){return!1},B}(e.Evented),$=function(R){function B(q,K,de,be){R.call(this),this.id=q,this.dispatcher=de,this.setEventedParent(be),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},K),e.extend(this,e.pick(K,["url","scheme","tileSize"]))}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,function(K,de){q._tileJSONRequest=null,q._loaded=!0,K?q.fire(new e.ErrorEvent(K)):de&&(e.extend(q,de),de.bounds&&(q.tileBounds=new j(de.bounds,q.minzoom,q.maxzoom)),e.postTurnstileEvent(de.tiles),e.postMapLoadEvent(de.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},B.prototype.loaded=function(){return this._loaded},B.prototype.onAdd=function(q){this.map=q,this.load()},B.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},B.prototype.serialize=function(){return e.extend({},this._options)},B.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},B.prototype.loadTile=function(q,K){var de=this,be=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=e.getImage(this.map._requestManager.transformRequest(be,e.ResourceType.Tile),function(Me,Ce){if(delete q.request,q.aborted)q.state="unloaded",K(null);else if(Me)q.state="errored",K(Me);else if(Ce){de.map._refreshExpiredTiles&&q.setExpiryData(Ce),delete Ce.cacheControl,delete Ce.expires;var Ne=de.map.painter.context,$e=Ne.gl;q.texture=de.map.painter.getTileTexture(Ce.width),q.texture?q.texture.update(Ce,{useMipmap:!0}):(q.texture=new e.Texture(Ne,Ce,$e.RGBA,{useMipmap:!0}),q.texture.bind($e.LINEAR,$e.CLAMP_TO_EDGE,$e.LINEAR_MIPMAP_NEAREST),Ne.extTextureFilterAnisotropic&&$e.texParameterf($e.TEXTURE_2D,Ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ne.extTextureFilterAnisotropicMax)),q.state="loaded",e.cacheEntryPossiblyAdded(de.dispatcher),K(null)}})},B.prototype.abortTile=function(q,K){q.request&&(q.request.cancel(),delete q.request),K()},B.prototype.unloadTile=function(q,K){q.texture&&this.map.painter.saveTileTexture(q.texture),K()},B.prototype.hasTransition=function(){return!1},B}(e.Evented),X=function(R){function B(q,K,de,be){R.call(this,q,K,de,be),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},K),this.encoding=K.encoding||"mapbox"}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},B.prototype.loadTile=function(q,K){var de=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function be(Me,Ce){Me&&(q.state="errored",K(Me)),Ce&&(q.dem=Ce,q.needsHillshadePrepare=!0,q.state="loaded",K(null))}q.request=e.getImage(this.map._requestManager.transformRequest(de,e.ResourceType.Tile),function(Me,Ce){if(delete q.request,q.aborted)q.state="unloaded",K(null);else if(Me)q.state="errored",K(Me);else if(Ce){this.map._refreshExpiredTiles&&q.setExpiryData(Ce),delete Ce.cacheControl,delete Ce.expires;var Ne=e.window.ImageBitmap&&Ce instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?Ce:e.browser.getImageData(Ce,1),$e={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:Ne,encoding:this.encoding};q.actor&&"expired"!==q.state||(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",$e,be.bind(this)))}}.bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID)},B.prototype._getNeighboringTiles=function(q){var K=q.canonical,de=Math.pow(2,K.z),be=(K.x-1+de)%de,Me=0===K.x?q.wrap-1:q.wrap,Ce=(K.x+1+de)%de,Ne=K.x+1===de?q.wrap+1:q.wrap,$e={};return $e[new e.OverscaledTileID(q.overscaledZ,Me,K.z,be,K.y).key]={backfilled:!1},$e[new e.OverscaledTileID(q.overscaledZ,Ne,K.z,Ce,K.y).key]={backfilled:!1},K.y>0&&($e[new e.OverscaledTileID(q.overscaledZ,Me,K.z,be,K.y-1).key]={backfilled:!1},$e[new e.OverscaledTileID(q.overscaledZ,q.wrap,K.z,K.x,K.y-1).key]={backfilled:!1},$e[new e.OverscaledTileID(q.overscaledZ,Ne,K.z,Ce,K.y-1).key]={backfilled:!1}),K.y+1<de&&($e[new e.OverscaledTileID(q.overscaledZ,Me,K.z,be,K.y+1).key]={backfilled:!1},$e[new e.OverscaledTileID(q.overscaledZ,q.wrap,K.z,K.x,K.y+1).key]={backfilled:!1},$e[new e.OverscaledTileID(q.overscaledZ,Ne,K.z,Ce,K.y+1).key]={backfilled:!1}),$e},B.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},B}($),te=function(R){function B(q,K,de,be){R.call(this),this.id=q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=de.getActor(),this.setEventedParent(be),this._data=K.data,this._options=e.extend({},K),this._collectResourceTiming=K.collectResourceTiming,this._resourceTiming=[],void 0!==K.maxzoom&&(this.maxzoom=K.maxzoom),K.type&&(this.type=K.type),K.attribution&&(this.attribution=K.attribution),this.promoteId=K.promoteId;var Me=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:K.cluster||!1,geojsonVtOptions:{buffer:(void 0!==K.buffer?K.buffer:128)*Me,tolerance:(void 0!==K.tolerance?K.tolerance:.375)*Me,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:K.lineMetrics||!1,generateId:K.generateId||!1},superclusterOptions:{maxZoom:void 0!==K.clusterMaxZoom?Math.min(K.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(K.clusterRadius||50)*Me,log:!1,generateId:K.generateId||!1},clusterProperties:K.clusterProperties},K.workerOptions)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.load=function(){var q=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(K){if(K)q.fire(new e.ErrorEvent(K));else{var de={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(de.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new e.Event("data",de))}})},B.prototype.onAdd=function(q){this.map=q,this.load()},B.prototype.setData=function(q){var K=this;return this._data=q,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(de){if(de)K.fire(new e.ErrorEvent(de));else{var be={dataType:"source",sourceDataType:"content"};K._collectResourceTiming&&K._resourceTiming&&K._resourceTiming.length>0&&(be.resourceTiming=K._resourceTiming,K._resourceTiming=[]),K.fire(new e.Event("data",be))}}),this},B.prototype.getClusterExpansionZoom=function(q,K){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},K),this},B.prototype.getClusterChildren=function(q,K){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},K),this},B.prototype.getClusterLeaves=function(q,K,de,be){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:K,offset:de},be),this},B.prototype._updateWorkerData=function(q){var K=this;this._loaded=!1;var de=e.extend({},this.workerOptions),be=this._data;"string"==typeof be?(de.request=this.map._requestManager.transformRequest(e.browser.resolveURL(be),e.ResourceType.Source),de.request.collectResourceTiming=this._collectResourceTiming):de.data=JSON.stringify(be),this.actor.send(this.type+".loadData",de,function(Me,Ce){K._removed||Ce&&Ce.abandoned||(K._loaded=!0,Ce&&Ce.resourceTiming&&Ce.resourceTiming[K.id]&&(K._resourceTiming=Ce.resourceTiming[K.id].slice(0)),K.actor.send(K.type+".coalesce",{source:de.source},null),q(Me))})},B.prototype.loaded=function(){return this._loaded},B.prototype.loadTile=function(q,K){var de=this,be=q.actor?"reloadTile":"loadTile";q.actor=this.actor,q.request=this.actor.send(be,{type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Ce,Ne){return delete q.request,q.unloadVectorData(),q.aborted?K(null):Ce?K(Ce):(q.loadVectorData(Ne,de.map.painter,"reloadTile"===be),K(null))})},B.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},B.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},B.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},B.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},B.prototype.hasTransition=function(){return!1},B}(e.Evented),ae=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),J=function(R){function B(q,K,de,be){R.call(this),this.id=q,this.dispatcher=de,this.coordinates=K.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(be),this.options=K}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.load=function(q,K){var de=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(be,Me){de._loaded=!0,be?de.fire(new e.ErrorEvent(be)):Me&&(de.image=Me,q&&(de.coordinates=q),K&&K(),de._finishLoading())})},B.prototype.loaded=function(){return this._loaded},B.prototype.updateImage=function(q){var K=this;return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,function(){K.texture=null}),this):this},B.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},B.prototype.onAdd=function(q){this.map=q,this.load()},B.prototype.setCoordinates=function(q){var K=this;this.coordinates=q;var de=q.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(Me){for(var Ce=1/0,Ne=1/0,$e=-1/0,at=-1/0,dt=0,Ot=Me;dt<Ot.length;dt+=1){var zt=Ot[dt];Ce=Math.min(Ce,zt.x),Ne=Math.min(Ne,zt.y),$e=Math.max($e,zt.x),at=Math.max(at,zt.y)}var Lt=Math.max($e-Ce,at-Ne),Yt=Math.max(0,Math.floor(-Math.log(Lt)/Math.LN2)),Gt=Math.pow(2,Yt);return new e.CanonicalTileID(Yt,Math.floor((Ce+$e)/2*Gt),Math.floor((Ne+at)/2*Gt))}(de),this.minzoom=this.maxzoom=this.tileID.z;var be=de.map(function(Me){return K.tileID.getTilePoint(Me)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(be[0].x,be[0].y,0,0),this._boundsArray.emplaceBack(be[1].x,be[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(be[3].x,be[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(be[2].x,be[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},B.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var q=this.map.painter.context,K=q.gl;for(var de in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,ae.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(q,this.image,K.RGBA),this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE)),this.tiles){var be=this.tiles[de];"loaded"!==be.state&&(be.state="loaded",be.texture=this.texture)}}},B.prototype.loadTile=function(q,K){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},K(null)):(q.state="errored",K(null))},B.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},B.prototype.hasTransition=function(){return!1},B}(e.Evented),ee=function(R){function B(q,K,de,be){R.call(this,q,K,de,be),this.roundZoom=!0,this.type="video",this.options=K}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.load=function(){var q=this;this._loaded=!1;var K=this.options;this.urls=[];for(var de=0,be=K.urls;de<be.length;de+=1)this.urls.push(this.map._requestManager.transformRequest(be[de],e.ResourceType.Source).url);e.getVideo(this.urls,function(Ce,Ne){q._loaded=!0,Ce?q.fire(new e.ErrorEvent(Ce)):Ne&&(q.video=Ne,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},B.prototype.pause=function(){this.video&&this.video.pause()},B.prototype.play=function(){this.video&&this.video.play()},B.prototype.seek=function(q){if(this.video){var K=this.video.seekable;q<K.start(0)||q>K.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+K.start(0)+" and "+K.end(0)+"-second mark."))):this.video.currentTime=q}},B.prototype.getVideo=function(){return this.video},B.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},B.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var q=this.map.painter.context,K=q.gl;for(var de in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,ae.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE),K.texSubImage2D(K.TEXTURE_2D,0,0,0,K.RGBA,K.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(q,this.video,K.RGBA),this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE)),this.tiles){var be=this.tiles[de];"loaded"!==be.state&&(be.state="loaded",be.texture=this.texture)}}},B.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},B.prototype.hasTransition=function(){return this.video&&!this.video.paused},B}(J),se=function(R){function B(q,K,de,be){R.call(this,q,K,de,be),K.coordinates?Array.isArray(K.coordinates)&&4===K.coordinates.length&&!K.coordinates.some(function(Me){return!Array.isArray(Me)||2!==Me.length||Me.some(function(Ce){return"number"!=typeof Ce})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+q,null,'missing required property "coordinates"'))),K.animate&&"boolean"!=typeof K.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+q,null,'optional "animate" property must be a boolean value'))),K.canvas?"string"==typeof K.canvas||K.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+q,null,'missing required property "canvas"'))),this.options=K,this.animate=void 0===K.animate||K.animate}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},B.prototype.getCanvas=function(){return this.canvas},B.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},B.prototype.onRemove=function(){this.pause()},B.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var K=this.map.painter.context,de=K.gl;for(var be in this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,ae.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(K,this.canvas,de.RGBA,{premultiply:!0}),this.tiles){var Me=this.tiles[be];"loaded"!==Me.state&&(Me.state="loaded",Me.texture=this.texture)}}},B.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},B.prototype.hasTransition=function(){return this._playing},B.prototype._hasInvalidDimensions=function(){for(var q=0,K=[this.canvas.width,this.canvas.height];q<K.length;q+=1){var de=K[q];if(isNaN(de)||de<=0)return!0}return!1},B}(J),G={vector:U,raster:$,"raster-dem":X,geojson:te,video:ee,image:J,canvas:se};function H(R,B){var q=e.identity([]);return e.translate(q,q,[1,1,0]),e.scale(q,q,[.5*R.width,.5*R.height,1]),e.multiply(q,q,R.calculatePosMatrix(B.toUnwrapped()))}function Y(R,B,q,K,de,be){var Me=function(Nt,Lt,Yt){if(Nt)for(var Gt=0,Xt=Nt;Gt<Xt.length;Gt+=1){var bn=Lt[Xt[Gt]];if(bn&&bn.source===Yt&&"fill-extrusion"===bn.type)return!0}else for(var En in Lt){var Un=Lt[En];if(Un.source===Yt&&"fill-extrusion"===Un.type)return!0}return!1}(de&&de.layers,B,R.id),Ce=be.maxPitchScaleFactor(),Ne=R.tilesIn(K,Ce,Me);Ne.sort(oe);for(var $e=[],at=0,dt=Ne;at<dt.length;at+=1){var Ot=dt[at];$e.push({wrappedTileID:Ot.tileID.wrapped().key,queryResults:Ot.tile.queryRenderedFeatures(B,q,R._state,Ot.queryGeometry,Ot.cameraQueryGeometry,Ot.scale,de,be,Ce,H(R.transform,Ot.tileID))})}var zt=function(Nt){for(var Lt={},Yt={},Gt=0,Xt=Nt;Gt<Xt.length;Gt+=1){var bn=Xt[Gt],En=bn.queryResults,Un=bn.wrappedTileID,Nn=Yt[Un]=Yt[Un]||{};for(var yr in En)for(var vr=En[yr],Pr=Nn[yr]=Nn[yr]||{},Ar=Lt[yr]=Lt[yr]||[],fi=0,wi=vr;fi<wi.length;fi+=1){var Fi=wi[fi];Pr[Fi.featureIndex]||(Pr[Fi.featureIndex]=!0,Ar.push(Fi))}}return Lt}($e);for(var Rt in zt)zt[Rt].forEach(function(Nt){var Lt=Nt.feature,Yt=R.getFeatureState(Lt.layer["source-layer"],Lt.id);Lt.source=Lt.layer.source,Lt.layer["source-layer"]&&(Lt.sourceLayer=Lt.layer["source-layer"]),Lt.state=Yt});return zt}function oe(R,B){var q=R.tileID,K=B.tileID;return q.overscaledZ-K.overscaledZ||q.canonical.y-K.canonical.y||q.wrap-K.wrap||q.canonical.x-K.canonical.x}var W=function(R,B){this.max=R,this.onRemove=B,this.reset()};W.prototype.reset=function(){for(var R in this.data)for(var B=0,q=this.data[R];B<q.length;B+=1){var K=q[B];K.timeout&&clearTimeout(K.timeout),this.onRemove(K.value)}return this.data={},this.order=[],this},W.prototype.add=function(R,B,q){var K=this,de=R.wrapped().key;void 0===this.data[de]&&(this.data[de]=[]);var be={value:B,timeout:void 0};if(void 0!==q&&(be.timeout=setTimeout(function(){K.remove(R,be)},q)),this.data[de].push(be),this.order.push(de),this.order.length>this.max){var Me=this._getAndRemoveByKey(this.order[0]);Me&&this.onRemove(Me)}return this},W.prototype.has=function(R){return R.wrapped().key in this.data},W.prototype.getAndRemove=function(R){return this.has(R)?this._getAndRemoveByKey(R.wrapped().key):null},W.prototype._getAndRemoveByKey=function(R){var B=this.data[R].shift();return B.timeout&&clearTimeout(B.timeout),0===this.data[R].length&&delete this.data[R],this.order.splice(this.order.indexOf(R),1),B.value},W.prototype.getByKey=function(R){var B=this.data[R];return B?B[0].value:null},W.prototype.get=function(R){return this.has(R)?this.data[R.wrapped().key][0].value:null},W.prototype.remove=function(R,B){if(!this.has(R))return this;var q=R.wrapped().key,K=void 0===B?0:this.data[q].indexOf(B),de=this.data[q][K];return this.data[q].splice(K,1),de.timeout&&clearTimeout(de.timeout),0===this.data[q].length&&delete this.data[q],this.onRemove(de.value),this.order.splice(this.order.indexOf(q),1),this},W.prototype.setMaxSize=function(R){for(this.max=R;this.order.length>this.max;){var B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this},W.prototype.filter=function(R){var B=[];for(var q in this.data)for(var K=0,de=this.data[q];K<de.length;K+=1){var be=de[K];R(be.value)||B.push(be)}for(var Me=0,Ce=B;Me<Ce.length;Me+=1){var Ne=Ce[Me];this.remove(Ne.value.tileID,Ne)}};var ne=function(R,B,q){this.context=R;var K=R.gl;this.buffer=K.createBuffer(),this.dynamicDraw=Boolean(q),this.context.unbindVAO(),R.bindElementBuffer.set(this.buffer),K.bufferData(K.ELEMENT_ARRAY_BUFFER,B.arrayBuffer,this.dynamicDraw?K.DYNAMIC_DRAW:K.STATIC_DRAW),this.dynamicDraw||delete B.arrayBuffer};ne.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ne.prototype.updateData=function(R){var B=this.context.gl;this.context.unbindVAO(),this.bind(),B.bufferSubData(B.ELEMENT_ARRAY_BUFFER,0,R.arrayBuffer)},ne.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var re={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ce=function(R,B,q,K){this.length=B.length,this.attributes=q,this.itemSize=B.bytesPerElement,this.dynamicDraw=K,this.context=R;var de=R.gl;this.buffer=de.createBuffer(),R.bindVertexBuffer.set(this.buffer),de.bufferData(de.ARRAY_BUFFER,B.arrayBuffer,this.dynamicDraw?de.DYNAMIC_DRAW:de.STATIC_DRAW),this.dynamicDraw||delete B.arrayBuffer};ce.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ce.prototype.updateData=function(R){var B=this.context.gl;this.bind(),B.bufferSubData(B.ARRAY_BUFFER,0,R.arrayBuffer)},ce.prototype.enableAttributes=function(R,B){for(var q=0;q<this.attributes.length;q++){var de=B.attributes[this.attributes[q].name];void 0!==de&&R.enableVertexAttribArray(de)}},ce.prototype.setVertexAttribPointers=function(R,B,q){for(var K=0;K<this.attributes.length;K++){var de=this.attributes[K],be=B.attributes[de.name];void 0!==be&&R.vertexAttribPointer(be,de.components,R[re[de.type]],!1,this.itemSize,de.offset+this.itemSize*(q||0))}},ce.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var fe=function(R){this.gl=R.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};fe.prototype.get=function(){return this.current},fe.prototype.set=function(R){},fe.prototype.getDefault=function(){return this.default},fe.prototype.setDefault=function(){this.set(this.default)};var me=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return e.Color.transparent},B.prototype.set=function(q){var K=this.current;(q.r!==K.r||q.g!==K.g||q.b!==K.b||q.a!==K.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},B}(fe),pe=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return 1},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},B}(fe),we=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return 0},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},B}(fe),ye=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return[!0,!0,!0,!0]},B.prototype.set=function(q){var K=this.current;(q[0]!==K[0]||q[1]!==K[1]||q[2]!==K[2]||q[3]!==K[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},B}(fe),Te=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return!0},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)},B}(fe),Le=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return 255},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},B}(fe),Oe=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},B.prototype.set=function(q){var K=this.current;(q.func!==K.func||q.ref!==K.ref||q.mask!==K.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},B}(fe),Re=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},B.prototype.set=function(q){var K=this.current;(q[0]!==K[0]||q[1]!==K[1]||q[2]!==K[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},B}(fe),Ve=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;q?K.enable(K.STENCIL_TEST):K.disable(K.STENCIL_TEST),this.current=q,this.dirty=!1}},B}(fe),_e=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return[0,1]},B.prototype.set=function(q){var K=this.current;(q[0]!==K[0]||q[1]!==K[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},B}(fe),Ae=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;q?K.enable(K.DEPTH_TEST):K.disable(K.DEPTH_TEST),this.current=q,this.dirty=!1}},B}(fe),Fe=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.LESS},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},B}(fe),Pe=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;q?K.enable(K.BLEND):K.disable(K.BLEND),this.current=q,this.dirty=!1}},B}(fe),Be=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},B.prototype.set=function(q){var K=this.current;(q[0]!==K[0]||q[1]!==K[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},B}(fe),qe=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return e.Color.transparent},B.prototype.set=function(q){var K=this.current;(q.r!==K.r||q.g!==K.g||q.b!==K.b||q.a!==K.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},B}(fe),We=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.FUNC_ADD},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},B}(fe),Je=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;q?K.enable(K.CULL_FACE):K.disable(K.CULL_FACE),this.current=q,this.dirty=!1}},B}(fe),ut=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.BACK},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)},B}(fe),Ge=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.CCW},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)},B}(fe),Ke=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)},B}(fe),nt=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.TEXTURE0},B.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},B}(fe),it=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},B.prototype.set=function(q){var K=this.current;(q[0]!==K[0]||q[1]!==K[1]||q[2]!==K[2]||q[3]!==K[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},B}(fe),ht=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;K.bindFramebuffer(K.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},B}(fe),Tt=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;K.bindRenderbuffer(K.RENDERBUFFER,q),this.current=q,this.dirty=!1}},B}(fe),Ct=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;K.bindTexture(K.TEXTURE_2D,q),this.current=q,this.dirty=!1}},B}(fe),Vt=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;K.bindBuffer(K.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},B}(fe),Ft=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(q){var K=this.gl;K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},B}(fe),gt=function(R){function B(q){R.call(this,q),this.vao=q.extVertexArrayObject}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},B}(fe),ft=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return 4},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;K.pixelStorei(K.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},B}(fe),Bt=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},B}(fe),rn=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(q){if(q!==this.current||this.dirty){var K=this.gl;K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},B}(fe),un=function(R){function B(q,K){R.call(this,q),this.context=q,this.parent=K}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B}(fe),pn=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.setDirty=function(){this.dirty=!0},B.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var K=this.gl;K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},B}(un),dn=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var K=this.gl;K.framebufferRenderbuffer(K.FRAMEBUFFER,K.DEPTH_ATTACHMENT,K.RENDERBUFFER,q),this.current=q,this.dirty=!1}},B}(un),Mn=function(R,B,q,K){this.context=R,this.width=B,this.height=q;var be=this.framebuffer=R.gl.createFramebuffer();this.colorAttachment=new pn(R,be),K&&(this.depthAttachment=new dn(R,be))};Mn.prototype.destroy=function(){var R=this.context.gl,B=this.colorAttachment.get();if(B&&R.deleteTexture(B),this.depthAttachment){var q=this.depthAttachment.get();q&&R.deleteRenderbuffer(q)}R.deleteFramebuffer(this.framebuffer)};var ln=function(R,B,q){this.func=R,this.mask=B,this.range=q};ln.ReadOnly=!1,ln.ReadWrite=!0,ln.disabled=new ln(519,ln.ReadOnly,[0,1]);var Ee=function(R,B,q,K,de,be){this.test=R,this.ref=B,this.mask=q,this.fail=K,this.depthFail=de,this.pass=be};Ee.disabled=new Ee({func:519,mask:0},0,0,7680,7680,7680);var De=function(R,B,q){this.blendFunction=R,this.blendColor=B,this.mask=q};De.disabled=new De(De.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),De.unblended=new De(De.Replace,e.Color.transparent,[!0,!0,!0,!0]),De.alphaBlended=new De([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Ie=function(R,B,q){this.enable=R,this.mode=B,this.frontFace=q};Ie.disabled=new Ie(!1,1029,2305),Ie.backCCW=new Ie(!0,1029,2305);var He=function(R){this.gl=R,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new me(this),this.clearDepth=new pe(this),this.clearStencil=new we(this),this.colorMask=new ye(this),this.depthMask=new Te(this),this.stencilMask=new Le(this),this.stencilFunc=new Oe(this),this.stencilOp=new Re(this),this.stencilTest=new Ve(this),this.depthRange=new _e(this),this.depthTest=new Ae(this),this.depthFunc=new Fe(this),this.blend=new Pe(this),this.blendFunc=new Be(this),this.blendColor=new qe(this),this.blendEquation=new We(this),this.cullFace=new Je(this),this.cullFaceSide=new ut(this),this.frontFace=new Ge(this),this.program=new Ke(this),this.activeTexture=new nt(this),this.viewport=new it(this),this.bindFramebuffer=new ht(this),this.bindRenderbuffer=new Tt(this),this.bindTexture=new Ct(this),this.bindVertexBuffer=new Vt(this),this.bindElementBuffer=new Ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this),this.pixelStoreUnpack=new ft(this),this.pixelStoreUnpackPremultiplyAlpha=new Bt(this),this.pixelStoreUnpackFlipY=new rn(this),this.extTextureFilterAnisotropic=R.getExtension("EXT_texture_filter_anisotropic")||R.getExtension("MOZ_EXT_texture_filter_anisotropic")||R.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=R.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=R.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(R.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=R.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=R.getExtension("EXT_disjoint_timer_query")};He.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},He.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},He.prototype.createIndexBuffer=function(R,B){return new ne(this,R,B)},He.prototype.createVertexBuffer=function(R,B,q){return new ce(this,R,B,q)},He.prototype.createRenderbuffer=function(R,B,q){var K=this.gl,de=K.createRenderbuffer();return this.bindRenderbuffer.set(de),K.renderbufferStorage(K.RENDERBUFFER,R,B,q),this.bindRenderbuffer.set(null),de},He.prototype.createFramebuffer=function(R,B,q){return new Mn(this,R,B,q)},He.prototype.clear=function(R){var B=R.color,q=R.depth,K=this.gl,de=0;B&&(de|=K.COLOR_BUFFER_BIT,this.clearColor.set(B),this.colorMask.set([!0,!0,!0,!0])),void 0!==q&&(de|=K.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),K.clear(de)},He.prototype.setCullFace=function(R){!1===R.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(R.mode),this.frontFace.set(R.frontFace))},He.prototype.setDepthMode=function(R){R.func!==this.gl.ALWAYS||R.mask?(this.depthTest.set(!0),this.depthFunc.set(R.func),this.depthMask.set(R.mask),this.depthRange.set(R.range)):this.depthTest.set(!1)},He.prototype.setStencilMode=function(R){R.test.func!==this.gl.ALWAYS||R.mask?(this.stencilTest.set(!0),this.stencilMask.set(R.mask),this.stencilOp.set([R.fail,R.depthFail,R.pass]),this.stencilFunc.set({func:R.test.func,ref:R.ref,mask:R.test.mask})):this.stencilTest.set(!1)},He.prototype.setColorMode=function(R){e.deepEqual(R.blendFunction,De.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(R.blendFunction),this.blendColor.set(R.blendColor)),this.colorMask.set(R.mask)},He.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ye=function(R){function B(q,K,de){var be=this;R.call(this),this.id=q,this.dispatcher=de,this.on("data",function(Me){"source"===Me.dataType&&"metadata"===Me.sourceDataType&&(be._sourceLoaded=!0),be._sourceLoaded&&!be._paused&&"source"===Me.dataType&&"content"===Me.sourceDataType&&(be.reload(),be.transform&&be.update(be.transform))}),this.on("error",function(){be._sourceErrored=!0}),this._source=function(Me,Ce,Ne,$e){var at=new G[Ce.type](Me,Ce,Ne,$e);if(at.id!==Me)throw new Error("Expected Source id to be "+Me+" instead of "+at.id);return e.bindAll(["load","abort","unload","serialize","prepare"],at),at}(q,K,de,this),this._tiles={},this._cache=new W(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},B.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},B.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var K=this._tiles[q];if("loaded"!==K.state&&"errored"!==K.state)return!1}return!0},B.prototype.getSource=function(){return this._source},B.prototype.pause=function(){this._paused=!0},B.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},B.prototype._loadTile=function(q,K){return this._source.loadTile(q,K)},B.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},B.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},B.prototype.serialize=function(){return this._source.serialize()},B.prototype.prepare=function(q){for(var K in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var de=this._tiles[K];de.upload(q),de.prepare(this.map.style.imageManager)}},B.prototype.getIds=function(){return e.values(this._tiles).map(function(q){return q.tileID}).sort(tt).map(function(q){return q.key})},B.prototype.getRenderableIds=function(q){var K=this,de=[];for(var be in this._tiles)this._isIdRenderable(be,q)&&de.push(this._tiles[be]);return q?de.sort(function(Me,Ce){var Ne=Me.tileID,$e=Ce.tileID,at=new e.Point(Ne.canonical.x,Ne.canonical.y)._rotate(K.transform.angle),dt=new e.Point($e.canonical.x,$e.canonical.y)._rotate(K.transform.angle);return Ne.overscaledZ-$e.overscaledZ||dt.y-at.y||dt.x-at.x}).map(function(Me){return Me.tileID.key}):de.map(function(Me){return Me.tileID}).sort(tt).map(function(Me){return Me.key})},B.prototype.hasRenderableParent=function(q){var K=this.findLoadedParent(q,0);return!!K&&this._isIdRenderable(K.tileID.key)},B.prototype._isIdRenderable=function(q,K){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(K||!this._tiles[q].holdingForFade())},B.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var q in this._cache.reset(),this._tiles)"errored"!==this._tiles[q].state&&this._reloadTile(q,"reloading")},B.prototype._reloadTile=function(q,K){var de=this._tiles[q];de&&("loading"!==de.state&&(de.state=K),this._loadTile(de,this._tileLoaded.bind(this,de,q,K)))},B.prototype._tileLoaded=function(q,K,de,be){if(be)return q.state="errored",void(404!==be.status?this._source.fire(new e.ErrorEvent(be,{tile:q})):this.update(this.transform));q.timeAdded=e.browser.now(),"expired"===de&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(K,q),"raster-dem"===this.getSource().type&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},B.prototype._backfillDEM=function(q){for(var K=this.getRenderableIds(),de=0;de<K.length;de++){var be=K[de];if(q.neighboringTiles&&q.neighboringTiles[be]){var Me=this.getTileByID(be);Ce(q,Me),Ce(Me,q)}}function Ce(Ne,$e){Ne.needsHillshadePrepare=!0;var at=$e.tileID.canonical.x-Ne.tileID.canonical.x,dt=$e.tileID.canonical.y-Ne.tileID.canonical.y,Ot=Math.pow(2,Ne.tileID.canonical.z),zt=$e.tileID.key;0===at&&0===dt||Math.abs(dt)>1||(Math.abs(at)>1&&(1===Math.abs(at+Ot)?at+=Ot:1===Math.abs(at-Ot)&&(at-=Ot)),$e.dem&&Ne.dem&&(Ne.dem.backfillBorder($e.dem,at,dt),Ne.neighboringTiles&&Ne.neighboringTiles[zt]&&(Ne.neighboringTiles[zt].backfilled=!0)))}},B.prototype.getTile=function(q){return this.getTileByID(q.key)},B.prototype.getTileByID=function(q){return this._tiles[q]},B.prototype._retainLoadedChildren=function(q,K,de,be){for(var Me in this._tiles){var Ce=this._tiles[Me];if(!(be[Me]||!Ce.hasData()||Ce.tileID.overscaledZ<=K||Ce.tileID.overscaledZ>de)){for(var Ne=Ce.tileID;Ce&&Ce.tileID.overscaledZ>K+1;){var $e=Ce.tileID.scaledTo(Ce.tileID.overscaledZ-1);(Ce=this._tiles[$e.key])&&Ce.hasData()&&(Ne=$e)}for(var at=Ne;at.overscaledZ>K;)if(q[(at=at.scaledTo(at.overscaledZ-1)).key]){be[Ne.key]=Ne;break}}}},B.prototype.findLoadedParent=function(q,K){if(q.key in this._loadedParentTiles){var de=this._loadedParentTiles[q.key];return de&&de.tileID.overscaledZ>=K?de:null}for(var be=q.overscaledZ-1;be>=K;be--){var Me=q.scaledTo(be),Ce=this._getLoadedTile(Me);if(Ce)return Ce}},B.prototype._getLoadedTile=function(q){var K=this._tiles[q.key];return K&&K.hasData()?K:this._cache.getByKey(q.wrapped().key)},B.prototype.updateCacheSize=function(q){var K=(Math.ceil(q.width/this._source.tileSize)+1)*(Math.ceil(q.height/this._source.tileSize)+1),de=Math.floor(5*K),be="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,de):de;this._cache.setMaxSize(be)},B.prototype.handleWrapJump=function(q){var de=Math.round((q-(void 0===this._prevLng?q:this._prevLng))/360);if(this._prevLng=q,de){var be={};for(var Me in this._tiles){var Ce=this._tiles[Me];Ce.tileID=Ce.tileID.unwrapTo(Ce.tileID.wrap+de),be[Ce.tileID.key]=Ce}for(var Ne in this._tiles=be,this._timers)clearTimeout(this._timers[Ne]),delete this._timers[Ne];for(var $e in this._tiles)this._setTileReloadTimer($e,this._tiles[$e])}},B.prototype.update=function(q){var K=this;if(this.transform=q,this._sourceLoaded&&!this._paused){var de;this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?de=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Nn){return new e.OverscaledTileID(Nn.canonical.z,Nn.wrap,Nn.canonical.z,Nn.canonical.x,Nn.canonical.y)}):(de=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(de=de.filter(function(Nn){return K._source.hasTile(Nn)}))):de=[];var be=q.coveringZoomLevel(this._source),Me=Math.max(be-B.maxOverzooming,this._source.minzoom),Ce=Math.max(be+B.maxUnderzooming,this._source.minzoom),Ne=this._updateRetainedTiles(de,be);if(ot(this._source.type)){for(var $e={},at={},dt=0,Ot=Object.keys(Ne);dt<Ot.length;dt+=1){var zt=Ot[dt],Rt=Ne[zt],Nt=this._tiles[zt];if(Nt&&!(Nt.fadeEndTime&&Nt.fadeEndTime<=e.browser.now())){var Lt=this.findLoadedParent(Rt,Me);Lt&&(this._addTile(Lt.tileID),$e[Lt.tileID.key]=Lt.tileID),at[zt]=Rt}}for(var Yt in this._retainLoadedChildren(at,be,Ce,Ne),$e)Ne[Yt]||(this._coveredTiles[Yt]=!0,Ne[Yt]=$e[Yt])}for(var Gt in Ne)this._tiles[Gt].clearFadeHold();for(var Xt=0,bn=e.keysDifference(this._tiles,Ne);Xt<bn.length;Xt+=1){var En=bn[Xt],Un=this._tiles[En];Un.hasSymbolBuckets&&!Un.holdingForFade()?Un.setHoldDuration(this.map._fadeDuration):Un.hasSymbolBuckets&&!Un.symbolFadeFinished()||this._removeTile(En)}this._updateLoadedParentTileCache()}},B.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},B.prototype._updateRetainedTiles=function(q,K){for(var de={},be={},Me=Math.max(K-B.maxOverzooming,this._source.minzoom),Ce=Math.max(K+B.maxUnderzooming,this._source.minzoom),Ne={},$e=0,at=q;$e<at.length;$e+=1){var dt=at[$e],Ot=this._addTile(dt);de[dt.key]=dt,Ot.hasData()||K<this._source.maxzoom&&(Ne[dt.key]=dt)}this._retainLoadedChildren(Ne,K,Ce,de);for(var zt=0,Rt=q;zt<Rt.length;zt+=1){var Nt=Rt[zt],Lt=this._tiles[Nt.key];if(!Lt.hasData()){if(K+1>this._source.maxzoom){var Yt=Nt.children(this._source.maxzoom)[0],Gt=this.getTile(Yt);if(Gt&&Gt.hasData()){de[Yt.key]=Yt;continue}}else{var Xt=Nt.children(this._source.maxzoom);if(de[Xt[0].key]&&de[Xt[1].key]&&de[Xt[2].key]&&de[Xt[3].key])continue}for(var bn=Lt.wasRequested(),En=Nt.overscaledZ-1;En>=Me;--En){var Un=Nt.scaledTo(En);if(be[Un.key]||(be[Un.key]=!0,!(Lt=this.getTile(Un))&&bn&&(Lt=this._addTile(Un)),Lt&&(de[Un.key]=Un,bn=Lt.wasRequested(),Lt.hasData())))break}}}return de},B.prototype._updateLoadedParentTileCache=function(){for(var q in this._loadedParentTiles={},this._tiles){for(var K=[],de=void 0,be=this._tiles[q].tileID;be.overscaledZ>0;){if(be.key in this._loadedParentTiles){de=this._loadedParentTiles[be.key];break}K.push(be.key);var Me=be.scaledTo(be.overscaledZ-1);if(de=this._getLoadedTile(Me))break;be=Me}for(var Ce=0,Ne=K;Ce<Ne.length;Ce+=1)this._loadedParentTiles[Ne[Ce]]=de}},B.prototype._addTile=function(q){var K=this._tiles[q.key];if(K)return K;(K=this._cache.getAndRemove(q))&&(this._setTileReloadTimer(q.key,K),K.tileID=q,this._state.initializeTileState(K,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,K)));var de=Boolean(K);return de||(K=new e.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(K,this._tileLoaded.bind(this,K,q.key,K.state))),K?(K.uses++,this._tiles[q.key]=K,de||this._source.fire(new e.Event("dataloading",{tile:K,coord:K.tileID,dataType:"source"})),K):null},B.prototype._setTileReloadTimer=function(q,K){var de=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var be=K.getExpiryTimeout();be&&(this._timers[q]=setTimeout(function(){de._reloadTile(q,"expired"),delete de._timers[q]},be))},B.prototype._removeTile=function(q){var K=this._tiles[q];K&&(K.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),K.uses>0||(K.hasData()&&"reloading"!==K.state?this._cache.add(K.tileID,K,K.getExpiryTimeout()):(K.aborted=!0,this._abortTile(K),this._unloadTile(K))))},B.prototype.clearTiles=function(){for(var q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(q);this._cache.reset()},B.prototype.tilesIn=function(q,K,de){var be=this,Me=[],Ce=this.transform;if(!Ce)return Me;for(var Ne=de?Ce.getCameraQueryGeometry(q):q,$e=q.map(function(En){return Ce.pointCoordinate(En)}),at=Ne.map(function(En){return Ce.pointCoordinate(En)}),dt=this.getIds(),Ot=1/0,zt=1/0,Rt=-1/0,Nt=-1/0,Lt=0,Yt=at;Lt<Yt.length;Lt+=1){var Gt=Yt[Lt];Ot=Math.min(Ot,Gt.x),zt=Math.min(zt,Gt.y),Rt=Math.max(Rt,Gt.x),Nt=Math.max(Nt,Gt.y)}for(var Xt=function(En){var Un=be._tiles[dt[En]];if(!Un.holdingForFade()){var Nn=Un.tileID,yr=Math.pow(2,Ce.zoom-Un.tileID.overscaledZ),vr=K*Un.queryPadding*e.EXTENT/Un.tileSize/yr,Pr=[Nn.getTilePoint(new e.MercatorCoordinate(Ot,zt)),Nn.getTilePoint(new e.MercatorCoordinate(Rt,Nt))];if(Pr[0].x-vr<e.EXTENT&&Pr[0].y-vr<e.EXTENT&&Pr[1].x+vr>=0&&Pr[1].y+vr>=0){var Ar=$e.map(function(wi){return Nn.getTilePoint(wi)}),fi=at.map(function(wi){return Nn.getTilePoint(wi)});Me.push({tile:Un,tileID:Nn,queryGeometry:Ar,cameraQueryGeometry:fi,scale:yr})}}},bn=0;bn<dt.length;bn++)Xt(bn);return Me},B.prototype.getVisibleCoordinates=function(q){for(var K=this,de=this.getRenderableIds(q).map(function(Ne){return K._tiles[Ne].tileID}),be=0,Me=de;be<Me.length;be+=1){var Ce=Me[be];Ce.posMatrix=this.transform.calculatePosMatrix(Ce.toUnwrapped())}return de},B.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ot(this._source.type))for(var q in this._tiles){var K=this._tiles[q];if(void 0!==K.fadeEndTime&&K.fadeEndTime>=e.browser.now())return!0}return!1},B.prototype.setFeatureState=function(q,K,de){this._state.updateState(q=q||"_geojsonTileLayer",K,de)},B.prototype.removeFeatureState=function(q,K,de){this._state.removeFeatureState(q=q||"_geojsonTileLayer",K,de)},B.prototype.getFeatureState=function(q,K){return this._state.getState(q=q||"_geojsonTileLayer",K)},B.prototype.setDependencies=function(q,K,de){var be=this._tiles[q];be&&be.setDependencies(K,de)},B.prototype.reloadTilesForDependencies=function(q,K){for(var de in this._tiles)this._tiles[de].hasDependency(q,K)&&this._reloadTile(de,"reloading");this._cache.filter(function(be){return!be.hasDependency(q,K)})},B}(e.Evented);function tt(R,B){var q=Math.abs(2*R.wrap)-+(R.wrap<0),K=Math.abs(2*B.wrap)-+(B.wrap<0);return R.overscaledZ-B.overscaledZ||K-q||B.canonical.y-R.canonical.y||B.canonical.x-R.canonical.x}function ot(R){return"raster"===R||"image"===R||"video"===R}function st(){return new e.window.Worker(ve.workerUrl)}Ye.maxOverzooming=10,Ye.maxUnderzooming=3;var bt="mapboxgl_preloaded_worker_pool",wt=function(){this.active={}};wt.prototype.acquire=function(R){if(!this.workers)for(this.workers=[];this.workers.length<wt.workerCount;)this.workers.push(new st);return this.active[R]=!0,this.workers.slice()},wt.prototype.release=function(R){delete this.active[R],0===this.numActive()&&(this.workers.forEach(function(B){B.terminate()}),this.workers=null)},wt.prototype.isPreloaded=function(){return!!this.active[bt]},wt.prototype.numActive=function(){return Object.keys(this.active).length};var Ut,Kt=Math.floor(e.browser.hardwareConcurrency/2);function vt(){return Ut||(Ut=new wt),Ut}function Et(R,B){var q={};for(var K in R)"ref"!==K&&(q[K]=R[K]);return e.refProperties.forEach(function(de){de in B&&(q[de]=B[de])}),q}function $t(R){R=R.slice();for(var B=Object.create(null),q=0;q<R.length;q++)B[R[q].id]=R[q];for(var K=0;K<R.length;K++)"ref"in R[K]&&(R[K]=Et(R[K],B[R[K].ref]));return R}wt.workerCount=Math.max(Math.min(Kt,6),1);var Dt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Pt(R,B,q){q.push({command:Dt.addSource,args:[R,B[R]]})}function je(R,B,q){B.push({command:Dt.removeSource,args:[R]}),q[R]=!0}function rt(R,B,q,K){je(R,q,K),Pt(R,B,q)}function pt(R,B,q){var K;for(K in R[q])if(R[q].hasOwnProperty(K)&&"data"!==K&&!e.deepEqual(R[q][K],B[q][K]))return!1;for(K in B[q])if(B[q].hasOwnProperty(K)&&"data"!==K&&!e.deepEqual(R[q][K],B[q][K]))return!1;return!0}function It(R,B,q,K,de,be){var Me;for(Me in B=B||{},R=R||{})R.hasOwnProperty(Me)&&(e.deepEqual(R[Me],B[Me])||q.push({command:be,args:[K,Me,B[Me],de]}));for(Me in B)B.hasOwnProperty(Me)&&!R.hasOwnProperty(Me)&&(e.deepEqual(R[Me],B[Me])||q.push({command:be,args:[K,Me,B[Me],de]}))}function jt(R){return R.id}function Qt(R,B){return R[B.id]=B,R}var an=function(R,B){this.reset(R,B)};an.prototype.reset=function(R,B){this.points=R||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(B||0,.5*this.length),this.paddedLength=this.length-2*this.padding},an.prototype.lerp=function(R){if(1===this.points.length)return this.points[0];R=e.clamp(R,0,1);for(var B=1,q=this._distances[B],K=R*this.paddedLength+this.padding;q<K&&B<this._distances.length;)q=this._distances[++B];var de=B-1,be=this._distances[de],Me=q-be,Ce=Me>0?(K-be)/Me:0;return this.points[de].mult(1-Ce).add(this.points[B].mult(Ce))};var Sn=function(R,B,q){var K=this.boxCells=[],de=this.circleCells=[];this.xCellCount=Math.ceil(R/q),this.yCellCount=Math.ceil(B/q);for(var be=0;be<this.xCellCount*this.yCellCount;be++)K.push([]),de.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=R,this.height=B,this.xScale=this.xCellCount/R,this.yScale=this.yCellCount/B,this.boxUid=0,this.circleUid=0};function Yn(R,B,q,K,de){var be=e.create();return B?(e.scale(be,be,[1/de,1/de,1]),q||e.rotateZ(be,be,K.angle)):e.multiply(be,K.labelPlaneMatrix,R),be}function kn(R,B,q,K,de){if(B){var be=e.clone(R);return e.scale(be,be,[de,de,1]),q||e.rotateZ(be,be,-K.angle),be}return K.glCoordMatrix}function cn(R,B){var q=[R.x,R.y,0,1];pr(q,q,B);var K=q[3];return{point:new e.Point(q[0]/K,q[1]/K),signedDistanceFromCamera:K}}function vn(R,B){return.5+R/B*.5}function hn(R,B){var q=R[0]/R[3],K=R[1]/R[3];return q>=-B[0]&&q<=B[0]&&K>=-B[1]&&K<=B[1]}function Dn(R,B,q,K,de,be,Me,Ce){var Ne=K?R.textSizeData:R.iconSizeData,$e=e.evaluateSizeForZoom(Ne,q.transform.zoom),at=[256/q.width*2+1,256/q.height*2+1],dt=K?R.text.dynamicLayoutVertexArray:R.icon.dynamicLayoutVertexArray;dt.clear();for(var Ot=R.lineVertexArray,zt=K?R.text.placedSymbolArray:R.icon.placedSymbolArray,Rt=q.transform.width/q.transform.height,Nt=!1,Lt=0;Lt<zt.length;Lt++){var Yt=zt.get(Lt);if(Yt.hidden||Yt.writingMode===e.WritingMode.vertical&&!Nt)zr(Yt.numGlyphs,dt);else{Nt=!1;var Gt=[Yt.anchorX,Yt.anchorY,0,1];if(e.transformMat4(Gt,Gt,B),hn(Gt,at)){var bn=vn(q.transform.cameraToCenterDistance,Gt[3]),En=e.evaluateSizeForFeature(Ne,$e,Yt),Un=Me?En/bn:En*bn,Nn=new e.Point(Yt.anchorX,Yt.anchorY),yr=cn(Nn,de).point,vr={},Pr=rr(Yt,Un,!1,Ce,B,de,be,R.glyphOffsetArray,Ot,dt,yr,Nn,vr,Rt);Nt=Pr.useVertical,(Pr.notEnoughRoom||Nt||Pr.needsFlipping&&rr(Yt,Un,!0,Ce,B,de,be,R.glyphOffsetArray,Ot,dt,yr,Nn,vr,Rt).notEnoughRoom)&&zr(Yt.numGlyphs,dt)}else zr(Yt.numGlyphs,dt)}}K?R.text.dynamicLayoutVertexBuffer.updateData(dt):R.icon.dynamicLayoutVertexBuffer.updateData(dt)}function Pn(R,B,q,K,de,be,Me,Ce,Ne,$e,at){var dt=Ce.glyphStartIndex+Ce.numGlyphs,Ot=Ce.lineStartIndex,zt=Ce.lineStartIndex+Ce.lineLength,Rt=B.getoffsetX(Ce.glyphStartIndex),Nt=B.getoffsetX(dt-1),Lt=or(R*Rt,q,K,de,be,Me,Ce.segment,Ot,zt,Ne,$e,at);if(!Lt)return null;var Yt=or(R*Nt,q,K,de,be,Me,Ce.segment,Ot,zt,Ne,$e,at);return Yt?{first:Lt,last:Yt}:null}function $n(R,B,q,K){return R===e.WritingMode.horizontal&&Math.abs(q.y-B.y)>Math.abs(q.x-B.x)*K?{useVertical:!0}:(R===e.WritingMode.vertical?B.y<q.y:B.x>q.x)?{needsFlipping:!0}:null}function rr(R,B,q,K,de,be,Me,Ce,Ne,$e,at,dt,Ot,zt){var Rt,Nt=B/24,Lt=R.lineOffsetX*Nt,Yt=R.lineOffsetY*Nt;if(R.numGlyphs>1){var Gt=R.glyphStartIndex+R.numGlyphs,Xt=R.lineStartIndex,bn=R.lineStartIndex+R.lineLength,En=Pn(Nt,Ce,Lt,Yt,q,at,dt,R,Ne,be,Ot);if(!En)return{notEnoughRoom:!0};var Un=cn(En.first.point,Me).point,Nn=cn(En.last.point,Me).point;if(K&&!q){var yr=$n(R.writingMode,Un,Nn,zt);if(yr)return yr}Rt=[En.first];for(var vr=R.glyphStartIndex+1;vr<Gt-1;vr++)Rt.push(or(Nt*Ce.getoffsetX(vr),Lt,Yt,q,at,dt,R.segment,Xt,bn,Ne,be,Ot));Rt.push(En.last)}else{if(K&&!q){var Pr=cn(dt,de).point,Ar=R.lineStartIndex+R.segment+1,fi=new e.Point(Ne.getx(Ar),Ne.gety(Ar)),wi=cn(fi,de),Fi=wi.signedDistanceFromCamera>0?wi.point:er(dt,fi,Pr,1,de),ur=$n(R.writingMode,Pr,Fi,zt);if(ur)return ur}var Hr=or(Nt*Ce.getoffsetX(R.glyphStartIndex),Lt,Yt,q,at,dt,R.segment,R.lineStartIndex,R.lineStartIndex+R.lineLength,Ne,be,Ot);if(!Hr)return{notEnoughRoom:!0};Rt=[Hr]}for(var bi=0,mi=Rt;bi<mi.length;bi+=1){var Si=mi[bi];e.addDynamicAttributes($e,Si.point,Si.angle)}return{}}function er(R,B,q,K,de){var be=cn(R.add(R.sub(B)._unit()),de).point,Me=q.sub(be);return q.add(Me._mult(K/Me.mag()))}function or(R,B,q,K,de,be,Me,Ce,Ne,$e,at,dt){var Ot=K?R-B:R+B,zt=Ot>0?1:-1,Rt=0;K&&(zt*=-1,Rt=Math.PI),zt<0&&(Rt+=Math.PI);for(var Nt=zt>0?Ce+Me:Ce+Me+1,Lt=de,Yt=de,Gt=0,Xt=0,bn=Math.abs(Ot),En=[];Gt+Xt<=bn;){if((Nt+=zt)<Ce||Nt>=Ne)return null;if(Yt=Lt,En.push(Lt),void 0===(Lt=dt[Nt])){var Un=new e.Point($e.getx(Nt),$e.gety(Nt)),Nn=cn(Un,at);if(Nn.signedDistanceFromCamera>0)Lt=dt[Nt]=Nn.point;else{var yr=Nt-zt;Lt=er(0===Gt?be:new e.Point($e.getx(yr),$e.gety(yr)),Un,Yt,bn-Gt+1,at)}}Gt+=Xt,Xt=Yt.dist(Lt)}var vr=(bn-Gt)/Xt,Pr=Lt.sub(Yt),Ar=Pr.mult(vr)._add(Yt);Ar._add(Pr._unit()._perp()._mult(q*zt));var fi=Rt+Math.atan2(Lt.y-Yt.y,Lt.x-Yt.x);return En.push(Ar),{point:Ar,angle:fi,path:En}}Sn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Sn.prototype.insert=function(R,B,q,K,de){this._forEachCell(B,q,K,de,this._insertBoxCell,this.boxUid++),this.boxKeys.push(R),this.bboxes.push(B),this.bboxes.push(q),this.bboxes.push(K),this.bboxes.push(de)},Sn.prototype.insertCircle=function(R,B,q,K){this._forEachCell(B-K,q-K,B+K,q+K,this._insertCircleCell,this.circleUid++),this.circleKeys.push(R),this.circles.push(B),this.circles.push(q),this.circles.push(K)},Sn.prototype._insertBoxCell=function(R,B,q,K,de,be){this.boxCells[de].push(be)},Sn.prototype._insertCircleCell=function(R,B,q,K,de,be){this.circleCells[de].push(be)},Sn.prototype._query=function(R,B,q,K,de,be){if(q<0||R>this.width||K<0||B>this.height)return!de&&[];var Me=[];if(R<=0&&B<=0&&this.width<=q&&this.height<=K){if(de)return!0;for(var Ce=0;Ce<this.boxKeys.length;Ce++)Me.push({key:this.boxKeys[Ce],x1:this.bboxes[4*Ce],y1:this.bboxes[4*Ce+1],x2:this.bboxes[4*Ce+2],y2:this.bboxes[4*Ce+3]});for(var Ne=0;Ne<this.circleKeys.length;Ne++){var $e=this.circles[3*Ne],at=this.circles[3*Ne+1],dt=this.circles[3*Ne+2];Me.push({key:this.circleKeys[Ne],x1:$e-dt,y1:at-dt,x2:$e+dt,y2:at+dt})}return be?Me.filter(be):Me}return this._forEachCell(R,B,q,K,this._queryCell,Me,{hitTest:de,seenUids:{box:{},circle:{}}},be),de?Me.length>0:Me},Sn.prototype._queryCircle=function(R,B,q,K,de){var be=R-q,Me=R+q,Ce=B-q,Ne=B+q;if(Me<0||be>this.width||Ne<0||Ce>this.height)return!K&&[];var $e=[];return this._forEachCell(be,Ce,Me,Ne,this._queryCellCircle,$e,{hitTest:K,circle:{x:R,y:B,radius:q},seenUids:{box:{},circle:{}}},de),K?$e.length>0:$e},Sn.prototype.query=function(R,B,q,K,de){return this._query(R,B,q,K,!1,de)},Sn.prototype.hitTest=function(R,B,q,K,de){return this._query(R,B,q,K,!0,de)},Sn.prototype.hitTestCircle=function(R,B,q,K){return this._queryCircle(R,B,q,!0,K)},Sn.prototype._queryCell=function(R,B,q,K,de,be,Me,Ce){var Ne=Me.seenUids,$e=this.boxCells[de];if(null!==$e)for(var at=this.bboxes,dt=0,Ot=$e;dt<Ot.length;dt+=1){var zt=Ot[dt];if(!Ne.box[zt]){Ne.box[zt]=!0;var Rt=4*zt;if(R<=at[Rt+2]&&B<=at[Rt+3]&&q>=at[Rt+0]&&K>=at[Rt+1]&&(!Ce||Ce(this.boxKeys[zt]))){if(Me.hitTest)return be.push(!0),!0;be.push({key:this.boxKeys[zt],x1:at[Rt],y1:at[Rt+1],x2:at[Rt+2],y2:at[Rt+3]})}}}var Nt=this.circleCells[de];if(null!==Nt)for(var Lt=this.circles,Yt=0,Gt=Nt;Yt<Gt.length;Yt+=1){var Xt=Gt[Yt];if(!Ne.circle[Xt]){Ne.circle[Xt]=!0;var bn=3*Xt;if(this._circleAndRectCollide(Lt[bn],Lt[bn+1],Lt[bn+2],R,B,q,K)&&(!Ce||Ce(this.circleKeys[Xt]))){if(Me.hitTest)return be.push(!0),!0;var En=Lt[bn],Un=Lt[bn+1],Nn=Lt[bn+2];be.push({key:this.circleKeys[Xt],x1:En-Nn,y1:Un-Nn,x2:En+Nn,y2:Un+Nn})}}}},Sn.prototype._queryCellCircle=function(R,B,q,K,de,be,Me,Ce){var Ne=Me.circle,$e=Me.seenUids,at=this.boxCells[de];if(null!==at)for(var dt=this.bboxes,Ot=0,zt=at;Ot<zt.length;Ot+=1){var Rt=zt[Ot];if(!$e.box[Rt]){$e.box[Rt]=!0;var Nt=4*Rt;if(this._circleAndRectCollide(Ne.x,Ne.y,Ne.radius,dt[Nt+0],dt[Nt+1],dt[Nt+2],dt[Nt+3])&&(!Ce||Ce(this.boxKeys[Rt])))return be.push(!0),!0}}var Lt=this.circleCells[de];if(null!==Lt)for(var Yt=this.circles,Gt=0,Xt=Lt;Gt<Xt.length;Gt+=1){var bn=Xt[Gt];if(!$e.circle[bn]){$e.circle[bn]=!0;var En=3*bn;if(this._circlesCollide(Yt[En],Yt[En+1],Yt[En+2],Ne.x,Ne.y,Ne.radius)&&(!Ce||Ce(this.circleKeys[bn])))return be.push(!0),!0}}},Sn.prototype._forEachCell=function(R,B,q,K,de,be,Me,Ce){for(var Ne=this._convertToXCellCoord(R),$e=this._convertToYCellCoord(B),at=this._convertToXCellCoord(q),dt=this._convertToYCellCoord(K),Ot=Ne;Ot<=at;Ot++)for(var zt=$e;zt<=dt;zt++)if(de.call(this,R,B,q,K,this.xCellCount*zt+Ot,be,Me,Ce))return},Sn.prototype._convertToXCellCoord=function(R){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(R*this.xScale)))},Sn.prototype._convertToYCellCoord=function(R){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(R*this.yScale)))},Sn.prototype._circlesCollide=function(R,B,q,K,de,be){var Me=K-R,Ce=de-B,Ne=q+be;return Ne*Ne>Me*Me+Ce*Ce},Sn.prototype._circleAndRectCollide=function(R,B,q,K,de,be,Me){var Ce=(be-K)/2,Ne=Math.abs(R-(K+Ce));if(Ne>Ce+q)return!1;var $e=(Me-de)/2,at=Math.abs(B-(de+$e));if(at>$e+q)return!1;if(Ne<=Ce||at<=$e)return!0;var dt=Ne-Ce,Ot=at-$e;return dt*dt+Ot*Ot<=q*q};var Zr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zr(R,B){for(var q=0;q<R;q++){var K=B.length;B.resize(K+4),B.float32.set(Zr,3*K)}}function pr(R,B,q){var K=B[0],de=B[1];return R[0]=q[0]*K+q[4]*de+q[12],R[1]=q[1]*K+q[5]*de+q[13],R[3]=q[3]*K+q[7]*de+q[15],R}var Br=function(R,B,q){void 0===B&&(B=new Sn(R.width+200,R.height+200,25)),void 0===q&&(q=new Sn(R.width+200,R.height+200,25)),this.transform=R,this.grid=B,this.ignoredGrid=q,this.pitchfactor=Math.cos(R._pitch)*R.cameraToCenterDistance,this.screenRightBoundary=R.width+100,this.screenBottomBoundary=R.height+100,this.gridRightBoundary=R.width+200,this.gridBottomBoundary=R.height+200};function fr(R,B,q){return B*(e.EXTENT/(R.tileSize*Math.pow(2,q-R.tileID.overscaledZ)))}Br.prototype.placeCollisionBox=function(R,B,q,K,de){var be=this.projectAndGetPerspectiveRatio(K,R.anchorPointX,R.anchorPointY),Me=q*be.perspectiveRatio,Ce=R.x1*Me+be.point.x,Ne=R.y1*Me+be.point.y,$e=R.x2*Me+be.point.x,at=R.y2*Me+be.point.y;return!this.isInsideGrid(Ce,Ne,$e,at)||!B&&this.grid.hitTest(Ce,Ne,$e,at,de)?{box:[],offscreen:!1}:{box:[Ce,Ne,$e,at],offscreen:this.isOffscreen(Ce,Ne,$e,at)}},Br.prototype.placeCollisionCircles=function(R,B,q,K,de,be,Me,Ce,Ne,$e,at,dt,Ot){var zt=[],Rt=new e.Point(B.anchorX,B.anchorY),Nt=cn(Rt,be),Lt=vn(this.transform.cameraToCenterDistance,Nt.signedDistanceFromCamera),Yt=($e?de/Lt:de*Lt)/e.ONE_EM,Gt=cn(Rt,Me).point,Xt=Pn(Yt,K,B.lineOffsetX*Yt,B.lineOffsetY*Yt,!1,Gt,Rt,B,q,Me,{}),bn=!1,En=!1,Un=!0;if(Xt){for(var Nn=.5*dt*Lt+Ot,yr=new e.Point(-100,-100),vr=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Pr=new an,Ar=Xt.first,fi=Xt.last,wi=[],Fi=Ar.path.length-1;Fi>=1;Fi--)wi.push(Ar.path[Fi]);for(var ur=1;ur<fi.path.length;ur++)wi.push(fi.path[ur]);var Hr=2.5*Nn;if(Ce){var bi=wi.map(function(vs){return cn(vs,Ce)});wi=bi.some(function(vs){return vs.signedDistanceFromCamera<=0})?[]:bi.map(function(vs){return vs.point})}var mi=[];if(wi.length>0){for(var Si=wi[0].clone(),Ri=wi[0].clone(),na=1;na<wi.length;na++)Si.x=Math.min(Si.x,wi[na].x),Si.y=Math.min(Si.y,wi[na].y),Ri.x=Math.max(Ri.x,wi[na].x),Ri.y=Math.max(Ri.y,wi[na].y);mi=Si.x>=yr.x&&Ri.x<=vr.x&&Si.y>=yr.y&&Ri.y<=vr.y?[wi]:Ri.x<yr.x||Si.x>vr.x||Ri.y<yr.y||Si.y>vr.y?[]:e.clipLine([wi],yr.x,yr.y,vr.x,vr.y)}for(var Ai=0,Qi=mi;Ai<Qi.length;Ai+=1){Pr.reset(Qi[Ai],.25*Nn);var ca;ca=Pr.length<=.5*Nn?1:Math.ceil(Pr.paddedLength/Hr)+1;for(var ea=0;ea<ca;ea++){var ma=ea/Math.max(ca-1,1),Ra=Pr.lerp(ma),Mo=Ra.x+100,Ao=Ra.y+100;zt.push(Mo,Ao,Nn,0);var No=Mo-Nn,ro=Ao-Nn,_o=Mo+Nn,xo=Ao+Nn;if(Un=Un&&this.isOffscreen(No,ro,_o,xo),En=En||this.isInsideGrid(No,ro,_o,xo),!R&&this.grid.hitTestCircle(Mo,Ao,Nn,at)&&(bn=!0,!Ne))return{circles:[],offscreen:!1,collisionDetected:bn}}}}return{circles:!Ne&&bn||!En?[]:zt,offscreen:Un,collisionDetected:bn}},Br.prototype.queryRenderedSymbols=function(R){if(0===R.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var B=[],q=1/0,K=1/0,de=-1/0,be=-1/0,Me=0,Ce=R;Me<Ce.length;Me+=1){var Ne=Ce[Me],$e=new e.Point(Ne.x+100,Ne.y+100);q=Math.min(q,$e.x),K=Math.min(K,$e.y),de=Math.max(de,$e.x),be=Math.max(be,$e.y),B.push($e)}for(var at={},dt={},Ot=0,zt=this.grid.query(q,K,de,be).concat(this.ignoredGrid.query(q,K,de,be));Ot<zt.length;Ot+=1){var Rt=zt[Ot],Nt=Rt.key;if(void 0===at[Nt.bucketInstanceId]&&(at[Nt.bucketInstanceId]={}),!at[Nt.bucketInstanceId][Nt.featureIndex]){var Lt=[new e.Point(Rt.x1,Rt.y1),new e.Point(Rt.x2,Rt.y1),new e.Point(Rt.x2,Rt.y2),new e.Point(Rt.x1,Rt.y2)];e.polygonIntersectsPolygon(B,Lt)&&(at[Nt.bucketInstanceId][Nt.featureIndex]=!0,void 0===dt[Nt.bucketInstanceId]&&(dt[Nt.bucketInstanceId]=[]),dt[Nt.bucketInstanceId].push(Nt.featureIndex))}}return dt},Br.prototype.insertCollisionBox=function(R,B,q,K,de){(B?this.ignoredGrid:this.grid).insert({bucketInstanceId:q,featureIndex:K,collisionGroupID:de},R[0],R[1],R[2],R[3])},Br.prototype.insertCollisionCircles=function(R,B,q,K,de){for(var be=B?this.ignoredGrid:this.grid,Me={bucketInstanceId:q,featureIndex:K,collisionGroupID:de},Ce=0;Ce<R.length;Ce+=4)be.insertCircle(Me,R[Ce],R[Ce+1],R[Ce+2])},Br.prototype.projectAndGetPerspectiveRatio=function(R,B,q){var K=[B,q,0,1];return pr(K,K,R),{point:new e.Point((K[0]/K[3]+1)/2*this.transform.width+100,(-K[1]/K[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/K[3]*.5}},Br.prototype.isOffscreen=function(R,B,q,K){return q<100||R>=this.screenRightBoundary||K<100||B>this.screenBottomBoundary},Br.prototype.isInsideGrid=function(R,B,q,K){return q>=0&&R<this.gridRightBoundary&&K>=0&&B<this.gridBottomBoundary},Br.prototype.getViewportMatrix=function(){var R=e.identity([]);return e.translate(R,R,[-100,-100,0]),R};var Nr=function(R,B,q,K){this.opacity=R?Math.max(0,Math.min(1,R.opacity+(R.placed?B:-B))):K&&q?1:0,this.placed=q};Nr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var xi=function(R,B,q,K,de){this.text=new Nr(R?R.text:null,B,q,de),this.icon=new Nr(R?R.icon:null,B,K,de)};xi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Qn=function(R,B,q){this.text=R,this.icon=B,this.skipFade=q},Er=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},kr=function(R,B,q,K,de){this.bucketInstanceId=R,this.featureIndex=B,this.sourceLayerIndex=q,this.bucketIndex=K,this.tileID=de},sr=function(R){this.crossSourceCollisions=R,this.maxGroupID=0,this.collisionGroups={}};function ci(R,B,q,K,de){var be=e.getAnchorAlignment(R),Me=-(be.horizontalAlign-.5)*B,Ce=-(be.verticalAlign-.5)*q,Ne=e.evaluateVariableOffset(R,K);return new e.Point(Me+Ne[0]*de,Ce+Ne[1]*de)}function oi(R,B,q,K,de,be){var Me=R.x1,Ce=R.x2,Ne=R.y1,$e=R.y2,at=R.anchorPointX,dt=R.anchorPointY,Ot=new e.Point(B,q);return K&&Ot._rotate(de?be:-be),{x1:Me+Ot.x,y1:Ne+Ot.y,x2:Ce+Ot.x,y2:$e+Ot.y,anchorPointX:at,anchorPointY:dt}}sr.prototype.get=function(R){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[R]){var B=++this.maxGroupID;this.collisionGroups[R]={ID:B,predicate:function(q){return q.collisionGroupID===B}}}return this.collisionGroups[R]};var Or=function(R,B,q,K){this.transform=R.clone(),this.collisionIndex=new Br(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=B,this.retainedQueryData={},this.collisionGroups=new sr(q),this.collisionCircleArrays={},this.prevPlacement=K,K&&(K.prevPlacement=void 0),this.placedOrientations={}};function Dr(R,B,q,K,de){R.emplaceBack(B?1:0,q?1:0,K||0,de||0),R.emplaceBack(B?1:0,q?1:0,K||0,de||0),R.emplaceBack(B?1:0,q?1:0,K||0,de||0),R.emplaceBack(B?1:0,q?1:0,K||0,de||0)}Or.prototype.getBucketParts=function(R,B,q,K){var de=q.getBucket(B),be=q.latestFeatureIndex;if(de&&be&&B.id===de.layerIds[0]){var Me=q.collisionBoxArray,Ce=de.layers[0].layout,Ne=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),$e=q.tileSize/e.EXTENT,at=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),dt="map"===Ce.get("text-pitch-alignment"),Ot="map"===Ce.get("text-rotation-alignment"),zt=fr(q,1,this.transform.zoom),Rt=Yn(at,dt,Ot,this.transform,zt),Nt=null;if(dt){var Lt=kn(at,dt,Ot,this.transform,zt);Nt=e.multiply([],this.transform.labelPlaneMatrix,Lt)}this.retainedQueryData[de.bucketInstanceId]=new kr(de.bucketInstanceId,be,de.sourceLayerIndex,de.index,q.tileID);var Yt={bucket:de,layout:Ce,posMatrix:at,textLabelPlaneMatrix:Rt,labelToScreenMatrix:Nt,scale:Ne,textPixelRatio:$e,holdingForFade:q.holdingForFade(),collisionBoxArray:Me,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(de.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(de.sourceID)};if(K)for(var Gt=0,Xt=de.sortKeyRanges;Gt<Xt.length;Gt+=1){var bn=Xt[Gt];R.push({sortKey:bn.sortKey,symbolInstanceStart:bn.symbolInstanceStart,symbolInstanceEnd:bn.symbolInstanceEnd,parameters:Yt})}else R.push({symbolInstanceStart:0,symbolInstanceEnd:de.symbolInstances.length,parameters:Yt})}},Or.prototype.attemptAnchorPlacement=function(R,B,q,K,de,be,Me,Ce,Ne,$e,at,dt,Ot,zt,Rt){var Nt,Lt=[dt.textOffset0,dt.textOffset1],Yt=ci(R,q,K,Lt,de),Gt=this.collisionIndex.placeCollisionBox(oi(B,Yt.x,Yt.y,be,Me,this.transform.angle),at,Ce,Ne,$e.predicate);if((!Rt||0!==this.collisionIndex.placeCollisionBox(oi(Rt,Yt.x,Yt.y,be,Me,this.transform.angle),at,Ce,Ne,$e.predicate).box.length)&&Gt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID].text&&(Nt=this.prevPlacement.variableOffsets[dt.crossTileID].anchor),this.variableOffsets[dt.crossTileID]={textOffset:Lt,width:q,height:K,anchor:R,textBoxScale:de,prevAnchor:Nt},this.markUsedJustification(Ot,R,dt,zt),Ot.allowVerticalPlacement&&(this.markUsedOrientation(Ot,zt,dt),this.placedOrientations[dt.crossTileID]=zt),{shift:Yt,placedGlyphBoxes:Gt}},Or.prototype.placeLayerBucketPart=function(R,B,q){var K=this,de=R.parameters,be=de.bucket,Me=de.layout,Ce=de.posMatrix,Ne=de.textLabelPlaneMatrix,$e=de.labelToScreenMatrix,at=de.textPixelRatio,dt=de.holdingForFade,Ot=de.collisionBoxArray,zt=de.partiallyEvaluatedTextSize,Rt=de.collisionGroup,Nt=Me.get("text-optional"),Lt=Me.get("icon-optional"),Yt=Me.get("text-allow-overlap"),Gt=Me.get("icon-allow-overlap"),Xt="map"===Me.get("text-rotation-alignment"),bn="map"===Me.get("text-pitch-alignment"),En="none"!==Me.get("icon-text-fit"),Un="viewport-y"===Me.get("symbol-z-order"),Nn=Yt&&(Gt||!be.hasIconData()||Lt),yr=Gt&&(Yt||!be.hasTextData()||Nt);!be.collisionArrays&&Ot&&be.deserializeCollisionBoxes(Ot);var vr=function(ur,Hr){if(!B[ur.crossTileID])if(dt)K.placements[ur.crossTileID]=new Qn(!1,!1,!1);else{var bi,mi=!1,Si=!1,Ri=!0,na=null,Ai={box:null,offscreen:null},Qi={box:null,offscreen:null},Gi=null,ca=null,ea=0,ma=0,Ra=0;Hr.textFeatureIndex?ea=Hr.textFeatureIndex:ur.useRuntimeCollisionCircles&&(ea=ur.featureIndex),Hr.verticalTextFeatureIndex&&(ma=Hr.verticalTextFeatureIndex);var Mo=Hr.textBox;if(Mo){var Ao=function(ko){var bs=e.WritingMode.horizontal;if(be.allowVerticalPlacement&&!ko&&K.prevPlacement){var _s=K.prevPlacement.placedOrientations[ur.crossTileID];_s&&(K.placedOrientations[ur.crossTileID]=_s,K.markUsedOrientation(be,bs=_s,ur))}return bs},No=function(ko,bs){if(be.allowVerticalPlacement&&ur.numVerticalGlyphVertices>0&&Hr.verticalTextBox)for(var _s=0,Tf=be.writingModes;_s<Tf.length&&(Tf[_s]===e.WritingMode.vertical?(Ai=bs(),Qi=Ai):Ai=ko(),!(Ai&&Ai.box&&Ai.box.length));_s+=1);else Ai=ko()};if(Me.get("text-variable-anchor")){var ro=Me.get("text-variable-anchor");if(K.prevPlacement&&K.prevPlacement.variableOffsets[ur.crossTileID]){var _o=K.prevPlacement.variableOffsets[ur.crossTileID];ro.indexOf(_o.anchor)>0&&(ro=ro.filter(function(ko){return ko!==_o.anchor})).unshift(_o.anchor)}var xo=function(ko,bs,_s){for(var Tf=ko.x2-ko.x1,Qh=ko.y2-ko.y1,hl=ur.textBoxScale,Mf=En&&!Gt?bs:null,gc={box:[],offscreen:!1},Mp=Yt?2*ro.length:ro.length,Ou=0;Ou<Mp;++Ou){var mc=K.attemptAnchorPlacement(ro[Ou%ro.length],ko,Tf,Qh,hl,Xt,bn,at,Ce,Rt,Ou>=ro.length,ur,be,_s,Mf);if(mc&&(gc=mc.placedGlyphBoxes)&&gc.box&&gc.box.length){mi=!0,na=mc.shift;break}}return gc};No(function(){return xo(Mo,Hr.iconBox,e.WritingMode.horizontal)},function(){var ko=Hr.verticalTextBox;return be.allowVerticalPlacement&&!(Ai&&Ai.box&&Ai.box.length)&&ur.numVerticalGlyphVertices>0&&ko?xo(ko,Hr.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),Ai&&(mi=Ai.box,Ri=Ai.offscreen);var vs=Ao(Ai&&Ai.box);if(!mi&&K.prevPlacement){var Lo=K.prevPlacement.variableOffsets[ur.crossTileID];Lo&&(K.variableOffsets[ur.crossTileID]=Lo,K.markUsedJustification(be,Lo.anchor,ur,vs))}}else{var el=function(ko,bs){var _s=K.collisionIndex.placeCollisionBox(ko,Yt,at,Ce,Rt.predicate);return _s&&_s.box&&_s.box.length&&(K.markUsedOrientation(be,bs,ur),K.placedOrientations[ur.crossTileID]=bs),_s};No(function(){return el(Mo,e.WritingMode.horizontal)},function(){var ko=Hr.verticalTextBox;return be.allowVerticalPlacement&&ur.numVerticalGlyphVertices>0&&ko?el(ko,e.WritingMode.vertical):{box:null,offscreen:null}}),Ao(Ai&&Ai.box&&Ai.box.length)}}if(mi=(bi=Ai)&&bi.box&&bi.box.length>0,Ri=bi&&bi.offscreen,ur.useRuntimeCollisionCircles){var fl=be.text.placedSymbolArray.get(ur.centerJustifiedTextSymbolIndex),au=e.evaluateSizeForFeature(be.textSizeData,zt,fl),Pu=Me.get("text-padding");Gi=K.collisionIndex.placeCollisionCircles(Yt,fl,be.lineVertexArray,be.glyphOffsetArray,au,Ce,Ne,$e,q,bn,Rt.predicate,ur.collisionCircleDiameter,Pu),mi=Yt||Gi.circles.length>0&&!Gi.collisionDetected,Ri=Ri&&Gi.offscreen}if(Hr.iconFeatureIndex&&(Ra=Hr.iconFeatureIndex),Hr.iconBox){var Xu=function(ko){var bs=En&&na?oi(ko,na.x,na.y,Xt,bn,K.transform.angle):ko;return K.collisionIndex.placeCollisionBox(bs,Gt,at,Ce,Rt.predicate)};Si=Qi&&Qi.box&&Qi.box.length&&Hr.verticalIconBox?(ca=Xu(Hr.verticalIconBox)).box.length>0:(ca=Xu(Hr.iconBox)).box.length>0,Ri=Ri&&ca.offscreen}var ys=Nt||0===ur.numHorizontalGlyphVertices&&0===ur.numVerticalGlyphVertices,$u=Lt||0===ur.numIconVertices;if(ys||$u?$u?ys||(Si=Si&&mi):mi=Si&&mi:Si=mi=Si&&mi,mi&&bi&&bi.box&&K.collisionIndex.insertCollisionBox(bi.box,Me.get("text-ignore-placement"),be.bucketInstanceId,Qi&&Qi.box&&ma?ma:ea,Rt.ID),Si&&ca&&K.collisionIndex.insertCollisionBox(ca.box,Me.get("icon-ignore-placement"),be.bucketInstanceId,Ra,Rt.ID),Gi&&(mi&&K.collisionIndex.insertCollisionCircles(Gi.circles,Me.get("text-ignore-placement"),be.bucketInstanceId,ea,Rt.ID),q)){var Bc=be.bucketInstanceId,qs=K.collisionCircleArrays[Bc];void 0===qs&&(qs=K.collisionCircleArrays[Bc]=new Er);for(var Ku=0;Ku<Gi.circles.length;Ku+=4)qs.circles.push(Gi.circles[Ku+0]),qs.circles.push(Gi.circles[Ku+1]),qs.circles.push(Gi.circles[Ku+2]),qs.circles.push(Gi.collisionDetected?1:0)}K.placements[ur.crossTileID]=new Qn(mi||Nn,Si||yr,Ri||be.justReloaded),B[ur.crossTileID]=!0}};if(Un)for(var Pr=be.getSortedSymbolIndexes(this.transform.angle),Ar=Pr.length-1;Ar>=0;--Ar){var fi=Pr[Ar];vr(be.symbolInstances.get(fi),be.collisionArrays[fi])}else for(var wi=R.symbolInstanceStart;wi<R.symbolInstanceEnd;wi++)vr(be.symbolInstances.get(wi),be.collisionArrays[wi]);if(q&&be.bucketInstanceId in this.collisionCircleArrays){var Fi=this.collisionCircleArrays[be.bucketInstanceId];e.invert(Fi.invProjMatrix,Ce),Fi.viewportMatrix=this.collisionIndex.getViewportMatrix()}be.justReloaded=!1},Or.prototype.markUsedJustification=function(R,B,q,K){var de;de=K===e.WritingMode.vertical?q.verticalPlacedTextSymbolIndex:{left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(B)];for(var Me=0,Ce=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex];Me<Ce.length;Me+=1){var Ne=Ce[Me];Ne>=0&&(R.text.placedSymbolArray.get(Ne).crossTileID=de>=0&&Ne!==de?0:q.crossTileID)}},Or.prototype.markUsedOrientation=function(R,B,q){for(var K=B===e.WritingMode.horizontal||B===e.WritingMode.horizontalOnly?B:0,de=B===e.WritingMode.vertical?B:0,be=0,Me=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex];be<Me.length;be+=1)R.text.placedSymbolArray.get(Me[be]).placedOrientation=K;q.verticalPlacedTextSymbolIndex&&(R.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=de)},Or.prototype.commit=function(R){this.commitTime=R,this.zoomAtLastRecencyCheck=this.transform.zoom;var B=this.prevPlacement,q=!1;this.prevZoomAdjustment=B?B.zoomAdjustment(this.transform.zoom):0;var K=B?B.symbolFadeChange(R):1,de=B?B.opacities:{},be=B?B.variableOffsets:{},Me=B?B.placedOrientations:{};for(var Ce in this.placements){var Ne=this.placements[Ce],$e=de[Ce];$e?(this.opacities[Ce]=new xi($e,K,Ne.text,Ne.icon),q=q||Ne.text!==$e.text.placed||Ne.icon!==$e.icon.placed):(this.opacities[Ce]=new xi(null,K,Ne.text,Ne.icon,Ne.skipFade),q=q||Ne.text||Ne.icon)}for(var at in de){var dt=de[at];if(!this.opacities[at]){var Ot=new xi(dt,K,!1,!1);Ot.isHidden()||(this.opacities[at]=Ot,q=q||dt.text.placed||dt.icon.placed)}}for(var zt in be)this.variableOffsets[zt]||!this.opacities[zt]||this.opacities[zt].isHidden()||(this.variableOffsets[zt]=be[zt]);for(var Rt in Me)this.placedOrientations[Rt]||!this.opacities[Rt]||this.opacities[Rt].isHidden()||(this.placedOrientations[Rt]=Me[Rt]);q?this.lastPlacementChangeTime=R:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=B?B.lastPlacementChangeTime:R)},Or.prototype.updateLayerOpacities=function(R,B){for(var q={},K=0,de=B;K<de.length;K+=1){var be=de[K],Me=be.getBucket(R);Me&&be.latestFeatureIndex&&R.id===Me.layerIds[0]&&this.updateBucketOpacities(Me,q,be.collisionBoxArray)}},Or.prototype.updateBucketOpacities=function(R,B,q){var K=this;R.hasTextData()&&R.text.opacityVertexArray.clear(),R.hasIconData()&&R.icon.opacityVertexArray.clear(),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexArray.clear(),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexArray.clear();var de=R.layers[0].layout,be=new xi(null,0,!1,!1,!0),Me=de.get("text-allow-overlap"),Ce=de.get("icon-allow-overlap"),Ne=de.get("text-variable-anchor"),$e="map"===de.get("text-rotation-alignment"),at="map"===de.get("text-pitch-alignment"),dt="none"!==de.get("icon-text-fit"),Ot=new xi(null,0,Me&&(Ce||!R.hasIconData()||de.get("icon-optional")),Ce&&(Me||!R.hasTextData()||de.get("text-optional")),!0);!R.collisionArrays&&q&&(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData())&&R.deserializeCollisionBoxes(q);for(var zt=function(Yt,Gt,Xt){for(var bn=0;bn<Gt/4;bn++)Yt.opacityVertexArray.emplaceBack(Xt)},Rt=function(Yt){var Gt=R.symbolInstances.get(Yt),Xt=Gt.numHorizontalGlyphVertices,bn=Gt.numVerticalGlyphVertices,En=Gt.crossTileID,Nn=K.opacities[En];B[En]?Nn=be:Nn||(K.opacities[En]=Nn=Ot),B[En]=!0;var vr=Gt.numIconVertices>0,Pr=K.placedOrientations[Gt.crossTileID],Ar=Pr===e.WritingMode.vertical,fi=Pr===e.WritingMode.horizontal||Pr===e.WritingMode.horizontalOnly;if(Xt>0||bn>0){var wi=Xn(Nn.text);zt(R.text,Xt,Ar?Hn:wi),zt(R.text,bn,fi?Hn:wi);var Hr=Nn.text.isHidden();[Gt.rightJustifiedTextSymbolIndex,Gt.centerJustifiedTextSymbolIndex,Gt.leftJustifiedTextSymbolIndex].forEach(function(Ra){Ra>=0&&(R.text.placedSymbolArray.get(Ra).hidden=Hr||Ar?1:0)}),Gt.verticalPlacedTextSymbolIndex>=0&&(R.text.placedSymbolArray.get(Gt.verticalPlacedTextSymbolIndex).hidden=Hr||fi?1:0);var bi=K.variableOffsets[Gt.crossTileID];bi&&K.markUsedJustification(R,bi.anchor,Gt,Pr);var mi=K.placedOrientations[Gt.crossTileID];mi&&(K.markUsedJustification(R,"left",Gt,mi),K.markUsedOrientation(R,mi,Gt))}if(vr){var Si=Xn(Nn.icon),Ri=!(dt&&Gt.verticalPlacedIconSymbolIndex&&Ar);Gt.placedIconSymbolIndex>=0&&(zt(R.icon,Gt.numIconVertices,Ri?Si:Hn),R.icon.placedSymbolArray.get(Gt.placedIconSymbolIndex).hidden=Nn.icon.isHidden()),Gt.verticalPlacedIconSymbolIndex>=0&&(zt(R.icon,Gt.numVerticalIconVertices,Ri?Hn:Si),R.icon.placedSymbolArray.get(Gt.verticalPlacedIconSymbolIndex).hidden=Nn.icon.isHidden())}if(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData()){var Qi=R.collisionArrays[Yt];if(Qi){var Gi=new e.Point(0,0);if(Qi.textBox||Qi.verticalTextBox){var ca=!0;if(Ne){var ea=K.variableOffsets[En];ea?(Gi=ci(ea.anchor,ea.width,ea.height,ea.textOffset,ea.textBoxScale),$e&&Gi._rotate(at?K.transform.angle:-K.transform.angle)):ca=!1}Qi.textBox&&Dr(R.textCollisionBox.collisionVertexArray,Nn.text.placed,!ca||Ar,Gi.x,Gi.y),Qi.verticalTextBox&&Dr(R.textCollisionBox.collisionVertexArray,Nn.text.placed,!ca||fi,Gi.x,Gi.y)}var ma=Boolean(!fi&&Qi.verticalIconBox);Qi.iconBox&&Dr(R.iconCollisionBox.collisionVertexArray,Nn.icon.placed,ma,dt?Gi.x:0,dt?Gi.y:0),Qi.verticalIconBox&&Dr(R.iconCollisionBox.collisionVertexArray,Nn.icon.placed,!ma,dt?Gi.x:0,dt?Gi.y:0)}}},Nt=0;Nt<R.symbolInstances.length;Nt++)Rt(Nt);if(R.sortFeatures(this.transform.angle),this.retainedQueryData[R.bucketInstanceId]&&(this.retainedQueryData[R.bucketInstanceId].featureSortOrder=R.featureSortOrder),R.hasTextData()&&R.text.opacityVertexBuffer&&R.text.opacityVertexBuffer.updateData(R.text.opacityVertexArray),R.hasIconData()&&R.icon.opacityVertexBuffer&&R.icon.opacityVertexBuffer.updateData(R.icon.opacityVertexArray),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexBuffer&&R.iconCollisionBox.collisionVertexBuffer.updateData(R.iconCollisionBox.collisionVertexArray),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexBuffer&&R.textCollisionBox.collisionVertexBuffer.updateData(R.textCollisionBox.collisionVertexArray),R.bucketInstanceId in this.collisionCircleArrays){var Lt=this.collisionCircleArrays[R.bucketInstanceId];R.placementInvProjMatrix=Lt.invProjMatrix,R.placementViewportMatrix=Lt.viewportMatrix,R.collisionCircleArray=Lt.circles,delete this.collisionCircleArrays[R.bucketInstanceId]}},Or.prototype.symbolFadeChange=function(R){return 0===this.fadeDuration?1:(R-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Or.prototype.zoomAdjustment=function(R){return Math.max(0,(this.transform.zoom-R)/1.5)},Or.prototype.hasTransitions=function(R){return this.stale||R-this.lastPlacementChangeTime<this.fadeDuration},Or.prototype.stillRecent=function(R,B){var q=this.zoomAtLastRecencyCheck===B?1-this.zoomAdjustment(B):1;return this.zoomAtLastRecencyCheck=B,this.commitTime+this.fadeDuration*q>R},Or.prototype.setStale=function(){this.stale=!0};var wr=Math.pow(2,25),gn=Math.pow(2,24),tr=Math.pow(2,17),qt=Math.pow(2,16),_n=Math.pow(2,9),Cn=Math.pow(2,8),Jn=Math.pow(2,1);function Xn(R){if(0===R.opacity&&!R.placed)return 0;if(1===R.opacity&&R.placed)return 4294967295;var B=R.placed?1:0,q=Math.floor(127*R.opacity);return q*wr+B*gn+q*tr+B*qt+q*_n+B*Cn+q*Jn+B}var Hn=0,Bn=function(R){this._sortAcrossTiles="viewport-y"!==R.layout.get("symbol-z-order")&&void 0!==R.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Bn.prototype.continuePlacement=function(R,B,q,K,de){for(var be=this._bucketParts;this._currentTileIndex<R.length;)if(B.getBucketParts(be,K,R[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,de())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,be.sort(function(Ne,$e){return Ne.sortKey-$e.sortKey}));this._currentPartIndex<be.length;)if(B.placeLayerBucketPart(be[this._currentPartIndex],this._seenCrossTileIDs,q),this._currentPartIndex++,de())return!0;return!1};var zn=function(R,B,q,K,de,be,Me){this.placement=new Or(R,de,be,Me),this._currentPlacementIndex=B.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=K,this._done=!1};zn.prototype.isDone=function(){return this._done},zn.prototype.continuePlacement=function(R,B,q){for(var K=this,de=e.browser.now(),be=function(){var Ne=e.browser.now()-de;return!K._forceFullPlacement&&Ne>2};this._currentPlacementIndex>=0;){var Me=B[R[this._currentPlacementIndex]],Ce=this.placement.collisionIndex.transform.zoom;if("symbol"===Me.type&&(!Me.minzoom||Me.minzoom<=Ce)&&(!Me.maxzoom||Me.maxzoom>Ce)){if(this._inProgressLayer||(this._inProgressLayer=new Bn(Me)),this._inProgressLayer.continuePlacement(q[Me.source],this.placement,this._showCollisionBoxes,Me,be))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},zn.prototype.commit=function(R){return this.placement.commit(R),this.placement};var jn=512/e.EXTENT/2,Vn=function(R,B,q){this.tileID=R,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var K=0;K<B.length;K++){var de=B.get(K),be=de.key;this.indexedSymbolInstances[be]||(this.indexedSymbolInstances[be]=[]),this.indexedSymbolInstances[be].push({crossTileID:de.crossTileID,coord:this.getScaledCoordinates(de,R)})}};Vn.prototype.getScaledCoordinates=function(R,B){var K=jn/Math.pow(2,B.canonical.z-this.tileID.canonical.z);return{x:Math.floor((B.canonical.x*e.EXTENT+R.anchorX)*K),y:Math.floor((B.canonical.y*e.EXTENT+R.anchorY)*K)}},Vn.prototype.findMatches=function(R,B,q){for(var K=this.tileID.canonical.z<B.canonical.z?1:Math.pow(2,this.tileID.canonical.z-B.canonical.z),de=0;de<R.length;de++){var be=R.get(de);if(!be.crossTileID){var Me=this.indexedSymbolInstances[be.key];if(Me)for(var Ce=this.getScaledCoordinates(be,B),Ne=0,$e=Me;Ne<$e.length;Ne+=1){var at=$e[Ne];if(Math.abs(at.coord.x-Ce.x)<=K&&Math.abs(at.coord.y-Ce.y)<=K&&!q[at.crossTileID]){q[at.crossTileID]=!0,be.crossTileID=at.crossTileID;break}}}}};var On=function(){this.maxCrossTileID=0};On.prototype.generate=function(){return++this.maxCrossTileID};var dr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};dr.prototype.handleWrapJump=function(R){var B=Math.round((R-this.lng)/360);if(0!==B)for(var q in this.indexes){var K=this.indexes[q],de={};for(var be in K){var Me=K[be];Me.tileID=Me.tileID.unwrapTo(Me.tileID.wrap+B),de[Me.tileID.key]=Me}this.indexes[q]=de}this.lng=R},dr.prototype.addBucket=function(R,B,q){if(this.indexes[R.overscaledZ]&&this.indexes[R.overscaledZ][R.key]){if(this.indexes[R.overscaledZ][R.key].bucketInstanceId===B.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(R.overscaledZ,this.indexes[R.overscaledZ][R.key])}for(var K=0;K<B.symbolInstances.length;K++)B.symbolInstances.get(K).crossTileID=0;this.usedCrossTileIDs[R.overscaledZ]||(this.usedCrossTileIDs[R.overscaledZ]={});var de=this.usedCrossTileIDs[R.overscaledZ];for(var be in this.indexes){var Me=this.indexes[be];if(Number(be)>R.overscaledZ)for(var Ce in Me){var Ne=Me[Ce];Ne.tileID.isChildOf(R)&&Ne.findMatches(B.symbolInstances,R,de)}else{var $e=Me[R.scaledTo(Number(be)).key];$e&&$e.findMatches(B.symbolInstances,R,de)}}for(var at=0;at<B.symbolInstances.length;at++){var dt=B.symbolInstances.get(at);dt.crossTileID||(dt.crossTileID=q.generate(),de[dt.crossTileID]=!0)}return void 0===this.indexes[R.overscaledZ]&&(this.indexes[R.overscaledZ]={}),this.indexes[R.overscaledZ][R.key]=new Vn(R,B.symbolInstances,B.bucketInstanceId),!0},dr.prototype.removeBucketCrossTileIDs=function(R,B){for(var q in B.indexedSymbolInstances)for(var K=0,de=B.indexedSymbolInstances[q];K<de.length;K+=1)delete this.usedCrossTileIDs[R][de[K].crossTileID]},dr.prototype.removeStaleBuckets=function(R){var B=!1;for(var q in this.indexes){var K=this.indexes[q];for(var de in K)R[K[de].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,K[de]),delete K[de],B=!0)}return B};var ir=function(){this.layerIndexes={},this.crossTileIDs=new On,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ir.prototype.addLayer=function(R,B,q){var K=this.layerIndexes[R.id];void 0===K&&(K=this.layerIndexes[R.id]=new dr);var de=!1,be={};K.handleWrapJump(q);for(var Me=0,Ce=B;Me<Ce.length;Me+=1){var Ne=Ce[Me],$e=Ne.getBucket(R);$e&&R.id===$e.layerIds[0]&&($e.bucketInstanceId||($e.bucketInstanceId=++this.maxBucketInstanceId),K.addBucket(Ne.tileID,$e,this.crossTileIDs)&&(de=!0),be[$e.bucketInstanceId]=!0)}return K.removeStaleBuckets(be)&&(de=!0),de},ir.prototype.pruneUnusedLayers=function(R){var B={};for(var q in R.forEach(function(K){B[K]=!0}),this.layerIndexes)B[q]||delete this.layerIndexes[q]};var br=function(R,B){return e.emitValidationErrors(R,B&&B.filter(function(q){return"source.canvas"!==q.identifier}))},Tr=e.pick(Dt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Fr=e.pick(Dt,["setCenter","setZoom","setBearing","setPitch"]),Vr=function(){var R={},B=e.styleSpec.$version;for(var q in e.styleSpec.$root){var K=e.styleSpec.$root[q];if(K.required){var de;null!=(de="version"===q?B:"array"===K.type?[]:{})&&(R[q]=de)}}return R}(),Ur=function(R){function B(q,K){var de=this;void 0===K&&(K={}),R.call(this),this.map=q,this.dispatcher=new L(vt(),this),this.imageManager=new m,this.imageManager.setEventedParent(this),this.glyphManager=new C(q._requestManager,K.localIdeographFontFamily),this.lineAtlas=new F(256,512),this.crossTileSymbolIndex=new ir,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var be=this;this._rtlTextPluginCallback=B.registerForPluginStateChange(function(Me){be.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Me.pluginStatus,pluginURL:Me.pluginURL},function(Ne,$e){if(e.triggerPluginCompletionEvent(Ne),$e&&$e.every(function(dt){return dt}))for(var at in be.sourceCaches)be.sourceCaches[at].reload()})}),this.on("data",function(Me){if("source"===Me.dataType&&"metadata"===Me.sourceDataType){var Ce=de.sourceCaches[Me.sourceId];if(Ce){var Ne=Ce.getSource();if(Ne&&Ne.vectorLayerIds)for(var $e in de._layers){var at=de._layers[$e];at.source===Ne.id&&de._validateLayer(at)}}}})}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.loadURL=function(q,K){var de=this;void 0===K&&(K={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var be="boolean"==typeof K.validate?K.validate:!e.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,K.accessToken);var Me=this.map._requestManager.transformRequest(q,e.ResourceType.Style);this._request=e.getJSON(Me,function(Ce,Ne){de._request=null,Ce?de.fire(new e.ErrorEvent(Ce)):Ne&&de._load(Ne,be)})},B.prototype.loadJSON=function(q,K){var de=this;void 0===K&&(K={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){de._request=null,de._load(q,!1!==K.validate)})},B.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Vr,!1)},B.prototype._load=function(q,K){if(!K||!br(this,e.validateStyle(q))){for(var de in this._loaded=!0,this.stylesheet=q,q.sources)this.addSource(de,q.sources[de],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var be=$t(this.stylesheet.layers);this._order=be.map(function($e){return $e.id}),this._layers={},this._serializedLayers={};for(var Me=0,Ce=be;Me<Ce.length;Me+=1){var Ne=Ce[Me];(Ne=e.createStyleLayer(Ne)).setEventedParent(this,{layer:{id:Ne.id}}),this._layers[Ne.id]=Ne,this._serializedLayers[Ne.id]=Ne.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new N(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},B.prototype._loadSprite=function(q){var K=this;this._spriteRequest=function(de,be,Me){var Ce,Ne,$e,at=e.browser.devicePixelRatio>1?"@2x":"",dt=e.getJSON(be.transformRequest(be.normalizeSpriteURL(de,at,".json"),e.ResourceType.SpriteJSON),function(Rt,Nt){dt=null,$e||($e=Rt,Ce=Nt,zt())}),Ot=e.getImage(be.transformRequest(be.normalizeSpriteURL(de,at,".png"),e.ResourceType.SpriteImage),function(Rt,Nt){Ot=null,$e||($e=Rt,Ne=Nt,zt())});function zt(){if($e)Me($e);else if(Ce&&Ne){var Rt=e.browser.getImageData(Ne),Nt={};for(var Lt in Ce){var Yt=Ce[Lt],Gt=Yt.width,Xt=Yt.height,bn=Yt.x,En=Yt.y,Un=Yt.sdf,Nn=Yt.pixelRatio,yr=Yt.stretchX,vr=Yt.stretchY,Pr=Yt.content,Ar=new e.RGBAImage({width:Gt,height:Xt});e.RGBAImage.copy(Rt,Ar,{x:bn,y:En},{x:0,y:0},{width:Gt,height:Xt}),Nt[Lt]={data:Ar,pixelRatio:Nn,sdf:Un,stretchX:yr,stretchY:vr,content:Pr}}Me(null,Nt)}}return{cancel:function(){dt&&(dt.cancel(),dt=null),Ot&&(Ot.cancel(),Ot=null)}}}(q,this.map._requestManager,function(de,be){if(K._spriteRequest=null,de)K.fire(new e.ErrorEvent(de));else if(be)for(var Me in be)K.imageManager.addImage(Me,be[Me]);K.imageManager.setLoaded(!0),K._availableImages=K.imageManager.listImages(),K.dispatcher.broadcast("setImages",K._availableImages),K.fire(new e.Event("data",{dataType:"style"}))})},B.prototype._validateLayer=function(q){var K=this.sourceCaches[q.source];if(K){var de=q.sourceLayer;if(de){var be=K.getSource();("geojson"===be.type||be.vectorLayerIds&&-1===be.vectorLayerIds.indexOf(de))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+de+'" does not exist on source "'+be.id+'" as specified by style layer "'+q.id+'"')))}}},B.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},B.prototype._serializeLayers=function(q){for(var K=[],de=0,be=q;de<be.length;de+=1){var Ce=this._layers[be[de]];"custom"!==Ce.type&&K.push(Ce.serialize())}return K},B.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var K in this._layers)if(this._layers[K].hasTransition())return!0;return!1},B.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},B.prototype.update=function(q){if(this._loaded){var K=this._changed;if(this._changed){var de=Object.keys(this._updatedLayers),be=Object.keys(this._removedLayers);for(var Me in(de.length||be.length)&&this._updateWorkerLayers(de,be),this._updatedSources){var Ce=this._updatedSources[Me];"reload"===Ce?this._reloadSource(Me):"clear"===Ce&&this._clearSource(Me)}for(var Ne in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ne].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}for(var $e in this.sourceCaches)this.sourceCaches[$e].used=!1;for(var at=0,dt=this._order;at<dt.length;at+=1){var zt=this._layers[dt[at]];zt.recalculate(q,this._availableImages),!zt.isHidden(q.zoom)&&zt.source&&(this.sourceCaches[zt.source].used=!0)}this.light.recalculate(q),this.z=q.zoom,K&&this.fire(new e.Event("data",{dataType:"style"}))}},B.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var K in this.sourceCaches)this.sourceCaches[K].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},B.prototype._updateWorkerLayers=function(q,K){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:K})},B.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},B.prototype.setState=function(q){var K=this;if(this._checkLoaded(),br(this,e.validateStyle(q)))return!1;(q=e.clone$1(q)).layers=$t(q.layers);var de=function fn(R,B){if(!R)return[{command:Dt.setStyle,args:[B]}];var q=[];try{if(!e.deepEqual(R.version,B.version))return[{command:Dt.setStyle,args:[B]}];e.deepEqual(R.center,B.center)||q.push({command:Dt.setCenter,args:[B.center]}),e.deepEqual(R.zoom,B.zoom)||q.push({command:Dt.setZoom,args:[B.zoom]}),e.deepEqual(R.bearing,B.bearing)||q.push({command:Dt.setBearing,args:[B.bearing]}),e.deepEqual(R.pitch,B.pitch)||q.push({command:Dt.setPitch,args:[B.pitch]}),e.deepEqual(R.sprite,B.sprite)||q.push({command:Dt.setSprite,args:[B.sprite]}),e.deepEqual(R.glyphs,B.glyphs)||q.push({command:Dt.setGlyphs,args:[B.glyphs]}),e.deepEqual(R.transition,B.transition)||q.push({command:Dt.setTransition,args:[B.transition]}),e.deepEqual(R.light,B.light)||q.push({command:Dt.setLight,args:[B.light]});var K={},de=[];!function(Me,Ce,Ne,$e){var at;for(at in Ce=Ce||{},Me=Me||{})Me.hasOwnProperty(at)&&(Ce.hasOwnProperty(at)||je(at,Ne,$e));for(at in Ce)Ce.hasOwnProperty(at)&&(Me.hasOwnProperty(at)?e.deepEqual(Me[at],Ce[at])||("geojson"===Me[at].type&&"geojson"===Ce[at].type&&pt(Me,Ce,at)?Ne.push({command:Dt.setGeoJSONSourceData,args:[at,Ce[at].data]}):rt(at,Ce,Ne,$e)):Pt(at,Ce,Ne))}(R.sources,B.sources,de,K);var be=[];R.layers&&R.layers.forEach(function(Me){K[Me.source]?q.push({command:Dt.removeLayer,args:[Me.id]}):be.push(Me)}),q=q.concat(de),function(Me,Ce,Ne){Ce=Ce||[];var $e,at,dt,Ot,zt,Rt,Nt,Lt=(Me=Me||[]).map(jt),Yt=Ce.map(jt),Gt=Me.reduce(Qt,{}),Xt=Ce.reduce(Qt,{}),bn=Lt.slice(),En=Object.create(null);for($e=0,at=0;$e<Lt.length;$e++)Xt.hasOwnProperty(dt=Lt[$e])?at++:(Ne.push({command:Dt.removeLayer,args:[dt]}),bn.splice(bn.indexOf(dt,at),1));for($e=0,at=0;$e<Yt.length;$e++)bn[bn.length-1-$e]!==(dt=Yt[Yt.length-1-$e])&&(Gt.hasOwnProperty(dt)?(Ne.push({command:Dt.removeLayer,args:[dt]}),bn.splice(bn.lastIndexOf(dt,bn.length-at),1)):at++,Ne.push({command:Dt.addLayer,args:[Xt[dt],Rt=bn[bn.length-$e]]}),bn.splice(bn.length-$e,0,dt),En[dt]=!0);for($e=0;$e<Yt.length;$e++)if(Ot=Gt[dt=Yt[$e]],zt=Xt[dt],!En[dt]&&!e.deepEqual(Ot,zt))if(e.deepEqual(Ot.source,zt.source)&&e.deepEqual(Ot["source-layer"],zt["source-layer"])&&e.deepEqual(Ot.type,zt.type)){for(Nt in It(Ot.layout,zt.layout,Ne,dt,null,Dt.setLayoutProperty),It(Ot.paint,zt.paint,Ne,dt,null,Dt.setPaintProperty),e.deepEqual(Ot.filter,zt.filter)||Ne.push({command:Dt.setFilter,args:[dt,zt.filter]}),e.deepEqual(Ot.minzoom,zt.minzoom)&&e.deepEqual(Ot.maxzoom,zt.maxzoom)||Ne.push({command:Dt.setLayerZoomRange,args:[dt,zt.minzoom,zt.maxzoom]}),Ot)Ot.hasOwnProperty(Nt)&&"layout"!==Nt&&"paint"!==Nt&&"filter"!==Nt&&"metadata"!==Nt&&"minzoom"!==Nt&&"maxzoom"!==Nt&&(0===Nt.indexOf("paint.")?It(Ot[Nt],zt[Nt],Ne,dt,Nt.slice(6),Dt.setPaintProperty):e.deepEqual(Ot[Nt],zt[Nt])||Ne.push({command:Dt.setLayerProperty,args:[dt,Nt,zt[Nt]]}));for(Nt in zt)zt.hasOwnProperty(Nt)&&!Ot.hasOwnProperty(Nt)&&"layout"!==Nt&&"paint"!==Nt&&"filter"!==Nt&&"metadata"!==Nt&&"minzoom"!==Nt&&"maxzoom"!==Nt&&(0===Nt.indexOf("paint.")?It(Ot[Nt],zt[Nt],Ne,dt,Nt.slice(6),Dt.setPaintProperty):e.deepEqual(Ot[Nt],zt[Nt])||Ne.push({command:Dt.setLayerProperty,args:[dt,Nt,zt[Nt]]}))}else Ne.push({command:Dt.removeLayer,args:[dt]}),Rt=bn[bn.lastIndexOf(dt)+1],Ne.push({command:Dt.addLayer,args:[zt,Rt]})}(be,B.layers,q)}catch(Me){console.warn("Unable to compute style diff:",Me),q=[{command:Dt.setStyle,args:[B]}]}return q}(this.serialize(),q).filter(function(Me){return!(Me.command in Fr)});if(0===de.length)return!1;var be=de.filter(function(Me){return!(Me.command in Tr)});if(be.length>0)throw new Error("Unimplemented: "+be.map(function(Me){return Me.command}).join(", ")+".");return de.forEach(function(Me){"setTransition"!==Me.command&&K[Me.command].apply(K,Me.args)}),this.stylesheet=q,!0},B.prototype.addImage=function(q,K){if(this.getImage(q))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,K),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},B.prototype.updateImage=function(q,K){this.imageManager.updateImage(q,K)},B.prototype.getImage=function(q){return this.imageManager.getImage(q)},B.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},B.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},B.prototype.addSource=function(q,K,de){var be=this;if(void 0===de&&(de={}),this._checkLoaded(),void 0!==this.sourceCaches[q])throw new Error("There is already a source with this ID");if(!K.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(K).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(K.type)>=0&&this._validate(e.validateStyle.source,"sources."+q,K,null,de))){this.map&&this.map._collectResourceTiming&&(K.collectResourceTiming=!0);var Me=this.sourceCaches[q]=new Ye(q,K,this.dispatcher);Me.style=this,Me.setEventedParent(this,function(){return{isSourceLoaded:be.loaded(),source:Me.serialize(),sourceId:q}}),Me.onAdd(this.map),this._changed=!0}},B.prototype.removeSource=function(q){if(this._checkLoaded(),void 0===this.sourceCaches[q])throw new Error("There is no source with this ID");for(var K in this._layers)if(this._layers[K].source===q)return this.fire(new e.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+K+'" is using it.')));var de=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],de.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),de.setEventedParent(null),de.clearTiles(),de.onRemove&&de.onRemove(this.map),this._changed=!0},B.prototype.setGeoJSONSourceData=function(q,K){this._checkLoaded(),this.sourceCaches[q].getSource().setData(K),this._changed=!0},B.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},B.prototype.addLayer=function(q,K,de){void 0===de&&(de={}),this._checkLoaded();var be=q.id;if(this.getLayer(be))this.fire(new e.ErrorEvent(new Error('Layer with id "'+be+'" already exists on this map')));else{var Me;if("custom"===q.type){if(br(this,e.validateCustomStyleLayer(q)))return;Me=e.createStyleLayer(q)}else{if("object"==typeof q.source&&(this.addSource(be,q.source),q=e.clone$1(q),q=e.extend(q,{source:be})),this._validate(e.validateStyle.layer,"layers."+be,q,{arrayIndex:-1},de))return;Me=e.createStyleLayer(q),this._validateLayer(Me),Me.setEventedParent(this,{layer:{id:be}}),this._serializedLayers[Me.id]=Me.serialize()}var Ce=K?this._order.indexOf(K):this._order.length;if(K&&-1===Ce)this.fire(new e.ErrorEvent(new Error('Layer with id "'+K+'" does not exist on this map.')));else{if(this._order.splice(Ce,0,be),this._layerOrderChanged=!0,this._layers[be]=Me,this._removedLayers[be]&&Me.source&&"custom"!==Me.type){var Ne=this._removedLayers[be];delete this._removedLayers[be],Ne.type!==Me.type?this._updatedSources[Me.source]="clear":(this._updatedSources[Me.source]="reload",this.sourceCaches[Me.source].pause())}this._updateLayer(Me),Me.onAdd&&Me.onAdd(this.map)}}},B.prototype.moveLayer=function(q,K){if(this._checkLoaded(),this._changed=!0,this._layers[q]){if(q!==K){var de=this._order.indexOf(q);this._order.splice(de,1);var be=K?this._order.indexOf(K):this._order.length;K&&-1===be?this.fire(new e.ErrorEvent(new Error('Layer with id "'+K+'" does not exist on this map.'))):(this._order.splice(be,0,q),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")))},B.prototype.removeLayer=function(q){this._checkLoaded();var K=this._layers[q];if(K){K.setEventedParent(null);var de=this._order.indexOf(q);this._order.splice(de,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=K,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],K.onRemove&&K.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")))},B.prototype.getLayer=function(q){return this._layers[q]},B.prototype.hasLayer=function(q){return q in this._layers},B.prototype.setLayerZoomRange=function(q,K,de){this._checkLoaded();var be=this.getLayer(q);be?be.minzoom===K&&be.maxzoom===de||(null!=K&&(be.minzoom=K),null!=de&&(be.maxzoom=de),this._updateLayer(be)):this.fire(new e.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")))},B.prototype.setFilter=function(q,K,de){void 0===de&&(de={}),this._checkLoaded();var be=this.getLayer(q);if(be){if(!e.deepEqual(be.filter,K))return null==K?(be.filter=void 0,void this._updateLayer(be)):void(this._validate(e.validateStyle.filter,"layers."+be.id+".filter",K,null,de)||(be.filter=e.clone$1(K),this._updateLayer(be)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")))},B.prototype.getFilter=function(q){return e.clone$1(this.getLayer(q).filter)},B.prototype.setLayoutProperty=function(q,K,de,be){void 0===be&&(be={}),this._checkLoaded();var Me=this.getLayer(q);Me?e.deepEqual(Me.getLayoutProperty(K),de)||(Me.setLayoutProperty(K,de,be),this._updateLayer(Me)):this.fire(new e.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},B.prototype.getLayoutProperty=function(q,K){var de=this.getLayer(q);if(de)return de.getLayoutProperty(K);this.fire(new e.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")))},B.prototype.setPaintProperty=function(q,K,de,be){void 0===be&&(be={}),this._checkLoaded();var Me=this.getLayer(q);Me?e.deepEqual(Me.getPaintProperty(K),de)||(Me.setPaintProperty(K,de,be)&&this._updateLayer(Me),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},B.prototype.getPaintProperty=function(q,K){return this.getLayer(q).getPaintProperty(K)},B.prototype.setFeatureState=function(q,K){this._checkLoaded();var de=q.source,be=q.sourceLayer,Me=this.sourceCaches[de];if(void 0!==Me){var Ce=Me.getSource().type;"geojson"===Ce&&be?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==Ce||be?(void 0===q.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Me.setFeatureState(be,q.id,K)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+de+"' does not exist in the map's style.")))},B.prototype.removeFeatureState=function(q,K){this._checkLoaded();var de=q.source,be=this.sourceCaches[de];if(void 0!==be){var Me=be.getSource().type,Ce="vector"===Me?q.sourceLayer:void 0;"vector"!==Me||Ce?K&&"string"!=typeof q.id&&"number"!=typeof q.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):be.removeFeatureState(Ce,q.id,K):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+de+"' does not exist in the map's style.")))},B.prototype.getFeatureState=function(q){this._checkLoaded();var K=q.source,de=q.sourceLayer,be=this.sourceCaches[K];if(void 0!==be){if("vector"!==be.getSource().type||de)return void 0===q.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),be.getFeatureState(de,q.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+K+"' does not exist in the map's style.")))},B.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},B.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return void 0!==q})},B.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&"raster"!==this.sourceCaches[q.source].getSource().type&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},B.prototype._flattenAndSortRenderedFeatures=function(q){for(var K=this,de=function(Pr){return"fill-extrusion"===K._layers[Pr].type},be={},Me=[],Ce=this._order.length-1;Ce>=0;Ce--){var Ne=this._order[Ce];if(de(Ne)){be[Ne]=Ce;for(var $e=0,at=q;$e<at.length;$e+=1){var dt=at[$e][Ne];if(dt)for(var Ot=0,zt=dt;Ot<zt.length;Ot+=1)Me.push(zt[Ot])}}}Me.sort(function(Pr,Ar){return Ar.intersectionZ-Pr.intersectionZ});for(var Nt=[],Lt=this._order.length-1;Lt>=0;Lt--){var Yt=this._order[Lt];if(de(Yt))for(var Gt=Me.length-1;Gt>=0;Gt--){var Xt=Me[Gt].feature;if(be[Xt.layer.id]<Lt)break;Nt.push(Xt),Me.pop()}else for(var bn=0,En=q;bn<En.length;bn+=1){var Un=En[bn][Yt];if(Un)for(var Nn=0,yr=Un;Nn<yr.length;Nn+=1)Nt.push(yr[Nn].feature)}}return Nt},B.prototype.queryRenderedFeatures=function(q,K,de){K&&K.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",K.filter,null,K);var be={};if(K&&K.layers){if(!Array.isArray(K.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Me=0,Ce=K.layers;Me<Ce.length;Me+=1){var Ne=Ce[Me],$e=this._layers[Ne];if(!$e)return this.fire(new e.ErrorEvent(new Error("The layer '"+Ne+"' does not exist in the map's style and cannot be queried for features."))),[];be[$e.source]=!0}}var at=[];for(var dt in K.availableImages=this._availableImages,this.sourceCaches)K.layers&&!be[dt]||at.push(Y(this.sourceCaches[dt],this._layers,this._serializedLayers,q,K,de));return this.placement&&at.push(function(Ot,zt,Rt,Nt,Lt,Yt,Gt){for(var Xt={},bn=Yt.queryRenderedSymbols(Nt),En=[],Un=0,Nn=Object.keys(bn).map(Number);Un<Nn.length;Un+=1)En.push(Gt[Nn[Un]]);En.sort(oe);for(var vr=function(){var Fi=Ar[Pr],ur=Fi.featureIndex.lookupSymbolFeatures(bn[Fi.bucketInstanceId],zt,Fi.bucketIndex,Fi.sourceLayerIndex,Lt.filter,Lt.layers,Lt.availableImages,Ot);for(var Hr in ur){var bi=Xt[Hr]=Xt[Hr]||[],mi=ur[Hr];mi.sort(function(Ai,Qi){var Gi=Fi.featureSortOrder;if(Gi){var ca=Gi.indexOf(Ai.featureIndex);return Gi.indexOf(Qi.featureIndex)-ca}return Qi.featureIndex-Ai.featureIndex});for(var Si=0,Ri=mi;Si<Ri.length;Si+=1)bi.push(Ri[Si])}},Pr=0,Ar=En;Pr<Ar.length;Pr+=1)vr();var fi=function(Fi){Xt[Fi].forEach(function(ur){var Hr=ur.feature,mi=Rt[Ot[Fi].source].getFeatureState(Hr.layer["source-layer"],Hr.id);Hr.source=Hr.layer.source,Hr.layer["source-layer"]&&(Hr.sourceLayer=Hr.layer["source-layer"]),Hr.state=mi})};for(var wi in Xt)fi(wi);return Xt}(this._layers,this._serializedLayers,this.sourceCaches,q,K,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(at)},B.prototype.querySourceFeatures=function(q,K){K&&K.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",K.filter,null,K);var de=this.sourceCaches[q];return de?function(be,Me){for(var Ce=be.getRenderableIds().map(function(zt){return be.getTileByID(zt)}),Ne=[],$e={},at=0;at<Ce.length;at++){var dt=Ce[at],Ot=dt.tileID.canonical.key;$e[Ot]||($e[Ot]=!0,dt.querySourceFeatures(Ne,Me))}return Ne}(de,K):[]},B.prototype.addSourceType=function(q,K,de){return B.getSourceType(q)?de(new Error('A source type called "'+q+'" already exists.')):(B.setSourceType(q,K),K.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:K.workerSourceURL},de):de(null,null))},B.prototype.getLight=function(){return this.light.getLight()},B.prototype.setLight=function(q,K){void 0===K&&(K={}),this._checkLoaded();var de=this.light.getLight(),be=!1;for(var Me in q)if(!e.deepEqual(q[Me],de[Me])){be=!0;break}if(be){var Ce={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,K),this.light.updateTransitions(Ce)}},B.prototype._validate=function(q,K,de,be,Me){return void 0===Me&&(Me={}),(!Me||!1!==Me.validate)&&br(this,q.call(e.validateStyle,e.extend({key:K,style:this.serialize(),value:de,styleSpec:e.styleSpec},be)))},B.prototype._remove=function(){for(var q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[q].setEventedParent(null);for(var K in this.sourceCaches)this.sourceCaches[K].clearTiles(),this.sourceCaches[K].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},B.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},B.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},B.prototype._updateSources=function(q){for(var K in this.sourceCaches)this.sourceCaches[K].update(q)},B.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},B.prototype._updatePlacement=function(q,K,de,be,Me){void 0===Me&&(Me=!1);for(var Ce=!1,Ne=!1,$e={},at=0,dt=this._order;at<dt.length;at+=1){var zt=this._layers[dt[at]];if("symbol"===zt.type){if(!$e[zt.source]){var Rt=this.sourceCaches[zt.source];$e[zt.source]=Rt.getRenderableIds(!0).map(function(bn){return Rt.getTileByID(bn)}).sort(function(bn,En){return En.tileID.overscaledZ-bn.tileID.overscaledZ||(bn.tileID.isLessThan(En.tileID)?-1:1)})}var Nt=this.crossTileSymbolIndex.addLayer(zt,$e[zt.source],q.center.lng);Ce=Ce||Nt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Me=Me||this._layerOrderChanged||0===de)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),q.zoom))&&(this.pauseablePlacement=new zn(q,this._order,Me,K,de,be,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$e),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Ne=!0),Ce&&this.pauseablePlacement.placement.setStale()),Ne||Ce)for(var Lt=0,Yt=this._order;Lt<Yt.length;Lt+=1){var Xt=this._layers[Yt[Lt]];"symbol"===Xt.type&&this.placement.updateLayerOpacities(Xt,$e[Xt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},B.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},B.prototype.getImages=function(q,K,de){this.imageManager.getImages(K.icons,de),this._updateTilesForChangedImages();var be=this.sourceCaches[K.source];be&&be.setDependencies(K.tileID.key,K.type,K.icons)},B.prototype.getGlyphs=function(q,K,de){this.glyphManager.getGlyphs(K.stacks,de)},B.prototype.getResource=function(q,K,de){return e.makeRequest(K,de)},B}(e.Evented);Ur.getSourceType=function(R){return G[R]},Ur.setSourceType=function(R,B){G[R]=B},Ur.registerForPluginStateChange=e.registerForPluginStateChange;var Xr=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),ri=Fa("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),_i=Fa("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ra=Fa("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),hi=Fa("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Gr=Fa("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Mi=Fa("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),vi=Fa("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),_a=Fa("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Co=Fa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),oo=Fa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),yo=Fa("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ha=Fa("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),qa=Fa("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ho=Fa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ka=Fa("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ds=Fa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Ts=Fa("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Uo=Fa("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),pa=Fa("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Rs=Fa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Us=Fa("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),wo=Fa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ia=Fa("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),qo=Fa("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),jl=Fa("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Yl=Fa("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Fa(R,B){var q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,K={};return{fragmentSource:R=R.replace(q,function(de,be,Me,Ce,Ne){return K[Ne]=!0,"define"===be?"\n#ifndef HAS_UNIFORM_u_"+Ne+"\nvarying "+Me+" "+Ce+" "+Ne+";\n#else\nuniform "+Me+" "+Ce+" u_"+Ne+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Ne+"\n    "+Me+" "+Ce+" "+Ne+" = u_"+Ne+";\n#endif\n"}),vertexSource:B=B.replace(q,function(de,be,Me,Ce,Ne){var $e="float"===Ce?"vec2":"vec4",at=Ne.match(/color/)?"color":$e;return K[Ne]?"define"===be?"\n#ifndef HAS_UNIFORM_u_"+Ne+"\nuniform lowp float u_"+Ne+"_t;\nattribute "+Me+" "+$e+" a_"+Ne+";\nvarying "+Me+" "+Ce+" "+Ne+";\n#else\nuniform "+Me+" "+Ce+" u_"+Ne+";\n#endif\n":"vec4"===at?"\n#ifndef HAS_UNIFORM_u_"+Ne+"\n    "+Ne+" = a_"+Ne+";\n#else\n    "+Me+" "+Ce+" "+Ne+" = u_"+Ne+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ne+"\n    "+Ne+" = unpack_mix_"+at+"(a_"+Ne+", u_"+Ne+"_t);\n#else\n    "+Me+" "+Ce+" "+Ne+" = u_"+Ne+";\n#endif\n":"define"===be?"\n#ifndef HAS_UNIFORM_u_"+Ne+"\nuniform lowp float u_"+Ne+"_t;\nattribute "+Me+" "+$e+" a_"+Ne+";\n#else\nuniform "+Me+" "+Ce+" u_"+Ne+";\n#endif\n":"vec4"===at?"\n#ifndef HAS_UNIFORM_u_"+Ne+"\n    "+Me+" "+Ce+" "+Ne+" = a_"+Ne+";\n#else\n    "+Me+" "+Ce+" "+Ne+" = u_"+Ne+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ne+"\n    "+Me+" "+Ce+" "+Ne+" = unpack_mix_"+at+"(a_"+Ne+", u_"+Ne+"_t);\n#else\n    "+Me+" "+Ce+" "+Ne+" = u_"+Ne+";\n#endif\n"})}}var Ms=Object.freeze({__proto__:null,prelude:ri,background:_i,backgroundPattern:ra,circle:hi,clippingMask:Gr,heatmap:Mi,heatmapTexture:vi,collisionBox:_a,collisionCircle:Co,debug:oo,fill:yo,fillOutline:Ha,fillOutlinePattern:qa,fillPattern:ho,fillExtrusion:ka,fillExtrusionPattern:ds,hillshadePrepare:Ts,hillshade:Uo,line:pa,lineGradient:Rs,linePattern:Us,lineSDF:wo,raster:ia,symbolIcon:qo,symbolSDF:jl,symbolTextAndIcon:Yl}),Hs=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Hs.prototype.bind=function(R,B,q,K,de,be,Me,Ce){this.context=R;for(var Ne=this.boundPaintVertexBuffers.length!==K.length,$e=0;!Ne&&$e<K.length;$e++)this.boundPaintVertexBuffers[$e]!==K[$e]&&(Ne=!0);R.extVertexArrayObject&&this.vao&&this.boundProgram===B&&this.boundLayoutVertexBuffer===q&&!Ne&&this.boundIndexBuffer===de&&this.boundVertexOffset===be&&this.boundDynamicVertexBuffer===Me&&this.boundDynamicVertexBuffer2===Ce?(R.bindVertexArrayOES.set(this.vao),Me&&Me.bind(),de&&de.dynamicDraw&&de.bind(),Ce&&Ce.bind()):this.freshBind(B,q,K,de,be,Me,Ce)},Hs.prototype.freshBind=function(R,B,q,K,de,be,Me){var Ce,Ne=R.numAttributes,$e=this.context,at=$e.gl;if($e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$e.extVertexArrayObject.createVertexArrayOES(),$e.bindVertexArrayOES.set(this.vao),Ce=0,this.boundProgram=R,this.boundLayoutVertexBuffer=B,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=K,this.boundVertexOffset=de,this.boundDynamicVertexBuffer=be,this.boundDynamicVertexBuffer2=Me;else{Ce=$e.currentNumAttributes||0;for(var dt=Ne;dt<Ce;dt++)at.disableVertexAttribArray(dt)}B.enableAttributes(at,R);for(var Ot=0,zt=q;Ot<zt.length;Ot+=1)zt[Ot].enableAttributes(at,R);be&&be.enableAttributes(at,R),Me&&Me.enableAttributes(at,R),B.bind(),B.setVertexAttribPointers(at,R,de);for(var Rt=0,Nt=q;Rt<Nt.length;Rt+=1){var Lt=Nt[Rt];Lt.bind(),Lt.setVertexAttribPointers(at,R,de)}be&&(be.bind(),be.setVertexAttribPointers(at,R,de)),K&&K.bind(),Me&&(Me.bind(),Me.setVertexAttribPointers(at,R,de)),$e.currentNumAttributes=Ne},Hs.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var pu=function(R,B,q,K,de){var be=R.gl;this.program=be.createProgram();var Me=q?q.defines():[];de&&Me.push("#define OVERDRAW_INSPECTOR;");var Ce=Me.concat(ri.fragmentSource,B.fragmentSource).join("\n"),Ne=Me.concat(ri.vertexSource,B.vertexSource).join("\n"),$e=be.createShader(be.FRAGMENT_SHADER);if(be.isContextLost())this.failedToCreate=!0;else{be.shaderSource($e,Ce),be.compileShader($e),be.attachShader(this.program,$e);var at=be.createShader(be.VERTEX_SHADER);if(be.isContextLost())this.failedToCreate=!0;else{be.shaderSource(at,Ne),be.compileShader(at),be.attachShader(this.program,at);for(var dt=q?q.layoutAttributes:[],Ot=0;Ot<dt.length;Ot++)be.bindAttribLocation(this.program,Ot,dt[Ot].name);be.linkProgram(this.program),be.deleteShader(at),be.deleteShader($e),this.numAttributes=be.getProgramParameter(this.program,be.ACTIVE_ATTRIBUTES),this.attributes={};for(var zt={},Rt=0;Rt<this.numAttributes;Rt++){var Nt=be.getActiveAttrib(this.program,Rt);Nt&&(this.attributes[Nt.name]=be.getAttribLocation(this.program,Nt.name))}for(var Lt=be.getProgramParameter(this.program,be.ACTIVE_UNIFORMS),Yt=0;Yt<Lt;Yt++){var Gt=be.getActiveUniform(this.program,Yt);Gt&&(zt[Gt.name]=be.getUniformLocation(this.program,Gt.name))}this.fixedUniforms=K(R,zt),this.binderUniforms=q?q.getUniforms(R,zt):[]}}};function Fs(R,B,q){var K=1/fr(q,1,B.transform.tileZoom),de=Math.pow(2,q.tileID.overscaledZ),be=q.tileSize*Math.pow(2,B.transform.tileZoom)/de,Me=be*(q.tileID.canonical.x+q.tileID.wrap*de),Ce=be*q.tileID.canonical.y;return{u_image:0,u_texsize:q.imageAtlasTexture.size,u_scale:[K,R.fromScale,R.toScale],u_fade:R.t,u_pixel_coord_upper:[Me>>16,Ce>>16],u_pixel_coord_lower:[65535&Me,65535&Ce]}}pu.prototype.draw=function(R,B,q,K,de,be,Me,Ce,Ne,$e,at,dt,Ot,zt,Rt,Nt){var Lt,Yt=R.gl;if(!this.failedToCreate){for(var Gt in R.program.set(this.program),R.setDepthMode(q),R.setStencilMode(K),R.setColorMode(de),R.setCullFace(be),this.fixedUniforms)this.fixedUniforms[Gt].set(Me[Gt]);zt&&zt.setUniforms(R,this.binderUniforms,dt,{zoom:Ot});for(var Xt=(Lt={},Lt[Yt.LINES]=2,Lt[Yt.TRIANGLES]=3,Lt[Yt.LINE_STRIP]=1,Lt)[B],bn=0,En=at.get();bn<En.length;bn+=1){var Un=En[bn],Nn=Un.vaos||(Un.vaos={});(Nn[Ce]||(Nn[Ce]=new Hs)).bind(R,this,Ne,zt?zt.getPaintVertexBuffers():[],$e,Un.vertexOffset,Rt,Nt),Yt.drawElements(B,Un.primitiveLength*Xt,Yt.UNSIGNED_SHORT,Un.primitiveOffset*Xt*2)}}};var nu=function(R,B,q,K){var de=B.style.light,be=de.properties.get("position"),Me=[be.x,be.y,be.z],Ce=e.create$1();"viewport"===de.properties.get("anchor")&&e.fromRotation(Ce,-B.transform.angle),e.transformMat3(Me,Me,Ce);var Ne=de.properties.get("color");return{u_matrix:R,u_lightpos:Me,u_lightintensity:de.properties.get("intensity"),u_lightcolor:[Ne.r,Ne.g,Ne.b],u_vertical_gradient:+q,u_opacity:K}},ru=function(R,B,q,K,de,be,Me){return e.extend(nu(R,B,q,K),Fs(be,B,Me),{u_height_factor:-Math.pow(2,de.overscaledZ)/Me.tileSize/8})},Ns=function(R){return{u_matrix:R}},zs=function(R,B,q,K){return e.extend(Ns(R),Fs(q,B,K))},no=function(R,B){return{u_matrix:R,u_world:B}},ol=function(R,B,q,K,de){return e.extend(zs(R,B,q,K),{u_world:de})},$s=function(R,B,q,K){var de,be,Me=R.transform;if("map"===K.paint.get("circle-pitch-alignment")){var Ce=fr(q,1,Me.zoom);de=!0,be=[Ce,Ce]}else de=!1,be=Me.pixelsToGLUnits;return{u_camera_to_center_distance:Me.cameraToCenterDistance,u_scale_with_map:+("map"===K.paint.get("circle-pitch-scale")),u_matrix:R.translatePosMatrix(B.posMatrix,q,K.paint.get("circle-translate"),K.paint.get("circle-translate-anchor")),u_pitch_with_map:+de,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:be}},Wi=function(R,B,q){var K=fr(q,1,B.zoom),de=Math.pow(2,B.zoom-q.tileID.overscaledZ),be=q.tileID.overscaleFactor();return{u_matrix:R,u_camera_to_center_distance:B.cameraToCenterDistance,u_pixels_to_tile_units:K,u_extrude_scale:[B.pixelsToGLUnits[0]/(K*de),B.pixelsToGLUnits[1]/(K*de)],u_overscale_factor:be}},so=function(R,B,q){return{u_matrix:R,u_inv_matrix:B,u_camera_to_center_distance:q.cameraToCenterDistance,u_viewport_size:[q.width,q.height]}},Ho=function(R,B,q){return void 0===q&&(q=1),{u_matrix:R,u_color:B,u_overlay:0,u_overlay_scale:q}},Po=function(R){return{u_matrix:R}},os=function(R,B,q,K){return{u_matrix:R,u_extrude_scale:fr(B,1,q),u_intensity:K}};function ns(R,B){var q=Math.pow(2,B.canonical.z),K=B.canonical.y;return[new e.MercatorCoordinate(0,K/q).toLngLat().lat,new e.MercatorCoordinate(0,(K+1)/q).toLngLat().lat]}var ps=function(R,B,q){var K=R.transform;return{u_matrix:mt(R,B,q),u_ratio:1/fr(B,1,K.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/K.pixelsToGLUnits[0],1/K.pixelsToGLUnits[1]]}},La=function(R,B,q){return e.extend(ps(R,B,q),{u_image:0})},Xe=function(R,B,q,K){var de=R.transform,be=ct(B,de);return{u_matrix:mt(R,B,q),u_texsize:B.imageAtlasTexture.size,u_ratio:1/fr(B,1,de.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[be,K.fromScale,K.toScale],u_fade:K.t,u_units_to_pixels:[1/de.pixelsToGLUnits[0],1/de.pixelsToGLUnits[1]]}},Qe=function(R,B,q,K,de){var Me=R.lineAtlas,Ce=ct(B,R.transform),Ne="round"===q.layout.get("line-cap"),$e=Me.getDash(K.from,Ne),at=Me.getDash(K.to,Ne),dt=$e.width*de.fromScale,Ot=at.width*de.toScale;return e.extend(ps(R,B,q),{u_patternscale_a:[Ce/dt,-$e.height/2],u_patternscale_b:[Ce/Ot,-at.height/2],u_sdfgamma:Me.width/(256*Math.min(dt,Ot)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:$e.y,u_tex_y_b:at.y,u_mix:de.t})};function ct(R,B){return 1/fr(R,1,B.tileZoom)}function mt(R,B,q){return R.translatePosMatrix(B.tileID.posMatrix,B,q.paint.get("line-translate"),q.paint.get("line-translate-anchor"))}var St=function(R,B,q,K,de){return{u_matrix:R,u_tl_parent:B,u_scale_parent:q,u_buffer_scale:1,u_fade_t:K.mix,u_opacity:K.opacity*de.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:de.paint.get("raster-brightness-min"),u_brightness_high:de.paint.get("raster-brightness-max"),u_saturation_factor:(Me=de.paint.get("raster-saturation"),Me>0?1-1/(1.001-Me):-Me),u_contrast_factor:(be=de.paint.get("raster-contrast"),be>0?1/(1-be):1+be),u_spin_weights:Mt(de.paint.get("raster-hue-rotate"))};var be,Me};function Mt(R){R*=Math.PI/180;var B=Math.sin(R),q=Math.cos(R);return[(2*q+1)/3,(-Math.sqrt(3)*B-q+1)/3,(Math.sqrt(3)*B-q+1)/3]}var xt,Jt=function(R,B,q,K,de,be,Me,Ce,Ne,$e){var at=de.transform;return{u_is_size_zoom_constant:+("constant"===R||"source"===R),u_is_size_feature_constant:+("constant"===R||"camera"===R),u_size_t:B?B.uSizeT:0,u_size:B?B.uSize:0,u_camera_to_center_distance:at.cameraToCenterDistance,u_pitch:at.pitch/360*2*Math.PI,u_rotate_symbol:+q,u_aspect_ratio:at.width/at.height,u_fade_change:de.options.fadeDuration?de.symbolFadeChange:1,u_matrix:be,u_label_plane_matrix:Me,u_coord_matrix:Ce,u_is_text:+Ne,u_pitch_with_map:+K,u_texsize:$e,u_texture:0}},on=function(R,B,q,K,de,be,Me,Ce,Ne,$e,at){var dt=de.transform;return e.extend(Jt(R,B,q,K,de,be,Me,Ce,Ne,$e),{u_gamma_scale:K?Math.cos(dt._pitch)*dt.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+at})},nn=function(R,B,q,K,de,be,Me,Ce,Ne,$e){return e.extend(on(R,B,q,K,de,be,Me,Ce,!0,Ne,!0),{u_texsize_icon:$e,u_texture_icon:1})},yn=function(R,B,q){return{u_matrix:R,u_opacity:B,u_color:q}},An=function(R,B,q,K,de,be){return e.extend((Ce=be,$e=de,at=(Ne=q).imageManager.getPattern((Me=K).from.toString()),dt=Ne.imageManager.getPattern(Me.to.toString()),zt=(Ot=Ne.imageManager.getPixelSize()).width,Rt=Ot.height,Nt=Math.pow(2,$e.tileID.overscaledZ),Yt=(Lt=$e.tileSize*Math.pow(2,Ne.transform.tileZoom)/Nt)*($e.tileID.canonical.x+$e.tileID.wrap*Nt),Gt=Lt*$e.tileID.canonical.y,{u_image:0,u_pattern_tl_a:at.tl,u_pattern_br_a:at.br,u_pattern_tl_b:dt.tl,u_pattern_br_b:dt.br,u_texsize:[zt,Rt],u_mix:Ce.t,u_pattern_size_a:at.displaySize,u_pattern_size_b:dt.displaySize,u_scale_a:Ce.fromScale,u_scale_b:Ce.toScale,u_tile_units_to_pixels:1/fr($e,1,Ne.transform.tileZoom),u_pixel_coord_upper:[Yt>>16,Gt>>16],u_pixel_coord_lower:[65535&Yt,65535&Gt]}),{u_matrix:R,u_opacity:B});var Me,Ce,Ne,$e,at,dt,Ot,zt,Rt,Nt,Lt,Yt,Gt},Rn={fillExtrusion:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_lightpos:new e.Uniform3f(R,B.u_lightpos),u_lightintensity:new e.Uniform1f(R,B.u_lightintensity),u_lightcolor:new e.Uniform3f(R,B.u_lightcolor),u_vertical_gradient:new e.Uniform1f(R,B.u_vertical_gradient),u_opacity:new e.Uniform1f(R,B.u_opacity)}},fillExtrusionPattern:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_lightpos:new e.Uniform3f(R,B.u_lightpos),u_lightintensity:new e.Uniform1f(R,B.u_lightintensity),u_lightcolor:new e.Uniform3f(R,B.u_lightcolor),u_vertical_gradient:new e.Uniform1f(R,B.u_vertical_gradient),u_height_factor:new e.Uniform1f(R,B.u_height_factor),u_image:new e.Uniform1i(R,B.u_image),u_texsize:new e.Uniform2f(R,B.u_texsize),u_pixel_coord_upper:new e.Uniform2f(R,B.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(R,B.u_pixel_coord_lower),u_scale:new e.Uniform3f(R,B.u_scale),u_fade:new e.Uniform1f(R,B.u_fade),u_opacity:new e.Uniform1f(R,B.u_opacity)}},fill:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix)}},fillPattern:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_image:new e.Uniform1i(R,B.u_image),u_texsize:new e.Uniform2f(R,B.u_texsize),u_pixel_coord_upper:new e.Uniform2f(R,B.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(R,B.u_pixel_coord_lower),u_scale:new e.Uniform3f(R,B.u_scale),u_fade:new e.Uniform1f(R,B.u_fade)}},fillOutline:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_world:new e.Uniform2f(R,B.u_world)}},fillOutlinePattern:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_world:new e.Uniform2f(R,B.u_world),u_image:new e.Uniform1i(R,B.u_image),u_texsize:new e.Uniform2f(R,B.u_texsize),u_pixel_coord_upper:new e.Uniform2f(R,B.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(R,B.u_pixel_coord_lower),u_scale:new e.Uniform3f(R,B.u_scale),u_fade:new e.Uniform1f(R,B.u_fade)}},circle:function(R,B){return{u_camera_to_center_distance:new e.Uniform1f(R,B.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(R,B.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(R,B.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(R,B.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(R,B.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(R,B.u_matrix)}},collisionBox:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_camera_to_center_distance:new e.Uniform1f(R,B.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(R,B.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(R,B.u_extrude_scale),u_overscale_factor:new e.Uniform1f(R,B.u_overscale_factor)}},collisionCircle:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_inv_matrix:new e.UniformMatrix4f(R,B.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(R,B.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(R,B.u_viewport_size)}},debug:function(R,B){return{u_color:new e.UniformColor(R,B.u_color),u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_overlay:new e.Uniform1i(R,B.u_overlay),u_overlay_scale:new e.Uniform1f(R,B.u_overlay_scale)}},clippingMask:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix)}},heatmap:function(R,B){return{u_extrude_scale:new e.Uniform1f(R,B.u_extrude_scale),u_intensity:new e.Uniform1f(R,B.u_intensity),u_matrix:new e.UniformMatrix4f(R,B.u_matrix)}},heatmapTexture:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_world:new e.Uniform2f(R,B.u_world),u_image:new e.Uniform1i(R,B.u_image),u_color_ramp:new e.Uniform1i(R,B.u_color_ramp),u_opacity:new e.Uniform1f(R,B.u_opacity)}},hillshade:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_image:new e.Uniform1i(R,B.u_image),u_latrange:new e.Uniform2f(R,B.u_latrange),u_light:new e.Uniform2f(R,B.u_light),u_shadow:new e.UniformColor(R,B.u_shadow),u_highlight:new e.UniformColor(R,B.u_highlight),u_accent:new e.UniformColor(R,B.u_accent)}},hillshadePrepare:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_image:new e.Uniform1i(R,B.u_image),u_dimension:new e.Uniform2f(R,B.u_dimension),u_zoom:new e.Uniform1f(R,B.u_zoom),u_maxzoom:new e.Uniform1f(R,B.u_maxzoom),u_unpack:new e.Uniform4f(R,B.u_unpack)}},line:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_ratio:new e.Uniform1f(R,B.u_ratio),u_device_pixel_ratio:new e.Uniform1f(R,B.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(R,B.u_units_to_pixels)}},lineGradient:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_ratio:new e.Uniform1f(R,B.u_ratio),u_device_pixel_ratio:new e.Uniform1f(R,B.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(R,B.u_units_to_pixels),u_image:new e.Uniform1i(R,B.u_image)}},linePattern:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_texsize:new e.Uniform2f(R,B.u_texsize),u_ratio:new e.Uniform1f(R,B.u_ratio),u_device_pixel_ratio:new e.Uniform1f(R,B.u_device_pixel_ratio),u_image:new e.Uniform1i(R,B.u_image),u_units_to_pixels:new e.Uniform2f(R,B.u_units_to_pixels),u_scale:new e.Uniform3f(R,B.u_scale),u_fade:new e.Uniform1f(R,B.u_fade)}},lineSDF:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_ratio:new e.Uniform1f(R,B.u_ratio),u_device_pixel_ratio:new e.Uniform1f(R,B.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(R,B.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(R,B.u_patternscale_a),u_patternscale_b:new e.Uniform2f(R,B.u_patternscale_b),u_sdfgamma:new e.Uniform1f(R,B.u_sdfgamma),u_image:new e.Uniform1i(R,B.u_image),u_tex_y_a:new e.Uniform1f(R,B.u_tex_y_a),u_tex_y_b:new e.Uniform1f(R,B.u_tex_y_b),u_mix:new e.Uniform1f(R,B.u_mix)}},raster:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_tl_parent:new e.Uniform2f(R,B.u_tl_parent),u_scale_parent:new e.Uniform1f(R,B.u_scale_parent),u_buffer_scale:new e.Uniform1f(R,B.u_buffer_scale),u_fade_t:new e.Uniform1f(R,B.u_fade_t),u_opacity:new e.Uniform1f(R,B.u_opacity),u_image0:new e.Uniform1i(R,B.u_image0),u_image1:new e.Uniform1i(R,B.u_image1),u_brightness_low:new e.Uniform1f(R,B.u_brightness_low),u_brightness_high:new e.Uniform1f(R,B.u_brightness_high),u_saturation_factor:new e.Uniform1f(R,B.u_saturation_factor),u_contrast_factor:new e.Uniform1f(R,B.u_contrast_factor),u_spin_weights:new e.Uniform3f(R,B.u_spin_weights)}},symbolIcon:function(R,B){return{u_is_size_zoom_constant:new e.Uniform1i(R,B.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(R,B.u_is_size_feature_constant),u_size_t:new e.Uniform1f(R,B.u_size_t),u_size:new e.Uniform1f(R,B.u_size),u_camera_to_center_distance:new e.Uniform1f(R,B.u_camera_to_center_distance),u_pitch:new e.Uniform1f(R,B.u_pitch),u_rotate_symbol:new e.Uniform1i(R,B.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(R,B.u_aspect_ratio),u_fade_change:new e.Uniform1f(R,B.u_fade_change),u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(R,B.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(R,B.u_coord_matrix),u_is_text:new e.Uniform1i(R,B.u_is_text),u_pitch_with_map:new e.Uniform1i(R,B.u_pitch_with_map),u_texsize:new e.Uniform2f(R,B.u_texsize),u_texture:new e.Uniform1i(R,B.u_texture)}},symbolSDF:function(R,B){return{u_is_size_zoom_constant:new e.Uniform1i(R,B.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(R,B.u_is_size_feature_constant),u_size_t:new e.Uniform1f(R,B.u_size_t),u_size:new e.Uniform1f(R,B.u_size),u_camera_to_center_distance:new e.Uniform1f(R,B.u_camera_to_center_distance),u_pitch:new e.Uniform1f(R,B.u_pitch),u_rotate_symbol:new e.Uniform1i(R,B.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(R,B.u_aspect_ratio),u_fade_change:new e.Uniform1f(R,B.u_fade_change),u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(R,B.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(R,B.u_coord_matrix),u_is_text:new e.Uniform1i(R,B.u_is_text),u_pitch_with_map:new e.Uniform1i(R,B.u_pitch_with_map),u_texsize:new e.Uniform2f(R,B.u_texsize),u_texture:new e.Uniform1i(R,B.u_texture),u_gamma_scale:new e.Uniform1f(R,B.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(R,B.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(R,B.u_is_halo)}},symbolTextAndIcon:function(R,B){return{u_is_size_zoom_constant:new e.Uniform1i(R,B.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(R,B.u_is_size_feature_constant),u_size_t:new e.Uniform1f(R,B.u_size_t),u_size:new e.Uniform1f(R,B.u_size),u_camera_to_center_distance:new e.Uniform1f(R,B.u_camera_to_center_distance),u_pitch:new e.Uniform1f(R,B.u_pitch),u_rotate_symbol:new e.Uniform1i(R,B.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(R,B.u_aspect_ratio),u_fade_change:new e.Uniform1f(R,B.u_fade_change),u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(R,B.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(R,B.u_coord_matrix),u_is_text:new e.Uniform1i(R,B.u_is_text),u_pitch_with_map:new e.Uniform1i(R,B.u_pitch_with_map),u_texsize:new e.Uniform2f(R,B.u_texsize),u_texsize_icon:new e.Uniform2f(R,B.u_texsize_icon),u_texture:new e.Uniform1i(R,B.u_texture),u_texture_icon:new e.Uniform1i(R,B.u_texture_icon),u_gamma_scale:new e.Uniform1f(R,B.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(R,B.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(R,B.u_is_halo)}},background:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_opacity:new e.Uniform1f(R,B.u_opacity),u_color:new e.UniformColor(R,B.u_color)}},backgroundPattern:function(R,B){return{u_matrix:new e.UniformMatrix4f(R,B.u_matrix),u_opacity:new e.Uniform1f(R,B.u_opacity),u_image:new e.Uniform1i(R,B.u_image),u_pattern_tl_a:new e.Uniform2f(R,B.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(R,B.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(R,B.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(R,B.u_pattern_br_b),u_texsize:new e.Uniform2f(R,B.u_texsize),u_mix:new e.Uniform1f(R,B.u_mix),u_pattern_size_a:new e.Uniform2f(R,B.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(R,B.u_pattern_size_b),u_scale_a:new e.Uniform1f(R,B.u_scale_a),u_scale_b:new e.Uniform1f(R,B.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(R,B.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(R,B.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(R,B.u_tile_units_to_pixels)}}};function Ln(R,B,q,K,de,be,Me){for(var Ce=R.context,Ne=Ce.gl,$e=R.useProgram("collisionBox"),at=[],dt=0,Ot=0,zt=0;zt<K.length;zt++){var Rt=K[zt],Nt=B.getTile(Rt),Lt=Nt.getBucket(q);if(Lt){var Yt=Rt.posMatrix;0===de[0]&&0===de[1]||(Yt=R.translatePosMatrix(Rt.posMatrix,Nt,de,be));var Gt=Me?Lt.textCollisionBox:Lt.iconCollisionBox,Xt=Lt.collisionCircleArray;if(Xt.length>0){var bn=e.create(),En=Yt;e.mul(bn,Lt.placementInvProjMatrix,R.transform.glCoordMatrix),e.mul(bn,bn,Lt.placementViewportMatrix),at.push({circleArray:Xt,circleOffset:Ot,transform:En,invTransform:bn}),Ot=dt+=Xt.length/4}Gt&&$e.draw(Ce,Ne.LINES,ln.disabled,Ee.disabled,R.colorModeForRenderPass(),Ie.disabled,Wi(Yt,R.transform,Nt),q.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,null,R.transform.zoom,null,null,Gt.collisionVertexBuffer)}}if(Me&&at.length){var Un=R.useProgram("collisionCircle"),Nn=new e.StructArrayLayout2f1f2i16;Nn.resize(4*dt),Nn._trim();for(var yr=0,vr=0,Pr=at;vr<Pr.length;vr+=1)for(var Ar=Pr[vr],fi=0;fi<Ar.circleArray.length/4;fi++){var wi=4*fi,Fi=Ar.circleArray[wi+0],ur=Ar.circleArray[wi+1],Hr=Ar.circleArray[wi+2],bi=Ar.circleArray[wi+3];Nn.emplace(yr++,Fi,ur,Hr,bi,0),Nn.emplace(yr++,Fi,ur,Hr,bi,1),Nn.emplace(yr++,Fi,ur,Hr,bi,2),Nn.emplace(yr++,Fi,ur,Hr,bi,3)}(!xt||xt.length<2*dt)&&(xt=function(Gi){var ca=2*Gi,ea=new e.StructArrayLayout3ui6;ea.resize(ca),ea._trim();for(var ma=0;ma<ca;ma++){var Ra=6*ma;ea.uint16[Ra+0]=4*ma+0,ea.uint16[Ra+1]=4*ma+1,ea.uint16[Ra+2]=4*ma+2,ea.uint16[Ra+3]=4*ma+2,ea.uint16[Ra+4]=4*ma+3,ea.uint16[Ra+5]=4*ma+0}return ea}(dt));for(var mi=Ce.createIndexBuffer(xt,!0),Si=Ce.createVertexBuffer(Nn,e.collisionCircleLayout.members,!0),Ri=0,na=at;Ri<na.length;Ri+=1){var Ai=na[Ri],Qi=so(Ai.transform,Ai.invTransform,R.transform);Un.draw(Ce,Ne.TRIANGLES,ln.disabled,Ee.disabled,R.colorModeForRenderPass(),Ie.disabled,Qi,q.id,Si,mi,e.SegmentVector.simpleSegment(0,2*Ai.circleOffset,Ai.circleArray.length,Ai.circleArray.length/2),null,R.transform.zoom,null,null,null)}Si.destroy(),mi.destroy()}}var Zn=e.identity(new Float32Array(16));function _r(R,B,q,K,de,be){var Me=e.getAnchorAlignment(R),Ce=-(Me.horizontalAlign-.5)*B,Ne=-(Me.verticalAlign-.5)*q,$e=e.evaluateVariableOffset(R,K);return new e.Point((Ce/de+$e[0])*be,(Ne/de+$e[1])*be)}function cr(R,B,q,K,de,be,Me,Ce,Ne,$e,at){var dt=R.text.placedSymbolArray,Ot=R.text.dynamicLayoutVertexArray,zt=R.icon.dynamicLayoutVertexArray,Rt={};Ot.clear();for(var Nt=0;Nt<dt.length;Nt++){var Lt=dt.get(Nt),Gt=Lt.hidden||!Lt.crossTileID||R.allowVerticalPlacement&&!Lt.placedOrientation?null:K[Lt.crossTileID];if(Gt){var Xt=new e.Point(Lt.anchorX,Lt.anchorY),bn=cn(Xt,q?Ce:Me),En=vn(be.cameraToCenterDistance,bn.signedDistanceFromCamera),Un=de.evaluateSizeForFeature(R.textSizeData,$e,Lt)*En/e.ONE_EM;q&&(Un*=R.tilePixelRatio/Ne);for(var vr=_r(Gt.anchor,Gt.width,Gt.height,Gt.textOffset,Gt.textBoxScale,Un),Pr=q?cn(Xt.add(vr),Me).point:bn.point.add(B?vr.rotate(-be.angle):vr),Ar=R.allowVerticalPlacement&&Lt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,fi=0;fi<Lt.numGlyphs;fi++)e.addDynamicAttributes(Ot,Pr,Ar);at&&Lt.associatedIconIndex>=0&&(Rt[Lt.associatedIconIndex]={shiftedAnchor:Pr,angle:Ar})}else zr(Lt.numGlyphs,Ot)}if(at){zt.clear();for(var wi=R.icon.placedSymbolArray,Fi=0;Fi<wi.length;Fi++){var ur=wi.get(Fi);if(ur.hidden)zr(ur.numGlyphs,zt);else{var Hr=Rt[Fi];if(Hr)for(var bi=0;bi<ur.numGlyphs;bi++)e.addDynamicAttributes(zt,Hr.shiftedAnchor,Hr.angle);else zr(ur.numGlyphs,zt)}}R.icon.dynamicLayoutVertexBuffer.updateData(zt)}R.text.dynamicLayoutVertexBuffer.updateData(Ot)}function Jr(R,B,q){return q.iconsInText&&B?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon"}function ti(R,B,q,K,de,be,Me,Ce,Ne,$e,at,dt){for(var Ot=R.context,zt=Ot.gl,Rt=R.transform,Nt="map"===Ce,Lt="map"===Ne,Yt=Nt&&"point"!==q.layout.get("symbol-placement"),Gt=Nt&&!Lt&&!Yt,Xt=void 0!==q.layout.get("symbol-sort-key").constantOr(1),bn=R.depthModeForSublayer(0,ln.ReadOnly),En=q.layout.get("text-variable-anchor"),Un=[],Nn=0,yr=K;Nn<yr.length;Nn+=1){var vr=yr[Nn],Pr=B.getTile(vr),Ar=Pr.getBucket(q);if(Ar){var fi=de?Ar.text:Ar.icon;if(fi&&fi.segments.get().length){var wi=fi.programConfigurations.get(q.id),Fi=de||Ar.sdfIcons,ur=de?Ar.textSizeData:Ar.iconSizeData,Hr=Lt||0!==Rt.pitch,bi=R.useProgram(Jr(Fi,de,Ar),wi),mi=e.evaluateSizeForZoom(ur,Rt.zoom),Si=void 0,Ri=[0,0],na=void 0,Ai=void 0,Qi=null,Gi=void 0;if(de)na=Pr.glyphAtlasTexture,Ai=zt.LINEAR,Si=Pr.glyphAtlasTexture.size,Ar.iconsInText&&(Ri=Pr.imageAtlasTexture.size,Qi=Pr.imageAtlasTexture,Gi=Hr||R.options.rotating||R.options.zooming||"composite"===ur.kind||"camera"===ur.kind?zt.LINEAR:zt.NEAREST);else{var ea=1!==q.layout.get("icon-size").constantOr(0)||Ar.iconsNeedLinear;na=Pr.imageAtlasTexture,Ai=Fi||R.options.rotating||R.options.zooming||ea||Hr?zt.LINEAR:zt.NEAREST,Si=Pr.imageAtlasTexture.size}var ma=fr(Pr,1,R.transform.zoom),Ra=Yn(vr.posMatrix,Lt,Nt,R.transform,ma),Mo=kn(vr.posMatrix,Lt,Nt,R.transform,ma),Ao=En&&Ar.hasTextData(),No="none"!==q.layout.get("icon-text-fit")&&Ao&&Ar.hasIconData();Yt&&Dn(Ar,vr.posMatrix,R,de,Ra,Mo,Lt,$e);var ro=R.translatePosMatrix(vr.posMatrix,Pr,be,Me),_o=Yt||de&&En||No?Zn:Ra,xo=R.translatePosMatrix(Mo,Pr,be,Me,!0),vs=Fi&&0!==q.paint.get(de?"text-halo-width":"icon-halo-width").constantOr(1),Lo={program:bi,buffers:fi,uniformValues:Fi?Ar.iconsInText?nn(ur.kind,mi,Gt,Lt,R,ro,_o,xo,Si,Ri):on(ur.kind,mi,Gt,Lt,R,ro,_o,xo,de,Si,!0):Jt(ur.kind,mi,Gt,Lt,R,ro,_o,xo,de,Si),atlasTexture:na,atlasTextureIcon:Qi,atlasInterpolation:Ai,atlasInterpolationIcon:Gi,isSDF:Fi,hasHalo:vs};if(Xt)for(var el=0,fl=fi.segments.get();el<fl.length;el+=1){var au=fl[el];Un.push({segments:new e.SegmentVector([au]),sortKey:au.sortKey,state:Lo})}else Un.push({segments:fi.segments,sortKey:0,state:Lo})}}}Xt&&Un.sort(function(Bc,qs){return Bc.sortKey-qs.sortKey});for(var Pu=0,zc=Un;Pu<zc.length;Pu+=1){var Xu=zc[Pu],ys=Xu.state;if(Ot.activeTexture.set(zt.TEXTURE0),ys.atlasTexture.bind(ys.atlasInterpolation,zt.CLAMP_TO_EDGE),ys.atlasTextureIcon&&(Ot.activeTexture.set(zt.TEXTURE1),ys.atlasTextureIcon&&ys.atlasTextureIcon.bind(ys.atlasInterpolationIcon,zt.CLAMP_TO_EDGE)),ys.isSDF){var $u=ys.uniformValues;ys.hasHalo&&($u.u_is_halo=1,di(ys.buffers,Xu.segments,q,R,ys.program,bn,at,dt,$u)),$u.u_is_halo=0}di(ys.buffers,Xu.segments,q,R,ys.program,bn,at,dt,ys.uniformValues)}}function di(R,B,q,K,de,be,Me,Ce,Ne){var $e=K.context;de.draw($e,$e.gl.TRIANGLES,be,Me,Ce,Ie.disabled,Ne,q.id,R.layoutVertexBuffer,R.indexBuffer,B,q.paint,K.transform.zoom,R.programConfigurations.get(q.id),R.dynamicLayoutVertexBuffer,R.opacityVertexBuffer)}function ni(R,B,q,K,de,be,Me){var Ce,Ne,$e,at,dt,Ot=R.context.gl,zt=q.paint.get("fill-pattern"),Rt=zt&&zt.constantOr(1),Nt=q.getCrossfadeParameters();Me?(Ne=Rt&&!q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ce=Ot.LINES):(Ne=Rt?"fillPattern":"fill",Ce=Ot.TRIANGLES);for(var Lt=0,Yt=K;Lt<Yt.length;Lt+=1){var Gt=Yt[Lt],Xt=B.getTile(Gt);if(!Rt||Xt.patternsLoaded()){var bn=Xt.getBucket(q);if(bn){var En=bn.programConfigurations.get(q.id),Un=R.useProgram(Ne,En);Rt&&(R.context.activeTexture.set(Ot.TEXTURE0),Xt.imageAtlasTexture.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE),En.updatePaintBuffers(Nt));var Nn=zt.constantOr(null);if(Nn&&Xt.imageAtlas){var yr=Xt.imageAtlas,vr=yr.patternPositions[Nn.to.toString()],Pr=yr.patternPositions[Nn.from.toString()];vr&&Pr&&En.setConstantPatternPositions(vr,Pr)}var Ar=R.translatePosMatrix(Gt.posMatrix,Xt,q.paint.get("fill-translate"),q.paint.get("fill-translate-anchor"));if(Me){at=bn.indexBuffer2,dt=bn.segments2;var fi=[Ot.drawingBufferWidth,Ot.drawingBufferHeight];$e="fillOutlinePattern"===Ne&&Rt?ol(Ar,R,Nt,Xt,fi):no(Ar,fi)}else at=bn.indexBuffer,dt=bn.segments,$e=Rt?zs(Ar,R,Nt,Xt):Ns(Ar);Un.draw(R.context,Ce,de,R.stencilModeForClipping(Gt),be,Ie.disabled,$e,q.id,bn.layoutVertexBuffer,at,dt,q.paint,R.transform.zoom,En)}}}}function Ci(R,B,q,K,de,be,Me){for(var Ce=R.context,Ne=Ce.gl,$e=q.paint.get("fill-extrusion-pattern"),at=$e.constantOr(1),dt=q.getCrossfadeParameters(),Ot=q.paint.get("fill-extrusion-opacity"),zt=0,Rt=K;zt<Rt.length;zt+=1){var Nt=Rt[zt],Lt=B.getTile(Nt),Yt=Lt.getBucket(q);if(Yt){var Gt=Yt.programConfigurations.get(q.id),Xt=R.useProgram(at?"fillExtrusionPattern":"fillExtrusion",Gt);at&&(R.context.activeTexture.set(Ne.TEXTURE0),Lt.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Gt.updatePaintBuffers(dt));var bn=$e.constantOr(null);if(bn&&Lt.imageAtlas){var En=Lt.imageAtlas,Un=En.patternPositions[bn.to.toString()],Nn=En.patternPositions[bn.from.toString()];Un&&Nn&&Gt.setConstantPatternPositions(Un,Nn)}var yr=R.translatePosMatrix(Nt.posMatrix,Lt,q.paint.get("fill-extrusion-translate"),q.paint.get("fill-extrusion-translate-anchor")),vr=q.paint.get("fill-extrusion-vertical-gradient"),Pr=at?ru(yr,R,vr,Ot,Nt,dt,Lt):nu(yr,R,vr,Ot);Xt.draw(Ce,Ce.gl.TRIANGLES,de,be,Me,Ie.backCCW,Pr,q.id,Yt.layoutVertexBuffer,Yt.indexBuffer,Yt.segments,q.paint,R.transform.zoom,Gt)}}}function Ji(R,B,q,K,de,be){var Me=R.context,Ce=Me.gl,Ne=B.fbo;if(Ne){var $e=R.useProgram("hillshade");Me.activeTexture.set(Ce.TEXTURE0),Ce.bindTexture(Ce.TEXTURE_2D,Ne.colorAttachment.get());var at=function(dt,Ot,zt){var Rt=zt.paint.get("hillshade-shadow-color"),Nt=zt.paint.get("hillshade-highlight-color"),Lt=zt.paint.get("hillshade-accent-color"),Yt=zt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===zt.paint.get("hillshade-illumination-anchor")&&(Yt-=dt.transform.angle);var Gt=!dt.options.moving;return{u_matrix:dt.transform.calculatePosMatrix(Ot.tileID.toUnwrapped(),Gt),u_image:0,u_latrange:ns(0,Ot.tileID),u_light:[zt.paint.get("hillshade-exaggeration"),Yt],u_shadow:Rt,u_highlight:Nt,u_accent:Lt}}(R,B,q);$e.draw(Me,Ce.TRIANGLES,K,de,be,Ie.disabled,at,q.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}}function va(R,B,q,K,de,be,Me){var Lt,Yt,Gt,Xt,bn,Ce=R.context,Ne=Ce.gl,$e=B.dem;if($e&&$e.data){var at=$e.dim,dt=$e.stride,Ot=$e.getPixels();if(Ce.activeTexture.set(Ne.TEXTURE1),Ce.pixelStoreUnpackPremultiplyAlpha.set(!1),B.demTexture=B.demTexture||R.getTileTexture(dt),B.demTexture){var zt=B.demTexture;zt.update(Ot,{premultiply:!1}),zt.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE)}else B.demTexture=new e.Texture(Ce,Ot,Ne.RGBA,{premultiply:!1}),B.demTexture.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE);Ce.activeTexture.set(Ne.TEXTURE0);var Rt=B.fbo;if(!Rt){var Nt=new e.Texture(Ce,{width:at,height:at,data:null},Ne.RGBA);Nt.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),(Rt=B.fbo=Ce.createFramebuffer(at,at,!0)).colorAttachment.set(Nt.texture)}Ce.bindFramebuffer.set(Rt.framebuffer),Ce.viewport.set([0,0,at,at]),R.useProgram("hillshadePrepare").draw(Ce,Ne.TRIANGLES,de,be,Me,Ie.disabled,(Lt=B.tileID,Gt=K,Xt=(Yt=$e).stride,bn=e.create(),e.ortho(bn,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(bn,bn,[0,-e.EXTENT,0]),{u_matrix:bn,u_image:1,u_dimension:[Xt,Xt],u_zoom:Lt.overscaledZ,u_maxzoom:Gt,u_unpack:Yt.getUnpackVector()}),q.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments),B.needsHillshadePrepare=!1}}function sa(R,B,q,K,de){var be=K.paint.get("raster-fade-duration");if(be>0){var Me=e.browser.now(),Ce=(Me-R.timeAdded)/be,Ne=B?(Me-B.timeAdded)/be:-1,$e=q.getSource(),at=de.coveringZoomLevel({tileSize:$e.tileSize,roundZoom:$e.roundZoom}),dt=!B||Math.abs(B.tileID.overscaledZ-at)>Math.abs(R.tileID.overscaledZ-at),Ot=dt&&R.refreshedUponExpiration?1:e.clamp(dt?Ce:1-Ne,0,1);return R.refreshedUponExpiration&&Ce>=1&&(R.refreshedUponExpiration=!1),B?{opacity:1,mix:1-Ot}:{opacity:Ot,mix:0}}return{opacity:1,mix:0}}var qi=new e.Color(1,0,0,1),Oo=new e.Color(0,1,0,1),Do=new e.Color(0,0,1,1),Da=new e.Color(1,0,1,1),Ea=new e.Color(0,1,1,1);function Ro(R,B,q,K){po(R,0,B+q/2,R.transform.width,q,K)}function Go(R,B,q,K){po(R,B-q/2,0,q,R.transform.height,K)}function po(R,B,q,K,de,be){var Me=R.context,Ce=Me.gl;Ce.enable(Ce.SCISSOR_TEST),Ce.scissor(B*e.browser.devicePixelRatio,q*e.browser.devicePixelRatio,K*e.browser.devicePixelRatio,de*e.browser.devicePixelRatio),Me.clear({color:be}),Ce.disable(Ce.SCISSOR_TEST)}function ss(R,B,q){var K=R.context,de=K.gl,be=q.posMatrix,Me=R.useProgram("debug"),Ce=ln.disabled,Ne=Ee.disabled,$e=R.colorModeForRenderPass();K.activeTexture.set(de.TEXTURE0),R.emptyTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Me.draw(K,de.LINE_STRIP,Ce,Ne,$e,Ie.disabled,Ho(be,e.Color.red),"$debug",R.debugBuffer,R.tileBorderIndexBuffer,R.debugSegments);var at=B.getTileByID(q.key).latestRawTileData,Ot=Math.floor((at&&at.byteLength||0)/1024),zt=B.getTile(q).tileSize,Rt=512/Math.min(zt,512)*(q.overscaledZ/R.transform.zoom)*.5,Nt=q.canonical.toString();q.overscaledZ!==q.canonical.z&&(Nt+=" => "+q.overscaledZ),function(Lt,Yt){Lt.initDebugOverlayCanvas();var Gt=Lt.debugOverlayCanvas,Xt=Lt.context.gl,bn=Lt.debugOverlayCanvas.getContext("2d");bn.clearRect(0,0,Gt.width,Gt.height),bn.shadowColor="white",bn.shadowBlur=2,bn.lineWidth=1.5,bn.strokeStyle="white",bn.textBaseline="top",bn.font="bold 36px Open Sans, sans-serif",bn.fillText(Yt,5,5),bn.strokeText(Yt,5,5),Lt.debugOverlayTexture.update(Gt),Lt.debugOverlayTexture.bind(Xt.LINEAR,Xt.CLAMP_TO_EDGE)}(R,Nt+" "+Ot+"kb"),Me.draw(K,de.TRIANGLES,Ce,Ne,De.alphaBlended,Ie.disabled,Ho(be,e.Color.transparent,Rt),"$debug",R.debugBuffer,R.quadTriangleIndexBuffer,R.debugSegments)}var gs={symbol:function(R,B,q,K,de){if("translucent"===R.renderPass){var be=Ee.disabled,Me=R.colorModeForRenderPass();q.layout.get("text-variable-anchor")&&function(Ce,Ne,$e,at,dt,Ot,zt){for(var Rt=Ne.transform,Nt="map"===dt,Lt="map"===Ot,Yt=0,Gt=Ce;Yt<Gt.length;Yt+=1){var Xt=Gt[Yt],bn=at.getTile(Xt),En=bn.getBucket($e);if(En&&En.text&&En.text.segments.get().length){var Nn=e.evaluateSizeForZoom(En.textSizeData,Rt.zoom),yr=fr(bn,1,Ne.transform.zoom),vr=Yn(Xt.posMatrix,Lt,Nt,Ne.transform,yr),Pr="none"!==$e.layout.get("icon-text-fit")&&En.hasIconData();if(Nn){var Ar=Math.pow(2,Rt.zoom-bn.tileID.overscaledZ);cr(En,Nt,Lt,zt,e.symbolSize,Rt,vr,Xt.posMatrix,Ar,Nn,Pr)}}}}(K,R,q,B,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),de),0!==q.paint.get("icon-opacity").constantOr(1)&&ti(R,B,q,K,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),be,Me),0!==q.paint.get("text-opacity").constantOr(1)&&ti(R,B,q,K,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),be,Me),B.map.showCollisionBoxes&&(Ln(R,B,q,K,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),Ln(R,B,q,K,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))}},circle:function(R,B,q,K){if("translucent"===R.renderPass){var de=q.paint.get("circle-opacity"),be=q.paint.get("circle-stroke-width"),Me=q.paint.get("circle-stroke-opacity"),Ce=void 0!==q.layout.get("circle-sort-key").constantOr(1);if(0!==de.constantOr(1)||0!==be.constantOr(1)&&0!==Me.constantOr(1)){for(var Ne=R.context,$e=Ne.gl,at=R.depthModeForSublayer(0,ln.ReadOnly),dt=Ee.disabled,Ot=R.colorModeForRenderPass(),zt=[],Rt=0;Rt<K.length;Rt++){var Nt=K[Rt],Lt=B.getTile(Nt),Yt=Lt.getBucket(q);if(Yt){var Gt=Yt.programConfigurations.get(q.id),Xt={programConfiguration:Gt,program:R.useProgram("circle",Gt),layoutVertexBuffer:Yt.layoutVertexBuffer,indexBuffer:Yt.indexBuffer,uniformValues:$s(R,Nt,Lt,q)};if(Ce)for(var bn=0,En=Yt.segments.get();bn<En.length;bn+=1){var Un=En[bn];zt.push({segments:new e.SegmentVector([Un]),sortKey:Un.sortKey,state:Xt})}else zt.push({segments:Yt.segments,sortKey:0,state:Xt})}}Ce&&zt.sort(function(bi,mi){return bi.sortKey-mi.sortKey});for(var Nn=0,yr=zt;Nn<yr.length;Nn+=1){var vr=yr[Nn],Pr=vr.state;Pr.program.draw(Ne,$e.TRIANGLES,at,dt,Ot,Ie.disabled,Pr.uniformValues,q.id,Pr.layoutVertexBuffer,Pr.indexBuffer,vr.segments,q.paint,R.transform.zoom,Pr.programConfiguration)}}}},heatmap:function(R,B,q,K){if(0!==q.paint.get("heatmap-opacity"))if("offscreen"===R.renderPass){var de=R.context,be=de.gl,Me=Ee.disabled,Ce=new De([be.ONE,be.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Nt,Lt,Yt){var Gt=Nt.gl;Nt.activeTexture.set(Gt.TEXTURE1),Nt.viewport.set([0,0,Lt.width/4,Lt.height/4]);var En,Un,Nn,yr,vr,Xt=Yt.heatmapFbo;if(Xt)Gt.bindTexture(Gt.TEXTURE_2D,Xt.colorAttachment.get()),Nt.bindFramebuffer.set(Xt.framebuffer);else{var bn=Gt.createTexture();Gt.bindTexture(Gt.TEXTURE_2D,bn),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_S,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_T,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MIN_FILTER,Gt.LINEAR),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MAG_FILTER,Gt.LINEAR),Nn=bn,yr=Xt=Yt.heatmapFbo=Nt.createFramebuffer(Lt.width/4,Lt.height/4,!1),(vr=(En=Nt).gl).texImage2D(vr.TEXTURE_2D,0,vr.RGBA,(Un=Lt).width/4,Un.height/4,0,vr.RGBA,En.extRenderToTextureHalfFloat?En.extTextureHalfFloat.HALF_FLOAT_OES:vr.UNSIGNED_BYTE,null),yr.colorAttachment.set(Nn)}})(de,R,q),de.clear({color:e.Color.transparent});for(var Ne=0;Ne<K.length;Ne++){var $e=K[Ne];if(!B.hasRenderableParent($e)){var at=B.getTile($e),dt=at.getBucket(q);if(dt){var Ot=dt.programConfigurations.get(q.id);R.useProgram("heatmap",Ot).draw(de,be.TRIANGLES,ln.disabled,Me,Ce,Ie.disabled,os($e.posMatrix,at,R.transform.zoom,q.paint.get("heatmap-intensity")),q.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,q.paint,R.transform.zoom,Ot)}}}de.viewport.set([0,0,R.width,R.height])}else"translucent"===R.renderPass&&(R.context.setColorMode(R.colorModeForRenderPass()),function(Nt,Lt){var Yt=Nt.context,Gt=Yt.gl,Xt=Lt.heatmapFbo;if(Xt){Yt.activeTexture.set(Gt.TEXTURE0),Gt.bindTexture(Gt.TEXTURE_2D,Xt.colorAttachment.get()),Yt.activeTexture.set(Gt.TEXTURE1);var bn=Lt.colorRampTexture;bn||(bn=Lt.colorRampTexture=new e.Texture(Yt,Lt.colorRamp,Gt.RGBA)),bn.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),Nt.useProgram("heatmapTexture").draw(Yt,Gt.TRIANGLES,ln.disabled,Ee.disabled,Nt.colorModeForRenderPass(),Ie.disabled,function(En,Un,Nn,yr){var vr=e.create();e.ortho(vr,0,En.width,En.height,0,0,1);var Pr=En.context.gl;return{u_matrix:vr,u_world:[Pr.drawingBufferWidth,Pr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Un.paint.get("heatmap-opacity")}}(Nt,Lt),Lt.id,Nt.viewportBuffer,Nt.quadTriangleIndexBuffer,Nt.viewportSegments,Lt.paint,Nt.transform.zoom)}}(R,q))},line:function(R,B,q,K){if("translucent"===R.renderPass){var de=q.paint.get("line-opacity"),be=q.paint.get("line-width");if(0!==de.constantOr(1)&&0!==be.constantOr(1)){var Me=R.depthModeForSublayer(0,ln.ReadOnly),Ce=R.colorModeForRenderPass(),Ne=q.paint.get("line-dasharray"),$e=q.paint.get("line-pattern"),at=$e.constantOr(1),dt=q.paint.get("line-gradient"),Ot=q.getCrossfadeParameters(),zt=at?"linePattern":Ne?"lineSDF":dt?"lineGradient":"line",Rt=R.context,Nt=Rt.gl,Lt=!0;if(dt){Rt.activeTexture.set(Nt.TEXTURE0);var Yt=q.gradientTexture;if(!q.gradient)return;Yt||(Yt=q.gradientTexture=new e.Texture(Rt,q.gradient,Nt.RGBA)),Yt.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE)}for(var Gt=0,Xt=K;Gt<Xt.length;Gt+=1){var bn=Xt[Gt],En=B.getTile(bn);if(!at||En.patternsLoaded()){var Un=En.getBucket(q);if(Un){var Nn=Un.programConfigurations.get(q.id),yr=R.context.program.get(),vr=R.useProgram(zt,Nn),Pr=Lt||vr.program!==yr,Ar=$e.constantOr(null);if(Ar&&En.imageAtlas){var fi=En.imageAtlas,wi=fi.patternPositions[Ar.to.toString()],Fi=fi.patternPositions[Ar.from.toString()];wi&&Fi&&Nn.setConstantPatternPositions(wi,Fi)}var ur=at?Xe(R,En,q,Ot):Ne?Qe(R,En,q,Ne,Ot):dt?La(R,En,q):ps(R,En,q);at?(Rt.activeTexture.set(Nt.TEXTURE0),En.imageAtlasTexture.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE),Nn.updatePaintBuffers(Ot)):Ne&&(Pr||R.lineAtlas.dirty)&&(Rt.activeTexture.set(Nt.TEXTURE0),R.lineAtlas.bind(Rt)),vr.draw(Rt,Nt.TRIANGLES,Me,R.stencilModeForClipping(bn),Ce,Ie.disabled,ur,q.id,Un.layoutVertexBuffer,Un.indexBuffer,Un.segments,q.paint,R.transform.zoom,Nn),Lt=!1}}}}}},fill:function(R,B,q,K){var de=q.paint.get("fill-color"),be=q.paint.get("fill-opacity");if(0!==be.constantOr(1)){var Me=R.colorModeForRenderPass(),Ce=q.paint.get("fill-pattern"),Ne=R.opaquePassEnabledForLayer()&&!Ce.constantOr(1)&&1===de.constantOr(e.Color.transparent).a&&1===be.constantOr(0)?"opaque":"translucent";if(R.renderPass===Ne){var $e=R.depthModeForSublayer(1,"opaque"===R.renderPass?ln.ReadWrite:ln.ReadOnly);ni(R,B,q,K,$e,Me,!1)}if("translucent"===R.renderPass&&q.paint.get("fill-antialias")){var at=R.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,ln.ReadOnly);ni(R,B,q,K,at,Me,!0)}}},"fill-extrusion":function(R,B,q,K){var de=q.paint.get("fill-extrusion-opacity");if(0!==de&&"translucent"===R.renderPass){var be=new ln(R.context.gl.LEQUAL,ln.ReadWrite,R.depthRangeFor3D);if(1!==de||q.paint.get("fill-extrusion-pattern").constantOr(1))Ci(R,B,q,K,be,Ee.disabled,De.disabled),Ci(R,B,q,K,be,R.stencilModeFor3D(),R.colorModeForRenderPass());else{var Me=R.colorModeForRenderPass();Ci(R,B,q,K,be,Ee.disabled,Me)}}},hillshade:function(R,B,q,K){if("offscreen"===R.renderPass||"translucent"===R.renderPass){for(var de=R.context,be=B.getSource().maxzoom,Me=R.depthModeForSublayer(0,ln.ReadOnly),Ce=R.colorModeForRenderPass(),Ne="translucent"===R.renderPass?R.stencilConfigForOverlap(K):[{},K],$e=Ne[0],at=0,dt=Ne[1];at<dt.length;at+=1){var Ot=dt[at],zt=B.getTile(Ot);zt.needsHillshadePrepare&&"offscreen"===R.renderPass?va(R,zt,q,be,Me,Ee.disabled,Ce):"translucent"===R.renderPass&&Ji(R,zt,q,Me,$e[Ot.overscaledZ],Ce)}de.viewport.set([0,0,R.width,R.height])}},raster:function(R,B,q,K){if("translucent"===R.renderPass&&0!==q.paint.get("raster-opacity")&&K.length)for(var de=R.context,be=de.gl,Me=B.getSource(),Ce=R.useProgram("raster"),Ne=R.colorModeForRenderPass(),$e=Me instanceof J?[{},K]:R.stencilConfigForOverlap(K),at=$e[0],dt=$e[1],Ot=dt[dt.length-1].overscaledZ,zt=!R.options.moving,Rt=0,Nt=dt;Rt<Nt.length;Rt+=1){var Lt=Nt[Rt],Yt=R.depthModeForSublayer(Lt.overscaledZ-Ot,1===q.paint.get("raster-opacity")?ln.ReadWrite:ln.ReadOnly,be.LESS),Gt=B.getTile(Lt),Xt=R.transform.calculatePosMatrix(Lt.toUnwrapped(),zt);Gt.registerFadeDuration(q.paint.get("raster-fade-duration"));var bn=B.findLoadedParent(Lt,0),En=sa(Gt,bn,B,q,R.transform),Un=void 0,Nn=void 0,yr="nearest"===q.paint.get("raster-resampling")?be.NEAREST:be.LINEAR;de.activeTexture.set(be.TEXTURE0),Gt.texture.bind(yr,be.CLAMP_TO_EDGE,be.LINEAR_MIPMAP_NEAREST),de.activeTexture.set(be.TEXTURE1),bn?(bn.texture.bind(yr,be.CLAMP_TO_EDGE,be.LINEAR_MIPMAP_NEAREST),Un=Math.pow(2,bn.tileID.overscaledZ-Gt.tileID.overscaledZ),Nn=[Gt.tileID.canonical.x*Un%1,Gt.tileID.canonical.y*Un%1]):Gt.texture.bind(yr,be.CLAMP_TO_EDGE,be.LINEAR_MIPMAP_NEAREST);var vr=St(Xt,Nn||[0,0],Un||1,En,q);Me instanceof J?Ce.draw(de,be.TRIANGLES,Yt,Ee.disabled,Ne,Ie.disabled,vr,q.id,Me.boundsBuffer,R.quadTriangleIndexBuffer,Me.boundsSegments):Ce.draw(de,be.TRIANGLES,Yt,at[Lt.overscaledZ],Ne,Ie.disabled,vr,q.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}},background:function(R,B,q){var K=q.paint.get("background-color"),de=q.paint.get("background-opacity");if(0!==de){var be=R.context,Me=be.gl,Ce=R.transform,Ne=Ce.tileSize,$e=q.paint.get("background-pattern");if(!R.isPatternMissing($e)){var at=!$e&&1===K.a&&1===de&&R.opaquePassEnabledForLayer()?"opaque":"translucent";if(R.renderPass===at){var dt=Ee.disabled,Ot=R.depthModeForSublayer(0,"opaque"===at?ln.ReadWrite:ln.ReadOnly),zt=R.colorModeForRenderPass(),Rt=R.useProgram($e?"backgroundPattern":"background"),Nt=Ce.coveringTiles({tileSize:Ne});$e&&(be.activeTexture.set(Me.TEXTURE0),R.imageManager.bind(R.context));for(var Lt=q.getCrossfadeParameters(),Yt=0,Gt=Nt;Yt<Gt.length;Yt+=1){var Xt=Gt[Yt],bn=R.transform.calculatePosMatrix(Xt.toUnwrapped()),En=$e?An(bn,de,R,$e,{tileID:Xt,tileSize:Ne},Lt):yn(bn,de,K);Rt.draw(be,Me.TRIANGLES,Ot,dt,zt,Ie.disabled,En,q.id,R.tileExtentBuffer,R.quadTriangleIndexBuffer,R.tileExtentSegments)}}}}},debug:function(R,B,q){for(var K=0;K<q.length;K++)ss(R,B,q[K])},custom:function(R,B,q){var K=R.context,de=q.implementation;if("offscreen"===R.renderPass){var be=de.prerender;be&&(R.setCustomLayerDefaults(),K.setColorMode(R.colorModeForRenderPass()),be.call(de,K.gl,R.transform.customLayerMatrix()),K.setDirty(),R.setBaseState())}else if("translucent"===R.renderPass){R.setCustomLayerDefaults(),K.setColorMode(R.colorModeForRenderPass()),K.setStencilMode(Ee.disabled);var Me="3d"===de.renderingMode?new ln(R.context.gl.LEQUAL,ln.ReadWrite,R.depthRangeFor3D):R.depthModeForSublayer(0,ln.ReadOnly);K.setDepthMode(Me),de.render(K.gl,R.transform.customLayerMatrix()),K.setDirty(),R.setBaseState(),K.bindFramebuffer.set(null)}}},xa=function(R,B){this.context=new He(R),this.transform=B,this._tileTextures={},this.setup(),this.numSublayers=Ye.maxUnderzooming+Ye.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ir,this.gpuTimers={}};xa.prototype.resize=function(R,B){if(this.width=R*e.browser.devicePixelRatio,this.height=B*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,K=this.style._order;q<K.length;q+=1)this.style._layers[K[q]].resize()},xa.prototype.setup=function(){var R=this.context,B=new e.StructArrayLayout2i4;B.emplaceBack(0,0),B.emplaceBack(e.EXTENT,0),B.emplaceBack(0,e.EXTENT),B.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=R.createVertexBuffer(B,Xr.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var q=new e.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(e.EXTENT,0),q.emplaceBack(0,e.EXTENT),q.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=R.createVertexBuffer(q,Xr.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var K=new e.StructArrayLayout4i8;K.emplaceBack(0,0,0,0),K.emplaceBack(e.EXTENT,0,e.EXTENT,0),K.emplaceBack(0,e.EXTENT,0,e.EXTENT),K.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=R.createVertexBuffer(K,ae.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var de=new e.StructArrayLayout2i4;de.emplaceBack(0,0),de.emplaceBack(1,0),de.emplaceBack(0,1),de.emplaceBack(1,1),this.viewportBuffer=R.createVertexBuffer(de,Xr.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var be=new e.StructArrayLayout1ui2;be.emplaceBack(0),be.emplaceBack(1),be.emplaceBack(3),be.emplaceBack(2),be.emplaceBack(0),this.tileBorderIndexBuffer=R.createIndexBuffer(be);var Me=new e.StructArrayLayout3ui6;Me.emplaceBack(0,1,2),Me.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=R.createIndexBuffer(Me),this.emptyTexture=new e.Texture(R,{width:1,height:1,data:new Uint8Array([0,0,0,0])},R.gl.RGBA);var Ce=this.context.gl;this.stencilClearMode=new Ee({func:Ce.ALWAYS,mask:0},0,255,Ce.ZERO,Ce.ZERO,Ce.ZERO)},xa.prototype.clearStencil=function(){var R=this.context,B=R.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=e.create();e.ortho(q,0,this.width,this.height,0,0,1),e.scale(q,q,[B.drawingBufferWidth,B.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(R,B.TRIANGLES,ln.disabled,this.stencilClearMode,De.disabled,Ie.disabled,Po(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},xa.prototype._renderTileClippingMasks=function(R,B){if(this.currentStencilSource!==R.source&&R.isTileClipped()&&B&&B.length){this.currentStencilSource=R.source;var q=this.context,K=q.gl;this.nextStencilID+B.length>256&&this.clearStencil(),q.setColorMode(De.disabled),q.setDepthMode(ln.disabled);var de=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var be=0,Me=B;be<Me.length;be+=1){var Ce=Me[be],Ne=this._tileClippingMaskIDs[Ce.key]=this.nextStencilID++;de.draw(q,K.TRIANGLES,ln.disabled,new Ee({func:K.ALWAYS,mask:0},Ne,255,K.KEEP,K.KEEP,K.REPLACE),De.disabled,Ie.disabled,Po(Ce.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},xa.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var R=this.nextStencilID++,B=this.context.gl;return new Ee({func:B.NOTEQUAL,mask:255},R,255,B.KEEP,B.KEEP,B.REPLACE)},xa.prototype.stencilModeForClipping=function(R){var B=this.context.gl;return new Ee({func:B.EQUAL,mask:255},this._tileClippingMaskIDs[R.key],0,B.KEEP,B.KEEP,B.REPLACE)},xa.prototype.stencilConfigForOverlap=function(R){var B,q=this.context.gl,K=R.sort(function(Ne,$e){return $e.overscaledZ-Ne.overscaledZ}),de=K[K.length-1].overscaledZ,be=K[0].overscaledZ-de+1;if(be>1){this.currentStencilSource=void 0,this.nextStencilID+be>256&&this.clearStencil();for(var Me={},Ce=0;Ce<be;Ce++)Me[Ce+de]=new Ee({func:q.GEQUAL,mask:255},Ce+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=be,[Me,K]}return[(B={},B[de]=Ee.disabled,B),K]},xa.prototype.colorModeForRenderPass=function(){var R=this.context.gl;return this._showOverdrawInspector?new De([R.CONSTANT_COLOR,R.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?De.unblended:De.alphaBlended},xa.prototype.depthModeForSublayer=function(R,B,q){if(!this.opaquePassEnabledForLayer())return ln.disabled;var K=1-((1+this.currentLayer)*this.numSublayers+R)*this.depthEpsilon;return new ln(q||this.context.gl.LEQUAL,B,[K,K])},xa.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},xa.prototype.render=function(R,B){var q=this;this.style=R,this.options=B,this.lineAtlas=R.lineAtlas,this.imageManager=R.imageManager,this.glyphManager=R.glyphManager,this.symbolFadeChange=R.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var K=this.style._order,de=this.style.sourceCaches;for(var be in de){var Me=de[be];Me.used&&Me.prepare(this.context)}var Ce,Ne,$e={},at={},dt={};for(var Ot in de){var zt=de[Ot];$e[Ot]=zt.getVisibleCoordinates(),at[Ot]=$e[Ot].slice().reverse(),dt[Ot]=zt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Rt=0;Rt<K.length;Rt++)if(this.style._layers[K[Rt]].is3D()){this.opaquePassCutoff=Rt;break}this.renderPass="offscreen";for(var Lt=0,Yt=K;Lt<Yt.length;Lt+=1){var Xt=this.style._layers[Yt[Lt]];if(Xt.hasOffscreenPass()&&!Xt.isHidden(this.transform.zoom)){var bn=at[Xt.source];("custom"===Xt.type||bn.length)&&this.renderLayer(this,de[Xt.source],Xt,bn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:B.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=B.showOverdrawInspector,this.depthRangeFor3D=[0,1-(R._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=K.length-1;this.currentLayer>=0;this.currentLayer--){var En=this.style._layers[K[this.currentLayer]],Un=de[En.source],Nn=$e[En.source];this._renderTileClippingMasks(En,Nn),this.renderLayer(this,Un,En,Nn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<K.length;this.currentLayer++){var yr=this.style._layers[K[this.currentLayer]],vr=de[yr.source],Pr=("symbol"===yr.type?dt:at)[yr.source];this._renderTileClippingMasks(yr,$e[yr.source]),this.renderLayer(this,vr,yr,Pr)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(Ar){Ar.source&&!Ar.isHidden(q.transform.zoom)&&(Ar.source!==(Ne&&Ne.id)&&(Ne=q.style.sourceCaches[Ar.source]),(!Ce||Ce.getSource().maxzoom<Ne.getSource().maxzoom)&&(Ce=Ne))}),Ce&&gs.debug(this,Ce,Ce.getVisibleCoordinates())),this.options.showPadding&&function bo(R){var B=R.transform.padding;Ro(R,R.transform.height-(B.top||0),3,qi),Ro(R,B.bottom||0,3,Oo),Go(R,B.left||0,3,Do),Go(R,R.transform.width-(B.right||0),3,Da);var K,de,be,Me,q=R.transform.centerPoint;po(K=R,(de=q.x)-1,(be=R.transform.height-q.y)-10,2,20,Me=Ea),po(K,de-10,be-1,20,2,Me)}(this),this.context.setDefault()},xa.prototype.renderLayer=function(R,B,q,K){q.isHidden(this.transform.zoom)||("background"===q.type||"custom"===q.type||K.length)&&(this.id=q.id,this.gpuTimingStart(q),gs[q.type](R,B,q,K,this.style.placement.variableOffsets),this.gpuTimingEnd())},xa.prototype.gpuTimingStart=function(R){if(this.options.gpuTiming){var B=this.context.extTimerQuery,q=this.gpuTimers[R.id];q||(q=this.gpuTimers[R.id]={calls:0,cpuTime:0,query:B.createQueryEXT()}),q.calls++,B.beginQueryEXT(B.TIME_ELAPSED_EXT,q.query)}},xa.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var R=this.context.extTimerQuery;R.endQueryEXT(R.TIME_ELAPSED_EXT)}},xa.prototype.collectGpuTimers=function(){var R=this.gpuTimers;return this.gpuTimers={},R},xa.prototype.queryGpuTimers=function(R){var B={};for(var q in R){var K=R[q],de=this.context.extTimerQuery,be=de.getQueryObjectEXT(K.query,de.QUERY_RESULT_EXT)/1e6;de.deleteQueryEXT(K.query),B[q]=be}return B},xa.prototype.translatePosMatrix=function(R,B,q,K,de){if(!q[0]&&!q[1])return R;var be=de?"map"===K?this.transform.angle:0:"viewport"===K?-this.transform.angle:0;if(be){var Me=Math.sin(be),Ce=Math.cos(be);q=[q[0]*Ce-q[1]*Me,q[0]*Me+q[1]*Ce]}var Ne=[de?q[0]:fr(B,q[0],this.transform.zoom),de?q[1]:fr(B,q[1],this.transform.zoom),0],$e=new Float32Array(16);return e.translate($e,R,Ne),$e},xa.prototype.saveTileTexture=function(R){var B=this._tileTextures[R.size[0]];B?B.push(R):this._tileTextures[R.size[0]]=[R]},xa.prototype.getTileTexture=function(R){var B=this._tileTextures[R];return B&&B.length>0?B.pop():null},xa.prototype.isPatternMissing=function(R){if(!R)return!1;if(!R.from||!R.to)return!0;var B=this.imageManager.getPattern(R.from.toString()),q=this.imageManager.getPattern(R.to.toString());return!B||!q},xa.prototype.useProgram=function(R,B){this.cache=this.cache||{};var q=""+R+(B?B.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new pu(this.context,Ms[R],B,Rn[R],this._showOverdrawInspector)),this.cache[q]},xa.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},xa.prototype.setBaseState=function(){var R=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(R.FUNC_ADD)},xa.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},xa.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var At=function(R,B){this.points=R,this.planes=B};At.fromInvProjectionMatrix=function(R,B,q){var K=Math.pow(2,q),de=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Me){return e.transformMat4([],Me,R)}).map(function(Me){return e.scale$1([],Me,1/Me[3]/B*K)}),be=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Me){var Ce=e.sub([],de[Me[0]],de[Me[1]]),Ne=e.sub([],de[Me[2]],de[Me[1]]),$e=e.normalize([],e.cross([],Ce,Ne)),at=-e.dot($e,de[Me[1]]);return $e.concat(at)});return new At(de,be)};var Wt=function(R,B){this.min=R,this.max=B,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Wt.prototype.quadrant=function(R){for(var B=[R%2==0,R<2],q=e.clone$2(this.min),K=e.clone$2(this.max),de=0;de<B.length;de++)q[de]=B[de]?this.min[de]:this.center[de],K[de]=B[de]?this.center[de]:this.max[de];return K[2]=this.max[2],new Wt(q,K)},Wt.prototype.distanceX=function(R){return Math.max(Math.min(this.max[0],R[0]),this.min[0])-R[0]},Wt.prototype.distanceY=function(R){return Math.max(Math.min(this.max[1],R[1]),this.min[1])-R[1]},Wt.prototype.intersects=function(R){for(var B=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,K=0;K<R.planes.length;K++){for(var de=R.planes[K],be=0,Me=0;Me<B.length;Me++)be+=e.dot$1(de,B[Me])>=0;if(0===be)return 0;be!==B.length&&(q=!1)}if(q)return 2;for(var Ce=0;Ce<3;Ce++){for(var Ne=Number.MAX_VALUE,$e=-Number.MAX_VALUE,at=0;at<R.points.length;at++){var dt=R.points[at][Ce]-this.min[Ce];Ne=Math.min(Ne,dt),$e=Math.max($e,dt)}if($e<0||Ne>this.max[Ce]-this.min[Ce])return 0}return 1};var wn=function(R,B,q,K){if(void 0===R&&(R=0),void 0===B&&(B=0),void 0===q&&(q=0),void 0===K&&(K=0),isNaN(R)||R<0||isNaN(B)||B<0||isNaN(q)||q<0||isNaN(K)||K<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=R,this.bottom=B,this.left=q,this.right=K};wn.prototype.interpolate=function(R,B,q){return null!=B.top&&null!=R.top&&(this.top=e.number(R.top,B.top,q)),null!=B.bottom&&null!=R.bottom&&(this.bottom=e.number(R.bottom,B.bottom,q)),null!=B.left&&null!=R.left&&(this.left=e.number(R.left,B.left,q)),null!=B.right&&null!=R.right&&(this.right=e.number(R.right,B.right,q)),this},wn.prototype.getCenter=function(R,B){var q=e.clamp((this.left+R-this.right)/2,0,R),K=e.clamp((this.top+B-this.bottom)/2,0,B);return new e.Point(q,K)},wn.prototype.equals=function(R){return this.top===R.top&&this.bottom===R.bottom&&this.left===R.left&&this.right===R.right},wn.prototype.clone=function(){return new wn(this.top,this.bottom,this.left,this.right)},wn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var tn=function(R,B,q,K,de){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===de||de,this._minZoom=R||0,this._maxZoom=B||22,this._minPitch=null==q?0:q,this._maxPitch=null==K?60:K,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wn,this._posMatrixCache={},this._alignedPosMatrixCache={}},Tn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};tn.prototype.clone=function(){var R=new tn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return R.tileSize=this.tileSize,R.latRange=this.latRange,R.width=this.width,R.height=this.height,R._center=this._center,R.zoom=this.zoom,R.angle=this.angle,R._fov=this._fov,R._pitch=this._pitch,R._unmodified=this._unmodified,R._edgeInsets=this._edgeInsets.clone(),R._calcMatrices(),R},Tn.minZoom.get=function(){return this._minZoom},Tn.minZoom.set=function(R){this._minZoom!==R&&(this._minZoom=R,this.zoom=Math.max(this.zoom,R))},Tn.maxZoom.get=function(){return this._maxZoom},Tn.maxZoom.set=function(R){this._maxZoom!==R&&(this._maxZoom=R,this.zoom=Math.min(this.zoom,R))},Tn.minPitch.get=function(){return this._minPitch},Tn.minPitch.set=function(R){this._minPitch!==R&&(this._minPitch=R,this.pitch=Math.max(this.pitch,R))},Tn.maxPitch.get=function(){return this._maxPitch},Tn.maxPitch.set=function(R){this._maxPitch!==R&&(this._maxPitch=R,this.pitch=Math.min(this.pitch,R))},Tn.renderWorldCopies.get=function(){return this._renderWorldCopies},Tn.renderWorldCopies.set=function(R){void 0===R?R=!0:null===R&&(R=!1),this._renderWorldCopies=R},Tn.worldSize.get=function(){return this.tileSize*this.scale},Tn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Tn.size.get=function(){return new e.Point(this.width,this.height)},Tn.bearing.get=function(){return-this.angle/Math.PI*180},Tn.bearing.set=function(R){var B=-e.wrap(R,-180,180)*Math.PI/180;this.angle!==B&&(this._unmodified=!1,this.angle=B,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Tn.pitch.get=function(){return this._pitch/Math.PI*180},Tn.pitch.set=function(R){var B=e.clamp(R,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==B&&(this._unmodified=!1,this._pitch=B,this._calcMatrices())},Tn.fov.get=function(){return this._fov/Math.PI*180},Tn.fov.set=function(R){R=Math.max(.01,Math.min(60,R)),this._fov!==R&&(this._unmodified=!1,this._fov=R/180*Math.PI,this._calcMatrices())},Tn.zoom.get=function(){return this._zoom},Tn.zoom.set=function(R){var B=Math.min(Math.max(R,this.minZoom),this.maxZoom);this._zoom!==B&&(this._unmodified=!1,this._zoom=B,this.scale=this.zoomScale(B),this.tileZoom=Math.floor(B),this.zoomFraction=B-this.tileZoom,this._constrain(),this._calcMatrices())},Tn.center.get=function(){return this._center},Tn.center.set=function(R){R.lat===this._center.lat&&R.lng===this._center.lng||(this._unmodified=!1,this._center=R,this._constrain(),this._calcMatrices())},Tn.padding.get=function(){return this._edgeInsets.toJSON()},Tn.padding.set=function(R){this._edgeInsets.equals(R)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,R,1),this._calcMatrices())},Tn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},tn.prototype.isPaddingEqual=function(R){return this._edgeInsets.equals(R)},tn.prototype.interpolatePadding=function(R,B,q){this._unmodified=!1,this._edgeInsets.interpolate(R,B,q),this._constrain(),this._calcMatrices()},tn.prototype.coveringZoomLevel=function(R){var B=(R.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/R.tileSize));return Math.max(0,B)},tn.prototype.getVisibleUnwrappedCoordinates=function(R){var B=[new e.UnwrappedTileID(0,R)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new e.Point(0,0)),K=this.pointCoordinate(new e.Point(this.width,0)),de=this.pointCoordinate(new e.Point(this.width,this.height)),be=this.pointCoordinate(new e.Point(0,this.height)),Me=Math.floor(Math.min(q.x,K.x,de.x,be.x)),Ce=Math.floor(Math.max(q.x,K.x,de.x,be.x)),Ne=Me-1;Ne<=Ce+1;Ne++)0!==Ne&&B.push(new e.UnwrappedTileID(Ne,R));return B},tn.prototype.coveringTiles=function(R){var B=this.coveringZoomLevel(R),q=B;if(void 0!==R.minzoom&&B<R.minzoom)return[];void 0!==R.maxzoom&&B>R.maxzoom&&(B=R.maxzoom);var K=e.MercatorCoordinate.fromLngLat(this.center),de=Math.pow(2,B),be=[de*K.x,de*K.y,0],Me=At.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,B),Ce=R.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ce=B);var Ne=function(Pr){return{aabb:new Wt([Pr*de,0,0],[(Pr+1)*de,de,0]),zoom:0,x:0,y:0,wrap:Pr,fullyVisible:!1}},$e=[],at=[],dt=B,Ot=R.reparseOverscaled?q:B;if(this._renderWorldCopies)for(var zt=1;zt<=3;zt++)$e.push(Ne(-zt)),$e.push(Ne(zt));for($e.push(Ne(0));$e.length>0;){var Rt=$e.pop(),Nt=Rt.x,Lt=Rt.y,Yt=Rt.fullyVisible;if(!Yt){var Gt=Rt.aabb.intersects(Me);if(0===Gt)continue;Yt=2===Gt}var Xt=Rt.aabb.distanceX(be),bn=Rt.aabb.distanceY(be),En=Math.max(Math.abs(Xt),Math.abs(bn));if(Rt.zoom===dt||En>3+(1<<dt-Rt.zoom)-2&&Rt.zoom>=Ce)at.push({tileID:new e.OverscaledTileID(Rt.zoom===dt?Ot:Rt.zoom,Rt.wrap,Rt.zoom,Nt,Lt),distanceSq:e.sqrLen([be[0]-.5-Nt,be[1]-.5-Lt])});else for(var Nn=0;Nn<4;Nn++){var yr=(Nt<<1)+Nn%2,vr=(Lt<<1)+(Nn>>1);$e.push({aabb:Rt.aabb.quadrant(Nn),zoom:Rt.zoom+1,x:yr,y:vr,wrap:Rt.wrap,fullyVisible:Yt})}}return at.sort(function(Pr,Ar){return Pr.distanceSq-Ar.distanceSq}).map(function(Pr){return Pr.tileID})},tn.prototype.resize=function(R,B){this.width=R,this.height=B,this.pixelsToGLUnits=[2/R,-2/B],this._constrain(),this._calcMatrices()},Tn.unmodified.get=function(){return this._unmodified},tn.prototype.zoomScale=function(R){return Math.pow(2,R)},tn.prototype.scaleZoom=function(R){return Math.log(R)/Math.LN2},tn.prototype.project=function(R){var B=e.clamp(R.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(R.lng)*this.worldSize,e.mercatorYfromLat(B)*this.worldSize)},tn.prototype.unproject=function(R){return new e.MercatorCoordinate(R.x/this.worldSize,R.y/this.worldSize).toLngLat()},Tn.point.get=function(){return this.project(this.center)},tn.prototype.setLocationAtPoint=function(R,B){var q=this.pointCoordinate(B),K=this.pointCoordinate(this.centerPoint),de=this.locationCoordinate(R),be=new e.MercatorCoordinate(de.x-(q.x-K.x),de.y-(q.y-K.y));this.center=this.coordinateLocation(be),this._renderWorldCopies&&(this.center=this.center.wrap())},tn.prototype.locationPoint=function(R){return this.coordinatePoint(this.locationCoordinate(R))},tn.prototype.pointLocation=function(R){return this.coordinateLocation(this.pointCoordinate(R))},tn.prototype.locationCoordinate=function(R){return e.MercatorCoordinate.fromLngLat(R)},tn.prototype.coordinateLocation=function(R){return R.toLngLat()},tn.prototype.pointCoordinate=function(R){var B=[R.x,R.y,0,1],q=[R.x,R.y,1,1];e.transformMat4(B,B,this.pixelMatrixInverse),e.transformMat4(q,q,this.pixelMatrixInverse);var K=B[3],de=q[3],Ce=B[1]/K,Ne=q[1]/de,$e=B[2]/K,at=q[2]/de,dt=$e===at?0:(0-$e)/(at-$e);return new e.MercatorCoordinate(e.number(B[0]/K,q[0]/de,dt)/this.worldSize,e.number(Ce,Ne,dt)/this.worldSize)},tn.prototype.coordinatePoint=function(R){var B=[R.x*this.worldSize,R.y*this.worldSize,0,1];return e.transformMat4(B,B,this.pixelMatrix),new e.Point(B[0]/B[3],B[1]/B[3])},tn.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},tn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},tn.prototype.setMaxBounds=function(R){R?(this.lngRange=[R.getWest(),R.getEast()],this.latRange=[R.getSouth(),R.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},tn.prototype.calculatePosMatrix=function(R,B){void 0===B&&(B=!1);var q=R.key,K=B?this._alignedPosMatrixCache:this._posMatrixCache;if(K[q])return K[q];var de=R.canonical,be=this.worldSize/this.zoomScale(de.z),Me=de.x+Math.pow(2,de.z)*R.wrap,Ce=e.identity(new Float64Array(16));return e.translate(Ce,Ce,[Me*be,de.y*be,0]),e.scale(Ce,Ce,[be/e.EXTENT,be/e.EXTENT,1]),e.multiply(Ce,B?this.alignedProjMatrix:this.projMatrix,Ce),K[q]=new Float32Array(Ce),K[q]},tn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},tn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var R,B,q,K,de=-90,be=90,Me=-180,Ce=180,Ne=this.size,$e=this._unmodified;if(this.latRange){var at=this.latRange;de=e.mercatorYfromLat(at[1])*this.worldSize,R=(be=e.mercatorYfromLat(at[0])*this.worldSize)-de<Ne.y?Ne.y/(be-de):0}if(this.lngRange){var dt=this.lngRange;Me=e.mercatorXfromLng(dt[0])*this.worldSize,B=(Ce=e.mercatorXfromLng(dt[1])*this.worldSize)-Me<Ne.x?Ne.x/(Ce-Me):0}var Ot=this.point,zt=Math.max(B||0,R||0);if(zt)return this.center=this.unproject(new e.Point(B?(Ce+Me)/2:Ot.x,R?(be+de)/2:Ot.y)),this.zoom+=this.scaleZoom(zt),this._unmodified=$e,void(this._constraining=!1);if(this.latRange){var Rt=Ot.y,Nt=Ne.y/2;Rt-Nt<de&&(K=de+Nt),Rt+Nt>be&&(K=be-Nt)}if(this.lngRange){var Lt=Ot.x,Yt=Ne.x/2;Lt-Yt<Me&&(q=Me+Yt),Lt+Yt>Ce&&(q=Ce-Yt)}void 0===q&&void 0===K||(this.center=this.unproject(new e.Point(void 0!==q?q:Ot.x,void 0!==K?K:Ot.y))),this._unmodified=$e,this._constraining=!1}},tn.prototype._calcMatrices=function(){if(this.height){var B=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var q=Math.PI/2+this._pitch,K=this._fov*(.5+B.y/this.height),de=Math.sin(K)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-q-K,.01,Math.PI-.01)),be=this.point,Me=be.x,Ce=be.y,Ne=1.01*(Math.cos(Math.PI/2-this._pitch)*de+this.cameraToCenterDistance),$e=this.height/50,at=new Float64Array(16);e.perspective(at,this._fov,this.width/this.height,$e,Ne),at[8]=2*-B.x/this.width,at[9]=2*B.y/this.height,e.scale(at,at,[1,-1,1]),e.translate(at,at,[0,0,-this.cameraToCenterDistance]),e.rotateX(at,at,this._pitch),e.rotateZ(at,at,this.angle),e.translate(at,at,[-Me,-Ce,0]),this.mercatorMatrix=e.scale([],at,[this.worldSize,this.worldSize,this.worldSize]),e.scale(at,at,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=at,this.invProjMatrix=e.invert([],this.projMatrix);var dt=this.width%2/2,Ot=this.height%2/2,zt=Math.cos(this.angle),Rt=Math.sin(this.angle),Nt=Me-Math.round(Me)+zt*dt+Rt*Ot,Lt=Ce-Math.round(Ce)+zt*Ot+Rt*dt,Yt=new Float64Array(at);if(e.translate(Yt,Yt,[Nt>.5?Nt-1:Nt,Lt>.5?Lt-1:Lt,0]),this.alignedProjMatrix=Yt,at=e.create(),e.scale(at,at,[this.width/2,-this.height/2,1]),e.translate(at,at,[1,-1,0]),this.labelPlaneMatrix=at,at=e.create(),e.scale(at,at,[1,-1,1]),e.translate(at,at,[-1,-1,0]),e.scale(at,at,[2/this.width,2/this.height,1]),this.glCoordMatrix=at,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(at=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=at,this._posMatrixCache={},this._alignedPosMatrixCache={}}},tn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var R=this.pointCoordinate(new e.Point(0,0)),B=[R.x*this.worldSize,R.y*this.worldSize,0,1];return e.transformMat4(B,B,this.pixelMatrix)[3]/this.cameraToCenterDistance},tn.prototype.getCameraPoint=function(){var B=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,B))},tn.prototype.getCameraQueryGeometry=function(R){var B=this.getCameraPoint();if(1===R.length)return[R[0],B];for(var q=B.x,K=B.y,de=B.x,be=B.y,Me=0,Ce=R;Me<Ce.length;Me+=1){var Ne=Ce[Me];q=Math.min(q,Ne.x),K=Math.min(K,Ne.y),de=Math.max(de,Ne.x),be=Math.max(be,Ne.y)}return[new e.Point(q,K),new e.Point(de,K),new e.Point(de,be),new e.Point(q,be),new e.Point(q,K)]},Object.defineProperties(tn.prototype,Tn);var Wn=function(R){var B,K,de,be;this._hashName=R&&encodeURIComponent(R),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(B=this._updateHashUnthrottled.bind(this),300,K=!1,de=null,be=function(){de=null,K&&(B(),de=setTimeout(be,300),K=!1)},function(){return K=!0,de||be(),de})};Wn.prototype.addTo=function(R){return this._map=R,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Wn.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Wn.prototype.getHashString=function(R){var B=this._map.getCenter(),q=Math.round(100*this._map.getZoom())/100,K=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),de=Math.pow(10,K),be=Math.round(B.lng*de)/de,Me=Math.round(B.lat*de)/de,Ce=this._map.getBearing(),Ne=this._map.getPitch(),$e="";if($e+=R?"/"+be+"/"+Me+"/"+q:q+"/"+Me+"/"+be,(Ce||Ne)&&($e+="/"+Math.round(10*Ce)/10),Ne&&($e+="/"+Math.round(Ne)),this._hashName){var at=this._hashName,dt=!1,Ot=e.window.location.hash.slice(1).split("&").map(function(zt){var Rt=zt.split("=")[0];return Rt===at?(dt=!0,Rt+"="+$e):zt}).filter(function(zt){return zt});return dt||Ot.push(at+"="+$e),"#"+Ot.join("&")}return"#"+$e},Wn.prototype._getCurrentHash=function(){var R,B=this,q=e.window.location.hash.replace("#","");return this._hashName?(q.split("&").map(function(K){return K.split("=")}).forEach(function(K){K[0]===B._hashName&&(R=K)}),(R&&R[1]||"").split("/")):q.split("/")},Wn.prototype._onHashChange=function(){var R=this._getCurrentHash();if(R.length>=3&&!R.some(function(q){return isNaN(q)})){var B=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(R[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+R[2],+R[1]],zoom:+R[0],bearing:B,pitch:+(R[4]||0)}),!0}return!1},Wn.prototype._updateHashUnthrottled=function(){var R=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",R)}catch(B){}};var nr={linearity:.3,easing:e.bezier(0,0,.3,1)},gr=e.extend({deceleration:2500,maxSpeed:1400},nr),Sr=e.extend({deceleration:20,maxSpeed:1400},nr),Mr=e.extend({deceleration:1e3,maxSpeed:360},nr),Rr=e.extend({deceleration:1e3,maxSpeed:90},nr),Wr=function(R){this._map=R,this.clear()};function Cr(R,B){(!R.duration||R.duration<B.duration)&&(R.duration=B.duration,R.easing=B.easing)}function Yr(R,B,q){var K=q.maxSpeed,de=q.linearity,be=q.deceleration,Me=e.clamp(R*de/(B/1e3),-K,K),Ce=Math.abs(Me)/(be*de);return{easing:q.easing,duration:1e3*Ce,amount:Me*(Ce/2)}}Wr.prototype.clear=function(){this._inertiaBuffer=[]},Wr.prototype.record=function(R){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:R})},Wr.prototype._drainInertiaBuffer=function(){for(var R=this._inertiaBuffer,B=e.browser.now();R.length>0&&B-R[0].time>160;)R.shift()},Wr.prototype._onMoveEnd=function(R){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var B={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},q=0,K=this._inertiaBuffer;q<K.length;q+=1){var de=K[q].settings;B.zoom+=de.zoomDelta||0,B.bearing+=de.bearingDelta||0,B.pitch+=de.pitchDelta||0,de.panDelta&&B.pan._add(de.panDelta),de.around&&(B.around=de.around),de.pinchAround&&(B.pinchAround=de.pinchAround)}var be=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Me={};if(B.pan.mag()){var Ce=Yr(B.pan.mag(),be,e.extend({},gr,R||{}));Me.offset=B.pan.mult(Ce.amount/B.pan.mag()),Me.center=this._map.transform.center,Cr(Me,Ce)}if(B.zoom){var Ne=Yr(B.zoom,be,Sr);Me.zoom=this._map.transform.zoom+Ne.amount,Cr(Me,Ne)}if(B.bearing){var $e=Yr(B.bearing,be,Mr);Me.bearing=this._map.transform.bearing+e.clamp($e.amount,-179,179),Cr(Me,$e)}if(B.pitch){var at=Yr(B.pitch,be,Rr);Me.pitch=this._map.transform.pitch+at.amount,Cr(Me,at)}if(Me.zoom||Me.bearing){var dt=void 0===B.pinchAround?B.around:B.pinchAround;Me.around=dt?this._map.unproject(dt):this._map.getCenter()}return this.clear(),e.extend(Me,{noMoveStart:!0})}};var si=function(R){function B(K,de,be,Me){void 0===Me&&(Me={});var Ce=a.mousePos(de.getCanvasContainer(),be),Ne=de.unproject(Ce);R.call(this,K,e.extend({point:Ce,lngLat:Ne,originalEvent:be},Me)),this._defaultPrevented=!1,this.target=de}R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B;var q={defaultPrevented:{configurable:!0}};return B.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(B.prototype,q),B}(e.Event),pi=function(R){function B(K,de,be){var Me="touchend"===K?be.changedTouches:be.touches,Ce=a.touchPos(de.getCanvasContainer(),Me),Ne=Ce.map(function(dt){return de.unproject(dt)}),$e=Ce.reduce(function(dt,Ot,zt,Rt){return dt.add(Ot.div(Rt.length))},new e.Point(0,0)),at=de.unproject($e);R.call(this,K,{points:Ce,point:$e,lngLats:Ne,lngLat:at,originalEvent:be}),this._defaultPrevented=!1}R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B;var q={defaultPrevented:{configurable:!0}};return B.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(B.prototype,q),B}(e.Event),Ei=function(R){function B(K,de,be){R.call(this,K,{originalEvent:be}),this._defaultPrevented=!1}R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B;var q={defaultPrevented:{configurable:!0}};return B.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(B.prototype,q),B}(e.Event),mr=function(R,B){this._map=R,this._clickTolerance=B.clickTolerance};mr.prototype.reset=function(){delete this._mousedownPos},mr.prototype.wheel=function(R){return this._firePreventable(new Ei(R.type,this._map,R))},mr.prototype.mousedown=function(R,B){return this._mousedownPos=B,this._firePreventable(new si(R.type,this._map,R))},mr.prototype.mouseup=function(R){this._map.fire(new si(R.type,this._map,R))},mr.prototype.click=function(R,B){this._mousedownPos&&this._mousedownPos.dist(B)>=this._clickTolerance||this._map.fire(new si(R.type,this._map,R))},mr.prototype.dblclick=function(R){return this._firePreventable(new si(R.type,this._map,R))},mr.prototype.mouseover=function(R){this._map.fire(new si(R.type,this._map,R))},mr.prototype.mouseout=function(R){this._map.fire(new si(R.type,this._map,R))},mr.prototype.touchstart=function(R){return this._firePreventable(new pi(R.type,this._map,R))},mr.prototype.touchmove=function(R){this._map.fire(new pi(R.type,this._map,R))},mr.prototype.touchend=function(R){this._map.fire(new pi(R.type,this._map,R))},mr.prototype.touchcancel=function(R){this._map.fire(new pi(R.type,this._map,R))},mr.prototype._firePreventable=function(R){if(this._map.fire(R),R.defaultPrevented)return{}},mr.prototype.isEnabled=function(){return!0},mr.prototype.isActive=function(){return!1},mr.prototype.enable=function(){},mr.prototype.disable=function(){};var Di=function(R){this._map=R};Di.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Di.prototype.mousemove=function(R){this._map.fire(new si(R.type,this._map,R))},Di.prototype.mousedown=function(){this._delayContextMenu=!0},Di.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Di.prototype.contextmenu=function(R){this._delayContextMenu?this._contextMenuEvent=R:this._map.fire(new si(R.type,this._map,R)),this._map.listens("contextmenu")&&R.preventDefault()},Di.prototype.isEnabled=function(){return!0},Di.prototype.isActive=function(){return!1},Di.prototype.enable=function(){},Di.prototype.disable=function(){};var ei=function(R,B){this._map=R,this._el=R.getCanvasContainer(),this._container=R.getContainer(),this._clickTolerance=B.clickTolerance||1};function ii(R,B){for(var q={},K=0;K<R.length;K++)q[R[K].identifier]=B[K];return q}ei.prototype.isEnabled=function(){return!!this._enabled},ei.prototype.isActive=function(){return!!this._active},ei.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ei.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ei.prototype.mousedown=function(R,B){this.isEnabled()&&R.shiftKey&&0===R.button&&(a.disableDrag(),this._startPos=this._lastPos=B,this._active=!0)},ei.prototype.mousemoveWindow=function(R,B){if(this._active){var q=B;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var K=this._startPos;this._lastPos=q,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",R));var de=Math.min(K.x,q.x),be=Math.max(K.x,q.x),Me=Math.min(K.y,q.y),Ce=Math.max(K.y,q.y);a.setTransform(this._box,"translate("+de+"px,"+Me+"px)"),this._box.style.width=be-de+"px",this._box.style.height=Ce-Me+"px"}}},ei.prototype.mouseupWindow=function(R,B){var q=this;if(this._active&&0===R.button){var K=this._startPos,de=B;if(this.reset(),a.suppressClick(),K.x!==de.x||K.y!==de.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:R})),{cameraAnimation:function(be){return be.fitScreenCoordinates(K,de,q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",R)}},ei.prototype.keydown=function(R){this._active&&27===R.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",R))},ei.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos},ei.prototype._fireEvent=function(R,B){return this._map.fire(new e.Event(R,{originalEvent:B}))};var ki=function(R){this.reset(),this.numTouches=R.numTouches};ki.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ki.prototype.touchstart=function(R,B,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=R.timeStamp),q.length===this.numTouches&&(this.centroid=function(K){for(var de=new e.Point(0,0),be=0,Me=K;be<Me.length;be+=1)de._add(Me[be]);return de.div(K.length)}(B),this.touches=ii(q,B)))},ki.prototype.touchmove=function(R,B,q){if(!this.aborted&&this.centroid){var K=ii(q,B);for(var de in this.touches){var Me=K[de];(!Me||Me.dist(this.touches[de])>30)&&(this.aborted=!0)}}},ki.prototype.touchend=function(R,B,q){if((!this.centroid||R.timeStamp-this.startTime>500)&&(this.aborted=!0),0===q.length){var K=!this.aborted&&this.centroid;if(this.reset(),K)return K}};var Vi=function(R){this.singleTap=new ki(R),this.numTaps=R.numTaps,this.reset()};Vi.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Vi.prototype.touchstart=function(R,B,q){this.singleTap.touchstart(R,B,q)},Vi.prototype.touchmove=function(R,B,q){this.singleTap.touchmove(R,B,q)},Vi.prototype.touchend=function(R,B,q){var K=this.singleTap.touchend(R,B,q);if(K){var de=R.timeStamp-this.lastTime<500,be=!this.lastTap||this.lastTap.dist(K)<30;if(de&&be||this.reset(),this.count++,this.lastTime=R.timeStamp,this.lastTap=K,this.count===this.numTaps)return this.reset(),K}};var ha=function(){this._zoomIn=new Vi({numTouches:1,numTaps:2}),this._zoomOut=new Vi({numTouches:2,numTaps:1}),this.reset()};ha.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ha.prototype.touchstart=function(R,B,q){this._zoomIn.touchstart(R,B,q),this._zoomOut.touchstart(R,B,q)},ha.prototype.touchmove=function(R,B,q){this._zoomIn.touchmove(R,B,q),this._zoomOut.touchmove(R,B,q)},ha.prototype.touchend=function(R,B,q){var K=this,de=this._zoomIn.touchend(R,B,q),be=this._zoomOut.touchend(R,B,q);return de?(this._active=!0,R.preventDefault(),setTimeout(function(){return K.reset()},0),{cameraAnimation:function(Me){return Me.easeTo({duration:300,zoom:Me.getZoom()+1,around:Me.unproject(de)},{originalEvent:R})}}):be?(this._active=!0,R.preventDefault(),setTimeout(function(){return K.reset()},0),{cameraAnimation:function(Me){return Me.easeTo({duration:300,zoom:Me.getZoom()-1,around:Me.unproject(be)},{originalEvent:R})}}):void 0},ha.prototype.touchcancel=function(){this.reset()},ha.prototype.enable=function(){this._enabled=!0},ha.prototype.disable=function(){this._enabled=!1,this.reset()},ha.prototype.isEnabled=function(){return this._enabled},ha.prototype.isActive=function(){return this._active};var $r=function(R){this.reset(),this._clickTolerance=R.clickTolerance||1};$r.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},$r.prototype._correctButton=function(R,B){return!1},$r.prototype._move=function(R,B){return{}},$r.prototype.mousedown=function(R,B){if(!this._lastPoint){var q=a.mouseButton(R);this._correctButton(R,q)&&(this._lastPoint=B,this._eventButton=q)}},$r.prototype.mousemoveWindow=function(R,B){var q=this._lastPoint;if(q&&(R.preventDefault(),this._moved||!(B.dist(q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=B,this._move(q,B)},$r.prototype.mouseupWindow=function(R){a.mouseButton(R)===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())},$r.prototype.enable=function(){this._enabled=!0},$r.prototype.disable=function(){this._enabled=!1,this.reset()},$r.prototype.isEnabled=function(){return this._enabled},$r.prototype.isActive=function(){return this._active};var wa=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.mousedown=function(q,K){R.prototype.mousedown.call(this,q,K),this._lastPoint&&(this._active=!0)},B.prototype._correctButton=function(q,K){return 0===K&&!q.ctrlKey},B.prototype._move=function(q,K){return{around:K,panDelta:K.sub(q)}},B}($r),ua=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype._correctButton=function(q,K){return 0===K&&q.ctrlKey||2===K},B.prototype._move=function(q,K){var de=.8*(K.x-q.x);if(de)return this._active=!0,{bearingDelta:de}},B.prototype.contextmenu=function(q){q.preventDefault()},B}($r),Ui=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype._correctButton=function(q,K){return 0===K&&q.ctrlKey||2===K},B.prototype._move=function(q,K){var de=-.5*(K.y-q.y);if(de)return this._active=!0,{pitchDelta:de}},B.prototype.contextmenu=function(q){q.preventDefault()},B}($r),Ta=function(R){this._minTouches=1,this._clickTolerance=R.clickTolerance||1,this.reset()};Ta.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Ta.prototype.touchstart=function(R,B,q){return this._calculateTransform(R,B,q)},Ta.prototype.touchmove=function(R,B,q){if(this._active)return R.preventDefault(),this._calculateTransform(R,B,q)},Ta.prototype.touchend=function(R,B,q){this._calculateTransform(R,B,q),this._active&&q.length<this._minTouches&&this.reset()},Ta.prototype.touchcancel=function(){this.reset()},Ta.prototype._calculateTransform=function(R,B,q){q.length>0&&(this._active=!0);var K=ii(q,B),de=new e.Point(0,0),be=new e.Point(0,0),Me=0;for(var Ce in K){var Ne=K[Ce],$e=this._touches[Ce];$e&&(de._add(Ne),be._add(Ne.sub($e)),Me++,K[Ce]=Ne)}if(this._touches=K,!(Me<this._minTouches)&&be.mag()){var at=be.div(Me);if(this._sum._add(at),!(this._sum.mag()<this._clickTolerance))return{around:de.div(Me),panDelta:at}}},Ta.prototype.enable=function(){this._enabled=!0},Ta.prototype.disable=function(){this._enabled=!1,this.reset()},Ta.prototype.isEnabled=function(){return this._enabled},Ta.prototype.isActive=function(){return this._active};var aa=function(){this.reset()};function Za(R,B,q){for(var K=0;K<R.length;K++)if(R[K].identifier===q)return B[K]}function yi(R,B){return Math.log(R/B)/Math.LN2}aa.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},aa.prototype._start=function(R){},aa.prototype._move=function(R,B,q){return{}},aa.prototype.touchstart=function(R,B,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([B[0],B[1]]))},aa.prototype.touchmove=function(R,B,q){if(this._firstTwoTouches){R.preventDefault();var K=this._firstTwoTouches,be=K[1],Me=Za(q,B,K[0]),Ce=Za(q,B,be);if(Me&&Ce){var Ne=this._aroundCenter?null:Me.add(Ce).div(2);return this._move([Me,Ce],Ne,R)}}},aa.prototype.touchend=function(R,B,q){if(this._firstTwoTouches){var K=this._firstTwoTouches,be=K[1],Me=Za(q,B,K[0]),Ce=Za(q,B,be);Me&&Ce||(this._active&&a.suppressClick(),this.reset())}},aa.prototype.touchcancel=function(){this.reset()},aa.prototype.enable=function(R){this._enabled=!0,this._aroundCenter=!!R&&"center"===R.around},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var Oa=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.reset=function(){R.prototype.reset.call(this),delete this._distance,delete this._startDistance},B.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},B.prototype._move=function(q,K){var de=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs(yi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:yi(this._distance,de),pinchAround:K}},B}(aa);function Wo(R,B){return 180*R.angleWith(B)/Math.PI}var Ks=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.reset=function(){R.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},B.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},B.prototype._move=function(q,K){var de=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wo(this._vector,de),pinchAround:K}},B.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var K=25/(Math.PI*this._minDiameter)*360,de=Wo(q,this._startVector);return Math.abs(de)<K},B}(aa);function Js(R){return Math.abs(R.y)>Math.abs(R.x)}var As=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.reset=function(){R.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},B.prototype._start=function(q){this._lastPoints=q,Js(q[0].sub(q[1]))&&(this._valid=!1)},B.prototype._move=function(q,K,de){var be=q[0].sub(this._lastPoints[0]),Me=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(be,Me,de.timeStamp),this._valid)return this._lastPoints=q,this._active=!0,{pitchDelta:(be.y+Me.y)/2*-.5}},B.prototype.gestureBeginsVertically=function(q,K,de){if(void 0!==this._valid)return this._valid;var be=q.mag()>=2,Me=K.mag()>=2;if(be||Me){if(!be||!Me)return void 0===this._firstMove&&(this._firstMove=de),de-this._firstMove<100&&void 0;var Ce=q.y>0==K.y>0;return Js(q)&&Js(K)&&Ce}},B}(aa),Yi={panStep:100,bearingStep:15,pitchStep:10},To=function(){var R=Yi;this._panStep=R.panStep,this._bearingStep=R.bearingStep,this._pitchStep=R.pitchStep};function ls(R){return R*(2-R)}To.prototype.reset=function(){this._active=!1},To.prototype.keydown=function(R){var B=this;if(!(R.altKey||R.ctrlKey||R.metaKey)){var q=0,K=0,de=0,be=0,Me=0;switch(R.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:R.shiftKey?K=-1:(R.preventDefault(),be=-1);break;case 39:R.shiftKey?K=1:(R.preventDefault(),be=1);break;case 38:R.shiftKey?de=1:(R.preventDefault(),Me=-1);break;case 40:R.shiftKey?de=-1:(R.preventDefault(),Me=1);break;default:return}return{cameraAnimation:function(Ce){var Ne=Ce.getZoom();Ce.easeTo({duration:300,easeId:"keyboardHandler",easing:ls,zoom:q?Math.round(Ne)+q*(R.shiftKey?2:1):Ne,bearing:Ce.getBearing()+K*B._bearingStep,pitch:Ce.getPitch()+de*B._pitchStep,offset:[-be*B._panStep,-Me*B._panStep],center:Ce.getCenter()},{originalEvent:R})}}}},To.prototype.enable=function(){this._enabled=!0},To.prototype.disable=function(){this._enabled=!1,this.reset()},To.prototype.isEnabled=function(){return this._enabled},To.prototype.isActive=function(){return this._active};var Ga=function(R,B){this._map=R,this._el=R.getCanvasContainer(),this._handler=B,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ga.prototype.setZoomRate=function(R){this._defaultZoomRate=R},Ga.prototype.setWheelZoomRate=function(R){this._wheelZoomRate=R},Ga.prototype.isEnabled=function(){return!!this._enabled},Ga.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Ga.prototype.isZooming=function(){return!!this._zooming},Ga.prototype.enable=function(R){this.isEnabled()||(this._enabled=!0,this._aroundCenter=R&&"center"===R.around)},Ga.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ga.prototype.wheel=function(R){if(this.isEnabled()){var B=R.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*R.deltaY:R.deltaY,q=e.browser.now(),K=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,0!==B&&B%4.000244140625==0?this._type="wheel":0!==B&&Math.abs(B)<4?this._type="trackpad":K>400?(this._type=null,this._lastValue=B,this._timeout=setTimeout(this._onTimeout,40,R)):this._type||(this._type=Math.abs(K*B)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,B+=this._lastValue)),R.shiftKey&&B&&(B/=4),this._type&&(this._lastWheelEvent=R,this._delta-=B,this._active||this._start(R)),R.preventDefault()}},Ga.prototype._onTimeout=function(R){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(R)},Ga.prototype._start=function(R){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var B=a.mousePos(this._el,R);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(B)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ga.prototype.renderFrame=function(){return this._onScrollFrame()},Ga.prototype._onScrollFrame=function(){var R=this;if(this._frameId&&(this._frameId=null,this.isActive())){var B=this._map.transform;if(0!==this._delta){var q="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,K=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&0!==K&&(K=1/K);var de="number"==typeof this._targetZoom?B.zoomScale(this._targetZoom):B.scale;this._targetZoom=Math.min(B.maxZoom,Math.max(B.minZoom,B.scaleZoom(de*K))),"wheel"===this._type&&(this._startZoom=B.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var be,Me="number"==typeof this._targetZoom?this._targetZoom:B.zoom,Ce=this._startZoom,Ne=this._easing,$e=!1;if("wheel"===this._type&&Ce&&Ne){var at=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),dt=Ne(at);be=e.number(Ce,Me,dt),at<1?this._frameId||(this._frameId=!0):$e=!0}else be=Me,$e=!0;return this._active=!0,$e&&(this._active=!1,this._finishTimeout=setTimeout(function(){R._zooming=!1,R._handler._triggerRenderFrame(),delete R._targetZoom,delete R._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!$e,zoomDelta:be-B.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ga.prototype._smoothOutEasing=function(R){var B=e.ease;if(this._prevEase){var q=this._prevEase,K=(e.browser.now()-q.start)/q.duration,de=q.easing(K+.01)-q.easing(K),be=.27/Math.sqrt(de*de+1e-4)*.01,Me=Math.sqrt(.0729-be*be);B=e.bezier(be,Me,.25,1)}return this._prevEase={start:e.browser.now(),duration:R,easing:B},B},Ga.prototype.reset=function(){this._active=!1};var ga=function(R,B){this._clickZoom=R,this._tapZoom=B};ga.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ga.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ga.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ga.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Yo=function(){this.reset()};Yo.prototype.reset=function(){this._active=!1},Yo.prototype.dblclick=function(R,B){return R.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(R.shiftKey?-1:1),around:q.unproject(B)},{originalEvent:R})}}},Yo.prototype.enable=function(){this._enabled=!0},Yo.prototype.disable=function(){this._enabled=!1,this.reset()},Yo.prototype.isEnabled=function(){return this._enabled},Yo.prototype.isActive=function(){return this._active};var Ja=function(){this._tap=new Vi({numTouches:1,numTaps:1}),this.reset()};Ja.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ja.prototype.touchstart=function(R,B,q){this._swipePoint||(this._tapTime&&R.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=B[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(R,B,q))},Ja.prototype.touchmove=function(R,B,q){if(this._tapTime){if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var K=B[0],de=K.y-this._swipePoint.y;return this._swipePoint=K,R.preventDefault(),this._active=!0,{zoomDelta:de/128}}}else this._tap.touchmove(R,B,q)},Ja.prototype.touchend=function(R,B,q){this._tapTime?this._swipePoint&&0===q.length&&this.reset():this._tap.touchend(R,B,q)&&(this._tapTime=R.timeStamp)},Ja.prototype.touchcancel=function(){this.reset()},Ja.prototype.enable=function(){this._enabled=!0},Ja.prototype.disable=function(){this._enabled=!1,this.reset()},Ja.prototype.isEnabled=function(){return this._enabled},Ja.prototype.isActive=function(){return this._active};var Na=function(R,B,q){this._el=R,this._mousePan=B,this._touchPan=q};Na.prototype.enable=function(R){this._inertiaOptions=R||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Na.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Na.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Na.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Qa=function(R,B,q){this._pitchWithRotate=R.pitchWithRotate,this._mouseRotate=B,this._mousePitch=q};Qa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Qa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Qa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Qa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ms=function(R,B,q,K){this._el=R,this._touchZoom=B,this._touchRotate=q,this._tapDragZoom=K,this._rotationDisabled=!1,this._enabled=!0};ms.prototype.enable=function(R){this._touchZoom.enable(R),this._rotationDisabled||this._touchRotate.enable(R),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ms.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ms.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ms.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ms.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ms.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var sl=function(R){return R.zoom||R.drag||R.pitch||R.rotate},Zo=function(R){function B(){R.apply(this,arguments)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B}(e.Event);function Iu(R){return R.panDelta&&R.panDelta.mag()||R.zoomDelta||R.bearingDelta||R.pitchDelta}var Fo=function(R,B){this._map=R,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Wr(R),this._bearingSnap=B.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(B),e.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!1}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[e.window,"blur",void 0]];for(var K=0,de=this._listeners;K<de.length;K+=1){var be=de[K],Me=be[0];a.addEventListener(Me,be[1],Me===e.window.document?this.handleWindowEvent:this.handleEvent,be[2])}};Fo.prototype.destroy=function(){for(var R=0,B=this._listeners;R<B.length;R+=1){var q=B[R],K=q[0];a.removeEventListener(K,q[1],K===e.window.document?this.handleWindowEvent:this.handleEvent,q[2])}},Fo.prototype._addDefaultHandlers=function(R){var B=this._map,q=B.getCanvasContainer();this._add("mapEvent",new mr(B,R));var K=B.boxZoom=new ei(B,R);this._add("boxZoom",K);var de=new ha,be=new Yo;B.doubleClickZoom=new ga(be,de),this._add("tapZoom",de),this._add("clickZoom",be);var Me=new Ja;this._add("tapDragZoom",Me);var Ce=B.touchPitch=new As;this._add("touchPitch",Ce);var Ne=new ua(R),$e=new Ui(R);B.dragRotate=new Qa(R,Ne,$e),this._add("mouseRotate",Ne,["mousePitch"]),this._add("mousePitch",$e,["mouseRotate"]);var at=new wa(R),dt=new Ta(R);B.dragPan=new Na(q,at,dt),this._add("mousePan",at),this._add("touchPan",dt,["touchZoom","touchRotate"]);var Ot=new Ks,zt=new Oa;B.touchZoomRotate=new ms(q,zt,Ot,Me),this._add("touchRotate",Ot,["touchPan","touchZoom"]),this._add("touchZoom",zt,["touchPan","touchRotate"]);var Rt=B.scrollZoom=new Ga(B,this);this._add("scrollZoom",Rt,["mousePan"]);var Nt=B.keyboard=new To;this._add("keyboard",Nt),this._add("blockableMapEvent",new Di(B));for(var Lt=0,Yt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Lt<Yt.length;Lt+=1){var Gt=Yt[Lt];R.interactive&&R[Gt]&&B[Gt].enable(R[Gt])}},Fo.prototype._add=function(R,B,q){this._handlers.push({handlerName:R,handler:B,allowed:q}),this._handlersById[R]=B},Fo.prototype.stop=function(){if(!this._updatingCamera){for(var R=0,B=this._handlers;R<B.length;R+=1)B[R].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Fo.prototype.isActive=function(){for(var R=0,B=this._handlers;R<B.length;R+=1)if(B[R].handler.isActive())return!0;return!1},Fo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Fo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Fo.prototype.isMoving=function(){return Boolean(sl(this._eventsInProgress))||this.isZooming()},Fo.prototype._blockedByActive=function(R,B,q){for(var K in R)if(K!==q&&(!B||B.indexOf(K)<0))return!0;return!1},Fo.prototype.handleWindowEvent=function(R){this.handleEvent(R,R.type+"Window")},Fo.prototype._getMapTouches=function(R){for(var B=[],q=0,K=R;q<K.length;q+=1){var de=K[q];this._el.contains(de.target)&&B.push(de)}return B},Fo.prototype.handleEvent=function(R,B){if("blur"!==R.type){this._updatingCamera=!0;for(var q="renderFrame"===R.type?void 0:R,K={needsRenderFrame:!1},de={},be={},Me=R.touches?this._getMapTouches(R.touches):void 0,Ce=Me?a.touchPos(this._el,Me):a.mousePos(this._el,R),Ne=0,$e=this._handlers;Ne<$e.length;Ne+=1){var at=$e[Ne],dt=at.handlerName,Ot=at.handler,zt=at.allowed;if(Ot.isEnabled()){var Rt=void 0;this._blockedByActive(be,zt,dt)?Ot.reset():Ot[B||R.type]&&(Rt=Ot[B||R.type](R,Ce,Me),this.mergeHandlerResult(K,de,Rt,dt,q),Rt&&Rt.needsRenderFrame&&this._triggerRenderFrame()),(Rt||Ot.isActive())&&(be[dt]=Ot)}}var Nt={};for(var Lt in this._previousActiveHandlers)be[Lt]||(Nt[Lt]=q);this._previousActiveHandlers=be,(Object.keys(Nt).length||Iu(K))&&(this._changes.push([K,de,Nt]),this._triggerRenderFrame()),(Object.keys(be).length||Iu(K))&&this._map._stop(!0),this._updatingCamera=!1;var Yt=K.cameraAnimation;Yt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Yt(this._map))}else this.stop()},Fo.prototype.mergeHandlerResult=function(R,B,q,K,de){if(q){e.extend(R,q);var be={handlerName:K,originalEvent:q.originalEvent||de};void 0!==q.zoomDelta&&(B.zoom=be),void 0!==q.panDelta&&(B.drag=be),void 0!==q.pitchDelta&&(B.pitch=be),void 0!==q.bearingDelta&&(B.rotate=be)}},Fo.prototype._applyChanges=function(){for(var R={},B={},q={},K=0,de=this._changes;K<de.length;K+=1){var be=de[K],Me=be[0],Ce=be[1],Ne=be[2];Me.panDelta&&(R.panDelta=(R.panDelta||new e.Point(0,0))._add(Me.panDelta)),Me.zoomDelta&&(R.zoomDelta=(R.zoomDelta||0)+Me.zoomDelta),Me.bearingDelta&&(R.bearingDelta=(R.bearingDelta||0)+Me.bearingDelta),Me.pitchDelta&&(R.pitchDelta=(R.pitchDelta||0)+Me.pitchDelta),void 0!==Me.around&&(R.around=Me.around),void 0!==Me.pinchAround&&(R.pinchAround=Me.pinchAround),Me.noInertia&&(R.noInertia=Me.noInertia),e.extend(B,Ce),e.extend(q,Ne)}this._updateMapTransform(R,B,q),this._changes=[]},Fo.prototype._updateMapTransform=function(R,B,q){var K=this._map,de=K.transform;if(!Iu(R))return this._fireEvents(B,q);var be=R.panDelta,Me=R.zoomDelta,Ce=R.bearingDelta,Ne=R.pitchDelta,$e=R.around,at=R.pinchAround;void 0!==at&&($e=at),K._stop(!0),$e=$e||K.transform.centerPoint;var dt=de.pointLocation(be?$e.sub(be):$e);Ce&&(de.bearing+=Ce),Ne&&(de.pitch+=Ne),Me&&(de.zoom+=Me),de.setLocationAtPoint(dt,$e),this._map._update(),R.noInertia||this._inertia.record(R),this._fireEvents(B,q)},Fo.prototype._fireEvents=function(R,B){var q=this,K=sl(this._eventsInProgress),de=sl(R),be={};for(var Me in R)this._eventsInProgress[Me]||(be[Me+"start"]=R[Me].originalEvent),this._eventsInProgress[Me]=R[Me];for(var Ne in!K&&de&&this._fireEvent("movestart",de.originalEvent),be)this._fireEvent(Ne,be[Ne]);for(var $e in R.rotate&&(this._bearingChanged=!0),de&&this._fireEvent("move",de.originalEvent),R)this._fireEvent($e,R[$e].originalEvent);var dt,Ot={};for(var zt in this._eventsInProgress){var Rt=this._eventsInProgress[zt],Nt=Rt.handlerName,Lt=Rt.originalEvent;this._handlersById[Nt].isActive()||(delete this._eventsInProgress[zt],Ot[zt+"end"]=dt=B[Nt]||Lt)}for(var Yt in Ot)this._fireEvent(Yt,Ot[Yt]);var Gt=sl(this._eventsInProgress);if((K||de)&&!Gt){this._updatingCamera=!0;var Xt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),bn=function(En){return 0!==En&&-q._bearingSnap<En&&En<q._bearingSnap};Xt?(bn(Xt.bearing||this._map.getBearing())&&(Xt.bearing=0),this._map.easeTo(Xt,{originalEvent:dt})):(this._map.fire(new e.Event("moveend",{originalEvent:dt})),bn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Fo.prototype._fireEvent=function(R,B){this._map.fire(new e.Event(R,B?{originalEvent:B}:{}))},Fo.prototype._triggerRenderFrame=function(){var R=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(B){delete R._frameId,R.handleEvent(new Zo("renderFrame",{timeStamp:B})),R._applyChanges()}))};var Ll=function(R){function B(q,K){R.call(this),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=K.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},B.prototype.setCenter=function(q,K){return this.jumpTo({center:q},K)},B.prototype.panBy=function(q,K,de){return q=e.Point.convert(q).mult(-1),this.panTo(this.transform.center,e.extend({offset:q},K),de)},B.prototype.panTo=function(q,K,de){return this.easeTo(e.extend({center:q},K),de)},B.prototype.getZoom=function(){return this.transform.zoom},B.prototype.setZoom=function(q,K){return this.jumpTo({zoom:q},K),this},B.prototype.zoomTo=function(q,K,de){return this.easeTo(e.extend({zoom:q},K),de)},B.prototype.zoomIn=function(q,K){return this.zoomTo(this.getZoom()+1,q,K),this},B.prototype.zoomOut=function(q,K){return this.zoomTo(this.getZoom()-1,q,K),this},B.prototype.getBearing=function(){return this.transform.bearing},B.prototype.setBearing=function(q,K){return this.jumpTo({bearing:q},K),this},B.prototype.getPadding=function(){return this.transform.padding},B.prototype.setPadding=function(q,K){return this.jumpTo({padding:q},K),this},B.prototype.rotateTo=function(q,K,de){return this.easeTo(e.extend({bearing:q},K),de)},B.prototype.resetNorth=function(q,K){return this.rotateTo(0,e.extend({duration:1e3},q),K),this},B.prototype.resetNorthPitch=function(q,K){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},q),K),this},B.prototype.snapToNorth=function(q,K){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,K):this},B.prototype.getPitch=function(){return this.transform.pitch},B.prototype.setPitch=function(q,K){return this.jumpTo({pitch:q},K),this},B.prototype.cameraForBounds=function(q,K){return q=e.LngLatBounds.convert(q),this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),0,K)},B.prototype._cameraForBoxAndBearing=function(q,K,de,be){var Me={top:0,bottom:0,right:0,left:0};if("number"==typeof(be=e.extend({padding:Me,offset:[0,0],maxZoom:this.transform.maxZoom},be)).padding){var Ce=be.padding;be.padding={top:Ce,bottom:Ce,right:Ce,left:Ce}}be.padding=e.extend(Me,be.padding);var Ne=this.transform,$e=Ne.padding,at=Ne.project(e.LngLat.convert(q)),dt=Ne.project(e.LngLat.convert(K)),Ot=at.rotate(-de*Math.PI/180),zt=dt.rotate(-de*Math.PI/180),Rt=new e.Point(Math.max(Ot.x,zt.x),Math.max(Ot.y,zt.y)),Nt=new e.Point(Math.min(Ot.x,zt.x),Math.min(Ot.y,zt.y)),Lt=Rt.sub(Nt),Yt=(Ne.width-($e.left+$e.right+be.padding.left+be.padding.right))/Lt.x,Gt=(Ne.height-($e.top+$e.bottom+be.padding.top+be.padding.bottom))/Lt.y;if(!(Gt<0||Yt<0)){var Xt=Math.min(Ne.scaleZoom(Ne.scale*Math.min(Yt,Gt)),be.maxZoom),bn=e.Point.convert(be.offset),Nn=new e.Point(bn.x+(be.padding.left-be.padding.right)/2,bn.y+(be.padding.top-be.padding.bottom)/2).mult(Ne.scale/Ne.zoomScale(Xt));return{center:Ne.unproject(at.add(dt).div(2).sub(Nn)),zoom:Xt,bearing:de}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},B.prototype.fitBounds=function(q,K,de){return this._fitInternal(this.cameraForBounds(q,K),K,de)},B.prototype.fitScreenCoordinates=function(q,K,de,be,Me){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(q)),this.transform.pointLocation(e.Point.convert(K)),de,be),be,Me)},B.prototype._fitInternal=function(q,K,de){return q?(delete(K=e.extend(q,K)).padding,K.linear?this.easeTo(K,de):this.flyTo(K,de)):this},B.prototype.jumpTo=function(q,K){this.stop();var de=this.transform,be=!1,Me=!1,Ce=!1;return"zoom"in q&&de.zoom!==+q.zoom&&(be=!0,de.zoom=+q.zoom),void 0!==q.center&&(de.center=e.LngLat.convert(q.center)),"bearing"in q&&de.bearing!==+q.bearing&&(Me=!0,de.bearing=+q.bearing),"pitch"in q&&de.pitch!==+q.pitch&&(Ce=!0,de.pitch=+q.pitch),null==q.padding||de.isPaddingEqual(q.padding)||(de.padding=q.padding),this.fire(new e.Event("movestart",K)).fire(new e.Event("move",K)),be&&this.fire(new e.Event("zoomstart",K)).fire(new e.Event("zoom",K)).fire(new e.Event("zoomend",K)),Me&&this.fire(new e.Event("rotatestart",K)).fire(new e.Event("rotate",K)).fire(new e.Event("rotateend",K)),Ce&&this.fire(new e.Event("pitchstart",K)).fire(new e.Event("pitch",K)).fire(new e.Event("pitchend",K)),this.fire(new e.Event("moveend",K))},B.prototype.easeTo=function(q,K){var de=this;this._stop(!1,q.easeId),(!1===(q=e.extend({offset:[0,0],duration:500,easing:e.ease},q)).animate||!q.essential&&e.browser.prefersReducedMotion)&&(q.duration=0);var be=this.transform,Me=this.getZoom(),Ce=this.getBearing(),Ne=this.getPitch(),$e=this.getPadding(),at="zoom"in q?+q.zoom:Me,dt="bearing"in q?this._normalizeBearing(q.bearing,Ce):Ce,Ot="pitch"in q?+q.pitch:Ne,zt="padding"in q?q.padding:be.padding,Rt=e.Point.convert(q.offset),Nt=be.centerPoint.add(Rt),Lt=be.pointLocation(Nt),Yt=e.LngLat.convert(q.center||Lt);this._normalizeCenter(Yt);var Gt,Xt,bn=be.project(Lt),En=be.project(Yt).sub(bn),Un=be.zoomScale(at-Me);q.around&&(Gt=e.LngLat.convert(q.around),Xt=be.locationPoint(Gt));var Nn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||at!==Me,this._rotating=this._rotating||Ce!==dt,this._pitching=this._pitching||Ot!==Ne,this._padding=!be.isPaddingEqual(zt),this._easeId=q.easeId,this._prepareEase(K,q.noMoveStart,Nn),clearTimeout(this._easeEndTimeoutID),this._ease(function(yr){if(de._zooming&&(be.zoom=e.number(Me,at,yr)),de._rotating&&(be.bearing=e.number(Ce,dt,yr)),de._pitching&&(be.pitch=e.number(Ne,Ot,yr)),de._padding&&(be.interpolatePadding($e,zt,yr),Nt=be.centerPoint.add(Rt)),Gt)be.setLocationAtPoint(Gt,Xt);else{var vr=be.zoomScale(be.zoom-Me),Pr=at>Me?Math.min(2,Un):Math.max(.5,Un),Ar=Math.pow(Pr,1-yr),fi=be.unproject(bn.add(En.mult(yr*Ar)).mult(vr));be.setLocationAtPoint(be.renderWorldCopies?fi.wrap():fi,Nt)}de._fireMoveEvents(K)},function(yr){de._afterEase(K,yr)},q),this},B.prototype._prepareEase=function(q,K,de){void 0===de&&(de={}),this._moving=!0,K||de.moving||this.fire(new e.Event("movestart",q)),this._zooming&&!de.zooming&&this.fire(new e.Event("zoomstart",q)),this._rotating&&!de.rotating&&this.fire(new e.Event("rotatestart",q)),this._pitching&&!de.pitching&&this.fire(new e.Event("pitchstart",q))},B.prototype._fireMoveEvents=function(q){this.fire(new e.Event("move",q)),this._zooming&&this.fire(new e.Event("zoom",q)),this._rotating&&this.fire(new e.Event("rotate",q)),this._pitching&&this.fire(new e.Event("pitch",q))},B.prototype._afterEase=function(q,K){if(!this._easeId||!K||this._easeId!==K){delete this._easeId;var de=this._zooming,be=this._rotating,Me=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,de&&this.fire(new e.Event("zoomend",q)),be&&this.fire(new e.Event("rotateend",q)),Me&&this.fire(new e.Event("pitchend",q)),this.fire(new e.Event("moveend",q))}},B.prototype.flyTo=function(q,K){var de=this;if(!q.essential&&e.browser.prefersReducedMotion){var be=e.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(be,K)}this.stop(),q=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},q);var Me=this.transform,Ce=this.getZoom(),Ne=this.getBearing(),$e=this.getPitch(),at=this.getPadding(),dt="zoom"in q?e.clamp(+q.zoom,Me.minZoom,Me.maxZoom):Ce,Ot="bearing"in q?this._normalizeBearing(q.bearing,Ne):Ne,zt="pitch"in q?+q.pitch:$e,Rt="padding"in q?q.padding:Me.padding,Nt=Me.zoomScale(dt-Ce),Lt=e.Point.convert(q.offset),Yt=Me.centerPoint.add(Lt),Gt=Me.pointLocation(Yt),Xt=e.LngLat.convert(q.center||Gt);this._normalizeCenter(Xt);var bn=Me.project(Gt),En=Me.project(Xt).sub(bn),Un=q.curve,Nn=Math.max(Me.width,Me.height),yr=Nn/Nt,vr=En.mag();if("minZoom"in q){var Pr=e.clamp(Math.min(q.minZoom,Ce,dt),Me.minZoom,Me.maxZoom),Ar=Nn/Me.zoomScale(Pr-Ce);Un=Math.sqrt(Ar/vr*2)}var fi=Un*Un;function wi(Ai){var Qi=(yr*yr-Nn*Nn+(Ai?-1:1)*fi*fi*vr*vr)/(2*(Ai?yr:Nn)*fi*vr);return Math.log(Math.sqrt(Qi*Qi+1)-Qi)}function Fi(Ai){return(Math.exp(Ai)-Math.exp(-Ai))/2}function ur(Ai){return(Math.exp(Ai)+Math.exp(-Ai))/2}var Hr=wi(0),bi=function(Ai){return ur(Hr)/ur(Hr+Un*Ai)},mi=function(Ai){return Nn*((ur(Hr)*(Fi(Qi=Hr+Un*Ai)/ur(Qi))-Fi(Hr))/fi)/vr;var Qi},Si=(wi(1)-Hr)/Un;if(Math.abs(vr)<1e-6||!isFinite(Si)){if(Math.abs(Nn-yr)<1e-6)return this.easeTo(q,K);var Ri=yr<Nn?-1:1;Si=Math.abs(Math.log(yr/Nn))/Un,mi=function(){return 0},bi=function(Ai){return Math.exp(Ri*Un*Ai)}}return q.duration="duration"in q?+q.duration:1e3*Si/("screenSpeed"in q?+q.screenSpeed/Un:+q.speed),q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=Ne!==Ot,this._pitching=zt!==$e,this._padding=!Me.isPaddingEqual(Rt),this._prepareEase(K,!1),this._ease(function(Ai){var Qi=Ai*Si,Gi=1/bi(Qi);Me.zoom=1===Ai?dt:Ce+Me.scaleZoom(Gi),de._rotating&&(Me.bearing=e.number(Ne,Ot,Ai)),de._pitching&&(Me.pitch=e.number($e,zt,Ai)),de._padding&&(Me.interpolatePadding(at,Rt,Ai),Yt=Me.centerPoint.add(Lt));var ca=1===Ai?Xt:Me.unproject(bn.add(En.mult(mi(Qi))).mult(Gi));Me.setLocationAtPoint(Me.renderWorldCopies?ca.wrap():ca,Yt),de._fireMoveEvents(K)},function(){return de._afterEase(K)},q),this},B.prototype.isEasing=function(){return!!this._easeFrameId},B.prototype.stop=function(){return this._stop()},B.prototype._stop=function(q,K){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var de=this._onEaseEnd;delete this._onEaseEnd,de.call(this,K)}if(!q){var be=this.handlers;be&&be.stop()}return this},B.prototype._ease=function(q,K,de){!1===de.animate||0===de.duration?(q(1),K()):(this._easeStart=e.browser.now(),this._easeOptions=de,this._onEaseFrame=q,this._onEaseEnd=K,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},B.prototype._renderFrameCallback=function(){var q=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},B.prototype._normalizeBearing=function(q,K){q=e.wrap(q,-180,180);var de=Math.abs(q-K);return Math.abs(q-360-K)<de&&(q-=360),Math.abs(q+360-K)<de&&(q+=360),q},B.prototype._normalizeCenter=function(q){var K=this.transform;if(K.renderWorldCopies&&!K.lngRange){var de=q.lng-K.center.lng;q.lng+=de>180?-360:de<-180?360:0}},B}(e.Evented),Wa=function(R){void 0===R&&(R={}),this.options=R,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Wa.prototype.getDefaultPosition=function(){return"bottom-right"},Wa.prototype.onAdd=function(R){var B=this.options&&this.options.compact;return this._map=R,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),B&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===B&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Wa.prototype.onRemove=function(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Wa.prototype._updateEditLink=function(){var R=this._editLink;R||(R=this._editLink=this._container.querySelector(".mapbox-improve-map"));var B=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(R){var q=B.reduce(function(K,de,be){return de.value&&(K+=de.key+"="+de.value+(be<B.length-1?"&":"")),K},"?");R.href=e.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),R.rel="noopener nofollow"}},Wa.prototype._updateData=function(R){!R||"metadata"!==R.sourceDataType&&"style"!==R.dataType||(this._updateAttributions(),this._updateEditLink())},Wa.prototype._updateAttributions=function(){if(this._map.style){var R=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?R=R.concat(this.options.customAttribution.map(function(Ce){return"string"!=typeof Ce?"":Ce})):"string"==typeof this.options.customAttribution&&R.push(this.options.customAttribution)),this._map.style.stylesheet){var B=this._map.style.stylesheet;this.styleOwner=B.owner,this.styleId=B.id}var q=this._map.style.sourceCaches;for(var K in q){var de=q[K];if(de.used){var be=de.getSource();be.attribution&&R.indexOf(be.attribution)<0&&R.push(be.attribution)}}R.sort(function(Ce,Ne){return Ce.length-Ne.length});var Me=(R=R.filter(function(Ce,Ne){for(var $e=Ne+1;$e<R.length;$e++)if(R[$e].indexOf(Ce)>=0)return!1;return!0})).join(" | ");Me!==this._attribHTML&&(this._attribHTML=Me,R.length?(this._innerContainer.innerHTML=Me,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Wa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ml=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Ml.prototype.onAdd=function(R){this._map=R,this._container=a.create("div","mapboxgl-ctrl");var B=a.create("a","mapboxgl-ctrl-logo");return B.target="_blank",B.rel="noopener nofollow",B.href="https://www.mapbox.com/",B.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),B.setAttribute("rel","noopener nofollow"),this._container.appendChild(B),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ml.prototype.onRemove=function(){a.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ml.prototype.getDefaultPosition=function(){return"bottom-left"},Ml.prototype._updateLogo=function(R){R&&"metadata"!==R.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ml.prototype._logoRequired=function(){if(this._map.style){var R=this._map.style.sourceCaches;for(var B in R)if(R[B].getSource().mapbox_logo)return!0;return!1}},Ml.prototype._updateCompact=function(){var R=this._container.children;if(R.length){var B=R[0];this._map.getCanvasContainer().offsetWidth<250?B.classList.add("mapboxgl-compact"):B.classList.remove("mapboxgl-compact")}};var Oi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Oi.prototype.add=function(R){var B=++this._id;return this._queue.push({callback:R,id:B,cancelled:!1}),B},Oi.prototype.remove=function(R){for(var B=this._currentlyRunning,q=0,K=B?this._queue.concat(B):this._queue;q<K.length;q+=1){var de=K[q];if(de.id===R)return void(de.cancelled=!0)}},Oi.prototype.run=function(R){void 0===R&&(R=0);var B=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,K=B;q<K.length;q+=1){var de=K[q];if(!de.cancelled&&(de.callback(R),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Oi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var $i={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ll=e.window.HTMLImageElement,gu=e.window.HTMLElement,ul=e.window.ImageBitmap,Zi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Al=function(R){function B(K){var de=this;if(null!=(K=e.extend({},Zi,K)).minZoom&&null!=K.maxZoom&&K.minZoom>K.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=K.minPitch&&null!=K.maxPitch&&K.minPitch>K.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=K.minPitch&&K.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=K.maxPitch&&K.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var be=new tn(K.minZoom,K.maxZoom,K.minPitch,K.maxPitch,K.renderWorldCopies);if(R.call(this,be,K),this._interactive=K.interactive,this._maxTileCacheSize=K.maxTileCacheSize,this._failIfMajorPerformanceCaveat=K.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=K.preserveDrawingBuffer,this._antialias=K.antialias,this._trackResize=K.trackResize,this._bearingSnap=K.bearingSnap,this._refreshExpiredTiles=K.refreshExpiredTiles,this._fadeDuration=K.fadeDuration,this._crossSourceCollisions=K.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=K.collectResourceTiming,this._renderTaskQueue=new Oi,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},$i,K.locale),this._requestManager=new e.RequestManager(K.transformRequest,K.accessToken),"string"==typeof K.container){if(this._container=e.window.document.getElementById(K.container),!this._container)throw new Error("Container '"+K.container+"' not found.")}else{if(!(K.container instanceof gu))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=K.container}if(K.maxBounds&&this.setMaxBounds(K.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return de._update(!1)}),this.on("moveend",function(){return de._update(!1)}),this.on("zoom",function(){return de._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Fo(this,K),this._hash=K.hash&&new Wn("string"==typeof K.hash&&K.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:K.center,zoom:K.zoom,bearing:K.bearing,pitch:K.pitch}),K.bounds&&(this.resize(),this.fitBounds(K.bounds,e.extend({},K.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=K.localIdeographFontFamily,K.style&&this.setStyle(K.style,{localIdeographFontFamily:K.localIdeographFontFamily}),K.attributionControl&&this.addControl(new Wa({customAttribution:K.customAttribution})),this.addControl(new Ml,K.logoPosition),this.on("style.load",function(){de.transform.unmodified&&de.jumpTo(de.style.stylesheet)}),this.on("data",function(Ce){de._update("style"===Ce.dataType),de.fire(new e.Event(Ce.dataType+"data",Ce))}),this.on("dataloading",function(Ce){de.fire(new e.Event(Ce.dataType+"dataloading",Ce))})}R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B;var q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return B.prototype._getMapId=function(){return this._mapId},B.prototype.addControl=function(K,de){if(void 0===de&&K.getDefaultPosition&&(de=K.getDefaultPosition()),void 0===de&&(de="top-right"),!K||!K.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var be=K.onAdd(this);this._controls.push(K);var Me=this._controlPositions[de];return-1!==de.indexOf("bottom")?Me.insertBefore(be,Me.firstChild):Me.appendChild(be),this},B.prototype.removeControl=function(K){if(!K||!K.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var de=this._controls.indexOf(K);return de>-1&&this._controls.splice(de,1),K.onRemove(this),this},B.prototype.resize=function(K){var de=this._containerDimensions(),be=de[0],Me=de[1];this._resizeCanvas(be,Me),this.transform.resize(be,Me),this.painter.resize(be,Me);var Ce=!this._moving;return Ce&&(this.stop(),this.fire(new e.Event("movestart",K)).fire(new e.Event("move",K))),this.fire(new e.Event("resize",K)),Ce&&this.fire(new e.Event("moveend",K)),this},B.prototype.getBounds=function(){return this.transform.getBounds()},B.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},B.prototype.setMaxBounds=function(K){return this.transform.setMaxBounds(e.LngLatBounds.convert(K)),this._update()},B.prototype.setMinZoom=function(K){if((K=null==K?-2:K)>=-2&&K<=this.transform.maxZoom)return this.transform.minZoom=K,this._update(),this.getZoom()<K&&this.setZoom(K),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},B.prototype.getMinZoom=function(){return this.transform.minZoom},B.prototype.setMaxZoom=function(K){if((K=null==K?22:K)>=this.transform.minZoom)return this.transform.maxZoom=K,this._update(),this.getZoom()>K&&this.setZoom(K),this;throw new Error("maxZoom must be greater than the current minZoom")},B.prototype.getMaxZoom=function(){return this.transform.maxZoom},B.prototype.setMinPitch=function(K){if((K=null==K?0:K)<0)throw new Error("minPitch must be greater than or equal to 0");if(K>=0&&K<=this.transform.maxPitch)return this.transform.minPitch=K,this._update(),this.getPitch()<K&&this.setPitch(K),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},B.prototype.getMinPitch=function(){return this.transform.minPitch},B.prototype.setMaxPitch=function(K){if((K=null==K?60:K)>60)throw new Error("maxPitch must be less than or equal to 60");if(K>=this.transform.minPitch)return this.transform.maxPitch=K,this._update(),this.getPitch()>K&&this.setPitch(K),this;throw new Error("maxPitch must be greater than the current minPitch")},B.prototype.getMaxPitch=function(){return this.transform.maxPitch},B.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},B.prototype.setRenderWorldCopies=function(K){return this.transform.renderWorldCopies=K,this._update()},B.prototype.project=function(K){return this.transform.locationPoint(e.LngLat.convert(K))},B.prototype.unproject=function(K){return this.transform.pointLocation(e.Point.convert(K))},B.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},B.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},B.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},B.prototype._createDelegatedListener=function(K,de,be){var Me,Ce=this;if("mouseenter"===K||"mouseover"===K){var Ne=!1;return{layer:de,listener:be,delegates:{mousemove:function(at){var dt=Ce.getLayer(de)?Ce.queryRenderedFeatures(at.point,{layers:[de]}):[];dt.length?Ne||(Ne=!0,be.call(Ce,new si(K,Ce,at.originalEvent,{features:dt}))):Ne=!1},mouseout:function(){Ne=!1}}}}if("mouseleave"===K||"mouseout"===K){var $e=!1;return{layer:de,listener:be,delegates:{mousemove:function(at){(Ce.getLayer(de)?Ce.queryRenderedFeatures(at.point,{layers:[de]}):[]).length?$e=!0:$e&&($e=!1,be.call(Ce,new si(K,Ce,at.originalEvent)))},mouseout:function(at){$e&&($e=!1,be.call(Ce,new si(K,Ce,at.originalEvent)))}}}}return{layer:de,listener:be,delegates:(Me={},Me[K]=function(at){var dt=Ce.getLayer(de)?Ce.queryRenderedFeatures(at.point,{layers:[de]}):[];dt.length&&(at.features=dt,be.call(Ce,at),delete at.features)},Me)}},B.prototype.on=function(K,de,be){if(void 0===be)return R.prototype.on.call(this,K,de);var Me=this._createDelegatedListener(K,de,be);for(var Ce in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[K]=this._delegatedListeners[K]||[],this._delegatedListeners[K].push(Me),Me.delegates)this.on(Ce,Me.delegates[Ce]);return this},B.prototype.once=function(K,de,be){if(void 0===be)return R.prototype.once.call(this,K,de);var Me=this._createDelegatedListener(K,de,be);for(var Ce in Me.delegates)this.once(Ce,Me.delegates[Ce]);return this},B.prototype.off=function(K,de,be){var Me=this;return void 0===be?R.prototype.off.call(this,K,de):(this._delegatedListeners&&this._delegatedListeners[K]&&function(Ce){for(var Ne=Ce[K],$e=0;$e<Ne.length;$e++){var at=Ne[$e];if(at.layer===de&&at.listener===be){for(var dt in at.delegates)Me.off(dt,at.delegates[dt]);return Ne.splice($e,1),Me}}}(this._delegatedListeners),this)},B.prototype.queryRenderedFeatures=function(K,de){if(!this.style)return[];var be;if(void 0!==de||void 0===K||K instanceof e.Point||Array.isArray(K)||(de=K,K=void 0),de=de||{},(K=K||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof K[0])be=[e.Point.convert(K)];else{var Me=e.Point.convert(K[0]),Ce=e.Point.convert(K[1]);be=[Me,new e.Point(Ce.x,Me.y),Ce,new e.Point(Me.x,Ce.y),Me]}return this.style.queryRenderedFeatures(be,de,this.transform)},B.prototype.querySourceFeatures=function(K,de){return this.style.querySourceFeatures(K,de)},B.prototype.setStyle=function(K,de){return!1!==(de=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},de)).diff&&de.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&K?(this._diffStyle(K,de),this):(this._localIdeographFontFamily=de.localIdeographFontFamily,this._updateStyle(K,de))},B.prototype._getUIString=function(K){var de=this._locale[K];if(null==de)throw new Error("Missing UI string '"+K+"'");return de},B.prototype._updateStyle=function(K,de){return this.style&&(this.style.setEventedParent(null),this.style._remove()),K?(this.style=new Ur(this,de||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof K?this.style.loadURL(K):this.style.loadJSON(K),this):(delete this.style,this)},B.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ur(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},B.prototype._diffStyle=function(K,de){var be=this;if("string"==typeof K){var Me=this._requestManager.normalizeStyleURL(K),Ce=this._requestManager.transformRequest(Me,e.ResourceType.Style);e.getJSON(Ce,function(Ne,$e){Ne?be.fire(new e.ErrorEvent(Ne)):$e&&be._updateDiff($e,de)})}else"object"==typeof K&&this._updateDiff(K,de)},B.prototype._updateDiff=function(K,de){try{this.style.setState(K)&&this._update(!0)}catch(be){e.warnOnce("Unable to perform style diff: "+(be.message||be.error||be)+".  Rebuilding the style from scratch."),this._updateStyle(K,de)}},B.prototype.getStyle=function(){if(this.style)return this.style.serialize()},B.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},B.prototype.addSource=function(K,de){return this._lazyInitEmptyStyle(),this.style.addSource(K,de),this._update(!0)},B.prototype.isSourceLoaded=function(K){var de=this.style&&this.style.sourceCaches[K];if(void 0!==de)return de.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+K+"'")))},B.prototype.areTilesLoaded=function(){var K=this.style&&this.style.sourceCaches;for(var de in K){var be=K[de]._tiles;for(var Me in be){var Ce=be[Me];if("loaded"!==Ce.state&&"errored"!==Ce.state)return!1}}return!0},B.prototype.addSourceType=function(K,de,be){return this._lazyInitEmptyStyle(),this.style.addSourceType(K,de,be)},B.prototype.removeSource=function(K){return this.style.removeSource(K),this._update(!0)},B.prototype.getSource=function(K){return this.style.getSource(K)},B.prototype.addImage=function(K,de,be){void 0===be&&(be={});var Me=be.pixelRatio;void 0===Me&&(Me=1);var Ce=be.sdf;void 0===Ce&&(Ce=!1);var Ne=be.stretchX,$e=be.stretchY,at=be.content;if(this._lazyInitEmptyStyle(),de instanceof ll||ul&&de instanceof ul){var dt=e.browser.getImageData(de);this.style.addImage(K,{data:new e.RGBAImage({width:dt.width,height:dt.height},dt.data),pixelRatio:Me,stretchX:Ne,stretchY:$e,content:at,sdf:Ce,version:0})}else{if(void 0===de.width||void 0===de.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Gt=de;this.style.addImage(K,{data:new e.RGBAImage({width:de.width,height:de.height},new Uint8Array(de.data)),pixelRatio:Me,stretchX:Ne,stretchY:$e,content:at,sdf:Ce,version:0,userImage:Gt}),Gt.onAdd&&Gt.onAdd(this,K)}},B.prototype.updateImage=function(K,de){var be=this.style.getImage(K);if(!be)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Me=de instanceof ll||ul&&de instanceof ul?e.browser.getImageData(de):de,Ce=Me.width,Ne=Me.height,$e=Me.data;return void 0===Ce||void 0===Ne?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Ce!==be.data.width||Ne!==be.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(be.data.replace($e,!(de instanceof ll||ul&&de instanceof ul)),void this.style.updateImage(K,be))},B.prototype.hasImage=function(K){return K?!!this.style.getImage(K):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},B.prototype.removeImage=function(K){this.style.removeImage(K)},B.prototype.loadImage=function(K,de){e.getImage(this._requestManager.transformRequest(K,e.ResourceType.Image),de)},B.prototype.listImages=function(){return this.style.listImages()},B.prototype.addLayer=function(K,de){return this._lazyInitEmptyStyle(),this.style.addLayer(K,de),this._update(!0)},B.prototype.moveLayer=function(K,de){return this.style.moveLayer(K,de),this._update(!0)},B.prototype.removeLayer=function(K){return this.style.removeLayer(K),this._update(!0)},B.prototype.getLayer=function(K){return this.style.getLayer(K)},B.prototype.setLayerZoomRange=function(K,de,be){return this.style.setLayerZoomRange(K,de,be),this._update(!0)},B.prototype.setFilter=function(K,de,be){return void 0===be&&(be={}),this.style.setFilter(K,de,be),this._update(!0)},B.prototype.getFilter=function(K){return this.style.getFilter(K)},B.prototype.setPaintProperty=function(K,de,be,Me){return void 0===Me&&(Me={}),this.style.setPaintProperty(K,de,be,Me),this._update(!0)},B.prototype.getPaintProperty=function(K,de){return this.style.getPaintProperty(K,de)},B.prototype.setLayoutProperty=function(K,de,be,Me){return void 0===Me&&(Me={}),this.style.setLayoutProperty(K,de,be,Me),this._update(!0)},B.prototype.getLayoutProperty=function(K,de){return this.style.getLayoutProperty(K,de)},B.prototype.setLight=function(K,de){return void 0===de&&(de={}),this._lazyInitEmptyStyle(),this.style.setLight(K,de),this._update(!0)},B.prototype.getLight=function(){return this.style.getLight()},B.prototype.setFeatureState=function(K,de){return this.style.setFeatureState(K,de),this._update()},B.prototype.removeFeatureState=function(K,de){return this.style.removeFeatureState(K,de),this._update()},B.prototype.getFeatureState=function(K){return this.style.getFeatureState(K)},B.prototype.getContainer=function(){return this._container},B.prototype.getCanvasContainer=function(){return this._canvasContainer},B.prototype.getCanvas=function(){return this._canvas},B.prototype._containerDimensions=function(){var K=0,de=0;return this._container&&(K=this._container.clientWidth||400,de=this._container.clientHeight||300),[K,de]},B.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},B.prototype._setupContainer=function(){var K=this._container;K.classList.add("mapboxgl-map"),(this._missingCSSCanary=a.create("div","mapboxgl-canary",K)).style.visibility="hidden",this._detectMissingCSS();var de=this._canvasContainer=a.create("div","mapboxgl-canvas-container",K);this._interactive&&de.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",de),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var be=this._containerDimensions();this._resizeCanvas(be[0],be[1]);var Me=this._controlContainer=a.create("div","mapboxgl-control-container",K),Ce=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ne){Ce[Ne]=a.create("div","mapboxgl-ctrl-"+Ne,Me)})},B.prototype._resizeCanvas=function(K,de){var be=e.browser.devicePixelRatio||1;this._canvas.width=be*K,this._canvas.height=be*de,this._canvas.style.width=K+"px",this._canvas.style.height=de+"px"},B.prototype._setupPainter=function(){var K=e.extend({},o.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),de=this._canvas.getContext("webgl",K)||this._canvas.getContext("experimental-webgl",K);de?(this.painter=new xa(de,this.transform),e.webpSupported.testSupport(de)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},B.prototype._contextLost=function(K){K.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:K}))},B.prototype._contextRestored=function(K){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:K}))},B.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},B.prototype._update=function(K){return this.style?(this._styleDirty=this._styleDirty||K,this._sourcesDirty=!0,this.triggerRepaint(),this):this},B.prototype._requestRenderFrame=function(K){return this._update(),this._renderTaskQueue.add(K)},B.prototype._cancelRenderFrame=function(K){this._renderTaskQueue.remove(K)},B.prototype._render=function(K){var de,be=this,Me=0,Ce=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(de=Ce.createQueryEXT(),Ce.beginQueryEXT(Ce.TIME_ELAPSED_EXT,de),Me=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(K),!this._removed){var Ne=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var $e=this.transform.zoom,at=e.browser.now();this.style.zoomHistory.update($e,at);var dt=new e.EvaluationParameters($e,{now:at,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ot=dt.crossFadingFactor();1===Ot&&Ot===this._crossFadingFactor||(Ne=!0,this._crossFadingFactor=Ot),this.style.update(dt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Ne)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var zt=e.browser.now()-Me;Ce.endQueryEXT(Ce.TIME_ELAPSED_EXT,de),setTimeout(function(){var Nt=Ce.getQueryObjectEXT(de,Ce.QUERY_RESULT_EXT)/1e6;Ce.deleteQueryEXT(de),be.fire(new e.Event("gpu-timing-frame",{cpuTime:zt,gpuTime:Nt}))},50)}if(this.listens("gpu-timing-layer")){var Rt=this.painter.collectGpuTimers();setTimeout(function(){var Nt=be.painter.queryGpuTimers(Rt);be.fire(new e.Event("gpu-timing-layer",{layerTimes:Nt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},B.prototype.remove=function(){this._hash&&this._hash.remove();for(var K=0,de=this._controls;K<de.length;K+=1)de[K].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var be=this.painter.context.gl.getExtension("WEBGL_lose_context");be&&be.loseContext(),pc(this._canvasContainer),pc(this._controlContainer),pc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},B.prototype.triggerRepaint=function(){var K=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(de){K._frame=null,K._render(de)}))},B.prototype._onWindowOnline=function(){this._update()},B.prototype._onWindowResize=function(K){this._trackResize&&this.resize({originalEvent:K})._update()},q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},q.showTileBoundaries.set=function(K){this._showTileBoundaries!==K&&(this._showTileBoundaries=K,this._update())},q.showPadding.get=function(){return!!this._showPadding},q.showPadding.set=function(K){this._showPadding!==K&&(this._showPadding=K,this._update())},q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},q.showCollisionBoxes.set=function(K){this._showCollisionBoxes!==K&&(this._showCollisionBoxes=K,K?this.style._generateCollisionBoxes():this._update())},q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},q.showOverdrawInspector.set=function(K){this._showOverdrawInspector!==K&&(this._showOverdrawInspector=K,this._update())},q.repaint.get=function(){return!!this._repaint},q.repaint.set=function(K){this._repaint!==K&&(this._repaint=K,this.triggerRepaint())},q.vertices.get=function(){return!!this._vertices},q.vertices.set=function(K){this._vertices=K,this._update()},B.prototype._setCacheLimits=function(K,de){e.setCacheLimits(K,de)},q.version.get=function(){return e.version},Object.defineProperties(B.prototype,q),B}(Ll);function pc(R){R.parentNode&&R.parentNode.removeChild(R)}var mu={showCompass:!0,showZoom:!0,visualizePitch:!1},Ba=function(R){var B=this;this.options=e.extend({},mu,R),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return B._map.zoomIn({},{originalEvent:q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return B._map.zoomOut({},{originalEvent:q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){B.options.visualizePitch?B._map.resetNorthPitch({},{originalEvent:q}):B._map.resetNorth({},{originalEvent:q})}),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ba.prototype._updateZoomButtons=function(){var R=this._map.getZoom();this._zoomInButton.disabled=R===this._map.getMaxZoom(),this._zoomOutButton.disabled=R===this._map.getMinZoom()},Ba.prototype._rotateCompassArrow=function(){var R=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=R},Ba.prototype.onAdd=function(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Xa(this._map,this._compass,this.options.visualizePitch)),this._container},Ba.prototype.onRemove=function(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ba.prototype._createButton=function(R,B){var q=a.create("button",R,this._container);return q.type="button",q.addEventListener("click",B),q},Ba.prototype._setButtonTitle=function(R,B){var q=this._map._getUIString("NavigationControl."+B);R.title=q,R.setAttribute("aria-label",q)};var Xa=function(R,B,q){void 0===q&&(q=!1),this._clickTolerance=10,this.element=B,this.mouseRotate=new ua({clickTolerance:R.dragRotate._mouseRotate._clickTolerance}),this.map=R,q&&(this.mousePitch=new Ui({clickTolerance:R.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(B,"mousedown",this.mousedown),a.addEventListener(B,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(B,"touchmove",this.touchmove),a.addEventListener(B,"touchend",this.touchend),a.addEventListener(B,"touchcancel",this.reset)};function Zl(R,B,q){if(R=new e.LngLat(R.lng,R.lat),B){var K=new e.LngLat(R.lng-360,R.lat),de=new e.LngLat(R.lng+360,R.lat),be=q.locationPoint(R).distSqr(B);q.locationPoint(K).distSqr(B)<be?R=K:q.locationPoint(de).distSqr(B)<be&&(R=de)}for(;Math.abs(R.lng-q.center.lng)>180;){var Me=q.locationPoint(R);if(Me.x>=0&&Me.y>=0&&Me.x<=q.width&&Me.y<=q.height)break;R.lng>q.center.lng?R.lng-=360:R.lng+=360}return R}Xa.prototype.down=function(R,B){this.mouseRotate.mousedown(R,B),this.mousePitch&&this.mousePitch.mousedown(R,B),a.disableDrag()},Xa.prototype.move=function(R,B){var q=this.map,K=this.mouseRotate.mousemoveWindow(R,B);if(K&&K.bearingDelta&&q.setBearing(q.getBearing()+K.bearingDelta),this.mousePitch){var de=this.mousePitch.mousemoveWindow(R,B);de&&de.pitchDelta&&q.setPitch(q.getPitch()+de.pitchDelta)}},Xa.prototype.off=function(){var R=this.element;a.removeEventListener(R,"mousedown",this.mousedown),a.removeEventListener(R,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(R,"touchmove",this.touchmove),a.removeEventListener(R,"touchend",this.touchend),a.removeEventListener(R,"touchcancel",this.reset),this.offTemp()},Xa.prototype.offTemp=function(){a.enableDrag(),a.removeEventListener(e.window,"mousemove",this.mousemove),a.removeEventListener(e.window,"mouseup",this.mouseup)},Xa.prototype.mousedown=function(R){this.down(e.extend({},R,{ctrlKey:!0,preventDefault:function(){return R.preventDefault()}}),a.mousePos(this.element,R)),a.addEventListener(e.window,"mousemove",this.mousemove),a.addEventListener(e.window,"mouseup",this.mouseup)},Xa.prototype.mousemove=function(R){this.move(R,a.mousePos(this.element,R))},Xa.prototype.mouseup=function(R){this.mouseRotate.mouseupWindow(R),this.mousePitch&&this.mousePitch.mouseupWindow(R),this.offTemp()},Xa.prototype.touchstart=function(R){1!==R.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,R.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return R.preventDefault()}},this._startPos))},Xa.prototype.touchmove=function(R){1!==R.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,R.targetTouches)[0],this.move({preventDefault:function(){return R.preventDefault()}},this._lastPos))},Xa.prototype.touchend=function(R){0===R.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Xa.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Vl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qr(R,B,q){var K=R.classList;for(var de in Vl)K.remove("mapboxgl-"+q+"-anchor-"+de);K.add("mapboxgl-"+q+"-anchor-"+B)}var Sa,vu=function(R){function B(q,K){var de=this;if(R.call(this),(q instanceof e.window.HTMLElement||K)&&(q=e.extend({element:q},K)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._draggable=q&&q.draggable||!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&"auto"!==q.pitchAlignment?q.pitchAlignment:this._rotationAlignment,q&&q.element)this._element=q.element,this._offset=e.Point.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");var be=a.createNS("http://www.w3.org/2000/svg","svg");be.setAttributeNS(null,"display","block"),be.setAttributeNS(null,"height","41px"),be.setAttributeNS(null,"width","27px"),be.setAttributeNS(null,"viewBox","0 0 27 41");var Me=a.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"stroke","none"),Me.setAttributeNS(null,"stroke-width","1"),Me.setAttributeNS(null,"fill","none"),Me.setAttributeNS(null,"fill-rule","evenodd");var Ce=a.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"fill-rule","nonzero");var Ne=a.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ne.setAttributeNS(null,"fill","#000000");for(var $e=0,at=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];$e<at.length;$e+=1){var dt=at[$e],Ot=a.createNS("http://www.w3.org/2000/svg","ellipse");Ot.setAttributeNS(null,"opacity","0.04"),Ot.setAttributeNS(null,"cx","10.5"),Ot.setAttributeNS(null,"cy","5.80029008"),Ot.setAttributeNS(null,"rx",dt.rx),Ot.setAttributeNS(null,"ry",dt.ry),Ne.appendChild(Ot)}var zt=a.createNS("http://www.w3.org/2000/svg","g");zt.setAttributeNS(null,"fill",this._color);var Rt=a.createNS("http://www.w3.org/2000/svg","path");Rt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),zt.appendChild(Rt);var Nt=a.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"opacity","0.25"),Nt.setAttributeNS(null,"fill","#000000");var Lt=a.createNS("http://www.w3.org/2000/svg","path");Lt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Nt.appendChild(Lt);var Yt=a.createNS("http://www.w3.org/2000/svg","g");Yt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Yt.setAttributeNS(null,"fill","#FFFFFF");var Gt=a.createNS("http://www.w3.org/2000/svg","g");Gt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Xt=a.createNS("http://www.w3.org/2000/svg","circle");Xt.setAttributeNS(null,"fill","#000000"),Xt.setAttributeNS(null,"opacity","0.25"),Xt.setAttributeNS(null,"cx","5.5"),Xt.setAttributeNS(null,"cy","5.5"),Xt.setAttributeNS(null,"r","5.4999962");var bn=a.createNS("http://www.w3.org/2000/svg","circle");bn.setAttributeNS(null,"fill","#FFFFFF"),bn.setAttributeNS(null,"cx","5.5"),bn.setAttributeNS(null,"cy","5.5"),bn.setAttributeNS(null,"r","5.4999962"),Gt.appendChild(Xt),Gt.appendChild(bn),Ce.appendChild(Ne),Ce.appendChild(zt),Ce.appendChild(Nt),Ce.appendChild(Yt),Ce.appendChild(Gt),be.appendChild(Ce),this._element.appendChild(be),this._offset=e.Point.convert(q&&q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(En){En.preventDefault()}),this._element.addEventListener("mousedown",function(En){En.preventDefault()}),this._element.addEventListener("focus",function(){var En=de._map.getContainer();En.scrollTop=0,En.scrollLeft=0}),qr(this._element,this._anchor,"marker"),this._popup=null}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},B.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this},B.prototype.getLngLat=function(){return this._lngLat},B.prototype.setLngLat=function(q){return this._lngLat=e.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},B.prototype.getElement=function(){return this._element},B.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var K=Math.sqrt(Math.pow(13.5,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[K,-1*(24.6+K)],"bottom-right":[-K,-1*(24.6+K)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},B.prototype._onKeyPress=function(q){var K=q.code,de=q.charCode||q.keyCode;"Space"!==K&&"Enter"!==K&&32!==de&&13!==de||this.togglePopup()},B.prototype._onMapClick=function(q){var K=q.originalEvent.target,de=this._element;this._popup&&(K===de||de.contains(K))&&this.togglePopup()},B.prototype.getPopup=function(){return this._popup},B.prototype.togglePopup=function(){var q=this._popup;return q?(q.isOpen()?q.remove():q.addTo(this._map),this):this},B.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Zl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var K="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?K="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(K="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var de="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?de="rotateX(0deg)":"map"===this._pitchAlignment&&(de="rotateX("+this._map.getPitch()+"deg)"),q&&"moveend"!==q.type||(this._pos=this._pos.round()),a.setTransform(this._element,Vl[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+de+" "+K)}},B.prototype.getOffset=function(){return this._offset},B.prototype.setOffset=function(q){return this._offset=e.Point.convert(q),this._update(),this},B.prototype._onMove=function(q){this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},B.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},B.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},B.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},B.prototype.isDraggable=function(){return this._draggable},B.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},B.prototype.getRotation=function(){return this._rotation},B.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},B.prototype.getRotationAlignment=function(){return this._rotationAlignment},B.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&"auto"!==q?q:this._rotationAlignment,this._update(),this},B.prototype.getPitchAlignment=function(){return this._pitchAlignment},B}(e.Evented),Io={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},iu=0,Qs=!1,cl=function(R){function B(q){R.call(this),this.options=e.extend({},Io,q),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.onAdd=function(q){var K;return this._map=q,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),K=this._setupUI,void 0!==Sa?K(Sa):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(de){K(Sa="denied"!==de.state)}):K(Sa=!!e.window.navigator.geolocation),this._container},B.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,iu=0,Qs=!1},B.prototype._isOutOfMapMaxBounds=function(q){var K=this._map.getMaxBounds(),de=q.coords;return K&&(de.longitude<K.getWest()||de.longitude>K.getEast()||de.latitude<K.getSouth()||de.latitude>K.getNorth())},B.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},B.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(q),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",q)),this._finish()}},B.prototype._updateCamera=function(q){var K=new e.LngLat(q.coords.longitude,q.coords.latitude),de=q.coords.accuracy,be=this._map.getBearing(),Me=e.extend({bearing:be},this.options.fitBoundsOptions);this._map.fitBounds(K.toBounds(de),Me,{geolocateSource:!0})},B.prototype._updateMarker=function(q){if(q){var K=new e.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(K).addTo(this._map),this._userLocationDotMarker.setLngLat(K).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},B.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,K=this._map.unproject([0,q]),de=this._map.unproject([1,q]),be=K.distanceTo(de),Me=Math.ceil(2*this._accuracy/be);this._circleElement.style.width=Me+"px",this._circleElement.style.height=Me+"px"},B.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},B.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(1===q.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var K=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=K,this._geolocateButton.setAttribute("aria-label",K),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===q.code&&Qs)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",q)),this._finish()}},B.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},B.prototype._setupUI=function(q){var K=this;if(this._container.addEventListener("contextmenu",function(Me){return Me.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===q){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var de=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=de,this._geolocateButton.setAttribute("aria-label",de)}else{var be=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=be,this._geolocateButton.setAttribute("aria-label",be)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new vu(this._dotElement),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Me){Me.geolocateSource||"ACTIVE_LOCK"!==K._watchState||Me.originalEvent&&"resize"===Me.originalEvent.type||(K._watchState="BACKGROUND",K._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),K._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),K.fire(new e.Event("trackuserlocationend")))})},B.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":iu--,Qs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++iu>1?(q={maximumAge:6e5,timeout:0},Qs=!0):(q=this.options.positionOptions,Qs=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},B.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},B}(e.Evented),Zu={maxWidth:100,unit:"metric"},Pl=function(R){this.options=e.extend({},Zu,R),e.bindAll(["_onMove","setUnit"],this)};function Nc(R,B,q){var K=q&&q.maxWidth||100,de=R._container.clientHeight/2,be=R.unproject([0,de]),Me=R.unproject([K,de]),Ce=be.distanceTo(Me);if(q&&"imperial"===q.unit){var Ne=3.2808*Ce;Ne>5280?yu(B,K,Ne/5280,R._getUIString("ScaleControl.Miles")):yu(B,K,Ne,R._getUIString("ScaleControl.Feet"))}else q&&"nautical"===q.unit?yu(B,K,Ce/1852,R._getUIString("ScaleControl.NauticalMiles")):Ce>=1e3?yu(B,K,Ce/1e3,R._getUIString("ScaleControl.Kilometers")):yu(B,K,Ce,R._getUIString("ScaleControl.Meters"))}function yu(R,B,q,K){var de,be,Me,$e,at,Ce=(de=q,(be=Math.pow(10,(""+Math.floor(de)).length-1))*(Me=(Me=de/be)>=10?10:Me>=5?5:Me>=3?3:Me>=2?2:Me>=1?1:($e=Me,at=Math.pow(10,Math.ceil(-Math.log($e)/Math.LN10)),Math.round($e*at)/at)));R.style.width=B*(Ce/q)+"px",R.innerHTML=Ce+"&nbsp;"+K}Pl.prototype.getDefaultPosition=function(){return"bottom-left"},Pl.prototype._onMove=function(){Nc(this._map,this._container,this.options)},Pl.prototype.onAdd=function(R){return this._map=R,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Pl.prototype.onRemove=function(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Pl.prototype.setUnit=function(R){this.options.unit=R,Nc(this._map,this._container,this.options)};var Xo=function(R){this._fullscreen=!1,R&&R.container&&(R.container instanceof e.window.HTMLElement?this._container=R.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Xo.prototype.onAdd=function(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Xo.prototype.onRemove=function(){a.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Xo.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Xo.prototype._setupUI=function(){var R=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",R).setAttribute("aria-hidden",!0),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Xo.prototype._updateTitle=function(){var R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R},Xo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Xo.prototype._isFullscreen=function(){return this._fullscreen},Xo.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Xo.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Lu={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ks=function(R){function B(q){R.call(this),this.options=e.extend(Object.create(Lu),q),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return R&&(B.__proto__=R),(B.prototype=Object.create(R&&R.prototype)).constructor=B,B.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},B.prototype.isOpen=function(){return!!this._map},B.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},B.prototype.getLngLat=function(){return this._lngLat},B.prototype.setLngLat=function(q){return this._lngLat=e.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},B.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},B.prototype.getElement=function(){return this._container},B.prototype.setText=function(q){return this.setDOMContent(e.window.document.createTextNode(q))},B.prototype.setHTML=function(q){var K,de=e.window.document.createDocumentFragment(),be=e.window.document.createElement("body");for(be.innerHTML=q;K=be.firstChild;)de.appendChild(K);return this.setDOMContent(de)},B.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},B.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},B.prototype.setDOMContent=function(q){return this._createContent(),this._content.appendChild(q),this._update(),this},B.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},B.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},B.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},B.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},B.prototype._onMouseUp=function(q){this._update(q.point)},B.prototype._onMouseMove=function(q){this._update(q.point)},B.prototype._onDrag=function(q){this._update(q.point)},B.prototype._update=function(q){var K=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ot){return K._container.classList.add(Ot)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Zl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||q)){var be=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),Me=this.options.anchor,Ce=function Ot(zt){if(zt){if("number"==typeof zt){var Rt=Math.round(Math.sqrt(.5*Math.pow(zt,2)));return{center:new e.Point(0,0),top:new e.Point(0,zt),"top-left":new e.Point(Rt,Rt),"top-right":new e.Point(-Rt,Rt),bottom:new e.Point(0,-zt),"bottom-left":new e.Point(Rt,-Rt),"bottom-right":new e.Point(-Rt,-Rt),left:new e.Point(zt,0),right:new e.Point(-zt,0)}}if(zt instanceof e.Point||Array.isArray(zt)){var Nt=e.Point.convert(zt);return{center:Nt,top:Nt,"top-left":Nt,"top-right":Nt,bottom:Nt,"bottom-left":Nt,"bottom-right":Nt,left:Nt,right:Nt}}return{center:e.Point.convert(zt.center||[0,0]),top:e.Point.convert(zt.top||[0,0]),"top-left":e.Point.convert(zt["top-left"]||[0,0]),"top-right":e.Point.convert(zt["top-right"]||[0,0]),bottom:e.Point.convert(zt.bottom||[0,0]),"bottom-left":e.Point.convert(zt["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(zt["bottom-right"]||[0,0]),left:e.Point.convert(zt.left||[0,0]),right:e.Point.convert(zt.right||[0,0])}}return Ot(new e.Point(0,0))}(this.options.offset);if(!Me){var Ne,$e=this._container.offsetWidth,at=this._container.offsetHeight;Ne=be.y+Ce.bottom.y<at?["top"]:be.y>this._map.transform.height-at?["bottom"]:[],be.x<$e/2?Ne.push("left"):be.x>this._map.transform.width-$e/2&&Ne.push("right"),Me=0===Ne.length?"bottom":Ne.join("-")}var dt=be.add(Ce[Me]).round();a.setTransform(this._container,Vl[Me]+" translate("+dt.x+"px,"+dt.y+"px)"),qr(this._container,Me,"popup")}},B.prototype._onClose=function(){this.remove()},B}(e.Evented),ve={version:e.version,supported:o,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Al,NavigationControl:Ba,GeolocateControl:cl,AttributionControl:Wa,ScaleControl:Pl,FullscreenControl:Xo,Popup:ks,Marker:vu,Style:Ur,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){vt().acquire(bt)},clearPrewarmedResources:function(){var R=Ut;R&&(R.isPreloaded()&&1===R.numActive()?(R.release(bt),Ut=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(R){e.config.ACCESS_TOKEN=R},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(R){e.config.API_URL=R},get workerCount(){return wt.workerCount},set workerCount(R){wt.workerCount=R},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(R){e.config.MAX_PARALLEL_IMAGE_REQUESTS=R},clearStorage:function(R){e.clearTileCache(R)},workerUrl:""};return ve}),T},"object"==typeof le&&void 0!==ue?ue.exports=b():(y=y||self).mapboxgl=b()},{}],240:[function(x,ue,le){"use strict";ue.exports=Math.log2||function(y){return Math.log(y)*Math.LOG2E}},{}],241:[function(x,ue,le){"use strict";ue.exports=function(b,T){T||(T=b,b=window);var _=0,e=0,o=0,a={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function i(w){var c=!1;return"altKey"in w&&(c=c||w.altKey!==a.alt,a.alt=!!w.altKey),"shiftKey"in w&&(c=c||w.shiftKey!==a.shift,a.shift=!!w.shiftKey),"ctrlKey"in w&&(c=c||w.ctrlKey!==a.control,a.control=!!w.ctrlKey),"metaKey"in w&&(c=c||w.metaKey!==a.meta,a.meta=!!w.metaKey),c}function v(w,c){var E=y.x(c),M=y.y(c);"buttons"in c&&(w=0|c.buttons),(w!==_||E!==e||M!==o||i(c))&&(_=0|w,e=E||0,o=M||0,T&&T(_,e,o,a))}function h(w){v(0,w)}function s(){(_||e||o||a.shift||a.alt||a.meta||a.control)&&(e=o=0,_=0,a.shift=a.alt=a.control=a.meta=!1,T&&T(0,0,0,a))}function d(w){i(w)&&T&&T(_,e,o,a)}function p(w){0===y.buttons(w)?v(0,w):v(_,w)}function f(w){v(_|y.buttons(w),w)}function g(w){v(_&~y.buttons(w),w)}function m(){l||(l=!0,b.addEventListener("mousemove",p),b.addEventListener("mousedown",f),b.addEventListener("mouseup",g),b.addEventListener("mouseleave",h),b.addEventListener("mouseenter",h),b.addEventListener("mouseout",h),b.addEventListener("mouseover",h),b.addEventListener("blur",s),b.addEventListener("keyup",d),b.addEventListener("keydown",d),b.addEventListener("keypress",d),b!==window&&(window.addEventListener("blur",s),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}m();var u={element:b};return Object.defineProperties(u,{enabled:{get:function(){return l},set:function(w){w?m():!l||(l=!1,b.removeEventListener("mousemove",p),b.removeEventListener("mousedown",f),b.removeEventListener("mouseup",g),b.removeEventListener("mouseleave",h),b.removeEventListener("mouseenter",h),b.removeEventListener("mouseout",h),b.removeEventListener("mouseover",h),b.removeEventListener("blur",s),b.removeEventListener("keyup",d),b.removeEventListener("keydown",d),b.removeEventListener("keypress",d),b!==window&&(window.removeEventListener("blur",s),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return _},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),u};var y=x("mouse-event")},{"mouse-event":243}],242:[function(x,ue,le){var y={left:0,top:0};ue.exports=function(b,T,_){T=T||b.currentTarget||b.srcElement,Array.isArray(_)||(_=[0,0]);var l,e=b.clientX||0,o=b.clientY||0,a=(l=T)===window||l===document||l===document.body?y:l.getBoundingClientRect();return _[0]=e-a.left,_[1]=o-a.top,_}},{}],243:[function(x,ue,le){"use strict";function y(b){return b.target||b.srcElement||window}le.buttons=function(b){if("object"==typeof b){if("buttons"in b)return b.buttons;if("which"in b){if(2===(T=b.which))return 4;if(3===T)return 2;if(T>0)return 1<<T-1}else if("button"in b){var T;if(1===(T=b.button))return 4;if(2===T)return 2;if(T>=0)return 1<<T}}return 0},le.element=y,le.x=function(b){if("object"==typeof b){if("offsetX"in b)return b.offsetX;var T=y(b).getBoundingClientRect();return b.clientX-T.left}return 0},le.y=function(b){if("object"==typeof b){if("offsetY"in b)return b.offsetY;var T=y(b).getBoundingClientRect();return b.clientY-T.top}return 0}},{}],244:[function(x,ue,le){"use strict";var y=x("to-px");ue.exports=function(b,T,_){"function"==typeof b&&(_=!!T,T=b,b=window);var e=y("ex",b),o=function(a){_&&a.preventDefault();var l=a.deltaX||0,i=a.deltaY||0,v=a.deltaZ||0,h=1;switch(a.deltaMode){case 1:h=e;break;case 2:h=window.innerHeight}if(i*=h,v*=h,(l*=h)||i||v)return T(l,i,v,a)};return b.addEventListener("wheel",o),o}},{"to-px":314}],245:[function(x,ue,le){(function(y,b){(function(){var T,_,e;e=function(){"use strict";var T,_,e,o=Object.prototype.toString,a=void 0!==b?function(w){return b(w)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(w,c,E,M){return Object.defineProperty(w,c,{value:E,writable:!0,configurable:!1!==M})}}catch(w){T=function(c,E,M){return c[E]=M,c}}function l(w,c){e.add(w,c),_||(_=a(e.drain))}function i(w){var c,E=typeof w;return null==w||"object"!=E&&"function"!=E||(c=w.then),"function"==typeof c&&c}function v(){for(var w=0;w<this.chain.length;w++)h(this,1===this.state?this.chain[w].success:this.chain[w].failure,this.chain[w]);this.chain.length=0}function h(w,c,E){var M,S;try{!1===c?E.reject(w.msg):(M=!0===c?w.msg:c.call(void 0,w.msg))===E.promise?E.reject(TypeError("Promise-chain cycle")):(S=i(M))?S.call(M,E.resolve,E.reject):E.resolve(M)}catch(C){E.reject(C)}}function s(w){var c,E=this;if(!E.triggered){E.triggered=!0,E.def&&(E=E.def);try{(c=i(w))?l(function(){var M=new f(E);try{c.call(w,function(){s.apply(M,arguments)},function(){d.apply(M,arguments)})}catch(S){d.call(M,S)}}):(E.msg=w,E.state=1,E.chain.length>0&&l(v,E))}catch(M){d.call(new f(E),M)}}}function d(w){var c=this;c.triggered||(c.triggered=!0,c.def&&(c=c.def),c.msg=w,c.state=2,c.chain.length>0&&l(v,c))}function p(w,c,E,M){for(var S=0;S<c.length;S++)!function(C){w.resolve(c[C]).then(function(O){E(C,O)},M)}(S)}function f(w){this.def=w,this.triggered=!1}function g(w){this.promise=w,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(w){if("function"!=typeof w)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var c=new g(this);this.then=function(E,M){var S={success:"function"!=typeof E||E,failure:"function"==typeof M&&M};return S.promise=new this.constructor(function(C,O){if("function"!=typeof C||"function"!=typeof O)throw TypeError("Not a function");S.resolve=C,S.reject=O}),c.chain.push(S),0!==c.state&&l(v,c),S.promise},this.catch=function(E){return this.then(void 0,E)};try{w.call(void 0,function(E){s.call(c,E)},function(E){d.call(c,E)})}catch(E){d.call(c,E)}}e=function(){var w,c,E;function M(S,C){this.fn=S,this.self=C,this.next=void 0}return{add:function(S,C){E=new M(S,C),c?c.next=E:w=E,c=E,E=void 0},drain:function(){var S=w;for(w=c=_=void 0;S;)S.fn.call(S.self),S=S.next}}}();var u=T({},"constructor",m,!1);return m.prototype=u,T(u,"__NPO__",0,!1),T(m,"resolve",function(w){return w&&"object"==typeof w&&1===w.__NPO__?w:new this(function(c,E){if("function"!=typeof c||"function"!=typeof E)throw TypeError("Not a function");c(w)})}),T(m,"reject",function(w){return new this(function(c,E){if("function"!=typeof c||"function"!=typeof E)throw TypeError("Not a function");E(w)})}),T(m,"all",function(w){var c=this;return"[object Array]"!=o.call(w)?c.reject(TypeError("Not an array")):0===w.length?c.resolve([]):new c(function(E,M){if("function"!=typeof E||"function"!=typeof M)throw TypeError("Not a function");var S=w.length,C=Array(S),O=0;p(c,w,function(I,N){C[I]=N,++O===S&&E(C)},M)})}),T(m,"race",function(w){var c=this;return"[object Array]"!=o.call(w)?c.reject(TypeError("Not an array")):new c(function(E,M){if("function"!=typeof E||"function"!=typeof M)throw TypeError("Not a function");p(c,w,function(S,C){E(C)},M)})}),m},(_=void 0!==y?y:this)[T="Promise"]=_[T]||e(),void 0!==ue&&ue.exports&&(ue.exports=_[T])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},x("timers").setImmediate)},{timers:311}],246:[function(x,ue,le){var y=Math.PI,b=a(120);function T(l,i,v,h){return["C",l,i,v,h,v,h]}function _(l,i,v,h,s,d){return["C",l/3+2/3*v,i/3+2/3*h,s/3+2/3*v,d/3+2/3*h,s,d]}function e(l,i,v,h,s,d,p,f,g,m){if(m)N=m[0],F=m[1],O=m[2],I=m[3];else{var u=o(l,i,-s);i=u.y;var w=((l=u.x)-(f=(u=o(f,g,-s)).x))/2,c=(i-(g=u.y))/2,E=w*w/(v*v)+c*c/(h*h);E>1&&(v*=E=Math.sqrt(E),h*=E);var M=v*v,S=h*h,C=(d==p?-1:1)*Math.sqrt(Math.abs((M*S-M*c*c-S*w*w)/(M*c*c+S*w*w)));C==1/0&&(C=1);var O=C*v*c/h+(l+f)/2,I=C*-h*w/v+(i+g)/2,N=Math.asin(((i-I)/h).toFixed(9)),F=Math.asin(((g-I)/h).toFixed(9));(N=l<O?y-N:N)<0&&(N=2*y+N),(F=f<O?y-F:F)<0&&(F=2*y+F),p&&N>F&&(N-=2*y),!p&&F>N&&(F-=2*y)}if(Math.abs(F-N)>b){var L=F,P=f,j=g;F=N+b*(p&&F>N?1:-1);var U=e(f=O+v*Math.cos(F),g=I+h*Math.sin(F),v,h,s,0,p,P,j,[F,L,O,I])}var $=Math.tan((F-N)/4),X=4/3*v*$,te=4/3*h*$,ae=[2*l-(l+X*Math.sin(N)),2*i-(i-te*Math.cos(N)),f+X*Math.sin(F),g-te*Math.cos(F),f,g];if(m)return ae;U&&(ae=ae.concat(U));for(var J=0;J<ae.length;){var ee=o(ae[J],ae[J+1],s);ae[J++]=ee.x,ae[J++]=ee.y}return ae}function o(l,i,v){return{x:l*Math.cos(v)-i*Math.sin(v),y:l*Math.sin(v)+i*Math.cos(v)}}function a(l){return l*(y/180)}ue.exports=function(l){for(var i,v=[],h=0,s=0,d=0,p=0,f=null,g=null,m=0,u=0,w=0,c=l.length;w<c;w++){var E=l[w],M=E[0];switch(M){case"M":d=E[1],p=E[2];break;case"A":(E=e(m,u,E[1],E[2],a(E[3]),E[4],E[5],E[6],E[7])).unshift("C"),E.length>7&&(v.push(E.splice(0,7)),E.unshift("C"));break;case"S":var S=m,C=u;"C"!=i&&"S"!=i||(S+=S-h,C+=C-s),E=["C",S,C,E[1],E[2],E[3],E[4]];break;case"T":"Q"==i||"T"==i?(f=2*m-f,g=2*u-g):(f=m,g=u),E=_(m,u,f,g,E[1],E[2]);break;case"Q":f=E[1],g=E[2],E=_(m,u,E[1],E[2],E[3],E[4]);break;case"L":E=T(m,u,E[1],E[2]);break;case"H":E=T(m,u,E[1],u);break;case"V":E=T(m,u,m,E[1]);break;case"Z":E=T(m,u,d,p)}i=M,m=E[E.length-2],u=E[E.length-1],E.length>4?(h=E[E.length-4],s=E[E.length-3]):(h=m,s=u),v.push(E)}return v}},{}],247:[function(x,ue,le){"use strict";var y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;function _(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}ue.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var o={},a=0;a<10;a++)o["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(o).map(function(i){return o[i]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(i){l[i]=i}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,l,i=_(e),v=1;v<arguments.length;v++){for(var h in a=Object(arguments[v]))b.call(a,h)&&(i[h]=a[h]);if(y){l=y(a);for(var s=0;s<l.length;s++)T.call(a,l[s])&&(i[l[s]]=a[l[s]])}}return i}},{}],248:[function(x,ue,le){"use strict";function y(_,e){if("string"!=typeof _)return[_];var o=[_];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var a=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],l=e.escape||"___",i=!!e.flat;a.forEach(function(h){var s=new RegExp(["\\",h[0],"[^\\",h[0],"\\",h[1],"]*\\",h[1]].join("")),d=[];function p(f,g,m){var u=o.push(f.slice(h[0].length,-h[1].length))-1;return d.push(u),l+u+l}o.forEach(function(f,g){for(var m,u=0;f!=m;)if(m=f,f=f.replace(s,p),u++>1e4)throw Error("References have circular dependency. Please, check them.");o[g]=f}),d=d.reverse(),o=o.map(function(f){return d.forEach(function(g){f=f.replace(new RegExp("(\\"+l+g+"\\"+l+")","g"),h[0]+"$1"+h[1])}),f})});var v=new RegExp("\\"+l+"([0-9]+)\\"+l);return i?o:function h(s,d,p){for(var f,g=[],m=0;f=v.exec(s);){if(m++>1e4)throw Error("Circular references in parenthesis");g.push(s.slice(0,f.index)),g.push(h(d[f[1]],d)),s=s.slice(f.index+f[0].length)}return g.push(s),g}(o[0],o)}function b(_,e){if(e&&e.flat){var o,a=e&&e.escape||"___",l=_[0];if(!l)return"";for(var i=new RegExp("\\"+a+"([0-9]+)\\"+a),v=0;l!=o;){if(v++>1e4)throw Error("Circular references in "+_);o=l,l=l.replace(i,h)}return l}return _.reduce(function s(d,p){return Array.isArray(p)&&(p=p.reduce(s,"")),d+p},"");function h(s,d){if(null==_[d])throw Error("Reference "+d+"is undefined");return _[d]}}function T(_,e){return Array.isArray(_)?b(_,e):y(_,e)}T.parse=y,T.stringify=b,ue.exports=T},{}],249:[function(x,ue,le){"use strict";var y=x("pick-by-alias");ue.exports=function(b){var T;return arguments.length>1&&(b=arguments),"string"==typeof b?b=b.split(/\s/).map(parseFloat):"number"==typeof b&&(b=[b]),b.length&&"number"==typeof b[0]?T=1===b.length?{width:b[0],height:b[0],x:0,y:0}:2===b.length?{width:b[0],height:b[1],x:0,y:0}:{x:b[0],y:b[1],width:b[2]-b[0]||0,height:b[3]-b[1]||0}:b&&((T={x:(b=y(b,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:b.top||0}).width=null==b.width?b.right?b.right-T.x:0:b.width,T.height=null==b.height?b.bottom?b.bottom-T.y:0:b.height),T}},{"pick-by-alias":253}],250:[function(x,ue,le){ue.exports=function(_){var e=[];return _.replace(b,function(o,a,l){var h,i=a.toLowerCase();for(h=void 0,l=(h=l.match(T))?h.map(Number):[],"m"==i&&l.length>2&&(e.push([a].concat(l.splice(0,2))),i="l",a="m"==a?"l":"L");;){if(l.length==y[i])return l.unshift(a),e.push(l);if(l.length<y[i])throw new Error("malformed path data");e.push([a].concat(l.splice(0,y[i])))}}),e};var y={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},b=/([astvzqmhlc])([^astvzqmhlc]*)/gi,T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(x,ue,le){ue.exports=function(y,b){b||(b=[0,""]),y=String(y);var T=parseFloat(y,10);return b[0]=T,b[1]=y.match(/[\d.\-\+]*\s*(.*)/)[1]||"",b}},{}],252:[function(x,ue,le){(function(y){(function(){(function(){var b,T,_,e,o,a;"undefined"!=typeof performance&&null!==performance&&performance.now?ue.exports=function(){return performance.now()}:null!=y&&y.hrtime?(ue.exports=function(){return(b()-o)/1e6},T=y.hrtime,e=(b=function(){var l;return 1e9*(l=T())[0]+l[1]})(),a=1e9*y.uptime(),o=e-a):Date.now?(ue.exports=function(){return Date.now()-_},_=Date.now()):(ue.exports=function(){return(new Date).getTime()-_},_=(new Date).getTime())}).call(this)}).call(this)}).call(this,x("_process"))},{_process:277}],253:[function(x,ue,le){"use strict";ue.exports=function(T,_,e){var o,a,l={};if("string"==typeof _&&(_=b(_)),Array.isArray(_)){var i={};for(a=0;a<_.length;a++)i[_[a]]=!0;_=i}for(o in _)_[o]=b(_[o]);var v={};for(o in _){var h=_[o];if(Array.isArray(h))for(a=0;a<h.length;a++){var s=h[a];if(e&&(v[s]=!0),s in T){if(l[o]=T[s],e)for(var d=a;d<h.length;d++)v[h[d]]=!0;break}}else o in T&&(_[o]&&(l[o]=T[o]),e&&(v[o]=!0))}if(e)for(o in T)v[o]||(l[o]=T[o]);return l};var y={};function b(T){return y[T]?y[T]:("string"==typeof T&&(T=y[T]=T.split(/\s*,\s*|\s+/)),T)}},{}],254:[function(x,ue,le){var y,b=x("./lib/build-log"),T=x("./lib/epsilon"),_=x("./lib/intersecter"),e=x("./lib/segment-chainer"),o=x("./lib/segment-selector"),a=x("./lib/geojson"),l=!1,i=T();function v(h,s,d){var p=y.segments(h),f=y.segments(s),g=d(y.combine(p,f));return y.polygon(g)}y={buildLog:function(h){return!0===h?l=b():!1===h&&(l=!1),!1!==l&&l.list},epsilon:function(h){return i.epsilon(h)},segments:function(h){var s=_(!0,i,l);return h.regions.forEach(s.addRegion),{segments:s.calculate(h.inverted),inverted:h.inverted}},combine:function(h,s){return{combined:_(!1,i,l).calculate(h.segments,h.inverted,s.segments,s.inverted),inverted1:h.inverted,inverted2:s.inverted}},selectUnion:function(h){return{segments:o.union(h.combined,l),inverted:h.inverted1||h.inverted2}},selectIntersect:function(h){return{segments:o.intersect(h.combined,l),inverted:h.inverted1&&h.inverted2}},selectDifference:function(h){return{segments:o.difference(h.combined,l),inverted:h.inverted1&&!h.inverted2}},selectDifferenceRev:function(h){return{segments:o.differenceRev(h.combined,l),inverted:!h.inverted1&&h.inverted2}},selectXor:function(h){return{segments:o.xor(h.combined,l),inverted:h.inverted1!==h.inverted2}},polygon:function(h){return{regions:e(h.segments,i,l),inverted:h.inverted}},polygonFromGeoJSON:function(h){return a.toPolygon(y,h)},polygonToGeoJSON:function(h){return a.fromPolygon(y,i,h)},union:function(h,s){return v(h,s,y.selectUnion)},intersect:function(h,s){return v(h,s,y.selectIntersect)},difference:function(h,s){return v(h,s,y.selectDifference)},differenceRev:function(h,s){return v(h,s,y.selectDifferenceRev)},xor:function(h,s){return v(h,s,y.selectXor)}},"object"==typeof window&&(window.PolyBool=y),ue.exports=y},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(x,ue,le){ue.exports=function(){var y,b=0,T=!1;function _(e,o){return y.list.push({type:e,data:o?JSON.parse(JSON.stringify(o)):void 0}),y}return y={list:[],segmentId:function(){return b++},checkIntersection:function(e,o){return _("check",{seg1:e,seg2:o})},segmentChop:function(e,o){return _("div_seg",{seg:e,pt:o}),_("chop",{seg:e,pt:o})},statusRemove:function(e){return _("pop_seg",{seg:e})},segmentUpdate:function(e){return _("seg_update",{seg:e})},segmentNew:function(e,o){return _("new_seg",{seg:e,primary:o})},segmentRemove:function(e){return _("rem_seg",{seg:e})},tempStatus:function(e,o,a){return _("temp_status",{seg:e,above:o,below:a})},rewind:function(e){return _("rewind",{seg:e})},status:function(e,o,a){return _("status",{seg:e,above:o,below:a})},vert:function(e){return e===T?y:(T=e,_("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),_("log",{txt:e})},reset:function(){return _("reset")},selected:function(e){return _("selected",{segs:e})},chainStart:function(e){return _("chain_start",{seg:e})},chainRemoveHead:function(e,o){return _("chain_rem_head",{index:e,pt:o})},chainRemoveTail:function(e,o){return _("chain_rem_tail",{index:e,pt:o})},chainNew:function(e,o){return _("chain_new",{pt1:e,pt2:o})},chainMatch:function(e){return _("chain_match",{index:e})},chainClose:function(e){return _("chain_close",{index:e})},chainAddHead:function(e,o){return _("chain_add_head",{index:e,pt:o})},chainAddTail:function(e,o){return _("chain_add_tail",{index:e,pt:o})},chainConnect:function(e,o){return _("chain_con",{index1:e,index2:o})},chainReverse:function(e){return _("chain_rev",{index:e})},chainJoin:function(e,o){return _("chain_join",{index1:e,index2:o})},done:function(){return _("done")}}}},{}],256:[function(x,ue,le){ue.exports=function(y){"number"!=typeof y&&(y=1e-10);var b={epsilon:function(T){return"number"==typeof T&&(y=T),y},pointAboveOrOnLine:function(T,_,e){var o=_[0],a=_[1];return(e[0]-o)*(T[1]-a)-(e[1]-a)*(T[0]-o)>=-y},pointBetween:function(T,_,e){var a=e[0]-_[0],i=e[1]-_[1],v=(T[0]-_[0])*a+(T[1]-_[1])*i;return!(v<y||v-(a*a+i*i)>-y)},pointsSameX:function(T,_){return Math.abs(T[0]-_[0])<y},pointsSameY:function(T,_){return Math.abs(T[1]-_[1])<y},pointsSame:function(T,_){return b.pointsSameX(T,_)&&b.pointsSameY(T,_)},pointsCompare:function(T,_){return b.pointsSameX(T,_)?b.pointsSameY(T,_)?0:T[1]<_[1]?-1:1:T[0]<_[0]?-1:1},pointsCollinear:function(T,_,e){return Math.abs((T[0]-_[0])*(_[1]-e[1])-(_[0]-e[0])*(T[1]-_[1]))<y},linesIntersect:function(T,_,e,o){var a=_[0]-T[0],l=_[1]-T[1],i=o[0]-e[0],v=o[1]-e[1],h=a*v-l*i;if(Math.abs(h)<y)return!1;var s=T[0]-e[0],d=T[1]-e[1],p=(i*d-v*s)/h,f=(a*d-l*s)/h,g={alongA:0,alongB:0,pt:[T[0]+p*a,T[1]+p*l]};return g.alongA=p<=-y?-2:p<y?-1:p-1<=-y?0:p-1<y?1:2,g.alongB=f<=-y?-2:f<y?-1:f-1<=-y?0:f-1<y?1:2,g},pointInsideRegion:function(T,_){for(var e=T[0],o=T[1],a=_[_.length-1][0],l=_[_.length-1][1],i=!1,v=0;v<_.length;v++){var h=_[v][0],s=_[v][1];s-o>y!=l-o>y&&(a-h)*(o-s)/(l-s)+h-e>y&&(i=!i),a=h,l=s}return i}};return b}},{}],257:[function(x,ue,le){ue.exports={toPolygon:function(b,T){function _(a){if(a.length<=0)return b.segments({inverted:!1,regions:[]});function l(h){var s=h.slice(0,h.length-1);return b.segments({inverted:!1,regions:[s]})}for(var i=l(a[0]),v=1;v<a.length;v++)i=b.selectDifference(b.combine(i,l(a[v])));return i}if("Polygon"===T.type)return b.polygon(_(T.coordinates));if("MultiPolygon"===T.type){for(var e=b.segments({inverted:!1,regions:[]}),o=0;o<T.coordinates.length;o++)e=b.selectUnion(b.combine(e,_(T.coordinates[o])));return b.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(b,T,_){function e(f,g){return T.pointInsideRegion([.5*(f[0][0]+f[1][0]),.5*(f[0][1]+f[1][1])],g)}function o(f){return{region:f,children:[]}}_=b.polygon(b.segments(_));var a=o(null);function l(f,g){for(var m=0;m<f.children.length;m++)if(e(g,(w=f.children[m]).region))return void l(w,g);var u=o(g);for(m=0;m<f.children.length;m++){var w;e((w=f.children[m]).region,g)&&(u.children.push(w),f.children.splice(m,1),m--)}f.children.push(u)}for(var i=0;i<_.regions.length;i++){var v=_.regions[i];v.length<3||l(a,v)}function h(f,g){for(var m=0,u=f[f.length-1][0],w=f[f.length-1][1],c=[],E=0;E<f.length;E++){var M=f[E][0],S=f[E][1];c.push([M,S]),m+=S*u-M*w,u=M,w=S}return m<0!==g&&c.reverse(),c.push([c[0][0],c[0][1]]),c}var s=[];function d(f){var g=[h(f.region,!1)];s.push(g);for(var m=0;m<f.children.length;m++)g.push(p(f.children[m]))}function p(f){for(var g=0;g<f.children.length;g++)d(f.children[g]);return h(f.region,!0)}for(i=0;i<a.children.length;i++)d(a.children[i]);return s.length<=0?{type:"Polygon",coordinates:[]}:1==s.length?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}}},{}],258:[function(x,ue,le){var y=x("./linked-list");ue.exports=function(b,T,_){function e(h,s,d){return{id:_?_.segmentId():-1,start:h,end:s,myFill:{above:d.myFill.above,below:d.myFill.below},otherFill:null}}var o=y.create();function a(h,s){o.insertBefore(h,function(d){return p=h.isStart,g=s,m=d.isStart,w=d.other.pt,(0!==(c=T.pointsCompare(h.pt,u=d.pt))?c:T.pointsSame(g,w)?0:p!==m?p?1:-1:T.pointAboveOrOnLine(g,m?u:w,m?w:u)?1:-1)<0;var p,g,m,u,w,c})}function l(h,s){var p,g,d=(a(g=y.node({isStart:!0,pt:(p=h).start,seg:p,primary:s,other:null,status:null}),p.end),g);return function(p,f,g){var m=y.node({isStart:!1,pt:f.end,seg:f,primary:g,other:p,status:null});p.other=m,a(m,p.pt)}(d,h,s),d}function i(h,s){var p,f,d=e(s,h.seg.end,h.seg);return p=h,f=s,_&&_.segmentChop(p.seg,f),p.other.remove(),p.seg.end=f,p.other.pt=f,a(p.other,p.pt),l(d,h.primary)}function v(h,s){var d=y.create();function p(N){return d.findTransition(function(F){var L,P,j,U,$,X;return U=(L=N).seg.end,(T.pointsCollinear(j=L.seg.start,$=(P=F.ev).seg.start,X=P.seg.end)?T.pointsCollinear(U,$,X)||T.pointAboveOrOnLine(U,$,X)?1:-1:T.pointAboveOrOnLine(j,$,X)?1:-1)>0})}function f(N,F){var L=N.seg,P=F.seg,j=L.start,U=L.end,$=P.start,X=P.end;_&&_.checkIntersection(L,P);var te=T.linesIntersect(j,U,$,X);if(!1===te){if(!T.pointsCollinear(j,U,$)||T.pointsSame(j,X)||T.pointsSame(U,$))return!1;var ae=T.pointsSame(j,$),J=T.pointsSame(U,X);if(ae&&J)return F;var ee=!ae&&T.pointBetween(j,$,X),se=!J&&T.pointBetween(U,$,X);if(ae)return se?i(F,U):i(N,X),F;ee&&(J||(se?i(F,U):i(N,X)),i(F,j))}else 0===te.alongA&&(-1===te.alongB?i(N,$):0===te.alongB?i(N,te.pt):1===te.alongB&&i(N,X)),0===te.alongB&&(-1===te.alongA?i(F,j):0===te.alongA?i(F,te.pt):1===te.alongA&&i(F,U));return!1}for(var g=[];!o.isEmpty();){var m=o.getHead();if(_&&_.vert(m.pt[0]),m.isStart){let N=function(){if(w){var F=f(m,w);if(F)return F}return!!c&&f(m,c)};_&&_.segmentNew(m.seg,m.primary);var u=p(m),w=u.before?u.before.ev:null,c=u.after?u.after.ev:null;_&&_.tempStatus(m.seg,!!w&&w.seg,!!c&&c.seg);var E,S,M=N();if(M&&(b?(S=null===m.seg.myFill.below||m.seg.myFill.above!==m.seg.myFill.below)&&(M.seg.myFill.above=!M.seg.myFill.above):M.seg.otherFill=m.seg.myFill,_&&_.segmentUpdate(M.seg),m.other.remove(),m.remove()),o.getHead()!==m){_&&_.rewind(m.seg);continue}b?(S=null===m.seg.myFill.below||m.seg.myFill.above!==m.seg.myFill.below,m.seg.myFill.below=c?c.seg.myFill.above:h,m.seg.myFill.above=S?!m.seg.myFill.below:m.seg.myFill.below):null===m.seg.otherFill&&(m.seg.otherFill={above:E=c?m.primary===c.primary?c.seg.otherFill.above:c.seg.myFill.above:m.primary?s:h,below:E}),_&&_.status(m.seg,!!w&&w.seg,!!c&&c.seg),m.other.status=u.insert(y.node({ev:m}))}else{var C=m.status;if(null===C)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(d.exists(C.prev)&&d.exists(C.next)&&f(C.prev.ev,C.next.ev),_&&_.statusRemove(C.ev.seg),C.remove(),!m.primary){var O=m.seg.myFill;m.seg.myFill=m.seg.otherFill,m.seg.otherFill=O}g.push(m.seg)}o.getHead().remove()}return _&&_.done(),g}return b?{addRegion:function(h){for(var s,d,p,f=h[h.length-1],g=0;g<h.length;g++){var m=T.pointsCompare(s=f,f=h[g]);0!==m&&l((d=m<0?s:f,p=m<0?f:s,{id:_?_.segmentId():-1,start:d,end:p,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(h){return v(h,!1)}}:{calculate:function(h,s,d,p){return h.forEach(function(f){l(e(f.start,f.end,f),!0)}),d.forEach(function(f){l(e(f.start,f.end,f),!1)}),v(s,p)}}}},{"./linked-list":259}],259:[function(x,ue,le){ue.exports={create:function(){var y={root:{root:!0,next:null},exists:function(b){return null!==b&&b!==y.root},isEmpty:function(){return null===y.root.next},getHead:function(){return y.root.next},insertBefore:function(b,T){for(var _=y.root,e=y.root.next;null!==e;){if(T(e))return b.prev=e.prev,b.next=e,e.prev.next=b,void(e.prev=b);_=e,e=e.next}_.next=b,b.prev=_,b.next=null},findTransition:function(b){for(var T=y.root,_=y.root.next;null!==_&&!b(_);)T=_,_=_.next;return{before:T===y.root?null:T,after:_,insert:function(e){return e.prev=T,e.next=_,T.next=e,null!==_&&(_.prev=e),e}}}};return y},node:function(y){return y.prev=null,y.next=null,y.remove=function(){y.prev.next=y.next,y.next&&(y.next.prev=y.prev),y.prev=null,y.next=null},y}}},{}],260:[function(x,ue,le){ue.exports=function(y,b,T){var _=[],e=[];return y.forEach(function(o){var a=o.start,l=o.end;if(b.pointsSame(a,l))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{T&&T.chainStart(o);for(var i={index:0,matches_head:!1,matches_pt1:!1},v={index:0,matches_head:!1,matches_pt1:!1},h=i,s=0;s<_.length;s++){var d=(u=_[s])[0],p=u[u.length-1];if(b.pointsSame(d,a)){if(I(s,!0,!0))break}else if(b.pointsSame(d,l)){if(I(s,!0,!1))break}else if(b.pointsSame(p,a)){if(I(s,!1,!0))break}else if(b.pointsSame(p,l)&&I(s,!1,!1))break}if(h===i)return _.push([a,l]),void(T&&T.chainNew(a,l));if(h===v){T&&T.chainMatch(i.index);var f=i.index,g=i.matches_pt1?l:a,m=i.matches_head,u=_[f],w=m?u[0]:u[u.length-1],c=m?u[1]:u[u.length-2],E=m?u[u.length-1]:u[0],M=m?u[u.length-2]:u[1];return b.pointsCollinear(c,w,g)&&(m?(T&&T.chainRemoveHead(i.index,g),u.shift()):(T&&T.chainRemoveTail(i.index,g),u.pop()),w=c),b.pointsSame(E,g)?(_.splice(f,1),b.pointsCollinear(M,E,w)&&(m?(T&&T.chainRemoveTail(i.index,w),u.pop()):(T&&T.chainRemoveHead(i.index,w),u.shift())),T&&T.chainClose(i.index),void e.push(u)):void(m?(T&&T.chainAddHead(i.index,g),u.unshift(g)):(T&&T.chainAddTail(i.index,g),u.push(g)))}var S=i.index,C=v.index;T&&T.chainConnect(S,C);var O=_[S].length<_[C].length;i.matches_head?v.matches_head?O?(N(S),F(S,C)):(N(C),F(C,S)):F(C,S):v.matches_head?F(S,C):O?(N(S),F(C,S)):(N(C),F(S,C))}function I(L,P,j){return h.index=L,h.matches_head=P,h.matches_pt1=j,h===i?(h=v,!1):(h=null,!0)}function N(L){T&&T.chainReverse(L),_[L].reverse()}function F(L,P){var j=_[L],U=_[P],$=j[j.length-1],X=j[j.length-2],te=U[0],ae=U[1];b.pointsCollinear(X,$,te)&&(T&&T.chainRemoveTail(L,$),j.pop(),$=X),b.pointsCollinear($,te,ae)&&(T&&T.chainRemoveHead(P,te),U.shift()),T&&T.chainJoin(L,P),_[L]=j.concat(U),_.splice(P,1)}}),e}},{}],261:[function(x,ue,le){function y(T,_,e){var o=[];return T.forEach(function(a){var l=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);0!==_[l]&&o.push({id:e?e.segmentId():-1,start:a.start,end:a.end,myFill:{above:1===_[l],below:2===_[l]},otherFill:null})}),e&&e.selected(o),o}ue.exports={union:function(T,_){return y(T,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],_)},intersect:function(T,_){return y(T,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],_)},difference:function(T,_){return y(T,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],_)},differenceRev:function(T,_){return y(T,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],_)},xor:function(T,_){return y(T,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],_)}}},{}],262:[function(x,ue,le){"use strict";var y=x("stream").Transform,b=x("stream-parser");function T(){y.call(this,{readableObjectMode:!0})}function _(e,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,o&&(this.code=o),a&&(this.statusCode=a)}(T.prototype=Object.create(y.prototype)).constructor=T,b(T.prototype),le.ParserStream=T,le.sliceEq=function(e,o,a){for(var l=o,i=0;i<a.length;)if(e[l++]!==a[i++])return!1;return!0},le.str2arr=function(e,o){var a=[],l=0;if(o&&"hex"===o)for(;l<e.length;)a.push(parseInt(e.slice(l,l+2),16)),l+=2;else for(;l<e.length;l++)a.push(255&e.charCodeAt(l));return a},le.readUInt16LE=function(e,o){return e[o]|e[o+1]<<8},le.readUInt16BE=function(e,o){return e[o+1]|e[o]<<8},le.readUInt32LE=function(e,o){return e[o]|e[o+1]<<8|e[o+2]<<16|16777216*e[o+3]},le.readUInt32BE=function(e,o){return e[o+3]|e[o+2]<<8|e[o+1]<<16|16777216*e[o]},(_.prototype=Object.create(Error.prototype)).constructor=_,le.ProbeError=_},{stream:285,"stream-parser":301}],263:[function(x,ue,le){"use strict";function y(_,e){var o=new Error(_);return o.code=e,o}function b(_){try{return decodeURIComponent(escape(_))}catch(e){return _}}function T(_,e,o){this.input=_.subarray(e,o),this.start=e;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==a&&"MM\0*"!==a)throw y("invalid TIFF signature","EBADDATA");this.big_endian="M"===a[0]}T.prototype.each=function(_){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var o=this.ifds_to_read.shift();o.offset&&this.scan_ifd(o.id,o.offset,_)}},T.prototype.read_uint16=function(_){var e=this.input;if(_+2>e.length)throw y("unexpected EOF","EBADDATA");return this.big_endian?256*e[_]+e[_+1]:e[_]+256*e[_+1]},T.prototype.read_uint32=function(_){var e=this.input;if(_+4>e.length)throw y("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[_]+65536*e[_+1]+256*e[_+2]+e[_+3]:e[_]+256*e[_+1]+65536*e[_+2]+16777216*e[_+3]},T.prototype.is_subifd_link=function(_,e){return 0===_&&34665===e||0===_&&34853===e||34665===_&&40965===e},T.prototype.exif_format_length=function(_){switch(_){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},T.prototype.exif_format_read=function(_,e){var o;switch(_){case 1:case 2:return this.input[e];case 6:return(o=this.input[e])|33554430*(128&o);case 3:return this.read_uint16(e);case 8:return(o=this.read_uint16(e))|131070*(32768&o);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},T.prototype.scan_ifd=function(_,e,o){var a=this.read_uint16(e);e+=2;for(var l=0;l<a;l++){var i=this.read_uint16(e),v=this.read_uint16(e+2),h=this.read_uint32(e+4),s=this.exif_format_length(v),d=h*s,p=d<=4?e+8:this.read_uint32(e+8),f=!1;if(p+d>this.input.length)throw y("unexpected EOF","EBADDATA");for(var g=[],m=p,u=0;u<h;u++,m+=s){var w=this.exif_format_read(v,m);if(null===w){g=null;break}g.push(w)}if(Array.isArray(g)&&2===v&&(g=b(String.fromCharCode.apply(null,g)))&&"\0"===g[g.length-1]&&(g=g.slice(0,-1)),this.is_subifd_link(_,i)&&Array.isArray(g)&&Number.isInteger(g[0])&&g[0]>0&&(this.ifds_to_read.push({id:i,offset:g[0]}),f=!0),!1===o({is_big_endian:this.big_endian,ifd:_,tag:i,format:v,count:h,entry_offset:e+this.start,data_length:d,data_offset:p+this.start,value:g,is_subifd_link:f}))return void(this.aborted=!0);e+=12}0===_&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},ue.exports.ExifParser=T,ue.exports.get_orientation=function(_){var e=0;try{return new T(_,0,_.length).each(function(o){if(0===o.ifd&&274===o.tag&&Array.isArray(o.value))return e=o.value[0],!1}),e}catch(o){return-1}}},{}],264:[function(x,ue,le){"use strict";var y=x("./common").readUInt16BE,b=x("./common").readUInt32BE;function T(i,v){if(i.length<4+v)return null;var h=b(i,v);return i.length<h+v||h<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(v+4,v+8)),data:i.slice(v+8,v+h),end:v+h}}function _(i,v){for(var h=0;;){var s=T(i,h);if(!s)break;switch(s.boxtype){case"ispe":v.sizes.push({width:b(s.data,4),height:b(s.data,8)});break;case"irot":v.transforms.push({type:"irot",value:3&s.data[0]});break;case"imir":v.transforms.push({type:"imir",value:1&s.data[0]})}h=s.end}}function e(i,v,h){for(var s=0,d=0;d<h;d++)s=256*s+(i[v+d]||0);return s}function o(i,v){for(var h=i[4]>>4&15,s=15&i[4],d=i[5]>>4&15,p=y(i,6),f=8,g=0;g<p;g++){var m=y(i,f),u=y(i,f+=2),w=e(i,f+=2,d),c=y(i,f+=d);if(f+=2,0===u&&1===c){var E=e(i,f,h),M=e(i,f+h,s);v.item_loc[m]={length:M,offset:E+w}}f+=c*(h+s)}}function a(i,v){for(var h=y(i,4),s=6,d=0;d<h;d++){var p=T(i,s);if(!p)break;if("infe"===p.boxtype){for(var f=y(p.data,4),g="",m=8;m<p.data.length&&p.data[m];m++)g+=String.fromCharCode(p.data[m]);v.item_inf[g]=f}s=p.end}}function l(i,v){for(var h=0;;){var s=T(i,h);if(!s)break;"ipco"===s.boxtype&&_(s.data,v),h=s.end}}ue.exports.unbox=T,ue.exports.readSizeFromMeta=function(i){var v={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(m,u){for(var w=4;;){var c=T(m,w);if(!c)break;"iprp"===c.boxtype&&l(c.data,u),"iloc"===c.boxtype&&o(c.data,u),"iinf"===c.boxtype&&a(c.data,u),w=c.end}}(i,v),v.sizes.length){var h,s,d,p=(s=(h=v.sizes).reduce(function(m,u){return m.width>u.width||m.width===u.width&&m.height>u.height?m:u}),d=h.reduce(function(m,u){return m.height>u.height||m.height===u.height&&m.width>u.width?m:u}),s.width>d.height||s.width===d.height&&s.height>d.width?s:d),f=1;v.transforms.forEach(function(m){var u={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},w={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===m.type&&(f=0===m.value?w[f]:u[f=u[f=w[f]]]),"irot"===m.type)for(var c=0;c<m.value;c++)f=u[f]});var g=null;return v.item_inf.Exif&&(g=v.item_loc[v.item_inf.Exif]),{width:p.width,height:p.height,orientation:v.transforms.length?f:null,variants:v.sizes,exif_location:g}}},ue.exports.getMimeType=function(i){var v=String.fromCharCode.apply(null,i.slice(0,4)),h={};h[v]=!0;for(var s=8;s<i.length;s+=4)h[String.fromCharCode.apply(null,i.slice(s,s+4))]=!0;if(h.mif1||h.msf1||h.miaf)return"avif"===v||"avis"===v||"avio"===v?{type:"avif",mime:"image/avif"}:"heic"===v||"heix"===v?{type:"heic",mime:"image/heic"}:"hevc"===v||"hevx"===v?{type:"heic",mime:"image/heic-sequence"}:h.avif||h.avis?{type:"avif",mime:"image/avif"}:h.heic||h.heix||h.hevc||h.hevx||h.heis?h.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(x,ue,le){"use strict";var y=x("../common").str2arr,b=x("../common").sliceEq,T=x("../common").readUInt32BE,_=x("../miaf_utils"),e=x("../exif_utils"),o=y("ftyp");ue.exports=function(a){if(b(a,4,o)){var l=_.unbox(a,0);if(l){var i=_.getMimeType(l.data);if(i){for(var v,h=l.end;;){var s=_.unbox(a,h);if(!s)break;if(h=s.end,"mdat"===s.boxtype)return;if("meta"===s.boxtype){v=s.data;break}}if(v){var d=_.readSizeFromMeta(v);if(d){var p={width:d.width,height:d.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(d.variants.length>1&&(p.variants=d.variants),d.orientation&&(p.orientation=d.orientation),d.exif_location&&d.exif_location.offset+d.exif_location.length<=a.length){var f=T(a,d.exif_location.offset),g=a.slice(d.exif_location.offset+f+4,d.exif_location.offset+d.exif_location.length),m=e.get_orientation(g);m>0&&(p.orientation=m)}return p}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(x,ue,le){"use strict";var y=x("../common").str2arr,b=x("../common").sliceEq,T=x("../common").readUInt16LE,_=y("BM");ue.exports=function(e){if(!(e.length<26)&&b(e,0,_))return{width:T(e,18),height:T(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(x,ue,le){"use strict";var y=x("../common").str2arr,b=x("../common").sliceEq,T=x("../common").readUInt16LE,_=y("GIF87a"),e=y("GIF89a");ue.exports=function(o){if(!(o.length<10)&&(b(o,0,_)||b(o,0,e)))return{width:T(o,6),height:T(o,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(x,ue,le){"use strict";var y=x("../common").readUInt16LE;ue.exports=function(b){var T=y(b,0),_=y(b,2),e=y(b,4);if(0===T&&1===_&&e){for(var o=[],a={width:0,height:0},l=0;l<e;l++){var i=b[6+16*l]||256,v=b[6+16*l+1]||256,h={width:i,height:v};o.push(h),(i>a.width||v>a.height)&&(a=h)}return{width:a.width,height:a.height,variants:o,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(x,ue,le){"use strict";var y=x("../common").readUInt16BE,b=x("../common").str2arr,T=x("../common").sliceEq,_=x("../exif_utils"),e=b("Exif\0\0");ue.exports=function(o){if(!(o.length<2)&&255===o[0]&&216===o[1]&&255===o[2])for(var a=2;;){for(;;){if(o.length-a<2)return;if(255===o[a++])break}for(var l,i,v=o[a++];255===v;)v=o[a++];if(208<=v&&v<=217||1===v)l=0;else{if(!(192<=v&&v<=254)||o.length-a<2)return;l=y(o,a)-2,a+=2}if(217===v||218===v)return;if(225===v&&l>=10&&T(o,a,e)&&(i=_.get_orientation(o.slice(a+6,a+l))),l>=5&&192<=v&&v<=207&&196!==v&&200!==v&&204!==v){if(o.length-a<l)return;var h={width:y(o,a+3),height:y(o,a+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(h.orientation=i),h}a+=l}}},{"../common":262,"../exif_utils":263}],270:[function(x,ue,le){"use strict";var y=x("../common").str2arr,b=x("../common").sliceEq,T=x("../common").readUInt32BE,_=y("\x89PNG\r\n\x1a\n"),e=y("IHDR");ue.exports=function(o){if(!(o.length<24)&&b(o,0,_)&&b(o,12,e))return{width:T(o,16),height:T(o,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(x,ue,le){"use strict";var y=x("../common").str2arr,b=x("../common").sliceEq,T=x("../common").readUInt32BE,_=y("8BPS\0\x01");ue.exports=function(e){if(!(e.length<22)&&b(e,0,_))return{width:T(e,18),height:T(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(x,ue,le){"use strict";function y(i){return"number"==typeof i&&isFinite(i)&&i>0}var b=/<[-_.:a-zA-Z0-9][^>]*>/,T=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,_=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,o=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,a=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function l(i){return a.test(i)?i.match(a)[0]:"px"}ue.exports=function(i){if(function(E){var M,S=0,C=E.length;for(239===E[0]&&187===E[1]&&191===E[2]&&(S=3);S<C&&(32===(M=E[S])||9===M||13===M||10===M);)S++;return S!==C&&60===E[S]}(i)){for(var v="",h=0;h<i.length;h++)v+=String.fromCharCode(i[h]);var s=(v.match(b)||[""])[0];if(T.test(s)){var d=(M=(E=s).match(_),S=E.match(e),C=E.match(o),{width:M&&(M[1]||M[2]),height:S&&(S[1]||S[2]),viewbox:C&&(C[1]||C[2])}),p=parseFloat(d.width),f=parseFloat(d.height);if(d.width&&d.height)return y(p)&&y(f)?{width:p,height:f,type:"svg",mime:"image/svg+xml",wUnits:l(d.width),hUnits:l(d.height)}:void 0;var g=(d.viewbox||"").split(" "),m={width:g[2],height:g[3]},u=parseFloat(m.width),w=parseFloat(m.height);if(y(u)&&y(w)&&l(m.width)===l(m.height)){var c=u/w;return d.width?y(p)?{width:p,height:p/c,type:"svg",mime:"image/svg+xml",wUnits:l(d.width),hUnits:l(d.width)}:void 0:d.height?y(f)?{width:f*c,height:f,type:"svg",mime:"image/svg+xml",wUnits:l(d.height),hUnits:l(d.height)}:void 0:{width:u,height:w,type:"svg",mime:"image/svg+xml",wUnits:l(m.width),hUnits:l(m.height)}}}}var E,M,S,C}},{}],273:[function(x,ue,le){"use strict";var y=x("../common").str2arr,b=x("../common").sliceEq,T=x("../common").readUInt16LE,_=x("../common").readUInt16BE,e=x("../common").readUInt32LE,o=x("../common").readUInt32BE,a=y("II*\0"),l=y("MM\0*");function i(s,d,p){return p?_(s,d):T(s,d)}function v(s,d,p){return p?o(s,d):e(s,d)}function h(s,d,p){var f=i(s,d+2,p);return 1!==v(s,d+4,p)||3!==f&&4!==f?null:3===f?i(s,d+8,p):v(s,d+8,p)}ue.exports=function(s){if(!(s.length<8)&&(b(s,0,a)||b(s,0,l))){var d=77===s[0],p=v(s,4,d)-8;if(!(p<0)){var f=p+8;if(!(s.length-f<2)){var g=12*i(s,f+0,d);if(!(g<=0||(f+=2,s.length-f<g))){var m,u,w,c;for(m=0;m<g;m+=12)256===(c=i(s,f+m,d))?u=h(s,f+m,d):257===c&&(w=h(s,f+m,d));return u&&w?{width:u,height:w,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(x,ue,le){"use strict";var y=x("../common").str2arr,b=x("../common").sliceEq,T=x("../common").readUInt16LE,_=x("../common").readUInt32LE,e=x("../exif_utils"),o=y("RIFF"),a=y("WEBP");function l(h,s){if(157===h[s+3]&&1===h[s+4]&&42===h[s+5])return{width:16383&T(h,s+6),height:16383&T(h,s+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(h,s){if(47===h[s]){var d=_(h,s+1);return{width:1+(16383&d),height:1+(d>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function v(h,s){return{width:1+(h[s+6]<<16|h[s+5]<<8|h[s+4]),height:1+(h[s+9]<<s|h[s+8]<<8|h[s+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ue.exports=function(h){if(!(h.length<16)&&(b(h,0,o)||b(h,8,a))){var s=12,d=null,p=0,f=_(h,4)+8;if(!(f>h.length)){for(;s+8<f;)if(0!==h[s]){var g=String.fromCharCode.apply(null,h.slice(s,s+4)),m=_(h,s+4);"VP8 "===g&&m>=10?d=d||l(h,s+8):"VP8L"===g&&m>=9?d=d||i(h,s+8):"VP8X"===g&&m>=10?d=d||v(h,s+8):"EXIF"===g&&(p=e.get_orientation(h.slice(s+8,s+8+m)),s=1/0),s+=8+m}else s++;if(d)return p>0&&(d.orientation=p),d}}}},{"../common":262,"../exif_utils":263}],275:[function(x,ue,le){"use strict";ue.exports={avif:x("./parse_sync/avif"),bmp:x("./parse_sync/bmp"),gif:x("./parse_sync/gif"),ico:x("./parse_sync/ico"),jpeg:x("./parse_sync/jpeg"),png:x("./parse_sync/png"),psd:x("./parse_sync/psd"),svg:x("./parse_sync/svg"),tiff:x("./parse_sync/tiff"),webp:x("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(x,ue,le){"use strict";var y=x("./lib/parsers_sync");ue.exports=function(b){return function(T){for(var _=Object.keys(y),e=0;e<_.length;e++){var o=y[_[e]](T);if(o)return o}return null}(b)},ue.exports.parsers=y},{"./lib/parsers_sync":275}],277:[function(x,ue,le){var y,b,T=ue.exports={};function _(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(f){if(y===setTimeout)return setTimeout(f,0);if((y===_||!y)&&setTimeout)return y=setTimeout,setTimeout(f,0);try{return y(f,0)}catch(g){try{return y.call(null,f,0)}catch(m){return y.call(this,f,0)}}}!function(){try{y="function"==typeof setTimeout?setTimeout:_}catch(f){y=_}try{b="function"==typeof clearTimeout?clearTimeout:e}catch(f){b=e}}();var a,l=[],i=!1,v=-1;function h(){i&&a&&(i=!1,a.length?l=a.concat(l):v=-1,l.length&&s())}function s(){if(!i){var f=o(h);i=!0;for(var g=l.length;g;){for(a=l,l=[];++v<g;)a&&a[v].run();v=-1,g=l.length}a=null,i=!1,function(m){if(b===clearTimeout)return clearTimeout(m);if((b===e||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(m);try{b(m)}catch(u){try{return b.call(null,m)}catch(w){return b.call(this,m)}}}(f)}}function d(f,g){this.fun=f,this.array=g}function p(){}T.nextTick=function(f){var g=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)g[m-1]=arguments[m];l.push(new d(f,g)),1!==l.length||i||o(s)},d.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=p,T.addListener=p,T.once=p,T.off=p,T.removeListener=p,T.removeAllListeners=p,T.emit=p,T.prependListener=p,T.prependOnceListener=p,T.listeners=function(f){return[]},T.binding=function(f){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(f){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},{}],278:[function(x,ue,le){(function(y){(function(){for(var b=x("performance-now"),T="undefined"==typeof window?y:window,_=["moz","webkit"],e="AnimationFrame",o=T["request"+e],a=T["cancel"+e]||T["cancelRequest"+e],l=0;!o&&l<_.length;l++)o=T[_[l]+"Request"+e],a=T[_[l]+"Cancel"+e]||T[_[l]+"CancelRequest"+e];if(!o||!a){var i=0,v=0,h=[];o=function(s){if(0===h.length){var d=b(),p=Math.max(0,1e3/60-(d-i));i=p+d,setTimeout(function(){var f=h.slice(0);h.length=0;for(var g=0;g<f.length;g++)if(!f[g].cancelled)try{f[g].callback(i)}catch(m){setTimeout(function(){throw m},0)}},Math.round(p))}return h.push({handle:++v,callback:s,cancelled:!1}),v},a=function(s){for(var d=0;d<h.length;d++)h[d].handle===s&&(h[d].cancelled=!0)}}ue.exports=function(s){return o.call(T,s)},ue.exports.cancel=function(){a.apply(T,arguments)},ue.exports.polyfill=function(s){s||(s=T),s.requestAnimationFrame=o,s.cancelAnimationFrame=a}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(x,ue,le){"use strict";var y=x("array-bounds"),b=x("color-normalize"),T=x("update-diff"),_=x("pick-by-alias"),e=x("object-assign"),o=x("flatten-vertex-data"),a=x("to-float32"),l=a.float32,i=a.fract32;ue.exports=function(h,s){if("function"==typeof h?(s||(s={}),s.regl=h):s=h,s.length&&(s.positions=s),!(h=s.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d,p,f,g,m,u,w=h._gl,c={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},E=[];return g=h.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),p=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),f=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=h.buffer({usage:"static",type:"float",data:v}),O(s),d=h({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:h.prop("range"),lineWidth:h.prop("lineWidth"),capSize:h.prop("capSize"),opacity:h.prop("opacity"),scale:h.prop("scale"),translate:h.prop("translate"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),viewport:function(N,F){return[F.viewport.x,F.viewport.y,N.viewportWidth,N.viewportHeight]}},attributes:{color:{buffer:g,offset:function(N,F){return 4*F.offset},divisor:1},position:{buffer:p,offset:function(N,F){return 8*F.offset},divisor:1},positionFract:{buffer:f,offset:function(N,F){return 8*F.offset},divisor:1},error:{buffer:m,offset:function(N,F){return 16*F.offset},divisor:1},direction:{buffer:u,stride:24,offset:0},lineOffset:{buffer:u,stride:24,offset:8},capOffset:{buffer:u,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport"),stencil:!1,instances:h.prop("count"),count:v.length}),e(M,{update:O,draw:S,destroy:I,regl:h,gl:w,canvas:w.canvas,groups:E}),M;function M(N){N?O(N):null===N&&I(),S()}function S(N){if("number"==typeof N)return C(N);N&&!Array.isArray(N)&&(N=[N]),h._refresh(),E.forEach(function(F,L){F&&(N&&(F.draw=!!N[L]),F.draw?C(L):F.draw=!0)})}function C(N){"number"==typeof N&&(N=E[N]),null!=N&&N&&N.count&&N.color&&N.opacity&&N.positions&&N.positions.length>1&&(N.scaleRatio=[N.scale[0]*N.viewport.width,N.scale[1]*N.viewport.height],d(N),N.after&&N.after(N))}function O(N){if(N){null!=N.length?"number"==typeof N[0]&&(N=[{positions:N}]):Array.isArray(N)||(N=[N]);var F=0,L=0;if(M.groups=E=N.map(function(ae,J){var ee=E[J];return ae&&("function"==typeof ae?ae={after:ae}:"number"==typeof ae[0]&&(ae={positions:ae}),ae=_(ae,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),ee||(E[J]=ee={id:J,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},ae=e({},c,ae)),T(ee,ae,[{lineWidth:function(se){return.5*+se},capSize:function(se){return.5*+se},opacity:parseFloat,errors:function(se){return se=o(se),L+=se.length,se},positions:function(se,G){return se=o(se,"float64"),G.count=Math.floor(se.length/2),G.bounds=y(se,2),G.offset=F,F+=G.count,se}},{color:function(se,G){var H=G.count;if(se||(se="transparent"),!Array.isArray(se)||"number"==typeof se[0]){var Y=se;se=Array(H);for(var oe=0;oe<H;oe++)se[oe]=Y}if(se.length<H)throw Error("Not enough colors");for(var W=new Uint8Array(4*H),ne=0;ne<H;ne++){var re=b(se[ne],"uint8");W.set(re,4*ne)}return W},range:function(se,G,H){return se||(se=G.bounds),G.scale=[1/(se[2]-se[0]),1/(se[3]-se[1])],G.translate=[-se[0],-se[1]],G.scaleFract=i(G.scale),G.translateFract=i(G.translate),se},viewport:function(se){var G;return Array.isArray(se)?G={x:se[0],y:se[1],width:se[2]-se[0],height:se[3]-se[1]}:se?((G={x:se.x||se.left||0,y:se.y||se.top||0}).width=se.right?se.right-G.x:se.w||se.width||0,G.height=se.bottom?se.bottom-G.y:se.h||se.height||0):G={x:0,y:0,width:w.drawingBufferWidth,height:w.drawingBufferHeight},G}}])),ee}),F||L){var P=E.reduce(function(ae,J,ee){return ae+(J?J.count:0)},0),j=new Float64Array(2*P),U=new Uint8Array(4*P),$=new Float32Array(4*P);E.forEach(function(ae,J){if(ae){var ee=ae.positions,G=ae.offset,Y=ae.errors;ae.count&&(U.set(ae.color,4*G),$.set(Y,4*G),j.set(ee,2*G))}});var X=l(j);p(X);var te=i(j,X);f(te),g(U),m($)}}}function I(){p.destroy(),f.destroy(),g.destroy(),m.destroy(),u.destroy()}};var v=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(x,ue,le){"use strict";var y=x("color-normalize"),b=x("array-bounds"),T=x("object-assign"),_=x("glslify"),e=x("pick-by-alias"),o=x("flatten-vertex-data"),a=x("earcut"),l=x("array-normalize"),i=x("to-float32"),v=i.float32,h=i.fract32,s=x("es6-weak-map"),d=x("parse-rect"),p=x("array-find-index");function f(g,m){if(!(this instanceof f))return new f(g,m);if("function"==typeof g?(m||(m={}),m.regl=g):m=g,m.length&&(m.positions=m),!(g=m.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=g._gl,this.regl=g,this.passes=[],this.shaders=f.shaders.has(g)?f.shaders.get(g):f.shaders.set(g,f.createShaders(g)).get(g),this.update(m)}ue.exports=f,f.dashMult=2,f.maxPatternLength=256,f.precisionThreshold=3e6,f.maxPoints=1e4,f.maxLines=2048,f.shaders=new s,f.createShaders=function(g){var m,u=g.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),w={primitive:"triangle strip",instances:g.prop("count"),count:4,offset:0,uniforms:{miterMode:function(E,M){return"round"===M.join?2:1},miterLimit:g.prop("miterLimit"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),thickness:g.prop("thickness"),dashTexture:g.prop("dashTexture"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),dashLength:g.prop("dashLength"),viewport:function(E,M){return[M.viewport.x,M.viewport.y,E.viewportWidth,E.viewportHeight]},depth:g.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(E,M){return!M.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport")},c=g(T({vert:_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:_(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:u,divisor:0,stride:8,offset:0},lineTop:{buffer:u,divisor:0,stride:8,offset:4},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},w));try{m=g(T({cull:{enable:!0,face:"back"},vert:_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:_(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:u,divisor:0,stride:8,offset:0},lineTop:{buffer:u,divisor:0,stride:8,offset:4},aColor:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:g.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},w))}catch(E){m=c}return{fill:g({primitive:"triangle",elements:function(E,M){return M.triangles},offset:0,vert:_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:_(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:g.prop("scale"),color:g.prop("fill"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),viewport:function(E,M){return[M.viewport.x,M.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{position:{buffer:g.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8}},blend:w.blend,depth:{enable:!1},scissor:w.scissor,stencil:w.stencil,viewport:w.viewport}),rect:c,miter:m}},f.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},f.prototype.render=function(){for(var g,m=[],u=arguments.length;u--;)m[u]=arguments[u];m.length&&(g=this).update.apply(g,m),this.draw()},f.prototype.draw=function(){for(var g=this,m=[],u=arguments.length;u--;)m[u]=arguments[u];return(m.length?m:this.passes).forEach(function(w,c){var E;if(w&&Array.isArray(w))return(E=g).draw.apply(E,w);"number"==typeof w&&(w=g.passes[w]),w&&w.count>1&&w.opacity&&(g.regl._refresh(),w.fill&&w.triangles&&w.triangles.length>2&&g.shaders.fill(w),w.thickness&&(w.scale[0]*w.viewport.width>f.precisionThreshold||w.scale[1]*w.viewport.height>f.precisionThreshold||"rect"===w.join||!w.join&&(w.thickness<=2||w.count>=f.maxPoints)?g.shaders.rect(w):g.shaders.miter(w)))}),this},f.prototype.update=function(g){var m=this;if(g){null!=g.length?"number"==typeof g[0]&&(g=[{positions:g}]):Array.isArray(g)||(g=[g]);var u=this.regl,w=this.gl;if(g.forEach(function(C,O){var I=m.passes[O];if(void 0!==C)if(null!==C){if("number"==typeof C[0]&&(C={positions:C}),C=e(C,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),I||(m.passes[O]=I={id:O,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:u.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},C=T({},f.defaults,C)),null!=C.thickness&&(I.thickness=parseFloat(C.thickness)),null!=C.opacity&&(I.opacity=parseFloat(C.opacity)),null!=C.miterLimit&&(I.miterLimit=parseFloat(C.miterLimit)),null!=C.overlay&&(I.overlay=!!C.overlay,O<f.maxLines&&(I.depth=2*(f.maxLines-1-O%f.maxLines)/f.maxLines-1)),null!=C.join&&(I.join=C.join),null!=C.hole&&(I.hole=C.hole),null!=C.fill&&(I.fill=C.fill?y(C.fill,"uint8"):null),null!=C.viewport&&(I.viewport=d(C.viewport)),I.viewport||(I.viewport=d([w.drawingBufferWidth,w.drawingBufferHeight])),null!=C.close&&(I.close=C.close),null===C.positions&&(C.positions=[]),C.positions){var N,F;if(C.positions.x&&C.positions.y){var L=C.positions.x,P=C.positions.y;F=I.count=Math.max(L.length,P.length),N=new Float64Array(2*F);for(var j=0;j<F;j++)N[2*j]=L[j],N[2*j+1]=P[j]}else N=o(C.positions,"float64"),F=I.count=Math.floor(N.length/2);var U=I.bounds=b(N,2);if(I.fill){for(var $=[],X={},te=0,ae=0,J=0,ee=I.count;ae<ee;ae++){var se=N[2*ae],G=N[2*ae+1];isNaN(se)||isNaN(G)||null==se||null==G?(se=N[2*te],G=N[2*te+1],X[ae]=te):te=ae,$[J++]=se,$[J++]=G}if(C.splitNull){I.count-1 in X||(X[I.count]=I.count-1);var H=Object.keys(X).map(Number).sort(function(Bt,rn){return Bt-rn}),Y=[],oe=0,W=null!=I.hole?I.hole[0]:null;if(null!=W){var ne=p(H,function(Bt){return Bt>=W});(H=H.slice(0,ne)).push(W)}for(var re=function(Bt){var rn=$.slice(2*oe,2*H[Bt]).concat(W?$.slice(2*W):[]),un=(I.hole||[]).map(function(dn){return dn-W+(H[Bt]-oe)}),pn=a(rn,un);pn=pn.map(function(dn){return dn+oe+(dn+oe<H[Bt]?0:W-H[Bt])}),Y.push.apply(Y,pn),oe=H[Bt]+1},ce=0;ce<H.length;ce++)re(ce);for(var fe=0,me=Y.length;fe<me;fe++)null!=X[Y[fe]]&&(Y[fe]=X[Y[fe]]);I.triangles=Y}else{for(var pe=a($,I.hole||[]),we=0,ye=pe.length;we<ye;we++)null!=X[pe[we]]&&(pe[we]=X[pe[we]]);I.triangles=pe}}var Te=new Float64Array(N);l(Te,2,U);var Le=new Float64Array(2*F+6);I.close?N[0]===N[2*F-2]&&N[1]===N[2*F-1]?(Le[0]=Te[2*F-4],Le[1]=Te[2*F-3]):(Le[0]=Te[2*F-2],Le[1]=Te[2*F-1]):(Le[0]=Te[0],Le[1]=Te[1]),Le.set(Te,2),I.close?N[0]===N[2*F-2]&&N[1]===N[2*F-1]?(Le[2*F+2]=Te[2],Le[2*F+3]=Te[3],I.count-=1):(Le[2*F+2]=Te[0],Le[2*F+3]=Te[1],Le[2*F+4]=Te[2],Le[2*F+5]=Te[3]):(Le[2*F+2]=Te[2*F-2],Le[2*F+3]=Te[2*F-1],Le[2*F+4]=Te[2*F-2],Le[2*F+5]=Te[2*F-1]);var Oe=v(Le);I.positionBuffer(Oe);var Re=h(Le,Oe);I.positionFractBuffer(Re)}if(C.range?I.range=C.range:I.range||(I.range=I.bounds),(C.range||C.positions)&&I.count){var Ve=I.bounds,Fe=I.range[2]-I.range[0],Pe=I.range[3]-I.range[1];I.scale=[(Ve[2]-Ve[0])/Fe,(Ve[3]-Ve[1])/Pe],I.translate=[-I.range[0]/Fe+Ve[0]/Fe||0,-I.range[1]/Pe+Ve[1]/Pe||0],I.scaleFract=h(I.scale),I.translateFract=h(I.translate)}if(C.dashes){var Be,qe=0;if(!C.dashes||C.dashes.length<2)qe=1,Be=new Uint8Array([255,255,255,255,255,255,255,255]);else{qe=0;for(var We=0;We<C.dashes.length;++We)qe+=C.dashes[We];Be=new Uint8Array(qe*f.dashMult);for(var Je=0,ut=255,Ge=0;Ge<2;Ge++)for(var Ke=0;Ke<C.dashes.length;++Ke){for(var nt=0,it=C.dashes[Ke]*f.dashMult*.5;nt<it;++nt)Be[Je++]=ut;ut^=255}}I.dashLength=qe,I.dashTexture({channels:1,data:Be,width:Be.length,height:1,mag:"linear",min:"linear"},0,0)}if(C.color){var ht=I.count,Tt=C.color;Tt||(Tt="transparent");var Ct=new Uint8Array(4*ht+4);if(Array.isArray(Tt)&&"number"!=typeof Tt[0]){for(var Vt=0;Vt<ht;Vt++){var Ft=y(Tt[Vt],"uint8");Ct.set(Ft,4*Vt)}Ct.set(y(Tt[0],"uint8"),4*ht)}else for(var gt=y(Tt,"uint8"),ft=0;ft<ht+1;ft++)Ct.set(gt,4*ft);I.colorBuffer({usage:"dynamic",type:"uint8",data:Ct})}}else m.passes[O]=null}),g.length<this.passes.length){for(var c=g.length;c<this.passes.length;c++){var E=this.passes[c];E&&(E.colorBuffer.destroy(),E.positionBuffer.destroy(),E.dashTexture.destroy())}this.passes.length=g.length}for(var M=[],S=0;S<this.passes.length;S++)null!==this.passes[S]&&M.push(this.passes[S]);return this.passes=M,this}},f.prototype.destroy=function(){return this.passes.forEach(function(g){g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(x,ue,le){"use strict";function y(c,E){return function(M){if(Array.isArray(M))return M}(c)||function(M,S){var C=null==M?null:"undefined"!=typeof Symbol&&M[Symbol.iterator]||M["@@iterator"];if(null!=C){var O,I,N=[],F=!0,L=!1;try{for(C=C.call(M);!(F=(O=C.next()).done)&&(N.push(O.value),!S||N.length!==S);F=!0);}catch(P){L=!0,I=P}finally{try{F||null==C.return||C.return()}finally{if(L)throw I}}return N}}(c,E)||T(c,E)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(c){return function(E){if(Array.isArray(E))return _(E)}(c)||function(E){if("undefined"!=typeof Symbol&&null!=E[Symbol.iterator]||null!=E["@@iterator"])return Array.from(E)}(c)||T(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(c,E){if(c){if("string"==typeof c)return _(c,E);var M=Object.prototype.toString.call(c).slice(8,-1);return"Object"===M&&c.constructor&&(M=c.constructor.name),"Map"===M||"Set"===M?Array.from(c):"Arguments"===M||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?_(c,E):void 0}}function _(c,E){(null==E||E>c.length)&&(E=c.length);for(var M=0,S=new Array(E);M<E;M++)S[M]=c[M];return S}var e=x("color-normalize"),o=x("array-bounds"),a=x("color-id"),l=x("@plotly/point-cluster"),i=x("object-assign"),v=x("glslify"),h=x("pick-by-alias"),s=x("update-diff"),d=x("flatten-vertex-data"),p=x("is-iexplorer"),f=x("to-float32"),g=x("parse-rect"),m=u;function u(c,E){var M=this;if(!(this instanceof u))return new u(c,E);"function"==typeof c?(E||(E={}),E.regl=c):(E=c,c=null),E&&E.length&&(E.positions=E);var S,C=(c=E.regl)._gl,O=[];this.tooManyColors=p,S=c.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),i(this,{regl:c,gl:C,groups:[],markerCache:[null],markerTextures:[null],palette:O,paletteIds:{},paletteTexture:S,maxColors:255,maxSize:100,canvas:C.canvas}),this.update(E);var I={uniforms:{constPointSize:!!E.constPointSize,opacity:c.prop("opacity"),paletteSize:function(L,P){return[M.tooManyColors?0:255,S.height]},pixelRatio:c.context("pixelRatio"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translate:c.prop("translate"),translateFract:c.prop("translateFract"),markerTexture:c.prop("markerTexture"),paletteTexture:S},attributes:{x:function(L,P){return P.xAttr||{buffer:P.positionBuffer,stride:8,offset:0}},y:function(L,P){return P.yAttr||{buffer:P.positionBuffer,stride:8,offset:4}},xFract:function(L,P){return P.xAttr?{constant:[0,0]}:{buffer:P.positionFractBuffer,stride:8,offset:0}},yFract:function(L,P){return P.yAttr?{constant:[0,0]}:{buffer:P.positionFractBuffer,stride:8,offset:4}},size:function(L,P){return P.size.length?{buffer:P.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*P.size/M.maxSize)]}},borderSize:function(L,P){return P.borderSize.length?{buffer:P.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*P.borderSize/M.maxSize)]}},colorId:function(L,P){return P.color.length?{buffer:P.colorBuffer,stride:M.tooManyColors?8:4,offset:0}:{constant:M.tooManyColors?O.slice(4*P.color,4*P.color+4):[P.color]}},borderColorId:function(L,P){return P.borderColor.length?{buffer:P.colorBuffer,stride:M.tooManyColors?8:4,offset:M.tooManyColors?4:2}:{constant:M.tooManyColors?O.slice(4*P.borderColor,4*P.borderColor+4):[P.borderColor]}},isActive:function(L,P){return!0===P.activation?{constant:[1]}:P.activation?P.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:c.prop("elements"),count:c.prop("count"),offset:c.prop("offset"),primitive:"points"},N=i({},I);N.frag=v(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),N.vert=v(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=c(N);var F=i({},I);F.frag=v(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),F.vert=v(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),p&&(F.frag=F.frag.replace("smoothstep","smoothStep"),N.frag=N.frag.replace("smoothstep","smoothStep")),this.drawCircle=c(F)}u.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},u.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},u.prototype.draw=function(){for(var c=this,E=arguments.length,M=new Array(E),S=0;S<E;S++)M[S]=arguments[S];var C=this.groups;if(1===M.length&&Array.isArray(M[0])&&(null===M[0][0]||Array.isArray(M[0][0]))&&(M=M[0]),this.regl._refresh(),M.length)for(var O=0;O<M.length;O++)this.drawItem(O,M[O]);else C.forEach(function(I,N){c.drawItem(N)});return this},u.prototype.drawItem=function(c,E){var M=this.groups,S=M[c];if("number"==typeof E&&(c=E,S=M[E],E=null),S&&S.count&&S.opacity){S.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,S,E));for(var C=[],O=1;O<S.activation.length;O++)S.activation[O]&&(!0===S.activation[O]||S.activation[O].data.length)&&C.push.apply(C,b(this.getMarkerDrawOptions(O,S,E)));C.length&&this.drawMarker(C)}},u.prototype.getMarkerDrawOptions=function(c,E,M){var S=E.range,C=E.tree,O=E.viewport,I=E.activation,N=E.selectionBuffer,F=E.count;if(!C)return M?[i({},E,{markerTexture:this.markerTextures[c],activation:I[c],count:M.length,elements:M,offset:0})]:[i({},E,{markerTexture:this.markerTextures[c],activation:I[c],offset:0})];var L=[],P=C.range(S,{lod:!0,px:[(S[2]-S[0])/O.width,(S[3]-S[1])/O.height]});if(M){for(var j=I[c].data,U=new Uint8Array(F),$=0;$<M.length;$++){var X=M[$];U[X]=j?j[X]:1}N.subdata(U)}for(var te=P.length;te--;){var ae=y(P[te],2),J=ae[0];L.push(i({},E,{markerTexture:this.markerTextures[c],activation:M?N:I[c],offset:J,count:ae[1]-J}))}return L},u.prototype.update=function(){for(var c=this,E=arguments.length,M=new Array(E),S=0;S<E;S++)M[S]=arguments[S];if(M.length){1===M.length&&Array.isArray(M[0])&&(M=M[0]);var C=this.groups,O=this.gl,I=this.regl,N=this.maxSize,F=this.maxColors,L=this.palette;this.groups=C=M.map(function(P,j){var U=C[j];if(void 0===P)return U;null===P?P={positions:null}:"function"==typeof P?P={ondraw:P}:"number"==typeof P[0]&&(P={positions:P}),null===(P=h(P,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(P.positions=[]),null!=P.tooManyColors&&(c.tooManyColors=P.tooManyColors),U||(C[j]=U={id:j,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:I.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},P=i({},u.defaults,P)),P.positions&&!("marker"in P)&&(P.marker=U.marker,delete U.marker),P.marker&&!("positions"in P)&&(P.positions=U.positions,delete U.positions);var $=0,X=0;if(s(U,P,[{snap:!0,size:function(ye,Te){return null==ye&&(ye=u.defaults.size),$+=ye&&ye.length?1:0,ye},borderSize:function(ye,Te){return null==ye&&(ye=u.defaults.borderSize),$+=ye&&ye.length?1:0,ye},opacity:parseFloat,color:function(ye,Te){return null==ye&&(ye=u.defaults.color),ye=c.updateColor(ye),X++,ye},borderColor:function(ye,Te){return null==ye&&(ye=u.defaults.borderColor),ye=c.updateColor(ye),X++,ye},bounds:function(ye,Te,Le){return"range"in Le||(Le.range=null),ye},positions:function(ye,Te,Le){var Oe=Te.snap,Re=Te.positionBuffer,Ve=Te.positionFractBuffer,_e=Te.selectionBuffer;if(ye.x||ye.y)return Te.xAttr=ye.x.length?{buffer:I.buffer(ye.x),offset:0,stride:4,count:ye.x.length}:{buffer:ye.x.buffer,offset:4*ye.x.offset||0,stride:4*(ye.x.stride||1),count:ye.x.count},Te.yAttr=ye.y.length?{buffer:I.buffer(ye.y),offset:0,stride:4,count:ye.y.length}:{buffer:ye.y.buffer,offset:4*ye.y.offset||0,stride:4*(ye.y.stride||1),count:ye.y.count},Te.count=Math.max(Te.xAttr.count,Te.yAttr.count),ye;ye=d(ye,"float64");var Ae=Te.count=Math.floor(ye.length/2),Fe=Te.bounds=Ae?o(ye,2):null;if(Le.range||Te.range||(delete Te.range,Le.range=Fe),Le.marker||Te.marker||(delete Te.marker,Le.marker=null),Oe&&(!0===Oe||Ae>Oe)?Te.tree=l(ye,{bounds:Fe}):Oe&&Oe.length&&(Te.tree=Oe),Te.tree){var Pe={primitive:"points",usage:"static",data:Te.tree,type:"uint32"};Te.elements?Te.elements(Pe):Te.elements=I.elements(Pe)}var Be=f.float32(ye);return Re({data:Be,usage:"dynamic"}),Ve({data:f.fract32(ye,Be),usage:"dynamic"}),_e({data:new Uint8Array(Ae),type:"uint8",usage:"stream"}),ye}},{marker:function(ye,Te,Le){var Oe=Te.activation;if(Oe.forEach(function(Be){return Be&&Be.destroy&&Be.destroy()}),Oe.length=0,ye&&"number"!=typeof ye[0]){for(var Re=[],Ve=0,_e=Math.min(ye.length,Te.count);Ve<_e;Ve++){var Ae=c.addMarker(ye[Ve]);Re[Ae]||(Re[Ae]=new Uint8Array(Te.count)),Re[Ae][Ve]=1}for(var Fe=0;Fe<Re.length;Fe++)if(Re[Fe]){var Pe={data:Re[Fe],type:"uint8",usage:"static"};Oe[Fe]?Oe[Fe](Pe):Oe[Fe]=I.buffer(Pe),Oe[Fe].data=Re[Fe]}}else Oe[c.addMarker(ye)]=!0;return ye},range:function(ye,Te,Le){var Oe=Te.bounds;if(Oe)return ye||(ye=Oe),Te.scale=[1/(ye[2]-ye[0]),1/(ye[3]-ye[1])],Te.translate=[-ye[0],-ye[1]],Te.scaleFract=f.fract(Te.scale),Te.translateFract=f.fract(Te.translate),ye},viewport:function(ye){return g(ye||[O.drawingBufferWidth,O.drawingBufferHeight])}}]),$){var ae=U.count,J=U.size,ee=U.borderSize,se=U.sizeBuffer,G=new Uint8Array(2*ae);if(J.length||ee.length)for(var H=0;H<ae;H++)G[2*H]=Math.round(255*(null==J[H]?J:J[H])/N),G[2*H+1]=Math.round(255*(null==ee[H]?ee:ee[H])/N);se({data:G,usage:"dynamic"})}if(X){var Y,W=U.count,ne=U.color,re=U.borderColor,ce=U.colorBuffer;if(c.tooManyColors){if(ne.length||re.length){Y=new Uint8Array(8*W);for(var fe=0;fe<W;fe++){var me=ne[fe];Y[8*fe]=L[4*me],Y[8*fe+1]=L[4*me+1],Y[8*fe+2]=L[4*me+2],Y[8*fe+3]=L[4*me+3];var pe=re[fe];Y[8*fe+4]=L[4*pe],Y[8*fe+5]=L[4*pe+1],Y[8*fe+6]=L[4*pe+2],Y[8*fe+7]=L[4*pe+3]}}}else if(ne.length||re.length){Y=new Uint8Array(4*W+2);for(var we=0;we<W;we++)null!=ne[we]&&(Y[4*we]=ne[we]%F,Y[4*we+1]=Math.floor(ne[we]/F)),null!=re[we]&&(Y[4*we+2]=re[we]%F,Y[4*we+3]=Math.floor(re[we]/F))}ce({data:Y||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return U})}},u.prototype.addMarker=function(c){var E,M=this.markerTextures,S=this.regl,C=this.markerCache,O=null==c?0:C.indexOf(c);if(O>=0)return O;if(c instanceof Uint8Array||c instanceof Uint8ClampedArray)E=c;else{E=new Uint8Array(c.length);for(var I=0,N=c.length;I<N;I++)E[I]=255*c[I]}var F=Math.floor(Math.sqrt(E.length));return O=M.length,C.push(c),M.push(S.texture({channels:1,data:E,radius:F,mag:"linear",min:"linear"})),O},u.prototype.updateColor=function(c){var E=this.paletteIds,M=this.palette,S=this.maxColors;Array.isArray(c)||(c=[c]);var C=[];if("number"==typeof c[0]){var O=[];if(Array.isArray(c))for(var I=0;I<c.length;I+=4)O.push(c.slice(I,I+4));else for(var N=0;N<c.length;N+=4)O.push(c.subarray(N,N+4));c=O}for(var F=0;F<c.length;F++){var L=c[F];L=e(L,"uint8");var P=a(L,!1);if(null==E[P]){var j=M.length;E[P]=Math.floor(j/4),M[j]=L[0],M[j+1]=L[1],M[j+2]=L[2],M[j+3]=L[3]}C[F]=E[P]}return!this.tooManyColors&&M.length>4*S&&(this.tooManyColors=!0),this.updatePalette(M),1===C.length?C[0]:C},u.prototype.updatePalette=function(c){if(!this.tooManyColors){var E=this.maxColors,M=this.paletteTexture,S=Math.ceil(.25*c.length/E);if(S>1)for(var C=.25*(c=c.slice()).length%E;C<S*E;C++)c.push(0,0,0,0);M.height<S&&M.resize(E,S),M.subimage({width:Math.min(.25*c.length,E),height:S,data:c},0,0)}},u.prototype.destroy=function(){return this.groups.forEach(function(c){c.sizeBuffer.destroy(),c.positionBuffer.destroy(),c.positionFractBuffer.destroy(),c.colorBuffer.destroy(),c.activation.forEach(function(E){return E&&E.destroy&&E.destroy()}),c.selectionBuffer.destroy(),c.elements&&c.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(c){return c&&c.destroy&&c.destroy()}),this};var w=x("object-assign");ue.exports=function(c,E){var M=new m(c,E),S=M.render.bind(M);return w(S,{render:S,update:M.update.bind(M),draw:M.draw.bind(M),destroy:M.destroy.bind(M),regl:M.regl,gl:M.gl,canvas:M.gl.canvas,groups:M.groups,markers:M.markerCache,palette:M.palette}),S}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(x,ue,le){"use strict";var y=x("regl-scatter2d"),b=x("pick-by-alias"),T=x("array-bounds"),_=x("raf"),e=x("array-range"),o=x("parse-rect"),a=x("flatten-vertex-data");function l(s,d){if(!(this instanceof l))return new l(s,d);this.traces=[],this.passes={},this.regl=s,this.scatter=y(s),this.canvas=this.scatter.canvas}function i(s,d,p){return(null!=s.id?s.id:s)<<16|(255&d)<<8|255&p}function v(s,d,p){var f,g,m,u,w=s[d],c=s[p];return w.length>2?(f=w[1],g=w[3]):w.length?(f=w[0],g=w[1]):(f=w.y,g=w.y+w.height),c.length>2?(m=c[0],u=c[2]):c.length?(m=c[0],u=c[1]):(m=c.x,u=c.x+c.width),[m,f,u,g]}function h(s){if("number"==typeof s)return[s,s,s,s];if(2===s.length)return[s[0],s[1],s[0],s[1]];var d=o(s);return[d.x,d.y,d.x+d.width,d.y+d.height]}ue.exports=l,l.prototype.render=function(){for(var s,d=this,p=[],f=arguments.length;f--;)p[f]=arguments[f];return p.length&&(s=this).update.apply(s,p),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=_(function(){d.draw(),d.dirty=!0,d.planned=null})):(this.draw(),this.dirty=!0,_(function(){d.dirty=!1})),this)},l.prototype.update=function(){for(var s,d=[],p=arguments.length;p--;)d[p]=arguments[p];if(d.length){for(var f=0;f<d.length;f++)this.updateItem(f,d[f]);this.traces=this.traces.filter(Boolean);for(var g=[],m=0,u=0;u<this.traces.length;u++){for(var w=this.traces[u],c=this.traces[u].passes,E=0;E<c.length;E++)g.push(this.passes[c[E]]);w.passOffset=m,m+=w.passes.length}return(s=this.scatter).update.apply(s,g),this}},l.prototype.updateItem=function(s,d){var p=this.regl;if(null===d)return this.traces[s]=null,this;if(!d)return this;var f,g=b(d,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[s]||(this.traces[s]={id:s,buffer:p.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:o([p._gl.drawingBufferWidth,p._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=g.color&&(m.color=g.color),null!=g.size&&(m.size=g.size),null!=g.marker&&(m.marker=g.marker),null!=g.borderColor&&(m.borderColor=g.borderColor),null!=g.borderSize&&(m.borderSize=g.borderSize),null!=g.opacity&&(m.opacity=g.opacity),g.viewport&&(m.viewport=o(g.viewport)),null!=g.diagonal&&(m.diagonal=g.diagonal),null!=g.upper&&(m.upper=g.upper),null!=g.lower&&(m.lower=g.lower),g.data){m.buffer(a(g.data)),m.columns=g.data.length,m.count=g.data[0].length,m.bounds=[];for(var u=0;u<m.columns;u++)m.bounds[u]=T(g.data[u],1)}g.range&&(m.range=g.range,f=m.range&&"number"!=typeof m.range[0]),g.domain&&(m.domain=g.domain);var w=!1;null!=g.padding&&(Array.isArray(g.padding)&&g.padding.length===m.columns&&"number"==typeof g.padding[g.padding.length-1]?(m.padding=g.padding.map(h),w=!0):m.padding=h(g.padding));var c=m.columns,E=m.count,M=m.viewport.width,S=m.viewport.height,C=m.viewport.x,O=m.viewport.y,I=M/c,N=S/c;m.passes=[];for(var F=0;F<c;F++)for(var L=0;L<c;L++)if((m.diagonal||L!==F)&&(m.upper||!(F>L))&&(m.lower||!(F<L))){var P=i(m.id,F,L),j=this.passes[P]||(this.passes[P]={});if(g.data&&(j.positions=g.transpose?{x:{buffer:m.buffer,offset:L,count:E,stride:c},y:{buffer:m.buffer,offset:F,count:E,stride:c}}:{x:{buffer:m.buffer,offset:L*E,count:E},y:{buffer:m.buffer,offset:F*E,count:E}},j.bounds=v(m.bounds,F,L)),g.domain||g.viewport||g.data){var U=w?v(m.padding,F,L):m.padding;if(m.domain){var $=v(m.domain,F,L);j.viewport=[C+$[0]*M+U[0],O+$[1]*S+U[1],C+$[2]*M-U[2],O+$[3]*S-U[3]]}else j.viewport=[C+L*I+I*U[0],O+F*N+N*U[1],C+(L+1)*I-I*U[2],O+(F+1)*N-N*U[3]]}g.color&&(j.color=m.color),g.size&&(j.size=m.size),g.marker&&(j.marker=m.marker),g.borderSize&&(j.borderSize=m.borderSize),g.borderColor&&(j.borderColor=m.borderColor),g.opacity&&(j.opacity=m.opacity),g.range&&(j.range=f?v(m.range,F,L):m.range||j.bounds),m.passes.push(P)}return this},l.prototype.draw=function(){for(var s,d=[],p=arguments.length;p--;)d[p]=arguments[p];if(d.length){for(var f=[],g=0;g<d.length;g++)if("number"==typeof d[g]){var m=this.traces[d[g]],w=m.passOffset;f.push.apply(f,e(w,w+m.passes.length))}else if(d[g].length){var c=d[g],E=this.traces[g],M=E.passes,S=E.passOffset;M=M.map(function(C,O){f[S+O]=c})}(s=this.scatter).draw.apply(s,f)}else this.scatter.draw();return this},l.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(x,ue,le){var b;b=function(){function y(Ie,He){this.id=ne++,this.type=Ie,this.data=He}function b(Ie){return"["+function He(Ye){if(0===Ye.length)return[];var tt=Ye.charAt(0),ot=Ye.charAt(Ye.length-1);if(1<Ye.length&&tt===ot&&('"'===tt||"'"===tt))return['"'+Ye.substr(1,Ye.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(tt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ye))return He(Ye.substr(0,tt.index)).concat(He(tt[1])).concat(He(Ye.substr(tt.index+tt[0].length)));if(1===(tt=Ye.split(".")).length)return['"'+Ye.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ye=[],ot=0;ot<tt.length;++ot)Ye=Ye.concat(He(tt[ot]));return Ye}(Ie).join("][")+"]"}function T(Ie){return"string"==typeof Ie?Ie.split():Ie}function _(Ie){return"string"==typeof Ie?document.querySelector(Ie):Ie}function o(Ie,He){for(var Ye=Array(Ie),tt=0;tt<Ie;++tt)Ye[tt]=He(tt);return Ye}function a(Ie){var He,Ye;return He=(65535<Ie)<<4,He|=Ye=(255<(Ie>>>=He))<<3,(He|=Ye=(15<(Ie>>>=Ye))<<2)|(Ye=(3<(Ie>>>=Ye))<<1)|Ie>>>Ye>>1}function l(){function Ie(tt){e:{for(var ot=16;268435456>=ot;ot*=16)if(tt<=ot){tt=ot;break e}tt=0}return 0<(ot=Ye[a(tt)>>2]).length?ot.pop():new ArrayBuffer(tt)}function He(tt){Ye[a(tt.byteLength)>>2].push(tt)}var Ye=o(8,function(){return[]});return{alloc:Ie,free:He,allocType:function(tt,ot){var st=null;switch(tt){case 5120:st=new Int8Array(Ie(ot),0,ot);break;case 5121:st=new Uint8Array(Ie(ot),0,ot);break;case 5122:st=new Int16Array(Ie(2*ot),0,ot);break;case 5123:st=new Uint16Array(Ie(2*ot),0,ot);break;case 5124:st=new Int32Array(Ie(4*ot),0,ot);break;case 5125:st=new Uint32Array(Ie(4*ot),0,ot);break;case 5126:st=new Float32Array(Ie(4*ot),0,ot);break;default:return null}return st.length!==ot?st.subarray(0,ot):st},freeType:function(tt){He(tt.buffer)}}}function i(Ie){return!!Ie&&"object"==typeof Ie&&Array.isArray(Ie.shape)&&Array.isArray(Ie.stride)&&"number"==typeof Ie.offset&&Ie.shape.length===Ie.stride.length&&(Array.isArray(Ie.data)||we(Ie.data))}function v(Ie,He,Ye,tt,ot,st){for(var bt=0;bt<He;++bt)for(var wt=Ie[bt],Ut=0;Ut<Ye;++Ut)for(var Kt=wt[Ut],vt=0;vt<tt;++vt)ot[st++]=Kt[vt]}function h(Ie){return 0|Le[Object.prototype.toString.call(Ie)]}function s(Ie,He){for(var Ye=0;Ye<He.length;++Ye)Ie[Ye]=He[Ye]}function d(Ie,He,Ye,tt,ot,st,bt){for(var wt=0,Ut=0;Ut<Ye;++Ut)for(var Kt=0;Kt<tt;++Kt)Ie[wt++]=He[ot*Ut+st*Kt+bt]}function g(Ie){for(var He=me.allocType(5123,Ie.length),Ye=0;Ye<Ie.length;++Ye)if(isNaN(Ie[Ye]))He[Ye]=65535;else if(1/0===Ie[Ye])He[Ye]=31744;else if(-1/0===Ie[Ye])He[Ye]=64512;else{Pe[0]=Ie[Ye];var tt=(st=Be[0])>>>31<<15,ot=(st<<1>>>24)-127,st=st>>13&1023;He[Ye]=-24>ot?tt:-14>ot?tt+(st+1024>>-14-ot):15<ot?tt+31744:tt+(ot+15<<10)+st}return He}function m(Ie){return Array.isArray(Ie)||we(Ie)}function u(Ie){return"[object "+Ie+"]"}function w(Ie){return Array.isArray(Ie)&&(0===Ie.length||"number"==typeof Ie[0])}function c(Ie){return!(!Array.isArray(Ie)||0===Ie.length||!m(Ie[0]))}function E(Ie){return Object.prototype.toString.call(Ie)}function M(Ie){if(!Ie)return!1;var He=E(Ie);return 0<=Tt.indexOf(He)||w(Ie)||c(Ie)||i(Ie)}function S(Ie,He){36193===Ie.type?(Ie.data=g(He),me.freeType(He)):Ie.data=He}function C(Ie,He,Ye,tt,ot,st){if(Ie=void 0!==Vt[Ie]?Vt[Ie]:Je[Ie]*Ct[He],st&&(Ie*=6),ot){for(tt=0;1<=Ye;)tt+=Ie*Ye*Ye,Ye/=2;return tt}return Ie*Ye*tt}function N(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function j(Ie,He){return Ie>>>He|Ie<<32-He}function U(Ie,He){var Ye=(65535&Ie)+(65535&He);return(Ie>>16)+(He>>16)+(Ye>>16)<<16|65535&Ye}function $(Ie){return Array.prototype.slice.call(Ie)}function X(Ie){return $(Ie).join("")}function ae(Ie){return Array.isArray(Ie)||we(Ie)||i(Ie)}function J(Ie){return Ie.sort(function(He,Ye){return"viewport"===He?-1:"viewport"===Ye?1:He<Ye?-1:1})}function ee(Ie,He,Ye,tt){this.thisDep=Ie,this.contextDep=He,this.propDep=Ye,this.append=tt}function se(Ie){return Ie&&!(Ie.thisDep||Ie.contextDep||Ie.propDep)}function G(Ie){return new ee(!1,!1,!1,Ie)}function H(Ie,He){var Ye=Ie.type;if(0===Ye)return new ee(!0,1<=(Ye=Ie.data.length),2<=Ye,He);if(4===Ye)return new ee((Ye=Ie.data).thisDep,Ye.contextDep,Ye.propDep,He);if(5===Ye)return new ee(!1,!1,!1,He);if(6===Ye){for(var tt=Ye=!1,ot=!1,st=0;st<Ie.data.length;++st){var bt=Ie.data[st];1===bt.type?ot=!0:2===bt.type?tt=!0:3===bt.type?Ye=!0:0===bt.type?(Ye=!0,1<=(bt=bt.data)&&(tt=!0),2<=bt&&(ot=!0)):4===bt.type&&(Ye=Ye||bt.data.thisDep,tt=tt||bt.data.contextDep,ot=ot||bt.data.propDep)}return new ee(Ye,tt,ot,He)}return new ee(3===Ye,2===Ye,1===Ye,He)}function Y(Ie,He,Ye,tt,ot,st,bt,wt,Ut,Kt,vt,Et,$t,Dt,Pt,je){function rt(qt){return qt.replace(".","_")}function pt(qt,_n,Cn){var Jn=rt(qt);oi.push(qt),ci[Jn]=sr[Jn]=!!Cn,Or[Jn]=_n}function It(qt,_n,Cn){var Jn=rt(qt);oi.push(qt),Array.isArray(Cn)?(sr[Jn]=Cn.slice(),ci[Jn]=Cn.slice()):sr[Jn]=ci[Jn]=Cn,Dr[Jn]=_n}function jt(){var qt=function te(Ie){function He(){var vt=[],Et=[];return W(function(){vt.push.apply(vt,$(arguments))},{def:function(){var $t="v"+ot++;return Et.push($t),0<arguments.length&&(vt.push($t,"="),vt.push.apply(vt,$(arguments)),vt.push(";")),$t},toString:function(){return X([0<Et.length?"var "+Et.join(",")+";":"",X(vt)])}})}function Ye(){function vt(je,rt){$t(je,rt,"=",Et.def(je,rt),";")}var Et=He(),$t=He(),Dt=Et.toString,Pt=$t.toString;return W(function(){Et.apply(Et,$(arguments))},{def:Et.def,entry:Et,exit:$t,save:vt,set:function(je,rt,pt){vt(je,rt),Et(je,rt,"=",pt,";")},toString:function(){return Dt()+Pt()}})}var tt=Ie&&Ie.cache,ot=0,st=[],bt=[],wt=[],Ut=He(),Kt={};return{global:Ut,link:function(vt,Et){var $t=Et&&Et.stable;if(!$t)for(var Dt=0;Dt<bt.length;++Dt)if(bt[Dt]===vt&&!wt[Dt])return st[Dt];return Dt="g"+ot++,st.push(Dt),bt.push(vt),wt.push($t),Dt},block:He,proc:function(vt,Et){function $t(){var rt="a"+Dt.length;return Dt.push(rt),rt}var Dt=[];Et=Et||0;for(var Pt=0;Pt<Et;++Pt)$t();var je=(Pt=Ye()).toString;return Kt[vt]=W(Pt,{arg:$t,toString:function(){return X(["function(",Dt.join(),"){",je(),"}"])}})},scope:Ye,cond:function(){var vt=X(arguments),Et=Ye(),$t=Ye(),Dt=Et.toString,Pt=$t.toString;return W(Et,{then:function(){return Et.apply(Et,$(arguments)),this},else:function(){return $t.apply($t,$(arguments)),this},toString:function(){var je=Pt();return je&&(je="else{"+je+"}"),X(["if(",vt,"){",Dt(),"}",je])}})},compile:function(){var vt=['"use strict";',Ut,"return {"];Object.keys(Kt).forEach(function(Dt){vt.push('"',Dt,'":',Kt[Dt].toString(),",")}),vt.push("}");var Et,$t=X(vt).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return tt&&(Et=function(Dt){for(var Pt,je="",rt=0;rt<Dt.length;rt++)Pt=Dt.charCodeAt(rt),je+="0123456789abcdef".charAt(Pt>>>4&15)+"0123456789abcdef".charAt(15&Pt);return je}(function(Dt){for(var Pt=Array(Dt.length>>2),je=0;je<Pt.length;je++)Pt[je]=0;for(je=0;je<8*Dt.length;je+=8)Pt[je>>5]|=(255&Dt.charCodeAt(je/8))<<24-je%32;var rt,pt,It,jt,Qt,fn,an,Sn,Yn,kn,cn,vn=8*Dt.length;for(Dt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],je=Array(64),Pt[vn>>5]|=128<<24-vn%32,Pt[15+(vn+64>>9<<4)]=vn,Sn=0;Sn<Pt.length;Sn+=16){for(vn=Dt[0],rt=Dt[1],pt=Dt[2],It=Dt[3],jt=Dt[4],Qt=Dt[5],fn=Dt[6],an=Dt[7],Yn=0;64>Yn;Yn++){var hn;16>Yn?je[Yn]=Pt[Yn+Sn]:(kn=Yn,cn=U(cn=j(cn=je[Yn-2],17)^j(cn,19)^cn>>>10,je[Yn-7]),hn=j(hn=je[Yn-15],7)^j(hn,18)^hn>>>3,je[kn]=U(U(cn,hn),je[Yn-16])),kn=U(U(U(U(an,kn=j(kn=jt,6)^j(kn,11)^j(kn,25)),jt&Qt^~jt&fn),rn[Yn]),je[Yn]),cn=U(an=j(an=vn,2)^j(an,13)^j(an,22),vn&rt^vn&pt^rt&pt),an=fn,fn=Qt,Qt=jt,jt=U(It,kn),It=pt,pt=rt,rt=vn,vn=U(kn,cn)}Dt[0]=U(vn,Dt[0]),Dt[1]=U(rt,Dt[1]),Dt[2]=U(pt,Dt[2]),Dt[3]=U(It,Dt[3]),Dt[4]=U(jt,Dt[4]),Dt[5]=U(Qt,Dt[5]),Dt[6]=U(fn,Dt[6]),Dt[7]=U(an,Dt[7])}for(Pt="",je=0;je<32*Dt.length;je+=8)Pt+=String.fromCharCode(Dt[je>>5]>>>24-je%32&255);return Pt}(function(Dt){for(var Pt,je,rt="",pt=-1;++pt<Dt.length;)Pt=Dt.charCodeAt(pt),je=pt+1<Dt.length?Dt.charCodeAt(pt+1):0,55296<=Pt&&56319>=Pt&&56320<=je&&57343>=je&&(Pt=65536+((1023&Pt)<<10)+(1023&je),pt++),127>=Pt?rt+=String.fromCharCode(Pt):2047>=Pt?rt+=String.fromCharCode(192|Pt>>>6&31,128|63&Pt):65535>=Pt?rt+=String.fromCharCode(224|Pt>>>12&15,128|Pt>>>6&63,128|63&Pt):2097151>=Pt&&(rt+=String.fromCharCode(240|Pt>>>18&7,128|Pt>>>12&63,128|Pt>>>6&63,128|63&Pt));return rt}($t))),tt[Et])?tt[Et].apply(null,bt):($t=Function.apply(null,st.concat($t)),tt&&(tt[Et]=$t),$t.apply(null,bt))}}}({cache:Pt}),_n=qt.link,Cn=qt.global;qt.id=tr++,qt.batchId="0";var Jn=_n(wr),Xn=qt.shared={props:"a0"};Object.keys(wr).forEach(function(Vn){Xn[Vn]=Cn.def(Jn,".",Vn)});var Hn=qt.next={},Bn=qt.current={};Object.keys(Dr).forEach(function(Vn){Array.isArray(sr[Vn])&&(Hn[Vn]=Cn.def(Xn.next,".",Vn),Bn[Vn]=Cn.def(Xn.current,".",Vn))});var zn=qt.constants={};Object.keys(gn).forEach(function(Vn){zn[Vn]=Cn.def(JSON.stringify(gn[Vn]))}),qt.invoke=function(Vn,On){switch(On.type){case 0:var dr=["this",Xn.context,Xn.props,qt.batchId];return Vn.def(_n(On.data),".call(",dr.slice(0,Math.max(On.data.length+1,4)),")");case 1:return Vn.def(Xn.props,On.data);case 2:return Vn.def(Xn.context,On.data);case 3:return Vn.def("this",On.data);case 4:return On.data.append(qt,Vn),On.data.ref;case 5:return On.data.toString();case 6:return On.data.map(function(ir){return qt.invoke(Vn,ir)})}},qt.attribCache={};var jn={};return qt.scopeAttrib=function(Vn){if((Vn=He.id(Vn))in jn)return jn[Vn];var On=Kt.scope[Vn];return On||(On=Kt.scope[Vn]=new Nr),jn[Vn]=_n(On)},qt}function Yn(qt,_n,Cn,Jn,Xn){function Hn(Fr){var Vr=zn[Fr];Vr&&(Vn[Fr]=Vr)}var Fr,Ur,Xr,ri,Bn=function(Fr,Vr){if("string"==typeof(Ur=Fr.static).frag&&"string"==typeof Ur.vert){if(0<Object.keys(Vr.dynamic).length)return null;var Ur=Vr.static,Xr=Object.keys(Ur);if(0<Xr.length&&"number"==typeof Ur[Xr[0]]){for(var ri=[],_i=0;_i<Xr.length;++_i)ri.push([0|Ur[Xr[_i]],Xr[_i]]);return ri}}return null}(qt,_n),zn=function(Fr,Vr,Ur){function Xr(hi){if(hi in ri){var Gr=ri[hi];hi=!0;var Mi,vi,_a=0|Gr.x,Co=0|Gr.y;return"width"in Gr?Mi=0|Gr.width:hi=!1,"height"in Gr?vi=0|Gr.height:hi=!1,new ee(!hi&&Vr&&Vr.thisDep,!hi&&Vr&&Vr.contextDep,!hi&&Vr&&Vr.propDep,function(yo,Ha){var qa=yo.shared.context,ho=Mi;"width"in Gr||(ho=Ha.def(qa,".","framebufferWidth","-",_a));var ka=vi;return"height"in Gr||(ka=Ha.def(qa,".","framebufferHeight","-",Co)),[_a,Co,ho,ka]})}if(hi in _i){var oo=_i[hi];return hi=H(oo,function(yo,Ha){var qa=yo.invoke(Ha,oo),ho=yo.shared.context,ka=Ha.def(qa,".x|0"),ds=Ha.def(qa,".y|0");return[ka,ds,Ha.def('"width" in ',qa,"?",qa,".width|0:","(",ho,".","framebufferWidth","-",ka,")"),qa=Ha.def('"height" in ',qa,"?",qa,".height|0:","(",ho,".","framebufferHeight","-",ds,")")]}),Vr&&(hi.thisDep=hi.thisDep||Vr.thisDep,hi.contextDep=hi.contextDep||Vr.contextDep,hi.propDep=hi.propDep||Vr.propDep),hi}return Vr?new ee(Vr.thisDep,Vr.contextDep,Vr.propDep,function(yo,Ha){var qa=yo.shared.context;return[0,0,Ha.def(qa,".","framebufferWidth"),Ha.def(qa,".","framebufferHeight")]}):null}var ri=Fr.static,_i=Fr.dynamic;if(Fr=Xr("viewport")){var ra=Fr;Fr=new ee(Fr.thisDep,Fr.contextDep,Fr.propDep,function(hi,Gr){var Mi=ra.append(hi,Gr),vi=hi.shared.context;return Gr.set(vi,".viewportWidth",Mi[2]),Gr.set(vi,".viewportHeight",Mi[3]),Mi})}return{viewport:Fr,scissor_box:Xr("scissor.box")}}(qt,dr=function Qt(qt,_n){var Cn=qt.static,Jn=qt.dynamic;if("framebuffer"in Cn){var Xn=Cn.framebuffer;return Xn?(Xn=wt.getFramebuffer(Xn),G(function(Bn,zn){var jn=Bn.link(Xn),Vn=Bn.shared;return zn.set(Vn.framebuffer,".next",jn),zn.set(Vn=Vn.context,".framebufferWidth",jn+".width"),zn.set(Vn,".framebufferHeight",jn+".height"),jn})):G(function(Bn,zn){var jn=Bn.shared;return zn.set(jn.framebuffer,".next","null"),zn.set(jn=jn.context,".framebufferWidth",jn+".drawingBufferWidth"),zn.set(jn,".framebufferHeight",jn+".drawingBufferHeight"),"null"})}if("framebuffer"in Jn){var Hn=Jn.framebuffer;return H(Hn,function(Bn,zn){var jn=Bn.invoke(zn,Hn),Vn=Bn.shared,On=Vn.framebuffer;return jn=zn.def(On,".getFramebuffer(",jn,")"),zn.set(On,".next",jn),zn.set(Vn=Vn.context,".framebufferWidth",jn+"?"+jn+".width:"+Vn+".drawingBufferWidth"),zn.set(Vn,".framebufferHeight",jn+"?"+jn+".height:"+Vn+".drawingBufferHeight"),jn})}return null}(qt)),jn=function an(qt,_n){function Cn(Tr,Fr){if(Tr in Jn){var Vr=0|Jn[Tr];return Fr?Hn.offset=Vr:Hn.instances=Vr,G(function(Xr,ri){return Fr&&(Xr.OFFSET=Vr),Vr})}if(Tr in Xn){var Ur=Xn[Tr];return H(Ur,function(Xr,ri){var _i=Xr.invoke(ri,Ur);return Fr&&(Xr.OFFSET=_i),_i})}if(Fr){if(jn)return G(function(Xr,ri){return Xr.OFFSET=0});if(Bn)return new ee(zn.thisDep,zn.contextDep,zn.propDep,function(Xr,ri){return ri.def(Xr.shared.vao+".currentVAO?"+Xr.shared.vao+".currentVAO.offset:0")})}else if(Bn)return new ee(zn.thisDep,zn.contextDep,zn.propDep,function(Xr,ri){return ri.def(Xr.shared.vao+".currentVAO?"+Xr.shared.vao+".currentVAO.instances:-1")});return null}var Jn=qt.static,Xn=qt.dynamic,Hn={},Bn=!1,zn=function(){if("vao"in Jn){var Tr=Jn.vao;return null!==Tr&&null===Kt.getVAO(Tr)&&(Tr=Kt.createVAO(Tr)),Bn=!0,Hn.vao=Tr,G(function(Vr){var Ur=Kt.getVAO(Tr);return Ur?Vr.link(Ur):"null"})}if("vao"in Xn){Bn=!0;var Fr=Xn.vao;return H(Fr,function(Vr,Ur){var Xr=Vr.invoke(Ur,Fr);return Ur.def(Vr.shared.vao+".getVAO("+Xr+")")})}return null}(),jn=!1,Vn=function(){if("elements"in Jn){var Tr=Jn.elements;if(Hn.elements=Tr,ae(Tr)){var Fr=Hn.elements=st.create(Tr,!0);Tr=st.getElements(Fr),jn=!0}else Tr&&(Tr=st.getElements(Tr),jn=!0);return(Fr=G(function(Ur,Xr){if(Tr){var ri=Ur.link(Tr);return Ur.ELEMENTS=ri}return Ur.ELEMENTS=null})).value=Tr,Fr}if("elements"in Xn){jn=!0;var Vr=Xn.elements;return H(Vr,function(Ur,Xr){var ri=(_i=Ur.shared).isBufferArgs,_i=_i.elements,ra=Ur.invoke(Xr,Vr),hi=Xr.def("null");return ri=Xr.def(ri,"(",ra,")"),ra=Ur.cond(ri).then(hi,"=",_i,".createStream(",ra,");").else(hi,"=",_i,".getElements(",ra,");"),Xr.entry(ra),Xr.exit(Ur.cond(ri).then(_i,".destroyStream(",hi,");")),Ur.ELEMENTS=hi})}return Bn?new ee(zn.thisDep,zn.contextDep,zn.propDep,function(Ur,Xr){return Xr.def(Ur.shared.vao+".currentVAO?"+Ur.shared.elements+".getElements("+Ur.shared.vao+".currentVAO.elements):null")}):null}(),On=Cn("offset",!0),dr=function(){if("primitive"in Jn){var Tr=Jn.primitive;return Hn.primitive=Tr,G(function(Vr,Ur){return Fe[Tr]})}if("primitive"in Xn){var Fr=Xn.primitive;return H(Fr,function(Vr,Ur){var Xr=Vr.constants.primTypes,ri=Vr.invoke(Ur,Fr);return Ur.def(Xr,"[",ri,"]")})}return jn?se(Vn)?G(Vn.value?function(Vr,Ur){return Ur.def(Vr.ELEMENTS,".primType")}:function(){return 4}):new ee(Vn.thisDep,Vn.contextDep,Vn.propDep,function(Vr,Ur){var Xr=Vr.ELEMENTS;return Ur.def(Xr,"?",Xr,".primType:",4)}):Bn?new ee(zn.thisDep,zn.contextDep,zn.propDep,function(Vr,Ur){return Ur.def(Vr.shared.vao+".currentVAO?"+Vr.shared.vao+".currentVAO.primitive:4")}):null}(),ir=function(){if("count"in Jn){var Tr=0|Jn.count;return Hn.count=Tr,G(function(){return Tr})}if("count"in Xn){var Fr=Xn.count;return H(Fr,function(Vr,Ur){return Vr.invoke(Ur,Fr)})}return jn?se(Vn)?Vn?On?new ee(On.thisDep,On.contextDep,On.propDep,function(Vr,Ur){return Ur.def(Vr.ELEMENTS,".vertCount-",Vr.OFFSET)}):G(function(Vr,Ur){return Ur.def(Vr.ELEMENTS,".vertCount")}):G(function(){return-1}):new ee(Vn.thisDep||On.thisDep,Vn.contextDep||On.contextDep,Vn.propDep||On.propDep,function(Vr,Ur){var Xr=Vr.ELEMENTS;return Vr.OFFSET?Ur.def(Xr,"?",Xr,".vertCount-",Vr.OFFSET,":-1"):Ur.def(Xr,"?",Xr,".vertCount:-1")}):Bn?new ee(zn.thisDep,zn.contextDep,zn.propDep,function(Vr,Ur){return Ur.def(Vr.shared.vao,".currentVAO?",Vr.shared.vao,".currentVAO.count:-1")}):null}(),br=Cn("instances",!1);return{elements:Vn,primitive:dr,count:ir,instances:br,offset:On,vao:zn,vaoActive:Bn,elementsActive:jn,static:Hn}}(qt),Vn=(Ur=(Fr=qt).static,Xr=Fr.dynamic,ri={},oi.forEach(function(_i){function ra(Gr,Mi){if(_i in Ur){var vi=Gr(Ur[_i]);ri[hi]=G(function(){return vi})}else if(_i in Xr){var _a=Xr[_i];ri[hi]=H(_a,function(Co,oo){return Mi(Co,oo,Co.invoke(oo,_a))})}}var hi=rt(_i);switch(_i){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return ra(function(Gr){return Gr},function(Gr,Mi,vi){return vi});case"depth.func":return ra(function(Gr){return Mn[Gr]},function(Gr,Mi,vi){return Mi.def(Gr.constants.compareFuncs,"[",vi,"]")});case"depth.range":return ra(function(Gr){return Gr},function(Gr,Mi,vi){return[Mi.def("+",vi,"[0]"),Mi=Mi.def("+",vi,"[1]")]});case"blend.func":return ra(function(Gr){return[dn["srcRGB"in Gr?Gr.srcRGB:Gr.src],dn["dstRGB"in Gr?Gr.dstRGB:Gr.dst],dn["srcAlpha"in Gr?Gr.srcAlpha:Gr.src],dn["dstAlpha"in Gr?Gr.dstAlpha:Gr.dst]]},function(Gr,Mi,vi){function _a(Ha,qa){return Mi.def('"',Ha,qa,'" in ',vi,"?",vi,".",Ha,qa,":",vi,".",Ha)}Gr=Gr.constants.blendFuncs;var Co=_a("src","RGB"),oo=_a("dst","RGB"),yo=(Co=Mi.def(Gr,"[",Co,"]"),Mi.def(Gr,"[",_a("src","Alpha"),"]"));return[Co,oo=Mi.def(Gr,"[",oo,"]"),yo,Gr=Mi.def(Gr,"[",_a("dst","Alpha"),"]")]});case"blend.equation":return ra(function(Gr){return"string"==typeof Gr?[xi[Gr],xi[Gr]]:"object"==typeof Gr?[xi[Gr.rgb],xi[Gr.alpha]]:void 0},function(Gr,Mi,vi){var _a=Gr.constants.blendEquations,Co=Mi.def(),oo=Mi.def();return(Gr=Gr.cond("typeof ",vi,'==="string"')).then(Co,"=",oo,"=",_a,"[",vi,"];"),Gr.else(Co,"=",_a,"[",vi,".rgb];",oo,"=",_a,"[",vi,".alpha];"),Mi(Gr),[Co,oo]});case"blend.color":return ra(function(Gr){return o(4,function(Mi){return+Gr[Mi]})},function(Gr,Mi,vi){return o(4,function(_a){return Mi.def("+",vi,"[",_a,"]")})});case"stencil.mask":return ra(function(Gr){return 0|Gr},function(Gr,Mi,vi){return Mi.def(vi,"|0")});case"stencil.func":return ra(function(Gr){return[Mn[Gr.cmp||"keep"],Gr.ref||0,"mask"in Gr?Gr.mask:-1]},function(Gr,Mi,vi){return[Gr=Mi.def('"cmp" in ',vi,"?",Gr.constants.compareFuncs,"[",vi,".cmp]",":",7680),Mi.def(vi,".ref|0"),Mi=Mi.def('"mask" in ',vi,"?",vi,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return ra(function(Gr){return["stencil.opBack"===_i?1029:1028,ln[Gr.fail||"keep"],ln[Gr.zfail||"keep"],ln[Gr.zpass||"keep"]]},function(Gr,Mi,vi){function _a(oo){return Mi.def('"',oo,'" in ',vi,"?",Co,"[",vi,".",oo,"]:",7680)}var Co=Gr.constants.stencilOps;return["stencil.opBack"===_i?1029:1028,_a("fail"),_a("zfail"),_a("zpass")]});case"polygonOffset.offset":return ra(function(Gr){return[0|Gr.factor,0|Gr.units]},function(Gr,Mi,vi){return[Mi.def(vi,".factor|0"),Mi=Mi.def(vi,".units|0")]});case"cull.face":return ra(function(Gr){var Mi=0;return"front"===Gr?Mi=1028:"back"===Gr&&(Mi=1029),Mi},function(Gr,Mi,vi){return Mi.def(vi,'==="front"?',1028,":",1029)});case"frontFace":return ra(function(Gr){return Ee[Gr]},function(Gr,Mi,vi){return Mi.def(vi+'==="cw"?2304:2305')});case"colorMask":return ra(function(Gr){return Gr.map(function(Mi){return!!Mi})},function(Gr,Mi,vi){return o(4,function(_a){return"!!"+vi+"["+_a+"]"})});case"sample.coverage":return ra(function(Gr){return["value"in Gr?Gr.value:1,!!Gr.invert]},function(Gr,Mi,vi){return[Mi.def('"value" in ',vi,"?+",vi,".value:1"),Mi=Mi.def("!!",vi,".invert")]})}}),ri),On=function fn(qt,_n,Cn){function Jn(Vn){if(Vn in Xn){var On=He.id(Xn[Vn]);return(Vn=G(function(){return On})).id=On,Vn}if(Vn in Hn){var dr=Hn[Vn];return H(dr,function(ir,br){var Tr=ir.invoke(br,dr);return br.def(ir.shared.strings,".id(",Tr,")")})}return null}var Xn=qt.static,Hn=qt.dynamic,Bn=Jn("frag"),zn=Jn("vert"),jn=null;return se(Bn)&&se(zn)?(jn=vt.program(zn.id,Bn.id,null,Cn),qt=G(function(Vn,On){return Vn.link(jn)})):qt=new ee(Bn&&Bn.thisDep||zn&&zn.thisDep,Bn&&Bn.contextDep||zn&&zn.contextDep,Bn&&Bn.propDep||zn&&zn.propDep,function(Vn,On){var dr,ir,br=Vn.shared.shader;return dr=Bn?Bn.append(Vn,On):On.def(br,".","frag"),ir=zn?zn.append(Vn,On):On.def(br,".","vert"),On.def(br+".program("+ir+","+dr+")")}),{frag:Bn,vert:zn,progVar:qt,program:jn}}(qt,0,Bn);Hn("viewport"),Hn(rt("scissor.box"));var dr,ir=0<Object.keys(Vn).length;if((dr={framebuffer:dr,draw:jn,shader:On,state:Vn,dirty:ir,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Fr){var Vr,Ur=Fr.static;if(Fr=Fr.dynamic,"profile"in Ur){var Xr=!!Ur.profile;(Vr=G(function(_i,ra){return Xr})).enable=Xr}else if("profile"in Fr){var ri=Fr.profile;Vr=H(ri,function(_i,ra){return _i.invoke(ra,ri)})}return Vr}(qt),dr.uniforms=function(Fr,Vr){var Ur=Fr.static,Xr=Fr.dynamic,ri={};return Object.keys(Ur).forEach(function(_i){var ra,hi=Ur[_i];if("number"==typeof hi||"boolean"==typeof hi)ra=G(function(){return hi});else if("function"==typeof hi){var Gr=hi._reglType;"texture2d"===Gr||"textureCube"===Gr?ra=G(function(Mi){return Mi.link(hi)}):"framebuffer"!==Gr&&"framebufferCube"!==Gr||(ra=G(function(Mi){return Mi.link(hi.color[0])}))}else m(hi)&&(ra=G(function(Mi){return Mi.global.def("[",o(hi.length,function(vi){return hi[vi]}),"]")}));ra.value=hi,ri[_i]=ra}),Object.keys(Xr).forEach(function(_i){var ra=Xr[_i];ri[_i]=H(ra,function(hi,Gr){return hi.invoke(Gr,ra)})}),ri}(Cn),dr.drawVAO=dr.scopeVAO=jn.vao,!dr.drawVAO&&On.program&&!Bn&&Ye.angle_instanced_arrays&&jn.static.elements){var br=!0;if(qt=On.program.attributes.map(function(Fr){return Fr=_n.static[Fr],br=br&&!!Fr,Fr}),br&&0<qt.length){var Tr=Kt.getVAO(Kt.createVAO({attributes:qt,elements:jn.static.elements}));dr.drawVAO=new ee(null,null,null,function(Fr,Vr){return Fr.link(Tr)}),dr.useVAO=!0}}return Bn?dr.useVAO=!0:dr.attributes=function Sn(qt,_n){var Cn=qt.static,Jn=qt.dynamic,Xn={};return Object.keys(Cn).forEach(function(Hn){var Bn=Cn[Hn],zn=He.id(Hn),jn=new Nr;if(ae(Bn))jn.state=1,jn.buffer=ot.getBuffer(ot.create(Bn,34962,!1,!0)),jn.type=0;else if(On=ot.getBuffer(Bn))jn.state=1,jn.buffer=On,jn.type=0;else if("constant"in Bn){var Vn=Bn.constant;jn.buffer="null",jn.state=2,"number"==typeof Vn?jn.x=Vn:un.forEach(function(Vr,Ur){Ur<Vn.length&&(jn[Vr]=Vn[Ur])})}else{var On=ae(Bn.buffer)?ot.getBuffer(ot.create(Bn.buffer,34962,!1,!0)):ot.getBuffer(Bn.buffer),dr=0|Bn.offset,ir=0|Bn.stride,br=0|Bn.size,Tr=!!Bn.normalized,Fr=0;"type"in Bn&&(Fr=Oe[Bn.type]),Bn=0|Bn.divisor,jn.buffer=On,jn.state=1,jn.size=br,jn.normalized=Tr,jn.type=Fr||On.dtype,jn.offset=dr,jn.stride=ir,jn.divisor=Bn}Xn[Hn]=G(function(Vr,Ur){var Xr=Vr.attribCache;if(zn in Xr)return Xr[zn];var ri={isStream:!1};return Object.keys(jn).forEach(function(_i){ri[_i]=jn[_i]}),jn.buffer&&(ri.buffer=Vr.link(jn.buffer),ri.type=ri.type||ri.buffer+".dtype"),Xr[zn]=ri})}),Object.keys(Jn).forEach(function(Hn){var Bn=Jn[Hn];Xn[Hn]=H(Bn,function(zn,jn){function Vn(Xr){jn(Tr[Xr],"=",On,".",Xr,"|0;")}var On=zn.invoke(jn,Bn),dr=zn.shared,ir=zn.constants,br=dr.isBufferArgs,Tr=(dr=dr.buffer,{isStream:jn.def(!1)}),Fr=new Nr;Fr.state=1,Object.keys(Fr).forEach(function(Xr){Tr[Xr]=jn.def(""+Fr[Xr])});var Vr=Tr.buffer,Ur=Tr.type;return jn("if(",br,"(",On,")){",Tr.isStream,"=true;",Vr,"=",dr,".createStream(",34962,",",On,");",Ur,"=",Vr,".dtype;","}else{",Vr,"=",dr,".getBuffer(",On,");","if(",Vr,"){",Ur,"=",Vr,".dtype;",'}else if("constant" in ',On,"){",Tr.state,"=",2,";","if(typeof "+On+'.constant === "number"){',Tr[un[0]],"=",On,".constant;",un.slice(1).map(function(Xr){return Tr[Xr]}).join("="),"=0;","}else{",un.map(function(Xr,ri){return Tr[Xr]+"="+On+".constant.length>"+ri+"?"+On+".constant["+ri+"]:0;"}).join(""),"}}else{","if(",br,"(",On,".buffer)){",Vr,"=",dr,".createStream(",34962,",",On,".buffer);","}else{",Vr,"=",dr,".getBuffer(",On,".buffer);","}",Ur,'="type" in ',On,"?",ir.glTypes,"[",On,".type]:",Vr,".dtype;",Tr.normalized,"=!!",On,".normalized;"),Vn("size"),Vn("offset"),Vn("stride"),Vn("divisor"),jn("}}"),jn.exit("if(",Tr.isStream,"){",dr,".destroyStream(",Vr,");","}"),Tr})}),Xn}(_n),dr.context=function(Fr){var Vr=Fr.static,Ur=Fr.dynamic,Xr={};return Object.keys(Vr).forEach(function(ri){var _i=Vr[ri];Xr[ri]=G(function(ra,hi){return"number"==typeof _i||"boolean"==typeof _i?""+_i:ra.link(_i)})}),Object.keys(Ur).forEach(function(ri){var _i=Ur[ri];Xr[ri]=H(_i,function(ra,hi){return ra.invoke(hi,_i)})}),Xr}(Jn),dr}function kn(qt,_n,Cn){var Jn=qt.shared.context,Xn=qt.scope();Object.keys(Cn).forEach(function(Hn){_n.save(Jn,"."+Hn);var Bn=Cn[Hn].append(qt,_n);Array.isArray(Bn)?Xn(Jn,".",Hn,"=[",Bn.join(),"];"):Xn(Jn,".",Hn,"=",Bn,";")}),_n(Xn)}function cn(qt,_n,Cn,Jn){var Xn,Hn=(zn=qt.shared).gl,Bn=zn.framebuffer;Er&&(Xn=_n.def(zn.extensions,".webgl_draw_buffers"));var zn=(jn=qt.constants).drawBuffer,jn=jn.backBuffer;qt=Cn?Cn.append(qt,_n):_n.def(Bn,".next"),Jn||_n("if(",qt,"!==",Bn,".cur){"),_n("if(",qt,"){",Hn,".bindFramebuffer(",36160,",",qt,".framebuffer);"),Er&&_n(Xn,".drawBuffersWEBGL(",zn,"[",qt,".colorAttachments.length]);"),_n("}else{",Hn,".bindFramebuffer(",36160,",null);"),Er&&_n(Xn,".drawBuffersWEBGL(",jn,");"),_n("}",Bn,".cur=",qt,";"),Jn||_n("}")}function vn(qt,_n,Cn){var Jn=qt.shared,Xn=Jn.gl,Hn=qt.current,Bn=qt.next,zn=Jn.current,jn=Jn.next,Vn=qt.cond(zn,".dirty");oi.forEach(function(On){var dr,ir;if(!((On=rt(On))in Cn.state))if(On in Bn){dr=Bn[On],ir=Hn[On];var br=o(sr[On].length,function(Tr){return Vn.def(dr,"[",Tr,"]")});Vn(qt.cond(br.map(function(Tr,Fr){return Tr+"!=="+ir+"["+Fr+"]"}).join("||")).then(Xn,".",Dr[On],"(",br,");",br.map(function(Tr,Fr){return ir+"["+Fr+"]="+Tr}).join(";"),";"))}else dr=Vn.def(jn,".",On),br=qt.cond(dr,"!==",zn,".",On),Vn(br),On in Or?br(qt.cond(dr).then(Xn,".enable(",Or[On],");").else(Xn,".disable(",Or[On],");"),zn,".",On,"=",dr,";"):br(Xn,".",Dr[On],"(",dr,");",zn,".",On,"=",dr,";")}),0===Object.keys(Cn.state).length&&Vn(zn,".dirty=false;"),_n(Vn)}function hn(qt,_n,Cn,Jn){var Xn,Hn=qt.shared,Bn=qt.current,zn=Hn.current,jn=Hn.gl;J(Object.keys(Cn)).forEach(function(Vn){var On=Cn[Vn];if(!Jn||Jn(On)){var dr=On.append(qt,_n);if(Or[Vn]){var ir=Or[Vn];se(On)?(Xn=qt.link(dr,{stable:!0}),_n(qt.cond(Xn).then(jn,".enable(",ir,");").else(jn,".disable(",ir,");")),_n(zn,".",Vn,"=",Xn,";")):(_n(qt.cond(dr).then(jn,".enable(",ir,");").else(jn,".disable(",ir,");")),_n(zn,".",Vn,"=",dr,";"))}else if(m(dr)){var br=Bn[Vn];_n(jn,".",Dr[Vn],"(",dr,");",dr.map(function(Tr,Fr){return br+"["+Fr+"]="+Tr}).join(";"),";")}else se(On)?(Xn=qt.link(dr,{stable:!0}),_n(jn,".",Dr[Vn],"(",Xn,");",zn,".",Vn,"=",Xn,";")):_n(jn,".",Dr[Vn],"(",dr,");",zn,".",Vn,"=",dr,";")}})}function Dn(qt,_n){Qn&&(qt.instancing=_n.def(qt.shared.extensions,".angle_instanced_arrays"))}function Pn(qt,_n,Cn,Jn,Xn){function Hn(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Bn(Fr){Fr(Vn=_n.def(),"=",Hn(),";"),"string"==typeof Xn?Fr(ir,".count+=",Xn,";"):Fr(ir,".count++;"),Dt&&(Jn?Fr(On=_n.def(),"=",Tr,".getNumPendingQueries();"):Fr(Tr,".beginQuery(",ir,");"))}function zn(Fr){Fr(ir,".cpuTime+=",Hn(),"-",Vn,";"),Dt&&(Jn?Fr(Tr,".pushScopeStats(",On,",",Tr,".getNumPendingQueries(),",ir,");"):Fr(Tr,".endQuery();"))}function jn(Fr){var Vr=_n.def(br,".profile");_n(br,".profile=",Fr,";"),_n.exit(br,".profile=",Vr,";")}var Vn,On,dr=qt.shared,ir=qt.stats,br=dr.current,Tr=dr.timer;if(Cn=Cn.profile){if(se(Cn))return void(Cn.enable?(Bn(_n),zn(_n.exit),jn("true")):jn("false"));jn(Cn=Cn.append(qt,_n))}else Cn=_n.def(br,".profile");Bn(dr=qt.block()),_n("if(",Cn,"){",dr,"}"),zn(qt=qt.block()),_n.exit("if(",Cn,"){",qt,"}")}function $n(qt,_n,Cn,Jn,Xn){var Bn=qt.shared;Jn.forEach(function(zn){var jn,Vn=zn.name,On=Cn.attributes[Vn];if(On){if(!Xn(On))return;jn=On.append(qt,_n)}else{if(!Xn(De))return;var dr=qt.scopeAttrib(Vn);jn={},Object.keys(new Nr).forEach(function(ir){jn[ir]=_n.def(dr,".",ir)})}!function Hn(zn,jn,Vn){function On(){_n("if(!",Tr,".buffer){",ir,".enableVertexAttribArray(",br,");}");var Xr,ri=Vn.type;Xr=Vn.size?_n.def(Vn.size,"||",jn):jn,_n("if(",Tr,".type!==",ri,"||",Tr,".size!==",Xr,"||",Ur.map(function(_i){return Tr+"."+_i+"!=="+Vn[_i]}).join("||"),"){",ir,".bindBuffer(",34962,",",Fr,".buffer);",ir,".vertexAttribPointer(",[br,Xr,ri,Vn.normalized,Vn.stride,Vn.offset],");",Tr,".type=",ri,";",Tr,".size=",Xr,";",Ur.map(function(_i){return Tr+"."+_i+"="+Vn[_i]+";"}).join(""),"}"),Qn&&_n("if(",Tr,".divisor!==",ri=Vn.divisor,"){",qt.instancing,".vertexAttribDivisorANGLE(",[br,ri],");",Tr,".divisor=",ri,";}")}function dr(){_n("if(",Tr,".buffer){",ir,".disableVertexAttribArray(",br,");",Tr,".buffer=null;","}if(",un.map(function(Xr,ri){return Tr+"."+Xr+"!=="+Vr[ri]}).join("||"),"){",ir,".vertexAttrib4f(",br,",",Vr,");",un.map(function(Xr,ri){return Tr+"."+Xr+"="+Vr[ri]+";"}).join(""),"}")}var ir=Bn.gl,br=_n.def(zn,".location"),Tr=_n.def(Bn.attributes,"[",br,"]"),Fr=Vn.buffer,Vr=[Vn.x,Vn.y,Vn.z,Vn.w],Ur=["buffer","normalized","offset","stride"];1===(zn=Vn.state)?On():2===zn?dr():(_n("if(",zn,"===",1,"){"),On(),_n("}else{"),dr(),_n("}"))}(qt.link(zn),function(ir){switch(ir){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(zn.info.type),jn)})}function rr(qt,_n,Cn,Jn,Xn,Hn){for(var Bn,zn=qt.shared,jn=zn.gl,Vn=0;Vn<Jn.length;++Vn){var On,dr=(Tr=Jn[Vn]).name,ir=Tr.info.type,br=Cn.uniforms[dr],Tr=qt.link(Tr)+".location";if(br){if(!Xn(br))continue;if(se(br)){if(dr=br.value,35678===ir||35680===ir)_n(jn,".uniform1i(",Tr,",",(ir=qt.link(dr._texture||dr.color[0]._texture))+".bind());"),_n.exit(ir,".unbind();");else if(35674===ir||35675===ir||35676===ir)br=2,35675===ir?br=3:35676===ir&&(br=4),_n(jn,".uniformMatrix",br,"fv(",Tr,",false,",dr=qt.global.def("new Float32Array(["+Array.prototype.slice.call(dr)+"])"),");");else{switch(ir){case 5126:Bn="1f";break;case 35664:Bn="2f";break;case 35665:Bn="3f";break;case 35666:Bn="4f";break;case 35670:case 5124:Bn="1i";break;case 35671:case 35667:Bn="2i";break;case 35672:case 35668:Bn="3i";break;case 35673:case 35669:Bn="4i"}_n(jn,".uniform",Bn,"(",Tr,",",m(dr)?Array.prototype.slice.call(dr):dr,");")}continue}On=br.append(qt,_n)}else{if(!Xn(De))continue;On=_n.def(zn.uniforms,"[",He.id(dr),"]")}switch(35678===ir?_n("if(",On,"&&",On,'._reglType==="framebuffer"){',On,"=",On,".color[0];","}"):35680===ir&&_n("if(",On,"&&",On,'._reglType==="framebufferCube"){',On,"=",On,".color[0];","}"),dr=1,ir){case 35678:case 35680:ir=_n.def(On,"._texture"),_n(jn,".uniform1i(",Tr,",",ir,".bind());"),_n.exit(ir,".unbind();");continue;case 5124:case 35670:Bn="1i";break;case 35667:case 35671:Bn="2i",dr=2;break;case 35668:case 35672:Bn="3i",dr=3;break;case 35669:case 35673:Bn="4i",dr=4;break;case 5126:Bn="1f";break;case 35664:Bn="2f",dr=2;break;case 35665:Bn="3f",dr=3;break;case 35666:Bn="4f",dr=4;break;case 35674:Bn="Matrix2fv";break;case 35675:Bn="Matrix3fv";break;case 35676:Bn="Matrix4fv"}if("M"===Bn.charAt(0)){_n(jn,".uniform",Bn,"(",Tr,","),Tr=Math.pow(ir-35674+2,2);var Fr=qt.global.def("new Float32Array(",Tr,")");Array.isArray(On)?_n("false,(",o(Tr,function(Ur){return Fr+"["+Ur+"]="+On[Ur]}),",",Fr,")"):_n("false,(Array.isArray(",On,")||",On," instanceof Float32Array)?",On,":(",o(Tr,function(Ur){return Fr+"["+Ur+"]="+On+"["+Ur+"]"}),",",Fr,")"),_n(");")}else{if(1<dr){ir=[];var Vr=[];for(br=0;br<dr;++br)Array.isArray(On)?Vr.push(On[br]):Vr.push(_n.def(On+"["+br+"]")),Hn&&ir.push(_n.def());Hn&&_n("if(!",qt.batchId,"||",ir.map(function(Ur,Xr){return Ur+"!=="+Vr[Xr]}).join("||"),"){",ir.map(function(Ur,Xr){return Ur+"="+Vr[Xr]+";"}).join("")),_n(jn,".uniform",Bn,"(",Tr,",",Vr.join(","),");")}else Hn&&(ir=_n.def(),_n("if(!",qt.batchId,"||",ir,"!==",On,"){",ir,"=",On,";")),_n(jn,".uniform",Bn,"(",Tr,",",On,");");Hn&&_n("}")}}}function er(qt,_n,Cn,Jn){function Xn(ri){var _i=ir[ri];return _i?_i.append(qt,_i.contextDep&&Jn.contextDynamic||_i.propDep?Cn:_n):_n.def(dr,".",ri)}function Hn(){function ri(){Cn(jn,".drawElementsInstancedANGLE(",[Tr,Vr,Ur,Fr+"<<(("+Ur+"-5121)>>1)",zn],");")}function _i(){Cn(jn,".drawArraysInstancedANGLE(",[Tr,Fr,Vr,zn],");")}br&&"null"!==br?Xr?ri():(Cn("if(",br,"){"),ri(),Cn("}else{"),_i(),Cn("}")):_i()}function Bn(){function ri(){Cn(On+".drawElements("+[Tr,Vr,Ur,Fr+"<<(("+Ur+"-5121)>>1)"]+");")}function _i(){Cn(On+".drawArrays("+[Tr,Fr,Vr]+");")}br&&"null"!==br?Xr?ri():(Cn("if(",br,"){"),ri(),Cn("}else{"),_i(),Cn("}")):_i()}var zn,jn,ri,_i,Vn=qt.shared,On=Vn.gl,dr=Vn.draw,ir=Jn.draw,br=(_i=_n,(ri=ir.elements)?((ri.contextDep&&Jn.contextDynamic||ri.propDep)&&(_i=Cn),ri=ri.append(qt,_i),ir.elementsActive&&_i("if("+ri+")"+On+".bindBuffer(34963,"+ri+".buffer.buffer);")):(ri=_i.def(),_i(ri,"=",dr,".","elements",";","if(",ri,"){",On,".bindBuffer(",34963,",",ri,".buffer.buffer);}","else if(",Vn.vao,".currentVAO){",ri,"=",qt.shared.elements+".getElements("+Vn.vao,".currentVAO.elements);",kr?"":"if("+ri+")"+On+".bindBuffer(34963,"+ri+".buffer.buffer);","}")),ri),Tr=Xn("primitive"),Fr=Xn("offset"),Vr=function(){var ri=ir.count,_i=_n;return ri?((ri.contextDep&&Jn.contextDynamic||ri.propDep)&&(_i=Cn),ri=ri.append(qt,_i)):ri=_i.def(dr,".","count"),ri}();if("number"==typeof Vr){if(0===Vr)return}else Cn("if(",Vr,"){"),Cn.exit("}");Qn&&(zn=Xn("instances"),jn=qt.instancing);var Ur=br+".type",Xr=ir.elements&&se(ir.elements)&&!ir.vaoActive;Qn&&("number"!=typeof zn||0<=zn)?"string"==typeof zn?(Cn("if(",zn,">0){"),Hn(),Cn("}else if(",zn,"<0){"),Bn(),Cn("}")):Hn():Bn()}function or(qt,_n,Cn,Jn,Xn){return Xn=(_n=jt()).proc("body",Xn),Qn&&(_n.instancing=Xn.def(_n.shared.extensions,".angle_instanced_arrays")),qt(_n,Xn,Cn,Jn),_n.compile().body}function Zr(qt,_n,Cn,Jn){Dn(qt,_n),Cn.useVAO?Cn.drawVAO?_n(qt.shared.vao,".setVAO(",Cn.drawVAO.append(qt,_n),");"):_n(qt.shared.vao,".setVAO(",qt.shared.vao,".targetVAO);"):(_n(qt.shared.vao,".setVAO(null);"),$n(qt,_n,Cn,Jn.attributes,function(){return!0})),rr(qt,_n,Cn,Jn.uniforms,function(){return!0},!1),er(qt,_n,_n,Cn)}function zr(qt,_n,Cn,Jn){function Xn(){return!0}qt.batchId="a1",Dn(qt,_n),$n(qt,_n,Cn,Jn.attributes,Xn),rr(qt,_n,Cn,Jn.uniforms,Xn,!1),er(qt,_n,_n,Cn)}function pr(qt,_n,Cn,Jn){function Xn(dr){return dr.contextDep&&Bn||dr.propDep}function Hn(dr){return!Xn(dr)}Dn(qt,_n);var Bn=Cn.contextDep,zn=_n.def(),jn=_n.def();qt.shared.props=jn,qt.batchId=zn;var Vn=qt.scope(),On=qt.scope();_n(Vn.entry,"for(",zn,"=0;",zn,"<","a1",";++",zn,"){",jn,"=","a0","[",zn,"];",On,"}",Vn.exit),Cn.needsContext&&kn(qt,On,Cn.context),Cn.needsFramebuffer&&cn(qt,On,Cn.framebuffer),hn(qt,On,Cn.state,Xn),Cn.profile&&Xn(Cn.profile)&&Pn(qt,On,Cn,!1,!0),Jn?(Cn.useVAO?Cn.drawVAO?Xn(Cn.drawVAO)?On(qt.shared.vao,".setVAO(",Cn.drawVAO.append(qt,On),");"):Vn(qt.shared.vao,".setVAO(",Cn.drawVAO.append(qt,Vn),");"):Vn(qt.shared.vao,".setVAO(",qt.shared.vao,".targetVAO);"):(Vn(qt.shared.vao,".setVAO(null);"),$n(qt,Vn,Cn,Jn.attributes,Hn),$n(qt,On,Cn,Jn.attributes,Xn)),rr(qt,Vn,Cn,Jn.uniforms,Hn,!1),rr(qt,On,Cn,Jn.uniforms,Xn,!0),er(qt,Vn,On,Cn)):(_n=qt.global.def("{}"),Jn=Cn.shader.progVar.append(qt,On),jn=On.def(Jn,".id"),Vn=On.def(_n,"[",jn,"]"),On(qt.shared.gl,".useProgram(",Jn,".program);","if(!",Vn,"){",Vn,"=",_n,"[",jn,"]=",qt.link(function(dr){return or(zr,qt,Cn,dr,2)}),"(",Jn,");}",Vn,".call(this,a0[",zn,"],",zn,");"))}function fr(qt,_n,Cn){var Jn=_n.static[Cn];if(Jn&&function(On){if("object"==typeof On&&!m(On)){for(var dr=Object.keys(On),ir=0;ir<dr.length;++ir)if(re.isDynamic(On[dr[ir]]))return!0;return!1}}(Jn)){var Xn=qt.global,Hn=Object.keys(Jn),Bn=!1,zn=!1,jn=!1,Vn=qt.global.def("{}");Hn.forEach(function(On){var dr=Jn[On];if(re.isDynamic(dr))"function"==typeof dr&&(dr=Jn[On]=re.unbox(dr)),On=H(dr,null),Bn=Bn||On.thisDep,jn=jn||On.propDep,zn=zn||On.contextDep;else{switch(Xn(Vn,".",On,"="),typeof dr){case"number":Xn(dr);break;case"string":Xn('"',dr,'"');break;case"object":Array.isArray(dr)&&Xn("[",dr.join(),"]");break;default:Xn(qt.link(dr))}Xn(";")}}),_n.dynamic[Cn]=new re.DynamicVariable(4,{thisDep:Bn,contextDep:zn,propDep:jn,ref:Vn,append:function(On,dr){Hn.forEach(function(ir){var br=Jn[ir];re.isDynamic(br)&&(br=On.invoke(dr,br),dr(Vn,".",ir,"=",br,";"))})}}),delete _n.static[Cn]}}var Nr=Kt.Record,xi={add:32774,subtract:32778,"reverse subtract":32779};Ye.ext_blend_minmax&&(xi.min=32775,xi.max=32776);var Qn=Ye.angle_instanced_arrays,Er=Ye.webgl_draw_buffers,kr=Ye.oes_vertex_array_object,sr={dirty:!0,profile:je.profile},ci={},oi=[],Or={},Dr={};pt("dither",3024),pt("blend.enable",3042),It("blend.color","blendColor",[0,0,0,0]),It("blend.equation","blendEquationSeparate",[32774,32774]),It("blend.func","blendFuncSeparate",[1,0,1,0]),pt("depth.enable",2929,!0),It("depth.func","depthFunc",513),It("depth.range","depthRange",[0,1]),It("depth.mask","depthMask",!0),It("colorMask","colorMask",[!0,!0,!0,!0]),pt("cull.enable",2884),It("cull.face","cullFace",1029),It("frontFace","frontFace",2305),It("lineWidth","lineWidth",1),pt("polygonOffset.enable",32823),It("polygonOffset.offset","polygonOffset",[0,0]),pt("sample.alpha",32926),pt("sample.enable",32928),It("sample.coverage","sampleCoverage",[1,!1]),pt("stencil.enable",2960),It("stencil.mask","stencilMask",-1),It("stencil.func","stencilFunc",[519,0,-1]),It("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),It("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),pt("scissor.enable",3089),It("scissor.box","scissor",[0,0,Ie.drawingBufferWidth,Ie.drawingBufferHeight]),It("viewport","viewport",[0,0,Ie.drawingBufferWidth,Ie.drawingBufferHeight]);var wr={gl:Ie,context:$t,strings:He,next:ci,current:sr,draw:Et,elements:st,buffer:ot,shader:vt,attributes:Kt.state,vao:Kt,uniforms:Ut,framebuffer:wt,extensions:Ye,timer:Dt,isBufferArgs:ae},gn={primTypes:Fe,compareFuncs:Mn,blendFuncs:dn,blendEquations:xi,stencilOps:ln,glTypes:Oe,orientationType:Ee};Er&&(gn.backBuffer=[1029],gn.drawBuffer=o(tt.maxDrawbuffers,function(qt){return 0===qt?[0]:o(qt,function(_n){return 36064+_n})}));var tr=0;return{next:ci,current:sr,procs:function(){var qt=jt(),_n=qt.proc("poll"),Cn=qt.proc("refresh"),Jn=qt.block();_n(Jn),Cn(Jn);var Xn,Hn=(jn=qt.shared).gl,Bn=jn.next,zn=jn.current;Jn(zn,".dirty=false;"),cn(qt,_n),cn(qt,Cn,null,!0),Qn&&(Xn=qt.link(Qn)),Ye.oes_vertex_array_object&&Cn(qt.link(Ye.oes_vertex_array_object),".bindVertexArrayOES(null);");var jn=Cn.def(jn.attributes),Vn=Cn.def(0),On=qt.cond(Vn,".buffer");On.then(Hn,".enableVertexAttribArray(i);",Hn,".bindBuffer(",34962,",",Vn,".buffer.buffer);",Hn,".vertexAttribPointer(i,",Vn,".size,",Vn,".type,",Vn,".normalized,",Vn,".stride,",Vn,".offset);").else(Hn,".disableVertexAttribArray(i);",Hn,".vertexAttrib4f(i,",Vn,".x,",Vn,".y,",Vn,".z,",Vn,".w);",Vn,".buffer=null;");var dr=qt.link(tt.maxAttributes,{stable:!0});return Cn("for(var i=0;i<",dr,";++i){",Vn,"=",jn,"[i];",On,"}"),Qn&&Cn("for(var i=0;i<",dr,";++i){",Xn,".vertexAttribDivisorANGLE(i,",jn,"[i].divisor);","}"),Cn(qt.shared.vao,".currentVAO=null;",qt.shared.vao,".setVAO(",qt.shared.vao,".targetVAO);"),Object.keys(Or).forEach(function(ir){var br=Or[ir],Tr=Jn.def(Bn,".",ir),Fr=qt.block();Fr("if(",Tr,"){",Hn,".enable(",br,")}else{",Hn,".disable(",br,")}",zn,".",ir,"=",Tr,";"),Cn(Fr),_n("if(",Tr,"!==",zn,".",ir,"){",Fr,"}")}),Object.keys(Dr).forEach(function(ir){var br,Tr,Fr=Dr[ir],Vr=sr[ir],Ur=qt.block();Ur(Hn,".",Fr,"("),m(Vr)?(Fr=Vr.length,br=qt.global.def(Bn,".",ir),Tr=qt.global.def(zn,".",ir),Ur(o(Fr,function(Xr){return br+"["+Xr+"]"}),");",o(Fr,function(Xr){return Tr+"["+Xr+"]="+br+"["+Xr+"];"}).join("")),_n("if(",o(Fr,function(Xr){return br+"["+Xr+"]!=="+Tr+"["+Xr+"]"}).join("||"),"){",Ur,"}")):(br=Jn.def(Bn,".",ir),Tr=Jn.def(zn,".",ir),Ur(br,");",zn,".",ir,"=",br,";"),_n("if(",br,"!==",Tr,"){",Ur,"}")),Cn(Ur)}),qt.compile()}(),compile:function(qt,_n,Cn,Jn,Xn){var Hn=jt();Hn.stats=Hn.link(Xn),Object.keys(_n.static).forEach(function(zn){fr(Hn,_n,zn)}),pn.forEach(function(zn){fr(Hn,qt,zn)});var Bn=Yn(qt,_n,Cn,Jn);return Bn.shader.program&&(Bn.shader.program.attributes.sort(function(zn,jn){return zn.name<jn.name?-1:1}),Bn.shader.program.uniforms.sort(function(zn,jn){return zn.name<jn.name?-1:1})),function(zn,jn){var Vn=zn.proc("draw",1);Dn(zn,Vn),kn(zn,Vn,jn.context),cn(zn,Vn,jn.framebuffer),vn(zn,Vn,jn),hn(zn,Vn,jn.state),Pn(zn,Vn,jn,!1,!0);var On=jn.shader.progVar.append(zn,Vn);if(Vn(zn.shared.gl,".useProgram(",On,".program);"),jn.shader.program)Zr(zn,Vn,jn,jn.shader.program);else{Vn(zn.shared.vao,".setVAO(null);");var dr=zn.global.def("{}"),ir=Vn.def(On,".id"),br=Vn.def(dr,"[",ir,"]");Vn(zn.cond(br).then(br,".call(this,a0);").else(br,"=",dr,"[",ir,"]=",zn.link(function(Tr){return or(Zr,zn,jn,Tr,1)}),"(",On,");",br,".call(this,a0);"))}0<Object.keys(jn.state).length&&Vn(zn.shared.current,".dirty=true;"),zn.shared.vao&&Vn(zn.shared.vao,".setVAO(null);")}(Hn,Bn),function Br(qt,_n){function Cn(zn){var jn=_n.shader[zn];jn&&(jn=jn.append(qt,Jn),isNaN(jn)?Jn.set(Xn.shader,"."+zn,jn):Jn.set(Xn.shader,"."+zn,qt.link(jn,{stable:!0})))}var Jn=qt.proc("scope",3);qt.batchId="a2";var Xn=qt.shared,Hn=Xn.current;if(kn(qt,Jn,_n.context),_n.framebuffer&&_n.framebuffer.append(qt,Jn),J(Object.keys(_n.state)).forEach(function(zn){var jn=_n.state[zn],Vn=jn.append(qt,Jn);m(Vn)?Vn.forEach(function(On,dr){isNaN(On)?Jn.set(qt.next[zn],"["+dr+"]",On):Jn.set(qt.next[zn],"["+dr+"]",qt.link(On,{stable:!0}))}):se(jn)?Jn.set(Xn.next,"."+zn,qt.link(Vn,{stable:!0})):Jn.set(Xn.next,"."+zn,Vn)}),Pn(qt,Jn,_n,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(zn){var jn=_n.draw[zn];jn&&(jn=jn.append(qt,Jn),isNaN(jn)?Jn.set(Xn.draw,"."+zn,jn):Jn.set(Xn.draw,"."+zn,qt.link(jn),{stable:!0}))}),Object.keys(_n.uniforms).forEach(function(zn){var jn=_n.uniforms[zn].append(qt,Jn);Array.isArray(jn)&&(jn="["+jn.map(function(Vn){return isNaN(Vn)?Vn:qt.link(Vn,{stable:!0})})+"]"),Jn.set(Xn.uniforms,"["+qt.link(He.id(zn),{stable:!0})+"]",jn)}),Object.keys(_n.attributes).forEach(function(zn){var jn=_n.attributes[zn].append(qt,Jn),Vn=qt.scopeAttrib(zn);Object.keys(new Nr).forEach(function(On){Jn.set(Vn,"."+On,jn[On])})}),_n.scopeVAO){var Bn=_n.scopeVAO.append(qt,Jn);isNaN(Bn)?Jn.set(Xn.vao,".targetVAO",Bn):Jn.set(Xn.vao,".targetVAO",qt.link(Bn,{stable:!0}))}Cn("vert"),Cn("frag"),0<Object.keys(_n.state).length&&(Jn(Hn,".dirty=true;"),Jn.exit(Hn,".dirty=true;")),Jn("a1(",qt.shared.context,",a0,",qt.batchId,");")}(Hn,Bn),function(zn,jn){function Vn(Vr){return Vr.contextDep&&dr||Vr.propDep}var On=zn.proc("batch",2);zn.batchId="0",Dn(zn,On);var dr=!1,ir=!0;Object.keys(jn.context).forEach(function(Vr){dr=dr||jn.context[Vr].propDep}),dr||(kn(zn,On,jn.context),ir=!1);var br=!1;if((Tr=jn.framebuffer)?(Tr.propDep?dr=br=!0:Tr.contextDep&&dr&&(br=!0),br||cn(zn,On,Tr)):cn(zn,On,null),jn.state.viewport&&jn.state.viewport.propDep&&(dr=!0),vn(zn,On,jn),hn(zn,On,jn.state,function(Vr){return!Vn(Vr)}),jn.profile&&Vn(jn.profile)||Pn(zn,On,jn,!1,"a1"),jn.contextDep=dr,jn.needsContext=ir,jn.needsFramebuffer=br,(ir=jn.shader.progVar).contextDep&&dr||ir.propDep)pr(zn,On,jn,null);else if(ir=ir.append(zn,On),On(zn.shared.gl,".useProgram(",ir,".program);"),jn.shader.program)pr(zn,On,jn,jn.shader.program);else{On(zn.shared.vao,".setVAO(null);");var Tr=zn.global.def("{}"),Fr=(br=On.def(ir,".id"),On.def(Tr,"[",br,"]"));On(zn.cond(Fr).then(Fr,".call(this,a0,a1);").else(Fr,"=",Tr,"[",br,"]=",zn.link(function(Vr){return or(pr,zn,jn,Vr,2)}),"(",ir,");",Fr,".call(this,a0,a1);"))}0<Object.keys(jn.state).length&&On(zn.shared.current,".dirty=true;"),zn.shared.vao&&On(zn.shared.vao,".setVAO(null);")}(Hn,Bn),W(Hn.compile(),{destroy:function(){Bn.shader.program.destroy()}})}}}function oe(Ie,He){for(var Ye=0;Ye<Ie.length;++Ye)if(Ie[Ye]===He)return Ye;return-1}var W=function(Ie,He){for(var Ye=Object.keys(He),tt=0;tt<Ye.length;++tt)Ie[Ye[tt]]=He[Ye[tt]];return Ie},ne=0,re={DynamicVariable:y,define:function(Ie,He){return new y(Ie,b(He+""))},isDynamic:function(Ie){return"function"==typeof Ie&&!Ie._reglType||Ie instanceof y},unbox:function Ie(He,Ye){return"function"==typeof He?new y(0,He):"number"==typeof He||"boolean"==typeof He?new y(5,He):Array.isArray(He)?new y(6,He.map(function(tt,ot){return Ie(tt,Ye+"["+ot+"]")})):He instanceof y?He:void 0},accessor:b},ce={next:"function"==typeof requestAnimationFrame?function(Ie){return requestAnimationFrame(Ie)}:function(Ie){return setTimeout(Ie,16)},cancel:"function"==typeof cancelAnimationFrame?function(Ie){return cancelAnimationFrame(Ie)}:clearTimeout},fe="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},me=l();me.zero=l();var we=function(Ie){return Ie instanceof Uint8Array||Ie instanceof Uint16Array||Ie instanceof Uint32Array||Ie instanceof Int8Array||Ie instanceof Int16Array||Ie instanceof Int32Array||Ie instanceof Float32Array||Ie instanceof Float64Array||Ie instanceof Uint8ClampedArray},ye=function(Ie){return Object.keys(Ie).map(function(He){return Ie[He]})},Te={shape:function(Ie){for(var He=[];Ie.length;Ie=Ie[0])He.push(Ie.length);return He},flatten:function(Ie,He,Ye,tt){var ot=1;if(He.length)for(var st=0;st<He.length;++st)ot*=He[st];else ot=0;switch(Ye=tt||me.allocType(Ye,ot),He.length){case 0:break;case 1:for(tt=He[0],He=0;He<tt;++He)Ye[He]=Ie[He];break;case 2:for(tt=He[0],He=He[1],st=ot=0;st<tt;++st)for(var bt=Ie[st],wt=0;wt<He;++wt)Ye[ot++]=bt[wt];break;case 3:v(Ie,He[0],He[1],He[2],Ye,0);break;default:!function Ut(Kt,vt,Et,$t,Dt){for(var Pt=1,je=Et+1;je<vt.length;++je)Pt*=vt[je];var rt=vt[Et];if(vt.length-Et==4){var pt=vt[Et+1],It=vt[Et+2];for(vt=vt[Et+3],je=0;je<rt;++je)v(Kt[je],pt,It,vt,$t,Dt),Dt+=Pt}else for(je=0;je<rt;++je)Ut(Kt[je],vt,Et+1,$t,Dt),Dt+=Pt}(Ie,He,0,Ye,0)}return Ye}},Le={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Oe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Re={dynamic:35048,stream:35040,static:35044},Ve=Te.flatten,_e=Te.shape,Ae=[];Ae[5120]=1,Ae[5122]=2,Ae[5124]=4,Ae[5121]=1,Ae[5123]=2,Ae[5125]=4,Ae[5126]=4;var Fe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Pe=new Float32Array(1),Be=new Uint32Array(Pe.buffer),qe=[9984,9986,9985,9987],We=[0,6409,6410,6407,6408],Je={};Je[6409]=Je[6406]=Je[6402]=1,Je[34041]=Je[6410]=2,Je[6407]=Je[35904]=3,Je[6408]=Je[35906]=4;var ut=u("HTMLCanvasElement"),Ge=u("OffscreenCanvas"),Ke=u("CanvasRenderingContext2D"),nt=u("ImageBitmap"),it=u("HTMLImageElement"),ht=u("HTMLVideoElement"),Tt=Object.keys(Le).concat([ut,Ge,Ke,nt,it,ht]),Ct=[];Ct[5121]=1,Ct[5126]=4,Ct[36193]=2,Ct[5123]=2,Ct[5125]=4;var Vt=[];Vt[32854]=2,Vt[32855]=2,Vt[36194]=2,Vt[34041]=4,Vt[33776]=.5,Vt[33777]=.5,Vt[33778]=1,Vt[33779]=1,Vt[35986]=.5,Vt[35987]=1,Vt[34798]=1,Vt[35840]=.5,Vt[35841]=.25,Vt[35842]=.5,Vt[35843]=.25,Vt[36196]=.5;var Ft=[];Ft[32854]=2,Ft[32855]=2,Ft[36194]=2,Ft[33189]=2,Ft[36168]=1,Ft[34041]=4,Ft[35907]=4,Ft[34836]=16,Ft[34842]=8,Ft[34843]=6;var ft=[];ft[6408]=4,ft[6407]=3;var Bt=[];Bt[5121]=1,Bt[5126]=4,Bt[36193]=2;var rn=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],un=["x","y","z","w"],pn="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),dn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Mn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ln={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ee={cw:2304,ccw:2305},De=new ee(!1,!1,!1,function(){});return function(Ie){function He(){if(0===zr.length)Qt&&Qt.update(),Nr=null;else{Nr=ce.next(He),vt();for(var Qn=zr.length-1;0<=Qn;--Qn){var Er=zr[Qn];Er&&Er(Yn,null,0)}Dt.flush(),Qt&&Qt.update()}}function Ye(){!Nr&&0<zr.length&&(Nr=ce.next(He))}function tt(){Nr&&(ce.cancel(He),Nr=null)}function ot(Qn){Qn.preventDefault(),tt(),pr.forEach(function(Er){Er()})}function st(Qn){Dt.getError(),je.restore(),Dn.restore(),cn.restore(),Pn.restore(),$n.restore(),rr.restore(),hn.restore(),Qt&&Qt.restore(),er.procs.refresh(),Ye(),Br.forEach(function(Er){Er()})}function bt(Qn){function Er(qt,_n){var Cn={},Jn={};return Object.keys(qt).forEach(function(Xn){var Hn=qt[Xn];if(re.isDynamic(Hn))Jn[Xn]=re.unbox(Hn,Xn);else{if(_n&&Array.isArray(Hn))for(var Bn=0;Bn<Hn.length;++Bn)if(re.isDynamic(Hn[Bn]))return void(Jn[Xn]=re.unbox(Hn,Xn));Cn[Xn]=Hn}}),{dynamic:Jn,static:Cn}}var kr=Er(Qn.context||{},!0),sr=Er(Qn.uniforms||{},!0),ci=Er(Qn.attributes||{},!1);Qn=Er(function(qt){function _n(Jn){if(Jn in Cn){var Xn=Cn[Jn];delete Cn[Jn],Object.keys(Xn).forEach(function(Hn){Cn[Jn+"."+Hn]=Xn[Hn]})}}var Cn=W({},qt);return delete Cn.uniforms,delete Cn.attributes,delete Cn.context,delete Cn.vao,"stencil"in Cn&&Cn.stencil.op&&(Cn.stencil.opBack=Cn.stencil.opFront=Cn.stencil.op,delete Cn.stencil.op),_n("blend"),_n("depth"),_n("cull"),_n("stencil"),_n("polygonOffset"),_n("scissor"),_n("sample"),"vao"in qt&&(Cn.vao=qt.vao),Cn}(Qn),!1);var oi={gpuTime:0,cpuTime:0,count:0},Or=er.compile(Qn,ci,sr,kr,oi),Dr=Or.draw,wr=Or.batch,gn=Or.scope,tr=[];return W(function(qt,_n){var Cn;if("function"==typeof qt)return gn.call(this,null,qt,0);if("function"==typeof _n)if("number"==typeof qt)for(Cn=0;Cn<qt;++Cn)gn.call(this,null,_n,Cn);else{if(!Array.isArray(qt))return gn.call(this,qt,_n,0);for(Cn=0;Cn<qt.length;++Cn)gn.call(this,qt[Cn],_n,Cn)}else if("number"==typeof qt){if(0<qt)return wr.call(this,function(Jn){for(;tr.length<Jn;)tr.push(null);return tr}(0|qt),0|qt)}else{if(!Array.isArray(qt))return Dr.call(this,qt);if(qt.length)return wr.call(this,qt,qt.length)}},{stats:oi,destroy:function(){Or.destroy()}})}function wt(Qn,Er){var kr=0;er.procs.poll();var sr=Er.color;sr&&(Dt.clearColor(+sr[0]||0,+sr[1]||0,+sr[2]||0,+sr[3]||0),kr|=16384),"depth"in Er&&(Dt.clearDepth(+Er.depth),kr|=256),"stencil"in Er&&(Dt.clearStencil(0|Er.stencil),kr|=1024),Dt.clear(kr)}function Ut(Qn){return zr.push(Qn),Ye(),{cancel:function(){var Er=oe(zr,Qn);zr[Er]=function kr(){var sr=oe(zr,kr);zr[sr]=zr[zr.length-1],--zr.length,0>=zr.length&&tt()}}}}function Kt(){var Qn=or.viewport,Er=or.scissor_box;Qn[0]=Qn[1]=Er[0]=Er[1]=0,Yn.viewportWidth=Yn.framebufferWidth=Yn.drawingBufferWidth=Qn[2]=Er[2]=Dt.drawingBufferWidth,Yn.viewportHeight=Yn.framebufferHeight=Yn.drawingBufferHeight=Qn[3]=Er[3]=Dt.drawingBufferHeight}function vt(){Yn.tick+=1,Yn.time=$t(),Kt(),er.procs.poll()}function Et(){Pn.refresh(),Kt(),er.procs.refresh(),Qt&&Qt.update()}function $t(){return(fe()-fn)/1e3}if(!(Ie=function e(Ie){var He,Ye,tt,ot,st=Ie||{};Ie={};var bt=[],wt=[],Ut="undefined"==typeof window?1:window.devicePixelRatio,Kt=!1,vt={},Et=function(Dt){},$t=function(){};if("string"==typeof st?He=document.querySelector(st):"object"==typeof st&&("string"==typeof st.nodeName&&"function"==typeof st.appendChild&&"function"==typeof st.getBoundingClientRect?He=st:"function"==typeof st.drawArrays||"function"==typeof st.drawElements?tt=(ot=st).canvas:("gl"in st?ot=st.gl:"canvas"in st?tt=_(st.canvas):"container"in st&&(Ye=_(st.container)),"attributes"in st&&(Ie=st.attributes),"extensions"in st&&(bt=T(st.extensions)),"optionalExtensions"in st&&(wt=T(st.optionalExtensions)),"onDone"in st&&(Et=st.onDone),"profile"in st&&(Kt=!!st.profile),"pixelRatio"in st&&(Ut=+st.pixelRatio),"cachedCode"in st&&(vt=st.cachedCode))),He&&("canvas"===He.nodeName.toLowerCase()?tt=He:Ye=He),!ot){if(!tt){if(!(He=function(Dt,Pt,je){function rt(){var jt=window.innerWidth,Qt=window.innerHeight;Dt!==document.body&&(jt=(Qt=It.getBoundingClientRect()).right-Qt.left,Qt=Qt.bottom-Qt.top),It.width=je*jt,It.height=je*Qt}var pt,It=document.createElement("canvas");return W(It.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Dt.appendChild(It),Dt===document.body&&(It.style.position="absolute",W(Dt.style,{margin:0,padding:0})),Dt!==document.body&&"function"==typeof ResizeObserver?(pt=new ResizeObserver(function(){setTimeout(rt)})).observe(Dt):window.addEventListener("resize",rt,!1),rt(),{canvas:It,onDestroy:function(){pt?pt.disconnect():window.removeEventListener("resize",rt),Dt.removeChild(It)}}}(Ye||document.body,0,Ut)))return null;tt=He.canvas,$t=He.onDestroy}void 0===Ie.premultipliedAlpha&&(Ie.premultipliedAlpha=!0),ot=function(Dt,Pt){function je(rt){try{return Dt.getContext(rt,Pt)}catch(pt){return null}}return je("webgl")||je("experimental-webgl")||je("webgl-experimental")}(tt,Ie)}return ot?{gl:ot,canvas:tt,container:Ye,extensions:bt,optionalExtensions:wt,pixelRatio:Ut,profile:Kt,cachedCode:vt,onDone:Et,onDestroy:$t}:($t(),Et("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Ie)))return null;var Dt=Ie.gl,Pt=Dt.getContextAttributes();Dt.isContextLost();var je=function(Qn,Er){function kr(Or){var Dr;Or=Or.toLowerCase();try{Dr=sr[Or]=Qn.getExtension(Or)}catch(wr){}return!!Dr}for(var sr={},ci=0;ci<Er.extensions.length;++ci){var oi=Er.extensions[ci];if(!kr(oi))return Er.onDestroy(),Er.onDone('"'+oi+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Er.optionalExtensions.forEach(kr),{extensions:sr,restore:function(){Object.keys(sr).forEach(function(Or){if(sr[Or]&&!kr(Or))throw Error("(regl): error restoring extension "+Or)})}}}(Dt,Ie);if(!je)return null;var Qn,Er,rt=(Qn={"":0},Er=[""],{id:function(kr){var sr=Qn[kr];return sr||(sr=Qn[kr]=Er.length,Er.push(kr),sr)},str:function(kr){return Er[kr]}}),pt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},It=Ie.cachedCode||{},jt=je.extensions,Qt=function(Qn,Er){function kr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function sr(tr,qt,_n){var Cn=Or.pop()||new kr;Cn.startQueryIndex=tr,Cn.endQueryIndex=qt,Cn.sum=0,Cn.stats=_n,Dr.push(Cn)}if(!Er.ext_disjoint_timer_query)return null;var ci=[],oi=[],Or=[],Dr=[],wr=[],gn=[];return{beginQuery:function(tr){var qt=ci.pop()||Er.ext_disjoint_timer_query.createQueryEXT();Er.ext_disjoint_timer_query.beginQueryEXT(35007,qt),oi.push(qt),sr(oi.length-1,oi.length,tr)},endQuery:function(){Er.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:sr,update:function(){var tr,qt;if(0!==(tr=oi.length)){gn.length=Math.max(gn.length,tr+1),wr.length=Math.max(wr.length,tr+1),wr[0]=0;var _n=gn[0]=0;for(qt=tr=0;qt<oi.length;++qt){var Cn=oi[qt];Er.ext_disjoint_timer_query.getQueryObjectEXT(Cn,34919)?(_n+=Er.ext_disjoint_timer_query.getQueryObjectEXT(Cn,34918),ci.push(Cn)):oi[tr++]=Cn,wr[qt+1]=_n,gn[qt+1]=tr}for(oi.length=tr,qt=tr=0;qt<Dr.length;++qt){var Jn=(_n=Dr[qt]).startQueryIndex;_n.sum+=wr[Cn=_n.endQueryIndex]-wr[Jn],(Cn=gn[Cn])===(Jn=gn[Jn])?(_n.stats.gpuTime+=_n.sum/1e6,Or.push(_n)):(_n.startQueryIndex=Jn,_n.endQueryIndex=Cn,Dr[tr++]=_n)}Dr.length=tr}},getNumPendingQueries:function(){return oi.length},clear:function(){ci.push.apply(ci,oi);for(var tr=0;tr<ci.length;tr++)Er.ext_disjoint_timer_query.deleteQueryEXT(ci[tr]);oi.length=0,ci.length=0},restore:function(){oi.length=0,ci.length=0}}}(0,jt),fn=fe(),an=Dt.drawingBufferWidth,Sn=Dt.drawingBufferHeight,Yn={tick:0,time:0,viewportWidth:an,viewportHeight:Sn,framebufferWidth:an,framebufferHeight:Sn,drawingBufferWidth:an,drawingBufferHeight:Sn,pixelRatio:Ie.pixelRatio},kn=(an={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Ie,He){var Ye=1;He.ext_texture_filter_anisotropic&&(Ye=Ie.getParameter(34047));var tt=1,ot=1;He.webgl_draw_buffers&&(tt=Ie.getParameter(34852),ot=Ie.getParameter(36063));var st=!!He.oes_texture_float;if(st){st=Ie.createTexture(),Ie.bindTexture(3553,st),Ie.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var bt=Ie.createFramebuffer();if(Ie.bindFramebuffer(36160,bt),Ie.framebufferTexture2D(36160,36064,3553,st,0),Ie.bindTexture(3553,null),36053!==Ie.checkFramebufferStatus(36160))st=!1;else{Ie.viewport(0,0,1,1),Ie.clearColor(1,0,0,1),Ie.clear(16384);var wt=me.allocType(5126,4);Ie.readPixels(0,0,1,1,6408,5126,wt),Ie.getError()?st=!1:(Ie.deleteFramebuffer(bt),Ie.deleteTexture(st),st=1===wt[0]),me.freeType(wt)}}return wt=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(wt=Ie.createTexture(),bt=me.allocType(5121,36),Ie.activeTexture(33984),Ie.bindTexture(34067,wt),Ie.texImage2D(34069,0,6408,3,3,0,6408,5121,bt),me.freeType(bt),Ie.bindTexture(34067,null),Ie.deleteTexture(wt),wt=!Ie.getError()),{colorBits:[Ie.getParameter(3410),Ie.getParameter(3411),Ie.getParameter(3412),Ie.getParameter(3413)],depthBits:Ie.getParameter(3414),stencilBits:Ie.getParameter(3415),subpixelBits:Ie.getParameter(3408),extensions:Object.keys(He).filter(function(Ut){return!!He[Ut]}),maxAnisotropic:Ye,maxDrawbuffers:tt,maxColorAttachments:ot,pointSizeDims:Ie.getParameter(33901),lineWidthDims:Ie.getParameter(33902),maxViewportDims:Ie.getParameter(3386),maxCombinedTextureUnits:Ie.getParameter(35661),maxCubeMapSize:Ie.getParameter(34076),maxRenderbufferSize:Ie.getParameter(34024),maxTextureUnits:Ie.getParameter(34930),maxTextureSize:Ie.getParameter(3379),maxAttributes:Ie.getParameter(34921),maxVertexUniforms:Ie.getParameter(36347),maxVertexTextureUnits:Ie.getParameter(35660),maxVaryingVectors:Ie.getParameter(36348),maxFragmentUniforms:Ie.getParameter(36349),glsl:Ie.getParameter(35724),renderer:Ie.getParameter(7937),vendor:Ie.getParameter(7936),version:Ie.getParameter(7938),readFloat:st,npotTextureCube:wt}}(Dt,jt)),cn=function p(Ie,He,Ye,tt){function ot(Et){this.id=Ut++,this.buffer=Ie.createBuffer(),this.type=Et,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ye.profile&&(this.stats={size:0})}function st(Et,$t,Dt){Et.byteLength=$t.byteLength,Ie.bufferData(Et.type,$t,Dt)}function bt(Et,$t,Dt,Pt,je,rt){if(Et.usage=Dt,Array.isArray($t)){if(Et.dtype=Pt||5126,0<$t.length)if(Array.isArray($t[0])){je=_e($t);for(var pt=Pt=1;pt<je.length;++pt)Pt*=je[pt];Et.dimension=Pt,st(Et,$t=Ve($t,je,Et.dtype),Dt),rt?Et.persistentData=$t:me.freeType($t)}else"number"==typeof $t[0]?(Et.dimension=je,s(je=me.allocType(Et.dtype,$t.length),$t),st(Et,je,Dt),rt?Et.persistentData=je:me.freeType(je)):we($t[0])&&(Et.dimension=$t[0].length,Et.dtype=Pt||h($t[0])||5126,st(Et,$t=Ve($t,[$t.length,$t[0].length],Et.dtype),Dt),rt?Et.persistentData=$t:me.freeType($t))}else if(we($t))Et.dtype=Pt||h($t),Et.dimension=je,st(Et,$t,Dt),rt&&(Et.persistentData=new Uint8Array(new Uint8Array($t.buffer)));else if(i($t)){var It=$t.stride,jt=(pt=$t.offset,0),Qt=0,fn=0,an=0;1===(je=$t.shape).length?(jt=je[0],Qt=1,fn=It[0],an=0):2===je.length&&(jt=je[0],Qt=je[1],fn=It[0],an=It[1]),Et.dtype=Pt||h($t.data)||5126,Et.dimension=Qt,d(je=me.allocType(Et.dtype,jt*Qt),$t.data,jt,Qt,fn,an,pt),st(Et,je,Dt),rt?Et.persistentData=je:me.freeType(je)}else $t instanceof ArrayBuffer&&(Et.dtype=5121,Et.dimension=je,st(Et,$t,Dt),rt&&(Et.persistentData=new Uint8Array(new Uint8Array($t))))}function wt(Et){He.bufferCount--,tt(Et),Ie.deleteBuffer(Et.buffer),Et.buffer=null,delete Kt[Et.id]}var Ut=0,Kt={};ot.prototype.bind=function(){Ie.bindBuffer(this.type,this.buffer)},ot.prototype.destroy=function(){wt(this)};var vt=[];return Ye.profile&&(He.getTotalBufferSize=function(){var Et=0;return Object.keys(Kt).forEach(function($t){Et+=Kt[$t].stats.size}),Et}),{create:function(Et,$t,Dt,Pt){function je(pt){var It=35044,jt=null,Qt=0,fn=0,an=1;return Array.isArray(pt)||we(pt)||i(pt)||pt instanceof ArrayBuffer?jt=pt:"number"==typeof pt?Qt=0|pt:pt&&("data"in pt&&(jt=pt.data),"usage"in pt&&(It=Re[pt.usage]),"type"in pt&&(fn=Oe[pt.type]),"dimension"in pt&&(an=0|pt.dimension),"length"in pt&&(Qt=0|pt.length)),rt.bind(),jt?bt(rt,jt,It,fn,an,Pt):(Qt&&Ie.bufferData(rt.type,Qt,It),rt.dtype=fn||5121,rt.usage=It,rt.dimension=an,rt.byteLength=Qt),Ye.profile&&(rt.stats.size=rt.byteLength*Ae[rt.dtype]),je}He.bufferCount++;var rt=new ot($t);return Kt[rt.id]=rt,Dt||je(Et),je._reglType="buffer",je._buffer=rt,je.subdata=function(pt,It){var jt,Qt=0|(It||0);if(rt.bind(),we(pt)||pt instanceof ArrayBuffer)Ie.bufferSubData(rt.type,Qt,pt);else if(Array.isArray(pt)){if(0<pt.length)if("number"==typeof pt[0]){var fn=me.allocType(rt.dtype,pt.length);s(fn,pt),Ie.bufferSubData(rt.type,Qt,fn),me.freeType(fn)}else(Array.isArray(pt[0])||we(pt[0]))&&(jt=_e(pt),fn=Ve(pt,jt,rt.dtype),Ie.bufferSubData(rt.type,Qt,fn),me.freeType(fn))}else if(i(pt)){var an=pt.stride,Sn=fn=0,Yn=0,kn=0;1===(jt=pt.shape).length?(fn=jt[0],Sn=1,Yn=an[0],kn=0):2===jt.length&&(fn=jt[0],Sn=jt[1],Yn=an[0],kn=an[1]),jt=Array.isArray(pt.data)?rt.dtype:h(pt.data),d(jt=me.allocType(jt,fn*Sn),pt.data,fn,Sn,Yn,kn,pt.offset),Ie.bufferSubData(rt.type,Qt,jt),me.freeType(jt)}return je},Ye.profile&&(je.stats=rt.stats),je.destroy=function(){wt(rt)},je},createStream:function(Et,$t){var Dt=vt.pop();return Dt||(Dt=new ot(Et)),Dt.bind(),bt(Dt,$t,35040,0,1,!1),Dt},destroyStream:function(Et){vt.push(Et)},clear:function(){ye(Kt).forEach(wt),vt.forEach(wt)},getBuffer:function(Et){return Et&&Et._buffer instanceof ot?Et._buffer:null},restore:function(){ye(Kt).forEach(function(Et){Et.buffer=Ie.createBuffer(),Ie.bindBuffer(Et.type,Et.buffer),Ie.bufferData(Et.type,Et.persistentData||Et.byteLength,Et.usage)})},_initBuffer:bt}}(Dt,pt,Ie,function(Qn){return hn.destroyBuffer(Qn)}),vn=function f(Ie,He,Ye,tt){function ot(Et){this.id=Ut++,wt[this.id]=this,this.buffer=Et,this.primType=4,this.type=this.vertCount=0}function st(Et,$t,Dt,Pt,je,rt,pt){var It;if(Et.buffer.bind(),$t?((It=pt)||we($t)&&(!i($t)||we($t.data))||(It=He.oes_element_index_uint?5125:5123),Ye._initBuffer(Et.buffer,$t,Dt,It,3)):(Ie.bufferData(34963,rt,Dt),Et.buffer.dtype=It||5121,Et.buffer.usage=Dt,Et.buffer.dimension=3,Et.buffer.byteLength=rt),It=pt,!pt){switch(Et.buffer.dtype){case 5121:case 5120:It=5121;break;case 5123:case 5122:It=5123;break;case 5125:case 5124:It=5125}Et.buffer.dtype=It}Et.type=It,0>($t=je)&&($t=Et.buffer.byteLength,5123===It?$t>>=1:5125===It&&($t>>=2)),Et.vertCount=$t,$t=Pt,0>Pt&&($t=4,1===(Pt=Et.buffer.dimension)&&($t=0),2===Pt&&($t=1),3===Pt&&($t=4)),Et.primType=$t}function bt(Et){tt.elementsCount--,delete wt[Et.id],Et.buffer.destroy(),Et.buffer=null}var wt={},Ut=0,Kt={uint8:5121,uint16:5123};He.oes_element_index_uint&&(Kt.uint32=5125),ot.prototype.bind=function(){this.buffer.bind()};var vt=[];return{create:function(Et,$t){function Dt(rt){if(rt)if("number"==typeof rt)Pt(rt),je.primType=4,je.vertCount=0|rt,je.type=5121;else{var pt=null,It=35044,jt=-1,Qt=-1,fn=0,an=0;Array.isArray(rt)||we(rt)||i(rt)?pt=rt:("data"in rt&&(pt=rt.data),"usage"in rt&&(It=Re[rt.usage]),"primitive"in rt&&(jt=Fe[rt.primitive]),"count"in rt&&(Qt=0|rt.count),"type"in rt&&(an=Kt[rt.type]),"length"in rt?fn=0|rt.length:(fn=Qt,5123===an||5122===an?fn*=2:5125!==an&&5124!==an||(fn*=4))),st(je,pt,It,jt,Qt,fn,an)}else Pt(),je.primType=4,je.vertCount=0,je.type=5121;return Dt}var Pt=Ye.create(null,34963,!0),je=new ot(Pt._buffer);return tt.elementsCount++,Dt(Et),Dt._reglType="elements",Dt._elements=je,Dt.subdata=function(rt,pt){return Pt.subdata(rt,pt),Dt},Dt.destroy=function(){bt(je)},Dt},createStream:function(Et){var $t=vt.pop();return $t||($t=new ot(Ye.create(null,34963,!0,!1)._buffer)),st($t,Et,35040,-1,-1,0,0),$t},destroyStream:function(Et){vt.push(Et)},getElements:function(Et){return"function"==typeof Et&&Et._elements instanceof ot?Et._elements:null},clear:function(){ye(wt).forEach(bt)}}}(Dt,jt,cn,pt),hn=function F(Ie,He,Ye,tt,ot,st,bt){function wt(){this.id=++vt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Dt=He.oes_vertex_array_object;this.vao=Dt?Dt.createVertexArrayOES():null,Et[this.id]=this,this.buffers=[]}var Ut=Ye.maxAttributes,Kt=Array(Ut);for(Ye=0;Ye<Ut;++Ye)Kt[Ye]=new N;var vt=0,Et={},$t={Record:N,scope:{},state:Kt,currentVAO:null,targetVAO:null,restore:He.oes_vertex_array_object?function(){He.oes_vertex_array_object&&ye(Et).forEach(function(Dt){Dt.refresh()})}:function(){},createVAO:function(Dt){function Pt(rt){var pt;Array.isArray(rt)?(pt=rt,je.elements&&je.ownsElements&&je.elements.destroy(),je.elements=null,je.ownsElements=!1,je.offset=0,je.count=0,je.instances=-1,je.primitive=4):(rt.elements?(pt=rt.elements,je.ownsElements?("function"==typeof pt&&"elements"===pt._reglType?je.elements.destroy():je.elements(pt),je.ownsElements=!1):st.getElements(rt.elements)?(je.elements=rt.elements,je.ownsElements=!1):(je.elements=st.create(rt.elements),je.ownsElements=!0)):(je.elements=null,je.ownsElements=!1),pt=rt.attributes,je.offset=0,je.count=-1,je.instances=-1,je.primitive=4,je.elements&&(je.count=je.elements._elements.vertCount,je.primitive=je.elements._elements.primType),"offset"in rt&&(je.offset=0|rt.offset),"count"in rt&&(je.count=0|rt.count),"instances"in rt&&(je.instances=0|rt.instances),"primitive"in rt&&(je.primitive=Fe[rt.primitive])),rt={};var It=je.attributes;It.length=pt.length;for(var jt=0;jt<pt.length;++jt){var Qt,fn=pt[jt],an=It[jt]=new N,Sn=fn.data||fn;Array.isArray(Sn)||we(Sn)||i(Sn)?(je.buffers[jt]&&(Qt=je.buffers[jt],we(Sn)&&Qt._buffer.byteLength>=Sn.byteLength?Qt.subdata(Sn):(Qt.destroy(),je.buffers[jt]=null)),je.buffers[jt]||(Qt=je.buffers[jt]=ot.create(fn,34962,!1,!0)),an.buffer=ot.getBuffer(Qt),an.size=0|an.buffer.dimension,an.normalized=!1,an.type=an.buffer.dtype,an.offset=0,an.stride=0,an.divisor=0,an.state=1,rt[jt]=1):ot.getBuffer(fn)?(an.buffer=ot.getBuffer(fn),an.size=0|an.buffer.dimension,an.normalized=!1,an.type=an.buffer.dtype,an.offset=0,an.stride=0,an.divisor=0,an.state=1):ot.getBuffer(fn.buffer)?(an.buffer=ot.getBuffer(fn.buffer),an.size=0|(+fn.size||an.buffer.dimension),an.normalized=!!fn.normalized||!1,an.type="type"in fn?Oe[fn.type]:an.buffer.dtype,an.offset=0|(fn.offset||0),an.stride=0|(fn.stride||0),an.divisor=0|(fn.divisor||0),an.state=1):"x"in fn&&(an.x=+fn.x||0,an.y=+fn.y||0,an.z=+fn.z||0,an.w=+fn.w||0,an.state=2)}for(Qt=0;Qt<je.buffers.length;++Qt)!rt[Qt]&&je.buffers[Qt]&&(je.buffers[Qt].destroy(),je.buffers[Qt]=null);return je.refresh(),Pt}var je=new wt;return tt.vaoCount+=1,Pt.destroy=function(){for(var rt=0;rt<je.buffers.length;++rt)je.buffers[rt]&&je.buffers[rt].destroy();je.buffers.length=0,je.ownsElements&&(je.elements.destroy(),je.elements=null,je.ownsElements=!1),je.destroy()},Pt._vao=je,Pt._reglType="vao",Pt(Dt)},getVAO:function(Dt){return"function"==typeof Dt&&Dt._vao?Dt._vao:null},destroyBuffer:function(Dt){for(var Pt=0;Pt<Kt.length;++Pt){var je=Kt[Pt];je.buffer===Dt&&(Ie.disableVertexAttribArray(Pt),je.buffer=null)}},setVAO:He.oes_vertex_array_object?function(Dt){Dt!==$t.currentVAO&&(He.oes_vertex_array_object.bindVertexArrayOES(Dt?Dt.vao:null),$t.currentVAO=Dt)}:function(Dt){if(Dt!==$t.currentVAO){if(Dt)Dt.bindAttrs();else{for(var Pt=He.angle_instanced_arrays,je=0;je<Kt.length;++je){var rt=Kt[je];rt.buffer?(Ie.enableVertexAttribArray(je),rt.buffer.bind(),Ie.vertexAttribPointer(je,rt.size,rt.type,rt.normalized,rt.stride,rt.offfset),Pt&&rt.divisor&&Pt.vertexAttribDivisorANGLE(je,rt.divisor)):(Ie.disableVertexAttribArray(je),Ie.vertexAttrib4f(je,rt.x,rt.y,rt.z,rt.w))}Ie.bindBuffer(34963,bt.elements?bt.elements.buffer.buffer:null)}$t.currentVAO=Dt}},clear:He.oes_vertex_array_object?function(){ye(Et).forEach(function(Dt){Dt.destroy()})}:function(){}};return wt.prototype.bindAttrs=function(){for(var Dt=He.angle_instanced_arrays,Pt=this.attributes,je=0;je<Pt.length;++je){var rt=Pt[je];rt.buffer?(Ie.enableVertexAttribArray(je),Ie.bindBuffer(34962,rt.buffer.buffer),Ie.vertexAttribPointer(je,rt.size,rt.type,rt.normalized,rt.stride,rt.offset),Dt&&rt.divisor&&Dt.vertexAttribDivisorANGLE(je,rt.divisor)):(Ie.disableVertexAttribArray(je),Ie.vertexAttrib4f(je,rt.x,rt.y,rt.z,rt.w))}for(Dt=Pt.length;Dt<Ut;++Dt)Ie.disableVertexAttribArray(Dt);(Dt=st.getElements(this.elements))?Ie.bindBuffer(34963,Dt.buffer.buffer):Ie.bindBuffer(34963,null)},wt.prototype.refresh=function(){var Dt=He.oes_vertex_array_object;Dt&&(Dt.bindVertexArrayOES(this.vao),this.bindAttrs(),$t.currentVAO=null,Dt.bindVertexArrayOES(null))},wt.prototype.destroy=function(){if(this.vao){var Dt=He.oes_vertex_array_object;this===$t.currentVAO&&($t.currentVAO=null,Dt.bindVertexArrayOES(null)),Dt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Et[this.id]&&(delete Et[this.id],--tt.vaoCount)},$t}(Dt,jt,kn,pt,cn,vn,an),Dn=function L(Ie,He,Ye,tt){function ot(Pt,je,rt,pt){this.name=Pt,this.id=je,this.location=rt,this.info=pt}function st(Pt,je){for(var rt=0;rt<Pt.length;++rt)if(Pt[rt].id===je.id)return void(Pt[rt].location=je.location);Pt.push(je)}function bt(Pt,je,rt){if(!(It=(rt=35632===Pt?Kt:vt)[je])){var pt=He.str(je),It=Ie.createShader(Pt);Ie.shaderSource(It,pt),Ie.compileShader(It),rt[je]=It}return It}function wt(Pt,je){this.id=Dt++,this.fragId=Pt,this.vertId=je,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,tt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ut(Pt,je,rt){var pt;pt=bt(35632,Pt.fragId);var It=bt(35633,Pt.vertId);if(je=Pt.program=Ie.createProgram(),Ie.attachShader(je,pt),Ie.attachShader(je,It),rt)for(pt=0;pt<rt.length;++pt)Ie.bindAttribLocation(je,(It=rt[pt])[0],It[1]);Ie.linkProgram(je),It=Ie.getProgramParameter(je,35718),tt.profile&&(Pt.stats.uniformsCount=It);var jt=Pt.uniforms;for(pt=0;pt<It;++pt)if(rt=Ie.getActiveUniform(je,pt))if(1<rt.size)for(var Qt=0;Qt<rt.size;++Qt){var fn=rt.name.replace("[0]","["+Qt+"]");st(jt,new ot(fn,He.id(fn),Ie.getUniformLocation(je,fn),rt))}else st(jt,new ot(rt.name,He.id(rt.name),Ie.getUniformLocation(je,rt.name),rt));for(It=Ie.getProgramParameter(je,35721),tt.profile&&(Pt.stats.attributesCount=It),Pt=Pt.attributes,pt=0;pt<It;++pt)(rt=Ie.getActiveAttrib(je,pt))&&st(Pt,new ot(rt.name,He.id(rt.name),Ie.getAttribLocation(je,rt.name),rt))}var Kt={},vt={},Et={},$t=[],Dt=0;return tt.profile&&(Ye.getMaxUniformsCount=function(){var Pt=0;return $t.forEach(function(je){je.stats.uniformsCount>Pt&&(Pt=je.stats.uniformsCount)}),Pt},Ye.getMaxAttributesCount=function(){var Pt=0;return $t.forEach(function(je){je.stats.attributesCount>Pt&&(Pt=je.stats.attributesCount)}),Pt}),{clear:function(){var Pt=Ie.deleteShader.bind(Ie);ye(Kt).forEach(Pt),Kt={},ye(vt).forEach(Pt),vt={},$t.forEach(function(je){Ie.deleteProgram(je.program)}),$t.length=0,Et={},Ye.shaderCount=0},program:function(Pt,je,rt,pt){var It=Et[je];It||(It=Et[je]={});var jt=It[Pt];if(jt&&(jt.refCount++,!pt))return jt;var Qt=new wt(je,Pt);return Ye.shaderCount++,Ut(Qt,rt,pt),jt||(It[Pt]=Qt),$t.push(Qt),W(Qt,{destroy:function(){if(Qt.refCount--,0>=Qt.refCount){Ie.deleteProgram(Qt.program);var fn=$t.indexOf(Qt);$t.splice(fn,1),Ye.shaderCount--}0>=It[Qt.vertId].refCount&&(Ie.deleteShader(vt[Qt.vertId]),delete vt[Qt.vertId],delete Et[Qt.fragId][Qt.vertId]),Object.keys(Et[Qt.fragId]).length||(Ie.deleteShader(Kt[Qt.fragId]),delete Kt[Qt.fragId],delete Et[Qt.fragId])}})},restore:function(){Kt={},vt={};for(var Pt=0;Pt<$t.length;++Pt)Ut($t[Pt],null,$t[Pt].attributes.map(function(je){return[je.location,je.name]}))},shader:bt,frag:-1,vert:-1}}(Dt,rt,pt,Ie),Pn=function O(Ie,He,Ye,tt,ot,st,bt){function wt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Ut(gn,tr){gn.internalformat=tr.internalformat,gn.format=tr.format,gn.type=tr.type,gn.compressed=tr.compressed,gn.premultiplyAlpha=tr.premultiplyAlpha,gn.flipY=tr.flipY,gn.unpackAlignment=tr.unpackAlignment,gn.colorSpace=tr.colorSpace,gn.width=tr.width,gn.height=tr.height,gn.channels=tr.channels}function Kt(gn,tr){if("object"==typeof tr&&tr){"premultiplyAlpha"in tr&&(gn.premultiplyAlpha=tr.premultiplyAlpha),"flipY"in tr&&(gn.flipY=tr.flipY),"alignment"in tr&&(gn.unpackAlignment=tr.alignment),"colorSpace"in tr&&(gn.colorSpace=er[tr.colorSpace]),"type"in tr&&(gn.type=or[tr.type]);var qt=gn.width,_n=gn.height,Cn=gn.channels,Jn=!1;"shape"in tr?(qt=tr.shape[0],_n=tr.shape[1],3===tr.shape.length&&(Cn=tr.shape[2],Jn=!0)):("radius"in tr&&(qt=_n=tr.radius),"width"in tr&&(qt=tr.width),"height"in tr&&(_n=tr.height),"channels"in tr&&(Cn=tr.channels,Jn=!0)),gn.width=0|qt,gn.height=0|_n,gn.channels=0|Cn,qt=!1,"format"in tr&&(_n=gn.internalformat=Zr[qt=tr.format],gn.format=kr[_n],qt in or&&!("type"in tr)&&(gn.type=or[qt]),qt in zr&&(gn.compressed=!0),qt=!0),!Jn&&qt?gn.channels=Je[gn.format]:Jn&&!qt&&gn.channels!==We[gn.format]&&(gn.format=gn.internalformat=We[gn.channels])}}function vt(gn){Ie.pixelStorei(37440,gn.flipY),Ie.pixelStorei(37441,gn.premultiplyAlpha),Ie.pixelStorei(37443,gn.colorSpace),Ie.pixelStorei(3317,gn.unpackAlignment)}function Et(){wt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function $t(gn,tr){var qt=null;if(M(tr)?qt=tr:tr&&(Kt(gn,tr),"x"in tr&&(gn.xOffset=0|tr.x),"y"in tr&&(gn.yOffset=0|tr.y),M(tr.data)&&(qt=tr.data)),tr.copy){var _n=ot.viewportWidth,Cn=ot.viewportHeight;gn.width=gn.width||_n-gn.xOffset,gn.height=gn.height||Cn-gn.yOffset,gn.needsCopy=!0}else if(qt){if(we(qt))gn.channels=gn.channels||4,gn.data=qt,"type"in tr||5121!==gn.type||(gn.type=0|Le[Object.prototype.toString.call(qt)]);else if(w(qt)){switch(gn.channels=gn.channels||4,Cn=(_n=qt).length,gn.type){case 5121:case 5123:case 5125:case 5126:(Cn=me.allocType(gn.type,Cn)).set(_n),gn.data=Cn;break;case 36193:gn.data=g(_n)}gn.alignment=1,gn.needsFree=!0}else if(i(qt)){_n=qt.data,Array.isArray(_n)||5121!==gn.type||(gn.type=0|Le[Object.prototype.toString.call(_n)]);var Jn,Xn,Hn,Bn,zn=qt.stride;3===(Cn=qt.shape).length?(Hn=Cn[2],Bn=zn[2]):Bn=Hn=1,Jn=Cn[0],Xn=Cn[1],Cn=zn[0],zn=zn[1],gn.alignment=1,gn.width=Jn,gn.height=Xn,gn.channels=Hn,gn.format=gn.internalformat=We[Hn],gn.needsFree=!0,Jn=Bn,qt=qt.offset;for(var jn=me.allocType(36193===gn.type?5126:gn.type,(Hn=gn.width)*(Bn=gn.height)*(Xn=gn.channels)),Vn=0,On=0;On<Bn;++On)for(var dr=0;dr<Hn;++dr)for(var ir=0;ir<Xn;++ir)jn[Vn++]=_n[Cn*dr+zn*On+Jn*ir+qt];S(gn,jn)}else if(E(qt)===ut||E(qt)===Ge||E(qt)===Ke)gn.element=E(qt)===ut||E(qt)===Ge?qt:qt.canvas,gn.width=gn.element.width,gn.height=gn.element.height,gn.channels=4;else if(E(qt)===nt)gn.element=qt,gn.width=qt.width,gn.height=qt.height,gn.channels=4;else if(E(qt)===it)gn.element=qt,gn.width=qt.naturalWidth,gn.height=qt.naturalHeight,gn.channels=4;else if(E(qt)===ht)gn.element=qt,gn.width=qt.videoWidth,gn.height=qt.videoHeight,gn.channels=4;else if(c(qt)){for(_n=gn.width||qt[0].length,Cn=gn.height||qt.length,zn=gn.channels,zn=m(qt[0][0])?zn||qt[0][0].length:zn||1,Jn=Te.shape(qt),Hn=1,Bn=0;Bn<Jn.length;++Bn)Hn*=Jn[Bn];Hn=me.allocType(36193===gn.type?5126:gn.type,Hn),Te.flatten(qt,Jn,"",Hn),S(gn,Hn),gn.alignment=1,gn.width=_n,gn.height=Cn,gn.channels=zn,gn.format=gn.internalformat=We[zn],gn.needsFree=!0}}else gn.width=gn.width||1,gn.height=gn.height||1,gn.channels=gn.channels||4}function Dt(gn,tr,qt,_n,Cn){var Jn=gn.element,Xn=gn.data,Hn=gn.internalformat,Bn=gn.format,zn=gn.type,jn=gn.width,Vn=gn.height;vt(gn),Jn?Ie.texSubImage2D(tr,Cn,qt,_n,Bn,zn,Jn):gn.compressed?Ie.compressedTexSubImage2D(tr,Cn,qt,_n,Hn,jn,Vn,Xn):gn.needsCopy?(tt(),Ie.copyTexSubImage2D(tr,Cn,qt,_n,gn.xOffset,gn.yOffset,jn,Vn)):Ie.texSubImage2D(tr,Cn,qt,_n,jn,Vn,Bn,zn,Xn)}function Pt(){return sr.pop()||new Et}function je(gn){gn.needsFree&&me.freeType(gn.data),Et.call(gn),sr.push(gn)}function rt(){wt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function pt(gn,tr,qt){var _n=gn.images[0]=Pt();gn.mipmask=1,_n.width=gn.width=tr,_n.height=gn.height=qt,_n.channels=gn.channels=4}function It(gn,tr){var qt=null;if(M(tr))Ut(qt=gn.images[0]=Pt(),gn),$t(qt,tr),gn.mipmask=1;else if(Kt(gn,tr),Array.isArray(tr.mipmap))for(var _n=tr.mipmap,Cn=0;Cn<_n.length;++Cn)Ut(qt=gn.images[Cn]=Pt(),gn),qt.width>>=Cn,qt.height>>=Cn,$t(qt,_n[Cn]),gn.mipmask|=1<<Cn;else Ut(qt=gn.images[0]=Pt(),gn),$t(qt,tr),gn.mipmask=1;Ut(gn,gn.images[0])}function jt(gn,tr){for(var qt=gn.images,_n=0;_n<qt.length&&qt[_n];++_n){var Cn=qt[_n],Jn=tr,Xn=_n,Hn=Cn.element,Bn=Cn.data,zn=Cn.internalformat,jn=Cn.format,Vn=Cn.type,On=Cn.width,dr=Cn.height;vt(Cn),Hn?Ie.texImage2D(Jn,Xn,jn,jn,Vn,Hn):Cn.compressed?Ie.compressedTexImage2D(Jn,Xn,zn,On,dr,0,Bn):Cn.needsCopy?(tt(),Ie.copyTexImage2D(Jn,Xn,jn,Cn.xOffset,Cn.yOffset,On,dr,0)):Ie.texImage2D(Jn,Xn,jn,On,dr,0,jn,Vn,Bn||null)}}function Qt(){var gn=ci.pop()||new rt;wt.call(gn);for(var tr=gn.mipmask=0;16>tr;++tr)gn.images[tr]=null;return gn}function fn(gn){for(var tr=gn.images,qt=0;qt<tr.length;++qt)tr[qt]&&je(tr[qt]),tr[qt]=null;ci.push(gn)}function an(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Sn(gn,tr){"min"in tr&&(gn.minFilter=rr[tr.min],0<=qe.indexOf(gn.minFilter)&&!("faces"in tr)&&(gn.genMipmaps=!0)),"mag"in tr&&(gn.magFilter=$n[tr.mag]);var qt=gn.wrapS,_n=gn.wrapT;if("wrap"in tr){var Cn=tr.wrap;"string"==typeof Cn?qt=_n=Pn[Cn]:Array.isArray(Cn)&&(qt=Pn[Cn[0]],_n=Pn[Cn[1]])}else"wrapS"in tr&&(qt=Pn[tr.wrapS]),"wrapT"in tr&&(_n=Pn[tr.wrapT]);if(gn.wrapS=qt,gn.wrapT=_n,"anisotropic"in tr&&(gn.anisotropic=tr.anisotropic),"mipmap"in tr){switch(qt=!1,typeof tr.mipmap){case"string":gn.mipmapHint=Dn[tr.mipmap],qt=gn.genMipmaps=!0;break;case"boolean":qt=gn.genMipmaps=tr.mipmap;break;case"object":gn.genMipmaps=!1,qt=!0}!qt||"min"in tr||(gn.minFilter=9984)}}function Yn(gn,tr){Ie.texParameteri(tr,10241,gn.minFilter),Ie.texParameteri(tr,10240,gn.magFilter),Ie.texParameteri(tr,10242,gn.wrapS),Ie.texParameteri(tr,10243,gn.wrapT),He.ext_texture_filter_anisotropic&&Ie.texParameteri(tr,34046,gn.anisotropic),gn.genMipmaps&&(Ie.hint(33170,gn.mipmapHint),Ie.generateMipmap(tr))}function kn(gn){wt.call(this),this.mipmask=0,this.internalformat=6408,this.id=oi++,this.refCount=1,this.target=gn,this.texture=Ie.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new an,bt.profile&&(this.stats={size:0})}function cn(gn){Ie.activeTexture(33984),Ie.bindTexture(gn.target,gn.texture)}function vn(){var gn=wr[0];gn?Ie.bindTexture(gn.target,gn.texture):Ie.bindTexture(3553,null)}function hn(gn){var tr=gn.texture,qt=gn.unit,_n=gn.target;0<=qt&&(Ie.activeTexture(33984+qt),Ie.bindTexture(_n,null),wr[qt]=null),Ie.deleteTexture(tr),gn.texture=null,gn.params=null,gn.pixels=null,gn.refCount=0,delete Or[gn.id],st.textureCount--}var Dn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Pn={repeat:10497,clamp:33071,mirror:33648},$n={nearest:9728,linear:9729},rr=W({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},$n),er={none:0,browser:37444},or={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Zr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},zr={};He.ext_srgb&&(Zr.srgb=35904,Zr.srgba=35906),He.oes_texture_float&&(or.float32=or.float=5126),He.oes_texture_half_float&&(or.float16=or["half float"]=36193),He.webgl_depth_texture&&(W(Zr,{depth:6402,"depth stencil":34041}),W(or,{uint16:5123,uint32:5125,"depth stencil":34042})),He.webgl_compressed_texture_s3tc&&W(zr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),He.webgl_compressed_texture_atc&&W(zr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),He.webgl_compressed_texture_pvrtc&&W(zr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),He.webgl_compressed_texture_etc1&&(zr["rgb etc1"]=36196);var pr=Array.prototype.slice.call(Ie.getParameter(34467));Object.keys(zr).forEach(function(gn){var tr=zr[gn];0<=pr.indexOf(tr)&&(Zr[gn]=tr)});var Br=Object.keys(Zr);Ye.textureFormats=Br;var fr=[];Object.keys(Zr).forEach(function(gn){fr[Zr[gn]]=gn});var Nr=[];Object.keys(or).forEach(function(gn){Nr[or[gn]]=gn});var xi=[];Object.keys($n).forEach(function(gn){xi[$n[gn]]=gn});var Qn=[];Object.keys(rr).forEach(function(gn){Qn[rr[gn]]=gn});var Er=[];Object.keys(Pn).forEach(function(gn){Er[Pn[gn]]=gn});var kr=Br.reduce(function(gn,tr){var qt=Zr[tr];return gn[qt]=6409===qt||6406===qt||6409===qt||6410===qt||6402===qt||34041===qt||He.ext_srgb&&(35904===qt||35906===qt)?qt:32855===qt||0<=tr.indexOf("rgba")?6408:6407,gn},{}),sr=[],ci=[],oi=0,Or={},Dr=Ye.maxTextureUnits,wr=Array(Dr).map(function(){return null});return W(kn.prototype,{bind:function(){this.bindCount+=1;var gn=this.unit;if(0>gn){for(var tr=0;tr<Dr;++tr){var qt=wr[tr];if(qt){if(0<qt.bindCount)continue;qt.unit=-1}wr[tr]=this,gn=tr;break}bt.profile&&st.maxTextureUnits<gn+1&&(st.maxTextureUnits=gn+1),this.unit=gn,Ie.activeTexture(33984+gn),Ie.bindTexture(this.target,this.texture)}return gn},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&hn(this)}}),bt.profile&&(st.getTotalTextureSize=function(){var gn=0;return Object.keys(Or).forEach(function(tr){gn+=Or[tr].stats.size}),gn}),{create2D:function(gn,tr){function qt(Cn,Jn){var Xn=_n.texInfo;an.call(Xn);var Hn=Qt();return"number"==typeof Cn?pt(Hn,0|Cn,"number"==typeof Jn?0|Jn:0|Cn):Cn?(Sn(Xn,Cn),It(Hn,Cn)):pt(Hn,1,1),Xn.genMipmaps&&(Hn.mipmask=(Hn.width<<1)-1),_n.mipmask=Hn.mipmask,Ut(_n,Hn),_n.internalformat=Hn.internalformat,qt.width=Hn.width,qt.height=Hn.height,cn(_n),jt(Hn,3553),Yn(Xn,3553),vn(),fn(Hn),bt.profile&&(_n.stats.size=C(_n.internalformat,_n.type,Hn.width,Hn.height,Xn.genMipmaps,!1)),qt.format=fr[_n.internalformat],qt.type=Nr[_n.type],qt.mag=xi[Xn.magFilter],qt.min=Qn[Xn.minFilter],qt.wrapS=Er[Xn.wrapS],qt.wrapT=Er[Xn.wrapT],qt}var _n=new kn(3553);return Or[_n.id]=_n,st.textureCount++,qt(gn,tr),qt.subimage=function(Cn,Jn,Xn,Hn){Jn|=0,Xn|=0,Hn|=0;var Bn=Pt();return Ut(Bn,_n),Bn.width=0,Bn.height=0,$t(Bn,Cn),Bn.width=Bn.width||(_n.width>>Hn)-Jn,Bn.height=Bn.height||(_n.height>>Hn)-Xn,cn(_n),Dt(Bn,3553,Jn,Xn,Hn),vn(),je(Bn),qt},qt.resize=function(Cn,Jn){var Xn=0|Cn,Hn=0|Jn||Xn;if(Xn===_n.width&&Hn===_n.height)return qt;qt.width=_n.width=Xn,qt.height=_n.height=Hn,cn(_n);for(var Bn=0;_n.mipmask>>Bn;++Bn){var zn=Xn>>Bn,jn=Hn>>Bn;if(!zn||!jn)break;Ie.texImage2D(3553,Bn,_n.format,zn,jn,0,_n.format,_n.type,null)}return vn(),bt.profile&&(_n.stats.size=C(_n.internalformat,_n.type,Xn,Hn,!1,!1)),qt},qt._reglType="texture2d",qt._texture=_n,bt.profile&&(qt.stats=_n.stats),qt.destroy=function(){_n.decRef()},qt},createCube:function(gn,tr,qt,_n,Cn,Jn){function Xn(zn,jn,Vn,On,dr,ir){var br,Tr=Hn.texInfo;for(an.call(Tr),br=0;6>br;++br)Bn[br]=Qt();if("number"!=typeof zn&&zn){if("object"==typeof zn)if(jn)It(Bn[0],zn),It(Bn[1],jn),It(Bn[2],Vn),It(Bn[3],On),It(Bn[4],dr),It(Bn[5],ir);else if(Sn(Tr,zn),Kt(Hn,zn),"faces"in zn)for(zn=zn.faces,br=0;6>br;++br)Ut(Bn[br],Hn),It(Bn[br],zn[br]);else for(br=0;6>br;++br)It(Bn[br],zn)}else for(zn=0|zn||1,br=0;6>br;++br)pt(Bn[br],zn,zn);for(Ut(Hn,Bn[0]),Hn.mipmask=Tr.genMipmaps?(Bn[0].width<<1)-1:Bn[0].mipmask,Hn.internalformat=Bn[0].internalformat,Xn.width=Bn[0].width,Xn.height=Bn[0].height,cn(Hn),br=0;6>br;++br)jt(Bn[br],34069+br);for(Yn(Tr,34067),vn(),bt.profile&&(Hn.stats.size=C(Hn.internalformat,Hn.type,Xn.width,Xn.height,Tr.genMipmaps,!0)),Xn.format=fr[Hn.internalformat],Xn.type=Nr[Hn.type],Xn.mag=xi[Tr.magFilter],Xn.min=Qn[Tr.minFilter],Xn.wrapS=Er[Tr.wrapS],Xn.wrapT=Er[Tr.wrapT],br=0;6>br;++br)fn(Bn[br]);return Xn}var Hn=new kn(34067);Or[Hn.id]=Hn,st.cubeCount++;var Bn=Array(6);return Xn(gn,tr,qt,_n,Cn,Jn),Xn.subimage=function(zn,jn,Vn,On,dr){Vn|=0,On|=0,dr|=0;var ir=Pt();return Ut(ir,Hn),ir.width=0,ir.height=0,$t(ir,jn),ir.width=ir.width||(Hn.width>>dr)-Vn,ir.height=ir.height||(Hn.height>>dr)-On,cn(Hn),Dt(ir,34069+zn,Vn,On,dr),vn(),je(ir),Xn},Xn.resize=function(zn){if((zn|=0)!==Hn.width){Xn.width=Hn.width=zn,Xn.height=Hn.height=zn,cn(Hn);for(var jn=0;6>jn;++jn)for(var Vn=0;Hn.mipmask>>Vn;++Vn)Ie.texImage2D(34069+jn,Vn,Hn.format,zn>>Vn,zn>>Vn,0,Hn.format,Hn.type,null);return vn(),bt.profile&&(Hn.stats.size=C(Hn.internalformat,Hn.type,Xn.width,Xn.height,!1,!0)),Xn}},Xn._reglType="textureCube",Xn._texture=Hn,bt.profile&&(Xn.stats=Hn.stats),Xn.destroy=function(){Hn.decRef()},Xn},clear:function(){for(var gn=0;gn<Dr;++gn)Ie.activeTexture(33984+gn),Ie.bindTexture(3553,null),wr[gn]=null;ye(Or).forEach(hn),st.cubeCount=0,st.textureCount=0},getTexture:function(gn){return null},restore:function(){for(var gn=0;gn<Dr;++gn){var tr=wr[gn];tr&&(tr.bindCount=0,tr.unit=-1,wr[gn]=null)}ye(Or).forEach(function(qt){qt.texture=Ie.createTexture(),Ie.bindTexture(qt.target,qt.texture);for(var _n=0;32>_n;++_n)if(0!=(qt.mipmask&1<<_n))if(3553===qt.target)Ie.texImage2D(3553,_n,qt.internalformat,qt.width>>_n,qt.height>>_n,0,qt.internalformat,qt.type,null);else for(var Cn=0;6>Cn;++Cn)Ie.texImage2D(34069+Cn,_n,qt.internalformat,qt.width>>_n,qt.height>>_n,0,qt.internalformat,qt.type,null);Yn(qt.texInfo,qt.target)})},refresh:function(){for(var gn=0;gn<Dr;++gn){var tr=wr[gn];tr&&(tr.bindCount=0,tr.unit=-1,wr[gn]=null),Ie.activeTexture(33984+gn),Ie.bindTexture(3553,null),Ie.bindTexture(34067,null)}}}}(Dt,jt,kn,function(){er.procs.poll()},Yn,pt,Ie),$n=function(Ie,He,Ye,tt,ot){function st(Et){this.id=Kt++,this.refCount=1,this.renderbuffer=Et,this.format=32854,this.height=this.width=0,ot.profile&&(this.stats={size:0})}function bt(Et){var $t=Et.renderbuffer;Ie.bindRenderbuffer(36161,null),Ie.deleteRenderbuffer($t),Et.renderbuffer=null,Et.refCount=0,delete vt[Et.id],tt.renderbufferCount--}var wt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};He.ext_srgb&&(wt.srgba=35907),He.ext_color_buffer_half_float&&(wt.rgba16f=34842,wt.rgb16f=34843),He.webgl_color_buffer_float&&(wt.rgba32f=34836);var Ut=[];Object.keys(wt).forEach(function(Et){Ut[wt[Et]]=Et});var Kt=0,vt={};return st.prototype.decRef=function(){0>=--this.refCount&&bt(this)},ot.profile&&(tt.getTotalRenderbufferSize=function(){var Et=0;return Object.keys(vt).forEach(function($t){Et+=vt[$t].stats.size}),Et}),{create:function(Et,$t){function Dt(je,rt){var pt=0,It=0,jt=32854;if("object"==typeof je&&je?("shape"in je?(pt=0|(It=je.shape)[0],It=0|It[1]):("radius"in je&&(pt=It=0|je.radius),"width"in je&&(pt=0|je.width),"height"in je&&(It=0|je.height)),"format"in je&&(jt=wt[je.format])):"number"==typeof je?(pt=0|je,It="number"==typeof rt?0|rt:pt):je||(pt=It=1),pt!==Pt.width||It!==Pt.height||jt!==Pt.format)return Dt.width=Pt.width=pt,Dt.height=Pt.height=It,Pt.format=jt,Ie.bindRenderbuffer(36161,Pt.renderbuffer),Ie.renderbufferStorage(36161,jt,pt,It),ot.profile&&(Pt.stats.size=Ft[Pt.format]*Pt.width*Pt.height),Dt.format=Ut[Pt.format],Dt}var Pt=new st(Ie.createRenderbuffer());return vt[Pt.id]=Pt,tt.renderbufferCount++,Dt(Et,$t),Dt.resize=function(je,rt){var pt=0|je,It=0|rt||pt;return pt===Pt.width&&It===Pt.height||(Dt.width=Pt.width=pt,Dt.height=Pt.height=It,Ie.bindRenderbuffer(36161,Pt.renderbuffer),Ie.renderbufferStorage(36161,Pt.format,pt,It),ot.profile&&(Pt.stats.size=Ft[Pt.format]*Pt.width*Pt.height)),Dt},Dt._reglType="renderbuffer",Dt._renderbuffer=Pt,ot.profile&&(Dt.stats=Pt.stats),Dt.destroy=function(){Pt.decRef()},Dt},clear:function(){ye(vt).forEach(bt)},restore:function(){ye(vt).forEach(function(Et){Et.renderbuffer=Ie.createRenderbuffer(),Ie.bindRenderbuffer(36161,Et.renderbuffer),Ie.renderbufferStorage(36161,Et.format,Et.width,Et.height)}),Ie.bindRenderbuffer(36161,null)}}}(Dt,jt,0,pt,Ie),rr=function I(Ie,He,Ye,tt,ot,st){function bt(kn,cn,vn){this.target=kn,this.texture=cn,this.renderbuffer=vn;var hn=kn=0;cn?(kn=cn.width,hn=cn.height):vn&&(kn=vn.width,hn=vn.height),this.width=kn,this.height=hn}function wt(kn){kn&&(kn.texture&&kn.texture._texture.decRef(),kn.renderbuffer&&kn.renderbuffer._renderbuffer.decRef())}function Ut(kn,cn,vn){kn&&(kn.texture?kn.texture._texture.refCount+=1:kn.renderbuffer._renderbuffer.refCount+=1)}function Kt(kn,cn){cn&&(cn.texture?Ie.framebufferTexture2D(36160,kn,cn.target,cn.texture._texture.texture,0):Ie.framebufferRenderbuffer(36160,kn,36161,cn.renderbuffer._renderbuffer.renderbuffer))}function vt(kn){var cn=3553,vn=null,hn=null,Dn=kn;return"object"==typeof kn&&(Dn=kn.data,"target"in kn&&(cn=0|kn.target)),"texture2d"===(kn=Dn._reglType)||"textureCube"===kn?vn=Dn:"renderbuffer"===kn&&(hn=Dn,cn=36161),new bt(cn,vn,hn)}function Et(kn,cn,vn,hn,Dn){return vn?((kn=tt.create2D({width:kn,height:cn,format:hn,type:Dn}))._texture.refCount=0,new bt(3553,kn,null)):((kn=ot.create({width:kn,height:cn,format:hn}))._renderbuffer.refCount=0,new bt(36161,null,kn))}function $t(kn){return kn&&(kn.texture||kn.renderbuffer)}function Dt(kn,cn,vn){kn&&(kn.texture?kn.texture.resize(cn,vn):kn.renderbuffer&&kn.renderbuffer.resize(cn,vn),kn.width=cn,kn.height=vn)}function Pt(){this.id=Sn++,Yn[this.id]=this,this.framebuffer=Ie.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function je(kn){kn.colorAttachments.forEach(wt),wt(kn.depthAttachment),wt(kn.stencilAttachment),wt(kn.depthStencilAttachment)}function rt(kn){Ie.deleteFramebuffer(kn.framebuffer),kn.framebuffer=null,st.framebufferCount--,delete Yn[kn.id]}function pt(kn){var cn;Ie.bindFramebuffer(36160,kn.framebuffer);var vn=kn.colorAttachments;for(cn=0;cn<vn.length;++cn)Kt(36064+cn,vn[cn]);for(cn=vn.length;cn<Ye.maxColorAttachments;++cn)Ie.framebufferTexture2D(36160,36064+cn,3553,null,0);Ie.framebufferTexture2D(36160,33306,3553,null,0),Ie.framebufferTexture2D(36160,36096,3553,null,0),Ie.framebufferTexture2D(36160,36128,3553,null,0),Kt(36096,kn.depthAttachment),Kt(36128,kn.stencilAttachment),Kt(33306,kn.depthStencilAttachment),Ie.checkFramebufferStatus(36160),Ie.isContextLost(),Ie.bindFramebuffer(36160,jt.next?jt.next.framebuffer:null),jt.cur=jt.next,Ie.getError()}function It(kn,cn){function vn(Dn,Pn){var $n,rr=0,er=0,or=!0,Zr=!0;$n=null;var zr=!0,pr="rgba",Br="uint8",fr=1,Nr=null,xi=null,Qn=null,Er=!1;"number"==typeof Dn?(rr=0|Dn,er=0|Pn||rr):Dn?("shape"in Dn?(rr=(er=Dn.shape)[0],er=er[1]):("radius"in Dn&&(rr=er=Dn.radius),"width"in Dn&&(rr=Dn.width),"height"in Dn&&(er=Dn.height)),("color"in Dn||"colors"in Dn)&&($n=Dn.color||Dn.colors,Array.isArray($n)),$n||("colorCount"in Dn&&(fr=0|Dn.colorCount),"colorTexture"in Dn&&(zr=!!Dn.colorTexture,pr="rgba4"),"colorType"in Dn&&(Br=Dn.colorType,!zr)&&("half float"===Br||"float16"===Br?pr="rgba16f":"float"!==Br&&"float32"!==Br||(pr="rgba32f")),"colorFormat"in Dn&&(0<=Qt.indexOf(pr=Dn.colorFormat)?zr=!0:0<=fn.indexOf(pr)&&(zr=!1))),("depthTexture"in Dn||"depthStencilTexture"in Dn)&&(Er=!(!Dn.depthTexture&&!Dn.depthStencilTexture)),"depth"in Dn&&("boolean"==typeof Dn.depth?or=Dn.depth:(Nr=Dn.depth,Zr=!1)),"stencil"in Dn&&("boolean"==typeof Dn.stencil?Zr=Dn.stencil:(xi=Dn.stencil,or=!1)),"depthStencil"in Dn&&("boolean"==typeof Dn.depthStencil?or=Zr=Dn.depthStencil:(Qn=Dn.depthStencil,Zr=or=!1))):rr=er=1;var kr=null,sr=null,ci=null,oi=null;if(Array.isArray($n))kr=$n.map(vt);else if($n)kr=[vt($n)];else for(kr=Array(fr),$n=0;$n<fr;++$n)kr[$n]=Et(rr,er,zr,pr,Br);for(rr=rr||kr[0].width,er=er||kr[0].height,Nr?sr=vt(Nr):or&&!Zr&&(sr=Et(rr,er,Er,"depth","uint32")),xi?ci=vt(xi):Zr&&!or&&(ci=Et(rr,er,!1,"stencil","uint8")),Qn?oi=vt(Qn):!Nr&&!xi&&Zr&&or&&(oi=Et(rr,er,Er,"depth stencil","depth stencil")),or=null,$n=0;$n<kr.length;++$n)Ut(kr[$n]),kr[$n]&&kr[$n].texture&&(Zr=ft[kr[$n].texture._texture.format]*Bt[kr[$n].texture._texture.type],null===or&&(or=Zr));return Ut(sr),Ut(ci),Ut(oi),je(hn),hn.width=rr,hn.height=er,hn.colorAttachments=kr,hn.depthAttachment=sr,hn.stencilAttachment=ci,hn.depthStencilAttachment=oi,vn.color=kr.map($t),vn.depth=$t(sr),vn.stencil=$t(ci),vn.depthStencil=$t(oi),vn.width=hn.width,vn.height=hn.height,pt(hn),vn}var hn=new Pt;return st.framebufferCount++,vn(kn,cn),W(vn,{resize:function(Dn,Pn){var $n=Math.max(0|Dn,1),rr=Math.max(0|Pn||$n,1);if($n===hn.width&&rr===hn.height)return vn;for(var er=hn.colorAttachments,or=0;or<er.length;++or)Dt(er[or],$n,rr);return Dt(hn.depthAttachment,$n,rr),Dt(hn.stencilAttachment,$n,rr),Dt(hn.depthStencilAttachment,$n,rr),hn.width=vn.width=$n,hn.height=vn.height=rr,pt(hn),vn},_reglType:"framebuffer",_framebuffer:hn,destroy:function(){rt(hn),je(hn)},use:function(Dn){jt.setFBO({framebuffer:vn},Dn)}})}var jt={cur:null,next:null,dirty:!1,setFBO:null},Qt=["rgba"],fn=["rgba4","rgb565","rgb5 a1"];He.ext_srgb&&fn.push("srgba"),He.ext_color_buffer_half_float&&fn.push("rgba16f","rgb16f"),He.webgl_color_buffer_float&&fn.push("rgba32f");var an=["uint8"];He.oes_texture_half_float&&an.push("half float","float16"),He.oes_texture_float&&an.push("float","float32");var Sn=0,Yn={};return W(jt,{getFramebuffer:function(kn){return"function"==typeof kn&&"framebuffer"===kn._reglType&&(kn=kn._framebuffer)instanceof Pt?kn:null},create:It,createCube:function(kn){function cn(hn){var Dn,Pn={color:null},$n=0,rr=null;Dn="rgba";var er="uint8",or=1;if("number"==typeof hn?$n=0|hn:hn?("shape"in hn?$n=hn.shape[0]:("radius"in hn&&($n=0|hn.radius),"width"in hn?$n=0|hn.width:"height"in hn&&($n=0|hn.height)),("color"in hn||"colors"in hn)&&(rr=hn.color||hn.colors,Array.isArray(rr)),rr||("colorCount"in hn&&(or=0|hn.colorCount),"colorType"in hn&&(er=hn.colorType),"colorFormat"in hn&&(Dn=hn.colorFormat)),"depth"in hn&&(Pn.depth=hn.depth),"stencil"in hn&&(Pn.stencil=hn.stencil),"depthStencil"in hn&&(Pn.depthStencil=hn.depthStencil)):$n=1,rr)if(Array.isArray(rr))for(hn=[],Dn=0;Dn<rr.length;++Dn)hn[Dn]=rr[Dn];else hn=[rr];else for(hn=Array(or),rr={radius:$n,format:Dn,type:er},Dn=0;Dn<or;++Dn)hn[Dn]=tt.createCube(rr);for(Pn.color=Array(hn.length),Dn=0;Dn<hn.length;++Dn)or=hn[Dn],$n=$n||or.width,Pn.color[Dn]={target:34069,data:hn[Dn]};for(Dn=0;6>Dn;++Dn){for(or=0;or<hn.length;++or)Pn.color[or].target=34069+Dn;0<Dn&&(Pn.depth=vn[0].depth,Pn.stencil=vn[0].stencil,Pn.depthStencil=vn[0].depthStencil),vn[Dn]?vn[Dn](Pn):vn[Dn]=It(Pn)}return W(cn,{width:$n,height:$n,color:hn})}var vn=Array(6);return cn(kn),W(cn,{faces:vn,resize:function(hn){var Dn=0|hn;if(Dn===cn.width)return cn;var Pn=cn.color;for(hn=0;hn<Pn.length;++hn)Pn[hn].resize(Dn);for(hn=0;6>hn;++hn)vn[hn].resize(Dn);return cn.width=cn.height=Dn,cn},_reglType:"framebufferCube",destroy:function(){vn.forEach(function(hn){hn.destroy()})}})},clear:function(){ye(Yn).forEach(rt)},restore:function(){jt.cur=null,jt.next=null,jt.dirty=!0,ye(Yn).forEach(function(kn){kn.framebuffer=Ie.createFramebuffer(),pt(kn)})}})}(Dt,jt,kn,Pn,$n,pt),er=Y(Dt,rt,jt,kn,cn,vn,0,rr,{},hn,Dn,an,Yn,Qt,It,Ie),or=(rt=function P(Ie,He,Ye,tt,ot,st,bt){function wt(Ut){var Kt;Kt=null===He.next?5121:He.next.colorAttachments[0].texture._texture.type;var vt=0,Et=0,$t=tt.framebufferWidth,Dt=tt.framebufferHeight,Pt=null;return we(Ut)?Pt=Ut:Ut&&(vt=0|Ut.x,Et=0|Ut.y,$t=0|(Ut.width||tt.framebufferWidth-vt),Dt=0|(Ut.height||tt.framebufferHeight-Et),Pt=Ut.data||null),Ye(),Ut=$t*Dt*4,Pt||(5121===Kt?Pt=new Uint8Array(Ut):5126===Kt&&(Pt=Pt||new Float32Array(Ut))),Ie.pixelStorei(3333,4),Ie.readPixels(vt,Et,$t,Dt,6408,Kt,Pt),Pt}return function(Ut){return Ut&&"framebuffer"in Ut?(He.setFBO({framebuffer:(Kt=Ut).framebuffer},function(){vt=wt(Kt)}),vt):wt(Ut);var Kt,vt}}(Dt,rr,er.procs.poll,Yn),er.next),Zr=Dt.canvas,zr=[],pr=[],Br=[],fr=[Ie.onDestroy],Nr=null;Zr&&(Zr.addEventListener("webglcontextlost",ot,!1),Zr.addEventListener("webglcontextrestored",st,!1));var xi=rr.setFBO=bt({framebuffer:re.define.call(null,1,"framebuffer")});return Et(),Pt=W(bt,{clear:function(Qn){if("framebuffer"in Qn)if(Qn.framebuffer&&"framebufferCube"===Qn.framebuffer_reglType)for(var Er=0;6>Er;++Er)xi(W({framebuffer:Qn.framebuffer.faces[Er]},Qn),wt);else xi(Qn,wt);else wt(0,Qn)},prop:re.define.bind(null,1),context:re.define.bind(null,2),this:re.define.bind(null,3),draw:bt({}),buffer:function(Qn){return cn.create(Qn,34962,!1,!1)},elements:function(Qn){return vn.create(Qn,!1)},texture:Pn.create2D,cube:Pn.createCube,renderbuffer:$n.create,framebuffer:rr.create,framebufferCube:rr.createCube,vao:hn.createVAO,attributes:Pt,frame:Ut,on:function(Qn,Er){var kr;switch(Qn){case"frame":return Ut(Er);case"lost":kr=pr;break;case"restore":kr=Br;break;case"destroy":kr=fr}return kr.push(Er),{cancel:function(){for(var sr=0;sr<kr.length;++sr)if(kr[sr]===Er){kr[sr]=kr[kr.length-1],kr.pop();break}}}},limits:kn,hasExtension:function(Qn){return 0<=kn.extensions.indexOf(Qn.toLowerCase())},read:rt,destroy:function(){zr.length=0,tt(),Zr&&(Zr.removeEventListener("webglcontextlost",ot),Zr.removeEventListener("webglcontextrestored",st)),Dn.clear(),rr.clear(),$n.clear(),hn.clear(),Pn.clear(),vn.clear(),cn.clear(),Qt&&Qt.clear(),fr.forEach(function(Qn){Qn()})},_gl:Dt,_refresh:Et,poll:function(){vt(),Qt&&Qt.update()},now:$t,stats:pt,getCachedCode:function(){return It},preloadCachedCode:function(Qn){Object.entries(Qn).forEach(function(Er){It[Er[0]]=Er[1]})}}),Ie.onDone(null,Pt),Pt}},"object"==typeof le&&void 0!==ue?ue.exports=b():this.createREGL=b()},{}],284:[function(x,ue,le){var y=x("buffer"),b=y.Buffer;function T(e,o){for(var a in e)o[a]=e[a]}function _(e,o,a){return b(e,o,a)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?ue.exports=y:(T(y,le),le.Buffer=_),_.prototype=Object.create(b.prototype),T(b,_),_.from=function(e,o,a){if("number"==typeof e)throw new TypeError("Argument must not be a number");return b(e,o,a)},_.alloc=function(e,o,a){if("number"!=typeof e)throw new TypeError("Argument must be a number");var l=b(e);return void 0!==o?"string"==typeof a?l.fill(o,a):l.fill(o):l.fill(0),l},_.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return b(e)},_.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return y.SlowBuffer(e)}},{buffer:85}],285:[function(x,ue,le){ue.exports=b;var y=x("events").EventEmitter;function b(){y.call(this)}x("inherits")(b,y),b.Readable=x("readable-stream/lib/_stream_readable.js"),b.Writable=x("readable-stream/lib/_stream_writable.js"),b.Duplex=x("readable-stream/lib/_stream_duplex.js"),b.Transform=x("readable-stream/lib/_stream_transform.js"),b.PassThrough=x("readable-stream/lib/_stream_passthrough.js"),b.finished=x("readable-stream/lib/internal/streams/end-of-stream.js"),b.pipeline=x("readable-stream/lib/internal/streams/pipeline.js"),b.Stream=b,b.prototype.pipe=function(T,_){var e=this;function o(d){T.writable&&!1===T.write(d)&&e.pause&&e.pause()}function a(){e.readable&&e.resume&&e.resume()}e.on("data",o),T.on("drain",a),T._isStdio||_&&!1===_.end||(e.on("end",i),e.on("close",v));var l=!1;function i(){l||(l=!0,T.end())}function v(){l||(l=!0,"function"==typeof T.destroy&&T.destroy())}function h(d){if(s(),0===y.listenerCount(this,"error"))throw d}function s(){e.removeListener("data",o),T.removeListener("drain",a),e.removeListener("end",i),e.removeListener("close",v),e.removeListener("error",h),T.removeListener("error",h),e.removeListener("end",s),e.removeListener("close",s),T.removeListener("close",s)}return e.on("error",h),T.on("error",h),e.on("end",s),e.on("close",s),T.on("close",s),T.emit("pipe",e),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(x,ue,le){"use strict";var y={};function b(_,e,o){o||(o=Error);var a=function(l){var i,v;function h(s,d,p){return l.call(this,"string"==typeof e?e:e(s,d,p))||this}return v=l,(i=h).prototype=Object.create(v.prototype),i.prototype.constructor=i,i.__proto__=v,h}(o);a.prototype.name=o.name,a.prototype.code=_,y[_]=a}function T(_,e){if(Array.isArray(_)){var o=_.length;return _=_.map(function(a){return String(a)}),o>2?"one of ".concat(e," ").concat(_.slice(0,o-1).join(", "),", or ")+_[o-1]:2===o?"one of ".concat(e," ").concat(_[0]," or ").concat(_[1]):"of ".concat(e," ").concat(_[0])}return"of ".concat(e," ").concat(String(_))}b("ERR_INVALID_OPT_VALUE",function(_,e){return'The value "'+e+'" is invalid for option "'+_+'"'},TypeError),b("ERR_INVALID_ARG_TYPE",function(_,e,o){var a,v,s,p;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(a="must not be",e=e.replace(/^not /,"")):a="must be",s=_,(void 0===p||p>s.length)&&(p=s.length)," argument"===s.substring(p-" argument".length,p))v="The ".concat(_," ").concat(a," ").concat(T(e,"type"));else{var h=function(s,d,p){return"number"!=typeof p&&(p=0),!(p+".".length>s.length)&&-1!==s.indexOf(".",p)}(_)?"property":"argument";v='The "'.concat(_,'" ').concat(h," ").concat(a," ").concat(T(e,"type"))}return v+". Received type ".concat(typeof o)},TypeError),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),b("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),b("ERR_STREAM_PREMATURE_CLOSE","Premature close"),b("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),b("ERR_STREAM_WRITE_AFTER_END","write after end"),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ue.exports.codes=y},{}],287:[function(x,ue,le){(function(y){(function(){"use strict";var b=Object.keys||function(h){var s=[];for(var d in h)s.push(d);return s};ue.exports=l;var T=x("./_stream_readable"),_=x("./_stream_writable");x("inherits")(l,T);for(var e=b(_.prototype),o=0;o<e.length;o++){var a=e[o];l.prototype[a]||(l.prototype[a]=_.prototype[a])}function l(h){if(!(this instanceof l))return new l(h);T.call(this,h),_.call(this,h),this.allowHalfOpen=!0,h&&(!1===h.readable&&(this.readable=!1),!1===h.writable&&(this.writable=!1),!1===h.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||y.nextTick(v,this)}function v(h){h.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(h){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}})}).call(this)}).call(this,x("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(x,ue,le){"use strict";ue.exports=b;var y=x("./_stream_transform");function b(T){if(!(this instanceof b))return new b(T);y.call(this,T)}x("inherits")(b,y),b.prototype._transform=function(T,_,e){e(null,T)}},{"./_stream_transform":290,inherits:231}],289:[function(x,ue,le){(function(y,b){(function(){"use strict";var T;ue.exports=C,C.ReadableState=S,x("events");var l,_=function(G,H){return G.listeners(H).length},e=x("./internal/streams/stream"),o=x("buffer").Buffer,a=b.Uint8Array||function(){},i=x("util");l=i&&i.debuglog?i.debuglog("stream"):function(){};var v,h,s,d=x("./internal/streams/buffer_list"),p=x("./internal/streams/destroy"),f=x("./internal/streams/state").getHighWaterMark,g=x("../errors").codes,m=g.ERR_INVALID_ARG_TYPE,u=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,c=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;x("inherits")(C,e);var E=p.errorOrDestroy,M=["error","close","destroy","pause","resume"];function S(G,H,Y){T=T||x("./_stream_duplex"),"boolean"!=typeof Y&&(Y=H instanceof T),this.objectMode=!!(G=G||{}).objectMode,Y&&(this.objectMode=this.objectMode||!!G.readableObjectMode),this.highWaterMark=f(this,G,"readableHighWaterMark",Y),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==G.emitClose,this.autoDestroy=!!G.autoDestroy,this.destroyed=!1,this.defaultEncoding=G.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,G.encoding&&(v||(v=x("string_decoder/").StringDecoder),this.decoder=new v(G.encoding),this.encoding=G.encoding)}function C(G){if(T=T||x("./_stream_duplex"),!(this instanceof C))return new C(G);this._readableState=new S(G,this,this instanceof T),this.readable=!0,G&&("function"==typeof G.read&&(this._read=G.read),"function"==typeof G.destroy&&(this._destroy=G.destroy)),e.call(this)}function O(G,H,Y,oe,W){l("readableAddChunk",H);var ne,ce,fe,me,pe,re=G._readableState;if(null===H)re.reading=!1,function(ce,fe){if(l("onEofChunk"),!fe.ended){if(fe.decoder){var me=fe.decoder.end();me&&me.length&&(fe.buffer.push(me),fe.length+=fe.objectMode?1:me.length)}fe.ended=!0,fe.sync?F(ce):(fe.needReadable=!1,fe.emittedReadable||(fe.emittedReadable=!0,L(ce)))}}(G,re);else if(W||(ce=re,o.isBuffer(pe=fe=H)||pe instanceof a||"string"==typeof fe||void 0===fe||ce.objectMode||(me=new m("chunk",["string","Buffer","Uint8Array"],fe)),ne=me),ne)E(G,ne);else if(re.objectMode||H&&H.length>0)if("string"==typeof H||re.objectMode||Object.getPrototypeOf(H)===o.prototype||(H=function(ce){return o.from(ce)}(H)),oe)re.endEmitted?E(G,new c):I(G,re,H,!0);else if(re.ended)E(G,new u);else{if(re.destroyed)return!1;re.reading=!1,re.decoder&&!Y?(H=re.decoder.write(H),re.objectMode||0!==H.length?I(G,re,H,!1):P(G,re)):I(G,re,H,!1)}else oe||(re.reading=!1,P(G,re));return!re.ended&&(re.length<re.highWaterMark||0===re.length)}function I(G,H,Y,oe){H.flowing&&0===H.length&&!H.sync?(H.awaitDrain=0,G.emit("data",Y)):(H.length+=H.objectMode?1:Y.length,oe?H.buffer.unshift(Y):H.buffer.push(Y),H.needReadable&&F(G)),P(G,H)}function N(G,H){return G<=0||0===H.length&&H.ended?0:H.objectMode?1:G!=G?H.flowing&&H.length?H.buffer.head.data.length:H.length:(G>H.highWaterMark&&(H.highWaterMark=((Y=G)>=1073741824?Y=1073741824:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y)),G<=H.length?G:H.ended?H.length:(H.needReadable=!0,0));var Y}function F(G){var H=G._readableState;l("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(l("emitReadable",H.flowing),H.emittedReadable=!0,y.nextTick(L,G))}function L(G){var H=G._readableState;l("emitReadable_",H.destroyed,H.length,H.ended),H.destroyed||!H.length&&!H.ended||(G.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,te(G)}function P(G,H){H.readingMore||(H.readingMore=!0,y.nextTick(j,G,H))}function j(G,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&0===H.length);){var Y=H.length;if(l("maybeReadMore read 0"),G.read(0),Y===H.length)break}H.readingMore=!1}function U(G){var H=G._readableState;H.readableListening=G.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:G.listenerCount("data")>0&&G.resume()}function $(G){l("readable nexttick read 0"),G.read(0)}function X(G,H){l("resume",H.reading),H.reading||G.read(0),H.resumeScheduled=!1,G.emit("resume"),te(G),H.flowing&&!H.reading&&G.read(0)}function te(G){var H=G._readableState;for(l("flow",H.flowing);H.flowing&&null!==G.read(););}function ae(G,H){return 0===H.length?null:(H.objectMode?Y=H.buffer.shift():!G||G>=H.length?(Y=H.decoder?H.buffer.join(""):1===H.buffer.length?H.buffer.first():H.buffer.concat(H.length),H.buffer.clear()):Y=H.buffer.consume(G,H.decoder),Y);var Y}function J(G){var H=G._readableState;l("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,y.nextTick(ee,H,G))}function ee(G,H){if(l("endReadableNT",G.endEmitted,G.length),!G.endEmitted&&0===G.length&&(G.endEmitted=!0,H.readable=!1,H.emit("end"),G.autoDestroy)){var Y=H._writableState;(!Y||Y.autoDestroy&&Y.finished)&&H.destroy()}}function se(G,H){for(var Y=0,oe=G.length;Y<oe;Y++)if(G[Y]===H)return Y;return-1}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(G){this._readableState&&(this._readableState.destroyed=G)}}),C.prototype.destroy=p.destroy,C.prototype._undestroy=p.undestroy,C.prototype._destroy=function(G,H){H(G)},C.prototype.push=function(G,H){var Y,oe=this._readableState;return oe.objectMode?Y=!0:"string"==typeof G&&((H=H||oe.defaultEncoding)!==oe.encoding&&(G=o.from(G,H),H=""),Y=!0),O(this,G,H,!1,Y)},C.prototype.unshift=function(G){return O(this,G,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(G){v||(v=x("string_decoder/").StringDecoder);var H=new v(G);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var Y=this._readableState.buffer.head,oe="";null!==Y;)oe+=H.write(Y.data),Y=Y.next;return this._readableState.buffer.clear(),""!==oe&&this._readableState.buffer.push(oe),this._readableState.length=oe.length,this},C.prototype.read=function(G){l("read",G),G=parseInt(G,10);var H=this._readableState,Y=G;if(0!==G&&(H.emittedReadable=!1),0===G&&H.needReadable&&((0!==H.highWaterMark?H.length>=H.highWaterMark:H.length>0)||H.ended))return l("read: emitReadable",H.length,H.ended),0===H.length&&H.ended?J(this):F(this),null;if(0===(G=N(G,H))&&H.ended)return 0===H.length&&J(this),null;var oe,W=H.needReadable;return l("need readable",W),(0===H.length||H.length-G<H.highWaterMark)&&l("length less than watermark",W=!0),H.ended||H.reading?l("reading or ended",W=!1):W&&(l("do read"),H.reading=!0,H.sync=!0,0===H.length&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(G=N(Y,H))),null===(oe=G>0?ae(G,H):null)?(H.needReadable=H.length<=H.highWaterMark,G=0):(H.length-=G,H.awaitDrain=0),0===H.length&&(H.ended||(H.needReadable=!0),Y!==G&&H.ended&&J(this)),null!==oe&&this.emit("data",oe),oe},C.prototype._read=function(G){E(this,new w("_read()"))},C.prototype.pipe=function(G,H){var Y=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=G;break;case 1:oe.pipes=[oe.pipes,G];break;default:oe.pipes.push(G)}oe.pipesCount+=1,l("pipe count=%d opts=%j",oe.pipesCount,H);var W=H&&!1===H.end||G===y.stdout||G===y.stderr?Te:re;function re(){l("onend"),G.end()}oe.endEmitted?y.nextTick(W):Y.once("end",W),G.on("unpipe",function ne(Le,Oe){l("onunpipe"),Le===Y&&Oe&&!1===Oe.hasUnpiped&&(Oe.hasUnpiped=!0,l("cleanup"),G.removeListener("close",we),G.removeListener("finish",ye),G.removeListener("drain",ce),G.removeListener("error",pe),G.removeListener("unpipe",ne),Y.removeListener("end",re),Y.removeListener("end",Te),Y.removeListener("data",me),fe=!0,!oe.awaitDrain||G._writableState&&!G._writableState.needDrain||ce())});var Le,ce=(Le=Y,function(){var Oe=Le._readableState;l("pipeOnDrain",Oe.awaitDrain),Oe.awaitDrain&&Oe.awaitDrain--,0===Oe.awaitDrain&&_(Le,"data")&&(Oe.flowing=!0,te(Le))});G.on("drain",ce);var fe=!1;function me(Le){l("ondata");var Oe=G.write(Le);l("dest.write",Oe),!1===Oe&&((1===oe.pipesCount&&oe.pipes===G||oe.pipesCount>1&&-1!==se(oe.pipes,G))&&!fe&&(l("false write response, pause",oe.awaitDrain),oe.awaitDrain++),Y.pause())}function pe(Le){l("onerror",Le),Te(),G.removeListener("error",pe),0===_(G,"error")&&E(G,Le)}function we(){G.removeListener("finish",ye),Te()}function ye(){l("onfinish"),G.removeListener("close",we),Te()}function Te(){l("unpipe"),Y.unpipe(G)}return Y.on("data",me),function(Le,Oe,Re){if("function"==typeof Le.prependListener)return Le.prependListener(Oe,Re);Le._events&&Le._events[Oe]?Array.isArray(Le._events[Oe])?Le._events[Oe].unshift(Re):Le._events[Oe]=[Re,Le._events[Oe]]:Le.on(Oe,Re)}(G,"error",pe),G.once("close",we),G.once("finish",ye),G.emit("pipe",Y),oe.flowing||(l("pipe resume"),Y.resume()),G},C.prototype.unpipe=function(G){var H=this._readableState,Y={hasUnpiped:!1};if(0===H.pipesCount)return this;if(1===H.pipesCount)return G&&G!==H.pipes||(G||(G=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,G&&G.emit("unpipe",this,Y)),this;if(!G){var oe=H.pipes,W=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var ne=0;ne<W;ne++)oe[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var re=se(H.pipes,G);return-1===re||(H.pipes.splice(re,1),H.pipesCount-=1,1===H.pipesCount&&(H.pipes=H.pipes[0]),G.emit("unpipe",this,Y)),this},C.prototype.addListener=C.prototype.on=function(G,H){var Y=e.prototype.on.call(this,G,H),oe=this._readableState;return"data"===G?(oe.readableListening=this.listenerCount("readable")>0,!1!==oe.flowing&&this.resume()):"readable"===G&&(oe.endEmitted||oe.readableListening||(oe.readableListening=oe.needReadable=!0,oe.flowing=!1,oe.emittedReadable=!1,l("on readable",oe.length,oe.reading),oe.length?F(this):oe.reading||y.nextTick($,this))),Y},C.prototype.removeListener=function(G,H){var Y=e.prototype.removeListener.call(this,G,H);return"readable"===G&&y.nextTick(U,this),Y},C.prototype.removeAllListeners=function(G){var H=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==G&&void 0!==G||y.nextTick(U,this),H},C.prototype.resume=function(){var Y,G=this._readableState;return G.flowing||(l("resume"),G.flowing=!G.readableListening,this,(Y=G).resumeScheduled||(Y.resumeScheduled=!0,y.nextTick(X,this,Y))),G.paused=!1,this},C.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(G){var H=this,Y=this._readableState,oe=!1;for(var W in G.on("end",function(){if(l("wrapped end"),Y.decoder&&!Y.ended){var re=Y.decoder.end();re&&re.length&&H.push(re)}H.push(null)}),G.on("data",function(re){l("wrapped data"),Y.decoder&&(re=Y.decoder.write(re)),Y.objectMode&&null==re||(Y.objectMode||re&&re.length)&&(H.push(re)||(oe=!0,G.pause()))}),G)void 0===this[W]&&"function"==typeof G[W]&&(this[W]=function(re){return function(){return G[re].apply(G,arguments)}}(W));for(var ne=0;ne<M.length;ne++)G.on(M[ne],this.emit.bind(this,M[ne]));return this._read=function(re){l("wrapped _read",re),oe&&(oe=!1,G.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=x("./internal/streams/async_iterator")),h(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}}),C._fromList=ae,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(G,H){return void 0===s&&(s=x("./internal/streams/from")),s(C,G,H)})}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(x,ue,le){"use strict";ue.exports=l;var y=x("../errors").codes,b=y.ERR_METHOD_NOT_IMPLEMENTED,T=y.ERR_MULTIPLE_CALLBACK,_=y.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=y.ERR_TRANSFORM_WITH_LENGTH_0,o=x("./_stream_duplex");function a(h,s){var d=this._transformState;d.transforming=!1;var p=d.writecb;if(null===p)return this.emit("error",new T);d.writechunk=null,d.writecb=null,null!=s&&this.push(s),p(h);var f=this._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function l(h){if(!(this instanceof l))return new l(h);o.call(this,h),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&("function"==typeof h.transform&&(this._transform=h.transform),"function"==typeof h.flush&&(this._flush=h.flush)),this.on("prefinish",i)}function i(){var h=this;"function"!=typeof this._flush||this._readableState.destroyed?v(this,null,null):this._flush(function(s,d){v(h,s,d)})}function v(h,s,d){if(s)return h.emit("error",s);if(null!=d&&h.push(d),h._writableState.length)throw new e;if(h._transformState.transforming)throw new _;return h.push(null)}x("inherits")(l,o),l.prototype.push=function(h,s){return this._transformState.needTransform=!1,o.prototype.push.call(this,h,s)},l.prototype._transform=function(h,s,d){d(new b("_transform()"))},l.prototype._write=function(h,s,d){var p=this._transformState;if(p.writecb=d,p.writechunk=h,p.writeencoding=s,!p.transforming){var f=this._readableState;(p.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},l.prototype._read=function(h){var s=this._transformState;null===s.writechunk||s.transforming?s.needTransform=!0:(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform))},l.prototype._destroy=function(h,s){o.prototype._destroy.call(this,h,function(d){s(d)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(x,ue,le){(function(y,b){(function(){"use strict";function T(j){var U=this;this.next=null,this.entry=null,this.finish=function(){!function($,X,te){var ae=$.entry;for($.entry=null;ae;){var J=ae.callback;X.pendingcb--,J(undefined),ae=ae.next}X.corkedRequestsFree.next=$}(U,j)}}var _;ue.exports=C,C.WritableState=S;var i,e={deprecate:x("util-deprecate")},o=x("./internal/streams/stream"),a=x("buffer").Buffer,l=b.Uint8Array||function(){},v=x("./internal/streams/destroy"),h=x("./internal/streams/state").getHighWaterMark,s=x("../errors").codes,d=s.ERR_INVALID_ARG_TYPE,p=s.ERR_METHOD_NOT_IMPLEMENTED,f=s.ERR_MULTIPLE_CALLBACK,g=s.ERR_STREAM_CANNOT_PIPE,m=s.ERR_STREAM_DESTROYED,u=s.ERR_STREAM_NULL_VALUES,w=s.ERR_STREAM_WRITE_AFTER_END,c=s.ERR_UNKNOWN_ENCODING,E=v.errorOrDestroy;function M(){}function S(j,U,$){_=_||x("./_stream_duplex"),"boolean"!=typeof $&&($=U instanceof _),this.objectMode=!!(j=j||{}).objectMode,$&&(this.objectMode=this.objectMode||!!j.writableObjectMode),this.highWaterMark=h(this,j,"writableHighWaterMark",$),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===j.decodeStrings),this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(te){!function(ae,J){var Y,ee=ae._writableState,se=ee.sync,G=ee.writecb;if("function"!=typeof G)throw new f;if((Y=ee).writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0,J)!function(Y,oe,W,ne,re){--oe.pendingcb,W?(y.nextTick(re,ne),y.nextTick(P,Y,oe),Y._writableState.errorEmitted=!0,E(Y,ne)):(re(ne),Y._writableState.errorEmitted=!0,E(Y,ne),P(Y,oe))}(ae,ee,se,J,G);else{var H=F(ee)||ae.destroyed;H||ee.corked||ee.bufferProcessing||!ee.bufferedRequest||N(ae,ee),se?y.nextTick(I,ae,ee,H,G):I(ae,ee,H,G)}}(U,te)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==j.emitClose,this.autoDestroy=!!j.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new T(this)}function C(j){var U=this instanceof(_=_||x("./_stream_duplex"));if(!U&&!i.call(C,this))return new C(j);this._writableState=new S(j,this,U),this.writable=!0,j&&("function"==typeof j.write&&(this._write=j.write),"function"==typeof j.writev&&(this._writev=j.writev),"function"==typeof j.destroy&&(this._destroy=j.destroy),"function"==typeof j.final&&(this._final=j.final)),o.call(this)}function O(j,U,$,X,te,ae,J){U.writelen=X,U.writecb=J,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new m("write")):$?j._writev(te,U.onwrite):j._write(te,ae,U.onwrite),U.sync=!1}function I(j,U,$,X){var te,ae;$||(te=j,0===(ae=U).length&&ae.needDrain&&(ae.needDrain=!1,te.emit("drain"))),U.pendingcb--,X(),P(j,U)}function N(j,U){U.bufferProcessing=!0;var $=U.bufferedRequest;if(j._writev&&$&&$.next){var te=new Array(U.bufferedRequestCount),ae=U.corkedRequestsFree;ae.entry=$;for(var J=0,ee=!0;$;)te[J]=$,$.isBuf||(ee=!1),$=$.next,J+=1;te.allBuffers=ee,O(j,U,!0,U.length,te,"",ae.finish),U.pendingcb++,U.lastBufferedRequest=null,ae.next?(U.corkedRequestsFree=ae.next,ae.next=null):U.corkedRequestsFree=new T(U),U.bufferedRequestCount=0}else{for(;$;){var se=$.chunk;if(O(j,U,!1,U.objectMode?1:se.length,se,$.encoding,$.callback),$=$.next,U.bufferedRequestCount--,U.writing)break}null===$&&(U.lastBufferedRequest=null)}U.bufferedRequest=$,U.bufferProcessing=!1}function F(j){return j.ending&&0===j.length&&null===j.bufferedRequest&&!j.finished&&!j.writing}function L(j,U){j._final(function($){U.pendingcb--,$&&E(j,$),U.prefinished=!0,j.emit("prefinish"),P(j,U)})}function P(j,U){var te,ae,$=F(U);if($&&(te=j,(ae=U).prefinished||ae.finalCalled||("function"!=typeof te._final||ae.destroyed?(ae.prefinished=!0,te.emit("prefinish")):(ae.pendingcb++,ae.finalCalled=!0,y.nextTick(L,te,ae))),0===U.pendingcb&&(U.finished=!0,j.emit("finish"),U.autoDestroy))){var X=j._readableState;(!X||X.autoDestroy&&X.endEmitted)&&j.destroy()}return $}x("inherits")(C,o),S.prototype.getBuffer=function(){for(var j=this.bufferedRequest,U=[];j;)U.push(j),j=j.next;return U},function(){try{Object.defineProperty(S.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(j){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(j){return!!i.call(this,j)||this===C&&j&&j._writableState instanceof S}})):i=function(j){return j instanceof this},C.prototype.pipe=function(){E(this,new g)},C.prototype.write=function(j,U,$){var X,ee,se,G,te=this._writableState,ae=!1,J=!te.objectMode&&(a.isBuffer(X=j)||X instanceof l);return J&&!a.isBuffer(j)&&(j=a.from(j)),"function"==typeof U&&($=U,U=null),J?U="buffer":U||(U=te.defaultEncoding),"function"!=typeof $&&($=M),te.ending?(ee=this,se=$,G=new w,E(ee,G),y.nextTick(se,G)):(J||function(ee,se,G,H){var Y;return null===G?Y=new u:"string"==typeof G||se.objectMode||(Y=new d("chunk",["string","Buffer"],G)),!Y||(E(ee,Y),y.nextTick(H,Y),!1)}(this,te,j,$))&&(te.pendingcb++,ae=function(ee,se,G,H,Y,oe){if(!G){var W=(me=H,(fe=se).objectMode||!1===fe.decodeStrings||"string"!=typeof me||(me=a.from(me,Y)),me);H!==W&&(G=!0,Y="buffer",H=W)}var fe,me,ne=se.objectMode?1:H.length;se.length+=ne;var re=se.length<se.highWaterMark;if(re||(se.needDrain=!0),se.writing||se.corked){var ce=se.lastBufferedRequest;se.lastBufferedRequest={chunk:H,encoding:Y,isBuf:G,callback:oe,next:null},ce?ce.next=se.lastBufferedRequest:se.bufferedRequest=se.lastBufferedRequest,se.bufferedRequestCount+=1}else O(ee,se,!1,ne,H,Y,oe);return re}(this,te,J,j,U,$)),ae},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,j.writing||j.corked||j.bufferProcessing||!j.bufferedRequest||N(this,j))},C.prototype.setDefaultEncoding=function(j){if("string"==typeof j&&(j=j.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((j+"").toLowerCase())>-1))throw new c(j);return this._writableState.defaultEncoding=j,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(j,U,$){$(new p("_write()"))},C.prototype._writev=null,C.prototype.end=function(j,U,$){var ae,J,X=this._writableState;return"function"==typeof j?($=j,j=null,U=null):"function"==typeof U&&($=U,U=null),null!=j&&this.write(j,U),X.corked&&(X.corked=1,this.uncork()),X.ending||(this,J=$,(ae=X).ending=!0,P(this,ae),J&&(ae.finished?y.nextTick(J):this.once("finish",J)),ae.ended=!0,this.writable=!1),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(j){this._writableState&&(this._writableState.destroyed=j)}}),C.prototype.destroy=v.destroy,C.prototype._undestroy=v.undestroy,C.prototype._destroy=function(j,U){U(j)}}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(x,ue,le){(function(y){(function(){"use strict";var b;function T(m,u,w){return u in m?Object.defineProperty(m,u,{value:w,enumerable:!0,configurable:!0,writable:!0}):m[u]=w,m}var _=x("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),i=Symbol("lastPromise"),v=Symbol("handlePromise"),h=Symbol("stream");function s(m,u){return{value:m,done:u}}function d(m){var u=m[e];if(null!==u){var w=m[h].read();null!==w&&(m[i]=null,m[e]=null,m[o]=null,u(s(w,!1)))}}function p(m){y.nextTick(d,m)}var f=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((T(b={get stream(){return this[h]},next:function(){var m=this,u=this[a];if(null!==u)return Promise.reject(u);if(this[l])return Promise.resolve(s(void 0,!0));if(this[h].destroyed)return new Promise(function(M,S){y.nextTick(function(){m[a]?S(m[a]):M(s(void 0,!0))})});var w,M,S,c=this[i];if(c)w=new Promise((M=c,S=this,function(C,O){M.then(function(){S[l]?C(s(void 0,!0)):S[v](C,O)},O)}));else{var E=this[h].read();if(null!==E)return Promise.resolve(s(E,!1));w=new Promise(this[v])}return this[i]=w,w}},Symbol.asyncIterator,function(){return this}),T(b,"return",function(){var m=this;return new Promise(function(u,w){m[h].destroy(null,function(c){c?w(c):u(s(void 0,!0))})})}),b),f);ue.exports=function(m){var u,w=Object.create(g,(T(u={},h,{value:m,writable:!0}),T(u,e,{value:null,writable:!0}),T(u,o,{value:null,writable:!0}),T(u,a,{value:null,writable:!0}),T(u,l,{value:m._readableState.endEmitted,writable:!0}),T(u,v,{value:function(c,E){var M=w[h].read();M?(w[i]=null,w[e]=null,w[o]=null,c(s(M,!1))):(w[e]=c,w[o]=E)},writable:!0}),u));return w[i]=null,_(m,function(c){if(c&&"ERR_STREAM_PREMATURE_CLOSE"!==c.code){var E=w[o];return null!==E&&(w[i]=null,w[e]=null,w[o]=null,E(c)),void(w[a]=c)}var M=w[e];null!==M&&(w[i]=null,w[e]=null,w[o]=null,M(s(void 0,!0))),w[l]=!0}),m.on("readable",p.bind(null,w)),w}}).call(this)}).call(this,x("_process"))},{"./end-of-stream":295,_process:277}],293:[function(x,ue,le){"use strict";function y(a,l){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(a);l&&(v=v.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),i.push.apply(i,v)}return i}function b(a,l,i){return l in a?Object.defineProperty(a,l,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[l]=i,a}function T(a,l){for(var i=0;i<l.length;i++){var v=l[i];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}var _=x("buffer").Buffer,e=x("util").inspect,o=e&&e.custom||"inspect";ue.exports=function(){function a(){(function(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")})(this,a),this.head=null,this.tail=null,this.length=0}var l,i;return l=a,(i=[{key:"push",value:function(h){var s={data:h,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(h){var s={data:h,next:this.head};0===this.length&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(0!==this.length){var h=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,h}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(h){if(0===this.length)return"";for(var s=this.head,d=""+s.data;s=s.next;)d+=h+s.data;return d}},{key:"concat",value:function(h){if(0===this.length)return _.alloc(0);for(var f=_.allocUnsafe(h>>>0),g=this.head,m=0;g;)_.prototype.copy.call(g.data,f,m),m+=g.data.length,g=g.next;return f}},{key:"consume",value:function(h,s){var d;return h<this.head.data.length?(d=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):d=h===this.head.data.length?this.shift():s?this._getString(h):this._getBuffer(h),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var s=this.head,d=1,p=s.data;for(h-=p.length;s=s.next;){var f=s.data,g=h>f.length?f.length:h;if(p+=g===f.length?f:f.slice(0,h),0==(h-=g)){g===f.length?(++d,this.head=s.next?s.next:this.tail=null):(this.head=s,s.data=f.slice(g));break}++d}return this.length-=d,p}},{key:"_getBuffer",value:function(h){var s=_.allocUnsafe(h),d=this.head,p=1;for(d.data.copy(s),h-=d.data.length;d=d.next;){var f=d.data,g=h>f.length?f.length:h;if(f.copy(s,s.length-h,0,g),0==(h-=g)){g===f.length?(++p,this.head=d.next?d.next:this.tail=null):(this.head=d,d.data=f.slice(g));break}++p}return this.length-=p,s}},{key:o,value:function(h,s){return e(this,function(d){for(var p=1;p<arguments.length;p++){var f=null!=arguments[p]?arguments[p]:{};p%2?y(Object(f),!0).forEach(function(g){b(d,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(f)):y(Object(f)).forEach(function(g){Object.defineProperty(d,g,Object.getOwnPropertyDescriptor(f,g))})}return d}({},s,{depth:0,customInspect:!1}))}}])&&T(l.prototype,i),a}()},{buffer:85,util:83}],294:[function(x,ue,le){(function(y){(function(){"use strict";function b(e,o){_(e,o),T(e)}function T(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function _(e,o){e.emit("error",o)}ue.exports={destroy:function(e,o){var a=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,y.nextTick(_,this,e)):y.nextTick(_,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(v){!o&&v?a._writableState?a._writableState.errorEmitted?y.nextTick(T,a):(a._writableState.errorEmitted=!0,y.nextTick(b,a,v)):y.nextTick(b,a,v):o?(y.nextTick(T,a),o(v)):y.nextTick(T,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,o){var a=e._readableState,l=e._writableState;a&&a.autoDestroy||l&&l.autoDestroy?e.destroy(o):e.emit("error",o)}}}).call(this)}).call(this,x("_process"))},{_process:277}],295:[function(x,ue,le){"use strict";var y=x("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function b(){}ue.exports=function T(_,e,o){if("function"==typeof e)return T(_,null,e);var m,u;e||(e={}),m=o||b,u=!1,o=function(){if(!u){u=!0;for(var w=arguments.length,c=new Array(w),E=0;E<w;E++)c[E]=arguments[E];m.apply(this,c)}};var a=e.readable||!1!==e.readable&&_.readable,l=e.writable||!1!==e.writable&&_.writable,i=function(){_.writable||h()},v=_._writableState&&_._writableState.finished,h=function(){l=!1,v=!0,a||o.call(_)},s=_._readableState&&_._readableState.endEmitted,d=function(){a=!1,s=!0,l||o.call(_)},p=function(m){o.call(_,m)},f=function(){var m;return a&&!s?(_._readableState&&_._readableState.ended||(m=new y),o.call(_,m)):l&&!v?(_._writableState&&_._writableState.ended||(m=new y),o.call(_,m)):void 0},g=function(){_.req.on("finish",h)};return function(m){return m.setHeader&&"function"==typeof m.abort}(_)?(_.on("complete",h),_.on("abort",f),_.req?g():_.on("request",g)):l&&!_._writableState&&(_.on("end",i),_.on("close",i)),_.on("end",d),_.on("finish",h),!1!==e.error&&_.on("error",p),_.on("close",f),function(){_.removeListener("complete",h),_.removeListener("abort",f),_.removeListener("request",g),_.req&&_.req.removeListener("finish",h),_.removeListener("end",i),_.removeListener("close",i),_.removeListener("finish",h),_.removeListener("end",d),_.removeListener("error",p),_.removeListener("close",f)}}},{"../../../errors":286}],296:[function(x,ue,le){ue.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(x,ue,le){"use strict";var y,b=x("../../../errors").codes,T=b.ERR_MISSING_ARGS,_=b.ERR_STREAM_DESTROYED;function e(v){if(v)throw v}function o(v,h,s,d){var g,m;g=d,m=!1,d=function(){m||(m=!0,g.apply(void 0,arguments))};var p=!1;v.on("close",function(){p=!0}),void 0===y&&(y=x("./end-of-stream")),y(v,{readable:h,writable:s},function(g){if(g)return d(g);p=!0,d()});var f=!1;return function(g){if(!p&&!f)return f=!0,function(m){return m.setHeader&&"function"==typeof m.abort}(v)?v.abort():"function"==typeof v.destroy?v.destroy():void d(g||new _("pipe"))}}function a(v){v()}function l(v,h){return v.pipe(h)}function i(v){return v.length?"function"!=typeof v[v.length-1]?e:v.pop():e}ue.exports=function(){for(var v=arguments.length,h=new Array(v),s=0;s<v;s++)h[s]=arguments[s];var d,p=i(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new T("streams");var f=h.map(function(g,m){var u=m<h.length-1;return o(g,u,m>0,function(w){d||(d=w),w&&f.forEach(a),u||(f.forEach(a),p(d))})});return h.reduce(l)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(x,ue,le){"use strict";var y=x("../../../errors").codes.ERR_INVALID_OPT_VALUE;ue.exports={getHighWaterMark:function(b,T,_,e){var a,o=null!=(a=T).highWaterMark?a.highWaterMark:e?a[_]:null;if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new y(e?_:"highWaterMark",o);return Math.floor(o)}return b.objectMode?16:16384}}},{"../../../errors":286}],299:[function(x,ue,le){ue.exports=x("events").EventEmitter},{events:84}],300:[function(x,ue,le){"use strict";var y=x("safe-buffer").Buffer,b=y.isEncoding||function(s){switch((s=""+s)&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function T(s){var d;switch(this.encoding=function(p){var f=function(g){if(!g)return"utf8";for(var m;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(m)return;g=(""+g).toLowerCase(),m=!0}}(p);if("string"!=typeof f&&(y.isEncoding===b||!b(p)))throw new Error("Unknown encoding: "+p);return f||p}(s),this.encoding){case"utf16le":this.text=o,this.end=a,d=4;break;case"utf8":this.fillLast=e,d=4;break;case"base64":this.text=l,this.end=i,d=3;break;default:return this.write=v,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(d)}function _(s){return s<=127?0:s>>5==6?2:s>>4==14?3:s>>3==30?4:s>>6==2?-1:-2}function e(s){var d=this.lastTotal-this.lastNeed,p=function(f,g,m){if(128!=(192&g[0]))return f.lastNeed=0,"\ufffd";if(f.lastNeed>1&&g.length>1){if(128!=(192&g[1]))return f.lastNeed=1,"\ufffd";if(f.lastNeed>2&&g.length>2&&128!=(192&g[2]))return f.lastNeed=2,"\ufffd"}}(this,s);return void 0!==p?p:this.lastNeed<=s.length?(s.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(s.copy(this.lastChar,d,0,s.length),void(this.lastNeed-=s.length))}function o(s,d){if((s.length-d)%2==0){var p=s.toString("utf16le",d);if(p){var f=p.charCodeAt(p.length-1);if(f>=55296&&f<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],p.slice(0,-1)}return p}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",d,s.length-1)}function a(s){var d=s&&s.length?this.write(s):"";return this.lastNeed?d+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):d}function l(s,d){var p=(s.length-d)%3;return 0===p?s.toString("base64",d):(this.lastNeed=3-p,this.lastTotal=3,1===p?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",d,s.length-p))}function i(s){var d=s&&s.length?this.write(s):"";return this.lastNeed?d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function v(s){return s.toString(this.encoding)}function h(s){return s&&s.length?this.write(s):""}le.StringDecoder=T,T.prototype.write=function(s){if(0===s.length)return"";var d,p;if(this.lastNeed){if(void 0===(d=this.fillLast(s)))return"";p=this.lastNeed,this.lastNeed=0}else p=0;return p<s.length?d?d+this.text(s,p):this.text(s,p):d||""},T.prototype.end=function(s){var d=s&&s.length?this.write(s):"";return this.lastNeed?d+"\ufffd":d},T.prototype.text=function(s,d){var p=function(g,m,u){var w=m.length-1;if(w<u)return 0;var c=_(m[w]);return c>=0?(c>0&&(g.lastNeed=c-1),c):--w<u||-2===c?0:(c=_(m[w]))>=0?(c>0&&(g.lastNeed=c-2),c):--w<u||-2===c?0:(c=_(m[w]))>=0?(c>0&&(2===c?c=0:g.lastNeed=c-3),c):0}(this,s,d);if(!this.lastNeed)return s.toString("utf8",d);this.lastTotal=p;var f=s.length-(p-this.lastNeed);return s.copy(this.lastChar,0,f),s.toString("utf8",d,f)},T.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length}},{"safe-buffer":284}],301:[function(x,ue,le){(function(y,b){(function(){var T=x("assert"),_=x("debug")("stream-parser");function e(p){_("initializing parser stream"),p._parserBytesLeft=0,p._parserBuffers=[],p._parserBuffered=0,p._parserState=-1,p._parserCallback=null,"function"==typeof p.push&&(p._parserOutput=p.push.bind(p)),p._parserInit=!0}function o(p,f){T(!this._parserCallback,'there is already a "callback" set!'),T(isFinite(p)&&p>0,'can only buffer a finite number of bytes > 0, got "'+p+'"'),this._parserInit||e(this),_("buffering %o bytes",p),this._parserBytesLeft=p,this._parserCallback=f,this._parserState=0}function a(p,f){T(!this._parserCallback,'there is already a "callback" set!'),T(p>0,'can only skip > 0 bytes, got "'+p+'"'),this._parserInit||e(this),_("skipping %o bytes",p),this._parserBytesLeft=p,this._parserCallback=f,this._parserState=1}function l(p,f){T(!this._parserCallback,'There is already a "callback" set!'),T(p>0,'can only pass through > 0 bytes, got "'+p+'"'),this._parserInit||e(this),_("passing through %o bytes",p),this._parserBytesLeft=p,this._parserCallback=f,this._parserState=2}function i(p,f,g){this._parserInit||e(this),_("write(%o bytes)",p.length),"function"==typeof f&&(g=f),s(this,p,null,g)}function v(p,f,g){this._parserInit||e(this),_("transform(%o bytes)",p.length),"function"!=typeof f&&(f=this._parserOutput),s(this,p,f,g)}function h(p,f,g,m){if(p._parserBytesLeft-=f.length,_("%o bytes left for stream piece",p._parserBytesLeft),0===p._parserState?(p._parserBuffers.push(f),p._parserBuffered+=f.length):2===p._parserState&&g(f),0!==p._parserBytesLeft)return m;var u=p._parserCallback;if(u&&0===p._parserState&&p._parserBuffers.length>1&&(f=b.concat(p._parserBuffers,p._parserBuffered)),0!==p._parserState&&(f=null),p._parserCallback=null,p._parserBuffered=0,p._parserState=-1,p._parserBuffers.splice(0),u){var w=[];f&&w.push(f),g&&w.push(g);var c=u.length>w.length;c&&w.push(d(m));var E=u.apply(p,w);if(!c||m===E)return m}}ue.exports=function(p){var f=p&&"function"==typeof p._transform;if(!(f||p&&"function"==typeof p._write))throw new Error("must pass a Writable or Transform stream in");_("extending Parser into stream"),p._bytes=o,p._skipBytes=a,f&&(p._passthrough=l),f?p._transform=v:p._write=i};var s=d(function p(f,g,m,u){return f._parserBytesLeft<=0?u(new Error("got data but not currently parsing anything")):g.length<=f._parserBytesLeft?function(){return h(f,g,m,u)}:function(){var w=g.slice(0,f._parserBytesLeft);return h(f,w,m,function(c){return c?u(c):g.length>w.length?function(){return p(f,g.slice(w.length),m,u)}:void 0})}});function d(p){return function(){for(var f=p.apply(this,arguments);"function"==typeof f;)f=f();return f}}}).call(this)}).call(this,x("_process"),x("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(x,ue,le){(function(y){(function(){function b(){var T;try{T=le.storage.debug}catch(_){}return!T&&void 0!==y&&"env"in y&&(T=y.env.DEBUG),T}(le=ue.exports=x("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},le.formatArgs=function(T){var _=this.useColors;if(T[0]=(_?"%c":"")+this.namespace+(_?" %c":" ")+T[0]+(_?"%c ":" ")+"+"+le.humanize(this.diff),_){var e="color: "+this.color;T.splice(1,0,e,"color: inherit");var o=0,a=0;T[0].replace(/%[a-zA-Z%]/g,function(l){"%%"!==l&&(o++,"%c"===l&&(a=o))}),T.splice(a,0,e)}},le.save=function(T){try{null==T?le.storage.removeItem("debug"):le.storage.debug=T}catch(_){}},le.load=b,le.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},le.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(T){}}(),le.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],le.formatters.j=function(T){try{return JSON.stringify(T)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}},le.enable(b())}).call(this)}).call(this,x("_process"))},{"./debug":303,_process:277}],303:[function(x,ue,le){var y;function b(T){function _(){if(_.enabled){var e=_,o=+new Date;e.diff=o-(y||o),e.prev=y,e.curr=o,y=o;for(var l=new Array(arguments.length),i=0;i<l.length;i++)l[i]=arguments[i];l[0]=le.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");var v=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(s,d){if("%%"===s)return s;v++;var p=le.formatters[d];return"function"==typeof p&&(s=p.call(e,l[v]),l.splice(v,1),v--),s}),le.formatArgs.call(e,l),(_.log||le.log||console.log.bind(console)).apply(e,l)}}return _.namespace=T,_.enabled=le.enabled(T),_.useColors=le.useColors(),_.color=function(e){var o,a=0;for(o in e)a=(a<<5)-a+e.charCodeAt(o),a|=0;return le.colors[Math.abs(a)%le.colors.length]}(T),"function"==typeof le.init&&le.init(_),_}(le=ue.exports=b.debug=b.default=b).coerce=function(T){return T instanceof Error?T.stack||T.message:T},le.disable=function(){le.enable("")},le.enable=function(T){le.save(T),le.names=[],le.skips=[];for(var _=("string"==typeof T?T:"").split(/[\s,]+/),e=_.length,o=0;o<e;o++)_[o]&&("-"===(T=_[o].replace(/\*/g,".*?"))[0]?le.skips.push(new RegExp("^"+T.substr(1)+"$")):le.names.push(new RegExp("^"+T+"$")))},le.enabled=function(T){var _,e;for(_=0,e=le.skips.length;_<e;_++)if(le.skips[_].test(T))return!1;for(_=0,e=le.names.length;_<e;_++)if(le.names[_].test(T))return!0;return!1},le.humanize=x("ms"),le.names=[],le.skips=[],le.formatters={}},{ms:304}],304:[function(x,ue,le){var y=1e3,b=6e4,T=60*b,_=24*T;function e(o,a,l){if(!(o<a))return o<1.5*a?Math.floor(o/a)+" "+l:Math.ceil(o/a)+" "+l+"s"}ue.exports=function(o,a){a=a||{};var l,v,i=typeof o;if("string"===i&&o.length>0)return function(v){if(!((v=String(v)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(v);if(h){var s=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*_;case"hours":case"hour":case"hrs":case"hr":case"h":return s*T;case"minutes":case"minute":case"mins":case"min":case"m":return s*b;case"seconds":case"second":case"secs":case"sec":case"s":return s*y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(o);if("number"===i&&!1===isNaN(o))return a.long?e(l=o,_,"day")||e(l,T,"hour")||e(l,b,"minute")||e(l,y,"second")||l+" ms":(v=o)>=_?Math.round(v/_)+"d":v>=T?Math.round(v/T)+"h":v>=b?Math.round(v/b)+"m":v>=y?Math.round(v/y)+"s":v+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}},{}],305:[function(x,ue,le){"use strict";var y=x("parenthesis");ue.exports=function(b,T,_){if(null==b)throw Error("First argument should be a string");if(null==T)throw Error("Separator should be a string or a RegExp");_?("string"==typeof _||Array.isArray(_))&&(_={ignore:_}):_={},null==_.escape&&(_.escape=!0),null==_.ignore?_.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof _.ignore&&(_.ignore=[_.ignore]),_.ignore=_.ignore.map(function(h){return 1===h.length&&(h+=h),h}));var e=y.parse(b,{flat:!0,brackets:_.ignore}),o=e[0].split(T);if(_.escape){for(var a=[],l=0;l<o.length;l++){var i=o[l];"\\"===i[i.length-1]&&"\\"!==i[i.length-2]?(a.push(i+T+o[l+1]),l++):a.push(i)}o=a}for(l=0;l<o.length;l++)e[0]=o[l],o[l]=y.stringify(e,{flat:!0});return o}},{parenthesis:248}],306:[function(x,ue,le){"use strict";ue.exports=function(y){for(var b=y.length,T=new Array(b),_=new Array(b),e=new Array(b),o=new Array(b),a=new Array(b),l=new Array(b),i=0;i<b;++i)T[i]=-1,_[i]=0,e[i]=!1,o[i]=0,a[i]=-1,l[i]=[];var v,h=0,s=[],d=[];function p(m){var u=[m],w=[m];for(T[m]=_[m]=h,e[m]=!0,h+=1;w.length>0;){var c=y[m=w[w.length-1]];if(o[m]<c.length){for(var E=o[m];E<c.length;++E){var M=c[E];if(T[M]<0){T[M]=_[M]=h,e[M]=!0,h+=1,u.push(M),w.push(M);break}e[M]&&(_[m]=0|Math.min(_[m],_[M])),a[M]>=0&&l[m].push(a[M])}o[m]=E}else{if(_[m]===T[m]){var S=[],C=[],O=0;for(E=u.length-1;E>=0;--E){var I=u[E];if(e[I]=!1,S.push(I),C.push(l[I]),O+=l[I].length,a[I]=s.length,I===m){u.length=E;break}}s.push(S);var N=new Array(O);for(E=0;E<C.length;E++)for(var F=0;F<C[E].length;F++)N[--O]=C[E][F];d.push(N)}w.pop()}}}for(i=0;i<b;++i)T[i]<0&&p(i);for(i=0;i<d.length;i++){var f=d[i];if(0!==f.length){f.sort(function(m,u){return m-u}),v=[f[0]];for(var g=1;g<f.length;g++)f[g]!==f[g-1]&&v.push(f[g]);d[i]=v}}return{components:s,adjacencyList:d}}},{}],307:[function(x,ue,le){"use strict";Object.defineProperty(le,"__esModule",{value:!0});var b=2*Math.PI,T=function(o,a,l,i,v,h,s){var d=o.x,p=o.y;return{x:i*(d*=a)-v*(p*=l)+h,y:v*d+i*p+s}},_=function(o,a){var l=1.5707963267948966===a?.551915024494:-1.5707963267948966===a?-.551915024494:1.3333333333333333*Math.tan(a/4),i=Math.cos(o),v=Math.sin(o),h=Math.cos(o+a),s=Math.sin(o+a);return[{x:i-v*l,y:v+i*l},{x:h+s*l,y:s-h*l},{x:h,y:s}]},e=function(o,a,l,i){var v=o*l+a*i;return v>1&&(v=1),v<-1&&(v=-1),(o*i-a*l<0?-1:1)*Math.acos(v)};le.default=function(o){var a=o.px,l=o.py,i=o.cx,v=o.cy,h=o.rx,s=o.ry,d=o.xAxisRotation,p=void 0===d?0:d,f=o.largeArcFlag,g=void 0===f?0:f,m=o.sweepFlag,u=void 0===m?0:m,w=[];if(0===h||0===s)return[];var c=Math.sin(p*b/360),E=Math.cos(p*b/360),M=E*(a-i)/2+c*(l-v)/2,S=-c*(a-i)/2+E*(l-v)/2;if(0===M&&0===S)return[];h=Math.abs(h),s=Math.abs(s);var C=Math.pow(M,2)/Math.pow(h,2)+Math.pow(S,2)/Math.pow(s,2);C>1&&(h*=Math.sqrt(C),s*=Math.sqrt(C));var I=function(o,a){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return function(l,i){var v=[],h=!0,s=!1,d=void 0;try{for(var p,f=l[Symbol.iterator]();!(h=(p=f.next()).done)&&(v.push(p.value),!i||v.length!==i);h=!0);}catch(g){s=!0,d=g}finally{try{!h&&f.return&&f.return()}finally{if(s)throw d}}return v}(o,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(X,te,ae,J,ee,se,G,H,Y,oe,W,ne){var re=Math.pow(ee,2),ce=Math.pow(se,2),fe=Math.pow(W,2),me=Math.pow(ne,2),pe=re*ce-re*me-ce*fe;pe<0&&(pe=0),pe/=re*me+ce*fe;var we=(pe=Math.sqrt(pe)*(G===H?-1:1))*ee/se*ne,ye=pe*-se/ee*W,Te=oe*we-Y*ye+(X+ae)/2,Le=Y*we+oe*ye+(te+J)/2,Oe=(W-we)/ee,Re=(ne-ye)/se,Ve=(-W-we)/ee,_e=(-ne-ye)/se,Ae=e(1,0,Oe,Re),Fe=e(Oe,Re,Ve,_e);return 0===H&&Fe>0&&(Fe-=b),1===H&&Fe<0&&(Fe+=b),[Te,Le,Ae,Fe]}(a,l,i,v,h,s,g,u,c,E,M,S),4),N=I[0],F=I[1],L=I[2],P=I[3],j=Math.abs(P)/(b/4);Math.abs(1-j)<1e-7&&(j=1);var U=Math.max(Math.ceil(j),1);P/=U;for(var $=0;$<U;$++)w.push(_(L,P)),L+=P;return w.map(function(X){var te=T(X[0],h,s,E,c,N,F),ae=te.x,J=te.y,ee=T(X[1],h,s,E,c,N,F),se=ee.x,G=ee.y,H=T(X[2],h,s,E,c,N,F);return{x1:ae,y1:J,x2:se,y2:G,x:H.x,y:H.y}})},ue.exports=le.default},{}],308:[function(x,ue,le){"use strict";var y=x("parse-svg-path"),b=x("abs-svg-path"),T=x("normalize-svg-path"),_=x("is-svg-path"),e=x("assert");ue.exports=function(o){if(Array.isArray(o)&&1===o.length&&"string"==typeof o[0]&&(o=o[0]),"string"==typeof o&&(e(_(o),"String is not an SVG path."),o=y(o)),e(Array.isArray(o),"Argument should be a string or an array of path segments."),o=b(o),!(o=T(o)).length)return[0,0,0,0];for(var a=[1/0,1/0,-1/0,-1/0],l=0,i=o.length;l<i;l++)for(var v=o[l].slice(1),h=0;h<v.length;h+=2)v[h+0]<a[0]&&(a[0]=v[h+0]),v[h+1]<a[1]&&(a[1]=v[h+1]),v[h+0]>a[2]&&(a[2]=v[h+0]),v[h+1]>a[3]&&(a[3]=v[h+1]);return a}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(x,ue,le){"use strict";ue.exports=function(_){for(var e,o=[],a=0,l=0,i=0,v=0,h=null,s=null,d=0,p=0,f=0,g=_.length;f<g;f++){var m=_[f],u=m[0];switch(u){case"M":i=m[1],v=m[2];break;case"A":var w=y({px:d,py:p,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!w.length)continue;for(var c,E=0;E<w.length;E++)m=["C",(c=w[E]).x1,c.y1,c.x2,c.y2,c.x,c.y],E<w.length-1&&o.push(m);break;case"S":var M=d,S=p;"C"!=e&&"S"!=e||(M+=M-a,S+=S-l),m=["C",M,S,m[1],m[2],m[3],m[4]];break;case"T":"Q"==e||"T"==e?(h=2*d-h,s=2*p-s):(h=d,s=p),m=T(d,p,h,s,m[1],m[2]);break;case"Q":h=m[1],s=m[2],m=T(d,p,m[1],m[2],m[3],m[4]);break;case"L":m=b(d,p,m[1],m[2]);break;case"H":m=b(d,p,m[1],p);break;case"V":m=b(d,p,d,m[1]);break;case"Z":m=b(d,p,i,v)}e=u,d=m[m.length-2],p=m[m.length-1],m.length>4?(a=m[m.length-4],l=m[m.length-3]):(a=d,l=p),o.push(m)}return o};var y=x("svg-arc-to-cubic-bezier");function b(_,e,o,a){return["C",_,e,o,a,o,a]}function T(_,e,o,a,l,i){return["C",_/3+2/3*o,e/3+2/3*a,l/3+2/3*o,i/3+2/3*a,l,i]}},{"svg-arc-to-cubic-bezier":307}],310:[function(x,ue,le){"use strict";var y,b=x("svg-path-bounds"),T=x("parse-svg-path"),_=x("draw-svg-path"),e=x("is-svg-path"),o=x("bitmap-sdf"),a=document.createElement("canvas"),l=a.getContext("2d");ue.exports=function(i,v){if(!e(i))throw Error("Argument should be valid svg path string");var h,s;v||(v={}),v.shape?(h=v.shape[0],s=v.shape[1]):(h=a.width=v.w||v.width||200,s=a.height=v.h||v.height||200);var d=Math.min(h,s),p=v.stroke||0,f=v.viewbox||v.viewBox||b(i),g=[h/(f[2]-f[0]),s/(f[3]-f[1])],m=Math.min(g[0]||0,g[1]||0)/2;if(l.fillStyle="black",l.fillRect(0,0,h,s),l.fillStyle="white",p&&("number"!=typeof p&&(p=1),l.strokeStyle=p>0?"white":"black",l.lineWidth=Math.abs(p)),l.translate(.5*h,.5*s),l.scale(m,m),function(){if(null!=y)return y;var c=document.createElement("canvas").getContext("2d");if(c.canvas.width=c.canvas.height=1,!window.Path2D)return y=!1;var E=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black",c.fill(E);var M=c.getImageData(0,0,1,1);return y=M&&M.data&&255===M.data[3]}()){var u=new Path2D(i);l.fill(u),p&&l.stroke(u)}else{var w=T(i);_(l,w),l.fill(),p&&l.stroke()}return l.setTransform(1,0,0,1,0,0),o(l,{cutoff:null!=v.cutoff?v.cutoff:.5,radius:null!=v.radius?v.radius:.5*d})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(x,ue,le){(function(y,b){(function(){var T=x("process/browser.js").nextTick,_=Function.prototype.apply,e=Array.prototype.slice,o={},a=0;function l(i,v){this._id=i,this._clearFn=v}le.setTimeout=function(){return new l(_.call(setTimeout,window,arguments),clearTimeout)},le.setInterval=function(){return new l(_.call(setInterval,window,arguments),clearInterval)},le.clearTimeout=le.clearInterval=function(i){i.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},le.enroll=function(i,v){clearTimeout(i._idleTimeoutId),i._idleTimeout=v},le.unenroll=function(i){clearTimeout(i._idleTimeoutId),i._idleTimeout=-1},le._unrefActive=le.active=function(i){clearTimeout(i._idleTimeoutId);var v=i._idleTimeout;v>=0&&(i._idleTimeoutId=setTimeout(function(){i._onTimeout&&i._onTimeout()},v))},le.setImmediate="function"==typeof y?y:function(i){var v=a++,h=!(arguments.length<2)&&e.call(arguments,1);return o[v]=!0,T(function(){o[v]&&(h?i.apply(null,h):i.call(null),le.clearImmediate(v))}),v},le.clearImmediate="function"==typeof b?b:function(i){delete o[i]}}).call(this)}).call(this,x("timers").setImmediate,x("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(x,ue,le){!function(y){var b=/^\s+/,T=/\s+$/,_=0,e=y.round,o=y.min,a=y.max,l=y.random;function i(Y,oe){if(oe=oe||{},(Y=Y||"")instanceof i)return Y;if(!(this instanceof i))return new i(Y,oe);var ne,Le,Oe,re,ce,fe,me,pe,we,ye,W=(re={r:0,g:0,b:0},ce=1,fe=null,me=null,pe=null,we=!1,ye=!1,"string"==typeof(ne=Y)&&(ne=function(Re){Re=Re.replace(b,"").replace(T,"").toLowerCase();var Ve,_e=!1;if(N[Re])Re=N[Re],_e=!0;else if("transparent"==Re)return{r:0,g:0,b:0,a:0,format:"name"};return(Ve=G.rgb.exec(Re))?{r:Ve[1],g:Ve[2],b:Ve[3]}:(Ve=G.rgba.exec(Re))?{r:Ve[1],g:Ve[2],b:Ve[3],a:Ve[4]}:(Ve=G.hsl.exec(Re))?{h:Ve[1],s:Ve[2],l:Ve[3]}:(Ve=G.hsla.exec(Re))?{h:Ve[1],s:Ve[2],l:Ve[3],a:Ve[4]}:(Ve=G.hsv.exec(Re))?{h:Ve[1],s:Ve[2],v:Ve[3]}:(Ve=G.hsva.exec(Re))?{h:Ve[1],s:Ve[2],v:Ve[3],a:Ve[4]}:(Ve=G.hex8.exec(Re))?{r:U(Ve[1]),g:U(Ve[2]),b:U(Ve[3]),a:ae(Ve[4]),format:_e?"name":"hex8"}:(Ve=G.hex6.exec(Re))?{r:U(Ve[1]),g:U(Ve[2]),b:U(Ve[3]),format:_e?"name":"hex"}:(Ve=G.hex4.exec(Re))?{r:U(Ve[1]+""+Ve[1]),g:U(Ve[2]+""+Ve[2]),b:U(Ve[3]+""+Ve[3]),a:ae(Ve[4]+""+Ve[4]),format:_e?"name":"hex8"}:!!(Ve=G.hex3.exec(Re))&&{r:U(Ve[1]+""+Ve[1]),g:U(Ve[2]+""+Ve[2]),b:U(Ve[3]+""+Ve[3]),format:_e?"name":"hex"}}(ne)),"object"==typeof ne&&(H(ne.r)&&H(ne.g)&&H(ne.b)?(Le=ne.g,Oe=ne.b,re={r:255*P(ne.r,255),g:255*P(Le,255),b:255*P(Oe,255)},we=!0,ye="%"===String(ne.r).substr(-1)?"prgb":"rgb"):H(ne.h)&&H(ne.s)&&H(ne.v)?(fe=X(ne.s),me=X(ne.v),re=function(Re,Ve,_e){Re=6*P(Re,360),Ve=P(Ve,100),_e=P(_e,100);var Ae=y.floor(Re),Fe=Re-Ae,Pe=_e*(1-Ve),Be=_e*(1-Fe*Ve),qe=_e*(1-(1-Fe)*Ve),We=Ae%6;return{r:255*[_e,Be,Pe,Pe,qe,_e][We],g:255*[qe,_e,_e,Be,Pe,Pe][We],b:255*[Pe,Pe,qe,_e,_e,Be][We]}}(ne.h,fe,me),we=!0,ye="hsv"):H(ne.h)&&H(ne.s)&&H(ne.l)&&(fe=X(ne.s),pe=X(ne.l),re=function(Re,Ve,_e){var Ae,Fe,Pe;function Be(Je,ut,Ge){return Ge<0&&(Ge+=1),Ge>1&&(Ge-=1),Ge<1/6?Je+6*(ut-Je)*Ge:Ge<.5?ut:Ge<2/3?Je+(ut-Je)*(2/3-Ge)*6:Je}if(Re=P(Re,360),Ve=P(Ve,100),_e=P(_e,100),0===Ve)Ae=Fe=Pe=_e;else{var qe=_e<.5?_e*(1+Ve):_e+Ve-_e*Ve,We=2*_e-qe;Ae=Be(We,qe,Re+1/3),Fe=Be(We,qe,Re),Pe=Be(We,qe,Re-1/3)}return{r:255*Ae,g:255*Fe,b:255*Pe}}(ne.h,fe,pe),we=!0,ye="hsl"),ne.hasOwnProperty("a")&&(ce=ne.a)),ce=L(ce),{ok:we,format:ne.format||ye,r:o(255,a(re.r,0)),g:o(255,a(re.g,0)),b:o(255,a(re.b,0)),a:ce});this._originalInput=Y,this._r=W.r,this._g=W.g,this._b=W.b,this._a=W.a,this._roundA=e(100*this._a)/100,this._format=oe.format||W.format,this._gradientType=oe.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=W.ok,this._tc_id=_++}function v(Y,oe,W){Y=P(Y,255),oe=P(oe,255),W=P(W,255);var ne,re,ce=a(Y,oe,W),fe=o(Y,oe,W),me=(ce+fe)/2;if(ce==fe)ne=re=0;else{var pe=ce-fe;switch(re=me>.5?pe/(2-ce-fe):pe/(ce+fe),ce){case Y:ne=(oe-W)/pe+(oe<W?6:0);break;case oe:ne=(W-Y)/pe+2;break;case W:ne=(Y-oe)/pe+4}ne/=6}return{h:ne,s:re,l:me}}function h(Y,oe,W){Y=P(Y,255),oe=P(oe,255),W=P(W,255);var ne,re,ce=a(Y,oe,W),fe=o(Y,oe,W),me=ce,pe=ce-fe;if(re=0===ce?0:pe/ce,ce==fe)ne=0;else{switch(ce){case Y:ne=(oe-W)/pe+(oe<W?6:0);break;case oe:ne=(W-Y)/pe+2;break;case W:ne=(Y-oe)/pe+4}ne/=6}return{h:ne,s:re,v:me}}function s(Y,oe,W,ne){var re=[$(e(Y).toString(16)),$(e(oe).toString(16)),$(e(W).toString(16))];return ne&&re[0].charAt(0)==re[0].charAt(1)&&re[1].charAt(0)==re[1].charAt(1)&&re[2].charAt(0)==re[2].charAt(1)?re[0].charAt(0)+re[1].charAt(0)+re[2].charAt(0):re.join("")}function d(Y,oe,W,ne){return[$(te(ne)),$(e(Y).toString(16)),$(e(oe).toString(16)),$(e(W).toString(16))].join("")}function p(Y,oe){oe=0===oe?0:oe||10;var W=i(Y).toHsl();return W.s-=oe/100,W.s=j(W.s),i(W)}function f(Y,oe){oe=0===oe?0:oe||10;var W=i(Y).toHsl();return W.s+=oe/100,W.s=j(W.s),i(W)}function g(Y){return i(Y).desaturate(100)}function m(Y,oe){oe=0===oe?0:oe||10;var W=i(Y).toHsl();return W.l+=oe/100,W.l=j(W.l),i(W)}function u(Y,oe){oe=0===oe?0:oe||10;var W=i(Y).toRgb();return W.r=a(0,o(255,W.r-e(-oe/100*255))),W.g=a(0,o(255,W.g-e(-oe/100*255))),W.b=a(0,o(255,W.b-e(-oe/100*255))),i(W)}function w(Y,oe){oe=0===oe?0:oe||10;var W=i(Y).toHsl();return W.l-=oe/100,W.l=j(W.l),i(W)}function c(Y,oe){var W=i(Y).toHsl(),ne=(W.h+oe)%360;return W.h=ne<0?360+ne:ne,i(W)}function E(Y){var oe=i(Y).toHsl();return oe.h=(oe.h+180)%360,i(oe)}function M(Y){var oe=i(Y).toHsl(),W=oe.h;return[i(Y),i({h:(W+120)%360,s:oe.s,l:oe.l}),i({h:(W+240)%360,s:oe.s,l:oe.l})]}function S(Y){var oe=i(Y).toHsl(),W=oe.h;return[i(Y),i({h:(W+90)%360,s:oe.s,l:oe.l}),i({h:(W+180)%360,s:oe.s,l:oe.l}),i({h:(W+270)%360,s:oe.s,l:oe.l})]}function C(Y){var oe=i(Y).toHsl(),W=oe.h;return[i(Y),i({h:(W+72)%360,s:oe.s,l:oe.l}),i({h:(W+216)%360,s:oe.s,l:oe.l})]}function O(Y,oe,W){oe=oe||6,W=W||30;var ne=i(Y).toHsl(),re=360/W,ce=[i(Y)];for(ne.h=(ne.h-(re*oe>>1)+720)%360;--oe;)ne.h=(ne.h+re)%360,ce.push(i(ne));return ce}function I(Y,oe){oe=oe||6;for(var W=i(Y).toHsv(),ne=W.h,re=W.s,ce=W.v,fe=[],me=1/oe;oe--;)fe.push(i({h:ne,s:re,v:ce})),ce=(ce+me)%1;return fe}i.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Y=this.toRgb();return(299*Y.r+587*Y.g+114*Y.b)/1e3},getLuminance:function(){var Y,oe,W,ne=this.toRgb();return oe=ne.g/255,W=ne.b/255,.2126*((Y=ne.r/255)<=.03928?Y/12.92:y.pow((Y+.055)/1.055,2.4))+.7152*(oe<=.03928?oe/12.92:y.pow((oe+.055)/1.055,2.4))+.0722*(W<=.03928?W/12.92:y.pow((W+.055)/1.055,2.4))},setAlpha:function(Y){return this._a=L(Y),this._roundA=e(100*this._a)/100,this},toHsv:function(){var Y=h(this._r,this._g,this._b);return{h:360*Y.h,s:Y.s,v:Y.v,a:this._a}},toHsvString:function(){var Y=h(this._r,this._g,this._b),oe=e(360*Y.h),W=e(100*Y.s),ne=e(100*Y.v);return 1==this._a?"hsv("+oe+", "+W+"%, "+ne+"%)":"hsva("+oe+", "+W+"%, "+ne+"%, "+this._roundA+")"},toHsl:function(){var Y=v(this._r,this._g,this._b);return{h:360*Y.h,s:Y.s,l:Y.l,a:this._a}},toHslString:function(){var Y=v(this._r,this._g,this._b),oe=e(360*Y.h),W=e(100*Y.s),ne=e(100*Y.l);return 1==this._a?"hsl("+oe+", "+W+"%, "+ne+"%)":"hsla("+oe+", "+W+"%, "+ne+"%, "+this._roundA+")"},toHex:function(Y){return s(this._r,this._g,this._b,Y)},toHexString:function(Y){return"#"+this.toHex(Y)},toHex8:function(Y){return W=this._g,ne=this._b,re=this._a,ce=Y,fe=[$(e(this._r).toString(16)),$(e(W).toString(16)),$(e(ne).toString(16)),$(te(re))],ce&&fe[0].charAt(0)==fe[0].charAt(1)&&fe[1].charAt(0)==fe[1].charAt(1)&&fe[2].charAt(0)==fe[2].charAt(1)&&fe[3].charAt(0)==fe[3].charAt(1)?fe[0].charAt(0)+fe[1].charAt(0)+fe[2].charAt(0)+fe[3].charAt(0):fe.join("");var W,ne,re,ce,fe},toHex8String:function(Y){return"#"+this.toHex8(Y)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*P(this._r,255))+"%",g:e(100*P(this._g,255))+"%",b:e(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*P(this._r,255))+"%, "+e(100*P(this._g,255))+"%, "+e(100*P(this._b,255))+"%)":"rgba("+e(100*P(this._r,255))+"%, "+e(100*P(this._g,255))+"%, "+e(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(F[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Y){var oe="#"+d(this._r,this._g,this._b,this._a),W=oe,ne=this._gradientType?"GradientType = 1, ":"";if(Y){var re=i(Y);W="#"+d(re._r,re._g,re._b,re._a)}return"progid:DXImageTransform.Microsoft.gradient("+ne+"startColorstr="+oe+",endColorstr="+W+")"},toString:function(Y){var oe=!!Y;Y=Y||this._format;var W=!1;return oe||!(this._a<1&&this._a>=0)||"hex"!==Y&&"hex6"!==Y&&"hex3"!==Y&&"hex4"!==Y&&"hex8"!==Y&&"name"!==Y?("rgb"===Y&&(W=this.toRgbString()),"prgb"===Y&&(W=this.toPercentageRgbString()),"hex"!==Y&&"hex6"!==Y||(W=this.toHexString()),"hex3"===Y&&(W=this.toHexString(!0)),"hex4"===Y&&(W=this.toHex8String(!0)),"hex8"===Y&&(W=this.toHex8String()),"name"===Y&&(W=this.toName()),"hsl"===Y&&(W=this.toHslString()),"hsv"===Y&&(W=this.toHsvString()),W||this.toHexString()):"name"===Y&&0===this._a?this.toName():this.toRgbString()},clone:function(){return i(this.toString())},_applyModification:function(Y,oe){var W=Y.apply(null,[this].concat([].slice.call(oe)));return this._r=W._r,this._g=W._g,this._b=W._b,this.setAlpha(W._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(c,arguments)},_applyCombination:function(Y,oe){return Y.apply(null,[this].concat([].slice.call(oe)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},i.fromRatio=function(Y,oe){if("object"==typeof Y){var W={};for(var ne in Y)Y.hasOwnProperty(ne)&&(W[ne]="a"===ne?Y[ne]:X(Y[ne]));Y=W}return i(Y,oe)},i.equals=function(Y,oe){return!(!Y||!oe)&&i(Y).toRgbString()==i(oe).toRgbString()},i.random=function(){return i.fromRatio({r:l(),g:l(),b:l()})},i.mix=function(Y,oe,W){W=0===W?0:W||50;var ne=i(Y).toRgb(),re=i(oe).toRgb(),ce=W/100;return i({r:(re.r-ne.r)*ce+ne.r,g:(re.g-ne.g)*ce+ne.g,b:(re.b-ne.b)*ce+ne.b,a:(re.a-ne.a)*ce+ne.a})},i.readability=function(Y,oe){var W=i(Y),ne=i(oe);return(y.max(W.getLuminance(),ne.getLuminance())+.05)/(y.min(W.getLuminance(),ne.getLuminance())+.05)},i.isReadable=function(Y,oe,W){var ne,re,fe,me,pe,ce=i.readability(Y,oe);switch(re=!1,(fe=W,"AA"!==(me=((fe=fe||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==me&&(me="AA"),"small"!==(pe=(fe.size||"small").toLowerCase())&&"large"!==pe&&(pe="small"),ne={level:me,size:pe}).level+ne.size){case"AAsmall":case"AAAlarge":re=ce>=4.5;break;case"AAlarge":re=ce>=3;break;case"AAAsmall":re=ce>=7}return re},i.mostReadable=function(Y,oe,W){var ne,re,ce,fe,me=null,pe=0;re=(W=W||{}).includeFallbackColors,ce=W.level,fe=W.size;for(var we=0;we<oe.length;we++)(ne=i.readability(Y,oe[we]))>pe&&(pe=ne,me=i(oe[we]));return i.isReadable(Y,me,{level:ce,size:fe})||!re?me:(W.includeFallbackColors=!1,i.mostReadable(Y,["#fff","#000"],W))};var N=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},F=i.hexNames=function(Y){var oe={};for(var W in Y)Y.hasOwnProperty(W)&&(oe[Y[W]]=W);return oe}(N);function L(Y){return Y=parseFloat(Y),(isNaN(Y)||Y<0||Y>1)&&(Y=1),Y}function P(Y,oe){var ne;"string"==typeof(ne=Y)&&-1!=ne.indexOf(".")&&1===parseFloat(ne)&&(Y="100%");var W=function(ne){return"string"==typeof ne&&-1!=ne.indexOf("%")}(Y);return Y=o(oe,a(0,parseFloat(Y))),W&&(Y=parseInt(Y*oe,10)/100),y.abs(Y-oe)<1e-6?1:Y%oe/parseFloat(oe)}function j(Y){return o(1,a(0,Y))}function U(Y){return parseInt(Y,16)}function $(Y){return 1==Y.length?"0"+Y:""+Y}function X(Y){return Y<=1&&(Y=100*Y+"%"),Y}function te(Y){return y.round(255*parseFloat(Y)).toString(16)}function ae(Y){return U(Y)/255}var J,ee,se,G=(ee="[\\s|\\(]+("+(J="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+J+")[,|\\s]+("+J+")\\s*\\)?",se="[\\s|\\(]+("+J+")[,|\\s]+("+J+")[,|\\s]+("+J+")[,|\\s]+("+J+")\\s*\\)?",{CSS_UNIT:new RegExp(J),rgb:new RegExp("rgb"+ee),rgba:new RegExp("rgba"+se),hsl:new RegExp("hsl"+ee),hsla:new RegExp("hsla"+se),hsv:new RegExp("hsv"+ee),hsva:new RegExp("hsva"+se),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(Y){return!!G.CSS_UNIT.exec(Y)}void 0!==ue&&ue.exports?ue.exports=i:window.tinycolor=i}(Math)},{}],313:[function(x,ue,le){"use strict";ue.exports=b,ue.exports.float32=ue.exports.float=b,ue.exports.fract32=ue.exports.fract=function(T,_){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);_ instanceof Float32Array||(_=b(T));for(var e=0,o=_.length;e<o;e++)_[e]=T[e]-_[e];return _}return b(T-b(T))};var y=new Float32Array(1);function b(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(y[0]=T,y[0])}},{}],314:[function(x,ue,le){"use strict";var y=x("parse-unit");function b(_,e){var o=y(getComputedStyle(_).getPropertyValue(e));return o[0]*T(o[1],_)}function T(_,e){switch(e=e||document.body,_=(_||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),_){case"%":return e.clientHeight/100;case"ch":case"ex":return function(o,a){var l=document.createElement("div");l.style["font-size"]="128"+o,a.appendChild(l);var i=b(l,"font-size")/128;return a.removeChild(l),i}(_,e);case"em":return b(e,"font-size");case"rem":return b(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}ue.exports=T},{"parse-unit":251}],315:[function(x,ue,le){var y,b;y=this,b=function(y){"use strict";function b(d){return d}function T(d){if(null==d)return b;var p,f,g=d.scale[0],m=d.scale[1],u=d.translate[0],w=d.translate[1];return function(c,E){E||(p=f=0);var M=2,S=c.length,C=new Array(S);for(C[0]=(p+=c[0])*g+u,C[1]=(f+=c[1])*m+w;M<S;)C[M]=c[M],++M;return C}}function _(d){var p,f=T(d.transform),g=1/0,m=g,u=-g,w=-g;function c(M){(M=f(M))[0]<g&&(g=M[0]),M[0]>u&&(u=M[0]),M[1]<m&&(m=M[1]),M[1]>w&&(w=M[1])}function E(M){switch(M.type){case"GeometryCollection":M.geometries.forEach(E);break;case"Point":c(M.coordinates);break;case"MultiPoint":M.coordinates.forEach(c)}}for(p in d.arcs.forEach(function(M){for(var S,C=-1,O=M.length;++C<O;)(S=f(M[C],C))[0]<g&&(g=S[0]),S[0]>u&&(u=S[0]),S[1]<m&&(m=S[1]),S[1]>w&&(w=S[1])}),d.objects)E(d.objects[p]);return[g,m,u,w]}function e(d,p){var f=p.id,g=p.bbox,m=null==p.properties?{}:p.properties,u=o(d,p);return null==f&&null==g?{type:"Feature",properties:m,geometry:u}:null==g?{type:"Feature",id:f,properties:m,geometry:u}:{type:"Feature",id:f,bbox:g,properties:m,geometry:u}}function o(d,p){var f=T(d.transform),g=d.arcs;function m(M,S){S.length&&S.pop();for(var C=g[M<0?~M:M],O=0,I=C.length;O<I;++O)S.push(f(C[O],O));M<0&&function(N,F){for(var L,P=N.length,j=P-F;j<--P;)L=N[j],N[j++]=N[P],N[P]=L}(S,I)}function u(M){return f(M)}function w(M){for(var S=[],C=0,O=M.length;C<O;++C)m(M[C],S);return S.length<2&&S.push(S[0]),S}function c(M){for(var S=w(M);S.length<4;)S.push(S[0]);return S}function E(M){return M.map(c)}return function M(S){var C,O=S.type;switch(O){case"GeometryCollection":return{type:O,geometries:S.geometries.map(M)};case"Point":C=u(S.coordinates);break;case"MultiPoint":C=S.coordinates.map(u);break;case"LineString":C=w(S.arcs);break;case"MultiLineString":C=S.arcs.map(w);break;case"Polygon":C=E(S.arcs);break;case"MultiPolygon":C=S.arcs.map(E);break;default:return null}return{type:O,coordinates:C}}(p)}function a(d,p){var f={},g={},m={},u=[],w=-1;function c(E,M){for(var S in E){var C=E[S];delete M[C.start],delete C.start,delete C.end,C.forEach(function(O){f[O<0?~O:O]=1}),u.push(C)}}return p.forEach(function(E,M){var S,C=d.arcs[E<0?~E:E];C.length<3&&!C[1][0]&&!C[1][1]&&(S=p[++w],p[w]=E,p[M]=S)}),p.forEach(function(E){var M,S,L,P,j,U,C=(U=(j=d.arcs[(L=E)<0?~L:L])[0],d.transform?(P=[0,0],j.forEach(function($){P[0]+=$[0],P[1]+=$[1]})):P=j[j.length-1],L<0?[P,U]:[U,P]),O=C[0],I=C[1];if(M=m[O])if(delete m[M.end],M.push(E),M.end=I,S=g[I]){delete g[S.start];var N=S===M?M:M.concat(S);g[N.start=M.start]=m[N.end=S.end]=N}else g[M.start]=m[M.end]=M;else if(M=g[I])if(delete g[M.start],M.unshift(E),M.start=O,S=m[O]){delete m[S.end];var F=S===M?M:S.concat(M);g[F.start=S.start]=m[F.end=M.end]=F}else g[M.start]=m[M.end]=M;else g[(M=[E]).start=O]=m[M.end=I]=M}),c(m,g),c(g,m),p.forEach(function(E){f[E<0?~E:E]||u.push([E])}),u}function l(d,p,f){var g,m,u;if(arguments.length>1)g=i(0,p,f);else for(m=0,g=new Array(u=d.arcs.length);m<u;++m)g[m]=m;return{type:"MultiLineString",arcs:a(d,g)}}function i(d,p,f){var g,m=[],u=[];function w(M){var S=M<0?~M:M;(u[S]||(u[S]=[])).push({i:M,g})}function c(M){M.forEach(w)}function E(M){M.forEach(c)}return function M(S){switch(g=S,S.type){case"GeometryCollection":S.geometries.forEach(M);break;case"LineString":c(S.arcs);break;case"MultiLineString":case"Polygon":E(S.arcs);break;case"MultiPolygon":S.arcs.forEach(E)}}(p),u.forEach(null==f?function(M){m.push(M[0].i)}:function(M){f(M[0].g,M[M.length-1].g)&&m.push(M[0].i)}),m}function v(d,p){var f={},g=[],m=[];function u(c){c.forEach(function(E){E.forEach(function(M){(f[M=M<0?~M:M]||(f[M]=[])).push(c)})}),g.push(c)}function w(c){return function(E){for(var M,S=-1,C=E.length,O=E[C-1],I=0;++S<C;)I+=(M=O)[0]*(O=E[S])[1]-M[1]*O[0];return Math.abs(I)}(o(d,{type:"Polygon",arcs:[c]}).coordinates[0])}return p.forEach(function c(E){switch(E.type){case"GeometryCollection":E.geometries.forEach(c);break;case"Polygon":u(E.arcs);break;case"MultiPolygon":E.arcs.forEach(u)}}),g.forEach(function(c){if(!c._){var E=[],M=[c];for(c._=1,m.push(E);c=M.pop();)E.push(c),c.forEach(function(S){S.forEach(function(C){f[C<0?~C:C].forEach(function(O){O._||(O._=1,M.push(O))})})})}}),g.forEach(function(c){delete c._}),{type:"MultiPolygon",arcs:m.map(function(c){var E,M=[];if(c.forEach(function(N){N.forEach(function(F){F.forEach(function(L){f[L<0?~L:L].length<2&&M.push(L)})})}),(E=(M=a(d,M)).length)>1)for(var S,C,O=1,I=w(M[0]);O<E;++O)(S=w(M[O]))>I&&(C=M[0],M[0]=M[O],M[O]=C,I=S);return M}).filter(function(c){return c.length>0})}}function h(d,p){for(var f=0,g=d.length;f<g;){var m=f+g>>>1;d[m]<p?f=m+1:g=m}return f}function s(d){if(null==d)return b;var p,f,g=d.scale[0],m=d.scale[1],u=d.translate[0],w=d.translate[1];return function(c,E){E||(p=f=0);var M=2,S=c.length,C=new Array(S),O=Math.round((c[0]-u)/g),I=Math.round((c[1]-w)/m);for(C[0]=O-p,p=O,C[1]=I-f,f=I;M<S;)C[M]=c[M],++M;return C}}y.bbox=_,y.feature=function(d,p){return"string"==typeof p&&(p=d.objects[p]),"GeometryCollection"===p.type?{type:"FeatureCollection",features:p.geometries.map(function(f){return e(d,f)})}:e(d,p)},y.merge=function(d){return o(d,v.apply(this,arguments))},y.mergeArcs=v,y.mesh=function(d){return o(d,l.apply(this,arguments))},y.meshArcs=l,y.neighbors=function(d){var p={},f=d.map(function(){return[]});function g(N,F){N.forEach(function(L){L<0&&(L=~L);var P=p[L];P?P.push(F):p[L]=[F]})}function m(N,F){N.forEach(function(L){g(L,F)})}var u={LineString:g,MultiLineString:m,Polygon:m,MultiPolygon:function(N,F){N.forEach(function(L){m(L,F)})}};for(var w in d.forEach(function N(F,L){"GeometryCollection"===F.type?F.geometries.forEach(function(P){N(P,L)}):F.type in u&&u[F.type](F.arcs,L)}),p)for(var c=p[w],E=c.length,M=0;M<E;++M)for(var S=M+1;S<E;++S){var C,O=c[M],I=c[S];(C=f[O])[w=h(C,I)]!==I&&C.splice(w,0,I),(C=f[I])[w=h(C,O)]!==O&&C.splice(w,0,O)}return f},y.quantize=function(d,p){if(d.transform)throw new Error("already quantized");if(p&&p.scale)c=d.bbox;else{if(!((f=Math.floor(p))>=2))throw new Error("n must be \u22652");var f,g=(c=d.bbox||_(d))[0],m=c[1],u=c[2],w=c[3];p={scale:[u-g?(u-g)/(f-1):1,w-m?(w-m)/(f-1):1],translate:[g,m]}}var c,E,M=s(p),S=d.objects,C={};function O(N){return M(N)}function I(N){var F;switch(N.type){case"GeometryCollection":F={type:"GeometryCollection",geometries:N.geometries.map(I)};break;case"Point":F={type:"Point",coordinates:O(N.coordinates)};break;case"MultiPoint":F={type:"MultiPoint",coordinates:N.coordinates.map(O)};break;default:return N}return null!=N.id&&(F.id=N.id),null!=N.bbox&&(F.bbox=N.bbox),null!=N.properties&&(F.properties=N.properties),F}for(E in S)C[E]=I(S[E]);return{type:"Topology",bbox:c,transform:p,objects:C,arcs:d.arcs.map(function(N){var F,L=0,P=1,j=N.length,U=new Array(j);for(U[0]=M(N[0],0);++L<j;)((F=M(N[L],L))[0]||F[1])&&(U[P++]=F);return 1===P&&(U[P++]=[0,0]),U.length=P,U})}},y.transform=T,y.untransform=s,Object.defineProperty(y,"__esModule",{value:!0})},b("object"==typeof le&&void 0!==ue?le:(y=y||self).topojson=y.topojson||{})},{}],316:[function(x,ue,le){"use strict";var y=x("../prototype/is");ue.exports=function(b){if("function"!=typeof b||!hasOwnProperty.call(b,"length"))return!1;try{if("number"!=typeof b.length||"function"!=typeof b.call||"function"!=typeof b.apply)return!1}catch(T){return!1}return!y(b)}},{"../prototype/is":323}],317:[function(x,ue,le){"use strict";var y=x("../value/is"),b=x("../object/is"),T=x("../string/coerce"),_=x("./to-short-string"),e=function(o,a){return o.replace("%v",_(a))};ue.exports=function(o,a,l){if(!b(l))throw new TypeError(e(a,o));if(!y(o)){if("default"in l)return l.default;if(l.isOptional)return null}var i=T(l.errorMessage);throw y(i)||(i=a),new TypeError(e(i,o))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(x,ue,le){"use strict";ue.exports=function(y){try{return y.toString()}catch(b){try{return String(y)}catch(T){return null}}}},{}],319:[function(x,ue,le){"use strict";var y=x("./safe-to-string"),b=/[\n\r\u2028\u2029]/g;ue.exports=function(T){var _=y(T);return null===_?"<Non-coercible to string value>":(_.length>100&&(_=_.slice(0,99)+"\u2026"),_=_.replace(b,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(x,ue,le){"use strict";var y=x("../value/is"),b={object:!0,function:!0,undefined:!0};ue.exports=function(T){return!!y(T)&&hasOwnProperty.call(b,typeof T)}},{"../value/is":326}],321:[function(x,ue,le){"use strict";var y=x("../lib/resolve-exception"),b=x("./is");ue.exports=function(T){return b(T)?T:y(T,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(x,ue,le){"use strict";var y=x("../function/is"),b=/^\s*class[\s{/}]/,T=Function.prototype.toString;ue.exports=function(_){return!!y(_)&&!b.test(T.call(_))}},{"../function/is":316}],323:[function(x,ue,le){"use strict";var y=x("../object/is");ue.exports=function(b){if(!y(b))return!1;try{return!!b.constructor&&b.constructor.prototype===b}catch(T){return!1}}},{"../object/is":320}],324:[function(x,ue,le){"use strict";var y=x("../value/is"),b=x("../object/is"),T=Object.prototype.toString;ue.exports=function(_){if(!y(_))return null;if(b(_)){var e=_.toString;if("function"!=typeof e||e===T)return null}try{return""+_}catch(o){return null}}},{"../object/is":320,"../value/is":326}],325:[function(x,ue,le){"use strict";var y=x("../lib/resolve-exception"),b=x("./is");ue.exports=function(T){return b(T)?T:y(T,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(x,ue,le){"use strict";ue.exports=function(y){return null!=y}},{}],327:[function(x,ue,le){(function(y){(function(){"use strict";var b=x("bit-twiddle"),T=x("dup"),_=x("buffer").Buffer;y.__TYPEDARRAY_POOL||(y.__TYPEDARRAY_POOL={UINT8:T([32,0]),UINT16:T([32,0]),UINT32:T([32,0]),BIGUINT64:T([32,0]),INT8:T([32,0]),INT16:T([32,0]),INT32:T([32,0]),BIGINT64:T([32,0]),FLOAT:T([32,0]),DOUBLE:T([32,0]),DATA:T([32,0]),UINT8C:T([32,0]),BUFFER:T([32,0])});var e="undefined"!=typeof Uint8ClampedArray,o="undefined"!=typeof BigUint64Array,a="undefined"!=typeof BigInt64Array,l=y.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=T([32,0])),l.BIGUINT64||(l.BIGUINT64=T([32,0])),l.BIGINT64||(l.BIGINT64=T([32,0])),l.BUFFER||(l.BUFFER=T([32,0]));var i=l.DATA,v=l.BUFFER;function h(I){if(I){var F=b.log2(I.length||I.byteLength);i[F].push(I)}}function s(I){I=b.nextPow2(I);var N=b.log2(I),F=i[N];return F.length>0?F.pop():new ArrayBuffer(I)}function d(I){return new Uint8Array(s(I),0,I)}function p(I){return new Uint16Array(s(2*I),0,I)}function f(I){return new Uint32Array(s(4*I),0,I)}function g(I){return new Int8Array(s(I),0,I)}function m(I){return new Int16Array(s(2*I),0,I)}function u(I){return new Int32Array(s(4*I),0,I)}function w(I){return new Float32Array(s(4*I),0,I)}function c(I){return new Float64Array(s(8*I),0,I)}function E(I){return e?new Uint8ClampedArray(s(I),0,I):d(I)}function M(I){return o?new BigUint64Array(s(8*I),0,I):null}function S(I){return a?new BigInt64Array(s(8*I),0,I):null}function C(I){return new DataView(s(I),0,I)}function O(I){I=b.nextPow2(I);var N=b.log2(I),F=v[N];return F.length>0?F.pop():new _(I)}le.free=function(I){if(_.isBuffer(I))v[b.log2(I.length)].push(I);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(I)&&(I=I.buffer),!I)return;var F=0|b.log2(I.length||I.byteLength);i[F].push(I)}},le.freeUint8=le.freeUint16=le.freeUint32=le.freeBigUint64=le.freeInt8=le.freeInt16=le.freeInt32=le.freeBigInt64=le.freeFloat32=le.freeFloat=le.freeFloat64=le.freeDouble=le.freeUint8Clamped=le.freeDataView=function(I){h(I.buffer)},le.freeArrayBuffer=h,le.freeBuffer=function(I){v[b.log2(I.length)].push(I)},le.malloc=function(I,N){if(void 0===N||"arraybuffer"===N)return s(I);switch(N){case"uint8":return d(I);case"uint16":return p(I);case"uint32":return f(I);case"int8":return g(I);case"int16":return m(I);case"int32":return u(I);case"float":case"float32":return w(I);case"double":case"float64":return c(I);case"uint8_clamped":return E(I);case"bigint64":return S(I);case"biguint64":return M(I);case"buffer":return O(I);case"data":case"dataview":return C(I);default:return null}return null},le.mallocArrayBuffer=s,le.mallocUint8=d,le.mallocUint16=p,le.mallocUint32=f,le.mallocInt8=g,le.mallocInt16=m,le.mallocInt32=u,le.mallocFloat32=le.mallocFloat=w,le.mallocFloat64=le.mallocDouble=c,le.mallocUint8Clamped=E,le.mallocBigUint64=M,le.mallocBigInt64=S,le.mallocDataView=C,le.mallocBuffer=O,le.clearCache=function(){for(var I=0;I<32;++I)l.UINT8[I].length=0,l.UINT16[I].length=0,l.UINT32[I].length=0,l.INT8[I].length=0,l.INT16[I].length=0,l.INT32[I].length=0,l.FLOAT[I].length=0,l.DOUBLE[I].length=0,l.BIGUINT64[I].length=0,l.BIGINT64[I].length=0,l.UINT8C[I].length=0,i[I].length=0,v[I].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(x,ue,le){var y=/[\'\"]/;ue.exports=function(b){return b?(y.test(b.charAt(0))&&(b=b.substr(1)),y.test(b.charAt(b.length-1))&&(b=b.substr(0,b.length-1)),b):""}},{}],329:[function(x,ue,le){"use strict";ue.exports=function(y,b,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var _=0,e=T.length;_<e;_++){var o=T[_];for(var a in o)if((void 0===b[a]||Array.isArray(b[a])||y[a]!==b[a])&&a in b){var l;if(!0===o[a])l=b[a];else if(!1===o[a]||"function"==typeof o[a]&&void 0===(l=o[a](b[a],y,b)))continue;y[a]=l}}return y}},{}],330:[function(x,ue,le){(function(y){(function(){function b(T){try{if(!y.localStorage)return!1}catch(e){return!1}var _=y.localStorage[T];return null!=_&&"true"===String(_).toLowerCase()}ue.exports=function(T,_){if(b("noDeprecation"))return T;var e=!1;return function(){if(!e){if(b("throwDeprecation"))throw new Error(_);b("traceDeprecation")?console.trace(_):console.warn(_),e=!0}return T.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(x,ue,le){var y=x("get-canvas-context");ue.exports=function(b){return y("webgl",b)}},{"get-canvas-context":194}],332:[function(x,ue,le){var y=x("../main"),b=x("object-assign"),T=y.instance();function _(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}b(_.prototype=new y.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(h,s){if("string"==typeof h){var d=h.match(o);return d?d[0]:""}var p=this._validateYear(h),f=h.month(),g=""+this.toChineseMonth(p,f);return s&&g.length<2&&(g="0"+g),this.isIntercalaryMonth(p,f)&&(g+="i"),g},monthNames:function(h){if("string"==typeof h){var s=h.match(a);return s?s[0]:""}var d=this._validateYear(h),p=h.month(),f=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(d,p)-1];return this.isIntercalaryMonth(d,p)&&(f="\u95f0"+f),f},monthNamesShort:function(h){if("string"==typeof h){var s=h.match(l);return s?s[0]:""}var d=this._validateYear(h),p=h.month(),f=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(d,p)-1];return this.isIntercalaryMonth(d,p)&&(f="\u95f0"+f),f},parseMonth:function(h,s){h=this._validateYear(h);var d,p=parseInt(s);if(isNaN(p))"\u95f0"===s[0]&&(d=!0,s=s.substring(1)),"\u6708"===s[s.length-1]&&(s=s.substring(0,s.length-1)),p=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(s);else{var f=s[s.length-1];d="i"===f||"I"===f}return this.toMonthIndex(h,p,d)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(h,s){if(h.year&&(h=h.year()),"number"!=typeof h||h<1888||h>2111)throw s.replace(/\{0\}/,this.local.name);return h},toMonthIndex:function(h,s,d){var p=this.intercalaryMonth(h);if(d&&s!==p||s<1||s>12)throw y.local.invalidMonth.replace(/\{0\}/,this.local.name);return p?!d&&s<=p?s-1:s:s-1},toChineseMonth:function(h,s){h.year&&(s=(h=h.year()).month());var d=this.intercalaryMonth(h);if(s<0||s>(d?12:11))throw y.local.invalidMonth.replace(/\{0\}/,this.local.name);return d?s<d?s+1:s:s+1},intercalaryMonth:function(h){return h=this._validateYear(h),i[h-i[0]]>>13},isIntercalaryMonth:function(h,s){h.year&&(s=(h=h.year()).month());var d=this.intercalaryMonth(h);return!!d&&d===s},leapYear:function(h){return 0!==this.intercalaryMonth(h)},weekOfYear:function(h,s,d){var p,f=this._validateYear(h,y.local.invalidyear),g=v[f-v[0]];(p=T.newDate(g>>9&4095,g>>5&15,31&g)).add(4-(p.dayOfWeek()||7),"d");var c=this.toJD(h,s,d)-p.toJD();return 1+Math.floor(c/7)},monthsInYear:function(h){return this.leapYear(h)?13:12},daysInMonth:function(h,s){h.year&&(s=h.month(),h=h.year()),h=this._validateYear(h);var d=i[h-i[0]];if(s>(d>>13?12:11))throw y.local.invalidMonth.replace(/\{0\}/,this.local.name);return d&1<<12-s?30:29},weekDay:function(h,s,d){return(this.dayOfWeek(h,s,d)||7)<6},toJD:function(h,s,d){var p=this._validate(h,g,d,y.local.invalidDate);h=this._validateYear(p.year()),s=p.month(),d=p.day();var f=this.isIntercalaryMonth(h,s),g=this.toChineseMonth(h,s),m=function(u,w,c,E,M){var S,C,O;if("object"==typeof u)C=u,S=w||{};else{var I;if(!("number"==typeof u&&u>=1888&&u<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof w&&w>=1&&w<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof c&&c>=1&&c<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof E?(I=!1,S=E):(I=!!E,S={}),C={year:u,month:w,day:c,isIntercalary:I}}O=C.day-1;var N,F=i[C.year-i[0]],L=F>>13;N=L&&(C.month>L||C.isIntercalary)?C.month:C.month-1;for(var P=0;P<N;P++)O+=F&1<<12-P?30:29;var j=v[C.year-v[0]],U=new Date(j>>9&4095,(j>>5&15)-1,(31&j)+O);return S.year=U.getFullYear(),S.month=1+U.getMonth(),S.day=U.getDate(),S}(h,g,d,f);return T.toJD(m.year,m.month,m.day)},fromJD:function(h){var s=T.fromJD(h),d=function(f,g,m,u){var w,c;if("object"==typeof f)w=f,c=g||{};else{if(!("number"==typeof f&&f>=1888&&f<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof g&&g>=1&&g<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof m&&m>=1&&m<=31))throw new Error("Solar day outside range 1 - 31");w={year:f,month:g,day:m},c={}}var E=v[w.year-v[0]];c.year=(w.year<<9|w.month<<5|w.day)>=E?w.year:w.year-1,E=v[c.year-v[0]];var S,C=new Date(E>>9&4095,(E>>5&15)-1,31&E),O=new Date(w.year,w.month-1,w.day);S=Math.round((O-C)/864e5);var I,N=i[c.year-i[0]];for(I=0;I<13;I++){var F=N&1<<12-I?30:29;if(S<F)break;S-=F}var L=N>>13;return!L||I<L?(c.isIntercalary=!1,c.month=1+I):I===L?(c.isIntercalary=!0,c.month=I):(c.isIntercalary=!1,c.month=I),c.day=1+S,c}(s.year(),s.month(),s.day()),p=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,p,d.day)},fromString:function(h){var s=h.match(e),d=this._validateYear(+s[1]),g=this.toMonthIndex(d,+s[2],!!s[3]);return this.newDate(d,g,+s[4])},add:function(h,s,d){var p=h.year(),f=h.month(),g=this.isIntercalaryMonth(p,f),m=this.toChineseMonth(p,f),u=Object.getPrototypeOf(_.prototype).add.call(this,h,s,d);if("y"===d){var w=u.year(),c=u.month(),E=this.isIntercalaryMonth(w,m),M=this.toMonthIndex(w,m,!(!g||!E));M!==c&&u.month(M)}return u}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,o=/^\d?\d[iI]?/m,a=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,l=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;y.calendars.chinese=_;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],v=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(x,ue,le){var y=x("../main");function T(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}x("object-assign")(T.prototype=new y.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var e=this._validate(_,this.minMonth,this.minDay,y.local.invalidYear);return(_=e.year()+(e.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear),13},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(_,e){var o=this._validate(_,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(13===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(_,e,o){return(this.dayOfWeek(_,e,o)||7)<6},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);return(_=a.year())<0&&_++,a.day()+30*(a.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var e=Math.floor(_)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(_)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1;return this.newDate(o,a,e-30*(a-1)+1)}}),y.calendars.coptic=T},{"../main":346,"object-assign":247}],334:[function(x,ue,le){var y=x("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x("object-assign")(T.prototype=new y.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),400},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/8)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,o,a){return(this._validate(e,o,a,y.local.invalidDate).day()+1)%8},weekDay:function(e,o,a){var l=this.dayOfWeek(e,o,a);return l>=2&&l<=6},extraInfo:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return{century:_[Math.floor((l.year()-1)/100)+1]||""}},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return e=l.year()+(l.year()<0?1:0),o=l.month(),(a=l.day())+(o>1?16:0)+(o>2?32*(o-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var o=Math.floor(e/400)+1;e-=400*(o-1),e+=e>15?16:0;var a=Math.floor(e/32)+1;return this.newDate(o<=0?o-1:o,a,e-32*(a-1)+1)}});var _={20:"Fruitbat",21:"Anchovy"};y.calendars.discworld=T},{"../main":346,"object-assign":247}],335:[function(x,ue,le){var y=x("../main");function T(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}x("object-assign")(T.prototype=new y.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var e=this._validate(_,this.minMonth,this.minDay,y.local.invalidYear);return(_=e.year()+(e.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear),13},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(_,e){var o=this._validate(_,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(13===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(_,e,o){return(this.dayOfWeek(_,e,o)||7)<6},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);return(_=a.year())<0&&_++,a.day()+30*(a.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var e=Math.floor(_)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(_)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1;return this.newDate(o,a,e-30*(a-1)+1)}}),y.calendars.ethiopian=T},{"../main":346,"object-assign":247}],336:[function(x,ue,le){var y=x("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function _(e,o){return e-o*Math.floor(e/o)}x("object-assign")(T.prototype=new y.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return this._leapYear(o.year())},_leapYear:function(e){return _(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,o){return e.year&&(o=e.month(),e=e.year()),this._validate(e,o,this.minDay,y.local.invalidMonth),12===o&&this.leapYear(e)||8===o&&5===_(this.daysInYear(e),10)?30:9===o&&3===_(this.daysInYear(e),10)?29:this.daysPerMonth[o-1]},weekDay:function(e,o,a){return 6!==this.dayOfWeek(e,o,a)},extraInfo:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return{yearType:(this.leapYear(l)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(l)%10-3]}},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);e=l.year(),o=l.month(),a=l.day();var i=e<=0?e+1:e,v=this.jdEpoch+this._delay1(i)+this._delay2(i)+a+1;if(o<7){for(var h=7;h<=this.monthsInYear(e);h++)v+=this.daysInMonth(e,h);for(h=1;h<o;h++)v+=this.daysInMonth(e,h)}else for(h=7;h<o;h++)v+=this.daysInMonth(e,h);return v},_delay1:function(e){var o=Math.floor((235*e-234)/19),l=29*o+Math.floor((12084+13753*o)/25920);return _(3*(l+1),7)<3&&l++,l},_delay2:function(e){var o=this._delay1(e-1),a=this._delay1(e);return this._delay1(e+1)-a==356?2:a-o==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var o=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===o?1:o+1,7,1);)o++;for(var a=e<this.toJD(o,1,1)?7:1;e>this.toJD(o,a,this.daysInMonth(o,a));)a++;var l=e-this.toJD(o,a,1)+1;return this.newDate(o,a,l)}}),y.calendars.hebrew=T},{"../main":346,"object-assign":247}],337:[function(x,ue,le){var y=x("../main");function T(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}x("object-assign")(T.prototype=new y.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(_){return(11*this._validate(_,this.minMonth,this.minDay,y.local.invalidYear).year()+14)%30<11},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(_){return this.leapYear(_)?355:354},daysInMonth:function(_,e){var o=this._validate(_,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(12===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(_,e,o){return 5!==this.dayOfWeek(_,e,o)},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);return _=a.year(),e=a.month(),_=_<=0?_+1:_,(o=a.day())+Math.ceil(29.5*(e-1))+354*(_-1)+Math.floor((3+11*_)/30)+this.jdEpoch-1},fromJD:function(_){_=Math.floor(_)+.5;var e=Math.floor((30*(_-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var o=Math.min(12,Math.ceil((_-29-this.toJD(e,1,1))/29.5)+1),a=_-this.toJD(e,o,1)+1;return this.newDate(e,o,a)}}),y.calendars.islamic=T},{"../main":346,"object-assign":247}],338:[function(x,ue,le){var y=x("../main");function T(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}x("object-assign")(T.prototype=new y.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var e=this._validate(_,this.minMonth,this.minDay,y.local.invalidYear);return(_=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(_,e){var o=this._validate(_,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(2===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(_,e,o){return(this.dayOfWeek(_,e,o)||7)<6},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);return _=a.year(),e=a.month(),o=a.day(),_<0&&_++,e<=2&&(_--,e+=12),Math.floor(365.25*(_+4716))+Math.floor(30.6001*(e+1))+o-1524.5},fromJD:function(_){var e=Math.floor(_+.5)+1524,o=Math.floor((e-122.1)/365.25),a=Math.floor(365.25*o),l=Math.floor((e-a)/30.6001),i=l-Math.floor(l<14?1:13),v=o-Math.floor(i>2?4716:4715),h=e-a-Math.floor(30.6001*l);return v<=0&&v--,this.newDate(v,i,h)}}),y.calendars.julian=T},{"../main":346,"object-assign":247}],339:[function(x,ue,le){var y=x("../main");function T(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}function _(o,a){return o-a*Math.floor(o/a)}function e(o,a){return _(o-1,a)+1}x("object-assign")(T.prototype=new y.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(o){return this._validate(o,this.minMonth,this.minDay,y.local.invalidYear),!1},formatYear:function(o){o=this._validate(o,this.minMonth,this.minDay,y.local.invalidYear).year();var a=Math.floor(o/400);return o%=400,o+=o<0?400:0,a+"."+Math.floor(o/20)+"."+o%20},forYear:function(o){if((o=o.split(".")).length<3)throw"Invalid Mayan year";for(var a=0,l=0;l<o.length;l++){var i=parseInt(o[l],10);if(Math.abs(i)>19||l>0&&i<0)throw"Invalid Mayan year";a=20*a+i}return a},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,y.local.invalidYear),18},weekOfYear:function(o,a,l){return this._validate(o,a,l,y.local.invalidDate),0},daysInYear:function(o){return this._validate(o,this.minMonth,this.minDay,y.local.invalidYear),360},daysInMonth:function(o,a){return this._validate(o,a,this.minDay,y.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(o,a,l){return this._validate(o,a,l,y.local.invalidDate).day()},weekDay:function(o,a,l){return this._validate(o,a,l,y.local.invalidDate),!0},extraInfo:function(o,a,l){var i=this._validate(o,a,l,y.local.invalidDate).toJD(),v=this._toHaab(i),h=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[v[0]-1],haabMonth:v[0],haabDay:v[1],tzolkinDayName:this.local.tzolkinMonths[h[0]-1],tzolkinDay:h[0],tzolkinTrecena:h[1]}},_toHaab:function(o){var a=_(8+(o-=this.jdEpoch)+340,365);return[Math.floor(a/20)+1,_(a,20)]},_toTzolkin:function(o){return[e(20+(o-=this.jdEpoch),20),e(o+4,13)]},toJD:function(o,a,l){var i=this._validate(o,a,l,y.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(o){o=Math.floor(o)+.5-this.jdEpoch;var a=Math.floor(o/360);o%=360,o+=o<0?360:0;var l=Math.floor(o/20);return this.newDate(a,l,o%20)}}),y.calendars.mayan=T},{"../main":346,"object-assign":247}],340:[function(x,ue,le){var y=x("../main"),b=x("object-assign");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new y.baseCalendar;var _=y.instance("gregorian");b(T.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear);return _.leapYear(o.year()+(o.year()<1?1:0)+1469)},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(1-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidMonth);(e=l.year())<0&&e++;for(var i=l.day(),v=1;v<l.month();v++)i+=this.daysPerMonth[v-1];return i+_.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var o=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(o+1,1,1);)o++;for(var a=e-Math.floor(this.toJD(o,1,1)+.5)+1,l=1;a>this.daysInMonth(o,l);)a-=this.daysInMonth(o,l),l++;return this.newDate(o,l,a)}}),y.calendars.nanakshahi=T},{"../main":346,"object-assign":247}],341:[function(x,ue,le){var y=x("../main");function T(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}x("object-assign")(T.prototype=new y.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(_){return this.daysInYear(_)!==this.daysPerYear},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(_){if(_=this._validate(_,this.minMonth,this.minDay,y.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[_])return this.daysPerYear;for(var e=0,o=this.minMonth;o<=12;o++)e+=this.NEPALI_CALENDAR_DATA[_][o];return e},daysInMonth:function(_,e){return _.year&&(e=_.month(),_=_.year()),this._validate(_,e,this.minDay,y.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[_]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[_][e]},weekDay:function(_,e,o){return 6!==this.dayOfWeek(_,e,o)},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);_=a.year(),e=a.month(),o=a.day();var l=y.instance(),i=0,v=e,h=_;this._createMissingCalendarData(_);var s=_-(v>9||9===v&&o>=this.NEPALI_CALENDAR_DATA[h][0]?56:57);for(9!==e&&(i=o,v--);9!==v;)v<=0&&(v=12,h--),i+=this.NEPALI_CALENDAR_DATA[h][v],v--;return 9===e?(i+=o-this.NEPALI_CALENDAR_DATA[h][0])<0&&(i+=l.daysInYear(s)):i+=this.NEPALI_CALENDAR_DATA[h][9]-this.NEPALI_CALENDAR_DATA[h][0],l.newDate(s,1,1).add(i,"d").toJD()},fromJD:function(_){var e=y.instance().fromJD(_),o=e.year(),a=e.dayOfYear(),l=o+56;this._createMissingCalendarData(l);for(var i=9,h=this.NEPALI_CALENDAR_DATA[l][i]-this.NEPALI_CALENDAR_DATA[l][0]+1;a>h;)++i>12&&(i=1,l++),h+=this.NEPALI_CALENDAR_DATA[l][i];return this.newDate(l,i,this.NEPALI_CALENDAR_DATA[l][i]-(h-a))},_createMissingCalendarData:function(_){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var o=_-1;o<_+2;o++)void 0===this.NEPALI_CALENDAR_DATA[o]&&(this.NEPALI_CALENDAR_DATA[o]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),y.calendars.nepali=T},{"../main":346,"object-assign":247}],342:[function(x,ue,le){var y=x("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function _(e,o){return e-o*Math.floor(e/o)}x("object-assign")(T.prototype=new y.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return 682*((o.year()-(o.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-(l.dayOfWeek()+1)%7,"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return 5!==this.dayOfWeek(e,o,a)},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);e=l.year(),o=l.month(),a=l.day();var i=e-(e>=0?474:473),v=474+_(i,2820);return a+(o<=7?31*(o-1):30*(o-1)+6)+Math.floor((682*v-110)/2816)+365*(v-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(e){var o=(e=Math.floor(e)+.5)-this.toJD(475,1,1),a=Math.floor(o/1029983),l=_(o,1029983),i=2820;if(1029982!==l){var v=Math.floor(l/366),h=_(l,366);i=Math.floor((2134*v+2816*h+2815)/1028522)+v+1}var s=i+2820*a+474,d=e-this.toJD(s=s<=0?s-1:s,1,1)+1,p=d<=186?Math.ceil(d/31):Math.ceil((d-6)/30),f=e-this.toJD(s,p,1)+1;return this.newDate(s,p,f)}}),y.calendars.persian=T,y.calendars.jalali=T},{"../main":346,"object-assign":247}],343:[function(x,ue,le){var y=x("../main"),b=x("object-assign"),T=y.instance();function _(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b(_.prototype=new y.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return e=this._t2gYear(o.year()),T.leapYear(e)},weekOfYear:function(e,o,a){var l=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return e=this._t2gYear(l.year()),T.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return e=this._t2gYear(l.year()),T.toJD(e,l.month(),l.day())},fromJD:function(e){var o=T.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),y.calendars.taiwan=_},{"../main":346,"object-assign":247}],344:[function(x,ue,le){var y=x("../main"),b=x("object-assign"),T=y.instance();function _(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b(_.prototype=new y.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return e=this._t2gYear(o.year()),T.leapYear(e)},weekOfYear:function(e,o,a){var l=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return e=this._t2gYear(l.year()),T.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return e=this._t2gYear(l.year()),T.toJD(e,l.month(),l.day())},fromJD:function(e){var o=T.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),y.calendars.thai=_},{"../main":346,"object-assign":247}],345:[function(x,ue,le){var y=x("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x("object-assign")(T.prototype=new y.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return 355===this.daysInYear(o.year())},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var o=0,a=1;a<=12;a++)o+=this.daysInMonth(e,a);return o},daysInMonth:function(e,o){for(var a=this._validate(e,o,this.minDay,y.local.invalidMonth).toJD()-24e5+.5,l=0,i=0;i<_.length;i++){if(_[i]>a)return _[l]-_[l-1];l++}return 30},weekDay:function(e,o,a){return 5!==this.dayOfWeek(e,o,a)},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate),i=12*(l.year()-1)+l.month()-15292;return l.day()+_[i-1]-1+24e5-.5},fromJD:function(e){for(var o=e-24e5+.5,a=0,l=0;l<_.length&&!(_[l]>o);l++)a++;var i=a+15292,v=Math.floor((i-1)/12);return this.newDate(v+1,i-12*v,o-_[a-1]+1)},isValid:function(e,o,a){var l=y.baseCalendar.prototype.isValid.apply(this,arguments);return l&&(l=(e=null!=e.year?e.year:e)>=1276&&e<=1500),l},_validate:function(e,o,a,l){var i=y.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw l.replace(/\{0\}/,this.local.name);return i}}),y.calendars.ummalqura=T;var _=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(x,ue,le){var y=x("object-assign");function b(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function T(l,i,v,h){if(this._calendar=l,this._year=i,this._month=v,this._day=h,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function _(l,i){return"000000".substring(0,i-(l=""+l).length)+l}function e(){this.shortYearCutoff="+10"}function o(l){this.local=this.regionalOptions[l]||this.regionalOptions[""]}y(b.prototype,{instance:function(l,i){l=(l||"gregorian").toLowerCase();var v=this._localCals[l+"-"+(i=i||"")];if(!v&&this.calendars[l]&&(v=new this.calendars[l](i),this._localCals[l+"-"+i]=v),!v)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,l);return v},newDate:function(l,i,v,h,s){return(h=(null!=l&&l.year?l.calendar():"string"==typeof h?this.instance(h,s):h)||this.instance()).newDate(l,i,v)},substituteDigits:function(l){return function(i){return(i+"").replace(/[0-9]/g,function(v){return l[v]})}},substituteChineseDigits:function(l,i){return function(v){for(var h="",s=0;v>0;){var d=v%10;h=(0===d?"":l[d]+i[s])+h,s++,v=Math.floor(v/10)}return 0===h.indexOf(l[1]+i[1])&&(h=h.substr(1)),h||l[0]}}}),y(T.prototype,{newDate:function(l,i,v){return this._calendar.newDate(null==l?this:l,i,v)},year:function(l){return 0===arguments.length?this._year:this.set(l,"y")},month:function(l){return 0===arguments.length?this._month:this.set(l,"m")},day:function(l){return 0===arguments.length?this._day:this.set(l,"d")},date:function(l,i,v){if(!this._calendar.isValid(l,i,v))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=l,this._month=i,this._day=v,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(l,i){return this._calendar.add(this,l,i)},set:function(l,i){return this._calendar.set(this,l,i)},compareTo:function(l){if(this._calendar.name!==l._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,l._calendar.local.name);var i=this._year!==l._year?this._year-l._year:this._month!==l._month?this.monthOfYear()-l.monthOfYear():this._day-l._day;return 0===i?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(l){return this._calendar.fromJD(l)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(l){return this._calendar.fromJSDate(l)},toString:function(){return(this.year()<0?"-":"")+_(Math.abs(this.year()),4)+"-"+_(this.month(),2)+"-"+_(this.day(),2)}}),y(e.prototype,{_validateLevel:0,newDate:function(l,i,v){return null==l?this.today():(l.year&&(this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate),v=l.day(),i=l.month(),l=l.year()),new T(this,l,i,v))},today:function(){return this.fromJSDate(new Date)},epoch:function(l){return this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(l){var i=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+_(Math.abs(i.year()),4)},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(l,i){var v=this._validate(l,i,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(v.month()+this.monthsInYear(v)-this.firstMonth)%this.monthsInYear(v)+this.minMonth},fromMonthOfYear:function(l,i){var v=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(l)+this.minMonth;return this._validate(l,v,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),v},daysInYear:function(l){var i=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate);return h.toJD()-this.newDate(h.year(),this.fromMonthOfYear(h.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(h))+2)%this.daysInWeek()},extraInfo:function(l,i,v){return this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(l,i,v){return this._validate(l,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(l,this._add(l,i,v),i,v)},_add:function(l,i,v){if(this._validateLevel++,"d"===v||"w"===v){var h=l.toJD()+i*("w"===v?this.daysInWeek():1),s=l.calendar().fromJD(h);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var d=l.year()+("y"===v?i:0),p=l.monthOfYear()+("m"===v?i:0);s=l.day(),"y"===v?(l.month()!==this.fromMonthOfYear(d,p)&&(p=this.newDate(d,l.month(),this.minDay).monthOfYear()),p=Math.min(p,this.monthsInYear(d)),s=Math.min(s,this.daysInMonth(d,this.fromMonthOfYear(d,p)))):"m"===v&&(function(g){for(;p<g.minMonth;)d--,p+=g.monthsInYear(d);for(var m=g.monthsInYear(d);p>m-1+g.minMonth;)d++,p-=m,m=g.monthsInYear(d)}(this),s=Math.min(s,this.daysInMonth(d,this.fromMonthOfYear(d,p))));var f=[d,this.fromMonthOfYear(d,p),s];return this._validateLevel--,f}catch(g){throw this._validateLevel--,g}},_correctAdd:function(l,i,v,h){if(!(this.hasYearZero||"y"!==h&&"m"!==h||0!==i[0]&&l.year()>0==i[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[h];i=this._add(l,v*s[0]+(v<0?-1:1)*s[1],s[2])}return l.date(i[0],i[1],i[2])},set:function(l,i,v){this._validate(l,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var h="y"===v?i:l.year(),s="m"===v?i:l.month(),d="d"===v?i:l.day();return"y"!==v&&"m"!==v||(d=Math.min(d,this.daysInMonth(h,s))),l.date(h,s,d)},isValid:function(l,i,v){this._validateLevel++;var h=this.hasYearZero||0!==l;if(h){var s=this.newDate(l,i,this.minDay);h=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(s)&&v>=this.minDay&&v-this.minDay<this.daysInMonth(s)}return this._validateLevel--,h},toJSDate:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(h)).toJSDate()},fromJSDate:function(l){return this.fromJD(a.instance().fromJSDate(l).toJD())},_validate:function(l,i,v,h){if(l.year){if(0===this._validateLevel&&this.name!==l.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,l.calendar().local.name);return l}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(l,i,v))throw h.replace(/\{0\}/,this.local.name);var s=this.newDate(l,i,v);return this._validateLevel--,s}catch(d){throw this._validateLevel--,d}}}),y(o.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){var i=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(l=i.year()+(i.year()<0?1:0))%4==0&&(l%100!=0||l%400==0)},weekOfYear:function(l,i,v){var h=this.newDate(l,i,v);return h.add(4-(h.dayOfWeek()||7),"d"),Math.floor((h.dayOfYear()-1)/7)+1},daysInMonth:function(l,i){var v=this._validate(l,i,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[v.month()-1]+(2===v.month()&&this.leapYear(v.year())?1:0)},weekDay:function(l,i,v){return(this.dayOfWeek(l,i,v)||7)<6},toJD:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate);l=h.year(),i=h.month(),v=h.day(),l<0&&l++,i<3&&(i+=12,l--);var s=Math.floor(l/100),d=2-s+Math.floor(s/4);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(i+1))+v+d-1524.5},fromJD:function(l){var i=Math.floor(l+.5),v=Math.floor((i-1867216.25)/36524.25),h=1524+(v=i+1+v-Math.floor(v/4)),s=Math.floor((h-122.1)/365.25),d=Math.floor(365.25*s),p=Math.floor((h-d)/30.6001),f=h-d-Math.floor(30.6001*p),g=p-(p>13.5?13:1),m=s-(g>2.5?4716:4715);return m<=0&&m--,this.newDate(m,g,f)},toJSDate:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate),s=new Date(h.year(),h.month()-1,h.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(l){return this.newDate(l.getFullYear(),l.getMonth()+1,l.getDate())}});var a=ue.exports=new b;a.cdate=T,a.baseCalendar=e,a.calendars.gregorian=o},{"object-assign":247}],347:[function(x,ue,le){var y=x("object-assign"),b=x("./main");y(b.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),b.local=b.regionalOptions[""],y(b.cdate.prototype,{formatDate:function(T,_){return"string"!=typeof T&&(_=T,T=""),this._calendar.formatDate(T||"",this,_)}}),y(b.baseCalendar.prototype,{UNIX_EPOCH:b.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:b.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(T,_,e){if("string"!=typeof T&&(e=_,_=T,T=""),!_)return"";if(_.calendar()!==this)throw b.local.invalidFormat||b.regionalOptions[""].invalidFormat;T=T||this.local.dateFormat;for(var a,l,i,v=(e=e||{}).dayNamesShort||this.local.dayNamesShort,h=e.dayNames||this.local.dayNames,s=e.monthNumbers||this.local.monthNumbers,d=e.monthNamesShort||this.local.monthNamesShort,p=e.monthNames||this.local.monthNames,f=function(O,I){for(var N=1;C+N<T.length&&T.charAt(C+N)===O;)N++;return C+=N-1,Math.floor(N/(I||1))>1},g=function(O,I,N,F){var L=""+I;if(f(O,F))for(;L.length<N;)L="0"+L;return L},m=this,w=function(O,I){return I?"function"==typeof p?p.call(m,O):p[O.month()-m.minMonth]:"function"==typeof d?d.call(m,O):d[O.month()-m.minMonth]},c=this.local.digits,E=function(O){return e.localNumbers&&c?c(O):O},M="",S=!1,C=0;C<T.length;C++)if(S)"'"!==T.charAt(C)||f("'")?M+=T.charAt(C):S=!1;else switch(T.charAt(C)){case"d":M+=E(g("d",_.day(),2));break;case"D":M+=("D",a=_.dayOfWeek(),l=v,i=h,f("D")?i[a]:l[a]);break;case"o":M+=g("o",_.dayOfYear(),3);break;case"w":M+=g("w",_.weekOfYear(),2);break;case"m":M+=(O=_,"function"==typeof s?s.call(m,O,f("m")):E(g("m",O.month(),2)));break;case"M":M+=w(_,f("M"));break;case"y":M+=f("y",2)?_.year():(_.year()%100<10?"0":"")+_.year()%100;break;case"Y":f("Y",2),M+=_.formatYear();break;case"J":M+=_.toJD();break;case"@":M+=(_.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":M+=(_.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":f("'")?M+="'":S=!0;break;default:M+=T.charAt(C)}var O;return M},parseDate:function(T,_,e){if(null==_)throw b.local.invalidArguments||b.regionalOptions[""].invalidArguments;if(""===(_="object"==typeof _?_.toString():_+""))return null;T=T||this.local.dateFormat;var o=(e=e||{}).shortYearCutoff||this.shortYearCutoff;o="string"!=typeof o?o:this.today().year()%100+parseInt(o,10);for(var a=e.dayNamesShort||this.local.dayNamesShort,l=e.dayNames||this.local.dayNames,i=e.parseMonth||this.local.parseMonth,v=e.monthNumbers||this.local.monthNumbers,h=e.monthNamesShort||this.local.monthNamesShort,s=e.monthNames||this.local.monthNames,d=-1,p=-1,f=-1,g=-1,m=-1,u=!1,w=!1,c=function(j,U){for(var $=1;F+$<T.length&&T.charAt(F+$)===j;)$++;return F+=$-1,Math.floor($/(U||1))>1},E=function(j,U){var $=c(j,U),X=[2,3,$?4:2,$?4:2,10,11,20]["oyYJ@!".indexOf(j)+1],te=new RegExp("^-?\\d{1,"+X+"}"),ae=_.substring(N).match(te);if(!ae)throw(b.local.missingNumberAt||b.regionalOptions[""].missingNumberAt).replace(/\{0\}/,N);return N+=ae[0].length,parseInt(ae[0],10)},M=this,S=function(){if("function"==typeof v){c("m");var j=v.call(M,_.substring(N));return N+=j.length,j}return E("m")},C=function(j,U,$,X){for(var te=c(j,X)?$:U,ae=0;ae<te.length;ae++)if(_.substr(N,te[ae].length).toLowerCase()===te[ae].toLowerCase())return N+=te[ae].length,ae+M.minMonth;throw(b.local.unknownNameAt||b.regionalOptions[""].unknownNameAt).replace(/\{0\}/,N)},O=function(){if("function"==typeof s){var j=c("M")?s.call(M,_.substring(N)):h.call(M,_.substring(N));return N+=j.length,j}return C("M",h,s)},I=function(){if(_.charAt(N)!==T.charAt(F))throw(b.local.unexpectedLiteralAt||b.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,N);N++},N=0,F=0;F<T.length;F++)if(w)"'"!==T.charAt(F)||c("'")?I():w=!1;else switch(T.charAt(F)){case"d":g=E("d");break;case"D":C("D",a,l);break;case"o":m=E("o");break;case"w":E("w");break;case"m":f=S();break;case"M":f=O();break;case"y":var L=F;u=!c("y",2),F=L,p=E("y",2);break;case"Y":p=E("Y",2);break;case"J":d=E("J")+.5,"."===_.charAt(N)&&(N++,E("J"));break;case"@":d=E("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":d=E("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":N=_.length;break;case"'":c("'")?I():w=!0;break;default:I()}if(N<_.length)throw b.local.unexpectedText||b.regionalOptions[""].unexpectedText;if(-1===p?p=this.today().year():p<100&&u&&(p+=-1===o?1900:this.today().year()-this.today().year()%100-(p<=o?0:100)),"string"==typeof f&&(f=i.call(this,p,f)),m>-1){g=m;for(var P=this.daysInMonth(p,f=1);g>P;P=this.daysInMonth(p,f))f++,g-=P}return d>-1?this.fromJD(d):this.newDate(p,f,g)},determineDate:function(T,_,e,o,a){e&&"object"!=typeof e&&(a=o,o=e,e=null),"string"!=typeof o&&(a=o,o="");var l=this;return _=_?_.newDate():null,null==T?_:"string"==typeof T?function(i){try{return l.parseDate(o,i,a)}catch(d){}for(var v=((i=i.toLowerCase()).match(/^c/)&&e?e.newDate():null)||l.today(),h=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=h.exec(i);s;)v.add(parseInt(s[1],10),s[2]||"d"),s=h.exec(i);return v}(T):"number"==typeof T?isNaN(T)||T===1/0||T===-1/0?_:l.today().add(T,"d"):l.newDate(T)}})},{"./main":346,"object-assign":247}],348:[function(x,ue,le){"use strict";ue.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(x,ue,le){"use strict";var y=x("./arrow_paths"),b=x("../../plots/font_attributes"),T=x("../../plots/cartesian/constants"),_=x("../../plot_api/plot_template").templatedArray;x("../../constants/axis_placeable_objects"),ue.exports=_("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:b({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:y.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:y.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",T.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",T.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",T.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",T.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:b({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("./draw").draw;function _(o){y.filterVisible(o._fullLayout.annotations).forEach(function(l){var i=b.getFromId(o,l.xref),v=b.getFromId(o,l.yref),h=b.getRefType(l.xref),s=b.getRefType(l.yref);l._extremes={},"range"===h&&e(l,i),"range"===s&&e(l,v)})}function e(o,a){var l,i=a._id,v=i.charAt(0),h=o[v],s=o["a"+v],f=o["_"+v+"padplus"],g=o["_"+v+"padminus"],m={x:1,y:-1}[v]*o[v+"shift"],u=3*o.arrowsize*o.arrowwidth||0,w=u+m,c=u-m,E=3*o.startarrowsize*o.arrowwidth||0,M=E+m,S=E-m;if(o["a"+v+"ref"]===o[v+"ref"]){var C=b.findExtremes(a,[a.r2c(h)],{ppadplus:w,ppadminus:c}),O=b.findExtremes(a,[a.r2c(s)],{ppadplus:Math.max(f,M),ppadminus:Math.max(g,S)});l={min:[C.min[0],O.min[0]],max:[C.max[0],O.max[0]]}}else M=s?M+s:M,S=s?S-s:S,l=b.findExtremes(a,[a.r2c(h)],{ppadplus:Math.max(f,w,M),ppadminus:Math.max(g,c,S)});o._extremes[i]=l}ue.exports=function(o){if(y.filterVisible(o._fullLayout.annotations).length&&o._fullData.length)return y.syncOrAsync([T,_],o)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../registry"),T=x("../../plot_api/plot_template").arrayEditor;function _(o,a){var l,i,v,h,s,d,p,f=o._fullLayout.annotations,g=[],m=[],u=[],w=(a||[]).length;for(l=0;l<f.length;l++)if(h=(v=f[l]).clicktoshow){for(i=0;i<w;i++)if(d=(s=a[i]).xaxis,p=s.yaxis,d._id===v.xref&&p._id===v.yref&&d.d2r(s.x)===e(v._xclick,d)&&p.d2r(s.y)===e(v._yclick,p)){(v.visible?"onout"===h?m:u:g).push(l);break}i===w&&v.visible&&"onout"===h&&m.push(l)}return{on:g,off:m,explicitOff:u}}function e(o,a){return"log"===a.type?a.l2r(o):a.d2r(o)}ue.exports={hasClickToShow:function(o,a){var l=_(o,a);return l.on.length>0||l.explicitOff.length>0},onClick:function(o,a){var l,i,v=_(o,a),h=v.on,s=v.off.concat(v.explicitOff),d={},p=o._fullLayout.annotations;if(h.length||s.length){for(l=0;l<h.length;l++)(i=T(o.layout,"annotations",p[h[l]])).modifyItem("visible",!0),y.extendFlat(d,i.getUpdateObj());for(l=0;l<s.length;l++)(i=T(o.layout,"annotations",p[s[l]])).modifyItem("visible",!1),y.extendFlat(d,i.getUpdateObj());return b.call("update",o,{},d)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../color");ue.exports=function(T,_,e,o){o("opacity");var a=o("bgcolor"),l=o("bordercolor"),i=b.opacity(l);o("borderpad");var v=o("borderwidth"),h=o("showarrow");if(o("text",h?" ":e._dfltTitle.annotation),o("textangle"),y.coerceFont(o,"font",e.font),o("width"),o("align"),o("height")&&o("valign"),h){var s,d,p=o("arrowside");-1!==p.indexOf("end")&&(s=o("arrowhead"),d=o("arrowsize")),-1!==p.indexOf("start")&&(o("startarrowhead",s),o("startarrowsize",d)),o("arrowcolor",i?_.bordercolor:b.defaultLine),o("arrowwidth",2*(i&&v||1)),o("standoff"),o("startstandoff")}var f=o("hovertext"),g=e.hoverlabel||{};if(f){var m=o("hoverlabel.bgcolor",g.bgcolor||(b.opacity(a)?b.rgb(a):b.defaultLine)),u=o("hoverlabel.bordercolor",g.bordercolor||b.contrast(m));y.coerceFont(o,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||u})}o("captureevents",!!f)}},{"../../lib":503,"../color":366}],353:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib/to_log_range");ue.exports=function(T,_,e,o){_=_||{};var a="log"===e&&"linear"===_.type;if(a||"linear"===e&&"log"===_.type)for(var i,v,h=T._fullLayout.annotations,s=_._id.charAt(0),d=0;d<h.length;d++)v="annotations["+d+"].",(i=h[d])[s+"ref"]===_._id&&p(s),i["a"+s+"ref"]===_._id&&p("a"+s);function p(f){var g=i[f],m=null;m=a?b(g,_.range):Math.pow(10,g),y(m)||(m=null),o(v+f,m)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("../../plots/array_container_defaults"),_=x("./common_defaults"),e=x("./attributes");function o(a,l,i){function v(O,I){return y.coerce(a,l,e,O,I)}var h=v("visible"),s=v("clicktoshow");if(h||s){_(a,l,i,v);for(var d=l.showarrow,p=["x","y"],f=[-10,-30],g={_fullLayout:i},m=0;m<2;m++){var u=p[m],w=b.coerceRef(a,l,g,u,"","paper");if("paper"!==w&&b.getFromId(g,w)._annIndices.push(l._index),b.coercePosition(l,g,v,w,u,.5),d){var c="a"+u,E=b.coerceRef(a,l,g,c,"pixel",["pixel","paper"]);"pixel"!==E&&E!==w&&(E=l[c]="pixel"),b.coercePosition(l,g,v,E,c,"pixel"===E?f[m]:.4)}v(u+"anchor"),v(u+"shift")}if(y.noneOrAll(a,l,["x","y"]),d&&y.noneOrAll(a,l,["ax","ay"]),s){var S=v("xclick"),C=v("yclick");l._xclick=void 0===S?l.x:b.cleanPosition(S,g,l.xref),l._yclick=void 0===C?l.y:b.cleanPosition(C,g,l.yref)}}}ue.exports=function(a,l){T(a,l,{name:"annotations",handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../registry"),T=x("../../plots/plots"),_=x("../../lib"),e=_.strTranslate,o=x("../../plots/cartesian/axes"),a=x("../color"),l=x("../drawing"),i=x("../fx"),v=x("../../lib/svg_text_utils"),h=x("../../lib/setcursor"),s=x("../dragelement"),d=x("../../plot_api/plot_template").arrayEditor,p=x("./draw_arrow_head");function f(u,w){var c=u._fullLayout.annotations[w]||{},E=o.getFromId(u,c.xref),M=o.getFromId(u,c.yref);E&&E.setScale(),M&&M.setScale(),m(u,c,w,!1,E,M)}function g(u,w,c,E,M){var S=M[c],C=M[c+"ref"],O=-1!==c.indexOf("y"),I="domain"===o.getRefType(C),N=O?E.h:E.w;return u?I?S+(O?-w:w)/u._length:u.p2r(u.r2p(S)+w):S+(O?-w:w)/N}function m(u,w,c,E,M,S){var C,O,I=u._fullLayout,N=u._fullLayout._size,F=u._context.edits;E?(C="annotation-"+E,O=E+".annotations"):(C="annotation",O="annotations");var L=d(u.layout,O,w),P=L.modifyBase,j=L.modifyItem,U=L.getUpdateObj;I._infolayer.selectAll("."+C+'[data-index="'+c+'"]').remove();var $="clip"+I._uid+"_ann"+c;if(w._input&&!1!==w.visible){var X={x:{},y:{}},te=+w.textangle||0,ae=I._infolayer.append("g").classed(C,!0).attr("data-index",String(c)).style("opacity",w.opacity),J=ae.append("g").classed("annotation-text-g",!0),ee=F[w.showarrow?"annotationTail":"annotationPosition"],se=w.captureevents||F.annotationText||ee,G=J.append("g").style("pointer-events",se?"all":null).call(h,"pointer").on("click",function(){u._dragging=!1,u.emit("plotly_clickannotation",pe(y.event))});w.hovertext&&G.on("mouseover",function(){var Te=w.hoverlabel,Le=Te.font,Oe=this.getBoundingClientRect(),Re=u.getBoundingClientRect();i.loneHover({x0:Oe.left-Re.left,x1:Oe.right-Re.left,y:(Oe.top+Oe.bottom)/2-Re.top,text:w.hovertext,color:Te.bgcolor,borderColor:Te.bordercolor,fontFamily:Le.family,fontSize:Le.size,fontColor:Le.color},{container:I._hoverlayer.node(),outerContainer:I._paper.node(),gd:u})}).on("mouseout",function(){i.loneUnhover(I._hoverlayer.node())});var H=w.borderwidth,oe=H+w.borderpad,W=G.append("rect").attr("class","bg").style("stroke-width",H+"px").call(a.stroke,w.bordercolor).call(a.fill,w.bgcolor),ne=w.width||w.height,re=I._topclips.selectAll("#"+$).data(ne?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",$).append("rect"),re.exit().remove();var ce=w.font,fe=I._meta?_.templateString(w.text,I._meta):w.text,me=G.append("text").classed("annotation-text",!0).text(fe);F.annotationText?me.call(v.makeEditable,{delegate:G,gd:u}).call(we).on("edit",function(Te){w.text=Te,this.call(we),j("text",Te),M&&M.autorange&&P(M._name+".autorange",!0),S&&S.autorange&&P(S._name+".autorange",!0),b.call("_guiRelayout",u,U())}):me.call(we)}else y.selectAll("#"+$).remove();function pe(Te){var Le={index:c,annotation:w._input,fullAnnotation:w,event:Te};return E&&(Le.subplotId=E),Le}function we(Te){return Te.call(l.font,ce).attr({"text-anchor":{left:"start",right:"end"}[w.align]||"middle"}),v.convertToTspans(Te,u,ye),Te}function ye(){var Te=me.selectAll("a");1===Te.size()&&Te.text()===me.text()&&G.insert("a",":first-child").attr({"xlink:xlink:href":Te.attr("xlink:href"),"xlink:xlink:show":Te.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(W.node());var Le=G.select(".annotation-text-math-group"),Oe=!Le.empty(),Re=l.bBox((Oe?Le:me).node()),Ve=Re.width,_e=Re.height,Ae=w.width||Ve,Fe=w.height||_e,Pe=Math.round(Ae+2*oe),Be=Math.round(Fe+2*oe);function qe(vt,Et){return"auto"===Et&&(Et=vt<1/3?"left":vt>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Et]}for(var We=!1,Je=["x","y"],ut=0;ut<Je.length;ut++){var Ge,Ke,nt,it,ht,Tt=Je[ut],Ct=w[Tt+"ref"]||Tt,Vt=w["a"+Tt+"ref"],Ft={x:M,y:S}[Tt],gt=(te+("x"===Tt?0:-90))*Math.PI/180,ft=Pe*Math.cos(gt),Bt=Be*Math.sin(gt),rn=Math.abs(ft)+Math.abs(Bt),un=w[Tt+"anchor"],pn=w[Tt+"shift"]*("x"===Tt?1:-1),dn=X[Tt],Mn=o.getRefType(Ct);if(Ft&&"domain"!==Mn){var ln=Ft.r2fraction(w[Tt]);(ln<0||ln>1)&&(Vt===Ct?((ln=Ft.r2fraction(w["a"+Tt]))<0||ln>1)&&(We=!0):We=!0),Ge=Ft._offset+Ft.r2p(w[Tt]),it=.5}else{var Ee="domain"===Mn;"x"===Tt?(nt=w[Tt],Ge=Ee?Ft._offset+Ft._length*nt:Ge=N.l+N.w*nt):(nt=1-w[Tt],Ge=Ee?Ft._offset+Ft._length*nt:Ge=N.t+N.h*nt),it=w.showarrow?.5:nt}if(w.showarrow){dn.head=Ge;var De=w["a"+Tt];if(ht=ft*qe(.5,w.xanchor)-Bt*qe(.5,w.yanchor),Vt===Ct){var Ie=o.getRefType(Vt);"domain"===Ie?("y"===Tt&&(De=1-De),dn.tail=Ft._offset+Ft._length*De):dn.tail="paper"===Ie?"y"===Tt?N.t+N.h*(De=1-De):N.l+N.w*De:Ft._offset+Ft.r2p(De),Ke=ht}else dn.tail=Ge+De,Ke=ht+De;dn.text=dn.tail+ht;var He=I["x"===Tt?"width":"height"];if("paper"===Ct&&(dn.head=_.constrain(dn.head,1,He-1)),"pixel"===Vt){var Ye=-Math.max(dn.tail-3,dn.text),tt=Math.min(dn.tail+3,dn.text)-He;Ye>0?(dn.tail+=Ye,dn.text+=Ye):tt>0&&(dn.tail-=tt,dn.text-=tt)}dn.tail+=pn,dn.head+=pn}else Ke=ht=rn*qe(it,un),dn.text=Ge+ht;dn.text+=pn,ht+=pn,w["_"+Tt+"padplus"]=rn/2+(Ke+=pn),w["_"+Tt+"padminus"]=rn/2-Ke,w["_"+Tt+"size"]=rn,w["_"+Tt+"shift"]=ht}if(We)G.remove();else{var ot=0,st=0;"left"!==w.align&&(ot=(Ae-Ve)*("center"===w.align?.5:1)),"top"!==w.valign&&(st=(Fe-_e)*("middle"===w.valign?.5:1)),Oe?Le.select("svg").attr({x:oe+ot-1,y:oe+st}).call(l.setClipUrl,ne?$:null,u):me.call(v.positionText,oe+ot-Re.left,oe+st-Re.top).call(l.setClipUrl,ne?$:null,u),re.select("rect").call(l.setRect,oe,oe,Ae,Fe),W.call(l.setRect,H/2,H/2,Pe-H,Be-H),G.call(l.setTranslate,Math.round(X.x.text-Pe/2),Math.round(X.y.text-Be/2)),J.attr({transform:"rotate("+te+","+X.x.text+","+X.y.text+")"});var Ut,Kt=function(vt,Et){ae.selectAll(".annotation-arrow-g").remove();var $t=X.x.head,Dt=X.y.head,Pt=X.x.tail+vt,je=X.y.tail+Et,rt=X.x.text+vt,pt=X.y.text+Et,It=_.rotationXYMatrix(te,rt,pt),jt=_.apply2DTransform(It),Qt=_.apply2DTransform2(It),fn=+W.attr("width"),an=+W.attr("height"),Sn=rt-.5*fn,Yn=Sn+fn,kn=pt-.5*an,cn=kn+an,vn=[[Sn,kn,Sn,cn],[Sn,cn,Yn,cn],[Yn,cn,Yn,kn],[Yn,kn,Sn,kn]].map(Qt);if(!vn.reduce(function(fr,Nr){return fr^!!_.segmentsIntersect($t,Dt,$t+1e6,Dt+1e6,Nr[0],Nr[1],Nr[2],Nr[3])},!1)){vn.forEach(function(fr){var Nr=_.segmentsIntersect(Pt,je,$t,Dt,fr[0],fr[1],fr[2],fr[3]);Nr&&(Pt=Nr.x,je=Nr.y)});var hn=w.arrowwidth,Dn=w.arrowcolor,Pn=w.arrowside,$n=ae.append("g").style({opacity:a.opacity(Dn)}).classed("annotation-arrow-g",!0),rr=$n.append("path").attr("d","M"+Pt+","+je+"L"+$t+","+Dt).style("stroke-width",hn+"px").call(a.stroke,a.rgb(Dn));if(p(rr,Pn,w),F.annotationPosition&&rr.node().parentNode&&!E){var er=$t,or=Dt;if(w.standoff){var Zr=Math.sqrt(Math.pow($t-Pt,2)+Math.pow(Dt-je,2));er+=w.standoff*(Pt-$t)/Zr,or+=w.standoff*(je-Dt)/Zr}var zr,pr,Br=$n.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Pt-er)+","+(je-or),transform:e(er,or)}).style("stroke-width",hn+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)");s.init({element:Br.node(),gd:u,prepFn:function(){var fr=l.getTranslate(G);zr=fr.x,pr=fr.y,M&&M.autorange&&P(M._name+".autorange",!0),S&&S.autorange&&P(S._name+".autorange",!0)},moveFn:function(fr,Nr){var xi=jt(zr,pr),Qn=xi[0]+fr,Er=xi[1]+Nr;G.call(l.setTranslate,Qn,Er),j("x",g(M,fr,"x",N,w)),j("y",g(S,Nr,"y",N,w)),w.axref===w.xref&&j("ax",g(M,fr,"ax",N,w)),w.ayref===w.yref&&j("ay",g(S,Nr,"ay",N,w)),$n.attr("transform",e(fr,Nr)),J.attr({transform:"rotate("+te+","+Qn+","+Er+")"})},doneFn:function(){b.call("_guiRelayout",u,U());var fr=document.querySelector(".js-notes-box-panel");fr&&fr.redraw(fr.selectedObj)}})}}};w.showarrow&&Kt(0,0),ee&&s.init({element:G.node(),gd:u,prepFn:function(){Ut=J.attr("transform")},moveFn:function(vt,Et){var $t="pointer";if(w.showarrow)j("ax",w.axref===w.xref?g(M,vt,"ax",N,w):w.ax+vt),j("ay",w.ayref===w.yref?g(S,Et,"ay",N.w,w):w.ay+Et),Kt(vt,Et);else{if(E)return;var Dt,Pt;if(M)Dt=g(M,vt,"x",N,w);else{var je=w._xsize/N.w;Dt=s.align(w.x+(w._xshift-w.xshift)/N.w-je/2+vt/N.w,je,0,1,w.xanchor)}if(S)Pt=g(S,Et,"y",N,w);else{var pt=w._ysize/N.h;Pt=s.align(w.y-(w._yshift+w.yshift)/N.h-pt/2-Et/N.h,pt,0,1,w.yanchor)}j("x",Dt),j("y",Pt),M&&S||($t=s.getCursor(M?.5:Dt,S?.5:Pt,w.xanchor,w.yanchor))}J.attr({transform:e(vt,Et)+Ut}),h(G,$t)},clickFn:function(vt,Et){w.captureevents&&u.emit("plotly_clickannotation",pe(Et))},doneFn:function(){h(G),b.call("_guiRelayout",u,U());var vt=document.querySelector(".js-notes-box-panel");vt&&vt.redraw(vt.selectedObj)}})}}}ue.exports={draw:function(u){var w=u._fullLayout;w._infolayer.selectAll(".annotation").remove();for(var c=0;c<w.annotations.length;c++)w.annotations[c].visible&&f(u,c);return T.previousPromises(u)},drawOne:f,drawRaw:m}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../color"),T=x("./arrow_paths"),_=x("../../lib"),e=_.strScale,o=_.strRotate,a=_.strTranslate;ue.exports=function(l,i,v){var h,s,d,p,f=l.node(),g=T[v.arrowhead||0],m=T[v.startarrowhead||0],u=(v.arrowwidth||1)*(v.arrowsize||1),w=(v.arrowwidth||1)*(v.startarrowsize||1),c=i.indexOf("start")>=0,E=i.indexOf("end")>=0,M=g.backoff*u+v.standoff,S=m.backoff*w+v.startstandoff;if("line"===f.nodeName){h={x:+l.attr("x1"),y:+l.attr("y1")},s={x:+l.attr("x2"),y:+l.attr("y2")};var C=h.x-s.x,O=h.y-s.y;if(p=(d=Math.atan2(O,C))+Math.PI,M&&S&&M+S>Math.sqrt(C*C+O*O))return void ae();if(M){if(M*M>C*C+O*O)return void ae();var I=M*Math.cos(d),N=M*Math.sin(d);s.x+=I,s.y+=N,l.attr({x2:s.x,y2:s.y})}if(S){if(S*S>C*C+O*O)return void ae();var F=S*Math.cos(d),L=S*Math.sin(d);h.x-=F,h.y-=L,l.attr({x1:h.x,y1:h.y})}}else if("path"===f.nodeName){var P=f.getTotalLength(),j="";if(P<M+S)return void ae();var U=f.getPointAtLength(0),$=f.getPointAtLength(.1);d=Math.atan2(U.y-$.y,U.x-$.x),h=f.getPointAtLength(Math.min(S,P)),j="0px,"+S+"px,";var X=f.getPointAtLength(P),te=f.getPointAtLength(P-.1);p=Math.atan2(X.y-te.y,X.x-te.x),s=f.getPointAtLength(Math.max(0,P-M)),l.style("stroke-dasharray",j+=P-(j?S+M:M)+"px,"+P+"px")}function ae(){l.style("stroke-dasharray","0px,100px")}function J(ee,se,G,H){ee.path&&(ee.noRotate&&(G=0),y.select(f.parentNode).append("path").attr({class:l.attr("class"),d:ee.path,transform:a(se.x,se.y)+o(180*G/Math.PI)+e(H)}).style({fill:b.rgb(v.arrowcolor),"stroke-width":0}))}c&&J(m,h,d,w),E&&J(g,s,p,u)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(x,ue,le){"use strict";var y=x("./draw"),b=x("./click");ue.exports={moduleType:"component",name:"annotations",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),includeBasePlot:x("../../plots/cartesian/include_components")("annotations"),calcAutorange:x("./calc_autorange"),draw:y.draw,drawOne:y.drawOne,drawRaw:y.drawRaw,hasClickToShow:b.hasClickToShow,onClick:b.onClick,convertCoords:x("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(x,ue,le){"use strict";var y=x("../annotations/attributes"),b=x("../../plot_api/edit_types").overrideAll,T=x("../../plot_api/plot_template").templatedArray;ue.exports=b(T("annotation",{visible:y.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:y.xanchor,xshift:y.xshift,yanchor:y.yanchor,yshift:y.yshift,text:y.text,textangle:y.textangle,font:y.font,width:y.width,height:y.height,opacity:y.opacity,align:y.align,valign:y.valign,bgcolor:y.bgcolor,bordercolor:y.bordercolor,borderpad:y.borderpad,borderwidth:y.borderwidth,showarrow:y.showarrow,arrowcolor:y.arrowcolor,arrowhead:y.arrowhead,startarrowhead:y.startarrowhead,arrowside:y.arrowside,arrowsize:y.arrowsize,startarrowsize:y.startarrowsize,arrowwidth:y.arrowwidth,standoff:y.standoff,startstandoff:y.startstandoff,hovertext:y.hovertext,hoverlabel:y.hoverlabel,captureevents:y.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes");function T(_,e){var o=e.fullSceneLayout.domain,a=e.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};_._xa={},y.extendFlat(_._xa,l),b.setConvert(_._xa),_._xa._offset=a.l+o.x[0]*a.w,_._xa.l2p=function(){return.5*(1+_._pdata[0]/_._pdata[3])*a.w*(o.x[1]-o.x[0])},_._ya={},y.extendFlat(_._ya,l),b.setConvert(_._ya),_._ya._offset=a.t+(1-o.y[1])*a.h,_._ya.l2p=function(){return.5*(1-_._pdata[1]/_._pdata[3])*a.h*(o.y[1]-o.y[0])}}ue.exports=function(_){for(var e=_.fullSceneLayout.annotations,o=0;o<e.length;o++)T(e[o],_);_.fullLayout._infolayer.selectAll(".annotation-"+_.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("../../plots/array_container_defaults"),_=x("../annotations/common_defaults"),e=x("./attributes");function o(a,l,i,v){function h(d,p){return y.coerce(a,l,e,d,p)}function s(d){var p=d+"axis",f={_fullLayout:{}};return f._fullLayout[p]=i[p],b.coercePosition(l,f,h,d,d,.5)}h("visible")&&(_(a,l,v.fullLayout,h),s("x"),s("y"),s("z"),y.noneOrAll(a,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",h("xanchor"),h("yanchor"),h("xshift"),h("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",h("ax",-10),h("ay",-30),y.noneOrAll(a,l,["ax","ay"])))}ue.exports=function(a,l,i){T(a,l,{name:"annotations",handleItemDefaults:o,fullLayout:i.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(x,ue,le){"use strict";var y=x("../annotations/draw").drawRaw,b=x("../../plots/gl3d/project"),T=["x","y","z"];ue.exports=function(_){for(var e=_.fullSceneLayout,o=_.dataScale,a=e.annotations,l=0;l<a.length;l++){for(var i=a[l],v=!1,h=0;h<3;h++){var s=T[h],p=e[s+"axis"].r2fraction(i[s]);if(p<0||p>1){v=!0;break}}v?_.fullLayout._infolayer.select(".annotation-"+_.id+'[data-index="'+l+'"]').remove():(i._pdata=b(_.glplot.cameraParams,[e.xaxis.r2l(i.x)*o[0],e.yaxis.r2l(i.y)*o[1],e.zaxis.r2l(i.z)*o[2]]),y(_.graphDiv,i,l,_.id,i._xa,i._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib");ue.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:x("./attributes")}}},layoutAttributes:x("./attributes"),handleDefaults:x("./defaults"),includeBasePlot:function(T,_){var e=y.subplotsRegistry.gl3d;if(e)for(var o=e.attrRegex,a=Object.keys(T),l=0;l<a.length;l++){var i=a[l];o.test(i)&&(T[i].annotations||[]).length&&(b.pushUnique(_._basePlotModules,e),b.pushUnique(_._subplots.gl3d,i))}},convert:x("./convert"),draw:x("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(x,ue,le){"use strict";ue.exports=x("world-calendars/dist/main"),x("world-calendars/dist/plus"),x("world-calendars/dist/calendars/chinese"),x("world-calendars/dist/calendars/coptic"),x("world-calendars/dist/calendars/discworld"),x("world-calendars/dist/calendars/ethiopian"),x("world-calendars/dist/calendars/hebrew"),x("world-calendars/dist/calendars/islamic"),x("world-calendars/dist/calendars/julian"),x("world-calendars/dist/calendars/mayan"),x("world-calendars/dist/calendars/nanakshahi"),x("world-calendars/dist/calendars/nepali"),x("world-calendars/dist/calendars/persian"),x("world-calendars/dist/calendars/taiwan"),x("world-calendars/dist/calendars/thai"),x("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(x,ue,le){"use strict";var y=x("./calendars"),b=x("../../lib"),T=x("../../constants/numerical"),_=T.EPOCHJD,e=T.ONEDAY,o={valType:"enumerated",values:b.sortObjectKeys(y.calendars),editType:"calc",dflt:"gregorian"},a=function(m,u,w,c){var E={};return E[w]=o,b.coerce(m,u,E,w,c)},l={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},i={};function v(m){return i[m]||(i[m]=y.instance(m))}function h(m){return b.extendFlat({},o,{description:m})}function s(m){return"Sets the calendar system to use with `"+m+"` date data."}var d={xcalendar:h(s("x"))},p=b.extendFlat({},d,{ycalendar:h(s("y"))}),f=b.extendFlat({},p,{zcalendar:h(s("z"))}),g=h(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ue.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:f,surface:f,mesh3d:f,scattergl:p,ohlc:d,candlestick:d},layout:{calendar:h(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:g},yaxis:{calendar:g},scene:{xaxis:{calendar:g},yaxis:{calendar:g},zaxis:{calendar:g}},polar:{radialaxis:{calendar:g}}},transforms:{filter:{valuecalendar:h(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:h(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:a,handleTraceDefaults:function(m,u,w,c){for(var E=0;E<w.length;E++)a(m,u,w[E]+"calendar",c.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:v,worldCalFmt:function(m,u,w){for(var c,E,M,S,C,O=Math.floor((u+.05)/e)+_,I=v(w).fromJD(O),N=0;-1!==(N=m.indexOf("%",N));)"0"===(c=m.charAt(N+1))||"-"===c||"_"===c?(M=3,E=m.charAt(N+2),"_"===c&&(c="-")):(E=c,c="0",M=2),(S=l[E])?(C="##"===S?"##":I.formatDate(S[c]),m=m.substr(0,N)+C+m.substr(N+M),N+=C.length):N+=M;return m}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(x,ue,le){"use strict";le.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],le.defaultLine="#444",le.lightLine="#eee",le.background="#fff",le.borderLine="#BEC8D9",le.lightFraction=1e3/11},{}],366:[function(x,ue,le){"use strict";var y=x("tinycolor2"),b=x("fast-isnumeric"),T=x("../../lib/array").isTypedArray,_=ue.exports={},e=x("./attributes");_.defaults=e.defaults;var o=_.defaultLine=e.defaultLine;_.lightLine=e.lightLine;var a=_.background=e.background;function l(i){if(b(i)||"string"!=typeof i)return i;var v=i.trim();if("rgb"!==v.substr(0,3))return i;var h=v.match(/^rgba?\s*\(([^()]*)\)$/);if(!h)return i;var s=h[1].trim().split(/\s*[\s,]\s*/),d="a"===v.charAt(3)&&4===s.length;if(!d&&3!==s.length)return i;for(var p=0;p<s.length;p++){if(!(s[p].length&&(s[p]=Number(s[p]),s[p]>=0)))return i;if(3===p)s[p]>1&&(s[p]=1);else if(s[p]>=1)return i}var f=Math.round(255*s[0])+", "+Math.round(255*s[1])+", "+Math.round(255*s[2]);return d?"rgba("+f+", "+s[3]+")":"rgb("+f+")"}_.tinyRGB=function(i){var v=i.toRgb();return"rgb("+Math.round(v.r)+", "+Math.round(v.g)+", "+Math.round(v.b)+")"},_.rgb=function(i){return _.tinyRGB(y(i))},_.opacity=function(i){return i?y(i).getAlpha():0},_.addOpacity=function(i,v){var h=y(i).toRgb();return"rgba("+Math.round(h.r)+", "+Math.round(h.g)+", "+Math.round(h.b)+", "+v+")"},_.combine=function(i,v){var h=y(i).toRgb();if(1===h.a)return y(i).toRgbString();var s=y(v||a).toRgb(),d=1===s.a?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a};return y({r:d.r*(1-h.a)+h.r*h.a,g:d.g*(1-h.a)+h.g*h.a,b:d.b*(1-h.a)+h.b*h.a}).toRgbString()},_.contrast=function(i,v,h){var s=y(i);return 1!==s.getAlpha()&&(s=y(_.combine(i,a))),(s.isDark()?v?s.lighten(v):a:h?s.darken(h):o).toString()},_.stroke=function(i,v){var h=y(v);i.style({stroke:_.tinyRGB(h),"stroke-opacity":h.getAlpha()})},_.fill=function(i,v){var h=y(v);i.style({fill:_.tinyRGB(h),"fill-opacity":h.getAlpha()})},_.clean=function(i){if(i&&"object"==typeof i){var v,h,s,d,p=Object.keys(i);for(v=0;v<p.length;v++)if(d=i[s=p[v]],"color"===s.substr(s.length-5))if(Array.isArray(d))for(h=0;h<d.length;h++)d[h]=l(d[h]);else i[s]=l(d);else if("colorscale"===s.substr(s.length-10)&&Array.isArray(d))for(h=0;h<d.length;h++)Array.isArray(d[h])&&(d[h][1]=l(d[h][1]));else if(Array.isArray(d)){var f=d[0];if(!Array.isArray(f)&&f&&"object"==typeof f)for(h=0;h<d.length;h++)_.clean(d[h])}else d&&"object"==typeof d&&!T(d)&&_.clean(d)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/layout_attributes"),b=x("../../plots/font_attributes"),T=x("../../lib/extend").extendFlat,_=x("../../plot_api/edit_types").overrideAll;ue.exports=_({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:y.linecolor,outlinewidth:y.linewidth,bordercolor:y.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:y.tickmode,nticks:y.nticks,tick0:y.tick0,dtick:y.dtick,tickvals:y.tickvals,ticktext:y.ticktext,ticks:T({},y.ticks,{dflt:""}),ticklabeloverflow:T({},y.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:y.ticklen,tickwidth:y.tickwidth,tickcolor:y.tickcolor,ticklabelstep:y.ticklabelstep,showticklabels:y.showticklabels,tickfont:b({}),tickangle:y.tickangle,tickformat:y.tickformat,tickformatstops:y.tickformatstops,tickprefix:y.tickprefix,showtickprefix:y.showtickprefix,ticksuffix:y.ticksuffix,showticksuffix:y.showticksuffix,separatethousands:y.separatethousands,exponentformat:y.exponentformat,minexponent:y.minexponent,showexponent:y.showexponent,title:{text:{valType:"string"},font:b({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:b({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(x,ue,le){"use strict";ue.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plot_api/plot_template"),T=x("../../plots/cartesian/tick_value_defaults"),_=x("../../plots/cartesian/tick_mark_defaults"),e=x("../../plots/cartesian/tick_label_defaults"),o=x("../../plots/cartesian/prefix_suffix_defaults"),a=x("./attributes");ue.exports=function(l,i,v){var h=b.newContainer(i,"colorbar"),s=l.colorbar||{};function d(O,I){return y.coerce(s,h,a,O,I)}var p=v.margin||{t:0,b:0,l:0,r:0},f=v.width-p.l-p.r,g=v.height-p.t-p.b,m="v"===d("orientation"),u=d("thicknessmode");d("thickness","fraction"===u?30/(m?f:g):30);var w=d("lenmode");d("len","fraction"===w?1:m?g:f),d("x",m?1.02:.5),d("xanchor",m?"left":"center"),d("xpad"),d("y",m?.5:1.02),d("yanchor",m?"middle":"bottom"),d("ypad"),y.noneOrAll(s,h,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var c=y.coerce(s,h,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:m?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",-1!==c.indexOf("inside")?"hide past domain":"hide past div"),T(s,h,d,"linear");var E=v.font,M={outerTicks:!1,font:E};-1!==c.indexOf("inside")&&(M.bgColor="black"),o(s,h,d,"linear",M),e(s,h,d,"linear",M),_(s,h,d,"linear",M),d("title.text",v._dfltTitle.colorbar);var S=h.tickfont,C=y.extendFlat({},S,{color:E.color,size:y.bigFont(S.size)});y.coerceFont(d,"title.font",C),d("title.side",m?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("tinycolor2"),T=x("../../plots/plots"),_=x("../../registry"),e=x("../../plots/cartesian/axes"),o=x("../dragelement"),a=x("../../lib"),l=a.strTranslate,i=x("../../lib/extend").extendFlat,v=x("../../lib/setcursor"),h=x("../drawing"),s=x("../color"),d=x("../titles"),p=x("../../lib/svg_text_utils"),f=x("../colorscale/helpers").flipScale,g=x("../../plots/cartesian/axis_defaults"),m=x("../../plots/cartesian/position_defaults"),u=x("../../plots/cartesian/layout_attributes"),w=x("../../constants/alignment"),c=w.LINE_SPACING,E=w.FROM_TL,M=w.FROM_BR,S=x("./constants").cn;ue.exports={draw:function(C){var O=C._fullLayout._infolayer.selectAll("g."+S.colorbar).data(function(I){var N,F,L,P,j=I._fullLayout,U=I.calcdata,$=[];function X(ne){return i(ne,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function te(){"function"==typeof P.calc?P.calc(I,L,N):(N._fillgradient=F.reversescale?f(F.colorscale):F.colorscale,N._zrange=[F[P.min],F[P.max]])}for(var ae=0;ae<U.length;ae++){var ee=(L=U[ae][0].trace)._module.colorbar;if(!0===L.visible&&ee)for(var se=Array.isArray(ee),G=se?ee:[ee],H=0;H<G.length;H++){var Y=(P=G[H]).container;(F=Y?L[Y]:L)&&F.showscale&&((N=X(F.colorbar))._id="cb"+L.uid+(se&&Y?"-"+Y:""),N._traceIndex=L.index,N._propPrefix=(Y?Y+".":"")+"colorbar.",N._meta=L._meta,te(),$.push(N))}}for(var oe in j._colorAxes)if((F=j[oe]).showscale){var W=j._colorAxes[oe];(N=X(F.colorbar))._id="cb"+oe,N._propPrefix=oe+".colorbar.",N._meta=j._meta,P={min:"cmin",max:"cmax"},"heatmap"!==W[0]&&(P.calc=(L=W[1])._module.colorbar.calc),te(),$.push(N)}return $}(C),function(I){return I._id});O.enter().append("g").attr("class",function(I){return I._id}).classed(S.colorbar,!0),O.each(function(I){var N=y.select(this);a.ensureSingle(N,"rect",S.cbbg),a.ensureSingle(N,"g",S.cbfills),a.ensureSingle(N,"g",S.cblines),a.ensureSingle(N,"g",S.cbaxis,function(L){L.classed(S.crisp,!0)}),a.ensureSingle(N,"g",S.cbtitleunshift,function(L){L.append("g").classed(S.cbtitle,!0)}),a.ensureSingle(N,"rect",S.cboutline);var L,P,j,U,$,X,te,ae,F=function(L,P,j){var U="v"===P.orientation,$=P.len,X=P.lenmode,te=P.thickness,ae=P.thicknessmode,J=P.outlinewidth,ee=P.borderwidth,se=P.bgcolor,G=P.xanchor,H=P.yanchor,Y=P.xpad,oe=P.ypad,W=P.x,ne=U?P.y:1-P.y,re=j._fullLayout,ce=re._size,fe=P._fillcolor,me=P._line,pe=P.title,we=pe.side,ye=P._zrange||y.extent(("function"==typeof fe?fe:me.color).domain()),Te="function"==typeof me.color?me.color:function(){return me.color},Le="function"==typeof fe?fe:function(){return fe},Oe=P._levels,Re=function(Mn,ln,Ee){var De,Ie,He=ln._levels,Ye=[],tt=[],ot=He.end+He.size/100,st=He.size,bt=1.001*Ee[0]-.001*Ee[1],wt=1.001*Ee[1]-.001*Ee[0];for(Ie=0;Ie<1e5&&(De=He.start+Ie*st,!(st>0?De>=ot:De<=ot));Ie++)De>bt&&De<wt&&Ye.push(De);if(ln._fillgradient)tt=[0];else if("function"==typeof ln._fillcolor){var Ut=ln._filllevels;if(Ut)for(ot=Ut.end+Ut.size/100,st=Ut.size,Ie=0;Ie<1e5&&(De=Ut.start+Ie*st,!(st>0?De>=ot:De<=ot));Ie++)De>Ee[0]&&De<Ee[1]&&tt.push(De);else(tt=Ye.map(function(Kt){return Kt-He.size/2})).push(tt[tt.length-1]+He.size)}else ln._fillcolor&&"string"==typeof ln._fillcolor&&(tt=[0]);return He.size<0&&(Ye.reverse(),tt.reverse()),{line:Ye,fill:tt}}(0,P,ye),Ve=Re.fill,_e=Re.line,Ae=Math.round(te*("fraction"===ae?U?ce.w:ce.h:1)),Fe=Ae/(U?ce.w:ce.h),Pe=Math.round($*("fraction"===X?U?ce.h:ce.w:1)),Be=Pe/(U?ce.h:ce.w),qe=Math.round(U?W*ce.w+Y:ne*ce.h+oe),We={center:.5,right:1}[G]||0,Je={top:1,middle:.5}[H]||0,ut=U?W-We*Fe:ne-Je*Fe,Ge=U?ne-Je*Be:W-We*Be,Ke=Math.round(U?ce.h*(1-Ge):ce.w*Ge);P._lenFrac=Be,P._thickFrac=Fe,P._uFrac=ut,P._vFrac=Ge;var nt=P._axis=function(Mn,ln,Ee){var De=Mn._fullLayout,Ie="v"===ln.orientation,He={type:"linear",range:Ee,tickmode:ln.tickmode,nticks:ln.nticks,tick0:ln.tick0,dtick:ln.dtick,tickvals:ln.tickvals,ticktext:ln.ticktext,ticks:ln.ticks,ticklen:ln.ticklen,tickwidth:ln.tickwidth,tickcolor:ln.tickcolor,showticklabels:ln.showticklabels,ticklabelposition:ln.ticklabelposition,ticklabeloverflow:ln.ticklabeloverflow,ticklabelstep:ln.ticklabelstep,tickfont:ln.tickfont,tickangle:ln.tickangle,tickformat:ln.tickformat,exponentformat:ln.exponentformat,minexponent:ln.minexponent,separatethousands:ln.separatethousands,showexponent:ln.showexponent,showtickprefix:ln.showtickprefix,tickprefix:ln.tickprefix,showticksuffix:ln.showticksuffix,ticksuffix:ln.ticksuffix,title:ln.title,showline:!0,anchor:"free",side:Ie?"right":"bottom",position:1},Ye=Ie?"y":"x",tt={type:"linear",_id:Ye+ln._id},ot={letter:Ye,font:De.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:De.calendar};function st(bt,wt){return a.coerce(He,tt,u,bt,wt)}return g(He,tt,st,ot,De),m(He,tt,st,ot),tt}(j,P,ye);nt.position=Fe+(U?W+Y/ce.w:ne+oe/ce.h);var it=-1!==["top","bottom"].indexOf(we);if(U&&it&&(nt.title.side=we,nt.titlex=W+Y/ce.w,nt.titley=Ge+("top"===pe.side?Be-oe/ce.h:oe/ce.h)),U||it||(nt.title.side=we,nt.titley=ne+oe/ce.h,nt.titlex=Ge+Y/ce.w),me.color&&"auto"===P.tickmode){nt.tickmode="linear",nt.tick0=Oe.start;var ht=Oe.size,Tt=a.constrain(Pe/50,4,15)+1,Ct=(ye[1]-ye[0])/((P.nticks||Tt)*ht);if(Ct>1){var Vt=Math.pow(10,Math.floor(Math.log(Ct)/Math.LN10));ht*=Vt*a.roundUp(Ct/Vt,[2,5,10]),(Math.abs(Oe.start)/Oe.size+1e-6)%1<2e-6&&(nt.tick0=0)}nt.dtick=ht}nt.domain=U?[Ge+oe/ce.h,Ge+Be-oe/ce.h]:[Ge+Y/ce.w,Ge+Be-Y/ce.w],nt.setScale(),L.attr("transform",l(Math.round(ce.l),Math.round(ce.t)));var Ft,gt=L.select("."+S.cbtitleunshift).attr("transform",l(-Math.round(ce.l),-Math.round(ce.t))),ft=nt.ticklabelposition,Bt=nt.title.font.size,rn=L.select("."+S.cbaxis),un=0,pn=0;function dn(Mn,ln){var Ee={propContainer:nt,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:re._dfltTitle.colorbar,containerGroup:L.select("."+S.cbtitle)},De="h"===Mn.charAt(0)?Mn.substr(1):"h"+Mn;L.selectAll("."+De+",."+De+"-math-group").remove(),d.draw(j,Mn,i(Ee,ln||{}))}return a.syncOrAsync([T.previousPromises,function(){var Mn,ln;(U&&it||!U&&!it)&&("top"===we&&(Mn=Y+ce.l+ce.w*W,ln=oe+ce.t+ce.h*(1-Ge-Be)+3+.75*Bt),"bottom"===we&&(Mn=Y+ce.l+ce.w*W,ln=oe+ce.t+ce.h*(1-Ge)-3-.25*Bt),"right"===we&&(ln=oe+ce.t+ce.h*ne+3+.75*Bt,Mn=Y+ce.l+ce.w*Ge),dn(nt._id+"title",{attributes:{x:Mn,y:ln,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!it||U&&it){var Mn,ln=L.select("."+S.cbtitle),Ee=ln.select("text"),De=[-J/2,J/2],Ie=ln.select(".h"+nt._id+"title-math-group").node(),He=15.6;if(Ee.node()&&(He=parseInt(Ee.node().style.fontSize,10)*c),Ie?(Mn=h.bBox(Ie),pn=Mn.width,(un=Mn.height)>He&&(De[1]-=(un-He)/2)):Ee.node()&&!Ee.classed(S.jsPlaceholder)&&(Mn=h.bBox(Ee.node()),pn=Mn.width,un=Mn.height),U){if(un){if(un+=5,"top"===we)nt.domain[1]-=un/ce.h,De[1]*=-1;else{nt.domain[0]+=un/ce.h;var Ye=p.lineCount(Ee);De[1]+=(1-Ye)*He}ln.attr("transform",l(De[0],De[1])),nt.setScale()}}else pn&&("right"===we&&(nt.domain[0]+=(pn+Bt/2)/ce.w),ln.attr("transform",l(De[0],De[1])),nt.setScale())}L.selectAll("."+S.cbfills+",."+S.cblines).attr("transform",U?l(0,Math.round(ce.h*(1-nt.domain[1]))):l(Math.round(ce.w*nt.domain[0]),0)),rn.attr("transform",U?l(0,Math.round(-ce.t)):l(Math.round(-ce.l),0));var tt=L.select("."+S.cbfills).selectAll("rect."+S.cbfill).attr("style","").data(Ve);tt.enter().append("rect").classed(S.cbfill,!0).style("stroke","none"),tt.exit().remove();var ot=ye.map(nt.c2p).map(Math.round).sort(function(Kt,vt){return Kt-vt});tt.each(function(Kt,vt){var Et=[0===vt?ye[0]:(Ve[vt]+Ve[vt-1])/2,vt===Ve.length-1?ye[1]:(Ve[vt]+Ve[vt+1])/2].map(nt.c2p).map(Math.round);U&&(Et[1]=a.constrain(Et[1]+(Et[1]>Et[0])?1:-1,ot[0],ot[1]));var $t=y.select(this).attr(U?"x":"y",qe).attr(U?"y":"x",y.min(Et)).attr(U?"width":"height",Math.max(Ae,2)).attr(U?"height":"width",Math.max(y.max(Et)-y.min(Et),2));if(P._fillgradient)h.gradient($t,j,P._id,U?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var Dt=Le(Kt).replace("e-","");$t.attr("fill",b(Dt).toHexString())}});var st=L.select("."+S.cblines).selectAll("path."+S.cbline).data(me.color&&me.width?_e:[]);st.enter().append("path").classed(S.cbline,!0),st.exit().remove(),st.each(function(Kt){var vt=qe,Et=Math.round(nt.c2p(Kt))+me.width/2%1;y.select(this).attr("d","M"+(U?vt+","+Et:Et+","+vt)+(U?"h":"v")+Ae).call(h.lineGroupStyle,me.width,Te(Kt),me.dash)}),rn.selectAll("g."+nt._id+"tick,path").remove();var bt=qe+Ae+(J||0)/2-("outside"===P.ticks?1:0),wt=e.calcTicks(nt),Ut=e.getTickSigns(nt)[2];return e.drawTicks(j,nt,{vals:"inside"===nt.ticks?e.clipEnds(nt,wt):wt,layer:rn,path:e.makeTickPath(nt,bt,Ut),transFn:e.makeTransTickFn(nt)}),e.drawLabels(j,nt,{vals:wt,layer:rn,transFn:e.makeTransTickLabelFn(nt),labelFns:e.makeLabelFns(nt,bt)})},function(){if(U&&!it||!U&&it){var Mn,ln,Ee=nt.position||0,De=nt._offset+nt._length/2;if("right"===we)ln=De,Mn=ce.l+ce.w*Ee+10+Bt*(nt.showticklabels?1:.5);else if(Mn=De,"bottom"===we&&(ln=ce.t+ce.h*Ee+10+(-1===ft.indexOf("inside")?nt.tickfont.size:0)+("intside"!==nt.ticks&&P.ticklen||0)),"top"===we){var Ie=pe.text.split("<br>").length;ln=ce.t+ce.h*Ee+10-Ae-c*Bt*Ie}dn((U?"h":"v")+nt._id+"title",{avoid:{selection:y.select(j).selectAll("g."+nt._id+"tick"),side:we,offsetTop:U?0:ce.t,offsetLeft:U?ce.l:0,maxShift:U?re.width:re.height},attributes:{x:Mn,y:ln,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},T.previousPromises,function(){var Mn,ln=Ae+J/2;-1===ft.indexOf("inside")&&(Mn=h.bBox(rn.node()),ln+=U?Mn.width:Mn.height),Ft=gt.select("text");var Ee=0,De=U&&"top"===we,Ie=!U&&"right"===we,He=0;if(Ft.node()&&!Ft.classed(S.jsPlaceholder)){var Ye,tt=gt.select(".h"+nt._id+"title-math-group").node();tt&&(U&&it||!U&&!it)?(Ee=(Mn=h.bBox(tt)).width,Ye=Mn.height):(Ee=(Mn=h.bBox(gt.node())).right-ce.l-(U?qe:Ke),Ye=Mn.bottom-ce.t-(U?Ke:qe),U||"top"!==we||(ln+=Mn.height,He=Mn.height)),Ie&&(Ft.attr("transform",l(Ee/2+Bt/2,0)),Ee*=2),ln=Math.max(ln,U?Ee:Ye)}var ot=2*(U?Y:oe)+ln+ee+J/2,st=0;!U&&pe.text&&"bottom"===H&&ne<=0&&(ot+=st=ot/2,He+=st),re._hColorbarMoveTitle=st,re._hColorbarMoveCBTitle=He;var bt=ee+J;L.select("."+S.cbbg).attr("x",(U?qe:Ke)-bt/2-(U?Y:0)).attr("y",(U?Ke:qe)-(U?Pe:oe+He-st)).attr(U?"width":"height",Math.max(ot-st,2)).attr(U?"height":"width",Math.max(Pe+bt,2)).call(s.fill,se).call(s.stroke,P.bordercolor).style("stroke-width",ee);var wt=Ie?Math.max(Ee-10,0):0;if(L.selectAll("."+S.cboutline).attr("x",(U?qe:Ke+Y)+wt).attr("y",(U?Ke+oe-Pe:qe)+(De?un:0)).attr(U?"width":"height",Math.max(Ae,2)).attr(U?"height":"width",Math.max(Pe-(U?2*oe+un:2*Y+wt),2)).call(s.stroke,P.outlinecolor).style({fill:"none","stroke-width":J}),L.attr("transform",l(ce.l-(U?We*ot:0),ce.t-(U?0:(1-Je)*ot-He))),!U&&(ee||b(se).getAlpha()&&!b.equals(re.paper_bgcolor,se))){var Ut=rn.selectAll("text"),Kt=Ut[0].length,vt=L.select("."+S.cbbg).node(),Et=h.bBox(vt),$t=h.getTranslate(L);Ut.each(function(jt,Qt){var fn=Kt-1;if(0===Qt||Qt===fn){var an,Sn=h.bBox(this),Yn=h.getTranslate(this);Qt===fn?(an=Et.right+$t.x+Ke-ee-2+W-(Sn.right+Yn.x))>0&&(an=0):0===Qt&&(an=Et.left+$t.x+Ke+ee+2-(Sn.left+Yn.x))<0&&(an=0),an&&(Kt<3?this.setAttribute("transform","translate("+an+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Dt={},Pt=E[G],je=M[G],rt=E[H],pt=M[H],It=ot-Ae;U?("pixels"===X?(Dt.y=ne,Dt.t=Pe*rt,Dt.b=Pe*pt):(Dt.t=Dt.b=0,Dt.yt=ne+$*rt,Dt.yb=ne-$*pt),"pixels"===ae?(Dt.x=W,Dt.l=ot*Pt,Dt.r=ot*je):(Dt.l=It*Pt,Dt.r=It*je,Dt.xl=W-te*Pt,Dt.xr=W+te*je)):("pixels"===X?(Dt.x=W,Dt.l=Pe*Pt,Dt.r=Pe*je):(Dt.l=Dt.r=0,Dt.xl=W+$*Pt,Dt.xr=W-$*je),"pixels"===ae?(Dt.y=1-ne,Dt.t=ot*rt,Dt.b=ot*pt):(Dt.t=It*rt,Dt.b=It*pt,Dt.yt=ne-te*rt,Dt.yb=ne+te*pt)),T.autoMargin(j,P._id,Dt)}],j)}(N,I,C);F&&F.then&&(C._promises||[]).push(F),C._context.edits.colorbarPosition&&(te="v"===(P=I).orientation,ae=(j=C)._fullLayout._size,o.init({element:(L=N).node(),gd:j,prepFn:function(){U=L.attr("transform"),v(L)},moveFn:function(J,ee){L.attr("transform",U+l(J,ee)),$=o.align((te?P._uFrac:P._vFrac)+J/ae.w,te?P._thickFrac:P._lenFrac,0,1,P.xanchor),X=o.align((te?P._vFrac:1-P._uFrac)-ee/ae.h,te?P._lenFrac:P._thickFrac,0,1,P.yanchor);var se=o.getCursor($,X,P.xanchor,P.yanchor);v(L,se)},doneFn:function(){if(v(L),void 0!==$&&void 0!==X){var J={};J[P._propPrefix+"x"]=$,J[P._propPrefix+"y"]=X,void 0!==P._traceIndex?_.call("_guiRestyle",j,J,P._traceIndex):_.call("_guiRelayout",j,J)}}}))}),O.exit().each(function(I){T.autoMargin(C,I._id)}).remove(),O.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b){return y.isPlainObject(b.colorbar)}},{"../../lib":503}],372:[function(x,ue,le){"use strict";ue.exports={moduleType:"component",name:"colorbar",attributes:x("./attributes"),supplyDefaults:x("./defaults"),draw:x("./draw").draw,hasColorbar:x("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(x,ue,le){"use strict";var y=x("../colorbar/attributes"),b=x("../../lib/regex").counter,T=x("../../lib/sort_object_keys"),_=x("./scales.js").scales;function e(o){return"`"+o+"`"}T(_),ue.exports=function(o,a){o=o||"";var l,i=(a=a||{}).cLetter||"c",v=("onlyIfNumerical"in a||Boolean(o),"noScale"in a?a.noScale:"marker.line"===o),h="showScaleDflt"in a?a.showScaleDflt:"z"===i,s="string"==typeof a.colorscaleDflt?_[a.colorscaleDflt]:null,d=a.editTypeOverride||"",p=o?o+".":"";"colorAttr"in a?l=a.colorAttr:e(p+(l={z:"z",c:"color"}[i]));var f=i+"auto",g=i+"min",m=i+"max",u=i+"mid",w=(e(p+f),e(p+g),e(p+m),{});w[g]=w[m]=void 0;var c={};c[f]=!1;var E={};return"color"===l&&(E.color={valType:"color",arrayOk:!0,editType:d||"style"},a.anim&&(E.color.anim=!0)),E[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:w},E[g]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:c},E[m]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:c},E[u]={valType:"number",dflt:null,editType:"calc",impliedEdits:w},E.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},E.autocolorscale={valType:"boolean",dflt:!1!==a.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},E.reversescale={valType:"boolean",dflt:!1,editType:"plot"},v||(E.showscale={valType:"boolean",dflt:h,editType:"calc"},E.colorbar=y),a.noColorAxis||(E.coloraxis={valType:"subplotid",regex:b("coloraxis"),dflt:null,editType:"calc"}),E}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("./helpers").extractOpts;ue.exports=function(_,e,o){var l=_._fullLayout,i=o.vals,v=o.containerStr,h=v?b.nestedProperty(e,v).get():e,s=T(h),d=!1!==s.auto,p=s.min,f=s.max,g=s.mid,m=function(){return b.aggNums(Math.min,null,i)},u=function(){return b.aggNums(Math.max,null,i)};void 0===p?p=m():d&&(p=h._colorAx&&y(p)?Math.min(p,m()):m()),void 0===f?f=u():d&&(f=h._colorAx&&y(f)?Math.max(f,u()):u()),d&&void 0!==g&&(f-g>g-p?p=g-(f-g):f-g<g-p&&(f=g+(g-p))),p===f&&(p-=.5,f+=.5),s._sync("min",p),s._sync("max",f),s.autocolorscale&&s._sync("colorscale",p*f<0?l.colorscale.diverging:p>=0?l.colorscale.sequential:l.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./helpers").hasColorscale,T=x("./helpers").extractOpts;ue.exports=function(_,e){function o(d,p){var f=d["_"+p];void 0!==f&&(d[p]=f)}function a(d,p){var f=p.container?y.nestedProperty(d,p.container).get():d;if(f)if(f.coloraxis)f._colorAx=e[f.coloraxis];else{var g=T(f),m=g.auto;(m||void 0===g.min)&&o(f,p.min),(m||void 0===g.max)&&o(f,p.max),g.autocolorscale&&o(f,"colorscale")}}for(var l=0;l<_.length;l++){var i=_[l],v=i._module.colorbar;if(v)if(Array.isArray(v))for(var h=0;h<v.length;h++)a(i,v[h]);else a(i,v);b(i,"marker.line")&&a(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var s in e._colorAxes)a(e[s],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../colorbar/has_colorbar"),_=x("../colorbar/defaults"),e=x("./scales").isValid,o=x("../../registry").traceIs;function a(l,i){var v=i.slice(0,i.length-1);return i?b.nestedProperty(l,v).get()||{}:l}ue.exports=function l(i,v,h,s,d){var p=d.prefix,f=d.cLetter,g="_module"in v,m=a(i,p),u=a(v,p),w=a(v._template||{},p)||{},c=function(){return delete i.coloraxis,delete v.coloraxis,l(i,v,h,s,d)};if(g){var E=h._colorAxes||{},M=s(p+"coloraxis");if(M){var S=o(v,"contour")&&b.nestedProperty(v,"contours.coloring").get()||"heatmap",C=E[M];return void(C?(C[2].push(c),C[0]!==S&&(C[0]=!1,b.warn(["Ignoring coloraxis:",M,"setting","as it is linked to incompatible colorscales."].join(" ")))):E[M]=[S,v,[c]])}}var O=m[f+"min"],I=m[f+"max"],N=y(O)&&y(I)&&O<I;s(p+f+"auto",!N)?s(p+f+"mid"):(s(p+f+"min"),s(p+f+"max"));var F,L,P=m.colorscale,j=w.colorscale;void 0!==P&&(F=!e(P)),void 0!==j&&(F=!e(j)),s(p+"autocolorscale",F),s(p+"colorscale"),s(p+"reversescale"),"marker.line."!==p&&(p&&g&&(L=T(m)),s(p+"showscale",L)&&(p&&w&&(u._template=w),_(m,u,h)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("tinycolor2"),T=x("fast-isnumeric"),_=x("../../lib"),e=x("../color"),o=x("./scales").isValid,a=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function i(p){var f,g,m,u=p._colorAx,w=u||p,c={};for(g=0;g<a.length;g++)c[m=a[g]]=w[m];if(u)for(f="c",g=0;g<l.length;g++)c[m=l[g]]=w["c"+m];else{var E;for(g=0;g<l.length;g++)((E="c"+(m=l[g]))in w||(E="z"+m)in w)&&(c[m]=w[E]);f=E.charAt(0)}return c._sync=function(M,S){var C=-1!==l.indexOf(M)?f+M:M;w[C]=w["_"+C]=S},c}function v(p){for(var f=i(p),g=f.min,m=f.max,u=f.reversescale?h(f.colorscale):f.colorscale,w=u.length,c=new Array(w),E=new Array(w),M=0;M<w;M++){var S=u[M];c[M]=g+S[0]*(m-g),E[M]=S[1]}return{domain:c,range:E}}function h(p){for(var f=p.length,g=new Array(f),m=f-1,u=0;m>=0;m--,u++){var w=p[m];g[u]=[1-w[0],w[1]]}return g}function s(p,f){f=f||{};for(var g=p.domain,m=p.range,u=m.length,w=new Array(u),c=0;c<u;c++){var E=b(m[c]).toRgb();w[c]=[E.r,E.g,E.b,E.a]}var M,S=y.scale.linear().domain(g).range(w).clamp(!0),C=f.noNumericCheck,O=f.returnArray;return(M=C&&O?S:C?function(I){return d(S(I))}:O?function(I){return T(I)?S(I):b(I).isValid()?I:e.defaultLine}:function(I){return T(I)?d(S(I)):b(I).isValid()?I:e.defaultLine}).domain=S.domain,M.range=function(){return m},M}function d(p){return b({r:p[0],g:p[1],b:p[2],a:p[3]}).toRgbString()}ue.exports={hasColorscale:function(p,f,g){var m=f?_.nestedProperty(p,f).get()||{}:p,u=m[g||"color"],w=!1;if(_.isArrayOrTypedArray(u))for(var c=0;c<u.length;c++)if(T(u[c])){w=!0;break}return _.isPlainObject(m)&&(w||!0===m.showscale||T(m.cmin)&&T(m.cmax)||o(m.colorscale)||_.isPlainObject(m.colorbar))},extractOpts:i,extractScale:v,flipScale:h,makeColorScaleFunc:s,makeColorScaleFuncFromTrace:function(p,f){return s(v(p),f)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(x,ue,le){"use strict";var y=x("./scales"),b=x("./helpers");ue.exports={moduleType:"component",name:"colorscale",attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),handleDefaults:x("./defaults"),crossTraceDefaults:x("./cross_trace_defaults"),calc:x("./calc"),scales:y.scales,defaultScale:y.defaultScale,getScale:y.get,isValidScale:y.isValid,hasColorscale:b.hasColorscale,extractOpts:b.extractOpts,extractScale:b.extractScale,flipScale:b.flipScale,makeColorScaleFunc:b.makeColorScaleFunc,makeColorScaleFuncFromTrace:b.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(x,ue,le){"use strict";var y=x("../../lib/extend").extendFlat,b=x("./attributes"),T=x("./scales").scales;ue.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:T.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:T.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:T.RdBu,editType:"calc"}},coloraxis:y({_isSubplotObj:!0,editType:"calc"},b("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plot_api/plot_template"),T=x("./layout_attributes"),_=x("./defaults");ue.exports=function(e,o){function a(f,g){return y.coerce(e,o,T,f,g)}a("colorscale.sequential"),a("colorscale.sequentialminus"),a("colorscale.diverging");var l,i,v=o._colorAxes;function h(f,g){return y.coerce(l,i,T.coloraxis,f,g)}for(var s in v){var d=v[s];if(d[0])l=e[s]||{},(i=b.newContainer(o,s,"coloraxis"))._name=s,_(l,i,o,h,{prefix:"",cLetter:"c"});else{for(var p=0;p<d[2].length;p++)d[2][p]();delete o._colorAxes[s]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(x,ue,le){"use strict";var y=x("tinycolor2"),b={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},T=b.RdBu;function _(e){var o=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var a=0;a<e.length;a++){var l=e[a];if(2!==l.length||+l[0]<o||!y(l[1]).isValid())return!1;o=+l[0]}return!0}ue.exports={scales:b,defaultScale:T,get:function(e,o){if(o||(o=T),!e)return o;function a(){try{e=b[e]||JSON.parse(e)}catch(l){e=o}}return"string"==typeof e&&(a(),"string"==typeof e&&a()),_(e)?e:o},isValid:function(e){return void 0!==b[e]||_(e)}}},{tinycolor2:312}],382:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_,e){var o=(y-T)/(_-T),a=o+b/(_-T),l=(o+a)/2;return"left"===e||"bottom"===e?o:"center"===e||"middle"===e?l:"right"===e||"top"===e?a:o<2/3-l?o:a>4/3-l?a:l}},{}],383:[function(x,ue,le){"use strict";var y=x("../../lib"),b=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ue.exports=function(T,_,e,o){return T="left"===e?0:"center"===e?1:"right"===e?2:y.constrain(Math.floor(3*T),0,2),_="bottom"===o?0:"middle"===o?1:"top"===o?2:y.constrain(Math.floor(3*_),0,2),b[_][T]}},{"../../lib":503}],384:[function(x,ue,le){"use strict";le.selectMode=function(y){return"lasso"===y||"select"===y},le.drawMode=function(y){return"drawclosedpath"===y||"drawopenpath"===y||"drawline"===y||"drawrect"===y||"drawcircle"===y},le.openMode=function(y){return"drawline"===y||"drawopenpath"===y},le.rectMode=function(y){return"select"===y||"drawline"===y||"drawrect"===y||"drawcircle"===y},le.freeMode=function(y){return"lasso"===y||"drawclosedpath"===y||"drawopenpath"===y},le.selectingOrDrawing=function(y){return le.freeMode(y)||le.rectMode(y)}},{}],385:[function(x,ue,le){"use strict";var y=x("mouse-event-offset"),b=x("has-hover"),T=x("has-passive-events"),_=x("../../lib").removeElement,e=x("../../plots/cartesian/constants"),o=ue.exports={};o.align=x("./align"),o.getCursor=x("./cursor");var a=x("./unhover");function l(){var v=document.createElement("div");v.className="dragcover";var h=v.style;return h.position="fixed",h.left=0,h.right=0,h.top=0,h.bottom=0,h.zIndex=999999999,h.background="none",document.body.appendChild(v),v}function i(v){return y(v.changedTouches?v.changedTouches[0]:v,document.body)}o.unhover=a.wrapped,o.unhoverRaw=a.raw,o.init=function(v){var h,s,d,p,f,g,m,u,w=v.gd,c=1,E=w._context.doubleClickDelay,M=v.element;w._mouseDownTime||(w._mouseDownTime=0),M.style.pointerEvents="all",M.onmousedown=C,T?(M._ontouchstart&&M.removeEventListener("touchstart",M._ontouchstart),M._ontouchstart=C,M.addEventListener("touchstart",C,{passive:!1})):M.ontouchstart=C;var S=v.clampFn||function(N,F,L){return Math.abs(N)<L&&(N=0),Math.abs(F)<L&&(F=0),[N,F]};function C(N){w._dragged=!1,w._dragging=!0;var F=i(N);h=F[0],s=F[1],m=N.target,g=N,u=2===N.buttons||N.ctrlKey,void 0===N.clientX&&void 0===N.clientY&&(N.clientX=h,N.clientY=s),(d=(new Date).getTime())-w._mouseDownTime<E?c+=1:(c=1,w._mouseDownTime=d),v.prepFn&&v.prepFn(N,h,s),b&&!u?(f=l()).style.cursor=window.getComputedStyle(M).cursor:b||(f=document,p=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(M).cursor),document.addEventListener("mouseup",I),document.addEventListener("touchend",I),!1!==v.dragmode&&(N.preventDefault(),document.addEventListener("mousemove",O),document.addEventListener("touchmove",O,{passive:!1}))}function O(N){N.preventDefault();var F=i(N),P=S(F[0]-h,F[1]-s,v.minDrag||e.MINDRAG),j=P[0],U=P[1];(j||U)&&(w._dragged=!0,o.unhover(w,N)),w._dragged&&v.moveFn&&!u&&(w._dragdata={element:M,dx:j,dy:U},v.moveFn(j,U))}function I(N){if(delete w._dragdata,!1!==v.dragmode&&(N.preventDefault(),document.removeEventListener("mousemove",O),document.removeEventListener("touchmove",O)),document.removeEventListener("mouseup",I),document.removeEventListener("touchend",I),b?_(f):p&&(f.documentElement.style.cursor=p,p=null),w._dragging){if(w._dragging=!1,(new Date).getTime()-w._mouseDownTime>E&&(c=Math.max(c-1,1)),w._dragged)v.doneFn&&v.doneFn();else if(v.clickFn&&v.clickFn(c,g),!u){var F;try{F=new MouseEvent("click",N)}catch(P){var L=i(N);(F=document.createEvent("MouseEvents")).initMouseEvent("click",N.bubbles,N.cancelable,N.view,N.detail,N.screenX,N.screenY,L[0],L[1],N.ctrlKey,N.altKey,N.shiftKey,N.metaKey,N.button,N.relatedTarget)}m.dispatchEvent(F)}w._dragging=!1,w._dragged=!1}else w._dragged=!1}},o.coverSlip=l},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(x,ue,le){"use strict";var y=x("../../lib/events"),b=x("../../lib/throttle"),T=x("../../lib/dom").getGraphDiv,_=x("../fx/constants"),e=ue.exports={};e.wrapped=function(o,a,l){(o=T(o))._fullLayout&&b.clear(o._fullLayout._uid+_.HOVERID),e.raw(o,a,l)},e.raw=function(o,a){var l=o._fullLayout,i=o._hoverdata;a||(a={}),a.target&&!o._dragged&&!1===y.triggerHandler(o,"plotly_beforehover",a)||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),o._hoverdata=void 0,a.target&&i&&o.emit("plotly_unhover",{event:a,points:i}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(x,ue,le){"use strict";le.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},le.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=b.numberFormat,_=x("fast-isnumeric"),e=x("tinycolor2"),o=x("../../registry"),a=x("../color"),l=x("../colorscale"),i=b.strTranslate,v=x("../../lib/svg_text_utils"),h=x("../../constants/xmlns_namespaces"),s=x("../../constants/alignment").LINE_SPACING,d=x("../../constants/interactions").DESELECTDIM,p=x("../../traces/scatter/subtypes"),f=x("../../traces/scatter/make_bubble_size_func"),g=x("../../components/fx/helpers").appendArrayPointValue,m=ue.exports={};function u(J,ee,se){var G=ee.fillpattern,H=G&&m.getPatternAttr(G.shape,0,"");if(H){var Y=m.getPatternAttr(G.bgcolor,0,null),oe=m.getPatternAttr(G.fgcolor,0,null),W=G.fgopacity,ne=m.getPatternAttr(G.size,0,8),re=m.getPatternAttr(G.solidity,0,.3);m.pattern(J,"point",se,ee.uid,H,ne,re,void 0,G.fillmode,Y,oe,W)}else ee.fillcolor&&J.call(a.fill,ee.fillcolor)}m.font=function(J,ee,se,G){b.isPlainObject(ee)&&(G=ee.color,se=ee.size,ee=ee.family),ee&&J.style("font-family",ee),se+1&&J.style("font-size",se+"px"),G&&J.call(a.fill,G)},m.setPosition=function(J,ee,se){J.attr("x",ee).attr("y",se)},m.setSize=function(J,ee,se){J.attr("width",ee).attr("height",se)},m.setRect=function(J,ee,se,G,H){J.call(m.setPosition,ee,se).call(m.setSize,G,H)},m.translatePoint=function(J,ee,se,G){var H=se.c2p(J.x),Y=G.c2p(J.y);return!!(_(H)&&_(Y)&&ee.node())&&("text"===ee.node().nodeName?ee.attr("x",H).attr("y",Y):ee.attr("transform",i(H,Y)),!0)},m.translatePoints=function(J,ee,se){J.each(function(G){var H=y.select(this);m.translatePoint(G,H,ee,se)})},m.hideOutsideRangePoint=function(J,ee,se,G,H,Y){ee.attr("display",se.isPtWithinRange(J,H)&&G.isPtWithinRange(J,Y)?null:"none")},m.hideOutsideRangePoints=function(J,ee){if(ee._hasClipOnAxisFalse){var se=ee.xaxis,G=ee.yaxis;J.each(function(H){var Y=H[0].trace,oe=Y.xcalendar,W=Y.ycalendar,ne=o.traceIs(Y,"bar-like")?".bartext":".point,.textpoint";J.selectAll(ne).each(function(re){m.hideOutsideRangePoint(re,y.select(this),se,G,oe,W)})})}},m.crispRound=function(J,ee,se){return ee&&_(ee)?J._context.staticPlot?ee:ee<1?1:Math.round(ee):se||0},m.singleLineStyle=function(J,ee,se,G,H){ee.style("fill","none");var Y=(((J||[])[0]||{}).trace||{}).line||{},oe=se||Y.width||0,W=H||Y.dash||"";a.stroke(ee,G||Y.color),m.dashLine(ee,W,oe)},m.lineGroupStyle=function(J,ee,se,G){J.style("fill","none").each(function(H){var Y=(((H||[])[0]||{}).trace||{}).line||{},oe=ee||Y.width||0,W=G||Y.dash||"";y.select(this).call(a.stroke,se||Y.color).call(m.dashLine,W,oe)})},m.dashLine=function(J,ee,se){ee=m.dashStyle(ee,se=+se||0),J.style({"stroke-dasharray":ee,"stroke-width":se+"px"})},m.dashStyle=function(J,ee){ee=+ee||1;var se=Math.max(ee,3);return"solid"===J?J="":"dot"===J?J=se+"px,"+se+"px":"dash"===J?J=3*se+"px,"+3*se+"px":"longdash"===J?J=5*se+"px,"+5*se+"px":"dashdot"===J?J=3*se+"px,"+se+"px,"+se+"px,"+se+"px":"longdashdot"===J&&(J=5*se+"px,"+2*se+"px,"+se+"px,"+2*se+"px"),J},m.singleFillStyle=function(J,ee){var se=y.select(J.node());u(J,((se.data()[0]||[])[0]||{}).trace||{},ee)},m.fillGroupStyle=function(J,ee){J.style("stroke-width",0).each(function(se){var G=y.select(this);se[0].trace&&u(G,se[0].trace,ee)})};var w=x("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(w).forEach(function(J){var ee=w[J],se=ee.n;m.symbolList.push(se,String(se),J,se+100,String(se+100),J+"-open"),m.symbolNames[se]=J,m.symbolFuncs[se]=ee.f,ee.needLine&&(m.symbolNeedLines[se]=!0),ee.noDot?m.symbolNoDot[se]=!0:m.symbolList.push(se+200,String(se+200),J+"-dot",se+300,String(se+300),J+"-open-dot"),ee.noFill&&(m.symbolNoFill[se]=!0)});var c=m.symbolNames.length;function E(J,ee){return m.symbolFuncs[J%100](ee)+(J>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(J){if(_(J))J=+J;else if("string"==typeof J){var ee=0;J.indexOf("-open")>0&&(ee=100,J=J.replace("-open","")),J.indexOf("-dot")>0&&(ee+=200,J=J.replace("-dot","")),(J=m.symbolNames.indexOf(J))>=0&&(J+=ee)}return J%100>=c||J>=400?0:Math.floor(Math.max(J,0))};var M={x1:1,x2:0,y1:0,y2:0},S={x1:0,x2:0,y1:1,y2:0},C=T("~f"),O={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:M},horizontalreversed:{node:"linearGradient",attrs:M,reversed:!0},vertical:{node:"linearGradient",attrs:S},verticalreversed:{node:"linearGradient",attrs:S,reversed:!0}};m.gradient=function(J,ee,se,G,H,Y){for(var oe=H.length,W=O[G],ne=new Array(oe),re=0;re<oe;re++)W.reversed?ne[oe-1-re]=[C(100*(1-H[re][0])),H[re][1]]:ne[re]=[C(100*H[re][0]),H[re][1]];var ce=ee._fullLayout,fe="g"+ce._uid+"-"+se,me=ce._defs.select(".gradients").selectAll("#"+fe).data([G+ne.join(";")],b.identity);me.exit().remove(),me.enter().append(W.node).each(function(){var pe=y.select(this);W.attrs&&pe.attr(W.attrs),pe.attr("id",fe);var we=pe.selectAll("stop").data(ne);we.exit().remove(),we.enter().append("stop"),we.each(function(ye){var Te=e(ye[1]);y.select(this).attr({offset:ye[0]+"%","stop-color":a.tinyRGB(Te),"stop-opacity":Te.getAlpha()})})}),J.style(Y,X(fe,ee)).style(Y+"-opacity",null),J.classed("gradient_filled",!0)},m.pattern=function(J,ee,se,G,H,Y,oe,W,ne,re,ce,fe){var me="legend"===ee;W&&("overlay"===ne?ce=a.contrast(re=W):(re=void 0,ce=W));var pe,we,ye,Te,Le,Oe,Re,Ve,Ae,Pe=se._fullLayout,Be="p"+Pe._uid+"-"+G,qe={};switch(H){case"/":pe=Y*Math.sqrt(2),we=Y*Math.sqrt(2),Oe="path",qe={d:ye="M-"+pe/4+","+we/4+"l"+pe/2+",-"+we/2+"M0,"+we+"L"+pe+",0M"+pe/4*3+","+we/4*5+"l"+pe/2+",-"+we/2,opacity:fe,stroke:ce,"stroke-width":(Te=oe*Y)+"px"};break;case"\\":pe=Y*Math.sqrt(2),we=Y*Math.sqrt(2),Oe="path",qe={d:ye="M"+pe/4*3+",-"+we/4+"l"+pe/2+","+we/2+"M0,0L"+pe+","+we+"M-"+pe/4+","+we/4*3+"l"+pe/2+","+we/2,opacity:fe,stroke:ce,"stroke-width":(Te=oe*Y)+"px"};break;case"x":pe=Y*Math.sqrt(2),we=Y*Math.sqrt(2),ye="M-"+pe/4+","+we/4+"l"+pe/2+",-"+we/2+"M0,"+we+"L"+pe+",0M"+pe/4*3+","+we/4*5+"l"+pe/2+",-"+we/2+"M"+pe/4*3+",-"+we/4+"l"+pe/2+","+we/2+"M0,0L"+pe+","+we+"M-"+pe/4+","+we/4*3+"l"+pe/2+","+we/2,Te=Y-Y*Math.sqrt(1-oe),Oe="path",qe={d:ye,opacity:fe,stroke:ce,"stroke-width":Te+"px"};break;case"|":Oe="path",Oe="path",qe={d:ye="M"+(pe=Y)/2+",0L"+pe/2+","+(we=Y),opacity:fe,stroke:ce,"stroke-width":(Te=oe*Y)+"px"};break;case"-":Oe="path",Oe="path",qe={d:ye="M0,"+(we=Y)/2+"L"+(pe=Y)+","+we/2,opacity:fe,stroke:ce,"stroke-width":(Te=oe*Y)+"px"};break;case"+":Oe="path",ye="M"+(pe=Y)/2+",0L"+pe/2+","+(we=Y)+"M0,"+we/2+"L"+pe+","+we/2,Te=Y-Y*Math.sqrt(1-oe),Oe="path",qe={d:ye,opacity:fe,stroke:ce,"stroke-width":Te+"px"};break;case".":pe=Y,we=Y,oe<Math.PI/4?Le=Math.sqrt(oe*Y*Y/Math.PI):(Re=oe,Ve=Math.PI/4,1,Le=(Ae=Y/2)+(Y/Math.sqrt(2)-Ae)*(Re-Ve)/(1-Ve)),Oe="circle",qe={cx:pe/2,cy:we/2,r:Le,opacity:fe,fill:ce}}var We=[H||"noSh",re||"noBg",ce||"noFg",Y,oe].join(";"),Je=Pe._defs.select(".patterns").selectAll("#"+Be).data([We],b.identity);Je.exit().remove(),Je.enter().append("pattern").each(function(){var ut=y.select(this);if(ut.attr({id:Be,width:pe+"px",height:we+"px",patternUnits:"userSpaceOnUse",patternTransform:me?"scale(0.8)":""}),re){var Ge=ut.selectAll("rect").data([0]);Ge.exit().remove(),Ge.enter().append("rect").attr({width:pe+"px",height:we+"px",fill:re})}var Ke=ut.selectAll(Oe).data([0]);Ke.exit().remove(),Ke.enter().append(Oe).attr(qe)}),J.style("fill",X(Be,se)).style("fill-opacity",null),J.classed("pattern_filled",!0)},m.initGradients=function(J){b.ensureSingle(J._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),y.select(J).selectAll(".gradient_filled").classed("gradient_filled",!1)},m.initPatterns=function(J){b.ensureSingle(J._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),y.select(J).selectAll(".pattern_filled").classed("pattern_filled",!1)},m.getPatternAttr=function(J,ee,se){return J&&b.isArrayOrTypedArray(J)?ee<J.length?J[ee]:se:J},m.pointStyle=function(J,ee,se){if(J.size()){var G=m.makePointStyleFns(ee);J.each(function(H){m.singlePointStyle(H,y.select(this),ee,G,se)})}},m.singlePointStyle=function(J,ee,se,G,H){var Y=se.marker,oe=Y.line;if(ee.style("opacity",G.selectedOpacityFn?G.selectedOpacityFn(J):void 0===J.mo?Y.opacity:J.mo),G.ms2mrc){var W;W="various"===J.ms||"various"===Y.size?3:G.ms2mrc(J.ms),J.mrc=W,G.selectedSizeFn&&(W=J.mrc=G.selectedSizeFn(J));var ne=m.symbolNumber(J.mx||Y.symbol)||0;J.om=ne%200>=100,ee.attr("d",E(ne,W))}var re,ce,fe,me=!1;if(J.so?(fe=oe.outlierwidth,ce=oe.outliercolor,re=Y.outliercolor):(fe=(J.mlw+1||(oe||{}).width+1||(J.trace?(J.trace.marker.line||{}).width:0)+1)-1||0,ce="mlc"in J?J.mlcc=G.lineScale(J.mlc):b.isArrayOrTypedArray(oe.color)?a.defaultLine:oe.color,b.isArrayOrTypedArray(Y.color)&&(re=a.defaultLine,me=!0),re="mc"in J?J.mcc=G.markerScale(J.mc):Y.color||"rgba(0,0,0,0)",G.selectedColorFn&&(re=G.selectedColorFn(J))),J.om)ee.call(a.stroke,re).style({"stroke-width":(fe||1)+"px",fill:"none"});else{ee.style("stroke-width",(J.isBlank?0:fe)+"px");var we=Y.gradient,ye=J.mgt;ye?me=!0:ye=we&&we.type,b.isArrayOrTypedArray(ye)&&(O[ye=ye[0]]||(ye=0));var Te=Y.pattern,Le=Te&&m.getPatternAttr(Te.shape,J.i,"");if(ye&&"none"!==ye){var Oe=J.mgc;Oe?me=!0:Oe=we.color;var Re=se.uid;me&&(Re+="-"+J.i),m.gradient(ee,H,Re,ye,[[0,Oe],[1,re]],"fill")}else if(Le){var Ve=m.getPatternAttr(Te.bgcolor,J.i,null),_e=m.getPatternAttr(Te.fgcolor,J.i,null),Ae=Te.fgopacity,Fe=m.getPatternAttr(Te.size,J.i,8),Pe=m.getPatternAttr(Te.solidity,J.i,.3),Be=J.mcc||b.isArrayOrTypedArray(Te.shape)||b.isArrayOrTypedArray(Te.bgcolor)||b.isArrayOrTypedArray(Te.size)||b.isArrayOrTypedArray(Te.solidity),qe=se.uid;Be&&(qe+="-"+J.i),m.pattern(ee,"point",H,qe,Le,Fe,Pe,J.mcc,Te.fillmode,Ve,_e,Ae)}else a.fill(ee,re);fe&&a.stroke(ee,ce)}},m.makePointStyleFns=function(J){var ee={},se=J.marker;return ee.markerScale=m.tryColorscale(se,""),ee.lineScale=m.tryColorscale(se,"line"),o.traceIs(J,"symbols")&&(ee.ms2mrc=p.isBubble(J)?f(J):function(){return(se.size||6)/2}),J.selectedpoints&&b.extendFlat(ee,m.makeSelectedPointStyleFns(J)),ee},m.makeSelectedPointStyleFns=function(J){var ee={},H=J.marker||{},Y=(J.selected||{}).marker||{},oe=(J.unselected||{}).marker||{},ne=Y.opacity,re=oe.opacity,ce=void 0!==ne,fe=void 0!==re;(b.isArrayOrTypedArray(H.opacity)||ce||fe)&&(ee.selectedOpacityFn=function(Ve){var _e=void 0===Ve.mo?H.opacity:Ve.mo;return Ve.selected?ce?ne:_e:fe?re:d*_e});var me=H.color,pe=Y.color,we=oe.color;(pe||we)&&(ee.selectedColorFn=function(Ve){var _e=Ve.mcc||me;return Ve.selected?pe||_e:we||_e});var ye=H.size,Te=Y.size,Le=oe.size,Oe=void 0!==Te,Re=void 0!==Le;return o.traceIs(J,"symbols")&&(Oe||Re)&&(ee.selectedSizeFn=function(Ve){var _e=Ve.mrc||ye/2;return Ve.selected?Oe?Te/2:_e:Re?Le/2:_e}),ee},m.makeSelectedTextStyleFns=function(J){var ee={},W=(J.textfont||{}).color,ne=((J.selected||{}).textfont||{}).color,re=((J.unselected||{}).textfont||{}).color;return ee.selectedTextColorFn=function(ce){var fe=ce.tc||W;return ce.selected?ne||fe:re||(ne?fe:a.addOpacity(fe,d))},ee},m.selectedPointStyle=function(J,ee){if(J.size()&&ee.selectedpoints){var se=m.makeSelectedPointStyleFns(ee),G=ee.marker||{},H=[];se.selectedOpacityFn&&H.push(function(Y,oe){Y.style("opacity",se.selectedOpacityFn(oe))}),se.selectedColorFn&&H.push(function(Y,oe){a.fill(Y,se.selectedColorFn(oe))}),se.selectedSizeFn&&H.push(function(Y,oe){var W=oe.mx||G.symbol||0,ne=se.selectedSizeFn(oe);Y.attr("d",E(m.symbolNumber(W),ne)),oe.mrc2=ne}),H.length&&J.each(function(Y){for(var oe=y.select(this),W=0;W<H.length;W++)H[W](oe,Y)})}},m.tryColorscale=function(J,ee){var se=ee?b.nestedProperty(J,ee).get():J;return se&&(se.colorscale||se._colorAx)&&b.isArrayOrTypedArray(se.color)?l.makeColorScaleFuncFromTrace(se):b.identity};var I={start:1,end:-1,middle:0,bottom:1,top:-1};function N(J,ee,se,G,H){var Y=y.select(J.node().parentNode),oe=-1!==ee.indexOf("top")?"top":-1!==ee.indexOf("bottom")?"bottom":"middle",W=-1!==ee.indexOf("left")?"end":-1!==ee.indexOf("right")?"start":"middle",ne=G?G/.8+1:0,re=(v.lineCount(J)-1)*s+1,ce=I[W]*ne,fe=.75*se+I[oe]*ne+(I[oe]-1)*re*se/2;J.attr("text-anchor",W),H||Y.attr("transform",i(ce,fe))}function F(J,ee){var se=J.ts||ee.textfont.size;return _(se)&&se>0?se:0}function L(J,ee,se,G){var H=J[0]-ee[0],Y=J[1]-ee[1],oe=se[0]-ee[0],W=se[1]-ee[1],ne=Math.pow(H*H+Y*Y,.25),re=Math.pow(oe*oe+W*W,.25),ce=(re*re*H-ne*ne*oe)*G,fe=(re*re*Y-ne*ne*W)*G,me=3*re*(ne+re),pe=3*ne*(ne+re);return[[y.round(ee[0]+(me&&ce/me),2),y.round(ee[1]+(me&&fe/me),2)],[y.round(ee[0]-(pe&&ce/pe),2),y.round(ee[1]-(pe&&fe/pe),2)]]}m.textPointStyle=function(J,ee,se){if(J.size()){var G;if(ee.selectedpoints){var H=m.makeSelectedTextStyleFns(ee);G=H.selectedTextColorFn}var Y=ee.texttemplate,oe=se._fullLayout;J.each(function(W){var ne=y.select(this),re=Y?b.extractOption(W,ee,"txt","texttemplate"):b.extractOption(W,ee,"tx","text");if(re||0===re){if(Y){var ce=ee._module.formatLabels,fe=ce?ce(W,ee,oe):{},me={};g(me,ee,W.i),re=b.texttemplateString(re,fe,oe._d3locale,me,W,ee._meta||{})}var we=W.tp||ee.textposition,ye=F(W,ee),Te=G?G(W):W.tc||ee.textfont.color;ne.call(m.font,W.tf||ee.textfont.family,ye,Te).text(re).call(v.convertToTspans,se).call(N,we,ye,W.mrc)}else ne.remove()})}},m.selectedTextStyle=function(J,ee){if(J.size()&&ee.selectedpoints){var se=m.makeSelectedTextStyleFns(ee);J.each(function(G){var H=y.select(this),Y=se.selectedTextColorFn(G),oe=G.tp||ee.textposition,W=F(G,ee);a.fill(H,Y);var ne=o.traceIs(ee,"bar-like");N(H,oe,W,G.mrc2||G.mrc,ne)})}},m.smoothopen=function(J,ee){if(J.length<3)return"M"+J.join("L");var se,G="M"+J[0],H=[];for(se=1;se<J.length-1;se++)H.push(L(J[se-1],J[se],J[se+1],ee));for(G+="Q"+H[0][0]+" "+J[1],se=2;se<J.length-1;se++)G+="C"+H[se-2][1]+" "+H[se-1][0]+" "+J[se];return G+"Q"+H[J.length-3][1]+" "+J[J.length-1]},m.smoothclosed=function(J,ee){if(J.length<3)return"M"+J.join("L")+"Z";var se,G="M"+J[0],H=J.length-1,Y=[L(J[H],J[0],J[1],ee)];for(se=1;se<H;se++)Y.push(L(J[se-1],J[se],J[se+1],ee));for(Y.push(L(J[H-1],J[H],J[0],ee)),se=1;se<=H;se++)G+="C"+Y[se-1][1]+" "+Y[se][0]+" "+J[se];return G+"C"+Y[H][1]+" "+Y[0][0]+" "+J[0]+"Z"};var P={hv:function(J,ee){return"H"+y.round(ee[0],2)+"V"+y.round(ee[1],2)},vh:function(J,ee){return"V"+y.round(ee[1],2)+"H"+y.round(ee[0],2)},hvh:function(J,ee){return"H"+y.round((J[0]+ee[0])/2,2)+"V"+y.round(ee[1],2)+"H"+y.round(ee[0],2)},vhv:function(J,ee){return"V"+y.round((J[1]+ee[1])/2,2)+"H"+y.round(ee[0],2)+"V"+y.round(ee[1],2)}},j=function(J,ee){return"L"+y.round(ee[0],2)+","+y.round(ee[1],2)};m.steps=function(J){var ee=P[J]||j;return function(se){for(var G="M"+y.round(se[0][0],2)+","+y.round(se[0][1],2),H=1;H<se.length;H++)G+=ee(se[H-1],se[H]);return G}},m.makeTester=function(){var J=b.ensureSingleById(y.select("body"),"svg","js-plotly-tester",function(se){se.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),ee=b.ensureSingle(J,"path","js-reference-point",function(se){se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=J,m.testref=ee},m.savedBBoxes={};var U=0;function $(J){var ee=J.getAttribute("data-unformatted");if(null!==ee)return ee+J.getAttribute("data-math")+J.getAttribute("text-anchor")+J.getAttribute("style")}function X(J,ee){if(!J)return null;var se=ee._context,G=se._exportedPlot?"":se._baseUrl||"";return G?"url('"+G+"#"+J+"')":"url(#"+J+")"}m.bBox=function(J,ee,se){var G,H,Y;if(se||(se=$(J)),se){if(G=m.savedBBoxes[se])return b.extendFlat({},G)}else if(1===J.childNodes.length){var oe=J.childNodes[0];if(se=$(oe)){var W=+oe.getAttribute("x")||0,ne=+oe.getAttribute("y")||0,re=oe.getAttribute("transform");if(!re){var ce=m.bBox(oe,!1,se);return W&&(ce.left+=W,ce.right+=W),ne&&(ce.top+=ne,ce.bottom+=ne),ce}if(G=m.savedBBoxes[se+="~"+W+"~"+ne+"~"+re])return b.extendFlat({},G)}}ee?H=J:(Y=m.tester.node(),H=J.cloneNode(!0),Y.appendChild(H)),y.select(H).attr("transform",null).call(v.positionText,0,0);var fe=H.getBoundingClientRect(),me=m.testref.node().getBoundingClientRect();ee||Y.removeChild(H);var pe={height:fe.height,width:fe.width,left:fe.left-me.left,top:fe.top-me.top,right:fe.right-me.left,bottom:fe.bottom-me.top};return U>=1e4&&(m.savedBBoxes={},U=0),se&&(m.savedBBoxes[se]=pe),U++,b.extendFlat({},pe)},m.setClipUrl=function(J,ee,se){J.attr("clip-path",X(ee,se))},m.getTranslate=function(J){var ee=(J[J.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(se,G,H){return[G,H].join(" ")}).split(" ");return{x:+ee[0]||0,y:+ee[1]||0}},m.setTranslate=function(J,ee,se){var H=J.attr?"attr":"setAttribute",Y=J[J.attr?"attr":"getAttribute"]("transform")||"";return ee=ee||0,se=se||0,Y=Y.replace(/(\btranslate\(.*?\);?)/,"").trim(),Y=(Y+=i(ee,se)).trim(),J[H]("transform",Y),Y},m.getScale=function(J){var ee=(J[J.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(se,G,H){return[G,H].join(" ")}).split(" ");return{x:+ee[0]||1,y:+ee[1]||1}},m.setScale=function(J,ee,se){var H=J.attr?"attr":"setAttribute",Y=J[J.attr?"attr":"getAttribute"]("transform")||"";return ee=ee||1,se=se||1,Y=Y.replace(/(\bscale\(.*?\);?)/,"").trim(),Y=(Y+="scale("+ee+","+se+")").trim(),J[H]("transform",Y),Y};var te=/\s*sc.*/;m.setPointGroupScale=function(J,ee,se){if(ee=ee||1,se=se||1,J){var G=1===ee&&1===se?"":"scale("+ee+","+se+")";J.each(function(){var H=(this.getAttribute("transform")||"").replace(te,"");H=(H+=G).trim(),this.setAttribute("transform",H)})}};var ae=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(J,ee,se){J&&J.each(function(){var G,H=y.select(this),Y=H.select("text");if(Y.node()){var oe=parseFloat(Y.attr("x")||0),W=parseFloat(Y.attr("y")||0),ne=(H.attr("transform")||"").match(ae);G=1===ee&&1===se?[]:[i(oe,W),"scale("+ee+","+se+")",i(-oe,-W)],ne&&G.push(ne),H.attr("transform",G.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":944,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(x,ue,le){"use strict";var y=x("@plotly/d3");ue.exports={circle:{n:0,f:function(b){var T=y.round(b,2);return"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"}},square:{n:1,f:function(b){var T=y.round(b,2);return"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"}},diamond:{n:2,f:function(b){var T=y.round(1.3*b,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"Z"}},cross:{n:3,f:function(b){var T=y.round(.4*b,2),_=y.round(1.2*b,2);return"M"+_+","+T+"H"+T+"V"+_+"H-"+T+"V"+T+"H-"+_+"V-"+T+"H-"+T+"V-"+_+"H"+T+"V-"+T+"H"+_+"Z"}},x:{n:4,f:function(b){var T=y.round(.8*b/Math.sqrt(2),2),_="l"+T+","+T,e="l"+T+",-"+T,o="l-"+T+",-"+T,a="l-"+T+","+T;return"M0,"+T+_+e+o+e+o+a+o+a+_+a+_+"Z"}},"triangle-up":{n:5,f:function(b){var T=y.round(2*b/Math.sqrt(3),2);return"M-"+T+","+y.round(b/2,2)+"H"+T+"L0,-"+y.round(b,2)+"Z"}},"triangle-down":{n:6,f:function(b){var T=y.round(2*b/Math.sqrt(3),2);return"M-"+T+",-"+y.round(b/2,2)+"H"+T+"L0,"+y.round(b,2)+"Z"}},"triangle-left":{n:7,f:function(b){var T=y.round(2*b/Math.sqrt(3),2);return"M"+y.round(b/2,2)+",-"+T+"V"+T+"L-"+y.round(b,2)+",0Z"}},"triangle-right":{n:8,f:function(b){var T=y.round(2*b/Math.sqrt(3),2);return"M-"+y.round(b/2,2)+",-"+T+"V"+T+"L"+y.round(b,2)+",0Z"}},"triangle-ne":{n:9,f:function(b){var T=y.round(.6*b,2),_=y.round(1.2*b,2);return"M-"+_+",-"+T+"H"+T+"V"+_+"Z"}},"triangle-se":{n:10,f:function(b){var T=y.round(.6*b,2),_=y.round(1.2*b,2);return"M"+T+",-"+_+"V"+T+"H-"+_+"Z"}},"triangle-sw":{n:11,f:function(b){var T=y.round(.6*b,2),_=y.round(1.2*b,2);return"M"+_+","+T+"H-"+T+"V-"+_+"Z"}},"triangle-nw":{n:12,f:function(b){var T=y.round(.6*b,2),_=y.round(1.2*b,2);return"M-"+T+","+_+"V-"+T+"H"+_+"Z"}},pentagon:{n:13,f:function(b){var T=y.round(.951*b,2),_=y.round(.588*b,2),e=y.round(-b,2),o=y.round(-.309*b,2);return"M"+T+","+o+"L"+_+","+y.round(.809*b,2)+"H-"+_+"L-"+T+","+o+"L0,"+e+"Z"}},hexagon:{n:14,f:function(b){var T=y.round(b,2),_=y.round(b/2,2),e=y.round(b*Math.sqrt(3)/2,2);return"M"+e+",-"+_+"V"+_+"L0,"+T+"L-"+e+","+_+"V-"+_+"L0,-"+T+"Z"}},hexagon2:{n:15,f:function(b){var T=y.round(b,2),_=y.round(b/2,2),e=y.round(b*Math.sqrt(3)/2,2);return"M-"+_+","+e+"H"+_+"L"+T+",0L"+_+",-"+e+"H-"+_+"L-"+T+",0Z"}},octagon:{n:16,f:function(b){var T=y.round(.924*b,2),_=y.round(.383*b,2);return"M-"+_+",-"+T+"H"+_+"L"+T+",-"+_+"V"+_+"L"+_+","+T+"H-"+_+"L-"+T+","+_+"V-"+_+"Z"}},star:{n:17,f:function(b){var T=1.4*b,_=y.round(.225*T,2),e=y.round(.951*T,2),o=y.round(.363*T,2),a=y.round(.588*T,2),l=y.round(-T,2),i=y.round(-.309*T,2),v=y.round(.118*T,2),h=y.round(.809*T,2);return"M"+_+","+i+"H"+e+"L"+o+","+v+"L"+a+","+h+"L0,"+y.round(.382*T,2)+"L-"+a+","+h+"L-"+o+","+v+"L-"+e+","+i+"H-"+_+"L0,"+l+"Z"}},hexagram:{n:18,f:function(b){var T=y.round(.66*b,2),_=y.round(.38*b,2),e=y.round(.76*b,2);return"M-"+e+",0l-"+_+",-"+T+"h"+e+"l"+_+",-"+T+"l"+_+","+T+"h"+e+"l-"+_+","+T+"l"+_+","+T+"h-"+e+"l-"+_+","+T+"l-"+_+",-"+T+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(b){var T=y.round(b*Math.sqrt(3)*.8,2),_=y.round(.8*b,2),e=y.round(1.6*b,2),o=y.round(4*b,2),a="A "+o+","+o+" 0 0 1 ";return"M-"+T+","+_+a+T+","+_+a+"0,-"+e+a+"-"+T+","+_+"Z"}},"star-triangle-down":{n:20,f:function(b){var T=y.round(b*Math.sqrt(3)*.8,2),_=y.round(.8*b,2),e=y.round(1.6*b,2),o=y.round(4*b,2),a="A "+o+","+o+" 0 0 1 ";return"M"+T+",-"+_+a+"-"+T+",-"+_+a+"0,"+e+a+T+",-"+_+"Z"}},"star-square":{n:21,f:function(b){var T=y.round(1.1*b,2),_=y.round(2*b,2),e="A "+_+","+_+" 0 0 1 ";return"M-"+T+",-"+T+e+"-"+T+","+T+e+T+","+T+e+T+",-"+T+e+"-"+T+",-"+T+"Z"}},"star-diamond":{n:22,f:function(b){var T=y.round(1.4*b,2),_=y.round(1.9*b,2),e="A "+_+","+_+" 0 0 1 ";return"M-"+T+",0"+e+"0,"+T+e+T+",0"+e+"0,-"+T+e+"-"+T+",0Z"}},"diamond-tall":{n:23,f:function(b){var T=y.round(.7*b,2),_=y.round(1.4*b,2);return"M0,"+_+"L"+T+",0L0,-"+_+"L-"+T+",0Z"}},"diamond-wide":{n:24,f:function(b){var T=y.round(1.4*b,2),_=y.round(.7*b,2);return"M0,"+_+"L"+T+",0L0,-"+_+"L-"+T+",0Z"}},hourglass:{n:25,f:function(b){var T=y.round(b,2);return"M"+T+","+T+"H-"+T+"L"+T+",-"+T+"H-"+T+"Z"},noDot:!0},bowtie:{n:26,f:function(b){var T=y.round(b,2);return"M"+T+","+T+"V-"+T+"L-"+T+","+T+"V-"+T+"Z"},noDot:!0},"circle-cross":{n:27,f:function(b){var T=y.round(b,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(b){var T=y.round(b,2),_=y.round(b/Math.sqrt(2),2);return"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(b){var T=y.round(b,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(b){var T=y.round(b,2);return"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(b){var T=y.round(1.3*b,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM0,-"+T+"V"+T+"M-"+T+",0H"+T},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(b){var T=y.round(1.3*b,2),_=y.round(.65*b,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM-"+_+",-"+_+"L"+_+","+_+"M-"+_+","+_+"L"+_+",-"+_},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(b){var T=y.round(1.4*b,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(b){var T=y.round(b,2);return"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(b){var T=y.round(1.2*b,2),_=y.round(.85*b,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(b){var T=y.round(b/2,2),_=y.round(b,2);return"M"+T+","+_+"V-"+_+"m-"+_+",0V"+_+"M"+_+","+T+"H-"+_+"m0,-"+_+"H"+_},needLine:!0,noFill:!0},"y-up":{n:37,f:function(b){var T=y.round(1.2*b,2),_=y.round(1.6*b,2),e=y.round(.8*b,2);return"M-"+T+","+e+"L0,0M"+T+","+e+"L0,0M0,-"+_+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(b){var T=y.round(1.2*b,2),_=y.round(1.6*b,2),e=y.round(.8*b,2);return"M-"+T+",-"+e+"L0,0M"+T+",-"+e+"L0,0M0,"+_+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(b){var T=y.round(1.2*b,2),_=y.round(1.6*b,2),e=y.round(.8*b,2);return"M"+e+","+T+"L0,0M"+e+",-"+T+"L0,0M-"+_+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(b){var T=y.round(1.2*b,2),_=y.round(1.6*b,2),e=y.round(.8*b,2);return"M-"+e+","+T+"L0,0M-"+e+",-"+T+"L0,0M"+_+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(b){var T=y.round(1.4*b,2);return"M"+T+",0H-"+T},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(b){var T=y.round(1.4*b,2);return"M0,"+T+"V-"+T},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(b){var T=y.round(b,2);return"M"+T+",-"+T+"L-"+T+","+T},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(b){var T=y.round(b,2);return"M"+T+","+T+"L-"+T+",-"+T},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(b){var T=y.round(b,2);return"M0,0L-"+T+","+y.round(2*b,2)+"H"+T+"Z"},noDot:!0},"arrow-down":{n:46,f:function(b){var T=y.round(b,2);return"M0,0L-"+T+",-"+y.round(2*b,2)+"H"+T+"Z"},noDot:!0},"arrow-left":{n:47,f:function(b){var T=y.round(2*b,2),_=y.round(b,2);return"M0,0L"+T+",-"+_+"V"+_+"Z"},noDot:!0},"arrow-right":{n:48,f:function(b){var T=y.round(2*b,2),_=y.round(b,2);return"M0,0L-"+T+",-"+_+"V"+_+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(b){var T=y.round(b,2);return"M-"+T+",0H"+T+"M0,0L-"+T+","+y.round(2*b,2)+"H"+T+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(b){var T=y.round(b,2);return"M-"+T+",0H"+T+"M0,0L-"+T+",-"+y.round(2*b,2)+"H"+T+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(b){var T=y.round(2*b,2),_=y.round(b,2);return"M0,-"+_+"V"+_+"M0,0L"+T+",-"+_+"V"+_+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(b){var T=y.round(2*b,2),_=y.round(b,2);return"M0,-"+_+"V"+_+"M0,0L-"+T+",-"+_+"V"+_+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(x,ue,le){"use strict";ue.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../registry"),T=x("../../plots/cartesian/axes"),_=x("../../lib"),e=x("./compute_error");function o(a,l,i,v){var h=l["error_"+v]||{},s=[];if(h.visible&&-1!==["linear","log"].indexOf(i.type)){for(var d=e(h),p=0;p<a.length;p++){var f=a[p],g=f.i;if(void 0===g)g=p;else if(null===g)continue;var m=f[v];if(y(i.c2l(m))){var u=d(m,g);if(y(u[0])&&y(u[1])){var w=f[v+"s"]=m-u[0],c=f[v+"h"]=m+u[1];s.push(w,c)}}}var M=l._extremes[i._id],S=T.findExtremes(i,s,_.extendFlat({tozero:M.opts.tozero},{padded:!0}));M.min=M.min.concat(S.min),M.max=M.max.concat(S.max)}}ue.exports=function(a){for(var l=a.calcdata,i=0;i<l.length;i++){var v=l[i],h=v[0].trace;if(!0===h.visible&&b.traceIs(h,"errorBarsOK")){var s=T.getFromId(a,h.xaxis),d=T.getFromId(a,h.yaxis);o(v,h,s,"x"),o(v,h,d,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(x,ue,le){"use strict";function y(b,T){return"percent"===b?function(_){return Math.abs(_*T/100)}:"constant"===b?function(){return Math.abs(T)}:"sqrt"===b?function(_){return Math.sqrt(Math.abs(_))}:void 0}ue.exports=function(b){var T=b.type,_=b.symmetric;if("data"===T){var e=b.array||[];if(_)return function(i,v){var h=+e[v];return[h,h]};var o=b.arrayminus||[];return function(i,v){var h=+e[v],s=+o[v];return isNaN(h)&&isNaN(s)?[NaN,NaN]:[s||0,h||0]}}var a=y(T,b.value),l=y(T,b.valueminus);return _||void 0===b.valueminus?function(i){var v=a(i);return[v,v]}:function(i){return[l(i),a(i)]}}},{}],393:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../registry"),T=x("../../lib"),_=x("../../plot_api/plot_template"),e=x("./attributes");ue.exports=function(o,a,l,i){var v="error_"+i.axis,h=_.newContainer(a,v),s=o[v]||{};function d(m,u){return T.coerce(s,h,e,m,u)}if(!1!==d("visible",void 0!==s.array||void 0!==s.value||"sqrt"===s.type)){var p=d("type","array"in s?"data":"percent"),f=!0;"sqrt"!==p&&(f=d("symmetric",!(("data"===p?"arrayminus":"valueminus")in s))),"data"===p?(d("array"),d("traceref"),f||(d("arrayminus"),d("tracerefminus"))):"percent"!==p&&"constant"!==p||(d("value"),f||d("valueminus"));var g="copy_"+i.inherit+"style";i.inherit&&(a["error_"+i.inherit]||{}).visible&&d(g,!(s.color||y(s.thickness)||y(s.width))),i.inherit&&h[g]||(d("color",l),d("thickness"),d("width",b.traceIs(a,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plot_api/edit_types").overrideAll,T=x("./attributes"),_={error_x:y.extendFlat({},T),error_y:y.extendFlat({},T)};delete _.error_x.copy_zstyle,delete _.error_y.copy_zstyle,delete _.error_y.copy_ystyle;var e={error_x:y.extendFlat({},T),error_y:y.extendFlat({},T),error_z:y.extendFlat({},T)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,ue.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:_,bar:_,histogram:_,scatter3d:b(e,"calc","nested"),scattergl:b(_,"calc","nested")}},supplyDefaults:x("./defaults"),calc:x("./calc"),makeComputeError:x("./compute_error"),plot:x("./plot"),style:x("./style"),hoverInfo:function(o,a,l){(a.error_y||{}).visible&&(l.yerr=o.yh-o.y,a.error_y.symmetric||(l.yerrneg=o.y-o.ys)),(a.error_x||{}).visible&&(l.xerr=o.xh-o.x,a.error_x.symmetric||(l.xerrneg=o.x-o.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=x("../drawing"),_=x("../../traces/scatter/subtypes");ue.exports=function(e,o,a,l){var i=a.xaxis,v=a.yaxis,h=l&&l.duration>0;o.each(function(s){var d,p=s[0].trace,f=p.error_x||{},g=p.error_y||{};p.ids&&(d=function(c){return c.id});var m=_.hasMarkers(p)&&p.marker.maxdisplayed>0;g.visible||f.visible||(s=[]);var u=y.select(this).selectAll("g.errorbar").data(s,d);if(u.exit().remove(),s.length){f.visible||u.selectAll("path.xerror").remove(),g.visible||u.selectAll("path.yerror").remove(),u.style("opacity",1);var w=u.enter().append("g").classed("errorbar",!0);h&&w.style("opacity",0).transition().duration(l.duration).style("opacity",1),T.setClipUrl(u,a.layerClipId,e),u.each(function(c){var F,L,P,j,E=y.select(this),M=(P=v,j={x:(L=i).c2p((F=c).x),y:P.c2p(F.y)},void 0!==F.yh&&(j.yh=P.c2p(F.yh),j.ys=P.c2p(F.ys),b(j.ys)||(j.noYS=!0,j.ys=P.c2p(F.ys,!0))),void 0!==F.xh&&(j.xh=L.c2p(F.xh),j.xs=L.c2p(F.xs),b(j.xs)||(j.noXS=!0,j.xs=L.c2p(F.xs,!0))),j);if(!m||c.vis){var S,C=E.select("path.yerror");if(g.visible&&b(M.x)&&b(M.yh)&&b(M.ys)){var O=g.width;S="M"+(M.x-O)+","+M.yh+"h"+2*O+"m-"+O+",0V"+M.ys,M.noYS||(S+="m-"+O+",0h"+2*O),C.size()?h&&(C=C.transition().duration(l.duration).ease(l.easing)):C=E.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),C.attr("d",S)}else C.remove();var I=E.select("path.xerror");if(f.visible&&b(M.y)&&b(M.xh)&&b(M.xs)){var N=(f.copy_ystyle?g:f).width;S="M"+M.xh+","+(M.y-N)+"v"+2*N+"m0,-"+N+"H"+M.xs,M.noXS||(S+="m0,-"+N+"v"+2*N),I.size()?h&&(I=I.transition().duration(l.duration).ease(l.easing)):I=E.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),I.attr("d",S)}else I.remove()}})}})}},{"../../traces/scatter/subtypes":952,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../color");ue.exports=function(T){T.each(function(_){var e=_[0].trace,o=e.error_y||{},a=e.error_x||{},l=y.select(this);l.selectAll("path.yerror").style("stroke-width",o.thickness+"px").call(b.stroke,o.color),a.copy_ystyle&&(a=o),l.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(b.stroke,a.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(x,ue,le){"use strict";var y=x("../../plots/font_attributes"),b=x("./layout_attributes").hoverlabel,T=x("../../lib/extend").extendFlat;ue.exports={hoverlabel:{bgcolor:T({},b.bgcolor,{arrayOk:!0}),bordercolor:T({},b.bordercolor,{arrayOk:!0}),font:y({arrayOk:!0,editType:"none"}),align:T({},b.align,{arrayOk:!0}),namelength:T({},b.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../registry");function T(_,e,o,a){a=a||y.identity,Array.isArray(_)&&(e[0][o]=a(_))}ue.exports=function(_){var e=_.calcdata,o=_._fullLayout;function a(s){return function(d){return y.coerceHoverinfo({hoverinfo:d},{_module:s._module},o)}}for(var l=0;l<e.length;l++){var i=e[l],v=i[0].trace;if(!b.traceIs(v,"pie-like")){var h=b.traceIs(v,"2dMap")?T:y.fillArray;h(v.hoverinfo,i,"hi",a(v)),v.hovertemplate&&h(v.hovertemplate,i,"ht"),v.hoverlabel&&(h(v.hoverlabel.bgcolor,i,"hbg"),h(v.hoverlabel.bordercolor,i,"hbc"),h(v.hoverlabel.font.size,i,"hts"),h(v.hoverlabel.font.color,i,"htc"),h(v.hoverlabel.font.family,i,"htf"),h(v.hoverlabel.namelength,i,"hnl"),h(v.hoverlabel.align,i,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("./hover").hover;ue.exports=function(T,_,e){var o=y.getComponentMethod("annotations","onClick")(T,T._hoverdata);function a(){T.emit("plotly_click",{points:T._hoverdata,event:_})}void 0!==e&&b(T,_,e,!0),T._hoverdata&&_&&_.target&&(o&&o.then?o.then(a):a(),_.stopImmediatePropagation&&_.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(x,ue,le){"use strict";ue.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("./hoverlabel_defaults");ue.exports=function(_,e,o,a){var l=y.extendFlat({},a.hoverlabel);e.hovertemplate&&(l.namelength=-1),T(_,e,function(i,v){return y.coerce(_,e,b,i,v)},l)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(x,ue,le){"use strict";var y=x("../../lib");le.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},le.isTraceInSubplots=function(a,l){if("splom"===a.type){for(var i=a.xaxes||[],v=a.yaxes||[],h=0;h<i.length;h++)for(var s=0;s<v.length;s++)if(-1!==l.indexOf(i[h]+v[s]))return!0;return!1}return-1!==l.indexOf(le.getSubplot(a))},le.flat=function(a,l){for(var i=new Array(a.length),v=0;v<a.length;v++)i[v]=l;return i},le.p2c=function(a,l){for(var i=new Array(a.length),v=0;v<a.length;v++)i[v]=a[v].p2c(l);return i},le.getDistanceFunction=function(a,l,i,v){return"closest"===a?v||le.quadrature(l,i):"x"===a.charAt(0)?l:i},le.getClosest=function(a,l,i){if(!1!==i.index)i.index>=0&&i.index<a.length?i.distance=0:i.index=!1;else for(var v=0;v<a.length;v++){var h=l(a[v]);h<=i.distance&&(i.index=v,i.distance=h)}return i},le.inbox=function(a,l,i){return a*l<0||0===a?i:1/0},le.quadrature=function(a,l){return function(i){var v=a(i),h=l(i);return Math.sqrt(v*v+h*h)}},le.makeEventData=function(a,l,i){var v="index"in a?a.index:a.pointNumber,h={data:l._input,fullData:l,curveNumber:l.index,pointNumber:v};if(l._indexToPoints){var s=l._indexToPoints[v];1===s.length?h.pointIndex=s[0]:h.pointIndices=s}else h.pointIndex=v;return l._module.eventData?h=l._module.eventData(h,a,l,i,v):("xVal"in a?h.x=a.xVal:"x"in a&&(h.x=a.x),"yVal"in a?h.y=a.yVal:"y"in a&&(h.y=a.y),a.xa&&(h.xaxis=a.xa),a.ya&&(h.yaxis=a.ya),void 0!==a.zLabelVal&&(h.z=a.zLabelVal)),le.appendArrayPointValue(h,l,v),h},le.appendArrayPointValue=function(a,l,i){var v=l._arrayAttrs;if(v)for(var h=0;h<v.length;h++){var s=v[h],d=T(s);if(void 0===a[d]){var p=_(y.nestedProperty(l,s).get(),i);void 0!==p&&(a[d]=p)}}},le.appendArrayMultiPointValues=function(a,l,i){var v=l._arrayAttrs;if(v)for(var h=0;h<v.length;h++){var s=v[h],d=T(s);if(void 0===a[d]){for(var p=y.nestedProperty(l,s).get(),f=new Array(i.length),g=0;g<i.length;g++)f[g]=_(p,i[g]);a[d]=f}}};var b={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function T(a){return b[a]||a}function _(a,l){return Array.isArray(l)?Array.isArray(a)&&Array.isArray(a[l[0]])?a[l[0]][l[1]]:void 0:a[l]}var e={x:!0,y:!0},o={"x unified":!0,"y unified":!0};le.isUnifiedHover=function(a){return"string"==typeof a&&!!o[a]},le.isXYhover=function(a){return"string"==typeof a&&!!e[a]}},{"../../lib":503}],403:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=x("tinycolor2"),_=x("../../lib"),e=_.strTranslate,o=_.strRotate,a=x("../../lib/events"),l=x("../../lib/svg_text_utils"),i=x("../../lib/override_cursor"),v=x("../drawing"),h=x("../color"),s=x("../dragelement"),d=x("../../plots/cartesian/axes"),p=x("../../registry"),f=x("./helpers"),g=x("./constants"),m=x("../legend/defaults"),u=x("../legend/draw"),w=g.YANGLE,c=Math.PI*w/180,E=1/Math.sin(c),M=Math.cos(c),S=Math.sin(c),C=g.HOVERARROWSIZE,O=g.HOVERTEXTPAD,I={box:!0,ohlc:!0,violin:!0,candlestick:!0},N={scatter:!0,scattergl:!0,splom:!0};function F(H){return[H.trace.index,H.index,H.x0,H.y0,H.name,H.attr,H.xa?H.xa._id:"",H.ya?H.ya._id:""].join(",")}le.hover=function(H,Y,oe,W){H=_.getGraphDiv(H);var ne=Y.target;_.throttle(H._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){!function(re,ce,fe,me,pe){fe||(fe="xy");var we=Array.isArray(fe)?fe:[fe],ye=re._fullLayout,Te=ye._plots||[],Le=Te[fe],Oe=ye._has("cartesian");if(Le){var Re=Le.overlays.map(function(Qn){return Qn.id});we=we.concat(Re)}for(var Ve=we.length,_e=new Array(Ve),Ae=new Array(Ve),Fe=!1,Pe=0;Pe<Ve;Pe++){var Be=we[Pe];if(Te[Be])Fe=!0,_e[Pe]=Te[Be].xaxis,Ae[Pe]=Te[Be].yaxis;else{if(!ye[Be]||!ye[Be]._subplot)return void _.warn("Unrecognized subplot: "+Be);var qe=ye[Be]._subplot;_e[Pe]=qe.xaxis,Ae[Pe]=qe.yaxis}}var We=ce.hovermode||ye.hovermode;if(We&&!Fe&&(We="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(We)||!re.calcdata||re.querySelector(".zoombox")||re._dragging)return s.unhoverRaw(re,ce);var Je=ye.hoverdistance;-1===Je&&(Je=1/0);var ut=ye.spikedistance;-1===ut&&(ut=1/0);var Ge,Ke,nt,it,ht,Tt,Ct,Vt,Ft,gt,ft,Bt,rn,un=[],pn=[],dn={hLinePoint:null,vLinePoint:null},Mn=!1;if(Array.isArray(ce))for(We="array",nt=0;nt<ce.length;nt++)(ht=re.calcdata[ce[nt].curveNumber||0])&&(Tt=ht[0].trace,"skip"!==ht[0].trace.hoverinfo&&(pn.push(ht),"h"===Tt.orientation&&(Mn=!0)));else{for(it=0;it<re.calcdata.length;it++)"skip"!==(Tt=(ht=re.calcdata[it])[0].trace).hoverinfo&&f.isTraceInSubplots(Tt,we)&&(pn.push(ht),"h"===Tt.orientation&&(Mn=!0));var ln,Ee;if(pe){if(!1===a.triggerHandler(re,"plotly_beforehover",ce))return;var De=pe.getBoundingClientRect();ln=ce.clientX-De.left,Ee=ce.clientY-De.top,ye._calcInverseTransform(re);var Ie=_.apply3DTransform(ye._invTransform)(ln,Ee);if(Ee=Ie[1],(ln=Ie[0])<0||ln>_e[0]._length||Ee<0||Ee>Ae[0]._length)return s.unhoverRaw(re,ce)}else ln="xpx"in ce?ce.xpx:_e[0]._length/2,Ee="ypx"in ce?ce.ypx:Ae[0]._length/2;if(ce.pointerX=ln+_e[0]._offset,ce.pointerY=Ee+Ae[0]._offset,Ge="xval"in ce?f.flat(we,ce.xval):f.p2c(_e,ln),Ke="yval"in ce?f.flat(we,ce.yval):f.p2c(Ae,Ee),!b(Ge[0])||!b(Ke[0]))return _.warn("Fx.hover failed",ce,re),s.unhoverRaw(re,ce)}var He=1/0;function Ye(Qn,Er){for(it=0;it<pn.length;it++)if((ht=pn[it])&&ht[0]&&ht[0].trace&&!0===(Tt=ht[0].trace).visible&&0!==Tt._length&&-1===["carpet","contourcarpet"].indexOf(Tt._module.name)){if("splom"===Tt.type?Ct=we[Vt=0]:(Ct=f.getSubplot(Tt),Vt=we.indexOf(Ct)),f.isUnifiedHover(Ft=We)&&(Ft=Ft.charAt(0)),Bt={cd:ht,trace:Tt,xa:_e[Vt],ya:Ae[Vt],maxHoverDistance:Je,maxSpikeDistance:ut,index:!1,distance:Math.min(He,Je),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:h.defaultLine,name:Tt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ye[Ct]&&(Bt.subplot=ye[Ct]._subplot),ye._splomScenes&&ye._splomScenes[Tt.uid]&&(Bt.scene=ye._splomScenes[Tt.uid]),rn=un.length,"array"===Ft){var kr=ce[it];"pointNumber"in kr?(Bt.index=kr.pointNumber,Ft="closest"):(Ft="","xval"in kr&&(gt=kr.xval,Ft="x"),"yval"in kr&&(ft=kr.yval,Ft=Ft?"closest":"y"))}else void 0!==Qn&&void 0!==Er?(gt=Qn,ft=Er):(gt=Ge[Vt],ft=Ke[Vt]);if(0!==Je)if(Tt._module&&Tt._module.hoverPoints){var sr=Tt._module.hoverPoints(Bt,gt,ft,Ft,{finiteRange:!0,hoverLayer:ye._hoverlayer});if(sr)for(var ci,oi=0;oi<sr.length;oi++)b((ci=sr[oi]).x0)&&b(ci.y0)&&un.push($(ci,We))}else _.log("Unrecognized trace type in hover:",Tt);if("closest"===We&&un.length>rn&&(un.splice(0,rn),He=un[0].distance),Oe&&0!==ut&&0===un.length){Bt.distance=ut,Bt.index=!1;var Or=Tt._module.hoverPoints(Bt,gt,ft,"closest",{hoverLayer:ye._hoverlayer});if(Or&&(Or=Or.filter(function(_n){return _n.spikeDistance<=ut})),Or&&Or.length){var Dr,wr=Or.filter(function(_n){return _n.xa.showspikes&&"hovered data"!==_n.xa.spikesnap});if(wr.length){var gn=wr[0];b(gn.x0)&&b(gn.y0)&&(Dr=ot(gn),(!dn.vLinePoint||dn.vLinePoint.spikeDistance>Dr.spikeDistance)&&(dn.vLinePoint=Dr))}var tr=Or.filter(function(_n){return _n.ya.showspikes&&"hovered data"!==_n.ya.spikesnap});if(tr.length){var qt=tr[0];b(qt.x0)&&b(qt.y0)&&(Dr=ot(qt),(!dn.hLinePoint||dn.hLinePoint.spikeDistance>Dr.spikeDistance)&&(dn.hLinePoint=Dr))}}}}}function tt(Qn,Er,kr){for(var sr,ci=null,oi=1/0,Or=0;Or<Qn.length;Or++)sr=Qn[Or].spikeDistance,kr&&0===Or&&(sr=-1/0),sr<=oi&&sr<=Er&&(ci=Qn[Or],oi=sr);return ci}function ot(Qn){return Qn?{xa:Qn.xa,ya:Qn.ya,x:void 0!==Qn.xSpike?Qn.xSpike:(Qn.x0+Qn.x1)/2,y:void 0!==Qn.ySpike?Qn.ySpike:(Qn.y0+Qn.y1)/2,distance:Qn.distance,spikeDistance:Qn.spikeDistance,curveNumber:Qn.trace.index,color:Qn.color,pointNumber:Qn.index}:null}Ye();var st={fullLayout:ye,container:ye._hoverlayer,event:ce},bt=re._spikepoints;re._spikepoints={vLinePoint:dn.vLinePoint,hLinePoint:dn.hLinePoint};var Ut=function(){un.sort(function(Qn,Er){return Qn.distance-Er.distance}),un=function(Qn,Er){for(var kr=Er.charAt(0),sr=[],ci=[],oi=[],Or=0;Or<Qn.length;Or++){var Dr=Qn[Or];p.traceIs(Dr.trace,"bar-like")||p.traceIs(Dr.trace,"box-violin")?oi.push(Dr):Dr.trace[kr+"period"]?ci.push(Dr):sr.push(Dr)}return sr.concat(ci).concat(oi)}(un,We)};Ut();var Kt=We.charAt(0),vt=("x"===Kt||"y"===Kt)&&un[0]&&N[un[0].trace.type];if(Oe&&0!==ut&&0!==un.length){var Et=tt(un.filter(function(Qn){return Qn.ya.showspikes}),ut,vt);dn.hLinePoint=ot(Et);var $t=tt(un.filter(function(Qn){return Qn.xa.showspikes}),ut,vt);dn.vLinePoint=ot($t)}if(0===un.length){var Dt=s.unhoverRaw(re,ce);return!Oe||null===dn.hLinePoint&&null===dn.vLinePoint||te(bt)&&X(re,dn,st),Dt}if(Oe&&te(bt)&&X(re,dn,st),f.isXYhover(Ft)&&0!==un[0].length&&"splom"!==un[0].trace.type){var Pt=un[0],je=(un=I[Pt.trace.type]?un.filter(function(Qn){return Qn.trace.index===Pt.trace.index}):[Pt]).length;Ye(J("x",Pt,ye),J("y",Pt,ye));var It,jt=[],Qt={},fn=0,an=function(Qn){var Er=I[Qn.trace.type]?F(Qn):Qn.trace.index;if(Qt[Er]){var kr=Qt[Er]-1,sr=jt[kr];kr>0&&Math.abs(Qn.distance)<Math.abs(sr.distance)&&(jt[kr]=Qn)}else fn++,Qt[Er]=fn,jt.push(Qn)};for(It=0;It<je;It++)an(un[It]);for(It=un.length-1;It>je-1;It--)an(un[It]);un=jt,Ut()}var Sn=re._hoverdata,Yn=[],kn=ee(re),cn=se(re);for(nt=0;nt<un.length;nt++){var vn=un[nt],hn=f.makeEventData(vn,vn.trace,vn.cd);if(!1!==vn.hovertemplate){var Dn=!1;vn.cd[vn.index]&&vn.cd[vn.index].ht&&(Dn=vn.cd[vn.index].ht),vn.hovertemplate=Dn||vn.trace.hovertemplate||!1}if(vn.xa&&vn.ya){var Pn=vn.x0+vn.xa._offset,$n=vn.x1+vn.xa._offset,rr=vn.y0+vn.ya._offset,er=vn.y1+vn.ya._offset,or=Math.min(Pn,$n),Zr=Math.max(Pn,$n),zr=Math.min(rr,er),pr=Math.max(rr,er);hn.bbox={x0:or+cn,x1:Zr+cn,y0:zr+kn,y1:pr+kn}}vn.eventData=[hn],Yn.push(hn)}re._hoverdata=Yn;var Br="y"===We&&(pn.length>1||un.length>1)||"closest"===We&&Mn&&un.length>1,fr=h.combine(ye.plot_bgcolor||h.background,ye.paper_bgcolor),Nr=P(un,{gd:re,hovermode:We,rotateLabels:Br,bgColor:fr,container:ye._hoverlayer,outerContainer:ye._paper.node(),commonLabelOpts:ye.hoverlabel,hoverdistance:ye.hoverdistance});if(f.isUnifiedHover(We)||(function(Qn,Er,kr){var sr,ci,oi,Or,Dr,wr,gn,tr=0,qt=1,_n=Qn.size(),Cn=new Array(_n),Jn=0;function Xn(ir){var br=ir[0],Tr=ir[ir.length-1];if(oi=Tr.pos+Tr.dp+Tr.size-br.pmax,(ci=br.pmin-br.pos-br.dp+br.size)>.01){for(Dr=ir.length-1;Dr>=0;Dr--)ir[Dr].dp+=ci;sr=!1}if(!(oi<.01)){if(ci<-.01){for(Dr=ir.length-1;Dr>=0;Dr--)ir[Dr].dp-=oi;sr=!1}if(sr){var Fr=0;for(Or=0;Or<ir.length;Or++)(wr=ir[Or]).pos+wr.dp+wr.size>br.pmax&&Fr++;for(Or=ir.length-1;Or>=0&&!(Fr<=0);Or--)(wr=ir[Or]).pos>br.pmax-1&&(wr.del=!0,Fr--);for(Or=0;Or<ir.length&&!(Fr<=0);Or++)if((wr=ir[Or]).pos<br.pmin+1)for(wr.del=!0,Fr--,oi=2*wr.size,Dr=ir.length-1;Dr>=0;Dr--)ir[Dr].dp-=oi;for(Or=ir.length-1;Or>=0&&!(Fr<=0);Or--)(wr=ir[Or]).pos+wr.dp+wr.size>br.pmax&&(wr.del=!0,Fr--)}}}for(Qn.each(function(ir){var br=ir[Er],Tr="x"===br._id.charAt(0),Fr=br.range;0===Jn&&Fr&&Fr[0]>Fr[1]!==Tr&&(qt=-1),Cn[Jn++]=[{datum:ir,traceIndex:ir.trace.index,dp:0,pos:ir.pos,posref:ir.posref,size:ir.by*(Tr?E:1)/2,pmin:0,pmax:Tr?kr.width:kr.height}]}),Cn.sort(function(ir,br){return ir[0].posref-br[0].posref||qt*(br[0].traceIndex-ir[0].traceIndex)});!sr&&tr<=_n;){for(tr++,sr=!0,Or=0;Or<Cn.length-1;){var Hn=Cn[Or],Bn=Cn[Or+1],zn=Hn[Hn.length-1],jn=Bn[0];if((ci=zn.pos+zn.dp+zn.size-jn.pos-jn.dp+jn.size)>.01&&zn.pmin===jn.pmin&&zn.pmax===jn.pmax){for(Dr=Bn.length-1;Dr>=0;Dr--)Bn[Dr].dp+=ci;for(Hn.push.apply(Hn,Bn),Cn.splice(Or+1,1),gn=0,Dr=Hn.length-1;Dr>=0;Dr--)gn+=Hn[Dr].dp;for(oi=gn/Hn.length,Dr=Hn.length-1;Dr>=0;Dr--)Hn[Dr].dp-=oi;sr=!1}else Or++}Cn.forEach(Xn)}for(Or=Cn.length-1;Or>=0;Or--){var Vn=Cn[Or];for(Dr=Vn.length-1;Dr>=0;Dr--){var On=Vn[Dr],dr=On.datum;dr.offset=On.dp,dr.del=On.del}}}(Nr,Br?"xa":"ya",ye),U(Nr,Br,ye._invScaleX,ye._invScaleY)),pe&&pe.tagName){var xi=p.getComponentMethod("annotations","hasClickToShow")(re,Yn);i(y.select(pe),xi?"pointer":"")}!pe||me||!function(Qn,Er,kr){if(!kr||kr.length!==Qn._hoverdata.length)return!0;for(var sr=kr.length-1;sr>=0;sr--){var ci=kr[sr],oi=Qn._hoverdata[sr];if(ci.curveNumber!==oi.curveNumber||String(ci.pointNumber)!==String(oi.pointNumber)||String(ci.pointNumbers)!==String(oi.pointNumbers))return!0}return!1}(re,0,Sn)||(Sn&&re.emit("plotly_unhover",{event:ce,points:Sn}),re.emit("plotly_hover",{event:ce,points:re._hoverdata,xaxes:_e,yaxes:Ae,xvals:Ge,yvals:Ke}))}(H,Y,oe,W,ne)})},le.loneHover=function(H,Y){var oe=!0;Array.isArray(H)||(oe=!1,H=[H]);var W=Y.gd,ne=ee(W),re=se(W),ce=P(H.map(function(pe){var we=pe._x0||pe.x0||pe.x||0,ye=pe._x1||pe.x1||pe.x||0,Te=pe._y0||pe.y0||pe.y||0,Le=pe._y1||pe.y1||pe.y||0,Oe=pe.eventData;if(Oe){var Re=Math.min(we,ye),Ve=Math.max(we,ye),_e=Math.min(Te,Le),Ae=Math.max(Te,Le),Fe=pe.trace;if(p.traceIs(Fe,"gl3d")){var Pe=W._fullLayout[Fe.scene]._scene.container,Be=Pe.offsetLeft,qe=Pe.offsetTop;Re+=Be,Ve+=Be,_e+=qe,Ae+=qe}Oe.bbox={x0:Re+re,x1:Ve+re,y0:_e+ne,y1:Ae+ne},Y.inOut_bbox&&Y.inOut_bbox.push(Oe.bbox)}else Oe=!1;return{color:pe.color||h.defaultLine,x0:pe.x0||pe.x||0,x1:pe.x1||pe.x||0,y0:pe.y0||pe.y||0,y1:pe.y1||pe.y||0,xLabel:pe.xLabel,yLabel:pe.yLabel,zLabel:pe.zLabel,text:pe.text,name:pe.name,idealAlign:pe.idealAlign,borderColor:pe.borderColor,fontFamily:pe.fontFamily,fontSize:pe.fontSize,fontColor:pe.fontColor,nameLength:pe.nameLength,textAlign:pe.textAlign,trace:pe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:pe.hovertemplate||!1,hovertemplateLabels:pe.hovertemplateLabels||!1,eventData:Oe}}),{gd:W,hovermode:"closest",rotateLabels:!1,bgColor:Y.bgColor||h.background,container:y.select(Y.container),outerContainer:Y.outerContainer||Y.container}),fe=0,me=0;return ce.sort(function(pe,we){return pe.y0-we.y0}).each(function(pe,we){var ye=pe.y0-pe.by/2;pe.offset=ye-5<fe?fe-ye+5:0,fe=ye+pe.by+pe.offset,we===Y.anchorIndex&&(me=pe.offset)}).each(function(pe){pe.offset-=me}),U(ce,!1,W._fullLayout._invScaleX,W._fullLayout._invScaleY),oe?ce:ce.node()};var L=/<extra>([\s\S]*)<\/extra>/;function P(H,Y){var oe=Y.gd,W=oe._fullLayout,ne=Y.hovermode,re=Y.rotateLabels,ce=Y.bgColor,fe=Y.container,me=Y.outerContainer,pe=Y.commonLabelOpts||{};if(0===H.length)return[[]];var we=Y.fontFamily||g.HOVERFONT,ye=Y.fontSize||g.HOVERFONTSIZE,Te=H[0],Le=Te.xa,Oe=Te.ya,Re=ne.charAt(0),Ve=Te[Re+"Label"],_e=G(oe,me),Ae=_e.top,Fe=_e.width,Pe=_e.height,Be=void 0!==Ve&&Te.distance<=Y.hoverdistance&&("x"===ne||"y"===ne);if(Be){var qe,We,Je=!0;for(qe=0;qe<H.length;qe++)if(Je&&void 0===H[qe].zLabel&&(Je=!1),We=H[qe].hoverinfo||H[qe].trace.hoverinfo){var ut=Array.isArray(We)?We:We.split("+");if(-1===ut.indexOf("all")&&-1===ut.indexOf(ne)){Be=!1;break}}Je&&(Be=!1)}var Ge=fe.selectAll("g.axistext").data(Be?[0]:[]);if(Ge.enter().append("g").classed("axistext",!0),Ge.exit().remove(),Ge.each(function(){var vt=y.select(this),Et=_.ensureSingle(vt,"path","",function($n){$n.style({"stroke-width":"1px"})}),$t=_.ensureSingle(vt,"text","",function($n){$n.attr("data-notex",1)}),Dt=pe.bgcolor||h.defaultLine,Pt=pe.bordercolor||h.contrast(Dt),je=h.contrast(Dt),rt={family:pe.font.family||we,size:pe.font.size||ye,color:pe.font.color||je};Et.style({fill:Dt,stroke:Pt}),$t.text(Ve).call(v.font,rt).call(l.positionText,0,0).call(l.convertToTspans,oe),vt.attr("transform","");var pt,It,jt=G(oe,$t.node());if("x"===ne){var Qt="top"===Le.side?"-":"";$t.attr("text-anchor","middle").call(l.positionText,0,"top"===Le.side?Ae-jt.bottom-C-O:Ae-jt.top+C+O),It=Oe._offset+("top"===Le.side?0:Oe._length);var fn=jt.width/2+O;(pt=Le._offset+(Te.x0+Te.x1)/2)<fn?(pt=fn,Et.attr("d","M-"+(fn-C)+",0L-"+(fn-2*C)+","+Qt+C+"H"+(O+jt.width/2)+"v"+Qt+(2*O+jt.height)+"H-"+fn+"V"+Qt+C+"Z")):pt>W.width-fn?(pt=W.width-fn,Et.attr("d","M"+(fn-C)+",0L"+fn+","+Qt+C+"v"+Qt+(2*O+jt.height)+"H-"+fn+"V"+Qt+C+"H"+(fn-2*C)+"Z")):Et.attr("d","M0,0L"+C+","+Qt+C+"H"+(O+jt.width/2)+"v"+Qt+(2*O+jt.height)+"H-"+(O+jt.width/2)+"V"+Qt+C+"H-"+C+"Z")}else{var an,Sn,Yn;"right"===Oe.side?(an="start",Sn=1,Yn="",pt=Le._offset+Le._length):(an="end",Sn=-1,Yn="-",pt=Le._offset),It=Oe._offset+(Te.y0+Te.y1)/2,$t.attr("text-anchor",an),Et.attr("d","M0,0L"+Yn+C+","+C+"V"+(O+jt.height/2)+"h"+Yn+(2*O+jt.width)+"V-"+(O+jt.height/2)+"H"+Yn+C+"V-"+C+"Z");var kn,cn=jt.height/2,vn=Ae-jt.top-cn,hn="clip"+W._uid+"commonlabel"+Oe._id;if(pt<jt.width+2*O+C){kn="M-"+(C+O)+"-"+cn+"h-"+(jt.width-O)+"V"+cn+"h"+(jt.width-O)+"Z";var Dn=jt.width-pt+O;l.positionText($t,Dn,vn),"end"===an&&$t.selectAll("tspan").each(function(){var $n=y.select(this),rr=v.tester.append("text").text($n.text()).call(v.font,rt),er=G(oe,rr.node());Math.round(er.width)<Math.round(jt.width)&&$n.attr("x",Dn-er.width),rr.remove()})}else l.positionText($t,Sn*(O+C),vn),kn=null;var Pn=W._topclips.selectAll("#"+hn).data(kn?[0]:[]);Pn.enter().append("clipPath").attr("id",hn).append("path"),Pn.exit().remove(),Pn.select("path").attr("d",kn),v.setClipUrl($t,kn?hn:null,oe)}vt.attr("transform",e(pt,It))}),f.isUnifiedHover(ne)){fe.selectAll("g.hovertext").remove();var Ke=H.filter(function(vt){return"none"!==vt.hoverinfo});if(0===Ke.length)return;var nt=W.hoverlabel,it=nt.font,Tt={font:it};m({showlegend:!0,legend:{title:{text:Ve,font:it},font:it,bgcolor:nt.bgcolor,bordercolor:nt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:W.legend?W.legend.traceorder:void 0,orientation:"v"}},Tt,oe._fullData);var Ct=Tt.legend;Ct.entries=[];for(var Vt=0;Vt<Ke.length;Vt++){var Ft=Ke[Vt];if("none"!==Ft.hoverinfo){var gt=j(Ft,!0,ne,W,Ve),ft=gt[0],Bt=gt[1];Ft.name=Bt,Ft.text=""!==Bt?Bt+" : "+ft:ft;var rn=Ft.cd[Ft.index];rn&&(rn.mc&&(Ft.mc=rn.mc),rn.mcc&&(Ft.mc=rn.mcc),rn.mlc&&(Ft.mlc=rn.mlc),rn.mlcc&&(Ft.mlc=rn.mlcc),rn.mlw&&(Ft.mlw=rn.mlw),rn.mrc&&(Ft.mrc=rn.mrc),rn.dir&&(Ft.dir=rn.dir)),Ft._distinct=!0,Ct.entries.push([Ft])}}Ct.entries.sort(function(vt,Et){return vt[0].trace.index-Et[0].trace.index}),Ct.layer=fe,Ct._inHover=!0,Ct._groupTitleFont=nt.grouptitlefont,u(oe,Ct);var un,pn,dn,Mn,ln=fe.select("g.legend"),Ee=G(oe,ln.node()),De=Ee.width+2*O,Ie=Ee.height+2*O,He=Ke[0],Ye=(He.x0+He.x1)/2,tt=(He.y0+He.y1)/2,ot=!(p.traceIs(He.trace,"bar-like")||p.traceIs(He.trace,"box-violin"));"y"===Re?ot?(pn=tt-O,un=tt+O):(pn=Math.min.apply(null,Ke.map(function(vt){return Math.min(vt.y0,vt.y1)})),un=Math.max.apply(null,Ke.map(function(vt){return Math.max(vt.y0,vt.y1)}))):pn=un=_.mean(Ke.map(function(vt){return(vt.y0+vt.y1)/2}))-Ie/2,"x"===Re?ot?(dn=Ye+O,Mn=Ye-O):(dn=Math.max.apply(null,Ke.map(function(vt){return Math.max(vt.x0,vt.x1)})),Mn=Math.min.apply(null,Ke.map(function(vt){return Math.min(vt.x0,vt.x1)}))):dn=Mn=_.mean(Ke.map(function(vt){return(vt.x0+vt.x1)/2}))-De/2;var st,bt,wt=Le._offset,Ut=Oe._offset;return Mn+=wt-De,pn+=Ut-Ie,st=(dn+=wt)+De<Fe&&dn>=0?dn:Mn+De<Fe&&Mn>=0?Mn:wt+De<Fe?wt:dn-Ye<Ye-Mn+De?Fe-De:0,bt=(un+=Ut)+Ie<Pe&&un>=0?un:pn+Ie<Pe&&pn>=0?pn:Ut+Ie<Pe?Ut:un-tt<tt-pn+Ie?Pe-Ie:0,ln.attr("transform",e((st+=O)-1,(bt+=O)-1)),ln}var Kt=fe.selectAll("g.hovertext").data(H,function(vt){return F(vt)});return Kt.enter().append("g").classed("hovertext",!0).each(function(){var vt=y.select(this);vt.append("rect").call(h.fill,h.addOpacity(ce,.8)),vt.append("text").classed("name",!0),vt.append("path").style("stroke-width","1px"),vt.append("text").classed("nums",!0).call(v.font,we,ye)}),Kt.exit().remove(),Kt.each(function(vt){var Et=y.select(this).attr("transform",""),$t=vt.color;Array.isArray($t)&&($t=$t[vt.eventData[0].pointNumber]);var Dt=vt.bgcolor||$t,Pt=h.combine(h.opacity(Dt)?Dt:h.defaultLine,ce),je=h.combine(h.opacity($t)?$t:h.defaultLine,ce),rt=vt.borderColor||h.contrast(Pt),pt=j(vt,Be,ne,W,Ve,Et),It=pt[0],jt=pt[1],Qt=Et.select("text.nums").call(v.font,vt.fontFamily||we,vt.fontSize||ye,vt.fontColor||rt).text(It).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,oe),fn=Et.select("text.name"),an=0,Sn=0;if(jt&&jt!==It){fn.call(v.font,vt.fontFamily||we,vt.fontSize||ye,je).text(jt).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,oe);var Yn=G(oe,fn.node());an=Yn.width+2*O,Sn=Yn.height+2*O}else fn.remove(),Et.select("rect").remove();Et.select("path").style({fill:Pt,stroke:rt});var kn=vt.xa._offset+(vt.x0+vt.x1)/2,cn=vt.ya._offset+(vt.y0+vt.y1)/2,vn=Math.abs(vt.x1-vt.x0),hn=Math.abs(vt.y1-vt.y0),Dn=G(oe,Qt.node()),Pn=Dn.width/W._invScaleX,$n=Dn.height/W._invScaleY;vt.ty0=(Ae-Dn.top)/W._invScaleY,vt.bx=Pn+2*O,vt.by=Math.max($n+2*O,Sn),vt.anchor="start",vt.txwidth=Pn,vt.tx2width=an,vt.offset=0;var rr,er,or=(Pn+C+O+an)*W._invScaleX;if(re)vt.pos=kn,rr=cn+hn/2+or<=Pe,er=cn-hn/2-or>=0,"top"!==vt.idealAlign&&rr||!er?rr?(cn+=hn/2,vt.anchor="start"):vt.anchor="middle":(cn-=hn/2,vt.anchor="end");else if(vt.pos=cn,rr=kn+vn/2+or<=Fe,er=kn-vn/2-or>=0,"left"!==vt.idealAlign&&rr||!er)if(rr)kn+=vn/2,vt.anchor="start";else{vt.anchor="middle";var Zr=or/2,zr=kn+Zr-Fe,pr=kn-Zr;zr>0&&(kn-=zr),pr<0&&(kn+=-pr)}else kn-=vn/2,vt.anchor="end";Qt.attr("text-anchor",vt.anchor),an&&fn.attr("text-anchor",vt.anchor),Et.attr("transform",e(kn,cn)+(re?o(w):""))}),Kt}function j(H,Y,oe,W,ne,re){var ce="",fe="";void 0!==H.nameOverride&&(H.name=H.nameOverride),H.name&&(H.trace._meta&&(H.name=_.templateString(H.name,H.trace._meta)),ce=ae(H.name,H.nameLength));var me=oe.charAt(0);void 0!==H.zLabel?(void 0!==H.xLabel&&(fe+="x: "+H.xLabel+"<br>"),void 0!==H.yLabel&&(fe+="y: "+H.yLabel+"<br>"),"choropleth"!==H.trace.type&&"choroplethmapbox"!==H.trace.type&&(fe+=(fe?"z: ":"")+H.zLabel)):Y&&H[me+"Label"]===ne?fe=H[("x"===me?"y":"x")+"Label"]||"":void 0===H.xLabel?void 0!==H.yLabel&&"scattercarpet"!==H.trace.type&&(fe=H.yLabel):fe=void 0===H.yLabel?H.xLabel:"("+H.xLabel+", "+H.yLabel+")",!H.text&&0!==H.text||Array.isArray(H.text)||(fe+=(fe?"<br>":"")+H.text),void 0!==H.extraText&&(fe+=(fe?"<br>":"")+H.extraText),re&&""===fe&&!H.hovertemplate&&(""===ce&&re.remove(),fe=ce);var we=H.hovertemplate||!1;if(we){var ye=H.hovertemplateLabels||H;H[me+"Label"]!==ne&&(ye[me+"other"]=ye[me+"Val"],ye[me+"otherLabel"]=ye[me+"Label"]),fe=(fe=_.hovertemplateString(we,ye,W._d3locale,H.eventData[0]||{},H.trace._meta)).replace(L,function(Te,Le){return ce=ae(Le,H.nameLength),""})}return[fe,ce]}function U(H,Y,oe,W){var ne=function(ce){return ce*oe},re=function(ce){return ce*W};H.each(function(ce){var fe=y.select(this);if(ce.del)return fe.remove();var me=fe.select("text.nums"),pe=ce.anchor,we="end"===pe?-1:1,ye={start:1,end:-1,middle:0}[pe],Te=ye*(C+O),Le=Te+ye*(ce.txwidth+O),Oe=0,Re=ce.offset,Ve="middle"===pe;Ve&&(Te-=ce.tx2width/2,Le+=ce.txwidth/2+O),Y&&(Re*=-S,Oe=ce.offset*M),fe.select("path").attr("d",Ve?"M-"+ne(ce.bx/2+ce.tx2width/2)+","+re(Re-ce.by/2)+"h"+ne(ce.bx)+"v"+re(ce.by)+"h-"+ne(ce.bx)+"Z":"M0,0L"+ne(we*C+Oe)+","+re(C+Re)+"v"+re(ce.by/2-C)+"h"+ne(we*ce.bx)+"v-"+re(ce.by)+"H"+ne(we*C+Oe)+"V"+re(Re-C)+"Z");var _e=Oe+Te,Ae=Re+ce.ty0-ce.by/2+O,Fe=ce.textAlign||"auto";"auto"!==Fe&&("left"===Fe&&"start"!==pe?(me.attr("text-anchor","start"),_e=Ve?-ce.bx/2-ce.tx2width/2+O:-ce.bx-O):"right"===Fe&&"end"!==pe&&(me.attr("text-anchor","end"),_e=Ve?ce.bx/2-ce.tx2width/2-O:ce.bx+O)),me.call(l.positionText,ne(_e),re(Ae)),ce.tx2width&&(fe.select("text.name").call(l.positionText,ne(Le+ye*O+Oe),re(Re+ce.ty0-ce.by/2+O)),fe.select("rect").call(v.setRect,ne(Le+(ye-1)*ce.tx2width/2+Oe),re(Re-ce.by/2-1),ne(ce.tx2width),re(ce.by+2)))})}function $(H,Y){var oe=H.index,W=H.trace||{},ne=H.cd[0],re=H.cd[oe]||{};function ce(Te){return Te||b(Te)&&0===Te}var fe=Array.isArray(oe)?function(Te,Le){var Oe=_.castOption(ne,oe,Te);return ce(Oe)?Oe:_.extractOption({},W,"",Le)}:function(Te,Le){return _.extractOption(re,W,Te,Le)};function me(Te,Le,Oe){var Re=fe(Le,Oe);ce(Re)&&(H[Te]=Re)}if(me("hoverinfo","hi","hoverinfo"),me("bgcolor","hbg","hoverlabel.bgcolor"),me("borderColor","hbc","hoverlabel.bordercolor"),me("fontFamily","htf","hoverlabel.font.family"),me("fontSize","hts","hoverlabel.font.size"),me("fontColor","htc","hoverlabel.font.color"),me("nameLength","hnl","hoverlabel.namelength"),me("textAlign","hta","hoverlabel.align"),H.posref="y"===Y||"closest"===Y&&"h"===W.orientation?H.xa._offset+(H.x0+H.x1)/2:H.ya._offset+(H.y0+H.y1)/2,H.x0=_.constrain(H.x0,0,H.xa._length),H.x1=_.constrain(H.x1,0,H.xa._length),H.y0=_.constrain(H.y0,0,H.ya._length),H.y1=_.constrain(H.y1,0,H.ya._length),void 0!==H.xLabelVal&&(H.xLabel="xLabel"in H?H.xLabel:d.hoverLabelText(H.xa,H.xLabelVal,W.xhoverformat),H.xVal=H.xa.c2d(H.xLabelVal)),void 0!==H.yLabelVal&&(H.yLabel="yLabel"in H?H.yLabel:d.hoverLabelText(H.ya,H.yLabelVal,W.yhoverformat),H.yVal=H.ya.c2d(H.yLabelVal)),void 0!==H.zLabelVal&&void 0===H.zLabel&&(H.zLabel=String(H.zLabelVal)),!(isNaN(H.xerr)||"log"===H.xa.type&&H.xerr<=0)){var pe=d.tickText(H.xa,H.xa.c2l(H.xerr),"hover").text;H.xLabel+=void 0!==H.xerrneg?" +"+pe+" / -"+d.tickText(H.xa,H.xa.c2l(H.xerrneg),"hover").text:" \xb1 "+pe,"x"===Y&&(H.distance+=1)}if(!(isNaN(H.yerr)||"log"===H.ya.type&&H.yerr<=0)){var we=d.tickText(H.ya,H.ya.c2l(H.yerr),"hover").text;H.yLabel+=void 0!==H.yerrneg?" +"+we+" / -"+d.tickText(H.ya,H.ya.c2l(H.yerrneg),"hover").text:" \xb1 "+we,"y"===Y&&(H.distance+=1)}var ye=H.hoverinfo||H.trace.hoverinfo;return ye&&"all"!==ye&&(-1===(ye=Array.isArray(ye)?ye:ye.split("+")).indexOf("x")&&(H.xLabel=void 0),-1===ye.indexOf("y")&&(H.yLabel=void 0),-1===ye.indexOf("z")&&(H.zLabel=void 0),-1===ye.indexOf("text")&&(H.text=void 0),-1===ye.indexOf("name")&&(H.name=void 0)),H}function X(H,Y,oe){var W,ne,re=oe.container,ce=oe.fullLayout,fe=ce._size,me=oe.event,pe=!!Y.hLinePoint,we=!!Y.vLinePoint;if(re.selectAll(".spikeline").remove(),we||pe){var ye=h.combine(ce.plot_bgcolor,ce.paper_bgcolor);if(pe){var Te,Le,Oe=Y.hLinePoint;W=Oe&&Oe.xa,"cursor"===(ne=Oe&&Oe.ya).spikesnap?(Te=me.pointerX,Le=me.pointerY):(Te=W._offset+Oe.x,Le=ne._offset+Oe.y);var Re,Ve,_e=T.readability(Oe.color,ye)<1.5?h.contrast(ye):Oe.color,Ae=ne.spikemode,Fe=ne.spikethickness,Pe=ne.spikecolor||_e,Be=d.getPxPosition(H,ne);if(-1!==Ae.indexOf("toaxis")||-1!==Ae.indexOf("across")){if(-1!==Ae.indexOf("toaxis")&&(Re=Be,Ve=Te),-1!==Ae.indexOf("across")){var qe=ne._counterDomainMin,We=ne._counterDomainMax;"free"===ne.anchor&&(qe=Math.min(qe,ne.position),We=Math.max(We,ne.position)),Re=fe.l+qe*fe.w,Ve=fe.l+We*fe.w}re.insert("line",":first-child").attr({x1:Re,x2:Ve,y1:Le,y2:Le,"stroke-width":Fe,stroke:Pe,"stroke-dasharray":v.dashStyle(ne.spikedash,Fe)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:Re,x2:Ve,y1:Le,y2:Le,"stroke-width":Fe+2,stroke:ye}).classed("spikeline",!0).classed("crisp",!0)}-1!==Ae.indexOf("marker")&&re.insert("circle",":first-child").attr({cx:Be+("right"!==ne.side?Fe:-Fe),cy:Le,r:Fe,fill:Pe}).classed("spikeline",!0)}if(we){var Je,ut,Ge=Y.vLinePoint;ne=Ge&&Ge.ya,"cursor"===(W=Ge&&Ge.xa).spikesnap?(Je=me.pointerX,ut=me.pointerY):(Je=W._offset+Ge.x,ut=ne._offset+Ge.y);var Ke,nt,it=T.readability(Ge.color,ye)<1.5?h.contrast(ye):Ge.color,ht=W.spikemode,Tt=W.spikethickness,Ct=W.spikecolor||it,Vt=d.getPxPosition(H,W);if(-1!==ht.indexOf("toaxis")||-1!==ht.indexOf("across")){if(-1!==ht.indexOf("toaxis")&&(Ke=Vt,nt=ut),-1!==ht.indexOf("across")){var Ft=W._counterDomainMin,gt=W._counterDomainMax;"free"===W.anchor&&(Ft=Math.min(Ft,W.position),gt=Math.max(gt,W.position)),Ke=fe.t+(1-gt)*fe.h,nt=fe.t+(1-Ft)*fe.h}re.insert("line",":first-child").attr({x1:Je,x2:Je,y1:Ke,y2:nt,"stroke-width":Tt,stroke:Ct,"stroke-dasharray":v.dashStyle(W.spikedash,Tt)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:Je,x2:Je,y1:Ke,y2:nt,"stroke-width":Tt+2,stroke:ye}).classed("spikeline",!0).classed("crisp",!0)}-1!==ht.indexOf("marker")&&re.insert("circle",":first-child").attr({cx:Je,cy:Vt-("top"!==W.side?Tt:-Tt),r:Tt,fill:Ct}).classed("spikeline",!0)}}}function te(H,Y){return!Y||Y.vLinePoint!==H._spikepoints.vLinePoint||Y.hLinePoint!==H._spikepoints.hLinePoint}function ae(H,Y){return l.plainText(H||"",{len:Y,allowedTags:["br","sub","sup","b","i","em"]})}function J(H,Y,oe){var W=Y[H+"a"],ne=Y[H+"Val"],re=Y.cd[0];if("category"===W.type)ne=W._categoriesMap[ne];else if("date"===W.type){var ce=Y.trace[H+"periodalignment"];if(ce){var fe=Y.cd[Y.index],me=fe[H+"Start"];void 0===me&&(me=fe[H]);var pe=fe[H+"End"];void 0===pe&&(pe=fe[H]);var we=pe-me;"end"===ce?ne+=we:"middle"===ce&&(ne+=we/2)}ne=W.d2c(ne)}return re&&re.t&&re.t.posLetter===W._id&&("group"!==oe.boxmode&&"group"!==oe.violinmode||(ne+=re.t.dPos)),ne}function ee(H){return H.offsetTop+H.clientTop}function se(H){return H.offsetLeft+H.clientLeft}function G(H,Y){var oe=H._fullLayout,W=Y.getBoundingClientRect(),ne=W.x,re=W.y,ce=ne+W.width,fe=re+W.height,me=_.apply3DTransform(oe._invTransform)(ne,re),pe=_.apply3DTransform(oe._invTransform)(ce,fe),we=me[0],ye=me[1],Te=pe[0],Le=pe[1];return{x:we,y:ye,width:Te-we,height:Le-ye,top:Math.min(ye,Le),left:Math.min(we,Te),right:Math.max(we,Te),bottom:Math.max(ye,Le)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../color"),T=x("./helpers").isUnifiedHover;ue.exports=function(_,e,o,a){a=a||{};var l=e.legend;function i(v){a.font[v]||(a.font[v]=l?e.legend.font[v]:e.font[v])}e&&T(e.hovermode)&&(a.font||(a.font={}),i("size"),i("family"),i("color"),l?(a.bgcolor||(a.bgcolor=b.combine(e.legend.bgcolor,e.paper_bgcolor)),a.bordercolor||(a.bordercolor=e.legend.bordercolor)):a.bgcolor||(a.bgcolor=e.paper_bgcolor)),o("hoverlabel.bgcolor",a.bgcolor),o("hoverlabel.bordercolor",a.bordercolor),o("hoverlabel.namelength",a.namelength),y.coerceFont(o,"hoverlabel.font",a.font),o("hoverlabel.align",a.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_){function e(o,a){return void 0!==_[o]?_[o]:y.coerce(T,_,b,o,a)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../dragelement"),_=x("./helpers"),e=x("./layout_attributes"),o=x("./hover");ue.exports={moduleType:"component",name:"fx",constants:x("./constants"),schema:{layout:e},attributes:x("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:x("./layout_global_defaults"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),getDistanceFunction:_.getDistanceFunction,getClosest:_.getClosest,inbox:_.inbox,quadrature:_.quadrature,appendArrayPointValue:_.appendArrayPointValue,castHoverOption:function(a,l,i){return b.castOption(a,l,"hoverlabel."+i)},castHoverinfo:function(a,l,i){return b.castOption(a,i,"hoverinfo",function(v){return b.coerceHoverinfo({hoverinfo:v},{_module:a._module},l)})},hover:o.hover,unhover:T.unhover,loneHover:o.loneHover,loneUnhover:function(a){var l=b.isD3Selection(a)?a:y.select(a);l.selectAll("g.hovertext").remove(),l.selectAll(".spikeline").remove()},click:x("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(x,ue,le){"use strict";var y=x("./constants"),b=x("../../plots/font_attributes"),T=b({editType:"none"});T.family.dflt=y.HOVERFONT,T.size.dflt=y.HOVERFONTSIZE,ue.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:T,grouptitlefont:b({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes"),T=x("./hovermode_defaults"),_=x("./hoverlabel_defaults");ue.exports=function(e,o){function a(h,s){return y.coerce(e,o,b,h,s)}T(e,o)&&(a("hoverdistance"),a("spikedistance")),"select"===a("dragmode")&&a("selectdirection");var l=o._has("mapbox"),i=o._has("geo"),v=o._basePlotModules.length;"zoom"===o.dragmode&&((l||i)&&1===v||l&&i&&2===v)&&(o.dragmode="pan"),_(e,o,a),y.coerceFont(a,"hoverlabel.grouptitlefont",o.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./hoverlabel_defaults"),T=x("./layout_attributes");ue.exports=function(_,e){b(_,e,function(o,a){return y.coerce(_,e,T,o,a)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../lib/regex").counter,T=x("../../plots/domain").attributes,_=x("../../plots/cartesian/constants").idRegex,e=x("../../plot_api/plot_template"),o={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[b("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:T({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function a(v,h,s){var d=h[s+"axes"],p=Object.keys((v._splomAxes||{})[s]||{});return Array.isArray(d)?d:p.length?p:void 0}function l(v,h,s,d,p,f){var g=h(v+"gap",s),m=h("domain."+v);h(v+"side",d);for(var u=new Array(p),w=m[0],c=(m[1]-w)/(p-g),E=c*(1-g),M=0;M<p;M++){var S=w+c*M;u[f?p-1-M:M]=[S,S+E]}return u}function i(v,h,s,d,p){var f,g=new Array(s);function m(u,w){-1!==h.indexOf(w)&&void 0===d[w]?(g[u]=w,d[w]=u):g[u]=""}if(Array.isArray(v))for(f=0;f<s;f++)m(f,v[f]);else for(m(0,p),f=1;f<s;f++)m(f,p+(f+1));return g}ue.exports={moduleType:"component",name:"grid",schema:{layout:{grid:o}},layoutAttributes:o,sizeDefaults:function(v,h){var s=v.grid||{},d=a(h,s,"x"),p=a(h,s,"y");if(v.grid||d||p){var f,g,m=Array.isArray(s.subplots)&&Array.isArray(s.subplots[0]),u=Array.isArray(d),w=Array.isArray(p),c=u&&d!==s.xaxes&&w&&p!==s.yaxes;m?(f=s.subplots.length,g=s.subplots[0].length):(w&&(f=p.length),u&&(g=d.length));var E=e.newContainer(h,"grid"),M=L("rows",f),S=L("columns",g);if(M*S>1){!m&&!u&&!w&&"independent"===L("pattern")&&(m=!0),E._hasSubplotGrid=m;var C,O,I="top to bottom"===L("roworder"),F=m?.3:.1;c&&h._splomGridDflt&&(C=h._splomGridDflt.xside,O=h._splomGridDflt.yside),E._domains={x:l("x",L,m?.2:.1,C,S),y:l("y",L,F,O,M,I)}}else delete h.grid}function L(P,j){return y.coerce(s,E,o,P,j)}},contentDefaults:function(v,h){var s=h.grid;if(s&&s._domains){var d,p,f,g,m,u,w,c=v.grid||{},E=h._subplots,M=s._hasSubplotGrid,S=s.rows,C=s.columns,O="independent"===s.pattern,I=s._axisMap={};if(M){var N=c.subplots||[];u=s.subplots=new Array(S);var F=1;for(d=0;d<S;d++){var L=u[d]=new Array(C),P=N[d]||[];for(p=0;p<C;p++)if(O?(m=1===F?"xy":"x"+F+"y"+F,F++):m=P[p],L[p]="",-1!==E.cartesian.indexOf(m)){if(w=m.indexOf("y"),f=m.slice(0,w),g=m.slice(w),void 0!==I[f]&&I[f]!==p||void 0!==I[g]&&I[g]!==d)continue;L[p]=m,I[f]=p,I[g]=d}}}else{var j=a(h,c,"x"),U=a(h,c,"y");s.xaxes=i(j,E.xaxis,C,I,"x"),s.yaxes=i(U,E.yaxis,S,I,"y")}var $=s._anchors={},X="top to bottom"===s.roworder;for(var te in I){var ae,J,ee,se=te.charAt(0),G=s[se+"side"];if(G.length<8)$[te]="free";else if("x"===se){if("t"===G.charAt(0)===X?(ae=0,J=1,ee=S):(ae=S-1,J=-1,ee=-1),M){var H=I[te];for(d=ae;d!==ee;d+=J)if((m=u[d][H])&&(w=m.indexOf("y"),m.slice(0,w)===te)){$[te]=m.slice(w);break}}else for(d=ae;d!==ee;d+=J)if(-1!==E.cartesian.indexOf(te+(g=s.yaxes[d]))){$[te]=g;break}}else if("l"===G.charAt(0)?(ae=0,J=1,ee=C):(ae=C-1,J=-1,ee=-1),M){var Y=I[te];for(d=ae;d!==ee;d+=J)if((m=u[Y][d])&&(w=m.indexOf("y"),m.slice(w)===te)){$[te]=m.slice(0,w);break}}else for(d=ae;d!==ee;d+=J)if(-1!==E.cartesian.indexOf((f=s.xaxes[d])+te)){$[te]=f;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/constants"),b=x("../../plot_api/plot_template").templatedArray;x("../../constants/axis_placeable_objects"),ue.exports=b("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",y.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",y.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib/to_log_range");ue.exports=function(T,_,e,o){_=_||{};var a="log"===e&&"linear"===_.type;if(a||"linear"===e&&"log"===_.type)for(var i,v,h=T._fullLayout.images,s=_._id.charAt(0),d=0;d<h.length;d++)if(v="images["+d+"].",(i=h[d])[s+"ref"]===_._id){var p=i[s],f=i["size"+s],g=null,m=null;if(a){g=b(p,_.range);var u=f/Math.pow(10,g)/2;m=2*Math.log(u+Math.sqrt(1+u*u))/Math.LN10}else m=(g=Math.pow(10,p))*(Math.pow(10,f/2)-Math.pow(10,-f/2));y(g)?y(m)||(m=null):(g=null,m=null),o(v+s,g),o(v+"size"+s,m)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("../../plots/array_container_defaults"),_=x("./attributes");function e(o,a,l){function i(g,m){return y.coerce(o,a,_,g,m)}var v=i("source");if(!i("visible",!!v))return a;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var h={_fullLayout:l},s=["x","y"],d=0;d<2;d++){var p=s[d],f=b.coerceRef(o,a,h,p,"paper",void 0);"paper"!==f&&b.getFromId(h,f)._imgIndices.push(a._index),b.coercePosition(a,h,i,f,p,0)}return a}ue.exports=function(o,a){T(o,a,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../drawing"),T=x("../../plots/cartesian/axes"),_=x("../../plots/cartesian/axis_ids"),e=x("../../constants/xmlns_namespaces");ue.exports=function(o){var a,l,i=o._fullLayout,v=[],h={},s=[];for(l=0;l<i.images.length;l++){var d=i.images[l];if(d.visible)if("below"===d.layer&&"paper"!==d.xref&&"paper"!==d.yref){a=_.ref2id(d.xref)+_.ref2id(d.yref);var p=i._plots[a];if(!p){s.push(d);continue}p.mainplot&&(a=p.mainplot.id),h[a]||(h[a]=[]),h[a].push(d)}else"above"===d.layer?v.push(d):s.push(d)}var f={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},g={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function m(C){var O=y.select(this);if(this._imgSrc!==C.source)if(O.attr("xmlns",e.svg),C.source&&"data:"===C.source.slice(0,5))O.attr("xlink:href",C.source),this._imgSrc=C.source;else{var I=new Promise(function(N){var F=new Image;function L(){O.remove(),N()}this.img=F,F.setAttribute("crossOrigin","anonymous"),F.onerror=L,F.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var j=P.toDataURL("image/png");O.attr("xlink:href",j),N()},O.on("error",L),F.src=C.source,this._imgSrc=C.source}.bind(this));o._promises.push(I)}}function u(C){var O,I,N=y.select(this),F=T.getFromId(o,C.xref),L=T.getFromId(o,C.yref),P="domain"===T.getRefType(C.xref),j="domain"===T.getRefType(C.yref),U=i._size;O=void 0!==F?"string"==typeof C.xref&&P?F._length*C.sizex:Math.abs(F.l2p(C.sizex)-F.l2p(0)):C.sizex*U.w,I=void 0!==L?"string"==typeof C.yref&&j?L._length*C.sizey:Math.abs(L.l2p(C.sizey)-L.l2p(0)):C.sizey*U.h;var $,X,te=O*f[C.xanchor].offset,ae=I*g[C.yanchor].offset,J=f[C.xanchor].sizing+g[C.yanchor].sizing;switch($=void 0!==F?"string"==typeof C.xref&&P?F._length*C.x+F._offset:F.r2p(C.x)+F._offset:C.x*U.w+U.l,$+=te,X=void 0!==L?"string"==typeof C.yref&&j?L._length*(1-C.y)+L._offset:L.r2p(C.y)+L._offset:U.h-C.y*U.h+U.t,X+=ae,C.sizing){case"fill":J+=" slice";break;case"stretch":J="none"}N.attr({x:$,y:X,width:O,height:I,preserveAspectRatio:J,opacity:C.opacity});var ee=(F&&"domain"!==T.getRefType(C.xref)?F._id:"")+(L&&"domain"!==T.getRefType(C.yref)?L._id:"");b.setClipUrl(N,ee?"clip"+i._uid+ee:null,o)}var w=i._imageLowerLayer.selectAll("image").data(s),c=i._imageUpperLayer.selectAll("image").data(v);w.enter().append("image"),c.enter().append("image"),w.exit().remove(),c.exit().remove(),w.each(function(C){m.bind(this)(C),u.bind(this)(C)}),c.each(function(C){m.bind(this)(C),u.bind(this)(C)});var E=Object.keys(i._plots);for(l=0;l<E.length;l++){var M=i._plots[a=E[l]];if(M.imagelayer){var S=M.imagelayer.selectAll("image").data(h[a]||[]);S.enter().append("image"),S.exit().remove(),S.each(function(C){m.bind(this)(C),u.bind(this)(C)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(x,ue,le){"use strict";ue.exports={moduleType:"component",name:"images",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),includeBasePlot:x("../../plots/cartesian/include_components")("images"),draw:x("./draw"),convertCoords:x("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(x,ue,le){"use strict";var y=x("../../plots/font_attributes"),b=x("../color/attributes");ue.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:y({editType:"legend"}),grouptitlefont:y({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:y({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(x,ue,le){"use strict";ue.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("../../plot_api/plot_template"),_=x("../../plots/attributes"),e=x("./attributes"),o=x("../../plots/layout_attributes"),a=x("./helpers");ue.exports=function(l,i,v){var h,s=l.legend||{},d=T.newContainer(i,"legend");function p(L,P){return b.coerce(s,d,e,L,P)}for(var f=function(L,P){return b.coerce(h._input,h,_,L,P)},g=i.font||{},m=b.coerceFont(p,"grouptitlefont",b.extendFlat({},g,{size:Math.round(1.1*g.size)})),u=0,w=!1,c="normal",E=0;E<v.length;E++)(h=v[E]).visible&&((h.showlegend||h._dfltShowLegend&&!(h._module&&h._module.attributes&&h._module.attributes.showlegend&&!1===h._module.attributes.showlegend.dflt))&&(u++,h.showlegend&&(w=!0,(y.traceIs(h,"pie-like")||!0===h._input.showlegend)&&u++),b.coerceFont(f,"legendgrouptitle.font",m)),(y.traceIs(h,"bar")&&"stack"===i.barmode||-1!==["tonextx","tonexty"].indexOf(h.fill))&&(c=a.isGrouped({traceorder:c})?"grouped+reversed":"reversed"),void 0!==h.legendgroup&&""!==h.legendgroup&&(c=a.isReversed({traceorder:c})?"reversed+grouped":"grouped"));var M=b.coerce(l,i,o,"showlegend",w&&u>1);if(!1===M&&(i.legend=void 0),(!1!==M||s.uirevision)&&(p("uirevision",i.uirevision),!1!==M)){p("bgcolor",i.paper_bgcolor),p("bordercolor"),p("borderwidth");var S,C,O,I=b.coerceFont(p,"font",i.font),N="h"===p("orientation");if(N?(S=0,y.getComponentMethod("rangeslider","isVisible")(l.xaxis)?(C=1.1,O="bottom"):(C=-.1,O="top")):(S=1.02,C=1,O="auto"),p("traceorder",c),a.isGrouped(i.legend)&&p("tracegroupgap"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("x",S),p("xanchor"),p("y",C),p("yanchor",O),p("valign"),b.noneOrAll(s,d,["x","y"]),p("title.text")){p("title.side",N?"left":"top");var F=b.extendFlat({},I,{size:b.bigFont(I.size)});b.coerceFont(p,"title.font",F)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../plots/plots"),_=x("../../registry"),e=x("../../lib/events"),o=x("../dragelement"),a=x("../drawing"),l=x("../color"),i=x("../../lib/svg_text_utils"),v=x("./handle_click"),h=x("./constants"),s=x("../../constants/alignment"),d=s.LINE_SPACING,p=s.FROM_TL,f=s.FROM_BR,g=x("./get_legend_data"),m=x("./style"),u=x("./helpers");function w(I,N,F,L,P){var j=F.data()[0][0].trace,U={event:P,node:F.node(),curveNumber:j.index,expandedIndex:j._expandedIndex,data:I.data,layout:I.layout,frames:I._transitionData._frames,config:I._context,fullData:I._fullData,fullLayout:I._fullLayout};j._group&&(U.group=j._group),_.traceIs(j,"pie-like")&&(U.label=F.datum()[0].label),!1!==e.triggerHandler(I,"plotly_legendclick",U)&&(1===L?N._clickTimeout=setTimeout(function(){I._fullLayout&&v(F,I,L)},I._context.doubleClickDelay):2===L&&(N._clickTimeout&&clearTimeout(N._clickTimeout),I._legendMouseDownTime=0,!1!==e.triggerHandler(I,"plotly_legenddoubleclick",U)&&v(F,I,L)))}function c(I,N,F){var L,P,j=I.data()[0][0],U=j.trace,$=_.traceIs(U,"pie-like"),X=!F._inHover&&N._context.edits.legendText&&!$,te=F._maxNameLength;j.groupTitle?(L=j.groupTitle.text,P=j.groupTitle.font):(P=F.font,F.entries?L=j.text:(L=$?j.label:U.name,U._meta&&(L=b.templateString(L,U._meta))));var ae=b.ensureSingle(I,"text","legendtext");ae.attr("text-anchor","start").call(a.font,P).text(X?E(L,te):L),i.positionText(ae,F.itemwidth+2*h.itemGap,0),X?ae.call(i.makeEditable,{gd:N,text:L}).call(S,I,N,F).on("edit",function(ee){this.text(E(ee,te)).call(S,I,N,F);var se=j.trace._fullInput||{},G={};if(_.hasTransform(se,"groupby")){var H=_.getTransformIndices(se,"groupby"),oe=b.keyedContainer(se,"transforms["+H[H.length-1]+"].styles","target","value.name");oe.set(j.trace._group,ee),G=oe.constructUpdate()}else G.name=ee;return _.call("_guiRestyle",N,G,U.index)}):S(ae,I,N,F)}function E(I,N){var F=Math.max(4,N);if(I&&I.trim().length>=F/2)return I;for(var L=F-(I=I||"").length;L>0;L--)I+=" ";return I}function M(I,N){var F,L=N._context.doubleClickDelay,P=1,j=b.ensureSingle(I,"rect","legendtoggle",function(U){N._context.staticPlot||U.style("cursor","pointer").attr("pointer-events","all"),U.call(l.fill,"rgba(0,0,0,0)")});N._context.staticPlot||(j.on("mousedown",function(){(F=(new Date).getTime())-N._legendMouseDownTime<L?P+=1:(P=1,N._legendMouseDownTime=F)}),j.on("mouseup",function(){if(!N._dragged&&!N._editing){var U=N._fullLayout.legend;(new Date).getTime()-N._legendMouseDownTime>L&&(P=Math.max(P-1,1)),w(N,U,I,P,y.event)}}))}function S(I,N,F,L,P){L._inHover&&I.attr("data-notex",!0),i.convertToTspans(I,F,function(){!function(j,U,$,X){var te=j.data()[0][0];if($._inHover||!te||te.trace.showlegend){var ae=j.select("g[class*=math-group]"),J=ae.node();$||($=U._fullLayout.legend);var G,H,se=$.borderwidth,Y=(1===X?$.title.font:te.groupTitle?te.groupTitle.font:$.font).size*d;if(J){var oe=a.bBox(J);G=oe.height,H=oe.width,1===X?a.setTranslate(ae,se,se+.75*G):a.setTranslate(ae,0,.25*G)}else{var W=j.select(1===X?".legendtitletext":".legendtext"),ne=i.lineCount(W),re=W.node();if(G=Y*ne,H=re?a.bBox(re).width:0,1===X)"left"===$.title.side&&(H+=2*h.itemGap),i.positionText(W,se+h.titlePad,se+Y);else{var ce=2*h.itemGap+$.itemwidth;te.groupTitle&&(ce=h.itemGap,H-=$.itemwidth),i.positionText(W,ce,-Y*((ne-1)/2-.3))}}1===X?($._titleWidth=H,$._titleHeight=G):(te.lineHeight=Y,te.height=Math.max(G,16)+3,te.width=H)}else j.remove()}(N,F,L,P)})}function C(I){return b.isRightAnchor(I)?"right":b.isCenterAnchor(I)?"center":"left"}function O(I){return b.isBottomAnchor(I)?"bottom":b.isMiddleAnchor(I)?"middle":"top"}ue.exports=function(I,N){return N||(N=I._fullLayout.legend||{}),function(F,L){var P,j,U=F._fullLayout,$="legend"+U._uid,X=L._inHover;if(X?(P=L.layer,$+="-hover"):P=U._infolayer,P){if(F._legendMouseDownTime||(F._legendMouseDownTime=0),X){if(!L.entries)return;j=g(L.entries,L)}else{if(!F.calcdata)return;j=U.showlegend&&g(F.calcdata,L)}var te=U.hiddenlabels||[];if(!(X||U.showlegend&&j.length))return P.selectAll(".legend").remove(),U._topdefs.select("#"+$).remove(),T.autoMargin(F,"legend");var ae=b.ensureSingle(P,"g","legend",function(ne){X||ne.attr("pointer-events","all")}),J=b.ensureSingleById(U._topdefs,"clipPath",$,function(ne){ne.append("rect")}),ee=b.ensureSingle(ae,"rect","bg",function(ne){ne.attr("shape-rendering","crispEdges")});ee.call(l.stroke,L.bordercolor).call(l.fill,L.bgcolor).style("stroke-width",L.borderwidth+"px");var se=b.ensureSingle(ae,"g","scrollbox"),G=L.title;if(L._titleWidth=0,L._titleHeight=0,G.text){var H=b.ensureSingle(se,"text","legendtitletext");H.attr("text-anchor","start").call(a.font,G.font).text(G.text),S(H,se,F,L,1)}else se.selectAll(".legendtitletext").remove();var Y=b.ensureSingle(ae,"rect","scrollbar",function(ne){ne.attr(h.scrollBarEnterAttrs).call(l.fill,h.scrollBarColor)}),oe=se.selectAll("g.groups").data(j);oe.enter().append("g").attr("class","groups"),oe.exit().remove();var W=oe.selectAll("g.traces").data(b.identity);W.enter().append("g").attr("class","traces"),W.exit().remove(),W.style("opacity",function(ne){var re=ne[0].trace;return _.traceIs(re,"pie-like")?-1!==te.indexOf(ne[0].label)?.5:1:"legendonly"===re.visible?.5:1}).each(function(){y.select(this).call(c,F,L)}).call(m,F,L).each(function(){X||y.select(this).call(M,F)}),b.syncOrAsync([T.previousPromises,function(){return function(ne,re,ce,fe){var me=ne._fullLayout;fe||(fe=me.legend);var pe=me._size,we=u.isVertical(fe),ye=u.isGrouped(fe),Te=fe.borderwidth,Le=2*Te,Oe=h.itemGap,Re=fe.itemwidth+2*Oe,Ve=2*(Te+Oe),_e=O(fe),Ae=fe.y<0||0===fe.y&&"top"===_e,Fe=fe.y>1||1===fe.y&&"bottom"===_e,Pe=fe.tracegroupgap;fe._maxHeight=Math.max(Ae||Fe?me.height/2:pe.h,30);var Be=0;fe._width=0,fe._height=0;var Mn,ln,Ee,De,qe=(ln=0,Ee=0,(De=(Mn=fe).title.side)&&(-1!==De.indexOf("left")&&(ln=Mn._titleWidth),-1!==De.indexOf("top")&&(Ee=Mn._titleHeight)),[ln,Ee]);if(we)ce.each(function(Mn){var ln=Mn[0].height;a.setTranslate(this,Te+qe[0],Te+qe[1]+fe._height+ln/2+Oe),fe._height+=ln,fe._width=Math.max(fe._width,Mn[0].width)}),Be=Re+fe._width,fe._width+=Oe+Re+Le,fe._height+=Ve,ye&&(re.each(function(Mn,ln){a.setTranslate(this,0,ln*fe.tracegroupgap)}),fe._height+=(fe._lgroupsLength-1)*fe.tracegroupgap);else{var We=C(fe),Ge=Fe||Ae,Ke=me.width/2;fe._maxWidth=Math.max(fe.x<0||0===fe.x&&"right"===We?Ge&&"left"===We?pe.l+pe.w:Ke:fe.x>1||1===fe.x&&"left"===We?Ge&&"right"===We?pe.r+pe.w:Ke:pe.w,2*Re);var nt=0,it=0;ce.each(function(Mn){var ln=Mn[0].width+Re;nt=Math.max(nt,ln),it+=ln}),Be=null;var ht=0;if(ye){var Tt=0,Ct=0,Vt=0;re.each(function(){var Mn=0,ln=0;y.select(this).selectAll("g.traces").each(function(De){var Ie=De[0].width,He=De[0].height;a.setTranslate(this,qe[0],qe[1]+Te+Oe+He/2+ln),ln+=He,Mn=Math.max(Mn,Re+Ie)});var Ee=Mn+Oe;Ct>0&&Ee+Te+Ct>fe._maxWidth?(ht=Math.max(ht,Ct),Ct=0,Vt+=Tt+Pe,Tt=ln):Tt=Math.max(Tt,ln),a.setTranslate(this,Ct,Vt),Ct+=Ee}),fe._width=Math.max(ht,Ct)+Te,fe._height=Vt+Tt+Ve}else{var Ft=ce.size(),gt=it+Le+(Ft-1)*Oe<fe._maxWidth,ft=0,Bt=0,rn=0,un=0;ce.each(function(Mn){var ln=Mn[0].height,Ee=Re+Mn[0].width,De=(gt?Ee:nt)+Oe;De+Te+Bt-Oe>=fe._maxWidth&&(ht=Math.max(ht,un),Bt=0,rn+=ft,fe._height+=ft,ft=0),a.setTranslate(this,qe[0]+Te+Bt,qe[1]+Te+rn+ln/2+Oe),un=Bt+Ee+Oe,Bt+=De,ft=Math.max(ft,ln)}),gt?(fe._width=Bt+Le,fe._height=ft+Ve):(fe._width=Math.max(ht,un)+Le,fe._height+=ft+Ve)}}fe._width=Math.ceil(Math.max(fe._width+qe[0],fe._titleWidth+2*(Te+h.titlePad))),fe._height=Math.ceil(Math.max(fe._height+qe[1],fe._titleHeight+2*(Te+h.itemGap))),fe._effHeight=Math.min(fe._height,fe._maxHeight);var pn=ne._context.edits,dn=pn.legendText||pn.legendPosition;ce.each(function(Mn){var ln=y.select(this).select(".legendtoggle"),Ee=Mn[0].height,De=dn?Re:Be||Re+Mn[0].width;we||(De+=Oe/2),a.setRect(ln,0,-Ee/2,De,Ee)})}(F,oe,W,L)},function(){var ne,re,ce,fe,Ge,Ke,nt,it,me=U._size,pe=L.borderwidth;if(!X){if(nt=C(Ke=(Ge=F)._fullLayout.legend),it=O(Ke),T.autoMargin(Ge,"legend",{x:Ke.x,y:Ke.y,l:Ke._width*p[nt],r:Ke._width*f[nt],b:Ke._effHeight*f[it],t:Ke._effHeight*p[it]}))return;var we=me.l+me.w*L.x-p[C(L)]*L._width,ye=me.t+me.h*(1-L.y)-p[O(L)]*L._effHeight;if(U.margin.autoexpand){var Te=we,Le=ye;we=b.constrain(we,0,U.width-L._width),ye=b.constrain(ye,0,U.height-L._effHeight),we!==Te&&b.log("Constrain legend.x to make legend fit inside graph"),ye!==Le&&b.log("Constrain legend.y to make legend fit inside graph")}a.setTranslate(ae,we,ye)}if(Y.on(".drag",null),ae.on("wheel",null),X||L._height<=L._maxHeight||F._context.staticPlot){var Oe=L._effHeight;X&&(Oe=L._height),ee.attr({width:L._width-pe,height:Oe-pe,x:pe/2,y:pe/2}),a.setTranslate(se,0,0),J.select("rect").attr({width:L._width-2*pe,height:Oe-2*pe,x:pe,y:pe}),a.setClipUrl(se,$,F),a.setRect(Y,0,0,0,0),delete L._scrollY}else{var Re,_e,Ae=Math.max(h.scrollBarMinHeight,L._effHeight*L._effHeight/L._height),Fe=L._effHeight-Ae-2*h.scrollBarMargin,Pe=L._height-L._effHeight,Be=Fe/Pe,qe=Math.min(L._scrollY||0,Pe);ee.attr({width:L._width-2*pe+h.scrollBarWidth+h.scrollBarMargin,height:L._effHeight-pe,x:pe/2,y:pe/2}),J.select("rect").attr({width:L._width-2*pe+h.scrollBarWidth+h.scrollBarMargin,height:L._effHeight-2*pe,x:pe,y:pe+qe}),a.setClipUrl(se,$,F),ut(qe,Ae,Be),ae.on("wheel",function(){ut(qe=b.constrain(L._scrollY+y.event.deltaY/Fe*Pe,0,Pe),Ae,Be),0!==qe&&qe!==Pe&&y.event.preventDefault()});var We=y.behavior.drag().on("dragstart",function(){var Ge=y.event.sourceEvent;Re="touchstart"===Ge.type?Ge.changedTouches[0].clientY:Ge.clientY,_e=qe}).on("drag",function(){var Ge=y.event.sourceEvent;2===Ge.buttons||Ge.ctrlKey||ut(qe=function(Ke,nt,it){return b.constrain((it-nt)/Be+Ke,0,Pe)}(_e,Re,"touchmove"===Ge.type?Ge.changedTouches[0].clientY:Ge.clientY),Ae,Be)});Y.call(We);var Je=y.behavior.drag().on("dragstart",function(){var Ge=y.event.sourceEvent;"touchstart"===Ge.type&&(Re=Ge.changedTouches[0].clientY,_e=qe)}).on("drag",function(){var Ge=y.event.sourceEvent;"touchmove"===Ge.type&&ut(qe=function(Ke,nt,it){return b.constrain((nt-it)/Be+Ke,0,Pe)}(_e,Re,Ge.changedTouches[0].clientY),Ae,Be)});se.call(Je)}function ut(Ge,Ke,nt){L._scrollY=F._fullLayout.legend._scrollY=Ge,a.setTranslate(se,0,-Ge),a.setRect(Y,L._width,h.scrollBarMargin+Ge*nt,h.scrollBarWidth,Ke),J.select("rect").attr("y",pe+Ge)}F._context.edits.legendPosition&&(ae.classed("cursor-move",!0),o.init({element:ae.node(),gd:F,prepFn:function(){var Ge=a.getTranslate(ae);ce=Ge.x,fe=Ge.y},moveFn:function(Ge,Ke){var nt=ce+Ge,it=fe+Ke;a.setTranslate(ae,nt,it),ne=o.align(nt,0,me.l,me.l+me.w,L.xanchor),re=o.align(it,0,me.t+me.h,me.t,L.yanchor)},doneFn:function(){void 0!==ne&&void 0!==re&&_.call("_guiRelayout",F,{"legend.x":ne,"legend.y":re})},clickFn:function(Ge,Ke){var nt=P.selectAll("g.traces").filter(function(){var it=this.getBoundingClientRect();return Ke.clientX>=it.left&&Ke.clientX<=it.right&&Ke.clientY>=it.top&&Ke.clientY<=it.bottom});nt.size()>0&&w(F,ae,nt,Ge,Ke)}}))}],F)}}(I,N)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("./helpers");ue.exports=function(T,_){var e,o,a=_._inHover,l=b.isGrouped(_),i=b.isReversed(_),v={},h=[],s=!1,d={},p=0,f=0;function g(U,$){if(""!==U&&b.isGrouped(_))-1===h.indexOf(U)?(h.push(U),s=!0,v[U]=[$]):v[U].push($);else{var X="~~i"+p;h.push(X),v[X]=[$],p++}}for(e=0;e<T.length;e++){var m=T[e],u=m[0],w=u.trace,c=w.legendgroup;if(a||w.visible&&w.showlegend)if(y.traceIs(w,"pie-like"))for(d[c]||(d[c]={}),o=0;o<m.length;o++){var E=m[o].label;d[c][E]||(g(c,{label:E,color:m[o].color,i:m[o].i,trace:w,pts:m[o].pts}),d[c][E]=!0,f=Math.max(f,(E||"").length))}else g(c,u),f=Math.max(f,(w.name||"").length)}if(!h.length)return[];var M=!s||!l,S=[];for(e=0;e<h.length;e++){var C=v[h[e]];S.push(M?C[0]:C)}for(M&&(S=[S]),e=0;e<S.length;e++){var O=1/0;for(o=0;o<S[e].length;o++){var I=S[e][o].trace.legendrank;O>I&&(O=I)}S[e][0]._groupMinRank=O,S[e][0]._preGroupSort=e}var N=function(U,$){return U.trace.legendrank-$.trace.legendrank||U._preSort-$._preSort};for(S.forEach(function(U,$){U[0]._preGroupSort=$}),S.sort(function(U,$){return U[0]._groupMinRank-$[0]._groupMinRank||U[0]._preGroupSort-$[0]._preGroupSort}),e=0;e<S.length;e++){S[e].forEach(function(U,$){U._preSort=$}),S[e].sort(N);var F=S[e][0].trace,L=null;for(o=0;o<S[e].length;o++){var P=S[e][o].trace.legendgrouptitle;if(P&&P.text){L=P,a&&(P.font=_._groupTitleFont);break}}if(i&&S[e].reverse(),L){var j=!1;for(o=0;o<S[e].length;o++)if(y.traceIs(S[e][o].trace,"pie-like")){j=!0;break}S[e].unshift({i:-1,groupTitle:L,noClick:j,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:"toggleitem"===_.groupclick||F.visible}})}for(o=0;o<S[e].length;o++)S[e][o]=[S[e][o]]}return _._lgroupsLength=S.length,_._maxNameLength=f,S}},{"../../registry":638,"./helpers":422}],421:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../registry"),T=!0;ue.exports=function(_,e,o){var a=e._fullLayout;if(!e._dragged&&!e._editing){var l,i=a.legend.itemclick,v=a.legend.itemdoubleclick,h=a.legend.groupclick;if(1===o&&"toggle"===i&&"toggleothers"===v&&T&&e.data&&e._context.showTips&&y.notifier(y._(e,"Double-click on legend to isolate one trace"),"long"),T=!1,1===o?l=i:2===o&&(l=v),l){var s="togglegroup"===h,d=a.hiddenlabels?a.hiddenlabels.slice():[],p=_.data()[0][0];if(!p.groupTitle||!p.noClick){var f,g,m,u,w,c=e._fullData,E=p.trace,M=E.legendgroup,S={},C=[],O=[],I=[];if(b.traceIs(E,"pie-like")){var N=p.label,F=d.indexOf(N);"toggle"===l?-1===F?d.push(N):d.splice(F,1):"toggleothers"===l&&(d=[],e.calcdata[0].forEach(function(Y){N!==Y.label&&d.push(Y.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===d.length&&-1===F&&(d=[])),b.call("_guiRelayout",e,"hiddenlabels",d)}else{var L,P=M&&M.length,j=[];if(P)for(f=0;f<c.length;f++)(L=c[f]).visible&&L.legendgroup===M&&j.push(f);if("toggle"===l){var U;switch(E.visible){case!0:U="legendonly";break;case!1:U=!1;break;case"legendonly":U=!0}if(P)if(s)for(f=0;f<c.length;f++)!1!==c[f].visible&&c[f].legendgroup===M&&H(c[f],U);else H(E,U);else H(E,U)}else if("toggleothers"===l){var te,J=!0;for(f=0;f<c.length;f++)if(te=!0!==c[f].showlegend,!(c[f]===E||te||P&&c[f].legendgroup===M||!0!==c[f].visible||b.traceIs(c[f],"notLegendIsolatable"))){J=!1;break}for(f=0;f<c.length;f++)if(!1!==c[f].visible&&!b.traceIs(c[f],"notLegendIsolatable"))switch(E.visible){case"legendonly":H(c[f],!0);break;case!0:te=!0!==c[f].showlegend&&!c[f].legendgroup,H(c[f],!!(c[f]===E||P&&c[f].legendgroup===M||te)||!!J||"legendonly")}}for(f=0;f<O.length;f++)if(m=O[f]){var ee=m.constructUpdate(),se=Object.keys(ee);for(g=0;g<se.length;g++)(S[u=se[g]]=S[u]||[])[I[f]]=ee[u]}for(w=Object.keys(S),f=0;f<w.length;f++)for(u=w[f],g=0;g<C.length;g++)S[u].hasOwnProperty(g)||(S[u][g]=void 0);b.call("_guiRestyle",e,S,C)}}}}function G(Y,oe,W){var ne=C.indexOf(Y),re=S[oe];return re||(re=S[oe]=[]),-1===C.indexOf(Y)&&(C.push(Y),ne=C.length-1),re[ne]=W,ne}function H(Y,oe){if(!p.groupTitle||s){var W=Y._fullInput;if(b.hasTransform(W,"groupby")){var ne=O[W.index];if(!ne){var re=b.getTransformIndices(W,"groupby");ne=y.keyedContainer(W,"transforms["+re[re.length-1]+"].styles","target","value.visible"),O[W.index]=ne}var fe=ne.get(Y._group);void 0===fe&&(fe=!0),!1!==fe&&ne.set(Y._group,oe),I[W.index]=G(W.index,"visible",!1!==W.visible)}else G(W.index,"visible",!1!==W.visible&&oe)}}}},{"../../lib":503,"../../registry":638}],422:[function(x,ue,le){"use strict";le.isGrouped=function(y){return-1!==(y.traceorder||"").indexOf("grouped")},le.isVertical=function(y){return"h"!==y.orientation},le.isReversed=function(y){return-1!==(y.traceorder||"").indexOf("reversed")}},{}],423:[function(x,ue,le){"use strict";ue.exports={moduleType:"component",name:"legend",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),draw:x("./draw"),style:x("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../registry"),T=x("../../lib"),_=T.strTranslate,e=x("../drawing"),o=x("../color"),a=x("../colorscale/helpers").extractOpts,l=x("../../traces/scatter/subtypes"),i=x("../../traces/pie/style_one"),v=x("../../traces/pie/helpers").castOption,h=x("./constants");function s(f,g){return(g?"radial":"horizontal")+(f?"":"reversed")}function d(f){var g=f[0].trace,m=g.contours,u=l.hasLines(g),w=l.hasMarkers(g),c=g.visible&&g.fill&&"none"!==g.fill,E=!1,M=!1;if(m){var S=m.coloring;"lines"===S?E=!0:u="none"===S||"heatmap"===S||m.showlines,"constraint"===m.type?c="="!==m._operation:"fill"!==S&&"heatmap"!==S||(M=!0)}return{showMarker:w,showLine:u,showFill:c,showGradientLine:E,showGradientFill:M,anyLine:u||E,anyFill:c||M}}function p(f,g,m){return f&&T.isArrayOrTypedArray(f)?g:f>m?m:f}ue.exports=function(f,g,m){m||(m=g._fullLayout.legend);var w="constant"===m.itemsizing,c=m.itemwidth,M=_((c+2*h.itemGap)/2,0),S=function(I,N,F,L){var P;if(I+1)P=I;else{if(!(N&&N.width>0))return 0;P=N.width}return w?L:Math.min(P,F)};function C(I,N,F){var L=I[0].trace,P=L.marker||{},j=P.line||{},U=F?L.visible&&L.type===F:b.traceIs(L,"bar"),$=y.select(N).select("g.legendpoints").selectAll("path.legend"+F).data(U?[I]:[]);$.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),$.exit().remove(),$.each(function(X){var te=y.select(this),ae=X[0],J=S(ae.mlw,P.line,5,2);te.style("stroke-width",J+"px");var ee=ae.mcc;if(!m._inHover&&"mc"in ae){var se=a(P),G=se.mid;void 0===G&&(G=(se.max+se.min)/2),ee=e.tryColorscale(P,"")(G)}var H=ee||ae.mc||P.color,Y=P.pattern,oe=Y&&e.getPatternAttr(Y.shape,0,"");if(oe){var W=e.getPatternAttr(Y.bgcolor,0,null),ne=e.getPatternAttr(Y.fgcolor,0,null),re=Y.fgopacity,ce=p(Y.size,8,10),fe=p(Y.solidity,.5,1);te.call(e.pattern,"legend",g,"legend-"+L.uid,oe,ce,fe,ee,Y.fillmode,W,ne,re)}else te.call(o.fill,H);J&&o.stroke(te,ae.mlc||j.color)})}function O(I,N,F){var L=I[0],P=L.trace,j=F?P.visible&&P.type===F:b.traceIs(P,F),U=y.select(N).select("g.legendpoints").selectAll("path.legend"+F).data(j?[I]:[]);if(U.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),U.exit().remove(),U.size()){var $=(P.marker||{}).line,X=S(v($.width,L.pts),$,5,2),te=T.minExtend(P,{marker:{line:{width:X}}});te.marker.line.color=$.color;var ae=T.minExtend(L,{trace:te});i(U,ae,te)}}f.each(function(I){var N=y.select(this),F=T.ensureSingle(N,"g","layers");F.style("opacity",I[0].trace.opacity);var L=m.valign,P=I[0].lineHeight,j=I[0].height;F.attr("transform","middle"!==L&&P&&j?_(0,{top:1,bottom:-1}[L]*(.5*(P-j+3))):null),F.selectAll("g.legendfill").data([I]).enter().append("g").classed("legendfill",!0),F.selectAll("g.legendlines").data([I]).enter().append("g").classed("legendlines",!0);var $=F.selectAll("g.legendsymbols").data([I]);$.enter().append("g").classed("legendsymbols",!0),$.selectAll("g.legendpoints").data([I]).enter().append("g").classed("legendpoints",!0)}).each(function(I){var N,F=I[0].trace,L=[];if(F.visible)switch(F.type){case"histogram2d":case"heatmap":L=[["M-15,-2V4H15V-2Z"]],N=!0;break;case"choropleth":case"choroplethmapbox":L=[["M-6,-6V6H6V-6Z"]],N=!0;break;case"densitymapbox":L=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],N="radial";break;case"cone":L=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],N=!1;break;case"streamtube":L=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],N=!1;break;case"surface":L=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],N=!0;break;case"mesh3d":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],N=!1;break;case"volume":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],N=!0;break;case"isosurface":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],N=!1}var P=y.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(L);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",M).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(j,U){var $,X=y.select(this),te=a(F),ae=te.colorscale,J=te.reversescale;if(ae){if(!N){var ee=ae.length;$=0===U?ae[J?ee-1:0][1]:1===U?ae[J?0:ee-1][1]:ae[Math.floor((ee-1)/2)][1]}}else{var se=F.vertexcolor||F.facecolor||F.color;$=T.isArrayOrTypedArray(se)?se[U]||se[0]:se}X.attr("d",j[0]),$?X.call(o.fill,$):X.call(function(G){G.size()&&e.gradient(G,g,"legendfill-"+F.uid,s(J,"radial"===N),ae,"fill")})})}).each(function(I){var N=I[0].trace,F="waterfall"===N.type;if(I[0]._distinct&&F){var L=I[0].trace[I[0].dir].marker;return I[0].mc=L.color,I[0].mlw=L.line.width,I[0].mlc=L.line.color,C(I,this,"waterfall")}var P=[];N.visible&&F&&(P=I[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var j=y.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);j.enter().append("path").classed("legendwaterfall",!0).attr("transform",M).style("stroke-miterlimit",1),j.exit().remove(),j.each(function(U){var $=y.select(this),X=N[U[0]].marker,te=S(void 0,X.line,5,2);$.attr("d",U[1]).style("stroke-width",te+"px").call(o.fill,X.color),te&&$.call(o.stroke,X.line.color)})}).each(function(I){C(I,this,"funnel")}).each(function(I){C(I,this)}).each(function(I){var N=I[0].trace,F=y.select(this).select("g.legendpoints").selectAll("path.legendbox").data(N.visible&&b.traceIs(N,"box-violin")?[I]:[]);F.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),F.exit().remove(),F.each(function(){var L=y.select(this);if("all"!==N.boxpoints&&"all"!==N.points||0!==o.opacity(N.fillcolor)||0!==o.opacity((N.line||{}).color)){var P=S(void 0,N.line,5,2);L.style("stroke-width",P+"px").call(o.fill,N.fillcolor),P&&o.stroke(L,N.line.color)}else{var j=T.minExtend(N,{marker:{size:w?12:T.constrain(N.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});F.call(e.pointStyle,j,g)}})}).each(function(I){O(I,this,"funnelarea")}).each(function(I){O(I,this,"pie")}).each(function(I){var N,F,L=d(I),P=L.showFill,j=L.showLine,U=L.showGradientLine,$=L.showGradientFill,X=L.anyFill,te=L.anyLine,ae=I[0],J=ae.trace,ee=a(J),se=ee.colorscale,G=ee.reversescale,H=l.hasMarkers(J)||!X?"M5,0":te?"M5,-2":"M5,-3",Y=y.select(this),oe=Y.select(".legendfill").selectAll("path").data(P||$?[I]:[]);if(oe.enter().append("path").classed("js-fill",!0),oe.exit().remove(),oe.attr("d",H+"h"+c+"v6h-"+c+"z").call(function(re){re.size()&&(P?e.fillGroupStyle(re,g):e.gradient(re,g,"legendfill-"+J.uid,s(G),se,"fill"))}),j||U){var W=S(void 0,J.line,10,5);F=T.minExtend(J,{line:{width:W}}),N=[T.minExtend(ae,{trace:F})]}var ne=Y.select(".legendlines").selectAll("path").data(j||U?[N]:[]);ne.enter().append("path").classed("js-line",!0),ne.exit().remove(),ne.attr("d",H+(U?"l"+c+",0.0001":"h"+c)).call(j?e.lineGroupStyle:function(re){if(re.size()){var ce="legendline-"+J.uid;e.lineGroupStyle(re),e.gradient(re,g,ce,s(G),se,"stroke")}})}).each(function(I){var N,F,L=d(I),U=L.showLine,$=L.showMarker,X=I[0],te=X.trace,ae=!$&&!L.anyLine&&!L.anyFill&&l.hasText(te);function J(ne,re,ce,fe){var me=T.nestedProperty(te,ne).get(),pe=T.isArrayOrTypedArray(me)&&re?re(me):me;if(w&&pe&&void 0!==fe&&(pe=fe),ce){if(pe<ce[0])return ce[0];if(pe>ce[1])return ce[1]}return pe}function ee(ne){return X._distinct&&X.index&&ne[X.index]?ne[X.index]:ne[0]}if($||ae||U){var se={},G={};if($){se.mc=J("marker.color",ee),se.mx=J("marker.symbol",ee),se.mo=J("marker.opacity",T.mean,[.2,1]),se.mlc=J("marker.line.color",ee),se.mlw=J("marker.line.width",T.mean,[0,5],2),G.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var H=J("marker.size",T.mean,[2,16],12);se.ms=H,G.marker.size=H}U&&(G.line={width:J("line.width",ee,[0,10],5)}),ae&&(se.tx="Aa",se.tp=J("textposition",ee),se.ts=10,se.tc=J("textfont.color",ee),se.tf=J("textfont.family",ee)),N=[T.minExtend(X,se)],(F=T.minExtend(te,G)).selectedpoints=null,F.texttemplate=null}var Y=y.select(this).select("g.legendpoints"),oe=Y.selectAll("path.scatterpts").data($?N:[]);oe.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",M),oe.exit().remove(),oe.call(e.pointStyle,F,g),$&&(N[0].mrc=3);var W=Y.selectAll("g.pointtext").data(ae?N:[]);W.enter().append("g").classed("pointtext",!0).append("text").attr("transform",M),W.exit().remove(),W.selectAll("text").call(e.textPointStyle,F,g)}).each(function(I){var N=I[0].trace,F=y.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(N.visible&&"candlestick"===N.type?[I,I]:[]);F.enter().append("path").classed("legendcandle",!0).attr("d",function(L,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",M).style("stroke-miterlimit",1),F.exit().remove(),F.each(function(L,P){var j=y.select(this),U=N[P?"increasing":"decreasing"],$=S(void 0,U.line,5,2);j.style("stroke-width",$+"px").call(o.fill,U.fillcolor),$&&o.stroke(j,U.line.color)})}).each(function(I){var N=I[0].trace,F=y.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(N.visible&&"ohlc"===N.type?[I,I]:[]);F.enter().append("path").classed("legendohlc",!0).attr("d",function(L,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",M).style("stroke-miterlimit",1),F.exit().remove(),F.each(function(L,P){var j=y.select(this),U=N[P?"increasing":"decreasing"],$=S(void 0,U.line,5,2);j.style("fill","none").call(e.dashLine,U.line.dash,$),$&&o.stroke(j,U.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":906,"../../traces/pie/style_one":912,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(x,ue,le){"use strict";x("./constants"),ue.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../plots/plots"),T=x("../../plots/cartesian/axis_ids"),_=x("../../fonts/ploticon"),e=x("../shapes/draw").eraseActiveShape,o=x("../../lib"),a=o._,l=ue.exports={};function i(u,w){var c,E,M=w.currentTarget,S=M.getAttribute("data-attr"),C=M.getAttribute("data-val")||!0,O=u._fullLayout,I={},N=T.list(u,null,!0),F=O._cartesianSpikesEnabled;if("zoom"===S){var L,P="in"===C?.5:2,j=(1+P)/2,U=(1-P)/2;for(E=0;E<N.length;E++)if(!(c=N[E]).fixedrange)if(L=c._name,"auto"===C)I[L+".autorange"]=!0;else if("reset"===C){if(void 0===c._rangeInitial)I[L+".autorange"]=!0;else{var $=c._rangeInitial.slice();I[L+".range[0]"]=$[0],I[L+".range[1]"]=$[1]}void 0!==c._showSpikeInitial&&(I[L+".showspikes"]=c._showSpikeInitial,"on"!==F||c._showSpikeInitial||(F="off"))}else{var X=[c.r2l(c.range[0]),c.r2l(c.range[1])],te=[j*X[0]+U*X[1],j*X[1]+U*X[0]];I[L+".range[0]"]=c.l2r(te[0]),I[L+".range[1]"]=c.l2r(te[1])}}else"hovermode"!==S||"x"!==C&&"y"!==C||M.setAttribute("data-val",C=O._isHoriz?"y":"x"),I[S]=C;O._cartesianSpikesEnabled=F,y.call("_guiRelayout",u,I)}function v(u,w){for(var c=w.currentTarget,E=c.getAttribute("data-attr"),M=c.getAttribute("data-val")||!0,S=u._fullLayout._subplots.gl3d||[],C={},O=E.split("."),I=0;I<S.length;I++)C[S[I]+"."+O[1]]=M;C.dragmode="pan"===M?M:"zoom",y.call("_guiRelayout",u,C)}function h(u,w){for(var c=w.currentTarget.getAttribute("data-attr"),E="resetLastSave"===c,M="resetDefault"===c,S=u._fullLayout,C=S._subplots.gl3d||[],O={},I=0;I<C.length;I++){var N,F=C[I],L=F+".camera",P=F+".aspectratio",j=F+".aspectmode",U=S[F]._scene;E?(O[L+".up"]=U.viewInitial.up,O[L+".eye"]=U.viewInitial.eye,O[L+".center"]=U.viewInitial.center,N=!0):M&&(O[L+".up"]=null,O[L+".eye"]=null,O[L+".center"]=null,N=!0),N&&(O[P+".x"]=U.viewInitial.aspectratio.x,O[P+".y"]=U.viewInitial.aspectratio.y,O[P+".z"]=U.viewInitial.aspectratio.z,O[j]=U.viewInitial.aspectmode)}y.call("_guiRelayout",u,O)}function s(u,w){var c=w.currentTarget,E=c._previousVal,M=u._fullLayout,S=M._subplots.gl3d||[],C=["xaxis","yaxis","zaxis"],O={},I={};if(E)I=E,c._previousVal=null;else{for(var N=0;N<S.length;N++){var F=S[N],L=M[F],P=F+".hovermode";O[P]=L.hovermode,I[P]=!1;for(var j=0;j<3;j++){var U=C[j],$=F+"."+U+".showspikes";I[$]=!1,O[$]=L[U].showspikes}}c._previousVal=O}return I}function d(u,w){for(var c=w.currentTarget,E=c.getAttribute("data-attr"),M=c.getAttribute("data-val")||!0,S=u._fullLayout,C=S._subplots.geo||[],O=0;O<C.length;O++){var I=C[O];if("zoom"===E){var F=S[I].projection.scale;y.call("_guiRelayout",u,I+".projection.scale","in"===M?2*F:.5*F)}}"reset"===E&&m(u,"geo")}function p(u){var w=u._fullLayout;return!w.hovermode&&(w._has("cartesian")?w._isHoriz?"y":"x":"closest")}function f(u){var w=p(u);y.call("_guiRelayout",u,"hovermode",w)}function g(u,w){for(var c=w.currentTarget.getAttribute("data-val"),E=u._fullLayout,M=E._subplots.mapbox||[],S={},C=0;C<M.length;C++){var O=M[C],I=E[O].zoom;S[O+".zoom"]="in"===c?1.05*I:I/1.05}y.call("_guiRelayout",u,S)}function m(u,w){for(var c=u._fullLayout,E=c._subplots[w]||[],M={},S=0;S<E.length;S++)for(var C=E[S],O=c[C]._subplot.viewInitial,I=Object.keys(O),N=0;N<I.length;N++){var F=I[N];M[C+"."+F]=O[F]}y.call("_guiRelayout",u,M)}l.toImage={name:"toImage",title:function(u){return a(u,"png"===((u._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:_.camera,click:function(u){var w=u._context.toImageButtonOptions,c={format:w.format||"png"};o.notifier(a(u,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==c.format&&o.isIE()&&(o.notifier(a(u,"IE only supports svg.  Changing format to svg."),"long"),c.format="svg"),["filename","width","height","scale"].forEach(function(E){E in w&&(c[E]=w[E])}),y.call("downloadImage",u,c).then(function(E){o.notifier(a(u,"Snapshot succeeded")+" - "+E,"long")}).catch(function(){o.notifier(a(u,"Sorry, there was a problem downloading your snapshot!"),"long")})}},l.sendDataToCloud={name:"sendDataToCloud",title:function(u){return a(u,"Edit in Chart Studio")},icon:_.disk,click:function(u){b.sendDataToCloud(u)}},l.editInChartStudio={name:"editInChartStudio",title:function(u){return a(u,"Edit in Chart Studio")},icon:_.pencil,click:function(u){b.sendDataToCloud(u)}},l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(u){return a(u,"Zoom")},attr:"dragmode",val:"zoom",icon:_.zoombox,click:i},l.pan2d={name:"pan2d",_cat:"pan",title:function(u){return a(u,"Pan")},attr:"dragmode",val:"pan",icon:_.pan,click:i},l.select2d={name:"select2d",_cat:"select",title:function(u){return a(u,"Box Select")},attr:"dragmode",val:"select",icon:_.selectbox,click:i},l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(u){return a(u,"Lasso Select")},attr:"dragmode",val:"lasso",icon:_.lasso,click:i},l.drawclosedpath={name:"drawclosedpath",title:function(u){return a(u,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:_.drawclosedpath,click:i},l.drawopenpath={name:"drawopenpath",title:function(u){return a(u,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:_.drawopenpath,click:i},l.drawline={name:"drawline",title:function(u){return a(u,"Draw line")},attr:"dragmode",val:"drawline",icon:_.drawline,click:i},l.drawrect={name:"drawrect",title:function(u){return a(u,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:_.drawrect,click:i},l.drawcircle={name:"drawcircle",title:function(u){return a(u,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:_.drawcircle,click:i},l.eraseshape={name:"eraseshape",title:function(u){return a(u,"Erase active shape")},icon:_.eraseshape,click:e},l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(u){return a(u,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:i},l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(u){return a(u,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:i},l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(u){return a(u,"Autoscale")},attr:"zoom",val:"auto",icon:_.autoscale,click:i},l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(u){return a(u,"Reset axes")},attr:"zoom",val:"reset",icon:_.home,click:i},l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(u){return a(u,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:i},l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(u){return a(u,"Compare data on hover")},attr:"hovermode",val:function(u){return u._fullLayout._isHoriz?"y":"x"},icon:_.tooltip_compare,gravity:"ne",click:i},l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(u){return a(u,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:_.zoombox,click:v},l.pan3d={name:"pan3d",_cat:"pan",title:function(u){return a(u,"Pan")},attr:"scene.dragmode",val:"pan",icon:_.pan,click:v},l.orbitRotation={name:"orbitRotation",title:function(u){return a(u,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:_["3d_rotate"],click:v},l.tableRotation={name:"tableRotation",title:function(u){return a(u,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:_["z-axis"],click:v},l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(u){return a(u,"Reset camera to default")},attr:"resetDefault",icon:_.home,click:h},l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(u){return a(u,"Reset camera to last save")},attr:"resetLastSave",icon:_.movie,click:h},l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(u,w){var c=s(u,w);y.call("_guiRelayout",u,c)}},l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(u){return a(u,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:d},l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(u){return a(u,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:d},l.resetGeo={name:"resetGeo",_cat:"reset",title:function(u){return a(u,"Reset")},attr:"reset",val:null,icon:_.autoscale,click:d},l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:f},l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:f},l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:f},l.resetViewSankey={name:"resetSankeyGroup",title:function(u){return a(u,"Reset view")},icon:_.home,click:function(u){for(var w={"node.groups":[],"node.x":[],"node.y":[]},c=0;c<u._fullData.length;c++){var E=u._fullData[c]._viewInitial;w["node.groups"].push(E.node.groups.slice()),w["node.x"].push(E.node.x.slice()),w["node.y"].push(E.node.y.slice())}y.call("restyle",u,w)}},l.toggleHover={name:"toggleHover",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(u,w){var c=s(u,w);c.hovermode=p(u),y.call("_guiRelayout",u,c)}},l.resetViews={name:"resetViews",title:function(u){return a(u,"Reset views")},icon:_.home,click:function(u,w){var c=w.currentTarget;c.setAttribute("data-attr","zoom"),c.setAttribute("data-val","reset"),i(u,w),c.setAttribute("data-attr","resetLastSave"),h(u,w),m(u,"geo"),m(u,"mapbox")}},l.toggleSpikelines={name:"toggleSpikelines",title:function(u){return a(u,"Toggle Spike Lines")},icon:_.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(u){var w=u._fullLayout;w._cartesianSpikesEnabled="on"===w._cartesianSpikesEnabled?"off":"on",y.call("_guiRelayout",u,function(E){for(var M="on"===E._fullLayout._cartesianSpikesEnabled,S=T.list(E,null,!0),C={},O=0;O<S.length;O++){var I=S[O];C[I._name+".showspikes"]=!!M||I._showSpikeInitial}return C}(u))}},l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(u){return a(u,"Reset view")},attr:"reset",icon:_.home,click:function(u){m(u,"mapbox")}},l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(u){return a(u,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:g},l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(u){return a(u,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:g}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(x,ue,le){"use strict";var y=x("./buttons"),b=Object.keys(y),T=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],_=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(T),e=[];b.forEach(function(o){!function(a){if(-1===_.indexOf(a._cat||a.name)){var l=a.name,i=(a._cat||a.name).toLowerCase();-1===e.indexOf(l)&&e.push(l),-1===e.indexOf(i)&&e.push(i)}}(y[o])}),e.sort(),ue.exports={DRAW_MODES:T,backButtons:_,foreButtons:e}},{"./buttons":426}],428:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../color"),T=x("../../plot_api/plot_template"),_=x("./attributes");ue.exports=function(e,o){var a=e.modebar||{},l=T.newContainer(o,"modebar");function i(h,s){return y.coerce(a,l,_,h,s)}i("orientation"),i("bgcolor",b.addOpacity(o.paper_bgcolor,.5));var v=b.contrast(b.rgb(o.modebar.bgcolor));i("color",b.addOpacity(v,.3)),i("activecolor",b.addOpacity(v,.7)),i("uirevision",o.uirevision),i("add"),i("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(x,ue,le){"use strict";ue.exports={moduleType:"component",name:"modebar",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),manage:x("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axis_ids"),b=x("../../traces/scatter/subtypes"),T=x("../../registry"),_=x("../fx/helpers").isUnifiedHover,e=x("./modebar"),o=x("./buttons"),a=x("./constants").DRAW_MODES,l=x("../../lib").extendDeep;ue.exports=function(i){var v=i._fullLayout,h=i._context,s=v._modeBar;if(h.displayModeBar||h.watermark){if(!Array.isArray(h.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(h.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var d,p=h.modeBarButtons;d=Array.isArray(p)&&p.length?function(f){for(var g=l([],f),m=0;m<g.length;m++)for(var u=g[m],w=0;w<u.length;w++){var c=u[w];if("string"==typeof c){if(void 0===o[c])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));g[m][w]=o[c]}}return g}(p):!h.displayModeBar&&h.watermark?[]:function(f){var g=f._fullLayout,m=f._fullData,u=f._context;function w(me,pe){if("string"==typeof pe){if(pe.toLowerCase()===me.toLowerCase())return!0}else if(pe.name===me||(pe._cat||pe.name)===me.toLowerCase())return!0;return!1}var c=g.modebar.add;"string"==typeof c&&(c=[c]);var E=g.modebar.remove;"string"==typeof E&&(E=[E]);var M=u.modeBarButtonsToAdd.concat(c.filter(function(me){for(var pe=0;pe<u.modeBarButtonsToRemove.length;pe++)if(w(me,u.modeBarButtonsToRemove[pe]))return!1;return!0})),S=u.modeBarButtonsToRemove.concat(E.filter(function(me){for(var pe=0;pe<u.modeBarButtonsToAdd.length;pe++)if(w(me,u.modeBarButtonsToAdd[pe]))return!1;return!0})),C=g._has("cartesian"),O=g._has("gl3d"),I=g._has("geo"),N=g._has("pie"),F=g._has("funnelarea"),L=g._has("gl2d"),P=g._has("ternary"),j=g._has("mapbox"),U=g._has("polar"),$=g._has("smith"),X=g._has("sankey"),te=function(me){for(var pe=y.list({_fullLayout:me},null,!0),we=0;we<pe.length;we++)if(!pe[we].fixedrange)return!1;return!0}(g),ae=_(g.hovermode),J=[];function ee(me){if(me.length){for(var pe=[],we=0;we<me.length;we++){for(var ye=me[we],Te=o[ye],Le=Te.name.toLowerCase(),Oe=(Te._cat||Te.name).toLowerCase(),Re=!1,Ve=0;Ve<S.length;Ve++){var _e=S[Ve].toLowerCase();if(_e===Le||_e===Oe){Re=!0;break}}Re||pe.push(o[ye])}J.push(pe)}}var se=["toImage"];u.showEditInChartStudio?se.push("editInChartStudio"):u.showSendToCloud&&se.push("sendDataToCloud"),ee(se);var G=[],H=[],Y=[],oe=[];(C||L||N||F||P)+I+O+j+U+$>1?(H=["toggleHover"],Y=["resetViews"]):I?(G=["zoomInGeo","zoomOutGeo"],H=["hoverClosestGeo"],Y=["resetGeo"]):O?(H=["hoverClosest3d"],Y=["resetCameraDefault3d","resetCameraLastSave3d"]):j?(G=["zoomInMapbox","zoomOutMapbox"],H=["toggleHover"],Y=["resetViewMapbox"]):L?H=["hoverClosestGl2d"]:N?H=["hoverClosestPie"]:X?(H=["hoverClosestCartesian","hoverCompareCartesian"],Y=["resetViewSankey"]):H=["toggleHover"],C&&(H=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(me){for(var pe=0;pe<me.length;pe++)if(!T.traceIs(me[pe],"noHover"))return!1;return!0}(m)||ae)&&(H=[]),!C&&!L||te||(G=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==Y[0]&&(Y=["resetScale2d"])),O?oe=["zoom3d","pan3d","orbitRotation","tableRotation"]:(C||L)&&!te||P?oe=["zoom2d","pan2d"]:j||I?oe=["pan2d"]:U&&(oe=["zoom2d"]),function(me){for(var pe=!1,we=0;we<me.length&&!pe;we++){var ye=me[we];ye._module&&ye._module.selectPoints&&(T.traceIs(ye,"scatter-like")?(b.hasMarkers(ye)||b.hasText(ye))&&(pe=!0):T.traceIs(ye,"box-violin")&&"all"!==ye.boxpoints&&"all"!==ye.points||(pe=!0))}return pe}(m)&&oe.push("select2d","lasso2d");var W=[],ne=function(me){-1===W.indexOf(me)&&-1!==H.indexOf(me)&&W.push(me)};if(Array.isArray(M)){for(var re=[],ce=0;ce<M.length;ce++){var fe=M[ce];"string"==typeof fe?(fe=fe.toLowerCase(),-1!==a.indexOf(fe)?(g._has("mapbox")||g._has("cartesian"))&&oe.push(fe):"togglespikelines"===fe?ne("toggleSpikelines"):"togglehover"===fe?ne("toggleHover"):"hovercompare"===fe?ne("hoverCompareCartesian"):"hoverclosest"===fe?(ne("hoverClosestCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie")):"v1hovermode"===fe&&(ne("toggleHover"),ne("hoverClosestCartesian"),ne("hoverCompareCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie"))):re.push(fe)}M=re}return ee(oe),ee(G.concat(Y)),ee(W),function(me,pe){if(pe.length)if(Array.isArray(pe[0]))for(var we=0;we<pe.length;we++)me.push(pe[we]);else me.push(pe);return me}(J,M)}(i),s?s.update(i,d):v._modeBar=e(i,d)}else s&&(s.destroy(),delete v._modeBar)}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":952,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=x("../../lib"),_=x("../../fonts/ploticon"),e=x("../../version").version,o=new DOMParser;function a(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var l=a.prototype;l.update=function(i,v){this.graphInfo=i;var h=this.graphInfo._context,s=this.graphInfo._fullLayout,d="modebar-"+s._uid;this.element.setAttribute("id",d),this._uid=d,this.element.className="modebar","hover"===h.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===s.modebar.orientation&&(this.element.className+=" vertical",v=v.reverse());var p=s.modebar,f="hover"===h.displayModeBar?".js-plotly-plot .plotly:hover ":"";T.deleteRelatedStyleRule(d),T.addRelatedStyleRule(d,f+"#"+d+" .modebar-group","background-color: "+p.bgcolor),T.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+p.color),T.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+p.activecolor),T.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+p.activecolor);var g=!this.hasButtons(v),m=this.hasLogo!==h.displaylogo,u=this.locale!==h.locale;if(this.locale=h.locale,(g||m||u)&&(this.removeAllButtons(),this.updateButtons(v),h.watermark||h.displaylogo)){var w=this.getLogo();h.watermark&&(w.className=w.className+" watermark"),"v"===s.modebar.orientation?this.element.insertBefore(w,this.element.childNodes[0]):this.element.appendChild(w),this.hasLogo=!0}this.updateActiveButton()},l.updateButtons=function(i){var v=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(h){var s=v.createGroup();h.forEach(function(d){var p=d.name;if(!p)throw new Error("must provide button 'name' in button config");if(-1!==v.buttonsNames.indexOf(p))throw new Error("button name '"+p+"' is taken");v.buttonsNames.push(p);var f=v.createButton(d);v.buttonElements.push(f),s.appendChild(f)}),v.element.appendChild(s)})},l.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},l.createButton=function(i){var v=this,h=document.createElement("a");h.setAttribute("rel","tooltip"),h.className="modebar-btn";var s=i.title;void 0===s?s=i.name:"function"==typeof s&&(s=s(this.graphInfo)),(s||0===s)&&h.setAttribute("data-title",s),void 0!==i.attr&&h.setAttribute("data-attr",i.attr);var d=i.val;if(void 0!==d&&("function"==typeof d&&(d=d(this.graphInfo)),h.setAttribute("data-val",d)),"function"!=typeof i.click)throw new Error("must provide button 'click' function in button config");h.addEventListener("click",function(f){i.click(v.graphInfo,f),v.updateActiveButton(f.currentTarget)}),h.setAttribute("data-toggle",i.toggle||!1),i.toggle&&y.select(h).classed("active",!0);var p=i.icon;return h.appendChild("function"==typeof p?p():this.createIcon(p||_.question)),h.setAttribute("data-gravity",i.gravity||"n"),h},l.createIcon=function(i){var v,h=b(i.height)?Number(i.height):i.ascent-i.descent,s="http://www.w3.org/2000/svg";if(i.path){(v=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,i.width,h].join(" ")),v.setAttribute("class","icon");var d=document.createElementNS(s,"path");d.setAttribute("d",i.path),i.transform?d.setAttribute("transform",i.transform):void 0!==i.ascent&&d.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),v.appendChild(d)}return i.svg&&(v=o.parseFromString(i.svg,"application/xml").childNodes[0]),v.setAttribute("height","1em"),v.setAttribute("width","1em"),v},l.updateActiveButton=function(i){var v=this.graphInfo._fullLayout,h=void 0!==i?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var d=s.getAttribute("data-val")||!0,p=s.getAttribute("data-attr"),f="true"===s.getAttribute("data-toggle"),g=y.select(s);if(f)p===h&&g.classed("active",!g.classed("active"));else{var m=null===p?p:T.nestedProperty(v,p).get();g.classed("active",m===d)}})},l.hasButtons=function(i){var v=this.buttons;if(!v||i.length!==v.length)return!1;for(var h=0;h<i.length;++h){if(i[h].length!==v[h].length)return!1;for(var s=0;s<i[h].length;s++)if(i[h][s].name!==v[h][s].name)return!1}return!0},l.getLogo=function(){var i=this.createGroup(),v=document.createElement("a");return v.href="https://plotly.com/",v.target="_blank",v.setAttribute("data-title",T._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),v.className="modebar-btn plotlyjsicon modebar-btn--logo",v.appendChild(this.createIcon(_.newplotlylogo)),i.appendChild(v),i},l.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},l.destroy=function(){T.removeElement(this.container.querySelector(".modebar")),T.deleteRelatedStyleRule(this._uid)},ue.exports=function(i,v){var h=i._fullLayout,s=new a({graphInfo:i,container:h._modebardiv.node(),buttons:v});return h._privateplot&&y.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1123,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(x,ue,le){"use strict";var y=x("../../plots/font_attributes"),b=x("../color/attributes"),T=(0,x("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ue.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:y({editType:"plot"}),bgcolor:{valType:"color",dflt:b.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(x,ue,le){"use strict";ue.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../color"),T=x("../../plot_api/plot_template"),_=x("../../plots/array_container_defaults"),e=x("./attributes"),o=x("./constants");function a(l,i,v,h){var s=h.calendar;function d(f,g){return y.coerce(l,i,e.buttons,f,g)}if(d("visible")){var p=d("step");"all"!==p&&(!s||"gregorian"===s||"month"!==p&&"year"!==p?d("stepmode"):i.stepmode="backward",d("count")),d("label")}}ue.exports=function(l,i,v,h,s){var d=l.rangeselector||{},p=T.newContainer(i,"rangeselector");function f(u,w){return y.coerce(d,p,e,u,w)}if(f("visible",_(d,p,{name:"buttons",handleItemDefaults:a,calendar:s}).length>0)){var g=function(u,w,c){for(var E=c.filter(function(O){return w[O].anchor===u._id}),M=0,S=0;S<E.length;S++){var C=w[E[S]].domain;C&&(M=Math.max(C[1],M))}return[u.domain[0],M+o.yPad]}(i,v,h);f("x",g[0]),f("y",g[1]),y.noneOrAll(l,i,["x","y"]),f("xanchor"),f("yanchor"),y.coerceFont(f,"font",v.font);var m=f("bgcolor");f("activecolor",b.contrast(m,o.lightAmount,o.darkAmount)),f("bordercolor"),f("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../registry"),T=x("../../plots/plots"),_=x("../color"),e=x("../drawing"),o=x("../../lib"),a=o.strTranslate,l=x("../../lib/svg_text_utils"),i=x("../../plots/cartesian/axis_ids"),v=x("../../constants/alignment"),h=v.LINE_SPACING,s=v.FROM_TL,d=v.FROM_BR,p=x("./constants"),f=x("./get_update_object");function g(w){return w._id}function m(w,c,E){var S,C,M=o.ensureSingle(w,"rect","selector-rect",function(S){S.attr("shape-rendering","crispEdges")});M.attr({rx:p.rx,ry:p.ry}),M.call(_.stroke,c.bordercolor).call(_.fill,(S=c,C=E,C._isActive||C._isHovered?S.activecolor:S.bgcolor)).style("stroke-width",c.borderwidth+"px")}function u(w,c,E,M){var S,C;o.ensureSingle(w,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(e.font,c.font).text((S=E,C=M._fullLayout._meta,S.label?C?o.templateString(S.label,C):S.label:"all"===S.step?"all":S.count+S.step.charAt(0))).call(function(S){l.convertToTspans(S,M)})}ue.exports=function(w){var c=w._fullLayout._infolayer.selectAll(".rangeselector").data(function(E){for(var M=i.list(E,"x",!0),S=[],C=0;C<M.length;C++){var O=M[C];O.rangeselector&&O.rangeselector.visible&&S.push(O)}return S}(w),g);c.enter().append("g").classed("rangeselector",!0),c.exit().remove(),c.style({cursor:"pointer","pointer-events":"all"}),c.each(function(E){var M=y.select(this),S=E,C=S.rangeselector,O=M.selectAll("g.button").data(o.filterVisible(C.buttons));O.enter().append("g").classed("button",!0),O.exit().remove(),O.each(function(I){var N=y.select(this),F=f(S,I);I._isActive=function(L,P,j){if("all"===P.step)return!0===L.autorange;var U=Object.keys(j);return L.range[0]===j[U[0]]&&L.range[1]===j[U[1]]}(S,I,F),N.call(m,C,I),N.call(u,C,I,w),N.on("click",function(){w._dragged||b.call("_guiRelayout",w,F)}),N.on("mouseover",function(){I._isHovered=!0,N.call(m,C,I)}),N.on("mouseout",function(){I._isHovered=!1,N.call(m,C,I)})}),function(I,N,F,L,P){var j=0,U=0,$=F.borderwidth;N.each(function(){var se=y.select(this).select(".selector-text"),H=Math.max(F.font.size*h*l.lineCount(se),16)+3;U=Math.max(U,H)}),N.each(function(){var se=y.select(this),G=se.select(".selector-rect"),H=se.select(".selector-text"),Y=H.node()&&e.bBox(H.node()).width,oe=F.font.size*h,W=l.lineCount(H),ne=Math.max(Y+10,p.minButtonWidth);se.attr("transform",a($+j,$)),G.attr({x:0,y:0,width:ne,height:U}),l.positionText(H,ne/2,U/2-(W-1)*oe/2+3),j+=ne+5});var X=I._fullLayout._size,te=X.l+X.w*F.x,ae=X.t+X.h*(1-F.y),J="left";o.isRightAnchor(F)&&(te-=j,J="right"),o.isCenterAnchor(F)&&(te-=j/2,J="center");var ee="top";o.isBottomAnchor(F)&&(ae-=U,ee="bottom"),o.isMiddleAnchor(F)&&(ae-=U/2,ee="middle"),j=Math.ceil(j),U=Math.ceil(U),te=Math.round(te),ae=Math.round(ae),T.autoMargin(I,L+"-range-selector",{x:F.x,y:F.y,l:j*s[J],r:j*d[J],b:U*d[ee],t:U*s[ee]}),P.attr("transform",a(te,ae))}(w,O,C,S._name,M)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(x,ue,le){"use strict";var y=x("d3-time"),b=x("../../lib").titleCase;ue.exports=function(T,_){var e=T._name,o={};if("all"===_.step)o[e+".autorange"]=!0;else{var a=function(l,i){var v,h=l.range,s=new Date(l.r2l(h[1])),p=y["utc"+b(i.step)],f=i.count;switch(i.stepmode){case"backward":v=l.l2r(+p.offset(s,-f));break;case"todate":var g=p.offset(s,-f);v=l.l2r(+p.ceil(g))}return[v,h[1]]}(T,_);o[e+".range[0]"]=a[0],o[e+".range[1]"]=a[1]}return o}},{"../../lib":503,"d3-time":122}],437:[function(x,ue,le){"use strict";ue.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:x("./attributes")}}},layoutAttributes:x("./attributes"),handleDefaults:x("./defaults"),draw:x("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(x,ue,le){"use strict";var y=x("../color/attributes");ue.exports={bgcolor:{valType:"color",dflt:y.background,editType:"plot"},bordercolor:{valType:"color",dflt:y.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axis_ids").list,b=x("../../plots/cartesian/autorange").getAutoRange,T=x("./constants");ue.exports=function(_){for(var e=y(_,"x",!0),o=0;o<e.length;o++){var a=e[o],l=a[T.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=b(_,a))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(x,ue,le){"use strict";ue.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plot_api/plot_template"),T=x("../../plots/cartesian/axis_ids"),_=x("./attributes"),e=x("./oppaxis_attributes");ue.exports=function(o,a,l){var i=o[l],v=a[l];if(i.rangeslider||a._requestRangeslider[v._id]){y.isPlainObject(i.rangeslider)||(i.rangeslider={});var h,s,d=i.rangeslider,p=b.newContainer(v,"rangeslider");if(M("visible")){M("bgcolor",a.plot_bgcolor),M("bordercolor"),M("borderwidth"),M("thickness"),M("autorange",!v.isValidRange(d.range)),M("range");var f=a._subplots;if(f)for(var g=f.cartesian.filter(function(C){return C.substr(0,C.indexOf("y"))===T.name2id(l)}).map(function(C){return C.substr(C.indexOf("y"),C.length)}),m=y.simpleMap(g,T.id2name),u=0;u<m.length;u++){var w=m[u];h=d[w]||{},s=b.newContainer(p,w,"yaxis");var c,E=a[w];h.range&&E.isValidRange(h.range)&&(c="fixed"),"match"!==S("rangemode",c)&&S("range",E.range.slice())}p._input=d}}function M(C,O){return y.coerce(d,p,_,C,O)}function S(C,O){return y.coerce(h,s,e,C,O)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../registry"),T=x("../../plots/plots"),_=x("../../lib"),e=_.strTranslate,o=x("../drawing"),a=x("../color"),l=x("../titles"),i=x("../../plots/cartesian"),v=x("../../plots/cartesian/axis_ids"),h=x("../dragelement"),s=x("../../lib/setcursor"),d=x("./constants");function p(c,E,M,S){var C=_.ensureSingle(c,"rect",d.bgClassName,function(F){F.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),O=S.borderwidth%2==0?S.borderwidth:S.borderwidth-1,I=-S._offsetShift,N=o.crispRound(E,S.borderwidth);C.attr({width:S._width+O,height:S._height+O,transform:e(I,I),fill:S.bgcolor,stroke:S.bordercolor,"stroke-width":N})}function f(c,E,M,S){_.ensureSingleById(E._fullLayout._topdefs,"clipPath",S._clipId,function(O){O.append("rect").attr({x:0,y:0})}).select("rect").attr({width:S._width,height:S._height})}function g(c,E,M,S){var C,O=E.calcdata,I=c.selectAll("g."+d.rangePlotClassName).data(M._subplotsWith,_.identity);I.enter().append("g").attr("class",function(N){return d.rangePlotClassName+" "+N}).call(o.setClipUrl,S._clipId,E),I.order(),I.exit().remove(),I.each(function(N,F){var L=y.select(this),P=0===F,j=v.getFromId(E,N,"y"),U=j._name,$=S[U],X={data:[],layout:{xaxis:{type:M.type,domain:[0,1],range:S.range.slice(),calendar:M.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:E._context};M.rangebreaks&&(X.layout.xaxis.rangebreaks=M.rangebreaks),X.layout[U]={type:j.type,domain:[0,1],range:"match"!==$.rangemode?$.range.slice():j.range.slice(),calendar:j.calendar},j.rangebreaks&&(X.layout[U].rangebreaks=j.rangebreaks),T.supplyDefaults(X);var te=X._fullLayout.xaxis,ae=X._fullLayout[U];te.clearCalc(),te.setScale(),ae.clearCalc(),ae.setScale();var J={id:N,plotgroup:L,xaxis:te,yaxis:ae,isRangePlot:!0};P?C=J:(J.mainplot="xy",J.mainplotinfo=C),i.rangePlot(E,J,function(ee,se){for(var G=[],H=0;H<ee.length;H++){var Y=ee[H],oe=Y[0].trace;oe.xaxis+oe.yaxis===se&&G.push(Y)}return G}(O,N))})}function m(c,E,M,S,C){_.ensureSingle(c,"rect",d.maskMinClassName,function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",S._height).call(a.fill,d.maskColor),_.ensureSingle(c,"rect",d.maskMaxClassName,function(O){O.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",S._height).call(a.fill,d.maskColor),"match"!==C.rangemode&&(_.ensureSingle(c,"rect",d.maskMinOppAxisClassName,function(O){O.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",S._width).call(a.fill,d.maskOppAxisColor),_.ensureSingle(c,"rect",d.maskMaxOppAxisClassName,function(O){O.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",S._width).style("border-top",d.maskOppBorder).call(a.fill,d.maskOppAxisColor))}function u(c,E,M,S){E._context.staticPlot||_.ensureSingle(c,"rect",d.slideBoxClassName,function(C){C.attr({y:0,cursor:d.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:S._height,fill:d.slideBoxFill})}function w(c,E,M,S){var C=_.ensureSingle(c,"g",d.grabberMinClassName),O=_.ensureSingle(c,"g",d.grabberMaxClassName),I={x:0,width:d.handleWidth,rx:d.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":d.handleStrokeWidth,"shape-rendering":"crispEdges"},N={y:Math.round(S._height/4),height:Math.round(S._height/2)};_.ensureSingle(C,"rect",d.handleMinClassName,function(L){L.attr(I)}).attr(N),_.ensureSingle(O,"rect",d.handleMaxClassName,function(L){L.attr(I)}).attr(N);var F={width:d.grabAreaWidth,x:0,y:0,fill:d.grabAreaFill,cursor:E._context.staticPlot?void 0:d.grabAreaCursor};_.ensureSingle(C,"rect",d.grabAreaMinClassName,function(L){L.attr(F)}).attr("height",S._height),_.ensureSingle(O,"rect",d.grabAreaMaxClassName,function(L){L.attr(F)}).attr("height",S._height)}ue.exports=function(c){for(var E=c._fullLayout,M=E._rangeSliderData,S=0;S<M.length;S++){var C=M[S][d.name];C._clipId=C._id+"-"+E._uid}var O=E._infolayer.selectAll("g."+d.containerClassName).data(M,function(I){return I._name});O.exit().each(function(I){E._topdefs.select("#"+I[d.name]._clipId).remove()}).remove(),0!==M.length&&(O.enter().append("g").classed(d.containerClassName,!0).attr("pointer-events","all"),O.each(function(I){var N=y.select(this),F=I[d.name],L=E[v.id2name(I.anchor)],P=F[v.id2name(I.anchor)];if(F.range){var j,U=_.simpleMap(F.range,I.r2l),$=_.simpleMap(I.range,I.r2l);j=$[0]<$[1]?[Math.min(U[0],$[0]),Math.max(U[1],$[1])]:[Math.max(U[0],$[0]),Math.min(U[1],$[1])],F.range=F._input.range=_.simpleMap(j,I.l2r)}I.cleanRange("rangeslider.range");var X=E._size,te=I.domain;F._width=X.w*(te[1]-te[0]);var ae=Math.round(X.l+X.w*te[0]),J=Math.round(X.t+X.h*(1-I._counterDomainMin)+("bottom"===I.side?I._depth:0)+F._offsetShift+d.extraPad);N.attr("transform",e(ae,J)),F._rl=_.simpleMap(F.range,I.r2l);var ee=F._rl[0],se=F._rl[1],G=se-ee;if(F.p2d=function(me){return me/F._width*G+ee},F.d2p=function(me){return(me-ee)/G*F._width},I.rangebreaks){var H=I.locateBreaks(ee,se);if(H.length){var Y,oe,W=0;for(Y=0;Y<H.length;Y++)W+=(oe=H[Y]).max-oe.min;var ne=F._width/(se-ee-W),re=[-ne*ee];for(Y=0;Y<H.length;Y++)re.push(re[re.length-1]-ne*((oe=H[Y]).max-oe.min));for(F.d2p=function(me){for(var pe=re[0],we=0;we<H.length;we++){var ye=H[we];if(me>=ye.max)pe=re[we+1];else if(me<ye.min)break}return pe+ne*me},Y=0;Y<H.length;Y++)(oe=H[Y]).pmin=F.d2p(oe.min),oe.pmax=F.d2p(oe.max);F.p2d=function(me){for(var pe=re[0],we=0;we<H.length;we++){var ye=H[we];if(me>=ye.pmax)pe=re[we+1];else if(me<ye.pmin)break}return(me-pe)/ne}}}if("match"!==P.rangemode){var ce=L.r2l(P.range[0]),fe=L.r2l(P.range[1])-ce;F.d2pOppAxis=function(me){return(me-ce)/fe*F._height}}N.call(p,c,I,F).call(f,c,I,F).call(g,c,I,F).call(m,c,I,F,P).call(u,c,I,F).call(w,c,I,F),function(me,pe,we,ye){if(!pe._context.staticPlot){var Te=me.select("rect."+d.slideBoxClassName).node(),Le=me.select("rect."+d.grabAreaMinClassName).node(),Oe=me.select("rect."+d.grabAreaMaxClassName).node();me.on("mousedown",Re),me.on("touchstart",Re)}function Re(){var Ve=y.event,_e=Ve.target,Ae=Ve.clientX||Ve.touches[0].clientX,Fe=Ae-me.node().getBoundingClientRect().left,Pe=ye.d2p(we._rl[0]),Be=ye.d2p(we._rl[1]),qe=h.coverSlip();function We(ut){var Ge,Ke,nt,it=+(ut.clientX||ut.touches[0].clientX)-Ae;switch(_e){case Te:nt="ew-resize",Ge=Pe+it,Ke=Be+it;break;case Le:nt="col-resize",Ge=Pe+it,Ke=Be;break;case Oe:nt="col-resize",Ge=Pe,Ke=Be+it;break;default:nt="ew-resize",Ge=Fe,Ke=Fe+it}if(Ke<Ge){var ht=Ke;Ke=Ge,Ge=ht}ye._pixelMin=Ge,ye._pixelMax=Ke,s(y.select(qe),nt),function(Tt,Ct,Vt,Ft){function gt(rn){return Vt.l2r(_.constrain(rn,Ft._rl[0],Ft._rl[1]))}var ft=gt(Ft.p2d(Ft._pixelMin)),Bt=gt(Ft.p2d(Ft._pixelMax));window.requestAnimationFrame(function(){b.call("_guiRelayout",Ct,Vt._name+".range",[ft,Bt])})}(0,pe,we,ye)}function Je(){qe.removeEventListener("mousemove",We),qe.removeEventListener("mouseup",Je),this.removeEventListener("touchmove",We),this.removeEventListener("touchend",Je),_.removeElement(qe)}this.addEventListener("touchmove",We),this.addEventListener("touchend",Je),qe.addEventListener("mousemove",We),qe.addEventListener("mouseup",Je)}}(N,c,I,F),function(me,pe,we,ye,Te,Le){var Oe=d.handleWidth/2;function Re(Je){return _.constrain(Je,0,ye._width)}function Ve(Je){return _.constrain(Je,0,ye._height)}function _e(Je){return _.constrain(Je,-Oe,ye._width+Oe)}var Ae=Re(ye.d2p(we._rl[0])),Fe=Re(ye.d2p(we._rl[1]));if(me.select("rect."+d.slideBoxClassName).attr("x",Ae).attr("width",Fe-Ae),me.select("rect."+d.maskMinClassName).attr("width",Ae),me.select("rect."+d.maskMaxClassName).attr("x",Fe).attr("width",ye._width-Fe),"match"!==Le.rangemode){var Pe=ye._height-Ve(ye.d2pOppAxis(Te._rl[1])),Be=ye._height-Ve(ye.d2pOppAxis(Te._rl[0]));me.select("rect."+d.maskMinOppAxisClassName).attr("x",Ae).attr("height",Pe).attr("width",Fe-Ae),me.select("rect."+d.maskMaxOppAxisClassName).attr("x",Ae).attr("y",Be).attr("height",ye._height-Be).attr("width",Fe-Ae),me.select("rect."+d.slideBoxClassName).attr("y",Pe).attr("height",Be-Pe)}var qe=Math.round(_e(Ae-Oe))-.5,We=Math.round(_e(Fe-Oe))+.5;me.select("g."+d.grabberMinClassName).attr("transform",e(qe,.5)),me.select("g."+d.grabberMaxClassName).attr("transform",e(We,.5))}(N,0,I,F,L,P),"bottom"===I.side&&l.draw(c,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:E._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:J+F._height+F._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axis_ids"),b=x("../../lib/svg_text_utils"),T=x("./constants"),_=x("../../constants/alignment").LINE_SPACING,e=T.name;function o(a){var l=a&&a[e];return l&&l.visible}le.isVisible=o,le.makeData=function(a){var l=y.list({_fullLayout:a},"x",!0),i=a.margin,v=[];if(!a._has("gl2d"))for(var h=0;h<l.length;h++){var s=l[h];if(o(s)){v.push(s);var d=s[e];d._id=e+s._id,d._height=(a.height-i.b-i.t)*d.thickness,d._offsetShift=Math.floor(d.borderwidth/2)}}a._rangeSliderData=v},le.autoMarginOpts=function(a,l){var i=a._fullLayout,v=l[e],h=l._id.charAt(0),s=0,d=0;return"bottom"===l.side&&(s=l._depth,l.title.text!==i._dfltTitle[h]&&(d=1.5*l.title.font.size+10+v._offsetShift,d+=(l.title.text.match(b.BR_TAG_ALL)||[]).length*l.title.font.size*_)),{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:v._height+s+Math.max(i.margin.b,d),pad:T.extraPad+2*v._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("./oppaxis_attributes"),_=x("./helpers");ue.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:y.extendFlat({},b,{yaxis:T})}}},layoutAttributes:x("./attributes"),handleDefaults:x("./defaults"),calcAutorange:x("./calc_autorange"),draw:x("./draw"),isVisible:_.isVisible,makeData:_.makeData,autoMarginOpts:_.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(x,ue,le){"use strict";ue.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(x,ue,le){"use strict";var y=x("../annotations/attributes"),b=x("../../traces/scatter/attributes").line,T=x("../drawing/attributes").dash,_=x("../../lib/extend").extendFlat,e=x("../../plot_api/plot_template").templatedArray;x("../../constants/axis_placeable_objects"),ue.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:_({},y.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:_({},y.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:_({},b.color,{editType:"arraydraw"}),width:_({},b.width,{editType:"calc+arraydraw"}),dash:_({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("./constants"),_=x("./helpers");function e(i){return a(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function o(i){return a(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function a(i,v,h,s,d,p){var f=i/2,g=p;if("pixel"===v){var m=d?_.extractPathCoords(d,p?T.paramIsY:T.paramIsX):[h,s],u=y.aggNums(Math.max,null,m),w=y.aggNums(Math.min,null,m),c=w<0?Math.abs(w)+f:f,E=u>0?u+f:f;return{ppad:f,ppadplus:g?c:E,ppadminus:g?E:c}}return{ppad:f}}function l(i,v,h,s,d){var p="category"===i.type||"multicategory"===i.type?i.r2c:i.d2c;if(void 0!==v)return[p(v),p(h)];if(s){var f,g,m,u,w=1/0,c=-1/0,E=s.match(T.segmentRE);for("date"===i.type&&(p=_.decodeDate(p)),f=0;f<E.length;f++)void 0!==(g=d[E[f].charAt(0)].drawn)&&(!(m=E[f].substr(1).match(T.paramRE))||m.length<g||((u=p(m[g]))<w&&(w=u),u>c&&(c=u)));return c>=w?[w,c]:void 0}}ue.exports=function(i){var h=y.filterVisible(i._fullLayout.shapes);if(h.length&&i._fullData.length)for(var s=0;s<h.length;s++){var d,p,f=h[s];f._extremes={};var g=b.getRefType(f.xref),m=b.getRefType(f.yref);if("paper"!==f.xref&&"domain"!==g){var u="pixel"===f.xsizemode?f.xanchor:f.x0,w="pixel"===f.xsizemode?f.xanchor:f.x1;(p=l(d=b.getFromId(i,f.xref),u,w,f.path,T.paramIsX))&&(f._extremes[d._id]=b.findExtremes(d,p,e(f)))}if("paper"!==f.yref&&"domain"!==m){var c="pixel"===f.ysizemode?f.yanchor:f.y0,E="pixel"===f.ysizemode?f.yanchor:f.y1;(p=l(d=b.getFromId(i,f.yref),c,E,f.path,T.paramIsY))&&(f._extremes[d._id]=b.findExtremes(d,p,o(f)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(x,ue,le){"use strict";ue.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("../../plots/array_container_defaults"),_=x("./attributes"),e=x("./helpers");function o(a,l,i){function v(P,j){return y.coerce(a,l,_,P,j)}if(v("visible")){var h=v("path"),s=v("type",h?"path":"rect");"path"!==l.type&&delete l.path,v("editable"),v("layer"),v("opacity"),v("fillcolor"),v("fillrule"),v("line.width")&&(v("line.color"),v("line.dash"));for(var d=v("xsizemode"),p=v("ysizemode"),f=["x","y"],g=0;g<2;g++){var m,u,w,c=f[g],E=c+"anchor",M="x"===c?d:p,S={_fullLayout:i},C=b.coerceRef(a,l,S,c,void 0,"paper");if("range"===b.getRefType(C)?((m=b.getFromId(S,C))._shapeIndices.push(l._index),w=e.rangeToShapePosition(m),u=e.shapePositionToRange(m)):u=w=y.identity,"path"!==s){var O=c+"0",I=c+"1",N=a[O],F=a[I];a[O]=u(a[O],!0),a[I]=u(a[I],!0),"pixel"===M?(v(O,0),v(I,10)):(b.coercePosition(l,S,v,C,O,.25),b.coercePosition(l,S,v,C,I,.75)),l[O]=w(l[O]),l[I]=w(l[I]),a[O]=N,a[I]=F}if("pixel"===M){var L=a[E];a[E]=u(a[E],!0),b.coercePosition(l,S,v,C,E,.25),l[E]=w(l[E]),a[E]=L}}"path"===s?v("path"):y.noneOrAll(a,l,["x0","x1","y0","y1"])}}ue.exports=function(a,l){T(a,l,{name:"shapes",handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("../../plots/cartesian/axes"),_=x("./draw_newshape/helpers").readPaths,e=x("./draw_newshape/display_outlines"),o=x("../../plots/cartesian/handle_outline").clearOutlineControllers,a=x("../color"),l=x("../drawing"),i=x("../../plot_api/plot_template").arrayEditor,v=x("../dragelement"),h=x("../../lib/setcursor"),s=x("./constants"),d=x("./helpers");function p(M){var S=M._fullLayout;for(var C in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._plots){var O=S._plots[C].shapelayer;O&&O.selectAll("path").remove()}for(var I=0;I<S.shapes.length;I++)S.shapes[I].visible&&m(M,I)}function f(M){return!!M._fullLayout._drawing}function g(M){return!M._context.edits.shapePosition}function m(M,S){M._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var C=d.makeOptionsAndPlotinfo(M,S),O=C.options,I=C.plotinfo;O._input&&!1!==O.visible&&function N(F){var L=w(M,O),P={"data-index":S,"fill-rule":O.fillrule,d:L},j=O.opacity,U=O.fillcolor,$=O.line.width?O.line.color:"rgba(0,0,0,0)",X=O.line.width,te=O.line.dash;X||!0!==O.editable||(X=5,te="solid");var ae="Z"!==L[L.length-1],J=g(M)&&O.editable&&M._fullLayout._activeShapeIndex===S;J&&(U=ae?"rgba(0,0,0,0)":M._fullLayout.activeshape.fillcolor,j=M._fullLayout.activeshape.opacity);var ee,se=F.append("path").attr(P).style("opacity",j).call(a.stroke,$).call(a.fill,U).call(l.dashLine,te,X);if(u(se,M,O),(J||M._context.edits.shapePosition)&&(ee=i(M.layout,"shapes",O)),J){se.style({cursor:"move"});var G={element:se.node(),plotinfo:I,gd:M,editHelpers:ee,isActiveShape:!0},H=_(L,M);e(H,se,G)}else M._context.edits.shapePosition?function(Y,oe,W,ne,re,ce){var fe,me,pe,we,ye,Te,Le,Oe,Re,Ve,_e,Ae,Fe,Pe,Be,qe,We="pixel"===W.xsizemode,Je="pixel"===W.ysizemode,ut="line"===W.type,Ge="path"===W.type,Ke=ce.modifyItem,nt=T.getFromId(Y,W.xref),it=T.getRefType(W.xref),ht=T.getFromId(Y,W.yref),Tt=T.getRefType(W.yref),Ct=d.getDataToPixel(Y,nt,!1,it),Vt=d.getDataToPixel(Y,ht,!0,Tt),Ft=d.getPixelToData(Y,nt,!1,it),gt=d.getPixelToData(Y,ht,!0,Tt),ft=ut?function(){var ln=Math.max(W.line.width,10),Ee=re.append("g").attr("data-index",ne);Ee.append("path").attr("d",oe.attr("d")).style({cursor:"move","stroke-width":ln,"stroke-opacity":"0"});var De={"fill-opacity":"0"},Ie=Math.max(ln/2,10);return Ee.append("circle").attr({"data-line-point":"start-point",cx:We?Ct(W.xanchor)+W.x0:Ct(W.x0),cy:Je?Vt(W.yanchor)-W.y0:Vt(W.y0),r:Ie}).style(De).classed("cursor-grab",!0),Ee.append("circle").attr({"data-line-point":"end-point",cx:We?Ct(W.xanchor)+W.x1:Ct(W.x1),cy:Je?Vt(W.yanchor)-W.y1:Vt(W.y1),r:Ie}).style(De).classed("cursor-grab",!0),Ee}():oe,Bt={element:ft.node(),gd:Y,prepFn:function(ln){var Ee,De,Ie,He,Ye,tt,ot,st;f(Y)||(We&&(ye=Ct(W.xanchor)),Je&&(Te=Vt(W.yanchor)),"path"===W.type?Be=W.path:(fe=We?W.x0:Ct(W.x0),me=Je?W.y0:Vt(W.y0),pe=We?W.x1:Ct(W.x1),we=Je?W.y1:Vt(W.y1)),fe<pe?(Re=fe,Fe="x0",Ve=pe,Pe="x1"):(Re=pe,Fe="x1",Ve=fe,Pe="x0"),!Je&&me<we||Je&&me>we?(Le=me,_e="y0",Oe=we,Ae="y1"):(Le=we,_e="y1",Oe=me,Ae="y0"),rn(ln),dn(re,W),Ee=oe,Ye=(De=W).yref,tt=T.getFromId(Ie=Y,He=De.xref),ot=T.getFromId(Ie,Ye),st="","paper"===He||tt.autorange||(st+=He),"paper"===Ye||ot.autorange||(st+=Ye),l.setClipUrl(Ee,st?"clip"+Ie._fullLayout._uid+st:null,Ie),Bt.moveFn="move"===qe?un:pn,Bt.altKey=ln.altKey)},doneFn:function(){f(Y)||(h(oe),Mn(re),u(oe,Y,W),y.call("_guiRelayout",Y,ce.getUpdateObj()))},clickFn:function(){f(Y)||Mn(re)}};function rn(ln){if(f(Y))qe=null;else if(ut)qe="path"===ln.target.tagName?"move":"start-point"===ln.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Ee=Bt.element.getBoundingClientRect(),De=Ee.right-Ee.left,Ie=Ee.bottom-Ee.top,tt=!Ge&&De>10&&Ie>10&&!ln.shiftKey?v.getCursor((ln.clientX-Ee.left)/De,1-(ln.clientY-Ee.top)/Ie):"move";h(oe,tt),qe=tt.split("-")[0]}}function un(ln,Ee){if("path"===W.type){var De=function(Ye){return Ye},Ie=De,He=De;We?Ke("xanchor",W.xanchor=Ft(ye+ln)):(Ie=function(Ye){return Ft(Ct(Ye)+ln)},nt&&"date"===nt.type&&(Ie=d.encodeDate(Ie))),Je?Ke("yanchor",W.yanchor=gt(Te+Ee)):(He=function(Ye){return gt(Vt(Ye)+Ee)},ht&&"date"===ht.type&&(He=d.encodeDate(He))),Ke("path",W.path=c(Be,Ie,He))}else We?Ke("xanchor",W.xanchor=Ft(ye+ln)):(Ke("x0",W.x0=Ft(fe+ln)),Ke("x1",W.x1=Ft(pe+ln))),Je?Ke("yanchor",W.yanchor=gt(Te+Ee)):(Ke("y0",W.y0=gt(me+Ee)),Ke("y1",W.y1=gt(we+Ee)));oe.attr("d",w(Y,W)),dn(re,W)}function pn(ln,Ee){if(Ge){var De=function(je){return je},Ie=De,He=De;We?Ke("xanchor",W.xanchor=Ft(ye+ln)):(Ie=function(je){return Ft(Ct(je)+ln)},nt&&"date"===nt.type&&(Ie=d.encodeDate(Ie))),Je?Ke("yanchor",W.yanchor=gt(Te+Ee)):(He=function(je){return gt(Vt(je)+Ee)},ht&&"date"===ht.type&&(He=d.encodeDate(He))),Ke("path",W.path=c(Be,Ie,He))}else if(ut){if("resize-over-start-point"===qe){var Ye=fe+ln,tt=Je?me-Ee:me+Ee;Ke("x0",W.x0=We?Ye:Ft(Ye)),Ke("y0",W.y0=Je?tt:gt(tt))}else if("resize-over-end-point"===qe){var ot=pe+ln,st=Je?we-Ee:we+Ee;Ke("x1",W.x1=We?ot:Ft(ot)),Ke("y1",W.y1=Je?st:gt(st))}}else{var bt=function(je){return-1!==qe.indexOf(je)},wt=bt("n"),Ut=bt("s"),Kt=bt("w"),vt=bt("e"),Et=wt?Le+Ee:Le,$t=Ut?Oe+Ee:Oe,Dt=Kt?Re+ln:Re,Pt=vt?Ve+ln:Ve;Je&&(wt&&(Et=Le-Ee),Ut&&($t=Oe-Ee)),(!Je&&$t-Et>10||Je&&Et-$t>10)&&(Ke(_e,W[_e]=Je?Et:gt(Et)),Ke(Ae,W[Ae]=Je?$t:gt($t))),Pt-Dt>10&&(Ke(Fe,W[Fe]=We?Dt:Ft(Dt)),Ke(Pe,W[Pe]=We?Pt:Ft(Pt)))}oe.attr("d",w(Y,W)),dn(re,W)}function dn(ln,Ee){(We||Je)&&function(){var De="path"!==Ee.type,Ie=ln.selectAll(".visual-cue").data([0]);Ie.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var He=Ct(We?Ee.xanchor:b.midRange(De?[Ee.x0,Ee.x1]:d.extractPathCoords(Ee.path,s.paramIsX))),Ye=Vt(Je?Ee.yanchor:b.midRange(De?[Ee.y0,Ee.y1]:d.extractPathCoords(Ee.path,s.paramIsY)));He=d.roundPositionForSharpStrokeRendering(He,1),Ye=d.roundPositionForSharpStrokeRendering(Ye,1),Ie.attr("d",We&&Je?"M"+(He-1-1)+","+(Ye-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":We?"M"+(He-1-1)+","+(Ye-9-1)+"v18 h2 v-18 Z":"M"+(He-9-1)+","+(Ye-1-1)+"h18 v2 h-18 Z")}()}function Mn(ln){ln.selectAll(".visual-cue").remove()}v.init(Bt),ft.node().onmousemove=rn}(M,se,O,S,F,ee):!0===O.editable&&se.style("pointer-events",ae||a.opacity(U)*j<=.5?"stroke":"all");se.node().addEventListener("click",function(){return function(Y,oe){if(g(Y)){var W=+oe.node().getAttribute("data-index");if(W>=0){if(W===Y._fullLayout._activeShapeIndex)return void E(Y);Y._fullLayout._activeShapeIndex=W,Y._fullLayout._deactivateShape=E,p(Y)}}}(M,se)})}("below"!==O.layer?M._fullLayout._shapeUpperLayer:"paper"===O.xref||"paper"===O.yref?M._fullLayout._shapeLowerLayer:I._hadPlotinfo?(I.mainplotinfo||I).shapelayer:M._fullLayout._shapeLowerLayer)}function u(M,S,C){var O=(C.xref+C.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");l.setClipUrl(M,O?"clip"+S._fullLayout._uid+O:null,S)}function w(M,S){var C,O,I,N,F,L,P,j,re,ce,fe,pe,we,ye,Te,U=S.type,$=T.getRefType(S.xref),X=T.getRefType(S.yref),te=T.getFromId(M,S.xref),ae=T.getFromId(M,S.yref),J=M._fullLayout._size;if(te?"domain"===$?O=function(re){return te._offset+te._length*re}:(C=d.shapePositionToRange(te),O=function(re){return te._offset+te.r2p(C(re,!0))}):O=function(re){return J.l+J.w*re},ae?"domain"===X?N=function(re){return ae._offset+ae._length*(1-re)}:(I=d.shapePositionToRange(ae),N=function(re){return ae._offset+ae.r2p(I(re,!0))}):N=function(re){return J.t+J.h*(1-re)},"path"===U)return te&&"date"===te.type&&(O=d.decodeDate(O)),ae&&"date"===ae.type&&(N=d.decodeDate(N)),ce=O,fe=N,pe=(re=S).xsizemode,we=re.ysizemode,ye=re.xanchor,Te=re.yanchor,re.path.replace(s.segmentRE,function(Le){var Oe=0,Re=Le.charAt(0),Ve=s.paramIsX[Re],_e=s.paramIsY[Re],Ae=s.numParams[Re],Fe=Le.substr(1).replace(s.paramRE,function(Pe){return Ve[Oe]?Pe="pixel"===pe?ce(ye)+Number(Pe):ce(Pe):_e[Oe]&&(Pe="pixel"===we?fe(Te)-Number(Pe):fe(Pe)),++Oe>Ae&&(Pe="X"),Pe});return Oe>Ae&&(Fe=Fe.replace(/[\s,]*X.*/,""),b.log("Ignoring extra params in segment "+Le)),Re+Fe});if("pixel"===S.xsizemode){var ee=O(S.xanchor);F=ee+S.x0,L=ee+S.x1}else F=O(S.x0),L=O(S.x1);if("pixel"===S.ysizemode){var se=N(S.yanchor);P=se-S.y0,j=se-S.y1}else P=N(S.y0),j=N(S.y1);if("line"===U)return"M"+F+","+P+"L"+L+","+j;if("rect"===U)return"M"+F+","+P+"H"+L+"V"+j+"H"+F+"Z";var G=(F+L)/2,H=(P+j)/2,Y=Math.abs(G-F),oe=Math.abs(H-P),W="A"+Y+","+oe,ne=G+Y+","+H;return"M"+ne+W+" 0 1,1 "+G+","+(H-oe)+W+" 0 0,1 "+ne+"Z"}function c(M,S,C){return M.replace(s.segmentRE,function(O){var I=0,N=O.charAt(0),F=s.paramIsX[N],L=s.paramIsY[N],P=s.numParams[N];return N+O.substr(1).replace(s.paramRE,function(j){return I>=P||(F[I]?j=S(j):L[I]&&(j=C(j)),I++),j})})}function E(M){g(M)&&M._fullLayout._activeShapeIndex>=0&&(o(M),delete M._fullLayout._activeShapeIndex,p(M))}ue.exports={draw:p,drawOne:m,eraseActiveShape:function(M){if(g(M)){o(M);var S=M._fullLayout._activeShapeIndex,C=(M.layout||{}).shapes||[];if(S<C.length){for(var O=[],I=0;I<C.length;I++)I!==S&&O.push(C[I]);delete M._fullLayout._activeShapeIndex,y.call("_guiRelayout",M,{shapes:O})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(x,ue,le){"use strict";var y=x("../../drawing/attributes").dash,b=x("../../../lib/extend").extendFlat;ue.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:b({},y,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(x,ue,le){"use strict";ue.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(x,ue,le){"use strict";var y=x("../../color");ue.exports=function(b,T,_){_("newshape.drawdirection"),_("newshape.layer"),_("newshape.fillcolor"),_("newshape.fillrule"),_("newshape.opacity"),_("newshape.line.width")&&(_("newshape.line.color",y.contrast((b||{}).plot_bgcolor||"#FFF")),_("newshape.line.dash")),_("activeshape.fillcolor"),_("activeshape.opacity")}},{"../../color":366}],454:[function(x,ue,le){"use strict";var y=x("../../dragelement"),b=x("../../dragelement/helpers").drawMode,T=x("../../../registry"),_=x("./constants"),e=_.i000,o=_.i090,a=_.i180,l=_.i270,i=x("../../../plots/cartesian/handle_outline").clearOutlineControllers,v=x("./helpers"),h=v.pointsShapeRectangle,s=v.pointsShapeEllipse,d=v.writePaths,p=x("./newshapes");ue.exports=function f(g,m,u,w){w||(w=0);var c=u.gd;function E(){f(g,m,u,w++),s(g[0])&&M({redrawing:!0})}function M(ee){u.isActiveShape=!1;var se=p(m,u);Object.keys(se).length&&T.call((ee||{}).redrawing?"relayout":"_guiRelayout",c,se)}var S,C,O,I,N,F=u.isActiveShape,L=c._fullLayout._zoomlayer;function j(ee){O=+ee.srcElement.getAttribute("data-i"),I=+ee.srcElement.getAttribute("data-j"),S[O][I].moveFn=U}function U(ee,se){if(g.length){var G=N[O][I][1],H=N[O][I][2],Y=g[O],oe=Y.length;if(h(Y)){for(var W=0;W<oe;W++)if(W!==I){var ne=Y[W];ne[1]===Y[I][1]&&(ne[1]=G+ee),ne[2]===Y[I][2]&&(ne[2]=H+se)}if(Y[I][1]=G+ee,Y[I][2]=H+se,!h(Y))for(var re=0;re<oe;re++)for(var ce=0;ce<Y[re].length;ce++)Y[re][ce]=N[O][re][ce]}else Y[I][1]=G+ee,Y[I][2]=H+se;E()}}function $(){M()}function X(ee,se){if(2===ee){O=+se.srcElement.getAttribute("data-i"),I=+se.srcElement.getAttribute("data-j");var G=g[O];h(G)||s(G)||function(){if(g.length&&g[O]&&g[O].length){for(var H=[],Y=0;Y<g[O].length;Y++)Y!==I&&H.push(g[O][Y]);H.length>1&&(2!==H.length||"Z"!==H[1][0])&&(0===I&&(H[0][0]="M"),g[O]=H,E(),M())}}()}}function te(ee,se){(function(G,H){if(g.length)for(var Y=0;Y<g.length;Y++)for(var oe=0;oe<g[Y].length;oe++)for(var W=0;W+2<g[Y][oe].length;W+=2)g[Y][oe][W+1]=N[Y][oe][W+1]+G,g[Y][oe][W+2]=N[Y][oe][W+2]+H})(ee,se),E()}b(u.dragmode)?c._fullLayout._drawing=!0:c._fullLayout._activeShapeIndex>=0&&i(c),m.attr("d",d(g)),F&&!w&&(N=function(ee,se){for(var G=0;G<se.length;G++){var H=se[G];ee[G]=[];for(var Y=0;Y<H.length;Y++){ee[G][Y]=[];for(var oe=0;oe<H[Y].length;oe++)ee[G][Y][oe]=H[Y][oe]}}return ee}([],g),function(ee){S=[];for(var se=0;se<g.length;se++){var G=g[se],H=!h(G)&&s(G);S[se]=[];for(var Y=0;Y<G.length;Y++)if("Z"!==G[Y][0]&&(!H||Y===e||Y===o||Y===a||Y===l)){var oe=G[Y][1],W=G[Y][2],ne=ee.append("circle").classed("cursor-grab",!0).attr("data-i",se).attr("data-j",Y).attr("cx",oe).attr("cy",W).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});S[se][Y]={element:ne.node(),gd:c,prepFn:j,doneFn:$,clickFn:X},y.init(S[se][Y])}}}(L.append("g").attr("class","outline-controllers")),C=[],g.length&&(C[0]={element:m[0][0],gd:c,prepFn:function ae(ee){(O=+ee.srcElement.getAttribute("data-i"))||(O=0),C[O].moveFn=te},doneFn:function J(){M()}},y.init(C[0])))}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(x,ue,le){"use strict";var y=x("parse-svg-path"),b=x("./constants"),T=b.CIRCLE_SIDES,_=b.SQRT2,e=x("../../../plots/cartesian/helpers"),o=e.p2r,a=e.r2p,l=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function v(s,d){return Math.abs(s-d)<=1e-6}function h(s,d){var p=d[1]-s[1],f=d[2]-s[2];return Math.sqrt(p*p+f*f)}le.writePaths=function(s){var d=s.length;if(!d)return"M0,0Z";for(var p="",f=0;f<d;f++)for(var g=s[f].length,m=0;m<g;m++){var u=s[f][m][0];if("Z"===u)p+="Z";else for(var w=s[f][m].length,c=0;c<w;c++){var E=c;"Q"===u||"S"===u?E=i[c]:"C"===u&&(E=l[c]),p+=s[f][m][E],c>0&&c<w-1&&(p+=",")}}return p},le.readPaths=function(s,d,p,f){var g,m,u,w=y(s),c=[],E=-1,M=0,S=0,C=function(){m=M,u=S};C();for(var O=0;O<w.length;O++){var P=[],j=w[O][0],U=j;switch(j){case"M":c[++E]=[],P.push([U,M=+w[O][1],S=+w[O][2]]),C();break;case"Q":case"S":P.push([U,M=+w[O][3],S=+w[O][4],+w[O][1],+w[O][2]]);break;case"C":P.push([U,M=+w[O][5],S=+w[O][6],+w[O][1],+w[O][2],+w[O][3],+w[O][4]]);break;case"T":case"L":P.push([U,M=+w[O][1],S=+w[O][2]]);break;case"H":P.push([U="L",M=+w[O][1],S]);break;case"V":P.push([U="L",M,S=+w[O][1]]);break;case"A":U="L";var $=+w[O][1],X=+w[O][2];+w[O][4]||($=-$,X=-X);var te=M-$,ae=S;for(g=1;g<=T/2;g++){var J=2*Math.PI*g/T;P.push([U,te+$*Math.cos(J),ae+X*Math.sin(J)])}break;case"Z":M===m&&S===u||P.push([U,M=m,S=u])}for(var ee=(p||{}).domain,se=d._fullLayout._size,G=p&&"pixel"===p.xsizemode,H=p&&"pixel"===p.ysizemode,Y=!1===f,oe=0;oe<P.length;oe++){for(g=0;g+2<7;g+=2){var W=P[oe][g+1],ne=P[oe][g+2];void 0!==W&&void 0!==ne&&(M=W,S=ne,p&&(p.xaxis&&p.xaxis.p2r?(Y&&(W-=p.xaxis._offset),W=G?a(p.xaxis,p.xanchor)+W:o(p.xaxis,W)):(Y&&(W-=se.l),ee?W=ee.x[0]+W/se.w:W/=se.w),p.yaxis&&p.yaxis.p2r?(Y&&(ne-=p.yaxis._offset),ne=H?a(p.yaxis,p.yanchor)-ne:o(p.yaxis,ne)):(Y&&(ne-=se.t),ne=ee?ee.y[1]-ne/se.h:1-ne/se.h)),P[oe][g+1]=W,P[oe][g+2]=ne)}c[E].push(P[oe].slice())}}return c},le.pointsShapeRectangle=function(s){if(5!==s.length)return!1;for(var d=1;d<3;d++)if(!v(s[0][d]-s[1][d],s[3][d]-s[2][d])||!v(s[0][d]-s[3][d],s[1][d]-s[2][d]))return!1;return!(!v(s[0][1],s[1][1])&&!v(s[0][1],s[3][1])||!(h(s[0],s[1])*h(s[0],s[3])))},le.pointsShapeEllipse=function(s){var d=s.length;if(d!==T+1)return!1;d=T;for(var p=0;p<d;p++){var f=(2*d-p)%d,g=(d/2+f)%d;if(!v(h(s[p],s[(d/2+p)%d]),h(s[f],s[g])))return!1}return!0},le.handleEllipse=function(s,d,p){if(!s)return[d,p];var f=le.ellipseOver({x0:d[0],y0:d[1],x1:p[0],y1:p[1]}),g=(f.x1+f.x0)/2,m=(f.y1+f.y0)/2,u=(f.x1-f.x0)/2,w=(f.y1-f.y0)/2;u||(u=w/=_),w||(w=u/=_);for(var c=[],E=0;E<T;E++){var M=2*E*Math.PI/T;c.push([g+u*Math.cos(M),m+w*Math.sin(M)])}return c},le.ellipseOver=function(s){var d=s.x0,p=s.y0,f=s.x1,g=s.y1,m=f-d,u=g-p,w=((d-=m)+f)/2,c=((p-=u)+g)/2;return{x0:w-(m*=_),y0:c-(u*=_),x1:w+m,y1:c+u}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(x,ue,le){"use strict";var y=x("../../dragelement/helpers"),b=y.drawMode,T=y.openMode,_=x("./constants"),e=_.i000,o=_.i090,a=_.i180,l=_.i270,i=_.cos45,v=_.sin45,h=x("../../../plots/cartesian/helpers"),s=h.p2r,d=h.r2p,p=x("../../../plots/cartesian/handle_outline").clearSelect,f=x("./helpers"),g=f.readPaths,m=f.writePaths,u=f.ellipseOver;ue.exports=function(w,c){if(w.length){var E=w[0][0];if(E){var M=E.getAttribute("d"),S=c.gd,C=S._fullLayout.newshape,O=c.plotinfo,I=O.xaxis,N=O.yaxis,F=!!O.domain||!O.xaxis,L=!!O.domain||!O.yaxis,P=c.isActiveShape,j=c.dragmode,U=(S.layout||{}).shapes||[];if(!b(j)&&void 0!==P){var $=S._fullLayout._activeShapeIndex;if($<U.length)switch(S._fullLayout.shapes[$].type){case"rect":j="drawrect";break;case"circle":j="drawcircle";break;case"line":j="drawline";break;case"path":var X=U[$].path||"";j="Z"===X[X.length-1]?"drawclosedpath":"drawopenpath"}}var te,ae=T(j),J=g(M,S,O,P),ee={editable:!0,xref:F?"paper":I._id,yref:L?"paper":N._id,layer:C.layer,opacity:C.opacity,line:{color:C.line.color,width:C.line.width,dash:C.line.dash}};if(ae||(ee.fillcolor=C.fillcolor,ee.fillrule=C.fillrule),1===J.length&&(te=J[0]),te&&"drawrect"===j)ee.type="rect",ee.x0=te[0][1],ee.y0=te[0][2],ee.x1=te[2][1],ee.y1=te[2][2];else if(te&&"drawline"===j)ee.type="line",ee.x0=te[0][1],ee.y0=te[0][2],ee.x1=te[1][1],ee.y1=te[1][2];else if(te&&"drawcircle"===j){ee.type="circle";var se=te[e][1],G=te[o][1],H=te[a][1],Y=te[l][1],oe=te[e][2],W=te[o][2],ne=te[a][2],re=te[l][2],ce=O.xaxis&&("date"===O.xaxis.type||"log"===O.xaxis.type),fe=O.yaxis&&("date"===O.yaxis.type||"log"===O.yaxis.type);ce&&(se=d(O.xaxis,se),G=d(O.xaxis,G),H=d(O.xaxis,H),Y=d(O.xaxis,Y)),fe&&(oe=d(O.yaxis,oe),W=d(O.yaxis,W),ne=d(O.yaxis,ne),re=d(O.yaxis,re));var me=(G+Y)/2,pe=(oe+ne)/2,we=u({x0:me,y0:pe,x1:me+(Y-G+H-se)/2*i,y1:pe+(re-W+ne-oe)/2*v});ce&&(we.x0=s(O.xaxis,we.x0),we.x1=s(O.xaxis,we.x1)),fe&&(we.y0=s(O.yaxis,we.y0),we.y1=s(O.yaxis,we.y1)),ee.x0=we.x0,ee.y0=we.y0,ee.x1=we.x1,ee.y1=we.y1}else ee.type="path",I&&N&&function(_e,Ae,Fe){var Pe="date"===Ae.type,Be="date"===Fe.type;if(!Pe&&!Be)return _e;for(var qe=0;qe<_e.length;qe++)for(var We=0;We<_e[qe].length;We++)for(var Je=0;Je+2<_e[qe][We].length;Je+=2)Pe&&(_e[qe][We][Je+1]=_e[qe][We][Je+1].replace(" ","_")),Be&&(_e[qe][We][Je+2]=_e[qe][We][Je+2].replace(" ","_"))}(J,I,N),ee.path=m(J),te=null;p(S);for(var ye=c.editHelpers,Te=(ye||{}).modifyItem,Le=[],Oe=0;Oe<U.length;Oe++){var Re=S._fullLayout.shapes[Oe];if(Le[Oe]=Re._input,void 0!==P&&Oe===S._fullLayout._activeShapeIndex){var Ve=ee;switch(Re.type){case"line":case"rect":case"circle":Te("x0",Ve.x0),Te("x1",Ve.x1),Te("y0",Ve.y0),Te("y1",Ve.y1);break;case"path":Te("path",Ve.path)}}}return void 0===P?(Le.push(ee),Le):ye?ye.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(x,ue,le){"use strict";var y=x("./constants"),b=x("../../lib");le.rangeToShapePosition=function(T){return"log"===T.type?T.r2d:function(_){return _}},le.shapePositionToRange=function(T){return"log"===T.type?T.d2r:function(_){return _}},le.decodeDate=function(T){return function(_){return _.replace&&(_=_.replace("_"," ")),T(_)}},le.encodeDate=function(T){return function(_){return T(_).replace(" ","_")}},le.extractPathCoords=function(T,_){var e=[];return T.match(y.segmentRE).forEach(function(o){var a=_[o.charAt(0)].drawn;if(void 0!==a){var l=o.substr(1).match(y.paramRE);!l||l.length<a||e.push(b.cleanNumber(l[a]))}}),e},le.getDataToPixel=function(T,_,e,o){var a,l=T._fullLayout._size;if(_)if("domain"===o)a=function(v){return _._length*(e?1-v:v)+_._offset};else{var i=le.shapePositionToRange(_);a=function(v){return _._offset+_.r2p(i(v,!0))},"date"===_.type&&(a=le.decodeDate(a))}else a=e?function(v){return l.t+l.h*(1-v)}:function(v){return l.l+l.w*v};return a},le.getPixelToData=function(T,_,e,o){var a,l=T._fullLayout._size;if(_)if("domain"===o)a=function(v){var h=(v-_._offset)/_._length;return e?1-h:h};else{var i=le.rangeToShapePosition(_);a=function(v){return i(_.p2r(v-_._offset))}}else a=e?function(v){return 1-(v-l.t)/l.h}:function(v){return(v-l.l)/l.w};return a},le.roundPositionForSharpStrokeRendering=function(T,_){var e=1===Math.round(_%2),o=Math.round(T);return e?o+.5:o},le.makeOptionsAndPlotinfo=function(T,_){var e=T._fullLayout.shapes[_]||{},o=T._fullLayout._plots[e.xref+e.yref];return o?o._hadPlotinfo=!0:(o={},e.xref&&"paper"!==e.xref&&(o.xaxis=T._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(o.yaxis=T._fullLayout[e.yref+"axis"])),o.xsizemode=e.xsizemode,o.ysizemode=e.ysizemode,o.xanchor=e.xanchor,o.yanchor=e.yanchor,{options:e,plotinfo:o}}},{"../../lib":503,"./constants":448}],458:[function(x,ue,le){"use strict";var y=x("./draw");ue.exports={moduleType:"component",name:"shapes",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),supplyDrawNewShapeDefaults:x("./draw_newshape/defaults"),includeBasePlot:x("../../plots/cartesian/include_components")("shapes"),calcAutorange:x("./calc_autorange"),draw:y.draw,drawOne:y.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(x,ue,le){"use strict";var y=x("../../plots/font_attributes"),b=x("../../plots/pad_attributes"),T=x("../../lib/extend").extendDeepAll,_=x("../../plot_api/edit_types").overrideAll,e=x("../../plots/animation_attributes"),o=x("../../plot_api/plot_template").templatedArray,a=x("./constants"),l=o("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ue.exports=_(o("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:l,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:T(b({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:y({})},font:y({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(x,ue,le){"use strict";ue.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/array_container_defaults"),T=x("./attributes"),_=x("./constants").name,e=T.steps;function o(l,i,v){function h(g,m){return y.coerce(l,i,T,g,m)}for(var s=b(l,i,{name:"steps",handleItemDefaults:a}),d=0,p=0;p<s.length;p++)s[p].visible&&d++;if(d<2?i.visible=!1:h("visible")){i._stepCount=d;var f=i._visibleSteps=y.filterVisible(s);(s[h("active")]||{}).visible||(i.active=f[0]._index),h("x"),h("y"),y.noneOrAll(l,i,["x","y"]),h("xanchor"),h("yanchor"),h("len"),h("lenmode"),h("pad.t"),h("pad.r"),h("pad.b"),h("pad.l"),y.coerceFont(h,"font",v.font),h("currentvalue.visible")&&(h("currentvalue.xanchor"),h("currentvalue.prefix"),h("currentvalue.suffix"),h("currentvalue.offset"),y.coerceFont(h,"currentvalue.font",i.font)),h("transition.duration"),h("transition.easing"),h("bgcolor"),h("activebgcolor"),h("bordercolor"),h("borderwidth"),h("ticklen"),h("tickwidth"),h("tickcolor"),h("minorticklen")}}function a(l,i){function v(s,d){return y.coerce(l,i,e,s,d)}if("skip"===l.method||Array.isArray(l.args)?v("visible"):i.visible=!1){v("method"),v("args");var h=v("label","step-"+i._index);v("value",h),v("execute")}}ue.exports=function(l,i){b(l,i,{name:_,handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../plots/plots"),T=x("../color"),_=x("../drawing"),e=x("../../lib"),o=e.strTranslate,a=x("../../lib/svg_text_utils"),l=x("../../plot_api/plot_template").arrayEditor,i=x("./constants"),v=x("../../constants/alignment"),h=v.LINE_SPACING,s=v.FROM_TL,d=v.FROM_BR;function p(P){return i.autoMarginIdRoot+P._index}function f(P){return P._index}function g(P,j){var U=_.tester.selectAll("g."+i.labelGroupClass).data(j._visibleSteps);U.enter().append("g").classed(i.labelGroupClass,!0);var $=0,X=0;U.each(function(oe){var W=w(y.select(this),{step:oe},j).node();if(W){var ne=_.bBox(W);X=Math.max(X,ne.height),$=Math.max($,ne.width)}}),U.remove();var te=j._dims={};te.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var ae=P._fullLayout._size;if(te.lx=ae.l+ae.w*j.x,te.ly=ae.t+ae.h*(1-j.y),te.outerLength="fraction"===j.lenmode?Math.round(ae.w*j.len):j.len,te.inputAreaStart=0,te.inputAreaLength=Math.round(te.outerLength-j.pad.l-j.pad.r),te.labelStride=Math.max(1,Math.ceil(($+i.labelPadding)/((te.inputAreaLength-2*i.stepInset)/(j._stepCount-1)))),te.labelHeight=X,te.currentValueMaxWidth=0,te.currentValueHeight=0,te.currentValueTotalHeight=0,te.currentValueMaxLines=1,j.currentvalue.visible){var se=_.tester.append("g");U.each(function(oe){var W=m(se,j,oe.label),ne=W.node()&&_.bBox(W.node())||{width:0,height:0},re=a.lineCount(W);te.currentValueMaxWidth=Math.max(te.currentValueMaxWidth,Math.ceil(ne.width)),te.currentValueHeight=Math.max(te.currentValueHeight,Math.ceil(ne.height)),te.currentValueMaxLines=Math.max(te.currentValueMaxLines,re)}),te.currentValueTotalHeight=te.currentValueHeight+j.currentvalue.offset,se.remove()}te.height=te.currentValueTotalHeight+i.tickOffset+j.ticklen+i.labelOffset+te.labelHeight+j.pad.t+j.pad.b;var G="left";e.isRightAnchor(j)&&(te.lx-=te.outerLength,G="right"),e.isCenterAnchor(j)&&(te.lx-=te.outerLength/2,G="center");var H="top";e.isBottomAnchor(j)&&(te.ly-=te.height,H="bottom"),e.isMiddleAnchor(j)&&(te.ly-=te.height/2,H="middle"),te.outerLength=Math.ceil(te.outerLength),te.height=Math.ceil(te.height),te.lx=Math.round(te.lx),te.ly=Math.round(te.ly);var Y={y:j.y,b:te.height*d[H],t:te.height*s[H]};"fraction"===j.lenmode?(Y.l=0,Y.xl=j.x-j.len*s[G],Y.r=0,Y.xr=j.x+j.len*d[G]):(Y.x=j.x,Y.l=te.outerLength*s[G],Y.r=te.outerLength*d[G]),b.autoMargin(P,p(j),Y)}function m(P,j,U){if(j.currentvalue.visible){var $,X,te=j._dims;switch(j.currentvalue.xanchor){case"right":$=te.inputAreaLength-i.currentValueInset-te.currentValueMaxWidth,X="left";break;case"center":$=.5*te.inputAreaLength,X="middle";break;default:$=i.currentValueInset,X="left"}var ae=e.ensureSingle(P,"text",i.labelClass,function(Y){Y.attr({"text-anchor":X,"data-notex":1})}),J=j.currentvalue.prefix?j.currentvalue.prefix:"";if("string"==typeof U)J+=U;else{var ee=j.steps[j.active].label,se=j._gd._fullLayout._meta;se&&(ee=e.templateString(ee,se)),J+=ee}j.currentvalue.suffix&&(J+=j.currentvalue.suffix),ae.call(_.font,j.currentvalue.font).text(J).call(a.convertToTspans,j._gd);var G=a.lineCount(ae);return a.positionText(ae,$,(te.currentValueMaxLines+1-G)*j.currentvalue.font.size*h),ae}}function u(P,j,U){e.ensureSingle(P,"rect",i.gripRectClass,function($){$.call(S,j,P,U).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(T.stroke,U.bordercolor).call(T.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function w(P,j,U){var $=e.ensureSingle(P,"text",i.labelClass,function(ae){ae.attr({"text-anchor":"middle","data-notex":1})}),X=j.step.label,te=U._gd._fullLayout._meta;return te&&(X=e.templateString(X,te)),$.call(_.font,U.font).text(X).call(a.convertToTspans,U._gd),$}function c(P,j){var U=e.ensureSingle(P,"g",i.labelsClass),$=j._dims,X=U.selectAll("g."+i.labelGroupClass).data($.labelSteps);X.enter().append("g").classed(i.labelGroupClass,!0),X.exit().remove(),X.each(function(te){var ae=y.select(this);ae.call(w,te,j),_.setTranslate(ae,I(j,te.fraction),i.tickOffset+j.ticklen+j.font.size*h+i.labelOffset+$.currentValueTotalHeight)})}function E(P,j,U,$,X){var te=Math.round($*(U._stepCount-1)),ae=U._visibleSteps[te]._index;ae!==U.active&&M(P,j,U,ae,!0,X)}function M(P,j,U,$,X,te){var ae=U.active;U.active=$,l(P.layout,i.name,U).applyUpdate("active",$);var J=U.steps[U.active];j.call(O,U,te),j.call(m,U),P.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:X,previousActive:ae}),J&&J.method&&X&&(j._nextMethod?(j._nextMethod.step=J,j._nextMethod.doCallback=X,j._nextMethod.doTransition=te):(j._nextMethod={step:J,doCallback:X,doTransition:te},j._nextMethodRaf=window.requestAnimationFrame(function(){var ee=j._nextMethod.step;ee.method&&(ee.execute&&b.executeAPICommand(P,ee.method,ee.args),j._nextMethod=null,j._nextMethodRaf=null)})))}function S(P,j,U){var $=U.node(),X=y.select(j);function te(){return U.data()[0]}function ae(){var J=te();j.emit("plotly_sliderstart",{slider:J});var ee=U.select("."+i.gripRectClass);y.event.stopPropagation(),y.event.preventDefault(),ee.call(T.fill,J.activebgcolor);var se=N(J,y.mouse($)[0]);function G(){var Y=te(),oe=N(Y,y.mouse($)[0]);E(j,U,Y,oe,!1)}function H(){var Y=te();Y._dragging=!1,ee.call(T.fill,Y.bgcolor),X.on("mouseup",null),X.on("mousemove",null),X.on("touchend",null),X.on("touchmove",null),j.emit("plotly_sliderend",{slider:Y,step:Y.steps[Y.active]})}E(j,U,J,se,!0),J._dragging=!0,X.on("mousemove",G),X.on("touchmove",G),X.on("mouseup",H),X.on("touchend",H)}P.on("mousedown",ae),P.on("touchstart",ae)}function C(P,j){var U=P.selectAll("rect."+i.tickRectClass).data(j._visibleSteps),$=j._dims;U.enter().append("rect").classed(i.tickRectClass,!0),U.exit().remove(),U.attr({width:j.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(X,te){var ae=te%$.labelStride==0,J=y.select(this);J.attr({height:ae?j.ticklen:j.minorticklen}).call(T.fill,j.tickcolor),_.setTranslate(J,I(j,te/(j._stepCount-1))-.5*j.tickwidth,(ae?i.tickOffset:i.minorTickOffset)+$.currentValueTotalHeight)})}function O(P,j,U){for(var $=P.select("rect."+i.gripRectClass),X=0,te=0;te<j._stepCount;te++)if(j._visibleSteps[te]._index===j.active){X=te;break}var ae=I(j,X/(j._stepCount-1));if(!j._invokingCommand){var J=$;U&&j.transition.duration>0&&(J=J.transition().duration(j.transition.duration).ease(j.transition.easing)),J.attr("transform",o(ae-.5*i.gripWidth,j._dims.currentValueTotalHeight))}}function I(P,j){var U=P._dims;return U.inputAreaStart+i.stepInset+(U.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,j))}function N(P,j){var U=P._dims;return Math.min(1,Math.max(0,(j-i.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*i.stepInset-2*U.inputAreaStart)))}function F(P,j,U){var $=U._dims,X=e.ensureSingle(P,"rect",i.railTouchRectClass,function(te){te.call(S,j,P,U).style("pointer-events","all")});X.attr({width:$.inputAreaLength,height:Math.max($.inputAreaWidth,i.tickOffset+U.ticklen+$.labelHeight)}).call(T.fill,U.bgcolor).attr("opacity",0),_.setTranslate(X,0,$.currentValueTotalHeight)}function L(P,j){var U=j._dims,$=U.inputAreaLength-2*i.railInset,X=e.ensureSingle(P,"rect",i.railRectClass);X.attr({width:$,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(T.stroke,j.bordercolor).call(T.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px"),_.setTranslate(X,i.railInset,.5*(U.inputAreaWidth-i.railWidth)+U.currentValueTotalHeight)}ue.exports=function(P){var j=P._fullLayout,U=function(ee,se){for(var G=ee[i.name],H=[],Y=0;Y<G.length;Y++){var oe=G[Y];oe.visible&&(oe._gd=se,H.push(oe))}return H}(j,P),$=j._infolayer.selectAll("g."+i.containerClassName).data(U.length>0?[0]:[]);function X(ee){ee._commandObserver&&(ee._commandObserver.remove(),delete ee._commandObserver),b.autoMargin(P,p(ee))}if($.enter().append("g").classed(i.containerClassName,!0).style("cursor","ew-resize"),$.exit().each(function(){y.select(this).selectAll("g."+i.groupClassName).each(X)}).remove(),0!==U.length){var te=$.selectAll("g."+i.groupClassName).data(U,f);te.enter().append("g").classed(i.groupClassName,!0),te.exit().each(X).remove();for(var ae=0;ae<U.length;ae++)g(P,U[ae]);te.each(function(ee){var se=y.select(this);(function(G){var H=G._dims;H.labelSteps=[];for(var Y=G._stepCount,oe=0;oe<Y;oe+=H.labelStride)H.labelSteps.push({fraction:oe/(Y-1),step:G._visibleSteps[oe]})})(ee),b.manageCommandObserver(P,ee,ee._visibleSteps,function(G){var H=se.data()[0];H.active!==G.index&&(H._dragging||M(P,se,H,G.index,!1,!0))}),function(G,H,Y){(Y.steps[Y.active]||{}).visible||(Y.active=Y._visibleSteps[0]._index),H.call(m,Y).call(L,Y).call(c,Y).call(C,Y).call(F,G,Y).call(u,G,Y);var oe=Y._dims;_.setTranslate(H,oe.lx+Y.pad.l,oe.ly+Y.pad.t),H.call(O,Y,!1),H.call(m,Y)}(P,y.select(this),ee)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(x,ue,le){"use strict";var y=x("./constants");ue.exports={moduleType:"component",name:y.name,layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),draw:x("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=x("../../plots/plots"),_=x("../../registry"),e=x("../../lib"),o=e.strTranslate,a=x("../drawing"),l=x("../color"),i=x("../../lib/svg_text_utils"),v=x("../../constants/interactions"),h=x("../../constants/alignment").OPPOSITE_SIDE,s=/ [XY][0-9]* /;ue.exports={draw:function(d,p,f){var g,u=f.propName,w=f.placeholder,c=f.traceIndex,E=f.avoid||{},M=f.attributes,S=f.transform,C=f.containerGroup,O=d._fullLayout,I=1,N=!1,F=f.propContainer.title,L=(F&&F.text?F.text:"").trim(),P=F&&F.font?F.font:{},j=P.family,U=P.size,$=P.color;"title.text"===u?g="titleText":-1!==u.indexOf("axis")?g="axisTitleText":u.indexOf(!0)&&(g="colorbarTitleText");var X=d._context.edits[g];""===L?I=0:L.replace(s," % ")===w.replace(s," % ")&&(I=.2,N=!0,X||(L="")),f._meta?L=e.templateString(L,f._meta):O._meta&&(L=e.templateString(L,O._meta));var te,ae=L||X;C||(C=e.ensureSingle(O._infolayer,"g","g-"+p),te=O._hColorbarMoveTitle);var J=C.selectAll("text").data(ae?[0]:[]);if(J.enter().append("text"),J.text(L).attr("class",p),J.exit().remove(),!ae)return C;function ee(H){e.syncOrAsync([se,G],H)}function se(H){var Y;return!S&&te&&(S={}),S?(Y="",S.rotate&&(Y+="rotate("+[S.rotate,M.x,M.y]+")"),(S.offset||te)&&(Y+=o(0,(S.offset||0)-(te||0)))):Y=null,H.attr("transform",Y),H.style({"font-family":j,"font-size":y.round(U,2)+"px",fill:l.rgb($),opacity:I*l.opacity($),"font-weight":T.fontWeight}).attr(M).call(i.convertToTspans,d),T.previousPromises(d)}function G(H){var Y=y.select(H.node().parentNode);if(E&&E.selection&&E.side&&L){Y.attr("transform",null);var oe=h[E.side],W="left"===E.side||"top"===E.side?-1:1,ne=b(E.pad)?E.pad:2,re=a.bBox(Y.node()),fe=E.maxShift||W*({left:0,top:0,right:O.width,bottom:O.height}[E.side]-re[E.side]),me=0;if(fe<0)me=fe;else{var pe=E.offsetLeft||0,we=E.offsetTop||0;re.left-=pe,re.right-=pe,re.top-=we,re.bottom-=we,E.selection.each(function(){var Te=a.bBox(this);e.bBoxIntersect(re,Te,ne)&&(me=Math.max(me,W*(Te[E.side]-re[oe])+ne))}),me=Math.min(fe,me)}if(me>0||fe<0){var ye={left:[-me,0],right:[me,0],top:[0,-me],bottom:[0,me]}[E.side];Y.attr("transform",o(ye[0],ye[1]))}}}return J.call(ee),X&&(L?J.on(".opacity",null):(I=0,N=!0,J.text(w).on("mouseover.opacity",function(){y.select(this).transition().duration(v.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){y.select(this).transition().duration(v.HIDE_PLACEHOLDER).style("opacity",0)})),J.call(i.makeEditable,{gd:d}).on("edit",function(H){void 0!==c?_.call("_guiRestyle",d,u,H,c):_.call("_guiRelayout",d,u,H)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(ee)}).on("input",function(H){this.text(H||" ").call(i.positionText,M.x,M.y)})),J.classed("js-placeholder",N),C}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(x,ue,le){"use strict";var y=x("../../plots/font_attributes"),b=x("../color/attributes"),T=x("../../lib/extend").extendFlat,_=x("../../plot_api/edit_types").overrideAll,e=x("../../plots/pad_attributes"),o=x("../../plot_api/plot_template").templatedArray,a=o("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ue.exports=_(o("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:T(e({editType:"arraydraw"}),{}),font:y({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:b.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(x,ue,le){"use strict";ue.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/array_container_defaults"),T=x("./attributes"),_=x("./constants").name,e=T.buttons;function o(l,i,v){function h(s,d){return y.coerce(l,i,T,s,d)}h("visible",b(l,i,{name:"buttons",handleItemDefaults:a}).length>0)&&(h("active"),h("direction"),h("type"),h("showactive"),h("x"),h("y"),y.noneOrAll(l,i,["x","y"]),h("xanchor"),h("yanchor"),h("pad.t"),h("pad.r"),h("pad.b"),h("pad.l"),y.coerceFont(h,"font",v.font),h("bgcolor",v.paper_bgcolor),h("bordercolor"),h("borderwidth"))}function a(l,i){function v(h,s){return y.coerce(l,i,e,h,s)}v("visible","skip"===l.method||Array.isArray(l.args))&&(v("method"),v("args"),v("args2"),v("label"),v("execute"))}ue.exports=function(l,i){b(l,i,{name:_,handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../plots/plots"),T=x("../color"),_=x("../drawing"),e=x("../../lib"),o=x("../../lib/svg_text_utils"),a=x("../../plot_api/plot_template").arrayEditor,l=x("../../constants/alignment").LINE_SPACING,i=x("./constants"),v=x("./scrollbox");function h(I){return I._index}function s(I,N){return+I.attr(i.menuIndexAttrName)===N._index}function d(I,N,F,L,P,j,U,$){N.active=U,a(I.layout,i.name,N).applyUpdate("active",U),"buttons"===N.type?f(I,L,null,null,N):"dropdown"===N.type&&(P.attr(i.menuIndexAttrName,"-1"),p(I,L,P,j,N),$||f(I,L,P,j,N))}function p(I,N,F,L,P){var j=e.ensureSingle(N,"g",i.headerClassName,function(J){J.style("pointer-events","all")}),U=P._dims,te={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},ae={width:U.headerWidth,height:U.headerHeight};j.call(g,P,P.buttons[P.active]||i.blankHeaderOpts,I).call(C,P,te,ae),e.ensureSingle(N,"text",i.headerArrowClassName,function(J){J.attr("text-anchor","end").call(_.font,P.font).text(i.arrowSymbol[P.direction])}).attr({x:U.headerWidth-i.arrowOffsetX+P.pad.l,y:U.headerHeight/2+i.textOffsetY+P.pad.t}),j.on("click",function(){F.call(O,String(s(F,P)?-1:P._index)),f(I,N,F,L,P)}),j.on("mouseover",function(){j.call(c)}),j.on("mouseout",function(){j.call(E,P)}),_.setTranslate(N,U.lx,U.ly)}function f(I,N,F,L,P){F||(F=N).attr("pointer-events","all");var j=-1==+F.attr(i.menuIndexAttrName)&&"buttons"!==P.type?[]:P.buttons,U="dropdown"===P.type?i.dropdownButtonClassName:i.buttonClassName,$=F.selectAll("g."+U).data(e.filterVisible(j)),X=$.enter().append("g").classed(U,!0),te=$.exit();"dropdown"===P.type?(X.attr("opacity","0").transition().attr("opacity","1"),te.transition().attr("opacity","0").remove()):te.remove();var ae=0,J=0,ee=P._dims,se=-1!==["up","down"].indexOf(P.direction);"dropdown"===P.type&&(se?J=ee.headerHeight+i.gapButtonHeader:ae=ee.headerWidth+i.gapButtonHeader),"dropdown"===P.type&&"up"===P.direction&&(J=-i.gapButtonHeader+i.gapButton-ee.openHeight),"dropdown"===P.type&&"left"===P.direction&&(ae=-i.gapButtonHeader+i.gapButton-ee.openWidth);var Y,oe,W,G={x:ee.lx+ae+P.pad.l,y:ee.ly+J+P.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},H={l:G.x+P.borderwidth,t:G.y+P.borderwidth};$.each(function(Y,oe){var W=y.select(this);W.call(g,P,Y,I).call(C,P,G),W.on("click",function(){y.event.defaultPrevented||(Y.execute&&(Y.args2&&P.active===oe?(d(I,P,0,N,F,L,-1),b.executeAPICommand(I,Y.method,Y.args2)):(d(I,P,0,N,F,L,oe),b.executeAPICommand(I,Y.method,Y.args))),I.emit("plotly_buttonclicked",{menu:P,button:Y,active:P.active}))}),W.on("mouseover",function(){W.call(c)}),W.on("mouseout",function(){W.call(E,P),$.call(w,P)})}),$.call(w,P),se?(H.w=Math.max(ee.openWidth,ee.headerWidth),H.h=G.y-H.t):(H.w=G.x-H.l,H.h=Math.max(ee.openHeight,ee.headerHeight)),H.direction=P.direction,L&&($.size()?function(Y,oe,W,ne,re,ce){var fe,me,pe,we=re.direction,Te=re._dims,Le=re.active;if("up"===we||"down"===we)for(me=0,pe=0;pe<Le;pe++)me+=Te.heights[pe]+i.gapButton;else for(fe=0,pe=0;pe<Le;pe++)fe+=Te.widths[pe]+i.gapButton;ne.enable(ce,fe,me),ne.hbar&&ne.hbar.attr("opacity","0").transition().attr("opacity","1"),ne.vbar&&ne.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,L,P,H):(W=!!(Y=L).vbar,(oe=!!Y.hbar)&&Y.hbar.transition().attr("opacity","0").each("end",function(){oe=!1,W||Y.disable()}),W&&Y.vbar.transition().attr("opacity","0").each("end",function(){W=!1,oe||Y.disable()})))}function g(I,N,F,L){I.call(m,N).call(u,N,F,L)}function m(I,N){e.ensureSingle(I,"rect",i.itemRectClassName,function(F){F.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(T.stroke,N.bordercolor).call(T.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px")}function u(I,N,F,L){var P=e.ensureSingle(I,"text",i.itemTextClassName,function($){$.attr({"text-anchor":"start","data-notex":1})}),j=F.label,U=L._fullLayout._meta;U&&(j=e.templateString(j,U)),P.call(_.font,N.font).text(j).call(o.convertToTspans,L)}function w(I,N){var F=N.active;I.each(function(L,P){var j=y.select(this);P===F&&N.showactive&&j.select("rect."+i.itemRectClassName).call(T.fill,i.activeColor)})}function c(I){I.select("rect."+i.itemRectClassName).call(T.fill,i.hoverColor)}function E(I,N){I.select("rect."+i.itemRectClassName).call(T.fill,N.bgcolor)}function M(I,N){var F=N._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},L=_.tester.selectAll("g."+i.dropdownButtonClassName).data(e.filterVisible(N.buttons));L.enter().append("g").classed(i.dropdownButtonClassName,!0);var P=-1!==["up","down"].indexOf(N.direction);L.each(function(ae,J){var ee=y.select(this);ee.call(g,N,ae,I);var se=ee.select("."+i.itemTextClassName),G=se.node()&&_.bBox(se.node()).width,H=Math.max(G+i.textPadX,i.minWidth),Y=N.font.size*l,oe=o.lineCount(se),W=Math.max(Y*oe,i.minHeight)+i.textOffsetY;W=Math.ceil(W),H=Math.ceil(H),F.widths[J]=H,F.heights[J]=W,F.height1=Math.max(F.height1,W),F.width1=Math.max(F.width1,H),P?(F.totalWidth=Math.max(F.totalWidth,H),F.openWidth=F.totalWidth,F.totalHeight+=W+i.gapButton,F.openHeight+=W+i.gapButton):(F.totalWidth+=H+i.gapButton,F.openWidth+=H+i.gapButton,F.totalHeight=Math.max(F.totalHeight,W),F.openHeight=F.totalHeight)}),P?F.totalHeight-=i.gapButton:F.totalWidth-=i.gapButton,F.headerWidth=F.width1+i.arrowPadX,F.headerHeight=F.height1,"dropdown"===N.type&&(P?(F.width1+=i.arrowPadX,F.totalHeight=F.height1):F.totalWidth=F.width1,F.totalWidth+=i.arrowPadX),L.remove();var j=F.totalWidth+N.pad.l+N.pad.r,U=F.totalHeight+N.pad.t+N.pad.b,$=I._fullLayout._size;F.lx=$.l+$.w*N.x,F.ly=$.t+$.h*(1-N.y);var X="left";e.isRightAnchor(N)&&(F.lx-=j,X="right"),e.isCenterAnchor(N)&&(F.lx-=j/2,X="center");var te="top";e.isBottomAnchor(N)&&(F.ly-=U,te="bottom"),e.isMiddleAnchor(N)&&(F.ly-=U/2,te="middle"),F.totalWidth=Math.ceil(F.totalWidth),F.totalHeight=Math.ceil(F.totalHeight),F.lx=Math.round(F.lx),F.ly=Math.round(F.ly),b.autoMargin(I,S(N),{x:N.x,y:N.y,l:j*({right:1,center:.5}[X]||0),r:j*({left:1,center:.5}[X]||0),b:U*({top:1,middle:.5}[te]||0),t:U*({bottom:1,middle:.5}[te]||0)})}function S(I){return i.autoMarginIdRoot+I._index}function C(I,N,F,L){L=L||{};var P=I.select("."+i.itemRectClassName),j=I.select("."+i.itemTextClassName),U=N.borderwidth,$=F.index,X=N._dims;_.setTranslate(I,U+F.x,U+F.y);var te=-1!==["up","down"].indexOf(N.direction),ae=L.height||(te?X.heights[$]:X.height1);P.attr({x:0,y:0,width:L.width||(te?X.width1:X.widths[$]),height:ae});var J=N.font.size*l,ee=(o.lineCount(j)-1)*J/2;o.positionText(j,i.textOffsetX,ae/2-ee+i.textOffsetY),te?F.y+=X.heights[$]+F.yPad:F.x+=X.widths[$]+F.xPad,F.index++}function O(I,N){I.attr(i.menuIndexAttrName,N||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}ue.exports=function(I){var N=I._fullLayout,F=e.filterVisible(N[i.name]);function L(J){b.autoMargin(I,S(J))}var P=N._menulayer.selectAll("g."+i.containerClassName).data(F.length>0?[0]:[]);if(P.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){y.select(this).selectAll("g."+i.headerGroupClassName).each(L)}).remove(),0!==F.length){var j=P.selectAll("g."+i.headerGroupClassName).data(F,h);j.enter().append("g").classed(i.headerGroupClassName,!0);for(var U=e.ensureSingle(P,"g",i.dropdownButtonGroupClassName,function(J){J.style("pointer-events","all")}),$=0;$<F.length;$++)M(I,F[$]);var ae=new v(I,U,"updatemenus"+N._uid);j.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(O)),j.exit().each(function(J){U.call(O),L(J)}).remove(),j.each(function(J){var ee=y.select(this),se="dropdown"===J.type?U:null;b.manageCommandObserver(I,J,J.buttons,function(G){d(I,J,0,ee,se,ae,G.index,!0)}),"dropdown"===J.type?(p(I,ee,U,ae,J),s(U,J)&&f(I,ee,U,ae,J)):f(I,ee,null,null,J)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(x,ue,le){arguments[4][463][0].apply(le,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(x,ue,le){"use strict";ue.exports=e;var y=x("@plotly/d3"),b=x("../color"),T=x("../drawing"),_=x("../../lib");function e(o,a,l){this.gd=o,this.container=a,this.id=l,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(o,a,l){var i=this.gd._fullLayout,v=i.width,h=i.height;this.position=o;var s,d,p,f,g=this.position.l,m=this.position.w,u=this.position.t,w=this.position.h,c=this.position.direction,E="down"===c,M="left"===c,S="up"===c,C=m,O=w;E||M||"right"===c||S||(this.position.direction="down",E=!0),E||S?(d=(s=g)+C,E?(p=u,O=(f=Math.min(p+O,h))-p):O=(f=u+O)-(p=Math.max(f-O,0))):(f=(p=u)+O,M?C=(d=g+C)-(s=Math.max(d-C,0)):(s=g,C=(d=Math.min(s+C,v))-s)),this._box={l:s,t:p,w:C,h:O};var I=m>C,N=e.barLength+2*e.barPad,F=e.barWidth+2*e.barPad,L=g,P=u+w;P+F>h&&(P=h-F);var j=this.container.selectAll("rect.scrollbar-horizontal").data(I?[0]:[]);j.exit().on(".drag",null).remove(),j.enter().append("rect").classed("scrollbar-horizontal",!0).call(b.fill,e.barColor),I?(this.hbar=j.attr({rx:e.barRadius,ry:e.barRadius,x:L,y:P,width:N,height:F}),this._hbarXMin=L+N/2,this._hbarTranslateMax=C-N):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=w>O,$=e.barWidth+2*e.barPad,X=e.barLength+2*e.barPad,te=g+m,ae=u;te+$>v&&(te=v-$);var J=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);J.exit().on(".drag",null).remove(),J.enter().append("rect").classed("scrollbar-vertical",!0).call(b.fill,e.barColor),U?(this.vbar=J.attr({rx:e.barRadius,ry:e.barRadius,x:te,y:ae,width:$,height:X}),this._vbarYMin=ae+X/2,this._vbarTranslateMax=O-X):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var ee=this.id,se=s-.5,G=U?d+$+.5:d+.5,H=p-.5,Y=I?f+F+.5:f+.5,oe=i._topdefs.selectAll("#"+ee).data(I||U?[0]:[]);if(oe.exit().remove(),oe.enter().append("clipPath").attr("id",ee).append("rect"),I||U?(this._clipRect=oe.select("rect").attr({x:Math.floor(se),y:Math.floor(H),width:Math.ceil(G)-Math.floor(se),height:Math.ceil(Y)-Math.floor(H)}),this.container.call(T.setClipUrl,ee,this.gd),this.bg.attr({x:g,y:u,width:m,height:w})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(T.setClipUrl,null),delete this._clipRect),I||U){var W=y.behavior.drag().on("dragstart",function(){y.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(W);var ne=y.behavior.drag().on("dragstart",function(){y.event.sourceEvent.preventDefault(),y.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));I&&this.hbar.on(".drag",null).call(ne),U&&this.vbar.on(".drag",null).call(ne)}this.setTranslate(a,l)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(T.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var o=this.translateX,a=this.translateY;this.hbar&&(o-=y.event.dx),this.vbar&&(a-=y.event.dy),this.setTranslate(o,a)},e.prototype._onBoxWheel=function(){var o=this.translateX,a=this.translateY;this.hbar&&(o+=y.event.deltaY),this.vbar&&(a+=y.event.deltaY),this.setTranslate(o,a)},e.prototype._onBarDrag=function(){var o=this.translateX,a=this.translateY;if(this.hbar){var l=o+this._hbarXMin,i=l+this._hbarTranslateMax;o=(_.constrain(y.event.x,l,i)-l)/(i-l)*(this.position.w-this._box.w)}if(this.vbar){var v=a+this._vbarYMin,h=v+this._vbarTranslateMax;a=(_.constrain(y.event.y,v,h)-v)/(h-v)*(this.position.h-this._box.h)}this.setTranslate(o,a)},e.prototype.setTranslate=function(o,a){var l=this.position.w-this._box.w,i=this.position.h-this._box.h;o=_.constrain(o||0,0,l),a=_.constrain(a||0,0,i),this.translateX=o,this.translateY=a,this.container.call(T.setTranslate,this._box.l-this.position.l-o,this._box.t-this.position.t-a),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+o-.5),y:Math.floor(this.position.t+a-.5)}),this.hbar&&this.hbar.call(T.setTranslate,o+o/l*this._hbarTranslateMax,a),this.vbar&&this.vbar.call(T.setTranslate,o,a+a/i*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(x,ue,le){"use strict";ue.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(x,ue,le){"use strict";ue.exports={axisRefDescription:function(y,b,T){return["If set to a",y,"axis id (e.g. *"+y+"* or","*"+y+"2*), the `"+y+"` position refers to a",y,"coordinate. If set to *paper*, the `"+y+"`","position refers to the distance from the",b,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",b,"("+T+"). If set to a",y,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",b,"of the domain of that axis: e.g.,","*"+y+"2 domain* refers to the domain of the second",y," axis and a",y,"position of 0.5 refers to the","point between the",b,"and the",T,"of the domain of the","second",y,"axis."].join(" ")}}},{}],473:[function(x,ue,le){"use strict";ue.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(x,ue,le){"use strict";ue.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(x,ue,le){"use strict";ue.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(x,ue,le){"use strict";ue.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(x,ue,le){"use strict";ue.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(x,ue,le){"use strict";ue.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(x,ue,le){"use strict";ue.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(x,ue,le){"use strict";le.xmlns="http://www.w3.org/2000/xmlns/",le.svg="http://www.w3.org/2000/svg",le.xlink="http://www.w3.org/1999/xlink",le.svgAttrs={xmlns:le.svg,"xmlns:xlink":le.xlink}},{}],481:[function(x,ue,le){"use strict";le.version=x("./version").version,x("native-promise-only"),x("../build/plotcss");for(var y=x("./registry"),b=le.register=y.register,T=x("./plot_api"),_=Object.keys(T),e=0;e<_.length;e++){var o=_[e];"_"!==o.charAt(0)&&(le[o]=T[o]),b({moduleType:"apiMethod",name:o,fn:T[o]})}b(x("./traces/scatter")),b([x("./components/legend"),x("./components/fx"),x("./components/annotations"),x("./components/annotations3d"),x("./components/shapes"),x("./components/images"),x("./components/updatemenus"),x("./components/sliders"),x("./components/rangeslider"),x("./components/rangeselector"),x("./components/grid"),x("./components/errorbars"),x("./components/colorscale"),x("./components/colorbar"),x("./components/modebar")]),b([x("./locale-en"),x("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(b(window.PlotlyLocales),delete window.PlotlyLocales),le.Icons=x("./fonts/ploticon");var a=x("./components/fx"),l=x("./plots/plots");le.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},le.Fx={hover:a.hover,unhover:a.unhover,loneHover:a.loneHover,loneUnhover:a.loneUnhover},le.Snapshot=x("./snapshot"),le.PlotSchema=x("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":939,"./version":1123,"native-promise-only":245}],482:[function(x,ue,le){"use strict";ue.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(x,ue,le){"use strict";le.isLeftAnchor=function(y){return"left"===y.xanchor||"auto"===y.xanchor&&y.x<=1/3},le.isCenterAnchor=function(y){return"center"===y.xanchor||"auto"===y.xanchor&&y.x>1/3&&y.x<2/3},le.isRightAnchor=function(y){return"right"===y.xanchor||"auto"===y.xanchor&&y.x>=2/3},le.isTopAnchor=function(y){return"top"===y.yanchor||"auto"===y.yanchor&&y.y>=2/3},le.isMiddleAnchor=function(y){return"middle"===y.yanchor||"auto"===y.yanchor&&y.y>1/3&&y.y<2/3},le.isBottomAnchor=function(y){return"bottom"===y.yanchor||"auto"===y.yanchor&&y.y<=1/3}},{}],484:[function(x,ue,le){"use strict";var y=x("./mod"),b=y.mod,T=y.modHalf,_=Math.PI,e=2*_;function o(v){return Math.abs(v[1]-v[0])>e-1e-14}function a(v,h){return T(h-v,e)}function l(v,h){if(o(h))return!0;var s,d;h[0]<h[1]?(s=h[0],d=h[1]):(s=h[1],d=h[0]),(s=b(s,e))>(d=b(d,e))&&(d+=e);var p=b(v,e),f=p+e;return p>=s&&p<=d||f>=s&&f<=d}function i(v,h,s,d,p,f,g){p=p||0,f=f||0;var m,u,w,c,E,M=o([s,d]);function S(N,F){return[N*Math.cos(F)+p,f-N*Math.sin(F)]}M?(m=0,u=_,w=e):s<d?(m=s,w=d):(m=d,w=s),v<h?(c=v,E=h):(c=h,E=v);var C,O=Math.abs(w-m)<=_?0:1;function I(N,F,L){return"A"+[N,N]+" "+[0,O,L]+" "+S(N,F)}return M?C=null===c?"M"+S(E,m)+I(E,u,0)+I(E,w,0)+"Z":"M"+S(c,m)+I(c,u,0)+I(c,w,0)+"ZM"+S(E,m)+I(E,u,1)+I(E,w,1)+"Z":null===c?(C="M"+S(E,m)+I(E,w,0),g&&(C+="L0,0Z")):C="M"+S(c,m)+"L"+S(E,m)+I(E,w,0)+"L"+S(c,w)+I(c,m,1)+"Z",C}ue.exports={deg2rad:function(v){return v/180*_},rad2deg:function(v){return v/_*180},angleDelta:a,angleDist:function(v,h){return Math.abs(a(v,h))},isFullCircle:o,isAngleInsideSector:l,isPtInsideSector:function(v,h,s,d){return!!l(h,d)&&(s[0]<s[1]?(p=s[0],f=s[1]):(p=s[1],f=s[0]),v>=p&&v<=f);var p,f},pathArc:function(v,h,s,d,p){return i(null,v,h,s,d,p,0)},pathSector:function(v,h,s,d,p){return i(null,v,h,s,d,p,1)},pathAnnulus:function(v,h,s,d,p,f){return i(v,h,s,d,p,f,1)}}},{"./mod":510}],485:[function(x,ue,le){"use strict";var y=Array.isArray,b=ArrayBuffer,T=DataView;function _(a){return b.isView(a)&&!(a instanceof T)}function e(a){return y(a)||_(a)}function o(a,l,i){if(e(a)){if(e(a[0])){for(var v=i,h=0;h<a.length;h++)v=l(v,a[h].length);return v}return a.length}return 0}le.isTypedArray=_,le.isArrayOrTypedArray=e,le.isArray1D=function(a){return!e(a[0])},le.ensureArray=function(a,l){return y(a)||(a=[]),a.length=l,a},le.concat=function(){var a,l,i,v,h,s,d,p,f=[],g=!0,m=0;for(i=0;i<arguments.length;i++)(s=(v=arguments[i]).length)&&(l?f.push(v):(l=v,h=s),y(v)?a=!1:(g=!1,m?a!==v.constructor&&(a=!1):a=v.constructor),m+=s);if(!m)return[];if(!f.length)return l;if(g)return l.concat.apply(l,f);if(a){for((d=new a(m)).set(l),i=0;i<f.length;i++)d.set(v=f[i],h),h+=v.length;return d}for(d=new Array(m),p=0;p<l.length;p++)d[p]=l[p];for(i=0;i<f.length;i++){for(v=f[i],p=0;p<v.length;p++)d[h+p]=v[p];h+=p}return d},le.maxRowLength=function(a){return o(a,Math.max,0)},le.minRowLength=function(a){return o(a,Math.min,1/0)}},{}],486:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../constants/numerical").BADNUM,T=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ue.exports=function(_){return"string"==typeof _&&(_=_.replace(T,"")),y(_)?Number(_):b}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(x,ue,le){"use strict";ue.exports=function(y){var b=y._fullLayout;b._glcanvas&&b._glcanvas.size()&&b._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],488:[function(x,ue,le){"use strict";ue.exports=function(y){y._responsiveChartHandler&&(window.removeEventListener("resize",y._responsiveChartHandler),delete y._responsiveChartHandler)}},{}],489:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("tinycolor2"),T=x("../plots/attributes"),_=x("../components/colorscale/scales"),e=x("../components/color"),o=x("../constants/interactions").DESELECTDIM,a=x("./nested_property"),l=x("./regex").counter,i=x("./mod").modHalf,v=x("./array").isArrayOrTypedArray;function h(s,d){var p=le.valObjectMeta[d.valType];if(d.arrayOk&&v(s))return!0;if(p.validateFunction)return p.validateFunction(s,d);var f={},g=f;return p.coerceFunction(s,{set:function(u){g=u}},f,d),g!==f}le.valObjectMeta={data_array:{coerceFunction:function(s,d,p){v(s)?d.set(s):void 0!==p&&d.set(p)}},enumerated:{coerceFunction:function(s,d,p,f){f.coerceNumber&&(s=+s),-1===f.values.indexOf(s)?d.set(p):d.set(s)},validateFunction:function(s,d){d.coerceNumber&&(s=+s);for(var p=d.values,f=0;f<p.length;f++){var g=String(p[f]);if("/"===g.charAt(0)&&"/"===g.charAt(g.length-1)){if(new RegExp(g.substr(1,g.length-2)).test(s))return!0}else if(s===p[f])return!0}return!1}},boolean:{coerceFunction:function(s,d,p){d.set(!0===s||!1===s?s:p)}},number:{coerceFunction:function(s,d,p,f){!y(s)||void 0!==f.min&&s<f.min||void 0!==f.max&&s>f.max?d.set(p):d.set(+s)}},integer:{coerceFunction:function(s,d,p,f){s%1||!y(s)||void 0!==f.min&&s<f.min||void 0!==f.max&&s>f.max?d.set(p):d.set(+s)}},string:{coerceFunction:function(s,d,p,f){d.set("string"!=typeof s?!0!==f.strict&&"number"==typeof s?String(s):p:f.noBlank&&!s?p:s)}},color:{coerceFunction:function(s,d,p){b(s).isValid()?d.set(s):d.set(p)}},colorlist:{coerceFunction:function(s,d,p){Array.isArray(s)&&s.length&&s.every(function(f){return b(f).isValid()})?d.set(s):d.set(p)}},colorscale:{coerceFunction:function(s,d,p){d.set(_.get(s,p))}},angle:{coerceFunction:function(s,d,p){"auto"===s?d.set("auto"):y(s)?d.set(i(+s,360)):d.set(p)}},subplotid:{coerceFunction:function(s,d,p,f){var g=f.regex||l(p);"string"==typeof s&&g.test(s)?d.set(s):d.set(p)},validateFunction:function(s,d){var p=d.dflt;return s===p||"string"==typeof s&&!!l(p).test(s)}},flaglist:{coerceFunction:function(s,d,p,f){if("string"==typeof s)if(-1===(f.extras||[]).indexOf(s)){for(var g=s.split("+"),m=0;m<g.length;){var u=g[m];-1===f.flags.indexOf(u)||g.indexOf(u)<m?g.splice(m,1):m++}d.set(g.length?g.join("+"):p)}else d.set(s);else d.set(p)}},any:{coerceFunction:function(s,d,p){d.set(void 0===s?p:s)}},info_array:{coerceFunction:function(s,d,p,f){function g(P,j,U){var $;return void 0===U&&(U=j.dflt),le.valObjectMeta[j.valType].coerceFunction(P,{set:function(te){$=te}},U,j),$}var m=2===f.dimensions||"1-2"===f.dimensions&&Array.isArray(s)&&Array.isArray(s[0]);if(Array.isArray(s)){var u,w,c,M,S,C=f.items,O=[],I=Array.isArray(C),N=I&&m&&Array.isArray(C[0]),F=m&&I&&!N,L=I&&!F?C.length:s.length;if(p=Array.isArray(p)?p:[],m)for(u=0;u<L;u++)for(O[u]=[],c=Array.isArray(s[u])?s[u]:[],M=F?C.length:I?C[u].length:c.length,w=0;w<M;w++)void 0!==(S=g(c[w],F?C[w]:I?C[u][w]:C,(p[u]||[])[w]))&&(O[u][w]=S);else for(u=0;u<L;u++)void 0!==(S=g(s[u],I?C[u]:C,p[u]))&&(O[u]=S);d.set(O)}else d.set(p)},validateFunction:function(s,d){if(!Array.isArray(s))return!1;var p=d.items,f=Array.isArray(p),g=2===d.dimensions;if(!d.freeLength&&s.length!==p.length)return!1;for(var m=0;m<s.length;m++)if(g){if(!Array.isArray(s[m])||!d.freeLength&&s[m].length!==p[m].length)return!1;for(var u=0;u<s[m].length;u++)if(!h(s[m][u],f?p[m][u]:p))return!1}else if(!h(s[m],f?p[m]:p))return!1;return!0}}},le.coerce=function(s,d,p,f,g){var m=a(p,f).get(),u=a(s,f),w=a(d,f),c=u.get(),E=d._template;if(void 0===c&&E&&(c=a(E,f).get(),E=0),void 0===g&&(g=m.dflt),m.arrayOk&&v(c))return w.set(c),c;var M=le.valObjectMeta[m.valType].coerceFunction;M(c,w,g,m);var S=w.get();return E&&S===g&&!h(c,m)&&(M(c=a(E,f).get(),w,g,m),S=w.get()),S},le.coerce2=function(s,d,p,f,g){var m=a(s,f),u=le.coerce(s,d,p,f,g);return null!=m.get()&&u},le.coerceFont=function(s,d,p){var f={};return f.family=s(d+".family",(p=p||{}).family),f.size=s(d+".size",p.size),f.color=s(d+".color",p.color),f},le.coercePattern=function(s,d,p,f){if(s(d+".shape")){s(d+".solidity"),s(d+".size");var g="overlay"===s(d+".fillmode");if(!f){var m=s(d+".bgcolor",g?p:void 0);s(d+".fgcolor",g?e.contrast(m):p)}s(d+".fgopacity",g?.5:1)}},le.coerceHoverinfo=function(s,d,p){var f,g=d._module.attributes,m=g.hoverinfo?g:T,u=m.hoverinfo;if(1===p._dataLength){var w="all"===u.dflt?u.flags.slice():u.dflt.split("+");w.splice(w.indexOf("name"),1),f=w.join("+")}return le.coerce(s,d,m,"hoverinfo",f)},le.coerceSelectionMarkerOpacity=function(s,d){if(s.marker){var p,f,g=s.marker.opacity;void 0!==g&&(v(g)||s.selected||s.unselected||(p=g,f=o*g),d("selected.marker.opacity",p),d("unselected.marker.opacity",f))}},le.validate=h},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(x,ue,le){"use strict";var y,b,T=x("d3-time-format").timeFormat,_=x("fast-isnumeric"),e=x("./loggers"),o=x("./mod").mod,a=x("../constants/numerical"),l=a.BADNUM,i=a.ONEDAY,v=a.ONEHOUR,h=a.ONEMIN,s=a.ONESEC,d=a.EPOCHJD,p=x("../registry"),f=x("d3-time-format").utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,u=(new Date).getFullYear()-70;function w(j){return j&&p.componentsRegistry.calendars&&"string"==typeof j&&"gregorian"!==j}function c(j,U){return String(j+Math.pow(10,U)).substr(1)}le.dateTick0=function(j,U){var te,ae,$=(ae=!!U,w(te=j)?ae?p.getComponentMethod("calendars","CANONICAL_SUNDAY")[te]:p.getComponentMethod("calendars","CANONICAL_TICK")[te]:ae?"2000-01-02":"2000-01-01");if(U<2)return $;var X=le.dateTime2ms($,j);return le.ms2DateTime(X+=i*(U-1),0,j)},le.dfltRange=function(j){return w(j)?p.getComponentMethod("calendars","DFLTRANGE")[j]:["2000-01-01","2001-01-01"]},le.isJSDate=function(j){return"object"==typeof j&&null!==j&&"function"==typeof j.getTime},le.dateTime2ms=function(j,U){if(le.isJSDate(j)){var $=j.getTimezoneOffset()*h,X=(j.getUTCMinutes()-j.getMinutes())*h+(j.getUTCSeconds()-j.getSeconds())*s+(j.getUTCMilliseconds()-j.getMilliseconds());if(X){var te=3*h;$=$-te/2+o(X-$+te/2,te)}return(j=Number(j)-$)>=y&&j<=b?j:l}if("string"!=typeof j&&"number"!=typeof j)return l;j=String(j);var ae=w(U),J=j.charAt(0);!ae||"G"!==J&&"g"!==J||(j=j.substr(1),U="");var ee=ae&&"chinese"===U.substr(0,7),se=j.match(ee?m:g);if(!se)return l;var G=se[1],H=se[3]||"1",Y=Number(se[5]||1),oe=Number(se[7]||0),W=Number(se[9]||0),ne=Number(se[11]||0);if(ae){if(2===G.length)return l;var re;G=Number(G);try{var ce=p.getComponentMethod("calendars","getCal")(U);if(ee){var fe="i"===H.charAt(H.length-1);H=parseInt(H,10),re=ce.newDate(G,ce.toMonthIndex(G,H,fe),Y)}else re=ce.newDate(G,Number(H),Y)}catch(pe){return l}return re?(re.toJD()-d)*i+oe*v+W*h+ne*s:l}G=2===G.length?(Number(G)+2e3-u)%100+u:Number(G),H-=1;var me=new Date(Date.UTC(2e3,H,Y,oe,W));return me.setUTCFullYear(G),me.getUTCMonth()!==H||me.getUTCDate()!==Y?l:me.getTime()+ne*s},y=le.MIN_MS=le.dateTime2ms("-9999"),b=le.MAX_MS=le.dateTime2ms("9999-12-31 23:59:59.9999"),le.isDateTime=function(j,U){return le.dateTime2ms(j,U)!==l};var E=90*i,M=3*v,S=5*h;function C(j,U,$,X,te){if((U||$||X||te)&&(j+=" "+c(U,2)+":"+c($,2),(X||te)&&(j+=":"+c(X,2),te))){for(var ae=4;te%10==0;)ae-=1,te/=10;j+="."+c(te,ae)}return j}le.ms2DateTime=function(j,U,$){if("number"!=typeof j||!(j>=y&&j<=b))return l;U||(U=0);var X,te,ae,J,ee,se,G=Math.floor(10*o(j+.05,1)),H=Math.round(j-G/10);if(w($)){var Y=Math.floor(H/i)+d,oe=Math.floor(o(j,i));try{X=p.getComponentMethod("calendars","getCal")($).fromJD(Y).formatDate("yyyy-mm-dd")}catch(W){X=f("G%Y-%m-%d")(new Date(H))}if("-"===X.charAt(0))for(;X.length<11;)X="-0"+X.substr(1);else for(;X.length<10;)X="0"+X;te=U<E?Math.floor(oe/v):0,ae=U<E?Math.floor(oe%v/h):0,J=U<M?Math.floor(oe%h/s):0,ee=U<S?oe%s*10+G:0}else se=new Date(H),X=f("%Y-%m-%d")(se),te=U<E?se.getUTCHours():0,ae=U<E?se.getUTCMinutes():0,J=U<M?se.getUTCSeconds():0,ee=U<S?10*se.getUTCMilliseconds()+G:0;return C(X,te,ae,J,ee)},le.ms2DateTimeLocal=function(j){if(!(j>=y+i&&j<=b-i))return l;var U=Math.floor(10*o(j+.05,1)),$=new Date(Math.round(j-U/10));return C(T("%Y-%m-%d")($),$.getHours(),$.getMinutes(),$.getSeconds(),10*$.getUTCMilliseconds()+U)},le.cleanDate=function(j,U,$){if(j===l)return U;if(le.isJSDate(j)||"number"==typeof j&&isFinite(j)){if(w($))return e.error("JS Dates and milliseconds are incompatible with world calendars",j),U;if(!(j=le.ms2DateTimeLocal(+j))&&void 0!==U)return U}else if(!le.isDateTime(j,$))return e.error("unrecognized date",j),U;return j};var O=/%\d?f/g,I=/%h/g,N={1:"1",2:"1",3:"2",4:"2"};function F(j,U,$,X){j=j.replace(O,function(ae){var J=Math.min(+ae.charAt(1)||6,6);return(U/1e3%1+2).toFixed(J).substr(2).replace(/0+$/,"")||"0"});var te=new Date(Math.floor(U+.05));if(j=j.replace(I,function(){return N[$("%q")(te)]}),w(X))try{j=p.getComponentMethod("calendars","worldCalFmt")(j,U,X)}catch(ae){return"Invalid"}return $(j)(te)}var L=[59,59.9,59.99,59.999,59.9999];le.formatDate=function(j,U,$,X,te,ae){if(te=w(te)&&te,!U)if("y"===$)U=ae.year;else if("m"===$)U=ae.month;else{if("d"!==$)return function(J,ee){var se=o(J+.05,i),G=c(Math.floor(se/v),2)+":"+c(o(Math.floor(se/h),60),2);if("M"!==ee){_(ee)||(ee=0);var H=(100+Math.min(o(J/s,60),L[ee])).toFixed(ee).substr(1);ee>0&&(H=H.replace(/0+$/,"").replace(/[\.]$/,"")),G+=":"+H}return G}(j,$)+"\n"+F(ae.dayMonthYear,j,X,te);U=ae.dayMonth+"\n"+ae.year}return F(U,j,X,te)};var P=3*i;le.incrementMonth=function(j,U,$){$=w($)&&$;var X=o(j,i);if(j=Math.round(j-X),$)try{var te=Math.round(j/i)+d,ae=p.getComponentMethod("calendars","getCal")($),J=ae.fromJD(te);return U%12?ae.add(J,U,"m"):ae.add(J,U/12,"y"),(J.toJD()-d)*i+X}catch(se){e.error("invalid ms "+j+" in calendar "+$)}var ee=new Date(j+P);return ee.setUTCMonth(ee.getUTCMonth()+U)+X-P},le.findExactDates=function(j,U){for(var $,X,te=0,ae=0,J=0,ee=0,se=w(U)&&p.getComponentMethod("calendars","getCal")(U),G=0;G<j.length;G++)if(_(X=j[G])){if(!(X%i))if(se)try{1===($=se.fromJD(X/i+d)).day()?1===$.month()?te++:ae++:J++}catch(Y){}else 1===($=new Date(X)).getUTCDate()?0===$.getUTCMonth()?te++:ae++:J++}else ee++;J+=ae+=te;var H=j.length-ee;return{exactYears:te/H,exactMonths:ae/H,exactDays:J/H}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("./loggers"),T=x("./matrix"),_=x("gl-mat4");function e(v){var h=v&&v.parentNode;h&&h.removeChild(v)}function o(v,h,s){var d="plotly.js-style-"+v,p=document.getElementById(d);p||((p=document.createElement("style")).setAttribute("id",d),p.appendChild(document.createTextNode("")),document.head.appendChild(p));var f=p.sheet;f.insertRule?f.insertRule(h+"{"+s+"}",0):f.addRule?f.addRule(h,s,0):b.warn("addStyleRule failed")}function a(v){var h=window.getComputedStyle(v,null),s=h.getPropertyValue("-webkit-transform")||h.getPropertyValue("-moz-transform")||h.getPropertyValue("-ms-transform")||h.getPropertyValue("-o-transform")||h.getPropertyValue("transform");return"none"===s?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(d){return+d})}function l(v){for(var h=[];i(v);)h.push(v),v=v.parentNode;return h}function i(v){return v&&(v instanceof Element||v instanceof HTMLElement)}ue.exports={getGraphDiv:function(v){var h;if("string"==typeof v){if(null===(h=document.getElementById(v)))throw new Error("No DOM element with id '"+v+"' exists on the page.");return h}if(null==v)throw new Error("DOM element provided is null or undefined");return v},isPlotDiv:function(v){var h=y.select(v);return h.node()instanceof HTMLElement&&h.size()&&h.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(v,h){o("global",v,h)},addRelatedStyleRule:o,deleteRelatedStyleRule:function(v){var s=document.getElementById("plotly.js-style-"+v);s&&e(s)},getFullTransformMatrix:function(v){var h=l(v),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return h.forEach(function(d){var p=a(d);if(p){var f=T.convertCssMatrix(p);s=_.multiply(s,s,f)}}),s},getElementTransformMatrix:a,getElementAndAncestors:l,equalDomRects:function(v,h){return v&&h&&v.x===h.x&&v.y===h.y&&v.top===h.top&&v.left===h.left&&v.right===h.right&&v.bottom===h.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(x,ue,le){"use strict";var y=x("events").EventEmitter;ue.exports={init:function(T){if(T._ev instanceof y)return T;var _=new y,e=new y;return T._ev=_,T._internalEv=e,T.on=_.on.bind(_),T.once=_.once.bind(_),T.removeListener=_.removeListener.bind(_),T.removeAllListeners=_.removeAllListeners.bind(_),T._internalOn=e.on.bind(e),T._internalOnce=e.once.bind(e),T._removeInternalListener=e.removeListener.bind(e),T._removeAllInternalListeners=e.removeAllListeners.bind(e),T.emit=function(o,a){"undefined"!=typeof jQuery&&jQuery(T).trigger(o,a),_.emit(o,a),e.emit(o,a)},T},triggerHandler:function(T,_,e){var o,a;"undefined"!=typeof jQuery&&(o=jQuery(T).triggerHandler(_,e));var l=T._ev;if(!l)return o;var i,v=l._events[_];if(!v)return o;function h(s){return s.listener?(l.removeListener(_,s.listener),s.fired?void 0:(s.fired=!0,s.listener.apply(l,[e]))):s.apply(l,[e])}for(v=Array.isArray(v)?v:[v],i=0;i<v.length-1;i++)h(v[i]);return a=h(v[i]),void 0!==o?o:a},purge:function(T){return delete T._ev,delete T.on,delete T.once,delete T.removeListener,delete T.removeAllListeners,delete T.emit,delete T._ev,delete T._internalEv,delete T._internalOn,delete T._internalOnce,delete T._removeInternalListener,delete T._removeAllInternalListeners,T}}},{events:84}],493:[function(x,ue,le){"use strict";var y=x("./is_plain_object.js"),b=Array.isArray;function T(_,e,o,a){var l,i,v,h,s,d,p=_[0],f=_.length;if(2===f&&b(p)&&b(_[1])&&0===p.length){if(function(m,u){var w,c;for(w=0;w<m.length;w++){if(null!==(c=m[w])&&"object"==typeof c)return!1;void 0!==c&&(u[w]=c)}return!0}(_[1],p))return p;p.splice(0,p.length)}for(var g=1;g<f;g++)for(i in l=_[g])v=p[i],h=l[i],a&&b(h)?p[i]=h:e&&h&&(y(h)||(s=b(h)))?(s?(s=!1,d=v&&b(v)?v:[]):d=v&&y(v)?v:{},p[i]=T([d,h],e,o,a)):(void 0!==h||o)&&(p[i]=h);return p}le.extendFlat=function(){return T(arguments,!1,!1,!1)},le.extendDeep=function(){return T(arguments,!0,!1,!1)},le.extendDeepAll=function(){return T(arguments,!0,!0,!1)},le.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(x,ue,le){"use strict";ue.exports=function(y){for(var b={},T=[],_=0,e=0;e<y.length;e++){var o=y[e];1!==b[o]&&(b[o]=1,T[_++]=o)}return T}},{}],495:[function(x,ue,le){"use strict";function y(T){return!0===T.visible}function b(T){var _=T[0].trace;return!0===_.visible&&0!==_._length}ue.exports=function(T){for(var _,e=(_=T,Array.isArray(_)&&Array.isArray(_[0])&&_[0][0]&&_[0][0].trace?b:y),o=[],a=0;a<T.length;a++){var l=T[a];e(l)&&o.push(l)}return o}},{}],496:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("country-regex"),T=x("@turf/area"),_=x("@turf/centroid"),e=x("@turf/bbox"),o=x("./identity"),a=x("./loggers"),l=x("./is_plain_object"),i=x("./nested_property"),v=x("./polygon"),h=Object.keys(b),s={"ISO-3":o,"USA-states":o,"country names":function(p){for(var f=0;f<h.length;f++){var g=h[f];if(new RegExp(b[g]).test(p.trim().toLowerCase()))return g}return a.log("Unrecognized country name: "+p+"."),!1}};function d(p){var f=p.geojson,g=window.PlotlyGeoAssets||{},m="string"==typeof f?g[f]:f;return l(m)?m:(a.error("Oops ... something went wrong when fetching "+f),!1)}ue.exports={locationToFeature:function(p,f,g){if(!f||"string"!=typeof f)return!1;var m,u,w,c=s[p](f);if(c){if("USA-states"===p)for(m=[],w=0;w<g.length;w++)(u=g[w]).properties&&u.properties.gu&&"USA"===u.properties.gu&&m.push(u);else m=g;for(w=0;w<m.length;w++)if((u=m[w]).id===c)return u;a.log(["Location with id",c,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(p){var f,g,m,u,w=p.geometry,c=w.coordinates,E=p.id,M=[];function S(C){for(var O=0;O<C.length-1;O++)if(C[O][0]>0&&C[O+1][0]<0)return O;return null}switch(f="RUS"===E||"FJI"===E?function(C){var O;if(null===S(C))O=C;else for(O=new Array(C.length),u=0;u<C.length;u++)O[u]=[C[u][0]<0?C[u][0]+360:C[u][0],C[u][1]];M.push(v.tester(O))}:"ATA"===E?function(C){var O=S(C);if(null===O)return M.push(v.tester(C));var I=new Array(C.length+1),N=0;for(u=0;u<C.length;u++)u>O?I[N++]=[C[u][0]+360,C[u][1]]:u===O?(I[N++]=C[u],I[N++]=[C[u][0],-90]):I[N++]=C[u];var F=v.tester(I);F.pts.pop(),M.push(F)}:function(C){M.push(v.tester(C))},w.type){case"MultiPolygon":for(g=0;g<c.length;g++)for(m=0;m<c[g].length;m++)f(c[g][m]);break;case"Polygon":for(g=0;g<c.length;g++)f(c[g])}return M},getTraceGeojson:d,extractTraceFeature:function(p){var f=p[0].trace,g=d(f);if(!g)return!1;var m,u={},w=[];for(m=0;m<f._length;m++){var c=p[m];(c.loc||0===c.loc)&&(u[c.loc]=c)}function E(C){var O=i(C,f.featureidkey||"id").get(),I=u[O];if(I){var N=C.geometry;if("Polygon"===N.type||"MultiPolygon"===N.type){var F={type:"Feature",id:O,geometry:N,properties:{}};F.properties.ct=function(L){var P,j=L.geometry;if("MultiPolygon"===j.type)for(var U=j.coordinates,$=0,X=0;X<U.length;X++){var te={type:"Polygon",coordinates:U[X]},ae=T.default(te);ae>$&&($=ae,P=te)}else P=j;return _.default(P).geometry.coordinates}(F),I.fIn=C,I.fOut=F,w.push(F)}else a.log(["Location",I.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete u[O]}switch(g.type){case"FeatureCollection":var M=g.features;for(m=0;m<M.length;m++)E(M[m]);break;case"Feature":E(g);break;default:return a.warn(["Invalid GeoJSON type",(g.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var S in u)a.log(["Location *"+S+"*","does not have a matching feature with id-key","*"+f.featureidkey+"*."].join(" "));return w},fetchTraceGeoData:function(p){var f=window.PlotlyGeoAssets||{},g=[];function m(E){return new Promise(function(M,S){y.json(E,function(C,O){return C?(delete f[E],S(new Error(404===C.status?'GeoJSON at URL "'+E+'" does not exist.':"Unexpected error while fetching from "+E))):(f[E]=O,M(O))})})}function u(E){return new Promise(function(M,S){var C=0,O=setInterval(function(){return f[E]&&"pending"!==f[E]?(clearInterval(O),M(f[E])):C>100?(clearInterval(O),S("Unexpected error while fetching from "+E)):void C++},50)})}for(var w=0;w<p.length;w++){var c=p[w][0].trace.geojson;"string"==typeof c&&(f[c]?"pending"===f[c]&&g.push(u(c)):(f[c]="pending",g.push(m(c))))}return g},computeBbox:function(p){return e.default(p)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(x,ue,le){"use strict";var y=x("../constants/numerical").BADNUM;le.calcTraceToLineCoords=function(b){for(var T=b[0].trace.connectgaps,_=[],e=[],o=0;o<b.length;o++){var a=b[o].lonlat;a[0]!==y?e.push(a):!T&&e.length>0&&(_.push(e),e=[])}return e.length>0&&_.push(e),_},le.makeLine=function(b){return 1===b.length?{type:"LineString",coordinates:b[0]}:{type:"MultiLineString",coordinates:b}},le.makePolygon=function(b){if(1===b.length)return{type:"Polygon",coordinates:b};for(var T=new Array(b.length),_=0;_<b.length;_++)T[_]=[b[_]];return{type:"MultiPolygon",coordinates:T}},le.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(x,ue,le){"use strict";var y,b,T,_=x("./mod").mod;function e(a,l,i,v,h,s,d,p){var f=i-a,g=h-a,m=d-h,u=v-l,w=s-l,c=p-s,E=f*c-m*u;if(0===E)return null;var M=(g*c-m*w)/E,S=(g*u-f*w)/E;return S<0||S>1||M<0||M>1?null:{x:a+f*M,y:l+u*M}}function o(a,l,i,v,h){var s=v*a+h*l;if(s<0)return v*v+h*h;if(s>i){var d=v-a,p=h-l;return d*d+p*p}var f=v*l-h*a;return f*f/i}le.segmentsIntersect=e,le.segmentDistance=function(a,l,i,v,h,s,d,p){if(e(a,l,i,v,h,s,d,p))return 0;var f=i-a,g=v-l,m=d-h,u=p-s,w=f*f+g*g,c=m*m+u*u,E=Math.min(o(f,g,w,h-a,s-l),o(f,g,w,d-a,p-l),o(m,u,c,a-h,l-s),o(m,u,c,i-h,v-s));return Math.sqrt(E)},le.getTextLocation=function(a,l,i,v){if(a===b&&v===T||(y={},b=a,T=v),y[i])return y[i];var h=a.getPointAtLength(_(i-v/2,l)),s=a.getPointAtLength(_(i+v/2,l)),d=Math.atan((s.y-h.y)/(s.x-h.x)),p=a.getPointAtLength(_(i,l)),f={x:(4*p.x+h.x+s.x)/6,y:(4*p.y+h.y+s.y)/6,theta:d};return y[i]=f,f},le.clearLocationCache=function(){b=null},le.getVisibleSegment=function(a,l,i){var v,h,s=l.left,d=l.right,p=l.top,f=l.bottom,g=0,m=a.getTotalLength(),u=m;function w(E){var M=a.getPointAtLength(E);0===E?v=M:E===m&&(h=M);var S=M.x<s?s-M.x:M.x>d?M.x-d:0,C=M.y<p?p-M.y:M.y>f?M.y-f:0;return Math.sqrt(S*S+C*C)}for(var c=w(g);c;){if((g+=c+i)>u)return;c=w(g)}for(c=w(u);c;){if(g>(u-=c+i))return;c=w(u)}return{min:g,max:u,len:u-g,total:m,isClosed:0===g&&u===m&&Math.abs(v.x-h.x)<.1&&Math.abs(v.y-h.y)<.1}},le.findPointOnPath=function(a,l,i,v){for(var h,s,d,p=(v=v||{}).pathLength||a.getTotalLength(),f=v.tolerance||.001,g=v.iterationLimit||30,m=a.getPointAtLength(0)[i]>a.getPointAtLength(p)[i]?-1:1,u=0,w=0,c=p;u<g;){if(d=(s=a.getPointAtLength(h=(w+c)/2))[i]-l,Math.abs(d)<f)return s;m*d>0?c=h:w=h,u++}return s}},{"./mod":510}],499:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("tinycolor2"),T=x("color-normalize"),_=x("../components/colorscale"),e=x("../components/color/attributes").defaultLine,o=x("./array").isArrayOrTypedArray,a=T(e);function l(h,s){var d=h;return d[3]*=s,d}function i(h){if(y(h))return a;var s=T(h);return s.length?s:a}function v(h){return y(h)?h:1}ue.exports={formatColor:function(h,s,d){var p,f,g,m,u,w=h.color,c=o(w),E=o(s),M=_.extractOpts(h),S=[];if(p=void 0!==M.colorscale?_.makeColorScaleFuncFromTrace(h):i,f=c?function(O,I){return void 0===O[I]?a:T(p(O[I]))}:i,g=E?function(O,I){return void 0===O[I]?1:v(O[I])}:v,c||E)for(var C=0;C<d;C++)m=f(w,C),u=g(s,C),S[C]=l(m,u);else S=l(T(w),s);return S},parseColorScale:function(h){var s=_.extractOpts(h),d=s.colorscale;return s.reversescale&&(d=_.flipScale(s.colorscale)),d.map(function(p){var f=p[0],g=b(p[1]).toRgb();return{index:f,rgb:[g.r,g.g,g.b,g.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(x,ue,le){"use strict";var y=x("./identity");function b(T){return[T]}ue.exports={keyFun:function(T){return T.key},repeat:b,descend:y,wrap:b,unwrap:function(T){return T[0]}}},{"./identity":501}],501:[function(x,ue,le){"use strict";ue.exports=function(y){return y}},{}],502:[function(x,ue,le){"use strict";ue.exports=function(y,b){if(!b)return y;var T=1/Math.abs(b),_=T>1?(T*y+T*b)/T:y+b,e=String(_).length;if(e>16){var o=String(b).length;if(e>=String(y).length+o){var a=parseFloat(_).toPrecision(12);-1===a.indexOf("e+")&&(_=+a)}}return _}},{}],503:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("d3-time-format").utcFormat,T=x("d3-format").format,_=x("fast-isnumeric"),e=x("../constants/numerical"),o=e.FP_SAFE,a=-o,l=e.BADNUM,i=ue.exports={};i.adjustFormat=function(G){return!G||/^\d[.]\df/.test(G)||/[.]\d%/.test(G)?G:"0.f"===G?"~f":/^\d%/.test(G)?"~%":/^\ds/.test(G)?"~s":!/^[~,.0$]/.test(G)&&/[&fps]/.test(G)?"~"+G:G};var v={};i.warnBadFormat=function(G){var H=String(G);v[H]||(v[H]=1,i.warn('encountered bad format: "'+H+'"'))},i.noFormat=function(G){return String(G)},i.numberFormat=function(G){var H;try{H=T(i.adjustFormat(G))}catch(Y){return i.warnBadFormat(G),i.noFormat}return H},i.nestedProperty=x("./nested_property"),i.keyedContainer=x("./keyed_container"),i.relativeAttr=x("./relative_attr"),i.isPlainObject=x("./is_plain_object"),i.toLogRange=x("./to_log_range"),i.relinkPrivateKeys=x("./relink_private");var h=x("./array");i.isTypedArray=h.isTypedArray,i.isArrayOrTypedArray=h.isArrayOrTypedArray,i.isArray1D=h.isArray1D,i.ensureArray=h.ensureArray,i.concat=h.concat,i.maxRowLength=h.maxRowLength,i.minRowLength=h.minRowLength;var s=x("./mod");i.mod=s.mod,i.modHalf=s.modHalf;var d=x("./coerce");i.valObjectMeta=d.valObjectMeta,i.coerce=d.coerce,i.coerce2=d.coerce2,i.coerceFont=d.coerceFont,i.coercePattern=d.coercePattern,i.coerceHoverinfo=d.coerceHoverinfo,i.coerceSelectionMarkerOpacity=d.coerceSelectionMarkerOpacity,i.validate=d.validate;var p=x("./dates");i.dateTime2ms=p.dateTime2ms,i.isDateTime=p.isDateTime,i.ms2DateTime=p.ms2DateTime,i.ms2DateTimeLocal=p.ms2DateTimeLocal,i.cleanDate=p.cleanDate,i.isJSDate=p.isJSDate,i.formatDate=p.formatDate,i.incrementMonth=p.incrementMonth,i.dateTick0=p.dateTick0,i.dfltRange=p.dfltRange,i.findExactDates=p.findExactDates,i.MIN_MS=p.MIN_MS,i.MAX_MS=p.MAX_MS;var f=x("./search");i.findBin=f.findBin,i.sorterAsc=f.sorterAsc,i.sorterDes=f.sorterDes,i.distinctVals=f.distinctVals,i.roundUp=f.roundUp,i.sort=f.sort,i.findIndexOfMin=f.findIndexOfMin,i.sortObjectKeys=x("./sort_object_keys");var g=x("./stats");i.aggNums=g.aggNums,i.len=g.len,i.mean=g.mean,i.median=g.median,i.midRange=g.midRange,i.variance=g.variance,i.stdev=g.stdev,i.interp=g.interp;var m=x("./matrix");i.init2dArray=m.init2dArray,i.transposeRagged=m.transposeRagged,i.dot=m.dot,i.translationMatrix=m.translationMatrix,i.rotationMatrix=m.rotationMatrix,i.rotationXYMatrix=m.rotationXYMatrix,i.apply3DTransform=m.apply3DTransform,i.apply2DTransform=m.apply2DTransform,i.apply2DTransform2=m.apply2DTransform2,i.convertCssMatrix=m.convertCssMatrix,i.inverseTransformMatrix=m.inverseTransformMatrix;var u=x("./angles");i.deg2rad=u.deg2rad,i.rad2deg=u.rad2deg,i.angleDelta=u.angleDelta,i.angleDist=u.angleDist,i.isFullCircle=u.isFullCircle,i.isAngleInsideSector=u.isAngleInsideSector,i.isPtInsideSector=u.isPtInsideSector,i.pathArc=u.pathArc,i.pathSector=u.pathSector,i.pathAnnulus=u.pathAnnulus;var w=x("./anchor_utils");i.isLeftAnchor=w.isLeftAnchor,i.isCenterAnchor=w.isCenterAnchor,i.isRightAnchor=w.isRightAnchor,i.isTopAnchor=w.isTopAnchor,i.isMiddleAnchor=w.isMiddleAnchor,i.isBottomAnchor=w.isBottomAnchor;var c=x("./geometry2d");i.segmentsIntersect=c.segmentsIntersect,i.segmentDistance=c.segmentDistance,i.getTextLocation=c.getTextLocation,i.clearLocationCache=c.clearLocationCache,i.getVisibleSegment=c.getVisibleSegment,i.findPointOnPath=c.findPointOnPath;var E=x("./extend");i.extendFlat=E.extendFlat,i.extendDeep=E.extendDeep,i.extendDeepAll=E.extendDeepAll,i.extendDeepNoArrays=E.extendDeepNoArrays;var M=x("./loggers");i.log=M.log,i.warn=M.warn,i.error=M.error;var S=x("./regex");i.counterRegex=S.counter;var C=x("./throttle");i.throttle=C.throttle,i.throttleDone=C.done,i.clearThrottle=C.clear;var O=x("./dom");function I(G){var H={};for(var Y in G)for(var oe=G[Y],W=0;W<oe.length;W++)H[oe[W]]=+Y;return H}i.getGraphDiv=O.getGraphDiv,i.isPlotDiv=O.isPlotDiv,i.removeElement=O.removeElement,i.addStyleRule=O.addStyleRule,i.addRelatedStyleRule=O.addRelatedStyleRule,i.deleteRelatedStyleRule=O.deleteRelatedStyleRule,i.getFullTransformMatrix=O.getFullTransformMatrix,i.getElementTransformMatrix=O.getElementTransformMatrix,i.getElementAndAncestors=O.getElementAndAncestors,i.equalDomRects=O.equalDomRects,i.clearResponsive=x("./clear_responsive"),i.preserveDrawingBuffer=x("./preserve_drawing_buffer"),i.makeTraceGroups=x("./make_trace_groups"),i._=x("./localize"),i.notifier=x("./notifier"),i.filterUnique=x("./filter_unique"),i.filterVisible=x("./filter_visible"),i.pushUnique=x("./push_unique"),i.increment=x("./increment"),i.cleanNumber=x("./clean_number"),i.ensureNumber=function(G){return _(G)?(G=Number(G))>o||G<a?l:G:l},i.isIndex=function(G,H){return!(void 0!==H&&G>=H)&&_(G)&&G>=0&&G%1==0},i.noop=x("./noop"),i.identity=x("./identity"),i.repeat=function(G,H){for(var Y=new Array(H),oe=0;oe<H;oe++)Y[oe]=G;return Y},i.swapAttrs=function(G,H,Y,oe){Y||(Y="x"),oe||(oe="y");for(var W=0;W<H.length;W++){var ne=H[W],re=i.nestedProperty(G,ne.replace("?",Y)),ce=i.nestedProperty(G,ne.replace("?",oe)),fe=re.get();re.set(ce.get()),ce.set(fe)}},i.raiseToTop=function(G){G.parentNode.appendChild(G)},i.cancelTransition=function(G){return G.transition().duration(0)},i.constrain=function(G,H,Y){return H>Y?Math.max(Y,Math.min(H,G)):Math.max(H,Math.min(Y,G))},i.bBoxIntersect=function(G,H,Y){return G.left<=H.right+(Y=Y||0)&&H.left<=G.right+Y&&G.top<=H.bottom+Y&&H.top<=G.bottom+Y},i.simpleMap=function(G,H,Y,oe,W){for(var ne=G.length,re=new Array(ne),ce=0;ce<ne;ce++)re[ce]=H(G[ce],Y,oe,W);return re},i.randstr=function G(H,Y,oe,W){if(oe||(oe=16),void 0===Y&&(Y=24),Y<=0)return"0";var ne,re,ce=Math.log(Math.pow(2,Y))/Math.log(oe),fe="";for(ne=2;ce===1/0;ne*=2)ce=Math.log(Math.pow(2,Y/ne))/Math.log(oe)*ne;var me=ce-Math.floor(ce);for(ne=0;ne<Math.floor(ce);ne++)fe=Math.floor(Math.random()*oe).toString(oe)+fe;me&&(re=Math.pow(oe,me),fe=Math.floor(Math.random()*re).toString(oe)+fe);var pe=parseInt(fe,oe);return H&&H[fe]||pe!==1/0&&pe>=Math.pow(2,Y)?W>10?(i.warn("randstr failed uniqueness"),fe):G(H,Y,oe,(W||0)+1):fe},i.OptionControl=function(G,H){G||(G={}),H||(H="opt");var Y={optionList:[],_newoption:function(oe){oe[H]=G,Y[oe.name]=oe,Y.optionList.push(oe)}};return Y["_"+H]=G,Y},i.smooth=function(G,H){if((H=Math.round(H)||0)<2)return G;var Y,oe,W,ne,re=G.length,ce=2*re,fe=2*H-1,me=new Array(fe),pe=new Array(re);for(Y=0;Y<fe;Y++)me[Y]=(1-Math.cos(Math.PI*(Y+1)/H))/(2*H);for(Y=0;Y<re;Y++){for(ne=0,oe=0;oe<fe;oe++)(W=Y+oe+1-H)<-re?W-=ce*Math.round(W/ce):W>=ce&&(W-=ce*Math.floor(W/ce)),W<0?W=-1-W:W>=re&&(W=ce-1-W),ne+=G[W]*me[oe];pe[Y]=ne}return pe},i.syncOrAsync=function(G,H,Y){var oe;function W(){return i.syncOrAsync(G,H,Y)}for(;G.length;)if((oe=(0,G.splice(0,1)[0])(H))&&oe.then)return oe.then(W);return Y&&Y(H)},i.stripTrailingSlash=function(G){return"/"===G.substr(-1)?G.substr(0,G.length-1):G},i.noneOrAll=function(G,H,Y){if(G){var oe,W=!1,ne=!0;for(oe=0;oe<Y.length;oe++)null!=G[Y[oe]]?W=!0:ne=!1;if(W&&!ne)for(oe=0;oe<Y.length;oe++)G[Y[oe]]=H[Y[oe]]}},i.mergeArray=function(G,H,Y,oe){var W="function"==typeof oe;if(i.isArrayOrTypedArray(G))for(var ne=Math.min(G.length,H.length),re=0;re<ne;re++){var ce=G[re];H[re][Y]=W?oe(ce):ce}},i.mergeArrayCastPositive=function(G,H,Y){return i.mergeArray(G,H,Y,function(oe){var W=+oe;return isFinite(W)&&W>0?W:0})},i.fillArray=function(G,H,Y,oe){if(oe=oe||i.identity,i.isArrayOrTypedArray(G))for(var W=0;W<H.length;W++)H[W][Y]=oe(G[W])},i.castOption=function(G,H,Y,oe){oe=oe||i.identity;var W=i.nestedProperty(G,Y).get();return i.isArrayOrTypedArray(W)?Array.isArray(H)&&i.isArrayOrTypedArray(W[H[0]])?oe(W[H[0]][H[1]]):oe(W[H]):W},i.extractOption=function(G,H,Y,oe){if(Y in G)return G[Y];var W=i.nestedProperty(H,oe).get();return Array.isArray(W)?void 0:W},i.tagSelected=function(G,H,Y){var oe,W,ne=H.selectedpoints,re=H._indexToPoints;re&&(oe=I(re));for(var ce=0;ce<ne.length;ce++){var fe=ne[ce];if(i.isIndex(fe)||i.isArrayOrTypedArray(fe)&&i.isIndex(fe[0])&&i.isIndex(fe[1])){var me=oe?oe[fe]:fe,pe=Y?Y[me]:me;void 0!==(W=pe)&&W<G.length&&(G[pe].selected=1)}}},i.selIndices2selPoints=function(G){var H=G.selectedpoints,Y=G._indexToPoints;if(Y){for(var oe=I(Y),W=[],ne=0;ne<H.length;ne++){var re=H[ne];if(i.isIndex(re)){var ce=oe[re];i.isIndex(ce)&&W.push(ce)}}return W}return H},i.getTargetArray=function(G,H){var Y=H.target;if("string"==typeof Y&&Y){var oe=i.nestedProperty(G,Y).get();return!!Array.isArray(oe)&&oe}return!!Array.isArray(Y)&&Y},i.minExtend=function(G,H){var Y={};"object"!=typeof H&&(H={});var oe,W,ne,re=Object.keys(G);for(oe=0;oe<re.length;oe++)ne=G[W=re[oe]],"_"!==W.charAt(0)&&"function"!=typeof ne&&(Y[W]="module"===W?ne:Array.isArray(ne)?"colorscale"===W?ne.slice():ne.slice(0,3):i.isTypedArray(ne)?ne.subarray(0,3):ne&&"object"==typeof ne?i.minExtend(G[W],H[W]):ne);for(re=Object.keys(H),oe=0;oe<re.length;oe++)"object"==typeof(ne=H[W=re[oe]])&&W in Y&&"object"==typeof Y[W]||(Y[W]=ne);return Y},i.titleCase=function(G){return G.charAt(0).toUpperCase()+G.substr(1)},i.containsAny=function(G,H){for(var Y=0;Y<H.length;Y++)if(-1!==G.indexOf(H[Y]))return!0;return!1},i.isIE=function(){return void 0!==window.navigator.msSaveBlob};var N=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return N.test(window.navigator.userAgent)};var F=/iPad|iPhone|iPod/;i.isIOS=function(){return F.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var G=L.exec(window.navigator.userAgent);if(G&&2===G.length){var H=parseInt(G[1]);if(!isNaN(H))return H}return null},i.isD3Selection=function(G){return G instanceof y.selection},i.ensureSingle=function(G,H,Y,oe){var W=G.select(H+(Y?"."+Y:""));if(W.size())return W;var ne=G.append(H);return Y&&ne.classed(Y,!0),oe&&ne.call(oe),ne},i.ensureSingleById=function(G,H,Y,oe){var W=G.select(H+"#"+Y);if(W.size())return W;var ne=G.append(H).attr("id",Y);return oe&&ne.call(oe),ne},i.objectFromPath=function(G,H){for(var Y,oe=G.split("."),W=Y={},ne=0;ne<oe.length;ne++){var re=oe[ne],ce=null,fe=oe[ne].match(/(.*)\[([0-9]+)\]/);fe?(ce=fe[2],(Y=Y[re=fe[1]]=[])[ce]=ne===oe.length-1?H:{},Y=Y[ce]):(Y[re]=ne===oe.length-1?H:{},Y=Y[re])}return W};var P=/^([^\[\.]+)\.(.+)?/,j=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;i.expandObjectPaths=function(G){var H,Y,oe,W,ne,re,ce;if("object"==typeof G&&!Array.isArray(G))for(Y in G)G.hasOwnProperty(Y)&&((H=Y.match(P))?(W=G[Y],oe=H[1],delete G[Y],G[oe]=i.extendDeepNoArrays(G[oe]||{},i.objectFromPath(Y,i.expandObjectPaths(W))[oe])):(H=Y.match(j))?(W=G[Y],oe=H[1],ne=parseInt(H[2]),delete G[Y],G[oe]=G[oe]||[],"."===H[3]?(ce=H[4],re=G[oe][ne]=G[oe][ne]||{},i.extendDeepNoArrays(re,i.objectFromPath(ce,i.expandObjectPaths(W)))):G[oe][ne]=i.expandObjectPaths(W)):G[Y]=i.expandObjectPaths(G[Y]));return G},i.numSeparate=function(G,H,Y){if(Y||(Y=!1),"string"!=typeof H||0===H.length)throw new Error("Separator string required for formatting!");"number"==typeof G&&(G=String(G));var oe=/(\d+)(\d{3})/,W=H.charAt(0),ne=H.charAt(1),re=G.split("."),ce=re[0],fe=re.length>1?W+re[1]:"";if(ne&&(re.length>1||ce.length>4||Y))for(;oe.test(ce);)ce=ce.replace(oe,"$1"+ne+"$2");return ce+fe},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var U=/^\w*$/;i.templateString=function(G,H){var Y={};return G.replace(i.TEMPLATE_STRING_REGEX,function(oe,W){var ne;return U.test(W)?ne=H[W]:(Y[W]=Y[W]||i.nestedProperty(H,W).get,ne=Y[W]()),i.isValidTextValue(ne)?ne:""})};var $={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return ae.apply($,arguments)};var X={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return ae.apply(X,arguments)};var te=/^[:|\|]/;function ae(G,H,Y){var oe=this,W=arguments;H||(H={});var ne={};return G.replace(i.TEMPLATE_STRING_REGEX,function(re,ce,fe){var me,pe,we,ye="_xother"===ce||"_yother"===ce,Te="_xother_"===ce||"_yother_"===ce,Le="xother_"===ce||"yother_"===ce,Oe="xother"===ce||"yother"===ce||ye||Le||Te,Re=ce;if((ye||Te)&&(Re=Re.substring(1)),(Le||Te)&&(Re=Re.substring(0,Re.length-1)),Oe){if(void 0===(me=H[Re]))return""}else for(we=3;we<W.length;we++)if(pe=W[we]){if(pe.hasOwnProperty(Re)){me=pe[Re];break}if(U.test(Re)||(me=i.nestedProperty(pe,Re).get(),(me=ne[Re]||i.nestedProperty(pe,Re).get())&&(ne[Re]=me)),void 0!==me)break}if(void 0===me&&oe)return oe.count<oe.max&&(i.warn("Variable '"+Re+"' in "+oe.name+" could not be found!"),me=re),oe.count===oe.max&&i.warn("Too many "+oe.name+" warnings - additional warnings will be suppressed"),oe.count++,re;if(fe){var Ve;if(":"===fe[0]&&(me=(Ve=Y?Y.numberFormat:i.numberFormat)(fe.replace(te,""))(me)),"|"===fe[0]){Ve=Y?Y.timeFormat:b;var _e=i.dateTime2ms(me);me=i.formatDate(_e,fe.replace(te,""),!1,Ve)}}else{var Ae=Re+"Label";H.hasOwnProperty(Ae)&&(me=H[Ae])}return Oe&&(me="("+me+")",(ye||Te)&&(me=" "+me),(Le||Te)&&(me+=" ")),me})}i.subplotSort=function(G,H){for(var Y=Math.min(G.length,H.length)+1,oe=0,W=0,ne=0;ne<Y;ne++){var re=G.charCodeAt(ne)||0,ce=H.charCodeAt(ne)||0,fe=re>=48&&re<=57,me=ce>=48&&ce<=57;if(fe&&(oe=10*oe+re-48),me&&(W=10*W+ce-48),!fe||!me){if(oe!==W)return oe-W;if(re!==ce)return re-ce}}return W-oe};var J=2e9;i.seedPseudoRandom=function(){J=2e9},i.pseudoRandom=function(){var G=J;return J=(69069*J+1)%4294967296,Math.abs(J-G)<429496729?i.pseudoRandom():J/4294967296},i.fillText=function(G,H,Y){var oe=Array.isArray(Y)?function(re){Y.push(re)}:function(re){Y.text=re},W=i.extractOption(G,H,"htx","hovertext");if(i.isValidTextValue(W))return oe(W);var ne=i.extractOption(G,H,"tx","text");return i.isValidTextValue(ne)?oe(ne):void 0},i.isValidTextValue=function(G){return G||0===G},i.formatPercent=function(G,H){H=H||0;for(var Y=(Math.round(100*G*Math.pow(10,H))*Math.pow(.1,H)).toFixed(H)+"%",oe=0;oe<H;oe++)-1!==Y.indexOf(".")&&(Y=(Y=Y.replace("0%","%")).replace(".%","%"));return Y},i.isHidden=function(G){var H=window.getComputedStyle(G).display;return!H||"none"===H},i.strTranslate=function(G,H){return G||H?"translate("+G+","+H+")":""},i.strRotate=function(G){return G?"rotate("+G+")":""},i.strScale=function(G){return 1!==G?"scale("+G+")":""},i.getTextTransform=function(G){var H=G.noCenter,Y=G.textX,oe=G.textY,fe=G.rotate,me=G.scale;return me?me>1&&(me=1):me=0,i.strTranslate(G.targetX-me*(Y+(G.anchorX||0)),G.targetY-me*(oe+(G.anchorY||0)))+i.strScale(me)+(fe?"rotate("+fe+(H?"":" "+Y+" "+oe)+")":"")},i.ensureUniformFontSize=function(G,H){var Y=i.extendFlat({},H);return Y.size=Math.max(H.size,G._fullLayout.uniformtext.minsize||0),Y},i.join2=function(G,H,Y){var oe=G.length;return oe>1?G.slice(0,-1).join(H)+Y+G[oe-1]:G.join(H)},i.bigFont=function(G){return Math.round(1.2*G)};var ee=i.getFirefoxVersion(),se=null!==ee&&ee<86;i.getPositionFromD3Event=function(){return se?[y.event.layerX,y.event.layerY]:[y.event.offsetX,y.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(x,ue,le){"use strict";ue.exports=function(y){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(y):"[object Object]"===Object.prototype.toString.call(y)&&Object.getPrototypeOf(y).hasOwnProperty("hasOwnProperty")}},{}],505:[function(x,ue,le){"use strict";var y=x("./nested_property"),b=/^\w*$/;ue.exports=function(T,_,e,o){var a,l,i;e=e||"name",o=o||"value";var v={};_&&_.length?(i=y(T,_),l=i.get()):l=T,_=_||"";var h={};if(l)for(a=0;a<l.length;a++)h[l[a][e]]=a;var s=b.test(o),d={set:function(p,f){var g=null===f?4:0;if(!l){if(!i||4===g)return;i.set(l=[])}var m=h[p];if(void 0===m){if(4===g)return;g|=3,h[p]=m=l.length}else f!==(s?l[m][o]:y(l[m],o).get())&&(g|=2);var u=l[m]=l[m]||{};return u[e]=p,s?u[o]=f:y(u,o).set(f),null!==f&&(g&=-5),v[m]=v[m]|g,d},get:function(p){if(l){var f=h[p];return void 0===f?void 0:s?l[f][o]:y(l[f],o).get()}},rename:function(p,f){var g=h[p];return void 0===g||(v[g]=1|v[g],h[f]=g,delete h[p],l[g][e]=f),d},remove:function(p){var f=h[p];if(void 0===f)return d;var g=l[f];if(Object.keys(g).length>2)return v[f]=2|v[f],d.set(p,null);if(s){for(a=f;a<l.length;a++)v[a]=3|v[a];for(a=f;a<l.length;a++)h[l[a][e]]--;l.splice(f,1),delete h[p]}else y(g,o).set(null),v[f]=6|v[f];return d},constructUpdate:function(){for(var p,f,g={},m=Object.keys(v),u=0;u<m.length;u++)p=_+"["+(f=m[u])+"]",l[f]?(1&v[f]&&(g[p+"."+e]=l[f][e]),2&v[f]&&(g[p+"."+o]=s?4&v[f]?null:l[f][o]:4&v[f]?null:y(l[f],o).get())):g[p]=null;return g}};return d}},{"./nested_property":511}],506:[function(x,ue,le){"use strict";var y=x("../registry");ue.exports=function(b,T){for(var _=b._context.locale,e=0;e<2;e++){for(var o=b._context.locales,a=0;a<2;a++){var l=(o[_]||{}).dictionary;if(l){var i=l[T];if(i)return i}o=y.localeRegistry}var v=_.split("-")[0];if(v===_)break;_=v}return T}},{"../registry":638}],507:[function(x,ue,le){"use strict";var y=x("../plot_api/plot_config").dfltConfig,b=x("./notifier"),T=ue.exports={};T.log=function(){var _;if(y.logging>1){var e=["LOG:"];for(_=0;_<arguments.length;_++)e.push(arguments[_]);console.trace.apply(console,e)}if(y.notifyOnLogging>1){var o=[];for(_=0;_<arguments.length;_++)o.push(arguments[_]);b(o.join("<br>"),"long")}},T.warn=function(){var _;if(y.logging>0){var e=["WARN:"];for(_=0;_<arguments.length;_++)e.push(arguments[_]);console.trace.apply(console,e)}if(y.notifyOnLogging>0){var o=[];for(_=0;_<arguments.length;_++)o.push(arguments[_]);b(o.join("<br>"),"stick")}},T.error=function(){var _;if(y.logging>0){var e=["ERROR:"];for(_=0;_<arguments.length;_++)e.push(arguments[_]);console.error.apply(console,e)}if(y.notifyOnLogging>0){var o=[];for(_=0;_<arguments.length;_++)o.push(arguments[_]);b(o.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(x,ue,le){"use strict";var y=x("@plotly/d3");ue.exports=function(b,T,_){var e=b.selectAll("g."+_.replace(/\s/g,".")).data(T,function(a){return a[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",_),e.order();var o=b.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(a){a[0][o]=y.select(this)}),e}},{"@plotly/d3":58}],509:[function(x,ue,le){"use strict";var y=x("gl-mat4");le.init2dArray=function(b,T){for(var _=new Array(b),e=0;e<b;e++)_[e]=new Array(T);return _},le.transposeRagged=function(b){var T,_,e=0,o=b.length;for(T=0;T<o;T++)e=Math.max(e,b[T].length);var a=new Array(e);for(T=0;T<e;T++)for(a[T]=new Array(o),_=0;_<o;_++)a[T][_]=b[_][T];return a},le.dot=function(b,T){if(!b.length||!T.length||b.length!==T.length)return null;var _,e,o=b.length;if(b[0].length)for(_=new Array(o),e=0;e<o;e++)_[e]=le.dot(b[e],T);else if(T[0].length){var a=le.transposeRagged(T);for(_=new Array(a.length),e=0;e<a.length;e++)_[e]=le.dot(b,a[e])}else for(_=0,e=0;e<o;e++)_+=b[e]*T[e];return _},le.translationMatrix=function(b,T){return[[1,0,b],[0,1,T],[0,0,1]]},le.rotationMatrix=function(b){var T=b*Math.PI/180;return[[Math.cos(T),-Math.sin(T),0],[Math.sin(T),Math.cos(T),0],[0,0,1]]},le.rotationXYMatrix=function(b,T,_){return le.dot(le.dot(le.translationMatrix(T,_),le.rotationMatrix(b)),le.translationMatrix(-T,-_))},le.apply3DTransform=function(b){return function(){var T=arguments,_=1===arguments.length?T[0]:[T[0],T[1],T[2]||0];return le.dot(b,[_[0],_[1],_[2],1]).slice(0,3)}},le.apply2DTransform=function(b){return function(){var T=arguments;3===T.length&&(T=T[0]);var _=1===arguments.length?T[0]:[T[0],T[1]];return le.dot(b,[_[0],_[1],1]).slice(0,2)}},le.apply2DTransform2=function(b){var T=le.apply2DTransform(b);return function(_){return T(_.slice(0,2)).concat(T(_.slice(2,4)))}},le.convertCssMatrix=function(b){if(b){var T=b.length;if(16===T)return b;if(6===T)return[b[0],b[1],0,0,b[2],b[3],0,0,0,0,1,0,b[4],b[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},le.inverseTransformMatrix=function(b){var T=[];return y.invert(T,b),[[T[0],T[1],T[2],T[3]],[T[4],T[5],T[6],T[7]],[T[8],T[9],T[10],T[11]],[T[12],T[13],T[14],T[15]]]}},{"gl-mat4":210}],510:[function(x,ue,le){"use strict";ue.exports={mod:function(y,b){var T=y%b;return T<0?T+b:T},modHalf:function(y,b){return Math.abs(y)>b/2?y-Math.round(y/b)*b:y}}},{}],511:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("./array").isArrayOrTypedArray;function T(v,h){return function(){var s,d,p,f,g,m=v;for(f=0;f<h.length-1;f++){if(-1===(s=h[f])){for(d=!0,p=[],g=0;g<m.length;g++)p[g]=T(m[g],h.slice(f+1))(),p[g]!==p[0]&&(d=!1);return d?p[0]:p}if("number"==typeof s&&!b(m)||"object"!=typeof(m=m[s])||null===m)return}if("object"==typeof m&&null!==m&&null!==(p=m[h[f]]))return p}}ue.exports=function(v,h){if(y(h))h=String(h);else if("string"!=typeof h||"[-1]"===h.substr(h.length-4))throw"bad property string";for(var s,d,p,f=0,g=h.split(".");f<g.length;){if(s=String(g[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(s[1])g[f]=s[1];else{if(0!==f)throw"bad property string";g.splice(0,1)}for(d=s[2].substr(1,s[2].length-2).split("]["),p=0;p<d.length;p++)f++,g.splice(f,0,Number(d[p]))}f++}return"object"!=typeof v?{set:function(){throw"bad container"},get:function(){},astr:h,parts:g,obj:v}:{set:o(v,g,h),get:T(v,g),astr:h,parts:g,obj:v}};var _=/(^|\.)args\[/;function e(v,h){return void 0===v||null===v&&!h.match(_)}function o(v,h,s){return function(d){var p,f,g=v,m="",u=[[v,m]],w=e(d,s);for(f=0;f<h.length-1;f++){if("number"==typeof(p=h[f])&&!b(g))throw"array index but container is not an array";if(-1===p){if(w=!l(g,h.slice(f+1),d,s))break;return}if(!i(g,p,h[f+1],w))break;if("object"!=typeof(g=g[p])||null===g)throw"container is not an object";m=a(m,p),u.push([g,m])}if(w){if(f===h.length-1&&(delete g[h[f]],Array.isArray(g)&&+h[f]==g.length-1))for(;g.length&&void 0===g[g.length-1];)g.pop()}else g[h[f]]=d}}function a(v,h){var s=h;return y(h)?s="["+h+"]":v&&(s="."+h),v+s}function l(v,h,s,d){var p,f=b(s),g=!0,m=s,u=d.replace("-1",0),w=!f&&e(s,u),c=h[0];for(p=0;p<v.length;p++)u=d.replace("-1",p),f&&(w=e(m=s[p%s.length],u)),w&&(g=!1),i(v,p,c,w)&&o(v[p],h,d.replace("-1",p))(m);return g}function i(v,h,s,d){if(void 0===v[h]){if(d)return!1;v[h]="number"==typeof s?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(x,ue,le){"use strict";ue.exports=function(){}},{}],513:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=[];ue.exports=function(_,e){if(-1===T.indexOf(_)){T.push(_);var o=1e3;b(e)?o=e:"long"===e&&(o=3e3);var a=y.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0),a.selectAll(".notifier-note").data(T).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var v=y.select(this);v.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){v.transition().call(l)});for(var h=v.append("p"),s=i.split(/<br\s*\/?>/g),d=0;d<s.length;d++)d&&h.append("br"),h.append("span").text(s[d]);"stick"===e?v.transition().duration(350).style("opacity",1):v.transition().duration(700).style("opacity",1).transition().delay(o).call(l)})}function l(i){i.duration(700).style("opacity",0).each("end",function(v){var h=T.indexOf(v);-1!==h&&T.splice(h,1),y.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(x,ue,le){"use strict";var y=x("./setcursor"),b="data-savedcursor";ue.exports=function(T,_){var e=T.attr(b);if(_){if(!e){for(var o=(T.attr("class")||"").split(" "),a=0;a<o.length;a++){var l=o[a];0===l.indexOf("cursor-")&&T.attr(b,l.substr(7)).classed(l,!1)}T.attr(b)||T.attr(b,"!!")}y(T,_)}else e&&(T.attr(b,null),"!!"===e?y(T):y(T,e))}},{"./setcursor":524}],515:[function(x,ue,le){"use strict";var y=x("./matrix").dot,b=x("../constants/numerical").BADNUM,T=ue.exports={};T.tester=function(_){var e,o=_.slice(),a=o[0][0],l=a,i=o[0][1],v=i;for(o.push(o[0]),e=1;e<o.length;e++)a=Math.min(a,o[e][0]),l=Math.max(l,o[e][0]),i=Math.min(i,o[e][1]),v=Math.max(v,o[e][1]);var h,s=!1;5===o.length&&(o[0][0]===o[1][0]?o[2][0]===o[3][0]&&o[0][1]===o[3][1]&&o[1][1]===o[2][1]&&(s=!0,h=function(f){return f[0]===o[0][0]}):o[0][1]===o[1][1]&&o[2][1]===o[3][1]&&o[0][0]===o[3][0]&&o[1][0]===o[2][0]&&(s=!0,h=function(f){return f[1]===o[0][1]}));var d=!0,p=o[0];for(e=1;e<o.length;e++)if(p[0]!==o[e][0]||p[1]!==o[e][1]){d=!1;break}return{xmin:a,xmax:l,ymin:i,ymax:v,pts:o,contains:s?function(f,g){var m=f[0],u=f[1];return!(m===b||m<a||m>l||u===b||u<i||u>v||g&&h(f))}:function(f,g){var m=f[0],u=f[1];if(m===b||m<a||m>l||u===b||u<i||u>v)return!1;var w,c,E,M,S,C=o.length,O=o[0][0],I=o[0][1],N=0;for(w=1;w<C;w++)if(c=O,E=I,O=o[w][0],I=o[w][1],!(m<(M=Math.min(c,O))||m>Math.max(c,O)||u>Math.max(E,I)))if(u<Math.min(E,I))m!==M&&N++;else{if(u===(S=O===c?u:E+(m-c)*(I-E)/(O-c)))return 1!==w||!g;u<=S&&m!==M&&N++}return N%2==1},isRect:s,degenerate:d}},T.isSegmentBent=function(_,e,o,a){var l,i,v,h=_[e],s=[_[o][0]-h[0],_[o][1]-h[1]],d=y(s,s),p=Math.sqrt(d),f=[-s[1]/p,s[0]/p];for(l=e+1;l<o;l++)if((v=y(i=[_[l][0]-h[0],_[l][1]-h[1]],s))<0||v>d||Math.abs(y(i,f))>a)return!0;return!1},T.filter=function(_,e){var o=[_[0]],a=0,l=0;function i(v){_.push(v);var h=o.length,s=a;o.splice(l+1);for(var d=s+1;d<_.length;d++)(d===_.length-1||T.isSegmentBent(_,s,d+1,e))&&(o.push(_[d]),o.length<h-2&&(a=d,l=o.length-1),s=d)}return _.length>1&&i(_.pop()),{addPt:i,raw:_,filtered:o}}},{"../constants/numerical":479,"./matrix":509}],516:[function(x,ue,le){(function(y){(function(){"use strict";var b=x("./show_no_webgl_msg"),T=x("regl");ue.exports=function(_,e,o){var a=_._fullLayout,l=!0;return a._glcanvas.each(function(i){if(i.regl)i.regl.preloadCachedCode(o);else if(!i.pick||a._has("parcoords")){try{i.regl=T({canvas:this,attributes:{antialias:!i.pick,preserveDrawingBuffer:!0},pixelRatio:_._context.plotGlPixelRatio||y.devicePixelRatio,extensions:e||[],cachedCode:o||{}})}catch(v){l=!1}i.regl||(l=!1),l&&this.addEventListener("webglcontextlost",function(v){_&&_.emit&&_.emit("plotly_webglcontextlost",{event:v,layer:i.key})},!1)}}),l||b({container:a._glcontainer.node()}),l}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("is-mobile");ue.exports=function(T){var _,h;if("string"!=typeof(_=T&&T.hasOwnProperty("userAgent")?T.userAgent:("undefined"!=typeof navigator&&(h=navigator.userAgent),h&&h.headers&&"string"==typeof h.headers["user-agent"]&&(h=h.headers["user-agent"]),h)))return!0;var e=b({ua:{headers:{"user-agent":_}},tablet:!0,featureDetect:!1});if(!e)for(var o=_.split(" "),a=1;a<o.length;a++)if(-1!==o[a].indexOf("Safari"))for(var l=a-1;l>-1;l--){var i=o[l];if("Version/"===i.substr(0,8)){var v=i.substr(8).split(".")[0];if(y(v)&&(v=+v),v>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(x,ue,le){"use strict";ue.exports=function(y,b){if(b instanceof RegExp){for(var T=b.toString(),_=0;_<y.length;_++)if(y[_]instanceof RegExp&&y[_].toString()===T)return y;y.push(b)}else!b&&0!==b||-1!==y.indexOf(b)||y.push(b);return y}},{}],519:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("../plot_api/plot_config").dfltConfig,T={add:function(_,e,o,a,l){var i,v;_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},v=_.undoQueue.index,_.autoplay?_.undoQueue.inSequence||(_.autoplay=!1):(!_.undoQueue.sequence||_.undoQueue.beginSequence?(_.undoQueue.queue.splice(v,_.undoQueue.queue.length-v,i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),_.undoQueue.index+=1):i=_.undoQueue.queue[v-1],_.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(e),i.undo.args.unshift(o),i.redo.calls.push(a),i.redo.args.push(l)),_.undoQueue.queue.length>b.queueLength&&(_.undoQueue.queue.shift(),_.undoQueue.index--))},startSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!0,_.undoQueue.beginSequence=!0},stopSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!1,_.undoQueue.beginSequence=!1},undo:function(_){var e,o;if(!(void 0===_.undoQueue||isNaN(_.undoQueue.index)||_.undoQueue.index<=0)){for(_.undoQueue.index--,e=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,o=0;o<e.undo.calls.length;o++)T.plotDo(_,e.undo.calls[o],e.undo.args[o]);_.undoQueue.inSequence=!1,_.autoplay=!1}},redo:function(_){var e,o;if(!(void 0===_.undoQueue||isNaN(_.undoQueue.index)||_.undoQueue.index>=_.undoQueue.queue.length)){for(e=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,o=0;o<e.redo.calls.length;o++)T.plotDo(_,e.redo.calls[o],e.redo.args[o]);_.undoQueue.inSequence=!1,_.autoplay=!1,_.undoQueue.index++}},plotDo:function(_,e,o){_.autoplay=!0,o=function(a,l){for(var i,v=[],h=0;h<l.length;h++)v[h]=(i=l[h])===a?i:"object"==typeof i?Array.isArray(i)?y.extendDeep([],i):y.extendDeepAll({},i):i;return v}(_,o),e.apply(null,o)}};ue.exports=T},{"../lib":503,"../plot_api/plot_config":541}],520:[function(x,ue,le){"use strict";le.counter=function(y,b,T,_){var e=(b||"")+(T?"":"$"),o=!1===_?"":"^";return"xy"===y?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(o+y+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(x,ue,le){"use strict";var y=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,b=/^[^\.\[\]]+$/;ue.exports=function(T,_){for(;_;){var e=T.match(y);if(e)T=e[1];else{if(!T.match(b))throw new Error("bad relativeAttr call:"+[T,_]);T=""}if("^"!==_.charAt(0))break;_=_.slice(1)}return T&&"["!==_.charAt(0)?T+"."+_:T+_}},{}],522:[function(x,ue,le){"use strict";var y=x("./array").isArrayOrTypedArray,b=x("./is_plain_object");ue.exports=function T(_,e){for(var o in e){var a=e[o],l=_[o];if(l!==a)if("_"===o.charAt(0)||"function"==typeof a){if(o in _)continue;_[o]=a}else if(y(a)&&y(l)&&b(a[0])){if("customdata"===o||"ids"===o)continue;for(var i=Math.min(a.length,l.length),v=0;v<i;v++)l[v]!==a[v]&&b(a[v])&&b(l[v])&&T(l[v],a[v])}else b(a)&&b(l)&&(T(l,a),Object.keys(l).length||delete _[o])}}},{"./array":485,"./is_plain_object":504}],523:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("./loggers"),T=x("./identity"),_=x("../constants/numerical").BADNUM;function e(i,v){return i<v}function o(i,v){return i<=v}function a(i,v){return i>v}function l(i,v){return i>=v}le.findBin=function(i,v,h){if(y(v.start))return h?Math.ceil((i-v.start)/v.size-1e-9)-1:Math.floor((i-v.start)/v.size+1e-9);var s,d,p=0,f=v.length,g=0,m=f>1?(v[f-1]-v[0])/(f-1):1;for(d=m>=0?h?e:o:h?l:a,i+=1e-9*m*(h?-1:1)*(m>=0?1:-1);p<f&&g++<100;)d(v[s=Math.floor((p+f)/2)],i)?p=s+1:f=s;return g>90&&b.log("Long binary search..."),p-1},le.sorterAsc=function(i,v){return i-v},le.sorterDes=function(i,v){return v-i},le.distinctVals=function(i){var v,h=i.slice();for(h.sort(le.sorterAsc),v=h.length-1;v>-1&&h[v]===_;v--);for(var s,d=h[v]-h[0]||1,p=d/(v||1)/1e4,f=[],g=0;g<=v;g++){var m=h[g],u=m-s;void 0===s?(f.push(m),s=m):u>p&&(d=Math.min(d,u),f.push(m),s=m)}return{vals:f,minDiff:d}},le.roundUp=function(i,v,h){for(var s,d=0,p=v.length-1,f=0,g=h?0:1,m=h?1:0,u=h?Math.ceil:Math.floor;d<p&&f++<100;)v[s=u((d+p)/2)]<=i?d=s+g:p=s-m;return v[d]},le.sort=function(i,v){for(var h=0,s=0,d=1;d<i.length;d++){var p=v(i[d],i[d-1]);if(p<0?h=1:p>0&&(s=1),h&&s)return i.sort(v)}return s?i:i.reverse()},le.findIndexOfMin=function(i,v){v=v||T;for(var h,s=1/0,d=0;d<i.length;d++){var p=v(i[d]);p<s&&(s=p,h=d)}return h}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(x,ue,le){"use strict";ue.exports=function(y,b){(y.attr("class")||"").split(" ").forEach(function(T){0===T.indexOf("cursor-")&&y.classed(T,!1)}),b&&y.classed("cursor-"+b,!0)}},{}],525:[function(x,ue,le){"use strict";var y=x("../components/color"),b=function(){};ue.exports=function(T){for(var _ in T)"function"==typeof T[_]&&(T[_]=b);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=y.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=y.lightLine,e.style["z-index"]=30;var o=document.createElement("p");return o.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",o.style.position="relative",o.style.top="50%",o.style.left="50%",o.style.height="30%",o.style.width="50%",o.style.margin="-15% 0 0 -25%",e.appendChild(o),T.container.appendChild(e),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(x,ue,le){"use strict";ue.exports=function(y){return Object.keys(y).sort()}},{}],527:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("./array").isArrayOrTypedArray;le.aggNums=function(T,_,e,o){var a,l;if((!o||o>e.length)&&(o=e.length),y(_)||(_=!1),b(e[0])){for(l=new Array(o),a=0;a<o;a++)l[a]=le.aggNums(T,_,e[a]);e=l}for(a=0;a<o;a++)y(_)?y(e[a])&&(_=T(+_,+e[a])):_=e[a];return _},le.len=function(T){return le.aggNums(function(_){return _+1},0,T)},le.mean=function(T,_){return _||(_=le.len(T)),le.aggNums(function(e,o){return e+o},0,T)/_},le.midRange=function(T){if(void 0!==T&&0!==T.length)return(le.aggNums(Math.max,null,T)+le.aggNums(Math.min,null,T))/2},le.variance=function(T,_,e){return _||(_=le.len(T)),y(e)||(e=le.mean(T,_)),le.aggNums(function(o,a){return o+Math.pow(a-e,2)},0,T)/_},le.stdev=function(T,_,e){return Math.sqrt(le.variance(T,_,e))},le.median=function(T){var _=T.slice().sort();return le.interp(_,.5)},le.interp=function(T,_){if(!y(_))throw"n should be a finite number";if((_=_*T.length-.5)<0)return T[0];if(_>T.length-1)return T[T.length-1];var e=_%1;return e*T[Math.ceil(_)]+(1-e)*T[Math.floor(_)]}},{"./array":485,"fast-isnumeric":190}],528:[function(x,ue,le){"use strict";var y=x("color-normalize");ue.exports=function(b){return b?y(b):[0,0,0,1]}},{"color-normalize":89}],529:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../lib"),T=b.strTranslate,_=x("../constants/xmlns_namespaces"),e=x("../constants/alignment").LINE_SPACING,o=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;le.convertToTspans=function(L,P,j){var U=L.text(),$=!L.attr("data-notex")&&P&&P._context.typesetMath&&"undefined"!=typeof MathJax&&U.match(o),X=y.select(L.node().parentNode);if(!X.empty()){var te=L.attr("class")?L.attr("class").split(" ")[0]:"text";return X.selectAll("svg."+(te+="-math")).remove(),X.selectAll("g."+te+"-group").remove(),L.style("display",null).attr({"data-unformatted":U,"data-math":"N"}),$?(P&&P._promises||[]).push(new Promise(function(J){L.style("display","none");var ee=parseInt(L.node().style.fontSize,10);!function(G,H,Y){var oe,W,ne,re,ce=parseInt((MathJax.version||"").split(".")[0]);if(2===ce||3===ce){var fe=function(){var pe="math-output-"+b.randstr({},64),we=(re=y.select("body").append("div").attr({id:pe}).style({visibility:"hidden",position:"absolute","font-size":H.fontSize+"px"}).text(G.replace(a,"\\lt ").replace(l,"\\gt "))).node();return 2===ce?MathJax.Hub.Typeset(we):MathJax.typeset([we])},me=function(){var pe=re.select(2===ce?".MathJax_SVG":".MathJax"),we=!pe.empty()&&re.select("svg").node();if(we){var ye,Te=we.getBoundingClientRect();ye=2===ce?y.select("body").select("#MathJax_SVG_glyphs"):pe.select("defs"),Y(pe,ye,Te)}else b.log("There was an error in the tex syntax.",G),Y();re.remove()};2===ce?MathJax.Hub.Queue(function(){return W=b.extendDeepAll({},MathJax.Hub.config),ne=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if("SVG"!==(oe=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},fe,me,function(){if("SVG"!==oe)return MathJax.Hub.setRenderer(oe)},function(){return void 0!==ne&&(MathJax.Hub.processSectionDelay=ne),MathJax.Hub.Config(W)}):3===ce&&(W=b.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,"svg"!==(oe=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){fe(),me(),"svg"!==oe&&(MathJax.config.startup.output=oe),MathJax.config=W}))}else b.warn("No MathJax version:",MathJax.version)}($[2],{fontSize:ee},function(G,H,Y){X.selectAll("svg."+te).remove(),X.selectAll("g."+te+"-group").remove();var oe=G&&G.select("svg");if(!oe||!oe.node())return ae(),void J();var W=X.append("g").classed(te+"-group",!0).attr({"pointer-events":"none","data-unformatted":U,"data-math":"Y"});W.node().appendChild(oe.node()),H&&H.node()&&oe.node().insertBefore(H.node().cloneNode(!0),oe.node().firstChild);var ne=Y.width,re=Y.height;oe.attr({class:te,height:re,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ce=L.node().style.fill||"black",fe=oe.select("g");fe.attr({fill:ce,stroke:ce});var me=fe.node().getBoundingClientRect(),pe=me.width,we=me.height;(pe>ne||we>re)&&(oe.style("overflow","hidden"),pe=(me=oe.node().getBoundingClientRect()).width,we=me.height);var ye=+L.attr("x"),Te=+L.attr("y"),Le=-(ee||L.node().getBoundingClientRect().height)/4;if("y"===te[0])W.attr({transform:"rotate("+[-90,ye,Te]+")"+T(-pe/2,Le-we/2)});else if("l"===te[0])Te=Le-we/2;else if("a"===te[0]&&0!==te.indexOf("atitle"))ye=0,Te=Le;else{var Oe=L.attr("text-anchor");ye-=pe*("middle"===Oe?.5:"end"===Oe?1:0),Te=Te+Le-we/2}oe.attr({x:ye,y:Te}),j&&j.call(L,W),J(W)})})):ae(),L}function ae(){X.empty()||(te=L.attr("class")+"-math",X.select("svg."+te).remove()),L.text("").style("white-space","pre"),function(J,ee){ee=ee.replace(p," ");var se,G=!1,H=[],Y=-1;function oe(){Y++;var _e=document.createElementNS(_.svg,"tspan");y.select(_e).attr({class:"line",dy:Y*e+"em"}),J.appendChild(_e),se=_e;var Ae=H;if(H=[{node:_e}],Ae.length>1)for(var Fe=1;Fe<Ae.length;Fe++)W(Ae[Fe])}function W(_e){var Ae,Fe=_e.type,Pe={};if("a"===Fe){Ae="a";var Be=_e.target,qe=_e.href,We=_e.popup;qe&&(Pe={"xlink:xlink:show":"_blank"===Be||"_"!==Be.charAt(0)?"new":"replace",target:Be,"xlink:xlink:href":qe},We&&(Pe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+We+'");return false;'))}else Ae="tspan";_e.style&&(Pe.style=_e.style);var Je=document.createElementNS(_.svg,Ae);if("sup"===Fe||"sub"===Fe){ne(se,"\u200b"),se.appendChild(Je);var ut=document.createElementNS(_.svg,"tspan");ne(ut,"\u200b"),y.select(ut).attr("dy",s[Fe]),Pe.dy=h[Fe],se.appendChild(Je),se.appendChild(ut)}else se.appendChild(Je);y.select(Je).attr(Pe),se=_e.node=Je,H.push(_e)}function ne(_e,Ae){_e.appendChild(document.createTextNode(Ae))}function re(_e){if(1!==H.length){var Ae=H.pop();_e!==Ae.type&&b.log("Start tag <"+Ae.type+"> doesnt match end tag <"+_e+">. Pretending it did match.",ee),se=H[H.length-1].node}else b.log("Ignoring unexpected end tag </"+_e+">.",ee)}m.test(ee)?oe():(se=J,H=[{node:J}]);for(var ce=ee.split(f),fe=0;fe<ce.length;fe++){var me=ce[fe],pe=me.match(g),we=pe&&pe[2].toLowerCase(),ye=v[we];if("br"===we)oe();else if(void 0===ye)ne(se,I(me));else if(pe[1])re(we);else{var Te=pe[4],Le={type:we},Oe=M(Te,u);if(Oe?(Oe=Oe.replace(S,"$1 fill:"),ye&&(Oe+=";"+ye)):ye&&(Oe=ye),Oe&&(Le.style=Oe),"a"===we){G=!0;var Re=M(Te,w);if(Re){var Ve=N(Re);Ve&&(Le.href=Ve,Le.target=M(Te,c)||"_blank",Le.popup=M(Te,E))}}W(Le)}}return G}(L.node(),U)&&L.style("pointer-events","all"),le.positionText(L),j&&j.call(L)}};var a=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],v={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},h={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},d=["http:","https:","mailto:","",void 0,":"],p=le.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,g=/<(\/?)([^ >]*)(\s+(.*))?>/i,m=/<br(\s+.*)?>/i;le.BR_TAG_ALL=/<br(\s+.*)?>/gi;var u=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,c=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,E=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function M(L,P){if(!L)return null;var j=L.match(P),U=j&&(j[3]||j[4]);return U&&I(U)}var S=/(^|;)\s*color:/;le.plainText=function(L,P){for(var j=void 0!==(P=P||{}).len&&-1!==P.len?P.len:1/0,U=void 0!==P.allowedTags?P.allowedTags:["br"],X=L.split(f),te=[],ae="",J=0,ee=0;ee<X.length;ee++){var se=X[ee],G=se.match(g),H=G&&G[2].toLowerCase();if(H)-1!==U.indexOf(H)&&(te.push(se),ae=H);else{var Y=se.length;if(J+Y<j)te.push(se),J+=Y;else if(J<j){var oe=j-J;ae&&("br"!==ae||oe<=3||Y<=3)&&te.pop(),te.push(j>3?se.substr(0,oe-3)+"...":se.substr(0,oe));break}ae=""}}return te.join("")};var C={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},O=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function I(L){return L.replace(O,function(P,j){return("#"===j.charAt(0)?function(U){if(!(U>1114111)){var $=String.fromCodePoint;if($)return $(U);var X=String.fromCharCode;return U<=65535?X(U):X(55232+(U>>10),U%1024+56320)}}("x"===j.charAt(1)?parseInt(j.substr(2),16):parseInt(j.substr(1),10)):C[j])||P})}function N(L){var P=encodeURI(decodeURI(L)),j=document.createElement("a"),U=document.createElement("a");j.href=L,U.href=P;var X=U.protocol;return-1!==d.indexOf(j.protocol)&&-1!==d.indexOf(X)?P:""}function F(L,P,j){var U,$,X,te=j.horizontalAlign,ae=j.verticalAlign||"top",J=L.node().getBoundingClientRect(),ee=P.node().getBoundingClientRect();return $="bottom"===ae?function(){return J.bottom-U.height}:"middle"===ae?function(){return J.top+(J.height-U.height)/2}:function(){return J.top},X="right"===te?function(){return J.right-U.width}:"center"===te?function(){return J.left+(J.width-U.width)/2}:function(){return J.left},function(){U=this.node().getBoundingClientRect();var se=X()-ee.left,G=$()-ee.top,H=j.gd||{};if(j.gd){H._fullLayout._calcInverseTransform(H);var Y=b.apply3DTransform(H._fullLayout._invTransform)(se,G);se=Y[0],G=Y[1]}return this.style({top:G+"px",left:se+"px","z-index":1e3}),this}}le.convertEntities=I,le.sanitizeHTML=function(L){L=L.replace(p," ");for(var P=document.createElement("p"),j=P,U=[],$=L.split(f),X=0;X<$.length;X++){var te=$[X],ae=te.match(g),J=ae&&ae[2].toLowerCase();if(J in v)if(ae[1])U.length&&(j=U.pop());else{var ee=ae[4],se=M(ee,u),G=se?{style:se}:{};if("a"===J){var H=M(ee,w);if(H){var Y=N(H);if(Y){G.href=Y;var oe=M(ee,c);oe&&(G.target=oe)}}}var W=document.createElement(J);j.appendChild(W),y.select(W).attr(G),j=W,U.push(W)}else j.appendChild(document.createTextNode(I(te)))}return P.innerHTML},le.lineCount=function(L){return L.selectAll("tspan.line").size()||1},le.positionText=function(L,P,j){return L.each(function(){var U=y.select(this);function $(ae,J){return void 0===J?null===(J=U.attr(ae))&&(U.attr(ae,0),J=0):U.attr(ae,J),J}var X=$("x",P),te=$("y",j);"text"===this.nodeName&&U.selectAll("tspan.line").attr({x:X,y:te})})},le.makeTextShadow=function(L){var P="1px ",j="1px ",U="1px ";return P+j+U+L+", -"+P+"-"+j+U+L+", "+P+"-"+j+U+L+", -"+P+j+U+L},le.makeEditable=function(L,P){var j=P.gd,U=P.delegate,$=y.dispatch("edit","input","cancel"),X=U||L;if(L.style({"pointer-events":U?"none":"all"}),1!==L.size())throw new Error("boo");function te(){var se,G,H,Y,oe;se=y.select(j).select(".svg-container"),G=se.append("div"),H=L.node().style,Y=parseFloat(H.fontSize||12),void 0===(oe=P.text)&&(oe=L.attr("data-unformatted")),G.classed("plugin-editable editable",!0).style({position:"absolute","font-family":H.fontFamily||"Arial","font-size":Y,color:P.fill||H.fill||"black",opacity:1,"background-color":P.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Y/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(oe).call(F(L,se,P)).on("blur",function(){j._editing=!1,L.text(this.textContent).style({opacity:1});var W,ne=y.select(this).attr("class");(W=ne?"."+ne.split(" ")[0]+"-math-group":"[class*=-math-group]")&&y.select(L.node().parentNode).select(W).style({opacity:0});var re=this.textContent;y.select(this).transition().duration(0).remove(),y.select(document).on("mouseup",null),$.edit.call(L,re)}).on("focus",function(){var W=this;j._editing=!0,y.select(document).on("mouseup",function(){if(y.event.target===W)return!1;document.activeElement===G.node()&&G.node().blur()})}).on("keyup",function(){27===y.event.which?(j._editing=!1,L.style({opacity:1}),y.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),$.cancel.call(L,this.textContent)):($.input.call(L,this.textContent),y.select(this).call(F(L,se,P)))}).on("keydown",function(){13===y.event.which&&this.blur()}).call(ae),L.style({opacity:0});var J,ee=X.attr("class");(J=ee?"."+ee.split(" ")[0]+"-math-group":"[class*=-math-group]")&&y.select(L.node().parentNode).select(J).style({opacity:0})}function ae(J){var ee=J.node(),se=document.createRange();se.selectNodeContents(ee);var G=window.getSelection();G.removeAllRanges(),G.addRange(se),ee.focus()}return P.immediate?te():X.on("click",te),y.rebind(L,$,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(x,ue,le){"use strict";var y={};function b(T){T&&null!==T.timer&&(clearTimeout(T.timer),T.timer=null)}le.throttle=function(T,_,e){var o=y[T],a=Date.now();if(!o){for(var l in y)y[l].ts<a-6e4&&delete y[l];o=y[T]={ts:0,timer:null}}function i(){e(),o.ts=Date.now(),o.onDone&&(o.onDone(),o.onDone=null)}b(o),a>o.ts+_?i():o.timer=setTimeout(function(){i(),o.timer=null},_)},le.done=function(T){var _=y[T];return _&&_.timer?new Promise(function(e){var o=_.onDone;_.onDone=function(){o&&o(),e(),_.onDone=null}}):Promise.resolve()},le.clear=function(T){if(T)b(y[T]),delete y[T];else for(var _ in y)le.clear(_)}},{}],531:[function(x,ue,le){"use strict";var y=x("fast-isnumeric");ue.exports=function(b,T){if(b>0)return Math.log(b)/Math.LN10;var _=Math.log(Math.min(T[0],T[1]))/Math.LN10;return y(_)||(_=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),_}},{"fast-isnumeric":190}],532:[function(x,ue,le){"use strict";var y=ue.exports={},b=x("../plots/geo/constants").locationmodeToLayer,T=x("topojson-client").feature;y.getTopojsonName=function(_){return[_.scope.replace(/ /g,"-"),"_",_.resolution.toString(),"m"].join("")},y.getTopojsonPath=function(_,e){return _+e+".json"},y.getTopojsonFeatures=function(_,e){return T(e,e.objects[b[_.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(x,ue,le){"use strict";ue.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(x,ue,le){"use strict";ue.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(x,ue,le){"use strict";var y=x("../registry");ue.exports=function(b){for(var T,_,e=y.layoutArrayContainers,o=y.layoutArrayRegexes,a=b.split("[")[0],l=0;l<o.length;l++)if((_=b.match(o[l]))&&0===_.index){T=_[0];break}if(T||(T=e[e.indexOf(a)]),!T)return!1;var i=b.substr(T.length);return i?!!(_=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:T,index:Number(_[1]),property:_[3]||""}:{array:T,index:"",property:""}}},{"../registry":638}],536:[function(x,ue,le){"use strict";var y=x("../lib"),b=y.extendFlat,T=y.isPlainObject,_={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},o=_.flags.slice().concat(["fullReplot"]),a=e.flags.slice().concat("layoutReplot");function l(h){for(var s={},d=0;d<h.length;d++)s[h[d]]=!1;return s}function i(h,s,d){var p=b({},h);for(var f in p){var g=p[f];T(g)&&(p[f]=v(g,s,0,f))}return"from-root"===d&&(p.editType=s),p}function v(h,s,d,p){if(h.valType){var f=b({},h);if(f.editType=s,Array.isArray(h.items)){f.items=new Array(h.items.length);for(var g=0;g<h.items.length;g++)f.items[g]=v(h.items[g],s)}return f}return i(h,s,"_"===p.charAt(0)?"nested":"from-root")}ue.exports={traces:_,layout:e,traceFlags:function(){return l(o)},layoutFlags:function(){return l(a)},update:function(h,s){var d=s.editType;if(d&&"none"!==d)for(var p=d.split("+"),f=0;f<p.length;f++)h[p[f]]=!0},overrideAll:i}},{"../lib":503}],537:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("gl-mat4/fromQuat"),T=x("../registry"),_=x("../lib"),e=x("../plots/plots"),o=x("../plots/cartesian/axis_ids"),a=x("../components/color"),l=o.cleanId,i=o.getFromTrace,v=T.traceIs;function h(c,E){var M=c[E],S=E.charAt(0);M&&"paper"!==M&&(c[E]=l(M,S,!0))}function s(c){function E(M,S){c[M]&&(!c.title||!c.title[S])&&(c.title||(c.title={}),c.title[S]=c[M],delete c[M])}c&&("string"!=typeof c.title&&"number"!=typeof c.title||(c.title={text:c.title}),E("titlefont","font"),E("titleposition","position"),E("titleside","side"),E("titleoffset","offset"))}function d(c){if(!_.isPlainObject(c))return!1;var E=c.name;return delete c.name,delete c.showlegend,("string"==typeof E||"number"==typeof E)&&String(E)}function p(c,E,M,S){if(M&&!S)return c;if(S&&!M||!c.trim())return E;if(!E.trim())return c;var C,O=Math.min(c.length,E.length);for(C=0;C<O&&c.charAt(C)===E.charAt(C);C++);return c.substr(0,C).trim()}function f(c){var E="middle",M="center";return"string"==typeof c&&(-1!==c.indexOf("top")?E="top":-1!==c.indexOf("bottom")&&(E="bottom"),-1!==c.indexOf("left")?M="left":-1!==c.indexOf("right")&&(M="right")),E+" "+M}function g(c,E){return E in c&&"object"==typeof c[E]&&0===Object.keys(c[E]).length}le.clearPromiseQueue=function(c){Array.isArray(c._promises)&&c._promises.length>0&&_.log("Clearing previous rejected promises from queue."),c._promises=[]},le.cleanLayout=function(c){var E,M;c||(c={}),c.xaxis1&&(c.xaxis||(c.xaxis=c.xaxis1),delete c.xaxis1),c.yaxis1&&(c.yaxis||(c.yaxis=c.yaxis1),delete c.yaxis1),c.scene1&&(c.scene||(c.scene=c.scene1),delete c.scene1);var S=(e.subplotsRegistry.cartesian||{}).attrRegex,C=(e.subplotsRegistry.polar||{}).attrRegex,O=(e.subplotsRegistry.ternary||{}).attrRegex,I=(e.subplotsRegistry.gl3d||{}).attrRegex,N=Object.keys(c);for(E=0;E<N.length;E++){var F=N[E];if(S&&S.test(F)){var L=c[F];L.anchor&&"free"!==L.anchor&&(L.anchor=l(L.anchor)),L.overlaying&&(L.overlaying=l(L.overlaying)),L.type||(L.isdate?L.type="date":L.islog?L.type="log":!1===L.isdate&&!1===L.islog&&(L.type="linear")),"withzero"!==L.autorange&&"tozero"!==L.autorange||(L.autorange=!0,L.rangemode="tozero"),delete L.islog,delete L.isdate,delete L.categories,g(L,"domain")&&delete L.domain,void 0!==L.autotick&&(void 0===L.tickmode&&(L.tickmode=L.autotick?"auto":"linear"),delete L.autotick),s(L)}else if(C&&C.test(F))s(c[F].radialaxis);else if(O&&O.test(F)){var P=c[F];s(P.aaxis),s(P.baxis),s(P.caxis)}else if(I&&I.test(F)){var j=c[F],U=j.cameraposition;if(Array.isArray(U)&&4===U[0].length){var X=U[1],te=U[2],ae=b([],U[0]),J=[];for(M=0;M<3;++M)J[M]=X[M]+te*ae[2+4*M];j.camera={eye:{x:J[0],y:J[1],z:J[2]},center:{x:X[0],y:X[1],z:X[2]},up:{x:0,y:0,z:1}},delete j.cameraposition}s(j.xaxis),s(j.yaxis),s(j.zaxis)}}var ee=Array.isArray(c.annotations)?c.annotations.length:0;for(E=0;E<ee;E++){var se=c.annotations[E];_.isPlainObject(se)&&(se.ref&&("paper"===se.ref?(se.xref="paper",se.yref="paper"):"data"===se.ref&&(se.xref="x",se.yref="y"),delete se.ref),h(se,"xref"),h(se,"yref"))}var G=Array.isArray(c.shapes)?c.shapes.length:0;for(E=0;E<G;E++){var H=c.shapes[E];_.isPlainObject(H)&&(h(H,"xref"),h(H,"yref"))}var Y=Array.isArray(c.images)?c.images.length:0;for(E=0;E<Y;E++){var oe=c.images[E];_.isPlainObject(oe)&&(h(oe,"xref"),h(oe,"yref"))}var W=c.legend;return W&&(W.x>3?(W.x=1.02,W.xanchor="left"):W.x<-2&&(W.x=-.02,W.xanchor="right"),W.y>3?(W.y=1.02,W.yanchor="bottom"):W.y<-2&&(W.y=-.02,W.yanchor="top")),s(c),"rotate"===c.dragmode&&(c.dragmode="orbit"),a.clean(c),c.template&&c.template.layout&&le.cleanLayout(c.template.layout),c},le.cleanData=function(c){for(var E=0;E<c.length;E++){var M,S=c[E];if("histogramy"===S.type&&"xbins"in S&&!("ybins"in S)&&(S.ybins=S.xbins,delete S.xbins),S.error_y&&"opacity"in S.error_y){var C=a.defaults,O=S.error_y.color||(v(S,"bar")?a.defaultLine:C[E%C.length]);S.error_y.color=a.addOpacity(a.rgb(O),a.opacity(O)*S.error_y.opacity),delete S.error_y.opacity}if("bardir"in S&&("h"!==S.bardir||!v(S,"bar")&&"histogram"!==S.type.substr(0,9)||(S.orientation="h",le.swapXYData(S)),delete S.bardir),"histogramy"===S.type&&le.swapXYData(S),"histogramx"!==S.type&&"histogramy"!==S.type||(S.type="histogram"),"scl"in S&&!("colorscale"in S)&&(S.colorscale=S.scl,delete S.scl),"reversescl"in S&&!("reversescale"in S)&&(S.reversescale=S.reversescl,delete S.reversescl),S.xaxis&&(S.xaxis=l(S.xaxis,"x")),S.yaxis&&(S.yaxis=l(S.yaxis,"y")),v(S,"gl3d")&&S.scene&&(S.scene=e.subplotsRegistry.gl3d.cleanId(S.scene)),!v(S,"pie-like")&&!v(S,"bar-like"))if(Array.isArray(S.textposition))for(M=0;M<S.textposition.length;M++)S.textposition[M]=f(S.textposition[M]);else S.textposition&&(S.textposition=f(S.textposition));var I=T.getModule(S);if(I&&I.colorbar){var N=I.colorbar.container,F=N?S[N]:S;F&&F.colorscale&&("YIGnBu"===F.colorscale&&(F.colorscale="YlGnBu"),"YIOrRd"===F.colorscale&&(F.colorscale="YlOrRd"))}if("surface"===S.type&&_.isPlainObject(S.contours)){var L=["x","y","z"];for(M=0;M<L.length;M++){var P=S.contours[L[M]];_.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if("candlestick"===S.type||"ohlc"===S.type){var j=!1!==(S.increasing||{}).showlegend,U=!1!==(S.decreasing||{}).showlegend,$=d(S.increasing),X=d(S.decreasing);if(!1!==$&&!1!==X){var te=p($,X,j,U);te&&(S.name=te)}else!$&&!X||S.name||(S.name=$||X)}if(Array.isArray(S.transforms)){var ae=S.transforms;for(M=0;M<ae.length;M++){var J=ae[M];if(_.isPlainObject(J))switch(J.type){case"filter":J.filtersrc&&(J.target=J.filtersrc,delete J.filtersrc),J.calendar&&(J.valuecalendar||(J.valuecalendar=J.calendar),delete J.calendar);break;case"groupby":if(J.styles=J.styles||J.style,J.styles&&!Array.isArray(J.styles)){var ee=J.styles,se=Object.keys(ee);J.styles=[];for(var G=0;G<se.length;G++)J.styles.push({target:se[G],value:ee[se[G]]})}}}}g(S,"line")&&delete S.line,"marker"in S&&(g(S.marker,"line")&&delete S.marker.line,g(S,"marker")&&delete S.marker),a.clean(S),S.autobinx&&(delete S.autobinx,delete S.xbins),S.autobiny&&(delete S.autobiny,delete S.ybins),s(S),S.colorbar&&s(S.colorbar),S.marker&&S.marker.colorbar&&s(S.marker.colorbar),S.line&&S.line.colorbar&&s(S.line.colorbar),S.aaxis&&s(S.aaxis),S.baxis&&s(S.baxis)}},le.swapXYData=function(c){var E;if(_.swapAttrs(c,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(c.z)&&Array.isArray(c.z[0])&&(c.transpose?delete c.transpose:c.transpose=!0),c.error_x&&c.error_y){var M=c.error_y,S="copy_ystyle"in M?M.copy_ystyle:!(M.color||M.thickness||M.width);_.swapAttrs(c,["error_?.copy_ystyle"]),S&&_.swapAttrs(c,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof c.hoverinfo){var C=c.hoverinfo.split("+");for(E=0;E<C.length;E++)"x"===C[E]?C[E]="y":"y"===C[E]&&(C[E]="x");c.hoverinfo=C.join("+")}},le.coerceTraceIndices=function(c,E){if(y(E))return[E];if(!Array.isArray(E)||!E.length)return c.data.map(function(C,O){return O});if(Array.isArray(E)){for(var M=[],S=0;S<E.length;S++)_.isIndex(E[S],c.data.length)?M.push(E[S]):_.warn("trace index (",E[S],") is not a number or is out of bounds");return M}return E},le.manageArrayContainers=function(c,E,M){var S=c.obj,C=c.parts,O=C.length,I=C[O-1],N=y(I);if(N&&null===E){var F=C.slice(0,O-1).join(".");_.nestedProperty(S,F).get().splice(I,1)}else N&&void 0===c.get()&&void 0===c.get()&&(M[c.astr]=null),c.set(E)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function u(c){var E=c.search(m);if(E>0)return c.substr(0,E)}le.hasParent=function(c,E){for(var M=u(E);M;){if(M in c)return!0;M=u(M)}return!1};var w=["x","y","z"];le.clearAxisTypes=function(c,E,M){for(var S=0;S<E.length;S++)for(var C=c._fullData[S],O=0;O<3;O++){var I=i(c,C,w[O]);if(I&&"log"!==I.type){var N=I._name,F=I._id.substr(1);if("scene"===F.substr(0,5)){if(void 0!==M[F])continue;N=F+"."+N}var L=N+".type";void 0===M[N]&&void 0===M[L]&&_.nestedProperty(c.layout,L).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(x,ue,le){"use strict";var y=x("./plot_api");le._doPlot=y._doPlot,le.newPlot=y.newPlot,le.restyle=y.restyle,le.relayout=y.relayout,le.redraw=y.redraw,le.update=y.update,le._guiRestyle=y._guiRestyle,le._guiRelayout=y._guiRelayout,le._guiUpdate=y._guiUpdate,le._storeDirectGUIEdit=y._storeDirectGUIEdit,le.react=y.react,le.extendTraces=y.extendTraces,le.prependTraces=y.prependTraces,le.addTraces=y.addTraces,le.deleteTraces=y.deleteTraces,le.moveTraces=y.moveTraces,le.purge=y.purge,le.addFrames=y.addFrames,le.deleteFrames=y.deleteFrames,le.animate=y.animate,le.setPlotConfig=y.setPlotConfig,le.toImage=x("./to_image"),le.validate=x("./validate"),le.downloadImage=x("../snapshot/download");var b=x("./template_api");le.makeTemplate=b.makeTemplate,le.validateTemplate=b.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(x,ue,le){"use strict";var y=x("../lib/is_plain_object"),b=x("../lib/noop"),T=x("../lib/loggers"),_=x("../lib/search").sorterAsc,e=x("../registry");le.containerArrayMatch=x("./container_array_match");var o=le.isAddVal=function(l){return"add"===l||y(l)},a=le.isRemoveVal=function(l){return null===l||"remove"===l};le.applyContainerArrayChanges=function(l,i,v,h,s){var d=i.astr,p=e.getComponentMethod(d,"supplyLayoutDefaults"),f=e.getComponentMethod(d,"draw"),g=e.getComponentMethod(d,"drawOne"),m=h.replot||h.recalc||p===b||f===b,u=l.layout,w=l._fullLayout;if(v[""]){Object.keys(v).length>1&&T.warn("Full array edits are incompatible with other edits",d);var c=v[""][""];if(a(c))i.set(null);else{if(!Array.isArray(c))return T.warn("Unrecognized full array edit value",d,c),!0;i.set(c)}return!m&&(p(u,w),f(l),!0)}var E,M,S,C,O,I,N,L=Object.keys(v).map(Number).sort(_),P=i.get(),j=P||[],U=s(w,d).get(),$=[],X=-1,te=j.length;for(E=0;E<L.length;E++)if(C=v[S=L[E]],O=Object.keys(C),N=o(I=C[""]),S<0||S>j.length-(N?0:1))T.warn("index out of range",d,S);else if(void 0!==I)O.length>1&&T.warn("Insertion & removal are incompatible with edits to the same index.",d,S),a(I)?$.push(S):N?("add"===I&&(I={}),j.splice(S,0,I),U&&U.splice(S,0,{})):T.warn("Unrecognized full object edit value",d,S,I),-1===X&&(X=S);else for(M=0;M<O.length;M++)s(j[S],O[M],d+"["+S+"].").set(C[O[M]]);for(E=$.length-1;E>=0;E--)j.splice($[E],1),U&&U.splice($[E],1);if(j.length?P||i.set(j):i.set(null),m)return!1;if(p(u,w),g!==b){var ae;if(-1===X)ae=L;else{for(te=Math.max(j.length,te),ae=[],E=0;E<L.length&&!((S=L[E])>=X);E++)ae.push(S);for(E=X;E<te;E++)ae.push(E)}for(E=0;E<ae.length;E++)g(l,ae[E])}else f(l);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=x("has-hover"),_=x("../lib"),e=_.nestedProperty,o=x("../lib/events"),a=x("../lib/queue"),l=x("../registry"),i=x("./plot_schema"),v=x("../plots/plots"),h=x("../plots/cartesian/axes"),s=x("../components/drawing"),d=x("../components/color"),p=x("../plots/cartesian/graph_interact").initInteractions,f=x("../constants/xmlns_namespaces"),g=x("../plots/cartesian/select").clearSelect,m=x("./plot_config").dfltConfig,u=x("./manage_arrays"),w=x("./helpers"),c=x("./subroutines"),E=x("./edit_types"),M=x("../plots/cartesian/constants").AX_NAME_PATTERN,S=0;function C(_e){var Ae=_e._fullLayout;Ae._redrawFromAutoMarginCount?Ae._redrawFromAutoMarginCount--:_e.emit("plotly_afterplot")}function O(_e,Ae){try{_e._fullLayout._paper.style("background",Ae)}catch(Fe){_.error(Fe)}}function I(_e,Ae){O(_e,d.combine(Ae,"white"))}function N(_e,Ae){if(!_e._context){_e._context=_.extendDeep({},m);var Fe=y.select("base");_e._context._baseUrl=Fe.size()&&Fe.attr("href")?window.location.href.split("#")[0]:""}var Pe,Be,qe,We=_e._context;if(Ae){for(Be=Object.keys(Ae),Pe=0;Pe<Be.length;Pe++)"editable"!==(qe=Be[Pe])&&"edits"!==qe&&qe in We&&(We[qe]="setBackground"===qe&&"opaque"===Ae[qe]?I:Ae[qe]);Ae.plot3dPixelRatio&&!We.plotGlPixelRatio&&(We.plotGlPixelRatio=We.plot3dPixelRatio);var Je=Ae.editable;if(void 0!==Je)for(We.editable=Je,Be=Object.keys(We.edits),Pe=0;Pe<Be.length;Pe++)We.edits[Be[Pe]]=Je;if(Ae.edits)for(Be=Object.keys(Ae.edits),Pe=0;Pe<Be.length;Pe++)(qe=Be[Pe])in We.edits&&(We.edits[qe]=Ae.edits[qe]);We._exportedPlot=Ae._exportedPlot}We.staticPlot&&(We.editable=!1,We.edits={},We.autosizable=!1,We.scrollZoom=!1,We.doubleClick=!1,We.showTips=!1,We.showLink=!1,We.displayModeBar=!1),"hover"!==We.displayModeBar||T||(We.displayModeBar=!0),"transparent"!==We.setBackground&&"function"==typeof We.setBackground||(We.setBackground=O),We._hasZeroHeight=We._hasZeroHeight||0===_e.clientHeight,We._hasZeroWidth=We._hasZeroWidth||0===_e.clientWidth;var ut=We.scrollZoom,Ge=We._scrollZoom={};if(!0===ut)Ge.cartesian=1,Ge.gl3d=1,Ge.geo=1,Ge.mapbox=1;else if("string"==typeof ut){var Ke=ut.split("+");for(Pe=0;Pe<Ke.length;Pe++)Ge[Ke[Pe]]=1}else!1!==ut&&(Ge.gl3d=1,Ge.geo=1,Ge.mapbox=1)}function F(_e,Ae){var Fe,Pe,Be=Ae+1,qe=[];for(Fe=0;Fe<_e.length;Fe++)(Pe=_e[Fe])<0?qe.push(Be+Pe):qe.push(Pe);return qe}function L(_e,Ae,Fe){var Pe,Be;for(Pe=0;Pe<Ae.length;Pe++){if((Be=Ae[Pe])!==parseInt(Be,10))throw new Error("all values in "+Fe+" must be integers");if(Be>=_e.data.length||Be<-_e.data.length)throw new Error(Fe+" must be valid indices for gd.data.");if(Ae.indexOf(Be,Pe+1)>-1||Be>=0&&Ae.indexOf(-_e.data.length+Be)>-1||Be<0&&Ae.indexOf(_e.data.length+Be)>-1)throw new Error("each index in "+Fe+" must be unique.")}}function P(_e,Ae,Fe){if(!Array.isArray(_e.data))throw new Error("gd.data must be an array.");if(void 0===Ae)throw new Error("currentIndices is a required argument.");if(Array.isArray(Ae)||(Ae=[Ae]),L(_e,Ae,"currentIndices"),void 0===Fe||Array.isArray(Fe)||(Fe=[Fe]),void 0!==Fe&&L(_e,Fe,"newIndices"),void 0!==Fe&&Ae.length!==Fe.length)throw new Error("current and new indices must be of equal length.")}function j(_e,Ae,Fe,Pe,Be){!function(it,ht,Tt,Ct){var Vt=_.isPlainObject(Ct);if(!Array.isArray(it.data))throw new Error("gd.data must be an array");if(!_.isPlainObject(ht))throw new Error("update must be a key:value object");if(void 0===Tt)throw new Error("indices must be an integer or array of integers");for(var Ft in L(it,Tt,"indices"),ht){if(!Array.isArray(ht[Ft])||ht[Ft].length!==Tt.length)throw new Error("attribute "+Ft+" must be an array of length equal to indices array length");if(Vt&&(!(Ft in Ct)||!Array.isArray(Ct[Ft])||Ct[Ft].length!==ht[Ft].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(_e,Ae,Fe,Pe);for(var qe=function(it,ht,Tt,Ct){var Ft,gt,ft,Bt,rn=_.isPlainObject(Ct),un=[];for(var pn in Array.isArray(Tt)||(Tt=[Tt]),Tt=F(Tt,it.data.length-1),ht)for(var dn=0;dn<Tt.length;dn++){if(Ft=(gt=e(it.data[Tt[dn]],pn)).get(),!_.isArrayOrTypedArray(ft=ht[pn][dn]))throw new Error("attribute: "+pn+" index: "+dn+" must be an array");if(!_.isArrayOrTypedArray(Ft))throw new Error("cannot extend missing or non-array attribute: "+pn);if(Ft.constructor!==ft.constructor)throw new Error("cannot extend array with an array of a different type: "+pn);b(Bt=rn?Ct[pn][dn]:Ct)||(Bt=-1),un.push({prop:gt,target:Ft,insert:ft,maxp:Math.floor(Bt)})}return un}(_e,Ae,Fe,Pe),We={},Je={},ut=0;ut<qe.length;ut++){var Ge=qe[ut].prop,nt=Be(qe[ut].target,qe[ut].insert,qe[ut].maxp);Ge.set(nt[0]),Array.isArray(We[Ge.astr])||(We[Ge.astr]=[]),We[Ge.astr].push(nt[1]),Array.isArray(Je[Ge.astr])||(Je[Ge.astr]=[]),Je[Ge.astr].push(qe[ut].target.length)}return{update:We,maxPoints:Je}}function U(_e,Ae){var Fe=new _e.constructor(_e.length+Ae.length);return Fe.set(_e),Fe.set(Ae,_e.length),Fe}function $(_e,Ae,Fe,Pe){_e=_.getGraphDiv(_e),w.clearPromiseQueue(_e);var Be={};if("string"==typeof Ae)Be[Ae]=Fe;else{if(!_.isPlainObject(Ae))return _.warn("Restyle fail.",Ae,Fe,Pe),Promise.reject();Be=_.extendFlat({},Ae),void 0===Pe&&(Pe=Fe)}Object.keys(Be).length&&(_e.changed=!0);var qe=w.coerceTraceIndices(_e,Pe),We=J(_e,Be,qe),Je=We.flags;Je.calc&&(_e.calcdata=void 0),Je.clearAxisTypes&&w.clearAxisTypes(_e,qe,{});var ut=[];Je.fullReplot?ut.push(le._doPlot):(ut.push(v.previousPromises),v.supplyDefaults(_e),Je.markerSize&&(v.doCalcdata(_e),H(ut)),Je.style&&ut.push(c.doTraceStyle),Je.colorbars&&ut.push(c.doColorBars),ut.push(C)),ut.push(v.rehover,v.redrag),a.add(_e,$,[_e,We.undoit,We.traces],$,[_e,We.redoit,We.traces]);var Ge=_.syncOrAsync(ut,_e);return Ge&&Ge.then||(Ge=Promise.resolve()),Ge.then(function(){return _e.emit("plotly_restyle",We.eventData),_e})}function X(_e){return void 0===_e?null:_e}function te(_e,Ae){return Ae?function(Fe,Pe,Be){var qe=e(Fe,Pe),We=qe.set;return qe.set=function(Je){ae((Be||"")+Pe,qe.get(),Je,_e),We(Je)},qe}:e}function ae(_e,Ae,Fe,Pe){if(Array.isArray(Ae)||Array.isArray(Fe))for(var Be=Array.isArray(Ae)?Ae:[],qe=Array.isArray(Fe)?Fe:[],We=Math.max(Be.length,qe.length),Je=0;Je<We;Je++)ae(_e+"["+Je+"]",Be[Je],qe[Je],Pe);else if(_.isPlainObject(Ae)||_.isPlainObject(Fe)){var ut=_.isPlainObject(Ae)?Ae:{},Ge=_.isPlainObject(Fe)?Fe:{},Ke=_.extendFlat({},ut,Ge);for(var nt in Ke)ae(_e+"."+nt,ut[nt],Ge[nt],Pe)}else void 0===Pe[_e]&&(Pe[_e]=X(Ae))}function J(_e,Ae,Fe){var Pe,Be=_e._fullLayout,qe=_e._fullData,We=_e.data,Je=Be._guiEditing,ut=te(Be._preGUI,Je),Ge=_.extendDeepAll({},Ae);ee(Ae);var Ke,nt=E.traceFlags(),it={},ht={};function Tt(){return Fe.map(function(){})}function Ct(pt){var It=h.id2name(pt);-1===Ke.indexOf(It)&&Ke.push(It)}function Vt(pt){return"LAYOUT"+pt+".autorange"}function Ft(pt){return"LAYOUT"+pt+".range"}function gt(pt){for(var It=pt;It<qe.length;It++)if(qe[It]._input===We[pt])return qe[It]}function ft(pt,It,jt){if(Array.isArray(pt))pt.forEach(function(an){ft(an,It,jt)});else if(!(pt in Ae)&&!w.hasParent(Ae,pt)){var Qt;if("LAYOUT"===pt.substr(0,6))Qt=ut(_e.layout,pt.replace("LAYOUT",""));else{var fn=Fe[jt];Qt=te(Be._tracePreGUI[gt(fn)._fullInput.uid],Je)(We[fn],pt)}pt in ht||(ht[pt]=Tt()),void 0===ht[pt][jt]&&(ht[pt][jt]=X(Qt.get())),void 0!==It&&Qt.set(It)}}function Bt(pt){return function(It){return qe[It][pt]}}function rn(pt){return function(It,jt){return!1===It?qe[Fe[jt]][pt]:null}}for(var un in Ae){if(w.hasParent(Ae,un))throw new Error("cannot set "+un+" and a parent attribute simultaneously");var pn,dn,Mn,ln,Ee,De,Ie=Ae[un];if("autobinx"!==un&&"autobiny"!==un||(un=un.charAt(un.length-1)+"bins",Ie=Array.isArray(Ie)?Ie.map(rn(un)):!1===Ie?Fe.map(Bt(un)):null),it[un]=Ie,"LAYOUT"!==un.substr(0,6)){for(ht[un]=Tt(),Pe=0;Pe<Fe.length;Pe++)if(pn=We[Fe[Pe]],dn=gt(Fe[Pe]),ln=(Mn=te(Be._tracePreGUI[dn._fullInput.uid],Je)(pn,un)).get(),void 0!==(Ee=Array.isArray(Ie)?Ie[Pe%Ie.length]:Ie)){var He=Mn.parts[Mn.parts.length-1],Ye=un.substr(0,un.length-He.length-1),tt=Ye?Ye+".":"",ot=Ye?e(dn,Ye).get():dn;if((De=i.getTraceValObject(dn,Mn.parts))&&De.impliedEdits&&null!==Ee)for(var st in De.impliedEdits)ft(_.relativeAttr(un,st),De.impliedEdits[st],Pe);else if("thicknessmode"!==He&&"lenmode"!==He||ln===Ee||"fraction"!==Ee&&"pixels"!==Ee||!ot){if("type"===un&&("pie"===Ee!=("pie"===ln)||"funnelarea"===Ee!=("funnelarea"===ln))){var bt="x",wt="y";"bar"!==Ee&&"bar"!==ln||"h"!==pn.orientation||(bt="y",wt="x"),_.swapAttrs(pn,["?","?src"],"labels",bt),_.swapAttrs(pn,["d?","?0"],"label",bt),_.swapAttrs(pn,["?","?src"],"values",wt),"pie"===ln||"funnelarea"===ln?(e(pn,"marker.color").set(e(pn,"marker.colors").get()),Be._pielayer.selectAll("g.trace").remove()):l.traceIs(pn,"cartesian")&&e(pn,"marker.colors").set(e(pn,"marker.color").get())}}else{var Ut=Be._size,Kt=ot.orient,vt="top"===Kt||"bottom"===Kt;if("thicknessmode"===He){var Et=vt?Ut.h:Ut.w;ft(tt+"thickness",ot.thickness*("fraction"===Ee?1/Et:Et),Pe)}else{var $t=vt?Ut.w:Ut.h;ft(tt+"len",ot.len*("fraction"===Ee?1/$t:$t),Pe)}}if(ht[un][Pe]=X(ln),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(un)){if("orientation"===un){Mn.set(Ee);var Dt=pn.x&&!pn.y?"h":"v";if((Mn.get()||Dt)===dn.orientation)continue}else"orientationaxes"===un&&(pn.orientation={v:"h",h:"v"}[dn.orientation]);w.swapXYData(pn),nt.calc=nt.clearAxisTypes=!0}else-1!==v.dataArrayContainers.indexOf(Mn.parts[0])?(w.manageArrayContainers(Mn,Ee,ht),nt.calc=!0):(De?De.arrayOk&&!l.traceIs(dn,"regl")&&(_.isArrayOrTypedArray(Ee)||_.isArrayOrTypedArray(ln))?nt.calc=!0:E.update(nt,De):nt.calc=!0,Mn.set(Ee))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(un)&&h.swap(_e,Fe),"orientationaxes"===un){var Pt=e(_e.layout,"hovermode"),je=Pt.get();"x"===je?Pt.set("y"):"y"===je?Pt.set("x"):"x unified"===je?Pt.set("y unified"):"y unified"===je&&Pt.set("x unified")}if(-1!==["orientation","type"].indexOf(un)){for(Ke=[],Pe=0;Pe<Fe.length;Pe++){var rt=We[Fe[Pe]];l.traceIs(rt,"cartesian")&&(Ct(rt.xaxis||"x"),Ct(rt.yaxis||"y"))}ft(Ke.map(Vt),!0,0),ft(Ke.map(Ft),[0,1],0)}}else Mn=ut(_e.layout,un.replace("LAYOUT","")),ht[un]=[X(Mn.get())],Mn.set(Array.isArray(Ie)?Ie[0]:Ie),nt.calc=!0}return(nt.calc||nt.plot)&&(nt.fullReplot=!0),{flags:nt,undoit:ht,redoit:it,traces:Fe,eventData:_.extendDeepNoArrays([],[Ge,Fe])}}function ee(_e){var Ae,Fe,Pe,Be=_.counterRegex("axis",".title",!1,!1),qe=/colorbar\.title$/,We=Object.keys(_e);for(Ae=0;Ae<We.length;Ae++)Pe=_e[Fe=We[Ae]],"title"!==Fe&&!Be.test(Fe)&&!qe.test(Fe)||"string"!=typeof Pe&&"number"!=typeof Pe?Fe.indexOf("titlefont")>-1&&-1===Fe.indexOf("grouptitlefont")?Je(Fe,Fe.replace("titlefont","title.font")):Fe.indexOf("titleposition")>-1?Je(Fe,Fe.replace("titleposition","title.position")):Fe.indexOf("titleside")>-1?Je(Fe,Fe.replace("titleside","title.side")):Fe.indexOf("titleoffset")>-1&&Je(Fe,Fe.replace("titleoffset","title.offset")):Je(Fe,Fe.replace("title","title.text"));function Je(ut,Ge){_e[Ge]=_e[ut],delete _e[ut]}}function se(_e,Ae,Fe){_e=_.getGraphDiv(_e),w.clearPromiseQueue(_e);var Pe={};if("string"==typeof Ae)Pe[Ae]=Fe;else{if(!_.isPlainObject(Ae))return _.warn("Relayout fail.",Ae,Fe),Promise.reject();Pe=_.extendFlat({},Ae)}Object.keys(Pe).length&&(_e.changed=!0);var Be=ne(_e,Pe),qe=Be.flags;qe.calc&&(_e.calcdata=void 0);var We=[v.previousPromises];qe.layoutReplot?We.push(c.layoutReplot):Object.keys(Pe).length&&(G(_e,qe,Be)||v.supplyDefaults(_e),qe.legend&&We.push(c.doLegend),qe.layoutstyle&&We.push(c.layoutStyles),qe.axrange&&H(We,Be.rangesAltered),qe.ticks&&We.push(c.doTicksRelayout),qe.modebar&&We.push(c.doModeBar),qe.camera&&We.push(c.doCamera),qe.colorbars&&We.push(c.doColorBars),We.push(C)),We.push(v.rehover,v.redrag),a.add(_e,se,[_e,Be.undoit],se,[_e,Be.redoit]);var Je=_.syncOrAsync(We,_e);return Je&&Je.then||(Je=Promise.resolve(_e)),Je.then(function(){return _e.emit("plotly_relayout",Be.eventData),_e})}function G(_e,Ae,Fe){var Pe=_e._fullLayout;if(!Ae.axrange)return!1;for(var Be in Ae)if("axrange"!==Be&&Ae[Be])return!1;for(var qe in Fe.rangesAltered){var We=h.id2name(qe),Je=_e.layout[We],ut=Pe[We];if(ut.autorange=Je.autorange,Je.range&&(ut.range=Je.range.slice()),ut.cleanRange(),ut._matchGroup)for(var Ge in ut._matchGroup)if(Ge!==qe){var Ke=Pe[h.id2name(Ge)];Ke.autorange=ut.autorange,Ke.range=ut.range.slice(),Ke._input.range=ut.range.slice()}}return!0}function H(_e,Ae){_e.push(g,c.doAutoRangeAndConstraints,Ae?function(Pe){var Be=[],qe=!0;for(var We in Ae){var Je=h.getFromId(Pe,We);if(Be.push(We),-1!==(Je.ticklabelposition||"").indexOf("inside")&&Je._anchorAxis&&Be.push(Je._anchorAxis._id),Je._matchGroup)for(var ut in Je._matchGroup)Ae[ut]||Be.push(ut);Je.automargin&&(qe=!1)}return h.draw(Pe,Be,{skipTitle:qe})}:function(Pe){return h.draw(Pe,"redraw")},c.drawData,c.finalDraw)}var Y=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,oe=/^[xyz]axis[0-9]*\.autorange$/,W=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ne(_e,Ae){var Fe,Pe,Be,qe=_e.layout,We=_e._fullLayout,ut=te(We._preGUI,We._guiEditing),Ge=Object.keys(Ae),Ke=h.list(_e),nt=_.extendDeepAll({},Ae),it={};for(ee(Ae),Ge=Object.keys(Ae),Pe=0;Pe<Ge.length;Pe++)if(0===Ge[Pe].indexOf("allaxes")){for(Be=0;Be<Ke.length;Be++){var ht=Ke[Be]._id.substr(1),Tt=-1!==ht.indexOf("scene")?ht+".":"",Ct=Ge[Pe].replace("allaxes",Tt+Ke[Be]._name);Ae[Ct]||(Ae[Ct]=Ae[Ge[Pe]])}delete Ae[Ge[Pe]]}var Vt=E.layoutFlags(),Ft={},gt={};function ft(fn,an){if(Array.isArray(fn))fn.forEach(function(Yn){ft(Yn,an)});else if(!(fn in Ae)&&!w.hasParent(Ae,fn)){var Sn=ut(qe,fn);fn in gt||(gt[fn]=X(Sn.get())),void 0!==an&&Sn.set(an)}}var Bt,rn={};function un(fn){var an=h.name2id(fn.split(".")[0]);return rn[an]=1,an}for(var pn in Ae){if(w.hasParent(Ae,pn))throw new Error("cannot set "+pn+" and a parent attribute simultaneously");for(var dn=ut(qe,pn),Mn=Ae[pn],ln=dn.parts.length-1;ln>0&&"string"!=typeof dn.parts[ln];)ln--;var Ee=dn.parts[ln],De=dn.parts[ln-1]+"."+Ee,Ie=dn.parts.slice(0,ln).join("."),He=e(_e.layout,Ie).get(),Ye=e(We,Ie).get(),tt=dn.get();if(void 0!==Mn){Ft[pn]=Mn,gt[pn]="reverse"===Ee?Mn:X(tt);var ot=i.getLayoutValObject(We,dn.parts);if(ot&&ot.impliedEdits&&null!==Mn)for(var st in ot.impliedEdits)ft(_.relativeAttr(pn,st),ot.impliedEdits[st]);if(-1!==["width","height"].indexOf(pn))if(Mn){ft("autosize",null);var bt="height"===pn?"width":"height";ft(bt,We[bt])}else We[pn]=_e._initialAutoSize[pn];else if("autosize"===pn)ft("width",Mn?null:We.width),ft("height",Mn?null:We.height);else if(De.match(Y))un(De),e(We,Ie+"._inputRange").set(null);else if(De.match(oe)){un(De),e(We,Ie+"._inputRange").set(null);var wt=e(We,Ie).get();wt._inputDomain&&(wt._input.domain=wt._inputDomain.slice())}else De.match(W)&&e(We,Ie+"._inputDomain").set(null);if("type"===Ee){Bt=He;var Ut="linear"===Ye.type&&"log"===Mn;if(Ut||"log"===Ye.type&&"linear"===Mn){if(Bt&&Bt.range)if(Ye.autorange)Ut&&(Bt.range=Bt.range[1]>Bt.range[0]?[1,2]:[2,1]);else{var vt=Bt.range[0],Et=Bt.range[1];Ut?(vt<=0&&Et<=0&&ft(Ie+".autorange",!0),vt<=0?vt=Et/1e6:Et<=0&&(Et=vt/1e6),ft(Ie+".range[0]",Math.log(vt)/Math.LN10),ft(Ie+".range[1]",Math.log(Et)/Math.LN10)):(ft(Ie+".range[0]",Math.pow(10,vt)),ft(Ie+".range[1]",Math.pow(10,Et)))}else ft(Ie+".autorange",!0);Array.isArray(We._subplots.polar)&&We._subplots.polar.length&&We[dn.parts[0]]&&"radialaxis"===dn.parts[1]&&delete We[dn.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(_e,Ye,Mn,ft),l.getComponentMethod("images","convertCoords")(_e,Ye,Mn,ft)}else ft(Ie+".autorange",!0),ft(Ie+".range",null);e(We,Ie+"._inputRange").set(null)}else if(Ee.match(M)){var $t=e(We,pn).get(),Dt=(Mn||{}).type;Dt&&"-"!==Dt||(Dt="linear"),l.getComponentMethod("annotations","convertCoords")(_e,$t,Dt,ft),l.getComponentMethod("images","convertCoords")(_e,$t,Dt,ft)}var Pt=u.containerArrayMatch(pn);if(Pt){Fe=Pt.array;var je=Pt.property,rt=ot||{editType:"calc"};""!==(Pe=Pt.index)&&""===je&&(u.isAddVal(Mn)?gt[pn]=null:u.isRemoveVal(Mn)?gt[pn]=(e(qe,Fe).get()||[])[Pe]:_.warn("unrecognized full object value",Ae)),E.update(Vt,rt),it[Fe]||(it[Fe]={});var pt=it[Fe][Pe];pt||(pt=it[Fe][Pe]={}),pt[je]=Mn,delete Ae[pn]}else"reverse"===Ee?(He.range?He.range.reverse():(ft(Ie+".autorange",!0),He.range=[1,0]),Ye.autorange?Vt.calc=!0:Vt.plot=!0):("dragmode"===pn&&(!1===Mn&&!1!==tt||!1!==Mn&&!1===tt)||We._has("scatter-like")&&We._has("regl")&&"dragmode"===pn&&("lasso"===Mn||"select"===Mn)&&"lasso"!==tt&&"select"!==tt||We._has("gl2d")?Vt.plot=!0:ot?E.update(Vt,ot):Vt.calc=!0,dn.set(Mn))}}for(Fe in it)u.applyContainerArrayChanges(_e,ut(qe,Fe),it[Fe],Vt,ut)||(Vt.plot=!0);for(var It in rn){var jt=(Bt=h.getFromId(_e,It))&&Bt._constraintGroup;if(jt)for(var Qt in Vt.calc=!0,jt)rn[Qt]||(h.getFromId(_e,Qt)._constraintShrinkable=!0)}return(re(_e)||Ae.height||Ae.width)&&(Vt.plot=!0),(Vt.plot||Vt.calc)&&(Vt.layoutReplot=!0),{flags:Vt,rangesAltered:rn,undoit:gt,redoit:Ft,eventData:nt}}function re(_e){var Ae=_e._fullLayout,Fe=Ae.width,Pe=Ae.height;return _e.layout.autosize&&v.plotAutoSize(_e,_e.layout,Ae),Ae.width!==Fe||Ae.height!==Pe}function ce(_e,Ae,Fe,Pe){_e=_.getGraphDiv(_e),w.clearPromiseQueue(_e),_.isPlainObject(Ae)||(Ae={}),_.isPlainObject(Fe)||(Fe={}),Object.keys(Ae).length&&(_e.changed=!0),Object.keys(Fe).length&&(_e.changed=!0);var Be=w.coerceTraceIndices(_e,Pe),qe=J(_e,_.extendFlat({},Ae),Be),We=qe.flags,Je=ne(_e,_.extendFlat({},Fe)),ut=Je.flags;(We.calc||ut.calc)&&(_e.calcdata=void 0),We.clearAxisTypes&&w.clearAxisTypes(_e,Be,Fe);var Ge=[];ut.layoutReplot?Ge.push(c.layoutReplot):We.fullReplot?Ge.push(le._doPlot):(Ge.push(v.previousPromises),G(_e,ut,Je)||v.supplyDefaults(_e),We.style&&Ge.push(c.doTraceStyle),(We.colorbars||ut.colorbars)&&Ge.push(c.doColorBars),ut.legend&&Ge.push(c.doLegend),ut.layoutstyle&&Ge.push(c.layoutStyles),ut.axrange&&H(Ge,Je.rangesAltered),ut.ticks&&Ge.push(c.doTicksRelayout),ut.modebar&&Ge.push(c.doModeBar),ut.camera&&Ge.push(c.doCamera),Ge.push(C)),Ge.push(v.rehover,v.redrag),a.add(_e,ce,[_e,qe.undoit,Je.undoit,qe.traces],ce,[_e,qe.redoit,Je.redoit,qe.traces]);var Ke=_.syncOrAsync(Ge,_e);return Ke&&Ke.then||(Ke=Promise.resolve(_e)),Ke.then(function(){return _e.emit("plotly_update",{data:qe.eventData,layout:Je.eventData}),_e})}function fe(_e){return function(Ae){Ae._fullLayout._guiEditing=!0;var Fe=_e.apply(null,arguments);return Ae._fullLayout._guiEditing=!1,Fe}}var me=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],pe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function we(_e,Ae){for(var Fe=0;Fe<Ae.length;Fe++){var Pe=Ae[Fe],Be=_e.match(Pe.pattern);if(Be){var qe=Be[1]||"";return{head:qe,tail:_e.substr(qe.length+1),attr:Pe.attr}}}}function ye(_e,Ae){var Fe=e(Ae,_e).get();if(void 0!==Fe)return Fe;var Pe=_e.split(".");for(Pe.pop();Pe.length>1;)if(Pe.pop(),void 0!==(Fe=e(Ae,Pe.join(".")+".uirevision").get()))return Fe;return Ae.uirevision}function Te(_e,Ae){for(var Fe=0;Fe<Ae.length;Fe++)if(Ae[Fe]._fullInput.uid===_e)return Fe;return-1}function Le(_e,Ae,Fe){for(var Pe=0;Pe<Ae.length;Pe++)if(Ae[Pe].uid===_e)return Pe;return!Ae[Fe]||Ae[Fe].uid?-1:Fe}function Oe(_e,Ae){var Fe=_.isPlainObject(_e),Pe=Array.isArray(_e);return Fe||Pe?(Fe&&_.isPlainObject(Ae)||Pe&&Array.isArray(Ae))&&JSON.stringify(_e)===JSON.stringify(Ae):_e===Ae}function Re(_e,Ae,Fe,Pe){var Be,qe,We,Je=Pe.getValObject,ut=Pe.flags,Ge=Pe.immutable,Ke=Pe.inArray,nt=Pe.arrayIndex;function it(){var He=Be.editType;Ke&&-1!==He.indexOf("arraydraw")?_.pushUnique(ut.arrays[Ke],nt):(E.update(ut,Be),"none"!==He&&ut.nChanges++,Pe.transition&&Be.anim&&ut.nChangesAnim++,(Y.test(We)||oe.test(We))&&(ut.rangesAltered[Fe[0]]=1),W.test(We)&&e(Ae,"_inputDomain").set(null),"datarevision"===qe&&(ut.newDataRevision=1))}function ht(He){return"data_array"===He.valType||He.arrayOk}for(qe in _e){if(ut.calc&&!Pe.transition)return;var Tt=_e[qe],Ct=Ae[qe],Vt=Fe.concat(qe);if(We=Vt.join("."),"_"!==qe.charAt(0)&&"function"!=typeof Tt&&Tt!==Ct){if(("tick0"===qe||"dtick"===qe)&&"geo"!==Fe[0]){var Ft=Ae.tickmode;if("auto"===Ft||"array"===Ft||!Ft)continue}if(("range"!==qe||!Ae.autorange)&&("zmin"!==qe&&"zmax"!==qe||"contourcarpet"!==Ae.type)&&(Be=Je(Vt))&&(!Be._compareAsJSON||JSON.stringify(Tt)!==JSON.stringify(Ct))){var gt,ft=Be.valType,Bt=ht(Be),rn=Array.isArray(Tt),un=Array.isArray(Ct);if(rn&&un){var pn="_input_"+qe,dn=_e[pn],Mn=Ae[pn];if(Array.isArray(dn)&&dn===Mn)continue}if(void 0===Ct)Bt&&rn?ut.calc=!0:it();else if(Be._isLinkedToArray){var ln=[],Ee=!1;Ke||(ut.arrays[qe]=ln);var De=Math.min(Tt.length,Ct.length),Ie=Math.max(Tt.length,Ct.length);if(De!==Ie){if("arraydraw"!==Be.editType){it();continue}Ee=!0}for(gt=0;gt<De;gt++)Re(Tt[gt],Ct[gt],Vt.concat(gt),_.extendFlat({inArray:qe,arrayIndex:gt},Pe));if(Ee)for(gt=De;gt<Ie;gt++)ln.push(gt)}else!ft&&_.isPlainObject(Tt)?Re(Tt,Ct,Vt,Pe):Bt?rn&&un?(Ge&&(ut.calc=!0),(Ge||Pe.newDataRevision)&&it()):rn!==un?ut.calc=!0:it():rn&&un&&Tt.length===Ct.length&&String(Tt)===String(Ct)||it()}}}for(qe in Ae)if(!(qe in _e)&&"_"!==qe.charAt(0)&&"function"!=typeof Ae[qe]){if(ht(Be=Je(Fe.concat(qe)))&&Array.isArray(Ae[qe]))return void(ut.calc=!0);it()}}function Ve(_e){var Ae=_e._fullLayout,Fe=_e.getBoundingClientRect();if(!_.equalDomRects(Fe,Ae._lastBBox)){var Pe=Ae._invTransform=_.inverseTransformMatrix(_.getFullTransformMatrix(_e));Ae._invScaleX=Math.sqrt(Pe[0][0]*Pe[0][0]+Pe[0][1]*Pe[0][1]+Pe[0][2]*Pe[0][2]),Ae._invScaleY=Math.sqrt(Pe[1][0]*Pe[1][0]+Pe[1][1]*Pe[1][1]+Pe[1][2]*Pe[1][2]),Ae._lastBBox=Fe}}le.animate=function(_e,Ae,Fe){if(_e=_.getGraphDiv(_e),!_.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Pe=_e._transitionData;Pe._frameQueue||(Pe._frameQueue=[]);var Be=(Fe=v.supplyAnimationDefaults(Fe)).transition,qe=Fe.frame;function We(Ge){return Array.isArray(Be)?Ge>=Be.length?Be[0]:Be[Ge]:Be}function Je(Ge){return Array.isArray(qe)?Ge>=qe.length?qe[0]:qe[Ge]:qe}function ut(Ge,Ke){var nt=0;return function(){if(Ge&&++nt===Ke)return Ge()}}return void 0===Pe._frameWaitingCnt&&(Pe._frameWaitingCnt=0),new Promise(function(Ge,Ke){function it(){_e.emit("plotly_animating"),Pe._lastFrameAt=-1/0,Pe._timeToNext=0,Pe._runningTransitions=0,Pe._currentFrame=null;var dn=function(){Pe._animationRaf=window.requestAnimationFrame(dn),Date.now()-Pe._lastFrameAt>Pe._timeToNext&&function nt(){Pe._currentFrame&&Pe._currentFrame.onComplete&&Pe._currentFrame.onComplete();var dn=Pe._currentFrame=Pe._frameQueue.shift();if(dn){var Mn=dn.name?dn.name.toString():null;_e._fullLayout._currentFrame=Mn,Pe._lastFrameAt=Date.now(),Pe._timeToNext=dn.frameOpts.duration,v.transition(_e,dn.frame.data,dn.frame.layout,w.coerceTraceIndices(_e,dn.frame.traces),dn.frameOpts,dn.transitionOpts).then(function(){dn.onComplete&&dn.onComplete()}),_e.emit("plotly_animatingframe",{name:Mn,frame:dn.frame,animation:{frame:dn.frameOpts,transition:dn.transitionOpts}})}else _e.emit("plotly_animated"),window.cancelAnimationFrame(Pe._animationRaf),Pe._animationRaf=null}()};dn()}var ht,Tt,Ct=0;function Vt(dn){return dn.transitionOpts=Array.isArray(Be)?Ct>=Be.length?Be[Ct]:Be[0]:Be,Ct++,dn}var Ft=[],gt=null==Ae,ft=Array.isArray(Ae);if(gt||ft||!_.isPlainObject(Ae)){if(gt||-1!==["string","number"].indexOf(typeof Ae))for(ht=0;ht<Pe._frames.length;ht++)(Tt=Pe._frames[ht])&&(gt||String(Tt.group)===String(Ae))&&Ft.push({type:"byname",name:String(Tt.name),data:Vt({name:Tt.name})});else if(ft)for(ht=0;ht<Ae.length;ht++){var Bt=Ae[ht];-1!==["number","string"].indexOf(typeof Bt)?(Bt=String(Bt),Ft.push({type:"byname",name:Bt,data:Vt({name:Bt})})):_.isPlainObject(Bt)&&Ft.push({type:"object",data:Vt(_.extendFlat({},Bt))})}}else Ft.push({type:"object",data:Vt(_.extendFlat({},Ae))});for(ht=0;ht<Ft.length;ht++)if("byname"===(Tt=Ft[ht]).type&&!Pe._frameHash[Tt.data.name])return _.warn('animate failure: frame not found: "'+Tt.data.name+'"'),void Ke();-1!==["next","immediate"].indexOf(Fe.mode)&&function(){if(0!==Pe._frameQueue.length){for(;Pe._frameQueue.length;){var dn=Pe._frameQueue.pop();dn.onInterrupt&&dn.onInterrupt()}_e.emit("plotly_animationinterrupted",[])}}(),"reverse"===Fe.direction&&Ft.reverse();var rn=_e._fullLayout._currentFrame;if(rn&&Fe.fromcurrent){var un=-1;for(ht=0;ht<Ft.length;ht++)if("byname"===(Tt=Ft[ht]).type&&Tt.name===rn){un=ht;break}if(un>0&&un<Ft.length-1){var pn=[];for(ht=0;ht<Ft.length;ht++)Tt=Ft[ht],("byname"!==Ft[ht].type||ht>un)&&pn.push(Tt);Ft=pn}}Ft.length>0?function(dn){if(0!==dn.length){for(var Mn=0;Mn<dn.length;Mn++){var ln;ln="byname"===dn[Mn].type?v.computeFrame(_e,dn[Mn].name):dn[Mn].data;var Ee=Je(Mn),De=We(Mn);De.duration=Math.min(De.duration,Ee.duration);var Ie={frame:ln,name:dn[Mn].name,frameOpts:Ee,transitionOpts:De};Mn===dn.length-1&&(Ie.onComplete=ut(Ge,2),Ie.onInterrupt=Ke),Pe._frameQueue.push(Ie)}"immediate"===Fe.mode&&(Pe._lastFrameAt=-1/0),Pe._animationRaf||it()}}(Ft):(_e.emit("plotly_animated"),Ge())})},le.addFrames=function(_e,Ae,Fe){if(_e=_.getGraphDiv(_e),null==Ae)return Promise.resolve();if(!_.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Pe,Be,qe,We,Je=_e._transitionData._frames,ut=_e._transitionData._frameHash;if(!Array.isArray(Ae))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ae);var Ge=Je.length+2*Ae.length,Ke=[],nt={};for(Pe=Ae.length-1;Pe>=0;Pe--)if(_.isPlainObject(Ae[Pe])){var it=Ae[Pe].name,ht=(ut[it]||nt[it]||{}).name,Tt=Ae[Pe].name;ht&&Tt&&"number"==typeof Tt&&(ut[ht]||nt[ht])&&S<5&&(S++,_.warn('addFrames: overwriting frame "'+(ut[ht]||nt[ht]).name+'" with a frame whose name of type "number" also equates to "'+ht+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===S&&_.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),nt[it]={name:it},Ke.push({frame:v.supplyFrameDefaults(Ae[Pe]),index:Fe&&null!=Fe[Pe]?Fe[Pe]:Ge+Pe})}Ke.sort(function(pn,dn){return pn.index>dn.index?-1:pn.index<dn.index?1:0});var Vt=[],Ft=[],gt=Je.length;for(Pe=Ke.length-1;Pe>=0;Pe--){if("number"==typeof(Be=Ke[Pe].frame).name&&_.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Be.name)for(;ut[Be.name="frame "+_e._transitionData._counter++];);if(ut[Be.name]){for(qe=0;qe<Je.length&&(Je[qe]||{}).name!==Be.name;qe++);Vt.push({type:"replace",index:qe,value:Be}),Ft.unshift({type:"replace",index:qe,value:Je[qe]})}else We=Math.max(0,Math.min(Ke[Pe].index,gt)),Vt.push({type:"insert",index:We,value:Be}),Ft.unshift({type:"delete",index:We}),gt++}return a&&a.add(_e,v.modifyFrames,[_e,Ft],v.modifyFrames,[_e,Vt]),v.modifyFrames(_e,Vt)},le.deleteFrames=function(_e,Ae){if(_e=_.getGraphDiv(_e),!_.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e);var Fe,Pe,Be=_e._transitionData._frames,qe=[],We=[];if(!Ae)for(Ae=[],Fe=0;Fe<Be.length;Fe++)Ae.push(Fe);for((Ae=Ae.slice()).sort(),Fe=Ae.length-1;Fe>=0;Fe--)qe.push({type:"delete",index:Pe=Ae[Fe]}),We.unshift({type:"insert",index:Pe,value:Be[Pe]});return a&&a.add(_e,v.modifyFrames,[_e,We],v.modifyFrames,[_e,qe]),v.modifyFrames(_e,qe)},le.addTraces=function _e(Ae,Fe,Pe){Ae=_.getGraphDiv(Ae);var Be,qe,We=[],Je=le.deleteTraces,ut=_e,Ge=[Ae,We],Ke=[Ae,Fe];for(function(nt,it,ht){var Tt,Ct;if(!Array.isArray(nt.data))throw new Error("gd.data must be an array.");if(void 0===it)throw new Error("traces must be defined.");for(Array.isArray(it)||(it=[it]),Tt=0;Tt<it.length;Tt++)if("object"!=typeof(Ct=it[Tt])||Array.isArray(Ct)||null===Ct)throw new Error("all values in traces array must be non-array objects");if(void 0===ht||Array.isArray(ht)||(ht=[ht]),void 0!==ht&&ht.length!==it.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Ae,Fe,Pe),Array.isArray(Fe)||(Fe=[Fe]),Fe=Fe.map(function(nt){return _.extendFlat({},nt)}),w.cleanData(Fe),Be=0;Be<Fe.length;Be++)Ae.data.push(Fe[Be]);for(Be=0;Be<Fe.length;Be++)We.push(-Fe.length+Be);if(void 0===Pe)return qe=le.redraw(Ae),a.add(Ae,Je,Ge,ut,Ke),qe;Array.isArray(Pe)||(Pe=[Pe]);try{P(Ae,We,Pe)}catch(nt){throw Ae.data.splice(Ae.data.length-Fe.length,Fe.length),nt}return a.startSequence(Ae),a.add(Ae,Je,Ge,ut,Ke),qe=le.moveTraces(Ae,We,Pe),a.stopSequence(Ae),qe},le.deleteTraces=function _e(Ae,Fe){Ae=_.getGraphDiv(Ae);var Pe,Be,qe=[],We=le.addTraces,Je=_e,ut=[Ae,qe,Fe],Ge=[Ae,Fe];if(void 0===Fe)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Fe)||(Fe=[Fe]),L(Ae,Fe,"indices"),(Fe=F(Fe,Ae.data.length-1)).sort(_.sorterDes),Pe=0;Pe<Fe.length;Pe+=1)Be=Ae.data.splice(Fe[Pe],1)[0],qe.push(Be);var Ke=le.redraw(Ae);return a.add(Ae,We,ut,Je,Ge),Ke},le.extendTraces=function _e(Ae,Fe,Pe,Be){function qe(Ge,Ke,nt){var it,ht;if(_.isTypedArray(Ge))if(nt<0){var Tt=new Ge.constructor(0),Ct=U(Ge,Ke);nt<0?(it=Ct,ht=Tt):(it=Tt,ht=Ct)}else if(it=new Ge.constructor(nt),ht=new Ge.constructor(Ge.length+Ke.length-nt),nt===Ke.length)it.set(Ke),ht.set(Ge);else if(nt<Ke.length){var Vt=Ke.length-nt;it.set(Ke.subarray(Vt)),ht.set(Ge),ht.set(Ke.subarray(0,Vt),Ge.length)}else{var Ft=nt-Ke.length,gt=Ge.length-Ft;it.set(Ge.subarray(gt)),it.set(Ke,Ft),ht.set(Ge.subarray(0,gt))}else it=Ge.concat(Ke),ht=nt>=0&&nt<it.length?it.splice(0,it.length-nt):[];return[it,ht]}var We=j(Ae=_.getGraphDiv(Ae),Fe,Pe,Be,qe),Je=le.redraw(Ae);return a.add(Ae,le.prependTraces,[Ae,We.update,Pe,We.maxPoints],_e,arguments),Je},le.moveTraces=function _e(Ae,Fe,Pe){var Be,qe=[],We=[],Je=_e,ut=_e,Ge=[Ae=_.getGraphDiv(Ae),Pe,Fe],Ke=[Ae,Fe,Pe];if(P(Ae,Fe,Pe),Fe=Array.isArray(Fe)?Fe:[Fe],void 0===Pe)for(Pe=[],Be=0;Be<Fe.length;Be++)Pe.push(-Fe.length+Be);for(Pe=Array.isArray(Pe)?Pe:[Pe],Fe=F(Fe,Ae.data.length-1),Pe=F(Pe,Ae.data.length-1),Be=0;Be<Ae.data.length;Be++)-1===Fe.indexOf(Be)&&qe.push(Ae.data[Be]);for(Be=0;Be<Fe.length;Be++)We.push({newIndex:Pe[Be],trace:Ae.data[Fe[Be]]});for(We.sort(function(it,ht){return it.newIndex-ht.newIndex}),Be=0;Be<We.length;Be+=1)qe.splice(We[Be].newIndex,0,We[Be].trace);Ae.data=qe;var nt=le.redraw(Ae);return a.add(Ae,Je,Ge,ut,Ke),nt},le.prependTraces=function _e(Ae,Fe,Pe,Be){function qe(Ge,Ke,nt){var it,ht;if(_.isTypedArray(Ge))if(nt<=0){var Tt=new Ge.constructor(0),Ct=U(Ke,Ge);nt<0?(it=Ct,ht=Tt):(it=Tt,ht=Ct)}else if(it=new Ge.constructor(nt),ht=new Ge.constructor(Ge.length+Ke.length-nt),nt===Ke.length)it.set(Ke),ht.set(Ge);else if(nt<Ke.length){var Vt=Ke.length-nt;it.set(Ke.subarray(0,Vt)),ht.set(Ke.subarray(Vt)),ht.set(Ge,Vt)}else{var Ft=nt-Ke.length;it.set(Ke),it.set(Ge.subarray(0,Ft),Ke.length),ht.set(Ge.subarray(Ft))}else it=Ke.concat(Ge),ht=nt>=0&&nt<it.length?it.splice(nt,it.length):[];return[it,ht]}var We=j(Ae=_.getGraphDiv(Ae),Fe,Pe,Be,qe),Je=le.redraw(Ae);return a.add(Ae,le.extendTraces,[Ae,We.update,Pe,We.maxPoints],_e,arguments),Je},le.newPlot=function(_e,Ae,Fe,Pe){return _e=_.getGraphDiv(_e),v.cleanPlot([],{},_e._fullData||[],_e._fullLayout||{}),v.purge(_e),le._doPlot(_e,Ae,Fe,Pe)},le._doPlot=function(_e,Ae,Fe,Pe){var Be;if(_e=_.getGraphDiv(_e),o.init(_e),_.isPlainObject(Ae)){var qe=Ae;Ae=qe.data,Fe=qe.layout,Pe=qe.config,Be=qe.frames}if(!1===o.triggerHandler(_e,"plotly_beforeplot",[Ae,Fe,Pe]))return Promise.reject();Ae||Fe||_.isPlotDiv(_e)||_.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",_e),N(_e,Pe),Fe||(Fe={}),y.select(_e).classed("js-plotly-plot",!0),s.makeTester(),Array.isArray(_e._promises)||(_e._promises=[]);var We=0===(_e.data||[]).length&&Array.isArray(Ae);Array.isArray(Ae)&&(w.cleanData(Ae),We?_e.data=Ae:_e.data.push.apply(_e.data,Ae),_e.empty=!1),_e.layout&&!We||(_e.layout=w.cleanLayout(Fe)),v.supplyDefaults(_e);var Je=_e._fullLayout,ut=Je._has("cartesian");Je._replotting=!0,(We||Je._shouldCreateBgLayer)&&(function(Ft){var gt=y.select(Ft),ft=Ft._fullLayout;if(ft._calcInverseTransform=Ve,ft._calcInverseTransform(Ft),ft._container=gt.selectAll(".plot-container").data([0]),ft._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),ft._paperdiv=ft._container.selectAll(".svg-container").data([0]),ft._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),ft._glcontainer=ft._paperdiv.selectAll(".gl-container").data([{}]),ft._glcontainer.enter().append("div").classed("gl-container",!0),ft._paperdiv.selectAll(".main-svg").remove(),ft._paperdiv.select(".modebar-container").remove(),ft._paper=ft._paperdiv.insert("svg",":first-child").classed("main-svg",!0),ft._toppaper=ft._paperdiv.append("svg").classed("main-svg",!0),ft._modebardiv=ft._paperdiv.append("div"),delete ft._modeBar,ft._hoverpaper=ft._paperdiv.append("svg").classed("main-svg",!0),!ft._uid){var Bt={};y.selectAll("defs").each(function(){this.id&&(Bt[this.id.split("-")[1]]=1)}),ft._uid=_.randstr(Bt)}ft._paperdiv.selectAll(".main-svg").attr(f.svgAttrs),ft._defs=ft._paper.append("defs").attr("id","defs-"+ft._uid),ft._clips=ft._defs.append("g").classed("clips",!0),ft._topdefs=ft._toppaper.append("defs").attr("id","topdefs-"+ft._uid),ft._topclips=ft._topdefs.append("g").classed("clips",!0),ft._bgLayer=ft._paper.append("g").classed("bglayer",!0),ft._draggers=ft._paper.append("g").classed("draglayer",!0);var rn=ft._paper.append("g").classed("layer-below",!0);ft._imageLowerLayer=rn.append("g").classed("imagelayer",!0),ft._shapeLowerLayer=rn.append("g").classed("shapelayer",!0),ft._cartesianlayer=ft._paper.append("g").classed("cartesianlayer",!0),ft._polarlayer=ft._paper.append("g").classed("polarlayer",!0),ft._smithlayer=ft._paper.append("g").classed("smithlayer",!0),ft._ternarylayer=ft._paper.append("g").classed("ternarylayer",!0),ft._geolayer=ft._paper.append("g").classed("geolayer",!0),ft._funnelarealayer=ft._paper.append("g").classed("funnelarealayer",!0),ft._pielayer=ft._paper.append("g").classed("pielayer",!0),ft._iciclelayer=ft._paper.append("g").classed("iciclelayer",!0),ft._treemaplayer=ft._paper.append("g").classed("treemaplayer",!0),ft._sunburstlayer=ft._paper.append("g").classed("sunburstlayer",!0),ft._indicatorlayer=ft._toppaper.append("g").classed("indicatorlayer",!0),ft._glimages=ft._paper.append("g").classed("glimages",!0);var un=ft._toppaper.append("g").classed("layer-above",!0);ft._imageUpperLayer=un.append("g").classed("imagelayer",!0),ft._shapeUpperLayer=un.append("g").classed("shapelayer",!0),ft._infolayer=ft._toppaper.append("g").classed("infolayer",!0),ft._menulayer=ft._toppaper.append("g").classed("menulayer",!0),ft._zoomlayer=ft._toppaper.append("g").classed("zoomlayer",!0),ft._hoverlayer=ft._hoverpaper.append("g").classed("hoverlayer",!0),ft._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ft.emit("plotly_framework")}(_e),Je._shouldCreateBgLayer&&delete Je._shouldCreateBgLayer),s.initGradients(_e),s.initPatterns(_e),We&&h.saveShowSpikeInitial(_e);var Ge=!_e.calcdata||_e.calcdata.length!==(_e._fullData||[]).length;Ge&&v.doCalcdata(_e);for(var Ke=0;Ke<_e.calcdata.length;Ke++)_e.calcdata[Ke][0].trace=_e._fullData[Ke];_e._context.responsive?_e._responsiveChartHandler||(_e._responsiveChartHandler=function(){_.isHidden(_e)||v.resize(_e)},window.addEventListener("resize",_e._responsiveChartHandler)):_.clearResponsive(_e);var nt=_.extendFlat({},Je._size),it=0;function ht(){if(v.clearAutoMarginIds(_e),c.drawMarginPushers(_e),h.allowAutoMargin(_e),Je._has("pie"))for(var Ft=_e._fullData,gt=0;gt<Ft.length;gt++){var ft=Ft[gt];"pie"===ft.type&&ft.automargin&&v.allowAutoMargin(_e,"pie."+ft.uid+".automargin")}return v.doAutoMargin(_e),v.previousPromises(_e)}function Tt(){_e._transitioning||(c.doAutoRangeAndConstraints(_e),We&&h.saveRangeInitial(_e),l.getComponentMethod("rangeslider","calcAutorange")(_e))}var Ct=[v.previousPromises,function(){if(Be)return le.addFrames(_e,Be)},function Ft(){for(var gt=Je._basePlotModules,ft=0;ft<gt.length;ft++)gt[ft].drawFramework&&gt[ft].drawFramework(_e);!Je._glcanvas&&Je._has("gl")&&(Je._glcanvas=Je._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(pn){return pn.key}),Je._glcanvas.enter().append("canvas").attr("class",function(pn){return"gl-canvas gl-canvas-"+pn.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Bt=_e._context.plotGlPixelRatio;if(Je._glcanvas){Je._glcanvas.attr("width",Je.width*Bt).attr("height",Je.height*Bt).style("width",Je.width+"px").style("height",Je.height+"px");var rn=Je._glcanvas.data()[0].regl;if(rn&&(Math.floor(Je.width*Bt)!==rn._gl.drawingBufferWidth||Math.floor(Je.height*Bt)!==rn._gl.drawingBufferHeight)){var un="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!it)return _.log(un+" Clearing graph and plotting again."),v.cleanPlot([],{},_e._fullData,Je),v.supplyDefaults(_e),Je=_e._fullLayout,v.doCalcdata(_e),it++,Ft();_.error(un)}}return"h"===Je.modebar.orientation?Je._modebardiv.style("height",null).style("width","100%"):Je._modebardiv.style("width",null).style("height",Je.height+"px"),v.previousPromises(_e)},ht,function(){if(v.didMarginChange(nt,Je._size))return _.syncOrAsync([ht,c.layoutStyles],_e)}];ut&&Ct.push(function(){if(Ge)return _.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),Tt],_e);Tt()}),Ct.push(c.layoutStyles),ut&&Ct.push(function(){return h.draw(_e,We?"":"redraw")},function(Ft){Ft._fullLayout._insideTickLabelsAutorange&&se(Ft,Ft._fullLayout._insideTickLabelsAutorange).then(function(){Ft._fullLayout._insideTickLabelsAutorange=void 0})}),Ct.push(c.drawData,c.finalDraw,p,v.addLinks,v.rehover,v.redrag,v.doAutoMargin,function(Ft){Ft._fullLayout._insideTickLabelsAutorange&&We&&h.saveRangeInitial(Ft,!0)},v.previousPromises);var Vt=_.syncOrAsync(Ct,_e);return Vt&&Vt.then||(Vt=Promise.resolve()),Vt.then(function(){return C(_e),_e})},le.purge=function(_e){var Ae=(_e=_.getGraphDiv(_e))._fullLayout||{};return v.cleanPlot([],{},_e._fullData||[],Ae),v.purge(_e),o.purge(_e),Ae._container&&Ae._container.remove(),delete _e._context,_e},le.react=function(_e,Ae,Fe,Pe){var Be,qe;_e=_.getGraphDiv(_e),w.clearPromiseQueue(_e);var Ie,He,Ye,tt,ot,st,We=_e._fullData,Je=_e._fullLayout;if(_.isPlotDiv(_e)&&We&&Je){if(_.isPlainObject(Ae)){var ut=Ae;Ae=ut.data,Fe=ut.layout,Pe=ut.config,Be=ut.frames}var Ge=!1;if(Pe){var Ke=_.extendDeep({},_e._context);_e._context=void 0,N(_e,Pe),Ge=function Ie(He,Ye){var tt;for(tt in He)if("_"!==tt.charAt(0)){var ot=He[tt],st=Ye[tt];if(ot!==st)if(_.isPlainObject(ot)&&_.isPlainObject(st)){if(Ie(ot,st))return!0}else{if(!Array.isArray(ot)||!Array.isArray(st)||ot.length!==st.length)return!0;for(var bt=0;bt<ot.length;bt++)if(ot[bt]!==st[bt]&&(!_.isPlainObject(ot[bt])||!_.isPlainObject(st[bt])||Ie(ot[bt],st[bt])))return!0}}}(Ke,_e._context)}_e.data=Ae||[],w.cleanData(_e.data),_e.layout=Fe||{},w.cleanLayout(_e.layout),function(Ie,He,Ye,tt){var ot,st,bt,wt,Ut,Kt,vt,Et,$t,Dt,Pt=tt._preGUI,je=[],rt={},pt={};for(ot in Pt){if(Ut=we(ot,me)){if($t=Ut.head,Dt=Ut.tail,(wt=(bt=e(tt,st=Ut.attr||$t+".uirevision").get())&&ye(st,He))&&wt===bt){if(null===(Kt=Pt[ot])&&(Kt=void 0),Oe(Et=(vt=e(He,ot)).get(),Kt)){void 0===Et&&"autorange"===Dt&&je.push($t),vt.set(X(e(tt,ot).get()));continue}if("autorange"===Dt||"range["===Dt.substr(0,6)){var Qt=Pt[$t+".autorange"];if(Qt||null===Qt&&null===Pt[$t+".range[0]"]&&null===Pt[$t+".range[1]"]){if(!($t in rt)){var fn=e(He,$t).get();rt[$t]=fn&&(fn.autorange||!1!==fn.autorange&&(!fn.range||2!==fn.range.length))}if(rt[$t]){vt.set(X(e(tt,ot).get()));continue}}}}}else _.warn("unrecognized GUI edit: "+ot);delete Pt[ot],Ut&&"range["===Ut.tail.substr(0,6)&&(pt[Ut.head]=1)}for(var an=0;an<je.length;an++){var Sn=je[an];if(pt[Sn]){var Yn=e(He,Sn).get();Yn&&delete Yn.autorange}}var kn=tt._tracePreGUI;for(var cn in kn){var vn,hn=kn[cn],Dn=null;for(ot in hn){if(!Dn){var Pn=Te(cn,Ye);if(Pn<0){delete kn[cn];break}var $n=Le(cn,Ie,(vn=Ye[Pn]._fullInput).index);if($n<0){delete kn[cn];break}Dn=Ie[$n]}if(Ut=we(ot,pe)){if(Ut.attr?wt=(bt=e(tt,Ut.attr).get())&&ye(Ut.attr,He):(bt=vn.uirevision,void 0===(wt=Dn.uirevision)&&(wt=He.uirevision)),wt&&wt===bt&&(null===(Kt=hn[ot])&&(Kt=void 0),Oe(Et=(vt=e(Dn,ot)).get(),Kt))){vt.set(X(e(vn,ot).get()));continue}}else _.warn("unrecognized GUI edit: "+ot+" in trace uid "+cn);delete hn[ot]}}}(_e.data,_e.layout,We,Je),v.supplyDefaults(_e,{skipUpdateCalc:!0});var nt=_e._fullData,it=_e._fullLayout,ht=void 0===it.datarevision,Tt=it.transition,Ct=(Ie=_e,He=Je,Ye=it,tt=ht,ot=Tt,(st=E.layoutFlags()).arrays={},st.rangesAltered={},st.nChanges=0,st.nChangesAnim=0,Re(He,Ye,[],{getValObject:function bt(wt){return i.getLayoutValObject(Ye,wt)},flags:st,immutable:tt,transition:ot,gd:Ie}),(st.plot||st.calc)&&(st.layoutReplot=!0),ot&&st.nChanges&&st.nChangesAnim&&(st.anim=st.nChanges===st.nChangesAnim?"all":"some"),st),Ft=function(Ie,He,Ye,tt,ot,st){var bt=He.length===Ye.length;if(!ot&&!bt)return{fullReplot:!0,calc:!0};var wt,Ut,Kt=E.traceFlags();Kt.arrays={},Kt.nChanges=0,Kt.nChangesAnim=0;var vt={getValObject:function($t){var Dt=i.getTraceValObject(Ut,$t);return!Ut._module.animatable&&Dt.anim&&(Dt.anim=!1),Dt},flags:Kt,immutable:tt,transition:ot,newDataRevision:st,gd:Ie},Et={};for(wt=0;wt<He.length;wt++)if(Ye[wt]){if(v.hasMakesDataTransform(Ut=Ye[wt]._fullInput)&&(Ut=Ye[wt]),Et[Ut.uid])continue;Et[Ut.uid]=1,Re(He[wt]._fullInput,Ut,[],vt)}return(Kt.calc||Kt.plot)&&(Kt.fullReplot=!0),ot&&Kt.nChanges&&Kt.nChangesAnim&&(Kt.anim=Kt.nChanges===Kt.nChangesAnim&&bt?"all":"some"),Kt}(_e,We,nt,ht,Tt,Ct.newDataRevision);if(re(_e)&&(Ct.layoutReplot=!0),Ft.calc||Ct.calc){_e.calcdata=void 0;for(var gt=Object.getOwnPropertyNames(it),ft=0;ft<gt.length;ft++){var Bt=gt[ft],rn=Bt.substring(0,5);if("xaxis"===rn||"yaxis"===rn){var un=it[Bt]._emptyCategories;un&&un()}}}else v.supplyDefaultsUpdateCalc(_e.calcdata,nt);var pn=[];if(Be&&(_e._transitionData={},v.createTransitionData(_e),pn.push(function(){return le.addFrames(_e,Be)})),it.transition&&!Ge&&(Ft.anim||Ct.anim))Ct.ticks&&pn.push(c.doTicksRelayout),v.doCalcdata(_e),c.doAutoRangeAndConstraints(_e),pn.push(function(){return v.transitionFromReact(_e,Ft,Ct,Je)});else if(Ft.fullReplot||Ct.layoutReplot||Ge)_e._fullLayout._skipDefaults=!0,pn.push(le._doPlot);else{for(var dn in Ct.arrays){var Mn=Ct.arrays[dn];if(Mn.length){var ln=l.getComponentMethod(dn,"drawOne");if(ln!==_.noop)for(var Ee=0;Ee<Mn.length;Ee++)ln(_e,Mn[Ee]);else{var De=l.getComponentMethod(dn,"draw");if(De===_.noop)throw new Error("cannot draw components: "+dn);De(_e)}}}pn.push(v.previousPromises),Ft.style&&pn.push(c.doTraceStyle),(Ft.colorbars||Ct.colorbars)&&pn.push(c.doColorBars),Ct.legend&&pn.push(c.doLegend),Ct.layoutstyle&&pn.push(c.layoutStyles),Ct.axrange&&H(pn),Ct.ticks&&pn.push(c.doTicksRelayout),Ct.modebar&&pn.push(c.doModeBar),Ct.camera&&pn.push(c.doCamera),pn.push(C)}pn.push(v.rehover,v.redrag),(qe=_.syncOrAsync(pn,_e))&&qe.then||(qe=Promise.resolve(_e))}else qe=le.newPlot(_e,Ae,Fe,Pe);return qe.then(function(){return _e.emit("plotly_react",{data:Ae,layout:Fe}),_e})},le.redraw=function(_e){if(_e=_.getGraphDiv(_e),!_.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e);return w.cleanData(_e.data),w.cleanLayout(_e.layout),_e.calcdata=void 0,le._doPlot(_e).then(function(){return _e.emit("plotly_redraw"),_e})},le.relayout=se,le.restyle=$,le.setPlotConfig=function(_e){return _.extendFlat(m,_e)},le.update=ce,le._guiRelayout=fe(se),le._guiRestyle=fe($),le._guiUpdate=fe(ce),le._storeDirectGUIEdit=function(_e,Ae,Fe){for(var Pe in Fe)ae(Pe,e(_e,Pe).get(),Fe[Pe],Ae)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(x,ue,le){"use strict";var y={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},b={};(function T(_,e){for(var o in _){var a=_[o];a.valType?e[o]=a.dflt:(e[o]||(e[o]={}),T(a,e[o]))}})(y,b),ue.exports={configAttributes:y,dfltConfig:b}},{}],542:[function(x,ue,le){"use strict";var y=x("../registry"),b=x("../lib"),T=x("../plots/attributes"),_=x("../plots/layout_attributes"),e=x("../plots/frame_attributes"),o=x("../plots/animation_attributes"),a=x("./plot_config").configAttributes,l=x("./edit_types"),i=b.extendDeepAll,v=b.isPlainObject,h=b.isArrayOrTypedArray,s=b.nestedProperty,d=b.valObjectMeta,p=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function f(M,S,C){if(!M)return!1;if(M._isLinkedToArray)if(g(S[C]))C++;else if(C<S.length)return!1;for(;C<S.length;C++){var O=M[S[C]];if(!v(O)||(M=O,C===S.length-1))break;if(M._isLinkedToArray){if(!g(S[++C]))return!1}else if("info_array"===M.valType){var I=S[++C];if(!g(I))return!1;var N=M.items;if(Array.isArray(N)){if(I>=N.length)return!1;if(2===M.dimensions){if(C++,S.length===C)return M;var F=S[C];if(!g(F))return!1;M=N[I][F]}else M=N[I]}else M=N}}return M}function g(M){return M===Math.round(M)&&M>=0}function m(){var M,S,C={};for(M in i(C,_),y.subplotsRegistry)if((S=y.subplotsRegistry[M]).layoutAttributes)if(Array.isArray(S.attr))for(var O=0;O<S.attr.length;O++)c(C,S,S.attr[O]);else c(C,S,"subplot"===S.attr?S.name:S.attr);for(M in y.componentsRegistry){var I=(S=y.componentsRegistry[M]).schema;if(I&&(I.subplots||I.layout)){var N=I.subplots;if(N&&N.xaxis&&!N.yaxis)for(var F in N.xaxis)delete C.yaxis[F]}else"colorscale"===S.name?i(C,S.layoutAttributes):S.layoutAttributes&&E(C,S.layoutAttributes,S.name)}return{layoutAttributes:w(C)}}function u(){var M={frames:i({},e)};return w(M),M.frames}function w(M){return le.crawl(M,function(C,O,I){le.isValObject(C)?!0!==C.arrayOk&&"data_array"!==C.valType||(I[O+"src"]={valType:"string",editType:"none"}):v(C)&&(C.role="object")}),le.crawl(M,function(C,O,I){if(C){var N=C._isLinkedToArray;N&&(delete C._isLinkedToArray,I[O]={items:{}},I[O].items[N]=C,I[O].role="object")}}),function(S){!function C(O){for(var I in O)if(v(O[I]))C(O[I]);else if(Array.isArray(O[I]))for(var N=0;N<O[I].length;N++)C(O[I][N]);else O[I]instanceof RegExp&&(O[I]=O[I].toString())}(S)}(M),M}function c(M,S,C){var O=s(M,C),I=i({},S.layoutAttributes);I._isSubplotObj=!0,O.set(I)}function E(M,S,C){var O=s(M,C);O.set(i(O.get()||{},S))}le.IS_SUBPLOT_OBJ="_isSubplotObj",le.IS_LINKED_TO_ARRAY="_isLinkedToArray",le.DEPRECATED="_deprecated",le.UNDERSCORE_ATTRS=p,le.get=function(){var M={};y.allTypes.forEach(function(C){M[C]=function(O){var I,N;N=(I=y.modules[O]._module).basePlotModule;var F={type:null},L=i({},T),P=i({},I.attributes);le.crawl(P,function($,X,te,ae,J){s(L,J).set(void 0),void 0===$&&s(P,J).set(void 0)}),i(F,L),y.traceIs(O,"noOpacity")&&delete F.opacity,y.traceIs(O,"showLegend")||(delete F.showlegend,delete F.legendgroup),y.traceIs(O,"noHover")&&(delete F.hoverinfo,delete F.hoverlabel),I.selectPoints||delete F.selectedpoints,i(F,P),N.attributes&&i(F,N.attributes),F.type=O;var j={meta:I.meta||{},categories:I.categories||{},animatable:Boolean(I.animatable),type:O,attributes:w(F)};if(I.layoutAttributes){var U={};i(U,I.layoutAttributes),j.layoutAttributes=w(U)}return I.animatable||le.crawl(j,function($){le.isValObject($)&&"anim"in $&&delete $.anim}),j}(C)});var S={};return Object.keys(y.transformsRegistry).forEach(function(C){var O,N;S[C]=(N=i({},y.transformsRegistry[O=C].attributes),Object.keys(y.componentsRegistry).forEach(function(F){var L=y.componentsRegistry[F];L.schema&&L.schema.transforms&&L.schema.transforms[O]&&Object.keys(L.schema.transforms[O]).forEach(function(P){E(N,L.schema.transforms[O][P],P)})}),{attributes:w(N)})}),{defs:{valObjects:d,metaKeys:p.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{}},traces:M,layout:m(),transforms:S,frames:u(),animation:w(o),config:w(a)}},le.crawl=function(M,S,C,O){var I=C||0;O=O||"",Object.keys(M).forEach(function(N){var F=M[N];if(-1===p.indexOf(N)){var L=(O?O+".":"")+N;S(F,N,M,I,L),le.isValObject(F)||v(F)&&"impliedEdits"!==N&&le.crawl(F,S,I+1,L)}})},le.isValObject=function(M){return M&&void 0!==M.valType},le.findArrayAttributes=function(M){var S,C,O=[],I=[],N=[];function F($,X,te,ae){I=I.slice(0,ae).concat([X]),N=N.slice(0,ae).concat([$&&$._isLinkedToArray]),$&&("data_array"===$.valType||!0===$.arrayOk)&&("colorbar"!==I[ae-1]||"ticktext"!==X&&"tickvals"!==X)&&function J(ee,se,G){var H=ee[I[se]],Y=G+I[se];if(se===I.length-1)h(H)&&O.push(C+Y);else if(N[se]){if(Array.isArray(H))for(var oe=0;oe<H.length;oe++)v(H[oe])&&J(H[oe],se+1,Y+"["+oe+"].")}else v(H)&&J(H,se+1,Y+".")}(S,0,"")}S=M,C="",le.crawl(T,F),M._module&&M._module.attributes&&le.crawl(M._module.attributes,F);var L=M.transforms;if(L)for(var P=0;P<L.length;P++){var j=L[P],U=j._module;U&&(C="transforms["+P+"].",S=j,le.crawl(U.attributes,F))}return O},le.getTraceValObject=function(M,S){var C,O,I=S[0],N=1;if("transforms"===I){if(1===S.length)return T.transforms;var F=M.transforms;if(!Array.isArray(F)||!F.length)return!1;var L=S[1];if(!g(L)||L>=F.length)return!1;O=(C=(y.transformsRegistry[F[L].type]||{}).attributes)&&C[S[2]],N=3}else{var P=M._module;if(P||(P=(y.modules[M.type||T.type.dflt]||{})._module),!P)return!1;if(!(O=(C=P.attributes)&&C[I])){var j=P.basePlotModule;j&&j.attributes&&(O=j.attributes[I])}O||(O=T[I])}return f(O,S,N)},le.getLayoutValObject=function(M,S){return f(function(C,O){var I,N,F,L,P=C._basePlotModules;if(P){var j;for(I=0;I<P.length;I++){if((F=P[I]).attrRegex&&F.attrRegex.test(O)){if(F.layoutAttrOverrides)return F.layoutAttrOverrides;!j&&F.layoutAttributes&&(j=F.layoutAttributes)}var U=F.baseLayoutAttrOverrides;if(U&&O in U)return U[O]}if(j)return j}var $=C._modules;if($)for(I=0;I<$.length;I++)if((L=$[I].layoutAttributes)&&O in L)return L[O];for(N in y.componentsRegistry){if("colorscale"===(F=y.componentsRegistry[N]).name&&0===O.indexOf("coloraxis"))return F.layoutAttributes[O];if(!F.schema&&O===F.name)return F.layoutAttributes}return O in _&&_[O]}(M,S[0]),S,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("../plots/attributes"),T={name:{valType:"string",editType:"none"}};function _(o){return o&&"string"==typeof o}function e(o){return"s"!==o.charAt(o.length-1)&&y.warn("bad argument to arrayDefaultKey: "+o),o.substr(0,o.length-1)+"defaults"}T.templateitemname={valType:"string",editType:"calc"},le.templatedArray=function(o,a){return a._isLinkedToArray=o,a.name=T.name,a.templateitemname=T.templateitemname,a},le.traceTemplater=function(o){var a,l,i={};for(a in o)l=o[a],Array.isArray(l)&&l.length&&(i[a]=0);return{newTrace:function(v){var h={type:a=y.coerce(v,{},b,"type"),_template:null};if(a in i){var s=i[a]%(l=o[a]).length;i[a]++,h._template=l[s]}return h}}},le.newContainer=function(o,a,l){var i=o._template,v=i&&(i[a]||l&&i[l]);return y.isPlainObject(v)||(v=null),o[a]={_template:v}},le.arrayTemplater=function(o,a,l){var i=o._template,v=i&&i[e(a)],h=i&&i[a];Array.isArray(h)&&h.length||(h=[]);var s={};return{newItem:function(d){var p={name:d.name,_input:d},f=p.templateitemname=d.templateitemname;if(!_(f))return p._template=v,p;for(var g=0;g<h.length;g++){var m=h[g];if(m.name===f)return s[f]=1,p._template=m,p}return p[l]=d[l]||!1,p._template=!1,p},defaultItems:function(){for(var d=[],p=0;p<h.length;p++){var f=h[p],g=f.name;if(_(g)&&!s[g]){var m={_template:f,name:g,_input:{_templateitemname:g}};m.templateitemname=f.templateitemname,d.push(m),s[g]=1}}return d}}},le.arrayDefaultKey=e,le.arrayEditor=function(o,a,l){var i=(y.nestedProperty(o,a).get()||[]).length,v=l._index,h=v>=i&&(l._input||{})._templateitemname;h&&(v=i);var s,d=a+"["+v+"]";function p(){s={},h&&(s[d]={},s[d].templateitemname=h)}function f(m,u){h?y.nestedProperty(s[d],m).set(u):s[d+"."+m]=u}function g(){var m=s;return p(),m}return p(),{modifyBase:function(m,u){s[m]=u},modifyItem:f,getUpdateObj:g,applyUpdate:function(m,u){m&&f(m,u);var w=g();for(var c in w)y.nestedProperty(o,c).set(w[c])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../registry"),T=x("../plots/plots"),_=x("../lib"),e=x("../lib/clear_gl_canvases"),o=x("../components/color"),a=x("../components/drawing"),l=x("../components/titles"),i=x("../components/modebar"),v=x("../plots/cartesian/axes"),h=x("../constants/alignment"),s=x("../plots/cartesian/constraints"),d=s.enforce,p=s.clean,f=x("../plots/cartesian/autorange").doAutoRange;function g(S,C,O){for(var I=0;I<O.length;I++){var N=O[I][0],F=O[I][1];if(!(N[0]>=S[1]||N[1]<=S[0])&&F[0]<C[1]&&F[1]>C[0])return!0}return!1}function m(S){var C,O,I,N,F,L,P=S._fullLayout,j=P._size,U=j.p,$=v.list(S,"",!0);if(P._paperdiv.style({width:S._context.responsive&&P.autosize&&!S._context._hasZeroWidth&&!S.layout.width?"100%":P.width+"px",height:S._context.responsive&&P.autosize&&!S._context._hasZeroHeight&&!S.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(a.setSize,P.width,P.height),S._context.setBackground(S,P.paper_bgcolor),le.drawMainTitle(S),i.manage(S),!P._has("cartesian"))return T.previousPromises(S);function X(it,ht,Tt){var Ct=it._lw/2;return"x"===it._id.charAt(0)?ht?"top"===Tt?ht._offset-U-Ct:ht._offset+ht._length+U+Ct:j.t+j.h*(1-(it.position||0))+Ct%1:ht?"right"===Tt?ht._offset+ht._length+U+Ct:ht._offset-U-Ct:j.l+j.w*(it.position||0)+Ct%1}for(C=0;C<$.length;C++){var te=(N=$[C])._anchorAxis;N._linepositions={},N._lw=a.crispRound(S,N.linewidth,1),N._mainLinePosition=X(N,te,N.side),N._mainMirrorPosition=N.mirror&&te?X(N,te,h.OPPOSITE_SIDE[N.side]):null}var ae=[],J=[],ee=[],se=1===o.opacity(P.paper_bgcolor)&&1===o.opacity(P.plot_bgcolor)&&P.paper_bgcolor===P.plot_bgcolor;for(O in P._plots)if((I=P._plots[O]).mainplot)I.bg&&I.bg.remove(),I.bg=void 0;else{var G=I.xaxis.domain,H=I.yaxis.domain,Y=I.plotgroup;if(g(G,H,ee)){var oe=Y.node(),W=I.bg=_.ensureSingle(Y,"rect","bg");oe.insertBefore(W.node(),oe.childNodes[0]),J.push(O)}else Y.select("rect.bg").remove(),ee.push([G,H]),se||(ae.push(O),J.push(O))}var ne,re,ce,fe,me,pe,we,ye,Te,Le,Oe,Re,Ve,_e=P._bgLayer.selectAll(".bg").data(ae);for(_e.enter().append("rect").classed("bg",!0),_e.exit().remove(),_e.each(function(it){P._plots[it].bg=y.select(this)}),C=0;C<J.length;C++)F=(I=P._plots[J[C]]).xaxis,L=I.yaxis,I.bg&&void 0!==F._offset&&void 0!==L._offset&&I.bg.call(a.setRect,F._offset-U,L._offset-U,F._length+2*U,L._length+2*U).call(o.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(O in P._plots){F=(I=P._plots[O]).xaxis,L=I.yaxis;var Ae,Fe,Pe=I.clipId="clip"+P._uid+O+"plot",Be=_.ensureSingleById(P._clips,"clipPath",Pe,function(it){it.classed("plotclip",!0).append("rect")});I.clipRect=Be.select("rect").attr({width:F._length,height:L._length}),a.setTranslate(I.plot,F._offset,L._offset),I._hasClipOnAxisFalse?(Ae=null,Fe=Pe):(Ae=Pe,Fe=null),a.setClipUrl(I.plot,Ae,S),I.layerClipId=Fe}function qe(it){return"M"+ne+","+it+"H"+re}function We(it){return"M"+F._offset+","+it+"h"+F._length}function Je(it){return"M"+it+","+ye+"V"+we}function ut(it){return"M"+it+","+L._offset+"v"+L._length}function Ge(it,ht,Tt){if(!it.showline||O!==it._mainSubplot)return"";if(!it._anchorAxis)return Tt(it._mainLinePosition);var Ct=ht(it._mainLinePosition);return it.mirror&&(Ct+=ht(it._mainMirrorPosition)),Ct}for(O in P._plots){L=(I=P._plots[O]).yaxis;var Ke="M0,0";u(F=I.xaxis,O)&&(me=c(F,"left",L,$),ne=F._offset-(me?U+me:0),pe=c(F,"right",L,$),re=F._offset+F._length+(pe?U+pe:0),ce=X(F,L,"bottom"),fe=X(F,L,"top"),!(Ve=!F._anchorAxis||O!==F._mainSubplot)||"allticks"!==F.mirror&&"all"!==F.mirror||(F._linepositions[O]=[ce,fe]),Ke=Ge(F,qe,We),Ve&&F.showline&&("all"===F.mirror||"allticks"===F.mirror)&&(Ke+=qe(ce)+qe(fe)),I.xlines.style("stroke-width",F._lw+"px").call(o.stroke,F.showline?F.linecolor:"rgba(0,0,0,0)")),I.xlines.attr("d",Ke);var nt="M0,0";u(L,O)&&(Oe=c(L,"bottom",F,$),we=L._offset+L._length+(Oe?U:0),Re=c(L,"top",F,$),ye=L._offset-(Re?U:0),Te=X(L,F,"left"),Le=X(L,F,"right"),!(Ve=!L._anchorAxis||O!==L._mainSubplot)||"allticks"!==L.mirror&&"all"!==L.mirror||(L._linepositions[O]=[Te,Le]),nt=Ge(L,Je,ut),Ve&&L.showline&&("all"===L.mirror||"allticks"===L.mirror)&&(nt+=Je(Te)+Je(Le)),I.ylines.style("stroke-width",L._lw+"px").call(o.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),I.ylines.attr("d",nt)}return v.makeClipPaths(S),T.previousPromises(S)}function u(S,C){return(S.ticks||S.showline)&&(C===S._mainSubplot||"all"===S.mirror||"allticks"===S.mirror)}function w(S,C,O){if(!O.showline||!O._lw)return!1;if("all"===O.mirror||"allticks"===O.mirror)return!0;var I=O._anchorAxis;if(!I)return!1;var N=h.FROM_BL[C];return O.side===C?I.domain[N]===S.domain[N]:O.mirror&&I.domain[1-N]===S.domain[1-N]}function c(S,C,O,I){if(w(S,C,O))return O._lw;for(var N=0;N<I.length;N++){var F=I[N];if(F._mainAxis===O._mainAxis&&w(S,C,F))return F._lw}return 0}function E(S,C){var O=S.title,I=S._size,N=0;return"paper"===("start"===C?N=O.pad.l:"end"===C&&(N=-O.pad.r),O.xref)?I.l+I.w*O.x+N:S.width*O.x+N}function M(S,C){var O=S.title,I=S._size,N=0;return"0em"!==C&&C?C===h.CAP_SHIFT+"em"&&(N=O.pad.t):N=-O.pad.b,"auto"===O.y?I.t/2:"paper"===O.yref?I.t+I.h-I.h*O.y+N:S.height-S.height*O.y+N}le.layoutStyles=function(S){return _.syncOrAsync([T.doAutoMargin,m],S)},le.drawMainTitle=function(S){var F,L,C=S._fullLayout,O=(L="middle",_.isRightAnchor(F=C.title)?L="end":_.isLeftAnchor(F)&&(L="start"),L),I=function(N){var F=N.title,L="0em";return _.isTopAnchor(F)?L=h.CAP_SHIFT+"em":_.isMiddleAnchor(F)&&(L=h.MID_SHIFT+"em"),L}(C);l.draw(S,"gtitle",{propContainer:C,propName:"title.text",placeholder:C._dfltTitle.plot,attributes:{x:E(C,O),y:M(C,I),"text-anchor":O,dy:I}})},le.doTraceStyle=function(S){var C,O=S.calcdata,I=[];for(C=0;C<O.length;C++){var N=O[C],F=N[0]||{},L=F.trace||{},P=L._module||{},j=P.arraysToCalcdata;j&&j(N,L);var U=P.editStyle;U&&I.push({fn:U,cd0:F})}if(I.length){for(C=0;C<I.length;C++){var $=I[C];$.fn(S,$.cd0)}e(S),le.redrawReglTraces(S)}return T.style(S),b.getComponentMethod("legend","draw")(S),T.previousPromises(S)},le.doColorBars=function(S){return b.getComponentMethod("colorbar","draw")(S),T.previousPromises(S)},le.layoutReplot=function(S){var C=S.layout;return S.layout=void 0,b.call("_doPlot",S,"",C)},le.doLegend=function(S){return b.getComponentMethod("legend","draw")(S),T.previousPromises(S)},le.doTicksRelayout=function(S){return v.draw(S,"redraw"),S._fullLayout._hasOnlyLargeSploms&&(b.subplotsRegistry.splom.updateGrid(S),e(S),le.redrawReglTraces(S)),le.drawMainTitle(S),T.previousPromises(S)},le.doModeBar=function(S){var C=S._fullLayout;i.manage(S);for(var O=0;O<C._basePlotModules.length;O++){var I=C._basePlotModules[O].updateFx;I&&I(S)}return T.previousPromises(S)},le.doCamera=function(S){for(var C=S._fullLayout,O=C._subplots.gl3d,I=0;I<O.length;I++){var N=C[O[I]];N._scene.setViewport(N)}},le.drawData=function(S){var C=S._fullLayout;e(S);for(var O=C._basePlotModules,I=0;I<O.length;I++)O[I].plot(S);return le.redrawReglTraces(S),T.style(S),b.getComponentMethod("shapes","draw")(S),b.getComponentMethod("annotations","draw")(S),b.getComponentMethod("images","draw")(S),C._replotting=!1,T.previousPromises(S)},le.redrawReglTraces=function(S){var C=S._fullLayout;if(C._has("regl")){var O,I,N=S._fullData,F=[],L=[];for(C._hasOnlyLargeSploms&&C._splomGrid.draw(),O=0;O<N.length;O++){var P=N[O];!0===P.visible&&0!==P._length&&("splom"===P.type?C._splomScenes[P.uid].draw():"scattergl"===P.type?_.pushUnique(F,P.xaxis+P.yaxis):"scatterpolargl"===P.type&&_.pushUnique(L,P.subplot))}for(O=0;O<F.length;O++)(I=C._plots[F[O]])._scene&&I._scene.draw();for(O=0;O<L.length;O++)(I=C[L[O]]._subplot)._scene&&I._scene.draw()}},le.doAutoRangeAndConstraints=function(S){for(var C,O=v.list(S,"",!0),I={},N=0;N<O.length;N++)if(!I[(C=O[N])._id]){I[C._id]=1,p(S,C),f(S,C);var F=C._matchGroup;if(F)for(var L in F){var P=v.getFromId(S,L);f(S,P,C.range),I[L]=1}}d(S)},le.finalDraw=function(S){b.getComponentMethod("rangeslider","draw")(S),b.getComponentMethod("rangeselector","draw")(S)},le.drawMarginPushers=function(S){b.getComponentMethod("legend","draw")(S),b.getComponentMethod("rangeselector","draw")(S),b.getComponentMethod("sliders","draw")(S),b.getComponentMethod("updatemenus","draw")(S),b.getComponentMethod("colorbar","draw")(S)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(x,ue,le){"use strict";var y=x("../lib"),b=y.isPlainObject,T=x("./plot_schema"),_=x("../plots/plots"),e=x("../plots/attributes"),o=x("./plot_template"),a=x("./plot_config").dfltConfig;function l(g,m){g=y.extendDeep({},g);var u,w,c=Object.keys(g).sort();function E(I,N,F){if(b(N)&&b(I))l(I,N);else if(Array.isArray(N)&&Array.isArray(I)){var L=o.arrayTemplater({_template:g},F);for(w=0;w<N.length;w++){var P=N[w],j=L.newItem(P)._template;j&&l(j,P)}var U=L.defaultItems();for(w=0;w<U.length;w++)N.push(U[w]._template);for(w=0;w<N.length;w++)delete N[w].templateitemname}}for(u=0;u<c.length;u++){var M=c[u],S=g[M];if(M in m?E(S,m[M],M):m[M]=S,i(M)===M)for(var C in m){var O=i(C);C===O||O!==M||C in g||E(S,m[C],M)}}}function i(g){return g.replace(/[0-9]+$/,"")}function v(g,m,u,w,c){var E=c&&u(c);for(var M in g){var S=g[M],C=d(g,M,w),O=d(g,M,c),I=u(O);if(!I){var N=i(M);N!==M&&(I=u(O=d(g,N,c)))}if(!(E&&E===I||!I||I._noTemplating||"data_array"===I.valType||I.arrayOk&&Array.isArray(S)))if(!I.valType&&b(S))v(S,m,u,C,O);else if(I._isLinkedToArray&&Array.isArray(S))for(var F=!1,L=0,P={},j=0;j<S.length;j++){var U=S[j];if(b(U)){var $=U.name;if($)P[$]||(v(U,m,u,d(S,L,C),d(S,L,O)),L++,P[$]=1);else if(!F){var X=d(g,o.arrayDefaultKey(M),w),te=d(S,L,C);v(U,m,u,te,d(S,L,O));var ae=y.nestedProperty(m,te);y.nestedProperty(m,X).set(ae.get()),ae.set(null),F=!0}}}else y.nestedProperty(m,C).set(S)}}function h(g,m){return T.getLayoutValObject(g,y.nestedProperty({},m).parts)}function s(g,m){return T.getTraceValObject(g,y.nestedProperty({},m).parts)}function d(g,m,u){return u?Array.isArray(g)?u+"["+m+"]":u+"."+m:m}function p(g){for(var m=0;m<g.length;m++)if(b(g[m]))return!0}function f(g){var m;switch(g.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":m=g.path?"There are no templates for item "+g.path+" with name "+g.templateitemname:"There are no templates for trace "+g.index+", of type "+g.traceType+".";break;case"unused":m=g.path?"The template item at "+g.path+" was not used in constructing the plot.":g.dataCount?"Some of the templates of type "+g.traceType+" were not used. The template has "+g.templateCount+" traces, the data only has "+g.dataCount+" of this type.":"The template has "+g.templateCount+" traces of type "+g.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+g.traceType+" were used more than once. The template has "+g.templateCount+" traces, the data has "+g.dataCount+" of this type."}return g.msg=m,g}le.makeTemplate=function(g){g=y.isPlainObject(g)?g:y.getGraphDiv(g),g=y.extendDeep({_context:a},{data:g.data,layout:g.layout}),_.supplyDefaults(g);var m=g.data||[],u=g.layout||{};u._basePlotModules=g._fullLayout._basePlotModules,u._modules=g._fullLayout._modules;var w={data:{},layout:{}};m.forEach(function(L){var P={};v(L,P,s.bind(null,L));var j=y.coerce(L,{},e,"type"),U=w.data[j];U||(U=w.data[j]=[]),U.push(P)}),v(u,w.layout,h.bind(null,u)),delete w.layout.template;var c=u.template;if(b(c)){var E,M,S,C,O,I,N=c.layout;b(N)&&l(N,w.layout);var F=c.data;if(b(F)){for(M in w.data)if(S=F[M],Array.isArray(S)){for(I=(O=w.data[M]).length,C=S.length,E=0;E<I;E++)l(S[E%C],O[E]);for(E=I;E<C;E++)O.push(y.extendDeep({},S[E]))}for(M in F)M in w.data||(w.data[M]=y.extendDeep([],F[M]))}}return w},le.validateTemplate=function(g,m){var u=y.extendDeep({},{_context:a,data:g.data,layout:g.layout}),w=u.layout||{};b(m)||(m=w.template||{});var c=m.layout,E=m.data,M=[];u.layout=w,u.layout.template=m,_.supplyDefaults(u);var S=u._fullLayout,C=u._fullData,O={};if(b(c)?(function U($,X){for(var te in $)if("_"!==te.charAt(0)&&b($[te])){var ae,J=i(te),ee=[];for(ae=0;ae<X.length;ae++)ee.push(d($,te,X[ae])),J!==te&&ee.push(d($,J,X[ae]));for(ae=0;ae<ee.length;ae++)O[ee[ae]]=1;U($[te],ee)}}(S,["layout"]),function U($,X){for(var te in $)if(-1===te.indexOf("defaults")&&b($[te])){var ae=d($,te,X);O[ae]?U($[te],ae):M.push({code:"unused",path:ae})}}(c,"layout")):M.push({code:"layout"}),b(E)){for(var I,N={},F=0;F<C.length;F++){var L=C[F];N[I=L.type]=(N[I]||0)+1,L._fullInput._template||M.push({code:"missing",index:L._fullInput.index,traceType:I})}for(I in E){var P=E[I].length,j=N[I]||0;P>j?M.push({code:"unused",traceType:I,templateCount:P,dataCount:j}):j>P&&M.push({code:"reused",traceType:I,templateCount:P,dataCount:j})}}else M.push({code:"data"});if(function U($,X){for(var te in $)if("_"!==te.charAt(0)){var ae=$[te],J=d($,te,X);b(ae)?(Array.isArray($)&&!1===ae._template&&ae.templateitemname&&M.push({code:"missing",path:J,templateitemname:ae.templateitemname}),U(ae,J)):Array.isArray(ae)&&p(ae)&&U(ae,J)}}({data:C,layout:S},""),M.length)return M.map(f)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("./plot_api"),T=x("../plots/plots"),_=x("../lib"),e=x("../snapshot/helpers"),o=x("../snapshot/tosvg"),a=x("../snapshot/svgtoimg"),l=x("../version").version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ue.exports=function(v,h){var s,d,p,f;function g(j){return!(j in h)||_.validate(h[j],i[j])}if(h=h||{},_.isPlainObject(v)?(s=v.data||[],d=v.layout||{},p=v.config||{},f={}):(v=_.getGraphDiv(v),s=_.extendDeep([],v.data),d=_.extendDeep({},v.layout),p=v._context,f=v._fullLayout||{}),!g("width")&&null!==h.width||!g("height")&&null!==h.height)throw new Error("Height and width should be pixel values.");if(!g("format"))throw new Error("Export format is not "+_.join2(i.format.values,", "," or ")+".");var m={};function u(j,U){return _.coerce(h,m,i,j,U)}var w=u("format"),c=u("width"),E=u("height"),M=u("scale"),S=u("setBackground"),C=u("imageDataOnly"),O=document.createElement("div");O.style.position="absolute",O.style.left="-5000px",document.body.appendChild(O);var I=_.extendFlat({},d);c?I.width=c:null===h.width&&y(f.width)&&(I.width=f.width),E?I.height=E:null===h.height&&y(f.height)&&(I.height=f.height);var N=_.extendFlat({},p,{_exportedPlot:!0,staticPlot:!0,setBackground:S}),F=e.getRedrawFunc(O);function L(){return new Promise(function(j){setTimeout(j,e.getDelay(O._fullLayout))})}function P(){return new Promise(function(j,U){var $=o(O,w,M),X=O._fullLayout.width,te=O._fullLayout.height;function ae(){b.purge(O),document.body.removeChild(O)}if("full-json"===w){var J=T.graphJson(O,!1,"keepdata","object",!0,!0);return J.version=l,J=JSON.stringify(J),ae(),j(C?J:e.encodeJSON(J))}if(ae(),"svg"===w)return j(C?$:e.encodeSVG($));var ee=document.createElement("canvas");ee.id=_.randstr(),a({format:w,width:X,height:te,scale:M,canvas:ee,svg:$,promise:!0}).then(j).catch(U)})}return new Promise(function(j,U){b.newPlot(O,s,I,N).then(F).then(L).then(P).then(function($){var X;j((X=$,C?X.replace(e.IMAGE_URL_PREFIX,""):X))}).catch(function($){U($)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1123,"./plot_api":540,"fast-isnumeric":190}],547:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("../plots/plots"),T=x("./plot_schema"),_=x("./plot_config").dfltConfig,e=y.isPlainObject,o=Array.isArray,a=y.isArrayOrTypedArray;function l(m,u,w,c,E,M){M=M||[];for(var S=Object.keys(m),C=0;C<S.length;C++){var O=S[C];if("transforms"!==O){var I=M.slice();I.push(O);var N=m[O],F=u[O],L=p(w,O),P=(L||{}).valType,j="info_array"===P,U="colorscale"===P,$=(L||{}).items;if(d(w,O))if(e(N)&&e(F)&&"any"!==P)l(N,F,L,c,E,I);else if(j&&o(N)){N.length>F.length&&c.push(s("unused",E,I.concat(F.length)));var X,te,J,ee,se=F.length,G=Array.isArray($);if(G&&(se=Math.min(se,$.length)),2===L.dimensions)for(te=0;te<se;te++)if(o(N[te])){N[te].length>F[te].length&&c.push(s("unused",E,I.concat(te,F[te].length)));var H=F[te].length;for(X=0;X<(G?Math.min(H,$[te].length):H);X++)ee=F[te][X],y.validate(J=N[te][X],G?$[te][X]:$)?ee!==J&&ee!==+J&&c.push(s("dynamic",E,I.concat(te,X),J,ee)):c.push(s("value",E,I.concat(te,X),J))}else c.push(s("array",E,I.concat(te),N[te]));else for(te=0;te<se;te++)ee=F[te],y.validate(J=N[te],G?$[te]:$)?ee!==J&&ee!==+J&&c.push(s("dynamic",E,I.concat(te),J,ee)):c.push(s("value",E,I.concat(te),J))}else if(L.items&&!j&&o(N)){var Y,oe,W=$[Object.keys($)[0]],ne=[];for(Y=0;Y<F.length;Y++){var re=F[Y]._index||Y;if((oe=I.slice()).push(re),e(N[re])&&e(F[Y])){ne.push(re);var ce=N[re],fe=F[Y];e(ce)&&!1!==ce.visible&&!1===fe.visible?c.push(s("invisible",E,oe)):l(ce,fe,W,c,E,oe)}}for(Y=0;Y<N.length;Y++)(oe=I.slice()).push(Y),e(N[Y])?-1===ne.indexOf(Y)&&c.push(s("unused",E,oe)):c.push(s("object",E,oe,N[Y]))}else!e(N)&&e(F)?c.push(s("object",E,I,N)):a(N)||!a(F)||j||U?O in u?y.validate(N,L)?"enumerated"===L.valType&&(L.coerceNumber&&N!==+F||N!==F)&&c.push(s("dynamic",E,I,N,F)):c.push(s("value",E,I,N)):c.push(s("unused",E,I,N)):c.push(s("array",E,I,N));else c.push(s("schema",E,I))}}return c}function i(m,u){for(var w=m.layout.layoutAttributes,c=0;c<u.length;c++){var E=u[c],M=m.traces[E.type],S=M.layoutAttributes;S&&y.extendFlat(E.subplot?w[M.attributes.subplot.dflt]:w,S)}return w}ue.exports=function(m,u){void 0===m&&(m=[]),void 0===u&&(u={});var w,c,E=T.get(),M=[],S={_context:y.extendFlat({},_)};o(m)?(S.data=y.extendDeep([],m),w=m):(S.data=[],w=[],M.push(s("array","data"))),e(u)?(S.layout=y.extendDeep({},u),c=u):(S.layout={},c={},arguments.length>1&&M.push(s("object","layout"))),b.supplyDefaults(S);for(var C=S._fullData,O=w.length,I=0;I<O;I++){var N=w[I],F=["data",I];if(e(N)){var L=C[I],P=L.type,j=E.traces[P].attributes;j.type={valType:"enumerated",values:[P]},!1===L.visible&&!1!==N.visible&&M.push(s("invisible",F)),l(N,L,j,M,F);var U=N.transforms,$=L.transforms;if(U){o(U)||M.push(s("array",F,["transforms"])),F.push("transforms");for(var X=0;X<U.length;X++){var te=["transforms",X],ae=U[X].type;if(e(U[X])){var J=E.transforms[ae]?E.transforms[ae].attributes:{};J.type={valType:"enumerated",values:Object.keys(E.transforms)},l(U[X],$[X],J,M,F,te)}else M.push(s("object",F,te))}}}else M.push(s("object",F))}return l(c,S._fullLayout,i(E,C),M,"layout"),0===M.length?void 0:M};var v={object:function(m,u){return("layout"===m&&""===u?"The layout argument":"data"===m[0]&&""===u?"Trace "+m[1]+" in the data argument":h(m)+"key "+u)+" must be linked to an object container"},array:function(m,u){return("data"===m?"The data argument":h(m)+"key "+u)+" must be linked to an array container"},schema:function(m,u){return h(m)+"key "+u+" is not part of the schema"},unused:function(m,u,w){var c=e(w)?"container":"key";return h(m)+c+" "+u+" did not get coerced"},dynamic:function(m,u,w,c){return[h(m)+"key",u,"(set to '"+w+"')","got reset to","'"+c+"'","during defaults."].join(" ")},invisible:function(m,u){return(u?h(m)+"item "+u:"Trace "+m[1])+" got defaulted to be not visible"},value:function(m,u,w){return[h(m)+"key "+u,"is set to an invalid value ("+w+")"].join(" ")}};function h(m){return o(m)?"In data trace "+m[1]+", ":"In "+m+", "}function s(m,u,w,c,E){var M,S;w=w||"",o(u)?(M=u[0],S=u[1]):(M=u,S=null);var C=function(I){if(!o(I))return String(I);for(var N="",F=0;F<I.length;F++){var L=I[F];"number"==typeof L?N=N.substr(0,N.length-1)+"["+L+"]":N+=L,F<I.length-1&&(N+=".")}return N}(w),O=v[m](u,C,c,E);return y.log(O),{code:m,container:M,trace:S,path:w,astr:C,msg:O}}function d(m,u){var w=g(u),c=w.keyMinusId;return!!(c in m&&m[c]._isSubplotObj&&w.id)||u in m}function p(m,u){return u in m?m[u]:m[g(u).keyMinusId]}var f=y.counterRegex("([a-z]+)");function g(m){var u=m.match(f);return{keyMinusId:u&&u[1],id:u&&u[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(x,ue,le){"use strict";ue.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("../plot_api/plot_template");ue.exports=function(T,_,e){var o,a,l=e.name,i=e.inclusionAttr||"visible",v=_[l],h=y.isArrayOrTypedArray(T[l])?T[l]:[],s=_[l]=[],d=b.arrayTemplater(_,l,i);for(o=0;o<h.length;o++){var p=h[o];y.isPlainObject(p)?a=d.newItem(p):(a=d.newItem({}))[i]=!1,a._index=o,!1!==a[i]&&e.handleItemDefaults(p,a,_,e),s.push(a)}var f=d.defaultItems();for(o=0;o<f.length;o++)(a=f[o])._index=s.length,e.handleItemDefaults({},a,_,e,{}),s.push(a);if(y.isArrayOrTypedArray(v)){var g=Math.min(v.length,s.length);for(o=0;o<g;o++)y.relinkPrivateKeys(s[o],v[o])}return s}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(x,ue,le){"use strict";var y=x("./font_attributes"),b=x("../components/fx/attributes");ue.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:y({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=b.dateTime2ms,_=b.incrementMonth,e=x("../../constants/numerical").ONEAVGMONTH;ue.exports=function(o,a,l,i){if("date"!==a.type)return{vals:i};var v=o[l+"periodalignment"];if(!v)return{vals:i};var h,s=o[l+"period"];if(y(s)){if((s=+s)<=0)return{vals:i}}else if("string"==typeof s&&"M"===s.charAt(0)){var d=+s.substring(1);if(!(d>0&&Math.round(d)===d))return{vals:i};h=d}for(var p=a.calendar,f="start"===v,g="end"===v,u=T(o[l+"period0"],p)||0,w=[],c=[],E=[],M=i.length,S=0;S<M;S++){var C,O,I,N=i[S];if(h){for(C=Math.round((N-u)/(h*e)),I=_(u,h*C,p);I>N;)I=_(I,-h,p);for(;I<=N;)I=_(I,h,p);O=_(I,-h,p)}else{for(I=u+(C=Math.round((N-u)/s))*s;I>N;)I-=s;for(;I<=N;)I+=s;O=I-s}w[S]=f?O:g?I:(O+I)/2,c[S]=O,E[S]=I}return{vals:w,starts:c,ends:E}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(x,ue,le){"use strict";ue.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=x("../../lib"),_=x("../../constants/numerical").FP_SAFE,e=x("../../registry"),o=x("../../components/drawing"),a=x("./axis_ids"),l=a.getFromId,i=a.isLinked;function v(c,E){var M,S,C=[],O=c._fullLayout,I=s(O,E,0),N=s(O,E,1),F=d(c,E),L=F.min,P=F.max;if(0===L.length||0===P.length)return T.simpleMap(E.range,E.r2l);var j=L[0].val,U=P[0].val;for(M=1;M<L.length&&j===U;M++)j=Math.min(j,L[M].val);for(M=1;M<P.length&&j===U;M++)U=Math.max(U,P[M].val);var $=!1;if(E.range){var X=T.simpleMap(E.range,E.r2l);$=X[1]<X[0]}"reversed"===E.autorange&&($=!0,E.autorange=!0);var te,ae,J,ee,se,G,H=E.rangemode,Y="tozero"===H,oe="nonnegative"===H,W=E._length,ne=W/10,re=0;for(M=0;M<L.length;M++)for(te=L[M],S=0;S<P.length;S++)(G=(ae=P[S]).val-te.val-h(E,te.val,ae.val))>0&&((se=W-I(te)-N(ae))>ne?G/se>re&&(J=te,ee=ae,re=G/se):G/W>re&&(J={val:te.val,nopad:1},ee={val:ae.val,nopad:1},re=G/W));if(j===U){var ce=j-1,fe=j+1;if(Y)if(0===j)C=[0,1];else{var me=(j>0?P:L).reduce(function(we,ye){return Math.max(we,N(ye))},0),pe=j/(1-Math.min(.5,me/W));C=j>0?[0,pe]:[pe,0]}else C=oe?[Math.max(0,ce),Math.max(1,fe)]:[ce,fe]}else Y?(J.val>=0&&(J={val:0,nopad:1}),ee.val<=0&&(ee={val:0,nopad:1})):oe&&(J.val-re*I(J)<0&&(J={val:0,nopad:1}),ee.val<=0&&(ee={val:1,nopad:1})),re=(ee.val-J.val-h(E,te.val,ae.val))/(W-I(J)-N(ee)),C=[J.val-re*I(J),ee.val+re*N(ee)];return $&&C.reverse(),T.simpleMap(C,E.l2r||Number)}function h(c,E,M){var S=0;if(c.rangebreaks)for(var C=c.locateBreaks(E,M),O=0;O<C.length;O++){var I=C[O];S+=I.max-I.min}return S}function s(c,E,M){var S=.05*E._length,C=E._anchorAxis||{};if(-1!==(E.ticklabelposition||"").indexOf("inside")||-1!==(C.ticklabelposition||"").indexOf("inside")){var O="reversed"===E.autorange;if(!O){var I=T.simpleMap(E.range,E.r2l);O=I[1]<I[0]}O&&(M=!M)}var N=0;return i(c,E._id)||(N=function(F,L,P){var j=0,U="x"===L._id.charAt(0);for(var $ in F._plots){var X=F._plots[$];if(L._id===X.xaxis._id||L._id===X.yaxis._id){var te=(U?X.yaxis:X.xaxis)||{};if(-1!==(te.ticklabelposition||"").indexOf("inside")&&(!P&&("left"===te.side||"bottom"===te.side)||P&&("top"===te.side||"right"===te.side))){if(te._vals){var ae=T.deg2rad(te._tickAngles[te._id+"tick"]||0),J=Math.abs(Math.cos(ae)),ee=Math.abs(Math.sin(ae));te._vals[0].bb||te._selections[te._id+"tick"].each(function(W){var ne=y.select(this);ne.select(".text-math-group").empty()&&(W.bb=o.bBox(ne.node()))});for(var G=0;G<te._vals.length;G++){var H=te._vals[G].bb;if(H){var Y=6+H.width,oe=6+H.height;j=Math.max(j,U?Math.max(Y*J,oe*ee):Math.max(oe*J,Y*ee))}}}"inside"===te.ticks&&"inside"===te.ticklabelposition&&(j+=te.ticklen||0)}}}return j}(c,E,M)),S=Math.max(N,S),"domain"===E.constrain&&E._inputDomain&&(S*=(E._inputDomain[1]-E._inputDomain[0])/(E.domain[1]-E.domain[0])),function(F){return F.nopad?0:F.pad+(F.extrapad?S:N)}}function d(c,E,M){var S,C,O,I=E._id,F=c._fullLayout,L=[],P=[];function j(ae,J){for(S=0;S<J.length;S++){var ee=ae[J[S]],se=(ee._extremes||{})[I];if(!0===ee.visible&&se){for(C=0;C<se.min.length;C++)p(L,(O=se.min[C]).val,O.pad,{extrapad:O.extrapad});for(C=0;C<se.max.length;C++)f(P,(O=se.max[C]).val,O.pad,{extrapad:O.extrapad})}}}if(j(c._fullData,E._traceIndices),j(F.annotations||[],E._annIndices||[]),j(F.shapes||[],E._shapeIndices||[]),E._matchGroup&&!M)for(var U in E._matchGroup)if(U!==E._id){var $=l(c,U),X=d(c,$,!0),te=E._length/$._length;for(C=0;C<X.min.length;C++)p(L,(O=X.min[C]).val,O.pad*te,{extrapad:O.extrapad});for(C=0;C<X.max.length;C++)f(P,(O=X.max[C]).val,O.pad*te,{extrapad:O.extrapad})}return{min:L,max:P}}function p(c,E,M,S){g(c,E,M,S,u)}function f(c,E,M,S){g(c,E,M,S,w)}function g(c,E,M,S,C){for(var O=S.tozero,I=S.extrapad,N=!0,F=0;F<c.length&&N;F++){var L=c[F];if(C(L.val,E)&&L.pad>=M&&(L.extrapad||!I)){N=!1;break}C(E,L.val)&&L.pad<=M&&(I||!L.extrapad)&&(c.splice(F,1),F--)}if(N){var P=O&&0===E;c.push({val:E,pad:P?0:M,extrapad:!P&&I})}}function m(c){return b(c)&&Math.abs(c)<_}function u(c,E){return c<=E}function w(c,E){return c>=E}ue.exports={getAutoRange:v,makePadFn:s,doAutoRange:function(c,E,M){if(E.setScale(),E.autorange){E.range=M?M.slice():v(c,E),E._r=E.range.slice(),E._rl=T.simpleMap(E._r,E.r2l);var S=E._input,C={};C[E._attr+".range"]=E.range,C[E._attr+".autorange"]=E.autorange,e.call("_storeDirectGUIEdit",c.layout,c._fullLayout._preGUI,C),S.range=E.range.slice(),S.autorange=E.autorange}var O=E._anchorAxis;if(O&&O.rangeslider){var I=O.rangeslider[E._name];I&&"auto"===I.rangemode&&(I.range=v(c,E)),O._input.rangeslider[E._name]=T.extendFlat({},I)}},findExtremes:function(c,E,M){M||(M={}),c._m||c.setScale();var S,C,O,I,N,F,L,P,j,U=[],$=[],X=E.length,te=M.padded||!1,ae=M.tozero&&("linear"===c.type||"-"===c.type),J="log"===c.type,ee=!1,se=M.vpadLinearized||!1;function G(fe){if(Array.isArray(fe))return ee=!0,function(pe){return Math.max(Number(fe[pe]||0),0)};var me=Math.max(Number(fe||0),0);return function(){return me}}var H=G((c._m>0?M.ppadplus:M.ppadminus)||M.ppad||0),Y=G((c._m>0?M.ppadminus:M.ppadplus)||M.ppad||0),oe=G(M.vpadplus||M.vpad),W=G(M.vpadminus||M.vpad);if(!ee){if(P=1/0,j=-1/0,J)for(S=0;S<X;S++)(C=E[S])<P&&C>0&&(P=C),C>j&&C<_&&(j=C);else for(S=0;S<X;S++)(C=E[S])<P&&C>-_&&(P=C),C>j&&C<_&&(j=C);E=[P,j],X=2}var ne={tozero:ae,extrapad:te};function re(fe){b(O=E[fe])&&(F=H(fe),L=Y(fe),se?(I=c.c2l(O)-W(fe),N=c.c2l(O)+oe(fe)):(P=O-W(fe),j=O+oe(fe),J&&P<j/10&&(P=j/10),I=c.c2l(P),N=c.c2l(j)),ae&&(I=Math.min(0,I),N=Math.max(0,N)),m(I)&&p(U,I,L,ne),m(N)&&f($,N,F,ne))}var ce=Math.min(6,X);for(S=0;S<ce;S++)re(S);for(S=X-1;S>=ce;S--)re(S);return{min:U,max:$,opts:M}},concatExtremes:d}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=x("../../plots/plots"),_=x("../../registry"),e=x("../../lib"),o=e.strTranslate,a=x("../../lib/svg_text_utils"),l=x("../../components/titles"),i=x("../../components/color"),v=x("../../components/drawing"),h=x("./layout_attributes"),s=x("./clean_ticks"),d=x("../../constants/numerical"),p=d.ONEMAXYEAR,f=d.ONEAVGYEAR,g=d.ONEMINYEAR,m=d.ONEMAXQUARTER,u=d.ONEAVGQUARTER,w=d.ONEMINQUARTER,c=d.ONEMAXMONTH,E=d.ONEAVGMONTH,M=d.ONEMINMONTH,S=d.ONEWEEK,C=d.ONEDAY,O=C/2,I=d.ONEHOUR,N=d.ONEMIN,F=d.ONESEC,L=d.MINUS_SIGN,P=d.BADNUM,j={K:"zeroline"},U={K:"gridline",L:"path"},$={K:"minor-gridline",L:"path"},X={K:"tick",L:"path"},te={K:"tick",L:"text"},ae=x("../../constants/alignment"),J=ae.MID_SHIFT,ee=ae.CAP_SHIFT,se=ae.LINE_SPACING,G=ae.OPPOSITE_SIDE,H=ue.exports={};H.setConvert=x("./set_convert");var Y=x("./axis_autotype"),oe=x("./axis_ids"),W=oe.idSort,ne=oe.isLinked;H.id2name=oe.id2name,H.name2id=oe.name2id,H.cleanId=oe.cleanId,H.list=oe.list,H.listIds=oe.listIds,H.getFromId=oe.getFromId,H.getFromTrace=oe.getFromTrace;var re=x("./autorange");function ce(Ee){var De=1e-4*(Ee[1]-Ee[0]);return[Ee[0]-De,Ee[1]+De]}H.getAutoRange=re.getAutoRange,H.findExtremes=re.findExtremes,H.coerceRef=function(Ee,De,Ie,He,Ye,tt){var ot=He.charAt(He.length-1),st=Ie._fullLayout._subplots[ot+"axis"],bt=He+"ref",wt={};return Ye||(Ye=st[0]||("string"==typeof tt?tt:tt[0])),tt||(tt=Ye),st=st.concat(st.map(function(Ut){return Ut+" domain"})),wt[bt]={valType:"enumerated",values:st.concat(tt?"string"==typeof tt?[tt]:tt:[]),dflt:Ye},e.coerce(Ee,De,wt,bt)},H.getRefType=function(Ee){return void 0===Ee?Ee:"paper"===Ee?"paper":"pixel"===Ee?"pixel":/( domain)$/.test(Ee)?"domain":"range"},H.coercePosition=function(Ee,De,Ie,He,Ye,tt){var ot,st;if("range"!==H.getRefType(He))ot=e.ensureNumber,st=Ie(Ye,tt);else{var bt=H.getFromId(De,He);st=Ie(Ye,tt=bt.fraction2r(tt)),ot=bt.cleanPos}Ee[Ye]=ot(st)},H.cleanPosition=function(Ee,De,Ie){return("paper"===Ie||"pixel"===Ie?e.ensureNumber:H.getFromId(De,Ie).cleanPos)(Ee)},H.redrawComponents=function(Ee,De){De=De||H.listIds(Ee);var Ie=Ee._fullLayout;function He(Ye,tt,ot,st){for(var bt=_.getComponentMethod(Ye,tt),wt={},Ut=0;Ut<De.length;Ut++)for(var Kt=Ie[H.id2name(De[Ut])][ot],vt=0;vt<Kt.length;vt++){var Et=Kt[vt];if(!wt[Et]&&(bt(Ee,Et),wt[Et]=1,st))return}}He("annotations","drawOne","_annIndices"),He("shapes","drawOne","_shapeIndices"),He("images","draw","_imgIndices",!0)};var fe=H.getDataConversions=function(Ee,De,Ie,He){var Ye,tt="x"===Ie||"y"===Ie||"z"===Ie?Ie:He;if(Array.isArray(tt)){if(Ye={type:Y(He,void 0,{autotypenumbers:Ee._fullLayout.autotypenumbers}),_categories:[]},H.setConvert(Ye),"category"===Ye.type)for(var ot=0;ot<He.length;ot++)Ye.d2c(He[ot])}else Ye=H.getFromTrace(Ee,De,tt);return Ye?{d2c:Ye.d2c,c2d:Ye.c2d}:"ids"===tt?{d2c:pe,c2d:pe}:{d2c:me,c2d:me}};function me(Ee){return+Ee}function pe(Ee){return String(Ee)}function we(Ee,De){return Math.abs((Ee/De+.5)%1-.5)<.001}function ye(Ee,De){return Math.abs(Ee/De-1)<.001}function Te(Ee){return+Ee.substring(1)}function Le(Ee){var De=ce(e.simpleMap(Ee.range,Ee.r2l)),Ie=Math.min(De[0],De[1]),He=Math.max(De[0],De[1]),Ye="category"===Ee.type?Ee.d2l_noadd:Ee.d2l;"log"===Ee.type&&"L"!==String(Ee.dtick).charAt(0)&&(Ee.dtick="L"+Math.pow(10,Math.floor(Math.min(Ee.range[0],Ee.range[1]))-1));for(var tt=[],ot=0;ot<=1;ot++)if(!ot||Ee.minor){var st=ot?Ee.minor.tickvals:Ee.tickvals,bt=ot?[]:Ee.ticktext;if(st){Array.isArray(bt)||(bt=[]);for(var wt=0;wt<st.length;wt++){var Ut=Ye(st[wt]);if(Ut>Ie&&Ut<He){var Kt=void 0===bt[wt]?H.tickText(Ee,Ut):We(Ee,Ut,String(bt[wt]));ot&&(Kt.minor=!0,Kt.text=""),tt.push(Kt)}}}}return Ee.rangebreaks&&(tt=tt.filter(function(vt){return Ee.maskBreaks(vt.x)!==P})),tt}H.getDataToCoordFunc=function(Ee,De,Ie,He){return fe(Ee,De,Ie,He).d2c},H.counterLetter=function(Ee){var De=Ee.charAt(0);return"x"===De?"y":"y"===De?"x":void 0},H.minDtick=function(Ee,De,Ie,He){-1===["log","category","multicategory"].indexOf(Ee.type)&&He?void 0===Ee._minDtick?(Ee._minDtick=De,Ee._forceTick0=Ie):Ee._minDtick&&((Ee._minDtick/De+1e-6)%1<2e-6&&((Ie-Ee._forceTick0)/De%1+1.000001)%1<2e-6?(Ee._minDtick=De,Ee._forceTick0=Ie):((De/Ee._minDtick+1e-6)%1>2e-6||((Ie-Ee._forceTick0)/Ee._minDtick%1+1.000001)%1>2e-6)&&(Ee._minDtick=0)):Ee._minDtick=0},H.saveRangeInitial=function(Ee,De){for(var Ie=H.list(Ee,"",!0),He=!1,Ye=0;Ye<Ie.length;Ye++){var tt=Ie[Ye],ot=void 0===tt._rangeInitial;(ot&&!1===tt.autorange||De&&(ot||tt.range[0]!==tt._rangeInitial[0]||tt.range[1]!==tt._rangeInitial[1]))&&(tt._rangeInitial=tt.range.slice(),He=!0)}return He},H.saveShowSpikeInitial=function(Ee,De){for(var Ie=H.list(Ee,"",!0),He=!1,Ye="on",tt=0;tt<Ie.length;tt++){var ot=Ie[tt],st=void 0===ot._showSpikeInitial;(st||De&&(st||ot.showspikes!==ot._showspikes))&&(ot._showSpikeInitial=ot.showspikes,He=!0),"on"!==Ye||ot.showspikes||(Ye="off")}return Ee._fullLayout._cartesianSpikesEnabled=Ye,He},H.autoBin=function(Ee,De,Ie,He,Ye,tt){var ot,st=e.aggNums(Math.min,null,Ee),bt=e.aggNums(Math.max,null,Ee);if("category"===De.type||"multicategory"===De.type)return{start:st-.5,end:bt+.5,size:Math.max(1,Math.round(tt)||1),_dataSpan:bt-st};if(Ye||(Ye=De.calendar),ot="log"===De.type?{type:"linear",range:[st,bt]}:{type:De.type,range:e.simpleMap([st,bt],De.c2r,0,Ye),calendar:Ye},H.setConvert(ot),tt=tt&&s.dtick(tt,ot.type))ot.dtick=tt,ot.tick0=s.tick0(void 0,ot.type,Ye);else{var wt;if(Ie)wt=(bt-st)/Ie;else{var Ut=e.distinctVals(Ee),Kt=Math.pow(10,Math.floor(Math.log(Ut.minDiff)/Math.LN10)),vt=Kt*e.roundUp(Ut.minDiff/Kt,[.9,1.9,4.9,9.9],!0);wt=Math.max(vt,2*e.stdev(Ee)/Math.pow(Ee.length,He?.25:.4)),b(wt)||(wt=1)}H.autoTicks(ot,wt)}var Et,$t=ot.dtick,Dt=H.tickIncrement(H.tickFirst(ot),$t,"reverse",Ye);if("number"==typeof $t)Et=(Dt=function(Pt,je,rt,pt,It){var jt=0,Qt=0,fn=0,an=0;function Sn(vn){return(1+100*(vn-Pt)/rt.dtick)%100<2}for(var Yn=0;Yn<je.length;Yn++)je[Yn]%1==0?fn++:b(je[Yn])||an++,Sn(je[Yn])&&jt++,Sn(je[Yn]+rt.dtick/2)&&Qt++;var kn=je.length-an;if(fn===kn&&"date"!==rt.type)rt.dtick<1?Pt=pt-.5*rt.dtick:(Pt-=.5)+rt.dtick<pt&&(Pt+=rt.dtick);else if(Qt<.1*kn&&(jt>.3*kn||Sn(pt)||Sn(It))){var cn=rt.dtick/2;Pt+=Pt+cn<pt?cn:-cn}return Pt}(Dt,Ee,ot,st,bt))+(1+Math.floor((bt-Dt)/$t))*$t;else for("M"===ot.dtick.charAt(0)&&(Dt=function(Pt,je,rt,pt,It){var jt=e.findExactDates(je,It);if(jt.exactDays>.8){var Qt=Number(rt.substr(1));jt.exactYears>.8&&Qt%12==0?Pt=H.tickIncrement(Pt,"M6","reverse")+1.5*C:jt.exactMonths>.8?Pt=H.tickIncrement(Pt,"M1","reverse")+15.5*C:Pt-=O;var fn=H.tickIncrement(Pt,rt);if(fn<=pt)return fn}return Pt}(Dt,Ee,$t,st,Ye)),Et=Dt;Et<=bt;)Et=H.tickIncrement(Et,$t,!1,Ye);return{start:De.c2r(Dt,0,Ye),end:De.c2r(Et,0,Ye),size:$t,_dataSpan:bt-st}},H.prepMinorTicks=function(Ee,De,Ie){if(!De.minor.dtick){delete Ee.dtick;var He,Ye=De.dtick&&b(De._tmin);if(Ye){var tt=H.tickIncrement(De._tmin,De.dtick,!0);He=[De._tmin,.99*tt+.01*De._tmin]}else{var ot=e.simpleMap(De.range,De.r2l);He=[ot[0],.8*ot[0]+.2*ot[1]]}if(Ee.range=e.simpleMap(He,De.l2r),Ee._isMinor=!0,H.prepTicks(Ee,Ie),Ye){var st=b(De.dtick),bt=b(Ee.dtick),wt=st?De.dtick:+De.dtick.substring(1),Ut=bt?Ee.dtick:+Ee.dtick.substring(1);st&&bt?we(wt,Ut)?wt===2*S&&Ut===2*C&&(Ee.dtick=S):Ee.dtick=wt===2*S&&Ut===3*C?S:wt!==S||(De._input.minor||{}).nticks?ye(wt/Ut,2.5)?wt/2:wt:C:"M"===String(De.dtick).charAt(0)?bt?Ee.dtick="M1":we(wt,Ut)?wt>=12&&2===Ut&&(Ee.dtick="M3"):Ee.dtick=De.dtick:"L"===String(Ee.dtick).charAt(0)?"L"===String(De.dtick).charAt(0)?we(wt,Ut)||(Ee.dtick=ye(wt/Ut,2.5)?De.dtick/2:De.dtick):Ee.dtick="D1":"D2"===Ee.dtick&&+De.dtick>1&&(Ee.dtick=1)}Ee.range=De.range}void 0===De.minor._tick0Init&&(Ee.tick0=De.tick0)},H.prepTicks=function(Ee,De){var Ie=e.simpleMap(Ee.range,Ee.r2l,void 0,void 0,De);if("auto"===Ee.tickmode||!Ee.dtick){var He,Ye=Ee.nticks;Ye||("category"===Ee.type||"multicategory"===Ee.type?(He=Ee.tickfont?e.bigFont(Ee.tickfont.size||12):15,Ye=Ee._length/He):(He="y"===Ee._id.charAt(0)?40:80,Ye=e.constrain(Ee._length/He,4,9)+1),"radialaxis"===Ee._name&&(Ye*=2)),Ee.minor&&"array"!==Ee.minor.tickmode||"array"===Ee.tickmode&&(Ye*=100),Ee._roughDTick=Math.abs(Ie[1]-Ie[0])/Ye,H.autoTicks(Ee,Ee._roughDTick),Ee._minDtick>0&&Ee.dtick<2*Ee._minDtick&&(Ee.dtick=Ee._minDtick,Ee.tick0=Ee.l2r(Ee._forceTick0))}"period"===Ee.ticklabelmode&&function(tt){var ot;function st(){return!(b(tt.dtick)||"M"!==tt.dtick.charAt(0))}var bt=st(),wt=H.getTickFormat(tt);if(wt){var Ut=tt._dtickInit!==tt.dtick;/%[fLQsSMX]/.test(wt)||(/%[HI]/.test(wt)?(ot=I,Ut&&!bt&&tt.dtick<I&&(tt.dtick=I)):/%p/.test(wt)?(ot=O,Ut&&!bt&&tt.dtick<O&&(tt.dtick=O)):/%[Aadejuwx]/.test(wt)?(ot=C,Ut&&!bt&&tt.dtick<C&&(tt.dtick=C)):/%[UVW]/.test(wt)?(ot=S,Ut&&!bt&&tt.dtick<S&&(tt.dtick=S)):/%[Bbm]/.test(wt)?(ot=E,Ut&&(bt?Te(tt.dtick)<1:tt.dtick<M)&&(tt.dtick="M1")):/%[q]/.test(wt)?(ot=u,Ut&&(bt?Te(tt.dtick)<3:tt.dtick<w)&&(tt.dtick="M3")):/%[Yy]/.test(wt)&&(ot=f,Ut&&(bt?Te(tt.dtick)<12:tt.dtick<g)&&(tt.dtick="M12")))}(bt=st())&&tt.tick0===tt._dowTick0&&(tt.tick0=tt._rawTick0),tt._definedDelta=ot}(Ee),Ee.tick0||(Ee.tick0="date"===Ee.type?"2000-01-01":0),"date"===Ee.type&&Ee.dtick<.1&&(Ee.dtick=.1),qe(Ee)},H.calcTicks=function(Ee,De){for(var Ie,He,Ye=Ee.type,tt=Ee.calendar,ot=Ee.ticklabelstep,st="period"===Ee.ticklabelmode,bt=e.simpleMap(Ee.range,Ee.r2l,void 0,void 0,De),wt=bt[1]<bt[0],Ut=Math.min(bt[0],bt[1]),Kt=Math.max(bt[0],bt[1]),vt=Math.max(1e3,Ee._length||0),Et=[],$t=[],Dt=[],Pt=[],je=Ee.minor&&(Ee.minor.ticks||Ee.minor.showgrid),rt=1;rt>=(je?0:1);rt--){var pt=!rt;rt?(Ee._dtickInit=Ee.dtick,Ee._tick0Init=Ee.tick0):(Ee.minor._dtickInit=Ee.minor.dtick,Ee.minor._tick0Init=Ee.minor.tick0);var It=rt?Ee:e.extendFlat({},Ee,Ee.minor);if(pt?H.prepMinorTicks(It,Ee,De):H.prepTicks(It,De),"array"!==It.tickmode){var jt=ce(bt),Qt=jt[0],fn=jt[1],an=b(It.dtick),Sn="log"===Ye&&!(an||"L"===It.dtick.charAt(0)),Yn=H.tickFirst(It,De);if(rt){if(Ee._tmin=Yn,Yn<Qt!==wt)break;"category"!==Ye&&"multicategory"!==Ye||(fn=wt?Math.max(-.5,fn):Math.min(Ee._categories.length-.5,fn))}var kn,cn,vn=null,hn=Yn;rt&&(an?cn=Ee.dtick:"date"===Ye?"string"==typeof Ee.dtick&&"M"===Ee.dtick.charAt(0)&&(cn=E*Ee.dtick.substring(1)):cn=Ee._roughDTick,kn=Math.round((Ee.r2l(hn)-Ee.r2l(Ee.tick0))/cn)-1);var Dn=It.dtick;for(It.rangebreaks&&It._tick0Init!==It.tick0&&(hn=dn(hn,Ee),wt||(hn=H.tickIncrement(hn,Dn,!wt,tt))),rt&&st&&(hn=H.tickIncrement(hn,Dn,!wt,tt),kn--);wt?hn>=fn:hn<=fn;hn=H.tickIncrement(hn,Dn,wt,tt)){if(rt&&kn++,It.rangebreaks&&!wt){if(hn<Qt)continue;if(It.maskBreaks(hn)===P&&dn(hn,It)>=Kt)break}if(Dt.length>vt||hn===vn)break;vn=hn;var Pn={value:hn};rt?(Sn&&hn!==(0|hn)&&(Pn.simpleLabel=!0),ot>1&&kn%ot&&(Pn.skipLabel=!0),Dt.push(Pn)):(Pn.minor=!0,Pt.push(Pn))}}else rt?(Dt=[],Et=Le(Ee)):(Pt=[],$t=Le(Ee))}if(je&&!("inside"===Ee.minor.ticks&&"outside"===Ee.ticks||"outside"===Ee.minor.ticks&&"inside"===Ee.ticks)){for(var $n=Dt.map(function(oi){return oi.value}),rr=[],er=0;er<Pt.length;er++){var or=Pt[er],Zr=or.value;if(-1===$n.indexOf(Zr)){for(var zr=!1,pr=0;!zr&&pr<Dt.length;pr++)1e7+Dt[pr].value===1e7+Zr&&(zr=!0);zr||rr.push(or)}}Pt=rr}if(st&&function(oi,Or,Dr){for(var wr=0;wr<oi.length;wr++){var gn=oi[wr].value,tr=wr,qt=wr+1;wr<oi.length-1?(tr=wr,qt=wr+1):wr>0?(tr=wr-1,qt=wr):(tr=wr,qt=wr);var _n,Xn=Math.abs(oi[qt].value-oi[tr].value),Hn=Dr||Xn,Bn=0;Hn>=g?Bn=Xn>=g&&Xn<=p?Xn:f:Dr===u&&Hn>=w?Bn=Xn>=w&&Xn<=m?Xn:u:Hn>=M?Bn=Xn>=M&&Xn<=c?Xn:E:Dr===S&&Hn>=S?Bn=S:Hn>=C?Bn=C:Dr===O&&Hn>=O?Bn=O:Dr===I&&Hn>=I&&(Bn=I),Bn>=Xn&&(Bn=Xn,_n=!0);var zn=gn+Bn;if(Or.rangebreaks&&Bn>0){for(var jn=0,Vn=0;Vn<84;Vn++){var On=(Vn+.5)/84;Or.maskBreaks(gn*(1-On)+On*zn)!==P&&jn++}(Bn*=jn/84)||(oi[wr].drop=!0),_n&&Xn>S&&(Bn=Xn)}(Bn>0||0===wr)&&(oi[wr].periodX=gn+Bn/2)}}(Dt,Ee,Ee._definedDelta),Ee.rangebreaks){var Br="y"===Ee._id.charAt(0),fr=1;"auto"===Ee.tickmode&&(fr=Ee.tickfont?Ee.tickfont.size:12);var Nr=NaN;for(Ie=Dt.length-1;Ie>-1;Ie--)if(Dt[Ie].drop)Dt.splice(Ie,1);else{Dt[Ie].value=dn(Dt[Ie].value,Ee);var xi=Ee.c2p(Dt[Ie].value);(Br?Nr>xi-fr:Nr<xi+fr)?Dt.splice(wt?Ie+1:Ie,1):Nr=xi}}pn(Ee)&&360===Math.abs(bt[1]-bt[0])&&Dt.pop(),Ee._tmax=(Dt[Dt.length-1]||{}).value,Ee._prevDateHead="",Ee._inCalcTicks=!0;var Qn,Er,kr=function(oi){oi.text="",Ee._prevDateHead=He};for(Dt=Dt.concat(Pt),Ie=0;Ie<Dt.length;Ie++){var ci=Dt[Ie].value;Dt[Ie].minor?$t.push({x:ci,minor:!0}):(He=Ee._prevDateHead,Qn=H.tickText(Ee,ci,!1,Dt[Ie].simpleLabel),void 0!==(Er=Dt[Ie].periodX)&&(Qn.periodX=Er,(Er>Kt||Er<Ut)&&(Er>Kt&&(Qn.periodX=Kt),Er<Ut&&(Qn.periodX=Ut),kr(Qn))),Dt[Ie].skipLabel&&kr(Qn),Et.push(Qn))}return Et=Et.concat($t),Ee._inCalcTicks=!1,st&&Et.length&&(Et[0].noTick=!0),Et};var Oe=[2,5,10],Re=[1,2,3,6,12],Ve=[1,2,5,10,15,30],_e=[1,2,3,7,14],Ae=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Fe=[-.301,0,.301,.699,1],Pe=[15,30,45,90,180];function Be(Ee,De,Ie){return De*e.roundUp(Ee/De,Ie)}function qe(Ee){var De=Ee.dtick;if(Ee._tickexponent=0,b(De)||"string"==typeof De||(De=1),"category"!==Ee.type&&"multicategory"!==Ee.type||(Ee._tickround=null),"date"===Ee.type){var Ie=Ee.r2l(Ee.tick0),He=Ee.l2r(Ie).replace(/(^-|i)/g,""),Ye=He.length;if("M"===String(De).charAt(0))Ee._tickround=Ye>10||"01-01"!==He.substr(5)?"d":+De.substr(1)%12==0?"y":"m";else if(De>=C&&Ye<=10||De>=15*C)Ee._tickround="d";else if(De>=N&&Ye<=16||De>=I)Ee._tickround="M";else if(De>=F&&Ye<=19||De>=N)Ee._tickround="S";else{var tt=Ee.l2r(Ie+De).replace(/^-/,"").length;Ee._tickround=Math.max(Ye,tt)-20,Ee._tickround<0&&(Ee._tickround=4)}}else if(b(De)||"L"===De.charAt(0)){var ot=Ee.range.map(Ee.r2d||Number);b(De)||(De=Number(De.substr(1))),Ee._tickround=2-Math.floor(Math.log(De)/Math.LN10+.01);var st=Math.max(Math.abs(ot[0]),Math.abs(ot[1])),bt=Math.floor(Math.log(st)/Math.LN10+.01),wt=void 0===Ee.minexponent?3:Ee.minexponent;Math.abs(bt)>wt&&(Ee._tickexponent=ut(Ee.exponentformat)&&!Ge(bt)?3*Math.round((bt-1)/3):bt)}else Ee._tickround=null}function We(Ee,De,Ie){var He=Ee.tickfont||{};return{x:De,dx:0,dy:0,text:Ie||"",fontSize:He.size,font:He.family,fontColor:He.color}}H.autoTicks=function(Ee,De,Ie){var He;function Ye(Kt){return Math.pow(Kt,Math.floor(Math.log(De)/Math.LN10))}if("date"===Ee.type){Ee.tick0=e.dateTick0(Ee.calendar,0);var tt=2*De;if(tt>f)De/=f,He=Ye(10),Ee.dtick="M"+12*Be(De,He,Oe);else if(tt>E)Ee.dtick="M"+Be(De/=E,1,Re);else if(tt>C){if(Ee.dtick=Be(De,C,Ee._hasDayOfWeekBreaks?[1,2,7,14]:_e),!Ie){var ot=H.getTickFormat(Ee),st="period"===Ee.ticklabelmode;st&&(Ee._rawTick0=Ee.tick0),Ee.tick0=/%[uVW]/.test(ot)?e.dateTick0(Ee.calendar,2):e.dateTick0(Ee.calendar,1),st&&(Ee._dowTick0=Ee.tick0)}}else tt>I?Ee.dtick=Be(De,I,Re):tt>N?Ee.dtick=Be(De,N,Ve):tt>F?Ee.dtick=Be(De,F,Ve):(He=Ye(10),Ee.dtick=Be(De,He,Oe))}else if("log"===Ee.type){Ee.tick0=0;var bt=e.simpleMap(Ee.range,Ee.r2l);if(Ee._isMinor&&(De*=1.5),De>.7)Ee.dtick=Math.ceil(De);else if(Math.abs(bt[1]-bt[0])<1){var wt=1.5*Math.abs((bt[1]-bt[0])/De);De=Math.abs(Math.pow(10,bt[1])-Math.pow(10,bt[0]))/wt,He=Ye(10),Ee.dtick="L"+Be(De,He,Oe)}else Ee.dtick=De>.3?"D2":"D1"}else"category"===Ee.type||"multicategory"===Ee.type?(Ee.tick0=0,Ee.dtick=Math.ceil(Math.max(De,1))):pn(Ee)?(Ee.tick0=0,Ee.dtick=Be(De,He=1,Pe)):(Ee.tick0=0,He=Ye(10),Ee.dtick=Be(De,He,Oe));if(0===Ee.dtick&&(Ee.dtick=1),!b(Ee.dtick)&&"string"!=typeof Ee.dtick){var Ut=Ee.dtick;throw Ee.dtick=1,"ax.dtick error: "+String(Ut)}},H.tickIncrement=function(Ee,De,Ie,He){var Ye=Ie?-1:1;if(b(De))return e.increment(Ee,Ye*De);var tt=De.charAt(0),ot=Ye*Number(De.substr(1));if("M"===tt)return e.incrementMonth(Ee,ot,He);if("L"===tt)return Math.log(Math.pow(10,Ee)+ot)/Math.LN10;if("D"===tt){var st="D2"===De?Fe:Ae,bt=Ee+.01*Ye,wt=e.roundUp(e.mod(bt,1),st,Ie);return Math.floor(bt)+Math.log(y.round(Math.pow(10,wt),1))/Math.LN10}throw"unrecognized dtick "+String(De)},H.tickFirst=function(Ee,De){var Ie=Ee.r2l||Number,He=e.simpleMap(Ee.range,Ie,void 0,void 0,De),Ye=He[1]<He[0],tt=Ye?Math.floor:Math.ceil,ot=ce(He)[0],st=Ee.dtick,bt=Ie(Ee.tick0);if(b(st)){var wt=tt((ot-bt)/st)*st+bt;return"category"!==Ee.type&&"multicategory"!==Ee.type||(wt=e.constrain(wt,0,Ee._categories.length-1)),wt}var Ut=st.charAt(0),Kt=Number(st.substr(1));if("M"===Ut){for(var vt,Et,$t,Dt=0,Pt=bt;Dt<10;){if(((vt=H.tickIncrement(Pt,st,Ye,Ee.calendar))-ot)*(Pt-ot)<=0)return Ye?Math.min(Pt,vt):Math.max(Pt,vt);Et=(ot-(Pt+vt)/2)/(vt-Pt),$t=Ut+(Math.abs(Math.round(Et))||1)*Kt,Pt=H.tickIncrement(Pt,$t,Et<0?!Ye:Ye,Ee.calendar),Dt++}return e.error("tickFirst did not converge",Ee),Pt}if("L"===Ut)return Math.log(tt((Math.pow(10,ot)-bt)/Kt)*Kt+bt)/Math.LN10;if("D"===Ut){var je="D2"===st?Fe:Ae,rt=e.roundUp(e.mod(ot,1),je,Ye);return Math.floor(ot)+Math.log(y.round(Math.pow(10,rt),1))/Math.LN10}throw"unrecognized dtick "+String(st)},H.tickText=function(Ee,De,Ie,He){var Ye,tt=We(Ee,De),ot="array"===Ee.tickmode,st=Ie||ot,bt=Ee.type,wt="category"===bt?Ee.d2l_noadd:Ee.d2l;if(ot&&Array.isArray(Ee.ticktext)){var Ut=e.simpleMap(Ee.range,Ee.r2l),Kt=(Math.abs(Ut[1]-Ut[0])-(Ee._lBreaks||0))/1e4;for(Ye=0;Ye<Ee.ticktext.length&&!(Math.abs(De-wt(Ee.tickvals[Ye]))<Kt);Ye++);if(Ye<Ee.ticktext.length)return tt.text=String(Ee.ticktext[Ye]),tt}function vt(Dt){return void 0===Dt||(Ie?"none"===Dt:"all"!==Dt&&De!=={first:Ee._tmin,last:Ee._tmax}[Dt])}var Pt,je,Et=Ie?"never":"none"!==Ee.exponentformat&&vt(Ee.showexponent)?"hide":"";if("date"===bt?function(Dt,Pt,je,rt){var pt=Dt._tickround,It=je&&Dt.hoverformat||H.getTickFormat(Dt);rt&&(pt=b(pt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[pt]);var jt,Qt=e.formatDate(Pt.x,It,pt,Dt._dateFormat,Dt.calendar,Dt._extraFormat),fn=Qt.indexOf("\n");if(-1!==fn&&(jt=Qt.substr(fn+1),Qt=Qt.substr(0,fn)),rt&&("00:00:00"===Qt||"00:00"===Qt?(Qt=jt,jt=""):8===Qt.length&&(Qt=Qt.replace(/:00$/,""))),jt)if(je)"d"===pt?Qt+=", "+jt:Qt=jt+(Qt?", "+Qt:"");else if(Dt._inCalcTicks&&Dt._prevDateHead===jt){var an=Mn(Dt),Sn=Dt._trueSide||Dt.side;(!an&&"top"===Sn||an&&"bottom"===Sn)&&(Qt+="<br> ")}else Dt._prevDateHead=jt,Qt+="<br>"+jt;Pt.text=Qt}(Ee,tt,Ie,st):"log"===bt?function(Dt,Pt,je,rt,pt){var It=Dt.dtick,jt=Pt.x,Qt=Dt.tickformat,fn="string"==typeof It&&It.charAt(0);if("never"===pt&&(pt=""),rt&&"L"!==fn&&(It="L3",fn="L"),Qt||"L"===fn)Pt.text=Ke(Math.pow(10,jt),Dt,pt,rt);else if(b(It)||"D"===fn&&e.mod(jt+.01,1)<.1){var an=Math.round(jt),Sn=Math.abs(an),Yn=Dt.exponentformat;"power"===Yn||ut(Yn)&&Ge(an)?(Pt.text=0===an?1:1===an?"10":"10<sup>"+(an>1?"":L)+Sn+"</sup>",Pt.fontSize*=1.25):("e"===Yn||"E"===Yn)&&Sn>2?Pt.text="1"+Yn+(an>0?"+":L)+Sn:(Pt.text=Ke(Math.pow(10,jt),Dt,"","fakehover"),"D1"===It&&"y"===Dt._id.charAt(0)&&(Pt.dy-=Pt.fontSize/6))}else{if("D"!==fn)throw"unrecognized dtick "+String(It);Pt.text=String(Math.round(Math.pow(10,e.mod(jt,1)))),Pt.fontSize*=.75}if("D1"===Dt.dtick){var kn=String(Pt.text).charAt(0);"0"!==kn&&"1"!==kn||("y"===Dt._id.charAt(0)?Pt.dx-=Pt.fontSize/4:(Pt.dy+=Pt.fontSize/2,Pt.dx+=(Dt.range[1]>Dt.range[0]?1:-1)*Pt.fontSize*(jt<0?.5:.25)))}}(Ee,tt,0,st,Et):"category"===bt?(Pt=tt,void 0===(je=Ee._categories[Math.round(Pt.x)])&&(je=""),Pt.text=String(je)):"multicategory"===bt?function(Dt,Pt,je){var rt=Math.round(Pt.x),pt=Dt._categories[rt]||[],It=void 0===pt[1]?"":String(pt[1]),jt=void 0===pt[0]?"":String(pt[0]);je?Pt.text=jt+" - "+It:(Pt.text=It,Pt.text2=jt)}(Ee,tt,Ie):pn(Ee)?function(Dt,Pt,je,rt,pt){if("radians"!==Dt.thetaunit||je)Pt.text=Ke(Pt.x,Dt,pt,rt);else{var It=Pt.x/180;if(0===It)Pt.text="0";else{var jt=function(fn){function an(cn,vn){return Math.abs(cn-vn)<=1e-6}var Sn=function(cn){for(var vn=1;!an(Math.round(cn*vn)/vn,cn);)vn*=10;return vn}(fn),Yn=fn*Sn,kn=Math.abs(function cn(vn,hn){return an(hn,0)?vn:cn(hn,vn%hn)}(Yn,Sn));return[Math.round(Yn/kn),Math.round(Sn/kn)]}(It);if(jt[1]>=100)Pt.text=Ke(e.deg2rad(Pt.x),Dt,pt,rt);else{var Qt=Pt.x<0;Pt.text=1===jt[1]?1===jt[0]?"\u03c0":jt[0]+"\u03c0":["<sup>",jt[0],"</sup>","\u2044","<sub>",jt[1],"</sub>","\u03c0"].join(""),Qt&&(Pt.text=L+Pt.text)}}}}(Ee,tt,Ie,st,Et):function(Dt,Pt,je,rt,pt){"never"===pt?pt="":"all"===Dt.showexponent&&Math.abs(Pt.x/Dt.dtick)<1e-6&&(pt="hide"),Pt.text=Ke(Pt.x,Dt,pt,rt)}(Ee,tt,0,st,Et),He||(Ee.tickprefix&&!vt(Ee.showtickprefix)&&(tt.text=Ee.tickprefix+tt.text),Ee.ticksuffix&&!vt(Ee.showticksuffix)&&(tt.text+=Ee.ticksuffix)),"boundaries"===Ee.tickson||Ee.showdividers){var $t=function(Dt){var Pt=Ee.l2p(Dt);return Pt>=0&&Pt<=Ee._length?Dt:null};tt.xbnd=[$t(tt.x-.5),$t(tt.x+Ee.dtick-.5)]}return tt},H.hoverLabelText=function(Ee,De,Ie){Ie&&(Ee=e.extendFlat({},Ee,{hoverformat:Ie}));var He=Array.isArray(De)?De[0]:De,Ye=Array.isArray(De)?De[1]:void 0;if(void 0!==Ye&&Ye!==He)return H.hoverLabelText(Ee,He,Ie)+" - "+H.hoverLabelText(Ee,Ye,Ie);var tt="log"===Ee.type&&He<=0,ot=H.tickText(Ee,Ee.c2l(tt?-He:He),"hover").text;return tt?0===He?"0":L+ot:ot};var Je=["f","p","n","\u03bc","m","","k","M","G","T"];function ut(Ee){return"SI"===Ee||"B"===Ee}function Ge(Ee){return Ee>14||Ee<-15}function Ke(Ee,De,Ie,He){var Ye=Ee<0,tt=De._tickround,ot=Ie||De.exponentformat||"B",st=De._tickexponent,bt=H.getTickFormat(De),wt=De.separatethousands;if(He){var Ut={exponentformat:ot,minexponent:De.minexponent,dtick:"none"===De.showexponent?De.dtick:b(Ee)&&Math.abs(Ee)||1,range:"none"===De.showexponent?De.range.map(De.r2d):[0,Ee||1]};qe(Ut),tt=(Number(Ut._tickround)||0)+4,st=Ut._tickexponent,De.hoverformat&&(bt=De.hoverformat)}if(bt)return De._numFormat(bt)(Ee).replace(/-/g,L);var Kt,vt=Math.pow(10,-tt)/2;if("none"===ot&&(st=0),(Ee=Math.abs(Ee))<vt)Ee="0",Ye=!1;else{if(Ee+=vt,st&&(Ee*=Math.pow(10,-st),tt+=st),0===tt)Ee=String(Math.floor(Ee));else if(tt<0){Ee=(Ee=String(Math.round(Ee))).substr(0,Ee.length+tt);for(var Et=tt;Et<0;Et++)Ee+="0"}else{var $t=(Ee=String(Ee)).indexOf(".")+1;$t&&(Ee=Ee.substr(0,$t+tt).replace(/\.?0+$/,""))}Ee=e.numSeparate(Ee,De._separators,wt)}return st&&"hide"!==ot&&(ut(ot)&&Ge(st)&&(ot="power"),Kt=st<0?L+-st:"power"!==ot?"+"+st:String(st),"e"===ot||"E"===ot?Ee+=ot+Kt:"power"===ot?Ee+="\xd710<sup>"+Kt+"</sup>":"B"===ot&&9===st?Ee+="B":ut(ot)&&(Ee+=Je[st/3+5])),Ye?L+Ee:Ee}function nt(Ee,De){for(var Ie=[],He={},Ye=0;Ye<De.length;Ye++){var tt=De[Ye];He[tt.text2]?He[tt.text2].push(tt.x):He[tt.text2]=[tt.x]}for(var ot in He)Ie.push(We(Ee,e.interp(He[ot],.5),ot));return Ie}function it(Ee){return void 0!==Ee.periodX?Ee.periodX:Ee.x}function ht(Ee){return[Ee.text,Ee.x,Ee.axInfo,Ee.font,Ee.fontSize,Ee.fontColor].join("_")}function Tt(Ee){var De=Ee.title.font.size,Ie=(Ee.title.text.match(a.BR_TAG_ALL)||[]).length;return Ee.title.hasOwnProperty("standoff")?Ie?De*(ee+Ie*se):De*ee:Ie?De*(Ie+1)*se:De}function Ct(Ee,De){var Ie=Ee.l2p(De);return Ie>1&&Ie<Ee._length-1}function Vt(Ee){var De=y.select(Ee),Ie=De.select(".text-math-group");return Ie.empty()?De.select("text"):Ie}function Ft(Ee){return Ee._id+".automargin"}function gt(Ee){return Ft(Ee)+".mirror"}function ft(Ee){return Ee._id+".rangeslider"}function Bt(Ee,De){for(var Ie=0;Ie<De.length;Ie++)-1===Ee.indexOf(De[Ie])&&Ee.push(De[Ie])}function rn(Ee,De,Ie){var He,Ye,tt=[],ot=[],st=Ee.layout;for(He=0;He<De.length;He++)tt.push(H.getFromId(Ee,De[He]));for(He=0;He<Ie.length;He++)ot.push(H.getFromId(Ee,Ie[He]));var bt=Object.keys(h),wt=["anchor","domain","overlaying","position","side","tickangle","editType"],Ut=["linear","log"];for(He=0;He<bt.length;He++){var Kt=bt[He],vt=tt[0][Kt],Et=ot[0][Kt],$t=!0,Dt=!1,Pt=!1;if("_"!==Kt.charAt(0)&&"function"!=typeof vt&&-1===wt.indexOf(Kt)){for(Ye=1;Ye<tt.length&&$t;Ye++){var je=tt[Ye][Kt];"type"===Kt&&-1!==Ut.indexOf(vt)&&-1!==Ut.indexOf(je)&&vt!==je?Dt=!0:je!==vt&&($t=!1)}for(Ye=1;Ye<ot.length&&$t;Ye++){var rt=ot[Ye][Kt];"type"===Kt&&-1!==Ut.indexOf(Et)&&-1!==Ut.indexOf(rt)&&Et!==rt?Pt=!0:ot[Ye][Kt]!==Et&&($t=!1)}$t&&(Dt&&(st[tt[0]._name].type="linear"),Pt&&(st[ot[0]._name].type="linear"),un(st,Kt,tt,ot,Ee._fullLayout._dfltTitle))}}for(He=0;He<Ee._fullLayout.annotations.length;He++){var pt=Ee._fullLayout.annotations[He];-1!==De.indexOf(pt.xref)&&-1!==Ie.indexOf(pt.yref)&&e.swapAttrs(st.annotations[He],["?"])}}function un(Ee,De,Ie,He,Ye){var tt,ot=e.nestedProperty,st=ot(Ee[Ie[0]._name],De).get(),bt=ot(Ee[He[0]._name],De).get();for("title"===De&&(st&&st.text===Ye.x&&(st.text=Ye.y),bt&&bt.text===Ye.y&&(bt.text=Ye.x)),tt=0;tt<Ie.length;tt++)ot(Ee,Ie[tt]._name+"."+De).set(bt);for(tt=0;tt<He.length;tt++)ot(Ee,He[tt]._name+"."+De).set(st)}function pn(Ee){return"angularaxis"===Ee._id}function dn(Ee,De){for(var Ie=De._rangebreaks.length,He=0;He<Ie;He++){var Ye=De._rangebreaks[He];if(Ee>=Ye.min&&Ee<Ye.max)return Ye.max}return Ee}function Mn(Ee){return-1!==(Ee.ticklabelposition||"").indexOf("inside")}function ln(Ee,De){Mn(Ee._anchorAxis||{})&&Ee._hideCounterAxisInsideTickLabels&&Ee._hideCounterAxisInsideTickLabels(De)}H.getTickFormat=function(Ee){var De,Ie,He,Ye,tt,ot,st,bt,vt,Et,$t,Dt,Pt,je;function wt(vt){return"string"!=typeof vt?vt:Number(vt.replace("M",""))*E}function Ut(vt,Et){var $t=["L","D"];if(typeof vt==typeof Et){if("number"==typeof vt)return vt-Et;var Dt=$t.indexOf(vt.charAt(0)),Pt=$t.indexOf(Et.charAt(0));return Dt===Pt?Number(vt.replace(/(L|D)/g,""))-Number(Et.replace(/(L|D)/g,"")):Dt-Pt}return"number"==typeof vt?1:-1}if(Ee.tickformatstops&&Ee.tickformatstops.length>0)switch(Ee.type){case"date":case"linear":for(De=0;De<Ee.tickformatstops.length;De++)if((He=Ee.tickformatstops[De]).enabled&&(Ye=Ee.dtick,ot=void 0,void 0,void 0,ot=wt||function(vt){return vt},bt=(tt=He.dtickrange)[1],(!(st=tt[0])&&"number"!=typeof st||ot(st)<=ot(Ye))&&(!bt&&"number"!=typeof bt||ot(bt)>=ot(Ye)))){Ie=He;break}break;case"log":for(De=0;De<Ee.tickformatstops.length;De++)if((He=Ee.tickformatstops[De]).enabled&&($t=void 0,Dt=void 0,Pt=void 0,je=void 0,$t=null===(Et=He.dtickrange)[0],Dt=null===Et[1],Pt=Ut(vt=Ee.dtick,Et[0])>=0,je=Ut(vt,Et[1])<=0,($t||Pt)&&(Dt||je))){Ie=He;break}}return Ie?Ie.value:Ee.tickformat},H.getSubplots=function(Ee,De){var Ie=Ee._fullLayout._subplots,He=Ie.cartesian.concat(Ie.gl2d||[]),Ye=De?H.findSubplotsWithAxis(He,De):He;return Ye.sort(function(tt,ot){var st=tt.substr(1).split("y"),bt=ot.substr(1).split("y");return st[0]===bt[0]?+st[1]-+bt[1]:+st[0]-+bt[0]}),Ye},H.findSubplotsWithAxis=function(Ee,De){for(var Ie=new RegExp("x"===De._id.charAt(0)?"^"+De._id+"y":De._id+"$"),He=[],Ye=0;Ye<Ee.length;Ye++){var tt=Ee[Ye];Ie.test(tt)&&He.push(tt)}return He},H.makeClipPaths=function(Ee){var De=Ee._fullLayout;if(!De._hasOnlyLargeSploms){var Ie,He,Ye={_offset:0,_length:De.width,_id:""},tt={_offset:0,_length:De.height,_id:""},ot=H.list(Ee,"x",!0),st=H.list(Ee,"y",!0),bt=[];for(Ie=0;Ie<ot.length;Ie++)for(bt.push({x:ot[Ie],y:tt}),He=0;He<st.length;He++)0===Ie&&bt.push({x:Ye,y:st[He]}),bt.push({x:ot[Ie],y:st[He]});var wt=De._clips.selectAll(".axesclip").data(bt,function(Ut){return Ut.x._id+Ut.y._id});wt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Ut){return"clip"+De._uid+Ut.x._id+Ut.y._id}).append("rect"),wt.exit().remove(),wt.each(function(Ut){y.select(this).select("rect").attr({x:Ut.x._offset||0,y:Ut.y._offset||0,width:Ut.x._length||1,height:Ut.y._length||1})})}},H.draw=function(Ee,De,Ie){var He=Ee._fullLayout;"redraw"===De&&He._paper.selectAll("g.subplot").each(function(tt){var st=He._plots[tt[0]];if(st){var bt=st.xaxis,wt=st.yaxis;st.xaxislayer.selectAll("."+bt._id+"tick").remove(),st.yaxislayer.selectAll("."+wt._id+"tick").remove(),st.xaxislayer.selectAll("."+bt._id+"tick2").remove(),st.yaxislayer.selectAll("."+wt._id+"tick2").remove(),st.xaxislayer.selectAll("."+bt._id+"divider").remove(),st.yaxislayer.selectAll("."+wt._id+"divider").remove(),st.minorGridlayer&&st.minorGridlayer.selectAll("path").remove(),st.gridlayer&&st.gridlayer.selectAll("path").remove(),st.zerolinelayer&&st.zerolinelayer.selectAll("path").remove(),He._infolayer.select(".g-"+bt._id+"title").remove(),He._infolayer.select(".g-"+wt._id+"title").remove()}});var Ye=De&&"redraw"!==De?De:H.listIds(Ee);return e.syncOrAsync(Ye.map(function(tt){return function(){if(tt){var ot=H.getFromId(Ee,tt),st=H.drawOne(Ee,ot,Ie);return ot._r=ot.range.slice(),ot._rl=e.simpleMap(ot._r,ot.r2l),st}}}))},H.drawOne=function(Ee,De,Ie){var He,Ye,tt;Ie=Ie||{},De.setScale();var ot=Ee._fullLayout,st=De._id,bt=st.charAt(0),wt=H.counterLetter(st),Ut=ot._plots[De._mainSubplot];if(Ut){var Kt=Ut[bt+"axislayer"],vt=De._mainLinePosition,Et=De._mainMirrorPosition,$t=De._vals=H.calcTicks(De),Dt=[De.mirror,vt,Et].join("_");for(He=0;He<$t.length;He++)$t[He].axInfo=Dt;De._selections={},De._tickAngles&&(De._prevTickAngles=De._tickAngles),De._tickAngles={},De._depth=null;var Pt={};if(De.visible){var je,rt,pt=H.makeTransTickFn(De),It=H.makeTransTickLabelFn(De),jt="inside"===De.ticks,Qt="outside"===De.ticks;if("boundaries"===De.tickson){var fn=function(Dr,wr){var gn,tr=[],qt=function(_n,Cn){var Jn=_n.xbnd[Cn];null!==Jn&&tr.push(e.extendFlat({},_n,{x:Jn}))};if(wr.length){for(gn=0;gn<wr.length;gn++)qt(wr[gn],0);qt(wr[gn-1],1)}return tr}(0,$t);rt=H.clipEnds(De,fn),je=jt?rt:fn}else rt=H.clipEnds(De,$t),je=jt&&"period"!==De.ticklabelmode?rt:$t;var an,Sn=De._gridVals=rt,Yn=function(Dr,wr){var gn,tr,qt=[],_n=wr.length&&wr[wr.length-1].x<wr[0].x,Cn=function(Xn,Hn){var Bn=Xn.xbnd[Hn];null!==Bn&&qt.push(e.extendFlat({},Xn,{x:Bn}))};if(Dr.showdividers&&wr.length){for(gn=0;gn<wr.length;gn++){var Jn=wr[gn];Jn.text2!==tr&&Cn(Jn,_n?1:0),tr=Jn.text2}Cn(wr[gn-1],_n?0:1)}return qt}(De,$t);if(!ot._hasOnlyLargeSploms){var kn=De._subplotsWith,cn={};for(He=0;He<kn.length;He++){var vn=(tt=ot._plots[Ye=kn[He]])[wt+"axis"],hn=vn._mainAxis._id;if(!cn[hn]){cn[hn]=1;var Dn="x"===bt?"M0,"+vn._offset+"v"+vn._length:"M"+vn._offset+",0h"+vn._length;H.drawGrid(Ee,De,{vals:Sn,counterAxis:vn,layer:tt.gridlayer.select("."+st),minorLayer:tt.minorGridlayer.select("."+st),path:Dn,transFn:pt}),H.drawZeroLine(Ee,De,{counterAxis:vn,layer:tt.zerolinelayer,path:Dn,transFn:pt})}}}var Pn=H.getTickSigns(De),$n=H.getTickSigns(De,"minor");if(De.ticks||De.minor&&De.minor.ticks){var rr,er,or,Zr,zr=H.makeTickPath(De,vt,Pn[2]),pr=H.makeTickPath(De,vt,$n[2],{minor:!0});if(De._anchorAxis&&De.mirror&&!0!==De.mirror?(rr=H.makeTickPath(De,Et,Pn[3]),er=H.makeTickPath(De,Et,$n[3],{minor:!0}),or=zr+rr,Zr=pr+er):(rr="",er="",or=zr,Zr=pr),De.showdividers&&Qt&&"boundaries"===De.tickson){var Br={};for(He=0;He<Yn.length;He++)Br[Yn[He].x]=1;an=function(Dr){return Br[Dr.x]?rr:or}}else an=function(Dr){return Dr.minor?Zr:or}}if(H.drawTicks(Ee,De,{vals:je,layer:Kt,path:an,transFn:pt}),"allticks"===De.mirror){var fr=Object.keys(De._linepositions||{});for(He=0;He<fr.length;He++){tt=ot._plots[Ye=fr[He]];var Nr=De._linepositions[Ye]||[],Qn=Nr[1],Er=Nr[2],kr=H.makeTickPath(De,Nr[0],Er?Pn[0]:$n[0],{minor:Er})+H.makeTickPath(De,Qn,Er?Pn[1]:$n[1],{minor:Er});H.drawTicks(Ee,De,{vals:je,layer:tt[bt+"axislayer"],path:kr,transFn:pt})}}var sr=[];if(sr.push(function(){return H.drawLabels(Ee,De,{vals:$t,layer:Kt,plotinfo:tt,transFn:It,labelFns:H.makeLabelFns(De,vt)})}),"multicategory"===De.type){var ci={x:2,y:10}[bt];sr.push(function(){var Dr={x:"height",y:"width"}[bt],wr=Or()[Dr]+ci+(De._tickAngles[st+"tick"]?De.tickfont.size*se:0);return H.drawLabels(Ee,De,{vals:nt(De,$t),layer:Kt,cls:st+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:pt,labelFns:H.makeLabelFns(De,vt+wr*Pn[4])})}),sr.push(function(){return De._depth=Pn[4]*(Or("tick2")[De.side]-vt),Dr=Ee,wr=De,qt=(gn={vals:Yn,layer:Kt,path:H.makeTickPath(De,vt,Pn[4],{len:De._depth}),transFn:pt}).vals,(_n=gn.layer.selectAll("path."+(tr=wr._id+"divider")).data(qt,ht)).exit().remove(),_n.enter().insert("path",":first-child").classed(tr,1).classed("crisp",1).call(i.stroke,wr.dividercolor).style("stroke-width",v.crispRound(Dr,wr.dividerwidth,1)+"px"),void _n.attr("transform",gn.transFn).attr("d",gn.path);var Dr,wr,gn,tr,qt,_n})}else De.title.hasOwnProperty("standoff")&&sr.push(function(){De._depth=Pn[4]*(Or()[De.side]-vt)});var oi=_.getComponentMethod("rangeslider","isVisible")(De);return sr.push(function(){var Dr,wr,gn,tr,qt=De.side.charAt(0),_n=G[De.side].charAt(0),Cn=H.getPxPosition(Ee,De),Jn=Qt?De.ticklen:0;if((De.automargin||oi)&&("multicategory"===De.type?Dr=Or("tick2"):(Dr=Or(),"x"===bt&&"b"===qt&&(De._depth=Math.max(Dr.width>0?Dr.bottom-Cn:0,Jn)))),De.automargin){wr={x:0,y:0,r:0,l:0,t:0,b:0};var Xn=[0,1];if("x"===bt){if("b"===qt?wr[qt]=De._depth:(wr[qt]=De._depth=Math.max(Dr.width>0?Cn-Dr.top:0,Jn),Xn.reverse()),Dr.width>0){var Hn=Dr.right-(De._offset+De._length);Hn>0&&(wr.xr=1,wr.r=Hn);var Bn=De._offset-Dr.left;Bn>0&&(wr.xl=0,wr.l=Bn)}}else if("l"===qt?wr[qt]=De._depth=Math.max(Dr.height>0?Cn-Dr.left:0,Jn):(wr[qt]=De._depth=Math.max(Dr.height>0?Dr.right-Cn:0,Jn),Xn.reverse()),Dr.height>0){var zn=Dr.bottom-(De._offset+De._length);zn>0&&(wr.yb=0,wr.b=zn);var jn=De._offset-Dr.top;jn>0&&(wr.yt=1,wr.t=jn)}wr[wt]="free"===De.anchor?De.position:De._anchorAxis.domain[Xn[0]],De.title.text!==ot._dfltTitle[bt]&&(wr[qt]+=Tt(De)+(De.title.standoff||0)),De.mirror&&"free"!==De.anchor&&((gn={x:0,y:0,r:0,l:0,t:0,b:0})[_n]=De.linewidth,De.mirror&&!0!==De.mirror&&(gn[_n]+=Jn),!0===De.mirror||"ticks"===De.mirror?gn[wt]=De._anchorAxis.domain[Xn[1]]:"all"!==De.mirror&&"allticks"!==De.mirror||(gn[wt]=[De._counterDomainMin,De._counterDomainMax][Xn[1]]))}oi&&(tr=_.getComponentMethod("rangeslider","autoMarginOpts")(Ee,De)),T.autoMargin(Ee,Ft(De),wr),T.autoMargin(Ee,gt(De),gn),T.autoMargin(Ee,ft(De),tr)}),Ie.skipTitle||oi&&"bottom"===De.side||sr.push(function(){return function(Dr,wr){var gn,tr=Dr._fullLayout,qt=wr._id,_n=qt.charAt(0),Cn=wr.title.font.size;if(wr.title.hasOwnProperty("standoff"))gn=wr._depth+wr.title.standoff+Tt(wr);else{var Jn=Mn(wr);if("multicategory"===wr.type)gn=wr._depth;else{var Xn=1.5*Cn;Jn&&(Xn=.5*Cn,"outside"===wr.ticks&&(Xn+=wr.ticklen)),gn=10+Xn+(wr.linewidth?wr.linewidth-1:0)}Jn||(gn+="x"===_n?"top"===wr.side?Cn*(wr.showticklabels?1:0):Cn*(wr.showticklabels?1.5:.5):"right"===wr.side?Cn*(wr.showticklabels?1:.5):Cn*(wr.showticklabels?.5:0))}var Hn,Bn,zn,jn,Vn=H.getPxPosition(Dr,wr);if("x"===_n?(Bn=wr._offset+wr._length/2,zn="top"===wr.side?Vn-gn:Vn+gn):(zn=wr._offset+wr._length/2,Bn="right"===wr.side?Vn+gn:Vn-gn,Hn={rotate:"-90",offset:0}),"multicategory"!==wr.type){var On=wr._selections[wr._id+"tick"];if(jn={selection:On,side:wr.side},On&&On.node()&&On.node().parentNode){var dr=v.getTranslate(On.node().parentNode);jn.offsetLeft=dr.x,jn.offsetTop=dr.y}wr.title.hasOwnProperty("standoff")&&(jn.pad=0)}return l.draw(Dr,qt+"title",{propContainer:wr,propName:wr._name+".title.text",placeholder:tr._dfltTitle[_n],avoid:jn,transform:Hn,attributes:{x:Bn,y:zn,"text-anchor":"middle"}})}(Ee,De)}),e.syncOrAsync(sr)}}function Or(Dr){var gn,tr,qt,_n,Cn,Jn,wr=st+(Dr||"tick");return Pt[wr]||(Pt[wr]=((gn=De)._selections[tr=wr].size()?(qt=1/0,_n=-1/0,Cn=1/0,Jn=-1/0,gn._selections[tr].each(function(){var Xn=Vt(this),Hn=v.bBox(Xn.node().parentNode);qt=Math.min(qt,Hn.top),_n=Math.max(_n,Hn.bottom),Cn=Math.min(Cn,Hn.left),Jn=Math.max(Jn,Hn.right)})):(qt=0,_n=0,Cn=0,Jn=0),{top:qt,bottom:_n,left:Cn,right:Jn,height:_n-qt,width:Jn-Cn})),Pt[wr]}},H.getTickSigns=function(Ee,De){var Ie=Ee._id.charAt(0),Ye=Ee.side==={x:"top",y:"right"}[Ie]?1:-1,tt=[-1,1,Ye,-Ye];return"inside"!==(De?(Ee.minor||{}).ticks:Ee.ticks)==("x"===Ie)&&(tt=tt.map(function(ot){return-ot})),Ee.side&&tt.push({l:-1,t:-1,r:1,b:1}[Ee.side.charAt(0)]),tt},H.makeTransTickFn=function(Ee){return"x"===Ee._id.charAt(0)?function(De){return o(Ee._offset+Ee.l2p(De.x),0)}:function(De){return o(0,Ee._offset+Ee.l2p(De.x))}},H.makeTransTickLabelFn=function(Ee){var De=function(Ye){var tt=Ye.ticklabelposition||"",ot=function(je){return-1!==tt.indexOf(je)},st=ot("top"),bt=ot("left"),wt=ot("right"),Ut=ot("bottom"),Kt=ot("inside"),vt=Ut||bt||st||wt;if(!vt&&!Kt)return[0,0];var Et=Ye.side,$t=vt?(Ye.tickwidth||0)/2:0,Dt=3,Pt=Ye.tickfont?Ye.tickfont.size:12;return(Ut||st)&&($t+=Pt*ee,Dt+=(Ye.linewidth||0)/2),(bt||wt)&&($t+=(Ye.linewidth||0)/2,Dt+=3),Kt&&"top"===Et&&(Dt-=Pt*(1-ee)),(bt||st)&&($t=-$t),"bottom"!==Et&&"right"!==Et||(Dt=-Dt),[vt?$t:0,Kt?Dt:0]}(Ee),Ie=De[0],He=De[1];return"x"===Ee._id.charAt(0)?function(Ye){return o(Ie+Ee._offset+Ee.l2p(it(Ye)),He)}:function(Ye){return o(He,Ie+Ee._offset+Ee.l2p(it(Ye)))}},H.makeTickPath=function(Ee,De,Ie,He){He||(He={});var Ye=He.minor;if(Ye&&!Ee.minor)return"";var tt=void 0!==He.len?He.len:Ye?Ee.minor.ticklen:Ee.ticklen,ot=Ee._id.charAt(0),st=(Ee.linewidth||1)/2;return"x"===ot?"M0,"+(De+st*Ie)+"v"+tt*Ie:"M"+(De+st*Ie)+",0h"+tt*Ie},H.makeLabelFns=function(Ee,De,Ie){var He=Ee.ticklabelposition||"",Ye=function(kn){return-1!==He.indexOf(kn)},tt=Ye("top"),ot=Ye("left"),st=Ye("right"),bt=Ye("bottom")||ot||tt||st,wt=Ye("inside"),Ut="inside"===He&&"inside"===Ee.ticks||!wt&&"outside"===Ee.ticks&&"boundaries"!==Ee.tickson,Kt=0,vt=0,Et=Ut?Ee.ticklen:0;if(wt?Et*=-1:bt&&(Et=0),Ut&&(Kt+=Et,Ie)){var $t=e.deg2rad(Ie);Kt=Et*Math.cos($t)+1,vt=Et*Math.sin($t)}Ee.showticklabels&&(Ut||Ee.showline)&&(Kt+=.2*Ee.tickfont.size);var Dt,Pt,je,rt,pt,It={labelStandoff:Kt+=(Ee.linewidth||1)/2*(wt?-1:1),labelShift:vt},jt=0,Qt=Ee.side,fn=Ee._id.charAt(0),an=Ee.tickangle;if("x"===fn)rt=(pt=!wt&&"bottom"===Qt||wt&&"top"===Qt)?1:-1,wt&&(rt*=-1),Dt=vt*rt,Pt=De+Kt*rt,je=pt?1:-.2,90===Math.abs(an)&&(wt?je+=J:je=-90===an&&"bottom"===Qt?ee:90===an&&"top"===Qt?J:.5,jt=J/2*(an/90)),It.xFn=function(kn){return kn.dx+Dt+jt*kn.fontSize},It.yFn=function(kn){return kn.dy+Pt+kn.fontSize*je},It.anchorFn=function(kn,cn){if(bt){if(ot)return"end";if(st)return"start"}return b(cn)&&0!==cn&&180!==cn?cn*rt<0!==wt?"end":"start":"middle"},It.heightFn=function(kn,cn,vn){return cn<-60||cn>60?-.5*vn:"top"===Ee.side!==wt?-vn:0};else if("y"===fn){if(rt=(pt=!wt&&"left"===Qt||wt&&"right"===Qt)?1:-1,wt&&(rt*=-1),Dt=Kt,Pt=vt*rt,je=0,wt||90!==Math.abs(an)||(je=-90===an&&"left"===Qt||90===an&&"right"===Qt?ee:.5),wt){var Sn=b(an)?+an:0;if(0!==Sn){var Yn=e.deg2rad(Sn);jt=Math.abs(Math.sin(Yn))*ee*rt,je=0}}It.xFn=function(kn){return kn.dx+De-(Dt+kn.fontSize*je)*rt+jt*kn.fontSize},It.yFn=function(kn){return kn.dy+Pt+kn.fontSize*J},It.anchorFn=function(kn,cn){return b(cn)&&90===Math.abs(cn)?"middle":pt?"end":"start"},It.heightFn=function(kn,cn,vn){return"right"===Ee.side&&(cn*=-1),cn<-30?-vn:cn<30?-.5*vn:0}}return It},H.drawTicks=function(Ee,De,Ie){Ie=Ie||{};var He=De._id+"tick",Ye=[].concat(De.minor&&De.minor.ticks?Ie.vals.filter(function(ot){return ot.minor&&!ot.noTick}):[]).concat(De.ticks?Ie.vals.filter(function(ot){return!ot.minor&&!ot.noTick}):[]),tt=Ie.layer.selectAll("path."+He).data(Ye,ht);tt.exit().remove(),tt.enter().append("path").classed(He,1).classed("ticks",1).classed("crisp",!1!==Ie.crisp).each(function(ot){return i.stroke(y.select(this),ot.minor?De.minor.tickcolor:De.tickcolor)}).style("stroke-width",function(ot){return v.crispRound(Ee,ot.minor?De.minor.tickwidth:De.tickwidth,1)+"px"}).attr("d",Ie.path).style("display",null),ln(De,[X]),tt.attr("transform",Ie.transFn)},H.drawGrid=function(Ee,De,Ie){Ie=Ie||{};var He=De._id+"grid",Ye=De.minor&&De.minor.showgrid,tt=Ye?Ie.vals.filter(function(je){return je.minor}):[],ot=De.showgrid?Ie.vals.filter(function(je){return!je.minor}):[],st=Ie.counterAxis;if(st&&H.shouldShowZeroLine(Ee,De,st))for(var bt="array"===De.tickmode,wt=0;wt<ot.length;wt++){var Ut=ot[wt].x;if(bt?!Ut:Math.abs(Ut)<De.dtick/100){if(ot=ot.slice(0,wt).concat(ot.slice(wt+1)),!bt)break;wt--}}De._gw=v.crispRound(Ee,De.gridwidth,1);for(var Kt=Ye?v.crispRound(Ee,De.minor.gridwidth,1):0,vt=Ie.layer,Et=Ie.minorLayer,$t=1;$t>=0;$t--){var Dt=$t?vt:Et;if(Dt){var Pt=Dt.selectAll("path."+He).data($t?ot:tt,ht);Pt.exit().remove(),Pt.enter().append("path").classed(He,1).classed("crisp",!1!==Ie.crisp),Pt.attr("transform",Ie.transFn).attr("d",Ie.path).each(function(je){return i.stroke(y.select(this),je.minor?De.minor.gridcolor:De.gridcolor||"#ddd")}).style("stroke-dasharray",function(je){return v.dashStyle(je.minor?De.minor.griddash:De.griddash,je.minor?De.minor.gridwidth:De.gridwidth)}).style("stroke-width",function(je){return(je.minor?Kt:De._gw)+"px"}).style("display",null),"function"==typeof Ie.path&&Pt.attr("d",Ie.path)}}ln(De,[U,$])},H.drawZeroLine=function(Ee,De,Ie){var He=De._id+"zl",Ye=H.shouldShowZeroLine(Ee,De,(Ie=Ie||Ie).counterAxis),tt=Ie.layer.selectAll("path."+He).data(Ye?[{x:0,id:De._id}]:[]);tt.exit().remove(),tt.enter().append("path").classed(He,1).classed("zl",1).classed("crisp",!1!==Ie.crisp).each(function(){Ie.layer.selectAll("path").sort(function(ot,st){return W(ot.id,st.id)})}),tt.attr("transform",Ie.transFn).attr("d",Ie.path).call(i.stroke,De.zerolinecolor||i.defaultLine).style("stroke-width",v.crispRound(Ee,De.zerolinewidth,De._gw||1)+"px").style("display",null),ln(De,[j])},H.drawLabels=function(Ee,De,Ie){Ie=Ie||{};var He=Ee._fullLayout,Ye=De._id,tt=Ye.charAt(0),ot=Ie.cls||Ye+"tick",st=Ie.vals.filter(function(rt){return rt.text}),bt=Ie.labelFns,wt=Ie.secondary?0:De.tickangle,Ut=(De._prevTickAngles||{})[ot],Kt=Ie.layer.selectAll("g."+ot).data(De.showticklabels?st:[],ht),vt=[];function Et(rt,pt){rt.each(function(It){var jt=y.select(this),Qt=jt.select(".text-math-group"),fn=bt.anchorFn(It,pt),an=Ie.transFn.call(jt.node(),It)+(b(pt)&&0!=+pt?" rotate("+pt+","+bt.xFn(It)+","+(bt.yFn(It)-It.fontSize/2)+")":""),Sn=a.lineCount(jt),Yn=se*It.fontSize,kn=bt.heightFn(It,b(pt)?+pt:0,(Sn-1)*Yn);if(kn&&(an+=o(0,kn)),Qt.empty()){var cn=jt.select("text");cn.attr({transform:an,"text-anchor":fn}),cn.style("opacity",1),De._adjustTickLabelsOverflow&&De._adjustTickLabelsOverflow()}else{var vn=v.bBox(Qt.node()).width*{end:-.5,start:.5}[fn];Qt.attr("transform",an+o(vn,0))}})}Kt.enter().append("g").classed(ot,1).append("text").attr("text-anchor","middle").each(function(rt){var pt=y.select(this),It=Ee._promises.length;pt.call(a.positionText,bt.xFn(rt),bt.yFn(rt)).call(v.font,rt.font,rt.fontSize,rt.fontColor).text(rt.text).call(a.convertToTspans,Ee),Ee._promises[It]?vt.push(Ee._promises.pop().then(function(){Et(pt,wt)})):Et(pt,wt)}),ln(De,[te]),Kt.exit().remove(),Ie.repositionOnUpdate&&Kt.each(function(rt){y.select(this).select("text").call(a.positionText,bt.xFn(rt),bt.yFn(rt))}),De._adjustTickLabelsOverflow=function(){var rt=De.ticklabeloverflow;if(rt&&"allow"!==rt){var pt=-1!==rt.indexOf("hide"),It="x"===De._id.charAt(0),jt=0,Qt=It?Ee._fullLayout.width:Ee._fullLayout.height;if(-1!==rt.indexOf("domain")){var fn=e.simpleMap(De.range,De.r2l);jt=De.l2p(fn[0])+De._offset,Qt=De.l2p(fn[1])+De._offset}var an=Math.min(jt,Qt),Sn=Math.max(jt,Qt),Yn=De.side,kn=1/0,cn=-1/0;for(var vn in Kt.each(function(Pn){var $n=y.select(this);if($n.select(".text-math-group").empty()){var rr=v.bBox($n.node()),er=0;It?(rr.right>Sn||rr.left<an)&&(er=1):(rr.bottom>Sn||rr.top+(De.tickangle?0:Pn.fontSize/4)<an)&&(er=1);var or=$n.select("text");er?pt&&or.style("opacity",0):(or.style("opacity",1),kn="bottom"===Yn||"right"===Yn?Math.min(kn,It?rr.top:rr.left):-1/0,cn="top"===Yn||"left"===Yn?Math.max(cn,It?rr.bottom:rr.right):1/0)}}),He._plots){var hn=He._plots[vn];if(De._id===hn.xaxis._id||De._id===hn.yaxis._id){var Dn=It?hn.yaxis:hn.xaxis;Dn&&(Dn["_visibleLabelMin_"+De._id]=kn,Dn["_visibleLabelMax_"+De._id]=cn)}}}},De._hideCounterAxisInsideTickLabels=function(rt){var pt="x"===De._id.charAt(0),It=[];for(var jt in He._plots){var Qt=He._plots[jt];De._id!==Qt.xaxis._id&&De._id!==Qt.yaxis._id||It.push(pt?Qt.yaxis:Qt.xaxis)}It.forEach(function(fn,an){fn&&Mn(fn)&&(rt||[j,$,U,X,te]).forEach(function(Sn){var Yn="tick"===Sn.K&&"text"===Sn.L&&"period"===De.ticklabelmode,kn=He._plots[De._mainSubplot];(Sn.K===j.K?kn.zerolinelayer.selectAll("."+De._id+"zl"):Sn.K===$.K?kn.minorGridlayer.selectAll("."+De._id):Sn.K===U.K?kn.gridlayer.selectAll("."+De._id):kn[De._id.charAt(0)+"axislayer"]).each(function(){var cn=y.select(this);Sn.L&&(cn=cn.selectAll(Sn.L)),cn.each(function(vn){var hn=De.l2p(Yn?it(vn):vn.x)+De._offset,Dn=y.select(this);hn<De["_visibleLabelMax_"+fn._id]&&hn>De["_visibleLabelMin_"+fn._id]?Dn.style("display","none"):"tick"!==Sn.K||an||Dn.style("display",null)})})})})},Et(Kt,Ut+1?Ut:wt);var $t=null;De._selections&&(De._selections[ot]=Kt);var Dt=[function(){return vt.length&&Promise.all(vt)}];De.automargin&&He._redrawFromAutoMarginCount&&90===Ut?($t=90,Dt.push(function(){Et(Kt,Ut)})):Dt.push(function(){if(Et(Kt,wt),st.length&&"x"===tt&&!b(wt)&&("log"!==De.type||"D"!==String(De.dtick).charAt(0))){$t=0;var rt,pt=0,It=[];if(Kt.each(function($n){pt=Math.max(pt,$n.fontSize);var rr=De.l2p($n.x),er=Vt(this),or=v.bBox(er.node());It.push({top:0,bottom:10,height:10,left:rr-or.width/2,right:rr+or.width/2+2,width:or.width+2})}),"boundaries"!==De.tickson&&!De.showdividers||Ie.secondary){var jt=st.length,Qt=Math.abs((st[jt-1].x-st[0].x)*De._m)/(jt-1),fn=De.ticklabelposition||"",an=function($n){return-1!==fn.indexOf($n)},Sn=an("top"),Yn=an("left"),kn=an("right"),cn=an("bottom")||Yn||Sn||kn?(De.tickwidth||0)+6:0,vn=Qt<2.5*pt||"multicategory"===De.type||"realaxis"===De._name;for(rt=0;rt<It.length-1;rt++)if(e.bBoxIntersect(It[rt],It[rt+1],cn)){$t=vn?90:30;break}}else{var hn=2;for(De.ticks&&(hn+=De.tickwidth/2),rt=0;rt<It.length;rt++){var Dn=st[rt].xbnd,Pn=It[rt];if(null!==Dn[0]&&Pn.left-De.l2p(Dn[0])<hn||null!==Dn[1]&&De.l2p(Dn[1])-Pn.right<hn){$t=90;break}}}$t&&Et(Kt,$t)}}),De._tickAngles&&Dt.push(function(){De._tickAngles[ot]=null===$t?b(wt)?wt:0:$t});var Pt=De._anchorAxis;Pt&&Pt.autorange&&Mn(De)&&!ne(He,De._id)&&(He._insideTickLabelsAutorange||(He._insideTickLabelsAutorange={}),He._insideTickLabelsAutorange[Pt._name+".autorange"]=Pt.autorange,Dt.push(function(){Kt.each(function(rt,pt){var It=Vt(this);It.select(".text-math-group").empty()&&(De._vals[pt].bb=v.bBox(It.node()))})}));var je=e.syncOrAsync(Dt);return je&&je.then&&Ee._promises.push(je),je},H.getPxPosition=function(Ee,De){var Ie,He=Ee._fullLayout._size,Ye=De._id.charAt(0),tt=De.side;return"free"!==De.anchor?Ie=De._anchorAxis:"x"===Ye?Ie={_offset:He.t+(1-(De.position||0))*He.h,_length:0}:"y"===Ye&&(Ie={_offset:He.l+(De.position||0)*He.w,_length:0}),"top"===tt||"left"===tt?Ie._offset:"bottom"===tt||"right"===tt?Ie._offset+Ie._length:void 0},H.shouldShowZeroLine=function(Ee,De,Ie){var He=e.simpleMap(De.range,De.r2l);return He[0]*He[1]<=0&&De.zeroline&&("linear"===De.type||"-"===De.type)&&!(De.rangebreaks&&De.maskBreaks(0)===P)&&(Ct(De,0)||!function(Ye,tt,ot,st){var bt=ot._mainAxis;if(bt){var wt=Ye._fullLayout,Ut=tt._id.charAt(0),Kt=H.counterLetter(tt._id),vt=tt._offset+(Math.abs(st[0])<Math.abs(st[1])==("x"===Ut)?0:tt._length),$t=wt._plots[ot._mainSubplot];if(!($t.mainplotinfo||$t).overlays.length)return Et(ot);for(var Dt=H.list(Ye,Kt),Pt=0;Pt<Dt.length;Pt++){var je=Dt[Pt];if(je._mainAxis===bt&&Et(je))return!0}}function Et(rt){if(!rt.showline||!rt.linewidth)return!1;var pt=Math.max((rt.linewidth+tt.zerolinewidth)/2,1);function It(fn){return"number"==typeof fn&&Math.abs(fn-vt)<pt}if(It(rt._mainLinePosition)||It(rt._mainMirrorPosition))return!0;var jt=rt._linepositions||{};for(var Qt in jt)if(It(jt[Qt][0])||It(jt[Qt][1]))return!0}}(Ee,De,Ie,He)||function(Ye,tt){for(var ot=Ye._fullData,st=tt._mainSubplot,bt=tt._id.charAt(0),wt=0;wt<ot.length;wt++){var Ut=ot[wt];if(!0===Ut.visible&&Ut.xaxis+Ut.yaxis===st&&(_.traceIs(Ut,"bar-like")&&Ut.orientation==={x:"h",y:"v"}[bt]||Ut.fill&&Ut.fill.charAt(Ut.fill.length-1)===bt))return!0}return!1}(Ee,De))},H.clipEnds=function(Ee,De){return De.filter(function(Ie){return Ct(Ee,Ie.x)})},H.allowAutoMargin=function(Ee){for(var De=H.list(Ee,"",!0),Ie=0;Ie<De.length;Ie++){var He=De[Ie];He.automargin&&(T.allowAutoMargin(Ee,Ft(He)),He.mirror&&T.allowAutoMargin(Ee,gt(He))),_.getComponentMethod("rangeslider","isVisible")(He)&&T.allowAutoMargin(Ee,ft(He))}},H.swap=function(Ee,De){for(var Ie=function(Ye,tt){var ot,st,bt=[];for(ot=0;ot<tt.length;ot++){var wt=[],Ut=Ye._fullData[tt[ot]].xaxis,Kt=Ye._fullData[tt[ot]].yaxis;if(Ut&&Kt){for(st=0;st<bt.length;st++)-1===bt[st].x.indexOf(Ut)&&-1===bt[st].y.indexOf(Kt)||wt.push(st);if(wt.length){var vt,Et=bt[wt[0]];if(wt.length>1)for(st=1;st<wt.length;st++)Bt(Et.x,(vt=bt[wt[st]]).x),Bt(Et.y,vt.y);Bt(Et.x,[Ut]),Bt(Et.y,[Kt])}else bt.push({x:[Ut],y:[Kt]})}}return bt}(Ee,De),He=0;He<Ie.length;He++)rn(Ee,Ie[He].x,Ie[He].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../../constants/numerical").BADNUM,_=b.isArrayOrTypedArray,e=b.isDateTime,o=b.cleanNumber,a=Math.round;function l(v,h){return h?y(v):"number"==typeof v}function i(v){return Math.max(1,(v-1)/1e3)}ue.exports=function(v,h,s){var w,d=v,p=s.noMultiCategory;if(_(d)&&!d.length)return"-";if(!p&&_((w=d)[0])&&_(w[1]))return"multicategory";if(p&&Array.isArray(d[0])){for(var f=[],g=0;g<d.length;g++)if(_(d[g]))for(var m=0;m<d[g].length;m++)f.push(d[g][m]);d=f}if(function(w,c){for(var E=w.length,M=i(E),S=0,C=0,O={},I=0;I<E;I+=M){var F=w[a(I)],L=String(F);O[L]||(O[L]=1,e(F,c)&&S++,y(F)&&C++)}return S>2*C}(d,h))return"date";var u="strict"!==s.autotypenumbers;return function(w,c){for(var E=w.length,M=i(E),S=0,C=0,O={},I=0;I<E;I+=M){var F=w[a(I)],L=String(F);if(!O[L]){O[L]=1;var P=typeof F;"boolean"===P?C++:(c?o(F)!==T:"number"===P)?S++:"string"===P&&C++}}return C>2*S}(d,u)?"category":function(w,c){for(var E=w.length,M=0;M<E;M++)if(l(w[M],c))return!0;return!1}(d,u)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../registry"),T=x("../../lib"),_=x("../../plot_api/plot_template"),e=x("../array_container_defaults"),o=x("./layout_attributes"),a=x("./tick_value_defaults"),l=x("./tick_mark_defaults"),i=x("./tick_label_defaults"),v=x("./prefix_suffix_defaults"),h=x("./category_order_defaults"),s=x("./line_grid_defaults"),d=x("./set_convert"),p=x("./constants").WEEKDAY_PATTERN,f=x("./constants").HOUR_PATTERN;function g(w,c,E){function M(P,j){return T.coerce(w,c,o.rangebreaks,P,j)}if(M("enabled")){var S=M("bounds");if(S&&S.length>=2){var C,O,I="";if(2===S.length)for(C=0;C<2;C++)if(O=u(S[C])){I=p;break}var N=M("pattern",I);if(N===p)for(C=0;C<2;C++)(O=u(S[C]))&&(c.bounds[C]=S[C]=O-1);if(N)for(C=0;C<2;C++)switch(O=S[C],N){case p:if(!y(O)||(O=+O)!==Math.floor(O)||O<0||O>=7)return void(c.enabled=!1);c.bounds[C]=S[C]=O;break;case f:if(!y(O)||(O=+O)<0||O>24)return void(c.enabled=!1);c.bounds[C]=S[C]=O}if(!1===E.autorange){var F=E.range;if(F[0]<F[1]){if(S[0]<F[0]&&S[1]>F[1])return void(c.enabled=!1)}else if(S[0]>F[0]&&S[1]<F[1])return void(c.enabled=!1)}}else{var L=M("values");if(!L||!L.length)return void(c.enabled=!1);M("dvalue")}}}ue.exports=function(w,c,E,M,S){var C,O=M.letter,I=M.font||{},N=M.splomStash||{},F=E("visible",!M.visibleDflt),P=c.type||(c._template||{}).type||"-";"date"===P&&(b.getComponentMethod("calendars","handleDefaults")(w,c,"calendar",M.calendar),M.noTicklabelmode||(C=E("ticklabelmode")));var j="";M.noTicklabelposition&&"multicategory"!==P||(j=T.coerce(w,c,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===C?["outside","inside"]:"x"===O?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),M.noTicklabeloverflow||E("ticklabeloverflow",-1!==j.indexOf("inside")?"hide past domain":"category"===P||"multicategory"===P?"allow":"hide past div"),d(c,S);var U=!c.isValidRange(w.range);U&&M.reverseDflt&&(U="reversed"),!E("autorange",U)||"linear"!==P&&"-"!==P||E("rangemode"),E("range"),c.cleanRange(),h(w,c,E,M),"category"===P||M.noHover||E("hoverformat");var $=E("color"),X=$!==o.color.dflt?$:I.color,te=N.label||S._dfltTitle[O];if(v(w,c,E,P,M),!F)return c;E("title.text",te),T.coerceFont(E,"title.font",{family:I.family,size:T.bigFont(I.size),color:X}),a(w,c,E,P);var ae=M.hasMinor;if(ae&&(_.newContainer(c,"minor"),a(w,c,E,P,{isMinor:!0})),i(w,c,E,P,M),l(w,c,E,M),ae){var J=M.isMinor;M.isMinor=!0,l(w,c,E,M),M.isMinor=J}s(w,c,E,{dfltColor:$,bgColor:M.bgColor,showGrid:M.showGrid,hasMinor:ae,attributes:o}),!ae||c.minor.ticks||c.minor.showgrid||delete c.minor,(c.showline||c.ticks)&&E("mirror"),M.automargin&&E("automargin");var ee,se="multicategory"===P;if(M.noTickson||"category"!==P&&!se||!c.ticks&&!c.showgrid||(se&&(ee="boundaries"),"boundaries"===E("tickson",ee)&&delete c.ticklabelposition),se&&E("showdividers")&&(E("dividercolor"),E("dividerwidth")),"date"===P)if(e(w,c,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:g}),c.rangebreaks.length){for(var G=0;G<c.rangebreaks.length;G++)if(c.rangebreaks[G].pattern===p){c._hasDayOfWeekBreaks=!0;break}if(d(c,S),S._has("scattergl")||S._has("splom"))for(var H=0;H<M.data.length;H++){var Y=M.data[H];"scattergl"!==Y.type&&"splom"!==Y.type||(Y.visible=!1,T.warn(Y.type+" traces do not work on axes with rangebreaks. Setting trace "+Y.index+" to `visible: false`."))}}else delete c.rangebreaks;return c};var m={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function u(w){if("string"==typeof w)return m[w.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(x,ue,le){"use strict";var y=x("../../constants/docs"),b=y.FORMAT_LINK,T=y.DATE_FORMAT_LINK;function _(o,a){return["Sets the "+o+" formatting rule"+(a?"for `"+a+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+b+"."].join(" ")}function e(o,a){return _(o,a)+[" And for dates see: "+T+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ue.exports={axisHoverFormat:function(o,a){return{valType:"string",dflt:"",editType:"none",description:(a?_:e)("hover text",o)+["By default the values are formatted using "+(a?"generic number format":"`"+o+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:_,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("./constants");function T(_,e){if(e&&e.length)for(var o=0;o<e.length;o++)if(e[o][_])return!0;return!1}le.id2name=function(_){if("string"==typeof _&&_.match(b.AX_ID_PATTERN)){var e=_.split(" ")[0].substr(1);return"1"===e&&(e=""),_.charAt(0)+"axis"+e}},le.name2id=function(_){if(_.match(b.AX_NAME_PATTERN)){var e=_.substr(5);return"1"===e&&(e=""),_.charAt(0)+e}},le.cleanId=function(_,e,o){var a=/( domain)$/.test(_);if("string"==typeof _&&_.match(b.AX_ID_PATTERN)&&(!e||_.charAt(0)===e)&&(!a||o)){var l=_.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===l&&(l=""),_.charAt(0)+l+(a&&o?" domain":"")}},le.list=function(_,e,o){var a=_._fullLayout;if(!a)return[];var l,i=le.listIds(_,e),v=new Array(i.length);for(l=0;l<i.length;l++){var h=i[l];v[l]=a[h.charAt(0)+"axis"+h.substr(1)]}if(!o){var s=a._subplots.gl3d||[];for(l=0;l<s.length;l++){var d=a[s[l]];e?v.push(d[e+"axis"]):v.push(d.xaxis,d.yaxis,d.zaxis)}}return v},le.listIds=function(_,e){var o=_._fullLayout;if(!o)return[];var a=o._subplots;return e?a[e+"axis"]:a.xaxis.concat(a.yaxis)},le.getFromId=function(_,e,o){var a=_._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===o?e=e.replace(/y[0-9]*/,""):"y"===o&&(e=e.replace(/x[0-9]*/,"")),a[le.id2name(e)]},le.getFromTrace=function(_,e,o){var a=_._fullLayout,l=null;if(y.traceIs(e,"gl3d")){var i=e.scene;"scene"===i.substr(0,5)&&(l=a[i][o+"axis"])}else l=le.getFromId(_,e[o+"axis"]||o);return l},le.idSort=function(_,e){var o=_.charAt(0),a=e.charAt(0);return o!==a?o>a?1:-1:+(_.substr(1)||1)-+(e.substr(1)||1)},le.ref2id=function(_){return!!/^[xyz]/.test(_)&&_.split(" ")[0]},le.isLinked=function(_,e){return T(e,_._axisMatchGroups)||T(e,_._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_){if("category"===b.type){var e,o=y.categoryarray,a=Array.isArray(o)&&o.length>0;a&&(e="array");var l,i=T("categoryorder",e);"array"===i&&(l=T("categoryarray")),a||"array"!==i||(i=b.categoryorder="trace"),"trace"===i?b._initialCategories=[]:"array"===i?b._initialCategories=l.slice():(l=function(v,h){var s,d,p,f=h.dataAttr||v._id.charAt(0),g={};if(h.axData)s=h.axData;else for(s=[],d=0;d<h.data.length;d++){var m=h.data[d];m[f+"axis"]===v._id&&s.push(m)}for(d=0;d<s.length;d++){var u=s[d][f];for(p=0;p<u.length;p++){var w=u[p];null!=w&&(g[w]=1)}}return Object.keys(g)}(b,_).sort(),"category ascending"===i?b._initialCategories=l:"category descending"===i&&(b._initialCategories=l.reverse()))}}},{}],560:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../../constants/numerical"),_=T.ONEDAY,e=T.ONEWEEK;le.dtick=function(o,a){var l="log"===a,i="date"===a,v="category"===a,h=i?_:1;if(!o)return h;if(y(o))return(o=Number(o))<=0?h:v?Math.max(1,Math.round(o)):i?Math.max(.1,o):o;if("string"!=typeof o||!i&&!l)return h;var s=o.charAt(0),d=o.substr(1);return(d=y(d)?Number(d):0)<=0||!(i&&"M"===s&&d===Math.round(d)||l&&"L"===s||l&&"D"===s&&(1===d||2===d))?h:o},le.tick0=function(o,a,l,i){return"date"===a?b.cleanDate(o,b.dateTick0(l,i%e==0?1:0)):"D1"!==i&&"D2"!==i?y(o)?Number(o):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(x,ue,le){"use strict";var y=x("../../lib/regex").counter;ue.exports={idRegex:{x:y("x","( domain)?"),y:y("y","( domain)?")},attrRegex:y("[xy]axis"),xAxisMatch:y("xaxis"),yAxisMatch:y("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./autorange"),T=x("./axis_ids").id2name,_=x("./layout_attributes"),e=x("./scale_zoom"),o=x("./set_convert"),a=x("../../constants/numerical").ALMOST_EQUAL,l=x("../../constants/alignment").FROM_BL;function i(g,m,u){var w=u.axIds,c=u.layoutOut,E=u.hasImage,M=c._axisConstraintGroups,S=c._axisMatchGroups,C=m._id,O=C.charAt(0),I=((c._splomAxes||{})[O]||{})[C]||{},N=m._id,F="x"===N.charAt(0);function L(oe,W){return y.coerce(g,m,_,oe,W)}m._matchGroup=null,m._constraintGroup=null,L("constrain",E?"domain":"range"),y.coerce(g,m,{constraintoward:{valType:"enumerated",values:F?["left","center","right"]:["bottom","middle","top"],dflt:F?"center":"middle"}},"constraintoward");var P,j,U=m.type,$=[];for(P=0;P<w.length;P++)(j=w[P])!==N&&c[T(j)].type===U&&$.push(j);var X=h(M,N);if(X){var te=[];for(P=0;P<$.length;P++)X[j=$[P]]||te.push(j);$=te}var ae,J,ee=$.length;ee&&(g.matches||I.matches)&&(ae=y.coerce(g,m,{matches:{valType:"enumerated",values:$,dflt:-1!==$.indexOf(I.matches)?I.matches:void 0}},"matches"));var se=E&&!F?m.anchor:void 0;if(ee&&!ae&&(g.scaleanchor||se)&&(J=y.coerce(g,m,{scaleanchor:{valType:"enumerated",values:$}},"scaleanchor",se)),ae){m._matchGroup=s(S,N,ae,1);var G=c[T(ae)],H=v(c,m)/v(c,G);F!==("x"===ae.charAt(0))&&(H=(F?"x":"y")+H),s(M,N,ae,H)}else g.matches&&-1!==w.indexOf(g.matches)&&y.warn("ignored "+m._name+'.matches: "'+g.matches+'" to avoid an infinite loop');if(J){var Y=L("scaleratio");Y||(Y=m.scaleratio=1),s(M,N,J,Y)}else g.scaleanchor&&-1!==w.indexOf(g.scaleanchor)&&y.warn("ignored "+m._name+'.scaleanchor: "'+g.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function v(g,m){var u=m.domain;return u||(u=g[T(m.overlaying)].domain),u[1]-u[0]}function h(g,m){for(var u=0;u<g.length;u++)if(g[u][m])return g[u];return null}function s(g,m,u,w){var c,E,M,S,C,O=h(g,m);null===O?((O={})[m]=1,C=g.length,g.push(O)):C=g.indexOf(O);var I=Object.keys(O);for(c=0;c<g.length;c++)if(M=g[c],c!==C&&M[u]){var N=M[u];for(E=0;E<I.length;E++)M[S=I[E]]=d(N,d(w,O[S]));return void g.splice(C,1)}if(1!==w)for(E=0;E<I.length;E++){var F=I[E];O[F]=d(w,O[F])}O[u]=1}function d(g,m){var u,w,c="",E="";"string"==typeof g&&(u=(c=g.match(/^[xy]*/)[0]).length,g=+g.substr(u)),"string"==typeof m&&(w=(E=m.match(/^[xy]*/)[0]).length,m=+m.substr(w));var M=g*m;return u||w?u&&w&&c.charAt(0)!==E.charAt(0)?u===w?M:(u>w?c.substr(w):E.substr(u))+M:c+E+g*m:M}function p(g,m){for(var u=m._size,w=u.h/u.w,c={},E=Object.keys(g),M=0;M<E.length;M++){var S=E[M],C=g[S];if("string"==typeof C){var O=C.match(/^[xy]*/)[0],I=O.length;C=+C.substr(I);for(var N="y"===O.charAt(0)?w:1/w,F=0;F<I;F++)C*=N}c[S]=C}return c}function f(g,m){var u=g._inputDomain,c=u[0]+(u[1]-u[0])*l[g.constraintoward];g.domain=g._input.domain=[c+(u[0]-c)/m,c+(u[1]-c)/m],g.setScale()}le.handleDefaults=function(g,m,u){var w,c,E,M,S,C,O,I,N=u.axIds,F=u.axHasImage,L=m._axisConstraintGroups=[],P=m._axisMatchGroups=[];for(w=0;w<N.length;w++)i(S=g[M=T(N[w])],C=m[M],{axIds:N,layoutOut:m,hasImage:F[M]});function j(G,H){for(w=0;w<G.length;w++)for(E in c=G[w])m[T(E)][H]=c}for(j(P,"_matchGroup"),w=0;w<L.length;w++)for(E in c=L[w])if((C=m[T(E)]).fixedrange){for(var U in c){var $=T(U);!1===(g[$]||{}).fixedrange&&y.warn("fixedrange was specified as false for axis "+$+" but was overridden because another axis in its constraint group has fixedrange true"),m[$].fixedrange=!0}break}for(w=0;w<L.length;){for(E in c=L[w]){(C=m[T(E)])._matchGroup&&Object.keys(C._matchGroup).length===Object.keys(c).length&&(L.splice(w,1),w--);break}w++}j(L,"_constraintGroup");var X=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],te=!1,ae=!1;function J(){I=C[O],"rangebreaks"===O&&(ae=C._hasDayOfWeekBreaks)}for(w=0;w<P.length;w++){c=P[w];for(var ee=0;ee<X.length;ee++){var se;for(E in O=X[ee],I=null,c)if(S=g[M=T(E)],O in(C=m[M])){if(!C.matches&&(se=C,O in S)){J();break}null===I&&O in S&&J()}if("range"===O&&I&&(te=!0),"autorange"===O&&null===I&&te&&(I=!1),null===I&&O in se&&(I=se[O]),null!==I)for(E in c)(C=m[T(E)])[O]="range"===O?I.slice():I,"rangebreaks"===O&&(C._hasDayOfWeekBreaks=ae,o(C,m))}}},le.enforce=function(g){var m,u,w,c,E,M,S,C,O=g._fullLayout,I=O._axisConstraintGroups||[];for(m=0;m<I.length;m++){w=p(I[m],O);var N=Object.keys(w),F=1/0,L=0,P=1/0,j={},U={},$=!1;for(u=0;u<N.length;u++)U[c=N[u]]=E=O[T(c)],E._inputDomain?E.domain=E._inputDomain.slice():E._inputDomain=E.domain.slice(),E._inputRange||(E._inputRange=E.range.slice()),E.setScale(),j[c]=M=Math.abs(E._m)/w[c],F=Math.min(F,M),"domain"!==E.constrain&&E._constraintShrinkable||(P=Math.min(P,M)),delete E._constraintShrinkable,L=Math.max(L,M),"domain"===E.constrain&&($=!0);if(!(F>a*L)||$)for(u=0;u<N.length;u++)if(M=j[c=N[u]],S=(E=U[c]).constrain,M!==P||"domain"===S)if(C=M/P,"range"===S)e(E,C);else{var X=E._inputDomain,te=(E.domain[1]-E.domain[0])/(X[1]-X[0]),ae=(E.r2l(E.range[1])-E.r2l(E.range[0]))/(E.r2l(E._inputRange[1])-E.r2l(E._inputRange[0]));if((C/=te)*ae<1){E.domain=E._input.domain=X.slice(),e(E,C);continue}if(ae<1&&(E.range=E._input.range=E._inputRange.slice(),C*=ae),E.autorange){var J=E.r2l(E.range[0]),ee=E.r2l(E.range[1]),se=(J+ee)/2,G=se,H=se,Y=Math.abs(ee-se),oe=se-Y*C*1.0001,W=se+Y*C*1.0001,ne=b.makePadFn(O,E,0),re=b.makePadFn(O,E,1);f(E,C);var ce,fe,me=Math.abs(E._m),pe=b.concatExtremes(g,E),we=pe.min,ye=pe.max;for(fe=0;fe<we.length;fe++)(ce=we[fe].val-ne(we[fe])/me)>oe&&ce<G&&(G=ce);for(fe=0;fe<ye.length;fe++)(ce=ye[fe].val+re(ye[fe])/me)<W&&ce>H&&(H=ce);C/=(H-G)/(2*Y),G=E.l2r(G),H=E.l2r(H),E.range=E._input.range=J<ee?[G,H]:[H,G]}f(E,C)}}},le.getAxisGroup=function(g,m){for(var u=g._axisMatchGroups,w=0;w<u.length;w++)if(u[w][m])return"g"+w;return m},le.clean=function(g,m){if(m._inputDomain){for(var u=!1,w=m._id,c=g._fullLayout._axisConstraintGroups,E=0;E<c.length;E++)if(c[E][w]){u=!0;break}u&&"domain"===m.constrain||(m._input.domain=m.domain=m._inputDomain,delete m._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=b.numberFormat,_=x("tinycolor2"),e=x("has-passive-events"),o=x("../../registry"),a=b.strTranslate,l=x("../../lib/svg_text_utils"),i=x("../../components/color"),v=x("../../components/drawing"),h=x("../../components/fx"),s=x("./axes"),d=x("../../lib/setcursor"),p=x("../../components/dragelement"),f=x("../../components/dragelement/helpers"),g=f.selectingOrDrawing,m=f.freeMode,u=x("../../constants/alignment").FROM_TL,w=x("../../lib/clear_gl_canvases"),c=x("../../plot_api/subroutines").redrawReglTraces,E=x("../plots"),M=x("./axis_ids").getFromId,S=x("./select").prepSelect,C=x("./select").clearSelect,O=x("./select").selectOnClick,I=x("./scale_zoom"),N=x("./constants"),F=N.MINDRAG,L=N.MINZOOM,P=!0;function j(ce,fe,me,pe){var we=b.ensureSingle(ce.draglayer,fe,me,function(ye){ye.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ce.id)});return we.call(d,pe),we.node()}function U(ce,fe,me,pe,we,ye,Te){var Le=j(ce,"rect",fe,me);return y.select(Le).call(v.setRect,pe,we,ye,Te),Le}function $(ce,fe){for(var me=0;me<ce.length;me++)if(!ce[me].fixedrange)return fe;return""}function X(ce,fe,me,pe,we){for(var ye=0;ye<ce.length;ye++){var Te=ce[ye];if(!Te.fixedrange)if(Te.rangebreaks){var Le="y"===Te._id.charAt(0),Re=Le?1-me:me;pe[Te._name+".range[0]"]=Te.l2r(Te.p2l((Le?1-fe:fe)*Te._length)),pe[Te._name+".range[1]"]=Te.l2r(Te.p2l(Re*Te._length))}else{var Ve=Te._rl[0],_e=Te._rl[1]-Ve;pe[Te._name+".range[0]"]=Te.l2r(Ve+_e*fe),pe[Te._name+".range[1]"]=Te.l2r(Ve+_e*me)}}if(we&&we.length){var Ae=(fe+(1-me))/2;X(we,Ae,1-Ae,pe,[])}}function te(ce,fe){for(var me=0;me<ce.length;me++){var pe=ce[me];if(!pe.fixedrange)if(pe.rangebreaks){var we=pe._length,ye=(pe.p2l(0+fe)-pe.p2l(0)+(pe.p2l(we+fe)-pe.p2l(we)))/2;pe.range=[pe.l2r(pe._rl[0]-ye),pe.l2r(pe._rl[1]-ye)]}else pe.range=[pe.l2r(pe._rl[0]-fe/pe._m),pe.l2r(pe._rl[1]-fe/pe._m)]}}function ae(ce){return 1-(ce>=0?Math.min(ce,.9):1/(1/Math.max(ce,-.3)+3.222))}function J(ce,fe,me,pe,we){return ce.append("path").attr("class","zoombox").style({fill:fe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(me,pe)).attr("d",we+"Z")}function ee(ce,fe,me){return ce.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(fe,me)).attr("d","M0,0Z")}function se(ce,fe,me,pe,we,ye){ce.attr("d",pe+"M"+me.l+","+me.t+"v"+me.h+"h"+me.w+"v-"+me.h+"h-"+me.w+"Z"),G(ce,fe,we,ye)}function G(ce,fe,me,pe){me||(ce.transition().style("fill",pe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),fe.transition().style("opacity",1).duration(200))}function H(ce){y.select(ce).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Y(ce){P&&ce.data&&ce._context.showTips&&(b.notifier(b._(ce,"Double-click to zoom back out"),"long"),P=!1)}function oe(ce){var fe=Math.floor(Math.min(ce.b-ce.t,ce.r-ce.l,L)/2);return"M"+(ce.l-3.5)+","+(ce.t-.5+fe)+"h3v"+-fe+"h"+fe+"v-3h-"+(fe+3)+"ZM"+(ce.r+3.5)+","+(ce.t-.5+fe)+"h-3v"+-fe+"h"+-fe+"v-3h"+(fe+3)+"ZM"+(ce.r+3.5)+","+(ce.b+.5-fe)+"h-3v"+fe+"h"+-fe+"v3h"+(fe+3)+"ZM"+(ce.l-3.5)+","+(ce.b+.5-fe)+"h3v"+fe+"h"+fe+"v3h-"+(fe+3)+"Z"}function W(ce,fe,me,pe,we){for(var ye,Te,Le,Oe,Re=!1,Ve={},_e={},Ae=(we||{}).xaHash,Fe=(we||{}).yaHash,Pe=0;Pe<fe.length;Pe++){var Be=fe[Pe];for(ye in me)if(Be[ye]){for(Le in Be)we&&(Ae[Le]||Fe[Le])||("x"===Le.charAt(0)?me:pe)[Le]||(Ve[Le]=ye);for(Te in pe)we&&(Ae[Te]||Fe[Te])||!Be[Te]||(Re=!0)}for(Te in pe)if(Be[Te])for(Oe in Be)we&&(Ae[Oe]||Fe[Oe])||("x"===Oe.charAt(0)?me:pe)[Oe]||(_e[Oe]=Te)}Re&&(b.extendFlat(Ve,_e),_e={});var qe={},We=[];for(Le in Ve){var Je=M(ce,Le);We.push(Je),qe[Je._id]=Je}var ut={},Ge=[];for(Oe in _e){var Ke=M(ce,Oe);Ge.push(Ke),ut[Ke._id]=Ke}return{xaHash:qe,yaHash:ut,xaxes:We,yaxes:Ge,xLinks:Ve,yLinks:_e,isSubplotConstrained:Re}}function ne(ce,fe){if(e){var me=void 0!==ce.onwheel?"wheel":"mousewheel";ce._onwheel&&ce.removeEventListener(me,ce._onwheel),ce._onwheel=fe,ce.addEventListener(me,fe,{passive:!1})}else void 0!==ce.onwheel?ce.onwheel=fe:void 0!==ce.onmousewheel?ce.onmousewheel=fe:ce.isAddedWheelEvent||(ce.isAddedWheelEvent=!0,ce.addEventListener("wheel",fe,{passive:!1}))}function re(ce){var fe=[];for(var me in ce)fe.push(ce[me]);return fe}ue.exports={makeDragBox:function(ce,fe,me,pe,we,ye,Te,Le){var Oe,Re,Ve,_e,Ae,Fe,Pe,Be,qe,We,Je,ut,Ge,Ke,nt,it,ht,Tt,Ct,Vt,Ft,gt,ft,Bt=ce._fullLayout._zoomlayer,rn=Te+Le==="nsew",un=1===(Te+Le).length;function pn(){if(qe=(Oe=fe.xaxis)._length,We=(Re=fe.yaxis)._length,Pe=Oe._offset,Be=Re._offset,(Ve={})[Oe._id]=Oe,(_e={})[Re._id]=Re,Te&&Le)for(var cn=fe.overlays,vn=0;vn<cn.length;vn++){var hn=cn[vn].xaxis;Ve[hn._id]=hn;var Dn=cn[vn].yaxis;_e[Dn._id]=Dn}Ae=re(Ve),Fe=re(_e),Ge=$(Ae,Le),Ke=$(Fe,Te),nt=!Ke&&!Ge,ut=W(ce,ce._fullLayout._axisMatchGroups,Ve,_e);var Pn=(Je=W(ce,ce._fullLayout._axisConstraintGroups,Ve,_e,ut)).isSubplotConstrained||ut.isSubplotConstrained;it=Le||Pn,ht=Te||Pn;var $n=ce._fullLayout;Tt=$n._has("scattergl"),Ct=$n._has("splom"),Vt=$n._has("svg")}pn();var cn,dn=(cn=Ke+Ge)?"nsew"===cn?rn?"":"pan"===ce._fullLayout.dragmode?"move":"crosshair":cn.toLowerCase()+"-resize":"pointer",Mn=U(fe,Te+Le+"drag",dn,me,pe,we,ye);if(nt&&!rn)return Mn.onmousedown=null,Mn.style.pointerEvents="none",Mn;var ln,Ee,De,Ie,He,Ye,tt,ot,st,bt,wt={element:Mn,gd:ce,plotinfo:fe};function Ut(){wt.plotinfo.selection=!1,C(ce)}function Kt(cn,vn){var zr,pr,Br,fr,Nr,hn=wt.gd;if(hn._fullLayout._activeShapeIndex>=0)hn._fullLayout._deactivateShape(hn);else{var Dn=hn._fullLayout.clickmode;if(H(hn),2!==cn||un||function Qt(){if(!ce._transitioningWithDuration){var cn=ce._context.doubleClick,vn=[];Ge&&(vn=vn.concat(Ae)),Ke&&(vn=vn.concat(Fe)),ut.xaxes&&(vn=vn.concat(ut.xaxes)),ut.yaxes&&(vn=vn.concat(ut.yaxes));var hn,Dn,Pn,$n={};if("reset+autosize"===cn)for(cn="autosize",Dn=0;Dn<vn.length;Dn++)if((hn=vn[Dn])._rangeInitial&&(hn.range[0]!==hn._rangeInitial[0]||hn.range[1]!==hn._rangeInitial[1])||!hn._rangeInitial&&!hn.autorange){cn="reset";break}if("autosize"===cn)for(Dn=0;Dn<vn.length;Dn++)(hn=vn[Dn]).fixedrange||($n[hn._name+".autorange"]=!0);else if("reset"===cn)for((Ge||Je.isSubplotConstrained)&&(vn=vn.concat(Je.xaxes)),Ke&&!Je.isSubplotConstrained&&(vn=vn.concat(Je.yaxes)),Je.isSubplotConstrained&&(Ge?Ke||(vn=vn.concat(Fe)):vn=vn.concat(Ae)),Dn=0;Dn<vn.length;Dn++)(hn=vn[Dn]).fixedrange||(hn._rangeInitial?($n[hn._name+".range[0]"]=(Pn=hn._rangeInitial)[0],$n[hn._name+".range[1]"]=Pn[1]):$n[hn._name+".autorange"]=!0);ce.emit("plotly_doubleclick",null),o.call("_guiRelayout",ce,$n)}}(),rn)Dn.indexOf("select")>-1&&O(vn,hn,Ae,Fe,fe.id,wt),Dn.indexOf("event")>-1&&h.click(hn,vn,fe.id);else if(1===cn&&un){var Pn=Te?Re:Oe,$n="s"===Te||"w"===Le?0:1,rr=Pn._name+".range["+$n+"]",er=(fr=(zr=Pn).range[pr=$n],Nr=Math.abs(fr-zr.range[1-pr]),"date"===zr.type?fr:"log"===zr.type?(Br=Math.ceil(Math.max(0,-Math.log(Nr)/Math.LN10))+3,T("."+Br+"g")(Math.pow(10,fr))):(Br=Math.floor(Math.log(Math.abs(fr))/Math.LN10)-Math.floor(Math.log(Nr)/Math.LN10)+4,T("."+String(Br)+"g")(fr))),or="left",Zr="middle";if(Pn.fixedrange)return;Te?(Zr="n"===Te?"top":"bottom","right"===Pn.side&&(or="right")):"e"===Le&&(or="right"),hn._context.showAxisRangeEntryBoxes&&y.select(Mn).call(l.makeEditable,{gd:hn,immediate:!0,background:hn._fullLayout.paper_bgcolor,text:String(er),fill:Pn.tickfont?Pn.tickfont.color:"#444",horizontalAlign:or,verticalAlign:Zr}).on("edit",function(zr){var pr=Pn.d2r(zr);void 0!==pr&&o.call("_guiRelayout",hn,rr,pr)})}}}function vt(cn,vn){if(ce._transitioningWithDuration)return!1;var Zr,zr,hn=Math.max(0,Math.min(qe,gt*cn+ln)),Dn=Math.max(0,Math.min(We,ft*vn+Ee)),Pn=Math.abs(hn-ln),$n=Math.abs(Dn-Ee);function rr(){tt="",De.r=De.l,De.t=De.b,st.attr("d","M0,0Z")}if(De.l=Math.min(ln,hn),De.r=Math.max(ln,hn),De.t=Math.min(Ee,Dn),De.b=Math.max(Ee,Dn),Je.isSubplotConstrained)Pn>L||$n>L?(tt="xy",Pn/qe>$n/We?($n=Pn*We/qe,Ee>Dn?De.t=Ee-$n:De.b=Ee+$n):(Pn=$n*qe/We,ln>hn?De.l=ln-Pn:De.r=ln+Pn),st.attr("d",oe(De))):rr();else if(ut.isSubplotConstrained)if(Pn>L||$n>L){tt="xy";var er=Math.min(De.l/qe,(We-De.b)/We),or=Math.max(De.r/qe,(We-De.t)/We);De.l=er*qe,De.r=or*qe,De.b=(1-er)*We,De.t=(1-or)*We,st.attr("d",oe(De))}else rr();else!Ke||$n<Math.min(Math.max(.6*Pn,F),L)?Pn<F||!Ge?rr():(De.t=0,De.b=We,tt="x",st.attr("d","M"+((Zr=De).l-.5)+","+((zr=Ee)-L-.5)+"h-3v"+(2*L+1)+"h3ZM"+(Zr.r+.5)+","+(zr-L-.5)+"h3v"+(2*L+1)+"h-3Z")):!Ge||Pn<Math.min(.6*$n,L)?(De.l=0,De.r=qe,tt="y",st.attr("d",function(Zr,zr){return"M"+(zr-L-.5)+","+(Zr.t-.5)+"v-3h"+(2*L+1)+"v3ZM"+(zr-L-.5)+","+(Zr.b+.5)+"v3h"+(2*L+1)+"v-3Z"}(De,ln))):(tt="xy",st.attr("d",oe(De)));De.w=De.r-De.l,De.h=De.b-De.t,tt&&(bt=!0),ce._dragged=bt,se(ot,st,De,He,Ye,Ie),Et(),ce.emit("plotly_relayouting",Ft),Ye=!0}function Et(){Ft={},"xy"!==tt&&"x"!==tt||(X(Ae,De.l/qe,De.r/qe,Ft,Je.xaxes),It("x",Ft)),"xy"!==tt&&"y"!==tt||(X(Fe,(We-De.b)/We,(We-De.t)/We,Ft,Je.yaxes),It("y",Ft))}function $t(){Et(),H(ce),fn(),Y(ce)}wt.prepFn=function(cn,vn,hn){var Dn=wt.dragmode,Pn=ce._fullLayout.dragmode;Pn!==Dn&&(wt.dragmode=Pn),pn(),gt=ce._fullLayout._invScaleX,ft=ce._fullLayout._invScaleY,nt||(rn?cn.shiftKey?"pan"===Pn?Pn="zoom":g(Pn)||(Pn="pan"):cn.ctrlKey&&(Pn="pan"):Pn="pan"),wt.minDrag=m(Pn)?1:void 0,g(Pn)?(wt.xaxes=Ae,wt.yaxes=Fe,S(cn,vn,hn,wt,Pn)):(wt.clickFn=Kt,g(Dn)&&Ut(),nt||("zoom"===Pn?(wt.moveFn=vt,wt.doneFn=$t,wt.minDrag=1,function($n,rr,er){var or=Mn.getBoundingClientRect();ln=rr-or.left,Ee=er-or.top,ce._fullLayout._calcInverseTransform(ce);var Zr=b.apply3DTransform(ce._fullLayout._invTransform)(ln,Ee);De={l:ln=Zr[0],r:ln,w:0,t:Ee=Zr[1],b:Ee,h:0},Ie=ce._hmpixcount?ce._hmlumcount/ce._hmpixcount:_(ce._fullLayout.plot_bgcolor).getLuminance(),Ye=!1,tt="xy",bt=!1,ot=J(Bt,Ie,Pe,Be,He="M0,0H"+qe+"V"+We+"H0V0"),st=ee(Bt,Pe,Be)}(0,vn,hn)):"pan"===Pn&&(wt.moveFn=pt,wt.doneFn=fn))),ce._fullLayout._redrag=function(){var $n=ce._dragdata;$n&&$n.element===Mn&&(g(ce._fullLayout.dragmode)||(pn(),an([0,0,qe,We]),wt.moveFn($n.dx,$n.dy)))}},p.init(wt);var Dt=[0,0,qe,We],Pt=null,je=N.REDRAWDELAY,rt=fe.mainplot?ce._fullLayout._plots[fe.mainplot]:fe;function pt(cn,vn){if(cn*=gt,vn*=ft,!ce._transitioningWithDuration){if(ce._fullLayout._replotting=!0,"ew"===Ge||"ns"===Ke){var hn=Ge?-cn:0,Dn=Ke?-vn:0;if(ut.isSubplotConstrained){if(Ge&&Ke){var Pn=(cn/qe-vn/We)/2;hn=-(cn=Pn*qe),Dn=-(vn=-Pn*We)}Ke?hn=-Dn*qe/We:Dn=-hn*We/qe}return Ge&&(te(Ae,cn),It("x")),Ke&&(te(Fe,vn),It("y")),an([hn,Dn,qe,We]),jt(),void ce.emit("plotly_relayouting",Ft)}var $n,rr,er="w"===Ge==("n"===Ke)?1:-1;if(Ge&&Ke&&(Je.isSubplotConstrained||ut.isSubplotConstrained)){var or=(cn/qe+er*vn/We)/2;cn=or*qe,vn=er*or*We}if("w"===Ge?cn=Br(Ae,0,cn):"e"===Ge?cn=Br(Ae,1,-cn):Ge||(cn=0),"n"===Ke?vn=Br(Fe,1,vn):"s"===Ke?vn=Br(Fe,0,-vn):Ke||(vn=0),$n="w"===Ge?cn:0,rr="n"===Ke?vn:0,Je.isSubplotConstrained&&!ut.isSubplotConstrained||ut.isSubplotConstrained&&Ge&&Ke&&er>0){var Zr;if(ut.isSubplotConstrained||!Ge&&1===Ke.length){for(Zr=0;Zr<Ae.length;Zr++)Ae[Zr].range=Ae[Zr]._r.slice(),I(Ae[Zr],1-vn/We);$n=(cn=vn*qe/We)/2}if(ut.isSubplotConstrained||!Ke&&1===Ge.length){for(Zr=0;Zr<Fe.length;Zr++)Fe[Zr].range=Fe[Zr]._r.slice(),I(Fe[Zr],1-cn/qe);rr=(vn=cn*We/qe)/2}}ut.isSubplotConstrained&&Ke||It("x"),ut.isSubplotConstrained&&Ge||It("y");var zr=qe-cn,pr=We-vn;!ut.isSubplotConstrained||Ge&&Ke||(Ge?(rr=$n?0:cn*We/qe,pr=zr*We/qe):($n=rr?0:vn*qe/We,zr=pr*qe/We)),an([$n,rr,zr,pr]),jt(),ce.emit("plotly_relayouting",Ft)}function Br(fr,Nr,xi){for(var Qn,Er,kr=1-Nr,sr=0;sr<fr.length;sr++){var ci=fr[sr];if(!ci.fixedrange){Qn=ci,Er=ci._rl[kr]+(ci._rl[Nr]-ci._rl[kr])/ae(xi/ci._length);var oi=ci.l2r(Er);!1!==oi&&void 0!==oi&&(ci.range[Nr]=oi)}}return Qn._length*(Qn._rl[Nr]-Er)/(Qn._rl[Nr]-Qn._rl[kr])}}function It(cn,vn){for(var hn=ut.isSubplotConstrained?{x:Fe,y:Ae}[cn]:ut[cn+"axes"],Dn=ut.isSubplotConstrained?{x:Ae,y:Fe}[cn]:[],Pn=0;Pn<hn.length;Pn++){var $n=hn[Pn],rr=$n._id,er=ut.xLinks[rr]||ut.yLinks[rr],or=Dn[0]||Ve[er]||_e[er];or&&(vn?(vn[$n._name+".range[0]"]=vn[or._name+".range[0]"],vn[$n._name+".range[1]"]=vn[or._name+".range[1]"]):$n.range=or.range.slice())}}function jt(){var cn,vn=[];function hn($n){for(cn=0;cn<$n.length;cn++)$n[cn].fixedrange||vn.push($n[cn]._id)}for(it&&(hn(Ae),hn(Je.xaxes),hn(ut.xaxes)),ht&&(hn(Fe),hn(Je.yaxes),hn(ut.yaxes)),Ft={},cn=0;cn<vn.length;cn++){var Pn=M(ce,vn[cn]);s.drawOne(ce,Pn,{skipTitle:!0}),Ft[Pn._name+".range[0]"]=Pn.range[0],Ft[Pn._name+".range[1]"]=Pn.range[1]}s.redrawComponents(ce,vn)}function fn(){an([0,0,qe,We]),b.syncOrAsync([E.previousPromises,function(){ce._fullLayout._replotting=!1,o.call("_guiRelayout",ce,Ft)}],ce)}function an(cn){var vn,hn,Dn,Pn,$n=ce._fullLayout,rr=$n._plots,er=$n._subplots.cartesian;if(Ct&&o.subplotsRegistry.splom.drag(ce),Tt)for(vn=0;vn<er.length;vn++)if(Dn=(hn=rr[er[vn]]).xaxis,Pn=hn.yaxis,hn._scene){var or=b.simpleMap(Dn.range,Dn.r2l),Zr=b.simpleMap(Pn.range,Pn.r2l);hn._scene.update({range:[or[0],Zr[0],or[1],Zr[1]]})}if((Ct||Tt)&&(w(ce),c(ce)),Vt){var zr=cn[2]/Oe._length,pr=cn[3]/Re._length;for(vn=0;vn<er.length;vn++){Dn=(hn=rr[er[vn]]).xaxis,Pn=hn.yaxis;var Br,fr,Nr,xi,Er=(ht||ut.isSubplotConstrained)&&!Pn.fixedrange&&_e[Pn._id];if((it||ut.isSubplotConstrained)&&!Dn.fixedrange&&Ve[Dn._id]?(Br=zr,Nr=Le||ut.isSubplotConstrained?cn[0]:kn(Dn,Br)):ut.xaHash[Dn._id]?(Br=zr,Nr=cn[0]*Dn._length/Oe._length):ut.yaHash[Dn._id]?(Br=pr,Nr="ns"===Ke?-cn[1]*Dn._length/Re._length:kn(Dn,Br,{n:"top",s:"bottom"}[Ke])):Nr=Yn(Dn,Br=Sn(Dn,zr,pr)),Er?(fr=pr,xi=Te||ut.isSubplotConstrained?cn[1]:kn(Pn,fr)):ut.yaHash[Pn._id]?(fr=pr,xi=cn[1]*Pn._length/Re._length):ut.xaHash[Pn._id]?(fr=zr,xi="ew"===Ge?-cn[0]*Pn._length/Oe._length:kn(Pn,fr,{e:"right",w:"left"}[Ge])):xi=Yn(Pn,fr=Sn(Pn,zr,pr)),Br||fr){Br||(Br=1),fr||(fr=1);var kr=Dn._offset-Nr/Br,sr=Pn._offset-xi/fr;hn.clipRect.call(v.setTranslate,Nr,xi).call(v.setScale,Br,fr),hn.plot.call(v.setTranslate,kr,sr).call(v.setScale,1/Br,1/fr),Br===hn.xScaleFactor&&fr===hn.yScaleFactor||(v.setPointGroupScale(hn.zoomScalePts,Br,fr),v.setTextPointsScale(hn.zoomScaleTxt,Br,fr)),v.hideOutsideRangePoints(hn.clipOnAxisFalseTraces,hn),hn.xScaleFactor=Br,hn.yScaleFactor=fr}}}}function Sn(cn,vn,hn){return cn.fixedrange?0:it&&Je.xaHash[cn._id]?vn:ht&&(Je.isSubplotConstrained?Je.xaHash:Je.yaHash)[cn._id]?hn:0}function Yn(cn,vn){return vn?(cn.range=cn._r.slice(),I(cn,vn),kn(cn,vn)):0}function kn(cn,vn,hn){return cn._length*(1-vn)*u[hn||cn.constraintoward||"middle"]}return Te.length*Le.length!=1&&ne(Mn,function(cn){if(ce._context._scrollZoom.cartesian||ce._fullLayout._enablescrollzoom){if(Ut(),ce._transitioningWithDuration)return cn.preventDefault(),void cn.stopPropagation();pn(),clearTimeout(Pt);var vn=-cn.deltaY;if(isFinite(vn)||(vn=cn.wheelDelta/10),isFinite(vn)){var hn,Dn=Math.exp(-Math.min(Math.max(vn,-20),20)/200),Pn=rt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),$n=(cn.clientX-Pn.left)/Pn.width,rr=(Pn.bottom-cn.clientY)/Pn.height;if(it){for(Le||($n=.5),hn=0;hn<Ae.length;hn++)er(Ae[hn],$n,Dn);It("x"),Dt[2]*=Dn,Dt[0]+=Dt[2]*$n*(1/Dn-1)}if(ht){for(Te||(rr=.5),hn=0;hn<Fe.length;hn++)er(Fe[hn],rr,Dn);It("y"),Dt[3]*=Dn,Dt[1]+=Dt[3]*(1-rr)*(1/Dn-1)}an(Dt),jt(),ce.emit("plotly_relayouting",Ft),Pt=setTimeout(function(){ce._fullLayout&&(Dt=[0,0,qe,We],fn())},je),cn.preventDefault()}else b.log("Did not find wheel motion attributes: ",cn)}function er(or,Zr,zr){if(!or.fixedrange){var pr=b.simpleMap(or.range,or.r2l),Br=pr[0]+(pr[1]-pr[0])*Zr;or.range=pr.map(function(fr){return or.l2r(Br+(fr-Br)*zr)})}}}),Mn},makeDragger:j,makeRectDragger:U,makeZoombox:J,makeCorners:ee,updateZoombox:se,xyCorners:oe,transitionZoombox:G,removeZoombox:H,showDoubleClickNotifier:Y,attachWheelEventHandler:ne}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/fx"),T=x("../../components/dragelement"),_=x("../../lib/setcursor"),e=x("./dragbox").makeDragBox,o=x("./constants").DRAGGERSIZE;le.initInteractions=function(a){var l=a._fullLayout;if(a._context.staticPlot)y.select(a).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||{}).sort(function(v,h){if((l._plots[v].mainplot&&!0)===(l._plots[h].mainplot&&!0)){var s=v.split("y"),d=h.split("y");return s[0]===d[0]?Number(s[1]||1)-Number(d[1]||1):Number(s[0]||1)-Number(d[0]||1)}return l._plots[v].mainplot?1:-1}).forEach(function(v){var h=l._plots[v],s=h.xaxis,d=h.yaxis;if(!h.mainplot){var p=e(a,h,s._offset,d._offset,s._length,d._length,"ns","ew");p.onmousemove=function(m){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===v&&a._fullLayout._plots[v]&&b.hover(a,m,v)},b.hover(a,m,v),a._fullLayout._lasthover=p,a._fullLayout._hoversubplot=v},p.onmouseout=function(m){a._dragging||(a._fullLayout._hoversubplot=null,T.unhover(a,m))},a._context.showAxisDragHandles&&(e(a,h,s._offset-o,d._offset-o,o,o,"n","w"),e(a,h,s._offset+s._length,d._offset-o,o,o,"n","e"),e(a,h,s._offset-o,d._offset+d._length,o,o,"s","w"),e(a,h,s._offset+s._length,d._offset+d._length,o,o,"s","e"))}if(a._context.showAxisDragHandles){if(v===s._mainSubplot){var f=s._mainLinePosition;"top"===s.side&&(f-=o),e(a,h,s._offset+.1*s._length,f,.8*s._length,o,"","ew"),e(a,h,s._offset,f,.1*s._length,o,"","w"),e(a,h,s._offset+.9*s._length,f,.1*s._length,o,"","e")}if(v===d._mainSubplot){var g=d._mainLinePosition;"right"!==d.side&&(g-=o),e(a,h,g,d._offset+.1*d._length,o,.8*d._length,"ns",""),e(a,h,g,d._offset+.9*d._length,o,.1*d._length,"s",""),e(a,h,g,d._offset,o,.1*d._length,"n","")}}});var i=l._hoverlayer.node();i.onmousemove=function(v){v.target=a._fullLayout._lasthover,b.hover(a,v,l._hoversubplot)},i.onclick=function(v){v.target=a._fullLayout._lasthover,b.click(a,v)},i.onmousedown=function(v){a._fullLayout._lasthover.onmousedown(v)},le.updateFx(a)}},le.updateFx=function(a){var l=a._fullLayout;_(l._draggers,"pan"===l.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(x,ue,le){"use strict";ue.exports={clearOutlineControllers:function(y){var b=y._fullLayout._zoomlayer;b&&b.selectAll(".outline-controllers").remove()},clearSelect:function(y){var b=y._fullLayout._zoomlayer;b&&b.selectAll(".select-outline").remove(),y._fullLayout._drawing=!1}}},{}],566:[function(x,ue,le){"use strict";var y=x("../../lib").strTranslate;function b(T,_){switch(T.type){case"log":return T.p2d(_);case"date":return T.p2r(_,0,T.calendar);default:return T.p2r(_)}}ue.exports={p2r:b,r2p:function(T,_){switch(T.type){case"log":return T.d2p(_);case"date":return T.r2p(_,0,T.calendar);default:return T.r2p(_)}},axValue:function(T){var _="y"===T._id.charAt(0)?1:0;return function(e){return b(T,e[_])}},getTransform:function(T){return y(T.xaxis._offset,T.yaxis._offset)}}},{"../../lib":503}],567:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("./axis_ids");ue.exports=function(_){return function(e,o){var a=e[_];if(Array.isArray(a))for(var l=y.subplotsRegistry.cartesian,i=l.idRegex,v=o._subplots,h=v.xaxis,s=v.yaxis,d=v.cartesian,p=o._has("cartesian")||o._has("gl2d"),f=0;f<a.length;f++){var g=a[f];if(b.isPlainObject(g)){var m=T.cleanId(g.xref,"x",!1),u=T.cleanId(g.yref,"y",!1),w=i.x.test(m),c=i.y.test(u);if(w||c){p||b.pushUnique(o._basePlotModules,l);var E=!1;w&&-1===h.indexOf(m)&&(h.push(m),E=!0),c&&-1===s.indexOf(u)&&(s.push(u),E=!0),E&&w&&c&&d.push(m+u)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../registry"),T=x("../../lib"),_=x("../plots"),e=x("../../components/drawing"),o=x("../get_data").getModuleCalcData,a=x("./axis_ids"),l=x("./constants"),i=x("../../constants/xmlns_namespaces"),v=T.ensureSingle;function h(g,m,u){return T.ensureSingle(g,m,u,function(w){w.datum(u)})}function s(g,m,u,w,c){for(var E,M,S,C=l.traceLayerClasses,O=g._fullLayout,I=O._modules,N=[],F=[],L=0;L<I.length;L++){var P=(E=I[L]).name,j=b.modules[P].categories;if(j.svg){var U=E.layerName||P+"layer",$=E.plot;S=(M=o(u,$))[0],u=M[1],S.length&&N.push({i:C.indexOf(U),className:U,plotMethod:$,cdModule:S}),j.zoomScale&&F.push("."+U)}}N.sort(function(ae,J){return ae.i-J.i});var X=m.plot.selectAll("g.mlayer").data(N,function(ae){return ae.className});if(X.enter().append("g").attr("class",function(ae){return ae.className}).classed("mlayer",!0).classed("rangeplot",m.isRangePlot),X.exit().remove(),X.order(),X.each(function(ae){var J=y.select(this),ee=ae.className;ae.plotMethod(g,m,ae.cdModule,J,w,c),-1===l.clipOnAxisFalseQuery.indexOf("."+ee)&&e.setClipUrl(J,m.layerClipId,g)}),O._has("scattergl")&&(E=b.getModule("scattergl"),S=o(u,E)[0],E.plot(g,m,S)),!g._context.staticPlot&&(m._hasClipOnAxisFalse&&(m.clipOnAxisFalseTraces=m.plot.selectAll(l.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),F.length)){var te=m.plot.selectAll(F.join(",")).selectAll(".trace");m.zoomScalePts=te.selectAll("path.point"),m.zoomScaleTxt=te.selectAll(".textpoint")}}function d(g,m){var u=m.plotgroup,w=m.id,c=l.layerValue2layerClass[m.xaxis.layer],E=l.layerValue2layerClass[m.yaxis.layer],M=g._fullLayout._hasOnlyLargeSploms;if(m.mainplot){var S=m.mainplotinfo,C=S.plotgroup,O=w+"-x",I=w+"-y";m.minorGridlayer=S.minorGridlayer,m.gridlayer=S.gridlayer,m.zerolinelayer=S.zerolinelayer,v(S.overlinesBelow,"path",O),v(S.overlinesBelow,"path",I),v(S.overaxesBelow,"g",O),v(S.overaxesBelow,"g",I),m.plot=v(S.overplot,"g",w),v(S.overlinesAbove,"path",O),v(S.overlinesAbove,"path",I),v(S.overaxesAbove,"g",O),v(S.overaxesAbove,"g",I),m.xlines=C.select(".overlines-"+c).select("."+O),m.ylines=C.select(".overlines-"+E).select("."+I),m.xaxislayer=C.select(".overaxes-"+c).select("."+O),m.yaxislayer=C.select(".overaxes-"+E).select("."+I)}else if(M)m.xlines=v(u,"path","xlines-above"),m.ylines=v(u,"path","ylines-above"),m.xaxislayer=v(u,"g","xaxislayer-above"),m.yaxislayer=v(u,"g","yaxislayer-above");else{var N=v(u,"g","layer-subplot");m.shapelayer=v(N,"g","shapelayer"),m.imagelayer=v(N,"g","imagelayer"),m.minorGridlayer=v(u,"g","minor-gridlayer"),m.gridlayer=v(u,"g","gridlayer"),m.zerolinelayer=v(u,"g","zerolinelayer"),v(u,"path","xlines-below"),v(u,"path","ylines-below"),m.overlinesBelow=v(u,"g","overlines-below"),v(u,"g","xaxislayer-below"),v(u,"g","yaxislayer-below"),m.overaxesBelow=v(u,"g","overaxes-below"),m.plot=v(u,"g","plot"),m.overplot=v(u,"g","overplot"),m.xlines=v(u,"path","xlines-above"),m.ylines=v(u,"path","ylines-above"),m.overlinesAbove=v(u,"g","overlines-above"),v(u,"g","xaxislayer-above"),v(u,"g","yaxislayer-above"),m.overaxesAbove=v(u,"g","overaxes-above"),m.xlines=u.select(".xlines-"+c),m.ylines=u.select(".ylines-"+E),m.xaxislayer=u.select(".xaxislayer-"+c),m.yaxislayer=u.select(".yaxislayer-"+E)}M||(h(m.minorGridlayer,"g",m.xaxis._id),h(m.minorGridlayer,"g",m.yaxis._id),m.minorGridlayer.selectAll("g").map(function(F){return F[0]}).sort(a.idSort),h(m.gridlayer,"g",m.xaxis._id),h(m.gridlayer,"g",m.yaxis._id),m.gridlayer.selectAll("g").map(function(F){return F[0]}).sort(a.idSort)),m.xlines.style("fill","none").classed("crisp",!0),m.ylines.style("fill","none").classed("crisp",!0)}function p(g,m){if(g){var u={};for(var w in g.each(function(S){var C=S[0];y.select(this).remove(),f(C,m),u[C]=!0}),m._plots)for(var c=m._plots[w].overlays||[],E=0;E<c.length;E++){var M=c[E];u[M.id]&&M.plot.selectAll(".trace").remove()}}}function f(g,m){m._draggers.selectAll("g."+g).remove(),m._defs.select("#clip"+m._uid+g+"plot").remove()}le.name="cartesian",le.attr=["xaxis","yaxis"],le.idRoot=["x","y"],le.idRegex=l.idRegex,le.attrRegex=l.attrRegex,le.attributes=x("./attributes"),le.layoutAttributes=x("./layout_attributes"),le.supplyLayoutDefaults=x("./layout_defaults"),le.transitionAxes=x("./transition_axes"),le.finalizeSubplots=function(g,m){var u,w,c,E=m._subplots,M=E.xaxis,S=E.yaxis,C=E.cartesian,O=C.concat(E.gl2d||[]),I={},N={};for(u=0;u<O.length;u++){var F=O[u].split("y");I[F[0]]=1,N["y"+F[1]]=1}for(u=0;u<M.length;u++)I[w=M[u]]||(c=(g[a.id2name(w)]||{}).anchor,l.idRegex.y.test(c)||(c="y"),C.push(w+c),O.push(w+c),N[c]||(N[c]=1,T.pushUnique(S,c)));for(u=0;u<S.length;u++)N[c=S[u]]||(w=(g[a.id2name(c)]||{}).anchor,l.idRegex.x.test(w)||(w="x"),C.push(w+c),O.push(w+c),I[w]||(I[w]=1,T.pushUnique(M,w)));if(!O.length){for(var L in w="",c="",g)l.attrRegex.test(L)&&("x"===L.charAt(0)?(!w||+L.substr(5)<+w.substr(5))&&(w=L):(!c||+L.substr(5)<+c.substr(5))&&(c=L));w=w?a.name2id(w):"x",c=c?a.name2id(c):"y",M.push(w),S.push(c),C.push(w+c)}},le.plot=function(g,m,u,w){var c,E=g._fullLayout,M=E._subplots.cartesian,S=g.calcdata;if(!Array.isArray(m))for(m=[],c=0;c<S.length;c++)m.push(c);for(c=0;c<M.length;c++){for(var C,O=M[c],I=E._plots[O],N=[],F=0;F<S.length;F++){var L=S[F],P=L[0].trace;P.xaxis+P.yaxis===O&&((-1!==m.indexOf(P.index)||P.carpet)&&(C&&C[0].trace.xaxis+C[0].trace.yaxis===O&&-1!==["tonextx","tonexty","tonext"].indexOf(P.fill)&&-1===N.indexOf(C)&&N.push(C),N.push(L)),C=L)}s(g,I,N,u,w)}},le.clean=function(g,m,u,w){var c,E,M,S=w._plots||{},C=m._plots||{},O=w._subplots||{};if(w._hasOnlyLargeSploms&&!m._hasOnlyLargeSploms)for(M in S)(c=S[M]).plotgroup&&c.plotgroup.remove();var I=w._has&&w._has("gl"),N=m._has&&m._has("gl");if(I&&!N)for(M in S)(c=S[M])._scene&&c._scene.destroy();if(O.xaxis&&O.yaxis){var F=a.listIds({_fullLayout:w});for(E=0;E<F.length;E++){var L=F[E];m[a.id2name(L)]||w._infolayer.selectAll(".g-"+L+"title").remove()}}var P=w._has&&w._has("cartesian"),j=m._has&&m._has("cartesian");if(P&&!j)p(w._cartesianlayer.selectAll(".subplot"),w),w._defs.selectAll(".axesclip").remove(),delete w._axisConstraintGroups,delete w._axisMatchGroups;else if(O.cartesian)for(E=0;E<O.cartesian.length;E++){var U=O.cartesian[E];C[U]||(w._cartesianlayer.selectAll("."+U+",."+U+"-x,."+U+"-y").remove(),f(U,w))}},le.drawFramework=function(g){var m=g._fullLayout,u=function(c){var E,M,S,C,O,I,N=c._fullLayout,F=N._subplots.cartesian,L=F.length,P=[],j=[];for(E=0;E<L;E++){var X=(O=(C=N._plots[S=F[E]]).xaxis)._mainAxis._id+(I=C.yaxis)._mainAxis._id,te=N._plots[X];C.overlays=[],X!==S&&te?(C.mainplot=X,C.mainplotinfo=te,j.push(S)):(C.mainplot=void 0,C.mainplotinfo=void 0,P.push(S))}for(E=0;E<j.length;E++)(C=N._plots[S=j[E]]).mainplotinfo.overlays.push(C);var ae=P.concat(j),J=new Array(L);for(E=0;E<L;E++){var ee=[S=ae[E],(O=(C=N._plots[S]).xaxis).layer,(I=C.yaxis).layer,O.overlaying||"",I.overlaying||""];for(M=0;M<C.overlays.length;M++)ee.push(C.overlays[M].id);J[E]=ee}return J}(g),w=m._cartesianlayer.selectAll(".subplot").data(u,String);w.enter().append("g").attr("class",function(c){return"subplot "+c[0]}),w.order(),w.exit().call(p,m),w.each(function(c){var E=c[0],M=m._plots[E];M.plotgroup=y.select(this),d(g,M),M.draglayer=v(m._draggers,"g",E)})},le.rangePlot=function(g,m,u){d(g,m),s(g,m,u),_.style(g)},le.toSVG=function(g){var m=g._fullLayout._glimages,u=y.select(g).selectAll(".svg-container");u.filter(function(w,c){return c===u.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var w=this.toDataURL("image/png");m.append("svg:image").attr({xmlns:i.svg,"xlink:href":w,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},le.updateFx=x("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(x,ue,le){"use strict";var y=x("../font_attributes"),b=x("../../components/color/attributes"),T=x("../../components/drawing/attributes").dash,_=x("../../lib/extend").extendFlat,e=x("../../plot_api/plot_template").templatedArray,o=x("../../plots/cartesian/axis_format_attributes").descriptionWithDates,a=x("../../constants/numerical").ONEDAY,l=x("./constants"),i=l.HOUR_PATTERN,v=l.WEEKDAY_PATTERN,h={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function s(C){return{valType:"integer",min:0,dflt:C?5:0,editType:"ticks"}}var d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"data_array",editType:"ticks"},g={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function m(C){var O={valType:"number",min:0,editType:"ticks"};return C||(O.dflt=5),O}function u(C){var O={valType:"number",min:0,editType:"ticks"};return C||(O.dflt=1),O}var w={valType:"color",dflt:b.defaultLine,editType:"ticks"},c={valType:"color",dflt:b.lightLine,editType:"ticks"};function E(C){var O={valType:"number",min:0,editType:"ticks"};return C||(O.dflt=1),O}var M=_({},T,{editType:"ticks"}),S={valType:"boolean",editType:"ticks"};ue.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:b.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:y({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[v,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:h,nticks:s(),tick0:d,dtick:p,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:f,ticktext:{valType:"data_array",editType:"ticks"},ticks:g,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:m(),tickwidth:u(),tickcolor:w,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:_({},T,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:y({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:o("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:o("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:b.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:S,gridcolor:c,gridwidth:E(),griddash:M,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:b.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:b.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},minor:{tickmode:h,nticks:s("minor"),tick0:d,dtick:p,tickvals:f,ticks:g,ticklen:m("minor"),tickwidth:u("minor"),tickcolor:w,gridcolor:c,gridwidth:E("minor"),griddash:M,showgrid:S,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:y({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/color"),T=x("../../components/fx/helpers").isUnifiedHover,_=x("../../components/fx/hovermode_defaults"),e=x("../../plot_api/plot_template"),o=x("../layout_attributes"),a=x("./layout_attributes"),l=x("./type_defaults"),i=x("./axis_defaults"),v=x("./constraints"),h=x("./position_defaults"),s=x("./axis_ids"),d=s.id2name,p=s.name2id,f=x("./constants").AX_ID_PATTERN,g=x("../../registry"),m=g.traceIs,u=g.getComponentMethod;function w(c,E,M){Array.isArray(c[E])?c[E].push(M):c[E]=[M]}ue.exports=function(c,E,M){var S,C,O=E.autotypenumbers,I={},N={},F={},L={},P={},j={},U={},$={},X={},te={};for(S=0;S<M.length;S++){var ae=M[S];if(m(ae,"cartesian")||m(ae,"gl2d")){var J,ee;if(ae.xaxis)J=d(ae.xaxis),w(I,J,ae);else if(ae.xaxes)for(C=0;C<ae.xaxes.length;C++)w(I,d(ae.xaxes[C]),ae);if(ae.yaxis)ee=d(ae.yaxis),w(I,ee,ae);else if(ae.yaxes)for(C=0;C<ae.yaxes.length;C++)w(I,d(ae.yaxes[C]),ae);"funnel"===ae.type?"h"===ae.orientation?(J&&(N[J]=!0),ee&&(U[ee]=!0)):ee&&(F[ee]=!0):"image"===ae.type?(ee&&($[ee]=!0),J&&($[J]=!0)):(ee&&(P[ee]=!0,j[ee]=!0),m(ae,"carpet")&&("carpet"!==ae.type||ae._cheater)||J&&(L[J]=!0)),"carpet"===ae.type&&ae._cheater&&J&&(N[J]=!0),m(ae,"2dMap")&&(X[J]=!0,X[ee]=!0),m(ae,"oriented")&&(te["h"===ae.orientation?ee:J]=!0)}}var se=E._subplots,G=se.xaxis,H=se.yaxis,Y=y.simpleMap(G,d),oe=y.simpleMap(H,d),W=Y.concat(oe),ne=b.background;G.length&&H.length&&(ne=y.coerce(c,E,o,"plot_bgcolor"));var re,ce,fe,me,pe,we=b.combine(ne,E.paper_bgcolor);function ye(){pe._traceIndices=(I[re]||[]).map(function(Bt){return Bt._expandedIndex}),pe._annIndices=[],pe._shapeIndices=[],pe._imgIndices=[],pe._subplotsWith=[],pe._counterAxes=[],pe._name=pe._attr=re,pe._id=ce}function Te(ft,Bt){return y.coerce(me,pe,a,ft,Bt)}function Le(ft,Bt){return y.coerce2(me,pe,a,ft,Bt)}function Oe(ft){return"x"===ft?H:G}function Re(ft,Bt){for(var rn="x"===ft?Y:oe,un=[],pn=0;pn<rn.length;pn++){var dn=rn[pn];dn===Bt||(c[dn]||{}).overlaying||un.push(p(dn))}return un}var Ve={x:Oe("x"),y:Oe("y")},_e=Ve.x.concat(Ve.y),Ae={},Fe=[];function Pe(){var ft=me.matches;f.test(ft)&&-1===_e.indexOf(ft)&&(Ae[ft]=me.type,Fe=Object.keys(Ae))}var Be=_(c,E),qe=T(Be);for(S=0;S<W.length;S++){ce=p(re=W[S]),fe=re.charAt(0),y.isPlainObject(c[re])||(c[re]={}),me=c[re],pe=e.newContainer(E,re,fe+"axis"),ye();var ut={hasMinor:!0,letter:fe,font:E.font,outerTicks:X[re],showGrid:!te[re],data:I[re]||[],bgColor:we,calendar:E.calendar,automargin:!0,visibleDflt:"x"===fe&&!L[re]&&N[re]||"y"===fe&&!P[re]&&F[re],reverseDflt:"y"===fe&&(!j[re]&&U[re]||$[re]),autotypenumbersDflt:O,splomStash:((E._splomAxes||{})[fe]||{})[ce]};Te("uirevision",E.uirevision),l(me,pe,Te,ut),i(me,pe,Te,ut,E);var Ge=qe&&fe===Be.charAt(0),Ke=Le("spikecolor",qe?pe.color:void 0),nt=Le("spikethickness",qe?1.5:void 0),it=Le("spikedash",qe?"dot":void 0),ht=Le("spikemode",qe?"across":void 0),Tt=Le("spikesnap");Te("showspikes",!!(Ge||Ke||nt||it||ht||Tt))||(delete pe.spikecolor,delete pe.spikethickness,delete pe.spikedash,delete pe.spikemode,delete pe.spikesnap),h(me,pe,Te,{letter:fe,counterAxes:Ve[fe],overlayableAxes:Re(fe,re),grid:E.grid}),Te("title.standoff"),Pe(),pe._input=me}for(S=0;S<Fe.length;){ce=Fe[S++],fe=(re=d(ce)).charAt(0),y.isPlainObject(c[re])||(c[re]={}),me=c[re],pe=e.newContainer(E,re,fe+"axis"),ye();var Ct={letter:fe,font:E.font,outerTicks:X[re],showGrid:!te[re],data:[],bgColor:we,calendar:E.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:O,splomStash:((E._splomAxes||{})[fe]||{})[ce]};Te("uirevision",E.uirevision),pe.type=Ae[ce]||"linear",i(me,pe,Te,Ct,E),h(me,pe,Te,{letter:fe,counterAxes:Ve[fe],overlayableAxes:Re(fe,re),grid:E.grid}),Te("fixedrange"),Pe(),pe._input=me}var Vt=u("rangeslider","handleDefaults"),Ft=u("rangeselector","handleDefaults");for(S=0;S<Y.length;S++)me=c[re=Y[S]],pe=E[re],Vt(c,E,re),"date"===pe.type&&Ft(me,pe,E,oe,pe.calendar),Te("fixedrange");for(S=0;S<oe.length;S++){me=c[re=oe[S]];var gt=E[d((pe=E[re]).anchor)];Te("fixedrange",u("rangeslider","isVisible")(gt))}v.handleDefaults(c,E,{axIds:_e.concat(Fe).sort(s.idSort),axHasImage:$})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(x,ue,le){"use strict";var y=x("tinycolor2").mix,b=x("../../components/color/attributes"),T=x("../../lib");ue.exports=function(_,e,o,a){var l=(a=a||{}).dfltColor;function i(c,E){return T.coerce2(_,e,a.attributes,c,E)}var v=i("linecolor",l),h=i("linewidth");o("showline",a.showLine||!!v||!!h)||(delete e.linecolor,delete e.linewidth);var s=i("gridcolor",y(l,a.bgColor,a.blend||b.lightFraction).toRgbString()),d=i("gridwidth"),p=i("griddash");if(o("showgrid",a.showGrid||!!s||!!d||!!p)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),a.hasMinor){var f=i("minor.gridcolor",y(e.gridcolor,a.bgColor,67).toRgbString()),g=i("minor.gridwidth",e.gridwidth||1),m=i("minor.griddash",e.griddash||"solid");o("minor.showgrid",!!f||!!g||!!m)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!a.noZeroLine){var u=i("zerolinecolor",l),w=i("zerolinewidth");o("zeroline",a.showGrid||!!u||!!w)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib");ue.exports=function(T,_,e,o){var a,l,i,v,h=o.counterAxes||[],s=o.overlayableAxes||[],d=o.letter,p=o.grid;p&&(a=p._anchors[_._id],(l=p._domains[d][p._axisMap[_._id]])&&(i=p[d+"side"].split(" ")[0],v=p.domain[d]["right"===i||"top"===i?1:0])),l=l||[0,1],a=a||(y(T.position)?"free":h[0]||"free"),i=i||("x"===d?"bottom":"left"),v=v||0,"free"===b.coerce(T,_,{anchor:{valType:"enumerated",values:["free"].concat(h),dflt:a}},"anchor")&&e("position",v),b.coerce(T,_,{side:{valType:"enumerated",values:"x"===d?["bottom","top"]:["left","right"],dflt:i}},"side");var f=!1;if(s.length&&(f=b.coerce(T,_,{overlaying:{valType:"enumerated",values:[!1].concat(s),dflt:!1}},"overlaying")),!f){var g=e("domain",l);g[0]>g[1]-1/4096&&(_.domain=l),b.noneOrAll(T.domain,_.domain,l)}return e("layer"),_}},{"../../lib":503,"fast-isnumeric":190}],573:[function(x,ue,le){"use strict";var y=x("./show_dflt");ue.exports=function(b,T,_,e,o){o||(o={});var a=o.tickSuffixDflt,l=y(b);_("tickprefix")&&_("showtickprefix",l),_("ticksuffix",a)&&_("showticksuffix",l)}},{"./show_dflt":577}],574:[function(x,ue,le){"use strict";var y=x("../../constants/alignment").FROM_BL;ue.exports=function(b,T,_){void 0===_&&(_=y[b.constraintoward||"center"]);var e=[b.r2l(b.range[0]),b.r2l(b.range[1])],o=e[0]+(e[1]-e[0])*_;b.range=b._input.range=[b.l2r(o+(e[0]-o)*T),b.l2r(o+(e[1]-o)*T)],b.setScale()}},{"../../constants/alignment":471}],575:[function(x,ue,le){"use strict";var y=x("polybooljs"),b=x("../../registry"),T=x("../../components/drawing").dashStyle,_=x("../../components/color"),e=x("../../components/fx"),o=x("../../components/fx/helpers").makeEventData,a=x("../../components/dragelement/helpers"),l=a.freeMode,i=a.rectMode,v=a.drawMode,h=a.openMode,s=a.selectMode,d=x("../../components/shapes/draw_newshape/display_outlines"),p=x("../../components/shapes/draw_newshape/helpers").handleEllipse,f=x("../../components/shapes/draw_newshape/newshapes"),g=x("../../lib"),m=x("../../lib/polygon"),u=x("../../lib/throttle"),w=x("./axis_ids").getFromId,c=x("../../lib/clear_gl_canvases"),E=x("../../plot_api/subroutines").redrawReglTraces,M=x("./constants"),S=M.MINSELECT,C=m.filter,O=m.tester,I=x("./handle_outline").clearSelect,N=x("./helpers"),F=N.p2r,L=N.axValue,P=N.getTransform;function j(Y,oe,W,ne,re,ce,fe){var me,pe,we,ye,Te,Le,Oe,Re,Ve,Je,_e=oe._hoverdata,Ae=oe._fullLayout.clickmode.indexOf("event")>-1,Fe=[];if((Je=_e)&&Array.isArray(Je)&&!0!==Je[0].hoverOnBox){te(Y,oe,ce);var Pe=function(Je,ut){var Ge,Ke,nt=Je[0],it=-1,ht=[];for(Ke=0;Ke<ut.length;Ke++)if(nt.fullData._expandedIndex===(Ge=ut[Ke]).cd[0].trace._expandedIndex){if(!0===nt.hoverOnBox)break;void 0!==nt.pointNumber?it=nt.pointNumber:void 0!==nt.binNumber&&(it=nt.binNumber,ht=nt.pointNumbers);break}return{pointNumber:it,pointNumbers:ht,searchInfo:Ge}}(_e,me=J(oe,W,ne,re));if(Pe.pointNumbers.length>0?function(Je,ut){var Ge,Ke,nt,it=[];for(nt=0;nt<Je.length;nt++)(Ge=Je[nt]).cd[0].trace.selectedpoints&&Ge.cd[0].trace.selectedpoints.length>0&&it.push(Ge);if(1===it.length&&it[0]===ut.searchInfo&&(Ke=ut.searchInfo.cd[0].trace).selectedpoints.length===ut.pointNumbers.length){for(nt=0;nt<ut.pointNumbers.length;nt++)if(Ke.selectedpoints.indexOf(ut.pointNumbers[nt])<0)return!1;return!0}return!1}(me,Pe):function(Je){var Ge,Ke,nt=0;for(Ke=0;Ke<Je.length;Ke++)if((Ge=Je[Ke].cd[0].trace).selectedpoints&&(Ge.selectedpoints.length>1||(nt+=Ge.selectedpoints.length)>1))return!1;return 1===nt}(me)&&(Le=ee(Pe))){for(fe&&fe.remove(),Ve=0;Ve<me.length;Ve++)(pe=me[Ve])._module.selectPoints(pe,!1);se(oe,me),ae(ce),Ae&&oe.emit("plotly_deselect",null)}else{for(Oe=Y.shiftKey&&(void 0!==Le?Le:ee(Pe)),we=function(Je,ut,Ge){return{pointNumber:Je,searchInfo:ut,subtract:Ge}}(Pe.pointNumber,Pe.searchInfo,Oe),ye=X(ce.selectionDefs.concat([we])),Ve=0;Ve<me.length;Ve++)if(Te=G(me[Ve]._module.selectPoints(me[Ve],ye),me[Ve]),Fe.length)for(var Be=0;Be<Te.length;Be++)Fe.push(Te[Be]);else Fe=Te;if(se(oe,me,Re={points:Fe}),we&&ce&&ce.selectionDefs.push(we),fe){var qe=ce.mergedPolygons,We=h(ce.dragmode);d(H(qe,We),fe,ce)}Ae&&oe.emit("plotly_selected",Re)}}}function U(Y){return"pointNumber"in Y&&"searchInfo"in Y}function $(Y){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(oe,W,ne,re){return re.cd[0].trace._expandedIndex===Y.searchInfo.cd[0].trace._expandedIndex&&ne===Y.pointNumber},isRect:!1,degenerate:!1,subtract:Y.subtract}}function X(Y){for(var oe=[],W=U(Y[0])?0:Y[0][0][0],ne=W,re=U(Y[0])?0:Y[0][0][1],ce=re,fe=0;fe<Y.length;fe++)if(U(Y[fe]))oe.push($(Y[fe]));else{var me=m.tester(Y[fe]);me.subtract=Y[fe].subtract,oe.push(me),W=Math.min(W,me.xmin),ne=Math.max(ne,me.xmax),re=Math.min(re,me.ymin),ce=Math.max(ce,me.ymax)}return{xmin:W,xmax:ne,ymin:re,ymax:ce,pts:[],contains:function(pe,we,ye,Te){for(var Le=!1,Oe=0;Oe<oe.length;Oe++)oe[Oe].contains(pe,we,ye,Te)&&(Le=!1===oe[Oe].subtract);return Le},isRect:!1,degenerate:!1}}function te(Y,oe,W){oe._fullLayout._drawing=!1;var ne=oe._fullLayout,re=W.plotinfo,ce=W.dragmode,fe=ne._lastSelectedSubplot&&ne._lastSelectedSubplot===re.id,me=(Y.shiftKey||Y.altKey)&&!(v(ce)&&h(ce));fe&&me&&re.selection&&re.selection.selectionDefs&&!W.selectionDefs?(W.selectionDefs=re.selection.selectionDefs,W.mergedPolygons=re.selection.mergedPolygons):me&&re.selection||ae(W),fe||(I(oe),ne._lastSelectedSubplot=re.id)}function ae(Y){var oe=Y.dragmode,W=Y.plotinfo,ne=Y.gd;if(ne._fullLayout._activeShapeIndex>=0&&ne._fullLayout._deactivateShape(ne),v(oe)){var re=ne._fullLayout._zoomlayer.selectAll(".select-outline-"+W.id);if(re&&ne._fullLayout._drawing){var ce=f(re,Y);ce&&b.call("_guiRelayout",ne,{shapes:ce}),ne._fullLayout._drawing=!1}}W.selection={},W.selection.selectionDefs=Y.selectionDefs=[],W.selection.mergedPolygons=Y.mergedPolygons=[]}function J(Y,oe,W,ne){var re,ce,fe,me=[],pe=oe.map(function(Oe){return Oe._id}),we=W.map(function(Oe){return Oe._id});for(fe=0;fe<Y.calcdata.length;fe++)if(!0===(ce=(re=Y.calcdata[fe])[0].trace).visible&&ce._module&&ce._module.selectPoints)if(!ne||ce.subplot!==ne&&ce.geo!==ne)if("splom"===ce.type&&ce._xaxes[pe[0]]&&ce._yaxes[we[0]]){var ye=Le(ce._module,re,oe[0],W[0]);ye.scene=Y._fullLayout._splomScenes[ce.uid],me.push(ye)}else if("sankey"===ce.type){var Te=Le(ce._module,re,oe[0],W[0]);me.push(Te)}else{if(-1===pe.indexOf(ce.xaxis)||-1===we.indexOf(ce.yaxis))continue;me.push(Le(ce._module,re,w(Y,ce.xaxis),w(Y,ce.yaxis)))}else me.push(Le(ce._module,re,oe[0],W[0]));return me;function Le(Oe,Re,Ve,_e){return{_module:Oe,cd:Re,xaxis:Ve,yaxis:_e}}}function ee(Y){var oe=Y.searchInfo.cd[0].trace,ne=Y.pointNumbers;return!!oe.selectedpoints&&oe.selectedpoints.indexOf(ne.length>0?ne[0]:Y.pointNumber)>-1}function se(Y,oe,W){var ne,re,ce,fe;for(ne=0;ne<oe.length;ne++){var me=oe[ne].cd[0].trace._fullInput,pe=Y._fullLayout._tracePreGUI[me.uid]||{};void 0===pe.selectedpoints&&(pe.selectedpoints=me._input.selectedpoints||null)}if(W){var we=W.points||[];for(ne=0;ne<oe.length;ne++)(fe=oe[ne].cd[0].trace)._input.selectedpoints=fe._fullInput.selectedpoints=[],fe._fullInput!==fe&&(fe.selectedpoints=[]);for(ne=0;ne<we.length;ne++){var ye=we[ne],Te=ye.data,Le=ye.fullData;ye.pointIndices?([].push.apply(Te.selectedpoints,ye.pointIndices),fe._fullInput!==fe&&[].push.apply(Le.selectedpoints,ye.pointIndices)):(Te.selectedpoints.push(ye.pointIndex),fe._fullInput!==fe&&Le.selectedpoints.push(ye.pointIndex))}}else for(ne=0;ne<oe.length;ne++)delete(fe=oe[ne].cd[0].trace).selectedpoints,delete fe._input.selectedpoints,fe._fullInput!==fe&&delete fe._fullInput.selectedpoints;var Oe=!1;for(ne=0;ne<oe.length;ne++){fe=(ce=(re=oe[ne]).cd)[0].trace,b.traceIs(fe,"regl")&&(Oe=!0);var Re=re._module,Ve=Re.styleOnSelect||Re.style;Ve&&(Ve(Y,ce,ce[0].node3),ce[0].nodeRangePlot3&&Ve(Y,ce,ce[0].nodeRangePlot3))}Oe&&(c(Y),E(Y))}function G(Y,oe){if(Array.isArray(Y))for(var W=oe.cd,ne=oe.cd[0].trace,re=0;re<Y.length;re++)Y[re]=o(Y[re],ne,W);return Y}function H(Y,oe){for(var W=[],ne=0;ne<Y.length;ne++){W[ne]=[];for(var re=0;re<Y[ne].length;re++){W[ne][re]=[],W[ne][re][0]=re?"L":"M";for(var ce=0;ce<Y[ne][re].length;ce++)W[ne][re].push(Y[ne][re][ce])}oe||W[ne].push(["Z",W[ne][0][1],W[ne][0][2]])}return W}ue.exports={prepSelect:function(Y,oe,W,ne,re){var ce=l(re),fe=i(re),me=h(re),pe=v(re),we=s(re),ye="drawcircle"===re,Te="drawline"===re||ye,Le=ne.gd,Oe=Le._fullLayout,Re=Oe._zoomlayer,Ve=ne.element.getBoundingClientRect(),_e=ne.plotinfo,Ae=P(_e),Fe=oe-Ve.left,Pe=W-Ve.top;Oe._calcInverseTransform(Le);var qe,We,Je,ut,Ge,Ke,nt,Be=g.apply3DTransform(Oe._invTransform)(Fe,Pe),it=Oe._invScaleX,ht=Oe._invScaleY,Tt=Fe=Be[0],Ct=Pe=Be[1],Vt="M"+Fe+","+Pe,Ft=ne.xaxes[0]._length,gt=ne.yaxes[0]._length,ft=ne.xaxes.concat(ne.yaxes),Bt=Y.altKey&&!(v(re)&&me);te(Y,Le,ne),ce&&(qe=C([[Fe,Pe]],M.BENDPX));var rn=Re.selectAll("path.select-outline-"+_e.id).data(pe?[0]:[1,2]),un=Oe.newshape;rn.enter().append("path").attr("class",function(Ie){return"select-outline select-outline-"+Ie+" select-outline-"+_e.id}).style(pe?{opacity:un.opacity/2,fill:me?void 0:un.fillcolor,stroke:un.line.color,"stroke-dasharray":T(un.line.dash,un.line.width),"stroke-width":un.line.width+"px"}:{}).attr("fill-rule",un.fillrule).classed("cursor-move",!!pe).attr("transform",Ae).attr("d",Vt+"Z");var pn,dn=Re.append("path").attr("class","zoombox-corners").style({fill:_.background,stroke:_.defaultLine,"stroke-width":1}).attr("transform",Ae).attr("d","M0,0Z"),Mn=Oe._uid+M.SELECTID,ln=[],Ee=J(Le,ne.xaxes,ne.yaxes,ne.subplot);function De(Ie,He){return Ie-He}pn=_e.fillRangeItems?_e.fillRangeItems:fe?function(Ie,He){var Ye=Ie.range={};for(Ge=0;Ge<ft.length;Ge++){var tt=ft[Ge],ot=tt._id.charAt(0);Ye[tt._id]=[F(tt,He[ot+"min"]),F(tt,He[ot+"max"])].sort(De)}}:function(Ie,He,Ye){var tt=Ie.lassoPoints={};for(Ge=0;Ge<ft.length;Ge++){var ot=ft[Ge];tt[ot._id]=Ye.filtered.map(L(ot))}},ne.moveFn=function(Ie,He){Tt=Math.max(0,Math.min(Ft,it*Ie+Fe)),Ct=Math.max(0,Math.min(gt,ht*He+Pe));var Ut,Kt,Ye=Math.abs(Tt-Fe),tt=Math.abs(Ct-Pe);if(fe){var ot,st,bt;if(we){var wt=Oe.selectdirection;switch(ot="any"===wt?tt<Math.min(.6*Ye,S)?"h":Ye<Math.min(.6*tt,S)?"v":"d":wt){case"h":st=ye?gt/2:0,bt=gt;break;case"v":st=ye?Ft/2:0,bt=Ft}}if(pe)switch(Oe.newshape.drawdirection){case"vertical":ot="h",st=ye?gt/2:0,bt=gt;break;case"horizontal":ot="v",st=ye?Ft/2:0,bt=Ft;break;case"ortho":Ye<tt?(ot="h",st=Pe,bt=Ct):(ot="v",st=Fe,bt=Tt);break;default:ot="d"}"h"===ot?((ut=Te?p(ye,[Tt,st],[Tt,bt]):[[Fe,st],[Fe,bt],[Tt,bt],[Tt,st]]).xmin=Te?Tt:Math.min(Fe,Tt),ut.xmax=Te?Tt:Math.max(Fe,Tt),ut.ymin=Math.min(st,bt),ut.ymax=Math.max(st,bt),dn.attr("d","M"+ut.xmin+","+(Pe-S)+"h-4v"+2*S+"h4ZM"+(ut.xmax-1)+","+(Pe-S)+"h4v"+2*S+"h-4Z")):"v"===ot?((ut=Te?p(ye,[st,Ct],[bt,Ct]):[[st,Pe],[st,Ct],[bt,Ct],[bt,Pe]]).xmin=Math.min(st,bt),ut.xmax=Math.max(st,bt),ut.ymin=Te?Ct:Math.min(Pe,Ct),ut.ymax=Te?Ct:Math.max(Pe,Ct),dn.attr("d","M"+(Fe-S)+","+ut.ymin+"v-4h"+2*S+"v4ZM"+(Fe-S)+","+(ut.ymax-1)+"v4h"+2*S+"v-4Z")):"d"===ot&&((ut=Te?p(ye,[Fe,Pe],[Tt,Ct]):[[Fe,Pe],[Fe,Ct],[Tt,Ct],[Tt,Pe]]).xmin=Math.min(Fe,Tt),ut.xmax=Math.max(Fe,Tt),ut.ymin=Math.min(Pe,Ct),ut.ymax=Math.max(Pe,Ct),dn.attr("d","M0,0Z"))}else ce&&(qe.addPt([Tt,Ct]),ut=qe.filtered);ne.selectionDefs&&ne.selectionDefs.length?(Ut=ne.mergedPolygons,Kt=ut,Je=Bt?y.difference({regions:Ut,inverted:!1},{regions:[Kt],inverted:!1}).regions:y.union({regions:Ut,inverted:!1},{regions:[Kt],inverted:!1}).regions,ut.subtract=Bt,We=X(ne.selectionDefs.concat([ut]))):(Je=[ut],We=O(ut)),d(H(Je,me),rn,ne),we&&u.throttle(Mn,M.SELECTDELAY,function(){var Ut;ln=[];var Kt,vt=[];for(Ge=0;Ge<Ee.length;Ge++)if(Kt=(Ke=Ee[Ge])._module.selectPoints(Ke,We),vt.push(Kt),Ut=G(Kt,Ke),ln.length)for(var Et=0;Et<Ut.length;Et++)ln.push(Ut[Et]);else ln=Ut;se(Le,Ee,nt={points:ln}),pn(nt,ut,qe),ne.gd.emit("plotly_selecting",nt)})},ne.clickFn=function(Ie,He){if(dn.remove(),Le._fullLayout._activeShapeIndex>=0)Le._fullLayout._deactivateShape(Le);else if(!pe){var Ye=Oe.clickmode;u.done(Mn).then(function(){if(u.clear(Mn),2===Ie){for(rn.remove(),Ge=0;Ge<Ee.length;Ge++)(Ke=Ee[Ge])._module.selectPoints(Ke,!1);se(Le,Ee),ae(ne),Le.emit("plotly_deselect",null)}else Ye.indexOf("select")>-1&&j(He,Le,ne.xaxes,ne.yaxes,ne.subplot,ne,rn),"event"===Ye&&Le.emit("plotly_selected",void 0);e.click(Le,He)}).catch(g.error)}},ne.doneFn=function(){dn.remove(),u.done(Mn).then(function(){u.clear(Mn),ne.gd.emit("plotly_selected",nt),ut&&ne.selectionDefs&&(ut.subtract=Bt,ne.selectionDefs.push(ut),ne.mergedPolygons.length=0,[].push.apply(ne.mergedPolygons,Je)),ne.doneFnCompleted&&ne.doneFnCompleted(ln)}).catch(g.error),pe&&ae(ne)}},clearSelect:I,clearSelectionsCache:ae,selectOnClick:j}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("d3-time-format").utcFormat,T=x("../../lib"),_=T.numberFormat,e=x("fast-isnumeric"),o=T.cleanNumber,a=T.ms2DateTime,l=T.dateTime2ms,i=T.ensureNumber,v=T.isArrayOrTypedArray,h=x("../../constants/numerical"),s=h.FP_SAFE,d=h.BADNUM,p=h.LOG_CLIP,f=h.ONEWEEK,g=h.ONEDAY,m=h.ONEHOUR,u=h.ONEMIN,w=h.ONESEC,c=x("./axis_ids"),E=x("./constants"),M=E.HOUR_PATTERN,S=E.WEEKDAY_PATTERN;function C(I){return Math.pow(10,I)}function O(I){return null!=I}ue.exports=function(I,N){N=N||{};var F=I._id||"x",L=F.charAt(0);function P(W,ne){if(W>0)return Math.log(W)/Math.LN10;if(W<=0&&ne&&I.range&&2===I.range.length){var re=I.range[0],ce=I.range[1];return.5*(re+ce-2*p*Math.abs(re-ce))}return d}function j(W,ne,re,ce){if((ce||{}).msUTC&&e(W))return+W;var fe=l(W,re||I.calendar);if(fe===d){if(!e(W))return d;W=+W;var me=Math.floor(10*T.mod(W+.05,1)),pe=Math.round(W-me/10);fe=l(new Date(pe))+me/10}return fe}function U(W,ne,re){return a(W,ne,re||I.calendar)}function $(W){return I._categories[Math.round(W)]}function X(W){if(O(W)){if(void 0===I._categoriesMap&&(I._categoriesMap={}),void 0!==I._categoriesMap[W])return I._categoriesMap[W];I._categories.push("number"==typeof W?String(W):W);var ne=I._categories.length-1;return I._categoriesMap[W]=ne,ne}return d}function te(W){if(I._categoriesMap)return I._categoriesMap[W]}function ae(W){var ne=te(W);return void 0!==ne?ne:e(W)?+W:void 0}function J(W){return e(W)?+W:te(W)}function ee(W,ne,re){return y.round(re+ne*W,2)}function se(W,ne,re){return(W-re)/ne}var G=function(W){return e(W)?ee(W,I._m,I._b):d},H=function(W){return se(W,I._m,I._b)};if(I.rangebreaks){var Y="y"===L;G=function(W){if(!e(W))return d;var ne=I._rangebreaks.length;if(!ne)return ee(W,I._m,I._b);var re=Y;I.range[0]>I.range[1]&&(re=!re);for(var ce=re?-1:1,fe=ce*W,me=0,pe=0;pe<ne;pe++){var we=ce*I._rangebreaks[pe].min,ye=ce*I._rangebreaks[pe].max;if(fe<we)break;if(!(fe>ye)){me=fe<(we+ye)/2?pe:pe+1;break}me=pe+1}var Te=I._B[me]||0;return isFinite(Te)?ee(W,I._m2,Te):0},H=function(W){var ne=I._rangebreaks.length;if(!ne)return se(W,I._m,I._b);for(var re=0,ce=0;ce<ne&&!(W<I._rangebreaks[ce].pmin);ce++)W>I._rangebreaks[ce].pmax&&(re=ce+1);return se(W,I._m2,I._B[re])}}I.c2l="log"===I.type?P:i,I.l2c="log"===I.type?C:i,I.l2p=G,I.p2l=H,I.c2p="log"===I.type?function(W,ne){return G(P(W,ne))}:G,I.p2c="log"===I.type?function(W){return C(H(W))}:H,-1!==["linear","-"].indexOf(I.type)?(I.d2r=I.r2d=I.d2c=I.r2c=I.d2l=I.r2l=o,I.c2d=I.c2r=I.l2d=I.l2r=i,I.d2p=I.r2p=function(W){return I.l2p(o(W))},I.p2d=I.p2r=H,I.cleanPos=i):"log"===I.type?(I.d2r=I.d2l=function(W,ne){return P(o(W),ne)},I.r2d=I.r2c=function(W){return C(o(W))},I.d2c=I.r2l=o,I.c2d=I.l2r=i,I.c2r=P,I.l2d=C,I.d2p=function(W,ne){return I.l2p(I.d2r(W,ne))},I.p2d=function(W){return C(H(W))},I.r2p=function(W){return I.l2p(o(W))},I.p2r=H,I.cleanPos=i):"date"===I.type?(I.d2r=I.r2d=T.identity,I.d2c=I.r2c=I.d2l=I.r2l=j,I.c2d=I.c2r=I.l2d=I.l2r=U,I.d2p=I.r2p=function(W,ne,re){return I.l2p(j(W,0,re))},I.p2d=I.p2r=function(W,ne,re){return U(H(W),ne,re)},I.cleanPos=function(W){return T.cleanDate(W,d,I.calendar)}):"category"===I.type?(I.d2c=I.d2l=X,I.r2d=I.c2d=I.l2d=$,I.d2r=I.d2l_noadd=ae,I.r2c=function(W){var ne=J(W);return void 0!==ne?ne:I.fraction2r(.5)},I.l2r=I.c2r=i,I.r2l=J,I.d2p=function(W){return I.l2p(I.r2c(W))},I.p2d=function(W){return $(H(W))},I.r2p=I.d2p,I.p2r=H,I.cleanPos=function(W){return"string"==typeof W&&""!==W?W:i(W)}):"multicategory"===I.type&&(I.r2d=I.c2d=I.l2d=$,I.d2r=I.d2l_noadd=ae,I.r2c=function(W){var ne=ae(W);return void 0!==ne?ne:I.fraction2r(.5)},I.r2c_just_indices=te,I.l2r=I.c2r=i,I.r2l=ae,I.d2p=function(W){return I.l2p(I.r2c(W))},I.p2d=function(W){return $(H(W))},I.r2p=I.d2p,I.p2r=H,I.cleanPos=function(W){return Array.isArray(W)||"string"==typeof W&&""!==W?W:i(W)},I.setupMultiCategory=function(W){var ne,re,ce=I._traceIndices,fe=I._matchGroup;if(fe&&0===I._categories.length)for(var me in fe)if(me!==F){var pe=N[c.id2name(me)];ce=ce.concat(pe._traceIndices)}var we=[[0,{}],[0,{}]],ye=[];for(ne=0;ne<ce.length;ne++){var Te=W[ce[ne]];if(L in Te){var Le=Te[L],Oe=Te._length||T.minRowLength(Le);if(v(Le[0])&&v(Le[1]))for(re=0;re<Oe;re++){var Re=Le[0][re],Ve=Le[1][re];O(Re)&&O(Ve)&&(ye.push([Re,Ve]),Re in we[0][1]||(we[0][1][Re]=we[0][0]++),Ve in we[1][1]||(we[1][1][Ve]=we[1][0]++))}}}for(ye.sort(function(_e,Ae){var Fe=we[0][1],Pe=Fe[_e[0]]-Fe[Ae[0]];if(Pe)return Pe;var Be=we[1][1];return Be[_e[1]]-Be[Ae[1]]}),ne=0;ne<ye.length;ne++)X(ye[ne])}),I.fraction2r=function(W){var ne=I.r2l(I.range[0]),re=I.r2l(I.range[1]);return I.l2r(ne+W*(re-ne))},I.r2fraction=function(W){var ne=I.r2l(I.range[0]),re=I.r2l(I.range[1]);return(I.r2l(W)-ne)/(re-ne)},I.cleanRange=function(W,ne){ne||(ne={}),W||(W="range");var re,ce,fe=T.nestedProperty(I,W).get();if(ce=(ce="date"===I.type?T.dfltRange(I.calendar):"y"===L?E.DFLTRANGEY:"realaxis"===I._name?[0,1]:ne.dfltRange||E.DFLTRANGEX).slice(),"tozero"!==I.rangemode&&"nonnegative"!==I.rangemode||(ce[0]=0),fe&&2===fe.length)for("date"!==I.type||I.autorange||(fe[0]=T.cleanDate(fe[0],d,I.calendar),fe[1]=T.cleanDate(fe[1],d,I.calendar)),re=0;re<2;re++)if("date"===I.type){if(!T.isDateTime(fe[re],I.calendar)){I[W]=ce;break}if(I.r2l(fe[0])===I.r2l(fe[1])){var me=T.constrain(I.r2l(fe[0]),T.MIN_MS+1e3,T.MAX_MS-1e3);fe[0]=I.l2r(me-1e3),fe[1]=I.l2r(me+1e3);break}}else{if(!e(fe[re])){if(!e(fe[1-re])){I[W]=ce;break}fe[re]=fe[1-re]*(re?10:.1)}if(fe[re]<-s?fe[re]=-s:fe[re]>s&&(fe[re]=s),fe[0]===fe[1]){var pe=Math.max(1,Math.abs(1e-6*fe[0]));fe[0]-=pe,fe[1]+=pe}}else T.nestedProperty(I,W).set(ce)},I.setScale=function(W){var ne=N._size;if(I.overlaying){var re=c.getFromId({_fullLayout:N},I.overlaying);I.domain=re.domain}var ce=W&&I._r?"_r":"range",fe=I.calendar;I.cleanRange(ce);var me,pe,we=I.r2l(I[ce][0],fe),ye=I.r2l(I[ce][1],fe),Te="y"===L;if(Te?(I._offset=ne.t+(1-I.domain[1])*ne.h,I._length=ne.h*(I.domain[1]-I.domain[0]),I._m=I._length/(we-ye),I._b=-I._m*ye):(I._offset=ne.l+I.domain[0]*ne.w,I._length=ne.w*(I.domain[1]-I.domain[0]),I._m=I._length/(ye-we),I._b=-I._m*we),I._rangebreaks=[],I._lBreaks=0,I._m2=0,I._B=[],I.rangebreaks&&(I._rangebreaks=I.locateBreaks(Math.min(we,ye),Math.max(we,ye)),I._rangebreaks.length)){for(me=0;me<I._rangebreaks.length;me++)pe=I._rangebreaks[me],I._lBreaks+=Math.abs(pe.max-pe.min);var Le=Te;we>ye&&(Le=!Le),Le&&I._rangebreaks.reverse();var Oe=Le?-1:1;for(I._m2=Oe*I._length/(Math.abs(ye-we)-I._lBreaks),I._B.push(-I._m2*(Te?ye:we)),me=0;me<I._rangebreaks.length;me++)I._B.push(I._B[I._B.length-1]-Oe*I._m2*((pe=I._rangebreaks[me]).max-pe.min));for(me=0;me<I._rangebreaks.length;me++)(pe=I._rangebreaks[me]).pmin=G(pe.min),pe.pmax=G(pe.max)}if(!isFinite(I._m)||!isFinite(I._b)||I._length<0)throw N._replotting=!1,new Error("Something went wrong with axis scaling")},I.maskBreaks=function(W){var ne,re,ce,fe,me,pe=I.rangebreaks||[];pe._cachedPatterns||(pe._cachedPatterns=pe.map(function(Re){return Re.enabled&&Re.bounds?T.simpleMap(Re.bounds,Re.pattern?o:I.d2c):null})),pe._cachedValues||(pe._cachedValues=pe.map(function(Re){return Re.enabled&&Re.values?T.simpleMap(Re.values,I.d2c).sort(T.sorterAsc):null}));for(var we=0;we<pe.length;we++){var ye=pe[we];if(ye.enabled)if(ye.bounds){switch(re=(ne=pe._cachedPatterns[we])[0],ce=ne[1],ye.pattern){case S:fe=(me=new Date(W)).getUTCDay(),re>ce&&(ce+=7,fe<re&&(fe+=7));break;case M:fe=(me=new Date(W)).getUTCHours()+(me.getUTCMinutes()/60+me.getUTCSeconds()/3600+me.getUTCMilliseconds()/36e5),re>ce&&(ce+=24,fe<re&&(fe+=24));break;case"":fe=W}if(fe>=re&&fe<ce)return d}else for(var Le=pe._cachedValues[we],Oe=0;Oe<Le.length;Oe++)if(ce=(re=Le[Oe])+ye.dvalue,W>=re&&W<ce)return d}return W},I.locateBreaks=function(W,ne){var re,ce,fe,me,pe=[];if(!I.rangebreaks)return pe;var we=I.rangebreaks.slice().sort(function(Be,qe){return Be.pattern===S&&qe.pattern===M?-1:qe.pattern===S&&Be.pattern===M?1:0}),ye=function(Be,qe){if((Be=T.constrain(Be,W,ne))!==(qe=T.constrain(qe,W,ne))){for(var We=!0,Je=0;Je<pe.length;Je++){var ut=pe[Je];Be<ut.max&&qe>=ut.min&&(Be<ut.min&&(ut.min=Be),qe>ut.max&&(ut.max=qe),We=!1)}We&&pe.push({min:Be,max:qe})}};for(re=0;re<we.length;re++){var Te=we[re];if(Te.enabled)if(Te.bounds){var Le=W,Oe=ne;Te.pattern&&(Le=Math.floor(Le)),fe=(ce=T.simpleMap(Te.bounds,Te.pattern?o:I.r2l))[0],me=ce[1];var Re,Ve,_e=new Date(Le);switch(Te.pattern){case S:Ve=f,Re=(me-fe+(me<fe?7:0))*g,Le+=fe*g-(_e.getUTCDay()*g+_e.getUTCHours()*m+_e.getUTCMinutes()*u+_e.getUTCSeconds()*w+_e.getUTCMilliseconds());break;case M:Ve=g,Re=(me-fe+(me<fe?24:0))*m,Le+=fe*m-(_e.getUTCHours()*m+_e.getUTCMinutes()*u+_e.getUTCSeconds()*w+_e.getUTCMilliseconds());break;default:Le=Math.min(ce[0],ce[1]),Re=Ve=(Oe=Math.max(ce[0],ce[1]))-Le}for(var Ae=Le;Ae<Oe;Ae+=Ve)ye(Ae,Ae+Re)}else for(var Fe=T.simpleMap(Te.values,I.d2c),Pe=0;Pe<Fe.length;Pe++)ye(fe=Fe[Pe],me=fe+Te.dvalue)}return pe.sort(function(Be,qe){return Be.min-qe.min}),pe},I.makeCalcdata=function(W,ne,re){var ce,fe,me,pe,we=I.type,ye="date"===we&&W[ne+"calendar"];if(ne in W){if(ce=W[ne],pe=W._length||T.minRowLength(ce),T.isTypedArray(ce)&&("linear"===we||"log"===we)){if(pe===ce.length)return ce;if(ce.subarray)return ce.subarray(0,pe)}if("multicategory"===we)return function(Oe,Re){for(var Ve=new Array(Re),_e=0;_e<Re;_e++)Ve[_e]=te([(Oe[0]||[])[_e],(Oe[1]||[])[_e]]);return Ve}(ce,pe);for(fe=new Array(pe),me=0;me<pe;me++)fe[me]=I.d2c(ce[me],0,ye,re)}else{var Te=ne+"0"in W?I.d2c(W[ne+"0"],0,ye):0,Le=W["d"+ne]?Number(W["d"+ne]):1;for(ce=W[{x:"y",y:"x"}[ne]],pe=W._length||ce.length,fe=new Array(pe),me=0;me<pe;me++)fe[me]=Te+me*Le}if(I.rangebreaks)for(me=0;me<pe;me++)fe[me]=I.maskBreaks(fe[me]);return fe},I.isValidRange=function(W){return Array.isArray(W)&&2===W.length&&e(I.r2l(W[0]))&&e(I.r2l(W[1]))},I.isPtWithinRange=function(W,ne){var re=I.c2l(W[L],null,ne),ce=I.r2l(I.range[0]),fe=I.r2l(I.range[1]);return ce<fe?ce<=re&&re<=fe:fe<=re&&re<=ce},I._emptyCategories=function(){I._categories=[],I._categoriesMap={}},I.clearCalc=function(){var W=I._matchGroup;if(W){var ne=null,re=null;for(var ce in W){var fe=N[c.id2name(ce)];if(fe._categories){ne=fe._categories,re=fe._categoriesMap;break}}ne&&re?(I._categories=ne,I._categoriesMap=re):I._emptyCategories()}else I._emptyCategories();if(I._initialCategories)for(var me=0;me<I._initialCategories.length;me++)X(I._initialCategories[me])},I.sortByInitialCategories=function(){var W=[];if(I._emptyCategories(),I._initialCategories)for(var ne=0;ne<I._initialCategories.length;ne++)X(I._initialCategories[ne]);W=W.concat(I._traceIndices);var re=I._matchGroup;for(var ce in re)if(F!==ce){var fe=N[c.id2name(ce)];fe._categories=I._categories,fe._categoriesMap=I._categoriesMap,W=W.concat(fe._traceIndices)}return W};var oe=N._d3locale;"date"===I.type&&(I._dateFormat=oe?oe.timeFormat:b,I._extraFormat=N._extraFormat),I._separators=N.separators,I._numFormat=oe?oe.numberFormat:_,delete I._minDtick,delete I._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(x,ue,le){"use strict";ue.exports=function(y){var b=["showexponent","showtickprefix","showticksuffix"].filter(function(T){return void 0!==y[T]});if(b.every(function(T){return y[T]===y[b[0]]})||1===b.length)return y[b[0]]}},{}],578:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/color").contrast,T=x("./layout_attributes"),_=x("./show_dflt"),e=x("../array_container_defaults");function o(a,l){function i(v,h){return y.coerce(a,l,T.tickformatstops,v,h)}i("enabled")&&(i("dtickrange"),i("value"))}ue.exports=function(a,l,i,v,h){h||(h={});var s=_(a);if(i("showticklabels")){var d=h.font||{},p=l.color,f=-1!==(l.ticklabelposition||"").indexOf("inside")?b(h.bgColor):p&&p!==T.color.dflt?p:d.color;if(y.coerceFont(i,"tickfont",{family:d.family,size:d.size,color:f}),h.noTicklabelstep||"multicategory"===v||"log"===v||i("ticklabelstep"),h.noAng||i("tickangle"),"category"!==v){var g=i("tickformat");e(a,l,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),l.tickformatstops.length||delete l.tickformatstops,h.noExp||g||"date"===v||(i("showexponent",s),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_,e,o){var a=o.isMinor,l=a?T.minor||{}:T,i=a?_.minor:_,v=a?b.minor:b,h=a?"minor.":"",s=y.coerce2(l,i,v,"ticklen",a?.6*(_.ticklen||5):void 0),d=y.coerce2(l,i,v,"tickwidth",a?_.tickwidth||1:void 0),p=y.coerce2(l,i,v,"tickcolor",(a?_.tickcolor:void 0)||i.color);e(h+"ticks",!a&&o.outerTicks||s||d||p?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(x,ue,le){"use strict";var y=x("./clean_ticks"),b=x("../../lib").isArrayOrTypedArray;ue.exports=function(T,_,e,o,a){a||(a={});var l=a.isMinor,i=l?T.minor||{}:T,v=l?_.minor:_,h=l?"minor.":"";function s(u){var w=i[u];return void 0!==w?w:(v._template||{})[u]}var d=s("tick0"),p=s("dtick"),f=s("tickvals"),g=e(h+"tickmode",b(f)?"array":p?"linear":"auto");if("auto"===g)e(h+"nticks");else if("linear"===g){var m=v.dtick=y.dtick(p,o);v.tick0=y.tick0(d,o,_.calendar,m)}else"multicategory"!==o&&(void 0===e(h+"tickvals")?v.tickmode="auto":l||e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../registry"),T=x("../../lib"),_=x("../../components/drawing"),e=x("./axes");ue.exports=function(o,a,l,i){var v=o._fullLayout;if(0!==a.length){var h,s,d,p;i&&(h=i());var f=y.ease(l.easing);return o._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(p),p=null,function(){for(var u={},w=0;w<a.length;w++){var c=a[w],M=c.plotinfo.yaxis;c.xr0&&(u[c.plotinfo.xaxis._name+".range"]=c.xr0.slice()),c.yr0&&(u[M._name+".range"]=c.yr0.slice())}return b.call("relayout",o,u).then(function(){for(var S=0;S<a.length;S++)g(a[S].plotinfo)})}()}),s=Date.now(),p=window.requestAnimationFrame(function u(){d=Date.now();for(var w=Math.min(1,(d-s)/l.duration),c=f(w),E=0;E<a.length;E++)m(a[E],c);d-s>l.duration?(function(){for(var M={},S=0;S<a.length;S++){var C=a[S],I=C.plotinfo.yaxis;C.xr1&&(M[C.plotinfo.xaxis._name+".range"]=C.xr1.slice()),C.yr1&&(M[I._name+".range"]=C.yr1.slice())}h&&h(),b.call("relayout",o,M).then(function(){for(var N=0;N<a.length;N++)g(a[N].plotinfo)})}(),p=window.cancelAnimationFrame(u)):p=window.requestAnimationFrame(u)}),Promise.resolve()}function g(u){var w=u.xaxis,c=u.yaxis;v._defs.select("#"+u.clipId+"> rect").call(_.setTranslate,0,0).call(_.setScale,1,1),u.plot.call(_.setTranslate,w._offset,c._offset).call(_.setScale,1,1);var E=u.plot.selectAll(".scatterlayer .trace");E.selectAll(".point").call(_.setPointGroupScale,1,1),E.selectAll(".textpoint").call(_.setTextPointsScale,1,1),E.call(_.hideOutsideRangePoints,u)}function m(u,w){var c=u.plotinfo,E=c.xaxis,M=c.yaxis,S=E._length,C=M._length,O=!!u.xr1,I=!!u.yr1,N=[];if(O){var F=T.simpleMap(u.xr0,E.r2l),L=T.simpleMap(u.xr1,E.r2l),P=F[1]-F[0],j=L[1]-L[0];N[0]=(F[0]*(1-w)+w*L[0]-F[0])/(F[1]-F[0])*S,N[2]=S*(1-w+w*j/P),E.range[0]=E.l2r(F[0]*(1-w)+w*L[0]),E.range[1]=E.l2r(F[1]*(1-w)+w*L[1])}else N[0]=0,N[2]=S;if(I){var U=T.simpleMap(u.yr0,M.r2l),$=T.simpleMap(u.yr1,M.r2l),X=U[1]-U[0],te=$[1]-$[0];N[1]=(U[1]*(1-w)+w*$[1]-U[1])/(U[0]-U[1])*C,N[3]=C*(1-w+w*te/X),M.range[0]=E.l2r(U[0]*(1-w)+w*$[0]),M.range[1]=M.l2r(U[1]*(1-w)+w*$[1])}else N[1]=0,N[3]=C;e.drawOne(o,E,{skipTitle:!0}),e.drawOne(o,M,{skipTitle:!0}),e.redrawComponents(o,[E._id,M._id]);var ae=O?S/N[2]:1,J=I?C/N[3]:1,Y=E._offset-(O?N[0]/N[2]*S:0),oe=M._offset-(I?N[1]/N[3]*C:0);c.clipRect.call(_.setTranslate,O?N[0]:0,I?N[1]:0).call(_.setScale,1/ae,1/J),c.plot.call(_.setTranslate,Y,oe).call(_.setScale,ae,J),_.setPointGroupScale(c.zoomScalePts,1/ae,1/J),_.setTextPointsScale(c.zoomScaleTxt,1/ae,1/J)}e.redrawComponents(o)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(x,ue,le){"use strict";var y=x("../../registry").traceIs,b=x("./axis_autotype");function T(e){return{v:"x",h:"y"}[e.orientation||"v"]}function _(e,o){var a=T(e),l=y(e,"box-violin"),i=y(e._fullInput||{},"candlestick");return l&&!i&&o===a&&void 0===e[a]&&void 0===e[a+"0"]}ue.exports=function(e,o,a,l){a("autotypenumbers",l.autotypenumbersDflt),"-"===a("type",(l.splomStash||{}).type)&&(function(i,v){if("-"===i.type){var h,s=i._id,d=s.charAt(0);-1!==s.indexOf("scene")&&(s=d);var p=function(M,S,C){for(var O=0;O<M.length;O++){var I=M[O];if("splom"===I.type&&I._length>0&&(I["_"+C+"axes"]||{})[S]||(I[C+"axis"]||C)===S&&(_(I,C)||(I[C]||[]).length||I[C+"0"]))return I}}(v,s,d);if(p){if("histogram"===p.type&&d==={v:"y",h:"x"}[p.orientation||"v"])return void(i.type="linear");var f=d+"calendar",g=p[f],m={noMultiCategory:!y(p,"cartesian")||y(p,"noMultiCategory")};if("box"===p.type&&p._hasPreCompStats&&d==={h:"x",v:"y"}[p.orientation||"v"]&&(m.noMultiCategory=!0),m.autotypenumbers=i.autotypenumbers,_(p,d)){var u=T(p),w=[];for(h=0;h<v.length;h++){var c=v[h];y(c,"box-violin")&&(c[d+"axis"]||d)===s&&(w.push(void 0!==c[u]?c[u][0]:void 0!==c.name?c.name:"text"),c[f]!==g&&(g=void 0))}i.type=b(w,g,m)}else if("splom"===p.type){var E=p.dimensions[p._axesDim[s]];E.visible&&(i.type=b(E.values,g,m))}else i.type=b(p[d]||[p[d+"0"]],g,m)}}}(o,l.data),"-"===o.type?o.type="linear":e.type=o.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(x,ue,le){"use strict";var y=x("../registry"),b=x("../lib");function T(a,l,i){var v,h,s,d=!1;if("data"===l.type)v=a._fullData[null!==l.traces?l.traces[0]:0];else{if("layout"!==l.type)return!1;v=a._fullLayout}return h=b.nestedProperty(v,l.prop).get(),(s=i[l.type]=i[l.type]||{}).hasOwnProperty(l.prop)&&s[l.prop]!==h&&(d=!0),s[l.prop]=h,{changed:d,value:h}}function _(a,l){var i=[],v=l[0],h={};if("string"==typeof v)h[v]=l[1];else{if(!b.isPlainObject(v))return i;h=v}return o(h,function(s,d,p){i.push({type:"layout",prop:s,value:p})},"",0),i}function e(a,l){var i,v,h,s,d=[];if(h=l[1],i=l[2],s={},"string"==typeof(v=l[0]))s[v]=h;else{if(!b.isPlainObject(v))return d;s=v,void 0===i&&(i=h)}return void 0===i&&(i=null),o(s,function(p,f,g){var m,u;if(Array.isArray(g)){u=g.slice();var w=Math.min(u.length,a.data.length);i&&(w=Math.min(w,i.length)),m=[];for(var c=0;c<w;c++)m[c]=i?i[c]:c}else u=g,m=i?i.slice():null;if(null===m)Array.isArray(u)&&(u=u[0]);else if(Array.isArray(m)){if(!Array.isArray(u)){var E=u;u=[];for(var M=0;M<m.length;M++)u[M]=E}u.length=Math.min(m.length,u.length)}d.push({type:"data",prop:p,traces:m,value:u})},"",0),d}function o(a,l,i,v){Object.keys(a).forEach(function(h){var s=a[h];if("_"!==h[0]){var d=i+(v>0?".":"")+h;b.isPlainObject(s)?o(s,l,d,v+1):l(d,h,s)}})}le.manageCommandObserver=function(a,l,i,v){var h={},s=!0;l&&l._commandObserver&&(h=l._commandObserver),h.cache||(h.cache={}),h.lookupTable={};var d=le.hasSimpleAPICommandBindings(a,i,h.lookupTable);if(l&&l._commandObserver){if(d)return h;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,h}if(d){T(a,d,h.cache),h.check=function(){if(s){var g=T(a,d,h.cache);return g.changed&&v&&void 0!==h.lookupTable[g.value]&&(h.disable(),Promise.resolve(v({value:g.value,type:d.type,prop:d.prop,traces:d.traces,index:h.lookupTable[g.value]})).then(h.enable,h.enable)),g.changed}};for(var p=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<p.length;f++)a._internalOn(p[f],h.check);h.remove=function(){for(var g=0;g<p.length;g++)a._removeInternalListener(p[g],h.check)}}else b.log("Unable to automatically bind plot updates to API command"),h.lookupTable={},h.remove=function(){};return h.disable=function(){s=!1},h.enable=function(){s=!0},l&&(l._commandObserver=h),h},le.hasSimpleAPICommandBindings=function(a,l,i){var v,h,s=l.length;for(v=0;v<s;v++){var d,p=l[v],f=p.method,g=p.args;if(Array.isArray(g)||(g=[]),!f)return!1;var m=le.computeAPICommandBindings(a,f,g);if(1!==m.length)return!1;if(h){if((d=m[0]).type!==h.type||d.prop!==h.prop)return!1;if(Array.isArray(h.traces)){if(!Array.isArray(d.traces))return!1;d.traces.sort();for(var u=0;u<h.traces.length;u++)if(h.traces[u]!==d.traces[u])return!1}else if(d.prop!==h.prop)return!1}else h=m[0],Array.isArray(h.traces)&&h.traces.sort();var w=(d=m[0]).value;if(Array.isArray(w)){if(1!==w.length)return!1;w=w[0]}i&&(i[w]=v)}return h},le.executeAPICommand=function(a,l,i){if("skip"===l)return Promise.resolve();var v=y.apiMethodRegistry[l],h=[a];Array.isArray(i)||(i=[]);for(var s=0;s<i.length;s++)h.push(i[s]);return v.apply(null,h).catch(function(d){return b.warn("API call to Plotly."+l+" rejected.",d),Promise.reject(d)})},le.computeAPICommandBindings=function(a,l,i){var v,s;switch(Array.isArray(i)||(i=[]),l){case"restyle":v=e(a,i);break;case"relayout":v=_(0,i);break;case"update":v=e(a,[i[0],i[2]]).concat(_(0,[i[1]]));break;case"animate":s=i,v=Array.isArray(s[0])&&1===s[0].length&&-1!==["string","number"].indexOf(typeof s[0][0])?[{type:"layout",prop:"_currentFrame",value:s[0][0].toString()}]:[];break;default:v=[]}return v}},{"../lib":503,"../registry":638}],584:[function(x,ue,le){"use strict";var y=x("../lib/extend").extendFlat;le.attributes=function(b,T){T=T||{};var _={valType:"info_array",editType:(b=b||{}).editType,items:[{valType:"number",min:0,max:1,editType:b.editType},{valType:"number",min:0,max:1,editType:b.editType}],dflt:[0,1]},e={x:y({},_,{}),y:y({},_,{}),editType:b.editType};return b.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:b.editType},e.column={valType:"integer",min:0,dflt:0,editType:b.editType}),e},le.defaults=function(b,T,_,e){var o=e&&e.x||[0,1],a=e&&e.y||[0,1],l=T.grid;if(l){var i=_("domain.column");void 0!==i&&(i<l.columns?o=l._domains.x[i]:delete b.domain.column);var v=_("domain.row");void 0!==v&&(v<l.rows?a=l._domains.y[v]:delete b.domain.row)}var h=_("domain.x",o),s=_("domain.y",a);h[0]<h[1]||(b.domain.x=o.slice()),s[0]<s[1]||(b.domain.y=a.slice())}},{"../lib/extend":493}],585:[function(x,ue,le){"use strict";ue.exports=function(y){var b=y.editType,T=y.colorEditType;void 0===T&&(T=b);var _={family:{valType:"string",noBlank:!0,strict:!0,editType:b},size:{valType:"number",min:1,editType:b},color:{valType:"color",editType:T},editType:b};return y.autoSize&&(_.size.dflt="auto"),y.autoColor&&(_.color.dflt="auto"),y.arrayOk&&(_.family.arrayOk=!0,_.size.arrayOk=!0,_.color.arrayOk=!0),_}},{}],586:[function(x,ue,le){"use strict";ue.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(x,ue,le){"use strict";le.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},le.axesNames=["lonaxis","lataxis"],le.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},le.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},le.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},le.clipPad=.001,le.precision=.1,le.landColor="#F0DC82",le.waterColor="#3399FF",le.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},le.sphereSVG={type:"Sphere"},le.fillLayers={ocean:1,land:1,lakes:1},le.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},le.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],le.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],le.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("d3-geo"),T=b.geoPath,_=b.geoDistance,e=x("d3-geo-projection"),o=x("../../registry"),a=x("../../lib"),l=a.strTranslate,i=x("../../components/color"),v=x("../../components/drawing"),h=x("../../components/fx"),s=x("../plots"),d=x("../cartesian/axes"),p=x("../cartesian/autorange").getAutoRange,f=x("../../components/dragelement"),g=x("../cartesian/select").prepSelect,m=x("../cartesian/select").clearSelect,u=x("../cartesian/select").selectOnClick,w=x("./zoom"),c=x("./constants"),E=x("../../lib/geo_location_utils"),M=x("../../lib/topojson_utils"),S=x("topojson-client").feature;function C(N){this.id=N.id,this.graphDiv=N.graphDiv,this.container=N.container,this.topojsonURL=N.topojsonURL,this.isStatic=N.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var O=C.prototype;function I(N,F){var L=c.clipPad,P=N[0]+L,j=N[1]-L,U=F[0]+L,$=F[1]-L;P>0&&j<0&&(j+=360);var X=(j-P)/4;return{type:"Polygon",coordinates:[[[P,U],[P,$],[P+X,$],[P+2*X,$],[P+3*X,$],[j,$],[j,U],[j-X,U],[j-2*X,U],[j-3*X,U],[P,U]]]}}ue.exports=function(N){return new C(N)},O.plot=function(N,F,L){var P=this,j=F[this.id],U=[],$=!1;for(var X in c.layerNameToAdjective)if("frame"!==X&&j["show"+X]){$=!0;break}for(var te=0;te<N.length;te++)if(N[0][0].trace.locationmode){$=!0;break}if($){var ae=M.getTopojsonName(j);null!==P.topojson&&ae===P.topojsonName||(P.topojsonName=ae,void 0===PlotlyGeoAssets.topojson[P.topojsonName]&&U.push(P.fetchTopojson()))}U=U.concat(E.fetchTraceGeoData(N)),L.push(new Promise(function(J,ee){Promise.all(U).then(function(){P.topojson=PlotlyGeoAssets.topojson[P.topojsonName],P.update(N,F),J()}).catch(ee)}))},O.fetchTopojson=function(){var N=this,F=M.getTopojsonPath(N.topojsonURL,N.topojsonName);return new Promise(function(L,P){y.json(F,function(j,U){if(j)return P(404===j.status?new Error(["plotly.js could not find topojson file at",F+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[N.topojsonName]=U,L()})})},O.update=function(N,F){var L=F[this.id];this.hasChoropleth=!1;for(var P=0;P<N.length;P++){var j=N[P],U=j[0].trace;"choropleth"===U.type&&(this.hasChoropleth=!0),!0===U.visible&&U._length>0&&U._module.calcGeoJSON(j,F)}if(!this.updateProjection(N,F)){this.viewInitial&&this.scope===L.scope||this.saveViewInitial(L),this.scope=L.scope,this.updateBaseLayers(F,L),this.updateDims(F,L),this.updateFx(F,L),s.generalUpdatePerTraceModule(this.graphDiv,this,N,L);var $=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=$.selectAll(".point"),this.dataPoints.text=$.selectAll("text"),this.dataPaths.line=$.selectAll(".js-line");var X=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=X.selectAll("path"),this.render()}},O.updateProjection=function(N,F){var L=this.graphDiv,P=F[this.id],j=F._size,U=P.domain,$=P.projection,X=P.lonaxis,te=P.lataxis,ae=X._ax,J=te._ax,ee=this.projection=function(_e){var Ae=_e.projection,Fe=Ae.type,Pe=c.projNames[Fe];Pe="geo"+a.titleCase(Pe);for(var Be=(b[Pe]||e[Pe])(),qe=_e._isSatellite?180*Math.acos(1/Ae.distance)/Math.PI:_e._isClipped?c.lonaxisSpan[Fe]/2:null,We=["center","rotate","parallels","clipExtent"],Je=function(Ke){return Ke?Be:[]},ut=0;ut<We.length;ut++){var Ge=We[ut];"function"!=typeof Be[Ge]&&(Be[Ge]=Je)}return Be.isLonLatOverEdges=function(Ke){if(null===Be(Ke))return!0;if(qe){var nt=Be.rotate();return _(Ke,[-nt[0],-nt[1]])>qe*Math.PI/180}return!1},Be.getPath=function(){return T().projection(Be)},Be.getBounds=function(Ke){return Be.getPath().bounds(Ke)},Be.precision(c.precision),_e._isSatellite&&Be.tilt(Ae.tilt).distance(Ae.distance),qe&&Be.clipAngle(qe-c.clipPad),Be}(P),se=[[j.l+j.w*U.x[0],j.t+j.h*(1-U.y[1])],[j.l+j.w*U.x[1],j.t+j.h*(1-U.y[0])]],G=P.center||{},H=$.rotation||{},Y=X.range||[],oe=te.range||[];if(P.fitbounds){ae._length=se[1][0]-se[0][0],J._length=se[1][1]-se[0][1],ae.range=p(L,ae),J.range=p(L,J);var W=(ae.range[0]+ae.range[1])/2,ne=(J.range[0]+J.range[1])/2;if(P._isScoped)G={lon:W,lat:ne};else if(P._isClipped){G={lon:W,lat:ne},H={lon:W,lat:ne,roll:H.roll};var re=$.type,ce=c.lonaxisSpan[re]/2||180,fe=c.lataxisSpan[re]/2||90;Y=[W-ce,W+ce],oe=[ne-fe,ne+fe]}else G={lon:W,lat:ne},H={lon:W,lat:H.lat,roll:H.roll}}ee.center([G.lon-H.lon,G.lat-H.lat]).rotate([-H.lon,-H.lat,H.roll]).parallels($.parallels);var me=I(Y,oe);ee.fitExtent(se,me);var pe=this.bounds=ee.getBounds(me),we=this.fitScale=ee.scale(),ye=ee.translate();if(P.fitbounds){var Te=ee.getBounds(I(ae.range,J.range)),Le=Math.min((pe[1][0]-pe[0][0])/(Te[1][0]-Te[0][0]),(pe[1][1]-pe[0][1])/(Te[1][1]-Te[0][1]));isFinite(Le)?ee.scale(Le*we):a.warn("Something went wrong during"+this.id+"fitbounds computations.")}else ee.scale($.scale*we);var Oe=this.midPt=[(pe[0][0]+pe[1][0])/2,(pe[0][1]+pe[1][1])/2];if(ee.translate([ye[0]+(Oe[0]-ye[0]),ye[1]+(Oe[1]-ye[1])]).clipExtent(pe),P._isAlbersUsa){var Re=ee([G.lon,G.lat]),Ve=ee.translate();ee.translate([Ve[0]-(Re[0]-Ve[0]),Ve[1]-(Re[1]-Ve[1])])}},O.updateBaseLayers=function(N,F){var L=this,P=L.topojson,j=L.layers,U=L.basePaths;function $(ee){return"lonaxis"===ee||"lataxis"===ee}function X(ee){return Boolean(c.lineLayers[ee])}function te(ee){return Boolean(c.fillLayers[ee])}var ae=(this.hasChoropleth?c.layersForChoropleth:c.layers).filter(function(ee){return X(ee)||te(ee)?F["show"+ee]:!$(ee)||F[ee].showgrid}),J=L.framework.selectAll(".layer").data(ae,String);J.exit().each(function(ee){delete j[ee],delete U[ee],y.select(this).remove()}),J.enter().append("g").attr("class",function(ee){return"layer "+ee}).each(function(ee){var se=j[ee]=y.select(this);"bg"===ee?L.bgRect=se.append("rect").style("pointer-events","all"):$(ee)?U[ee]=se.append("path").style("fill","none"):"backplot"===ee?se.append("g").classed("choroplethlayer",!0):"frontplot"===ee?se.append("g").classed("scatterlayer",!0):X(ee)?U[ee]=se.append("path").style("fill","none").style("stroke-miterlimit",2):te(ee)&&(U[ee]=se.append("path").style("stroke","none"))}),J.order(),J.each(function(ee){var se=U[ee],G=c.layerNameToAdjective[ee];"frame"===ee?se.datum(c.sphereSVG):X(ee)||te(ee)?se.datum(S(P,P.objects[ee])):$(ee)&&se.datum(function(H,Y,oe){var W,ne,re,ce=Y[H],fe=c.scopeDefaults[Y.scope];"lonaxis"===H?(W=fe.lonaxisRange,ne=fe.lataxisRange,re=function(Ve,_e){return[Ve,_e]}):"lataxis"===H&&(W=fe.lataxisRange,ne=fe.lonaxisRange,re=function(Ve,_e){return[_e,Ve]});var me={type:"linear",range:[W[0],W[1]-1e-6],tick0:ce.tick0,dtick:ce.dtick};d.setConvert(me,oe);var pe=d.calcTicks(me);Y.isScoped||"lonaxis"!==H||pe.pop();for(var we=pe.length,ye=new Array(we),Te=0;Te<we;Te++)for(var Le=pe[Te].x,Oe=ye[Te]=[],Re=ne[0];Re<ne[1]+2.5;Re+=2.5)Oe.push(re(Le,Re));return{type:"MultiLineString",coordinates:ye}}(ee,F,N)).call(i.stroke,F[ee].gridcolor).call(v.dashLine,F[ee].griddash,F[ee].gridwidth),X(ee)?se.call(i.stroke,F[G+"color"]).call(v.dashLine,"",F[G+"width"]):te(ee)&&se.call(i.fill,F[G+"color"])})},O.updateDims=function(N,F){var L=this.bounds,P=(F.framewidth||0)/2,j=L[0][0]-P,U=L[0][1]-P,$=L[1][0]-j+P,X=L[1][1]-U+P;v.setRect(this.clipRect,j,U,$,X),this.bgRect.call(v.setRect,j,U,$,X).call(i.fill,F.bgcolor),this.xaxis._offset=j,this.xaxis._length=$,this.yaxis._offset=U,this.yaxis._length=X},O.updateFx=function(N,F){var L=this,P=L.graphDiv,j=L.bgRect,U=N.dragmode,$=N.clickmode;if(!L.isStatic){var X;"select"===U?X=function(J,ee){(J.range={})[L.id]=[ae([ee.xmin,ee.ymin]),ae([ee.xmax,ee.ymax])]}:"lasso"===U&&(X=function(J,ee,se){(J.lassoPoints={})[L.id]=se.filtered.map(ae)});var te={element:L.bgRect.node(),gd:P,plotinfo:{id:L.id,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:X},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id,clickFn:function(J){2===J&&m(P)}};"pan"===U?(j.node().onmousedown=null,j.call(w(L,F)),j.on("dblclick.zoom",function(){var J=L.viewInitial,ee={};for(var se in J)ee[L.id+"."+se]=J[se];o.call("_guiRelayout",P,ee),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||j.on("wheel.zoom",null)):"select"!==U&&"lasso"!==U||(j.on(".zoom",null),te.prepFn=function(J,ee,se){g(J,ee,se,te,U)},f.init(te)),j.on("mousemove",function(){var J=L.projection.invert(a.getPositionFromD3Event());if(!J)return f.unhover(P,y.event);L.xaxis.p2c=function(){return J[0]},L.yaxis.p2c=function(){return J[1]},h.hover(P,y.event,L.id)}),j.on("mouseout",function(){P._dragging||f.unhover(P,y.event)}),j.on("click",function(){"select"!==U&&"lasso"!==U&&($.indexOf("select")>-1&&u(y.event,P,[L.xaxis],[L.yaxis],L.id,te),$.indexOf("event")>-1&&h.click(P,y.event))})}function ae(J){return L.projection.invert([J[0]+L.xaxis._offset,J[1]+L.yaxis._offset])}},O.makeFramework=function(){var N=this,F=N.graphDiv,L=F._fullLayout,P="clip"+L._uid+N.id;N.clipDef=L._clips.append("clipPath").attr("id",P),N.clipRect=N.clipDef.append("rect"),N.framework=y.select(N.container).append("g").attr("class","geo "+N.id).call(v.setClipUrl,P,F),N.project=function(j){var U=N.projection(j);return U?[U[0]-N.xaxis._offset,U[1]-N.yaxis._offset]:[null,null]},N.xaxis={_id:"x",c2p:function(j){return N.project(j)[0]}},N.yaxis={_id:"y",c2p:function(j){return N.project(j)[1]}},N.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},d.setConvert(N.mockAxis,L)},O.saveViewInitial=function(N){var L=N.center||{},P=N.projection,j=P.rotation||{};this.viewInitial={fitbounds:N.fitbounds,"projection.scale":P.scale},a.extendFlat(this.viewInitial,N._isScoped?{"center.lon":L.lon,"center.lat":L.lat}:N._isClipped?{"projection.rotation.lon":j.lon,"projection.rotation.lat":j.lat}:{"center.lon":L.lon,"center.lat":L.lat,"projection.rotation.lon":j.lon})},O.render=function(){var N,F=this.projection,L=F.getPath();function P(U){var $=F(U.lonlat);return $?l($[0],$[1]):null}function j(U){return F.isLonLatOverEdges(U.lonlat)?"none":null}for(N in this.basePaths)this.basePaths[N].attr("d",L);for(N in this.dataPaths)this.dataPaths[N].attr("d",function(U){return L(U.geojson)});for(N in this.dataPoints)this.dataPoints[N].attr("display",j).attr("transform",P)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(x,ue,le){"use strict";var y=x("../../plots/get_data").getSubplotCalcData,b=x("../../lib").counterRegex,T=x("./geo"),_="geo",e=b(_),o={};o.geo={valType:"subplotid",dflt:_,editType:"calc"},ue.exports={attr:_,name:_,idRoot:_,idRegex:e,attrRegex:e,attributes:o,layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),plot:function(a){for(var l=a._fullLayout,i=a.calcdata,v=l._subplots.geo,h=0;h<v.length;h++){var s=v[h],d=y(i,_,s),p=l[s]._subplot;p||(p=T({id:s,graphDiv:a,container:l._geolayer.node(),topojsonURL:a._context.topojsonURL,staticPlot:a._context.staticPlot}),l[s]._subplot=p),p.plot(d,l,a._promises)}},updateFx:function(a){for(var l=a._fullLayout,i=l._subplots.geo,v=0;v<i.length;v++){var h=l[i[v]];h._subplot.updateFx(l,h)}},clean:function(a,l,i,v){for(var h=v._subplots.geo||[],s=0;s<h.length;s++){var d=h[s],p=v[d]._subplot;!l[d]&&p&&(p.framework.remove(),p.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(x,ue,le){"use strict";var y=x("../../components/color/attributes"),b=x("../domain").attributes,T=x("../../components/drawing/attributes").dash,_=x("./constants"),e=x("../../plot_api/edit_types").overrideAll,o=x("../../lib/sort_object_keys"),a={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:y.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:T};(ue.exports=e({domain:b({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:o(_.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:o(_.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:y.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:_.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:_.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:_.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:_.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:y.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:y.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:y.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:y.background},lonaxis:a,lataxis:a},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../subplot_defaults"),T=x("../get_data").getSubplotData,_=x("./constants"),e=x("./layout_attributes"),o=_.axesNames;function a(l,i,v,h){var s=T(h.fullData,"geo",h.id).map(function(H){return H._expandedIndex}),d=v("resolution"),p=v("scope"),f=_.scopeDefaults[p],g=v("projection.type",f.projType),m=i._isAlbersUsa="albers usa"===g;m&&(p=i.scope="usa");var u=i._isScoped="world"!==p,w=i._isSatellite="satellite"===g,c=i._isConic=-1!==g.indexOf("conic")||"albers"===g,E=i._isClipped=!!_.lonaxisSpan[g];if(!1===l.visible){var M=y.extendDeep({},i._template);M.showcoastlines=!1,M.showcountries=!1,M.showframe=!1,M.showlakes=!1,M.showland=!1,M.showocean=!1,M.showrivers=!1,M.showsubunits=!1,M.lonaxis&&(M.lonaxis.showgrid=!1),M.lataxis&&(M.lataxis.showgrid=!1),i._template=M}for(var S=v("visible"),C=0;C<o.length;C++){var O,I=o[C],N=[30,10][C];if(u)O=f[I+"Range"];else{var F=_[I+"Span"],L=(F[g]||F["*"])/2,P=v("projection.rotation."+I.substr(0,3),f.projRotate[C]);O=[P-L,P+L]}var j=v(I+".range",O);v(I+".tick0"),v(I+".dtick",N),v(I+".showgrid",!!S&&void 0)&&(v(I+".gridcolor"),v(I+".gridwidth"),v(I+".griddash")),i[I]._ax={type:"linear",_id:I.slice(0,3),_traceIndices:s,setScale:y.identity,c2l:y.identity,r2l:y.identity,autorange:!0,range:j.slice(),_m:1,_input:{}}}var U=i.lonaxis.range,$=i.lataxis.range,X=U[0],te=U[1];X>0&&te<0&&(te+=360);var ae,J,ee,se=(X+te)/2;if(!m){var G=u?f.projRotate:[se,0,0];ae=v("projection.rotation.lon",G[0]),v("projection.rotation.lat",G[1]),v("projection.rotation.roll",G[2]),v("showcoastlines",!u&&S)&&(v("coastlinecolor"),v("coastlinewidth")),v("showocean",!!S&&void 0)&&v("oceancolor")}m?(J=-96.6,ee=38.7):(J=u?se:ae,ee=($[0]+$[1])/2),v("center.lon",J),v("center.lat",ee),w&&(v("projection.tilt"),v("projection.distance")),c&&v("projection.parallels",f.projParallels||[0,60]),v("projection.scale"),v("showland",!!S&&void 0)&&v("landcolor"),v("showlakes",!!S&&void 0)&&v("lakecolor"),v("showrivers",!!S&&void 0)&&(v("rivercolor"),v("riverwidth")),v("showcountries",u&&"usa"!==p&&S)&&(v("countrycolor"),v("countrywidth")),("usa"===p||"north america"===p&&50===d)&&(v("showsubunits",S),v("subunitcolor"),v("subunitwidth")),u||v("showframe",S)&&(v("framecolor"),v("framewidth")),v("bgcolor"),v("fitbounds")&&(delete i.projection.scale,u?(delete i.center.lon,delete i.center.lat):E?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}ue.exports=function(l,i,v){b(l,i,v,{type:"geo",attributes:e,handleDefaults:a,fullData:v,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../registry"),_=Math.PI/180,e=180/Math.PI,o={cursor:"pointer"},a={cursor:"auto"};function l(S,C){return y.behavior.zoom().translate(C.translate()).scale(C.scale())}function i(S,C,O){var I=S.id,N=S.graphDiv,F=N.layout,L=F[I],P=N._fullLayout,j=P[I],U={},$={};function X(te,ae){U[I+"."+te]=b.nestedProperty(L,te).get(),T.call("_storeDirectGUIEdit",F,P._preGUI,U);var J=b.nestedProperty(j,te);J.get()!==ae&&(J.set(ae),b.nestedProperty(L,te).set(ae),$[I+"."+te]=ae)}O(X),X("projection.scale",C.scale()/S.fitScale),X("fitbounds",!1),N.emit("plotly_relayout",$)}function v(S,C){var O=l(0,C);function I(N){var F=C.invert(S.midPt);N("center.lon",F[0]),N("center.lat",F[1])}return O.on("zoomstart",function(){y.select(this).style(o)}).on("zoom",function(){C.scale(y.event.scale).translate(y.event.translate),S.render();var N=C.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/S.fitScale,"geo.center.lon":N[0],"geo.center.lat":N[1]})}).on("zoomend",function(){y.select(this).style(a),i(S,C,I)}),O}function h(S,C){var O,I,N,F,L,P,j,U,$,X=l(0,C);function te(J){return C.invert(J)}function ae(J){var ee=C.rotate(),se=C.invert(S.midPt);J("projection.rotation.lon",-ee[0]),J("center.lon",se[0]),J("center.lat",se[1])}return X.on("zoomstart",function(){y.select(this).style(o),O=y.mouse(this),I=C.rotate(),N=C.translate(),F=I,L=te(O)}).on("zoom",function(){if(P=y.mouse(this),function(se){var G=te(se);if(!G)return!0;var H=C(G);return Math.abs(H[0]-se[0])>2||Math.abs(H[1]-se[1])>2}(O))return X.scale(C.scale()),void X.translate(C.translate());C.scale(y.event.scale),C.translate([N[0],y.event.translate[1]]),L?te(P)&&(U=te(P),C.rotate(j=[F[0]+(U[0]-L[0]),I[1],I[2]]),F=j):L=te(O=P),$=!0,S.render();var J=C.rotate(),ee=C.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/S.fitScale,"geo.center.lon":ee[0],"geo.center.lat":ee[1],"geo.projection.rotation.lon":-J[0]})}).on("zoomend",function(){y.select(this).style(a),$&&i(S,C,ae)}),X}function s(S,C){var O,I={r:C.rotate(),k:C.scale()},N=l(0,C),F=function(te){for(var ae=0,J=arguments.length,ee=[];++ae<J;)ee.push(arguments[ae]);var se=y.dispatch.apply(null,ee);return se.of=function(G,H){return function(Y){var oe;try{oe=Y.sourceEvent=y.event,Y.target=te,y.event=Y,se[Y.type].apply(G,H)}finally{y.event=oe}}},se}(N,"zoomstart","zoom","zoomend"),L=0,P=N.on;function j(te){L++||te({type:"zoomstart"})}function U(te){te({type:"zoom"})}function $(te){--L||te({type:"zoomend"})}function X(te){var ae=C.rotate();te("projection.rotation.lon",-ae[0]),te("projection.rotation.lat",-ae[1])}return N.on("zoomstart",function(){y.select(this).style(o);var te=y.mouse(this),ae=C.rotate(),J=ae,ee=C.translate(),se=p(ae);O=d(C,te),P.call(N,"zoom",function(){var G=y.mouse(this);if(C.scale(I.k=y.event.scale),O){if(d(C,G)){C.rotate(ae).translate(ee);var H=d(C,G),Y=g(O,H),oe=E(f(se,Y)),W=I.r=m(oe,O,J);isFinite(W[0])&&isFinite(W[1])&&isFinite(W[2])||(W=J),C.rotate(W),J=W}}else O=d(C,te=G);U(F.of(this,arguments))}),j(F.of(this,arguments))}).on("zoomend",function(){y.select(this).style(a),P.call(N,"zoom",null),$(F.of(this,arguments)),i(S,C,X)}).on("zoom.redraw",function(){S.render();var te=C.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/S.fitScale,"geo.projection.rotation.lon":-te[0],"geo.projection.rotation.lat":-te[1]})}),y.rebind(N,F,"on")}function d(S,C){var I,N,F,L,O=S.invert(C);return O&&isFinite(O[0])&&isFinite(O[1])&&(N=(I=O)[0]*_,F=I[1]*_,[(L=Math.cos(F))*Math.cos(N),L*Math.sin(N),Math.sin(F)])}function p(S){var C=.5*S[0]*_,O=.5*S[1]*_,I=.5*S[2]*_,N=Math.sin(C),F=Math.cos(C),L=Math.sin(O),P=Math.cos(O),j=Math.sin(I),U=Math.cos(I);return[F*P*U+N*L*j,N*P*U-F*L*j,F*L*U+N*P*j,F*P*j-N*L*U]}function f(S,C){var O=S[0],I=S[1],N=S[2],F=S[3],L=C[0],P=C[1],j=C[2],U=C[3];return[O*L-I*P-N*j-F*U,O*P+I*L+N*U-F*j,O*j-I*U+N*L+F*P,O*U+I*j-N*P+F*L]}function g(S,C){if(S&&C){var O=[(L=S)[1]*(P=C)[2]-L[2]*P[1],L[2]*P[0]-L[0]*P[2],L[0]*P[1]-L[1]*P[0]],I=Math.sqrt(M(O,O)),N=.5*Math.acos(Math.max(-1,Math.min(1,M(S,C)))),F=Math.sin(N)/I;return I&&[Math.cos(N),O[2]*F,-O[1]*F,O[0]*F]}var L,P}function m(S,C,O){var I=c(C,2,S[0]);I=c(I,1,S[1]),I=c(I,0,S[2]-O[2]);var N,F,L=C[0],P=C[1],j=C[2],U=I[0],$=I[1],X=I[2],te=Math.atan2(P,L)*e,ae=Math.sqrt(L*L+P*P);Math.abs($)>ae?(F=($>0?90:-90)-te,N=0):(F=Math.asin($/ae)*e-te,N=Math.sqrt(ae*ae-$*$));var J=180-F-2*te,ee=(Math.atan2(X,U)-Math.atan2(j,N))*e,se=(Math.atan2(X,U)-Math.atan2(j,-N))*e;return u(O[0],O[1],F,ee)<=u(O[0],O[1],J,se)?[F,ee,O[2]]:[J,se,O[2]]}function u(S,C,O,I){var N=w(O-S),F=w(I-C);return Math.sqrt(N*N+F*F)}function w(S){return(S%360+540)%360-180}function c(S,C,O){var I=O*_,N=S.slice(),F=0===C?1:0,L=2===C?1:2,P=Math.cos(I),j=Math.sin(I);return N[F]=S[F]*P-S[L]*j,N[L]=S[L]*P+S[F]*j,N}function E(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*e,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*e]}function M(S,C){for(var O=0,I=0,N=S.length;I<N;++I)O+=S[I]*C[I];return O}ue.exports=function(S,C){return(C._isScoped?v:C._isClipped?s:h)(S,S.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(x,ue,le){"use strict";var y=x("../registry"),b=x("./cartesian/constants").SUBPLOT_PATTERN;le.getSubplotCalcData=function(T,_,e){var o=y.subplotsRegistry[_];if(!o)return[];for(var a=o.attr,l=[],i=0;i<T.length;i++){var v=T[i];v[0].trace[a]===e&&l.push(v)}return l},le.getModuleCalcData=function(T,_){var e,o=[],a=[];if(!(e="string"==typeof _?y.getModule(_).plot:"function"==typeof _?_:_.plot))return[o,T];for(var l=0;l<T.length;l++){var i=T[l],v=i[0].trace;!0===v.visible&&0!==v._length&&(v._module.plot===e?o.push(i):a.push(i))}return[o,a]},le.getSubplotData=function(T,_,e){if(!y.subplotsRegistry[_])return[];var o,a,l,i=y.subplotsRegistry[_].attr,v=[];if("gl2d"===_){var h=e.match(b);a="x"+h[1],l="y"+h[2]}for(var s=0;s<T.length;s++)o=T[s],"gl2d"===_&&y.traceIs(o,"gl2d")?o[i[0]]===a&&o[i[1]]===l&&v.push(o):o[i]===e&&v.push(o);return v}},{"../registry":638,"./cartesian/constants":561}],594:[function(x,ue,le){"use strict";var y=x("mouse-change"),b=x("mouse-wheel"),T=x("mouse-event-offset"),_=x("../cartesian/constants"),e=x("has-passive-events");function o(a,l){this.element=a,this.plot=l,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ue.exports=function(a){var l=a.mouseContainer,i=a.glplot,v=new o(l,i);function h(){a.xaxis.autorange=!1,a.yaxis.autorange=!1}function s(d,p,f){var g,m,u=a.calcDataBox(),w=i.viewBox,c=v.lastPos[0],E=v.lastPos[1],M=_.MINDRAG*i.pixelRatio,S=_.MINZOOM*i.pixelRatio;function C(P,j,U){var $=Math.min(j,U),X=Math.max(j,U);$!==X?(u[P]=$,u[P+2]=X,v.dataBox=u,a.setRanges(u)):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}switch(p*=i.pixelRatio,f=w[3]-w[1]-(f*=i.pixelRatio),a.fullLayout.dragmode){case"zoom":if(d){var O=p/(w[2]-w[0])*(u[2]-u[0])+u[0],I=f/(w[3]-w[1])*(u[3]-u[1])+u[1];v.boxInited||(v.boxStart[0]=O,v.boxStart[1]=I,v.dragStart[0]=p,v.dragStart[1]=f),v.boxEnd[0]=O,v.boxEnd[1]=I,v.boxInited=!0,v.boxEnabled||v.boxStart[0]===v.boxEnd[0]&&v.boxStart[1]===v.boxEnd[1]||(v.boxEnabled=!0);var N=Math.abs(v.dragStart[0]-p)<S,F=Math.abs(v.dragStart[1]-f)<S;if(!function(){for(var P=a.graphDiv._fullLayout._axisConstraintGroups,j=a.xaxis._id,U=a.yaxis._id,$=0;$<P.length;$++)if(-1!==P[$][j]){if(-1!==P[$][U])return!0;break}return!1}()||N&&F)N&&(v.boxEnd[0]=v.boxStart[0]),F&&(v.boxEnd[1]=v.boxStart[1]);else{g=v.boxEnd[0]-v.boxStart[0],m=v.boxEnd[1]-v.boxStart[1];var L=(u[3]-u[1])/(u[2]-u[0]);Math.abs(g*L)>Math.abs(m)?(v.boxEnd[1]=v.boxStart[1]+Math.abs(g)*L*(m>=0?1:-1),v.boxEnd[1]<u[1]?(v.boxEnd[1]=u[1],v.boxEnd[0]=v.boxStart[0]+(u[1]-v.boxStart[1])/Math.abs(L)):v.boxEnd[1]>u[3]&&(v.boxEnd[1]=u[3],v.boxEnd[0]=v.boxStart[0]+(u[3]-v.boxStart[1])/Math.abs(L))):(v.boxEnd[0]=v.boxStart[0]+Math.abs(m)/L*(g>=0?1:-1),v.boxEnd[0]<u[0]?(v.boxEnd[0]=u[0],v.boxEnd[1]=v.boxStart[1]+(u[0]-v.boxStart[0])*Math.abs(L)):v.boxEnd[0]>u[2]&&(v.boxEnd[0]=u[2],v.boxEnd[1]=v.boxStart[1]+(u[2]-v.boxStart[0])*Math.abs(L)))}}else v.boxEnabled?(m=v.boxStart[1]!==v.boxEnd[1],(g=v.boxStart[0]!==v.boxEnd[0])||m?(g&&(C(0,v.boxStart[0],v.boxEnd[0]),a.xaxis.autorange=!1),m&&(C(1,v.boxStart[1],v.boxEnd[1]),a.yaxis.autorange=!1),a.relayoutCallback()):a.glplot.setDirty(),v.boxEnabled=!1,v.boxInited=!1):v.boxInited&&(v.boxInited=!1);break;case"pan":v.boxEnabled=!1,v.boxInited=!1,d?(v.panning||(v.dragStart[0]=p,v.dragStart[1]=f),Math.abs(v.dragStart[0]-p)<M&&(p=v.dragStart[0]),Math.abs(v.dragStart[1]-f)<M&&(f=v.dragStart[1]),m=(E-f)*(u[3]-u[1])/(i.viewBox[3]-i.viewBox[1]),u[0]+=g=(c-p)*(u[2]-u[0])/(i.viewBox[2]-i.viewBox[0]),u[2]+=g,u[1]+=m,u[3]+=m,a.setRanges(u),v.panning=!0,v.lastInputTime=Date.now(),h(),a.cameraChanged(),a.handleAnnotations()):v.panning&&(v.panning=!1,a.relayoutCallback())}v.lastPos[0]=p,v.lastPos[1]=f}return v.mouseListener=y(l,s),l.addEventListener("touchstart",function(d){var p=T(d.changedTouches[0],l);s(0,p[0],p[1]),s(1,p[0],p[1]),d.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchmove",function(d){d.preventDefault();var p=T(d.changedTouches[0],l);s(1,p[0],p[1]),d.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchend",function(d){s(0,v.lastPos[0],v.lastPos[1]),d.preventDefault()},!!e&&{passive:!1}),v.wheelListener=b(l,function(d,p){if(!a.scrollZoom)return!1;var f=a.calcDataBox(),g=i.viewBox,m=v.lastPos[0],u=v.lastPos[1],w=Math.exp(5*p/(g[3]-g[1])),c=m/(g[2]-g[0])*(f[2]-f[0])+f[0],E=u/(g[3]-g[1])*(f[3]-f[1])+f[1];return f[0]=(f[0]-c)*w+c,f[2]=(f[2]-c)*w+c,f[1]=(f[1]-E)*w+E,f[3]=(f[3]-E)*w+E,a.setRanges(f),v.lastInputTime=Date.now(),h(),a.cameraChanged(),a.handleAnnotations(),a.relayoutCallback(),!0},!0),v}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(x,ue,le){"use strict";var y=x("../cartesian/axes"),b=x("../../lib/str2rgbarray");function T(o){this.scene=o,this.gl=o.gl,this.pixelRatio=o.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var _=T.prototype,e=["xaxis","yaxis"];_.merge=function(o){var a,l,i,v,h,s,d,p,f,g,m;for(this.titleEnable=!1,this.backgroundColor=b(o.plot_bgcolor),g=0;g<2;++g){var u=(a=e[g]).charAt(0);for(i=(l=o[this.scene[a]._name]).title.text===this.scene.fullLayout._dfltTitle[u]?"":l.title.text,m=0;m<=2;m+=2)this.labelEnable[g+m]=!1,this.labels[g+m]=i,this.labelColor[g+m]=b(l.title.font.color),this.labelFont[g+m]=l.title.font.family,this.labelSize[g+m]=l.title.font.size,this.labelPad[g+m]=this.getLabelPad(a,l),this.tickEnable[g+m]=!1,this.tickColor[g+m]=b((l.tickfont||{}).color),this.tickAngle[g+m]="auto"===l.tickangle?0:Math.PI*-l.tickangle/180,this.tickPad[g+m]=this.getTickPad(l),this.tickMarkLength[g+m]=0,this.tickMarkWidth[g+m]=l.tickwidth||0,this.tickMarkColor[g+m]=b(l.tickcolor),this.borderLineEnable[g+m]=!1,this.borderLineColor[g+m]=b(l.linecolor),this.borderLineWidth[g+m]=l.linewidth||0;d=this.hasSharedAxis(l),h=this.hasAxisInDfltPos(a,l)&&!d,s=this.hasAxisInAltrPos(a,l)&&!d,v=l.mirror||!1,p=d?-1!==String(v).indexOf("all"):!!v,f=d?"allticks"===v:-1!==String(v).indexOf("ticks"),h?this.labelEnable[g]=!0:s&&(this.labelEnable[g+2]=!0),h?this.tickEnable[g]=l.showticklabels:s&&(this.tickEnable[g+2]=l.showticklabels),(h||p)&&(this.borderLineEnable[g]=l.showline),(s||p)&&(this.borderLineEnable[g+2]=l.showline),(h||f)&&(this.tickMarkLength[g]=this.getTickMarkLength(l)),(s||f)&&(this.tickMarkLength[g+2]=this.getTickMarkLength(l)),this.gridLineEnable[g]=l.showgrid,this.gridLineColor[g]=b(l.gridcolor),this.gridLineWidth[g]=l.gridwidth,this.zeroLineEnable[g]=l.zeroline,this.zeroLineColor[g]=b(l.zerolinecolor),this.zeroLineWidth[g]=l.zerolinewidth}},_.hasSharedAxis=function(o){var a=this.scene;return 0!==y.findSubplotsWithAxis(a.fullLayout._subplots.gl2d,o).indexOf(a.id)},_.hasAxisInDfltPos=function(o,a){var l=a.side;return"xaxis"===o?"bottom"===l:"yaxis"===o?"left"===l:void 0},_.hasAxisInAltrPos=function(o,a){var l=a.side;return"xaxis"===o?"top"===l:"yaxis"===o?"right"===l:void 0},_.getLabelPad=function(o,a){var l=a.title.font.size,i=a.showticklabels;return"xaxis"===o?"top"===a.side?l*(1.5+(i?1:0))-10:l*(1.5+(i?.5:0))-10:"yaxis"===o?"right"===a.side?10+l*(1.5+(i?1:.5)):10+l*(1.5+(i?.5:0)):void 0},_.getTickPad=function(o){return"outside"===o.ticks?10+o.ticklen:15},_.getTickMarkLength=function(o){if(!o.ticks)return 0;var a=o.ticklen;return"inside"===o.ticks?-a:a},ue.exports=function(o){return new T(o)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(x,ue,le){"use strict";var y=x("../../plot_api/edit_types").overrideAll,b=x("./scene2d"),T=x("../layout_attributes"),_=x("../../constants/xmlns_namespaces"),e=x("../cartesian/constants"),o=x("../cartesian"),a=x("../../components/fx/layout_attributes"),l=x("../get_data").getSubplotData;le.name="gl2d",le.attr=["xaxis","yaxis"],le.idRoot=["x","y"],le.idRegex=e.idRegex,le.attrRegex=e.attrRegex,le.attributes=x("../cartesian/attributes"),le.supplyLayoutDefaults=function(i,v,h){v._has("cartesian")||o.supplyLayoutDefaults(i,v,h)},le.layoutAttrOverrides=y(o.layoutAttributes,"plot","from-root"),le.baseLayoutAttrOverrides=y({plot_bgcolor:T.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),le.plot=function(i){for(var v=i._fullLayout,h=i._fullData,s=v._subplots.gl2d,d=0;d<s.length;d++){var p=s[d],f=v._plots[p],g=l(h,"gl2d",p),m=f._scene2d;void 0===m&&(m=new b({id:p,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},v),f._scene2d=m),m.plot(g,i.calcdata,v,i.layout)}},le.clean=function(i,v,h,s){for(var d=s._subplots.gl2d||[],p=0;p<d.length;p++){var f=d[p],g=s._plots[f];g._scene2d&&0===l(i,"gl2d",f).length&&(g._scene2d.destroy(),delete s._plots[f])}o.clean.apply(this,arguments)},le.drawFramework=function(i){i._context.staticPlot||o.drawFramework(i)},le.toSVG=function(i){for(var v=i._fullLayout,h=v._subplots.gl2d,s=0;s<h.length;s++){var d=v._plots[h[s]]._scene2d,p=d.toImage("png");v._glimages.append("svg:image").attr({xmlns:_.svg,"xlink:href":p,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},le.updateFx=function(i){for(var v=i._fullLayout,h=v._subplots.gl2d,s=0;s<h.length;s++)v._plots[h[s]]._scene2d.updateFx(v.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(x,ue,le){"use strict";var y,b,T=x("../../registry"),_=x("../../plots/cartesian/axes"),e=x("../../components/fx"),o=x("../../../stackgl_modules").gl_plot2d,a=x("../../../stackgl_modules").gl_spikes2d,l=x("../../../stackgl_modules").gl_select_box,i=x("webgl-context"),v=x("./convert"),h=x("./camera"),s=x("../../lib/show_no_webgl_msg"),d=x("../cartesian/constraints"),p=d.enforce,f=d.clean,g=x("../cartesian/autorange").doAutoRange,m=x("../../components/dragelement/helpers"),u=m.drawMode,w=m.selectMode,c=["xaxis","yaxis"],E=x("../cartesian/constants").SUBPLOT_PATTERN;function M(C,O){this.container=C.container,this.graphDiv=C.graphDiv,this.pixelRatio=C.plotGlPixelRatio||window.devicePixelRatio,this.id=C.id,this.staticPlot=!!C.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(O),this.makeFramework(),this.stopped||(this.glplotOptions=v(this),this.glplotOptions.merge(O),this.glplot=o(this.glplotOptions),this.camera=h(this),this.traces={},this.spikes=a(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ue.exports=M;var S=M.prototype;S.makeFramework=function(){if(this.staticPlot){if(!(b||(y=document.createElement("canvas"),b=i({canvas:y,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=y,this.gl=b}else{var C=this.container.querySelector(".gl-canvas-focus"),O=i({canvas:C,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!O)return s(this),void(this.stopped=!0);this.canvas=C,this.gl=O}var I=this.canvas;I.style.width="100%",I.style.height="100%",I.style.position="absolute",I.style.top="0px",I.style.left="0px",I.style["pointer-events"]="none",this.updateSize(I);var N=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");N.style.position="absolute",N.style.top=N.style.left="0px",N.style.width=N.style.height="100%",N.style["z-index"]=20,N.style["pointer-events"]="none";var F=this.mouseContainer=document.createElement("div");F.style.position="absolute",F.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var L=this.container;L.appendChild(N),L.appendChild(F);var P=this;F.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),F.addEventListener("mouseover",function(){P.isMouseOver=!0})},S.toImage=function(C){C||(C="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(y),this.updateSize(this.canvas);var O=this.glplot.gl,I=O.drawingBufferWidth,N=O.drawingBufferHeight;O.clearColor(1,1,1,0),O.clear(O.COLOR_BUFFER_BIT|O.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),O.bindFramebuffer(O.FRAMEBUFFER,null);var F=new Uint8Array(I*N*4);O.readPixels(0,0,I,N,O.RGBA,O.UNSIGNED_BYTE,F);for(var L=0,P=N-1;L<P;++L,--P)for(var j=0;j<I;++j)for(var U=0;U<4;++U){var $=F[4*(I*L+j)+U];F[4*(I*L+j)+U]=F[4*(I*P+j)+U],F[4*(I*P+j)+U]=$}var X=document.createElement("canvas");X.width=I,X.height=N;var te,ae=X.getContext("2d",{willReadFrequently:!0}),J=ae.createImageData(I,N);switch(J.data.set(F),ae.putImageData(J,0,0),C){case"jpeg":te=X.toDataURL("image/jpeg");break;case"webp":te=X.toDataURL("image/webp");break;default:te=X.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(y),te},S.updateSize=function(C){C||(C=this.canvas);var O=this.pixelRatio,I=this.fullLayout,F=I.height,L=0|Math.ceil(O*I.width),P=0|Math.ceil(O*F);return C.width===L&&C.height===P||(C.width=L,C.height=P),C},S.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var C=[_.calcTicks(this.xaxis),_.calcTicks(this.yaxis)],O=0;O<2;++O)for(var I=0;I<C[O].length;++I)C[O][I].text=C[O][I].text+"";return C},S.updateRefs=function(C){this.fullLayout=C;var O=this.id.match(E),N="yaxis"+O[2];this.xaxis=this.fullLayout["xaxis"+O[1]],this.yaxis=this.fullLayout[N]},S.relayoutCallback=function(){var C=this.graphDiv,O=this.xaxis,I=this.yaxis,N=C.layout,F={},L=F[O._name+".range"]=O.range.slice(),P=F[I._name+".range"]=I.range.slice();F[O._name+".autorange"]=O.autorange,F[I._name+".autorange"]=I.autorange,T.call("_storeDirectGUIEdit",C.layout,C._fullLayout._preGUI,F);var j=N[O._name];j.range=L,j.autorange=O.autorange;var U=N[I._name];U.range=P,U.autorange=I.autorange,F.lastInputTime=this.camera.lastInputTime,C.emit("plotly_relayout",F)},S.cameraChanged=function(){var C=this.camera;this.glplot.setDataBox(this.calcDataBox());var O=this.computeTickMarks();(function(I,N){for(var F=0;F<2;++F){var L=I[F],P=N[F];if(L.length!==P.length)return!0;for(var j=0;j<L.length;++j)if(L[j].x!==P[j].x)return!0}return!1})(O,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=O,this.glplotOptions.dataBox=C.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},S.handleAnnotations=function(){for(var C=this.graphDiv,O=this.fullLayout.annotations,I=0;I<O.length;I++){var N=O[I];N.xref===this.xaxis._id&&N.yref===this.yaxis._id&&T.getComponentMethod("annotations","drawOne")(C,I)}},S.destroy=function(){if(this.glplot){var C=this.traces;C&&Object.keys(C).map(function(O){C[O].dispose(),delete C[O]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},S.plot=function(C,O,I){var N=this.glplot;this.updateRefs(I),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(C,O),this.updateFx(I.dragmode);var F=I.width,L=I.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(I),P.screenBox=[0,0,F,L];var j={_fullLayout:{_axisConstraintGroups:I._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:I._size}};f(j,this.xaxis),f(j,this.yaxis);var U,$,X=I._size,te=this.xaxis.domain,ae=this.yaxis.domain;for(P.viewBox=[X.l+te[0]*X.w,X.b+ae[0]*X.h,F-X.r-(1-te[1])*X.w,L-X.t-(1-ae[1])*X.h],this.mouseContainer.style.width=X.w*(te[1]-te[0])+"px",this.mouseContainer.style.height=X.h*(ae[1]-ae[0])+"px",this.mouseContainer.height=X.h*(ae[1]-ae[0]),this.mouseContainer.style.left=X.l+te[0]*X.w+"px",this.mouseContainer.style.top=X.t+(1-ae[1])*X.h+"px",$=0;$<2;++$)(U=this[c[$]])._length=P.viewBox[$+2]-P.viewBox[$],g(this.graphDiv,U),U.setScale();p(j),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(I),N.update(P),this.glplot.draw()},S.calcDataBox=function(){var C=this.xaxis,O=this.yaxis,I=C.range,N=O.range,F=C.r2l,L=O.r2l;return[F(I[0]),L(N[0]),F(I[1]),L(N[1])]},S.setRanges=function(C){var O=this.xaxis,I=this.yaxis,N=O.l2r,F=I.l2r;O.range=[N(C[0]),N(C[2])],I.range=[F(C[1]),F(C[3])]},S.updateTraces=function(C,O){var I,N,F,L=Object.keys(this.traces);this.fullData=C;e:for(I=0;I<L.length;I++){var P=L[I],j=this.traces[P];for(N=0;N<C.length;N++)if((F=C[N]).uid===P&&F.type===j.type)continue e;j.dispose(),delete this.traces[P]}for(I=0;I<C.length;I++){var U=O[I],$=this.traces[(F=C[I]).uid];$?$.update(F,U):($=F._module.plot(this,F,U),this.traces[F.uid]=$)}this.glplot.objects.sort(function(X,te){return X._trace.index-te._trace.index})},S.updateFx=function(C){w(C)||u(C)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===C?"move":"zoom"===C?"crosshair":null},S.emitPointAction=function(C,O){for(var I,N=C.trace.uid,F=C.pointIndex,L=0;L<this.fullData.length;L++)this.fullData[L].uid===N&&(I=this.fullData[L]);var P={x:C.traceCoord[0],y:C.traceCoord[1],curveNumber:I.index,pointNumber:F,data:I._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(P,I,F),this.graphDiv.emit(O,{points:[P]})},S.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var C=this.glplot,O=this.camera,I=O.mouseListener,N=1===this.lastButtonState&&0===I.buttons,F=this.fullLayout;this.lastButtonState=I.buttons,this.cameraChanged();var L,P=I.x*C.pixelRatio,j=this.canvas.height-C.pixelRatio*I.y;if(O.boxEnabled&&"zoom"===F.dragmode){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(O.boxStart[0],O.boxEnd[0]),Math.min(O.boxStart[1],O.boxEnd[1]),Math.max(O.boxStart[0],O.boxEnd[0]),Math.max(O.boxStart[1],O.boxEnd[1])],$=0;$<2;$++)O.boxStart[$]===O.boxEnd[$]&&(U[$]=C.dataBox[$],U[$+2]=C.dataBox[$+2]);C.setDirty()}else if(!O.panning&&this.isMouseOver){this.selectBox.enabled=!1;var X=F._size,J=(L=C.pick(P/C.pixelRatio+X.l+this.xaxis.domain[0]*X.w,j/C.pixelRatio-(X.t+(1-this.yaxis.domain[1])*X.h)))&&L.object._trace.handlePick(L);if(J&&N&&this.emitPointAction(J,"plotly_click"),L&&"skip"!==L.object._trace.hoverinfo&&F.hovermode&&J&&(!this.lastPickResult||this.lastPickResult.traceUid!==J.trace.uid||this.lastPickResult.dataCoord[0]!==J.dataCoord[0]||this.lastPickResult.dataCoord[1]!==J.dataCoord[1])){var ee=J;this.lastPickResult={traceUid:J.trace?J.trace.uid:null,dataCoord:J.dataCoord.slice()},this.spikes.update({center:L.dataCoord}),ee.screenCoord=[((C.viewBox[2]-C.viewBox[0])*(L.dataCoord[0]-C.dataBox[0])/(C.dataBox[2]-C.dataBox[0])+C.viewBox[0])/C.pixelRatio,(this.canvas.height-(C.viewBox[3]-C.viewBox[1])*(L.dataCoord[1]-C.dataBox[1])/(C.dataBox[3]-C.dataBox[1])-C.viewBox[1])/C.pixelRatio],this.emitPointAction(J,"plotly_hover");var se=this.fullData[ee.trace.index]||{},G=ee.pointIndex,H=e.castHoverinfo(se,F,G);if(H&&"all"!==H){var Y=H.split("+");-1===Y.indexOf("x")&&(ee.traceCoord[0]=void 0),-1===Y.indexOf("y")&&(ee.traceCoord[1]=void 0),-1===Y.indexOf("z")&&(ee.traceCoord[2]=void 0),-1===Y.indexOf("text")&&(ee.textLabel=void 0),-1===Y.indexOf("name")&&(ee.name=void 0)}e.loneHover({x:ee.screenCoord[0],y:ee.screenCoord[1],xLabel:this.hoverFormatter("xaxis",ee.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",ee.traceCoord[1]),zLabel:ee.traceCoord[2],text:ee.textLabel,name:ee.name,color:e.castHoverOption(se,G,"bgcolor")||ee.color,borderColor:e.castHoverOption(se,G,"bordercolor"),fontFamily:e.castHoverOption(se,G,"font.family"),fontSize:e.castHoverOption(se,G,"font.size"),fontColor:e.castHoverOption(se,G,"font.color"),nameLength:e.castHoverOption(se,G,"namelength"),textAlign:e.castHoverOption(se,G,"align")},{container:this.svgContainer,gd:this.graphDiv})}}L||this.unhover(),C.draw()}},S.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},S.hoverFormatter=function(C,O){if(void 0!==O){var I=this[C];return _.tickText(I,I.c2l(O),"hover").text}}},{"../../../stackgl_modules":1124,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(x,ue,le){"use strict";var y=x("../../plot_api/edit_types").overrideAll,b=x("../../components/fx/layout_attributes"),T=x("./scene"),_=x("../get_data").getSubplotData,e=x("../../lib"),o=x("../../constants/xmlns_namespaces");le.name="gl3d",le.attr="scene",le.idRoot="scene",le.idRegex=le.attrRegex=e.counterRegex("scene"),le.attributes=x("./layout/attributes"),le.layoutAttributes=x("./layout/layout_attributes"),le.baseLayoutAttrOverrides=y({hoverlabel:b.hoverlabel},"plot","nested"),le.supplyLayoutDefaults=x("./layout/defaults"),le.plot=function(a){for(var l=a._fullLayout,i=a._fullData,v=l._subplots.gl3d,h=0;h<v.length;h++){var s=v[h],d=_(i,"gl3d",s),p=l[s],f=p.camera,g=p._scene;g||(g=new T({id:s,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio,camera:f},l),p._scene=g),g.viewInitial||(g.viewInitial={up:{x:f.up.x,y:f.up.y,z:f.up.z},eye:{x:f.eye.x,y:f.eye.y,z:f.eye.z},center:{x:f.center.x,y:f.center.y,z:f.center.z}}),g.plot(d,l,a.layout)}},le.clean=function(a,l,i,v){for(var h=v._subplots.gl3d||[],s=0;s<h.length;s++){var d=h[s];!l[d]&&v[d]._scene&&(v[d]._scene.destroy(),v._infolayer&&v._infolayer.selectAll(".annotation-"+d).remove())}},le.toSVG=function(a){for(var l=a._fullLayout,i=l._subplots.gl3d,v=l._size,h=0;h<i.length;h++){var s=l[i[h]],d=s.domain,p=s._scene,f=p.toImage("png");l._glimages.append("svg:image").attr({xmlns:o.svg,"xlink:href":f,x:v.l+v.w*d.x[0],y:v.t+v.h*(1-d.y[1]),width:v.w*(d.x[1]-d.x[0]),height:v.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),p.destroy()}},le.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var l=a.substr(5);return"1"===l&&(l=""),"scene"+l}},le.updateFx=function(a){for(var l=a._fullLayout,i=l._subplots.gl3d,v=0;v<i.length;v++)l[i[v]]._scene.updateFx(l.dragmode,l.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(x,ue,le){"use strict";ue.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(x,ue,le){"use strict";var y=x("../../../components/color"),b=x("../../cartesian/layout_attributes"),T=x("../../../lib/extend").extendFlat,_=x("../../../plot_api/edit_types").overrideAll;ue.exports=_({visible:b.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:y.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:b.color,categoryorder:b.categoryorder,categoryarray:b.categoryarray,title:{text:b.title.text,font:b.title.font},type:T({},b.type,{values:["-","linear","log","date","category"]}),autotypenumbers:b.autotypenumbers,autorange:b.autorange,rangemode:b.rangemode,range:T({},b.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:b.tickmode,nticks:b.nticks,tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,mirror:b.mirror,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,showticklabels:b.showticklabels,tickfont:b.tickfont,tickangle:b.tickangle,tickprefix:b.tickprefix,showtickprefix:b.showtickprefix,ticksuffix:b.ticksuffix,showticksuffix:b.showticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickformat:b.tickformat,tickformatstops:b.tickformatstops,hoverformat:b.hoverformat,showline:b.showline,linecolor:b.linecolor,linewidth:b.linewidth,showgrid:b.showgrid,gridcolor:T({},b.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:b.gridwidth,zeroline:b.zeroline,zerolinecolor:b.zerolinecolor,zerolinewidth:b.zerolinewidth,_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(x,ue,le){"use strict";var y=x("tinycolor2").mix,b=x("../../../lib"),T=x("../../../plot_api/plot_template"),_=x("./axis_attributes"),e=x("../../cartesian/type_defaults"),o=x("../../cartesian/axis_defaults"),a=["xaxis","yaxis","zaxis"];ue.exports=function(l,i,v){var h,s;function d(g,m){return b.coerce(h,s,_,g,m)}for(var p=0;p<a.length;p++){var f=a[p];h=l[f]||{},(s=T.newContainer(i,f))._id=f[0]+v.scene,s._name=f,e(h,s,d,v),o(h,s,d,{font:v.font,letter:f[0],data:v.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:v.bgColor,calendar:v.calendar},v.fullLayout),d("gridcolor",y(s.color,v.bgColor,13600/187).toRgbString()),d("title.text",f[0]),s.setScale=b.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",s.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(x,ue,le){"use strict";var y=x("../../../lib/str2rgbarray"),b=x("../../../lib"),T=["xaxis","yaxis","zaxis"];function _(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}_.prototype.merge=function(e,o){for(var a=0;a<3;++a){var l=o[T[a]];l.visible?(this.labels[a]=e._meta?b.templateString(l.title.text,e._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[a]=y(l.title.font.color)),l.title.font.family&&(this.labelFont[a]=l.title.font.family),l.title.font.size&&(this.labelSize[a]=l.title.font.size)),"showline"in l&&(this.lineEnable[a]=l.showline),"linecolor"in l&&(this.lineColor[a]=y(l.linecolor)),"linewidth"in l&&(this.lineWidth[a]=l.linewidth),"showgrid"in l&&(this.gridEnable[a]=l.showgrid),"gridcolor"in l&&(this.gridColor[a]=y(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[a]=l.gridwidth),"log"===l.type?this.zeroEnable[a]=!1:"zeroline"in l&&(this.zeroEnable[a]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[a]=y(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[a]=l.zerolinewidth),this.lineTickEnable[a]=!(!("ticks"in l)||!l.ticks),"ticklen"in l&&(this.lineTickLength[a]=this._defaultLineTickLength[a]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[a]=y(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[a]=l.tickwidth),"tickangle"in l&&(this.tickAngle[a]="auto"===l.tickangle?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[a]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[a]=y(l.tickfont.color)),l.tickfont.family&&(this.tickFont[a]=l.tickfont.family),l.tickfont.size&&(this.tickSize[a]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[a]=!0,this.lineMirror[a]=!0):!0===l.mirror?(this.lineTickMirror[a]=!1,this.lineMirror[a]=!0):(this.lineTickMirror[a]=!1,this.lineMirror[a]=!1):this.lineMirror[a]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[a]=!0,this.backgroundColor[a]=y(l.backgroundcolor)):this.backgroundEnable[a]=!1):(this.tickEnable[a]=!1,this.labelEnable[a]=!1,this.lineEnable[a]=!1,this.lineTickEnable[a]=!1,this.gridEnable[a]=!1,this.zeroEnable[a]=!1,this.backgroundEnable[a]=!1)}},ue.exports=function(e,o){var a=new _;return a.merge(e,o),a}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(x,ue,le){"use strict";var y=x("../../../lib"),b=x("../../../components/color"),T=x("../../../registry"),_=x("../../subplot_defaults"),e=x("./axis_defaults"),o=x("./layout_attributes"),a=x("../../get_data").getSubplotData;function l(i,v,h,s){for(var d=h("bgcolor"),p=b.combine(d,s.paper_bgcolor),f=["up","center","eye"],g=0;g<f.length;g++)h("camera."+f[g]+".x"),h("camera."+f[g]+".y"),h("camera."+f[g]+".z");h("camera.projection.type");var m=!!h("aspectratio.x")&&!!h("aspectratio.y")&&!!h("aspectratio.z"),u=h("aspectmode",m?"manual":"auto");m||(i.aspectratio=v.aspectratio={x:1,y:1,z:1},"manual"===u&&(v.aspectmode="auto"),i.aspectmode=v.aspectmode);var w=a(s.fullData,"gl3d",s.id);e(i,v,{font:s.font,scene:s.id,data:w,bgColor:p,calendar:s.calendar,autotypenumbersDflt:s.autotypenumbersDflt,fullLayout:s.fullLayout}),T.getComponentMethod("annotations3d","handleDefaults")(i,v,s);var c=s.getDfltFromLayout("dragmode");if(!1!==c&&!c)if(c="orbit",i.camera&&i.camera.up){var E=i.camera.up.x,M=i.camera.up.y,S=i.camera.up.z;0!==S&&(E&&M&&S?S/Math.sqrt(E*E+M*M+S*S)>.999&&(c="turntable"):c="turntable")}else c="turntable";h("dragmode",c),h("hovermode",s.getDfltFromLayout("hovermode"))}ue.exports=function(i,v,h){var s=v._basePlotModules.length>1;_(i,v,h,{type:"gl3d",attributes:o,handleDefaults:l,fullLayout:v,font:v.font,fullData:h,getDfltFromLayout:function(d){if(!s)return y.validate(i[d],o[d])?i[d]:void 0},autotypenumbersDflt:v.autotypenumbers,paper_bgcolor:v.paper_bgcolor,calendar:v.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(x,ue,le){"use strict";var y=x("./axis_attributes"),b=x("../../domain").attributes,T=x("../../../lib/extend").extendFlat,_=x("../../../lib").counterRegex;function e(o,a,l){return{x:{valType:"number",dflt:o,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:l,editType:"camera"},editType:"camera"}}ue.exports={_arrayAttrRegexps:[_("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:T(e(0,0,1),{}),center:T(e(0,0,0),{}),eye:T(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:b({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:y,yaxis:y,zaxis:y,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(x,ue,le){"use strict";var y=x("../../../lib/str2rgbarray"),b=["xaxis","yaxis","zaxis"];function T(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}T.prototype.merge=function(_){for(var e=0;e<3;++e){var o=_[b[e]];o.visible?(this.enabled[e]=o.showspikes,this.colors[e]=y(o.spikecolor),this.drawSides[e]=o.spikesides,this.lineWidth[e]=o.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},ue.exports=function(_){var e=new T;return e.merge(_),e}},{"../../../lib/str2rgbarray":528}],606:[function(x,ue,le){"use strict";ue.exports=function(e){for(var o=e.axesOptions,a=e.glplot.axesPixels,l=e.fullSceneLayout,i=[[],[],[]],v=0;v<3;++v){var h=l[T[v]];if(h._length=(a[v].hi-a[v].lo)*a[v].pixelsPerDataUnit/e.dataScale[v],Math.abs(h._length)===1/0||isNaN(h._length))i[v]=[];else{h._input_range=h.range.slice(),h.range[0]=a[v].lo/e.dataScale[v],h.range[1]=a[v].hi/e.dataScale[v],h._m=1/(e.dataScale[v]*a[v].pixelsPerDataUnit),h.range[0]===h.range[1]&&(h.range[0]-=1,h.range[1]+=1);var s=h.tickmode;if("auto"===h.tickmode){h.tickmode="linear";var d=h.nticks||b.constrain(h._length/40,4,9);y.autoTicks(h,Math.abs(h.range[1]-h.range[0])/d)}for(var p=y.calcTicks(h,{msUTC:!0}),f=0;f<p.length;++f)p[f].x=p[f].x*e.dataScale[v],"date"===h.type&&(p[f].text=p[f].text.replace(/\<br\>/g," "));i[v]=p,h.tickmode=s}}for(o.ticks=i,v=0;v<3;++v)for(_[v]=.5*(e.glplot.bounds[0][v]+e.glplot.bounds[1][v]),f=0;f<2;++f)o.bounds[f][v]=e.glplot.bounds[f][v];e.contourLevels=function(g){for(var m=new Array(3),u=0;u<3;++u){for(var w=g[u],c=new Array(w.length),E=0;E<w.length;++E)c[E]=w[E].x;m[u]=c}return m}(i)};var y=x("../../cartesian/axes"),b=x("../../../lib"),T=["xaxis","yaxis","zaxis"],_=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(x,ue,le){"use strict";function y(b,T){var _,e,o=[0,0,0,0];for(_=0;_<4;++_)for(e=0;e<4;++e)o[e]+=b[4*_+e]*T[_];return o}ue.exports=function(b,T){return y(b.projection,y(b.view,y(b.model,[T[0],T[1],T[2],1])))}},{}],608:[function(x,ue,le){"use strict";var y,b,T=x("../../../stackgl_modules").gl_plot3d,_=T.createCamera,e=T.createScene,o=x("webgl-context"),a=x("has-passive-events"),l=x("../../registry"),i=x("../../lib"),v=i.preserveDrawingBuffer(),h=x("../../plots/cartesian/axes"),s=x("../../components/fx"),d=x("../../lib/str2rgbarray"),p=x("../../lib/show_no_webgl_msg"),f=x("./project"),g=x("./layout/convert"),m=x("./layout/spikes"),u=x("./layout/tick_marks");function w(C,O){var I=document.createElement("div"),N=C.container;this.graphDiv=C.graphDiv;var F=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",F.style["z-index"]=20,F.style["pointer-events"]="none",I.appendChild(F),this.svgContainer=F,I.id=C.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",N.appendChild(I),this.fullLayout=O,this.id=C.id||"scene",this.fullSceneLayout=O[this.id],this.plotArgs=[[],{},{}],this.axesOptions=g(O,O[this.id]),this.spikeOptions=m(O[this.id]),this.container=I,this.staticMode=!!C.staticPlot,this.pixelRatio=this.pixelRatio||C.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=l.getComponentMethod("annotations3d","convert"),this.drawAnnotations=l.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var c=w.prototype;c.prepareOptions=function(){var C={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:v,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(b||(y=document.createElement("canvas"),b=o({canvas:y,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");C.gl=b,C.canvas=y}return C};var E=!0;c.tryCreatePlot=function(){var C=this.prepareOptions(),O=!0;try{this.glplot=e(C)}catch(I){if(this.staticMode||!E||v)O=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{v=C.glOptions.preserveDrawingBuffer=!0,this.glplot=e(C)}catch(N){v=C.glOptions.preserveDrawingBuffer=!1,O=!1}}}return E=!1,O},c.initializeGLCamera=function(){var C=this.fullSceneLayout.camera;this.camera=_(this.container,{center:[C.center.x,C.center.y,C.center.z],eye:[C.eye.x,C.eye.y,C.eye.z],up:[C.up.x,C.up.y,C.up.z],_ortho:"orthographic"===C.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},c.initializeGLPlot=function(){var C=this;if(C.initializeGLCamera(),!C.tryCreatePlot())return p(C);C.traces={},C.make4thDimension();var O=C.graphDiv,I=O.layout,N=function(){var L={};return C.isCameraChanged(I)&&(L[C.id+".camera"]=C.getCamera()),C.isAspectChanged(I)&&(L[C.id+".aspectratio"]=C.glplot.getAspectratio(),"manual"!==I[C.id].aspectmode&&(C.fullSceneLayout.aspectmode=I[C.id].aspectmode=L[C.id+".aspectmode"]="manual")),L},F=function(L){if(!1!==L.fullSceneLayout.dragmode){var P=N();L.saveLayout(I),L.graphDiv.emit("plotly_relayout",P)}};return C.glplot.canvas&&(C.glplot.canvas.addEventListener("mouseup",function(){F(C)}),C.glplot.canvas.addEventListener("wheel",function(L){if(O._context._scrollZoom.gl3d){if(C.camera._ortho){var P=L.deltaX>L.deltaY?1.1:.9090909090909091,j=C.glplot.getAspectratio();C.glplot.setAspectratio({x:P*j.x,y:P*j.y,z:P*j.z})}F(C)}},!!a&&{passive:!1}),C.glplot.canvas.addEventListener("mousemove",function(){if(!1!==C.fullSceneLayout.dragmode&&0!==C.camera.mouseListener.buttons){var L=N();C.graphDiv.emit("plotly_relayouting",L)}}),C.staticMode||C.glplot.canvas.addEventListener("webglcontextlost",function(L){O&&O.emit&&O.emit("plotly_webglcontextlost",{event:L,layer:C.id})},!1)),C.glplot.oncontextloss=function(){C.recoverContext()},C.glplot.onrender=function(){C.render()},!0},c.render=function(){var C,O=this,I=O.graphDiv,N=O.svgContainer,F=O.container.getBoundingClientRect();I._fullLayout._calcInverseTransform(I);var j=F.width*I._fullLayout._invScaleX,U=F.height*I._fullLayout._invScaleY;N.setAttributeNS(null,"viewBox","0 0 "+j+" "+U),N.setAttributeNS(null,"width",j),N.setAttributeNS(null,"height",U),u(O),O.glplot.axes.update(O.axesOptions);for(var $=Object.keys(O.traces),X=null,te=O.glplot.selection,ae=0;ae<$.length;++ae)"skip"!==(C=O.traces[$[ae]]).data.hoverinfo&&C.handlePick(te)&&(X=C),C.setContourLevels&&C.setContourLevels();function J(pe,we,ye){var Te=O.fullSceneLayout[pe+"axis"];return"log"!==Te.type&&(we=Te.d2l(we)),h.hoverLabelText(Te,we,ye)}if(null!==X){var se,ee=f(O.glplot.cameraParams,te.dataCoordinate),G=I._fullData[(C=X.data).index],H=te.index,Y={xLabel:J("x",te.traceCoordinate[0],C.xhoverformat),yLabel:J("y",te.traceCoordinate[1],C.yhoverformat),zLabel:J("z",te.traceCoordinate[2],C.zhoverformat)},oe=s.castHoverinfo(G,O.fullLayout,H),W=(oe||"").split("+"),ne=oe&&"all"===oe;G.hovertemplate||ne||(-1===W.indexOf("x")&&(Y.xLabel=void 0),-1===W.indexOf("y")&&(Y.yLabel=void 0),-1===W.indexOf("z")&&(Y.zLabel=void 0),-1===W.indexOf("text")&&(te.textLabel=void 0),-1===W.indexOf("name")&&(X.name=void 0));var re=[];"cone"===C.type||"streamtube"===C.type?(Y.uLabel=J("x",te.traceCoordinate[3],C.uhoverformat),(ne||-1!==W.indexOf("u"))&&re.push("u: "+Y.uLabel),Y.vLabel=J("y",te.traceCoordinate[4],C.vhoverformat),(ne||-1!==W.indexOf("v"))&&re.push("v: "+Y.vLabel),Y.wLabel=J("z",te.traceCoordinate[5],C.whoverformat),(ne||-1!==W.indexOf("w"))&&re.push("w: "+Y.wLabel),Y.normLabel=te.traceCoordinate[6].toPrecision(3),(ne||-1!==W.indexOf("norm"))&&re.push("norm: "+Y.normLabel),"streamtube"===C.type&&(Y.divergenceLabel=te.traceCoordinate[7].toPrecision(3),(ne||-1!==W.indexOf("divergence"))&&re.push("divergence: "+Y.divergenceLabel)),te.textLabel&&re.push(te.textLabel),se=re.join("<br>")):"isosurface"===C.type||"volume"===C.type?(Y.valueLabel=h.hoverLabelText(O._mockAxis,O._mockAxis.d2l(te.traceCoordinate[3]),C.valuehoverformat),re.push("value: "+Y.valueLabel),te.textLabel&&re.push(te.textLabel),se=re.join("<br>")):se=te.textLabel;var ce={x:te.traceCoordinate[0],y:te.traceCoordinate[1],z:te.traceCoordinate[2],data:G._input,fullData:G,curveNumber:G.index,pointNumber:H};s.appendArrayPointValue(ce,G,H),C._module.eventData&&(ce=G._module.eventData(ce,te,G,{},H));var fe={points:[ce]};if(O.fullSceneLayout.hovermode){var me=[];s.loneHover({trace:G,x:(.5+.5*ee[0]/ee[3])*j,y:(.5-.5*ee[1]/ee[3])*U,xLabel:Y.xLabel,yLabel:Y.yLabel,zLabel:Y.zLabel,text:se,name:X.name,color:s.castHoverOption(G,H,"bgcolor")||X.color,borderColor:s.castHoverOption(G,H,"bordercolor"),fontFamily:s.castHoverOption(G,H,"font.family"),fontSize:s.castHoverOption(G,H,"font.size"),fontColor:s.castHoverOption(G,H,"font.color"),nameLength:s.castHoverOption(G,H,"namelength"),textAlign:s.castHoverOption(G,H,"align"),hovertemplate:i.castOption(G,H,"hovertemplate"),hovertemplateLabels:i.extendFlat({},ce,Y),eventData:[ce]},{container:N,gd:I,inOut_bbox:me}),ce.bbox=me[0]}I.emit(te.buttons&&te.distance<5?"plotly_click":"plotly_hover",fe),this.oldEventData=fe}else s.loneUnhover(N),this.oldEventData&&I.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;O.drawAnnotations(O)},c.recoverContext=function(){var C=this;C.glplot.dispose();var O=function(){C.glplot.gl.isContextLost()?requestAnimationFrame(O):C.initializeGLPlot()?C.plot.apply(C,C.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(O)};var M=["xaxis","yaxis","zaxis"];function S(C,O,I){for(var N=C.fullSceneLayout,F=0;F<3;F++){var L=M[F],P=L.charAt(0),j=N[L],U=O[P],$=O[P+"calendar"],X=O["_"+P+"length"];if(i.isArrayOrTypedArray(U))for(var te,ae=0;ae<(X||U.length);ae++)if(i.isArrayOrTypedArray(U[ae]))for(var J=0;J<U[ae].length;++J)te=j.d2l(U[ae][J],0,$),!isNaN(te)&&isFinite(te)&&(I[0][F]=Math.min(I[0][F],te),I[1][F]=Math.max(I[1][F],te));else te=j.d2l(U[ae],0,$),!isNaN(te)&&isFinite(te)&&(I[0][F]=Math.min(I[0][F],te),I[1][F]=Math.max(I[1][F],te));else I[0][F]=Math.min(I[0][F],0),I[1][F]=Math.max(I[1][F],X-1)}}c.plot=function(C,O,I){if(this.plotArgs=[C,O,I],!this.glplot.contextLost){var N,F,L,P,j,U,$=O[this.id],X=I[this.id];this.fullLayout=O,this.fullSceneLayout=$,this.axesOptions.merge(O,$),this.spikeOptions.merge($),this.setViewport($),this.updateFx($.dragmode,$.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(d($.bgcolor)),this.setConvert(j),C?Array.isArray(C)||(C=[C]):C=[];var te=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(L=0;L<C.length;++L)!0===(N=C[L]).visible&&0!==N._length&&S(this,N,te);!function(Fe,Pe){for(var Be=Fe.fullSceneLayout,qe=Be.annotations||[],We=0;We<3;We++)for(var Je=M[We],ut=Je.charAt(0),Ge=Be[Je],Ke=0;Ke<qe.length;Ke++){var nt=qe[Ke];if(nt.visible){var it=Ge.r2l(nt[ut]);!isNaN(it)&&isFinite(it)&&(Pe[0][We]=Math.min(Pe[0][We],it),Pe[1][We]=Math.max(Pe[1][We],it))}}}(this,te);var ae=[1,1,1];for(P=0;P<3;++P)ae[P]=te[1][P]===te[0][P]?1:1/(te[1][P]-te[0][P]);for(this.dataScale=ae,this.convertAnnotations(this),L=0;L<C.length;++L)!0===(N=C[L]).visible&&0!==N._length&&((F=this.traces[N.uid])?F.data.type===N.type?F.update(N):(F.dispose(),F=N._module.plot(this,N),this.traces[N.uid]=F):(F=N._module.plot(this,N),this.traces[N.uid]=F),F.name=N.name);var J=Object.keys(this.traces);e:for(L=0;L<J.length;++L){for(P=0;P<C.length;++P)if(C[P].uid===J[L]&&!0===C[P].visible&&0!==C[P]._length)continue e;(F=this.traces[J[L]]).dispose(),delete this.traces[J[L]]}this.glplot.objects.sort(function(Fe,Pe){return Fe._trace.data.index-Pe._trace.data.index});var ee,se=[[0,0,0],[0,0,0]],G=[],H={};for(L=0;L<3;++L){if((U=(j=$[M[L]]).type)in H?(H[U].acc*=ae[L],H[U].count+=1):H[U]={acc:ae[L],count:1},j.autorange){se[0][L]=1/0,se[1][L]=-1/0;var Y=this.glplot.objects,oe=this.fullSceneLayout.annotations||[],W=j._name.charAt(0);for(P=0;P<Y.length;P++){var ne=Y[P],re=ne.bounds,ce=ne._trace.data._pad||0;se[0][L]="ErrorBars"===ne.constructor.name&&j._lowerLogErrorBound?Math.min(se[0][L],j._lowerLogErrorBound):Math.min(se[0][L],re[0][L]/ae[L]-ce),se[1][L]=Math.max(se[1][L],re[1][L]/ae[L]+ce)}for(P=0;P<oe.length;P++){var fe=oe[P];if(fe.visible){var me=j.r2l(fe[W]);se[0][L]=Math.min(se[0][L],me),se[1][L]=Math.max(se[1][L],me)}}if("rangemode"in j&&"tozero"===j.rangemode&&(se[0][L]=Math.min(se[0][L],0),se[1][L]=Math.max(se[1][L],0)),se[0][L]>se[1][L])se[0][L]=-1,se[1][L]=1;else{var pe=se[1][L]-se[0][L];se[0][L]-=pe/32,se[1][L]+=pe/32}if("reversed"===j.autorange){var we=se[0][L];se[0][L]=se[1][L],se[1][L]=we}}else{var ye=j.range;se[0][L]=j.r2l(ye[0]),se[1][L]=j.r2l(ye[1])}se[0][L]===se[1][L]&&(se[0][L]-=1,se[1][L]+=1),G[L]=se[1][L]-se[0][L],this.glplot.setBounds(L,{min:se[0][L]*ae[L],max:se[1][L]*ae[L]})}var Te=$.aspectmode;if("cube"===Te)ee=[1,1,1];else if("manual"===Te){var Le=$.aspectratio;ee=[Le.x,Le.y,Le.z]}else{if("auto"!==Te&&"data"!==Te)throw new Error("scene.js aspectRatio was not one of the enumerated types");var Oe=[1,1,1];for(L=0;L<3;++L){var Re=H[U=(j=$[M[L]]).type];Oe[L]=Math.pow(Re.acc,1/Re.count)/ae[L]}ee="data"===Te||Math.max.apply(null,Oe)/Math.min.apply(null,Oe)<=4?Oe:[1,1,1]}$.aspectratio.x=X.aspectratio.x=ee[0],$.aspectratio.y=X.aspectratio.y=ee[1],$.aspectratio.z=X.aspectratio.z=ee[2],this.glplot.setAspectratio($.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:$.aspectratio.x,y:$.aspectratio.y,z:$.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=$.aspectmode);var Ve=$.domain||null,_e=O._size||null;if(Ve&&_e){var Ae=this.container.style;Ae.position="absolute",Ae.left=_e.l+Ve.x[0]*_e.w+"px",Ae.top=_e.t+(1-Ve.y[1])*_e.h+"px",Ae.width=_e.w*(Ve.x[1]-Ve.x[0])+"px",Ae.height=_e.h*(Ve.y[1]-Ve.y[0])+"px"}this.glplot.redraw()}},c.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},c.getCamera=function(){var C;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(C=this.camera).up[0],y:C.up[1],z:C.up[2]},center:{x:C.center[0],y:C.center[1],z:C.center[2]},eye:{x:C.eye[0],y:C.eye[1],z:C.eye[2]},projection:{type:!0===C._ortho?"orthographic":"perspective"}}},c.setViewport=function(C){var O,I=C.camera;this.camera.lookAt.apply(this,[[(O=I).eye.x,O.eye.y,O.eye.z],[O.center.x,O.center.y,O.center.z],[O.up.x,O.up.y,O.up.z]]),this.glplot.setAspectratio(C.aspectratio),"orthographic"===I.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},c.isCameraChanged=function(C){var O=this.getCamera(),I=i.nestedProperty(C,this.id+".camera").get();var j,U,$,X,te,ae,F=!1;if(void 0===I)F=!0;else{for(var L=0;L<3;L++)for(var P=0;P<3;P++)if(j=O,X=P,te=void 0,ae=void 0,ae=["x","y","z"],!(U=I)[(te=["up","center","eye"])[$=L]]||j[te[$]][ae[X]]!==U[te[$]][ae[X]]){F=!0;break}(!I.projection||O.projection&&O.projection.type!==I.projection.type)&&(F=!0)}return F},c.isAspectChanged=function(C){var O=this.glplot.getAspectratio(),I=i.nestedProperty(C,this.id+".aspectratio").get();return void 0===I||I.x!==O.x||I.y!==O.y||I.z!==O.z},c.saveLayout=function(C){var O,I,N,F,L,P,j=this.fullLayout,U=this.isCameraChanged(C),$=this.isAspectChanged(C),X=U||$;if(X){var te={};U&&(O=this.getCamera(),N=(I=i.nestedProperty(C,this.id+".camera")).get(),te[this.id+".camera"]=N),$&&(F=this.glplot.getAspectratio(),P=(L=i.nestedProperty(C,this.id+".aspectratio")).get(),te[this.id+".aspectratio"]=P),l.call("_storeDirectGUIEdit",C,j._preGUI,te),U&&(I.set(O),i.nestedProperty(j,this.id+".camera").set(O)),$&&(L.set(F),i.nestedProperty(j,this.id+".aspectratio").set(F),this.glplot.redraw())}return X},c.updateFx=function(C,O){var I=this.camera;if(I)if("orbit"===C)I.mode="orbit",I.keyBindingMode="rotate";else if("turntable"===C){I.up=[0,0,1],I.mode="turntable",I.keyBindingMode="rotate";var N=this.graphDiv,F=N._fullLayout,L=this.fullSceneLayout.camera,P=L.up.x,j=L.up.y,U=L.up.z;if(U/Math.sqrt(P*P+j*j+U*U)<.999){var $=this.id+".camera.up",X={x:0,y:0,z:1},te={};te[$]=X;var ae=N.layout;l.call("_storeDirectGUIEdit",ae,F._preGUI,te),L.up=X,i.nestedProperty(ae,$).set(X)}}else I.keyBindingMode=C;this.fullSceneLayout.hovermode=O},c.toImage=function(C){C||(C="png"),this.staticMode&&this.container.appendChild(y),this.glplot.redraw();var O=this.glplot.gl,I=O.drawingBufferWidth,N=O.drawingBufferHeight;O.bindFramebuffer(O.FRAMEBUFFER,null);var F=new Uint8Array(I*N*4);O.readPixels(0,0,I,N,O.RGBA,O.UNSIGNED_BYTE,F),function($,X,te){for(var ae=0,J=te-1;ae<J;++ae,--J)for(var ee=0;ee<X;++ee)for(var se=0;se<4;++se){var G=4*(X*ae+ee)+se,H=4*(X*J+ee)+se,Y=$[G];$[G]=$[H],$[H]=Y}}(F,I,N),function($,X,te){for(var ae=0;ae<te;++ae)for(var J=0;J<X;++J){var ee=4*(X*ae+J),se=$[ee+3];if(se>0)for(var G=255/se,H=0;H<3;++H)$[ee+H]=Math.min(G*$[ee+H],255)}}(F,I,N);var L=document.createElement("canvas");L.width=I,L.height=N;var P,j=L.getContext("2d",{willReadFrequently:!0}),U=j.createImageData(I,N);switch(U.data.set(F),j.putImageData(U,0,0),C){case"jpeg":P=L.toDataURL("image/jpeg");break;case"webp":P=L.toDataURL("image/webp");break;default:P=L.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(y),P},c.setConvert=function(){for(var C=0;C<3;C++){var O=this.fullSceneLayout[M[C]];h.setConvert(O,this.fullLayout),O.setScale=i.noop}},c.make4thDimension=function(){var C=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},h.setConvert(this._mockAxis,C)},ue.exports=w},{"../../../stackgl_modules":1124,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_){_=_||y.length;for(var e=new Array(_),o=0;o<_;o++)e[o]=[y[o],b[o],T[o]];return e}},{}],610:[function(x,ue,le){"use strict";var y=x("./font_attributes"),b=x("./animation_attributes"),T=x("../components/color/attributes"),_=x("../components/shapes/draw_newshape/attributes"),e=x("./pad_attributes"),o=x("../lib/extend").extendFlat,a=y({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=T.defaultLine,ue.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:y({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:T.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:T.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:T.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:_.newshape,activeshape:_.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},b.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:y({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(x,ue,le){"use strict";var y=x("../../lib/sort_object_keys"),b='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',b].join(" "),_=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:b,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:_,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:_,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},o=y(e);ue.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:o,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",o.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T){var _=b.split(" "),e=_[0],o=_[1],a=y.isArrayOrTypedArray(T)?y.mean(T):T,l=.5+a/100,i=1.5+a/100,v=["",""],h=[0,0];switch(e){case"top":v[0]="top",h[1]=-i;break;case"bottom":v[0]="bottom",h[1]=i}switch(o){case"left":v[1]="right",h[0]=-l;break;case"right":v[1]="left",h[0]=l}return{anchor:v[0]&&v[1]?v.join("-"):v[0]?v[0]:v[1]?v[1]:"center",offset:h}}},{"../../lib":503}],613:[function(x,ue,le){"use strict";var y=x("mapbox-gl/dist/mapbox-gl-unminified"),b=x("../../lib"),T=b.strTranslate,_=b.strScale,e=x("../../plots/get_data").getSubplotCalcData,o=x("../../constants/xmlns_namespaces"),a=x("@plotly/d3"),l=x("../../components/drawing"),i=x("../../lib/svg_text_utils"),v=x("./mapbox"),h=le.constants=x("./constants");function s(d){return"string"==typeof d&&(-1!==h.styleValuesMapbox.indexOf(d)||0===d.indexOf("mapbox://"))}le.name="mapbox",le.attr="subplot",le.idRoot="mapbox",le.idRegex=le.attrRegex=b.counterRegex("mapbox"),le.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},le.layoutAttributes=x("./layout_attributes"),le.supplyLayoutDefaults=x("./layout_defaults"),le.plot=function(d){var p=d._fullLayout,f=d.calcdata,g=p._subplots.mapbox;if(y.version!==h.requiredVersion)throw new Error(h.wrongVersionErrorMsg);var m=function(S,C){var O=S._fullLayout;if(""===S._context.mapboxAccessToken)return"";for(var I=[],N=[],F=!1,L=!1,P=0;P<C.length;P++){var j=O[C[P]],U=j.accesstoken;s(j.style)&&(U?b.pushUnique(I,U):(s(j._input.style)&&(b.error("Uses Mapbox map style, but did not set an access token."),F=!0),L=!0)),U&&b.pushUnique(N,U)}if(L){var $=F?h.noAccessTokenErrorMsg:h.missingStyleErrorMsg;throw b.error($),new Error($)}return I.length?(I.length>1&&b.warn(h.multipleTokensErrorMsg),I[0]):(N.length&&b.log(["Listed mapbox access token(s)",N.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(d,g);y.accessToken=m;for(var u=0;u<g.length;u++){var w=g[u],c=e(f,"mapbox",w),E=p[w],M=E._subplot;M||(M=new v(d,w),p[w]._subplot=M),M.viewInitial||(M.viewInitial={center:b.extendFlat({},E.center),zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),M.plot(c,p,d._promises)}},le.clean=function(d,p,f,g){for(var m=g._subplots.mapbox||[],u=0;u<m.length;u++){var w=m[u];!p[w]&&g[w]._subplot&&g[w]._subplot.destroy()}},le.toSVG=function(d){for(var p=d._fullLayout,f=p._subplots.mapbox,g=p._size,m=0;m<f.length;m++){var u=p[f[m]],w=u.domain,c=u._subplot.toImage("png");p._glimages.append("svg:image").attr({xmlns:o.svg,"xlink:href":c,x:g.l+g.w*w.x[0],y:g.t+g.h*(1-w.y[1]),width:g.w*(w.x[1]-w.x[0]),height:g.h*(w.y[1]-w.y[0]),preserveAspectRatio:"none"});var E=a.select(u._subplot.div);if(null!==E.select(".mapboxgl-ctrl-logo").node().offsetParent){var M=p._glimages.append("g");M.attr("transform",T(g.l+g.w*w.x[0]+10,g.t+g.h*(1-w.y[0])-31)),M.append("path").attr("d",h.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),M.append("path").attr("d",h.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),M.append("path").attr("d",h.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),M.append("polygon").attr("points",h.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var S=E.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),C=p._glimages.append("g"),O=C.append("text");O.text(S).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":S});var I=l.bBox(O.node()),N=g.w*(w.x[1]-w.x[0]);if(I.width>N/2){var F=S.split("|").join("<br>");O.text(F).attr("data-unformatted",F).call(i.convertToTspans,d),I=l.bBox(O.node())}O.attr("transform",T(-3,8-I.height)),C.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var L=1;I.width+6>N&&(L=N/(I.width+6));var P=[g.l+g.w*w.x[1],g.t+g.h*(1-w.y[0])];C.attr("transform",T(P[0],P[1])+_(L))}},le.updateFx=function(d){for(var p=d._fullLayout,f=p._subplots.mapbox,g=0;g<f.length;g++)p[f[g]]._subplot.updateFx(p)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../lib/svg_text_utils").sanitizeHTML,T=x("./convert_text_opts"),_=x("./constants");function e(i,v){this.subplot=i,this.uid=i.uid+"-"+v,this.index=v,this.idSource="source-"+this.uid,this.idLayer=_.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var o=e.prototype;function a(i){if(!i.visible)return!1;var v=i.source;if(Array.isArray(v)&&v.length>0){for(var h=0;h<v.length;h++)if("string"!=typeof v[h]||0===v[h].length)return!1;return!0}return y.isPlainObject(v)||"string"==typeof v&&v.length>0}function l(i){var v={},h={};switch(i.type){case"circle":y.extendFlat(h,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":y.extendFlat(h,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":y.extendFlat(h,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var s=i.symbol,d=T(s.textposition,s.iconsize);y.extendFlat(v,{"icon-image":s.icon+"-15","icon-size":s.iconsize/10,"text-field":s.text,"text-size":s.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":s.placement}),y.extendFlat(h,{"icon-color":i.color,"text-color":s.textfont.color,"text-opacity":i.opacity});break;case"raster":y.extendFlat(h,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:v,paint:h}}o.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=a(i)},o.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===i.sourcetype&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},o.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},o.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},o.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},o.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var v=this.findFollowingMapboxLayerId(this.lookupBelow());null!==v&&this.subplot.map.moveLayer(this.idLayer,v)},o.updateSource=function(i){var s,d,p,f,g,v=this.subplot.map;if(v.getSource(this.idSource)&&v.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,a(i)){var h=(f=(s=i).source,g={type:p=s.sourcetype},"geojson"===p?d="data":"vector"===p?d="string"==typeof f?"url":"tiles":"raster"===p?(d="tiles",g.tileSize=256):"image"===p&&(d="url",g.coordinates=s.coordinates),g[d]=f,s.sourceattribution&&(g.attribution=b(s.sourceattribution)),g);v.addSource(this.idSource,h)}},o.findFollowingMapboxLayerId=function(i){if("traces"===i)for(var v=this.subplot.getMapLayers(),h=0;h<v.length;h++){var s=v[h].id;if("string"==typeof s&&0===s.indexOf(_.traceLayerPrefix)){i=s;break}}return i},o.updateLayer=function(i){var v=this.subplot,h=l(i),s=this.lookupBelow(),d=this.findFollowingMapboxLayerId(s);this.removeLayer(),a(i)&&v.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:h.layout,paint:h.paint},d),this.layerType=i.type,this.below=s},o.updateStyle=function(i){if(a(i)){var v=l(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",v.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",v.paint)}},o.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},o.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},ue.exports=function(i,v,h){var s=new e(i,v);return s.update(h),s}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/color").defaultLine,T=x("../domain").attributes,_=x("../font_attributes"),e=x("../../traces/scatter/attributes").textposition,o=x("../../plot_api/edit_types").overrideAll,a=x("../../plot_api/plot_template").templatedArray,l=x("./constants"),i=_({});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ue.exports=o({_arrayAttrRegexps:[y.counterRegex("mapbox",".layers",!0)],domain:T({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:l.styleValuesMapbox.concat(l.styleValuesNonMapbox),dflt:l.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:b},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:b}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:y.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../subplot_defaults"),T=x("../array_container_defaults"),_=x("./layout_attributes");function e(a,l,i,v){i("accesstoken",v.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch"),T(a,l,{name:"layers",handleItemDefaults:o}),l._input=a}function o(a,l){function i(p,f){return y.coerce(a,l,_.layers,p,f)}if(i("visible")){var v,h=i("sourcetype"),s="raster"===h||"image"===h;i("source"),i("sourceattribution"),"vector"===h&&i("sourcelayer"),"image"===h&&i("coordinates"),s&&(v="raster");var d=i("type",v);s&&"raster"!==d&&(d=l.type="raster",y.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),"circle"===d&&i("circle.radius"),"line"===d&&(i("line.width"),i("line.dash")),"fill"===d&&i("fill.outlinecolor"),"symbol"===d&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),y.coerceFont(i,"symbol.textfont"),i("symbol.textposition"),i("symbol.placement"))}}ue.exports=function(a,l,i){b(a,l,i,{type:"mapbox",attributes:_,handleDefaults:e,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(x,ue,le){"use strict";var y=x("mapbox-gl/dist/mapbox-gl-unminified"),b=x("../../lib"),T=x("../../lib/geo_location_utils"),_=x("../../registry"),e=x("../cartesian/axes"),o=x("../../components/dragelement"),a=x("../../components/fx"),l=x("../../components/dragelement/helpers"),i=l.rectMode,v=l.drawMode,h=l.selectMode,s=x("../cartesian/select").prepSelect,d=x("../cartesian/select").clearSelect,p=x("../cartesian/select").clearSelectionsCache,f=x("../cartesian/select").selectOnClick,g=x("./constants"),m=x("./layers");function u(C,O){this.id=O,this.gd=C;var I=C._fullLayout,N=C._context;this.container=I._glcontainer.node(),this.isStatic=N.staticPlot,this.uid=I._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(I),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=u.prototype;w.plot=function(C,O,I){var N,F=this;F.map&&O[F.id].accesstoken!==F.accessToken&&(F.map.remove(),F.map=null,F.styleObj=null,F.traceHash={},F.layerList=[]),N=new Promise(F.map?function(P,j){F.updateMap(C,O,P,j)}:function(P,j){F.createMap(C,O,P,j)}),I.push(N)},w.createMap=function(C,O,I,N){var F=this,L=O[F.id],P=F.styleObj=E(L.style);F.accessToken=L.accesstoken;var j=F.map=new y.Map({container:F.div,style:P.style,center:S(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,interactive:!F.isStatic,preserveDrawingBuffer:F.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new y.AttributionControl({compact:!0}));j._canvas.style.left="0px",j._canvas.style.top="0px",F.rejectOnError(N),F.isStatic||F.initFx(C,O);var U=[];U.push(new Promise(function($){j.once("load",$)})),U=U.concat(T.fetchTraceGeoData(C)),Promise.all(U).then(function(){F.fillBelowLookup(C,O),F.updateData(C),F.updateLayout(O),F.resolveOnRender(I)}).catch(N)},w.updateMap=function(C,O,I,N){var F=this,L=F.map,P=O[this.id];F.rejectOnError(N);var j=[],U=E(P.style);JSON.stringify(F.styleObj)!==JSON.stringify(U)&&(F.styleObj=U,L.setStyle(U.style),F.traceHash={},j.push(new Promise(function($){L.once("styledata",$)}))),j=j.concat(T.fetchTraceGeoData(C)),Promise.all(j).then(function(){F.fillBelowLookup(C,O),F.updateData(C),F.updateLayout(O),F.resolveOnRender(I)}).catch(N)},w.fillBelowLookup=function(C,O){var I,N,F=O[this.id].layers,L=this.belowLookup={},P=!1;for(I=0;I<C.length;I++){var j=C[I][0].trace,U=j._module;"string"==typeof j.below?N=j.below:U.getBelow&&(N=U.getBelow(j,this)),""===N&&(P=!0),L["trace-"+j.uid]=N||""}for(I=0;I<F.length;I++){var $=F[I];L["layout-"+I]=N="string"==typeof $.below?$.below:P?"traces":""}var X,te,ae={};for(X in L)ae[N=L[X]]?ae[N].push(X):ae[N]=[X];for(N in ae){var J=ae[N];if(J.length>1)for(I=0;I<J.length;I++)0===(X=J[I]).indexOf("trace-")?(te=X.split("trace-")[1],this.traceHash[te]&&(this.traceHash[te].below=null)):0===X.indexOf("layout-")&&(te=X.split("layout-")[1],this.layerList[te]&&(this.layerList[te].below=null))}};var c={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function E(C){var O={};return b.isPlainObject(C)?(O.id=C.id,O.style=C):"string"==typeof C?(O.id=C,O.style=-1!==g.styleValuesMapbox.indexOf(C)?M(C):g.stylesNonMapbox[C]?g.stylesNonMapbox[C]:C):(O.id=g.styleValueDflt,O.style=M(g.styleValueDflt)),O.transition={duration:0,delay:0},O}function M(C){return g.styleUrlPrefix+C+"-"+g.styleUrlSuffix}function S(C){return[C.lon,C.lat]}w.updateData=function(C){var O,I,N,F,L=this.traceHash,P=C.slice().sort(function(te,ae){return c[te[0].trace.type]-c[ae[0].trace.type]});for(N=0;N<P.length;N++){var j=P[N],U=!1;(O=L[(I=j[0].trace).uid])&&(O.type===I.type?(O.update(j),U=!0):O.dispose()),!U&&I._module&&(L[I.uid]=I._module.plot(this,j))}var $=Object.keys(L);e:for(N=0;N<$.length;N++){var X=$[N];for(F=0;F<C.length;F++)if(X===(I=C[F][0].trace).uid)continue e;(O=L[X]).dispose(),delete L[X]}},w.updateLayout=function(C){var O=this.map,I=C[this.id];this.dragging||this.wheeling||(O.setCenter(S(I.center)),O.setZoom(I.zoom),O.setBearing(I.bearing),O.setPitch(I.pitch)),this.updateLayers(C),this.updateFramework(C),this.updateFx(C),this.map.resize(),this.gd._context._scrollZoom.mapbox?O.scrollZoom.enable():O.scrollZoom.disable()},w.resolveOnRender=function(C){var O=this.map;O.on("render",function I(){O.loaded()&&(O.off("render",I),setTimeout(C,10))})},w.rejectOnError=function(C){var O=this.map;function I(){C(new Error(g.mapOnErrorMsg))}O.once("error",I),O.once("style.error",I),O.once("source.error",I),O.once("tile.error",I),O.once("layer.error",I)},w.createFramework=function(C){var O=this,I=O.div=document.createElement("div");I.id=O.uid,I.style.position="absolute",O.container.appendChild(I),O.xaxis={_id:"x",c2p:function(N){return O.project(N).x}},O.yaxis={_id:"y",c2p:function(N){return O.project(N).y}},O.updateFramework(C),O.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(O.mockAxis,C)},w.initFx=function(C,O){var I=this,N=I.gd,F=I.map;function L(){a.loneUnhover(O._hoverlayer)}function P(){var j=I.getView();N.emit("plotly_relayouting",I.getViewEditsWithDerived(j))}F.on("moveend",function(j){if(I.map){var U=N._fullLayout;if(j.originalEvent||I.wheeling){var $=U[I.id];_.call("_storeDirectGUIEdit",N.layout,U._preGUI,I.getViewEdits($));var X=I.getView();$._input.center=$.center=X.center,$._input.zoom=$.zoom=X.zoom,$._input.bearing=$.bearing=X.bearing,$._input.pitch=$.pitch=X.pitch,N.emit("plotly_relayout",I.getViewEditsWithDerived(X))}j.originalEvent&&"mouseup"===j.originalEvent.type?I.dragging=!1:I.wheeling&&(I.wheeling=!1),U._rehover&&U._rehover()}}),F.on("wheel",function(){I.wheeling=!0}),F.on("mousemove",function(j){var U=I.div.getBoundingClientRect(),$=[j.originalEvent.offsetX,j.originalEvent.offsetY];j.target.getBoundingClientRect=function(){return U},I.xaxis.p2c=function(){return F.unproject($).lng},I.yaxis.p2c=function(){return F.unproject($).lat},N._fullLayout._rehover=function(){N._fullLayout._hoversubplot===I.id&&N._fullLayout[I.id]&&a.hover(N,j,I.id)},a.hover(N,j,I.id),N._fullLayout._hoversubplot=I.id}),F.on("dragstart",function(){I.dragging=!0,L()}),F.on("zoomstart",L),F.on("mouseout",function(){N._fullLayout._hoversubplot=null}),F.on("drag",P),F.on("zoom",P),F.on("dblclick",function(){var j=N._fullLayout[I.id];_.call("_storeDirectGUIEdit",N.layout,N._fullLayout._preGUI,I.getViewEdits(j));var U=I.viewInitial;F.setCenter(S(U.center)),F.setZoom(U.zoom),F.setBearing(U.bearing),F.setPitch(U.pitch);var $=I.getView();j._input.center=j.center=$.center,j._input.zoom=j.zoom=$.zoom,j._input.bearing=j.bearing=$.bearing,j._input.pitch=j.pitch=$.pitch,N.emit("plotly_doubleclick",null),N.emit("plotly_relayout",I.getViewEditsWithDerived($))}),I.clearSelect=function(){p(I.dragOptions),d(I.dragOptions.gd)},I.onClickInPanFn=function(j){return function(U){var $=N._fullLayout.clickmode;$.indexOf("select")>-1&&f(U.originalEvent,N,[I.xaxis],[I.yaxis],I.id,j),$.indexOf("event")>-1&&a.click(N,U.originalEvent)}}},w.updateFx=function(C){var O=this,I=O.map,N=O.gd;if(!O.isStatic){var F,L=C.dragmode;F=i(L)?function(U,$){(U.range={})[O.id]=[j([$.xmin,$.ymin]),j([$.xmax,$.ymax])]}:function(U,$,X){(U.lassoPoints={})[O.id]=X.filtered.map(j)},O.dragOptions=b.extendDeep(O.dragOptions||{},{dragmode:C.dragmode,element:O.div,gd:N,plotinfo:{id:O.id,domain:C[O.id].domain,xaxis:O.xaxis,yaxis:O.yaxis,fillRangeItems:F},xaxes:[O.xaxis],yaxes:[O.yaxis],subplot:O.id}),I.off("click",O.onClickInPanHandler),h(L)||v(L)?(I.dragPan.disable(),I.on("zoomstart",O.clearSelect),O.dragOptions.prepFn=function(U,$,X){s(U,$,X,O.dragOptions,L)},o.init(O.dragOptions)):(I.dragPan.enable(),I.off("zoomstart",O.clearSelect),O.div.onmousedown=null,O.onClickInPanHandler=O.onClickInPanFn(O.dragOptions),I.on("click",O.onClickInPanHandler))}function j(U){var $=O.map.unproject(U);return[$.lng,$.lat]}},w.updateFramework=function(C){var O=C[this.id].domain,I=C._size,N=this.div.style;N.width=I.w*(O.x[1]-O.x[0])+"px",N.height=I.h*(O.y[1]-O.y[0])+"px",N.left=I.l+O.x[0]*I.w+"px",N.top=I.t+(1-O.y[1])*I.h+"px",this.xaxis._offset=I.l+O.x[0]*I.w,this.xaxis._length=I.w*(O.x[1]-O.x[0]),this.yaxis._offset=I.t+(1-O.y[1])*I.h,this.yaxis._length=I.h*(O.y[1]-O.y[0])},w.updateLayers=function(C){var O,I=C[this.id].layers,N=this.layerList;if(I.length!==N.length){for(O=0;O<N.length;O++)N[O].dispose();for(N=this.layerList=[],O=0;O<I.length;O++)N.push(m(this,O,I[O]))}else for(O=0;O<I.length;O++)N[O].update(I[O])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(C,O,I){for(var N in I)this.map[O](C,N,I[N])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(C,O){var I=this.map;if("string"==typeof O){if(""===O)return void I.addLayer(C,O);for(var N=this.getMapLayers(),F=0;F<N.length;F++)if(O===N[F].id)return void I.addLayer(C,O);b.warn(["Trying to add layer with *below* value",O,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}I.addLayer(C)},w.project=function(C){return this.map.project(new y.LngLat(C[0],C[1]))},w.getView=function(){var C=this.map,O=C.getCenter(),I={lon:O.lng,lat:O.lat},N=C.getCanvas(),F=parseInt(N.style.width),L=parseInt(N.style.height);return{center:I,zoom:C.getZoom(),bearing:C.getBearing(),pitch:C.getPitch(),_derived:{coordinates:[C.unproject([0,0]).toArray(),C.unproject([F,0]).toArray(),C.unproject([F,L]).toArray(),C.unproject([0,L]).toArray()]}}},w.getViewEdits=function(C){for(var O=this.id,I=["center","zoom","bearing","pitch"],N={},F=0;F<I.length;F++){var L=I[F];N[O+"."+L]=C[L]}return N},w.getViewEditsWithDerived=function(C){var O=this.id,I=this.getViewEdits(C);return I[O+"._derived"]=C._derived,I},ue.exports=u},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(x,ue,le){"use strict";ue.exports=function(y){var b=y.editType;return{t:{valType:"number",dflt:0,editType:b},r:{valType:"number",dflt:0,editType:b},b:{valType:"number",dflt:0,editType:b},l:{valType:"number",dflt:0,editType:b},editType:b}}},{}],619:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("d3-time-format").timeFormatLocale,T=x("d3-format").formatLocale,_=x("fast-isnumeric"),e=x("../registry"),o=x("../plot_api/plot_schema"),a=x("../plot_api/plot_template"),l=x("../lib"),i=x("../components/color"),v=x("../constants/numerical").BADNUM,h=x("./cartesian/axis_ids"),s=x("./cartesian/handle_outline").clearSelect,d=x("./animation_attributes"),p=x("./frame_attributes"),f=x("../plots/get_data").getModuleCalcData,g=l.relinkPrivateKeys,m=l._,u=ue.exports={};l.extendFlat(u,e),u.attributes=x("./attributes"),u.attributes.type.values=u.allTypes,u.fontAttrs=x("./font_attributes"),u.layoutAttributes=x("./layout_attributes"),u.fontWeight="normal";var w=u.transformsRegistry,c=x("./command");u.executeAPICommand=c.executeAPICommand,u.computeAPICommandBindings=c.computeAPICommandBindings,u.manageCommandObserver=c.manageCommandObserver,u.hasSimpleAPICommandBindings=c.hasSimpleAPICommandBindings,u.redrawText=function(X){return X=l.getGraphDiv(X),new Promise(function(te){setTimeout(function(){X._fullLayout&&(e.getComponentMethod("annotations","draw")(X),e.getComponentMethod("legend","draw")(X),e.getComponentMethod("colorbar","draw")(X),te(u.previousPromises(X)))},300)})},u.resize=function(X){var te;X=l.getGraphDiv(X);var ae=new Promise(function(J,ee){X&&!l.isHidden(X)||ee(new Error("Resize must be passed a displayed plot div element.")),X._redrawTimer&&clearTimeout(X._redrawTimer),X._resolveResize&&(te=X._resolveResize),X._resolveResize=J,X._redrawTimer=setTimeout(function(){if(!X.layout||X.layout.width&&X.layout.height||l.isHidden(X))J(X);else{delete X.layout.width,delete X.layout.height;var se=X.changed;X.autoplay=!0,e.call("relayout",X,{autosize:!0}).then(function(){X.changed=se,X._resolveResize===J&&(delete X._resolveResize,J(X))})}},100)});return te&&te(ae),ae},u.previousPromises=function(X){if((X._promises||[]).length)return Promise.all(X._promises).then(function(){X._promises=[]})},u.addLinks=function(X){if(X._context.showLink||X._context.showSources){var te=X._fullLayout,ae=l.ensureSingle(te._paper,"text","js-plot-link-container",function(Y){Y.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:i.defaultLine,"pointer-events":"all"}).each(function(){var oe=y.select(this);oe.append("tspan").classed("js-link-to-tool",!0),oe.append("tspan").classed("js-link-spacer",!0),oe.append("tspan").classed("js-sourcelinks",!0)})}),J=ae.node(),ee={y:te._paper.attr("height")-9};document.body.contains(J)&&J.getComputedTextLength()>=te.width-20?(ee["text-anchor"]="start",ee.x=5):(ee["text-anchor"]="end",ee.x=te._paper.attr("width")-7),ae.attr(ee);var se=ae.select(".js-link-to-tool"),G=ae.select(".js-link-spacer"),H=ae.select(".js-sourcelinks");X._context.showSources&&X._context.showSources(X),X._context.showLink&&function(Y,oe){oe.text("");var W=oe.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Y._context.linkText+" "+String.fromCharCode(187));if(Y._context.sendData)W.on("click",function(){u.sendDataToCloud(Y)});else{var ne=window.location.pathname.split("/"),re=window.location.search;W.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ne[2].split(".")[0]+"/"+ne[1]+re})}}(X,se),G.text(se.text()&&H.text()?" - ":"")}},u.sendDataToCloud=function(X){var te=(window.PLOTLYENV||{}).BASE_URL||X._context.plotlyServerURL;if(te){X.emit("plotly_beforeexport");var ae=y.select(X).append("div").attr("id","hiddenform").style("display","none"),J=ae.append("form").attr({action:te+"/external",method:"post",target:"_blank"});return J.append("input").attr({type:"text",name:"data"}).node().value=u.graphJson(X,!1,"keepdata"),J.node().submit(),ae.remove(),X.emit("plotly_afterexport"),!1}};var E=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],M=["year","month","dayMonth","dayMonthYear"];function S(X,te){var ae=X._context.locale;ae||(ae="en-US");var J=!1,ee={};function se(ne){for(var re=!0,ce=0;ce<te.length;ce++){var fe=te[ce];ee[fe]||(ne[fe]?ee[fe]=ne[fe]:re=!1)}re&&(J=!0)}for(var G=0;G<2;G++){for(var H=X._context.locales,Y=0;Y<2;Y++){var oe=(H[ae]||{}).format;if(oe&&(se(oe),J))break;H=e.localeRegistry}var W=ae.split("-")[0];if(J||W===ae)break;ae=W}return J||se(e.localeRegistry.en.format),ee}function C(X,te){var ae={_fullLayout:te},J="x"===X._id.charAt(0),ee=X._mainAxis._anchorAxis,se="",G="",H="";if(ee&&(H=ee._mainAxis._id,se=J?X._id+H:H+X._id),!se||!te._plots[se]){se="";for(var Y=X._counterAxes,oe=0;oe<Y.length;oe++){var W=Y[oe],ne=J?X._id+W:W+X._id;G||(G=ne);var re=h.getFromId(ae,W);if(H&&re.overlaying===H){se=ne;break}}}return se||G}function O(X){var te=X.transforms;if(Array.isArray(te)&&te.length)for(var ae=0;ae<te.length;ae++){var J=te[ae],ee=J._module||w[J.type];if(ee&&ee.makesData)return!0}return!1}function I(X,te,ae,J){for(var ee=X.transforms,se=[X],G=0;G<ee.length;G++){var H=ee[G],Y=w[H.type];Y&&Y.transform&&(se=Y.transform(se,{transform:H,fullTrace:X,fullData:te,layout:ae,fullLayout:J,transformIndex:G}))}return se}function N(X){return"string"==typeof X&&"px"===X.substr(X.length-2)&&parseFloat(X)}function F(X){var te=X.margin;if(!X._size){var ae=X._size={l:Math.round(te.l),r:Math.round(te.r),t:Math.round(te.t),b:Math.round(te.b),p:Math.round(te.pad)};ae.w=Math.round(X.width)-ae.l-ae.r,ae.h=Math.round(X.height)-ae.t-ae.b}X._pushmargin||(X._pushmargin={}),X._pushmarginIds||(X._pushmarginIds={})}u.supplyDefaults=function(X,te){var Ke,nt,ae=te&&te.skipUpdateCalc,J=X._fullLayout||{};if(J._skipDefaults)delete J._skipDefaults;else{var ee,se=X._fullLayout={},G=X.layout||{},H=X._fullData||[],Y=X._fullData=[],oe=X.data||[],W=X.calcdata||[],ne=X._context||{};X._transitionData||u.createTransitionData(X),se._dfltTitle={plot:m(X,"Click to enter Plot title"),x:m(X,"Click to enter X axis title"),y:m(X,"Click to enter Y axis title"),colorbar:m(X,"Click to enter Colorscale title"),annotation:m(X,"new text")},se._traceWord=m(X,"trace");var re=S(X,E);if(se._mapboxAccessToken=ne.mapboxAccessToken,J._initialAutoSizeIsDone){var ce=J.width,fe=J.height;u.supplyLayoutGlobalDefaults(G,se,re),G.width||(se.width=ce),G.height||(se.height=fe),u.sanitizeMargins(se)}else{u.supplyLayoutGlobalDefaults(G,se,re);var me=!G.width||!G.height,pe=se.autosize;me&&(pe||ne.autosizable)?u.plotAutoSize(X,G,se):me&&u.sanitizeMargins(se),!pe&&me&&(G.width=se.width,G.height=se.height)}se._d3locale=((Ke=re).decimal=(nt=se.separators).charAt(0),Ke.thousands=nt.charAt(1),{numberFormat:function(it){try{it=T(Ke).format(l.adjustFormat(it))}catch(ht){return l.warnBadFormat(it),l.noFormat}return it},timeFormat:b(Ke).utcFormat}),se._extraFormat=S(X,M),se._initialAutoSizeIsDone=!0,se._dataLength=oe.length,se._modules=[],se._visibleModules=[],se._basePlotModules=[];var ye=se._subplots=function(){var Ke,nt,it=e.collectableSubplotTypes,ht={};if(!it){it=[];var Tt=e.subplotsRegistry;for(var Ct in Tt){var Vt=Tt[Ct].attr;if(Vt&&(it.push(Ct),Array.isArray(Vt)))for(nt=0;nt<Vt.length;nt++)l.pushUnique(it,Vt[nt])}}for(Ke=0;Ke<it.length;Ke++)ht[it[Ke]]=[];return ht}(),Te=se._splomAxes={x:{},y:{}},Le=se._splomSubplots={};se._splomGridDflt={},se._scatterStackOpts={},se._firstScatter={},se._alignmentOpts={},se._colorAxes={},se._requestRangeslider={},se._traceUids=function(Ke,nt){var it,ht,Tt=nt.length,Ct=[];for(it=0;it<Ke.length;it++){var Vt=Ke[it]._fullInput;Vt!==ht&&Ct.push(Vt),ht=Vt}var Ft=Ct.length,gt=new Array(Tt),ft={};function Bt(pn,dn){gt[dn]=pn,ft[pn]=1}function rn(pn,dn){if(pn&&"string"==typeof pn&&!ft[pn])return Bt(pn,dn),!0}for(it=0;it<Tt;it++){var un=nt[it].uid;"number"==typeof un&&(un=String(un)),rn(un,it)||it<Ft&&rn(Ct[it].uid,it)||Bt(l.randstr(ft),it)}return gt}(H,oe),se._globalTransforms=(X._context||{}).globalTransforms,u.supplyDataDefaults(oe,Y,G,se);var Oe=Object.keys(Te.x),Re=Object.keys(Te.y);if(Oe.length>1&&Re.length>1){for(e.getComponentMethod("grid","sizeDefaults")(G,se),ee=0;ee<Oe.length;ee++)l.pushUnique(ye.xaxis,Oe[ee]);for(ee=0;ee<Re.length;ee++)l.pushUnique(ye.yaxis,Re[ee]);for(var Ve in Le)l.pushUnique(ye.cartesian,Ve)}if(se._has=u._hasPlotType.bind(se),H.length===Y.length)for(ee=0;ee<Y.length;ee++)g(Y[ee],H[ee]);u.supplyLayoutModuleDefaults(G,se,Y,X._transitionData);var _e=se._visibleModules,Ae=[];for(ee=0;ee<_e.length;ee++){var Fe=_e[ee].crossTraceDefaults;Fe&&l.pushUnique(Ae,Fe)}for(ee=0;ee<Ae.length;ee++)Ae[ee](Y,se);se._hasOnlyLargeSploms=1===se._basePlotModules.length&&"splom"===se._basePlotModules[0].name&&Oe.length>15&&Re.length>15&&0===se.shapes.length&&0===se.images.length,u.linkSubplots(Y,se,H,J),u.cleanPlot(Y,se,H,J);var Pe=!(!J._has||!J._has("gl2d")),Be=!(!se._has||!se._has("gl2d")),qe=!(!J._has||!J._has("cartesian"))||Pe,We=!(!se._has||!se._has("cartesian"))||Be;qe&&!We?J._bgLayer.remove():We&&!qe&&(se._shouldCreateBgLayer=!0),J._zoomlayer&&!X._dragging&&s({_fullLayout:J}),function(Ke,nt){var it,ht=[];nt.meta&&(it=nt._meta={meta:nt.meta,layout:{meta:nt.meta}});for(var Tt=0;Tt<Ke.length;Tt++){var Ct=Ke[Tt];Ct.meta?ht[Ct.index]=Ct._meta={meta:Ct.meta}:nt.meta&&(Ct._meta={meta:nt.meta}),nt.meta&&(Ct._meta.layout={meta:nt.meta})}ht.length&&(it||(it=nt._meta={}),it.data=ht)}(Y,se),g(se,J),e.getComponentMethod("colorscale","crossTraceDefaults")(Y,se),se._preGUI||(se._preGUI={}),se._tracePreGUI||(se._tracePreGUI={});var Je,ut=se._tracePreGUI,Ge={};for(Je in ut)Ge[Je]="old";for(ee=0;ee<Y.length;ee++)Ge[Je=Y[ee]._fullInput.uid]||(ut[Je]={}),Ge[Je]="new";for(Je in Ge)"old"===Ge[Je]&&delete ut[Je];F(se),e.getComponentMethod("rangeslider","makeData")(se),ae||W.length!==Y.length||u.supplyDefaultsUpdateCalc(W,Y)}},u.supplyDefaultsUpdateCalc=function(X,te){for(var ae=0;ae<te.length;ae++){var J=te[ae],ee=(X[ae]||[])[0];if(ee&&ee.trace){var se=ee.trace;if(se._hasCalcTransform){var G,H,Y,oe=se._arrayAttrs;for(G=0;G<oe.length;G++)Y=l.nestedProperty(se,H=oe[G]).get().slice(),l.nestedProperty(J,H).set(Y)}ee.trace=J}}},u.createTransitionData=function(X){X._transitionData||(X._transitionData={}),X._transitionData._frames||(X._transitionData._frames=[]),X._transitionData._frameHash||(X._transitionData._frameHash={}),X._transitionData._counter||(X._transitionData._counter=0),X._transitionData._interruptCallbacks||(X._transitionData._interruptCallbacks=[])},u._hasPlotType=function(X){var te,ae=this._basePlotModules||[];for(te=0;te<ae.length;te++)if(ae[te].name===X)return!0;var J=this._modules||[];for(te=0;te<J.length;te++){var ee=J[te].name;if(ee===X)return!0;var se=e.modules[ee];if(se&&se.categories[X])return!0}return!1},u.cleanPlot=function(X,te,ae,J){var ee,se,G=J._basePlotModules||[];for(ee=0;ee<G.length;ee++){var H=G[ee];H.clean&&H.clean(X,te,ae,J)}var Y=J._has&&J._has("gl"),oe=te._has&&te._has("gl");Y&&!oe&&void 0!==J._glcontainer&&(J._glcontainer.selectAll(".gl-canvas").remove(),J._glcontainer.selectAll(".no-webgl").remove(),J._glcanvas=null);var W=!!J._infolayer;e:for(ee=0;ee<ae.length;ee++){var ne=ae[ee].uid;for(se=0;se<X.length;se++)if(ne===X[se].uid)continue e;W&&J._infolayer.select(".cb"+ne).remove()}},u.linkSubplots=function(X,te,ae,J){var ee,se,G=J._plots||{},H=te._plots={},Y=te._subplots,oe={_fullData:X,_fullLayout:te},W=Y.cartesian.concat(Y.gl2d||[]);for(ee=0;ee<W.length;ee++){var ne,re=W[ee],ce=G[re],fe=h.getFromId(oe,re,"x"),me=h.getFromId(oe,re,"y");for(ce?ne=H[re]=ce:(ne=H[re]={}).id=re,fe._counterAxes.push(me._id),me._counterAxes.push(fe._id),fe._subplotsWith.push(re),me._subplotsWith.push(re),ne.xaxis=fe,ne.yaxis=me,ne._hasClipOnAxisFalse=!1,se=0;se<X.length;se++){var pe=X[se];if(pe.xaxis===ne.xaxis._id&&pe.yaxis===ne.yaxis._id&&!1===pe.cliponaxis){ne._hasClipOnAxisFalse=!0;break}}}var we,ye=h.list(oe,null,!0);for(ee=0;ee<ye.length;ee++){var Te=null;(we=ye[ee]).overlaying&&(Te=h.getFromId(oe,we.overlaying))&&Te.overlaying&&(we.overlaying=!1,Te=null),we._mainAxis=Te||we,Te&&(we.domain=Te.domain.slice()),we._anchorAxis="free"===we.anchor?null:h.getFromId(oe,we.anchor)}for(ee=0;ee<ye.length;ee++)if((we=ye[ee])._counterAxes.sort(h.idSort),we._subplotsWith.sort(l.subplotSort),we._mainSubplot=C(we,te),we._counterAxes.length&&(we.spikemode&&-1!==we.spikemode.indexOf("across")||we.automargin&&we.mirror&&"free"!==we.anchor||e.getComponentMethod("rangeslider","isVisible")(we))){var Le=1,Oe=0;for(se=0;se<we._counterAxes.length;se++){var Re=h.getFromId(oe,we._counterAxes[se]);Le=Math.min(Le,Re.domain[0]),Oe=Math.max(Oe,Re.domain[1])}Le<Oe&&(we._counterDomainMin=Le,we._counterDomainMax=Oe)}},u.clearExpandedTraceDefaultColors=function(X){var te,ae,J;for(ae=[],(te=X._module._colorAttrs)||(X._module._colorAttrs=te=[],o.crawl(X._module.attributes,function(ee,se,G,H){ae[H]=se,ae.length=H+1,"color"===ee.valType&&void 0===ee.dflt&&te.push(ae.join("."))})),J=0;J<te.length;J++)l.nestedProperty(X,"_input."+te[J]).get()||l.nestedProperty(X,te[J]).set(null)},u.supplyDataDefaults=function(X,te,ae,J){var ee,se,G,H=J._modules,Y=J._visibleModules,oe=J._basePlotModules,W=0,ne=0;function re(Ve){te.push(Ve);var _e=Ve._module;_e&&(l.pushUnique(H,_e),!0===Ve.visible&&l.pushUnique(Y,_e),l.pushUnique(oe,Ve._module.basePlotModule),W++,!1!==Ve._input.visible&&ne++)}J._transformModules=[];var ce={},fe=[],pe=a.traceTemplater((ae.template||{}).data||{});for(ee=0;ee<X.length;ee++){if((se=pe.newTrace(G=X[ee])).uid=J._traceUids[ee],u.supplyTraceDefaults(G,se,ne,J,ee),se.index=ee,se._input=G,se._expandedIndex=W,se.transforms&&se.transforms.length)for(var we=!1!==G.visible&&!1===se.visible,ye=I(se,te,ae,J),Te=0;Te<ye.length;Te++){var Le=ye[Te],Oe={_template:se._template,type:se.type,uid:se.uid+Te};we&&!1===Le.visible&&delete Le.visible,u.supplyTraceDefaults(Le,Oe,W,J,ee),g(Oe,Le),Oe.index=ee,Oe._input=G,Oe._fullInput=se,Oe._expandedIndex=W,Oe._expandedInput=Le,re(Oe)}else se._fullInput=se,se._expandedInput=se,re(se);e.traceIs(se,"carpetAxis")&&(ce[se.carpet]=se),e.traceIs(se,"carpetDependent")&&fe.push(ee)}for(ee=0;ee<fe.length;ee++)if((se=te[fe[ee]]).visible){var Re=ce[se.carpet];se._carpet=Re,Re&&Re.visible?(se.xaxis=Re.xaxis,se.yaxis=Re.yaxis):se.visible=!1}},u.supplyAnimationDefaults=function(X){var te;X=X||{};var ae={};function J(ee,se){return l.coerce(X||{},ae,d,ee,se)}if(J("mode"),J("direction"),J("fromcurrent"),Array.isArray(X.frame))for(ae.frame=[],te=0;te<X.frame.length;te++)ae.frame[te]=u.supplyAnimationFrameDefaults(X.frame[te]||{});else ae.frame=u.supplyAnimationFrameDefaults(X.frame||{});if(Array.isArray(X.transition))for(ae.transition=[],te=0;te<X.transition.length;te++)ae.transition[te]=u.supplyAnimationTransitionDefaults(X.transition[te]||{});else ae.transition=u.supplyAnimationTransitionDefaults(X.transition||{});return ae},u.supplyAnimationFrameDefaults=function(X){var te={};function ae(J,ee){return l.coerce(X||{},te,d.frame,J,ee)}return ae("duration"),ae("redraw"),te},u.supplyAnimationTransitionDefaults=function(X){var te={};function ae(J,ee){return l.coerce(X||{},te,d.transition,J,ee)}return ae("duration"),ae("easing"),te},u.supplyFrameDefaults=function(X){var te={};function ae(J,ee){return l.coerce(X,te,p,J,ee)}return ae("group"),ae("name"),ae("traces"),ae("baseframe"),ae("data"),ae("layout"),te},u.supplyTraceDefaults=function(X,te,ae,J,ee){var se,G=J.colorway||i.defaults,H=G[ae%G.length];function Y(ye,Te){return l.coerce(X,te,u.attributes,ye,Te)}var oe=Y("visible");Y("type"),Y("name",J._traceWord+" "+ee),Y("uirevision",J.uirevision);var W=u.getModule(te);if(te._module=W,W){var ne=W.basePlotModule,re=ne.attr,ce=ne.attributes;if(re&&ce){var fe=J._subplots,me="";if(oe||"gl2d"!==ne.name){if(Array.isArray(re))for(se=0;se<re.length;se++){var pe=re[se],we=l.coerce(X,te,ce,pe);fe[pe]&&l.pushUnique(fe[pe],we),me+=we}else me=l.coerce(X,te,ce,re);fe[ne.name]&&l.pushUnique(fe[ne.name],me)}}}return oe&&(Y("customdata"),Y("ids"),Y("meta"),e.traceIs(te,"showLegend")?(l.coerce(X,te,W.attributes.showlegend?W.attributes:u.attributes,"showlegend"),Y("legendgroup"),Y("legendgrouptitle.text"),Y("legendrank"),te._dfltShowLegend=!0):te._dfltShowLegend=!1,W&&W.supplyDefaults(X,te,H,J),e.traceIs(te,"noOpacity")||Y("opacity"),e.traceIs(te,"notLegendIsolatable")&&(te.visible=!!te.visible),e.traceIs(te,"noHover")||(te.hovertemplate||l.coerceHoverinfo(X,te,J),"parcats"!==te.type&&e.getComponentMethod("fx","supplyDefaults")(X,te,H,J)),W&&W.selectPoints&&Y("selectedpoints"),u.supplyTransformDefaults(X,te,J)),te},u.hasMakesDataTransform=O,u.supplyTransformDefaults=function(X,te,ae){if(te._length||O(X)){var J=ae._globalTransforms||[],ee=ae._transformModules||[];if(Array.isArray(X.transforms)||0!==J.length)for(var G=J.concat(X.transforms||[]),H=te.transforms=[],Y=0;Y<G.length;Y++){var oe,W=G[Y],ne=W.type,re=w[ne],ce=!(W._module&&W._module===re),fe=re&&"function"==typeof re.transform;re||l.warn("Unrecognized transform type "+ne+"."),re&&re.supplyDefaults&&(ce||fe)?((oe=re.supplyDefaults(W,te,ae,X)).type=ne,oe._module=re,l.pushUnique(ee,re)):oe=l.extendFlat({},W),H.push(oe)}}},u.supplyLayoutGlobalDefaults=function(X,te,ae){function J(Y,oe){return l.coerce(X,te,u.layoutAttributes,Y,oe)}var ee=X.template;l.isPlainObject(ee)&&(te.template=ee,te._template=ee.layout,te._dataTemplate=ee.data),J("autotypenumbers");var se=l.coerceFont(J,"font");l.coerceFont(J,"title.font",l.extendFlat({},se,{size:Math.round(1.4*se.size)})),J("title.text",te._dfltTitle.plot),J("title.xref"),J("title.yref"),J("title.x"),J("title.y"),J("title.xanchor"),J("title.yanchor"),J("title.pad.t"),J("title.pad.r"),J("title.pad.b"),J("title.pad.l"),J("uniformtext.mode")&&J("uniformtext.minsize"),J("autosize",!(X.width&&X.height)),J("width"),J("height"),J("margin.l"),J("margin.r"),J("margin.t"),J("margin.b"),J("margin.pad"),J("margin.autoexpand"),X.width&&X.height&&u.sanitizeMargins(te),e.getComponentMethod("grid","sizeDefaults")(X,te),J("paper_bgcolor"),J("separators",ae.decimal+ae.thousands),J("hidesources"),J("colorway"),J("datarevision");var H=J("uirevision");J("editrevision",H),J("selectionrevision",H),e.getComponentMethod("modebar","supplyLayoutDefaults")(X,te),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(X,te,J),J("meta"),l.isPlainObject(X.transition)&&(J("transition.duration"),J("transition.easing"),J("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(X,te,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(X,te,J)},u.plotAutoSize=function(X,te,ae){var J,ee,se=X._context||{},G=se.frameMargins,H=l.isPlotDiv(X);if(H&&X.emit("plotly_autosize"),se.fillFrame)J=window.innerWidth,ee=window.innerHeight,document.body.style.overflow="hidden";else{var Y=H?window.getComputedStyle(X):{};if(J=N(Y.width)||N(Y.maxWidth)||ae.width,ee=N(Y.height)||N(Y.maxHeight)||ae.height,_(G)&&G>0){var oe=1-2*G;J=Math.round(oe*J),ee=Math.round(oe*ee)}}var W=u.layoutAttributes.width.min,ne=u.layoutAttributes.height.min;J<W&&(J=W),ee<ne&&(ee=ne);var re=!te.width&&Math.abs(ae.width-J)>1,ce=!te.height&&Math.abs(ae.height-ee)>1;(ce||re)&&(re&&(ae.width=J),ce&&(ae.height=ee)),X._initialAutoSize||(X._initialAutoSize={width:J,height:ee}),u.sanitizeMargins(ae)},u.supplyLayoutModuleDefaults=function(X,te,ae,J){var ee,se,G,H=e.componentsRegistry,Y=te._basePlotModules,oe=e.subplotsRegistry.cartesian;for(ee in H)(G=H[ee]).includeBasePlot&&G.includeBasePlot(X,te);for(var W in Y.length||Y.push(oe),te._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(X,te),oe.finalizeSubplots(X,te)),te._subplots)te._subplots[W].sort(l.subplotSort);for(se=0;se<Y.length;se++)(G=Y[se]).supplyLayoutDefaults&&G.supplyLayoutDefaults(X,te,ae);var ne=te._modules;for(se=0;se<ne.length;se++)(G=ne[se]).supplyLayoutDefaults&&G.supplyLayoutDefaults(X,te,ae);var re=te._transformModules;for(se=0;se<re.length;se++)(G=re[se]).supplyLayoutDefaults&&G.supplyLayoutDefaults(X,te,ae,J);for(ee in H)(G=H[ee]).supplyLayoutDefaults&&G.supplyLayoutDefaults(X,te,ae)},u.purge=function(X){var te=X._fullLayout||{};void 0!==te._glcontainer&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.remove(),te._glcanvas=null),te._modeBar&&te._modeBar.destroy(),X._transitionData&&(X._transitionData._interruptCallbacks&&(X._transitionData._interruptCallbacks.length=0),X._transitionData._animationRaf&&window.cancelAnimationFrame(X._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(X),delete X.data,delete X.layout,delete X._fullData,delete X._fullLayout,delete X.calcdata,delete X.empty,delete X.fid,delete X.undoqueue,delete X.undonum,delete X.autoplay,delete X.changed,delete X._promises,delete X._redrawTimer,delete X._hmlumcount,delete X._hmpixcount,delete X._transitionData,delete X._transitioning,delete X._initialAutoSize,delete X._transitioningWithDuration,delete X._dragging,delete X._dragged,delete X._dragdata,delete X._hoverdata,delete X._snapshotInProgress,delete X._editing,delete X._mouseDownTime,delete X._legendMouseDownTime,X.removeAllListeners&&X.removeAllListeners()},u.style=function(X){var te,ae=X._fullLayout._visibleModules,J=[];for(te=0;te<ae.length;te++){var ee=ae[te];ee.style&&l.pushUnique(J,ee.style)}for(te=0;te<J.length;te++)J[te](X)},u.sanitizeMargins=function(X){if(X&&X.margin){var te,ae=X.width,J=X.height,ee=X.margin,G=J-(ee.t+ee.b);ae-(ee.l+ee.r)<0&&(te=(ae-1)/(ee.l+ee.r),ee.l=Math.floor(te*ee.l),ee.r=Math.floor(te*ee.r)),G<0&&(te=(J-1)/(ee.t+ee.b),ee.t=Math.floor(te*ee.t),ee.b=Math.floor(te*ee.b))}},u.clearAutoMarginIds=function(X){X._fullLayout._pushmarginIds={}},u.allowAutoMargin=function(X,te){X._fullLayout._pushmarginIds[te]=1},u.autoMargin=function(X,te,ae){var J=X._fullLayout,ee=J.width,se=J.height,G=J.margin,H=l.constrain(ee-G.l-G.r,2,64),Y=l.constrain(se-G.t-G.b,2,64),oe=Math.max(0,ee-H),W=Math.max(0,se-Y),ne=J._pushmargin,re=J._pushmarginIds;if(!1!==G.autoexpand){if(ae){var ce=ae.pad;if(void 0===ce&&(ce=Math.min(12,G.l,G.r,G.t,G.b)),oe){var fe=(ae.l+ae.r)/oe;fe>1&&(ae.l/=fe,ae.r/=fe)}if(W){var me=(ae.t+ae.b)/W;me>1&&(ae.t/=me,ae.b/=me)}ne[te]={l:{val:void 0!==ae.xl?ae.xl:ae.x,size:ae.l+ce},r:{val:void 0!==ae.xr?ae.xr:ae.x,size:ae.r+ce},b:{val:void 0!==ae.yb?ae.yb:ae.y,size:ae.b+ce},t:{val:void 0!==ae.yt?ae.yt:ae.y,size:ae.t+ce}},re[te]=1}else delete ne[te],delete re[te];if(!J._replotting)return u.doAutoMargin(X)}},u.doAutoMargin=function(X){var te=X._fullLayout,ae=te.width,J=te.height;te._size||(te._size={}),F(te);var ee=te._size,se=te.margin,G=l.extendFlat({},ee),H=se.l,Y=se.r,oe=se.t,W=se.b,ne=te._pushmargin,re=te._pushmarginIds;if(!1!==te.margin.autoexpand){for(var ce in ne)re[ce]||delete ne[ce];for(var fe in ne.base={l:{val:0,size:H},r:{val:1,size:Y},t:{val:1,size:oe},b:{val:0,size:W}},ne){var me=ne[fe].l||{},pe=ne[fe].b||{},we=me.val,ye=me.size,Te=pe.val,Le=pe.size;for(var Oe in ne){if(_(ye)&&ne[Oe].r){var Re=ne[Oe].r.val,Ve=ne[Oe].r.size;if(Re>we){var _e=(ye*Re+(Ve-ae)*we)/(Re-we),Ae=(Ve*(1-we)+(ye-ae)*(1-Re))/(Re-we);_e+Ae>H+Y&&(H=_e,Y=Ae)}}if(_(Le)&&ne[Oe].t){var Fe=ne[Oe].t.val,Pe=ne[Oe].t.size;if(Fe>Te){var Be=(Le*Fe+(Pe-J)*Te)/(Fe-Te),qe=(Pe*(1-Te)+(Le-J)*(1-Fe))/(Fe-Te);Be+qe>W+oe&&(W=Be,oe=qe)}}}}}var Tt,We=l.constrain(ae-se.l-se.r,2,64),Je=l.constrain(J-se.t-se.b,2,64),ut=Math.max(0,ae-We),Ge=Math.max(0,J-Je);if(ut){var Ke=(H+Y)/ut;Ke>1&&(H/=Ke,Y/=Ke)}if(Ge){var nt=(W+oe)/Ge;nt>1&&(W/=nt,oe/=nt)}if(ee.l=Math.round(H),ee.r=Math.round(Y),ee.t=Math.round(oe),ee.b=Math.round(W),ee.p=Math.round(se.pad),ee.w=Math.round(ae)-ee.l-ee.r,ee.h=Math.round(J)-ee.t-ee.b,!te._replotting&&u.didMarginChange(G,ee)){"_redrawFromAutoMarginCount"in te?te._redrawFromAutoMarginCount++:te._redrawFromAutoMarginCount=1;var it=3*(1+Object.keys(re).length);if(te._redrawFromAutoMarginCount<it)return e.call("_doPlot",X);te._size=G,l.warn("Too many auto-margin redraws.")}Tt=h.list(X,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ct){for(var Vt=0;Vt<Tt.length;Vt++){var Ft=Tt[Vt][Ct];Ft&&Ft()}})};var L=["l","r","t","b","p","w","h"];function P(X,te,ae){var J=!1,se=l.syncOrAsync([u.previousPromises,function(){if(X._transitionData)return X._transitioning=!1,function(G){var H=Promise.resolve();if(!G)return H;for(;G.length;)H=H.then(G.shift());return H}(X._transitionData._interruptCallbacks)},ae.prepareFn,u.rehover,function(){return X.emit("plotly_transitioning",[]),new Promise(function(G){X._transitioning=!0,te.duration>0&&(X._transitioningWithDuration=!0),X._transitionData._interruptCallbacks.push(function(){J=!0}),ae.redraw&&X._transitionData._interruptCallbacks.push(function(){return e.call("redraw",X)}),X._transitionData._interruptCallbacks.push(function(){X.emit("plotly_transitioninterrupted",[])});var H=0,Y=0;function oe(){return H++,function(){var W;Y++,J||Y!==H||(W=G,!X._transitionData||(function(ne){if(ne)for(;ne.length;)ne.shift()}(X._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ae.redraw)return e.call("redraw",X)}).then(function(){X._transitioning=!1,X._transitioningWithDuration=!1,X.emit("plotly_transitioned",[])}).then(W)))}}ae.runFn(oe),setTimeout(oe())})}],X);return se&&se.then||(se=Promise.resolve()),se.then(function(){return X})}u.didMarginChange=function(X,te){for(var ae=0;ae<L.length;ae++){var J=L[ae],ee=X[J],se=te[J];if(!_(ee)||Math.abs(se-ee)>1)return!0}return!1},u.graphJson=function(X,te,ae,J,ee,se){(ee&&te&&!X._fullData||ee&&!te&&!X._fullLayout)&&u.supplyDefaults(X);var H=ee?X._fullLayout:X.layout,Y=(X._transitionData||{})._frames;function oe(re,ce){if("function"==typeof re)return ce?"_function_":null;if(l.isPlainObject(re)){var fe,me={};return Object.keys(re).sort().forEach(function(pe){if(-1===["_","["].indexOf(pe.charAt(0)))if("function"!=typeof re[pe]){if("keepdata"===ae){if("src"===pe.substr(pe.length-3))return}else if("keepstream"===ae){if("string"==typeof(fe=re[pe+"src"])&&fe.indexOf(":")>0&&!l.isPlainObject(re.stream))return}else if("keepall"!==ae&&"string"==typeof(fe=re[pe+"src"])&&fe.indexOf(":")>0)return;me[pe]=oe(re[pe],ce)}else ce&&(me[pe]="_function")}),me}return Array.isArray(re)?re.map(function(pe){return oe(pe,ce)}):l.isTypedArray(re)?l.simpleMap(re,l.identity):l.isJSDate(re)?l.ms2DateTimeLocal(+re):re}var W={data:((ee?X._fullData:X.data)||[]).map(function(re){var ce=oe(re);return te&&delete ce.fit,ce})};if(!te&&(W.layout=oe(H),ee)){var ne=H._size;W.layout.computed={margin:{b:ne.b,l:ne.l,r:ne.r,t:ne.t}}}return Y&&(W.frames=oe(Y)),se&&(W.config=oe(X._context,!0)),"object"===J?W:JSON.stringify(W)},u.modifyFrames=function(X,te){var ae,J,ee,se=X._transitionData._frames,G=X._transitionData._frameHash;for(ae=0;ae<te.length;ae++)switch((J=te[ae]).type){case"replace":var H=(se[J.index]||{}).name,Y=(ee=J.value).name;se[J.index]=G[Y]=ee,Y!==H&&(delete G[H],G[Y]=ee);break;case"insert":G[(ee=J.value).name]=ee,se.splice(J.index,0,ee);break;case"delete":delete G[(ee=se[J.index]).name],se.splice(J.index,1)}return Promise.resolve()},u.computeFrame=function(X,te){var ae,J,ee,se,G=X._transitionData._frameHash;if(!te)throw new Error("computeFrame must be given a string frame name");var H=G[te.toString()];if(!H)return!1;for(var Y=[H],oe=[H.name];H.baseframe&&(H=G[H.baseframe.toString()])&&-1===oe.indexOf(H.name);)Y.push(H),oe.push(H.name);for(var W={};H=Y.pop();)if(H.layout&&(W.layout=u.extendLayout(W.layout,H.layout)),H.data){if(W.data||(W.data=[]),!(J=H.traces))for(J=[],ae=0;ae<H.data.length;ae++)J[ae]=ae;for(W.traces||(W.traces=[]),ae=0;ae<H.data.length;ae++)null!=(ee=J[ae])&&(-1===(se=W.traces.indexOf(ee))&&(W.traces[se=W.data.length]=ee),W.data[se]=u.extendTrace(W.data[se],H.data[ae]))}return W},u.recomputeFrameHash=function(X){for(var te=X._transitionData._frameHash={},ae=X._transitionData._frames,J=0;J<ae.length;J++){var ee=ae[J];ee&&ee.name&&(te[ee.name]=ee)}},u.extendObjectWithContainers=function(X,te,ae){var J,ee,se,G,H,Y,oe,W=l.extendDeepNoArrays({},te||{}),ne=l.expandObjectPaths(W),re={};if(ae&&ae.length)for(se=0;se<ae.length;se++)void 0===(ee=(J=l.nestedProperty(ne,ae[se])).get())?l.nestedProperty(re,ae[se]).set(null):(J.set(null),l.nestedProperty(re,ae[se]).set(ee));if(X=l.extendDeepNoArrays(X||{},ne),ae&&ae.length)for(se=0;se<ae.length;se++)if(Y=l.nestedProperty(re,ae[se]).get()){for(oe=(H=l.nestedProperty(X,ae[se])).get(),Array.isArray(oe)||H.set(oe=[]),G=0;G<Y.length;G++){var ce=Y[G];oe[G]=null===ce?null:u.extendObjectWithContainers(oe[G],ce)}H.set(oe)}return X},u.dataArrayContainers=["transforms","dimensions"],u.layoutArrayContainers=e.layoutArrayContainers,u.extendTrace=function(X,te){return u.extendObjectWithContainers(X,te,u.dataArrayContainers)},u.extendLayout=function(X,te){return u.extendObjectWithContainers(X,te,u.layoutArrayContainers)},u.transition=function(X,te,ae,J,ee,se){var G={redraw:ee.redraw},H={},Y=[];return G.prepareFn=function(){for(var oe=Array.isArray(te)?te.length:0,W=J.slice(0,oe),ne=0;ne<W.length;ne++){var re=W[ne],ce=X._fullData[re]._module;if(ce){if(ce.animatable){var fe=ce.basePlotModule.name;H[fe]||(H[fe]=[]),H[fe].push(re)}X.data[W[ne]]=u.extendTrace(X.data[W[ne]],te[ne])}}var me=l.expandObjectPaths(l.extendDeepNoArrays({},ae)),pe=/^[xy]axis[0-9]*$/;for(var we in me)pe.test(we)&&delete me[we].range;u.extendLayout(X.layout,me),delete X.calcdata,u.supplyDefaults(X),u.doCalcdata(X);var ye=l.expandObjectPaths(ae);if(ye){var Te=X._fullLayout._plots;for(var Le in Te){var Oe=Te[Le],Re=Oe.xaxis,Ve=Oe.yaxis,_e=Re.range.slice(),Ae=Ve.range.slice(),Fe=null,Pe=null,Be=null,qe=null;Array.isArray(ye[Re._name+".range"])?Fe=ye[Re._name+".range"].slice():Array.isArray((ye[Re._name]||{}).range)&&(Fe=ye[Re._name].range.slice()),Array.isArray(ye[Ve._name+".range"])?Pe=ye[Ve._name+".range"].slice():Array.isArray((ye[Ve._name]||{}).range)&&(Pe=ye[Ve._name].range.slice()),_e&&Fe&&(Re.r2l(_e[0])!==Re.r2l(Fe[0])||Re.r2l(_e[1])!==Re.r2l(Fe[1]))&&(Be={xr0:_e,xr1:Fe}),Ae&&Pe&&(Ve.r2l(Ae[0])!==Ve.r2l(Pe[0])||Ve.r2l(Ae[1])!==Ve.r2l(Pe[1]))&&(qe={yr0:Ae,yr1:Pe}),(Be||qe)&&Y.push(l.extendFlat({plotinfo:Oe},Be,qe))}}return Promise.resolve()},G.runFn=function(oe){var W,ne,re=X._fullLayout._basePlotModules,ce=Y.length;if(ae)for(ne=0;ne<re.length;ne++)re[ne].transitionAxes&&re[ne].transitionAxes(X,Y,se,oe);for(var fe in ce?((W=l.extendFlat({},se)).duration=0,delete H.cartesian):W=se,H){var me=H[fe];X._fullData[me[0]]._module.basePlotModule.plot(X,me,W,oe)}},P(X,se,G)},u.transitionFromReact=function(X,te,ae,J){var ee=X._fullLayout,se=ee.transition,G={},H=[];return G.prepareFn=function(){var Y=ee._plots;for(var oe in G.redraw=!1,"some"===te.anim&&(G.redraw=!0),"some"===ae.anim&&(G.redraw=!0),Y){var W=Y[oe],ne=W.xaxis,re=W.yaxis,ce=J[ne._name].range.slice(),fe=J[re._name].range.slice(),me=ne.range.slice(),pe=re.range.slice();ne.setScale(),re.setScale();var we=null,ye=null;ne.r2l(ce[0])===ne.r2l(me[0])&&ne.r2l(ce[1])===ne.r2l(me[1])||(we={xr0:ce,xr1:me}),re.r2l(fe[0])===re.r2l(pe[0])&&re.r2l(fe[1])===re.r2l(pe[1])||(ye={yr0:fe,yr1:pe}),(we||ye)&&H.push(l.extendFlat({plotinfo:W},we,ye))}return Promise.resolve()},G.runFn=function(Y){for(var oe,W,ne,re=X._fullData,ce=X._fullLayout._basePlotModules,fe=[],me=0;me<re.length;me++)fe.push(me);function pe(){if(X._fullLayout)for(var ye=0;ye<ce.length;ye++)ce[ye].transitionAxes&&ce[ye].transitionAxes(X,H,oe,Y)}function we(){if(X._fullLayout)for(var ye=0;ye<ce.length;ye++)ce[ye].plot(X,ne,W,Y)}H.length&&te.anim?"traces first"===se.ordering?(oe=l.extendFlat({},se,{duration:0}),ne=fe,W=se,setTimeout(pe,se.duration),we()):(oe=se,ne=null,W=l.extendFlat({},se,{duration:0}),setTimeout(we,oe.duration),pe()):H.length?(oe=se,pe()):te.anim&&(ne=fe,W=se,we())},P(X,se,G)},u.doCalcdata=function(X,te){var ae,J,ee,se,G=h.list(X),H=X._fullData,Y=X._fullLayout,oe=new Array(H.length),W=(X.calcdata||[]).slice();for(X.calcdata=oe,Y._numBoxes=0,Y._numViolins=0,Y._violinScaleGroupStats={},X._hmpixcount=0,X._hmlumcount=0,Y._piecolormap={},Y._sunburstcolormap={},Y._treemapcolormap={},Y._iciclecolormap={},Y._funnelareacolormap={},ee=0;ee<H.length;ee++)Array.isArray(te)&&-1===te.indexOf(ee)&&(oe[ee]=W[ee]);for(ee=0;ee<H.length;ee++)(ae=H[ee])._arrayAttrs=o.findArrayAttributes(ae),ae._extremes={};var ne=Y._subplots.polar||[];for(ee=0;ee<ne.length;ee++)G.push(Y[ne[ee]].radialaxis,Y[ne[ee]].angularaxis);for(var re in Y._colorAxes){var ce=Y[re];!1!==ce.cauto&&(delete ce.cmin,delete ce.cmax)}var fe=!1;function me(ye){if(J=(ae=H[ye])._module,!0===ae.visible&&ae.transforms){if(J&&J.calc){var Te=J.calc(X,ae);Te[0]&&Te[0].t&&Te[0].t._scene&&delete Te[0].t._scene.dirty}for(se=0;se<ae.transforms.length;se++){var Le=ae.transforms[se];(J=w[Le.type])&&J.calcTransform&&(ae._hasCalcTransform=!0,fe=!0,J.calcTransform(X,ae,Le))}}}function pe(ye,Te){if(!!(J=(ae=H[ye])._module).isContainer===Te){var Le=[];if(!0===ae.visible&&0!==ae._length){delete ae._indexToPoints;var Oe=ae.transforms||[];for(se=Oe.length-1;se>=0;se--)if(Oe[se].enabled){ae._indexToPoints=Oe[se]._indexToPoints;break}J&&J.calc&&(Le=J.calc(X,ae))}Array.isArray(Le)&&Le[0]||(Le=[{x:v,y:v}]),Le[0].t||(Le[0].t={}),Le[0].trace=ae,oe[ye]=Le}}for(U(G,H,Y),ee=0;ee<H.length;ee++)pe(ee,!0);for(ee=0;ee<H.length;ee++)me(ee);for(fe&&U(G,H,Y),ee=0;ee<H.length;ee++)pe(ee,!0);for(ee=0;ee<H.length;ee++)pe(ee,!1);$(X);var we=function(ye,Te){var Le,Oe,Re,Ve,_e,Ae=[];function Fe(ln,Ee,De){var Ie=Ee._id.charAt(0);if("histogram2dcontour"===ln){var He=Ee._counterAxes[0],Ye=h.getFromId(Te,He),tt="x"===Ie||"x"===He&&"category"===Ye.type,ot="y"===Ie||"y"===He&&"category"===Ye.type;return function(st,bt){return 0===st||0===bt||tt&&st===De[bt].length-1||ot&&bt===De.length-1?-1:("y"===Ie?bt:st)-1}}return function(st,bt){return"y"===Ie?bt:st}}var Pe={min:function(ln){return l.aggNums(Math.min,null,ln)},max:function(ln){return l.aggNums(Math.max,null,ln)},sum:function(ln){return l.aggNums(function(Ee,De){return Ee+De},null,ln)},total:function(ln){return l.aggNums(function(Ee,De){return Ee+De},null,ln)},mean:function(ln){return l.mean(ln)},median:function(ln){return l.median(ln)}};for(Le=0;Le<ye.length;Le++){var Be=ye[Le];if("category"===Be.type){var qe=Be.categoryorder.match(j);if(qe){var We=qe[1],Je=qe[2],ut=Be._id.charAt(0),Ge="x"===ut,Ke=[];for(Oe=0;Oe<Be._categories.length;Oe++)Ke.push([Be._categories[Oe],[]]);for(Oe=0;Oe<Be._traceIndices.length;Oe++){var nt=Be._traceIndices[Oe],it=Te._fullData[nt];if(!0===it.visible){var ht=it.type;e.traceIs(it,"histogram")&&(delete it._xautoBinFinished,delete it._yautoBinFinished);var Tt="splom"===ht,Ct="scattergl"===ht,Vt=Te.calcdata[nt];for(Re=0;Re<Vt.length;Re++){var Ft,gt,ft=Vt[Re];if(Tt){var Bt=it._axesDim[Be._id];if(!Ge){var rn=it._diag[Bt][0];rn&&(Be=Te._fullLayout[h.id2name(rn)])}var un=ft.trace.dimensions[Bt].values;for(Ve=0;Ve<un.length;Ve++)for(Ft=Be._categoriesMap[un[Ve]],_e=0;_e<ft.trace.dimensions.length;_e++)_e!==Bt&&Ke[Ft][1].push(ft.trace.dimensions[_e].values[Ve])}else if(Ct){for(Ve=0;Ve<ft.t.x.length;Ve++)Ge?(Ft=ft.t.x[Ve],gt=ft.t.y[Ve]):(Ft=ft.t.y[Ve],gt=ft.t.x[Ve]),Ke[Ft][1].push(gt);ft.t&&ft.t._scene&&delete ft.t._scene.dirty}else if(ft.hasOwnProperty("z")){var dn=Fe(it.type,Be,gt=ft.z);for(Ve=0;Ve<gt.length;Ve++)for(_e=0;_e<gt[Ve].length;_e++)(Ft=dn(_e,Ve))+1&&Ke[Ft][1].push(gt[Ve][_e])}else for(void 0===(Ft=ft.p)&&(Ft=ft[ut]),void 0===(gt=ft.s)&&(gt=ft.v),void 0===gt&&(gt=Ge?ft.y:ft.x),Array.isArray(gt)||(gt=void 0===gt?[]:[gt]),Ve=0;Ve<gt.length;Ve++)Ke[Ft][1].push(gt[Ve])}}}Be._categoriesValue=Ke;var Mn=[];for(Oe=0;Oe<Ke.length;Oe++)Mn.push([Ke[Oe][0],Pe[We](Ke[Oe][1])]);Mn.sort(function(ln,Ee){return ln[1]-Ee[1]}),Be._categoriesAggregatedValue=Mn,Be._initialCategories=Mn.map(function(ln){return ln[0]}),"descending"===Je&&Be._initialCategories.reverse(),Ae=Ae.concat(Be.sortByInitialCategories())}}}return Ae}(G,X);if(we.length){for(Y._numBoxes=0,Y._numViolins=0,ee=0;ee<we.length;ee++)pe(we[ee],!0);for(ee=0;ee<we.length;ee++)pe(we[ee],!1);$(X)}e.getComponentMethod("fx","calc")(X),e.getComponentMethod("errorbars","calc")(X)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function U(X,te,ae){var J={};function ee(Y){Y.clearCalc(),"multicategory"===Y.type&&Y.setupMultiCategory(te),J[Y._id]=1}l.simpleMap(X,ee);for(var se=ae._axisMatchGroups||[],G=0;G<se.length;G++)for(var H in se[G])J[H]||ee(ae[h.id2name(H)])}function $(X){var te,ae,J,ee=X._fullLayout,se=ee._visibleModules,G={};for(ae=0;ae<se.length;ae++){var H=se[ae],Y=H.crossTraceCalc;if(Y){var oe=H.basePlotModule.name;G[oe]?l.pushUnique(G[oe],Y):G[oe]=[Y]}}for(J in G){var W=G[J],ne=ee._subplots[J];if(Array.isArray(ne))for(te=0;te<ne.length;te++){var re=ne[te],ce="cartesian"===J?ee._plots[re]:ee[re];for(ae=0;ae<W.length;ae++)W[ae](X,ce,re)}else for(ae=0;ae<W.length;ae++)W[ae](X)}}u.rehover=function(X){X._fullLayout._rehover&&X._fullLayout._rehover()},u.redrag=function(X){X._fullLayout._redrag&&X._fullLayout._redrag()},u.generalUpdatePerTraceModule=function(X,te,ae,J){var ee,se=te.traceHash,G={};for(ee=0;ee<ae.length;ee++){var H=ae[ee],Y=H[0].trace;Y.visible&&(G[Y.type]=G[Y.type]||[],G[Y.type].push(H))}for(var oe in se)if(!G[oe]){var W=se[oe][0];W[0].trace.visible=!1,G[oe]=[W]}for(var ne in G){var re=G[ne];re[0][0].trace._module.plot(X,te,l.filterVisible(re),J)}te.traceHash=G},u.plotBasePlot=function(X,te,ae,J,ee){var se=e.getModule(X),G=f(te.calcdata,se)[0];se.plot(te,G,J,ee)},u.cleanBasePlot=function(X,te,ae,J,ee){var se=ee._has&&ee._has(X),G=ae._has&&ae._has(X);se&&!G&&ee["_"+X+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(x,ue,le){"use strict";ue.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../lib/polygon").tester,T=y.findIndexOfMin,_=y.isAngleInsideSector,e=y.angleDelta,o=y.angleDist;function a(h,s,d,p){var f,g,m=p[0],u=p[1],w=i(Math.sin(s)-Math.sin(h)),c=i(Math.cos(s)-Math.cos(h)),E=Math.tan(d),M=i(1/E),S=w/c,C=u-S*m;return M?w&&c?g=E*(f=C/(E-S)):c?(f=u*M,g=u):(f=m,g=m*E):w&&c?(f=0,g=C):c?(f=0,g=u):f=g=NaN,[f,g]}function l(h,s,d,p){return y.isFullCircle([s,d])?function(f,g){var m,u=g.length,w=new Array(u+1);for(m=0;m<u;m++){var c=g[m];w[m]=[f*Math.cos(c),f*Math.sin(c)]}return w[m]=w[0].slice(),w}(h,p):function(f,g,m,u){var w,c,E=u.length,M=[];function S(U){return[f*Math.cos(U),f*Math.sin(U)]}function C(U,$,X){return a(U,$,X,S(U))}function O(U){return y.mod(U,E)}function I(U){return _(U,[g,m])}var N=T(u,function(U){return I(U)?o(U,g):1/0}),F=C(u[N],u[O(N-1)],g);for(M.push(F),w=N,c=0;c<E;w++,c++){var L=u[O(w)];if(!I(L))break;M.push(S(L))}var P=T(u,function(U){return I(U)?o(U,m):1/0}),j=C(u[P],u[O(P+1)],m);return M.push(j),M.push([0,0]),M.push(M[0].slice()),M}(h,s,d,p)}function i(h){return Math.abs(h)>1e-10?h:0}function v(h,s,d){s=s||0,d=d||0;for(var p=h.length,f=new Array(p),g=0;g<p;g++){var m=h[g];f[g]=[s+m[0],d-m[1]]}return f}ue.exports={isPtInsidePolygon:function(h,s,d,p,f){if(!_(s,p))return!1;var g,m;d[0]<d[1]?(g=d[0],m=d[1]):(g=d[1],m=d[0]);var u=b(l(g,p[0],p[1],f)),w=b(l(m,p[0],p[1],f)),c=[h*Math.cos(s),h*Math.sin(s)];return w.contains(c)&&!u.contains(c)},findPolygonOffset:function(h,s,d,p){for(var f=1/0,g=1/0,m=l(h,s,d,p),u=0;u<m.length;u++){var w=m[u];f=Math.min(f,w[0]),g=Math.min(g,-w[1])}return[f,g]},findEnclosingVertexAngles:function(h,s){var d=T(s,function(f){var g=e(f,h);return g>0?g:1/0}),p=y.mod(d+1,s.length);return[s[d],s[p]]},findIntersectionXY:a,findXYatLength:function(h,s,d,p){var f=-s*d,g=s*s+1,m=2*(s*f-d),w=Math.sqrt(m*m-4*g*(f*f+d*d-h*h)),c=(-m+w)/(2*g),E=(-m-w)/(2*g);return[[c,s*c+f+p],[E,s*E+f+p]]},clampTiny:i,pathPolygon:function(h,s,d,p,f,g){return"M"+v(l(h,s,d,p),f,g).join("L")},pathPolygonAnnulus:function(h,s,d,p,f,g,m){var u,w;h<s?(u=h,w=s):(u=s,w=h);var c=v(l(u,d,p,f),g,m);return"M"+v(l(w,d,p,f),g,m).reverse().join("L")+"M"+c.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(x,ue,le){"use strict";var y=x("../get_data").getSubplotCalcData,b=x("../../lib").counterRegex,T=x("./polar"),_=x("./constants"),e=_.attr,o=_.name,a=b(o),l={};l[e]={valType:"subplotid",dflt:o,editType:"calc"},ue.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:l,layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),plot:function(i){for(var v=i._fullLayout,h=i.calcdata,s=v._subplots[o],d=0;d<s.length;d++){var p=s[d],f=y(h,o,p),g=v[p]._subplot;g||(g=T(i,p),v[p]._subplot=g),g.plot(f,v,i._promises)}},clean:function(i,v,h,s){for(var d=s._subplots[o]||[],p=s._has&&s._has("gl"),f=v._has&&v._has("gl"),g=p&&!f,m=0;m<d.length;m++){var u=d[m],w=s[u]._subplot;if(!v[u]&&w)for(var c in w.framework.remove(),w.layers["radial-axis-title"].remove(),w.clipPaths)w.clipPaths[c].remove();g&&w._scene&&(w._scene.destroy(),w._scene=null)}},toSVG:x("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(x,ue,le){"use strict";var y=x("../../components/color/attributes"),b=x("../cartesian/layout_attributes"),T=x("../domain").attributes,_=x("../../lib").extendFlat,e=x("../../plot_api/edit_types").overrideAll,o=e({color:b.color,showline:_({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:_({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,griddash:b.griddash},"plot","from-root"),a=e({tickmode:b.tickmode,nticks:b.nticks,tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,ticklabelstep:b.ticklabelstep,showticklabels:b.showticklabels,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,layer:b.layer},"plot","from-root"),l={visible:_({},b.visible,{dflt:!0}),type:_({},b.type,{values:["-","linear","log","date","category"]}),autotypenumbers:b.autotypenumbers,autorange:_({},b.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:_({},b.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:b.categoryorder,categoryarray:b.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:_({},b.title.text,{editType:"plot",dflt:""}),font:_({},b.title.font,{editType:"plot"}),editType:"plot"},hoverformat:b.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}};_(l,o,a);var i={visible:_({},b.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:b.autotypenumbers,categoryorder:b.categoryorder,categoryarray:b.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:b.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};_(i,o,a),ue.exports={domain:T({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:y.background},radialaxis:l,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/color"),T=x("../../plot_api/plot_template"),_=x("../subplot_defaults"),e=x("../get_data").getSubplotData,o=x("../cartesian/tick_value_defaults"),a=x("../cartesian/tick_mark_defaults"),l=x("../cartesian/tick_label_defaults"),i=x("../cartesian/prefix_suffix_defaults"),v=x("../cartesian/category_order_defaults"),h=x("../cartesian/line_grid_defaults"),s=x("../cartesian/axis_autotype"),d=x("./layout_attributes"),p=x("./set_convert"),f=x("./constants"),g=f.axisNames;function m(w,c,E,M){var S=E("bgcolor");M.bgColor=b.combine(S,M.paper_bgcolor);var C=E("sector");E("hole");var O,I=e(M.fullData,f.name,M.id),N=M.layoutOut;function F(oe,W){return E(O+"."+oe,W)}for(var L=0;L<g.length;L++){y.isPlainObject(w[O=g[L]])||(w[O]={});var P=w[O],j=T.newContainer(c,O);j._id=j._name=O,j._attr=M.id+"."+O,j._traceIndices=I.map(function(oe){return oe._expandedIndex});var U=f.axisName2dataArray[O],$=u(P,j,F,I,U,M);v(P,j,F,{axData:I,dataAttr:U});var X=F("visible");switch(p(j,c,N),F("uirevision",c.uirevision),j._m=1,O){case"radialaxis":var te=F("autorange",!j.isValidRange(P.range));P.autorange=te,!te||"linear"!==$&&"-"!==$||F("rangemode"),"reversed"===te&&(j._m=-1),F("range"),j.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===$){y.log("Polar plots do not support date angular axes yet.");for(var ae=0;ae<I.length;ae++)I[ae].visible=!1;$=P.type=j.type="linear"}F("linear"===$?"thetaunit":"period");var J=F("direction");F("rotation",{counterclockwise:0,clockwise:90}[J])}if(i(P,j,F,j.type,{tickSuffixDflt:"degrees"===j.thetaunit?"\xb0":void 0}),X){var ee,se,G,H,Y=M.font||{};se=(ee=F("color"))===P.color?ee:Y.color,G=Y.size,H=Y.family,o(P,j,F,j.type),l(P,j,F,j.type,{font:{color:se,size:G,family:H}}),a(P,j,F,{outerTicks:!0}),h(P,j,F,{dfltColor:ee,bgColor:M.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d[O]}),F("layer"),"radialaxis"===O&&(F("side"),F("angle",C[0]),F("title.text"),y.coerceFont(F,"title.font",{color:se,size:y.bigFont(G),family:H}))}"category"!==$&&F("hoverformat"),j._input=P}"category"===c.angularaxis.type&&E("gridshape")}function u(w,c,E,M,S,C){var O=E("autotypenumbers",C.autotypenumbersDflt);if("-"===E("type")){for(var I,N=0;N<M.length;N++)if(M[N].visible){I=M[N];break}I&&I[S]&&(c.type=s(I[S],"gregorian",{noMultiCategory:!0,autotypenumbers:O})),"-"===c.type?c.type="linear":w.type=c.type}return c.type}ue.exports=function(w,c,E){_(w,c,E,{type:f.name,attributes:d,handleDefaults:m,font:c.font,autotypenumbersDflt:c.autotypenumbers,paper_bgcolor:c.paper_bgcolor,fullData:E,layoutOut:c})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("tinycolor2"),T=x("../../registry"),_=x("../../lib"),e=_.strRotate,o=_.strTranslate,a=x("../../components/color"),l=x("../../components/drawing"),i=x("../plots"),v=x("../../plots/cartesian/axes"),h=x("../cartesian/set_convert"),s=x("./set_convert"),d=x("../cartesian/autorange").doAutoRange,p=x("../cartesian/dragbox"),f=x("../../components/dragelement"),g=x("../../components/fx"),m=x("../../components/titles"),u=x("../cartesian/select").prepSelect,w=x("../cartesian/select").selectOnClick,c=x("../cartesian/select").clearSelect,E=x("../../lib/setcursor"),M=x("../../lib/clear_gl_canvases"),S=x("../../plot_api/subroutines").redrawReglTraces,C=x("../../constants/alignment").MID_SHIFT,O=x("./constants"),I=x("./helpers"),N=x("../smith/helpers"),F=N.smith,L=N.reactanceArc,P=N.resistanceArc,j=N.smithTransform,U=_._,$=_.mod,X=_.deg2rad,te=_.rad2deg;function ae(H,Y,oe){this.isSmith=oe||!1,this.id=Y,this.gd=H,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var W=H._fullLayout;this.clipIds.forTraces="clip"+W._uid+Y+"-for-traces",this.clipPaths.forTraces=W._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=W["_"+(oe?"smith":"polar")+"layer"].append("g").attr("class",Y),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},oe||(this.radialTickLayout=null,this.angularTickLayout=null)}var J=ae.prototype;function ee(H){var Y=H.ticks+String(H.ticklen)+String(H.showticklabels);return"side"in H&&(Y+=H.side),Y}function se(H,Y){return Y[_.findIndexOfMin(Y,function(oe){return _.angleDist(H,oe)})]}function G(H,Y,oe){return Y?(H.attr("display",null),H.attr(oe)):H&&H.attr("display","none"),H}ue.exports=function(H,Y,oe){return new ae(H,Y,oe)},J.plot=function(H,Y){for(var oe=Y[this.id],W=!1,ne=0;ne<H.length;ne++)if(!1===H[ne][0].trace.cliponaxis){W=!0;break}this._hasClipOnAxisFalse=W,this.updateLayers(Y,oe),this.updateLayout(Y,oe),i.generalUpdatePerTraceModule(this.gd,this,H,oe),this.updateFx(Y,oe),this.isSmith&&(delete oe.realaxis.range,delete oe.imaginaryaxis.range)},J.updateLayers=function(H,Y){var oe=this.isSmith,W=this.layers,ne=this.getRadial(Y),re=this.getAngular(Y),ce=O.layerNames,fe=ce.indexOf("frontplot"),me=ce.slice(0,fe),pe="below traces"===re.layer,we="below traces"===ne.layer;pe&&me.push("angular-line"),we&&me.push("radial-line"),pe&&me.push("angular-axis"),we&&me.push("radial-axis"),me.push("frontplot"),pe||me.push("angular-line"),we||me.push("radial-line"),pe||me.push("angular-axis"),we||me.push("radial-axis");var ye=(oe?"smith":"polar")+"sublayer",Te=this.framework.selectAll("."+ye).data(me,String);Te.enter().append("g").attr("class",function(Le){return ye+" "+Le}).each(function(Le){var Oe=W[Le]=y.select(this);switch(Le){case"frontplot":oe||Oe.append("g").classed("barlayer",!0),Oe.append("g").classed("scatterlayer",!0);break;case"backplot":Oe.append("g").classed("maplayer",!0);break;case"plotbg":W.bg=Oe.append("path");break;case"radial-grid":case"angular-grid":Oe.style("fill","none");break;case"radial-line":Oe.append("line").style("fill","none");break;case"angular-line":Oe.append("path").style("fill","none")}}),Te.order()},J.updateLayout=function(H,Y){var oe=this.layers,W=H._size,ne=this.getRadial(Y),re=this.getAngular(Y),ce=Y.domain.x,fe=Y.domain.y;this.xOffset=W.l+W.w*ce[0],this.yOffset=W.t+W.h*(1-fe[1]);var me=this.xLength=W.w*(ce[1]-ce[0]),pe=this.yLength=W.h*(fe[1]-fe[0]),we=this.getSector(Y);this.sectorInRad=we.map(X);var ye,Te,Le,Oe,Re,Ct,ft,Bt,rn,un,pn,dn,Mn,ln,Ee,Ve=this.sectorBBox=(rn=(Ct=we)[1]-(Bt=Ct[0]),pn=(un=$(Bt,360))+rn,dn=Math.cos(X(un)),Mn=Math.sin(X(un)),ln=Math.cos(X(pn)),Ee=Math.sin(X(pn)),ft=un<=90&&pn>=90||un>90&&pn>=450?1:Mn<=0&&Ee<=0?0:Math.max(Mn,Ee),[un<=180&&pn>=180||un>180&&pn>=540?-1:dn>=0&&ln>=0?0:Math.min(dn,ln),un<=270&&pn>=270||un>270&&pn>=630?-1:Mn>=0&&Ee>=0?0:Math.min(Mn,Ee),pn>=360?1:dn<=0&&ln<=0?0:Math.max(dn,ln),ft]),_e=Ve[2]-Ve[0],Fe=pe/me,Pe=Math.abs((Ve[3]-Ve[1])/_e);Fe>Pe?(ye=me,Re=(pe-(Te=me*Pe))/W.h/2,Le=[ce[0],ce[1]],Oe=[fe[0]+Re,fe[1]-Re]):(Te=pe,Re=(me-(ye=pe/Pe))/W.w/2,Le=[ce[0]+Re,ce[1]-Re],Oe=[fe[0],fe[1]]),this.xLength2=ye,this.yLength2=Te,this.xDomain2=Le,this.yDomain2=Oe;var Be,qe=this.xOffset2=W.l+W.w*Le[0],We=this.yOffset2=W.t+W.h*(1-Oe[1]),Je=this.radius=ye/_e,ut=this.innerRadius=this.getHole(Y)*Je,Ge=this.cx=qe-Je*Ve[0],Ke=this.cy=We+Je*Ve[3],nt=this.cxx=Ge-qe,it=this.cyy=Ke-We,ht=ne.side;"counterclockwise"===ht?(Be=ht,ht="top"):"clockwise"===ht&&(Be=ht,ht="bottom"),this.radialAxis=this.mockAxis(H,Y,ne,{_id:"x",side:ht,_trueSide:Be,domain:[ut/W.w,Je/W.w]}),this.angularAxis=this.mockAxis(H,Y,re,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(H,Y),this.updateAngularAxis(H,Y),this.updateRadialAxis(H,Y),this.updateRadialAxisTitle(H,Y),this.xaxis=this.mockCartesianAxis(H,Y,{_id:"x",domain:Le}),this.yaxis=this.mockCartesianAxis(H,Y,{_id:"y",domain:Oe});var Tt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",Tt).attr("transform",o(nt,it)),oe.frontplot.attr("transform",o(qe,We)).call(l.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),oe.bg.attr("d",Tt).attr("transform",o(Ge,Ke)).call(a.fill,Y.bgcolor)},J.mockAxis=function(H,Y,oe,W){var ne=_.extendFlat({},oe,W);return s(ne,Y,H),ne},J.mockCartesianAxis=function(H,Y,oe){var W=this,ne=W.isSmith,re=oe._id,ce=_.extendFlat({type:"linear"},oe);h(ce,H);var fe={x:[0,2],y:[1,3]};return ce.setRange=function(){var me=W.sectorBBox,pe=fe[re],we=W.radialAxis._rl,ye=(we[1]-we[0])/(1-W.getHole(Y));ce.range=[me[pe[0]]*ye,me[pe[1]]*ye]},ce.isPtWithinRange="x"!==re||ne?function(){return!0}:function(me){return W.isPtInside(me)},ce.setRange(),ce.setScale(),ce},J.doAutoRange=function(H,Y){var oe=this.gd,W=this.radialAxis,ne=this.getRadial(Y);d(oe,W);var re=W.range;ne.range=re.slice(),ne._input.range=re.slice(),W._rl=[W.r2l(re[0],null,"gregorian"),W.r2l(re[1],null,"gregorian")]},J.updateRadialAxis=function(H,Y){var oe=this,W=oe.gd,ne=oe.layers,re=oe.radius,ce=oe.innerRadius,fe=oe.cx,me=oe.cy,pe=oe.getRadial(Y),we=$(oe.getSector(Y)[0],360),ye=oe.radialAxis,Te=ce<re,Le=oe.isSmith;Le||(oe.fillViewInitialKey("radialaxis.angle",pe.angle),oe.fillViewInitialKey("radialaxis.range",ye.range.slice()),ye.setGeometry()),"auto"===ye.tickangle&&we>90&&we<=270&&(ye.tickangle=180);var Oe=Le?function(Je){var ut=j(oe,F([Je.x,0]));return o(ut[0]-fe,ut[1]-me)}:function(Je){return o(ye.l2p(Je.x)+ce,0)},Re=Le?function(Je){return P(oe,Je.x,-1/0,1/0)}:function(Je){return oe.pathArc(ye.r2p(Je.x)+ce)},Ve=ee(pe);if(oe.radialTickLayout!==Ve&&(ne["radial-axis"].selectAll(".xtick").remove(),oe.radialTickLayout=Ve),Te){ye.setScale();var _e=0,Ae=Le?(ye.tickvals||[]).filter(function(Je){return Je>=0}).map(function(Je){return v.tickText(ye,Je,!0,!1)}):v.calcTicks(ye),Fe=Le?Ae:v.clipEnds(ye,Ae),Pe=v.getTickSigns(ye)[2];Le&&(("top"===ye.ticks&&"bottom"===ye.side||"bottom"===ye.ticks&&"top"===ye.side)&&(Pe=-Pe),"top"===ye.ticks&&"top"===ye.side&&(_e=-ye.ticklen),"bottom"===ye.ticks&&"bottom"===ye.side&&(_e=ye.ticklen)),v.drawTicks(W,ye,{vals:Ae,layer:ne["radial-axis"],path:v.makeTickPath(ye,0,Pe),transFn:Oe,crisp:!1}),v.drawGrid(W,ye,{vals:Fe,layer:ne["radial-grid"],path:Re,transFn:_.noop,crisp:!1}),v.drawLabels(W,ye,{vals:Ae,layer:ne["radial-axis"],transFn:Oe,labelFns:v.makeLabelFns(ye,_e)})}var Be=oe.radialAxisAngle=oe.vangles?te(se(X(pe.angle),oe.vangles)):pe.angle,qe=o(fe,me),We=qe+e(-Be);G(ne["radial-axis"],Te&&(pe.showticklabels||pe.ticks),{transform:We}),G(ne["radial-grid"],Te&&pe.showgrid,{transform:Le?"":qe}),G(ne["radial-line"].select("line"),Te&&pe.showline,{x1:Le?-re:ce,y1:0,x2:re,y2:0,transform:We}).attr("stroke-width",pe.linewidth).call(a.stroke,pe.linecolor)},J.updateRadialAxisTitle=function(H,Y,oe){if(!this.isSmith){var W=this.gd,ne=this.radius,re=this.cx,ce=this.cy,fe=this.getRadial(Y),me=this.id+"title",pe=0;if(fe.title){var we=l.bBox(this.layers["radial-axis"].node()).height,ye=fe.title.font.size,Te=fe.side;pe="top"===Te?ye:"counterclockwise"===Te?-(we+.4*ye):we+.8*ye}var Le=void 0!==oe?oe:this.radialAxisAngle,Oe=X(Le),Re=Math.cos(Oe),Ve=Math.sin(Oe),_e=re+ne/2*Re+pe*Ve,Ae=ce-ne/2*Ve+pe*Re;this.layers["radial-axis-title"]=m.draw(W,me,{propContainer:fe,propName:this.id+".radialaxis.title",placeholder:U(W,"Click to enter radial axis title"),attributes:{x:_e,y:Ae,"text-anchor":"middle"},transform:{rotate:-Le}})}},J.updateAngularAxis=function(H,Y){var oe=this,W=oe.gd,ne=oe.layers,re=oe.radius,ce=oe.innerRadius,fe=oe.cx,me=oe.cy,pe=oe.getAngular(Y),we=oe.angularAxis,ye=oe.isSmith;ye||(oe.fillViewInitialKey("angularaxis.rotation",pe.rotation),we.setGeometry(),we.setScale());var Te=ye?function(Je){var ut=j(oe,F([0,Je.x]));return Math.atan2(ut[0]-fe,ut[1]-me)-Math.PI/2}:function(Je){return we.t2g(Je.x)};"linear"===we.type&&"radians"===we.thetaunit&&(we.tick0=te(we.tick0),we.dtick=te(we.dtick));var Le=function(Je){return o(fe+re*Math.cos(Je),me-re*Math.sin(Je))},Oe=ye?function(Je){var ut=j(oe,F([0,Je.x]));return o(ut[0],ut[1])}:function(Je){return Le(Te(Je))},Re=ye?function(Je){var ut=j(oe,F([0,Je.x])),Ge=Math.atan2(ut[0]-fe,ut[1]-me)-Math.PI/2;return o(ut[0],ut[1])+e(-te(Ge))}:function(Je){var ut=Te(Je);return Le(ut)+e(-te(ut))},Ve=ye?function(Je){return L(oe,Je.x,0,1/0)}:function(Je){var ut=Te(Je),Ge=Math.cos(ut),Ke=Math.sin(ut);return"M"+[fe+ce*Ge,me-ce*Ke]+"L"+[fe+re*Ge,me-re*Ke]},_e=v.makeLabelFns(we,0).labelStandoff,Ae={xFn:function(Je){var ut=Te(Je);return Math.cos(ut)*_e},yFn:function(Je){var ut=Te(Je),Ge=Math.sin(ut)>0?.2:1;return-Math.sin(ut)*(_e+Je.fontSize*Ge)+Math.abs(Math.cos(ut))*(Je.fontSize*C)},anchorFn:function(Je){var ut=Te(Je),Ge=Math.cos(ut);return Math.abs(Ge)<.1?"middle":Ge>0?"start":"end"},heightFn:function(Je,ut,Ge){var Ke=Te(Je);return-.5*(1+Math.sin(Ke))*Ge}},Fe=ee(pe);oe.angularTickLayout!==Fe&&(ne["angular-axis"].selectAll("."+we._id+"tick").remove(),oe.angularTickLayout=Fe);var Pe,Be=ye?[1/0].concat(we.tickvals||[]).map(function(Je){return v.tickText(we,Je,!0,!1)}):v.calcTicks(we);if(ye&&(Be[0].text="\u221e",Be[0].fontSize*=1.75),"linear"===Y.gridshape?(Pe=Be.map(Te),_.angleDelta(Pe[0],Pe[1])<0&&(Pe=Pe.slice().reverse())):Pe=null,oe.vangles=Pe,"category"===we.type&&(Be=Be.filter(function(Je){return _.isAngleInsideSector(Te(Je),oe.sectorInRad)})),we.visible){var qe="inside"===we.ticks?-1:1;v.drawTicks(W,we,{vals:Be,layer:ne["angular-axis"],path:"M"+qe*((we.linewidth||1)/2)+",0h"+qe*we.ticklen,transFn:Re,crisp:!1}),v.drawGrid(W,we,{vals:Be,layer:ne["angular-grid"],path:Ve,transFn:_.noop,crisp:!1}),v.drawLabels(W,we,{vals:Be,layer:ne["angular-axis"],repositionOnUpdate:!0,transFn:Oe,labelFns:Ae})}G(ne["angular-line"].select("path"),pe.showline,{d:oe.pathSubplot(),transform:o(fe,me)}).attr("stroke-width",pe.linewidth).call(a.stroke,pe.linecolor)},J.updateFx=function(H,Y){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(H),this.updateRadialDrag(H,Y,0),this.updateRadialDrag(H,Y,1)),this.updateHoverAndMainDrag(H))},J.updateHoverAndMainDrag=function(H){var Y,oe,W=this,ne=W.isSmith,re=W.gd,fe=H._zoomlayer,me=O.MINZOOM,pe=O.OFFEDGE,we=W.radius,ye=W.innerRadius,Te=W.cx,Le=W.cy,Oe=W.cxx,Re=W.cyy,Ve=W.sectorInRad,_e=W.vangles,Ae=W.radialAxis,Fe=I.clampTiny,Pe=I.findXYatLength,Be=I.findEnclosingVertexAngles,qe=O.cornerHalfWidth,We=O.cornerLen/2,Je=p.makeDragger(W.layers,"path","maindrag",!1===H.dragmode?"none":"crosshair");y.select(Je).attr("d",W.pathSubplot()).attr("transform",o(Te,Le)),Je.onmousemove=function(tt){g.hover(re,tt,W.id),re._fullLayout._lasthover=Je,re._fullLayout._hoversubplot=W.id},Je.onmouseout=function(tt){re._dragging||f.unhover(re,tt)};var ut,Ge,Ke,nt,it,ht,Tt,Ct,Vt,Ft={element:Je,gd:re,subplot:W.id,plotinfo:{id:W.id,xaxis:W.xaxis,yaxis:W.yaxis},xaxes:[W.xaxis],yaxes:[W.yaxis]};function gt(tt,ot){return Math.sqrt(tt*tt+ot*ot)}function ft(tt,ot){return gt(tt-Oe,ot-Re)}function Bt(tt,ot){return Math.atan2(Re-ot,tt-Oe)}function rn(tt,ot){return[tt*Math.cos(ot),tt*Math.sin(-ot)]}function un(tt,ot){if(0===tt)return W.pathSector(2*qe);var st=We/tt,bt=ot-st,wt=ot+st,Ut=Math.max(0,Math.min(tt,we)),Kt=Ut-qe,vt=Ut+qe;return"M"+rn(Kt,bt)+"A"+[Kt,Kt]+" 0,0,0 "+rn(Kt,wt)+"L"+rn(vt,wt)+"A"+[vt,vt]+" 0,0,1 "+rn(vt,bt)+"Z"}function pn(tt,ot,st){if(0===tt)return W.pathSector(2*qe);var bt,wt,Ut=rn(tt,ot),Kt=rn(tt,st),vt=Fe((Ut[0]+Kt[0])/2),Et=Fe((Ut[1]+Kt[1])/2);if(vt&&Et){var $t=Et/vt,Dt=-1/$t,Pt=Pe(qe,$t,vt,Et);bt=Pe(We,Dt,Pt[0][0],Pt[0][1]),wt=Pe(We,Dt,Pt[1][0],Pt[1][1])}else{var je,rt;Et?(je=We,rt=qe):(je=qe,rt=We),bt=[[vt-je,Et-rt],[vt+je,Et-rt]],wt=[[vt-je,Et+rt],[vt+je,Et+rt]]}return"M"+bt.join("L")+"L"+wt.reverse().join("L")+"Z"}function dn(tt,ot){return ot=Math.max(Math.min(ot,we),ye),tt<pe?tt=0:we-tt<pe?tt=we:ot<pe?ot=0:we-ot<pe&&(ot=we),Math.abs(ot-tt)>me?(tt<ot?(Ke=tt,nt=ot):(Ke=ot,nt=tt),!0):(Ke=null,nt=null,!1)}function Mn(tt,ot){ot=ot||"M0,0Z",Ct.attr("d",tt=tt||it),Vt.attr("d",ot),p.transitionZoombox(Ct,Vt,ht,Tt),ht=!0;var st={};He(st),re.emit("plotly_relayouting",st)}function ln(tt,ot){var st,bt,wt=ut+(tt*=Y),Ut=Ge+(ot*=oe),Kt=ft(ut,Ge),vt=Math.min(ft(wt,Ut),we),Et=Bt(ut,Ge);dn(Kt,vt)&&(st=it+W.pathSector(nt),Ke&&(st+=W.pathSector(Ke)),bt=un(Ke,Et)+un(nt,Et)),Mn(st,bt)}function Ee(tt,ot,st,bt){var wt=I.findIntersectionXY(st,bt,st,[tt-Oe,Re-ot]);return gt(wt[0],wt[1])}function De(tt,ot){var st,bt,wt=ut+tt,Ut=Ge+ot,Kt=Bt(ut,Ge),vt=Bt(wt,Ut),Et=Be(Kt,_e),$t=Be(vt,_e);dn(Ee(ut,Ge,Et[0],Et[1]),Math.min(Ee(wt,Ut,$t[0],$t[1]),we))&&(st=it+W.pathSector(nt),Ke&&(st+=W.pathSector(Ke)),bt=[pn(Ke,Et[0],Et[1]),pn(nt,Et[0],Et[1])].join(" ")),Mn(st,bt)}function Ie(){if(p.removeZoombox(re),null!==Ke&&null!==nt){var tt={};He(tt),p.showDoubleClickNotifier(re),T.call("_guiRelayout",re,tt)}}function He(tt){var ot=Ae._rl,st=(ot[1]-ot[0])/(1-ye/we)/we;tt[W.id+".radialaxis.range"]=[ot[0]+(Ke-ye)*st,ot[0]+(nt-ye)*st]}function Ye(tt,ot){var st=re._fullLayout.clickmode;if(p.removeZoombox(re),2===tt){var bt={};for(var wt in W.viewInitial)bt[W.id+"."+wt]=W.viewInitial[wt];re.emit("plotly_doubleclick",null),T.call("_guiRelayout",re,bt)}st.indexOf("select")>-1&&1===tt&&w(ot,re,[W.xaxis],[W.yaxis],W.id,Ft),st.indexOf("event")>-1&&g.click(re,ot,W.id)}Ft.prepFn=function(tt,ot,st){var bt=re._fullLayout.dragmode,wt=Je.getBoundingClientRect();re._fullLayout._calcInverseTransform(re),Y=re._fullLayout._invScaleX,oe=re._fullLayout._invScaleY;var Kt=_.apply3DTransform(re._fullLayout._invTransform)(ot-wt.left,st-wt.top);if(ut=Kt[0],Ge=Kt[1],_e){var vt=I.findPolygonOffset(we,Ve[0],Ve[1],_e);ut+=Oe+vt[0],Ge+=Re+vt[1]}switch(bt){case"zoom":Ft.clickFn=Ye,ne||(Ft.moveFn=_e?De:ln,Ft.doneFn=Ie,Ke=null,nt=null,it=W.pathSubplot(),ht=!1,Tt=b(re._fullLayout[W.id].bgcolor).getLuminance(),(Ct=p.makeZoombox(fe,Tt,Te,Le,it)).attr("fill-rule","evenodd"),Vt=p.makeCorners(fe,Te,Le),c(re));break;case"select":case"lasso":u(tt,ot,st,Ft,bt)}},f.init(Ft)},J.updateRadialDrag=function(H,Y,oe){var W=this,ne=W.gd,re=W.layers,ce=W.radius,fe=W.innerRadius,me=W.cx,pe=W.cy,we=W.radialAxis,ye=O.radialDragBoxSize,Te=ye/2;if(we.visible){var Le,Oe,Re,Ve=X(W.radialAxisAngle),_e=we._rl,Ae=_e[0],Fe=_e[1],Pe=_e[oe],Be=.75*(_e[1]-_e[0])/(1-W.getHole(Y))/ce;oe?(Le=me+(ce+Te)*Math.cos(Ve),Oe=pe-(ce+Te)*Math.sin(Ve),Re="radialdrag"):(Le=me+(fe-Te)*Math.cos(Ve),Oe=pe-(fe-Te)*Math.sin(Ve),Re="radialdrag-inner");var qe,We,Je,ut=p.makeRectDragger(re,Re,"crosshair",-Te,-Te,ye,ye),Ge={element:ut,gd:ne};!1===H.dragmode&&(Ge.dragmode=!1),G(y.select(ut),we.visible&&fe<ce,{transform:o(Le,Oe)}),Ge.prepFn=function(){qe=null,We=null,Je=null,Ge.moveFn=Ke,Ge.doneFn=nt,c(ne)},Ge.clampFn=function(Tt,Ct){return Math.sqrt(Tt*Tt+Ct*Ct)<O.MINDRAG&&(Tt=0,Ct=0),[Tt,Ct]},f.init(Ge)}function Ke(Tt,Ct){if(qe)qe(Tt,Ct);else{var Vt=[Tt,-Ct],Ft=[Math.cos(Ve),Math.sin(Ve)],gt=Math.abs(_.dot(Vt,Ft)/Math.sqrt(_.dot(Vt,Vt)));isNaN(gt)||(qe=gt<.5?it:ht)}var Bt,ft={};Bt=ft,null!==We?Bt[W.id+".radialaxis.angle"]=We:null!==Je&&(Bt[W.id+".radialaxis.range["+oe+"]"]=Je),ne.emit("plotly_relayouting",ft)}function nt(){null!==We?T.call("_guiRelayout",ne,W.id+".radialaxis.angle",We):null!==Je&&T.call("_guiRelayout",ne,W.id+".radialaxis.range["+oe+"]",Je)}function it(Tt,Ct){if(0!==oe){We=Math.atan2(pe-(Oe+Ct),Le+Tt-me),W.vangles&&(We=se(We,W.vangles)),We=te(We);var gt=o(me,pe)+e(-We);re["radial-axis"].attr("transform",gt),re["radial-line"].select("line").attr("transform",gt);var ft=W.gd._fullLayout;W.updateRadialAxisTitle(ft,ft[W.id],We)}}function ht(Tt,Ct){var Vt=_.dot([Tt,-Ct],[Math.cos(Ve),Math.sin(Ve)]);if(Je=Pe-Be*Vt,Be>0==(oe?Je>Ae:Je<Fe)){var Ft=ne._fullLayout,gt=Ft[W.id];we.range[oe]=Je,we._rl[oe]=Je,W.updateRadialAxis(Ft,gt),W.xaxis.setRange(),W.xaxis.setScale(),W.yaxis.setRange(),W.yaxis.setScale();var ft=!1;for(var Bt in W.traceHash){var rn=W.traceHash[Bt],un=_.filterVisible(rn);rn[0][0].trace._module.plot(ne,W,un,gt),T.traceIs(Bt,"gl")&&un.length&&(ft=!0)}ft&&(M(ne),S(ne))}else Je=null}},J.updateAngularDrag=function(H){var Y=this,oe=Y.gd,W=Y.layers,ne=Y.radius,re=Y.angularAxis,ce=Y.cx,fe=Y.cy,me=Y.cxx,pe=Y.cyy,we=O.angularDragBoxSize,ye=p.makeDragger(W,"path","angulardrag",!1===H.dragmode?"none":"move"),Te={element:ye,gd:oe};function Le(Ge,Ke){return Math.atan2(pe+we-Ke,Ge-me-we)}!1===H.dragmode?Te.dragmode=!1:y.select(ye).attr("d",Y.pathAnnulus(ne,ne+we)).attr("transform",o(ce,fe)).call(E,"move");var Oe,Re,Ve,_e,Ae,Fe,Pe=W.frontplot.select(".scatterlayer").selectAll(".trace"),Be=Pe.selectAll(".point"),qe=Pe.selectAll(".textpoint");function We(Ge,Ke){var nt=Y.gd._fullLayout,it=nt[Y.id],ht=Le(Oe+Ge*H._invScaleX,Re+Ke*H._invScaleY),Tt=te(ht-Fe);if(_e=Ve+Tt,W.frontplot.attr("transform",o(Y.xOffset2,Y.yOffset2)+e([-Tt,me,pe])),Y.vangles){Ae=Y.radialAxisAngle+Tt;var Ct=o(ce,fe)+e(-Tt),Vt=o(ce,fe)+e(-Ae);W.bg.attr("transform",Ct),W["radial-grid"].attr("transform",Ct),W["radial-axis"].attr("transform",Vt),W["radial-line"].select("line").attr("transform",Vt),Y.updateRadialAxisTitle(nt,it,Ae)}else Y.clipPaths.forTraces.select("path").attr("transform",o(me,pe)+e(Tt));Be.each(function(){var un=y.select(this),pn=l.getTranslate(un);un.attr("transform",o(pn.x,pn.y)+e([Tt]))}),qe.each(function(){var un=y.select(this),pn=un.select("text"),dn=l.getTranslate(un);un.attr("transform",e([Tt,pn.attr("x"),pn.attr("y")])+o(dn.x,dn.y))}),re.rotation=_.modHalf(_e,360),Y.updateAngularAxis(nt,it),Y._hasClipOnAxisFalse&&!_.isFullCircle(Y.sectorInRad)&&Pe.call(l.hideOutsideRangePoints,Y);var Ft=!1;for(var gt in Y.traceHash)if(T.traceIs(gt,"gl")){var ft=Y.traceHash[gt],Bt=_.filterVisible(ft);ft[0][0].trace._module.plot(oe,Y,Bt,it),Bt.length&&(Ft=!0)}Ft&&(M(oe),S(oe));var rn={};Je(rn),oe.emit("plotly_relayouting",rn)}function Je(Ge){Ge[Y.id+".angularaxis.rotation"]=_e,Y.vangles&&(Ge[Y.id+".radialaxis.angle"]=Ae)}function ut(){qe.select("text").attr("transform",null);var Ge={};Je(Ge),T.call("_guiRelayout",oe,Ge)}Te.prepFn=function(Ge,Ke,nt){Ve=H[Y.id].angularaxis.rotation;var ht=ye.getBoundingClientRect();Oe=Ke-ht.left,Re=nt-ht.top,oe._fullLayout._calcInverseTransform(oe);var Tt=_.apply3DTransform(H._invTransform)(Oe,Re);Fe=Le(Oe=Tt[0],Re=Tt[1]),Te.moveFn=We,Te.doneFn=ut,c(oe)},Y.vangles&&!_.isFullCircle(Y.sectorInRad)&&(Te.prepFn=_.noop,E(y.select(ye),null)),f.init(Te)},J.isPtInside=function(H){if(this.isSmith)return!0;var Y=this.sectorInRad,oe=this.vangles,W=this.angularAxis.c2g(H.theta),ne=this.radialAxis,re=ne.c2l(H.r);return(oe?I.isPtInsidePolygon:_.isPtInsideSector)(re,W,ne._rl,Y,oe)},J.pathArc=function(H){var Y=this.sectorInRad,oe=this.vangles;return(oe?I.pathPolygon:_.pathArc)(H,Y[0],Y[1],oe)},J.pathSector=function(H){var Y=this.sectorInRad,oe=this.vangles;return(oe?I.pathPolygon:_.pathSector)(H,Y[0],Y[1],oe)},J.pathAnnulus=function(H,Y){var oe=this.sectorInRad,W=this.vangles;return(W?I.pathPolygonAnnulus:_.pathAnnulus)(H,Y,oe[0],oe[1],W)},J.pathSubplot=function(){var H=this.innerRadius,Y=this.radius;return H?this.pathAnnulus(H,Y):this.pathSector(Y)},J.fillViewInitialKey=function(H,Y){H in this.viewInitial||(this.viewInitial[H]=Y)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../cartesian/set_convert"),T=y.deg2rad,_=y.rad2deg;ue.exports=function(e,o,a){switch(b(e,a),e._id){case"x":case"radialaxis":v=o._subplot,(l=e).setGeometry=function(){var h=l._rl[0],s=l._rl[1],d=v.innerRadius,p=(v.radius-d)/(s-h),f=d/p,g=h>s?function(m){return m<=0}:function(m){return m>=0};l.c2g=function(m){var u=l.c2l(m)-h;return(g(u)?u:0)+f},l.g2c=function(m){return l.l2c(m+h-f)},l.g2p=function(m){return m*p},l.c2p=function(m){return l.g2p(l.c2g(m))}};break;case"angularaxis":!function(l,i){var v=l.type;if("linear"===v){var h=l.d2c,s=l.c2d;l.d2c=function(d,p){return f=h(d),"degrees"===p?T(f):f;var f},l.c2d=function(d,p){return s((f=d,"degrees"===p?_(f):f));var f}}l.makeCalcdata=function(d,p){var f,g,m=d[p],u=d._length,w=function(C){return l.d2c(C,d.thetaunit)};if(m){if(y.isTypedArray(m)&&"linear"===v){if(u===m.length)return m;if(m.subarray)return m.subarray(0,u)}for(f=new Array(u),g=0;g<u;g++)f[g]=w(m[g])}else{var c=p+"0",E="d"+p,M=c in d?w(d[c]):0,S=d[E]?w(d[E]):(l.period||2*Math.PI)/u;for(f=new Array(u),g=0;g<u;g++)f[g]=M+g*S}return f},l.setGeometry=function(){var d,p,f,g,m=i.sector,u=m.map(T),w={clockwise:-1,counterclockwise:1}[l.direction],c=T(l.rotation),E=function(O){return w*O+c},M=function(O){return(O-c)/w};switch(v){case"linear":p=d=y.identity,g=T,f=_,l.range=y.isFullCircle(u)?[m[0],m[0]+360]:u.map(M).map(_);break;case"category":var S=l._categories.length,C=l.period?Math.max(l.period,S):S;0===C&&(C=1),p=g=function(O){return 2*O*Math.PI/C},d=f=function(O){return O*C/Math.PI/2},l.range=[0,C]}l.c2g=function(O){return E(p(O))},l.g2c=function(O){return d(M(O))},l.t2g=function(O){return E(g(O))},l.g2t=function(O){return f(M(O))}}}(e,o)}var l,v}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(x,ue,le){"use strict";ue.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(x,ue,le){"use strict";function y(e){return e<0?-1:e>0?1:0}function b(e){var o=e[0],a=e[1];if(!isFinite(o)||!isFinite(a))return[1,0];var l=(o+1)*(o+1)+a*a;return[(o*o+a*a-1)/l,2*a/l]}function T(e,o){return[o[0]*e.radius+e.cx,-o[1]*e.radius+e.cy]}function _(e,o){return o*e.radius}ue.exports={smith:b,reactanceArc:function(e,o,a,l){var i=T(e,b([a,o])),v=i[0],h=i[1],s=T(e,b([l,o])),d=s[0],p=s[1];if(0===o)return["M"+v+","+h,"L"+d+","+p].join(" ");var f=_(e,1/Math.abs(o));return["M"+v+","+h,"A"+f+","+f+" 0 0,"+(o<0?1:0)+" "+d+","+p].join(" ")},resistanceArc:function(e,o,a,l){var i=_(e,1/(o+1)),v=T(e,b([o,a])),h=v[0],s=v[1],d=T(e,b([o,l])),p=d[0],f=d[1];if(y(a)!==y(l)){var g=T(e,b([o,0]));return["M"+h+","+s,"A"+i+","+i+" 0 0,"+(0<a?0:1)+" "+g[0]+","+g[1],"A"+i+","+i+" 0 0,"+(l<0?0:1)+p+","+f].join(" ")}return["M"+h+","+s,"A"+i+","+i+" 0 0,"+(l<a?0:1)+" "+p+","+f].join(" ")},smithTransform:T}},{}],629:[function(x,ue,le){"use strict";var y=x("../get_data").getSubplotCalcData,b=x("../../lib").counterRegex,T=x("../polar/polar"),_=x("./constants"),e=_.attr,o=_.name,a=b(o),l={};l[e]={valType:"subplotid",dflt:o,editType:"calc"},ue.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:l,layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),plot:function(i){for(var v=i._fullLayout,h=i.calcdata,s=v._subplots[o],d=0;d<s.length;d++){var p=s[d],f=y(h,o,p),g=v[p]._subplot;g||(g=T(i,p,!0),v[p]._subplot=g),g.plot(f,v,i._promises)}},clean:function(i,v,h,s){for(var d=s._subplots[o]||[],p=0;p<d.length;p++){var f=d[p],g=s[f]._subplot;if(!v[f]&&g)for(var m in g.framework.remove(),g.clipPaths)g.clipPaths[m].remove()}},toSVG:x("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(x,ue,le){"use strict";var y=x("../../components/color/attributes"),b=x("../cartesian/layout_attributes"),T=x("../domain").attributes,_=x("../../lib").extendFlat,e=x("../../plot_api/edit_types").overrideAll,o=e({color:b.color,showline:_({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:_({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,griddash:b.griddash},"plot","from-root"),a=e({ticklen:b.ticklen,tickwidth:_({},b.tickwidth,{dflt:2}),tickcolor:b.tickcolor,showticklabels:b.showticklabels,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,tickfont:b.tickfont,tickformat:b.tickformat,hoverformat:b.hoverformat,layer:b.layer},"plot","from-root"),l=_({visible:_({},b.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:_({},b.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},o,a),i=_({visible:_({},b.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:b.ticks,editType:"calc"},o,a);ue.exports={domain:T({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:y.background},realaxis:l,imaginaryaxis:i,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(x,ue,le){"use strict";var y,b,T,_=x("../../lib"),e=x("../../components/color"),o=x("../../plot_api/plot_template"),a=x("../subplot_defaults"),l=x("../get_data").getSubplotData,i=x("../cartesian/prefix_suffix_defaults"),v=x("../cartesian/tick_label_defaults"),h=x("../cartesian/line_grid_defaults"),s=x("../cartesian/set_convert"),d=x("./layout_attributes"),p=x("./constants"),f=p.axisNames,g=(y=function(u){return u.slice().reverse().map(function(w){return-w}).concat([0]).concat(u)},b=String,T={},function(u){var w=b?b(u):u;if(w in T)return T[w];var c=y(u);return T[w]=c,c});function m(u,w,c,E){var M=c("bgcolor");E.bgColor=e.combine(M,E.paper_bgcolor);var S,C=l(E.fullData,p.name,E.id),O=E.layoutOut;function I(J,ee){return c(S+"."+J,ee)}for(var N=0;N<f.length;N++){_.isPlainObject(u[S=f[N]])||(u[S]={});var F=u[S],L=o.newContainer(w,S);L._id=L._name=S,L._attr=E.id+"."+S,L._traceIndices=C.map(function(J){return J._expandedIndex});var P=I("visible");if(L.type="linear",s(L,O),i(F,L,I,L.type),P){var j,U,$,X,te="realaxis"===S;te&&I("side"),te?I("tickvals"):I("tickvals",g(w.realaxis.tickvals||d.realaxis.tickvals.dflt));var ae=E.font||{};P&&(U=(j=I("color"))===F.color?j:ae.color,$=ae.size,X=ae.family),v(F,L,I,L.type,{noTicklabelstep:!0,noAng:!te,noExp:!0,font:{color:U,size:$,family:X}}),_.coerce2(u,w,d,S+".ticklen"),_.coerce2(u,w,d,S+".tickwidth"),_.coerce2(u,w,d,S+".tickcolor",w.color),I("ticks")||(delete w[S].ticklen,delete w[S].tickwidth,delete w[S].tickcolor),h(F,L,I,{dfltColor:j,bgColor:E.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d[S]}),I("layer")}I("hoverformat"),delete L.type,L._input=F}}ue.exports=function(u,w,c){a(u,w,c,{noUirevision:!0,type:p.name,attributes:d,handleDefaults:m,font:w.font,paper_bgcolor:w.paper_bgcolor,fullData:c,layoutOut:w})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("../plot_api/plot_template"),T=x("./domain").defaults;ue.exports=function(_,e,o,a){var l,i,h=a.attributes,s=a.handleDefaults,d=a.partition||"x",p=e._subplots[a.type],f=p.length,g=f&&p[0].replace(/\d+$/,"");function m(E,M){return y.coerce(l,i,h,E,M)}for(var u=0;u<f;u++){var w=p[u];l=_[w]?_[w]:_[w]={},i=b.newContainer(e,w,g),a.noUirevision||m("uirevision",e.uirevision);var c={};c[d]=[u/f,(u+1)/f],T(i,e,m,c),a.id=w,s(l,i,m,a)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(x,ue,le){"use strict";function b(T){var _=T.description?" "+T.description:"",e=T.keys||[];if(e.length>0){for(var o=[],a=0;a<e.length;a++)o[a]="`"+e[a]+"`";_+="Finally, the template string has access to ",_=1===e.length?"variable "+o[0]:"variables "+o.slice(0,-1).join(", ")+" and "+o.slice(-1)+"."}return _}x("../constants/docs"),le.hovertemplateAttrs=function(T,_){T=T||{},b(_=_||{});var e={valType:"string",dflt:"",editType:T.editType||"none"};return!1!==T.arrayOk&&(e.arrayOk=!0),e},le.texttemplateAttrs=function(T,_){T=T||{},b(_=_||{});var e={valType:"string",dflt:"",editType:T.editType||"calc"};return!1!==T.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(x,ue,le){"use strict";var y=x("./ternary"),b=x("../../plots/get_data").getSubplotCalcData,T=x("../../lib").counterRegex;le.name="ternary";var _=le.attr="subplot";le.idRoot="ternary",le.idRegex=le.attrRegex=T("ternary"),(le.attributes={})[_]={valType:"subplotid",dflt:"ternary",editType:"calc"},le.layoutAttributes=x("./layout_attributes"),le.supplyLayoutDefaults=x("./layout_defaults"),le.plot=function(e){for(var o=e._fullLayout,a=e.calcdata,l=o._subplots.ternary,i=0;i<l.length;i++){var v=l[i],h=b(a,"ternary",v),s=o[v]._subplot;s||(s=new y({id:v,graphDiv:e,container:o._ternarylayer.node()},o),o[v]._subplot=s),s.plot(h,o,e._promises)}},le.clean=function(e,o,a,l){for(var i=l._subplots.ternary||[],v=0;v<i.length;v++){var h=i[v],s=l[h]._subplot;!o[h]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(x,ue,le){"use strict";var y=x("../../components/color/attributes"),b=x("../domain").attributes,T=x("../cartesian/layout_attributes"),_=x("../../plot_api/edit_types").overrideAll,e=x("../../lib/extend").extendFlat,o={title:{text:T.title.text,font:T.title.font},color:T.color,tickmode:T.tickmode,nticks:e({},T.nticks,{dflt:6,min:1}),tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:T.ticks,ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,ticklabelstep:T.ticklabelstep,showticklabels:T.showticklabels,showtickprefix:T.showtickprefix,tickprefix:T.tickprefix,showticksuffix:T.showticksuffix,ticksuffix:T.ticksuffix,showexponent:T.showexponent,exponentformat:T.exponentformat,minexponent:T.minexponent,separatethousands:T.separatethousands,tickfont:T.tickfont,tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,hoverformat:T.hoverformat,showline:e({},T.showline,{dflt:!0}),linecolor:T.linecolor,linewidth:T.linewidth,showgrid:e({},T.showgrid,{dflt:!0}),gridcolor:T.gridcolor,gridwidth:T.gridwidth,griddash:T.griddash,layer:T.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:T._deprecated.title,titlefont:T._deprecated.titlefont}},a=ue.exports=_({domain:b({name:"ternary"}),bgcolor:{valType:"color",dflt:y.background},sum:{valType:"number",dflt:1,min:0},aaxis:o,baxis:o,caxis:o},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(x,ue,le){"use strict";var y=x("../../components/color"),b=x("../../plot_api/plot_template"),T=x("../../lib"),_=x("../subplot_defaults"),e=x("../cartesian/tick_label_defaults"),o=x("../cartesian/prefix_suffix_defaults"),a=x("../cartesian/tick_mark_defaults"),l=x("../cartesian/tick_value_defaults"),i=x("../cartesian/line_grid_defaults"),v=x("./layout_attributes"),h=["aaxis","baxis","caxis"];function s(p,f,g,m){var u,w,c,E=g("bgcolor"),M=g("sum");m.bgColor=y.combine(E,m.paper_bgcolor);for(var S=0;S<h.length;S++)w=p[u=h[S]]||{},(c=b.newContainer(f,u))._name=u,d(w,c,m,f);var C=f.aaxis,O=f.baxis,I=f.caxis;C.min+O.min+I.min>=M&&(C.min=0,O.min=0,I.min=0,p.aaxis&&delete p.aaxis.min,p.baxis&&delete p.baxis.min,p.caxis&&delete p.caxis.min)}function d(p,f,g,m){var u=v[f._name];function w(O,I){return T.coerce(p,f,u,O,I)}w("uirevision",m.uirevision),f.type="linear";var c=w("color"),E=c!==u.color.dflt?c:g.font.color,M=f._name.charAt(0).toUpperCase(),S="Component "+M,C=w("title.text",S);f._hovertitle=C===S?C:M,T.coerceFont(w,"title.font",{family:g.font.family,size:T.bigFont(g.font.size),color:E}),w("min"),l(p,f,w,"linear"),o(p,f,w,"linear"),e(p,f,w,"linear"),a(p,f,w,{outerTicks:!0}),w("showticklabels")&&(T.coerceFont(w,"tickfont",{family:g.font.family,size:g.font.size,color:E}),w("tickangle"),w("tickformat")),i(p,f,w,{dfltColor:c,bgColor:g.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u}),w("hoverformat"),w("layer")}ue.exports=function(p,f,g){_(p,f,g,{type:"ternary",attributes:v,handleDefaults:s,font:f.font,paper_bgcolor:f.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("tinycolor2"),T=x("../../registry"),_=x("../../lib"),e=_.strTranslate,o=_._,a=x("../../components/color"),l=x("../../components/drawing"),i=x("../cartesian/set_convert"),v=x("../../lib/extend").extendFlat,h=x("../plots"),s=x("../cartesian/axes"),d=x("../../components/dragelement"),p=x("../../components/fx"),f=x("../../components/dragelement/helpers"),g=f.freeMode,m=f.rectMode,u=x("../../components/titles"),w=x("../cartesian/select").prepSelect,c=x("../cartesian/select").selectOnClick,E=x("../cartesian/select").clearSelect,M=x("../cartesian/select").clearSelectionsCache,S=x("../cartesian/constants");function C($,X){this.id=$.id,this.graphDiv=$.graphDiv,this.init(X),this.makeFramework(X),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ue.exports=C;var O=C.prototype;O.init=function($){this.container=$._ternarylayer,this.defs=$._defs,this.layoutId=$._uid,this.traceHash={},this.layers={}},O.plot=function($,X){var te=X[this.id],ae=X._size;this._hasClipOnAxisFalse=!1;for(var J=0;J<$.length;J++)if(!1===$[J][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(te),this.adjustLayout(te,ae),h.generalUpdatePerTraceModule(this.graphDiv,this,$,te),this.layers.plotbg.select("path").call(a.fill,te.bgcolor)},O.makeFramework=function($){var X=this.graphDiv,te=$[this.id],ae=this.clipId="clip"+this.layoutId+this.id,J=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=_.ensureSingleById($._clips,"clipPath",ae,function(ee){ee.append("path").attr("d","M0,0Z")}),this.clipDefRelative=_.ensureSingleById($._clips,"clipPath",J,function(ee){ee.append("path").attr("d","M0,0Z")}),this.plotContainer=_.ensureSingle(this.container,"g",this.id),this.updateLayers(te),l.setClipUrl(this.layers.backplot,ae,X),l.setClipUrl(this.layers.grids,ae,X)},O.updateLayers=function($){var X=this.layers,te=["draglayer","plotbg","backplot","grids"];"below traces"===$.aaxis.layer&&te.push("aaxis","aline"),"below traces"===$.baxis.layer&&te.push("baxis","bline"),"below traces"===$.caxis.layer&&te.push("caxis","cline"),te.push("frontplot"),"above traces"===$.aaxis.layer&&te.push("aaxis","aline"),"above traces"===$.baxis.layer&&te.push("baxis","bline"),"above traces"===$.caxis.layer&&te.push("caxis","cline");var ae=this.plotContainer.selectAll("g.toplevel").data(te,String),J=["agrid","bgrid","cgrid"];ae.enter().append("g").attr("class",function(ee){return"toplevel "+ee}).each(function(ee){var se=y.select(this);X[ee]=se,"frontplot"===ee?se.append("g").classed("scatterlayer",!0):"backplot"===ee?se.append("g").classed("maplayer",!0):"plotbg"===ee?se.append("path").attr("d","M0,0Z"):"aline"===ee||"bline"===ee||"cline"===ee?se.append("path"):"grids"===ee&&J.forEach(function(G){X[G]=se.append("g").classed("grid "+G,!0)})}),ae.order()};var I=Math.sqrt(4/3);O.adjustLayout=function($,X){var te,ae,J,ee,se,G,H=this,Y=$.domain,oe=(Y.x[0]+Y.x[1])/2,W=(Y.y[0]+Y.y[1])/2,ne=Y.x[1]-Y.x[0],re=Y.y[1]-Y.y[0],ce=ne*X.w,fe=re*X.h,me=$.sum,pe=$.aaxis.min,we=$.baxis.min,ye=$.caxis.min;ce>I*fe?J=(ee=fe)*I:ee=(J=ce)/I,se=ne*J/ce,G=re*ee/fe,ae=X.t+X.h*(1-W)-ee/2,H.x0=te=X.l+X.w*oe-J/2,H.y0=ae,H.w=J,H.h=ee,H.sum=me,H.xaxis={type:"linear",range:[pe+2*ye-me,me-pe-2*we],domain:[oe-se/2,oe+se/2],_id:"x"},i(H.xaxis,H.graphDiv._fullLayout),H.xaxis.setScale(),H.xaxis.isPtWithinRange=function(qe){return qe.a>=H.aaxis.range[0]&&qe.a<=H.aaxis.range[1]&&qe.b>=H.baxis.range[1]&&qe.b<=H.baxis.range[0]&&qe.c>=H.caxis.range[1]&&qe.c<=H.caxis.range[0]},H.yaxis={type:"linear",range:[pe,me-we-ye],domain:[W-G/2,W+G/2],_id:"y"},i(H.yaxis,H.graphDiv._fullLayout),H.yaxis.setScale(),H.yaxis.isPtWithinRange=function(){return!0};var Te=H.yaxis.domain[0],Le=H.aaxis=v({},$.aaxis,{range:[pe,me-we-ye],side:"left",tickangle:(+$.aaxis.tickangle||0)-30,domain:[Te,Te+G*I],anchor:"free",position:0,_id:"y",_length:J});i(Le,H.graphDiv._fullLayout),Le.setScale();var Oe=H.baxis=v({},$.baxis,{range:[me-pe-ye,we],side:"bottom",domain:H.xaxis.domain,anchor:"free",position:0,_id:"x",_length:J});i(Oe,H.graphDiv._fullLayout),Oe.setScale();var Re=H.caxis=v({},$.caxis,{range:[me-pe-we,ye],side:"right",tickangle:(+$.caxis.tickangle||0)+30,domain:[Te,Te+G*I],anchor:"free",position:0,_id:"y",_length:J});i(Re,H.graphDiv._fullLayout),Re.setScale();var Ve="M"+te+","+(ae+ee)+"h"+J+"l-"+J/2+",-"+ee+"Z";H.clipDef.select("path").attr("d",Ve),H.layers.plotbg.select("path").attr("d",Ve);var _e="M0,"+ee+"h"+J+"l-"+J/2+",-"+ee+"Z";H.clipDefRelative.select("path").attr("d",_e);var Ae=e(te,ae);H.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ae),H.clipDefRelative.select("path").attr("transform",null);var Fe=e(te-Oe._offset,ae+ee);H.layers.baxis.attr("transform",Fe),H.layers.bgrid.attr("transform",Fe);var Pe=e(te+J/2,ae)+"rotate(30)"+e(0,-Le._offset);H.layers.aaxis.attr("transform",Pe),H.layers.agrid.attr("transform",Pe);var Be=e(te+J/2,ae)+"rotate(-30)"+e(0,-Re._offset);H.layers.caxis.attr("transform",Be),H.layers.cgrid.attr("transform",Be),H.drawAxes(!0),H.layers.aline.select("path").attr("d",Le.showline?"M"+te+","+(ae+ee)+"l"+J/2+",-"+ee:"M0,0").call(a.stroke,Le.linecolor||"#000").style("stroke-width",(Le.linewidth||0)+"px"),H.layers.bline.select("path").attr("d",Oe.showline?"M"+te+","+(ae+ee)+"h"+J:"M0,0").call(a.stroke,Oe.linecolor||"#000").style("stroke-width",(Oe.linewidth||0)+"px"),H.layers.cline.select("path").attr("d",Re.showline?"M"+(te+J/2)+","+ae+"l"+J/2+","+ee:"M0,0").call(a.stroke,Re.linecolor||"#000").style("stroke-width",(Re.linewidth||0)+"px"),H.graphDiv._context.staticPlot||H.initInteractions(),l.setClipUrl(H.layers.frontplot,H._hasClipOnAxisFalse?null:H.clipId,H.graphDiv)},O.drawAxes=function($){var X=this.graphDiv,te=this.id.substr(7)+"title",ae=this.layers,J=this.aaxis,ee=this.baxis,se=this.caxis;if(this.drawAx(J),this.drawAx(ee),this.drawAx(se),$){var G=Math.max(J.showticklabels?J.tickfont.size/2:0,(se.showticklabels?.75*se.tickfont.size:0)+("outside"===se.ticks?.87*se.ticklen:0)),H=(ee.showticklabels?ee.tickfont.size:0)+("outside"===ee.ticks?ee.ticklen:0)+3;ae["a-title"]=u.draw(X,"a"+te,{propContainer:J,propName:this.id+".aaxis.title",placeholder:o(X,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-J.title.font.size/3-G,"text-anchor":"middle"}}),ae["b-title"]=u.draw(X,"b"+te,{propContainer:ee,propName:this.id+".baxis.title",placeholder:o(X,"Click to enter Component B title"),attributes:{x:this.x0-H,y:this.y0+this.h+.83*ee.title.font.size+H,"text-anchor":"middle"}}),ae["c-title"]=u.draw(X,"c"+te,{propContainer:se,propName:this.id+".caxis.title",placeholder:o(X,"Click to enter Component C title"),attributes:{x:this.x0+this.w+H,y:this.y0+this.h+.83*se.title.font.size+H,"text-anchor":"middle"}})}},O.drawAx=function($){var X,te=this.graphDiv,ae=$._name,J=ae.charAt(0),ee=$._id,se=this.layers[ae],G=J+"tickLayout",H=(X=$).ticks+String(X.ticklen)+String(X.showticklabels);this[G]!==H&&(se.selectAll("."+ee+"tick").remove(),this[G]=H),$.setScale();var Y=s.calcTicks($),oe=s.clipEnds($,Y),W=s.makeTransTickFn($),ne=s.getTickSigns($)[2],re=_.deg2rad(30),ce=ne*($.linewidth||1)/2,fe=ne*$.ticklen,me=this.w,pe=this.h,we="b"===J?"M0,"+ce+"l"+Math.sin(re)*fe+","+Math.cos(re)*fe:"M"+ce+",0l"+Math.cos(re)*fe+","+-Math.sin(re)*fe,ye={a:"M0,0l"+pe+",-"+me/2,b:"M0,0l-"+me/2+",-"+pe,c:"M0,0l-"+pe+","+me/2}[J];s.drawTicks(te,$,{vals:"inside"===$.ticks?oe:Y,layer:se,path:we,transFn:W,crisp:!1}),s.drawGrid(te,$,{vals:oe,layer:this.layers[J+"grid"],path:ye,transFn:W,crisp:!1}),s.drawLabels(te,$,{vals:Y,layer:se,transFn:W,labelFns:s.makeLabelFns($,0,30)})};var N=S.MINZOOM/2+.87,F="m-0.87,.5h"+N+"v3h-"+(N+5.2)+"l"+(N/2+2.6)+",-"+(.87*N+4.5)+"l2.6,1.5l-"+N/2+","+.87*N+"Z",L="m0.87,.5h-"+N+"v3h"+(N+5.2)+"l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-2.6,1.5l"+N/2+","+.87*N+"Z",P="m0,1l"+N/2+","+.87*N+"l2.6,-1.5l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-"+(N/2+2.6)+","+(.87*N+4.5)+"l2.6,1.5l"+N/2+",-"+.87*N+"Z",j=!0;function U($){y.select($).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}O.clearSelect=function(){M(this.dragOptions),E(this.dragOptions.gd)},O.initInteractions=function(){var $,X,te,ae,J,ee,se,G,H,Y,oe,W,ne=this,re=ne.layers.plotbg.select("path").node(),ce=ne.graphDiv,fe=ce._fullLayout._zoomlayer;function me(_e){var Ae={};return Ae[ne.id+".aaxis.min"]=_e.a,Ae[ne.id+".baxis.min"]=_e.b,Ae[ne.id+".caxis.min"]=_e.c,Ae}function pe(_e,Ae){var Fe=ce._fullLayout.clickmode;U(ce),2===_e&&(ce.emit("plotly_doubleclick",null),T.call("_guiRelayout",ce,me({a:0,b:0,c:0}))),Fe.indexOf("select")>-1&&1===_e&&c(Ae,ce,[ne.xaxis],[ne.yaxis],ne.id,ne.dragOptions),Fe.indexOf("event")>-1&&p.click(ce,Ae,ne.id)}function we(_e,Ae){return 1-Ae/ne.h}function ye(_e,Ae){return 1-(_e+(ne.h-Ae)/Math.sqrt(3))/ne.w}function Te(_e,Ae){return(_e-(ne.h-Ae)/Math.sqrt(3))/ne.w}function Le(_e,Ae){var Fe=te+_e*$,Pe=ae+Ae*X,Be=Math.max(0,Math.min(1,we(0,ae),we(0,Pe))),qe=Math.max(0,Math.min(1,ye(te,ae),ye(Fe,Pe))),We=Math.max(0,Math.min(1,Te(te,ae),Te(Fe,Pe))),Je=(Be/2+We)*ne.w,ut=(1-Be/2-qe)*ne.w,Ge=(Je+ut)/2,Ke=ut-Je,nt=(1-Be)*ne.h,it=nt-Ke/I;Ke<S.MINZOOM?(se=J,oe.attr("d",H),W.attr("d","M0,0Z")):(se={a:J.a+Be*ee,b:J.b+qe*ee,c:J.c+We*ee},oe.attr("d",H+"M"+Je+","+nt+"H"+ut+"L"+Ge+","+it+"L"+Je+","+nt+"Z"),W.attr("d","M"+te+","+ae+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Je+","+nt+F+"M"+ut+","+nt+L+"M"+Ge+","+it+P)),Y||(oe.transition().style("fill",G>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),W.transition().style("opacity",1).duration(200),Y=!0),ce.emit("plotly_relayouting",me(se))}function Oe(){U(ce),se!==J&&(T.call("_guiRelayout",ce,me(se)),j&&ce.data&&ce._context.showTips&&(_.notifier(o(ce,"Double-click to zoom back out"),"long"),j=!1))}function Re(_e,Ae){var Fe=_e/ne.xaxis._m,Pe=Ae/ne.yaxis._m,Be=[(se={a:J.a-Pe,b:J.b+(Fe+Pe)/2,c:J.c-(Fe-Pe)/2}).a,se.b,se.c].sort(_.sorterAsc),qe=Be.indexOf(se.a),We=Be.indexOf(se.b),Je=Be.indexOf(se.c);Be[0]<0&&(Be[1]+Be[0]/2<0?(Be[2]+=Be[0]+Be[1],Be[0]=Be[1]=0):(Be[2]+=Be[0]/2,Be[1]+=Be[0]/2,Be[0]=0),Ae=(J.a-(se={a:Be[qe],b:Be[We],c:Be[Je]}).a)*ne.yaxis._m,_e=(J.c-se.c-J.b+se.b)*ne.xaxis._m);var ut=e(ne.x0+_e,ne.y0+Ae);ne.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ut);var Ge=e(-_e,-Ae);ne.clipDefRelative.select("path").attr("transform",Ge),ne.aaxis.range=[se.a,ne.sum-se.b-se.c],ne.baxis.range=[ne.sum-se.a-se.c,se.b],ne.caxis.range=[ne.sum-se.a-se.b,se.c],ne.drawAxes(!1),ne._hasClipOnAxisFalse&&ne.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,ne),ce.emit("plotly_relayouting",me(se))}function Ve(){T.call("_guiRelayout",ce,me(se))}this.dragOptions={element:re,gd:ce,plotinfo:{id:ne.id,domain:ce._fullLayout[ne.id].domain,xaxis:ne.xaxis,yaxis:ne.yaxis},subplot:ne.id,prepFn:function(_e,Ae,Fe){ne.dragOptions.xaxes=[ne.xaxis],ne.dragOptions.yaxes=[ne.yaxis],$=ce._fullLayout._invScaleX,X=ce._fullLayout._invScaleY;var Pe=ne.dragOptions.dragmode=ce._fullLayout.dragmode;ne.dragOptions.minDrag=g(Pe)?1:void 0,"zoom"===Pe?(ne.dragOptions.moveFn=Le,ne.dragOptions.clickFn=pe,ne.dragOptions.doneFn=Oe,function(Be,qe,We){var Je=re.getBoundingClientRect();te=qe-Je.left,ae=We-Je.top,ce._fullLayout._calcInverseTransform(ce);var Ge=_.apply3DTransform(ce._fullLayout._invTransform)(te,ae);te=Ge[0],ae=Ge[1],se=J={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},ee=ne.aaxis.range[1]-J.a,G=b(ne.graphDiv._fullLayout[ne.id].bgcolor).getLuminance(),H="M0,"+ne.h+"L"+ne.w/2+", 0L"+ne.w+","+ne.h+"Z",Y=!1,oe=fe.append("path").attr("class","zoombox").attr("transform",e(ne.x0,ne.y0)).style({fill:G>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",H),W=fe.append("path").attr("class","zoombox-corners").attr("transform",e(ne.x0,ne.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ne.clearSelect(ce)}(0,Ae,Fe)):"pan"===Pe?(ne.dragOptions.moveFn=Re,ne.dragOptions.clickFn=pe,ne.dragOptions.doneFn=Ve,se=J={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},ne.clearSelect(ce)):(m(Pe)||g(Pe))&&w(_e,Ae,Fe,ne.dragOptions,Pe)}},re.onmousemove=function(_e){p.hover(ce,_e,ne.id),ce._fullLayout._lasthover=re,ce._fullLayout._hoversubplot=ne.id},re.onmouseout=function(_e){ce._dragging||d.unhover(ce,_e)},d.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(x,ue,le){"use strict";var y=x("./lib/loggers"),b=x("./lib/noop"),T=x("./lib/push_unique"),_=x("./lib/is_plain_object"),e=x("./lib/dom").addStyleRule,o=x("./lib/extend"),a=x("./plots/attributes"),l=x("./plots/layout_attributes"),i=o.extendFlat,v=o.extendDeepAll;function h(c){var E=c.name,M=c.categories,S=c.meta;if(le.modules[E])y.log("Type "+E+" already registered");else{le.subplotsRegistry[c.basePlotModule.name]||function(j){var U=j.name;if(le.subplotsRegistry[U])y.log("Plot type "+U+" already registered.");else for(var $ in f(j),le.subplotsRegistry[U]=j,le.componentsRegistry)u($,j.name)}(c.basePlotModule);for(var C={},O=0;O<M.length;O++)C[M[O]]=!0,le.allCategories[M[O]]=!0;for(var I in le.modules[E]={_module:c,categories:C},S&&Object.keys(S).length&&(le.modules[E].meta=S),le.allTypes.push(E),le.componentsRegistry)g(I,E);c.layoutAttributes&&i(le.traceLayoutAttributes,c.layoutAttributes);var N=c.basePlotModule,F=N.name;if("mapbox"===F){var L=N.constants.styleRules;for(var P in L)e(".js-plotly-plot .plotly .mapboxgl-"+P,L[P])}"geo"!==F&&"mapbox"!==F||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function s(c){if("string"!=typeof c.name)throw new Error("Component module *name* must be a string.");var E=c.name;for(var M in le.componentsRegistry[E]=c,c.layoutAttributes&&(c.layoutAttributes._isLinkedToArray&&T(le.layoutArrayContainers,E),f(c)),le.modules)g(E,M);for(var S in le.subplotsRegistry)u(E,S);for(var C in le.transformsRegistry)m(E,C);c.schema&&c.schema.layout&&v(l,c.schema.layout)}function d(c){if("string"!=typeof c.name)throw new Error("Transform module *name* must be a string.");var E="Transform module "+c.name,M="function"==typeof c.transform,S="function"==typeof c.calcTransform;if(!M&&!S)throw new Error(E+" is missing a *transform* or *calcTransform* method.");for(var C in M&&S&&y.log([E+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),_(c.attributes)||y.log(E+" registered without an *attributes* object."),"function"!=typeof c.supplyDefaults&&y.log(E+" registered without a *supplyDefaults* method."),le.transformsRegistry[c.name]=c,le.componentsRegistry)m(C,c.name)}function p(c){var E=c.name,M=E.split("-")[0],S=c.dictionary,C=c.format,O=S&&Object.keys(S).length,I=C&&Object.keys(C).length,N=le.localeRegistry,F=N[E];if(F||(N[E]=F={}),M!==E){var L=N[M];L||(N[M]=L={}),O&&L.dictionary===F.dictionary&&(L.dictionary=S),I&&L.format===F.format&&(L.format=C)}O&&(F.dictionary=S),I&&(F.format=C)}function f(c){if(c.layoutAttributes){var E=c.layoutAttributes._arrayAttrRegexps;if(E)for(var M=0;M<E.length;M++)T(le.layoutArrayRegexes,E[M])}}function g(c,E){var M=le.componentsRegistry[c].schema;if(M&&M.traces){var S=M.traces[E];S&&v(le.modules[E]._module.attributes,S)}}function m(c,E){var M=le.componentsRegistry[c].schema;if(M&&M.transforms){var S=M.transforms[E];S&&v(le.transformsRegistry[E].attributes,S)}}function u(c,E){var M=le.componentsRegistry[c].schema;if(M&&M.subplots){var S=le.subplotsRegistry[E],C=S.layoutAttributes,O="subplot"===S.attr?S.name:S.attr;Array.isArray(O)&&(O=O[0]);var I=M.subplots[O];C&&I&&v(C,I)}}function w(c){return"object"==typeof c&&(c=c.type),c}le.modules={},le.allCategories={},le.allTypes=[],le.subplotsRegistry={},le.transformsRegistry={},le.componentsRegistry={},le.layoutArrayContainers=[],le.layoutArrayRegexes=[],le.traceLayoutAttributes={},le.localeRegistry={},le.apiMethodRegistry={},le.collectableSubplotTypes=null,le.register=function(c){if(le.collectableSubplotTypes=null,!c)throw new Error("No argument passed to Plotly.register.");c&&!Array.isArray(c)&&(c=[c]);for(var E=0;E<c.length;E++){var M=c[E];if(!M)throw new Error("Invalid module was attempted to be registered!");switch(M.moduleType){case"trace":h(M);break;case"transform":d(M);break;case"component":s(M);break;case"locale":p(M);break;case"apiMethod":le.apiMethodRegistry[M.name]=M.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},le.getModule=function(c){var E=le.modules[w(c)];return!!E&&E._module},le.traceIs=function(c,E){if("various"===(c=w(c)))return!1;var M=le.modules[c];return M||(c&&y.log("Unrecognized trace type "+c+"."),M=le.modules[a.type.dflt]),!!M.categories[E]},le.getTransformIndices=function(c,E){for(var M=[],S=c.transforms||[],C=0;C<S.length;C++)S[C].type===E&&M.push(C);return M},le.hasTransform=function(c,E){for(var M=c.transforms||[],S=0;S<M.length;S++)if(M[S].type===E)return!0;return!1},le.getComponentMethod=function(c,E){var M=le.componentsRegistry[c];return M&&M[E]||b},le.call=function(){var c=arguments[0],E=[].slice.call(arguments,1);return le.apiMethodRegistry[c].apply(null,E)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(x,ue,le){"use strict";var y=x("../registry"),b=x("../lib"),T=b.extendFlat,_=b.extendDeep;function e(o){var a;switch(o){case"themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}ue.exports=function(o,a){var l,h=o.layout,s=_([],o.data),d=_({},h,e(a.tileClass)),p=o._context||{};if(a.width&&(d.width=a.width),a.height&&(d.height=a.height),"thumbnail"===a.tileClass||"themes__thumb"===a.tileClass){d.annotations=[];var f=Object.keys(d);for(l=0;l<f.length;l++)["xaxis","yaxis","zaxis"].indexOf(f[l].slice(0,5))>-1&&(d[f[l]].title={text:""});for(l=0;l<s.length;l++){var g=s[l];g.showscale=!1,g.marker&&(g.marker.showscale=!1),y.traceIs(g,"pie-like")&&(g.textposition="none")}}if(Array.isArray(a.annotations))for(l=0;l<a.annotations.length;l++)d.annotations.push(a.annotations[l]);var m=Object.keys(d).filter(function(M){return M.match(/^scene\d*$/)});if(m.length){var u={};for("thumbnail"===a.tileClass&&(u={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<m.length;l++){var w=d[m[l]];w.xaxis||(w.xaxis={}),w.yaxis||(w.yaxis={}),w.zaxis||(w.zaxis={}),T(w.xaxis,u),T(w.yaxis,u),T(w.zaxis,u),w._scene=null}}var c=document.createElement("div");a.tileClass&&(c.className=a.tileClass);var E={gd:c,td:c,layout:d,data:s,config:{staticPlot:void 0===a.staticPlot||a.staticPlot,plotGlPixelRatio:void 0===a.plotGlPixelRatio?2:a.plotGlPixelRatio,displaylogo:a.displaylogo||!1,showLink:a.showLink||!1,showTips:a.showTips||!1,mapboxAccessToken:p.mapboxAccessToken}};return"transparent"!==a.setBackground&&(E.config.setBackground=a.setBackground||"opaque"),E.gd.defaultLayout=e(a.tileClass),E}},{"../lib":503,"../registry":638}],640:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("../plot_api/to_image"),T=x("./filesaver"),_=x("./helpers");ue.exports=function(e,o){var a;return y.isPlainObject(e)||(a=y.getGraphDiv(e)),(o=o||{}).format=o.format||"png",o.width=o.width||null,o.height=o.height||null,o.imageDataOnly=!0,new Promise(function(l,i){a&&a._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),y.isIE()&&"svg"!==o.format&&i(new Error(_.MSG_IE_BAD_FORMAT)),a&&(a._snapshotInProgress=!0);var v=b(e,o),h=o.filename||e.fn||"newplot";h+="."+o.format.replace("-","."),v.then(function(s){return a&&(a._snapshotInProgress=!1),T(s,h,o.format)}).then(function(s){l(s)}).catch(function(s){a&&(a._snapshotInProgress=!1),i(s)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("./helpers");ue.exports=function(T,_,e){var o=document.createElement("a"),a="download"in o;return new Promise(function(l,i){var v,h;return y.isIE()?(v=b.createBlob(T,"svg"),window.navigator.msSaveBlob(v,_),v=null,l(_)):a?(v=b.createBlob(T,e),h=b.createObjectURL(v),o.href=h,o.download=_,document.body.appendChild(o),o.click(),document.body.removeChild(o),b.revokeObjectURL(h),v=null,l(_)):y.isSafari()?(b.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(T)),l(_)):void i(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(x,ue,le){"use strict";var y=x("../registry");le.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},le.getRedrawFunc=function(T){return function(){y.getComponentMethod("colorbar","draw")(T)}},le.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},le.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var b=window.URL||window.webkitURL;le.createObjectURL=function(T){return b.createObjectURL(T)},le.revokeObjectURL=function(T){return b.revokeObjectURL(T)},le.createBlob=function(T,_){if("svg"===_)return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if("full-json"===_)return new window.Blob([T],{type:"application/json;charset=utf-8"});var e=function(o){for(var a=o.length,l=new ArrayBuffer(a),i=new Uint8Array(l),v=0;v<a;v++)i[v]=o.charCodeAt(v);return l}(window.atob(T));return new window.Blob([e],{type:"image/"+_})},le.octetStream=function(T){document.location.href="data:application/octet-stream"+T},le.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,le.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(x,ue,le){"use strict";var y=x("./helpers"),b={getDelay:y.getDelay,getRedrawFunc:y.getRedrawFunc,clone:x("./cloneplot"),toSVG:x("./tosvg"),svgToImg:x("./svgtoimg"),toImage:x("./toimage"),downloadImage:x("./download")};ue.exports=b},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("events").EventEmitter,T=x("./helpers");ue.exports=function(_){var e=_.emitter||new b,o=new Promise(function(a,l){var i=window.Image,v=_.svg,h=_.format||"png";if(y.isIE()&&"svg"!==h){var s=new Error(T.MSG_IE_BAD_FORMAT);return l(s),_.promise?o:e.emit("error",s)}var d,p,f=_.canvas,g=_.scale||1,w=g*(_.width||300),c=g*(_.height||150),E=f.getContext("2d",{willReadFrequently:!0}),M=new i;"svg"===h||y.isSafari()?p=T.encodeSVG(v):(d=T.createBlob(v,"svg"),p=T.createObjectURL(d)),f.width=w,f.height=c,M.onload=function(){var S;switch(d=null,T.revokeObjectURL(p),"svg"!==h&&E.drawImage(M,0,0,w,c),h){case"jpeg":S=f.toDataURL("image/jpeg");break;case"png":S=f.toDataURL("image/png");break;case"webp":S=f.toDataURL("image/webp");break;case"svg":S=p;break;default:var C="Image format is not jpeg, png, svg or webp.";if(l(new Error(C)),!_.promise)return e.emit("error",C)}a(S),_.promise||e.emit("success",S)},M.onerror=function(S){if(d=null,T.revokeObjectURL(p),l(S),!_.promise)return e.emit("error",S)},M.src=p});return _.promise?o:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(x,ue,le){"use strict";var y=x("events").EventEmitter,b=x("../registry"),T=x("../lib"),_=x("./helpers"),e=x("./cloneplot"),o=x("./tosvg"),a=x("./svgtoimg");ue.exports=function(l,i){var v=new y,h=e(l,{format:"png"}),s=h.gd;s.style.position="absolute",s.style.left="-5000px",document.body.appendChild(s);var d=_.getRedrawFunc(s);return b.call("_doPlot",s,h.data,h.layout,h.config).then(d).then(function(){var p=_.getDelay(s._fullLayout);setTimeout(function(){var f=o(s),g=document.createElement("canvas");g.id=T.randstr(),(v=a({format:i.format,width:s._fullLayout.width,height:s._fullLayout.height,canvas:g,emitter:v,svg:f})).clean=function(){s&&document.body.removeChild(s)}},p)}).catch(function(p){v.emit("error",p)}),v}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../lib"),T=x("../components/drawing"),_=x("../components/color"),e=x("../constants/xmlns_namespaces"),o=/"/g,a=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");ue.exports=function(l,i,v){var h,s=l._fullLayout,d=s._paper,p=s._toppaper,f=s.width,g=s.height;d.insert("rect",":first-child").call(T.setRect,0,0,f,g).call(_.fill,s.paper_bgcolor);var m=s._basePlotModules||[];for(h=0;h<m.length;h++){var u=m[h];u.toSVG&&u.toSVG(l)}if(p){var w=p.node().childNodes,c=Array.prototype.slice.call(w);for(h=0;h<c.length;h++){var E=c[h];E.childNodes.length&&d.node().appendChild(E)}}s._draggers&&s._draggers.remove(),d.node().style.background="",d.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var S=y.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){S.style({visibility:null,display:null});var C=this.style.fontFamily;C&&-1!==C.indexOf('"')&&S.style("font-family",C.replace(o,"TOBESTRIPPED"))}else S.remove()}),d.selectAll(".gradient_filled,.pattern_filled").each(function(){var S=y.select(this),C=this.style.fill;C&&-1!==C.indexOf("url(")&&S.style("fill",C.replace(o,"TOBESTRIPPED"));var O=this.style.stroke;O&&-1!==O.indexOf("url(")&&S.style("stroke",O.replace(o,"TOBESTRIPPED"))}),"pdf"!==i&&"eps"!==i||d.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),d.node().setAttributeNS(e.xmlns,"xmlns",e.svg),d.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===i&&v&&(d.attr("width",v*f),d.attr("height",v*g),d.attr("viewBox","0 0 "+f+" "+g));var S,C,O,M=(new window.XMLSerializer).serializeToString(d.node());return S=M,C=y.select("body").append("div").style({display:"none"}).html(""),O=S.replace(/(&[^;]*;)/gi,function(I){return"&lt;"===I?"&#60;":"&rt;"===I?"&#62;":-1!==I.indexOf("<")||-1!==I.indexOf(">")?"":C.html(I).text()}),C.remove(),M=(M=(M=O).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(a,"'"),b.isIE()&&(M=(M=(M=M.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),M}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T){for(var _=0;_<b.length;_++)b[_].i=_;y.mergeArray(T.text,b,"tx"),y.mergeArray(T.hovertext,b,"htx");var e=T.marker;if(e){y.mergeArray(e.opacity,b,"mo",!0),y.mergeArray(e.color,b,"mc");var o=e.line;o&&(y.mergeArray(o.color,b,"mlc"),y.mergeArrayCastPositive(o.width,b,"mlw"))}}},{"../../lib":503}],648:[function(x,ue,le){"use strict";var y=x("../scatter/attributes"),b=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=x("../../plots/template_attributes").hovertemplateAttrs,_=x("../../plots/template_attributes").texttemplateAttrs,e=x("../../components/colorscale/attributes"),o=x("../../plots/font_attributes"),a=x("./constants"),l=x("../../components/drawing/attributes").pattern,i=x("../../lib/extend").extendFlat,v=o({editType:"calc",arrayOk:!0,colorEditType:"style"}),h=i({},y.marker.line.width,{dflt:0}),s=i({width:h,editType:"calc"},e("marker.line")),d=i({line:s,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:l});ue.exports={x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:y.text,texttemplate:_({editType:"plot"},{keys:a.eventDataKeys}),hovertext:y.hovertext,hovertemplate:T({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},v,{}),insidetextfont:i({},v,{}),outsidetextfont:i({},v,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},y.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:y.selected.marker.opacity,color:y.selected.marker.color,editType:"style"},textfont:y.selected.textfont,editType:"style"},unselected:{marker:{opacity:y.unselected.marker.opacity,color:y.unselected.marker.color,editType:"style"},textfont:y.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927,"./constants":650}],649:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../plots/cartesian/align_period"),T=x("../../components/colorscale/helpers").hasColorscale,_=x("../../components/colorscale/calc"),e=x("./arrays_to_calcdata"),o=x("../scatter/calc_selection");ue.exports=function(a,l){var i,v,h,s,d,p,f=y.getFromId(a,l.xaxis||"x"),g=y.getFromId(a,l.yaxis||"y"),m={msUTC:!(!l.base&&0!==l.base)};"h"===l.orientation?(i=f.makeCalcdata(l,"x",m),h=g.makeCalcdata(l,"y"),s=b(l,g,"y",h),d=!!l.yperiodalignment,p="y"):(i=g.makeCalcdata(l,"y",m),h=f.makeCalcdata(l,"x"),s=b(l,f,"x",h),d=!!l.xperiodalignment,p="x"),v=s.vals;for(var u=Math.min(v.length,i.length),w=new Array(u),c=0;c<u;c++)w[c]={p:v[c],s:i[c]},d&&(w[c].orig_p=h[c],w[c][p+"End"]=s.ends[c],w[c][p+"Start"]=s.starts[c]),l.ids&&(w[c].id=String(l.ids[c]));return T(l,"marker")&&_(a,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),T(l,"marker.line")&&_(a,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(w,l),o(w,l),w}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":647}],650:[function(x,ue,le){"use strict";ue.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib").isArrayOrTypedArray,T=x("../../constants/numerical").BADNUM,_=x("../../registry"),e=x("../../plots/cartesian/axes"),o=x("../../plots/cartesian/constraints").getAxisGroup,a=x("./sieve.js");function l(u,w,c,E,M){if(E.length){var S,C,O,I;switch(function(N,F){var L,P;for(L=0;L<F.length;L++){var j,U=F[L],$=U[0].trace,X="funnel"===$.type?$._base:$.base,te="h"===$.orientation?$.xcalendar:$.ycalendar,ae="category"===N.type||"multicategory"===N.type?function(){return null}:N.d2c;if(b(X)){for(P=0;P<Math.min(X.length,U.length);P++)j=ae(X[P],0,te),y(j)?(U[P].b=+j,U[P].hasB=1):U[P].b=0;for(;P<U.length;P++)U[P].b=0}else{j=ae(X,0,te);var J=y(j);for(j=J?j:0,P=0;P<U.length;P++)U[P].b=j,J&&(U[P].hasB=1)}}}(c,E),M.mode){case"overlay":i(w,c,E,M);break;case"group":for(S=[],C=[],O=0;O<E.length;O++)void 0===(I=E[O])[0].trace.offset?C.push(I):S.push(I);C.length&&(N=u,L=c,U=new a(C,{posAxis:F=w,sepNegVal:!1,overlapNoMerge:!(j=M).norm}),function($,X,te,ae){for(var J=$._fullLayout,G=te.minDiff,H=te.traces,Y=H.length,oe=te.positions.length!==te.distinctPositions.length,W=G*(1-ae.gap),ne=o(J,X._id)+H[0][0].trace.orientation,re=J._alignmentOpts[ne]||{},ce=0;ce<Y;ce++){var fe,me,pe=H[ce],we=pe[0].trace,Te=Object.keys((re[we.alignmentgroup]||{}).offsetGroups||{}).length,Le=(fe=Te?W/Te:oe?W/Y:W)*(1-(ae.groupgap||0));me=Te?((2*we._offsetIndex+1-Te)*fe-Le)/2:oe?((2*ce+1-Y)*fe-Le)/2:-Le/2;var Oe=pe[0].t;Oe.barwidth=Le,Oe.poffset=me,Oe.bargroupwidth=W,Oe.bardelta=G}te.binWidth=H[0][0].t.barwidth/100,h(te),s(X,te),d(X,te,oe)}(N,F,U,j),function($,X){for(var te=$.traces,ae=0;ae<te.length;ae++){var J=te[ae];if(void 0===J[0].trace.base)for(var ee=new a([J],{posAxis:X,sepNegVal:!0,overlapNoMerge:!0}),se=0;se<J.length;se++){var G=J[se];if(G.p!==T){var H=ee.put(G.p,G.b+G.s);H&&(G.b=H)}}}}(U,F),j.norm?(f(U),g(L,U,j)):p(L,U)),S.length&&i(w,c,S,M);break;case"stack":case"relative":for(S=[],C=[],O=0;O<E.length;O++)void 0===(I=E[O])[0].trace.base?C.push(I):S.push(I);C.length&&function(N,F,L,P,j){var U=new a(P,{posAxis:F,sepNegVal:"relative"===j.mode,overlapNoMerge:!(j.norm||"stack"===j.mode||"relative"===j.mode)});v(F,U,j),function(J,ee,se){var G,H,Y,oe,W,ne,re=m(J),ce=ee.traces;for(oe=0;oe<ce.length;oe++)if("funnel"===(H=(G=ce[oe])[0].trace).type)for(W=0;W<G.length;W++)(ne=G[W]).s!==T&&ee.put(ne.p,-.5*ne.s);for(oe=0;oe<ce.length;oe++){Y="funnel"===(H=(G=ce[oe])[0].trace).type;var fe=[];for(W=0;W<G.length;W++)if((ne=G[W]).s!==T){var me,pe=ee.put(ne.p,me=Y?ne.s:ne.s+ne.b),we=pe+me;ne.b=pe,ne[re]=we,se.norm||(fe.push(we),ne.hasB&&fe.push(pe))}se.norm||(H._extremes[J._id]=e.findExtremes(J,fe,{tozero:!0,padded:!0}))}}(L,U,j);for(var $=0;$<P.length;$++)for(var X=P[$],te=0;te<X.length;te++){var ae=X[te];ae.s!==T&&ae.b+ae.s===U.get(ae.p,ae.s)&&(ae._outmost=!0)}j.norm&&g(L,U,j)}(0,w,c,C,M),S.length&&i(w,c,S,M)}!function(N,F){var L,P,j,U=m(F),$={},X=1/0,te=-1/0;for(L=0;L<N.length;L++)for(j=N[L],P=0;P<j.length;P++){var ae=j[P].p;y(ae)&&(X=Math.min(X,ae),te=Math.max(te,ae))}var J=1e4/(te-X),ee=$.round=function(ne){return String(Math.round(J*(ne-X)))};for(L=0;L<N.length;L++){(j=N[L])[0].t.extents=$;var se=j[0].t.poffset,G=Array.isArray(se);for(P=0;P<j.length;P++){var H=j[P],Y=H[U]-H.w/2;if(y(Y)){var oe=H[U]+H.w/2,W=ee(H.p);$[W]=$[W]?[Math.min(Y,$[W][0]),Math.max(oe,$[W][1])]:[Y,oe]}H.p0=H.p+(G?se[P]:se),H.p1=H.p0+H.w,H.s0=H.b,H.s1=H.s0+H.s}}}(E,w)}var N,F,L,j,U}function i(u,w,c,E){for(var M=0;M<c.length;M++){var C=new a([c[M]],{posAxis:u,sepNegVal:!1,overlapNoMerge:!E.norm});v(u,C,E),E.norm?(f(C),g(w,C,E)):p(w,C)}}function v(u,w,c){for(var E=w.minDiff,M=w.traces,S=E*(1-c.gap),C=S*(1-(c.groupgap||0)),O=-C/2,I=0;I<M.length;I++){var N=M[I][0].t;N.barwidth=C,N.poffset=O,N.bargroupwidth=S,N.bardelta=E}w.binWidth=M[0][0].t.barwidth/100,h(w),s(u,w),d(u,w)}function h(u){var w,c,E=u.traces;for(w=0;w<E.length;w++){var M,S=E[w],C=S[0],O=C.trace,I=C.t,N=O._offset||O.offset,F=I.poffset;if(b(N)){for(M=Array.prototype.slice.call(N,0,S.length),c=0;c<M.length;c++)y(M[c])||(M[c]=F);for(c=M.length;c<S.length;c++)M.push(F);I.poffset=M}else void 0!==N&&(I.poffset=N);var L=O._width||O.width,P=I.barwidth;if(b(L)){var j=Array.prototype.slice.call(L,0,S.length);for(c=0;c<j.length;c++)y(j[c])||(j[c]=P);for(c=j.length;c<S.length;c++)j.push(P);if(I.barwidth=j,void 0===N){for(M=[],c=0;c<S.length;c++)M.push(F+(P-j[c])/2);I.poffset=M}}else void 0!==L&&(I.barwidth=L,void 0===N&&(I.poffset=F+(P-L)/2))}}function s(u,w){for(var c=w.traces,E=m(u),M=0;M<c.length;M++)for(var S=c[M],C=S[0].t,O=C.poffset,I=Array.isArray(O),N=C.barwidth,F=Array.isArray(N),L=0;L<S.length;L++){var P=S[L],j=P.w=F?N[L]:N;P[E]=P.p+(I?O[L]:O)+j/2}}function d(u,w,c){var E=w.traces,M=w.minDiff/2;e.minDtick(u,w.minDiff,w.distinctPositions[0],c);for(var S=0;S<E.length;S++){var C,O,I,N,F=E[S],L=F[0],P=L.trace,j=[];for(N=0;N<F.length;N++)O=(C=F[N]).p-M,j.push(O,I=C.p+M);if(P.width||P.offset){var U=L.t,$=U.poffset,X=U.barwidth,te=Array.isArray($),ae=Array.isArray(X);for(N=0;N<F.length;N++)I=(O=(C=F[N]).p+(te?$[N]:$))+(ae?X[N]:X),j.push(O,I)}P._extremes[u._id]=e.findExtremes(u,j,{padded:!1})}}function p(u,w){for(var c=w.traces,E=m(u),M=0;M<c.length;M++){for(var S=c[M],C=S[0].trace,O=[],I=!1,N=0;N<S.length;N++){var F=S[N],L=F.b,P=L+F.s;F[E]=P,O.push(P),F.hasB&&O.push(L),F.hasB&&F.b||(I=!0)}C._extremes[u._id]=e.findExtremes(u,O,{tozero:I,padded:!0})}}function f(u){for(var w=u.traces,c=0;c<w.length;c++)for(var E=w[c],M=0;M<E.length;M++){var S=E[M];S.s!==T&&u.put(S.p,S.b+S.s)}}function g(u,w,c){var E=w.traces,M=m(u),S="fraction"===c.norm?1:100,C=S/1e9,O=u.l2c(u.c2l(0)),I="stack"===c.mode?S:O;function N(se){return y(u.c2l(se))&&(se<O-C||se>I+C||!y(O))}for(var F=0;F<E.length;F++){for(var L=E[F],P=L[0].trace,j=[],U=!1,$=!1,X=0;X<L.length;X++){var te=L[X];if(te.s!==T){var ae=Math.abs(S/w.get(te.p,te.s));te.b*=ae,te.s*=ae;var J=te.b,ee=J+te.s;te[M]=ee,j.push(ee),$=$||N(ee),te.hasB&&(j.push(J),$=$||N(J)),te.hasB&&te.b||(U=!0)}}P._extremes[u._id]=e.findExtremes(u,j,{tozero:U,padded:$})}}function m(u){return u._id.charAt(0)}ue.exports={crossTraceCalc:function(u,w){for(var c=w.xaxis,E=w.yaxis,M=u._fullLayout,S=u._fullData,C=u.calcdata,O=[],I=[],N=0;N<S.length;N++){var F=S[N];if(!0===F.visible&&_.traceIs(F,"bar")&&F.xaxis===c._id&&F.yaxis===E._id&&("h"===F.orientation?O.push(C[N]):I.push(C[N]),F._computePh))for(var L=u.calcdata[N],P=0;P<L.length;P++)"function"==typeof L[P].ph0&&(L[P].ph0=L[P].ph0()),"function"==typeof L[P].ph1&&(L[P].ph1=L[P].ph1())}var j={xCat:"category"===c.type||"multicategory"===c.type,yCat:"category"===E.type||"multicategory"===E.type,mode:M.barmode,norm:M.barnorm,gap:M.bargap,groupgap:M.bargroupgap};l(u,c,E,I,j),l(u,E,c,O,j)},setGroupPositions:l}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/color"),T=x("../../registry"),_=x("../scatter/xy_defaults"),e=x("../scatter/period_defaults"),o=x("./style_defaults"),a=x("../../plots/cartesian/constraints").getAxisGroup,l=x("./attributes"),i=y.coerceFont;function v(s,d,p,f){var g=d.orientation,u=a(p,d[{v:"x",h:"y"}[g]+"axis"])+g,w=p._alignmentOpts||{},c=f("alignmentgroup"),E=w[u];E||(E=w[u]={});var M=E[c];M?M.traces.push(d):M=E[c]={traces:[d],alignmentIndex:Object.keys(E).length,offsetGroups:{}};var S=f("offsetgroup"),C=M.offsetGroups,O=C[S];S&&(O||(O=C[S]={offsetIndex:Object.keys(C).length}),d._offsetIndex=O.offsetIndex)}function h(s,d,p,f,g,m){var u=!1!==(m=m||{}).moduleHasSelected,w=!1!==m.moduleHasUnselected,c=!1!==m.moduleHasConstrain,E=!1!==m.moduleHasCliponaxis,M=!1!==m.moduleHasTextangle,S=!1!==m.moduleHasInsideanchor,C=!!m.hasPathbar,O=Array.isArray(g)||"auto"===g,I=O||"inside"===g,N=O||"outside"===g;if(I||N){var F=i(f,"textfont",p.font),L=y.extendFlat({},F),P=!(s.textfont&&s.textfont.color);if(P&&delete L.color,i(f,"insidetextfont",L),C){var j=y.extendFlat({},F);P&&delete j.color,i(f,"pathbar.textfont",j)}N&&i(f,"outsidetextfont",F),u&&f("selected.textfont.color"),w&&f("unselected.textfont.color"),c&&f("constraintext"),E&&f("cliponaxis"),M&&f("textangle"),f("texttemplate")}I&&S&&f("insidetextanchor")}ue.exports={supplyDefaults:function(s,d,p,f){function g(c,E){return y.coerce(s,d,l,c,E)}if(_(s,d,f,g)){e(s,d,f,g),g("xhoverformat"),g("yhoverformat"),g("orientation",d.x&&!d.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var m=g("textposition");h(s,0,f,g,m,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o(s,d,g,p,f);var u=(d.marker.line||{}).color,w=T.getComponentMethod("errorbars","supplyDefaults");w(s,d,u||b.defaultLine,{axis:"y"}),w(s,d,u||b.defaultLine,{axis:"x",inherit:"y"}),y.coerceSelectionMarkerOpacity(d,g)}else d.visible=!1},crossTraceDefaults:function(s,d){var p;function f(m){return y.coerce(p._input,p,l,m)}if("group"===d.barmode)for(var g=0;g<s.length;g++)"bar"===(p=s[g]).type&&v(0,p,d,f)},handleGroupingDefaults:v,handleText:h}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":648,"./style_defaults":663}],653:[function(x,ue,le){"use strict";ue.exports=function(y,b,T){return y.x="xVal"in b?b.xVal:b.x,y.y="yVal"in b?b.yVal:b.y,b.xa&&(y.xaxis=b.xa),b.ya&&(y.yaxis=b.ya),"h"===T.orientation?(y.label=y.y,y.value=y.x):(y.label=y.x,y.value=y.y),y}},{}],654:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("tinycolor2"),T=x("../../lib").isArrayOrTypedArray;le.coerceString=function(_,e,o){if("string"==typeof e){if(e||!_.noBlank)return e}else if(("number"==typeof e||!0===e)&&!_.strict)return String(e);return void 0!==o?o:_.dflt},le.coerceNumber=function(_,e,o){if(y(e)){e=+e;var a=_.min,l=_.max;if(!(void 0!==a&&e<a||void 0!==l&&e>l))return e}return void 0!==o?o:_.dflt},le.coerceColor=function(_,e,o){return b(e).isValid()?e:void 0!==o?o:_.dflt},le.coerceEnumerated=function(_,e,o){return _.coerceNumber&&(e=+e),-1!==_.values.indexOf(e)?e:void 0!==o?o:_.dflt},le.getValue=function(_,e){var o;return Array.isArray(_)?e<_.length&&(o=_[e]):o=_,o},le.getLineWidth=function(_,e){return 0<e.mlw?e.mlw:T(_.marker.line.width)?0:_.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(x,ue,le){"use strict";var y=x("../../components/fx"),b=x("../../registry"),T=x("../../components/color"),_=x("../../lib").fillText,e=x("./helpers").getLineWidth,o=x("../../plots/cartesian/axes").hoverLabelText,a=x("../../constants/numerical").BADNUM;function l(v,h,s,d,p){var f,g,m,u,w,c,E,M=v.cd,S=M[0].trace,C=M[0].t,O="closest"===d,I="waterfall"===S.type,N=v.maxHoverDistance,F=v.maxSpikeDistance;"h"===S.orientation?(f=s,g=h,m="y",u="x",w=G,c=ee):(f=h,g=s,m="x",u="y",c=G,w=ee);var L=S[m+"period"],P=O||L;function j(fe){return $(fe,-1)}function U(fe){return $(fe,1)}function $(fe,me){return fe[m]+me*fe.w/2}function X(fe){return fe[m+"End"]-fe[m+"Start"]}var te=O?j:L?function(fe){return fe.p-X(fe)/2}:function(fe){return Math.min(j(fe),fe.p-C.bardelta/2)},ae=O?U:L?function(fe){return fe.p+X(fe)/2}:function(fe){return Math.max(U(fe),fe.p+C.bardelta/2)};function J(fe,me,pe){return p.finiteRange&&(pe=0),y.inbox(fe-f,me-f,pe+Math.min(1,Math.abs(me-fe)/E)-1)}function ee(fe){return J(te(fe),ae(fe),N)}function se(fe){var me=fe[u];if(I){var pe=Math.abs(fe.rawS)||0;g>0?me+=pe:g<0&&(me-=pe)}return me}function G(fe){var me=g,pe=fe.b,we=se(fe);return y.inbox(pe-me,we-me,N+(we-me)/(we-pe)-1)}var H=v[m+"a"],Y=v[u+"a"];E=Math.abs(H.r2c(H.range[1])-H.r2c(H.range[0]));var fe,me,pe,we,oe=y.getDistanceFunction(d,w,c,function(fe){return(w(fe)+c(fe))/2});if(y.getClosest(M,oe,v),!1!==v.index&&M[v.index].p!==a){P||(te=function(fe){return Math.min(j(fe),fe.p-C.bargroupwidth/2)},ae=function(fe){return Math.max(U(fe),fe.p+C.bargroupwidth/2)});var W=M[v.index],ne=S.base?W.b+W.s:W.s;v[u+"0"]=v[u+"1"]=Y.c2p(W[u],!0),v[u+"LabelVal"]=ne;var re=C.extents[C.extents.round(W.p)];return v[m+"0"]=H.c2p(O?te(W):re[0],!0),v[m+"1"]=H.c2p(O?ae(W):re[1],!0),v[m+"LabelVal"]=void 0!==W.orig_p?W.orig_p:W.p,v.labelLabel=o(H,v[m+"LabelVal"],S[m+"hoverformat"]),v.valueLabel=o(Y,v[u+"LabelVal"],S[u+"hoverformat"]),v.baseLabel=o(Y,W.b,S[u+"hoverformat"]),v.spikeDistance=(me=g,pe=(fe=W).b,we=se(fe),(y.inbox(pe-me,we-me,F+(we-me)/(we-pe)-1)+function(fe){return J(j(fe),U(fe),F)}(W))/2),v[m+"Spike"]=H.c2p(W.p,!0),_(W,S,v),v.hovertemplate=S.hovertemplate,v}}function i(v,h){var s=h.mcc||v.marker.color,d=h.mlcc||v.marker.line.color,p=e(v,h);return T.opacity(s)?s:T.opacity(d)&&p?d:void 0}ue.exports={hoverPoints:function(v,h,s,d,p){var f=l(v,h,s,d,p);if(f){var g=f.cd,m=g[0].trace,u=g[f.index];return f.color=i(m,u),b.getComponentMethod("errorbars","hoverInfo")(u,m,f),[f]}},hoverOnBars:l,getTraceColor:i}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc").crossTraceCalc,colorbar:x("../scatter/marker_colorbar"),arraysToCalcdata:x("./arrays_to_calcdata"),plot:x("./plot").plot,style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"bar",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(x,ue,le){"use strict";ue.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../plots/cartesian/axes"),T=x("../../lib"),_=x("./layout_attributes");ue.exports=function(e,o,a){function l(m,u){return T.coerce(e,o,_,m,u)}for(var i=!1,v=!1,h=!1,s={},d=l("barmode"),p=0;p<a.length;p++){var f=a[p];if(y.traceIs(f,"bar")&&f.visible){if(i=!0,"group"===d){var g=f.xaxis+f.yaxis;s[g]&&(h=!0),s[g]=!0}f.visible&&"histogram"===f.type&&"category"!==b.getFromId({_fullLayout:o},f["v"===f.orientation?"xaxis":"yaxis"]).type&&(v=!0)}}i?("overlay"!==d&&l("barnorm"),l("bargap",v&&!h?0:.2),l("bargroupgap")):delete o.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=x("../../lib"),_=x("../../lib/svg_text_utils"),e=x("../../components/color"),o=x("../../components/drawing"),a=x("../../registry"),l=x("../../plots/cartesian/axes").tickText,i=x("./uniform_text"),v=i.recordMinTextSize,h=i.clearMinTextSize,s=x("./style"),d=x("./helpers"),p=x("./constants"),f=x("./attributes"),g=f.text,m=f.textposition,u=x("../../components/fx/helpers").appendArrayPointValue,w=p.TEXTPAD;function c(F){return F.id}function M(F,L){return F<L?1:-1}function S(F,L,P,j){var U;return!L.uniformtext.mode&&C(P)?(j&&(U=j()),F.transition().duration(P.duration).ease(P.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()})):F}function C(F){return F&&F.duration>0}function O(F){return"auto"===F?0:F}function I(F,L){var P=Math.PI/180*L,j=Math.abs(Math.sin(P)),U=Math.abs(Math.cos(P));return{x:F.width*U+F.height*j,y:F.width*j+F.height*U}}function N(F,L,P,j,U,$){var X=!!$.isHorizontal,te=!!$.constrained,ae=$.angle||0,J=$.anchor||"end",ee="end"===J,se="start"===J,G=(($.leftToRight||0)+1)/2,H=1-G,Y=U.width,oe=U.height,W=Math.abs(L-F),ne=Math.abs(j-P),re=W>2*w&&ne>2*w?w:0;W-=2*re,ne-=2*re;var ce=O(ae);"auto"!==ae||Y<=W&&oe<=ne||!(Y>W||oe>ne)||(Y>ne||oe>W)&&Y<oe==W<ne||(ce+=90);var fe=I(U,ce),me=1;te&&(me=Math.min(1,W/fe.x,ne/fe.y));var pe=U.left*H+U.right*G,we=(U.top+U.bottom)/2,ye=(F+w)*H+(L-w)*G,Te=(P+j)/2,Le=0,Oe=0;if(se||ee){var Re=(X?fe.x:fe.y)/2,Ve=X?M(F,L):M(P,j);X?se?(ye=F+Ve*re,Le=-Ve*Re):(ye=L-Ve*re,Le=Ve*Re):se?(Te=P+Ve*re,Oe=-Ve*Re):(Te=j-Ve*re,Oe=Ve*Re)}return{textX:pe,textY:we,targetX:ye,targetY:Te,anchorX:Le,anchorY:Oe,scale:me,rotate:ce}}ue.exports={plot:function(F,L,P,j,U,$){var X=L.xaxis,te=L.yaxis,ae=F._fullLayout;U||(U={mode:ae.barmode,norm:ae.barmode,gap:ae.bargap,groupgap:ae.bargroupgap},h("bar",ae));var J=T.makeTraceGroups(j,P,"trace bars").each(function(ee){var se=y.select(this),G=ee[0].trace,oe="bar"===G.type||"funnel"===G.type,W=0;"waterfall"===G.type&&G.connector.visible&&"between"===G.connector.mode&&(W=G.connector.line.width/2);var ne="h"===G.orientation,re=C(U),ce=T.ensureSingle(se,"g","points"),fe=function E(F){if(F.ids)return c}(G),me=ce.selectAll("g.point").data(T.identity,fe);me.enter().append("g").classed("point",!0),me.exit().remove(),me.each(function(we,ye){var Te,Le,Ge,Ke,nt,it,ht,Tt,Ct,Vt,Oe=y.select(this),Re=(Ke=X,nt=te,Tt=[],Vt=(it=ne)?nt:Ke,(ht=[])[0]=(Ct=it?Ke:nt).c2p((Ge=we).s0,!0),Tt[0]=Vt.c2p(Ge.p0,!0),ht[1]=Ct.c2p(Ge.s1,!0),Tt[1]=Vt.c2p(Ge.p1,!0),it?[ht,Tt]:[Tt,ht]),Ve=Re[0][0],_e=Re[0][1],Ae=Re[1][0],Fe=Re[1][1],Pe=0==(ne?_e-Ve:Fe-Ae);if(Pe&&oe&&d.getLineWidth(G,we)&&(Pe=!1),Pe||(Pe=!(b(Ve)&&b(_e)&&b(Ae)&&b(Fe))),we.isBlank=Pe,Pe&&(ne?_e=Ve:Fe=Ae),W&&!Pe&&(ne?(Ve-=M(Ve,_e)*W,_e+=M(Ve,_e)*W):(Ae-=M(Ae,Fe)*W,Fe+=M(Ae,Fe)*W)),"waterfall"===G.type){if(!Pe){var Be=G[we.dir].marker;Te=Be.line.width,Le=Be.color}}else Te=d.getLineWidth(G,we),Le=we.mc||G.marker.color;function qe(Ge){var Ke=y.round(Te/2%1,2);return 0===U.gap&&0===U.groupgap?y.round(Math.round(Ge)-Ke,2):Ge}if(!F._context.staticPlot){var We=e.opacity(Le)<1||Te>.01?qe:function(Ge,Ke,nt){return nt&&Ge===Ke?Ge:Math.abs(Ge-Ke)>=2?qe(Ge):Ge>Ke?Math.ceil(Ge):Math.floor(Ge)};Ve=We(Ve,_e,ne),_e=We(_e,Ve,ne),Ae=We(Ae,Fe,!ne),Fe=We(Fe,Ae,!ne)}var Je=S(T.ensureSingle(Oe,"path"),ae,U,$);if(Je.style("vector-effect","non-scaling-stroke").attr("d",isNaN((_e-Ve)*(Fe-Ae))||Pe&&F._context.staticPlot?"M0,0Z":"M"+Ve+","+Ae+"V"+Fe+"H"+_e+"V"+Ae+"Z").call(o.setClipUrl,L.layerClipId,F),!ae.uniformtext.mode&&re){var ut=o.makePointStyleFns(G);o.singlePointStyle(we,Je,G,ut,F)}(function(Ge,Ke,nt,it,ht,Tt,Ct,Vt,Ft,gt,ft){var Bt,rn=Ke.xaxis,un=Ke.yaxis,pn=Ge._fullLayout;function dn(fn,an,Sn){return T.ensureSingle(fn,"text").text(an).attr({class:"bartext bartext-"+Bt,"text-anchor":"middle","data-notex":1}).call(o.font,Sn).call(_.convertToTspans,Ge)}var an,Sn,Yn,kn,cn,vn,Mn=it[0].trace,ln="h"===Mn.orientation,Ee=(Sn=ht,Yn=rn,kn=un,cn=(vn=(an=it)[0].trace).texttemplate?function(hn,Dn,Pn,$n,rr){var er=Dn[0].trace,or=T.castOption(er,Pn,"texttemplate");if(!or)return"";var Zr,zr,pr,Br,fr="histogram"===er.type,Nr="waterfall"===er.type,xi="funnel"===er.type,Qn="h"===er.orientation;function Er(wr){return l(Br,Br.c2l(wr),!0).text}Qn?(Zr="y",zr=rr,pr="x",Br=$n):(Zr="x",zr=$n,pr="y",Br=rr);var kr=Dn[Pn],sr={};sr.label=kr.p,sr.labelLabel=sr[Zr+"Label"]=l(zr,zr.c2l(kr.p),!0).text;var oi=T.castOption(er,kr.i,"text");(0===oi||oi)&&(sr.text=oi),sr.value=kr.s,sr.valueLabel=sr[pr+"Label"]=Er(kr.s);var Or={};u(Or,er,kr.i),(fr||void 0===Or.x)&&(Or.x=Qn?sr.value:sr.label),(fr||void 0===Or.y)&&(Or.y=Qn?sr.label:sr.value),(fr||void 0===Or.xLabel)&&(Or.xLabel=Qn?sr.valueLabel:sr.labelLabel),(fr||void 0===Or.yLabel)&&(Or.yLabel=Qn?sr.labelLabel:sr.valueLabel),Nr&&(sr.delta=+kr.rawS||kr.s,sr.deltaLabel=Er(sr.delta),sr.final=kr.v,sr.finalLabel=Er(sr.final),sr.initial=sr.final-sr.delta,sr.initialLabel=Er(sr.initial)),xi&&(sr.value=kr.s,sr.valueLabel=Er(sr.value),sr.percentInitial=kr.begR,sr.percentInitialLabel=T.formatPercent(kr.begR),sr.percentPrevious=kr.difR,sr.percentPreviousLabel=T.formatPercent(kr.difR),sr.percentTotal=kr.sumR,sr.percenTotalLabel=T.formatPercent(kr.sumR));var Dr=T.castOption(er,kr.i,"customdata");return Dr&&(sr.customdata=Dr),T.texttemplateString(or,sr,hn._d3locale,Or,sr,er._meta||{})}(pn,an,Sn,Yn,kn):vn.textinfo?function(hn,Dn,Pn,$n){var rr=hn[0].trace,er="h"===rr.orientation,or="waterfall"===rr.type,Zr="funnel"===rr.type;function zr(Dr){return l(er?Pn:$n,+Dr,!0).text}var pr,fr=hn[Dn],Nr=rr.textinfo.split("+"),xi=[],Qn=function(Dr){return-1!==Nr.indexOf(Dr)};if(Qn("label")&&xi.push(l(er?$n:Pn,hn[Dn].p,!0).text),Qn("text")&&(0===(pr=T.castOption(rr,fr.i,"text"))||pr)&&xi.push(pr),or){var kr=+fr.rawS||fr.s,sr=fr.v,ci=sr-kr;Qn("initial")&&xi.push(zr(ci)),Qn("delta")&&xi.push(zr(kr)),Qn("final")&&xi.push(zr(sr))}if(Zr){Qn("value")&&xi.push(zr(fr.s));var oi=0;Qn("percent initial")&&oi++,Qn("percent previous")&&oi++,Qn("percent total")&&oi++;var Or=oi>1;Qn("percent initial")&&(pr=T.formatPercent(fr.begR),Or&&(pr+=" of initial"),xi.push(pr)),Qn("percent previous")&&(pr=T.formatPercent(fr.difR),Or&&(pr+=" of previous"),xi.push(pr)),Qn("percent total")&&(pr=T.formatPercent(fr.sumR),Or&&(pr+=" of total"),xi.push(pr))}return xi.join("<br>")}(an,Sn,Yn,kn):d.getValue(vn.text,Sn),d.coerceString(g,cn));Bt=function(fn,an){var Sn=d.getValue(fn.textposition,an);return d.coerceEnumerated(m,Sn)}(Mn,ht);var Ie=it[ht],He=!("stack"===gt.mode||"relative"===gt.mode)||Ie._outmost;if(Ee&&"none"!==Bt&&(!Ie.isBlank&&Tt!==Ct&&Vt!==Ft||"auto"!==Bt&&"inside"!==Bt)){var Ye=pn.font,tt=s.getBarColor(it[ht],Mn),ot=s.getInsideTextFont(Mn,ht,Ye,tt),st=s.getOutsideTextFont(Mn,ht,Ye),bt=nt.datum();ln?"log"===rn.type&&bt.s0<=0&&(Tt=rn.range[0]<rn.range[1]?0:rn._length):"log"===un.type&&bt.s0<=0&&(Vt=un.range[0]<un.range[1]?un._length:0);var wt,Ut,Kt,vt,Et,$t=Math.abs(Ct-Tt)-2*w,Dt=Math.abs(Ft-Vt)-2*w;if("outside"===Bt&&(He||Ie.hasB||(Bt="inside")),"auto"===Bt&&(He?(Bt="inside",wt=dn(nt,Ee,Et=T.ensureUniformFontSize(Ge,ot)),vt=(Ut=o.bBox(wt.node())).height,(Kt=Ut.width)>0&&vt>0&&(Kt<=$t&&vt<=Dt||Kt<=Dt&&vt<=$t||(ln?$t>=Kt*(Dt/vt):Dt>=vt*($t/Kt)))?Bt="inside":(Bt="outside",wt.remove(),wt=null)):Bt="inside"),!wt){var pt=(wt=dn(nt,Ee,Et=T.ensureUniformFontSize(Ge,"outside"===Bt?st:ot))).attr("transform");if(wt.attr("transform",""),Kt=(Ut=o.bBox(wt.node())).width,vt=Ut.height,wt.attr("transform",pt),Kt<=0||vt<=0)return void wt.remove()}var It,Qt=Mn.textangle;It="outside"===Bt?function(fn,an,Sn,Yn,kn,cn){var vn,hn=!!cn.isHorizontal,Dn=!!cn.constrained,Pn=cn.angle||0,$n=kn.width,rr=kn.height,er=Math.abs(an-fn),or=Math.abs(Yn-Sn);vn=hn?or>2*w?w:0:er>2*w?w:0;var Zr=1;Dn&&(Zr=hn?Math.min(1,or/rr):Math.min(1,er/$n));var zr=O(Pn),pr=I(kn,zr),Br=(hn?pr.x:pr.y)/2,fr=(kn.left+kn.right)/2,Nr=(kn.top+kn.bottom)/2,xi=(fn+an)/2,Qn=(Sn+Yn)/2,Er=0,kr=0,sr=hn?M(an,fn):M(Sn,Yn);return hn?(xi=an-sr*vn,Er=sr*Br):(Qn=Yn+sr*vn,kr=-sr*Br),{textX:fr,textY:Nr,targetX:xi,targetY:Qn,anchorX:Er,anchorY:kr,scale:Zr,rotate:zr}}(Tt,Ct,Vt,Ft,Ut,{isHorizontal:ln,constrained:"both"===Mn.constraintext||"outside"===Mn.constraintext,angle:Qt}):N(Tt,Ct,Vt,Ft,Ut,{isHorizontal:ln,constrained:"both"===Mn.constraintext||"inside"===Mn.constraintext,angle:Qt,anchor:Mn.insidetextanchor}),It.fontSize=Et.size,v("histogram"===Mn.type?"bar":Mn.type,It,pn),Ie.transform=It,S(wt,pn,gt,ft).attr("transform",T.getTextTransform(It))}else nt.select("text").remove()})(F,L,Oe,ee,ye,Ve,_e,Ae,Fe,U,$),L.layerClipId&&o.hideOutsideRangePoint(we,Oe.select("text"),X,te,G.xcalendar,G.ycalendar)}),o.setClipUrl(se,!1===G.cliponaxis?null:L.layerClipId,F)});a.getComponentMethod("errorbars","plot")(F,J,L,U)},toMoveInsideBar:N}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(x,ue,le){"use strict";function y(b,T,_,e,o){var a=T.c2p(e?b.s0:b.p0,!0),l=T.c2p(e?b.s1:b.p1,!0),i=_.c2p(e?b.p0:b.s0,!0),v=_.c2p(e?b.p1:b.s1,!0);return o?[(a+l)/2,(i+v)/2]:e?[l,(i+v)/2]:[(a+l)/2,v]}ue.exports=function(b,T){var _,e=b.cd,o=b.xaxis,a=b.yaxis,l=e[0].trace,i="funnel"===l.type,v="h"===l.orientation,h=[];if(!1===T)for(_=0;_<e.length;_++)e[_].selected=0;else for(_=0;_<e.length;_++){var s=e[_],d="ct"in s?s.ct:y(s,o,a,v,i);T.contains(d,!1,_,b)?(h.push({pointNumber:_,x:o.c2d(s.x),y:a.c2d(s.y)}),s.selected=1):s.selected=0}return h}},{}],661:[function(x,ue,le){"use strict";ue.exports=T;var y=x("../../lib").distinctVals,b=x("../../constants/numerical").BADNUM;function T(_,e){this.traces=_,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var o=1/0,a=[],l=0;l<_.length;l++){for(var i=_[l],v=0;v<i.length;v++){var h=i[v];h.p!==b&&a.push(h.p)}i[0]&&i[0].width1&&(o=Math.min(i[0].width1,o))}this.positions=a;var s=y(a);this.distinctPositions=s.vals,this.minDiff=1===s.vals.length&&o!==1/0?o:Math.min(s.minDiff,o);var d=(e.posAxis||{}).type;"category"!==d&&"multicategory"!==d||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}T.prototype.put=function(_,e){var o=this.getLabel(_,e),a=this.bins[o]||0;return this.bins[o]=a+e,a},T.prototype.get=function(_,e){var o=this.getLabel(_,e);return this.bins[o]||0},T.prototype.getLabel=function(_,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?_:Math.round(_/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/color"),T=x("../../components/drawing"),_=x("../../lib"),e=x("../../registry"),o=x("./uniform_text").resizeText,a=x("./attributes"),l=a.textfont,i=a.insidetextfont,v=a.outsidetextfont,h=x("./helpers");function s(c,E,M){T.pointStyle(c.selectAll("path"),E,M),d(c,E,M)}function d(c,E,M){c.selectAll("text").each(function(S){var C=y.select(this),O=_.ensureUniformFontSize(M,p(C,S,E,M));T.font(C,O)})}function p(c,E,M,S){var C=S._fullLayout.font,O=M.textfont;if(c.classed("bartext-inside")){var I=w(E,M);O=g(M,E.i,C,I)}else c.classed("bartext-outside")&&(O=m(M,E.i,C));return O}function f(c,E,M){return u(l,c.textfont,E,M)}function g(c,E,M,S){var C=f(c,E,M);return(void 0===c._input.textfont||void 0===c._input.textfont.color||Array.isArray(c.textfont.color)&&void 0===c.textfont.color[E])&&(C={color:b.contrast(S),family:C.family,size:C.size}),u(i,c.insidetextfont,E,C)}function m(c,E,M){var S=f(c,E,M);return u(v,c.outsidetextfont,E,S)}function u(c,E,M,S){var C=h.getValue((E=E||{}).family,M),O=h.getValue(E.size,M),I=h.getValue(E.color,M);return{family:h.coerceString(c.family,C,S.family),size:h.coerceNumber(c.size,O,S.size),color:h.coerceColor(c.color,I,S.color)}}function w(c,E){return"waterfall"===E.type?E[c.dir].marker.color:c.mcc||c.mc||E.marker.color}ue.exports={style:function(c){var E=y.select(c).selectAll("g.barlayer").selectAll("g.trace");o(c,E,"bar");var M=E.size(),S=c._fullLayout;E.style("opacity",function(C){return C[0].trace.opacity}).each(function(C){("stack"===S.barmode&&M>1||0===S.bargap&&0===S.bargroupgap&&!C[0].trace.marker.line.width)&&y.select(this).attr("shape-rendering","crispEdges")}),E.selectAll("g.points").each(function(C){s(y.select(this),C[0].trace,c)}),e.getComponentMethod("errorbars","style")(E)},styleTextPoints:d,styleOnSelect:function(c,E,M){var C,O,I,N,F,L,S=E[0].trace;S.selectedpoints?(O=S,I=c,T.selectedPointStyle((C=M).selectAll("path"),O),N=C.selectAll("text"),F=O,L=I,N.each(function(P){var j,U=y.select(this);if(P.selected){j=_.ensureUniformFontSize(L,p(U,P,F,L));var $=F.selected.textfont&&F.selected.textfont.color;$&&(j.color=$),T.font(U,j)}else T.selectedTextStyle(U,F)})):(s(M,S,c),e.getComponentMethod("errorbars","style")(M))},getInsideTextFont:g,getOutsideTextFont:m,getBarColor:w,resizeText:o}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(x,ue,le){"use strict";var y=x("../../components/color"),b=x("../../components/colorscale/helpers").hasColorscale,T=x("../../components/colorscale/defaults"),_=x("../../lib").coercePattern;ue.exports=function(e,o,a,l,i){var v=a("marker.color",l),h=b(e,"marker");h&&T(e,o,i,a,{prefix:"marker.",cLetter:"c"}),a("marker.line.color",y.defaultLine),b(e,"marker.line")&&T(e,o,i,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width"),a("marker.opacity"),_(a,"marker.pattern",v,h),a("selected.marker.color"),a("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib");function T(_){return"_"+_+"Text_minsize"}ue.exports={recordMinTextSize:function(_,e,o){if(o.uniformtext.mode){var a=T(_),l=o.uniformtext.minsize,i=e.scale*e.fontSize;e.hide=i<l,o[a]=o[a]||1/0,e.hide||(o[a]=Math.min(o[a],Math.max(i,l)))}},clearMinTextSize:function(_,e){e[T(_)]=void 0},resizeText:function(_,e,o){var a=_._fullLayout,l=a["_"+o+"Text_minsize"];if(l){var i,v="hide"===a.uniformtext.mode;switch(o){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}e.selectAll(i).each(function(h){var s=h.transform;s&&(s.scale=v&&s.hide?0:l/s.fontSize,y.select(this).select("text").attr("transform",b.getTextTransform(s)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(x,ue,le){"use strict";var y=x("../../plots/template_attributes").hovertemplateAttrs,b=x("../../lib/extend").extendFlat,T=x("../scatterpolar/attributes"),_=x("../bar/attributes");ue.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:b({},_.base,{}),offset:b({},_.offset,{}),width:b({},_.width,{}),text:b({},_.text,{}),hovertext:b({},_.hovertext,{}),marker:_.marker,hoverinfo:T.hoverinfo,hovertemplate:y(),selected:_.selected,unselected:_.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1002}],666:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/helpers").hasColorscale,b=x("../../components/colorscale/calc"),T=x("../bar/arrays_to_calcdata"),_=x("../bar/cross_trace_calc").setGroupPositions,e=x("../scatter/calc_selection"),o=x("../../registry").traceIs,a=x("../../lib").extendFlat;ue.exports={calc:function(l,i){for(var v=l._fullLayout,h=i.subplot,d=v[h].angularaxis,p=v[h].radialaxis.makeCalcdata(i,"r"),f=d.makeCalcdata(i,"theta"),g=i._length,m=new Array(g),u=p,w=f,c=0;c<g;c++)m[c]={p:w[c],s:u[c]};function E(M){var S=i[M];void 0!==S&&(i["_"+M]=Array.isArray(S)?d.makeCalcdata(i,M):d.d2c(S,i.thetaunit))}return"linear"===d.type&&(E("width"),E("offset")),y(i,"marker")&&b(l,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),y(i,"marker.line")&&b(l,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(m,i),e(m,i),m},crossTraceCalc:function(l,i,v){for(var h=l.calcdata,s=[],d=0;d<h.length;d++){var p=h[d],f=p[0].trace;!0===f.visible&&o(f,"bar")&&f.subplot===v&&s.push(p)}var g=a({},i.radialaxis,{_id:"x"});_(l,i.angularaxis,g,s,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":929}],667:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatterpolar/defaults").handleRThetaDefaults,T=x("../bar/style_defaults"),_=x("./attributes");ue.exports=function(e,o,a,l){function i(v,h){return y.coerce(e,o,_,v,h)}b(e,o,l,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),T(e,o,i,a,l),y.coerceSelectionMarkerOpacity(o,i)):o.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1004,"./attributes":665}],668:[function(x,ue,le){"use strict";var y=x("../../components/fx"),b=x("../../lib"),T=x("../bar/hover").getTraceColor,_=b.fillText,e=x("../scatterpolar/hover").makeHoverPointText,o=x("../../plots/polar/helpers").isPtInsidePolygon;ue.exports=function(a,l,i){var v=a.cd,h=v[0].trace,s=a.subplot,d=s.radialAxis,f=s.vangles,g=f?o:b.isPtInsideSector,m=a.maxHoverDistance,u=s.angularAxis._period||2*Math.PI,w=Math.abs(d.g2p(Math.sqrt(l*l+i*i))),c=Math.atan2(i,l);if(d.range[0]>d.range[1]&&(c+=Math.PI),y.getClosest(v,function(S){return g(w,c,[S.rp0,S.rp1],[S.thetag0,S.thetag1],f)?m+Math.min(1,Math.abs(S.thetag1-S.thetag0)/u)-1+(S.rp1-w)/(S.rp1-S.rp0)-1:1/0},a),!1!==a.index){var E=v[a.index];a.x0=a.x1=E.ct[0],a.y0=a.y1=E.ct[1];var M=b.extendFlat({},E,{r:E.s,theta:E.p});return _(E,h,a),e(M,h,s,a),a.hovertemplate=h.hovertemplate,a.color=T(h,E),a.xLabelVal=a.yLabelVal=void 0,E.s<0&&(a.idealAlign="left"),[a]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1006}],669:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"barpolar",basePlotModule:x("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("../scatterpolar/format_labels"),style:x("../bar/style").style,styleOnSelect:x("../bar/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"../scatterpolar/format_labels":1005,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(x,ue,le){"use strict";ue.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_,e){var o,a={};function l(h,s){return y.coerce(T[o]||{},_[o],b,h,s)}for(var i=0;i<e.length;i++){var v=e[i];"barpolar"===v.type&&!0===v.visible&&(a[o=v.subplot]||(l("barmode"),l("bargap"),a[o]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("fast-isnumeric"),T=x("../../lib"),_=x("../../components/drawing"),e=x("../../plots/polar/helpers");ue.exports=function(o,a,l){var f,g,m,i=a.xaxis,v=a.yaxis,h=a.radialAxis,s=a.angularAxis,d=(g=(f=a).cxx,m=f.cyy,f.vangles?function(u,w,c,E){var M,S;T.angleDelta(c,E)>0?(M=c,S=E):(M=E,S=c);var C=[e.findEnclosingVertexAngles(M,f.vangles)[0],(M+S)/2,e.findEnclosingVertexAngles(S,f.vangles)[1]];return e.pathPolygonAnnulus(u,w,M,S,C,g,m)}:function(u,w,c,E){return T.pathAnnulus(u,w,c,E,g,m)}),p=a.layers.frontplot.select("g.barlayer");T.makeTraceGroups(p,l,"trace bars").each(function(){var f=y.select(this),g=T.ensureSingle(f,"g","points").selectAll("g.point").data(T.identity);g.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),g.exit().remove(),g.each(function(m){var u,w=y.select(this),c=m.rp0=h.c2p(m.s0),E=m.rp1=h.c2p(m.s1),M=m.thetag0=s.c2g(m.p0),S=m.thetag1=s.c2g(m.p1);if(b(c)&&b(E)&&b(M)&&b(S)&&c!==E&&M!==S){var C=h.c2g(m.s1),O=(M+S)/2;m.ct=[i.c2p(C*Math.cos(O)),v.c2p(C*Math.sin(O))],u=d(c,E,M,S)}else u="M0,0Z";T.ensureSingle(w,"path").attr("d",u)}),_.setClipUrl(f,a._hasClipOnAxisFalse?a.clipIds.forTraces:null,o)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(x,ue,le){"use strict";var y=x("../scatter/attributes"),b=x("../bar/attributes"),T=x("../../components/color/attributes"),_=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../plots/template_attributes").hovertemplateAttrs,o=x("../../lib/extend").extendFlat,a=y.marker,l=a.line;ue.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:o({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:o({},a.size,{arrayOk:!1,editType:"calc"}),color:o({},a.color,{arrayOk:!1,editType:"style"}),line:{color:o({},l.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:o({},l.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:y.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:b.offsetgroup,alignmentgroup:b.alignmentgroup,selected:{marker:y.selected.marker,editType:"style"},unselected:{marker:y.unselected.marker,editType:"style"},text:o({},y.text,{}),hovertext:o({},y.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927}],674:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../plots/cartesian/axes"),T=x("../../plots/cartesian/align_period"),_=x("../../lib"),e=x("../../constants/numerical").BADNUM,o=_._;ue.exports=function(g,m){var u,w,c,E,M,S,C,O=g._fullLayout,I=b.getFromId(g,m.xaxis||"x"),N=b.getFromId(g,m.yaxis||"y"),F=[],L="violin"===m.type?"_numViolins":"_numBoxes";"h"===m.orientation?(c=I,E="x",M=N,S="y",C=!!m.yperiodalignment):(c=N,E="y",M=I,S="x",C=!!m.xperiodalignment);var P,j,U,$,X,te,ae=function(nt,it,ht,Tt){var Ct,Vt=it+"0"in nt;if(it in nt||Vt&&"d"+it in nt){var gt=ht.makeCalcdata(nt,it);return[T(nt,ht,it,gt).vals,gt]}Ct=Vt?nt[it+"0"]:"name"in nt&&("category"===ht.type||y(nt.name)&&-1!==["linear","log"].indexOf(ht.type)||_.isDateTime(nt.name)&&"date"===ht.type)?nt.name:Tt;for(var ft="multicategory"===ht.type?ht.r2c_just_indices(Ct):ht.d2c(Ct,0,nt[it+"calendar"]),Bt=nt._length,rn=new Array(Bt),un=0;un<Bt;un++)rn[un]=ft;return[rn]}(m,S,M,O[L]),J=ae[0],ee=ae[1],se=_.distinctVals(J,M),G=se.vals,H=se.minDiff/2,Y="all"===(m.boxpoints||m.points)?_.identity:function(nt){return nt.v<P.lf||nt.v>P.uf};if(m._hasPreCompStats){var oe=m[E],W=function(nt){return c.d2c((m[nt]||[])[u])},ne=1/0,re=-1/0;for(u=0;u<m._length;u++){var ce=J[u];if(y(ce)){if((P={}).pos=P[S]=ce,C&&ee&&(P.orig_p=ee[u]),P.q1=W("q1"),P.med=W("median"),P.q3=W("q3"),j=[],oe&&_.isArrayOrTypedArray(oe[u]))for(w=0;w<oe[u].length;w++)(te=c.d2c(oe[u][w]))!==e&&(l(X={v:te,i:[u,w]},m,[u,w]),j.push(X));if(P.pts=j.sort(i),$=(U=P[E]=j.map(v)).length,P.med!==e&&P.q1!==e&&P.q3!==e&&P.med>=P.q1&&P.q3>=P.med){var fe=W("lowerfence");P.lf=fe!==e&&fe<=P.q1?fe:h(P,U,$);var me=W("upperfence");P.uf=me!==e&&me>=P.q3?me:s(P,U,$);var pe=W("mean");P.mean=pe!==e?pe:$?_.mean(U,$):(P.q1+P.q3)/2;var we=W("sd");P.sd=pe!==e&&we>=0?we:$?_.stdev(U,$,P.mean):P.q3-P.q1,P.lo=d(P),P.uo=p(P);var ye=W("notchspan");ye=ye!==e&&ye>0?ye:f(P,$),P.ln=P.med-ye,P.un=P.med+ye;var Te=P.lf,Le=P.uf;m.boxpoints&&U.length&&(Te=Math.min(Te,U[0]),Le=Math.max(Le,U[$-1])),m.notched&&(Te=Math.min(Te,P.ln),Le=Math.max(Le,P.un)),P.min=Te,P.max=Le}else{var Oe;_.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join("\n")),P.med=Oe=P.med!==e?P.med:P.q1!==e?P.q3!==e?(P.q1+P.q3)/2:P.q1:P.q3!==e?P.q3:0,P.q1=P.q3=Oe,P.lf=P.uf=Oe,P.mean=P.sd=Oe,P.ln=P.un=Oe,P.min=P.max=Oe}ne=Math.min(ne,P.min),re=Math.max(re,P.max),P.pts2=j.filter(Y),F.push(P)}}m._extremes[c._id]=b.findExtremes(c,[ne,re],{padded:!0})}else{var Re=c.makeCalcdata(m,E),Ve=function(nt,it){for(var ht=nt.length,Tt=new Array(ht+1),Ct=0;Ct<ht;Ct++)Tt[Ct]=nt[Ct]-it;return Tt[ht]=nt[ht-1]+it,Tt}(G,H),_e=G.length,Ae=function(nt){for(var it=new Array(nt),ht=0;ht<nt;ht++)it[ht]=[];return it}(_e);for(u=0;u<m._length;u++)if(y(te=Re[u])){var Fe=_.findBin(J[u],Ve);Fe>=0&&Fe<_e&&(l(X={v:te,i:u},m,u),Ae[Fe].push(X))}var Pe=1/0,Be=-1/0,qe=m.quartilemethod,We="exclusive"===qe,Je="inclusive"===qe;for(u=0;u<_e;u++)if(Ae[u].length>0){var ut,Ge;(P={}).pos=P[S]=G[u],j=P.pts=Ae[u].sort(i),$=(U=P[E]=j.map(v)).length,P.min=U[0],P.max=U[$-1],P.mean=_.mean(U,$),P.sd=_.stdev(U,$,P.mean),P.med=_.interp(U,.5),$%2&&(We||Je)?(We?(ut=U.slice(0,$/2),Ge=U.slice($/2+1)):Je&&(ut=U.slice(0,$/2+1),Ge=U.slice($/2)),P.q1=_.interp(ut,.5),P.q3=_.interp(Ge,.5)):(P.q1=_.interp(U,.25),P.q3=_.interp(U,.75)),P.lf=h(P,U,$),P.uf=s(P,U,$),P.lo=d(P),P.uo=p(P);var Ke=f(P,$);P.ln=P.med-Ke,P.un=P.med+Ke,Pe=Math.min(Pe,P.ln),Be=Math.max(Be,P.un),P.pts2=j.filter(Y),F.push(P)}m._extremes[c._id]=b.findExtremes(c,m.notched?Re.concat([Pe,Be]):Re,{padded:!0})}return function(nt,it){if(_.isArrayOrTypedArray(it.selectedpoints))for(var ht=0;ht<nt.length;ht++){for(var Tt=nt[ht].pts||[],Ct={},Vt=0;Vt<Tt.length;Vt++)Ct[Tt[Vt].i]=Vt;_.tagSelected(Tt,it,Ct)}}(F,m),F.length>0?(F[0].t={num:O[L],dPos:H,posLetter:S,valLetter:E,labels:{med:o(g,"median:"),min:o(g,"min:"),q1:o(g,"q1:"),q3:o(g,"q3:"),max:o(g,"max:"),mean:o(g,"sd"===m.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:o(g,"lower fence:"),uf:o(g,"upper fence:")}},O[L]++,F):[{t:{empty:!0}}]};var a={text:"tx",hovertext:"htx"};function l(g,m,u){for(var w in a)_.isArrayOrTypedArray(m[w])&&(Array.isArray(u)?_.isArrayOrTypedArray(m[w][u[0]])&&(g[a[w]]=m[w][u[0]][u[1]]):g[a[w]]=m[w][u])}function i(g,m){return g.v-m.v}function v(g){return g.v}function h(g,m,u){return 0===u?g.q1:Math.min(g.q1,m[Math.min(_.findBin(2.5*g.q1-1.5*g.q3,m,!0)+1,u-1)])}function s(g,m,u){return 0===u?g.q3:Math.max(g.q3,m[Math.max(_.findBin(2.5*g.q3-1.5*g.q1,m),0)])}function d(g){return 4*g.q1-3*g.q3}function p(g){return 4*g.q3-3*g.q1}function f(g,m){return 0===m?0:1.57*(g.q3-g.q1)/Math.sqrt(m)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../lib"),T=x("../../plots/cartesian/constraints").getAxisGroup,_=["v","h"];function e(o,a,l,i){var v,h,s,d=a.calcdata,p=a._fullLayout,f=i._id,g=f.charAt(0),m=[],u=0;for(v=0;v<l.length;v++)for(s=d[l[v]],h=0;h<s.length;h++)m.push(i.c2l(s[h].pos,!0)),u+=(s[h].pts2||[]).length;if(m.length){var w=b.distinctVals(m);"category"!==i.type&&"multicategory"!==i.type||(w.minDiff=1);var c=w.minDiff/2;y.minDtick(i,w.minDiff,w.vals[0],!0);var E=p["violin"===o?"_numViolins":"_numBoxes"],M="group"===p[o+"mode"]&&E>1,S=1-p[o+"gap"],C=1-p[o+"groupgap"];for(v=0;v<l.length;v++){var O,I,N,F,L,P,j=(s=d[l[v]])[0].trace,U=s[0].t,$=j.width,X=j.side;if($)O=I=F=$/2,N=0;else if(O=c,M){var te=T(p,i._id)+j.orientation,J=Object.keys(((p._alignmentOpts[te]||{})[j.alignmentgroup]||{}).offsetGroups||{}).length,ee=J||E;I=O*S*C/ee,N=2*O*(((J?j._offsetIndex:U.num)+.5)/ee-.5)*S,F=O*S/ee}else I=O*S*C,N=0,F=O;U.dPos=O,U.bPos=N,U.bdPos=I,U.wHover=F;var se,G,H,Y,oe,W,ne=N+I,re=Boolean($);if("positive"===X?(L=O*($?1:.5),se=ne,P=se=N):"negative"===X?(L=se=N,P=O*($?1:.5),G=ne):(L=P=O,se=G=ne),(j.boxpoints||j.points)&&u>0){var ce=j.pointpos,fe=j.jitter,me=j.marker.size/2,pe=0;ce+fe>=0&&((pe=ne*(ce+fe))>L?(re=!0,oe=me,H=pe):pe>se&&(oe=me,H=L)),pe<=L&&(H=L);var we=0;ce-fe<=0&&((we=-ne*(ce-fe))>P?(re=!0,W=me,Y=we):we>G&&(W=me,Y=P)),we<=P&&(Y=P)}else H=L,Y=P;var ye=new Array(s.length);for(h=0;h<s.length;h++)ye[h]=s[h].pos;j._extremes[f]=y.findExtremes(i,ye,{padded:re,vpadminus:Y,vpadplus:H,vpadLinearized:!0,ppadminus:{x:W,y:oe}[g],ppadplus:{x:oe,y:W}[g]})}}}ue.exports={crossTraceCalc:function(o,a){for(var l=o.calcdata,i=a.xaxis,v=a.yaxis,h=0;h<_.length;h++){for(var s=_[h],d="h"===s?v:i,p=[],f=0;f<l.length;f++){var g=l[f],u=g[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||g[0].t.empty||(u.orientation||"v")!==s||u.xaxis!==i._id||u.yaxis!==v._id||p.push(f)}e("box",o,p,d)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../registry"),T=x("../../components/color"),_=x("../scatter/period_defaults"),e=x("../bar/defaults").handleGroupingDefaults,o=x("../../plots/cartesian/axis_autotype"),a=x("./attributes");function l(v,h,s,d){function p(X){var te=0;return X&&X.length&&(te+=1,y.isArrayOrTypedArray(X[0])&&X[0].length&&(te+=1)),te}function f(X){return y.validate(v[X],a[X])}var g,m=s("y"),u=s("x");if("box"===h.type){var w=s("q1"),c=s("median"),E=s("q3");h._hasPreCompStats=w&&w.length&&c&&c.length&&E&&E.length,g=Math.min(y.minRowLength(w),y.minRowLength(c),y.minRowLength(E))}var M,S,C=p(m),O=p(u),I=C&&y.minRowLength(m),N=O&&y.minRowLength(u),F=d.calendar,L={autotypenumbers:d.autotypenumbers};if(h._hasPreCompStats)switch(String(O)+String(C)){case"00":var P=f("x0")||f("dx");M=!f("y0")&&!f("dy")||P?"v":"h",S=g;break;case"10":M="v",S=Math.min(g,N);break;case"20":M="h",S=Math.min(g,u.length);break;case"01":M="h",S=Math.min(g,I);break;case"02":M="v",S=Math.min(g,m.length);break;case"12":M="v",S=Math.min(g,N,m.length);break;case"21":M="h",S=Math.min(g,u.length,I);break;case"11":S=0;break;case"22":var j,U=!1;for(j=0;j<u.length;j++)if("category"===o(u[j],F,L)){U=!0;break}if(U)M="v",S=Math.min(g,N,m.length);else{for(j=0;j<m.length;j++)if("category"===o(m[j],F,L)){U=!0;break}U?(M="h",S=Math.min(g,u.length,I)):(M="v",S=Math.min(g,N,m.length))}}else C>0?(M="v",S=O>0?Math.min(N,I):Math.min(I)):O>0?(M="h",S=Math.min(N)):S=0;if(S){h._length=S;var $=s("orientation",M);h._hasPreCompStats?"v"===$&&0===O?(s("x0",0),s("dx",1)):"h"===$&&0===C&&(s("y0",0),s("dy",1)):"v"===$&&0===O?s("x0"):"h"===$&&0===C&&s("y0"),b.getComponentMethod("calendars","handleTraceDefaults")(v,h,["x","y"],d)}else h.visible=!1}function i(v,h,s,d){var p=d.prefix,f=y.coerce2(v,h,a,"marker.outliercolor"),g=s("marker.line.outliercolor"),m="outliers";h._hasPreCompStats?m="all":(f||g)&&(m="suspectedoutliers");var u=s(p+"points",m);u?(s("jitter","all"===u?.3:0),s("pointpos","all"===u?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.color",h.line.color),s("marker.line.color"),s("marker.line.width"),"suspectedoutliers"===u&&(s("marker.line.outliercolor",h.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete h.marker;var w=s("hoveron");"all"!==w&&-1===w.indexOf("points")||s("hovertemplate"),y.coerceSelectionMarkerOpacity(h,s)}ue.exports={supplyDefaults:function(v,h,s,d){function p(E,M){return y.coerce(v,h,a,E,M)}if(l(v,h,p,d),!1!==h.visible){_(v,h,d,p),p("xhoverformat"),p("yhoverformat");var f=h._hasPreCompStats;f&&(p("lowerfence"),p("upperfence")),p("line.color",(v.marker||{}).color||s),p("line.width"),p("fillcolor",T.addOpacity(h.line.color,.5));var g=!1;if(f){var m=p("mean"),u=p("sd");m&&m.length&&(g=!0,u&&u.length&&(g="sd"))}p("boxmean",g),p("whiskerwidth"),p("width"),p("quartilemethod");var w=!1;if(f){var c=p("notchspan");c&&c.length&&(w=!0)}else y.validate(v.notchwidth,a.notchwidth)&&(w=!0);p("notched",w)&&p("notchwidth"),i(v,h,p,{prefix:"box"})}},crossTraceDefaults:function(v,h){var d;function p(m){return y.coerce(d._input,d,a,m)}for(var f=0;f<v.length;f++){var g=(d=v[f]).type;"box"!==g&&"violin"!==g||"group"===h[g+"mode"]&&e(d._input,d,h,p)}},handleSampleDefaults:l,handlePointsDefaults:i}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":947,"./attributes":673}],677:[function(x,ue,le){"use strict";ue.exports=function(y,b){return b.hoverOnBox&&(y.hoverOnBox=b.hoverOnBox),"xVal"in b&&(y.x=b.xVal),"yVal"in b&&(y.y=b.yVal),b.xa&&(y.xaxis=b.xa),b.ya&&(y.yaxis=b.ya),y}},{}],678:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../lib"),T=x("../../components/fx"),_=x("../../components/color"),e=b.fillText;function o(l,i,v,h){var s,d,p,f,g,m,u,w,c,E,M,S,C,O,I=l.cd,N=l.xa,F=l.ya,L=I[0].trace,P=I[0].t,j="violin"===L.type,U=[],$=P.bdPos,X=P.wHover,te=function(pe){return p.c2l(pe.pos)+P.bPos-p.c2l(m)};j&&"both"!==L.side?("positive"===L.side&&(c=function(pe){var we=te(pe);return T.inbox(we,we+X,E)},S=$,C=0),"negative"===L.side&&(c=function(pe){var we=te(pe);return T.inbox(we-X,we,E)},S=0,C=$)):(c=function(pe){var we=te(pe);return T.inbox(we-X,we+X,E)},S=C=$),O=j?function(pe){return T.inbox(pe.span[0]-g,pe.span[1]-g,E)}:function(pe){return T.inbox(pe.min-g,pe.max-g,E)},"h"===L.orientation?(g=i,m=v,u=O,w=c,s="y",p=F,d="x",f=N):(g=v,m=i,u=c,w=O,s="x",p=N,d="y",f=F);var ae=Math.min(1,$/Math.abs(p.r2c(p.range[1])-p.r2c(p.range[0])));function J(pe){return(u(pe)+w(pe))/2}E=l.maxHoverDistance-ae,M=l.maxSpikeDistance-ae;var ee=T.getDistanceFunction(h,u,w,J);if(T.getClosest(I,ee,l),!1===l.index)return[];var se=I[l.index],G=L.line.color,H=(L.marker||{}).color;l.color=_.opacity(G)&&L.line.width?G:_.opacity(H)&&L.boxpoints?H:L.fillcolor,l[s+"0"]=p.c2p(se.pos+P.bPos-C,!0),l[s+"1"]=p.c2p(se.pos+P.bPos+S,!0),l[s+"LabelVal"]=void 0!==se.orig_p?se.orig_p:se.pos;var Y=s+"Spike";l.spikeDistance=J(se)*M/E,l[Y]=p.c2p(se.pos,!0);var oe={},W=["med","q1","q3","min","max"];(L.boxmean||(L.meanline||{}).visible)&&W.push("mean"),(L.boxpoints||L.points)&&W.push("lf","uf");for(var ne=0;ne<W.length;ne++){var re=W[ne];if(re in se&&!(se[re]in oe)){oe[se[re]]=!0;var ce=se[re],fe=f.c2p(ce,!0),me=b.extendFlat({},l);me.attr=re,me[d+"0"]=me[d+"1"]=fe,me[d+"LabelVal"]=ce,me[d+"Label"]=(P.labels?P.labels[re]+" ":"")+y.hoverLabelText(f,ce,L[d+"hoverformat"]),me.hoverOnBox=!0,"mean"===re&&"sd"in se&&"sd"===L.boxmean&&(me[d+"err"]=se.sd),l.name="",l.spikeDistance=void 0,l[Y]=void 0,me.hovertemplate=!1,U.push(me)}}return U}function a(l,i,v){for(var h,s,d,p=l.cd,f=l.xa,g=l.ya,m=p[0].trace,u=f.c2p(i),w=g.c2p(v),c=T.quadrature(function(j){var U=Math.max(3,j.mrc||0);return Math.max(Math.abs(f.c2p(j.x)-u)-U,1-3/U)},function(j){var U=Math.max(3,j.mrc||0);return Math.max(Math.abs(g.c2p(j.y)-w)-U,1-3/U)}),E=!1,M=0;M<p.length;M++){s=p[M];for(var S=0;S<(s.pts||[]).length;S++){var C=c(d=s.pts[S]);C<=l.distance&&(l.distance=C,E=[M,S])}}if(!E)return!1;d=(s=p[E[0]]).pts[E[1]];var O=f.c2p(d.x,!0),I=g.c2p(d.y,!0),N=d.mrc||1;h=b.extendFlat({},l,{index:d.i,color:(m.marker||{}).color,name:m.name,x0:O-N,x1:O+N,y0:I-N,y1:I+N,spikeDistance:l.distance,hovertemplate:m.hovertemplate});var F,L=s.orig_p,P=void 0!==L?L:s.pos;return"h"===m.orientation?(F=g,h.xLabelVal=d.x,h.yLabelVal=P):(F=f,h.xLabelVal=P,h.yLabelVal=d.y),h[F._id.charAt(0)+"Spike"]=F.c2p(s.pos,!0),e(d,m,h),h}ue.exports={hoverPoints:function(l,i,v,h){var s,d=l.cd[0].trace.hoveron,p=[];return-1!==d.indexOf("boxes")&&(p=p.concat(o(l,i,v,h))),-1!==d.indexOf("points")&&(s=a(l,i,v)),"closest"===h?s?[s]:p:(s&&p.push(s),p)},hoverOnBoxes:o,hoverOnPoints:a}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults").supplyLayoutDefaults,calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc").crossTraceCalc,plot:x("./plot").plot,style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"box",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(x,ue,le){"use strict";ue.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("./layout_attributes");function _(e,o,a,l,i){for(var v=i+"Layout",h=!1,s=0;s<a.length;s++)if(y.traceIs(a[s],v)){h=!0;break}h&&(l(i+"mode"),l(i+"gap"),l(i+"groupgap"))}ue.exports={supplyLayoutDefaults:function(e,o,a){_(0,0,a,function(l,i){return b.coerce(e,o,T,l,i)},"box")},_supply:_}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../components/drawing");function _(a,l,i,v){var h,s,d="h"===i.orientation,p=l.val,f=l.pos,g=!!f.rangebreaks,m=v.bPos,u=v.wdPos||0,w=v.bPosPxOffset||0,c=i.whiskerwidth||0,E=i.notched||!1,M=E?1-2*i.notchwidth:1;Array.isArray(v.bdPos)?(h=v.bdPos[0],s=v.bdPos[1]):(h=v.bdPos,s=v.bdPos);var S=a.selectAll("path.box").data("violin"!==i.type||i.box.visible?b.identity:[]);S.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(C){if(C.empty)return"M0,0Z";var O=f.c2l(C.pos+m,!0),I=f.l2p(O-h)+w,N=f.l2p(O+s)+w,F=g?(I+N)/2:f.l2p(O)+w,L=i.whiskerwidth,P=g?I*L+(1-L)*F:f.l2p(O-u)+w,j=g?N*L+(1-L)*F:f.l2p(O+u)+w,U=f.l2p(O-h*M)+w,$=f.l2p(O+s*M)+w,X=p.c2p(C.q1,!0),te=p.c2p(C.q3,!0),ae=b.constrain(p.c2p(C.med,!0),Math.min(X,te)+1,Math.max(X,te)-1),J=void 0===C.lf||!1===i.boxpoints,ee=p.c2p(J?C.min:C.lf,!0),se=p.c2p(J?C.max:C.uf,!0),G=p.c2p(C.ln,!0),H=p.c2p(C.un,!0);d?y.select(this).attr("d","M"+ae+","+U+"V"+$+"M"+X+","+I+"V"+N+(E?"H"+G+"L"+ae+","+$+"L"+H+","+N:"")+"H"+te+"V"+I+(E?"H"+H+"L"+ae+","+U+"L"+G+","+I:"")+"ZM"+X+","+F+"H"+ee+"M"+te+","+F+"H"+se+(0===c?"":"M"+ee+","+P+"V"+j+"M"+se+","+P+"V"+j)):y.select(this).attr("d","M"+U+","+ae+"H"+$+"M"+I+","+X+"H"+N+(E?"V"+G+"L"+$+","+ae+"L"+N+","+H:"")+"V"+te+"H"+I+(E?"V"+H+"L"+U+","+ae+"L"+I+","+G:"")+"ZM"+F+","+X+"V"+ee+"M"+F+","+te+"V"+se+(0===c?"":"M"+P+","+ee+"H"+j+"M"+P+","+se+"H"+j))})}function e(a,l,i,v){var h=l.x,s=l.y,d=v.bdPos,p=v.bPos,f=i.boxpoints||i.points;b.seedPseudoRandom();var g=a.selectAll("g.points").data(f?function(u){return u.forEach(function(w){w.t=v,w.trace=i}),u}:[]);g.enter().append("g").attr("class","points"),g.exit().remove();var m=g.selectAll("path").data(function(u){var w,c,E=u.pts2,M=Math.max((u.max-u.min)/10,u.q3-u.q1),S=1e-9*M,C=.01*M,O=[],I=0;if(i.jitter){if(0===M)for(I=1,O=new Array(E.length),w=0;w<E.length;w++)O[w]=1;else for(w=0;w<E.length;w++){var N=Math.max(0,w-5),F=E[N].v,L=Math.min(E.length-1,w+5),P=E[L].v;"all"!==f&&(E[w].v<u.lf?P=Math.min(P,u.lf):F=Math.max(F,u.uf));var j=Math.sqrt(C*(L-N)/(P-F+S))||0;j=b.constrain(Math.abs(j),0,1),O.push(j),I=Math.max(j,I)}c=2*i.jitter/(I||1)}for(w=0;w<E.length;w++){var U=E[w],$=U.v,X=i.jitter?c*O[w]*(b.pseudoRandom()-.5):0,te=u.pos+p+d*(i.pointpos+X);"h"===i.orientation?(U.y=te,U.x=$):(U.x=te,U.y=$),"suspectedoutliers"===f&&$<u.uo&&$>u.lo&&(U.so=!0)}return E});m.enter().append("path").classed("point",!0),m.exit().remove(),m.call(T.translatePoints,h,s)}function o(a,l,i,v){var h,s,d=l.val,p=l.pos,f=!!p.rangebreaks,g=v.bPos,m=v.bPosPxOffset||0,u=i.boxmean||(i.meanline||{}).visible;Array.isArray(v.bdPos)?(h=v.bdPos[0],s=v.bdPos[1]):(h=v.bdPos,s=v.bdPos);var w=a.selectAll("path.mean").data("box"===i.type&&i.boxmean||"violin"===i.type&&i.box.visible&&i.meanline.visible?b.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(c){var E=p.c2l(c.pos+g,!0),M=p.l2p(E-h)+m,S=p.l2p(E+s)+m,C=f?(M+S)/2:p.l2p(E)+m,O=d.c2p(c.mean,!0),I=d.c2p(c.mean-c.sd,!0),N=d.c2p(c.mean+c.sd,!0);"h"===i.orientation?y.select(this).attr("d","M"+O+","+M+"V"+S+("sd"===u?"m0,0L"+I+","+C+"L"+O+","+M+"L"+N+","+C+"Z":"")):y.select(this).attr("d","M"+M+","+O+"H"+S+("sd"===u?"m0,0L"+C+","+I+"L"+M+","+O+"L"+C+","+N+"Z":""))})}ue.exports={plot:function(a,l,i,v){var h=l.xaxis,s=l.yaxis;b.makeTraceGroups(v,i,"trace boxes").each(function(d){var p,f,g=y.select(this),m=d[0],u=m.t,w=m.trace;u.wdPos=u.bdPos*w.whiskerwidth,!0!==w.visible||u.empty?g.remove():("h"===w.orientation?(p=s,f=h):(p=h,f=s),_(g,{pos:p,val:f},w,u),e(g,{x:h,y:s},w,u),o(g,{pos:p,val:f},w,u))})},plotBoxAndWhiskers:_,plotPoints:e,plotBoxMean:o}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(x,ue,le){"use strict";ue.exports=function(y,b){var T,_,e=y.cd,o=y.xaxis,a=y.yaxis,l=[];if(!1===b)for(T=0;T<e.length;T++)for(_=0;_<(e[T].pts||[]).length;_++)e[T].pts[_].selected=0;else for(T=0;T<e.length;T++)for(_=0;_<(e[T].pts||[]).length;_++){var i=e[T].pts[_],v=o.c2p(i.x),h=a.c2p(i.y);b.contains([v,h],null,i.i,y)?(l.push({pointNumber:i.i,x:o.c2d(i.x),y:a.c2d(i.y)}),i.selected=1):i.selected=0}return l}},{}],684:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/color"),T=x("../../components/drawing");ue.exports={style:function(_,e,o){var a=o||y.select(_).selectAll("g.trace.boxes");a.style("opacity",function(l){return l[0].trace.opacity}),a.each(function(l){var i=y.select(this),v=l[0].trace,h=v.line.width;function s(f,g,m,u){f.style("stroke-width",g+"px").call(b.stroke,m).call(b.fill,u)}var d=i.selectAll("path.box");if("candlestick"===v.type)d.each(function(f){if(!f.empty){var g=y.select(this),m=v[f.dir];s(g,m.line.width,m.line.color,m.fillcolor),g.style("opacity",v.selectedpoints&&!f.selected?.3:1)}});else{s(d,h,v.line.color,v.fillcolor),i.selectAll("path.mean").style({"stroke-width":h,"stroke-dasharray":2*h+"px,"+h+"px"}).call(b.stroke,v.line.color);var p=i.selectAll("path.point");T.pointStyle(p,v,_)}})},styleOnSelect:function(_,e,o){var a=e[0].trace,l=o.selectAll("path.point");a.selectedpoints?T.selectedPointStyle(l,a):T.pointStyle(l,a,_)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(x,ue,le){"use strict";var y=x("../../lib").extendFlat,b=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=x("../ohlc/attributes"),_=x("../box/attributes");function e(o){return{line:{color:y({},_.line.color,{dflt:o}),width:_.line.width,editType:"style"},fillcolor:_.fillcolor,editType:"style"}}ue.exports={xperiod:T.xperiod,xperiod0:T.xperiod0,xperiodalignment:T.xperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),x:T.x,open:T.open,high:T.high,low:T.low,close:T.close,line:{width:y({},_.line.width,{}),editType:"style"},increasing:e(T.increasing.line.color.dflt),decreasing:e(T.decreasing.line.color.dflt),text:T.text,hovertext:T.hovertext,whiskerwidth:y({},_.whiskerwidth,{dflt:0}),hoverlabel:T.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("../../plots/cartesian/align_period"),_=x("../ohlc/calc").calcCommon;function e(o,a,l,i){return{min:l,q1:Math.min(o,i),med:i,q3:Math.max(o,i),max:a}}ue.exports=function(o,a){var l=o._fullLayout,i=b.getFromId(o,a.xaxis),v=b.getFromId(o,a.yaxis),h=i.makeCalcdata(a,"x"),s=T(a,i,"x",h).vals,d=_(o,a,h,s,v,e);return d.length?(y.extendFlat(d[0].t,{num:l._numBoxes,dPos:y.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),l._numBoxes++,d):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/color"),T=x("../ohlc/ohlc_defaults"),_=x("../scatter/period_defaults"),e=x("./attributes");function o(a,l,i,v){var h=i(v+".line.color");i(v+".line.width",l.line.width),i(v+".fillcolor",b.addOpacity(h,.5))}ue.exports=function(a,l,i,v){function h(s,d){return y.coerce(a,l,e,s,d)}T(a,l,h,v)?(_(a,l,v,h,{x:!0}),h("xhoverformat"),h("yhoverformat"),h("line.width"),o(0,l,h,"increasing"),o(0,l,h,"decreasing"),h("text"),h("hovertext"),h("whiskerwidth"),v._requestRangeslider[l.xaxis]=!0):l.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":947,"./attributes":685}],688:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"candlestick",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:x("./attributes"),layoutAttributes:x("../box/layout_attributes"),supplyLayoutDefaults:x("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:x("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("../box/plot").plot,layerName:"boxlayer",style:x("../box/style").style,hoverPoints:x("../ohlc/hover").hoverPoints,selectPoints:x("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(x,ue,le){"use strict";var y=x("./axis_defaults"),b=x("../../plot_api/plot_template");ue.exports=function(T,_,e,o,a){var l,i,v,h;o("a")||(o("da"),o("a0")),o("b")||(o("db"),o("b0")),l=T,i=_,v=e,h=a,["aaxis","baxis"].forEach(function(s){var d=s.charAt(0),p=l[s]||{},f=b.newContainer(i,s);y(p,f,{noTicklabelstep:!0,tickfont:"x",id:d+"axis",letter:d,font:i.font,name:s,data:l[d],calendar:i.calendar,dfltColor:h,bgColor:v.paper_bgcolor,autotypenumbersDflt:v.autotypenumbers,fullLayout:v}),f._categories=f._categories||[],l[s]||"-"===p.type||(l[s]={type:p.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(x,ue,le){"use strict";var y=x("../../lib").isArrayOrTypedArray;ue.exports=function(b){return function T(_,e){if(!y(_)||e>=10)return null;for(var o=1/0,a=-1/0,l=_.length,i=0;i<l;i++){var v=_[i];if(y(v)){var h=T(v,e+1);h&&(o=Math.min(h[0],o),a=Math.max(h[1],a))}else o=Math.min(v,o),a=Math.max(v,a)}return[o,a]}(b,0)}},{"../../lib":503}],691:[function(x,ue,le){"use strict";var y=x("../../plots/font_attributes"),b=x("./axis_attributes"),T=x("../../components/color/attributes"),_=y({editType:"calc"});_.family.dflt='"Open Sans", verdana, arial, sans-serif',_.size.dflt=12,_.color.dflt=T.defaultLine,ue.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:b,baxis:b,font:_,color:{valType:"color",dflt:T.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(x,ue,le){"use strict";var y=x("../../lib").isArrayOrTypedArray;ue.exports=function(b,T,_,e){var o,a,l,i,v,h,s,d,p,f,g,m,u,w=y(_)?"a":"b",c=("a"===w?b.aaxis:b.baxis).smoothing,E="a"===w?b.a2i:b.b2j,M="a"===w?_:e,S="a"===w?e:_,C="a"===w?T.a.length:T.b.length,O="a"===w?T.b.length:T.a.length,I=Math.floor("a"===w?b.b2j(S):b.a2i(S)),N="a"===w?function(se){return b.evalxy([],se,I)}:function(se){return b.evalxy([],I,se)};c&&(l=Math.max(0,Math.min(O-2,I)),i=I-l,a="a"===w?function(se,G){return b.dxydi([],se,l,G,i)}:function(se,G){return b.dxydj([],l,se,i,G)});var F=E(M[0]),L=E(M[1]),P=F<L?1:-1,j=1e-8*(L-F),U=P>0?Math.floor:Math.ceil,$=P>0?Math.ceil:Math.floor,X=P>0?Math.min:Math.max,te=P>0?Math.max:Math.min,ae=U(F+j),J=$(L-j),ee=[[s=N(F)]];for(o=ae;o*P<J*P;o+=P)v=[],g=te(F,o),u=(m=X(L,o+P))-g,h=Math.max(0,Math.min(C-2,Math.floor(.5*(g+m)))),d=N(m),c&&(p=a(h,g-h),f=a(h,m-h),v.push([s[0]+p[0]/3*u,s[1]+p[1]/3*u]),v.push([d[0]-f[0]/3*u,d[1]-f[1]/3*u])),v.push(d),ee.push(v),s=d;return ee}},{"../../lib":503}],693:[function(x,ue,le){"use strict";var y=x("../../plots/font_attributes"),b=x("../../components/color/attributes"),T=x("../../plots/cartesian/layout_attributes"),_=x("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=x("../../plot_api/edit_types").overrideAll,o=x("../../components/drawing/attributes").dash,a=x("../../lib/extend").extendFlat;ue.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:y({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:T.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:y({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:_("tick label")},tickformatstops:e(T.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:b.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:a({},o,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:a({},o,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:b.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:y({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(x,ue,le){"use strict";var y=x("./attributes"),b=x("../../components/color").addOpacity,T=x("../../registry"),_=x("../../lib"),e=x("../../plots/cartesian/tick_value_defaults"),o=x("../../plots/cartesian/tick_label_defaults"),a=x("../../plots/cartesian/prefix_suffix_defaults"),l=x("../../plots/cartesian/category_order_defaults"),i=x("../../plots/cartesian/set_convert"),v=x("../../plots/cartesian/axis_autotype");ue.exports=function(h,s,d){var p=d.letter,f=d.font||{},g=y[p+"axis"];function m(P,j){return _.coerce(h,s,g,P,j)}function u(P,j){return _.coerce2(h,s,g,P,j)}d.name&&(s._name=d.name,s._id=d.name),m("autotypenumbers",d.autotypenumbersDflt);var w=m("type");"-"===w&&(d.data&&function(P,j){if("-"===P.type){var U=P._id.charAt(0);P.type=v(j,P[U+"calendar"],{autotypenumbers:P.autotypenumbers})}}(s,d.data),"-"===s.type?s.type="linear":w=h.type=s.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",p+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("minexponent"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),"array"===s.tickmode&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),s._hovertitle=p,"date"===w&&T.getComponentMethod("calendars","handleDefaults")(h,s,"calendar",d.calendar),i(s,d.fullLayout),s.c2p=_.identity;var c=m("color",d.dfltColor),E=c===h.color?c:f.color;m("title.text")&&(_.coerceFont(m,"title.font",{family:f.family,size:_.bigFont(f.size),color:E}),m("title.offset")),m("tickangle"),m("autorange",!s.isValidRange(h.range))&&m("rangemode"),m("range"),s.cleanRange(),m("fixedrange"),e(h,s,m,w),a(h,s,m,w,d),o(h,s,m,w,d),l(h,s,m,{data:d.data,dataAttr:p});var M=u("gridcolor",b(c,.3)),S=u("gridwidth"),C=u("griddash"),O=m("showgrid");O||(delete s.gridcolor,delete s.gridwidth,delete s.griddash);var I=u("startlinecolor",c),N=u("startlinewidth",S);m("startline",s.showgrid||!!I||!!N)||(delete s.startlinecolor,delete s.startlinewidth);var F=u("endlinecolor",c),L=u("endlinewidth",S);return m("endline",s.showgrid||!!F||!!L)||(delete s.endlinecolor,delete s.endlinewidth),O?(m("minorgridcount"),m("minorgridwidth",S),m("minorgriddash",C),m("minorgridcolor",b(M,.06)),s.minorgridcount||(delete s.minorgridwidth,delete s.minorgriddash,delete s.minorgridcolor)):(delete s.gridcolor,delete s.gridwidth,delete s.griddash),"none"===s.showticklabels&&(delete s.tickfont,delete s.tickangle,delete s.showexponent,delete s.exponentformat,delete s.minexponent,delete s.tickformat,delete s.showticksuffix,delete s.showtickprefix),s.showticksuffix||delete s.ticksuffix,s.showtickprefix||delete s.tickprefix,m("tickmode"),s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../lib").isArray1D,T=x("./cheater_basis"),_=x("./array_minmax"),e=x("./calc_gridlines"),o=x("./calc_labels"),a=x("./calc_clippath"),l=x("../heatmap/clean_2d_array"),i=x("./smooth_fill_2d_array"),v=x("../heatmap/convert_column_xyz"),h=x("./set_convert");ue.exports=function(s,d){var p=y.getFromId(s,d.xaxis),f=y.getFromId(s,d.yaxis),g=d.aaxis,m=d.baxis,u=d.x,w=d.y,c=[];u&&b(u)&&c.push("x"),w&&b(w)&&c.push("y"),c.length&&v(d,g,m,"a","b",c);var E=d._a=d._a||d.a,M=d._b=d._b||d.b;u=d._x||d.x,w=d._y||d.y;var S={};d._cheater&&(u=T("index"===g.cheatertype?E.length:E,"index"===m.cheatertype?M.length:M,d.cheaterslope)),d._x=u=l(u),d._y=w=l(w),i(u,E,M),i(w,E,M),h(d),d.setScale();var I=_(u),N=_(w),F=.5*(I[1]-I[0]),L=.5*(I[1]+I[0]),P=.5*(N[1]-N[0]),j=.5*(N[1]+N[0]);return N=[j-1.3*P,j+1.3*P],d._extremes[p._id]=y.findExtremes(p,I=[L-1.3*F,L+1.3*F],{padded:!0}),d._extremes[f._id]=y.findExtremes(f,N,{padded:!0}),e(d,"a","b"),e(d,"b","a"),o(d,g),o(d,m),S.clipsegments=a(d._xctrl,d._yctrl,g,m),S.x=u,S.y=w,S.a=E,S.b=M,[S]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_){var e,o,a,l=[],i=!!T.smoothing,v=!!_.smoothing,h=y[0].length-1,s=y.length-1;for(e=0,o=[],a=[];e<=h;e++)o[e]=y[0][e],a[e]=b[0][e];for(l.push({x:o,y:a,bicubic:i}),e=0,o=[],a=[];e<=s;e++)o[e]=y[e][h],a[e]=b[e][h];for(l.push({x:o,y:a,bicubic:v}),e=h,o=[],a=[];e>=0;e--)o[h-e]=y[s][e],a[h-e]=b[s][e];for(l.push({x:o,y:a,bicubic:i}),e=s,o=[],a=[];e>=0;e--)o[s-e]=y[e][0],a[s-e]=b[e][0];return l.push({x:o,y:a,bicubic:v}),l}},{}],697:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../lib/extend").extendFlat;ue.exports=function(T,_,e){var o,a,l,i,v,h,s,d,p,f,g,m,u,w,c=T["_"+_],E=T[_+"axis"],M=E._gridlines=[],S=E._minorgridlines=[],C=E._boundarylines=[],O=T["_"+e],I=T[e+"axis"];"array"===E.tickmode&&(E.tickvals=c.slice());var N=T._xctrl,F=T._yctrl,L=N[0].length,P=N.length,j=T._a.length,U=T._b.length;y.prepTicks(E),"array"===E.tickmode&&delete E.tickvals;var $=E.smoothing?3:1;function X(ae){var J,ee,se,G,H,Y,oe,W,ne,re,ce,fe,me=[],pe=[],we={};if("b"===_)for(ee=T.b2j(ae),se=Math.floor(Math.max(0,Math.min(U-2,ee))),G=ee-se,we.length=U,we.crossLength=j,we.xy=function(ye){return T.evalxy([],ye,ee)},we.dxy=function(ye,Te){return T.dxydi([],ye,se,Te,G)},J=0;J<j;J++)Y=Math.min(j-2,J),oe=J-Y,W=T.evalxy([],J,ee),I.smoothing&&J>0&&(ne=T.dxydi([],J-1,se,0,G),me.push(H[0]+ne[0]/3),pe.push(H[1]+ne[1]/3),re=T.dxydi([],J-1,se,1,G),me.push(W[0]-re[0]/3),pe.push(W[1]-re[1]/3)),me.push(W[0]),pe.push(W[1]),H=W;else for(J=T.a2i(ae),Y=Math.floor(Math.max(0,Math.min(j-2,J))),oe=J-Y,we.length=j,we.crossLength=U,we.xy=function(ye){return T.evalxy([],J,ye)},we.dxy=function(ye,Te){return T.dxydj([],Y,ye,oe,Te)},ee=0;ee<U;ee++)se=Math.min(U-2,ee),G=ee-se,W=T.evalxy([],J,ee),I.smoothing&&ee>0&&(ce=T.dxydj([],Y,ee-1,oe,0),me.push(H[0]+ce[0]/3),pe.push(H[1]+ce[1]/3),fe=T.dxydj([],Y,ee-1,oe,1),me.push(W[0]-fe[0]/3),pe.push(W[1]-fe[1]/3)),me.push(W[0]),pe.push(W[1]),H=W;return we.axisLetter=_,we.axis=E,we.crossAxis=I,we.value=ae,we.constvar=e,we.index=d,we.x=me,we.y=pe,we.smoothing=I.smoothing,we}function te(ae){var J,ee,se,G,H,Y=[],oe=[],W={};if(W.length=c.length,W.crossLength=O.length,"b"===_)for(se=Math.max(0,Math.min(U-2,ae)),H=Math.min(1,Math.max(0,ae-se)),W.xy=function(ne){return T.evalxy([],ne,ae)},W.dxy=function(ne,re){return T.dxydi([],ne,se,re,H)},J=0;J<L;J++)Y[J]=N[ae*$][J],oe[J]=F[ae*$][J];else for(ee=Math.max(0,Math.min(j-2,ae)),G=Math.min(1,Math.max(0,ae-ee)),W.xy=function(ne){return T.evalxy([],ae,ne)},W.dxy=function(ne,re){return T.dxydj([],ee,ne,G,re)},J=0;J<P;J++)Y[J]=N[J][ae*$],oe[J]=F[J][ae*$];return W.axisLetter=_,W.axis=E,W.crossAxis=I,W.value=c[ae],W.constvar=e,W.index=ae,W.x=Y,W.y=oe,W.smoothing=I.smoothing,W}if("array"===E.tickmode){for(i=5e-15,h=(v=[Math.floor((c.length-1-E.arraytick0)/E.arraydtick*(1+i)),Math.ceil(-E.arraytick0/E.arraydtick/(1+i))].sort(function(ae,J){return ae-J}))[0]-1,s=v[1]+1,d=h;d<s;d++)(a=E.arraytick0+E.arraydtick*d)<0||a>c.length-1||M.push(b(te(a),{color:E.gridcolor,width:E.gridwidth,dash:E.griddash}));for(d=h;d<s;d++)if(l=E.arraytick0+E.arraydtick*d,g=Math.min(l+E.arraydtick,c.length-1),!(l<0||l>c.length-1||g<0||g>c.length-1))for(m=c[l],u=c[g],o=0;o<E.minorgridcount;o++)(w=g-l)<=0||(f=m+(u-m)*(o+1)/(E.minorgridcount+1)*(E.arraydtick/w))<c[0]||f>c[c.length-1]||S.push(b(X(f),{color:E.minorgridcolor,width:E.minorgridwidth,dash:E.minorgriddash}));E.startline&&C.push(b(te(0),{color:E.startlinecolor,width:E.startlinewidth})),E.endline&&C.push(b(te(c.length-1),{color:E.endlinecolor,width:E.endlinewidth}))}else{for(i=5e-15,h=(v=[Math.floor((c[c.length-1]-E.tick0)/E.dtick*(1+i)),Math.ceil((c[0]-E.tick0)/E.dtick/(1+i))].sort(function(ae,J){return ae-J}))[0],s=v[1],d=h;d<=s;d++)M.push(b(X(p=E.tick0+E.dtick*d),{color:E.gridcolor,width:E.gridwidth,dash:E.griddash}));for(d=h-1;d<s+1;d++)for(p=E.tick0+E.dtick*d,o=0;o<E.minorgridcount;o++)(f=p+E.dtick*(o+1)/(E.minorgridcount+1))<c[0]||f>c[c.length-1]||S.push(b(X(f),{color:E.minorgridcolor,width:E.minorgridwidth,dash:E.minorgriddash}));E.startline&&C.push(b(X(c[0]),{color:E.startlinecolor,width:E.startlinewidth})),E.endline&&C.push(b(X(c[c.length-1]),{color:E.endlinecolor,width:E.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../lib/extend").extendFlat;ue.exports=function(T,_){var e,o,a,l=_._labels=[],i=_._gridlines;for(e=0;e<i.length;e++)a=i[e],-1!==["start","both"].indexOf(_.showticklabels)&&(o=y.tickText(_,a.value),b(o,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:a.xy(0),dxy:a.dxy(0,0),axis:a.axis,length:a.crossAxis.length,font:a.axis.tickfont,isFirst:0===e,isLast:e===i.length-1}),l.push(o)),-1!==["end","both"].indexOf(_.showticklabels)&&(o=y.tickText(_,a.value),b(o,{endAnchor:!1,xy:a.xy(a.crossLength-1),dxy:a.dxy(a.crossLength-2,1),axis:a.axis,length:a.crossAxis.length,font:a.axis.tickfont,isFirst:0===e,isLast:e===i.length-1}),l.push(o))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_){var e=y[0]-b[0],o=y[1]-b[1],a=T[0]-b[0],l=T[1]-b[1],i=Math.pow(e*e+o*o,.25),v=Math.pow(a*a+l*l,.25),h=(v*v*e-i*i*a)*_,s=(v*v*o-i*i*l)*_,d=v*(i+v)*3,p=i*(i+v)*3;return[[b[0]+(d&&h/d),b[1]+(d&&s/d)],[b[0]-(p&&h/p),b[1]-(p&&s/p)]]}},{}],700:[function(x,ue,le){"use strict";var y=x("../../lib").isArrayOrTypedArray;ue.exports=function(b,T,_){var e,o,a,l,i,v,h=[],s=y(b)?b.length:b,d=y(T)?T.length:T,p=y(b)?b:null,f=y(T)?T:null;p&&(a=(p.length-1)/(p[p.length-1]-p[0])/(s-1)),f&&(l=(f.length-1)/(f[f.length-1]-f[0])/(d-1));var g=1/0,m=-1/0;for(o=0;o<d;o++)for(h[o]=[],i=f?(f[o]-f[0])*l:o/(d-1),e=0;e<s;e++)v=(p?(p[e]-p[0])*a:e/(s-1))-i*_,g=Math.min(v,g),m=Math.max(v,m),h[o][e]=v;var u=1/(m-g),w=-g*u;for(o=0;o<d;o++)for(e=0;e<s;e++)h[o][e]=u*h[o][e]+w;return h}},{"../../lib":503}],701:[function(x,ue,le){"use strict";var y=x("./catmull_rom"),b=x("../../lib").ensureArray;function T(_,e,o){return[(2*(-.5*o[0]+1.5*e[0])+_[0])/3,(2*(-.5*o[1]+1.5*e[1])+_[1])/3]}ue.exports=function(_,e,o,a,l,i){var v,h,s,d,p,f,g,m,u,w,c=o[0].length,E=o.length,M=l?3*c-2:c,S=i?3*E-2:E;for(_=b(_,S),e=b(e,S),s=0;s<S;s++)_[s]=b(_[s],M),e[s]=b(e[s],M);for(h=0,d=0;h<E;h++,d+=i?3:1)for(p=_[d],f=e[d],g=o[h],m=a[h],v=0,s=0;v<c;v++,s+=l?3:1)p[s]=g[v],f[s]=m[v];if(l)for(h=0,d=0;h<E;h++,d+=i?3:1){for(v=1,s=3;v<c-1;v++,s+=3)u=y([o[h][v-1],a[h][v-1]],[o[h][v],a[h][v]],[o[h][v+1],a[h][v+1]],l),_[d][s-1]=u[0][0],e[d][s-1]=u[0][1],_[d][s+1]=u[1][0],e[d][s+1]=u[1][1];w=T([_[d][0],e[d][0]],[_[d][2],e[d][2]],[_[d][3],e[d][3]]),_[d][1]=w[0],e[d][1]=w[1],w=T([_[d][M-1],e[d][M-1]],[_[d][M-3],e[d][M-3]],[_[d][M-4],e[d][M-4]]),_[d][M-2]=w[0],e[d][M-2]=w[1]}if(i)for(s=0;s<M;s++){for(d=3;d<S-3;d+=3)u=y([_[d-3][s],e[d-3][s]],[_[d][s],e[d][s]],[_[d+3][s],e[d+3][s]],i),_[d-1][s]=u[0][0],e[d-1][s]=u[0][1],_[d+1][s]=u[1][0],e[d+1][s]=u[1][1];w=T([_[0][s],e[0][s]],[_[2][s],e[2][s]],[_[3][s],e[3][s]]),_[1][s]=w[0],e[1][s]=w[1],w=T([_[S-1][s],e[S-1][s]],[_[S-3][s],e[S-3][s]],[_[S-4][s],e[S-4][s]]),_[S-2][s]=w[0],e[S-2][s]=w[1]}if(l&&i)for(d=1;d<S;d+=(d+1)%3==0?2:1){for(s=3;s<M-3;s+=3)u=y([_[d][s-3],e[d][s-3]],[_[d][s],e[d][s]],[_[d][s+3],e[d][s+3]],l),_[d][s-1]=.5*(_[d][s-1]+u[0][0]),e[d][s-1]=.5*(e[d][s-1]+u[0][1]),_[d][s+1]=.5*(_[d][s+1]+u[1][0]),e[d][s+1]=.5*(e[d][s+1]+u[1][1]);w=T([_[d][0],e[d][0]],[_[d][2],e[d][2]],[_[d][3],e[d][3]]),_[d][1]=.5*(_[d][1]+w[0]),e[d][1]=.5*(e[d][1]+w[1]),w=T([_[d][M-1],e[d][M-1]],[_[d][M-3],e[d][M-3]],[_[d][M-4],e[d][M-4]]),_[d][M-2]=.5*(_[d][M-2]+w[0]),e[d][M-2]=.5*(e[d][M-2]+w[1])}return[_,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(x,ue,le){"use strict";ue.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(x,ue,le){"use strict";ue.exports=function(y,b,T){return b&&T?function(_,e,o,a,l){var i,d,p;_||(_=[]),e*=3,o*=3;var f=a*a,g=1-a,m=g*g,u=g*a*2,w=-3*m,c=3*(m-u),E=3*(u-f),M=3*f,S=l*l,C=S*l,O=1-l,I=O*O,N=I*O;for(p=0;p<y.length;p++)i=w*(d=y[p])[o][e]+c*d[o][e+1]+E*d[o][e+2]+M*d[o][e+3],_[p]=N*i+3*(I*l*(w*d[o+1][e]+c*d[o+1][e+1]+E*d[o+1][e+2]+M*d[o+1][e+3])+O*S*(w*d[o+2][e]+c*d[o+2][e+1]+E*d[o+2][e+2]+M*d[o+2][e+3]))+C*(w*d[o+3][e]+c*d[o+3][e+1]+E*d[o+3][e+2]+M*d[o+3][e+3]);return _}:b?function(_,e,o,a,l){var i,h,s;_||(_=[]),e*=3;var d=a*a,p=1-a,f=p*p,g=p*a*2,m=-3*f,u=3*(f-g),w=3*(g-d),c=3*d,E=1-l;for(h=0;h<y.length;h++)i=m*(s=y[h])[o][e]+u*s[o][e+1]+w*s[o][e+2]+c*s[o][e+3],_[h]=E*i+l*(m*s[o+1][e]+u*s[o+1][e+1]+w*s[o+1][e+2]+c*s[o+1][e+3]);return _}:T?function(_,e,o,a,l){var i,d,p;_||(_=[]),o*=3;var f=l*l,g=f*l,m=1-l,u=m*m,w=u*m;for(d=0;d<y.length;d++)i=(p=y[d])[o][e+1]-p[o][e],_[d]=w*i+3*(u*l*(p[o+1][e+1]-p[o+1][e])+m*f*(p[o+2][e+1]-p[o+2][e]))+g*(p[o+3][e+1]-p[o+3][e]);return _}:function(_,e,o,a,l){var i,h,s;_||(_=[]);var d=1-l;for(h=0;h<y.length;h++)i=(s=y[h])[o][e+1]-s[o][e],_[h]=d*i+l*(s[o+1][e+1]-s[o+1][e]);return _}}},{}],704:[function(x,ue,le){"use strict";ue.exports=function(y,b,T){return b&&T?function(_,e,o,a,l){var i,d,p;_||(_=[]),e*=3,o*=3;var f=a*a,g=f*a,m=1-a,u=m*m,w=u*m,c=l*l,E=1-l,M=E*E,S=E*l*2,C=-3*M,O=3*(M-S),I=3*(S-c),N=3*c;for(p=0;p<y.length;p++)i=C*(d=y[p])[o][e]+O*d[o+1][e]+I*d[o+2][e]+N*d[o+3][e],_[p]=w*i+3*(u*a*(C*d[o][e+1]+O*d[o+1][e+1]+I*d[o+2][e+1]+N*d[o+3][e+1])+m*f*(C*d[o][e+2]+O*d[o+1][e+2]+I*d[o+2][e+2]+N*d[o+3][e+2]))+g*(C*d[o][e+3]+O*d[o+1][e+3]+I*d[o+2][e+3]+N*d[o+3][e+3]);return _}:b?function(_,e,o,a,l){var i,d,p;_||(_=[]),e*=3;var f=l*l,g=f*l,m=1-l,u=m*m,w=u*m;for(d=0;d<y.length;d++)i=(p=y[d])[o+1][e]-p[o][e],_[d]=w*i+3*(u*l*(p[o+1][e+1]-p[o][e+1])+m*f*(p[o+1][e+2]-p[o][e+2]))+g*(p[o+1][e+3]-p[o][e+3]);return _}:T?function(_,e,o,a,l){var i,h,s;_||(_=[]),o*=3;var d=1-a,p=l*l,f=1-l,g=f*f,m=f*l*2,u=-3*g,w=3*(g-m),c=3*(m-p),E=3*p;for(h=0;h<y.length;h++)i=u*(s=y[h])[o][e]+w*s[o+1][e]+c*s[o+2][e]+E*s[o+3][e],_[h]=d*i+a*(u*s[o][e+1]+w*s[o+1][e+1]+c*s[o+2][e+1]+E*s[o+3][e+1]);return _}:function(_,e,o,a,l){var i,h,s;_||(_=[]);var d=1-a;for(h=0;h<y.length;h++)i=(s=y[h])[o+1][e]-s[o][e],_[h]=d*i+a*(s[o+1][e+1]-s[o][e+1]);return _}}},{}],705:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_,e){var o=b-2,a=T-2;return _&&e?function(l,i,v){var h,f,g;l||(l=[]);var m=Math.max(0,Math.min(Math.floor(i),o)),u=Math.max(0,Math.min(Math.floor(v),a)),w=Math.max(0,Math.min(1,i-m)),c=Math.max(0,Math.min(1,v-u));m*=3,u*=3;var E=w*w,M=E*w,S=1-w,C=S*S,O=C*S,I=c*c,N=I*c,F=1-c,L=F*F,P=L*F;for(g=0;g<y.length;g++)h=O*(f=y[g])[u][m]+3*(C*w*f[u][m+1]+S*E*f[u][m+2])+M*f[u][m+3],l[g]=P*h+3*(L*c*(O*f[u+1][m]+3*(C*w*f[u+1][m+1]+S*E*f[u+1][m+2])+M*f[u+1][m+3])+F*I*(O*f[u+2][m]+3*(C*w*f[u+2][m+1]+S*E*f[u+2][m+2])+M*f[u+2][m+3]))+N*(O*f[u+3][m]+3*(C*w*f[u+3][m+1]+S*E*f[u+3][m+2])+M*f[u+3][m+3]);return l}:_?function(l,i,v){l||(l=[]);var h,f,g,m=Math.max(0,Math.min(Math.floor(i),o)),u=Math.max(0,Math.min(Math.floor(v),a)),w=Math.max(0,Math.min(1,i-m)),c=Math.max(0,Math.min(1,v-u));m*=3;var E=w*w,M=E*w,S=1-w,C=S*S,O=C*S,I=1-c;for(f=0;f<y.length;f++)h=I*(g=y[f])[u][m]+c*g[u+1][m],l[f]=O*h+3*(C*w*(I*g[u][m+1]+c*g[u+1][m+1])+S*E*(I*g[u][m+2]+c*g[u+1][m+1]))+M*(I*g[u][m+3]+c*g[u+1][m+1]);return l}:e?function(l,i,v){l||(l=[]);var h,f,g,m=Math.max(0,Math.min(Math.floor(i),o)),u=Math.max(0,Math.min(Math.floor(v),a)),w=Math.max(0,Math.min(1,i-m)),c=Math.max(0,Math.min(1,v-u));u*=3;var E=c*c,M=E*c,S=1-c,C=S*S,O=C*S,I=1-w;for(f=0;f<y.length;f++)h=I*(g=y[f])[u][m]+w*g[u][m+1],l[f]=O*h+3*(C*c*(I*g[u+1][m]+w*g[u+1][m+1])+S*E*(I*g[u+2][m]+w*g[u+2][m+1]))+M*(I*g[u+3][m]+w*g[u+3][m+1]);return l}:function(l,i,v){l||(l=[]);var h,d,p,f=Math.max(0,Math.min(Math.floor(i),o)),g=Math.max(0,Math.min(Math.floor(v),a)),m=Math.max(0,Math.min(1,i-f)),u=Math.max(0,Math.min(1,v-g)),w=1-u,c=1-m;for(d=0;d<y.length;d++)h=c*(p=y[d])[g][f]+m*p[g][f+1],l[d]=w*h+u*(c*p[g+1][f]+m*p[g+1][f+1]);return l}}},{}],706:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./xy_defaults"),T=x("./ab_defaults"),_=x("./attributes"),e=x("../../components/color/attributes");ue.exports=function(o,a,l,i){function v(s,d){return y.coerce(o,a,_,s,d)}a._clipPathId="clip"+a.uid+"carpet";var h=v("color",e.defaultLine);y.coerceFont(v,"font"),v("carpet"),T(o,a,i,v,h),a.a&&a.b?(a.a.length<3&&(a.aaxis.smoothing=0),a.b.length<3&&(a.baxis.smoothing=0),b(o,a,v)||(a.visible=!1),a._cheater&&v("cheaterslope")):a.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),plot:x("./plot"),calc:x("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(x,ue,le){"use strict";ue.exports=function(y,b){for(var T,_=y._fullData.length,e=0;e<_;e++){var o=y._fullData[e];if(o.index!==b.index&&"carpet"===o.type&&(T||(T=o),o.carpet===b.carpet))return o}return T}},{}],709:[function(x,ue,le){"use strict";ue.exports=function(y,b,T){if(0===y.length)return"";var _,e=[],o=T?3:1;for(_=0;_<y.length;_+=o)e.push(y[_]+","+b[_]),T&&_<y.length-o&&(e.push("C"),e.push([y[_+1]+","+b[_+1],y[_+2]+","+b[_+2]+" "].join(" ")));return e.join(T?"":"L")}},{}],710:[function(x,ue,le){"use strict";var y=x("../../lib").isArrayOrTypedArray;ue.exports=function(b,T,_){var e;for(y(b)?b.length>T.length&&(b=b.slice(0,T.length)):b=[],e=0;e<T.length;e++)b[e]=_(T[e]);return b}},{"../../lib":503}],711:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_,e,o){var a=e[0]*y.dpdx(b),l=e[1]*y.dpdy(T),i=1,v=1;if(o){var h=Math.sqrt(e[0]*e[0]+e[1]*e[1]),s=Math.sqrt(o[0]*o[0]+o[1]*o[1]);v=Math.max(0,(e[0]*o[0]+e[1]*o[1])/h/s)}var p=180*Math.atan2(l,a)/Math.PI;return p<-90?(p+=180,i=-i):p>90&&(p-=180,i=-i),{angle:p,flip:i,p:y.c2p(_,b,T),offsetMultplier:v}}},{}],712:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/drawing"),T=x("./map_1d_array"),_=x("./makepath"),e=x("./orient_text"),o=x("../../lib/svg_text_utils"),a=x("../../lib"),l=a.strRotate,i=a.strTranslate,v=x("../../constants/alignment");function h(g,m,u,w,c,E){var M="const-"+c+"-lines",S=u.selectAll("."+M).data(E);S.enter().append("path").classed(M,!0).style("vector-effect","non-scaling-stroke"),S.each(function(C){var O=C,N=O.y,F=T([],O.x,g.c2p),L=T([],N,m.c2p),P="M"+_(F,L,O.smoothing);y.select(this).attr("d",P).style("stroke-width",O.width).style("stroke",O.color).style("stroke-dasharray",b.dashStyle(O.dash,O.width)).style("fill","none")}),S.exit().remove()}function s(g,m,u,w,c,E,M,S){var C=E.selectAll("text."+S).data(M);C.enter().append("text").classed(S,!0);var O=0,I={};return C.each(function(N,F){var L;if("auto"===N.axis.tickangle)L=e(w,m,u,N.xy,N.dxy);else{var P=(N.axis.tickangle+180)*Math.PI/180;L=e(w,m,u,N.xy,[Math.cos(P),Math.sin(P)])}F||(I={angle:L.angle,flip:L.flip});var j=(N.endAnchor?-1:1)*L.flip,U=y.select(this).attr({"text-anchor":j>0?"start":"end","data-notex":1}).call(b.font,N.font).text(N.text).call(o.convertToTspans,g),$=b.bBox(this);U.attr("transform",i(L.p[0],L.p[1])+l(L.angle)+i(N.axis.labelpadding*j,.3*$.height)),O=Math.max(O,$.width+N.axis.labelpadding)}),C.exit().remove(),I.maxExtent=O,I}ue.exports=function(g,m,u,w){var c=m.xaxis,E=m.yaxis,M=g._fullLayout._clips;a.makeTraceGroups(w,u,"trace").each(function(S){var C=y.select(this),O=S[0],I=O.trace,N=I.aaxis,F=I.baxis,L=a.ensureSingle(C,"g","minorlayer"),P=a.ensureSingle(C,"g","majorlayer"),j=a.ensureSingle(C,"g","boundarylayer"),U=a.ensureSingle(C,"g","labellayer");C.style("opacity",I.opacity),h(c,E,P,0,"a",N._gridlines),h(c,E,P,0,"b",F._gridlines),h(c,E,L,0,"a",N._minorgridlines),h(c,E,L,0,"b",F._minorgridlines),h(c,E,j,0,"a-boundary",N._boundarylines),h(c,E,j,0,"b-boundary",F._boundarylines);var te,ae,J,se,G,H,Y,oe,W,ne,re,ce,fe,me,pe,$=s(g,c,E,I,0,U,N._labels,"a-label"),X=s(g,c,E,I,0,U,F._labels,"b-label");te=g,ae=U,J=I,se=c,G=E,H=$,Y=X,ce=a.aggNums(Math.min,null,J.a),fe=a.aggNums(Math.max,null,J.a),me=a.aggNums(Math.min,null,J.b),pe=a.aggNums(Math.max,null,J.b),ne=J.ab2xy(oe=.5*(ce+fe),W=me,!0),re=J.dxyda_rough(oe,W),void 0===H.angle&&a.extendFlat(H,e(J,se,G,ne,J.dxydb_rough(oe,W))),f(te,ae,J,0,ne,re,J.aaxis,se,G,H,"a-title"),ne=J.ab2xy(oe=ce,W=.5*(me+pe),!0),re=J.dxydb_rough(oe,W),void 0===Y.angle&&a.extendFlat(Y,e(J,se,G,ne,J.dxyda_rough(oe,W))),f(te,ae,J,0,ne,re,J.baxis,se,G,Y,"b-title"),function(te,ae,J,ee,se){var G,H,Y,oe,W=J.select("#"+te._clipPathId);W.size()||(W=J.append("clipPath").classed("carpetclip",!0));var ne=a.ensureSingle(W,"path","carpetboundary"),re=ae.clipsegments,ce=[];for(oe=0;oe<re.length;oe++)H=T([],(G=re[oe]).x,ee.c2p),Y=T([],G.y,se.c2p),ce.push(_(H,Y,G.bicubic));var fe="M"+ce.join("L")+"Z";W.attr("id",te._clipPathId),ne.attr("d",fe)}(I,O,M,c,E)})};var d=v.LINE_SPACING,p=(1-v.MID_SHIFT)/d+1;function f(g,m,u,w,c,E,M,S,C,O,I){var N=[];M.title.text&&N.push(M.title.text);var F=m.selectAll("text."+I).data(N),L=O.maxExtent;F.enter().append("text").classed(I,!0),F.each(function(){var P=e(u,S,C,c,E);-1===["start","both"].indexOf(M.showticklabels)&&(L=0);var j=M.title.font.size;L+=j+M.title.offset;var U=(O.angle+(O.flip<0?180:0)-P.angle+450)%360,$=U>90&&U<270,X=y.select(this);X.text(M.title.text).call(o.convertToTspans,g),$&&(L=(-o.lineCount(X)+p)*d*j-L),X.attr("transform",i(P.p[0],P.p[1])+l(P.angle)+i(0,L)).attr("text-anchor","middle").call(b.font,M.title.font)}),F.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(x,ue,le){"use strict";var y=x("./constants"),b=x("../../lib/search").findBin,T=x("./compute_control_points"),_=x("./create_spline_evaluator"),e=x("./create_i_derivative_evaluator"),o=x("./create_j_derivative_evaluator");ue.exports=function(a){var l=a._a,i=a._b,v=l.length,h=i.length,s=a.aaxis,d=a.baxis,p=l[0],f=l[v-1],g=i[0],m=i[h-1],u=l[l.length-1]-l[0],w=i[i.length-1]-i[0],c=u*y.RELATIVE_CULL_TOLERANCE,E=w*y.RELATIVE_CULL_TOLERANCE;p-=c,f+=c,g-=E,m+=E,a.isVisible=function(M,S){return M>p&&M<f&&S>g&&S<m},a.isOccluded=function(M,S){return M<p||M>f||S<g||S>m},a.setScale=function(){var C=T(a._xctrl,a._yctrl,a._x,a._y,s.smoothing,d.smoothing);a._xctrl=C[0],a._yctrl=C[1],a.evalxy=_([a._xctrl,a._yctrl],v,h,s.smoothing,d.smoothing),a.dxydi=e([a._xctrl,a._yctrl],s.smoothing,d.smoothing),a.dxydj=o([a._xctrl,a._yctrl],s.smoothing,d.smoothing)},a.i2a=function(M){var S=Math.max(0,Math.floor(M[0]),v-2),C=M[0]-S;return(1-C)*l[S]+C*l[S+1]},a.j2b=function(M){var S=Math.max(0,Math.floor(M[1]),v-2),C=M[1]-S;return(1-C)*i[S]+C*i[S+1]},a.ij2ab=function(M){return[a.i2a(M[0]),a.j2b(M[1])]},a.a2i=function(M){var S=Math.max(0,Math.min(b(M,l),v-2)),C=l[S];return Math.max(0,Math.min(v-1,S+(M-C)/(l[S+1]-C)))},a.b2j=function(M){var S=Math.max(0,Math.min(b(M,i),h-2)),C=i[S];return Math.max(0,Math.min(h-1,S+(M-C)/(i[S+1]-C)))},a.ab2ij=function(M){return[a.a2i(M[0]),a.b2j(M[1])]},a.i2c=function(M,S){return a.evalxy([],M,S)},a.ab2xy=function(M,S,C){if(!C&&(M<l[0]||M>l[v-1]|S<i[0]||S>i[h-1]))return[!1,!1];var O=a.a2i(M),I=a.b2j(S),N=a.evalxy([],O,I);if(C){var F,L,P,j,U=0,$=0,X=[];M<l[0]?(F=0,L=0,U=(M-l[0])/(l[1]-l[0])):M>l[v-1]?(F=v-2,L=1,U=(M-l[v-1])/(l[v-1]-l[v-2])):L=O-(F=Math.max(0,Math.min(v-2,Math.floor(O)))),S<i[0]?(P=0,j=0,$=(S-i[0])/(i[1]-i[0])):S>i[h-1]?(P=h-2,j=1,$=(S-i[h-1])/(i[h-1]-i[h-2])):j=I-(P=Math.max(0,Math.min(h-2,Math.floor(I)))),U&&(a.dxydi(X,F,P,L,j),N[0]+=X[0]*U,N[1]+=X[1]*U),$&&(a.dxydj(X,F,P,L,j),N[0]+=X[0]*$,N[1]+=X[1]*$)}return N},a.c2p=function(M,S,C){return[S.c2p(M[0]),C.c2p(M[1])]},a.p2x=function(M,S,C){return[S.p2c(M[0]),C.p2c(M[1])]},a.dadi=function(M){var S=Math.max(0,Math.min(l.length-2,M));return l[S+1]-l[S]},a.dbdj=function(M){var S=Math.max(0,Math.min(i.length-2,M));return i[S+1]-i[S]},a.dxyda=function(M,S,C,O){var I=a.dxydi(null,M,S,C,O),N=a.dadi(M,C);return[I[0]/N,I[1]/N]},a.dxydb=function(M,S,C,O){var I=a.dxydj(null,M,S,C,O),N=a.dbdj(S,O);return[I[0]/N,I[1]/N]},a.dxyda_rough=function(M,S,C){var O=u*(C||.1),I=a.ab2xy(M+O,S,!0),N=a.ab2xy(M-O,S,!0);return[.5*(I[0]-N[0])/O,.5*(I[1]-N[1])/O]},a.dxydb_rough=function(M,S,C){var O=w*(C||.1),I=a.ab2xy(M,S+O,!0),N=a.ab2xy(M,S-O,!0);return[.5*(I[0]-N[0])/O,.5*(I[1]-N[1])/O]},a.dpdx=function(M){return M._m},a.dpdy=function(M){return M._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T,_){var e,o,a,l=[],i=[],v=b[0].length,h=b.length;var d,p,f,g,m,u,w,c,E,M,ae,J,ee,se,G,C=0;for(e=0;e<v;e++)for(o=0;o<h;o++)void 0===b[o][e]&&(l.push(e),i.push(o),b[o][e]=(J=o,ee=void 0,se=void 0,G=void 0,se=0,G=0,(ae=e)>0&&void 0!==(ee=b[J][ae-1])&&(G++,se+=ee),ae<v-1&&void 0!==(ee=b[J][ae+1])&&(G++,se+=ee),J>0&&void 0!==(ee=b[J-1][ae])&&(G++,se+=ee),J<h-1&&void 0!==(ee=b[J+1][ae])&&(G++,se+=ee),se/Math.max(1,G))),C=Math.max(C,Math.abs(b[o][e]));if(!l.length)return b;var O=0,I=0,N=l.length;do{for(O=0,a=0;a<N;a++){o=i[a];var L,P,j,U,$,X=0,te=0;0===(e=l[a])?(P=T[U=Math.min(v-1,2)],te+=(L=b[o][1])+(L-b[o][U])*(T[0]-(j=T[1]))/(j-P),X++):e===v-1&&(P=T[U=Math.max(0,v-3)],te+=(L=b[o][v-2])+(L-b[o][U])*(T[v-1]-(j=T[v-2]))/(j-P),X++),(0===e||e===v-1)&&o>0&&o<h-1&&(te+=((p=_[o]-_[o-1])*b[o+1][e]+(d=_[o+1]-_[o])*b[o-1][e])/(p+d),X++),0===o?(P=_[$=Math.min(h-1,2)],te+=(L=b[1][e])+(L-b[$][e])*(_[0]-(j=_[1]))/(j-P),X++):o===h-1&&(P=_[$=Math.max(0,h-3)],te+=(L=b[h-2][e])+(L-b[$][e])*(_[h-1]-(j=_[h-2]))/(j-P),X++),(0===o||o===h-1)&&e>0&&e<v-1&&(te+=((p=T[e]-T[e-1])*b[o][e+1]+(d=T[e+1]-T[e])*b[o][e-1])/(p+d),X++),X?te/=X:(c=(m=_[o+1]-_[o])*(u=_[o]-_[o-1])*(m+u),te=((w=(f=T[e+1]-T[e])*(g=T[e]-T[e-1])*(f+g))*(u*b[o+1][e]+m*b[o-1][e])+c*(g*b[o][e+1]+f*b[o][e-1]))/(c*(g+f)+w*(u+m))),O+=(M=(E=te-b[o][e])/C)*M,b[o][e]+=E*(1+(X?0:.85))}O=Math.sqrt(O)}while(I++<100&&O>1e-5);return y.log("Smoother converged to",O,"after",I,"iterations"),b}},{"../../lib":503}],715:[function(x,ue,le){"use strict";var y=x("../../lib").isArray1D;ue.exports=function(b,T,_){var e=_("x"),o=e&&e.length,a=_("y"),l=a&&a.length;if(!o&&!l)return!1;if(T._cheater=!e,o&&!y(e)||l&&!y(a))T._length=null;else{var i=o?e.length:1/0;l&&(i=Math.min(i,a.length)),T.a&&T.a.length&&(i=Math.min(i,T.a.length)),T.b&&T.b.length&&(i=Math.min(i,T.b.length)),T._length=i}return!0}},{"../../lib":503}],716:[function(x,ue,le){"use strict";var y=x("../../plots/template_attributes").hovertemplateAttrs,b=x("../scattergeo/attributes"),T=x("../../components/colorscale/attributes"),_=x("../../plots/attributes"),e=x("../../components/color/attributes").defaultLine,o=x("../../lib/extend").extendFlat,a=b.marker.line;ue.exports=o({locations:{valType:"data_array",editType:"calc"},locationmode:b.locationmode,z:{valType:"data_array",editType:"calc"},geojson:o({},b.geojson,{}),featureidkey:b.featureidkey,text:o({},b.text,{}),hovertext:o({},b.hovertext,{}),marker:{line:{color:o({},a.color,{dflt:e}),width:o({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:b.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:o({},_.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:y(),showlegend:o({},_.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":969}],717:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../constants/numerical").BADNUM,T=x("../../components/colorscale/calc"),_=x("../scatter/arrays_to_calcdata"),e=x("../scatter/calc_selection");function o(a){return a&&"string"==typeof a}ue.exports=function(a,l){var i,v=l._length,h=new Array(v);i=l.geojson?function(g){return o(g)||y(g)}:o;for(var s=0;s<v;s++){var d=h[s]={},p=l.locations[s],f=l.z[s];i(p)&&y(f)?(d.loc=p,d.z=f):(d.loc=null,d.z=b),d.index=s}return _(h,l),T(a,l,{vals:l.z,containerStr:"",cLetter:"z"}),e(h,l),h}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"fast-isnumeric":190}],718:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/colorscale/defaults"),T=x("./attributes");ue.exports=function(_,e,o,a){function l(d,p){return y.coerce(_,e,T,d,p)}var i=l("locations"),v=l("z");if(i&&i.length&&y.isArrayOrTypedArray(v)&&v.length){e._length=Math.min(i.length,v.length);var h,s=l("geojson");("string"==typeof s&&""!==s||y.isPlainObject(s))&&(h="geojson-id"),"geojson-id"===l("locationmode",h)&&l("featureidkey"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),b(_,e,a,l,{prefix:"",cLetter:"z"}),y.coerceSelectionMarkerOpacity(e,l)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_,e){y.location=b.location,y.z=b.z;var o=_[e];return o.fIn&&o.fIn.properties&&(y.properties=o.fIn.properties),y.ct=o.ct,y}},{}],720:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("./attributes"),T=x("../../lib").fillText;ue.exports=function(_,e,o){var a,l,i,v,h=_.cd,s=h[0].trace,d=_.subplot,p=[e,o],f=[e+360,o];for(l=0;l<h.length;l++)if(v=!1,(a=h[l])._polygons){for(i=0;i<a._polygons.length;i++)a._polygons[i].contains(p)&&(v=!v),a._polygons[i].contains(f)&&(v=!v);if(v)break}if(v&&a)return _.x0=_.x1=_.xa.c2p(a.ct),_.y0=_.y1=_.ya.c2p(a.ct),_.index=a.index,_.location=a.loc,_.z=a.z,_.zLabel=y.tickText(d.mockAxis,d.mockAxis.c2l(a.z),"hover").text,_.hovertemplate=a.hovertemplate,function(g,m,u){if(!m.hovertemplate){var w=u.hi||m.hoverinfo,c=String(u.loc),E="all"===w?b.hoverinfo.flags:w.split("+"),M=-1!==E.indexOf("name"),S=-1!==E.indexOf("location"),C=-1!==E.indexOf("z"),O=-1!==E.indexOf("text"),I=[];!M&&S?g.nameOverride=c:(M&&(g.nameOverride=m.name),S&&I.push(c)),C&&I.push(g.zLabel),O&&T(u,m,I),g.extraText=I.join("<br>")}}(_,s,a),[_]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),calc:x("./calc"),calcGeoJSON:x("./plot").calcGeoJSON,plot:x("./plot").plot,style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"choropleth",basePlotModule:x("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../lib/geo_location_utils"),_=x("../../lib/topojson_utils").getTopojsonFeatures,e=x("../../plots/cartesian/autorange").findExtremes,o=x("./style").style;ue.exports={calcGeoJSON:function(a,l){for(var i=a[0].trace,v=l[i.geo],h=v._subplot,s=i.locationmode,d=i._length,p="geojson-id"===s?T.extractTraceFeature(a):_(i,h.topojson),f=[],g=[],m=0;m<d;m++){var u=a[m],w="geojson-id"===s?u.fOut:T.locationToFeature(s,u.loc,p);if(w){u.geojson=w,u.ct=w.properties.ct,u._polygons=T.feature2polygons(w);var c=T.computeBbox(w);f.push(c[0],c[2]),g.push(c[1],c[3])}else u.geojson=null}if("geojson"===v.fitbounds&&"geojson-id"===s){var E=T.computeBbox(T.getTraceGeojson(i));f=[E[0],E[2]],g=[E[1],E[3]]}var M={padded:!0};i._extremes.lon=e(v.lonaxis._ax,f,M),i._extremes.lat=e(v.lataxis._ax,g,M)},plot:function(a,l,i){var v=l.layers.backplot.select(".choroplethlayer");b.makeTraceGroups(v,i,"trace choropleth").each(function(h){var s=y.select(this).selectAll("path.choroplethlocation").data(b.identity);s.enter().append("path").classed("choroplethlocation",!0),s.exit().remove(),o(a,h)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(x,ue,le){"use strict";ue.exports=function(y,b){var T,_,e,o,a,l=y.cd,i=y.xaxis,v=y.yaxis,h=[];if(!1===b)for(T=0;T<l.length;T++)l[T].selected=0;else for(T=0;T<l.length;T++)(e=(_=l[T]).ct)&&(o=i.c2p(e),a=v.c2p(e),b.contains([o,a],null,T,y)?(h.push({pointNumber:T,lon:e[0],lat:e[1]}),_.selected=1):_.selected=0);return h}},{}],724:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/color"),T=x("../../components/drawing"),_=x("../../components/colorscale");function e(o,a){var l=a[0].trace,i=a[0].node3.selectAll(".choroplethlocation"),v=l.marker||{},h=v.line||{},s=_.makeColorScaleFuncFromTrace(l);i.each(function(d){y.select(this).attr("fill",s(d.z)).call(b.stroke,d.mlc||h.color).call(T.dashLine,"",d.mlw||h.width||0).style("opacity",v.opacity)}),T.selectedPointStyle(i,l,o)}ue.exports={style:function(o,a){a&&e(o,a)},styleOnSelect:function(o,a){var i=a[0].trace;i.selectedpoints?T.selectedPointStyle(a[0].node3.selectAll(".choroplethlocation"),i,o):e(o,a)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(x,ue,le){"use strict";var y=x("../choropleth/attributes"),b=x("../../components/colorscale/attributes"),T=x("../../plots/template_attributes").hovertemplateAttrs,_=x("../../plots/attributes"),e=x("../../lib/extend").extendFlat;ue.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},y.featureidkey,{}),below:{valType:"string",editType:"plot"},text:y.text,hovertext:y.hovertext,marker:{line:{color:e({},y.marker.line.color,{editType:"plot"}),width:e({},y.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},y.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},y.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},y.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:y.hoverinfo,hovertemplate:T({},{keys:["properties"]}),showlegend:e({},_.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../../components/colorscale"),_=x("../../components/drawing"),e=x("../../lib/geojson_utils").makeBlank,o=x("../../lib/geo_location_utils");function a(l){var i,v=l[0].trace,h=v._opts;if(v.selectedpoints){for(var s=_.makeSelectedPointStyleFns(v),d=0;d<l.length;d++){var p=l[d];p.fOut&&(p.fOut.properties.mo2=s.selectedOpacityFn(p))}i={type:"identity",property:"mo2"}}else i=b.isArrayOrTypedArray(v.marker.opacity)?{type:"identity",property:"mo"}:v.marker.opacity;return b.extendFlat(h.fill.paint,{"fill-opacity":i}),b.extendFlat(h.line.paint,{"line-opacity":i}),h}ue.exports={convert:function(l){var i=l[0].trace,v=!0===i.visible&&0!==i._length,h={layout:{visibility:"none"},paint:{}},s={layout:{visibility:"none"},paint:{}},d=i._opts={fill:h,line:s,geojson:e()};if(!v)return d;var p=o.extractTraceFeature(l);if(!p)return d;var f,g,m,u=T.makeColorScaleFuncFromTrace(i),w=i.marker,c=w.line||{};b.isArrayOrTypedArray(w.opacity)&&(f=function(I){var N=I.mo;return y(N)?+b.constrain(N,0,1):0}),b.isArrayOrTypedArray(c.color)&&(g=function(I){return I.mlc}),b.isArrayOrTypedArray(c.width)&&(m=function(I){return I.mlw});for(var E=0;E<l.length;E++){var M=l[E],S=M.fOut;if(S){var C=S.properties;C.fc=u(M.z),f&&(C.mo=f(M)),g&&(C.mlc=g(M)),m&&(C.mlw=m(M)),M.ct=C.ct,M._polygons=o.feature2polygons(S)}}var O=f?{type:"identity",property:"mo"}:w.opacity;return b.extendFlat(h.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":O}),b.extendFlat(s.paint,{"line-color":g?{type:"identity",property:"mlc"}:c.color,"line-width":m?{type:"identity",property:"mlw"}:c.width,"line-opacity":O}),h.layout.visibility="visible",s.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:p},a(l),d},convertOnSelect:a}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/colorscale/defaults"),T=x("./attributes");ue.exports=function(_,e,o,a){function l(s,d){return y.coerce(_,e,T,s,d)}var i=l("locations"),v=l("z"),h=l("geojson");y.isArrayOrTypedArray(i)&&i.length&&y.isArrayOrTypedArray(v)&&v.length&&("string"==typeof h&&""!==h||y.isPlainObject(h))?(l("featureidkey"),e._length=Math.min(i.length,v.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),b(_,e,a,l,{prefix:"",cLetter:"z"}),y.coerceSelectionMarkerOpacity(e,l)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),calc:x("../choropleth/calc"),plot:x("./plot"),hoverPoints:x("../choropleth/hover"),eventData:x("../choropleth/event_data"),selectPoints:x("../choropleth/select"),styleOnSelect:function(y,b){b&&b[0].trace._glTrace.updateOnSelect(b)},getBelow:function(y,b){for(var T=b.getMapLayers(),_=T.length-2;_>=0;_--){var e=T[_].id;if("string"==typeof e&&0===e.indexOf("water"))for(var o=_+1;o<T.length;o++)if("string"==typeof(e=T[o].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:x("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(x,ue,le){"use strict";var y=x("./convert").convert,b=x("./convert").convertOnSelect,T=x("../../plots/mapbox/constants").traceLayerPrefix;function _(o,a){this.type="choroplethmapbox",this.subplot=o,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",T+a+"-fill"],["line",T+a+"-line"]],this.below=null}var e=_.prototype;e.update=function(o){this._update(y(o))},e.updateOnSelect=function(o){this._update(b(o))},e._update=function(o){var a=this.subplot,l=this.layerList,i=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(o.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(o,i),this.below=i);for(var v=0;v<l.length;v++){var h=l[v],d=h[1],p=o[h[0]];a.setOptions(d,"setLayoutProperty",p.layout),"visible"===p.layout.visibility&&a.setOptions(d,"setPaintProperty",p.paint)}},e._addLayers=function(o,a){for(var l=this.subplot,i=this.layerList,v=this.sourceId,h=0;h<i.length;h++){var s=i[h],d=s[0],p=o[d];l.addLayer({type:d,id:s[1],source:v,layout:p.layout,paint:p.paint},a)}},e._removeLayers=function(){for(var o=this.subplot.map,a=this.layerList,l=a.length-1;l>=0;l--)o.removeLayer(a[l][1])},e.dispose=function(){var o=this.subplot.map;this._removeLayers(),o.removeSource(this.sourceId)},ue.exports=function(o,a){var l=a[0].trace,i=new _(o,l.uid),v=i.sourceId,h=y(a),s=i.below=o.belowLookup["trace-"+l.uid];return o.map.addSource(v,{type:"geojson",data:h.geojson}),i._addLayers(h,s),a[0].trace._glTrace=i,i}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/attributes"),b=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=x("../../plots/template_attributes").hovertemplateAttrs,_=x("../mesh3d/attributes"),e=x("../../plots/attributes"),o=x("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:T({editType:"calc"},{keys:["norm"]}),uhoverformat:b("u",1),vhoverformat:b("v",1),whoverformat:b("w",1),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,y("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){a[l]=_[l]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,ue.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/calc");ue.exports=function(b,T){for(var _=T.u,e=T.v,o=T.w,a=Math.min(T.x.length,T.y.length,T.z.length,_.length,e.length,o.length),l=-1/0,i=1/0,v=0;v<a;v++){var h=_[v],s=e[v],d=o[v],p=Math.sqrt(h*h+s*s+d*d);l=Math.max(l,p),i=Math.min(i,p)}T._len=a,T._normMax=l,y(b,T,{vals:[i,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(x,ue,le){"use strict";var y=x("../../../stackgl_modules").gl_cone3d,b=x("../../../stackgl_modules").gl_cone3d.createConeMesh,T=x("../../lib").simpleMap,_=x("../../lib/gl_format_color").parseColorScale,e=x("../../components/colorscale").extractOpts,o=x("../../plots/gl3d/zip3");function a(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var l=a.prototype;l.handlePick=function(d){if(d.object===this.mesh){var p=d.index=d.data.index,u=this.data.u[p],w=this.data.v[p],c=this.data.w[p];d.traceCoordinate=[this.data.x[p],this.data.y[p],this.data.z[p],u,w,c,Math.sqrt(u*u+w*w+c*c)];var E=this.data.hovertext||this.data.text;return Array.isArray(E)&&void 0!==E[p]?d.textLabel=E[p]:E&&(d.textLabel=E),!0}};var i={xaxis:0,yaxis:1,zaxis:2},v={tip:1,tail:0,cm:.25,center:.5},h={tip:1,tail:1,cm:.75,center:.5};function s(d,p){var f=d.fullSceneLayout,g=d.dataScale,m={};function u(M,S){var C=f[S],O=g[i[S]];return T(M,function(I){return C.d2l(I)*O})}m.vectors=o(u(p.u,"xaxis"),u(p.v,"yaxis"),u(p.w,"zaxis"),p._len),m.positions=o(u(p.x,"xaxis"),u(p.y,"yaxis"),u(p.z,"zaxis"),p._len);var w=e(p);m.colormap=_(p),m.vertexIntensityBounds=[w.min/p._normMax,w.max/p._normMax],m.coneOffset=v[p.anchor],m.coneSize="scaled"===p.sizemode?p.sizeref||.5:p.sizeref&&p._normMax?p.sizeref/p._normMax:.5;var c=y(m),E=p.lightposition;return c.lightPosition=[E.x,E.y,E.z],c.ambient=p.lighting.ambient,c.diffuse=p.lighting.diffuse,c.specular=p.lighting.specular,c.roughness=p.lighting.roughness,c.fresnel=p.lighting.fresnel,c.opacity=p.opacity,p._pad=h[p.anchor]*c.vectorScale*c.coneScale*p._normMax,c}l.update=function(d){this.data=d;var p=s(this.scene,d);this.mesh.update(p)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ue.exports=function(d,p){var f=d.glplot.gl,g=s(d,p),m=b(f,g),u=new a(d,p.uid);return u.mesh=m,u.data=p,m._trace=u,d.glplot.add(m),u}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/colorscale/defaults"),T=x("./attributes");ue.exports=function(_,e,o,a){function l(f,g){return y.coerce(_,e,T,f,g)}var i=l("u"),v=l("v"),h=l("w"),s=l("x"),d=l("y"),p=l("z");i&&i.length&&v&&v.length&&h&&h.length&&s&&s.length&&d&&d.length&&p&&p.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),b(_,e,a,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"cone",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:x("./calc"),plot:x("./convert"),eventData:function(y,b){return y.norm=b.traceCoordinate[6],y},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(x,ue,le){"use strict";var y=x("../heatmap/attributes"),b=x("../scatter/attributes"),T=x("../../plots/cartesian/axis_format_attributes"),_=T.axisHoverFormat,e=T.descriptionOnlyNumbers,o=x("../../components/colorscale/attributes"),a=x("../../components/drawing/attributes").dash,l=x("../../plots/font_attributes"),i=x("../../lib/extend").extendFlat,v=x("../../constants/filter_ops"),h=v.COMPARISON_OPS2,s=v.INTERVAL_OPS,d=b.line;ue.exports=i({z:y.z,x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:b.xperiod0,yperiod0:b.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,text:y.text,hovertext:y.hovertext,transpose:y.transpose,xtype:y.xtype,ytype:y.ytype,xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:y.hovertemplate,texttemplate:i({},y.texttemplate,{}),textfont:i({},y.textfont,{}),hoverongaps:y.hoverongaps,connectgaps:i({},y.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(h).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},d.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:i({},d.smoothing,{}),editType:"plot"}},o("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":927}],736:[function(x,ue,le){"use strict";var y=x("../../components/colorscale"),b=x("../heatmap/calc"),T=x("./set_contours"),_=x("./end_plus");ue.exports=function(e,o){var a=b(e,o),l=a[0].z;T(o,l);var i,v=o.contours,h=y.extractOpts(o);if("heatmap"===v.coloring&&h.auto&&!1===o.autocontour){var s=v.start,d=_(v),p=v.size||1,f=Math.floor((d-s)/p)+1;isFinite(p)||(p=1,f=1);var g=s-p/2;i=[g,g+f*p]}else i=l;return y.calc(e,o,{vals:i,cLetter:"z"}),a}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(x,ue,le){"use strict";ue.exports=function(y,b){var T,_=y[0],e=_.z;switch(b.type){case"levels":var o=Math.min(e[0][0],e[0][1]);for(T=0;T<y.length;T++){var a=y[T];a.prefixBoundary=!a.edgepaths.length&&(o>a.level||a.starts.length&&o===a.level)}break;case"constraint":if(_.prefixBoundary=!1,_.edgepaths.length)return;var l=_.x.length,i=_.y.length,v=-1/0,h=1/0;for(T=0;T<i;T++)h=Math.min(h,e[T][0]),h=Math.min(h,e[T][l-1]),v=Math.max(v,e[T][0]),v=Math.max(v,e[T][l-1]);for(T=1;T<l-1;T++)h=Math.min(h,e[0][T]),h=Math.min(h,e[i-1][T]),v=Math.max(v,e[0][T]),v=Math.max(v,e[i-1][T]);var s,d,p=b.value;switch(b._operation){case">":p>v&&(_.prefixBoundary=!0);break;case"<":(p<h||_.starts.length&&p===h)&&(_.prefixBoundary=!0);break;case"[]":s=Math.min(p[0],p[1]),((d=Math.max(p[0],p[1]))<h||s>v||_.starts.length&&d===h)&&(_.prefixBoundary=!0);break;case"][":s=Math.min(p[0],p[1]),d=Math.max(p[0],p[1]),s<h&&d>v&&(_.prefixBoundary=!0)}}}},{}],738:[function(x,ue,le){"use strict";var y=x("../../components/colorscale"),b=x("./make_color_map"),T=x("./end_plus");ue.exports={min:"zmin",max:"zmax",calc:function(_,e,o){var a=e.contours,l=e.line,i=a.size||1,v=a.coloring,h=b(e,{isColorbar:!0});if("heatmap"===v){var s=y.extractOpts(e);o._fillgradient=s.reversescale?y.flipScale(s.colorscale):s.colorscale,o._zrange=[s.min,s.max]}else"fill"===v&&(o._fillcolor=h);o._line={color:"lines"===v?h:l.color,width:!1!==a.showlines?l.width:0,dash:l.dash},o._levels={start:a.start,end:T(a),size:i}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(x,ue,le){"use strict";ue.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("./label_defaults"),T=x("../../components/color"),_=T.addOpacity,e=T.opacity,o=x("../../constants/filter_ops"),a=o.CONSTRAINT_REDUCTION,l=o.COMPARISON_OPS2;ue.exports=function(i,v,h,s,d,p){var f,g,m,c,E,M,u=v.contours,w=h("contours.operation");u._operation=a[w],c=h,-1===l.indexOf((E=u).operation)?(c("contours.value",[0,1]),Array.isArray(E.value)?E.value.length>2?E.value=E.value.slice(2):0===E.length?E.value=[0,1]:E.length<2?(M=parseFloat(E.value[0]),E.value=[M,M+1]):E.value=[parseFloat(E.value[0]),parseFloat(E.value[1])]:y(E.value)&&(M=parseFloat(E.value),E.value=[M,M+1])):(c("contours.value",0),y(E.value)||(E.value=Array.isArray(E.value)?parseFloat(E.value[0]):0)),"="===w?f=u.showlines=!0:(f=h("contours.showlines"),m=h("fillcolor",_((i.line||{}).color||d,.5))),f&&(g=h("line.color",m&&e(m)?_(v.fillcolor,1):d),h("line.width",2),h("line.dash")),h("line.smoothing"),b(h,s,g,p)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(x,ue,le){"use strict";var y=x("../../constants/filter_ops"),b=x("fast-isnumeric");function T(o,a){var l,i=Array.isArray(a);function v(h){return b(h)?+h:null}return-1!==y.COMPARISON_OPS2.indexOf(o)?l=v(i?a[0]:a):-1!==y.INTERVAL_OPS.indexOf(o)?l=i?[v(a[0]),v(a[1])]:[v(a),v(a)]:-1!==y.SET_OPS.indexOf(o)&&(l=i?a.map(v):[v(a)]),l}function _(o){return function(a){a=T(o,a);var l=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return{start:l,end:i,size:i-l}}}function e(o){return function(a){return{start:a=T(o,a),end:1/0,size:1/0}}}ue.exports={"[]":_("[]"),"][":_("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_){var e=_("contours.start"),o=_("contours.end"),a=!1===e||!1===o,l=T("contours.size");!(a?b.autocontour=!0:T("autocontour",!1))&&l||T("ncontours")}},{}],743:[function(x,ue,le){"use strict";var y=x("../../lib");function b(T){return y.extendFlat({},T,{edgepaths:y.extendDeep([],T.edgepaths),paths:y.extendDeep([],T.paths),starts:y.extendDeep([],T.starts)})}ue.exports=function(T,_){var e,o,a,l=function(h){return h.reverse()},i=function(h){return h};switch(_){case"=":case"<":return T;case">":for(1!==T.length&&y.warn("Contour data invalid for the specified inequality operation."),o=T[0],e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=l(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=l(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=l(o.starts[e]);return T;case"][":var v=l;l=i,i=v;case"[]":for(2!==T.length&&y.warn("Contour data invalid for the specified inequality range operation."),o=b(T[0]),a=b(T[1]),e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=l(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=l(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=l(o.starts[e]);for(;a.edgepaths.length;)o.edgepaths.push(i(a.edgepaths.shift()));for(;a.paths.length;)o.paths.push(i(a.paths.shift()));for(;a.starts.length;)o.starts.push(i(a.starts.shift()));return[o]}}},{"../../lib":503}],744:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../heatmap/xyz_defaults"),T=x("../scatter/period_defaults"),_=x("./constraint_defaults"),e=x("./contours_defaults"),o=x("./style_defaults"),a=x("../heatmap/label_defaults"),l=x("./attributes");ue.exports=function(i,v,h,s){function d(f,g){return y.coerce(i,v,l,f,g)}if(b(i,v,d,s)){T(i,v,s,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var p="constraint"===d("contours.type");d("connectgaps",y.isArray1D(v.z)),p?_(i,v,d,s,h):(e(i,v,d,function(f){return y.coerce2(i,v,l,f)}),o(i,v,d,s)),v.contours&&"heatmap"===v.contours.coloring&&a(d,s)}else v.visible=!1}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":947,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./constraint_mapping"),T=x("./end_plus");ue.exports=function(_,e,o){for(var a="constraint"===_.type?b[_._operation](_.value):_,l=a.size,i=[],v=T(a),h=o.trace._carpetTrace,s=h?{xaxis:h.aaxis,yaxis:h.baxis,x:o.a,y:o.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:o.x,y:o.y},d=a.start;d<v;d+=l)if(i.push(y.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:o.z,smoothing:o.trace.line.smoothing},s)),i.length>1e3){y.warn("Too many contours, clipping at 1000",_);break}return i}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(x,ue,le){"use strict";ue.exports=function(y){return y.end+y.size/1e6}},{}],747:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./constants");function T(o,a,l,i){return Math.abs(o[0]-a[0])<l&&Math.abs(o[1]-a[1])<i}function _(o,a,l,i,v){var h,ne,ce,fe,me,s=a.join(","),d=o.crossings[s],p=(ce=a,fe=0,me=0,(ne=d)>20&&l?208===ne||1114===ne?fe=0===ce[0]?1:-1:me=0===ce[1]?1:-1:-1!==b.BOTTOMSTART.indexOf(ne)?me=1:-1!==b.LEFTSTART.indexOf(ne)?fe=1:-1!==b.TOPSTART.indexOf(ne)?me=-1:fe=-1,[fe,me]),f=[e(o,a,[-p[0],-p[1]])],g=o.z.length,m=o.z[0].length,u=a.slice(),w=p.slice();for(h=0;h<1e4;h++){if(d>20?o.crossings[s]=b.SADDLEREMAINDER[d=b.CHOOSESADDLE[d][(p[0]||p[1])<0?0:1]]:delete o.crossings[s],!(p=b.NEWDELTA[d])){y.log("Found bad marching index:",d,a,o.level);break}if(f.push(e(o,a,p)),a[0]+=p[0],a[1]+=p[1],s=a.join(","),T(f[f.length-1],f[f.length-2],i,v)&&f.pop(),a[0]===u[0]&&a[1]===u[1]&&p[0]===w[0]&&p[1]===w[1]||l&&(p[0]&&(a[0]<0||a[0]>m-2)||p[1]&&(a[1]<0||a[1]>g-2)))break;d=o.crossings[s]}1e4===h&&y.log("Infinite loop in contour?");var E,M,S,C,O,I,N,F,L,P,j,U,$,X,te,ae=T(f[0],f[f.length-1],i,v),J=0,ee=.2*o.smoothing,se=[],G=0;for(h=1;h<f.length;h++)void 0,void 0,X=(U=f[h])[2]-($=f[h-1])[2],te=U[3]-$[3],J+=N=Math.sqrt(X*X+te*te),se.push(N);var H=J/se.length*ee;function Y(ne){return f[ne%f.length]}for(h=f.length-2;h>=G;h--)if((E=se[h])<H){for(S=0,M=h-1;M>=G&&E+se[M]<H;M--)E+=se[M];if(ae&&h===f.length-2)for(S=0;S<M&&E+se[S]<H;S++)E+=se[S];O=h-M+S+1,I=Math.floor((h+M+S+2)/2),C=ae||h!==f.length-2?ae||-1!==M?O%2?Y(I):[(Y(I)[0]+Y(I+1)[0])/2,(Y(I)[1]+Y(I+1)[1])/2]:f[0]:f[f.length-1],f.splice(M+1,h-M+1,C),h=M+1,S&&(G=S),ae&&(h===f.length-2?f[S]=f[f.length-1]:0===h&&(f[f.length-1]=f[0]))}for(f.splice(0,G),h=0;h<f.length;h++)f[h].length=2;if(!(f.length<2))if(ae)f.pop(),o.paths.push(f);else{l||y.log("Unclosed interior contour?",o.level,u.join(","),f.join("L"));var oe=!1;for(F=0;F<o.edgepaths.length;F++)if(P=o.edgepaths[F],!oe&&T(P[0],f[f.length-1],i,v)){f.pop(),oe=!0;var W=!1;for(L=0;L<o.edgepaths.length;L++)if(T((j=o.edgepaths[L])[j.length-1],f[0],i,v)){W=!0,f.shift(),o.edgepaths.splice(F,1),L===F?o.paths.push(f.concat(j)):(L>F&&L--,o.edgepaths[L]=j.concat(f,P));break}W||(o.edgepaths[F]=f.concat(P))}for(F=0;F<o.edgepaths.length&&!oe;F++)T((P=o.edgepaths[F])[P.length-1],f[0],i,v)&&(f.shift(),o.edgepaths[F]=P.concat(f),oe=!0);oe||o.edgepaths.push(f)}}function e(o,a,l){var i=a[0]+Math.max(l[0],0),v=a[1]+Math.max(l[1],0),h=o.z[v][i],s=o.xaxis,d=o.yaxis;if(l[1]){var p=(o.level-h)/(o.z[v][i+1]-h),f=(1!==p?(1-p)*s.c2l(o.x[i]):0)+(0!==p?p*s.c2l(o.x[i+1]):0);return[s.c2p(s.l2c(f),!0),d.c2p(o.y[v],!0),i+p,v]}var g=(o.level-h)/(o.z[v+1][i]-h),m=(1!==g?(1-g)*d.c2l(o.y[v]):0)+(0!==g?g*d.c2l(o.y[v+1]):0);return[s.c2p(o.x[i],!0),d.c2p(d.l2c(m),!0),i,v+g]}ue.exports=function(o,a,l){var i,v,h,s;for(a=a||.01,l=l||.01,v=0;v<o.length;v++){for(h=o[v],s=0;s<h.starts.length;s++)_(h,h.starts[s],"edge",a,l);for(i=0;Object.keys(h.crossings).length&&i<1e4;)i++,_(h,Object.keys(h.crossings)[0].split(",").map(Number),void 0,a,l);1e4===i&&y.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(x,ue,le){"use strict";var y=x("../../components/color"),b=x("../heatmap/hover");ue.exports=function(T,_,e,o,a){a||(a={}),a.isContour=!0;var l=b(T,_,e,o,a);return l&&l.forEach(function(i){var v=i.trace;"constraint"===v.contours.type&&(v.fillcolor&&y.opacity(v.fillcolor)?i.color=y.addOpacity(v.fillcolor,1):v.contours.showlines&&y.opacity(v.line.color)&&(i.color=y.addOpacity(v.line.color,1)))}),l}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot").plot,style:x("./style"),colorbar:x("./colorbar"),hoverPoints:x("./hover"),moduleType:"trace",name:"contour",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T,_,e){if(e||(e={}),b("contours.showlabels")){var o=T.font;y.coerceFont(b,"contours.labelfont",{family:o.family,size:o.size,color:_}),b("contours.labelformat")}!1!==e.hasHover&&b("zhoverformat")}},{"../../lib":503}],751:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/colorscale"),T=x("./end_plus");ue.exports=function(_){var e=_.contours,o=e.start,a=T(e),l=e.size||1,i=Math.floor((a-o)/l)+1,v="lines"===e.coloring?0:1,h=b.extractOpts(_);isFinite(l)||(l=1,i=1);var s,d,p=h.reversescale?b.flipScale(h.colorscale):h.colorscale,f=p.length,g=new Array(f),m=new Array(f);if("heatmap"===e.coloring){var u=h.min,w=h.max;for(d=0;d<f;d++)g[d]=(s=p[d])[0]*(w-u)+u,m[d]=s[1];var c=y.extent([u,w,e.start,e.start+l*(i-1)]),E=c[u<w?0:1],M=c[u<w?1:0];E!==u&&(g.splice(0,0,E),m.splice(0,0,m[0])),M!==w&&(g.push(M),m.push(m[m.length-1]))}else for(d=0;d<f;d++)g[d]=((s=p[d])[0]*(i+v-1)-v/2)*l+o,m[d]=s[1];return b.makeColorScaleFunc({domain:g,range:m},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(x,ue,le){"use strict";var y=x("./constants");function b(T,_){var e=(_[0][0]>T?0:1)+(_[0][1]>T?0:2)+(_[1][1]>T?0:4)+(_[1][0]>T?0:8);return 5===e||10===e?T>(_[0][0]+_[0][1]+_[1][0]+_[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}ue.exports=function(T){var _,e,o,a,l,i,v,h,s,d=T[0].z,p=d.length,f=d[0].length,g=2===p||2===f;for(e=0;e<p-1;e++)for(a=[],0===e&&(a=a.concat(y.BOTTOMSTART)),e===p-2&&(a=a.concat(y.TOPSTART)),_=0;_<f-1;_++)for(o=a.slice(),0===_&&(o=o.concat(y.LEFTSTART)),_===f-2&&(o=o.concat(y.RIGHTSTART)),l=_+","+e,i=[[d[e][_],d[e][_+1]],[d[e+1][_],d[e+1][_+1]]],s=0;s<T.length;s++)(v=b((h=T[s]).level,i))&&(h.crossings[l]=v,-1!==o.indexOf(v)&&(h.starts.push([_,e]),g&&-1!==o.indexOf(v,o.indexOf(v)+1)&&h.starts.push([_,e])))}},{"./constants":739}],753:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../components/drawing"),_=x("../../components/colorscale"),e=x("../../lib/svg_text_utils"),o=x("../../plots/cartesian/axes"),a=x("../../plots/cartesian/set_convert"),l=x("../heatmap/plot"),i=x("./make_crossings"),v=x("./find_all_paths"),h=x("./empty_pathinfo"),s=x("./convert_to_constraints"),d=x("./close_boundaries"),p=x("./constants"),f=p.LABELOPTIMIZER;function g(w,c){var E,M,S,C,O,I,F="",L=0,P=w.edgepaths.map(function(ae,J){return J}),j=!0;function U(ae){return Math.abs(ae[1]-c[2][1])<.01}function X(ae){return Math.abs(ae[0]-c[2][0])<.01}for(;P.length;){for(I=T.smoothopen(w.edgepaths[L],w.smoothing),F+=j?I:I.replace(/^M/,"L"),P.splice(P.indexOf(L),1),E=w.edgepaths[L][w.edgepaths[L].length-1],C=-1,S=0;S<4;S++){if(!E){b.log("Missing end?",L,w);break}for(Math.abs(E[1]-c[0][1])<.01&&!X(E)?M=c[1]:Math.abs(E[0]-c[0][0])<.01?M=c[0]:U(E)?M=c[3]:X(E)&&(M=c[2]),O=0;O<w.edgepaths.length;O++){var te=w.edgepaths[O][0];Math.abs(E[0]-M[0])<.01?Math.abs(E[0]-te[0])<.01&&(te[1]-E[1])*(M[1]-te[1])>=0&&(M=te,C=O):Math.abs(E[1]-M[1])<.01?Math.abs(E[1]-te[1])<.01&&(te[0]-E[0])*(M[0]-te[0])>=0&&(M=te,C=O):b.log("endpt to newendpt is not vert. or horz.",E,M,te)}if(E=M,C>=0)break;F+="L"+M}if(C===w.edgepaths.length){b.log("unclosed perimeter path");break}(j=-1===P.indexOf(L=C))&&(L=P[0],F+="Z")}for(L=0;L<w.paths.length;L++)F+=T.smoothclosed(w.paths[L],w.smoothing);return F}function m(w,c,E,M){var S=c.width/2,C=c.height/2,O=w.x,I=w.y,N=w.theta,F=Math.cos(N)*S,L=Math.sin(N)*S,P=(O>M.center?M.right-O:O-M.left)/(F+Math.abs(Math.sin(N)*C)),j=(I>M.middle?M.bottom-I:I-M.top)/(Math.abs(L)+Math.cos(N)*C);if(P<1||j<1)return 1/0;var U=f.EDGECOST*(1/(P-1)+1/(j-1));U+=f.ANGLECOST*N*N;for(var $=O-F,X=I-L,te=O+F,ae=I+L,J=0;J<E.length;J++){var ee=E[J],se=Math.cos(ee.theta)*ee.width/2,G=Math.sin(ee.theta)*ee.width/2,H=2*b.segmentDistance($,X,te,ae,ee.x-se,ee.y-G,ee.x+se,ee.y+G)/(c.height+ee.height),Y=ee.level===c.level,oe=Y?f.SAMELEVELDISTANCE:1;if(H<=oe)return 1/0;U+=f.NEIGHBORCOST*(Y?f.SAMELEVELFACTOR:1)/(H-oe)}return U}function u(w){var c,E,M=w.trace._emptypoints,S=[],C=w.z.length,O=w.z[0].length,I=[];for(c=0;c<O;c++)I.push(1);for(c=0;c<C;c++)S.push(I.slice());for(c=0;c<M.length;c++)S[(E=M[c])[0]][E[1]]=0;return w.zmask=S,S}le.plot=function(w,c,E,M){var S=c.xaxis,C=c.yaxis;b.makeTraceGroups(M,E,"contour").each(function(O){var I=y.select(this),N=O[0],L=N.x,P=N.y,j=N.trace.contours,U=h(j,c,N),$=b.ensureSingle(I,"g","heatmapcoloring"),X=[];"heatmap"===j.coloring&&(X=[O]),l(w,c,X,$),i(U),v(U);var Y,oe,W,te=S.c2p(L[0],!0),ae=S.c2p(L[L.length-1],!0),J=C.c2p(P[0],!0),ee=C.c2p(P[P.length-1],!0),se=[[te,ee],[ae,ee],[ae,J],[te,J]],G=U;"constraint"===j.type&&(G=s(U,j._operation)),Y=se,oe=j,(W=b.ensureSingle(I,"g","contourbg").selectAll("path").data("fill"===oe.coloring?[0]:[])).enter().append("path"),W.exit().remove(),W.attr("d","M"+Y.join("L")+"Z").style("stroke","none"),function(H,Y,oe,W){var ne="fill"===W.coloring||"constraint"===W.type&&"="!==W._operation,re="M"+oe.join("L")+"Z";ne&&d(Y,W);var ce=b.ensureSingle(H,"g","contourfill").selectAll("path").data(ne?Y:[]);ce.enter().append("path"),ce.exit().remove(),ce.each(function(fe){var me=(fe.prefixBoundary?re:"")+g(fe,oe);me?y.select(this).attr("d",me).style("stroke","none"):y.select(this).remove()})}(I,G,se,j),function(H,Y,oe,W,ne){var re=b.ensureSingle(H,"g","contourlines"),ce=!1!==ne.showlines,fe=ne.showlabels,me=ce&&fe,pe=le.createLines(re,ce||fe,Y),we=le.createLineClip(re,me,oe,W.trace.uid),ye=H.selectAll("g.contourlabels").data(fe?[0]:[]);if(ye.exit().remove(),ye.enter().append("g").classed("contourlabels",!0),fe){var Te=[],Le=[];b.clearLocationCache();var Oe=le.labelFormatter(oe,W),Re=T.tester.append("text").attr("data-notex",1).call(T.font,ne.labelfont),Ve=Y[0].xaxis,_e=Y[0].yaxis,Ae=Ve._length,Fe=_e._length,Pe=Ve.range,Be=_e.range,qe=b.aggNums(Math.min,null,W.x),We=b.aggNums(Math.max,null,W.x),Je=b.aggNums(Math.min,null,W.y),ut=b.aggNums(Math.max,null,W.y),Ge=Math.max(Ve.c2p(qe,!0),0),Ke=Math.min(Ve.c2p(We,!0),Ae),nt=Math.max(_e.c2p(ut,!0),0),it=Math.min(_e.c2p(Je,!0),Fe),ht={};Pe[0]<Pe[1]?(ht.left=Ge,ht.right=Ke):(ht.left=Ke,ht.right=Ge),Be[0]<Be[1]?(ht.top=nt,ht.bottom=it):(ht.top=it,ht.bottom=nt),ht.middle=(ht.top+ht.bottom)/2,ht.center=(ht.left+ht.right)/2,Te.push([[ht.left,ht.top],[ht.right,ht.top],[ht.right,ht.bottom],[ht.left,ht.bottom]]);var Tt=Math.sqrt(Ae*Ae+Fe*Fe),Ct=p.LABELDISTANCE*Tt/Math.max(1,Y.length/p.LABELINCREASE);pe.each(function(Vt){var Ft=le.calcTextOpts(Vt.level,Oe,Re,oe);y.select(this).selectAll("path").each(function(){var gt=b.getVisibleSegment(this,ht,Ft.height/2);if(gt&&!(gt.len<(Ft.width+Ft.height)*p.LABELMIN))for(var ft=Math.min(Math.ceil(gt.len/Ct),p.LABELMAX),Bt=0;Bt<ft;Bt++){var rn=le.findBestTextLocation(this,gt,Ft,Le,ht);if(!rn)break;le.addLabelData(rn,Ft,Le,Te)}})}),Re.remove(),le.drawLabels(ye,Le,oe,we,me?Te:null)}fe&&!ce&&pe.remove()}(I,U,w,N,j),function(H,Y,oe,W,ne){var re=W.trace,fe="clip"+re.uid,me=oe._fullLayout._clips.selectAll("#"+fe).data(re.connectgaps?[]:[0]);if(me.enter().append("clipPath").classed("contourclip",!0).attr("id",fe),me.exit().remove(),!1===re.connectgaps){var pe={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Y.xaxis,yaxis:Y.yaxis,x:W.x,y:W.y,z:u(W),smoothing:0};i([pe]),v([pe]),d([pe],{type:"levels"}),b.ensureSingle(me,"path","").attr("d",(pe.prefixBoundary?"M"+ne.join("L")+"Z":"")+g(pe,ne))}else fe=null;T.setClipUrl(H,fe,oe)}(I,c,w,N,se)})},le.createLines=function(w,c,E){var M=E[0].smoothing,S=w.selectAll("g.contourlevel").data(c?E:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),c){var C=S.selectAll("path.openline").data(function(I){return I.pedgepaths||I.edgepaths});C.exit().remove(),C.enter().append("path").classed("openline",!0),C.attr("d",function(I){return T.smoothopen(I,M)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var O=S.selectAll("path.closedline").data(function(I){return I.ppaths||I.paths});O.exit().remove(),O.enter().append("path").classed("closedline",!0),O.attr("d",function(I){return T.smoothclosed(I,M)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},le.createLineClip=function(w,c,E,M){var S=c?"clipline"+M:null,C=E._fullLayout._clips.selectAll("#"+S).data(c?[0]:[]);return C.exit().remove(),C.enter().append("clipPath").classed("contourlineclip",!0).attr("id",S),T.setClipUrl(w,S,E),C},le.labelFormatter=function(w,c){var E=w._fullLayout,M=c.trace,S=M.contours,C={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)C.tickformat=S.labelformat,a(C,E);else{var O=_.extractOpts(M);if(O&&O.colorbar&&O.colorbar._axis)C=O.colorbar._axis;else{if("constraint"===S.type){var I=S.value;C.range=Array.isArray(I)?[I[0],I[I.length-1]]:[I,I]}else C.range=[S.start,S.end],C.nticks=(S.end-S.start)/S.size;C.range[0]===C.range[1]&&(C.range[1]+=C.range[0]||1),C.nticks||(C.nticks=1e3),a(C,E),o.prepTicks(C),C._tmin=null,C._tmax=null}}return function(N){return o.tickText(C,N).text}},le.calcTextOpts=function(w,c,E,M){var S=c(w);E.text(S).call(e.convertToTspans,M);var C=E.node(),O=T.bBox(C,!0);return{text:S,width:O.width,height:O.height,fontSize:+C.style["font-size"].replace("px",""),level:w,dy:(O.top+O.bottom)/2}},le.findBestTextLocation=function(w,c,E,M,S){var C,O,I,N,F,L=E.width;c.isClosed?(C=c.min+(O=c.len/f.INITIALSEARCHPOINTS)/2,I=c.max):(C=c.min+(O=(c.len-L)/(f.INITIALSEARCHPOINTS+1))+L/2,I=c.max-(O+L)/2);for(var P=1/0,j=0;j<f.ITERATIONS;j++){for(var U=C;U<I;U+=O){var $=b.getTextLocation(w,c.total,U,L),X=m($,E,M,S);X<P&&(P=X,F=$,N=U)}if(P>2*f.MAXCOST)break;j&&(O/=2),I=(C=N-O/2)+1.5*O}if(P<=f.MAXCOST)return F},le.addLabelData=function(w,c,E,M){var S=c.fontSize,C=c.width+S/3,O=Math.max(0,c.height-S/3),I=w.x,N=w.y,F=w.theta,L=Math.sin(F),P=Math.cos(F),j=function($,X){return[I+$*P-X*L,N+$*L+X*P]},U=[j(-C/2,-O/2),j(-C/2,O/2),j(C/2,O/2),j(C/2,-O/2)];E.push({text:c.text,x:I,y:N,dy:c.dy,theta:F,level:c.level,width:C,height:O}),M.push(U)},le.drawLabels=function(w,c,E,M,S){var C=w.selectAll("text").data(c,function(N){return N.text+","+N.x+","+N.y+","+N.theta});if(C.exit().remove(),C.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(N){var F=N.x+Math.sin(N.theta)*N.dy,L=N.y-Math.cos(N.theta)*N.dy;y.select(this).text(N.text).attr({x:F,y:L,transform:"rotate("+180*N.theta/Math.PI+" "+F+" "+L+")"}).call(e.convertToTspans,E)}),S){for(var O="",I=0;I<S.length;I++)O+="M"+S[I].join("L")+"Z";b.ensureSingle(M,"path","").attr("d",O)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../lib");function T(_,e,o){var a={type:"linear",range:[_,e]};return y.autoTicks(a,(e-_)/(o||15)),a}ue.exports=function(_,e){var o=_.contours;if(_.autocontour){var a=_.zmin,l=_.zmax;(_.zauto||void 0===a)&&(a=b.aggNums(Math.min,null,e)),(_.zauto||void 0===l)&&(l=b.aggNums(Math.max,null,e));var i=T(a,l,_.ncontours);o.size=i.dtick,o.start=y.tickFirst(i),i.range.reverse(),o.end=y.tickFirst(i),o.start===a&&(o.start+=o.size),o.end===l&&(o.end-=o.size),o.start>o.end&&(o.start=o.end=(o.start+o.end)/2),_._input.contours||(_._input.contours={}),b.extendFlat(_._input.contours,{start:o.start,end:o.end,size:o.size}),_._input.autocontour=!0}else if("constraint"!==o.type){var v,h=o.start,s=o.end,d=_._input.contours;h>s&&(o.start=d.start=s,s=o.end=d.end=h,h=o.start),!(o.size>0)&&(v=h===s?1:T(h,s,_.ncontours).dtick,d.size=o.size=v)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/drawing"),T=x("../heatmap/style"),_=x("./make_color_map");ue.exports=function(e){var o=y.select(e).selectAll("g.contour");o.style("opacity",function(a){return a[0].trace.opacity}),o.each(function(a){var l=y.select(this),i=a[0].trace,v=i.contours,h=i.line,s=v.size||1,d=v.start,p="constraint"===v.type,f=!p&&"lines"===v.coloring,g=!p&&"fill"===v.coloring,m=f||g?_(i):null;l.selectAll("g.contourlevel").each(function(c){y.select(this).selectAll("path").call(b.lineGroupStyle,h.width,f?m(c.level):h.color,h.dash)});var u=v.labelfont;if(l.selectAll("g.contourlabels text").each(function(c){b.font(y.select(this),{family:u.family,size:u.size,color:u.color||(f?m(c.level):h.color)})}),p)l.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(g){var w;l.selectAll("g.contourfill path").style("fill",function(c){return void 0===w&&(w=c.level),m(c.level+.5*s)}),void 0===w&&(w=d),l.selectAll("g.contourbg path").style("fill",m(w-.5*s))}}),T(e)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/defaults"),b=x("./label_defaults");ue.exports=function(T,_,e,o,a){var l,i=e("contours.coloring"),v="";"fill"===i&&(l=e("contours.showlines")),!1!==l&&("lines"!==i&&(v=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==i&&(!0!==T.showlegend&&(_.showlegend=!1),_._dfltShowLegend=!1,y(T,_,o,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),b(e,o,v,a)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(x,ue,le){"use strict";var y=x("../heatmap/attributes"),b=x("../contour/attributes"),T=x("../../components/colorscale/attributes"),_=x("../../lib/extend").extendFlat,e=b.contours;ue.exports=_({carpet:{valType:"string",editType:"calc"},z:y.z,a:y.x,a0:y.x0,da:y.dx,b:y.y,b0:y.y0,db:y.dy,text:y.text,hovertext:y.hovertext,transpose:y.transpose,atype:y.xtype,btype:y.ytype,fillcolor:b.fillcolor,autocontour:b.autocontour,ncontours:b.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:b.line.color,width:b.line.width,dash:b.line.dash,smoothing:b.line.smoothing,editType:"plot"},transforms:void 0},T("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/calc"),b=x("../../lib"),T=x("../heatmap/convert_column_xyz"),_=x("../heatmap/clean_2d_array"),e=x("../heatmap/interp2d"),o=x("../heatmap/find_empties"),a=x("../heatmap/make_bound_array"),l=x("./defaults"),i=x("../carpet/lookup_carpetid"),v=x("../contour/set_contours");ue.exports=function(h,s){var d=s._carpetTrace=i(h,s);if(d&&d.visible&&"legendonly"!==d.visible){if(!s.a||!s.b){var p=h.data[d.index],f=h.data[s.index];f.a||(f.a=p.a),f.b||(f.b=p.b),l(f,s,s._defaultColor,h._fullLayout)}var g=function(m,u){var w,c,E,M,S,C,O,I=u._carpetTrace,N=I.aaxis,F=I.baxis;N._minDtick=0,F._minDtick=0,b.isArray1D(u.z)&&T(u,N,F,"a","b",["z"]),w=u._a=u._a||u.a,M=u._b=u._b||u.b,w=w?N.makeCalcdata(u,"_a"):[],M=M?F.makeCalcdata(u,"_b"):[],c=u.a0||0,E=u.da||1,S=u.b0||0,C=u.db||1,O=u._z=_(u._z||u.z,u.transpose),u._emptypoints=o(O),e(O,u._emptypoints);var L=b.maxRowLength(O),X={a:a(u,"scaled"===u.xtype?"":w,c,E,L,N),b:a(u,"scaled"===u.ytype?"":M,S,C,O.length,F),z:O};return"levels"===u.contours.type&&"none"!==u.contours.coloring&&y(m,u,{vals:O,containerStr:"",cLetter:"z"}),[X]}(h,s);return v(s,s._z),g}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../heatmap/xyz_defaults"),T=x("./attributes"),_=x("../contour/constraint_defaults"),e=x("../contour/contours_defaults"),o=x("../contour/style_defaults");ue.exports=function(a,l,i,v){function h(s,d){return y.coerce(a,l,T,s,d)}if(h("carpet"),a.a&&a.b){if(!b(a,l,h,v,"a","b"))return void(l.visible=!1);h("text"),"constraint"===h("contours.type")?_(a,l,h,v,i,{hasHover:!1}):(e(a,l,h,function(s){return y.coerce2(a,l,T,s)}),o(a,l,h,v,{hasHover:!1}))}else l._defaultColor=i,l._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../contour/colorbar"),calc:x("./calc"),plot:x("./plot"),style:x("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../carpet/map_1d_array"),T=x("../carpet/makepath"),_=x("../../components/drawing"),e=x("../../lib"),o=x("../contour/make_crossings"),a=x("../contour/find_all_paths"),l=x("../contour/plot"),i=x("../contour/constants"),v=x("../contour/convert_to_constraints"),h=x("../contour/empty_pathinfo"),s=x("../contour/close_boundaries"),d=x("../carpet/lookup_carpetid"),p=x("../carpet/axis_aligned_line");function f(u,w,c){var E=u.getPointAtLength(w),M=u.getPointAtLength(c),S=M.x-E.x,C=M.y-E.y,O=Math.sqrt(S*S+C*C);return[S/O,C/O]}function g(u){var w=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return[u[0]/w,u[1]/w]}function m(u,w){var c=Math.abs(u[0]*w[0]+u[1]*w[1]);return Math.sqrt(1-c*c)/c}ue.exports=function(u,w,c,E){var M=w.xaxis,S=w.yaxis;e.makeTraceGroups(E,c,"contour").each(function(C){var O=y.select(this),I=C[0],N=I.trace,F=N._carpetTrace=d(u,N),L=u.calcdata[F.index][0];if(F.visible&&"legendonly"!==F.visible){var P=I.a,j=I.b,U=N.contours,$=h(U,w,I),X="constraint"===U.type,te=U._operation,ae=X?"="===te?"lines":"fill":U.coloring,J=[[P[0],j[j.length-1]],[P[P.length-1],j[j.length-1]],[P[P.length-1],j[0]],[P[0],j[0]]];o($),a($,1e-8*(P[P.length-1]-P[0]),1e-8*(j[j.length-1]-j[0]));var G,H,Y,oe,W=$;"constraint"===U.type&&(W=v($,te)),function(fe,me){var pe,we,ye,Te,Le,Oe,Re,Ve,_e;for(pe=0;pe<fe.length;pe++){for(Le=(Te=fe[pe]).pedgepaths=[],Oe=Te.ppaths=[],we=0;we<Te.edgepaths.length;we++){for(_e=Te.edgepaths[we],Re=[],ye=0;ye<_e.length;ye++)Re[ye]=me(_e[ye]);Le.push(Re)}for(we=0;we<Te.paths.length;we++){for(_e=Te.paths[we],Ve=[],ye=0;ye<_e.length;ye++)Ve[ye]=me(_e[ye]);Oe.push(Ve)}}}($,ce);var ne=[];for(oe=L.clipsegments.length-1;oe>=0;oe--)H=b([],(G=L.clipsegments[oe]).x,M.c2p),Y=b([],G.y,S.c2p),H.reverse(),Y.reverse(),ne.push(T(H,Y,G.bicubic));var re="M"+ne.join("L")+"Z";(function(fe,me,pe,we,ye,Te){var Le,Oe,Re,Ve,_e=e.ensureSingle(fe,"g","contourbg").selectAll("path").data("fill"!==Te||ye?[]:[0]);_e.enter().append("path"),_e.exit().remove();var Ae=[];for(Ve=0;Ve<me.length;Ve++)Oe=b([],(Le=me[Ve]).x,pe.c2p),Re=b([],Le.y,we.c2p),Ae.push(T(Oe,Re,Le.bicubic));_e.attr("d","M"+Ae.join("L")+"Z").style("stroke","none")})(O,L.clipsegments,M,S,X,ae),function(fe,me,pe,we,ye,Te,Le,Oe,Re,Ve,_e){var Ae="fill"===Ve;Ae&&s(ye,fe.contours);var Fe=e.ensureSingle(me,"g","contourfill").selectAll("path").data(Ae?ye:[]);Fe.enter().append("path"),Fe.exit().remove(),Fe.each(function(Pe){var Be=(Pe.prefixBoundary?_e:"")+function(qe,We,Je,ut,Ge,Ke,nt,it){var ht,Tt,Ct,Vt,Ft,gt,ft,Bt="",rn=We.edgepaths.map(function(tt,ot){return ot}),un=!0,pn=1e-4*Math.abs(Je[0][0]-Je[2][0]),dn=1e-4*Math.abs(Je[0][1]-Je[2][1]);function Mn(tt){return Math.abs(tt[1]-Je[0][1])<dn}function ln(tt){return Math.abs(tt[1]-Je[2][1])<dn}function Ee(tt){return Math.abs(tt[0]-Je[0][0])<pn}function De(tt){return Math.abs(tt[0]-Je[2][0])<pn}function Ie(tt,ot){var st,bt,wt,Ut,Kt="";for(Mn(tt)&&!De(tt)||ln(tt)&&!Ee(tt)?(Ut=Ge.aaxis,wt=p(Ge,Ke,[tt[0],ot[0]],.5*(tt[1]+ot[1]))):(Ut=Ge.baxis,wt=p(Ge,Ke,.5*(tt[0]+ot[0]),[tt[1],ot[1]])),st=1;st<wt.length;st++)for(Kt+=Ut.smoothing?"C":"L",bt=0;bt<wt[st].length;bt++){var vt=wt[st][bt];Kt+=[nt.c2p(vt[0]),it.c2p(vt[1])]+" "}return Kt}for(ht=0,Tt=null;rn.length;){for(Tt&&(Bt+=Ie(Tt,We.edgepaths[ht][0])),ft=_.smoothopen(We.edgepaths[ht].map(ut),We.smoothing),Bt+=un?ft:ft.replace(/^M/,"L"),rn.splice(rn.indexOf(ht),1),Tt=We.edgepaths[ht][We.edgepaths[ht].length-1],Ft=-1,Vt=0;Vt<4;Vt++){if(!Tt){e.log("Missing end?",ht,We);break}for(Mn(Tt)&&!De(Tt)?Ct=Je[1]:Ee(Tt)?Ct=Je[0]:ln(Tt)?Ct=Je[3]:De(Tt)&&(Ct=Je[2]),gt=0;gt<We.edgepaths.length;gt++){var Ye=We.edgepaths[gt][0];Math.abs(Tt[0]-Ct[0])<pn?Math.abs(Tt[0]-Ye[0])<pn&&(Ye[1]-Tt[1])*(Ct[1]-Ye[1])>=0&&(Ct=Ye,Ft=gt):Math.abs(Tt[1]-Ct[1])<dn?Math.abs(Tt[1]-Ye[1])<dn&&(Ye[0]-Tt[0])*(Ct[0]-Ye[0])>=0&&(Ct=Ye,Ft=gt):e.log("endpt to newendpt is not vert. or horz.",Tt,Ct,Ye)}if(Ft>=0)break;Bt+=Ie(Tt,Ct),Tt=Ct}if(Ft===We.edgepaths.length){e.log("unclosed perimeter path");break}(un=-1===rn.indexOf(ht=Ft))&&(ht=rn[0],Bt+=Ie(Tt,Ct)+"Z",Tt=null)}for(ht=0;ht<We.paths.length;ht++)Bt+=_.smoothclosed(We.paths[ht].map(ut),We.smoothing);return Bt}(0,Pe,Te,Le,Oe,Re,pe,we);Be?y.select(this).attr("d",Be).style("stroke","none"):y.select(this).remove()})}(N,O,M,S,W,J,ce,F,L,ae,re),function(fe,me,pe,we,ye,Te,Le){var Oe=e.ensureSingle(fe,"g","contourlines"),Re=!1!==ye.showlines,Ve=ye.showlabels,_e=Re&&Ve,Ae=l.createLines(Oe,Re||Ve,me),Fe=l.createLineClip(Oe,_e,pe,we.trace.uid),Pe=fe.selectAll("g.contourlabels").data(Ve?[0]:[]);if(Pe.exit().remove(),Pe.enter().append("g").classed("contourlabels",!0),Ve){var We=Te.xaxis._length,Je=Te.yaxis._length,ut=[[[0,0],[We,0],[We,Je],[0,Je]]],Ge=[];e.clearLocationCache();var Ke=l.labelFormatter(pe,we),nt=_.tester.append("text").attr("data-notex",1).call(_.font,ye.labelfont),it={left:0,right:We,center:We/2,top:0,bottom:Je,middle:Je/2},ht=Math.sqrt(We*We+Je*Je),Tt=i.LABELDISTANCE*ht/Math.max(1,me.length/i.LABELINCREASE);Ae.each(function(Ct){var Vt=l.calcTextOpts(Ct.level,Ke,nt,pe);y.select(this).selectAll("path").each(function(Ft){var gt=e.getVisibleSegment(this,it,Vt.height/2);if(gt&&(function(un,pn,dn,Mn,ln,Ee){for(var De,Ie=0;Ie<dn.pedgepaths.length;Ie++)pn===dn.pedgepaths[Ie]&&(De=dn.edgepaths[Ie]);if(De){var He=ln.a[0],Ye=ln.a[ln.a.length-1],tt=ln.b[0],ot=ln.b[ln.b.length-1],bt=f(un,0,1),wt=f(un,Mn.total,Mn.total-1),Ut=st(De[0],bt),Kt=Mn.total-st(De[De.length-1],wt);Mn.min<Ut&&(Mn.min=Ut),Mn.max>Kt&&(Mn.max=Kt),Mn.len=Mn.max-Mn.min}function st(vt,Et){var $t,Dt=0;return(Math.abs(vt[0]-He)<.1||Math.abs(vt[0]-Ye)<.1)&&($t=g(ln.dxydb_rough(vt[0],vt[1],.1)),Dt=Math.max(Dt,Ee*m(Et,$t)/2)),(Math.abs(vt[1]-tt)<.1||Math.abs(vt[1]-ot)<.1)&&($t=g(ln.dxyda_rough(vt[0],vt[1],.1)),Dt=Math.max(Dt,Ee*m(Et,$t)/2)),Dt}}(this,Ft,Ct,gt,Le,Vt.height),!(gt.len<(Vt.width+Vt.height)*i.LABELMIN)))for(var ft=Math.min(Math.ceil(gt.len/Tt),i.LABELMAX),Bt=0;Bt<ft;Bt++){var rn=l.findBestTextLocation(this,gt,Vt,Ge,it);if(!rn)break;l.addLabelData(rn,Vt,Ge,ut)}})}),nt.remove(),l.drawLabels(Pe,Ge,pe,Fe,_e?ut:null)}Ve&&!Re&&Ae.remove()}(O,$,u,I,U,w,F),_.setClipUrl(O,F._clipPathId,u)}function ce(fe){var me=F.ab2xy(fe[0],fe[1],!0);return[M.c2p(me[0]),S.c2p(me[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/attributes"),b=x("../../plots/template_attributes").hovertemplateAttrs,T=x("../../plots/attributes"),_=x("../scattermapbox/attributes"),e=x("../../lib/extend").extendFlat;ue.exports=e({lon:_.lon,lat:_.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:_.text,hovertext:_.hovertext,hoverinfo:e({},T.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:b(),showlegend:e({},T.showlegend,{dflt:!1})},y("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":993}],763:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib").isArrayOrTypedArray,T=x("../../constants/numerical").BADNUM,_=x("../../components/colorscale/calc"),e=x("../../lib")._;ue.exports=function(o,a){for(var l=a._length,i=new Array(l),v=a.z,h=b(v)&&v.length,s=0;s<l;s++){var d=i[s]={},p=a.lon[s],f=a.lat[s];if(d.lonlat=y(p)&&y(f)?[+p,+f]:[T,T],h){var g=v[s];d.z=y(g)?g:T}}return _(o,a,{vals:h?v:[0,1],containerStr:"",cLetter:"z"}),l&&(i[0].t={labels:{lat:e(o,"lat:")+" ",lon:e(o,"lon:")+" "}}),i}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../../components/color"),_=x("../../components/colorscale"),e=x("../../constants/numerical").BADNUM,o=x("../../lib/geojson_utils").makeBlank;ue.exports=function(a){var l=a[0].trace,i=!0===l.visible&&0!==l._length,v=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:o()};if(!i)return v;var h,s=[],d=l.z,p=l.radius,f=b.isArrayOrTypedArray(d)&&d.length,g=b.isArrayOrTypedArray(p);for(h=0;h<a.length;h++){var m=a[h],u=m.lonlat;if(u[0]!==e){var w={};if(f){var c=m.z;w.z=c!==e?c:0}g&&(w.r=y(p[h])&&p[h]>0?+p[h]:0),s.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:w})}}var E=_.extractOpts(l),M=E.reversescale?_.flipScale(E.colorscale):E.colorscale,S=M[0][1],C=["interpolate",["linear"],["heatmap-density"],0,T.opacity(S)<1?S:T.addOpacity(S,0)];for(h=1;h<M.length;h++)C.push(M[h][0],M[h][1]);return b.extendFlat(v.heatmap.paint,{"heatmap-weight":f?["interpolate",["linear"],["get","z"],E.min,0,E.max,1]:1/(E.max-E.min),"heatmap-color":C,"heatmap-radius":g?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity}),v.geojson={type:"FeatureCollection",features:s},v.heatmap.layout.visibility="visible",v}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/colorscale/defaults"),T=x("./attributes");ue.exports=function(_,e,o,a){function l(s,d){return y.coerce(_,e,T,s,d)}var i=l("lon")||[],v=l("lat")||[],h=Math.min(i.length,v.length);h?(e._length=h,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),b(_,e,a,l,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(x,ue,le){"use strict";ue.exports=function(y,b){return y.lon=b.lon,y.lat=b.lat,y.z=b.z,y}},{}],767:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../scattermapbox/hover").hoverPoints,T=x("../scattermapbox/hover").getExtraText;ue.exports=function(_,e,o){var a=b(_,e,o);if(a){var l=a[0],i=l.cd,v=i[0].trace,h=i[l.index];if(delete l.color,"z"in h){var s=l.subplot.mockAxis;l.z=h.z,l.zLabel=y.tickText(s,s.c2l(h.z),"hover").text}return l.extraText=T(v,h,i[0].t.labels),[l]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":998}],768:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),formatLabels:x("../scattermapbox/format_labels"),calc:x("./calc"),plot:x("./plot"),hoverPoints:x("./hover"),eventData:x("./event_data"),getBelow:function(y,b){for(var T=b.getMapLayers(),_=0;_<T.length;_++){var e=T[_],o=e.id;if("symbol"===e.type&&"string"==typeof o&&-1===o.indexOf("plotly-"))return o}},moduleType:"trace",name:"densitymapbox",basePlotModule:x("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":997,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(x,ue,le){"use strict";var y=x("./convert"),b=x("../../plots/mapbox/constants").traceLayerPrefix;function T(e,o){this.type="densitymapbox",this.subplot=e,this.uid=o,this.sourceId="source-"+o,this.layerList=[["heatmap",b+o+"-heatmap"]],this.below=null}var _=T.prototype;_.update=function(e){var o=this.subplot,a=this.layerList,l=y(e),i=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(l.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(l,i),this.below=i);for(var v=0;v<a.length;v++){var h=a[v],d=h[1],p=l[h[0]];o.setOptions(d,"setLayoutProperty",p.layout),"visible"===p.layout.visibility&&o.setOptions(d,"setPaintProperty",p.paint)}},_._addLayers=function(e,o){for(var a=this.subplot,l=this.layerList,i=this.sourceId,v=0;v<l.length;v++){var h=l[v],s=h[0],d=e[s];a.addLayer({type:s,id:h[1],source:i,layout:d.layout,paint:d.paint},o)}},_._removeLayers=function(){for(var e=this.subplot.map,o=this.layerList,a=o.length-1;a>=0;a--)e.removeLayer(o[a][1])},_.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},ue.exports=function(e,o){var a=o[0].trace,l=new T(e,a.uid),i=l.sourceId,v=y(o),h=l.below=e.belowLookup["trace-"+a.uid];return e.map.addSource(i,{type:"geojson",data:v.geojson}),l._addLayers(v,h),l}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T){for(var _=0;_<b.length;_++)b[_].i=_;y.mergeArray(T.text,b,"tx"),y.mergeArray(T.hovertext,b,"htx");var e=T.marker;if(e){y.mergeArray(e.opacity,b,"mo"),y.mergeArray(e.color,b,"mc");var o=e.line;o&&(y.mergeArray(o.color,b,"mlc"),y.mergeArrayCastPositive(o.width,b,"mlw"))}}},{"../../lib":503}],771:[function(x,ue,le){"use strict";var y,b=x("../bar/attributes"),T=x("../scatter/attributes").line,_=x("../../plots/attributes"),e=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=x("../../plots/template_attributes").hovertemplateAttrs,a=x("../../plots/template_attributes").texttemplateAttrs,l=x("./constants"),i=x("../../lib/extend").extendFlat,v=x("../../components/color");ue.exports={x:b.x,x0:b.x0,dx:b.dx,y:b.y,y0:b.y0,dy:b.dy,xperiod:b.xperiod,yperiod:b.yperiod,xperiod0:b.xperiod0,yperiod0:b.yperiod0,xperiodalignment:b.xperiodalignment,yperiodalignment:b.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:b.hovertext,hovertemplate:o({},{keys:l.eventDataKeys}),hoverinfo:i({},_.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),text:b.text,textposition:b.textposition,insidetextanchor:i({},b.insidetextanchor,{dflt:"middle"}),textangle:i({},b.textangle,{dflt:0}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:b.outsidetextfont,constraintext:b.constraintext,cliponaxis:b.cliponaxis,orientation:i({},b.orientation,{}),offset:i({},b.offset,{arrayOk:!1}),width:i({},b.width,{arrayOk:!1}),marker:(y=i({},b.marker),delete y.pattern,y),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},T.color,{dflt:v.defaultLine}),width:i({},T.width,{dflt:0,editType:"plot"}),dash:T.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:b.offsetgroup,alignmentgroup:b.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":773}],772:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../plots/cartesian/align_period"),T=x("./arrays_to_calcdata"),_=x("../scatter/calc_selection"),e=x("../../constants/numerical").BADNUM;function o(a){return a===e?0:a}ue.exports=function(a,l){var i,v,h,s,d,p,f,g,m=y.getFromId(a,l.xaxis||"x"),u=y.getFromId(a,l.yaxis||"y");"h"===l.orientation?(i=m.makeCalcdata(l,"x"),h=u.makeCalcdata(l,"y"),s=b(l,u,"y",h),d=!!l.yperiodalignment,p="y"):(i=u.makeCalcdata(l,"y"),h=m.makeCalcdata(l,"x"),s=b(l,m,"x",h),d=!!l.xperiodalignment,p="x"),v=s.vals;var w,c=Math.min(v.length,i.length),E=new Array(c);for(l._base=[],f=0;f<c;f++){i[f]<0&&(i[f]=e);var M=!1;i[f]!==e&&f+1<c&&i[f+1]!==e&&(M=!0),g=E[f]={p:v[f],s:i[f],cNext:M},l._base[f]=-.5*g.s,d&&(E[f].orig_p=h[f],E[f][p+"End"]=s.ends[f],E[f][p+"Start"]=s.starts[f]),l.ids&&(g.id=String(l.ids[f])),0===f&&(E[0].vTotal=0),E[0].vTotal+=o(g.s),g.begR=o(g.s)/o(E[0].s)}for(f=0;f<c;f++)(g=E[f]).s!==e&&(g.sumR=g.s/E[0].vTotal,g.difR=void 0!==w?g.s/w:1,w=g.s);return T(E,l),_(E,l),E}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":770}],773:[function(x,ue,le){"use strict";ue.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(x,ue,le){"use strict";var y=x("../bar/cross_trace_calc").setGroupPositions;ue.exports=function(b,T){var _,e,o=b._fullLayout,a=b._fullData,l=b.calcdata,i=T.xaxis,v=T.yaxis,h=[],s=[],d=[];for(e=0;e<a.length;e++){var p=a[e];!0===p.visible&&p.xaxis===i._id&&p.yaxis===v._id&&"funnel"===p.type&&(_=l[e],"h"===p.orientation?d.push(_):s.push(_),h.push(_))}var g={mode:o.funnelmode,norm:o.funnelnorm,gap:o.funnelgap,groupgap:o.funnelgroupgap};for(y(b,i,v,s,g),y(b,v,i,d,g),e=0;e<h.length;e++){_=h[e];for(var m=0;m<_.length;m++)m+1<_.length&&(_[m].nextP0=_[m+1].p0,_[m].nextS0=_[m+1].s0,_[m].nextP1=_[m+1].p1,_[m].nextS1=_[m+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../bar/defaults").handleGroupingDefaults,T=x("../bar/defaults").handleText,_=x("../scatter/xy_defaults"),e=x("../scatter/period_defaults"),o=x("./attributes"),a=x("../../components/color");ue.exports={supplyDefaults:function(l,i,v,h){function s(g,m){return y.coerce(l,i,o,g,m)}if(_(l,i,h,s)){e(l,i,h,s),s("xhoverformat"),s("yhoverformat"),s("orientation",i.y&&!i.x?"v":"h"),s("offset"),s("width");var d=s("text");s("hovertext"),s("hovertemplate");var p=s("textposition");T(l,i,h,s,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===i.textposition||i.texttemplate||s("textinfo",Array.isArray(d)?"text+value":"value");var f=s("marker.color",v);s("marker.line.color",a.defaultLine),s("marker.line.width"),s("connector.visible")&&(s("connector.fillcolor",(m=y.isArrayOrTypedArray(g=f)?"#000":g,a.addOpacity(m,.5*a.opacity(m)))),s("connector.line.width")&&(s("connector.line.color"),s("connector.line.dash")))}else i.visible=!1;var g,m},crossTraceDefaults:function(l,i){var v,h;function s(p){return y.coerce(h._input,h,o,p)}if("group"===i.funnelmode)for(var d=0;d<l.length;d++)v=(h=l[d])._input,b(v,h,i,s)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":771}],776:[function(x,ue,le){"use strict";ue.exports=function(y,b){return y.x="xVal"in b?b.xVal:b.x,y.y="yVal"in b?b.yVal:b.y,"percentInitial"in b&&(y.percentInitial=b.percentInitial),"percentPrevious"in b&&(y.percentPrevious=b.percentPrevious),"percentTotal"in b&&(y.percentTotal=b.percentTotal),b.xa&&(y.xaxis=b.xa),b.ya&&(y.yaxis=b.ya),y}},{}],777:[function(x,ue,le){"use strict";var y=x("../../components/color").opacity,b=x("../bar/hover").hoverOnBars,T=x("../../lib").formatPercent;ue.exports=function(_,e,o,a,l){var c,E,M,S,C,i=b(_,e,o,a,l);if(i){var v=i.cd,h=v[0].trace,d=v[i.index];i[("h"===h.orientation?"x":"y")+"LabelVal"]=d.s,i.percentInitial=d.begR,i.percentInitialLabel=T(d.begR,1),i.percentPrevious=d.difR,i.percentPreviousLabel=T(d.difR,1),i.percentTotal=d.sumR,i.percentTotalLabel=T(d.sumR,1);var p=d.hi||h.hoverinfo,f=[];if(p&&"none"!==p&&"skip"!==p){var g="all"===p,m=p.split("+"),u=function(w){return g||-1!==m.indexOf(w)};u("percent initial")&&f.push(i.percentInitialLabel+" of initial"),u("percent previous")&&f.push(i.percentPreviousLabel+" of previous"),u("percent total")&&f.push(i.percentTotalLabel+" of total")}return i.extraText=f.join("<br>"),i.color=(E=h.marker,S=(c=d).mlc||E.line.color,C=c.mlw||E.line.width,y(M=c.mc||E.color)?M:y(S)&&C?S:void 0),[i]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc"),plot:x("./plot"),style:x("./style").style,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(x,ue,le){"use strict";ue.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_,e){var o=!1;function a(v,h){return y.coerce(T,_,b,v,h)}for(var l=0;l<e.length;l++){var i=e[l];if(i.visible&&"funnel"===i.type){o=!0;break}}o&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../components/drawing"),_=x("../../constants/numerical").BADNUM,e=x("../bar/plot"),o=x("../bar/uniform_text").clearMinTextSize;function a(l,i,v,h){var s=[],d=[],p=h?i:v,f=h?v:i;return s[0]=p.c2p(l.s0,!0),d[0]=f.c2p(l.p0,!0),s[1]=p.c2p(l.s1,!0),d[1]=f.c2p(l.p1,!0),s[2]=p.c2p(l.nextS0,!0),d[2]=f.c2p(l.nextP0,!0),s[3]=p.c2p(l.nextS1,!0),d[3]=f.c2p(l.nextP1,!0),h?[s,d]:[d,s]}ue.exports=function(l,i,v,h){var d,p,m,u,s=l._fullLayout;o("funnel",s),d=l,m=(p=i).xaxis,u=p.yaxis,b.makeTraceGroups(h,v,"trace bars").each(function(w){var c=y.select(this),E=w[0].trace,M=b.ensureSingle(c,"g","regions");if(E.connector&&E.connector.visible){var S="h"===E.orientation,C=M.selectAll("g.region").data(b.identity);C.enter().append("g").classed("region",!0),C.exit().remove();var O=C.size();C.each(function(I,N){if(N===O-1||I.cNext){var F=a(I,m,u,S),L=F[0],P=F[1],j="";L[0]!==_&&P[0]!==_&&L[1]!==_&&P[1]!==_&&L[2]!==_&&P[2]!==_&&L[3]!==_&&P[3]!==_&&(j+=S?"M"+L[0]+","+P[1]+"L"+L[2]+","+P[2]+"H"+L[3]+"L"+L[1]+","+P[1]+"Z":"M"+L[1]+","+P[1]+"L"+L[2]+","+P[3]+"V"+P[2]+"L"+L[1]+","+P[0]+"Z"),""===j&&(j="M0,0Z"),b.ensureSingle(y.select(this),"path").attr("d",j).call(T.setClipUrl,p.layerClipId,d)}})}else M.remove()}),function(d,p,f,g){var m=p.xaxis,u=p.yaxis;b.makeTraceGroups(g,f,"trace bars").each(function(w){var c=y.select(this),E=w[0].trace,M=b.ensureSingle(c,"g","lines");if(E.connector&&E.connector.visible&&E.connector.line.width){var S="h"===E.orientation,C=M.selectAll("g.line").data(b.identity);C.enter().append("g").classed("line",!0),C.exit().remove();var O=C.size();C.each(function(I,N){if(N===O-1||I.cNext){var F=a(I,m,u,S),L=F[0],P=F[1],j="";void 0!==L[3]&&void 0!==P[3]&&(S?(j+="M"+L[0]+","+P[1]+"L"+L[2]+","+P[2],j+="M"+L[1]+","+P[1]+"L"+L[3]+","+P[2]):(j+="M"+L[1]+","+P[1]+"L"+L[2]+","+P[3],j+="M"+L[1]+","+P[0]+"L"+L[2]+","+P[2])),""===j&&(j="M0,0Z"),b.ensureSingle(y.select(this),"path").attr("d",j).call(T.setClipUrl,p.layerClipId,d)}})}else M.remove()})}(l,i,v,h),e.plot(l,i,v,h,{mode:s.funnelmode,norm:s.funnelmode,gap:s.funnelgap,groupgap:s.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/drawing"),T=x("../../components/color"),_=x("../../constants/interactions").DESELECTDIM,e=x("../bar/style"),o=x("../bar/uniform_text").resizeText,a=e.styleTextPoints;ue.exports={style:function(l,i,v){var h=v||y.select(l).selectAll("g.funnellayer").selectAll("g.trace");o(l,h,"funnel"),h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var d=y.select(this),p=s[0].trace;d.selectAll(".point > path").each(function(f){if(!f.isBlank){var g=p.marker;y.select(this).call(T.fill,f.mc||g.color).call(T.stroke,f.mlc||g.line.color).call(b.dashLine,g.line.dash,f.mlw||g.line.width).style("opacity",p.selectedpoints&&!f.selected?_:1)}}),a(d,p,l),d.selectAll(".regions").each(function(){y.select(this).selectAll("path").style("stroke-width",0).call(T.fill,p.connector.fillcolor)}),d.selectAll(".lines").each(function(){var f=p.connector.line;b.lineGroupStyle(y.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(x,ue,le){"use strict";var y=x("../pie/attributes"),b=x("../../plots/attributes"),T=x("../../plots/domain").attributes,_=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../plots/template_attributes").texttemplateAttrs,o=x("../../lib/extend").extendFlat;ue.exports={labels:y.labels,label0:y.label0,dlabel:y.dlabel,values:y.values,marker:{colors:y.marker.colors,line:{color:o({},y.marker.line.color,{dflt:null}),width:o({},y.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:y.text,hovertext:y.hovertext,scalegroup:o({},y.scalegroup,{}),textinfo:o({},y.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:o({},b.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:_({},{keys:["label","color","value","text","percent"]}),textposition:o({},y.textposition,{values:["inside","none"],dflt:"inside"}),textfont:y.textfont,insidetextfont:y.insidetextfont,title:{text:y.title.text,font:y.title.font,position:o({},y.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:T({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901}],784:[function(x,ue,le){"use strict";var y=x("../../plots/plots");le.name="funnelarea",le.plot=function(b,T,_,e){y.plotBasePlot(le.name,b,T,_,e)},le.clean=function(b,T,_,e){y.cleanBasePlot(le.name,b,T,_,e)}},{"../../plots/plots":619}],785:[function(x,ue,le){"use strict";var y=x("../pie/calc");ue.exports={calc:function(b,T){return y.calc(b,T)},crossTraceCalc:function(b){y.crossTraceCalc(b,{type:"funnelarea"})}}},{"../pie/calc":903}],786:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("../../plots/domain").defaults,_=x("../bar/defaults").handleText,e=x("../pie/defaults").handleLabelsAndValues;ue.exports=function(o,a,l,i){function v(w,c){return y.coerce(o,a,b,w,c)}var h=v("labels"),s=v("values"),d=e(h,s),p=d.len;if(a._hasLabels=d.hasLabels,a._hasValues=d.hasValues,!a._hasLabels&&a._hasValues&&(v("label0"),v("dlabel")),p){a._length=p,v("marker.line.width")&&v("marker.line.color",i.paper_bgcolor),v("marker.colors"),v("scalegroup");var f,g=v("text"),m=v("texttemplate");if(m||(f=v("textinfo",Array.isArray(g)?"text+percent":"percent")),v("hovertext"),v("hovertemplate"),m||f&&"none"!==f){var u=v("textposition");_(o,a,i,v,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}T(a,i,v),v("title.text")&&(v("title.position"),y.coerceFont(v,"title.font",i.font)),v("aspectratio"),v("baseratio")}else a.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":904,"./attributes":783}],787:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"funnelarea",basePlotModule:x("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),style:x("./style"),styleOne:x("../pie/style_one"),meta:{}}},{"../pie/style_one":912,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(x,ue,le){"use strict";var y=x("../pie/layout_attributes").hiddenlabels;ue.exports={hiddenlabels:y,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":908}],789:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_){function e(o,a){return y.coerce(T,_,b,o,a)}e("hiddenlabels"),e("funnelareacolorway",_.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/drawing"),T=x("../../lib"),_=T.strScale,e=T.strTranslate,o=x("../../lib/svg_text_utils"),a=x("../bar/plot").toMoveInsideBar,l=x("../bar/uniform_text"),i=l.recordMinTextSize,v=l.clearMinTextSize,h=x("../pie/helpers"),s=x("../pie/plot"),d=s.attachFxHandlers,p=s.determineInsideTextFont,f=s.layoutAreas,g=s.prerenderTitles,m=s.positionTitleOutside,u=s.formatSliceLabel;function w(c,E){return"l"+(E[0]-c[0])+","+(E[1]-c[1])}ue.exports=function(c,E){var M=c._fullLayout;v("funnelarea",M),g(E,c),f(E,M._size),T.makeTraceGroups(M._funnelarealayer,E,"trace").each(function(S){var C=y.select(this),O=S[0],I=O.trace;(function(N){if(N.length){var F=N[0],L=F.trace,P=L.aspectratio,j=L.baseratio;j>.999&&(j=.999);var U,ee,se,$=Math.pow(j,2),X=F.vTotal,te=X,ae=X*$/(1-$)/X,G=[];for(G.push(J()),ee=N.length-1;ee>-1;ee--)(se=N[ee]).hidden||(ae+=se.v/te,G.push(J()));var Y=1/0,oe=-1/0;for(ee=0;ee<G.length;ee++)U=G[ee],Y=Math.min(Y,U[1]),oe=Math.max(oe,U[1]);for(ee=0;ee<G.length;ee++)G[ee][1]-=(oe+Y)/2;var ne=F.r,re=(oe-Y)/2,ce=ne/G[G.length-1][0],fe=ne/re*P;for(F.r=fe*re,ee=0;ee<G.length;ee++)G[ee][0]*=ce,G[ee][1]*=fe;var Le,Oe,me=[-(U=G[0])[0],U[1]],pe=[U[0],U[1]],we=0;for(ee=N.length-1;ee>-1;ee--)if(!(se=N[ee]).hidden){var ye=G[we+=1][0],Te=G[we][1];se.TL=[-ye,Te],se.TR=[ye,Te],se.BL=me,se.BR=pe,se.pxmid=[.5*((Le=se.TR)[0]+(Oe=se.BR)[0]),.5*(Le[1]+Oe[1])],me=se.TL,pe=se.TR}}function J(){var Re,Ve={x:Re=Math.sqrt(ae),y:-Re};return[Ve.x,Ve.y]}})(S),C.each(function(){var N=y.select(this).selectAll("g.slice").data(S);N.enter().append("g").classed("slice",!0),N.exit().remove(),N.each(function(L,P){if(L.hidden)y.select(this).selectAll("path,g").remove();else{L.pointNumber=L.i,L.curveNumber=I.index;var j=O.cx,U=O.cy,$=y.select(this),X=$.selectAll("path.surface").data([L]);X.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),$.call(d,c,S);var te="M"+(j+L.TR[0])+","+(U+L.TR[1])+w(L.TR,L.BR)+w(L.BR,L.BL)+w(L.BL,L.TL)+"Z";X.attr("d",te),u(c,L,O);var ae=h.castOption(I.textposition,L.pts),J=$.selectAll("g.slicetext").data(L.text&&"none"!==ae?[0]:[]);J.enter().append("g").classed("slicetext",!0),J.exit().remove(),J.each(function(){var ee=T.ensureSingle(y.select(this),"text","",function(re){re.attr("data-notex",1)}),se=T.ensureUniformFontSize(c,p(I,L,M.font));ee.text(L.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,se).call(o.convertToTspans,c);var G,H,Y,oe=b.bBox(ee.node()),W=Math.min(L.BL[1],L.BR[1])+U,ne=Math.max(L.TL[1],L.TR[1])+U;H=Math.max(L.TL[0],L.BL[0])+j,Y=Math.min(L.TR[0],L.BR[0])+j,(G=a(H,Y,W,ne,oe,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=se.size,i(I.type,G,M),S[P].transform=G,ee.attr("transform",T.getTextTransform(G))})}});var F=y.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);F.enter().append("g").classed("titletext",!0),F.exit().remove(),F.each(function(){var L=T.ensureSingle(y.select(this),"text","",function(U){U.attr("data-notex",1)}),P=I.title.text;I._meta&&(P=T.templateString(P,I._meta)),L.text(P).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,I.title.font).call(o.convertToTspans,c);var j=m(O,M._size);L.attr("transform",e(j.x,j.y)+_(Math.min(1,j.scale))+e(j.tx,j.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"@plotly/d3":58}],791:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../pie/style_one"),T=x("../bar/uniform_text").resizeText;ue.exports=function(_){var e=_._fullLayout._funnelarealayer.selectAll(".trace");T(_,e,"funnelarea"),e.each(function(o){var a=o[0].trace,l=y.select(this);l.style({opacity:a.opacity}),l.selectAll("path.surface").each(function(i){y.select(this).call(b,i,a)})})}},{"../bar/uniform_text":664,"../pie/style_one":912,"@plotly/d3":58}],792:[function(x,ue,le){"use strict";var y=x("../scatter/attributes"),b=x("../../plots/attributes"),T=x("../../plots/font_attributes"),_=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../plots/template_attributes").hovertemplateAttrs,o=x("../../plots/template_attributes").texttemplateAttrs,a=x("../../components/colorscale/attributes"),l=x("../../lib/extend").extendFlat;ue.exports=l({z:{valType:"data_array",editType:"calc"},x:l({},y.x,{impliedEdits:{xtype:"array"}}),x0:l({},y.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},y.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},y.y,{impliedEdits:{ytype:"array"}}),y0:l({},y.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},y.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},y.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},y.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},y.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},y.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},y.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},y.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:e(),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:T({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:l({},b.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927}],793:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("../../plots/cartesian/axes"),_=x("../../plots/cartesian/align_period"),e=x("../histogram2d/calc"),o=x("../../components/colorscale/calc"),a=x("./convert_column_xyz"),l=x("./clean_2d_array"),i=x("./interp2d"),v=x("./find_empties"),h=x("./make_bound_array"),s=x("../../constants/numerical").BADNUM;function d(p){for(var f=[],g=p.length,m=0;m<g;m++){var u=p[m];u!==s&&f.push(u)}return f}ue.exports=function(p,f){var g,m,u,w,c,E,M,S,C,O,I,N=T.getFromId(p,f.xaxis||"x"),F=T.getFromId(p,f.yaxis||"y"),L=y.traceIs(f,"contour"),P=y.traceIs(f,"histogram"),j=y.traceIs(f,"gl2d"),U=L?"best":f.zsmooth;if(N._minDtick=0,F._minDtick=0,P)w=(I=e(p,f)).orig_x,g=I.x,m=I.x0,u=I.dx,S=I.orig_y,c=I.y,E=I.y0,M=I.dy,C=I.z;else{var $=f.z;b.isArray1D($)?(a(f,N,F,"x","y",["z"]),g=f._x,c=f._y,$=f._z):(w=f.x?N.makeCalcdata(f,"x"):[],S=f.y?F.makeCalcdata(f,"y"):[],g=_(f,N,"x",w).vals,c=_(f,F,"y",S).vals,f._x=g,f._y=c),m=f.x0,u=f.dx,E=f.y0,M=f.dy,C=l($,f,N,F)}function X(re){U=f._input.zsmooth=f.zsmooth=!1,b.warn('cannot use zsmooth: "fast": '+re)}if((N.rangebreaks||F.rangebreaks)&&(C=function(re,ce,fe){for(var me=[],pe=-1,we=0;we<fe.length;we++)if(ce[we]!==s){me[++pe]=[];for(var ye=0;ye<fe[we].length;ye++)re[ye]!==s&&me[pe].push(fe[we][ye])}return me}(g,c,C),P||(g=d(g),c=d(c),f._x=g,f._y=c)),P||!L&&!f.connectgaps||(f._emptypoints=v(C),i(C,f._emptypoints)),"fast"===U)if("log"===N.type||"log"===F.type)X("log axis found");else if(!P){if(g.length){var te=(g[g.length-1]-g[0])/(g.length-1),ae=Math.abs(te/100);for(O=0;O<g.length-1;O++)if(Math.abs(g[O+1]-g[O]-te)>ae){X("x scale is not linear");break}}if(c.length&&"fast"===U){var J=(c[c.length-1]-c[0])/(c.length-1),ee=Math.abs(J/100);for(O=0;O<c.length-1;O++)if(Math.abs(c[O+1]-c[O]-J)>ee){X("y scale is not linear");break}}}var se=b.maxRowLength(C),G="scaled"===f.xtype?"":g,H=h(f,G,m,u,se,N),Y="scaled"===f.ytype?"":c,oe=h(f,Y,E,M,C.length,F);j||(f._extremes[N._id]=T.findExtremes(N,H),f._extremes[F._id]=T.findExtremes(F,oe));var W={x:H,y:oe,z:C,text:f._text||f.text,hovertext:f._hovertext||f.hovertext};if(f.xperiodalignment&&w&&(W.orig_x=w),f.yperiodalignment&&S&&(W.orig_y=S),G&&G.length===H.length-1&&(W.xCenter=G),Y&&Y.length===oe.length-1&&(W.yCenter=Y),P&&(W.xRanges=I.xRanges,W.yRanges=I.yRanges,W.pts=I.pts),L||o(p,f,{vals:C,cLetter:"z"}),L&&f.contours&&"heatmap"===f.contours.coloring){var ne={type:"contour"===f.type?"heatmap":"histogram2d",xcalendar:f.xcalendar,ycalendar:f.ycalendar};W.xfill=h(ne,G,m,u,se,N),W.yfill=h(ne,Y,E,M,C.length,F)}return[W]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../../constants/numerical").BADNUM;ue.exports=function(_,e,o,a){var l,i,v,h,s,d;function p(c){if(y(c))return+c}if(e&&e.transpose){for(l=0,s=0;s<_.length;s++)l=Math.max(l,_[s].length);if(0===l)return!1;v=function(c){return c.length},h=function(c,E,M){return(c[M]||[])[E]}}else l=_.length,v=function(c,E){return c[E].length},h=function(c,E,M){return(c[E]||[])[M]};function g(c){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&c&&"category"===c.type&&e["_"+c._id.charAt(0)].length){var E=c._id.charAt(0),M={},S=e["_"+E+"CategoryMap"]||e[E];for(s=0;s<S.length;s++)M[S[s]]=s;return function(C){var O=M[c._categories[C]];return O+1?O:T}}return b.identity}var m=g(o),u=g(a);a&&"category"===a.type&&(l=a._categories.length);var c,E,M,w=new Array(l);for(s=0;s<l;s++)for(i=o&&"category"===o.type?o._categories.length:v(_,s),w[s]=new Array(i),d=0;d<i;d++)w[s][d]=p((c=_,E=u(s),M=m(d),E===T||M===T?T:h(c,E,M)));return w}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(x,ue,le){"use strict";ue.exports={min:"zmin",max:"zmax"}},{}],796:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../constants/numerical").BADNUM,T=x("../../plots/cartesian/align_period");ue.exports=function(_,e,o,a,l,i){var v=_._length,h=e.makeCalcdata(_,a),s=o.makeCalcdata(_,l);h=T(_,e,a,h).vals,s=T(_,o,l,s).vals;var d,p,f,g,m=_.text,u=void 0!==m&&y.isArray1D(m),w=_.hovertext,c=void 0!==w&&y.isArray1D(w),E=y.distinctVals(h),M=E.vals,S=y.distinctVals(s),C=S.vals,O=[],I=C.length,N=M.length;for(d=0;d<i.length;d++)O[d]=y.init2dArray(I,N);u&&(f=y.init2dArray(I,N)),c&&(g=y.init2dArray(I,N));var F=y.init2dArray(I,N);for(d=0;d<v;d++)if(h[d]!==b&&s[d]!==b){var L=y.findBin(h[d]+E.minDiff/2,M),P=y.findBin(s[d]+S.minDiff/2,C);for(p=0;p<i.length;p++)O[p][P][L]=_[i[p]][d],F[P][L]=d;u&&(f[P][L]=m[d]),c&&(g[P][L]=w[d])}for(_["_"+a]=M,_["_"+l]=C,p=0;p<i.length;p++)_["_"+i[p]]=O[p];u&&(_._text=f),c&&(_._hovertext=g),e&&"category"===e.type&&(_["_"+a+"CategoryMap"]=M.map(function(U){return e._categories[U]})),o&&"category"===o.type&&(_["_"+l+"CategoryMap"]=C.map(function(U){return o._categories[U]})),_._after2before=F}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./xyz_defaults"),T=x("./label_defaults"),_=x("../scatter/period_defaults"),e=x("./style_defaults"),o=x("../../components/colorscale/defaults"),a=x("./attributes");ue.exports=function(l,i,v,h){function s(d,p){return y.coerce(l,i,a,d,p)}b(l,i,s,h)?(_(l,i,h,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),T(s,h),e(l,i,s,h),s("hoverongaps"),s("connectgaps",y.isArray1D(i.z)&&!1!==i.zsmooth),o(l,i,h,s,{prefix:"",cLetter:"z"})):i.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":947,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(x,ue,le){"use strict";var y=x("../../lib").maxRowLength;ue.exports=function(b){var T,_,e,o,a,l,i,v,h=[],s={},d=[],p=b[0],f=[],g=[0,0,0],m=y(b);for(_=0;_<b.length;_++)for(T=f,f=p,p=b[_+1]||[],e=0;e<m;e++)void 0===f[e]&&((l=(void 0!==f[e-1]?1:0)+(void 0!==f[e+1]?1:0)+(void 0!==T[e]?1:0)+(void 0!==p[e]?1:0))?(0===_&&l++,0===e&&l++,_===b.length-1&&l++,e===f.length-1&&l++,l<4&&(s[[_,e]]=[_,e,l]),h.push([_,e,l])):d.push([_,e]));for(;d.length;){for(i={},v=!1,a=d.length-1;a>=0;a--)(l=((s[[(_=(o=d[a])[0])-1,e=o[1]]]||g)[2]+(s[[_+1,e]]||g)[2]+(s[[_,e-1]]||g)[2]+(s[[_,e+1]]||g)[2])/20)&&(i[o]=[_,e,l],d.splice(a,1),v=!0);if(!v)throw"findEmpties iterated with no new neighbors";for(o in i)s[o]=i[o],h.push(i[o])}return h.sort(function(u,w){return w[2]-u[2]})}},{"../../lib":503}],799:[function(x,ue,le){"use strict";var y=x("../../components/fx"),b=x("../../lib"),T=x("../../plots/cartesian/axes"),_=x("../../components/colorscale").extractOpts;ue.exports=function(e,o,a,l,i){i||(i={});var v,h,s,d,p=i.isContour,f=e.cd[0],g=f.trace,m=e.xa,u=e.ya,w=f.x,c=f.y,E=f.z,M=f.xCenter,S=f.yCenter,C=f.zmask,O=g.zhoverformat,I=w,N=c;if(!1!==e.index){try{s=Math.round(e.index[1]),d=Math.round(e.index[0])}catch(G){return void b.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(s<0||s>=E[0].length||d<0||d>E.length)return}else{if(y.inbox(o-w[0],o-w[w.length-1],0)>0||y.inbox(a-c[0],a-c[c.length-1],0)>0)return;if(p){var F;for(I=[2*w[0]-w[1]],F=1;F<w.length;F++)I.push((w[F]+w[F-1])/2);for(I.push([2*w[w.length-1]-w[w.length-2]]),N=[2*c[0]-c[1]],F=1;F<c.length;F++)N.push((c[F]+c[F-1])/2);N.push([2*c[c.length-1]-c[c.length-2]])}s=Math.max(0,Math.min(I.length-2,b.findBin(o,I))),d=Math.max(0,Math.min(N.length-2,b.findBin(a,N)))}var L,P,j=m.c2p(w[s]),U=m.c2p(w[s+1]),$=u.c2p(c[d]),X=u.c2p(c[d+1]);p?(U=j,v=(L=f.orig_x||w)[s],X=$,h=(P=f.orig_y||c)[d]):(L=f.orig_x||M||w,P=f.orig_y||S||c,v=M?L[s]:(L[s]+L[s+1])/2,h=S?P[d]:(P[d]+P[d+1])/2,m&&"category"===m.type&&(v=w[s]),u&&"category"===u.type&&(h=c[d]),g.zsmooth&&(j=U=m.c2p(v),$=X=u.c2p(h)));var te=E[d][s];if(C&&!C[d][s]&&(te=void 0),void 0!==te||g.hoverongaps){var ae;Array.isArray(f.hovertext)&&Array.isArray(f.hovertext[d])?ae=f.hovertext[d][s]:Array.isArray(f.text)&&Array.isArray(f.text[d])&&(ae=f.text[d][s]);var J=_(g),se=T.tickText({type:"linear",range:[J.min,J.max],hoverformat:O,_separators:m._separators,_numFormat:m._numFormat},te,"hover").text;return[b.extendFlat(e,{index:g._after2before?g._after2before[d][s]:[d,s],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:j,x1:U,y0:$,y1:X,xLabelVal:v,yLabelVal:h,zLabelVal:te,zLabel:se,text:ae})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),colorbar:x("./colorbar"),style:x("./style"),hoverPoints:x("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(x,ue,le){"use strict";var y=x("../../lib"),b=[[-1,0],[1,0],[0,-1],[0,1]];function T(e){return.5-.25*Math.min(1,.5*e)}function _(e,o,a){var l,i,v,h,s,d,p,f,g,m,u,w,c,E=0;for(h=0;h<o.length;h++){for(u=e[i=(l=o[h])[0]][v=l[1]],m=0,g=0,s=0;s<4;s++)(p=e[i+(d=b[s])[0]])&&void 0!==(f=p[v+d[1]])&&(0===m?w=c=f:(w=Math.min(w,f),c=Math.max(c,f)),g++,m+=f);if(0===g)throw"iterateInterp2d order is wrong: no defined neighbors";e[i][v]=m/g,void 0===u?g<4&&(E=1):(e[i][v]=(1+a)*e[i][v]-a*u,c>w&&(E=Math.max(E,Math.abs(e[i][v]-u)/(c-w))))}return E}ue.exports=function(e,o){var a,l=1;for(_(e,o),a=0;a<o.length&&!(o[a][2]<4);a++);for(o=o.slice(a),a=0;a<100&&l>.01;a++)l=_(e,o,T(l));return l>.01&&y.log("interp2d didn't converge quickly",l),e}},{"../../lib":503}],802:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T){b("texttemplate");var _=y.extendFlat({},T.font,{color:"auto",size:"auto"});y.coerceFont(b,"textfont",_)}},{"../../lib":503}],803:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib").isArrayOrTypedArray;ue.exports=function(T,_,e,o,a,l){var i,v,h,s=[],d=y.traceIs(T,"contour"),p=y.traceIs(T,"histogram"),f=y.traceIs(T,"gl2d");if(b(_)&&_.length>1&&!p&&"category"!==l.type){var g=_.length;if(!(g<=a))return _.slice(0,d?a:a+1);if(d||f)s=_.slice(0,a);else if(1===a)s=[_[0]-.5,_[0]+.5];else{for(s=[1.5*_[0]-.5*_[1]],h=1;h<g;h++)s.push(.5*(_[h-1]+_[h]));s.push(1.5*_[g-1]-.5*_[g-2])}if(g<a){var m=s[s.length-1],u=m-s[s.length-2];for(h=g;h<a;h++)s.push(m+=u)}}else{var w=T[l._id.charAt(0)+"calendar"];for(i=p?l.r2c(e,0,w):b(_)&&1===_.length?_[0]:void 0===e?0:("log"===l.type?l.d2c:l.r2c)(e,0,w),v=o||1,h=d||f?0:-.5;h<a;h++)s.push(i+v*h)}return s}},{"../../lib":503,"../../registry":638}],804:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("tinycolor2"),T=x("../../registry"),_=x("../../components/drawing"),e=x("../../plots/cartesian/axes"),o=x("../../lib"),a=x("../../lib/svg_text_utils"),l=x("../scatter/format_labels"),i=x("../../components/color"),v=x("../../components/colorscale").extractOpts,h=x("../../components/colorscale").makeColorScaleFuncFromTrace,s=x("../../constants/xmlns_namespaces"),d=x("../../constants/alignment").LINE_SPACING;function p(w){return w.selectAll("g.heatmap-label")}function f(w){p(w).remove()}function g(w,c){var E=c.length-2,M=o.constrain(o.findBin(w,c),0,E),S=c[M],O=o.constrain(M+(w-S)/(c[M+1]-S)-.5,0,E),I=Math.round(O),N=Math.abs(O-I);return O&&O!==E&&N?{bin0:I,frac:N,bin1:Math.round(I+N/(O-I))}:{bin0:I,bin1:I,frac:0}}function m(w,c){var E=c.length-1,M=o.constrain(o.findBin(w,c),0,E),S=c[M],C=(w-S)/(c[M+1]-S)||0;return C<=0?{bin0:M,bin1:M,frac:0}:C<.5?{bin0:M,bin1:M+1,frac:C}:{bin0:M+1,bin1:M,frac:1-C}}function u(w,c,E){w[c]=E[0],w[c+1]=E[1],w[c+2]=E[2],w[c+3]=Math.round(255*E[3])}ue.exports=function(w,c,E,M){var S=c.xaxis,C=c.yaxis;o.makeTraceGroups(M,E,"hm").each(function(O){var I,N,F,L,P,j,U,$,X=y.select(this),te=O[0],ae=te.trace,J=ae.xgap||0,ee=ae.ygap||0,se=te.z,G=te.x,H=te.y,Y=te.xCenter,oe=te.yCenter,W=T.traceIs(ae,"contour"),ne=W?"best":ae.zsmooth,re=se.length,ce=o.maxRowLength(se),fe=!1,me=!1;for(j=0;void 0===I&&j<G.length-1;)I=S.c2p(G[j]),j++;for(j=G.length-1;void 0===N&&j>0;)N=S.c2p(G[j]),j--;for(N<I&&(F=N,N=I,I=F,fe=!0),j=0;void 0===L&&j<H.length-1;)L=C.c2p(H[j]),j++;for(j=H.length-1;void 0===P&&j>0;)P=C.c2p(H[j]),j--;if(P<L&&(F=L,L=P,P=F,me=!0),W&&(Y=G,oe=H,G=te.xfill,H=te.yfill),"fast"!==ne){var pe="best"===ne?0:.5;I=Math.max(-pe*S._length,I),N=Math.min((1+pe)*S._length,N),L=Math.max(-pe*C._length,L),P=Math.min((1+pe)*C._length,P)}var we,ye,Te=Math.round(N-I),Le=Math.round(P-L);if(Te<=0||Le<=0)return X.selectAll("image").data([]).exit().remove(),void f(X);"fast"===ne?(we=ce,ye=re):(we=Te,ye=Le);var Oe=document.createElement("canvas");Oe.width=we,Oe.height=ye;var Re,Ve,_e=Oe.getContext("2d"),Ae=h(ae,{noNumericCheck:!0,returnArray:!0});"fast"===ne?(Re=fe?function(Br){return ce-1-Br}:o.identity,Ve=me?function(Br){return re-1-Br}:o.identity):(Re=function(Br){return o.constrain(Math.round(S.c2p(G[Br])-I),0,Te)},Ve=function(Br){return o.constrain(Math.round(C.c2p(H[Br])-L),0,Le)});var Fe,Pe,Be,qe,We=Ve(0),Je=[We,We],ut=fe?0:1,Ge=me?0:1,Ke=0,nt=0,it=0,ht=0;function Tt(Br,fr){if(void 0!==Br){var Nr=Ae(Br);return Nr[0]=Math.round(Nr[0]),Nr[1]=Math.round(Nr[1]),Nr[2]=Math.round(Nr[2]),Ke+=fr,nt+=Nr[0]*fr,it+=Nr[1]*fr,ht+=Nr[2]*fr,Nr}return[0,0,0,0]}function Ct(Br,fr,Nr,xi){var Qn=Br[Nr.bin0];if(void 0===Qn)return Tt(void 0,1);var kr=Br[Nr.bin1],sr=fr[Nr.bin0],ci=fr[Nr.bin1];return Tt(Qn+Nr.frac*(kr-Qn||0)+xi.frac*((sr-Qn||0)+Nr.frac*(void 0===kr?void 0===ci?0:void 0===sr?2*(ci-Qn):2*(2*ci-sr-Qn)/3:void 0===ci?void 0===sr?0:2*(2*Qn-kr-sr)/3:void 0===sr?2*(2*ci-kr-Qn)/3:ci+Qn-kr-sr)))}if(ne){var Vt,Ft=0;try{Vt=new Uint8Array(Te*Le*4)}catch(Br){Vt=new Array(Te*Le*4)}if("best"===ne){var gt,ft,Bt,rn=Y||G,un=oe||H,pn=new Array(rn.length),dn=new Array(un.length),Mn=new Array(Te),ln=Y?m:g,Ee=oe?m:g;for(j=0;j<rn.length;j++)pn[j]=Math.round(S.c2p(rn[j])-I);for(j=0;j<un.length;j++)dn[j]=Math.round(C.c2p(un[j])-L);for(j=0;j<Te;j++)Mn[j]=ln(j,pn);for(U=0;U<Le;U++)for(ft=se[(gt=Ee(U,dn)).bin0],Bt=se[gt.bin1],j=0;j<Te;j++,Ft+=4)u(Vt,Ft,qe=Ct(ft,Bt,Mn[j],gt))}else for(U=0;U<re;U++)for(Be=se[U],Je=Ve(U),j=0;j<Te;j++)qe=Tt(Be[j],1),u(Vt,Ft=4*(Je*Te+Re(j)),qe);var De=_e.createImageData(Te,Le);try{De.data.set(Vt)}catch(Br){var Ie=De.data,He=Ie.length;for(U=0;U<He;U++)Ie[U]=Vt[U]}_e.putImageData(De,0,0)}else{var Ye=Math.floor(J/2),tt=Math.floor(ee/2);for(U=0;U<re;U++)if(Be=se[U],Je.reverse(),Je[Ge]=Ve(U+1),Je[0]!==Je[1]&&void 0!==Je[0]&&void 0!==Je[1])for(Fe=[Pe=Re(0),Pe],j=0;j<ce;j++)Fe.reverse(),Fe[ut]=Re(j+1),Fe[0]!==Fe[1]&&void 0!==Fe[0]&&void 0!==Fe[1]&&(qe=Tt(Be[j],(Fe[1]-Fe[0])*(Je[1]-Je[0])),_e.fillStyle="rgba("+qe.join(",")+")",_e.fillRect(Fe[0]+Ye,Je[0]+tt,Fe[1]-Fe[0]-J,Je[1]-Je[0]-ee))}nt=Math.round(nt/Ke),it=Math.round(it/Ke),ht=Math.round(ht/Ke);var ot=b("rgb("+nt+","+it+","+ht+")");w._hmpixcount=(w._hmpixcount||0)+Ke,w._hmlumcount=(w._hmlumcount||0)+Ke*ot.getLuminance();var st=X.selectAll("image").data(O);st.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),st.attr({height:Le,width:Te,x:I,y:L,"xlink:href":Oe.toDataURL("image/png")}),f(X);var bt=ae.texttemplate;if(bt){var wt=v(ae),Ut={type:"linear",range:[wt.min,wt.max],_separators:S._separators,_numFormat:S._numFormat},Kt="histogram2dcontour"===ae.type,vt="contour"===ae.type,Et=vt?re-1:re,$t=vt?1:0,Dt=vt?ce-1:ce,Pt=[];for(j=vt?1:0;j<Et;j++){var je;if(vt)je=te.y[j];else if(Kt){if(0===j||j===re-1)continue;je=te.y[j]}else if(te.yCenter)je=te.yCenter[j];else{if(j+1===re&&void 0===te.y[j+1])continue;je=(te.y[j]+te.y[j+1])/2}var rt=Math.round(C.c2p(je));if(!(0>rt||rt>C._length))for(U=$t;U<Dt;U++){var pt;if(vt)pt=te.x[U];else if(Kt){if(0===U||U===ce-1)continue;pt=te.x[U]}else if(te.xCenter)pt=te.xCenter[U];else{if(U+1===ce&&void 0===te.x[U+1])continue;pt=(te.x[U]+te.x[U+1])/2}var It=Math.round(S.c2p(pt));if(!(0>It||It>S._length)){var jt=l({x:pt,y:je},ae,w._fullLayout);jt.x=pt,jt.y=je;var Qt=te.z[j][U];void 0===Qt?(jt.z="",jt.zLabel=""):(jt.z=Qt,jt.zLabel=e.tickText(Ut,Qt,"hover").text);var fn=te.text&&te.text[j]&&te.text[j][U];void 0!==fn&&!1!==fn||(fn=""),jt.text=fn;var an=o.texttemplateString(bt,jt,w._fullLayout._d3locale,jt,ae._meta||{});if(an){var Sn=an.split("<br>"),Yn=Sn.length,kn=0;for($=0;$<Yn;$++)kn=Math.max(kn,Sn[$].length);Pt.push({l:Yn,c:kn,t:an,x:It,y:rt,z:Qt})}}}}var cn=ae.textfont,vn=cn.family,hn=cn.size,Dn=w._fullLayout.font.size;if(!hn||"auto"===hn){var Pn=1/0,$n=1/0,rr=0,er=0;for($=0;$<Pt.length;$++){var or=Pt[$];if(rr=Math.max(rr,or.l),er=Math.max(er,or.c),$<Pt.length-1){var Zr=Pt[$+1],zr=Math.abs(Zr.x-or.x),pr=Math.abs(Zr.y-or.y);zr&&(Pn=Math.min(Pn,zr)),pr&&($n=Math.min($n,pr))}}isFinite(Pn)&&isFinite($n)?(Pn-=J,$n-=ee,Pn/=er,$n/=rr,Pn/=d/2,$n/=d,hn=Math.min(Math.floor(Pn),Math.floor($n),Dn)):hn=Dn}if(hn<=0||!isFinite(hn))return;p(X).data(Pt).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(Br){var xi,fr=y.select(this),Nr=cn.color;Nr&&"auto"!==Nr||(Nr=i.contrast("rgba("+Ae(Br.z).join()+")")),fr.attr("data-notex",1).call(a.positionText,(xi=Br,xi.x),function(xi){return xi.y-hn*(xi.l*d/2-1)}(Br)).call(_.font,vn,hn,Nr).text(Br.t).call(a.convertToTspans,w)})}})}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":936,"@plotly/d3":58,tinycolor2:312}],805:[function(x,ue,le){"use strict";var y=x("@plotly/d3");ue.exports=function(b){y.select(b).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],806:[function(x,ue,le){"use strict";ue.exports=function(y,b,T){!1===T("zsmooth")&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],807:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../../registry");function _(e,o){var a=o(e);return"scaled"===(a?o(e+"type","array"):"scaled")&&(o(e+"0"),o("d"+e)),a}ue.exports=function(e,o,a,l,i,v){var h,s,d=a("z");if(i=i||"x",v=v||"y",void 0===d||!d.length)return 0;if(b.isArray1D(e.z)){h=a(i),s=a(v);var p=b.minRowLength(h),f=b.minRowLength(s);if(0===p||0===f)return 0;o._length=Math.min(p,f,d.length)}else{if(h=_(i,a),s=_(v,a),!function(g){for(var m,u=!0,w=!1,c=!1,E=0;E<g.length;E++){if(!b.isArrayOrTypedArray(m=g[E])){u=!1;break}m.length>0&&(w=!0);for(var M=0;M<m.length;M++)if(y(m[M])){c=!0;break}}return u&&w&&c}(d))return 0;a("transpose"),o._length=null}return"heatmapgl"===e.type||T.getComponentMethod("calendars","handleTraceDefaults")(e,o,[i,v],l),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(x,ue,le){"use strict";for(var y=x("../heatmap/attributes"),b=x("../../components/colorscale/attributes"),T=x("../../lib/extend").extendFlat,_=x("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],o={},a=0;a<e.length;a++){var l=e[a];o[l]=y[l]}o.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},T(o,b("",{cLetter:"z",autoColorDflt:!1})),ue.exports=_(o,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(x,ue,le){"use strict";var y=x("../../../stackgl_modules").gl_heatmap2d,b=x("../../plots/cartesian/axes"),T=x("../../lib/str2rgbarray");function _(o,a){this.scene=o,this.uid=a,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=y(o.glplot,this.options),this.heatmap._trace=this}var e=_.prototype;e.handlePick=function(o){var a=this.options,l=a.shape,i=o.pointId,v=i%l[0],h=Math.floor(i/l[0]);return{trace:this,dataCoord:o.dataCoord,traceCoord:[a.x[v],a.y[h],a.z[i]],textLabel:this.textLabels[i],name:this.name,pointIndex:[h,v],hoverinfo:this.hoverinfo}},e.update=function(o,a){var l=a[0];this.index=o.index,this.name=o.name,this.hoverinfo=o.hoverinfo;var i=l.z;this.options.z=[].concat.apply([],i),this.options.shape=[i[0].length,i.length],this.options.x=l.x,this.options.y=l.y,this.options.zsmooth=o.zsmooth;var s=function(m){for(var u=m.colorscale,w=m.zmin,c=m.zmax,E=u.length,M=new Array(E),S=new Array(4*E),C=0;C<E;C++){var O=u[C],I=T(O[1]);M[C]=w+O[0]*(c-w);for(var N=0;N<4;N++)S[4*C+N]=I[N]}return{colorLevels:M,colorValues:S}}(o);this.options.colorLevels=s.colorLevels,this.options.colorValues=s.colorValues,this.textLabels=[].concat.apply([],o.text),this.heatmap.update(this.options);var d,p,f=this.scene.xaxis,g=this.scene.yaxis;!1===o.zsmooth&&(d={ppad:l.x[1]-l.x[0]},p={ppad:l.y[1]-l.y[0]}),o._extremes[f._id]=b.findExtremes(f,l.x,d),o._extremes[g._id]=b.findExtremes(g,l.y,p)},e.dispose=function(){this.heatmap.dispose()},ue.exports=function(o,a,l){var i=new _(o,a.uid);return i.update(a,l),i}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../heatmap/xyz_defaults"),T=x("../../components/colorscale/defaults"),_=x("./attributes");ue.exports=function(e,o,a,l){function i(v,h){return y.coerce(e,o,_,v,h)}b(e,o,i,l)?(i("text"),i("zsmooth"),T(e,o,l,i,{prefix:"",cLetter:"z"})):o.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(x,ue,le){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),calc:x("../heatmap/calc"),plot:x("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:x("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(x,ue,le){"use strict";var y=x("../bar/attributes"),b=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=x("../../plots/template_attributes").hovertemplateAttrs,_=x("../../plots/template_attributes").texttemplateAttrs,e=x("../../plots/font_attributes"),o=x("./bin_attributes"),a=x("./constants"),l=x("../../lib/extend").extendFlat;ue.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:b("x"),yhoverformat:b("y"),text:l({},y.text,{}),hovertext:l({},y.hovertext,{}),orientation:y.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:T({},{keys:a.eventDataKeys}),texttemplate:_({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:l({},y.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:y.insidetextanchor,textangle:y.textangle,cliponaxis:y.cliponaxis,constraintext:y.constraintext,marker:y.marker,offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup,selected:y.selected,unselected:y.unselected,_deprecated:{bardir:y._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(x,ue,le){"use strict";ue.exports=function(y,b){for(var T=y.length,_=0,e=0;e<T;e++)b[e]?(y[e]/=b[e],_+=y[e]):y[e]=null;return _}},{}],814:[function(x,ue,le){"use strict";ue.exports=function(y,b){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(x,ue,le){"use strict";var y=x("fast-isnumeric");ue.exports={count:function(b,T,_){return _[b]++,1},sum:function(b,T,_,e){var o=e[T];return y(o)?(o=Number(o),_[b]+=o,o):0},avg:function(b,T,_,e,o){var a=e[T];return y(a)&&(a=Number(a),_[b]+=a,o[b]++),0},min:function(b,T,_,e){var o=e[T];if(y(o)){if(o=Number(o),!y(_[b]))return _[b]=o,o;if(_[b]>o){var a=o-_[b];return _[b]=o,a}}return 0},max:function(b,T,_,e){var o=e[T];if(y(o)){if(o=Number(o),!y(_[b]))return _[b]=o,o;if(_[b]<o){var a=o-_[b];return _[b]=o,a}}return 0}}},{"fast-isnumeric":190}],816:[function(x,ue,le){"use strict";var y=x("../../constants/numerical"),b=y.ONEAVGYEAR,T=y.ONEAVGMONTH,_=y.ONEDAY,e=y.ONEHOUR,o=y.ONEMIN,a=y.ONESEC,l=x("../../plots/cartesian/axes").tickIncrement;function i(d,p,f,g){if(d*p<=0)return 1/0;for(var m=Math.abs(p-d),u="date"===f.type,w=v(m,u),c=0;c<10;c++){var E=v(80*w,u);if(w===E||!h(E,d,p,u,f,g))break;w=E}return w}function v(d,p){return p&&d>a?d>_?d>1.1*b?b:d>1.1*T?T:_:d>e?e:d>o?o:a:Math.pow(10,Math.floor(Math.log(d)/Math.LN10))}function h(d,p,f,g,m,u){if(g&&d>_){var w=s(p,m,u),c=s(f,m,u),E=d===b?0:1;return w[E]!==c[E]}return Math.floor(f/d)-Math.floor(p/d)>.1}function s(d,p,f){var g=p.c2d(d,b,f).split("-");return""===g[0]&&(g.unshift(),g[0]="-"+g[0]),g}ue.exports=function(d,p,f,g,m){var u,w,c=-1.1*p,E=-.1*p,M=d-E,S=f[0],C=f[1],O=Math.min(i(S+E,S+M,g,m),i(C+E,C+M,g,m)),I=Math.min(i(S+c,S+E,g,m),i(C+c,C+E,g,m));if(O>I&&I<Math.abs(C-S)/4e3?(u=O,w=!1):(u=Math.min(O,I),w=!0),"date"===g.type&&u>_){var N=u===b?1:6,F=u===b?"M12":"M1";return function(L,P){var j=g.c2d(L,b,m),U=j.indexOf("-",N);U>0&&(j=j.substr(0,U));var $=g.d2c(j,0,m);if($<L){var X=l($,F,!1,m);($+X)/2<L+d&&($=X)}return P&&w?l($,F,!0,m):$}}return function(L,P){var j=u*Math.round(L/u);return j+u/10<L&&j+.9*u<L+d&&(j+=u),P&&w&&(j-=u),j}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../../registry"),_=x("../../plots/cartesian/axes"),e=x("../bar/arrays_to_calcdata"),o=x("./bin_functions"),a=x("./norm_functions"),l=x("./average"),i=x("./bin_label_vals");function v(h,s,d,p,f){var g,m,u,w,c,E,M,S=p+"bins",C=h._fullLayout,I=C._histogramBinOpts[s["_"+p+"bingroup"]],N="overlay"===C.barmode,F=function(ye){return d.r2c(ye,0,w)},L=function(ye){return d.c2r(ye,0,w)},P="date"===d.type?function(ye){return ye||0===ye?b.cleanDate(ye,null,w):null}:function(ye){return y(ye)?Number(ye):null};function j(ye,Te,Le){Te[ye+"Found"]?(Te[ye]=P(Te[ye]),null===Te[ye]&&(Te[ye]=Le[ye])):(E[ye]=Te[ye]=Le[ye],b.nestedProperty(m[0],S+"."+ye).set(Le[ye]))}if(s["_"+p+"autoBinFinished"])delete s["_"+p+"autoBinFinished"];else{m=I.traces;var U=[],$=!0,X=!1,te=!1;for(g=0;g<m.length;g++)if((u=m[g]).visible){var ae=I.dirs[g];c=u["_"+ae+"pos0"]=d.makeCalcdata(u,ae),U=b.concat(U,c),delete u["_"+p+"autoBinFinished"],!0===s.visible&&($?$=!1:(delete u._autoBin,u["_"+p+"autoBinFinished"]=1),T.traceIs(u,"2dMap")&&(X=!0),"histogram2dcontour"===u.type&&(te=!0))}var J=_.autoBin(U,d,I.nbins,X,w=m[0][p+"calendar"],I.sizeFound&&I.size),ee=m[0]._autoBin={};if(E=ee[I.dirs[0]]={},te&&(I.size||(J.start=L(_.tickIncrement(F(J.start),J.size,!0,w))),void 0===I.end&&(J.end=L(_.tickIncrement(F(J.end),J.size,!1,w)))),N&&!T.traceIs(s,"2dMap")&&0===J._dataSpan&&"category"!==d.type&&"multicategory"!==d.type){if(f)return[J,c,!0];J=function(ye,Te,Le,Oe,Re){var Ve,_e,Ae,Fe=ye._fullLayout,Pe=function(Ct,Vt){for(var Ft=Vt.xaxis,gt=Vt.yaxis,ft=Vt.orientation,Bt=[],rn=Ct._fullData,un=0;un<rn.length;un++){var pn=rn[un];"histogram"===pn.type&&!0===pn.visible&&pn.orientation===ft&&pn.xaxis===Ft&&pn.yaxis===gt&&Bt.push(pn)}return Bt}(ye,Te),Be=!1,qe=1/0,We=[Te];for(Ve=0;Ve<Pe.length;Ve++)if((_e=Pe[Ve])===Te)Be=!0;else if(Be){var Je=v(ye,_e,Le,Oe,!0),ut=Je[0],Ge=Je[2];_e["_"+Oe+"autoBinFinished"]=1,_e["_"+Oe+"pos0"]=Je[1],Ge?We.push(_e):qe=Math.min(qe,ut.size)}else Ae=Fe._histogramBinOpts[_e["_"+Oe+"bingroup"]],qe=Math.min(qe,Ae.size||_e[Re].size);var Ke=new Array(We.length);for(Ve=0;Ve<We.length;Ve++)for(var nt=We[Ve]["_"+Oe+"pos0"],it=0;it<nt.length;it++)if(void 0!==nt[it]){Ke[Ve]=nt[it];break}for(isFinite(qe)||(qe=b.distinctVals(Ke).minDiff),Ve=0;Ve<We.length;Ve++){var ht=(_e=We[Ve])[Oe+"calendar"],Tt={start:Le.c2r(Ke[Ve]-qe/2,0,ht),end:Le.c2r(Ke[Ve]+qe/2,0,ht),size:qe};_e._input[Re]=_e[Re]=Tt,(Ae=Fe._histogramBinOpts[_e["_"+Oe+"bingroup"]])&&b.extendFlat(Ae,Tt)}return Te[Re]}(h,s,d,p,S)}(M=u.cumulative||{}).enabled&&"include"!==M.currentbin&&("decreasing"===M.direction?J.start=L(_.tickIncrement(F(J.start),J.size,!0,w)):J.end=L(_.tickIncrement(F(J.end),J.size,!1,w))),I.size=J.size,I.sizeFound||(E.size=J.size,b.nestedProperty(m[0],S+".size").set(J.size)),j("start",I,J),j("end",I,J)}c=s["_"+p+"pos0"],delete s["_"+p+"pos0"];var se=s._input[S]||{},G=b.extendFlat({},I),H=I.start,Y=d.r2l(se.start),oe=void 0!==Y;if((I.startFound||oe)&&Y!==d.r2l(H)){var W=oe?Y:b.aggNums(Math.min,null,c),ne={type:"category"===d.type||"multicategory"===d.type?"linear":d.type,r2l:d.r2l,dtick:I.size,tick0:H,calendar:w,range:[W,_.tickIncrement(W,I.size,!1,w)].map(d.l2r)},re=_.tickFirst(ne);re>d.r2l(W)&&(re=_.tickIncrement(re,I.size,!0,w)),G.start=d.l2r(re),oe||b.nestedProperty(s,S+".start").set(G.start)}var ce=I.end,fe=d.r2l(se.end),me=void 0!==fe;if((I.endFound||me)&&fe!==d.r2l(ce)){var pe=me?fe:b.aggNums(Math.max,null,c);G.end=d.l2r(pe),me||b.nestedProperty(s,S+".start").set(G.end)}var we="autobin"+p;return!1===s._input[we]&&(s._input[S]=b.extendFlat({},s[S]||{}),delete s._input[we],delete s[we]),[G,c]}ue.exports={calc:function(h,s){var d,p,f,g,m=[],u=[],w="h"===s.orientation,c=_.getFromId(h,w?s.yaxis:s.xaxis),E=w?"y":"x",M={x:"y",y:"x"}[E],S=s[E+"calendar"],C=s.cumulative,O=v(h,s,c,E),I=O[0],N=O[1],F="string"==typeof I.size,L=[],P=F?L:I,j=[],U=[],$=[],X=0,te=s.histnorm,ae=s.histfunc,J=-1!==te.indexOf("density");C.enabled&&J&&(te=te.replace(/ ?density$/,""),J=!1);var ee,se="max"===ae||"min"===ae?null:0,G=o.count,H=a[te],Y=!1,oe=function(_e){return c.r2c(_e,0,S)};for(b.isArrayOrTypedArray(s[M])&&"count"!==ae&&(ee=s[M],Y="avg"===ae,G=o[ae]),d=oe(I.start),f=oe(I.end)+(d-_.tickIncrement(d,I.size,!1,S))/1e6;d<f&&m.length<1e6&&(p=_.tickIncrement(d,I.size,!1,S),m.push((d+p)/2),u.push(se),$.push([]),L.push(d),J&&j.push(1/(p-d)),Y&&U.push(0),!(p<=d));)d=p;L.push(d),F||"date"!==c.type||(P={start:oe(P.start),end:oe(P.end),size:P.size}),h._fullLayout._roundFnOpts||(h._fullLayout._roundFnOpts={});var W=s["_"+E+"bingroup"],ne={leftGap:1/0,rightGap:1/0};W&&(h._fullLayout._roundFnOpts[W]||(h._fullLayout._roundFnOpts[W]=ne),ne=h._fullLayout._roundFnOpts[W]);var re,ce=u.length,fe=!0,me=ne.leftGap,pe=ne.rightGap,we={};for(d=0;d<N.length;d++){var ye=N[d];(g=b.findBin(ye,P))>=0&&g<ce&&(X+=G(g,d,u,ee,U),fe&&$[g].length&&ye!==N[$[g][0]]&&(fe=!1),$[g].push(d),we[d]=g,me=Math.min(me,ye-L[g]),pe=Math.min(pe,L[g+1]-ye))}ne.leftGap=me,ne.rightGap=pe,fe||(re=function(_e,Ae){return function(){var Fe=h._fullLayout._roundFnOpts[W];return i(Fe.leftGap,Fe.rightGap,L,c,S)(_e,Ae)}}),Y&&(X=l(u,U)),H&&H(u,X,j),C.enabled&&function(_e,Ae,Fe){var Pe,Be,qe;function We(ut){qe=_e[ut],_e[ut]/=2}function Je(ut){_e[ut]=qe+(Be=_e[ut])/2,qe+=Be}if("half"===Fe)if("increasing"===Ae)for(We(0),Pe=1;Pe<_e.length;Pe++)Je(Pe);else for(We(_e.length-1),Pe=_e.length-2;Pe>=0;Pe--)Je(Pe);else if("increasing"===Ae){for(Pe=1;Pe<_e.length;Pe++)_e[Pe]+=_e[Pe-1];"exclude"===Fe&&(_e.unshift(0),_e.pop())}else{for(Pe=_e.length-2;Pe>=0;Pe--)_e[Pe]+=_e[Pe+1];"exclude"===Fe&&(_e.push(0),_e.shift())}}(u,C.direction,C.currentbin);var Te=Math.min(m.length,u.length),Le=[],Oe=0,Re=Te-1;for(d=0;d<Te;d++)if(u[d]){Oe=d;break}for(d=Te-1;d>=Oe;d--)if(u[d]){Re=d;break}for(d=Oe;d<=Re;d++)if(y(m[d])&&y(u[d])){var Ve={p:m[d],s:u[d],b:0};C.enabled||(Ve.pts=$[d],fe?Ve.ph0=Ve.ph1=$[d].length?N[$[d][0]]:m[d]:(s._computePh=!0,Ve.ph0=re(L[d]),Ve.ph1=re(L[d+1],!0))),Le.push(Ve)}return 1===Le.length&&(Le[0].width1=_.tickIncrement(Le[0].p,I.size,!1,S)-Le[0].p),e(Le,s),b.isArrayOrTypedArray(s.selectedpoints)&&b.tagSelected(Le,s,we),Le},calcAllAutoBins:v}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(x,ue,le){"use strict";ue.exports={eventDataKeys:["binNumber"]}},{}],819:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axis_ids"),T=x("../../registry").traceIs,_=x("../bar/defaults").handleGroupingDefaults,e=y.nestedProperty,o=x("../../plots/cartesian/constraints").getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];ue.exports=function(i,v){var h,s,d,p,f,g,m,u=v._histogramBinOpts={},w=[],c={},E=[];function M(J,ee){return y.coerce(h._input,h,h._module.attributes,J,ee)}function S(J){return"v"===J.orientation?"x":"y"}function C(J,ee,se){var G=J.uid+"__"+se;ee||(ee=G);var H=b.getFromTrace({_fullLayout:v},J,se).type,Y=J[se+"calendar"]||"",oe=u[ee],W=!0;oe&&(H===oe.axType&&Y===oe.calendar?(W=!1,oe.traces.push(J),oe.dirs.push(se)):(ee=G,H!==oe.axType&&y.warn(["Attempted to group the bins of trace",J.index,"set on a","type:"+H,"axis","with bins on","type:"+oe.axType,"axis."].join(" ")),Y!==oe.calendar&&y.warn(["Attempted to group the bins of trace",J.index,"set with a",Y,"calendar","with bins",oe.calendar?"on a "+oe.calendar+" calendar":"w/o a set calendar"].join(" ")))),W&&(u[ee]={traces:[J],dirs:[se],axType:H,calendar:J[se+"calendar"]||""}),J["_"+se+"bingroup"]=ee}for(f=0;f<i.length;f++)T(h=i[f],"histogram")&&(w.push(h),delete h._xautoBinFinished,delete h._yautoBinFinished,T(h,"2dMap")||_(h._input,h,v,M));var O=v._alignmentOpts||{};for(f=0;f<w.length;f++){if(d="",!T(h=w[f],"2dMap")){if(p=S(h),"group"===v.barmode&&h.alignmentgroup){var N=o(v,h[p+"axis"])+h.orientation;(O[N]||{})[h.alignmentgroup]&&(d=N)}d||"overlay"===v.barmode||(d=o(v,h.xaxis)+o(v,h.yaxis)+S(h))}d?(c[d]||(c[d]=[]),c[d].push(h)):E.push(h)}for(d in c)if(1!==(s=c[d]).length){var F=!1;for(s.length&&(h=s[0],F=M("bingroup")),d=F||d,f=0;f<s.length;f++){var L=(h=s[f])._input.bingroup;L&&L!==d&&y.warn(["Trace",h.index,"must match","within bingroup",d+".","Ignoring its bingroup:",L,"setting."].join(" ")),h.bingroup=d,C(h,d,S(h))}}else E.push(s[0]);for(f=0;f<E.length;f++){h=E[f];var P=M("bingroup");if(T(h,"2dMap"))for(m=0;m<2;m++){var j=M((p=l[m])+"bingroup",P?P+"__"+p:null);C(h,j,p)}else C(h,P,S(h))}for(d in u){var U=u[d];for(s=U.traces,g=0;g<a.length;g++){var $,X,te=a[g],ae=te.name;if("nbins"!==ae||!U.sizeFound){for(f=0;f<s.length;f++){if(void 0!==e((h=s[f])._input,$=te.aStr[p=U.dirs[f]]).get()){U[ae]=M($),U[ae+"Found"]=!0;break}(X=(h._autoBin||{})[p]||{})[ae]&&e(h,$).set(X[ae])}if("start"===ae||"end"===ae)for(;f<s.length;f++)(h=s[f])["_"+p+"bingroup"]&&M($,(X=(h._autoBin||{})[p]||{})[ae]);"nbins"!==ae||U.sizeFound||U.nbinsFound||(h=s[0],U[ae]=M($))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("../../components/color"),_=x("../bar/defaults").handleText,e=x("../bar/style_defaults"),o=x("./attributes");ue.exports=function(a,l,i,v){function h(E,M){return b.coerce(a,l,o,E,M)}var s=h("x"),d=h("y");h("cumulative.enabled")&&(h("cumulative.direction"),h("cumulative.currentbin")),h("text");var p=h("textposition");_(a,l,v,h,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat");var f=h("orientation",d&&!s?"h":"v"),g="v"===f?"x":"y",m="v"===f?"y":"x",u=s&&d?Math.min(b.minRowLength(s)&&b.minRowLength(d)):b.minRowLength(l[g]||[]);if(u){l._length=u,y.getComponentMethod("calendars","handleTraceDefaults")(a,l,["x","y"],v),l[m]&&h("histfunc"),h("histnorm"),h("autobin"+g),e(a,l,h,i,v),b.coerceSelectionMarkerOpacity(l,h);var w=(l.marker.line||{}).color,c=y.getComponentMethod("errorbars","supplyDefaults");c(a,l,w||T.defaultLine,{axis:"y"}),c(a,l,w||T.defaultLine,{axis:"x",inherit:"y"})}else l.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_,e){if(y.x="xVal"in b?b.xVal:b.x,y.y="yVal"in b?b.yVal:b.y,"zLabelVal"in b&&(y.z=b.zLabelVal),b.xa&&(y.xaxis=b.xa),b.ya&&(y.yaxis=b.ya),!(T.cumulative||{}).enabled){var o,a=Array.isArray(e)?_[0].pts[e[0]][e[1]]:_[e].pts;if(y.pointNumbers=a,y.binNumber=y.pointNumber,delete y.pointNumber,delete y.pointIndex,T._indexToPoints){o=[];for(var l=0;l<a.length;l++)o=o.concat(T._indexToPoints[a[l]])}else o=a;y.pointIndices=o}return y}},{}],822:[function(x,ue,le){"use strict";var y=x("../bar/hover").hoverPoints,b=x("../../plots/cartesian/axes").hoverLabelText;ue.exports=function(T,_,e,o,a){var l=y(T,_,e,o,a);if(l){var i=(T=l[0]).cd[T.index],v=T.cd[0].trace;if(!v.cumulative.enabled){var h="h"===v.orientation?"y":"x";T[h+"Label"]=b(T[h+"a"],[i.ph0,i.ph1],v[h+"hoverformat"])}return l}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),layoutAttributes:x("../bar/layout_attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("./cross_trace_defaults"),supplyLayoutDefaults:x("../bar/layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("../bar/cross_trace_calc").crossTraceCalc,plot:x("../bar/plot").plot,layerName:"barlayer",style:x("../bar/style").style,styleOnSelect:x("../bar/style").styleOnSelect,colorbar:x("../scatter/marker_colorbar"),hoverPoints:x("./hover"),selectPoints:x("../bar/select"),eventData:x("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(x,ue,le){"use strict";ue.exports={percent:function(y,b){for(var T=y.length,_=100/b,e=0;e<T;e++)y[e]*=_},probability:function(y,b){for(var T=y.length,_=0;_<T;_++)y[_]/=b},density:function(y,b,T,_){var e=y.length;_=_||1;for(var o=0;o<e;o++)y[o]*=T[o]*_},"probability density":function(y,b,T,_){var e=y.length;_&&(b/=_);for(var o=0;o<e;o++)y[o]*=T[o]/b}}},{}],825:[function(x,ue,le){"use strict";var y=x("../histogram/attributes"),b=x("../histogram/bin_attributes"),T=x("../heatmap/attributes"),_=x("../../plots/attributes"),e=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=x("../../plots/template_attributes").hovertemplateAttrs,a=x("../../plots/template_attributes").texttemplateAttrs,l=x("../../components/colorscale/attributes"),i=x("../../lib/extend").extendFlat;ue.exports=i({x:y.x,y:y.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:y.histnorm,histfunc:y.histfunc,nbinsx:y.nbinsx,xbins:b("x"),nbinsy:y.nbinsy,ybins:b("y"),autobinx:y.autobinx,autobiny:y.autobiny,bingroup:i({},y.bingroup,{}),xbingroup:i({},y.bingroup,{}),ybingroup:i({},y.bingroup,{}),xgap:T.xgap,ygap:T.ygap,zsmooth:T.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:o({},{keys:"z"}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:T.textfont,showlegend:i({},_.showlegend,{dflt:!1})},l("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("../histogram/bin_functions"),_=x("../histogram/norm_functions"),e=x("../histogram/average"),o=x("../histogram/bin_label_vals"),a=x("../histogram/calc").calcAllAutoBins;function l(h,s,d,p){var f,g=new Array(h);if(p)for(f=0;f<h;f++)g[f]=1/(s[f+1]-s[f]);else{var m=1/d;for(f=0;f<h;f++)g[f]=m}return g}function i(h,s){return{start:h(s.start),end:h(s.end),size:s.size}}function v(h,s,d,p,f,g){var m,u=h.length-1,w=new Array(u),c=o(d,p,h,f,g);for(m=0;m<u;m++){var E=(s||[])[m];w[m]=void 0===E?[c(h[m]),c(h[m+1],!0)]:[E,E]}return w}ue.exports=function(h,s){var d,p,f,g,m=b.getFromId(h,s.xaxis),u=b.getFromId(h,s.yaxis),w=s.xcalendar,c=s.ycalendar,E=function(gt){return m.r2c(gt,0,w)},M=function(gt){return u.r2c(gt,0,c)},S=a(h,s,m,"x"),C=S[0],O=S[1],I=a(h,s,u,"y"),N=I[0],F=I[1],L=s._length;O.length>L&&O.splice(L,O.length-L),F.length>L&&F.splice(L,F.length-L);var P=[],j=[],U=[],$="string"==typeof C.size,X="string"==typeof N.size,te=[],ae=[],J=$?te:C,ee=X?ae:N,se=0,G=[],H=[],Y=s.histnorm,oe=s.histfunc,W=-1!==Y.indexOf("density"),ne="max"===oe||"min"===oe?null:0,re=T.count,ce=_[Y],fe=!1,me=[],pe=[],we="z"in s?s.z:"marker"in s&&Array.isArray(s.marker.color)?s.marker.color:"";we&&"count"!==oe&&(fe="avg"===oe,re=T[oe]);var ye=C.size,Te=E(C.start),Le=E(C.end)+(Te-b.tickIncrement(Te,ye,!1,w))/1e6;for(d=Te;d<Le;d=b.tickIncrement(d,ye,!1,w))j.push(ne),te.push(d),fe&&U.push(0);te.push(d);var Re=j.length,Ve=(d-Te)/Re,_e=m.c2r(Te+Ve/2,0,w),Ae=N.size,Fe=M(N.start),Pe=M(N.end)+(Fe-b.tickIncrement(Fe,Ae,!1,c))/1e6;for(d=Fe;d<Pe;d=b.tickIncrement(d,Ae,!1,c)){P.push(j.slice()),ae.push(d);var Be=new Array(Re);for(p=0;p<Re;p++)Be[p]=[];H.push(Be),fe&&G.push(U.slice())}ae.push(d);var qe=P.length,We=(d-Fe)/qe,Je=u.c2r(Fe+We/2,0,c);W&&(me=l(j.length,J,Ve,$),pe=l(P.length,ee,We,X)),$||"date"!==m.type||(J=i(E,J)),X||"date"!==u.type||(ee=i(M,ee));var ut=!0,Ge=!0,Ke=new Array(Re),nt=new Array(qe),it=1/0,ht=1/0,Tt=1/0,Ct=1/0;for(d=0;d<L;d++){var Vt=O[d],Ft=F[d];f=y.findBin(Vt,J),g=y.findBin(Ft,ee),f>=0&&f<Re&&g>=0&&g<qe&&(se+=re(f,d,P[g],we,G[g]),H[g][f].push(d),ut&&(void 0===Ke[f]?Ke[f]=Vt:Ke[f]!==Vt&&(ut=!1)),Ge&&(void 0===nt[g]?nt[g]=Ft:nt[g]!==Ft&&(Ge=!1)),it=Math.min(it,Vt-te[f]),ht=Math.min(ht,te[f+1]-Vt),Tt=Math.min(Tt,Ft-ae[g]),Ct=Math.min(Ct,ae[g+1]-Ft))}if(fe)for(g=0;g<qe;g++)se+=e(P[g],G[g]);if(ce)for(g=0;g<qe;g++)ce(P[g],se,me,pe[g]);return{x:O,xRanges:v(te,ut&&Ke,it,ht,m,w),x0:_e,dx:Ve,y:F,yRanges:v(ae,Ge&&nt,Tt,Ct,u,c),y0:Je,dy:We,z:P,pts:H}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./sample_defaults"),T=x("../heatmap/style_defaults"),_=x("../../components/colorscale/defaults"),e=x("../heatmap/label_defaults"),o=x("./attributes");ue.exports=function(a,l,i,v){function h(s,d){return y.coerce(a,l,o,s,d)}b(a,l,h,v),!1!==l.visible&&(T(a,l,h,v),_(a,l,v,h,{prefix:"",cLetter:"z"}),h("hovertemplate"),e(h,v),h("xhoverformat"),h("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(x,ue,le){"use strict";var y=x("../heatmap/hover"),b=x("../../plots/cartesian/axes").hoverLabelText;ue.exports=function(T,_,e,o,a){var l=y(T,_,e,o,a);if(l){var i=(T=l[0]).index,s=T.cd[0],d=s.trace,p=s.xRanges[i[1]],f=s.yRanges[i[0]];return T.xLabel=b(T.xa,[p[0],p[1]],d.xhoverformat),T.yLabel=b(T.ya,[f[0],f[1]],d.yhoverformat),l}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../histogram/cross_trace_defaults"),calc:x("../heatmap/calc"),plot:x("../heatmap/plot"),layerName:"heatmaplayer",colorbar:x("../heatmap/colorbar"),style:x("../heatmap/style"),hoverPoints:x("./hover"),eventData:x("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib");ue.exports=function(T,_,e,o){var a=e("x"),l=e("y"),i=b.minRowLength(a),v=b.minRowLength(l);i&&v?(_._length=Math.min(i,v),y.getComponentMethod("calendars","handleTraceDefaults")(T,_,["x","y"],o),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):_.visible=!1}},{"../../lib":503,"../../registry":638}],831:[function(x,ue,le){"use strict";var y=x("../histogram2d/attributes"),b=x("../contour/attributes"),T=x("../../components/colorscale/attributes"),_=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../lib/extend").extendFlat;ue.exports=e({x:y.x,y:y.y,z:y.z,marker:y.marker,histnorm:y.histnorm,histfunc:y.histfunc,nbinsx:y.nbinsx,xbins:y.xbins,nbinsy:y.nbinsy,ybins:y.ybins,autobinx:y.autobinx,autobiny:y.autobiny,bingroup:y.bingroup,xbingroup:y.xbingroup,ybingroup:y.ybingroup,autocontour:b.autocontour,ncontours:b.ncontours,contours:b.contours,line:{color:b.line.color,width:e({},b.line.width,{dflt:.5}),dash:b.line.dash,smoothing:b.line.smoothing,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:y.hovertemplate,texttemplate:b.texttemplate,textfont:b.textfont},T("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../histogram2d/sample_defaults"),T=x("../contour/contours_defaults"),_=x("../contour/style_defaults"),e=x("../heatmap/label_defaults"),o=x("./attributes");ue.exports=function(a,l,i,v){function h(s,d){return y.coerce(a,l,o,s,d)}b(a,l,h,v),!1!==l.visible&&(T(a,l,h,function(s){return y.coerce2(a,l,o,s)}),_(a,l,h,v),h("xhoverformat"),h("yhoverformat"),h("hovertemplate"),l.contours&&"heatmap"===l.contours.coloring&&e(h,v))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../histogram/cross_trace_defaults"),calc:x("../contour/calc"),plot:x("../contour/plot").plot,layerName:"contourlayer",style:x("../contour/style"),colorbar:x("../contour/colorbar"),hoverPoints:x("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(x,ue,le){"use strict";var y=x("../../plots/template_attributes").hovertemplateAttrs,b=x("../../plots/template_attributes").texttemplateAttrs,T=x("../../components/colorscale/attributes"),_=x("../../plots/domain").attributes,e=x("../pie/attributes"),o=x("../sunburst/attributes"),a=x("../treemap/attributes"),l=x("../treemap/constants"),i=x("../../lib/extend").extendFlat;ue.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:a.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:o.marker.colors,line:o.marker.line,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:o.leaf,pathbar:a.pathbar,text:e.text,textinfo:o.textinfo,texttemplate:b({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:y({},{keys:l.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a.outsidetextfont,textposition:a.textposition,sort:e.sort,root:o.root,domain:_({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"../treemap/attributes":1075,"../treemap/constants":1078}],835:[function(x,ue,le){"use strict";var y=x("../../plots/plots");le.name="icicle",le.plot=function(b,T,_,e){y.plotBasePlot(le.name,b,T,_,e)},le.clean=function(b,T,_,e){y.cleanBasePlot(le.name,b,T,_,e)}},{"../../plots/plots":619}],836:[function(x,ue,le){"use strict";var y=x("../sunburst/calc");le.calc=function(b,T){return y.calc(b,T)},le.crossTraceCalc=function(b){return y._runCrossTraceCalc("icicle",b)}},{"../sunburst/calc":1051}],837:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("../../components/color"),_=x("../../plots/domain").defaults,e=x("../bar/defaults").handleText,o=x("../bar/constants").TEXTPAD,a=x("../../components/colorscale"),l=a.hasColorscale,i=a.handleDefaults;ue.exports=function(v,h,s,d){function p(E,M){return y.coerce(v,h,b,E,M)}var f=p("labels"),g=p("parents");if(f&&f.length&&g&&g.length){var m=p("values");p(m&&m.length?"branchvalues":"count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var u=p("text");p("texttemplate"),h.texttemplate||p("textinfo",Array.isArray(u)?"text+label":"label"),p("hovertext"),p("hovertemplate");var w=p("pathbar.visible");e(v,h,d,p,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition"),p("marker.line.width")&&p("marker.line.color",d.paper_bgcolor),p("marker.colors");var c=h._hasColorscale=l(v,"marker","colors")||(v.marker||{}).coloraxis;c&&i(v,h,d,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",c?1:.7),h._hovered={marker:{line:{width:2,color:T.contrast(d.paper_bgcolor)}}},w&&(p("pathbar.thickness",h.pathbar.textfont.size+2*o),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),_(h,d,p),h._length=null}else h.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../components/drawing"),_=x("../../lib/svg_text_utils"),e=x("./partition"),o=x("./style").styleOne,a=x("../treemap/constants"),l=x("../sunburst/helpers"),i=x("../sunburst/fx"),v=x("../sunburst/plot").formatSliceLabel;ue.exports=function(h,s,d,p,f){var g=f.width,m=f.height,u=f.viewX,w=f.viewY,c=f.pathSlice,E=f.toMoveInsideSlice,M=f.strTransform,S=f.hasTransition,C=f.handleSlicesExit,O=f.makeUpdateSliceInterpolator,I=f.makeUpdateTextInterpolator,N=f.prevEntry,F=h._fullLayout,L=s[0].trace,P=-1!==L.textposition.indexOf("left"),j=-1!==L.textposition.indexOf("right"),U=-1!==L.textposition.indexOf("bottom"),$=e(d,[g,m],{flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1,orientation:L.tiling.orientation,pad:{inner:L.tiling.pad},maxDepth:L._maxDepth}).descendants(),X=1/0,te=-1/0;$.forEach(function(G){var H=G.depth;H>=L._maxDepth?(G.x0=G.x1=(G.x0+G.x1)/2,G.y0=G.y1=(G.y0+G.y1)/2):(X=Math.min(X,H),te=Math.max(te,H))}),p=p.data($,l.getPtId),L._maxVisibleLayers=isFinite(te)?te-X+1:0,p.enter().append("g").classed("slice",!0),C(p,!1,{},[g,m],c),p.order();var ae=null;if(S&&N){var J=l.getPtId(N);p.each(function(G){null===ae&&l.getPtId(G)===J&&(ae={x0:G.x0,x1:G.x1,y0:G.y0,y1:G.y1})})}var ee=function(){return ae||{x0:0,x1:g,y0:0,y1:m}},se=p;return S&&(se=se.transition().each("end",function(){var G=y.select(this);l.setSliceCursor(G,h,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),se.each(function(G){G._x0=u(G.x0),G._x1=u(G.x1),G._y0=w(G.y0),G._y1=w(G.y1),G._hoverX=u(G.x1-L.tiling.pad),G._hoverY=w(U?G.y1-L.tiling.pad/2:G.y0+L.tiling.pad/2);var H=y.select(this),Y=b.ensureSingle(H,"path","surface",function(re){re.style("pointer-events","all")});S?Y.transition().attrTween("d",function(re){var ce=O(re,!1,ee(),[g,m],{orientation:L.tiling.orientation,flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1});return function(fe){return c(ce(fe))}}):Y.attr("d",c),H.call(i,d,h,s,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,h,{isTransitioning:h._transitioning}),Y.call(o,G,L,{hovered:!1}),G._text=G.x0===G.x1||G.y0===G.y1?"":v(G,d,L,s,F)||"";var oe=b.ensureSingle(H,"g","slicetext"),W=b.ensureSingle(oe,"text","",function(re){re.attr("data-notex",1)}),ne=b.ensureUniformFontSize(h,l.determineTextFont(L,G,F.font));W.text(G._text||" ").classed("slicetext",!0).attr("text-anchor",j?"end":P?"start":"middle").call(T.font,ne).call(_.convertToTspans,h),G.textBB=T.bBox(W.node()),G.transform=E(G,{fontSize:ne.size}),G.transform.fontSize=ne.size,S?W.transition().attrTween("transform",function(re){var ce=I(re,!1,ee(),[g,m]);return function(fe){return M(ce(fe))}}):W.attr("transform",M(G))}),ae}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"../treemap/constants":1078,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"icicle",basePlotModule:x("./base_plot"),categories:[],animatable:!0,attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),style:x("./style").style,colorbar:x("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(x,ue,le){"use strict";ue.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_){function e(o,a){return y.coerce(T,_,b,o,a)}e("iciclecolorway",_.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(x,ue,le){"use strict";var y=x("d3-hierarchy"),b=x("../treemap/flip_tree");ue.exports=function(T,_,e){var o=e.flipX,a=e.flipY,l="h"===e.orientation,i=e.maxDepth,v=_[0],h=_[1];i&&(v=(T.height+1)*_[0]/Math.min(T.height+1,i),h=(T.height+1)*_[1]/Math.min(T.height+1,i));var s=y.partition().padding(e.pad.inner).size(l?[_[1],v]:[_[0],h])(T);return(l||o||a)&&b(s,_,{swapXY:l,flipX:o,flipY:a}),s}},{"../treemap/flip_tree":1083,"d3-hierarchy":115}],843:[function(x,ue,le){"use strict";var y=x("../treemap/draw"),b=x("./draw_descendants");ue.exports=function(T,_,e,o){return y(T,_,e,o,{type:"icicle",drawDescendants:b})}},{"../treemap/draw":1080,"./draw_descendants":838}],844:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/color"),T=x("../../lib"),_=x("../bar/uniform_text").resizeText;function e(o,a,l){var i=a.data.data,v=!a.children,h=i.i,s=T.castOption(l,h,"marker.line.color")||b.defaultLine,d=T.castOption(l,h,"marker.line.width")||0;o.style("stroke-width",d).call(b.fill,i.color).call(b.stroke,s).style("opacity",v?l.leaf.opacity:null)}ue.exports={style:function(o){var a=o._fullLayout._iciclelayer.selectAll(".trace");_(o,a,"icicle"),a.each(function(l){var i=y.select(this),v=l[0].trace;i.style("opacity",v.opacity),i.selectAll("path.surface").each(function(h){y.select(this).call(e,h,v)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(x,ue,le){"use strict";for(var y=x("../../plots/attributes"),b=x("../../plots/template_attributes").hovertemplateAttrs,T=x("../../lib/extend").extendFlat,_=x("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],o=[],a=[],l=0;l<e.length;l++){var i=_[e[l]];o.push("For the `"+e[l]+"` colormodel, it is ["+(i.zminDflt||i.min).join(", ")+"]."),a.push("For the `"+e[l]+"` colormodel, it is ["+(i.zmaxDflt||i.max).join(", ")+"].")}ue.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},y.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:b({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./constants"),T=x("fast-isnumeric"),_=x("../../plots/cartesian/axes"),e=x("../../lib").maxRowLength,o=x("./helpers").getImageSize;function a(i,v,h,s){return function(d){return y.constrain((d-i)*v,h,s)}}function l(i,v){return function(h){return y.constrain(h,i,v)}}ue.exports=function(i,v){var h,s;if(v._hasZ)h=v.z.length,s=e(v.z);else if(v._hasSource){var d=o(v.source);h=d.height,s=d.width}var p,f=_.getFromId(i,v.xaxis||"x"),g=_.getFromId(i,v.yaxis||"y"),m=f.d2c(v.x0)-v.dx/2,u=g.d2c(v.y0)-v.dy/2,w=[m,m+s*v.dx],c=[u,u+h*v.dy];if(f&&"log"===f.type)for(p=0;p<s;p++)w.push(m+p*v.dx);if(g&&"log"===g.type)for(p=0;p<h;p++)c.push(u+p*v.dy);return v._extremes[f._id]=_.findExtremes(f,w),v._extremes[g._id]=_.findExtremes(g,c),v._scaler=function(E){var M=b.colormodel[E.colormodel],S=(M.colormodel||E.colormodel).length;E._sArray=[];for(var C=0;C<S;C++)E._sArray.push(M.min[C]!==E.zmin[C]||M.max[C]!==E.zmax[C]?a(E.zmin[C],(M.max[C]-M.min[C])/(E.zmax[C]-E.zmin[C]),M.min[C],M.max[C]):l(M.min[C],M.max[C]));return function(O){for(var I=O.slice(0,S),N=0;N<S;N++){var F=I[N];if(!T(F))return!1;I[N]=E._sArray[N](F)}return I}}(v),[{x0:m,y0:u,z:v.z,w:s,h}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(x,ue,le){"use strict";ue.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(y){return y.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(y){return y.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(y){return y.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(y){var b=y.slice(0,3);return b[1]=b[1]+"%",b[2]=b[2]+"%",b},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(y){var b=y.slice(0,4);return b[1]=b[1]+"%",b[2]=b[2]+"%",b},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("./constants"),_=x("../../snapshot/helpers").IMAGE_URL_PREFIX;ue.exports=function(e,o){function a(v,h){return y.coerce(e,o,b,v,h)}a("source"),o.source&&!o.source.match(_)&&delete o.source,o._hasSource=!!o.source;var l,i=a("z");o._hasZ=!(void 0===i||!i.length||!i[0]||!i[0].length),o._hasZ||o._hasSource?(a("x0"),a("y0"),a("dx"),a("dy"),o._hasZ?(a("colormodel","rgb"),a("zmin",(l=T.colormodel[o.colormodel]).zminDflt||l.min),a("zmax",l.zmaxDflt||l.max)):o._hasSource&&(o.colormodel="rgba256",o.zmin=(l=T.colormodel[o.colormodel]).zminDflt,o.zmax=l.zmaxDflt),a("zsmooth"),a("text"),a("hovertext"),a("hovertemplate"),o._length=null):o.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(x,ue,le){"use strict";ue.exports=function(y,b){return"xVal"in b&&(y.x=b.xVal),"yVal"in b&&(y.y=b.yVal),b.xa&&(y.xaxis=b.xa),b.ya&&(y.yaxis=b.ya),y.color=b.color,y.colormodel=b.trace.colormodel,y.z||(y.z=b.color),y}},{}],850:[function(x,ue,le){"use strict";var y=x("probe-image-size/sync"),b=x("../../snapshot/helpers").IMAGE_URL_PREFIX,T=x("buffer/").Buffer;le.getImageSize=function(_){var e=_.replace(b,""),o=new T(e,"base64");return y(o)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(x,ue,le){"use strict";var y=x("../../components/fx"),b=x("../../lib"),T=x("./constants");ue.exports=function(_,e,o){var a=_.cd[0],l=a.trace,i=_.xa,v=_.ya;if(!(y.inbox(e-a.x0,e-(a.x0+a.w*l.dx),0)>0||y.inbox(o-a.y0,o-(a.y0+a.h*l.dy),0)>0)){var h,s=Math.floor((e-a.x0)/l.dx),d=Math.floor(Math.abs(o-a.y0)/l.dy);if(l._hasZ?h=a.z[d][s]:l._hasSource&&(h=l._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(s,d,1,1).data),h){var p,f=a.hi||l.hoverinfo;if(f){var g=f.split("+");-1!==g.indexOf("all")&&(g=["color"]),-1!==g.indexOf("color")&&(p=!0)}var m,u=T.colormodel[l.colormodel],w=u.colormodel||l.colormodel,c=w.length,E=l._scaler(h),M=u.suffix,S=[];(l.hovertemplate||p)&&(S.push("["+[E[0]+M[0],E[1]+M[1],E[2]+M[2]].join(", ")),4===c&&S.push(", "+E[3]+M[3]),S.push("]"),S=S.join(""),_.extraText=w.toUpperCase()+": "+S),Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[d])?m=l.hovertext[d][s]:Array.isArray(l.text)&&Array.isArray(l.text[d])&&(m=l.text[d][s]);var C=v.c2p(a.y0+(d+.5)*l.dy),O=a.x0+(s+.5)*l.dx,I=a.y0+(d+.5)*l.dy,N="["+h.slice(0,l.colormodel.length).join(", ")+"]";return[b.extendFlat(_,{index:[d,s],x0:i.c2p(a.x0+s*l.dx),x1:i.c2p(a.x0+(s+1)*l.dx),y0:C,y1:C,color:E,xVal:O,xLabelVal:O,yVal:I,yLabelVal:I,zLabelVal:N,text:m,hovertemplateLabels:{zLabel:N,colorLabel:S,"color[0]Label":E[0]+M[0],"color[1]Label":E[1]+M[1],"color[2]Label":E[2]+M[2],"color[3]Label":E[3]+M[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),style:x("./style"),hoverPoints:x("./hover"),eventData:x("./event_data"),moduleType:"trace",name:"image",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=b.strTranslate,_=x("../../constants/xmlns_namespaces"),e=x("./constants"),o=b.isIOS()||b.isSafari()||b.isIE();ue.exports=function(a,l,i,v){var h=l.xaxis,s=l.yaxis,d=!(o||a._context._exportedPlot);b.makeTraceGroups(v,i,"im").each(function(p){var f=y.select(this),g=p[0],m=g.trace,u=("fast"===m.zsmooth||!1===m.zsmooth&&d)&&!m._hasZ&&m._hasSource&&"linear"===h.type&&"linear"===s.type;m._realImage=u;var w,c,E,M,S,C,O=g.z,I=g.x0,N=g.y0,F=g.w,L=g.h,P=m.dx,j=m.dy;for(C=0;void 0===w&&C<F;)w=h.c2p(I+C*P),C++;for(C=F;void 0===c&&C>0;)c=h.c2p(I+C*P),C--;for(C=0;void 0===M&&C<L;)M=s.c2p(N+C*j),C++;for(C=L;void 0===S&&C>0;)S=s.c2p(N+C*j),C--;c<w&&(E=c,c=w,w=E),S<M&&(E=M,M=S,S=E),!u&&(w=Math.max(-.5*h._length,w),c=Math.min(1.5*h._length,c),M=Math.max(-.5*s._length,M),S=Math.min(1.5*s._length,S));var U=Math.round(c-w),$=Math.round(S-M);if(U<=0||$<=0)f.selectAll("image").data([]).exit().remove();else{var X=f.selectAll("image").data([p]);X.enter().append("svg:image").attr({xmlns:_.svg,preserveAspectRatio:"none"}),X.exit().remove();var te=!1===m.zsmooth?e.pixelatedStyle:"";if(u){var ae=b.simpleMap(h.range,h.r2l),J=b.simpleMap(s.range,s.r2l),ee=ae[1]<ae[0],se=J[1]>J[0];if(ee||se){var G=w+U/2,H=M+$/2;te+="transform:"+T(G+"px",H+"px")+"scale("+(ee?-1:1)+","+(se?-1:1)+")"+T(-G+"px",-H+"px")+";"}}X.attr("style",te);var Y=new Promise(function(W){if(m._hasZ)W();else if(m._hasSource)if(m._canvas&&m._canvas.el.width===F&&m._canvas.el.height===L&&m._canvas.source===m.source)W();else{var ne=document.createElement("canvas");ne.width=F,ne.height=L;var re=ne.getContext("2d",{willReadFrequently:!0});m._image=m._image||new Image;var ce=m._image;ce.onload=function(){re.drawImage(ce,0,0),m._canvas={el:ne,source:m.source},W()},ce.setAttribute("src",m.source)}}).then(function(){var W;if(m._hasZ)W=oe(function(re,ce){return O[ce][re]}).toDataURL("image/png");else if(m._hasSource)if(u)W=m.source;else{var ne=m._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,F,L).data;W=oe(function(re,ce){var fe=4*(ce*F+re);return[ne[fe],ne[fe+1],ne[fe+2],ne[fe+3]]}).toDataURL("image/png")}X.attr({"xlink:href":W,height:$,width:U,x:w,y:M})});a._promises.push(Y)}function oe(W){var ne=document.createElement("canvas");ne.width=U,ne.height=$;var re,ce=ne.getContext("2d",{willReadFrequently:!0}),fe=function(_e){return b.constrain(Math.round(h.c2p(I+_e*P)-w),0,U)},me=function(_e){return b.constrain(Math.round(s.c2p(N+_e*j)-M),0,$)},pe=e.colormodel[m.colormodel],we=pe.colormodel||m.colormodel,ye=pe.fmt;for(C=0;C<g.w;C++){var Te=fe(C),Le=fe(C+1);if(Le!==Te&&!isNaN(Le)&&!isNaN(Te))for(var Oe=0;Oe<g.h;Oe++){var Re=me(Oe),Ve=me(Oe+1);Ve===Re||isNaN(Ve)||isNaN(Re)||!W(C,Oe)||(re=m._scaler(W(C,Oe)),ce.fillStyle=re?we+"("+ye(re).join(",")+")":"rgba(0,0,0,0)",ce.fillRect(Te,Re,Le-Te,Ve-Re))}}return ne}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(x,ue,le){"use strict";var y=x("@plotly/d3");ue.exports=function(b){y.select(b).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(x,ue,le){"use strict";var y=x("../../lib/extend").extendFlat,b=x("../../lib/extend").extendDeep,T=x("../../plot_api/edit_types").overrideAll,_=x("../../plots/font_attributes"),e=x("../../components/color/attributes"),o=x("../../plots/domain").attributes,a=x("../../plots/cartesian/layout_attributes"),l=x("../../plot_api/plot_template").templatedArray,i=x("../../constants/delta.js"),v=x("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,h=_({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},d={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},p=l("step",b({},s,{range:d}));ue.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:o({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:y({},h,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:v("value")},font:y({},h,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:v("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:y({},h,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:b({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:T({range:d,visible:y({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:y({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,tickfont:_({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:p,threshold:{line:{color:y({},s.line.color,{}),width:y({},s.line.width,{dflt:1}),editType:"plot"},thickness:y({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(x,ue,le){"use strict";var y=x("../../plots/plots");le.name="indicator",le.plot=function(b,T,_,e){y.plotBasePlot(le.name,b,T,_,e)},le.clean=function(b,T,_,e){y.cleanBasePlot(le.name,b,T,_,e)}},{"../../plots/plots":619}],857:[function(x,ue,le){"use strict";ue.exports={calc:function(y,b){var T=[],_=b.value;"number"!=typeof b._lastValue&&(b._lastValue=b.value);var e=b._lastValue,o=e;return b._hasDelta&&"number"==typeof b.delta.reference&&(o=b.delta.reference),T[0]={y:_,lastY:e,delta:_-o,relativeDelta:(_-o)/o},T}}},{}],858:[function(x,ue,le){"use strict";ue.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("../../plots/domain").defaults,_=x("../../plot_api/plot_template"),e=x("../../plots/array_container_defaults"),o=x("./constants.js"),a=x("../../plots/cartesian/tick_value_defaults"),l=x("../../plots/cartesian/tick_mark_defaults"),i=x("../../plots/cartesian/tick_label_defaults"),v=x("../../plots/cartesian/prefix_suffix_defaults");function h(s,d){function p(f,g){return y.coerce(s,d,b.gauge.steps,f,g)}p("color"),p("line.color"),p("line.width"),p("range"),p("thickness")}ue.exports={supplyDefaults:function(s,d,p,f){function g(F,L){return y.coerce(s,d,b,F,L)}T(d,f,g),g("mode"),d._hasNumber=-1!==d.mode.indexOf("number"),d._hasDelta=-1!==d.mode.indexOf("delta"),d._hasGauge=-1!==d.mode.indexOf("gauge");var m=g("value");d._range=[0,"number"==typeof m?1.5*m:1];var u,w,c,E,M,S,C=new Array(2);function O(F,L){return y.coerce(c,E,b.gauge,F,L)}function I(F,L){return y.coerce(M,S,b.gauge.axis,F,L)}if(d._hasNumber&&(g("number.valueformat"),g("number.font.color",f.font.color),g("number.font.family",f.font.family),g("number.font.size"),void 0===d.number.font.size&&(d.number.font.size=o.defaultNumberFontSize,C[0]=!0),g("number.prefix"),g("number.suffix"),u=d.number.font.size),d._hasDelta&&(g("delta.font.color",f.font.color),g("delta.font.family",f.font.family),g("delta.font.size"),void 0===d.delta.font.size&&(d.delta.font.size=(d._hasNumber?.5:1)*(u||o.defaultNumberFontSize),C[1]=!0),g("delta.reference",d.value),g("delta.relative"),g("delta.valueformat",d.delta.relative?"2%":""),g("delta.increasing.symbol"),g("delta.increasing.color"),g("delta.decreasing.symbol"),g("delta.decreasing.color"),g("delta.position"),w=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||C[0])&&(!d._hasDelta||C[1])||!1,g("title.font.color",f.font.color),g("title.font.family",f.font.family),g("title.font.size",.25*(u||w||o.defaultNumberFontSize)),g("title.text"),d._hasGauge){(c=s.gauge)||(c={}),E=_.newContainer(d,"gauge"),O("shape"),(d._isBullet="bullet"===d.gauge.shape)||g("title.align","center"),(d._isAngular="angular"===d.gauge.shape)||g("align","center"),O("bgcolor",f.paper_bgcolor),O("borderwidth"),O("bordercolor"),O("bar.color"),O("bar.line.color"),O("bar.line.width"),O("bar.thickness",o.valueThickness*("bullet"===d.gauge.shape?.5:1)),e(c,E,{name:"steps",handleItemDefaults:h}),O("threshold.value"),O("threshold.thickness"),O("threshold.line.width"),O("threshold.line.color"),M={},c&&(M=c.axis||{}),S=_.newContainer(E,"axis"),I("visible"),d._range=I("range",d._range);var N={outerTicks:!0};a(M,S,I,"linear"),v(M,S,I,"linear",N),i(M,S,I,"linear",N),l(M,S,I,N)}else g("title.align","center"),g("align","center"),d._isAngular=d._isBullet=!1;d._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"indicator",basePlotModule:x("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,calc:x("./calc").calc,plot:x("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("d3-interpolate").interpolate,T=x("d3-interpolate").interpolateNumber,_=x("../../lib"),e=_.strScale,o=_.strTranslate,a=_.rad2deg,l=x("../../constants/alignment").MID_SHIFT,i=x("../../components/drawing"),v=x("./constants"),h=x("../../lib/svg_text_utils"),s=x("../../plots/cartesian/axes"),d=x("../../plots/cartesian/axis_defaults"),p=x("../../plots/cartesian/position_defaults"),f=x("../../plots/cartesian/layout_attributes"),g=x("../../components/color"),m={left:"start",center:"middle",right:"end"},u={left:0,center:.5,right:1},w=/[yzafpn\xb5mkMGTPEZY]/;function c(I){return I&&I.duration>0}function E(I){I.each(function(N){g.stroke(y.select(this),N.line.color)}).each(function(N){g.fill(y.select(this),N.color)}).style("stroke-width",function(N){return N.line.width})}function M(I,N,F){var L=I._fullLayout,P=_.extendFlat({type:"linear",ticks:"outside",range:F,showline:!0},N),j={type:"linear",_id:"x"+N._id},U={letter:"x",font:L.font,noHover:!0,noTickson:!0};function $(X,te){return _.coerce(P,j,f,X,te)}return d(P,j,$,U,L),p(P,j,$,U),j}function S(I,N,F){return[Math.min(N/I.width,F/I.height),I,N+"x"+F]}function C(I,N,F,L){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),j=y.select(P);return j.text(I).attr("x",0).attr("y",0).attr("text-anchor",F).attr("data-unformatted",I).call(h.convertToTspans,L).call(i.font,N),i.bBox(j.node())}function O(I,N,F,L,P,j){var U="_cache"+N;I[U]&&I[U].key===P||(I[U]={key:P,value:F});var $=_.aggNums(j,null,[I[U].value,L],2);return I[U].value=$,$}ue.exports=function(I,N,F,L){var P,j=I._fullLayout;c(F)&&L&&(P=L()),_.makeTraceGroups(j._indicatorlayer,N,"trace").each(function(U){var $,X,te,ae,J,ee=U[0].trace,se=y.select(this),G=ee._hasGauge,H=ee._isAngular,Y=ee._isBullet,oe=ee.domain,W={w:j._size.w*(oe.x[1]-oe.x[0]),h:j._size.h*(oe.y[1]-oe.y[0]),l:j._size.l+j._size.w*oe.x[0],r:j._size.r+j._size.w*(1-oe.x[1]),t:j._size.t+j._size.h*(1-oe.y[1]),b:j._size.b+j._size.h*oe.y[0]},ne=W.l+W.w/2,re=W.t+W.h/2,ce=Math.min(W.w/2,W.h),fe=v.innerRadius*ce,me=ee.align||"center";if(X=re,G){if(H&&($=ne,X=re+ce/2,te=function(Ve){return _e=Ve,[(Ae=.9*fe)/Math.sqrt(_e.width/2*(_e.width/2)+_e.height*_e.height),_e,Ae];var _e,Ae}),Y){var pe=v.bulletPadding,we=1-v.bulletNumberDomainSize+pe;$=W.l+(we+(1-we)*u[me])*W.w,te=function(Ve){return S(Ve,(v.bulletNumberDomainSize-pe)*W.w,W.h)}}}else $=W.l+u[me]*W.w,te=function(Ve){return S(Ve,W.w,W.h)};(function(Ve,_e,Ae,Fe){var Pe,Be,qe,We=Ae[0].trace,Je=Fe.numbersX,ut=Fe.numbersY,Ge=We.align||"center",Ke=m[Ge],nt=Fe.transitionOpts,it=Fe.onComplete,ht=_.ensureSingle(_e,"g","numbers"),Tt=[];We._hasNumber&&Tt.push("number"),We._hasDelta&&(Tt.push("delta"),"left"===We.delta.position&&Tt.reverse());var Ct=ht.selectAll("text").data(Tt);function Vt(dn,Mn,ln,Ee){if(!dn.match("s")||ln>=0==Ee>=0||Mn(ln).slice(-1).match(w)||Mn(Ee).slice(-1).match(w))return Mn;var De=dn.slice().replace("s","f").replace(/\d+/,function(He){return parseInt(He)-1}),Ie=M(Ve,{tickformat:De});return function(He){return Math.abs(He)<1?s.tickText(Ie,He).text:Mn(He)}}Ct.enter().append("text"),Ct.attr("text-anchor",function(){return Ke}).attr("class",function(dn){return dn}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Ct.exit().remove();var Ft,gt=We.mode+We.align;if(We._hasDelta&&(Ft=function(){var dn=M(Ve,{tickformat:We.delta.valueformat},We._range);dn.setScale(),s.prepTicks(dn);var Mn=function(Ye){return s.tickText(dn,Ye).text},ln=function(Ye){return We.delta.relative?Ye.relativeDelta:Ye.delta},Ee=function(Ye,tt){return 0===Ye||"number"!=typeof Ye||isNaN(Ye)?"-":(Ye>0?We.delta.increasing.symbol:We.delta.decreasing.symbol)+tt(Ye)},De=function(Ye){return Ye.delta>=0?We.delta.increasing.color:We.delta.decreasing.color};void 0===We._deltaLastValue&&(We._deltaLastValue=ln(Ae[0]));var Ie=ht.select("text.delta");function He(){Ie.text(Ee(ln(Ae[0]),Mn)).call(g.fill,De(Ae[0])).call(h.convertToTspans,Ve)}return Ie.call(i.font,We.delta.font).call(g.fill,De({delta:We._deltaLastValue})),c(nt)?Ie.transition().duration(nt.duration).ease(nt.easing).tween("text",function(){var Ye=y.select(this),tt=ln(Ae[0]),ot=We._deltaLastValue,st=Vt(We.delta.valueformat,Mn,ot,tt),bt=T(ot,tt);return We._deltaLastValue=tt,function(wt){Ye.text(Ee(bt(wt),st)),Ye.call(g.fill,De({delta:bt(wt)}))}}).each("end",function(){He(),it&&it()}).each("interrupt",function(){He(),it&&it()}):He(),Be=C(Ee(ln(Ae[0]),Mn),We.delta.font,Ke,Ve),Ie}(),gt+=We.delta.position+We.delta.font.size+We.delta.font.family+We.delta.valueformat,gt+=We.delta.increasing.symbol+We.delta.decreasing.symbol,qe=Be),We._hasNumber&&(function(){var dn=M(Ve,{tickformat:We.number.valueformat},We._range);dn.setScale(),s.prepTicks(dn);var Mn=function(He){return s.tickText(dn,He).text},ln=We.number.suffix,Ee=We.number.prefix,De=ht.select("text.number");function Ie(){var He="number"==typeof Ae[0].y?Ee+Mn(Ae[0].y)+ln:"-";De.text(He).call(i.font,We.number.font).call(h.convertToTspans,Ve)}c(nt)?De.transition().duration(nt.duration).ease(nt.easing).each("end",function(){Ie(),it&&it()}).each("interrupt",function(){Ie(),it&&it()}).attrTween("text",function(){var He=y.select(this),Ye=T(Ae[0].lastY,Ae[0].y);We._lastValue=Ae[0].y;var tt=Vt(We.number.valueformat,Mn,Ae[0].lastY,Ae[0].y);return function(ot){He.text(Ee+tt(Ye(ot))+ln)}}):Ie(),Pe=C(Ee+Mn(Ae[0].y)+ln,We.number.font,Ke,Ve)}(),gt+=We.number.font.size+We.number.font.family+We.number.valueformat+We.number.suffix+We.number.prefix,qe=Pe),We._hasDelta&&We._hasNumber){var ft,Bt,rn=[(Pe.left+Pe.right)/2,(Pe.top+Pe.bottom)/2],un=[(Be.left+Be.right)/2,(Be.top+Be.bottom)/2],pn=.75*We.delta.font.size;"left"===We.delta.position&&(ft=O(We,"deltaPos",0,-1*(Pe.width*u[We.align]+Be.width*(1-u[We.align])+pn),gt,Math.min),Bt=rn[1]-un[1],qe={width:Pe.width+Be.width+pn,height:Math.max(Pe.height,Be.height),left:Be.left+ft,right:Pe.right,top:Math.min(Pe.top,Be.top+Bt),bottom:Math.max(Pe.bottom,Be.bottom+Bt)}),"right"===We.delta.position&&(ft=O(We,"deltaPos",0,Pe.width*(1-u[We.align])+Be.width*u[We.align]+pn,gt,Math.max),Bt=rn[1]-un[1],qe={width:Pe.width+Be.width+pn,height:Math.max(Pe.height,Be.height),left:Pe.left,right:Be.right+ft,top:Math.min(Pe.top,Be.top+Bt),bottom:Math.max(Pe.bottom,Be.bottom+Bt)}),"bottom"===We.delta.position&&(ft=null,Bt=Be.height,qe={width:Math.max(Pe.width,Be.width),height:Pe.height+Be.height,left:Math.min(Pe.left,Be.left),right:Math.max(Pe.right,Be.right),top:Pe.bottom-Pe.height,bottom:Pe.bottom+Be.height}),"top"===We.delta.position&&(ft=null,Bt=Pe.top,qe={width:Math.max(Pe.width,Be.width),height:Pe.height+Be.height,left:Math.min(Pe.left,Be.left),right:Math.max(Pe.right,Be.right),top:Pe.bottom-Pe.height-Be.height,bottom:Pe.bottom}),Ft.attr({dx:ft,dy:Bt})}(We._hasNumber||We._hasDelta)&&ht.attr("transform",function(){var Mn,dn=Fe.numbersScaler(qe),ln=O(We,"numbersScale",1,dn[0],gt+=dn[2],Math.min);We._scaleNumbers||(ln=1),We._numbersTop=ln*qe.top+(Mn=We._isAngular?ut-ln*qe.bottom:ut-ln*(qe.top+qe.bottom)/2);var Ee=qe[Ge];"center"===Ge&&(Ee=(qe.left+qe.right)/2);var De=Je-ln*Ee;return De=O(We,"numbersTranslate",0,De,gt,Math.max),o(De,Mn)+e(ln)})})(I,se,U,{numbersX:$,numbersY:X,numbersScaler:te,transitionOpts:F,onComplete:P}),G&&(ae={range:ee.gauge.axis.range,color:ee.gauge.bgcolor,line:{color:ee.gauge.bordercolor,width:0},thickness:1},J={range:ee.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:ee.gauge.bordercolor,width:ee.gauge.borderwidth},thickness:1});var ye=se.selectAll("g.angular").data(H?U:[]);ye.exit().remove();var Te=se.selectAll("g.angularaxis").data(H?U:[]);Te.exit().remove(),H&&function(Ve,_e,Ae,Fe){var Pe,Be,qe,We,Je=Ae[0].trace,ut=Fe.size,Ge=Fe.radius,Ke=Fe.innerRadius,nt=Fe.gaugeBg,it=Fe.gaugeOutline,ht=[ut.l+ut.w/2,ut.t+ut.h/2+Ge/2],Tt=Fe.gauge,Ct=Fe.layer,Vt=Fe.transitionOpts,Ft=Fe.onComplete,gt=Math.PI/2;function ft(Kt){var vt=Je.gauge.axis.range[0],Et=(Kt-vt)/(Je.gauge.axis.range[1]-vt)*Math.PI-gt;return Et<-gt?-gt:Et>gt?gt:Et}function Bt(Kt){return y.svg.arc().innerRadius((Ke+Ge)/2-Kt/2*(Ge-Ke)).outerRadius((Ke+Ge)/2+Kt/2*(Ge-Ke)).startAngle(-gt)}function rn(Kt){Kt.attr("d",function(vt){return Bt(vt.thickness).startAngle(ft(vt.range[0])).endAngle(ft(vt.range[1]))()})}Tt.enter().append("g").classed("angular",!0),Tt.attr("transform",o(ht[0],ht[1])),Ct.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Ct.selectAll("g.xangularaxistick,path,text").remove(),(Pe=M(Ve,Je.gauge.axis)).type="linear",Pe.range=Je.gauge.axis.range,Pe._id="xangularaxis",Pe.ticklabeloverflow="allow",Pe.setScale();var un=function(Kt){return(Pe.range[0]-Kt.x)/(Pe.range[1]-Pe.range[0])*Math.PI+Math.PI},pn={},dn=s.makeLabelFns(Pe,0).labelStandoff;pn.xFn=function(Kt){var vt=un(Kt);return Math.cos(vt)*dn},pn.yFn=function(Kt){var vt=un(Kt),Et=Math.sin(vt)>0?.2:1;return-Math.sin(vt)*(dn+Kt.fontSize*Et)+Math.abs(Math.cos(vt))*(Kt.fontSize*l)},pn.anchorFn=function(Kt){var vt=un(Kt),Et=Math.cos(vt);return Math.abs(Et)<.1?"middle":Et>0?"start":"end"},pn.heightFn=function(Kt,vt,Et){var $t=un(Kt);return-.5*(1+Math.sin($t))*Et};var Mn=function(Kt){return o(ht[0]+Ge*Math.cos(Kt),ht[1]-Ge*Math.sin(Kt))};qe=function(Kt){return Mn(un(Kt))},Be=s.calcTicks(Pe),We=s.getTickSigns(Pe)[2],Pe.visible&&(s.drawTicks(Ve,Pe,{vals:Be,layer:Ct,path:"M"+(We="inside"===Pe.ticks?-1:1)*((Pe.linewidth||1)/2)+",0h"+We*Pe.ticklen,transFn:function(Kt){var vt=un(Kt);return Mn(vt)+"rotate("+-a(vt)+")"}}),s.drawLabels(Ve,Pe,{vals:Be,layer:Ct,transFn:qe,labelFns:pn}));var Ee=[nt].concat(Je.gauge.steps),De=Tt.selectAll("g.bg-arc").data(Ee);De.enter().append("g").classed("bg-arc",!0).append("path"),De.select("path").call(rn).call(E),De.exit().remove();var Ie=Bt(Je.gauge.bar.thickness),He=Tt.selectAll("g.value-arc").data([Je.gauge.bar]);He.enter().append("g").classed("value-arc",!0).append("path");var tt,ot,st,Ye=He.select("path");c(Vt)?(Ye.transition().duration(Vt.duration).ease(Vt.easing).each("end",function(){Ft&&Ft()}).each("interrupt",function(){Ft&&Ft()}).attrTween("d",(tt=Ie,ot=ft(Ae[0].lastY),st=ft(Ae[0].y),function(){var Kt=b(ot,st);return function(vt){return tt.endAngle(Kt(vt))()}})),Je._lastValue=Ae[0].y):Ye.attr("d","number"==typeof Ae[0].y?Ie.endAngle(ft(Ae[0].y)):"M0,0Z"),Ye.call(E),He.exit().remove(),Ee=[];var bt=Je.gauge.threshold.value;(bt||0===bt)&&Ee.push({range:[bt,bt],color:Je.gauge.threshold.color,line:{color:Je.gauge.threshold.line.color,width:Je.gauge.threshold.line.width},thickness:Je.gauge.threshold.thickness});var wt=Tt.selectAll("g.threshold-arc").data(Ee);wt.enter().append("g").classed("threshold-arc",!0).append("path"),wt.select("path").call(rn).call(E),wt.exit().remove();var Ut=Tt.selectAll("g.gauge-outline").data([it]);Ut.enter().append("g").classed("gauge-outline",!0).append("path"),Ut.select("path").call(rn).call(E),Ut.exit().remove()}(I,0,U,{radius:ce,innerRadius:fe,gauge:ye,layer:Te,size:W,gaugeBg:ae,gaugeOutline:J,transitionOpts:F,onComplete:P});var Le=se.selectAll("g.bullet").data(Y?U:[]);Le.exit().remove();var Oe=se.selectAll("g.bulletaxis").data(Y?U:[]);Oe.exit().remove(),Y&&function(Ve,_e,Ae,Fe){var Pe,Be,qe,We,Je,ut=Ae[0].trace,Ge=Fe.gauge,Ke=Fe.layer,nt=Fe.gaugeBg,it=Fe.gaugeOutline,ht=Fe.size,Tt=ut.domain,Ct=Fe.transitionOpts,Vt=Fe.onComplete;Ge.enter().append("g").classed("bullet",!0),Ge.attr("transform",o(ht.l,ht.t)),Ke.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ke.selectAll("g.xbulletaxistick,path,text").remove();var Ft=ht.h,gt=ut.gauge.bar.thickness*Ft,ft=Tt.x[0],Bt=Tt.x[0]+(Tt.x[1]-Tt.x[0])*(ut._hasNumber||ut._hasDelta?1-v.bulletNumberDomainSize:1);function rn(De){De.attr("width",function(Ie){return Math.max(0,Pe.c2p(Ie.range[1])-Pe.c2p(Ie.range[0]))}).attr("x",function(Ie){return Pe.c2p(Ie.range[0])}).attr("y",function(Ie){return.5*(1-Ie.thickness)*Ft}).attr("height",function(Ie){return Ie.thickness*Ft})}(Pe=M(Ve,ut.gauge.axis))._id="xbulletaxis",Pe.domain=[ft,Bt],Pe.setScale(),Be=s.calcTicks(Pe),qe=s.makeTransTickFn(Pe),We=s.getTickSigns(Pe)[2],Je=ht.t+ht.h,Pe.visible&&(s.drawTicks(Ve,Pe,{vals:"inside"===Pe.ticks?s.clipEnds(Pe,Be):Be,layer:Ke,path:s.makeTickPath(Pe,Je,We),transFn:qe}),s.drawLabels(Ve,Pe,{vals:Be,layer:Ke,transFn:qe,labelFns:s.makeLabelFns(Pe,Je)}));var un=[nt].concat(ut.gauge.steps),pn=Ge.selectAll("g.bg-bullet").data(un);pn.enter().append("g").classed("bg-bullet",!0).append("rect"),pn.select("rect").call(rn).call(E),pn.exit().remove();var dn=Ge.selectAll("g.value-bullet").data([ut.gauge.bar]);dn.enter().append("g").classed("value-bullet",!0).append("rect"),dn.select("rect").attr("height",gt).attr("y",(Ft-gt)/2).call(E),c(Ct)?dn.select("rect").transition().duration(Ct.duration).ease(Ct.easing).each("end",function(){Vt&&Vt()}).each("interrupt",function(){Vt&&Vt()}).attr("width",Math.max(0,Pe.c2p(Math.min(ut.gauge.axis.range[1],Ae[0].y)))):dn.select("rect").attr("width","number"==typeof Ae[0].y?Math.max(0,Pe.c2p(Math.min(ut.gauge.axis.range[1],Ae[0].y))):0),dn.exit().remove();var Mn=Ae.filter(function(){return ut.gauge.threshold.value||0===ut.gauge.threshold.value}),ln=Ge.selectAll("g.threshold-bullet").data(Mn);ln.enter().append("g").classed("threshold-bullet",!0).append("line"),ln.select("line").attr("x1",Pe.c2p(ut.gauge.threshold.value)).attr("x2",Pe.c2p(ut.gauge.threshold.value)).attr("y1",(1-ut.gauge.threshold.thickness)/2*Ft).attr("y2",(1-(1-ut.gauge.threshold.thickness)/2)*Ft).call(g.stroke,ut.gauge.threshold.line.color).style("stroke-width",ut.gauge.threshold.line.width),ln.exit().remove();var Ee=Ge.selectAll("g.gauge-outline").data([it]);Ee.enter().append("g").classed("gauge-outline",!0).append("rect"),Ee.select("rect").call(rn).call(E),Ee.exit().remove()}(I,0,U,{gauge:Le,layer:Oe,size:W,gaugeBg:ae,gaugeOutline:J,transitionOpts:F,onComplete:P});var Re=se.selectAll("text.title").data(U);Re.exit().remove(),Re.enter().append("text").classed("title",!0),Re.attr("text-anchor",function(){return Y?m.right:m[ee.title.align]}).text(ee.title.text).call(i.font,ee.title.font).call(h.convertToTspans,I),Re.attr("transform",function(){var Ve,_e=W.l+W.w*u[ee.title.align],Ae=v.titlePadding,Fe=i.bBox(Re.node());return G?(H&&(Ve=ee.gauge.axis.visible?i.bBox(Te.node()).top-Ae-Fe.bottom:W.t+W.h/2-ce/2-Fe.bottom-Ae),Y&&(Ve=X-(Fe.top+Fe.bottom)/2,_e=W.l-v.bulletPadding*W.w)):Ve=ee._numbersTop-Ae-Fe.bottom,o(_e,Ve)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/attributes"),b=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=x("../../plots/template_attributes").hovertemplateAttrs,_=x("../mesh3d/attributes"),e=x("../../plots/attributes"),o=x("../../lib/extend").extendFlat,a=x("../../plot_api/edit_types").overrideAll,l=ue.exports=a(o({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),valuehoverformat:b("value",1),showlegend:o({},e.showlegend,{dflt:!1})},y("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,lightposition:_.lightposition,lighting:_.lighting,flatshading:_.flatshading,contour:_.contour,hoverinfo:o({},e.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/calc"),b=x("../streamtube/calc").processGrid,T=x("../streamtube/calc").filter;ue.exports=function(_,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=T(e.x,e._len),e._y=T(e.y,e._len),e._z=T(e.z,e._len),e._value=T(e.value,e._len);var o=b(e);e._gridFill=o.fill,e._Xs=o.Xs,e._Ys=o.Ys,e._Zs=o.Zs,e._len=o.len;for(var a=1/0,l=-1/0,i=0;i<e._len;i++){var v=e._value[i];a=Math.min(a,v),l=Math.max(l,v)}e._minValues=a,e._maxValues=l,e._vMin=null==e.isomin?a:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?l:e.isomax,y(_,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1045}],864:[function(x,ue,le){"use strict";var y=x("../../../stackgl_modules").gl_mesh3d,b=x("../../lib/gl_format_color").parseColorScale,T=x("../../lib/str2rgbarray"),_=x("../../components/colorscale").extractOpts,e=x("../../plots/gl3d/zip3"),o=function(h,s){for(var d=s.length-1;d>0;d--){var p=Math.min(s[d],s[d-1]),f=Math.max(s[d],s[d-1]);if(f>p&&p<h&&h<=f)return{id:d,distRatio:(f-h)/(f-p)}}return{id:0,distRatio:0}};function a(h,s,d){this.scene=h,this.uid=d,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var l=a.prototype;l.handlePick=function(h){if(h.object===this.mesh){var s=h.data.index,p=this.data._meshY[s],f=this.data._meshZ[s],g=this.data._Ys.length,m=this.data._Zs.length,u=o(this.data._meshX[s],this.data._Xs).id,w=o(p,this.data._Ys).id,c=o(f,this.data._Zs).id,E=h.index=c+m*w+m*g*u;h.traceCoordinate=[this.data._meshX[E],this.data._meshY[E],this.data._meshZ[E],this.data._value[E]];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&void 0!==M[E]?h.textLabel=M[E]:M&&(h.textLabel=M),!0}},l.update=function(h){var s=this.scene,d=s.fullSceneLayout;function p(m,u,w,c){return u.map(function(E){return m.d2l(E,0,c)*w})}this.data=v(h);var f={positions:e(p(d.xaxis,h._meshX,s.dataScale[0],h.xcalendar),p(d.yaxis,h._meshY,s.dataScale[1],h.ycalendar),p(d.zaxis,h._meshZ,s.dataScale[2],h.zcalendar)),cells:e(h._meshI,h._meshJ,h._meshK),lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:T(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading},g=_(h);f.vertexIntensity=h._meshIntensity,f.vertexIntensityBounds=[g.min,g.max],f.colormap=b(h),this.mesh.update(f)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var i=["xyz","xzy","yxz","yzx","zxy","zyx"];function v(h){h._meshI=[],h._meshJ=[],h._meshK=[];var s,d,p,f,g,m,u,w=h.surface.show,c=h.spaceframe.show,E=h.surface.fill,M=h.spaceframe.fill,S=!1,C=!1,O=0,I=h._Xs,N=h._Ys,F=h._Zs,L=I.length,P=N.length,j=F.length,U=i.indexOf(h._gridFill.replace(/-/g,"").replace(/\+/g,"")),$=function(Ge,Ke,nt){switch(U){case 5:return nt+j*Ke+j*P*Ge;case 4:return nt+j*Ge+j*L*Ke;case 3:return Ke+P*nt+P*j*Ge;case 2:return Ke+P*Ge+P*L*nt;case 1:return Ge+L*nt+L*j*Ke;default:return Ge+L*Ke+L*P*nt}},X=h._minValues,te=h._maxValues,ae=h._vMin,J=h._vMax;function ee(Ge,Ke,nt){for(var it=m.length,ht=d;ht<it;ht++)if(Ge===p[ht]&&Ke===f[ht]&&nt===g[ht])return ht;return-1}function se(){d=s}function G(){p=[],f=[],g=[],m=[],s=0,se()}function H(Ge,Ke,nt,it){return p.push(Ge),f.push(Ke),g.push(nt),m.push(it),++s-1}function Y(Ge,Ke,nt){for(var it=[],ht=0;ht<Ge.length;ht++)it[ht]=Ge[ht]*(1-nt)+nt*Ke[ht];return it}function oe(Ge){u=Ge}function W(Ge,Ke){return"all"===Ge||null===Ge||Ge.indexOf(Ke)>-1}function ne(Ge,Ke){return null===Ge?Ke:Ge}function re(Ge,Ke,nt){se();var ht,Tt,ln,Ee,De,Ie,He,Ye,tt,ot,st,bt,wt,Ut,Kt,Ct=[Ke],Vt=[nt];if(u>=1)Ct=[Ke],Vt=[nt];else if(u>0){var Ft=(Ee=nt,ot=Y(Ye=function(vt,Et,$t){for(var Dt=[],Pt=0;Pt<vt.length;Pt++)Dt[Pt]=(vt[Pt]+Et[Pt]+$t[Pt])/3;return Dt}(De=(ln=Ke)[0],Ie=ln[1],He=ln[2]),De,tt=Math.sqrt(1-u)),{xyzv:[[De,Ie,st=Y(Ye,Ie,tt)],[st,ot,De],[Ie,He,bt=Y(Ye,He,tt)],[bt,st,Ie],[He,De,ot],[ot,bt,He]],abc:[[wt=Ee[0],Ut=Ee[1],-1],[-1,-1,wt],[Ut,Kt=Ee[2],-1],[-1,-1,Ut],[Kt,wt,-1],[-1,-1,Kt]]});Ct=Ft.xyzv,Vt=Ft.abc}for(var gt=0;gt<Ct.length;gt++){Ke=Ct[gt],nt=Vt[gt];for(var ft=[],Bt=0;Bt<3;Bt++){var rn=Ke[Bt][0],un=Ke[Bt][1],pn=Ke[Bt][2],dn=Ke[Bt][3],Mn=nt[Bt]>-1?nt[Bt]:ee(rn,un,pn);ft[Bt]=Mn>-1?Mn:H(rn,un,pn,ne(Ge,dn))}ht=ft[1],Tt=ft[2],h._meshI.push(ft[0]),h._meshJ.push(ht),h._meshK.push(Tt),++O}}function ce(Ge,Ke,nt,it){var ht=Ge[3];ht<nt&&(ht=nt),ht>it&&(ht=it);for(var Tt=(Ge[3]-ht)/(Ge[3]-Ke[3]+1e-9),Ct=[],Vt=0;Vt<4;Vt++)Ct[Vt]=(1-Tt)*Ge[Vt]+Tt*Ke[Vt];return Ct}function fe(Ge,Ke,nt){return Ge>=Ke&&Ge<=nt}function me(Ge){var Ke=.001*(J-ae);return Ge>=ae-Ke&&Ge<=J+Ke}function pe(Ge){for(var Ke=[],nt=0;nt<4;nt++){var it=Ge[nt];Ke.push([h._x[it],h._y[it],h._z[it],h._value[it]])}return Ke}function we(Ge,Ke,nt,it,ht,Tt){Tt||(Tt=1),nt=[-1,-1,-1];var Ct=!1,Vt=[fe(Ke[0][3],it,ht),fe(Ke[1][3],it,ht),fe(Ke[2][3],it,ht)];if(!Vt[0]&&!Vt[1]&&!Vt[2])return!1;var Ft=function(ft,Bt,rn){return me(Bt[0][3])&&me(Bt[1][3])&&me(Bt[2][3])?(re(ft,Bt,rn),!0):Tt<3&&we(ft,Bt,rn,ae,J,++Tt)};if(Vt[0]&&Vt[1]&&Vt[2])return Ft(Ge,Ke,nt)||Ct;var gt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(ft){if(Vt[ft[0]]&&Vt[ft[1]]&&!Vt[ft[2]]){var Bt=Ke[ft[0]],rn=Ke[ft[1]],un=Ke[ft[2]],pn=ce(un,Bt,it,ht),dn=ce(un,rn,it,ht);Ct=Ft(Ge,[dn,pn,Bt],[-1,-1,nt[ft[0]]])||Ct,Ct=Ft(Ge,[Bt,rn,dn],[nt[ft[0]],nt[ft[1]],-1])||Ct,gt=!0}}),gt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(ft){if(Vt[ft[0]]&&!Vt[ft[1]]&&!Vt[ft[2]]){var Bt=Ke[ft[0]],un=Ke[ft[2]],pn=ce(Ke[ft[1]],Bt,it,ht),dn=ce(un,Bt,it,ht);Ct=Ft(Ge,[dn,pn,Bt],[-1,-1,nt[ft[0]]])||Ct,gt=!0}}),Ct}function ye(Ge,Ke,nt,it){var Ft,gt,ft,Bt,ht=!1,Tt=pe(Ke),Ct=[fe(Tt[0][3],nt,it),fe(Tt[1][3],nt,it),fe(Tt[2][3],nt,it),fe(Tt[3][3],nt,it)];if(!(Ct[0]||Ct[1]||Ct[2]||Ct[3]))return ht;if(Ct[0]&&Ct[1]&&Ct[2]&&Ct[3])return C&&(Ft=Ge,gt=Tt,ft=Ke,(Bt=function(rn,un,pn){re(Ft,[gt[rn],gt[un],gt[pn]],[ft[rn],ft[un],ft[pn]])})(0,1,2),Bt(3,0,1),Bt(2,3,0),ht=void Bt(1,2,3)||ht),ht;var Vt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ft){if(Ct[Ft[0]]&&Ct[Ft[1]]&&Ct[Ft[2]]&&!Ct[Ft[3]]){var gt=Tt[Ft[0]],ft=Tt[Ft[1]],Bt=Tt[Ft[2]],rn=Tt[Ft[3]];if(C)ht=re(Ge,[gt,ft,Bt],[Ke[Ft[0]],Ke[Ft[1]],Ke[Ft[2]]])||ht;else{var un=ce(rn,gt,nt,it),pn=ce(rn,ft,nt,it),dn=ce(rn,Bt,nt,it);ht=re(null,[un,pn,dn],[-1,-1,-1])||ht}Vt=!0}}),Vt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ft){if(Ct[Ft[0]]&&Ct[Ft[1]]&&!Ct[Ft[2]]&&!Ct[Ft[3]]){var gt=Tt[Ft[0]],ft=Tt[Ft[1]],Bt=Tt[Ft[2]],rn=Tt[Ft[3]],un=ce(Bt,gt,nt,it),pn=ce(Bt,ft,nt,it),dn=ce(rn,ft,nt,it),Mn=ce(rn,gt,nt,it);C?(ht=re(Ge,[gt,Mn,un],[Ke[Ft[0]],-1,-1])||ht,ht=re(Ge,[ft,pn,dn],[Ke[Ft[1]],-1,-1])||ht):(null,Ee=[un,pn,dn,Mn],De=[-1,-1,-1,-1],(Ie=function(He,Ye,tt){re(null,[Ee[He],Ee[Ye],Ee[tt]],[De[He],De[Ye],De[tt]])})(0,1,2),ht=void Ie(2,3,0)||ht),Vt=!0}var Ee,De,Ie}),Vt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ft){if(Ct[Ft[0]]&&!Ct[Ft[1]]&&!Ct[Ft[2]]&&!Ct[Ft[3]]){var gt=Tt[Ft[0]],Bt=Tt[Ft[2]],rn=Tt[Ft[3]],un=ce(Tt[Ft[1]],gt,nt,it),pn=ce(Bt,gt,nt,it),dn=ce(rn,gt,nt,it);C?(ht=re(Ge,[gt,un,pn],[Ke[Ft[0]],-1,-1])||ht,ht=re(Ge,[gt,pn,dn],[Ke[Ft[0]],-1,-1])||ht,ht=re(Ge,[gt,dn,un],[Ke[Ft[0]],-1,-1])||ht):ht=re(null,[un,pn,dn],[-1,-1,-1])||ht,Vt=!0}})),ht}function Te(Ge,Ke,nt,it,ht,Tt,Ct,Vt,Ft,gt,ft){var Bt=!1;return S&&(W(Ge,"A")&&(Bt=ye(null,[Ke,nt,it,Tt],gt,ft)||Bt),W(Ge,"B")&&(Bt=ye(null,[nt,it,ht,Ft],gt,ft)||Bt),W(Ge,"C")&&(Bt=ye(null,[nt,Tt,Ct,Ft],gt,ft)||Bt),W(Ge,"D")&&(Bt=ye(null,[it,Tt,Vt,Ft],gt,ft)||Bt),W(Ge,"E")&&(Bt=ye(null,[nt,it,Tt,Ft],gt,ft)||Bt)),C&&(Bt=ye(Ge,[nt,it,Tt,Ft],gt,ft)||Bt),Bt}function Le(Ge,Ke,nt,it,ht,Tt,Ct,Vt){return[!0===Vt[0]||we(Ge,pe([Ke,nt,it]),[Ke,nt,it],Tt,Ct),!0===Vt[1]||we(Ge,pe([it,ht,Ke]),[it,ht,Ke],Tt,Ct)]}function Oe(Ge,Ke,nt,it,ht,Tt,Ct,Vt,Ft){return Vt?Le(Ge,Ke,nt,ht,it,Tt,Ct,Ft):Le(Ge,nt,ht,it,Ke,Tt,Ct,Ft)}function Re(Ge,Ke,nt,it,ht,Tt,Ct){var Vt,Ft,gt,ft,Bt=!1,rn=function(){Bt=we(Ge,[Vt,Ft,gt],[-1,-1,-1],ht,Tt)||Bt,Bt=we(Ge,[gt,ft,Vt],[-1,-1,-1],ht,Tt)||Bt},un=Ct[0],pn=Ct[1],dn=Ct[2];return un&&(Vt=Y(pe([$(Ke,nt-0,it-0)])[0],pe([$(Ke-1,nt-0,it-0)])[0],un),Ft=Y(pe([$(Ke,nt-0,it-1)])[0],pe([$(Ke-1,nt-0,it-1)])[0],un),gt=Y(pe([$(Ke,nt-1,it-1)])[0],pe([$(Ke-1,nt-1,it-1)])[0],un),ft=Y(pe([$(Ke,nt-1,it-0)])[0],pe([$(Ke-1,nt-1,it-0)])[0],un),rn()),pn&&(Vt=Y(pe([$(Ke-0,nt,it-0)])[0],pe([$(Ke-0,nt-1,it-0)])[0],pn),Ft=Y(pe([$(Ke-0,nt,it-1)])[0],pe([$(Ke-0,nt-1,it-1)])[0],pn),gt=Y(pe([$(Ke-1,nt,it-1)])[0],pe([$(Ke-1,nt-1,it-1)])[0],pn),ft=Y(pe([$(Ke-1,nt,it-0)])[0],pe([$(Ke-1,nt-1,it-0)])[0],pn),rn()),dn&&(Vt=Y(pe([$(Ke-0,nt-0,it)])[0],pe([$(Ke-0,nt-0,it-1)])[0],dn),Ft=Y(pe([$(Ke-0,nt-1,it)])[0],pe([$(Ke-0,nt-1,it-1)])[0],dn),gt=Y(pe([$(Ke-1,nt-1,it)])[0],pe([$(Ke-1,nt-1,it-1)])[0],dn),ft=Y(pe([$(Ke-1,nt-0,it)])[0],pe([$(Ke-1,nt-0,it-1)])[0],dn),rn()),Bt}function Ve(Ge,Ke,nt,it,ht,Tt,Ct,Vt,Ft,gt,ft,Bt){var rn=Ge;return Bt?(S&&"even"===Ge&&(rn=null),Te(rn,Ke,nt,it,ht,Tt,Ct,Vt,Ft,gt,ft)):(S&&"odd"===Ge&&(rn=null),Te(rn,Ft,Vt,Ct,Tt,ht,it,nt,Ke,gt,ft))}function _e(Ge,Ke,nt,it,ht){for(var Tt=[],Ct=0,Vt=0;Vt<Ke.length;Vt++)for(var Ft=Ke[Vt],gt=1;gt<j;gt++)for(var ft=1;ft<P;ft++)Tt.push(Oe(Ge,$(Ft,ft-1,gt-1),$(Ft,ft-1,gt),$(Ft,ft,gt-1),$(Ft,ft,gt),nt,it,(Ft+ft+gt)%2,ht&&ht[Ct]?ht[Ct]:[])),Ct++;return Tt}function Ae(Ge,Ke,nt,it,ht){for(var Tt=[],Ct=0,Vt=0;Vt<Ke.length;Vt++)for(var Ft=Ke[Vt],gt=1;gt<L;gt++)for(var ft=1;ft<j;ft++)Tt.push(Oe(Ge,$(gt-1,Ft,ft-1),$(gt,Ft,ft-1),$(gt-1,Ft,ft),$(gt,Ft,ft),nt,it,(gt+Ft+ft)%2,ht&&ht[Ct]?ht[Ct]:[])),Ct++;return Tt}function Fe(Ge,Ke,nt,it,ht){for(var Tt=[],Ct=0,Vt=0;Vt<Ke.length;Vt++)for(var Ft=Ke[Vt],gt=1;gt<P;gt++)for(var ft=1;ft<L;ft++)Tt.push(Oe(Ge,$(ft-1,gt-1,Ft),$(ft-1,gt,Ft),$(ft,gt-1,Ft),$(ft,gt,Ft),nt,it,(ft+gt+Ft)%2,ht&&ht[Ct]?ht[Ct]:[])),Ct++;return Tt}function Pe(Ge,Ke,nt){for(var it=1;it<j;it++)for(var ht=1;ht<P;ht++)for(var Tt=1;Tt<L;Tt++)Ve(Ge,$(Tt-1,ht-1,it-1),$(Tt-1,ht-1,it),$(Tt-1,ht,it-1),$(Tt-1,ht,it),$(Tt,ht-1,it-1),$(Tt,ht-1,it),$(Tt,ht,it-1),$(Tt,ht,it),Ke,nt,(Tt+ht+it)%2)}function Be(Ge,Ke,nt){S=!0,Pe(Ge,Ke,nt),S=!1}function qe(Ge,Ke,nt,it,ht,Tt){for(var Ct=[],Ft=0;Ft<Ke.length;Ft++)for(var gt=Ke[Ft],ft=1;ft<j;ft++)for(var Bt=1;Bt<P;Bt++)Ct.push(Re(Ge,gt,Bt,ft,nt,it,ht[Ft]));return Ct}function We(Ge,Ke,nt,it,ht,Tt){for(var Ct=[],Ft=0;Ft<Ke.length;Ft++)for(var gt=Ke[Ft],ft=1;ft<L;ft++)for(var Bt=1;Bt<j;Bt++)Ct.push(Re(Ge,ft,gt,Bt,nt,it,ht[Ft]));return Ct}function Je(Ge,Ke,nt,it,ht,Tt){for(var Ct=[],Ft=0;Ft<Ke.length;Ft++)for(var gt=Ke[Ft],ft=1;ft<P;ft++)for(var Bt=1;Bt<L;Bt++)Ct.push(Re(Ge,Bt,ft,gt,nt,it,ht[Ft]));return Ct}function ut(Ge,Ke){for(var nt=[],it=Ge;it<Ke;it++)nt.push(it);return nt}return function(){if(G(),function(){for(var Vt=0;Vt<L;Vt++)for(var Ft=0;Ft<P;Ft++)for(var gt=0;gt<j;gt++){var ft=$(Vt,Ft,gt);H(h._x[ft],h._y[ft],h._z[ft],h._value[ft])}}(),c&&M&&(oe(M),C=!0,Pe(null,ae,J),C=!1),w&&E){oe(E);for(var Ge=h.surface.pattern,Ke=h.surface.count,nt=0;nt<Ke;nt++){var it=1===Ke?.5:nt/(Ke-1),ht=(1-it)*ae+it*J,Tt=Math.abs(ht-X)>Math.abs(ht-te)?[X,ht]:[ht,te];Be(Ge,Tt[0],Tt[1])}}var Ct=[[Math.min(ae,te),Math.max(ae,te)],[Math.min(X,J),Math.max(X,J)]];["x","y","z"].forEach(function(Vt){for(var Ft=[],gt=0;gt<Ct.length;gt++){var ft=0,Bt=Ct[gt][0],rn=Ct[gt][1],un=h.slices[Vt];if(un.show&&un.fill){oe(un.fill);var pn=[],dn=[],Mn=[];if(un.locations.length)for(var ln=0;ln<un.locations.length;ln++){var Ee=o(un.locations[ln],"x"===Vt?I:"y"===Vt?N:F);0===Ee.distRatio?pn.push(Ee.id):Ee.id>0&&(dn.push(Ee.id),Mn.push("x"===Vt?[Ee.distRatio,0,0]:"y"===Vt?[0,Ee.distRatio,0]:[0,0,Ee.distRatio]))}else pn=ut(1,"x"===Vt?L-1:"y"===Vt?P-1:j-1);dn.length>0&&(Ft[ft]="x"===Vt?qe(null,dn,Bt,rn,Mn):"y"===Vt?We(null,dn,Bt,rn,Mn):Je(null,dn,Bt,rn,Mn),ft++),pn.length>0&&(Ft[ft]="x"===Vt?_e(null,pn,Bt,rn,Ft[ft]):"y"===Vt?Ae(null,pn,Bt,rn,Ft[ft]):Fe(null,pn,Bt,rn,Ft[ft]),ft++)}var De=h.caps[Vt];De.show&&De.fill&&(oe(De.fill),Ft[ft]="x"===Vt?_e(null,[0,L-1],Bt,rn,Ft[ft]):"y"===Vt?Ae(null,[0,P-1],Bt,rn,Ft[ft]):Fe(null,[0,j-1],Bt,rn,Ft[ft]),ft++)}}),0===O&&G(),h._meshX=p,h._meshY=f,h._meshZ=g,h._meshIntensity=m,h._Xs=I,h._Ys=N,h._Zs=F}(),h}ue.exports={findNearestOnAxis:o,generateIsoMeshes:v,createIsosurfaceTrace:function(h,s){var p=y({gl:h.glplot.gl}),f=new a(h,p,s.uid);return p._trace=f,f.update(s),h.glplot.add(p),f}}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../registry"),T=x("./attributes"),_=x("../../components/colorscale/defaults");function e(o,a,l,i,v){var h=v("isomin"),s=v("isomax");null!=s&&null!=h&&h>s&&(a.isomin=null,a.isomax=null);var d=v("x"),p=v("y"),f=v("z"),g=v("value");d&&d.length&&p&&p.length&&f&&f.length&&g&&g.length?(b.getComponentMethod("calendars","handleTraceDefaults")(o,a,["x","y","z"],i),v("valuehoverformat"),["x","y","z"].forEach(function(m){v(m+"hoverformat");var u="caps."+m;v(u+".show")&&v(u+".fill");var w="slices."+m;v(w+".show")&&(v(w+".fill"),v(w+".locations"))}),v("spaceframe.show")&&v("spaceframe.fill"),v("surface.show")&&(v("surface.count"),v("surface.fill"),v("surface.pattern")),v("contour.show")&&(v("contour.color"),v("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(m){v(m)}),_(o,a,i,v,{prefix:"",cLetter:"c"}),a._length=null):a.visible=!1}ue.exports={supplyDefaults:function(o,a,l,i){e(o,a,0,i,function(v,h){return y.coerce(o,a,T,v,h)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,calc:x("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:x("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/attributes"),b=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=x("../../plots/template_attributes").hovertemplateAttrs,_=x("../surface/attributes"),e=x("../../plots/attributes"),o=x("../../lib/extend").extendFlat;ue.exports=o({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:T({editType:"calc"}),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},y("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:o({},_.contours.x.show,{}),color:_.contours.x.color,width:_.contours.x.width,editType:"calc"},lightposition:{x:o({},_.lightposition.x,{dflt:1e5}),y:o({},_.lightposition.y,{dflt:1e5}),z:o({},_.lightposition.z,{dflt:0}),editType:"calc"},lighting:o({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},_.lighting),hoverinfo:o({},e.hoverinfo,{editType:"calc"}),showlegend:o({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1061}],868:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/calc");ue.exports=function(b,T){T.intensity&&y(b,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(x,ue,le){"use strict";var y=x("../../../stackgl_modules").gl_mesh3d,b=x("../../../stackgl_modules").delaunay_triangulate,T=x("../../../stackgl_modules").alpha_shape,_=x("../../../stackgl_modules").convex_hull,e=x("../../lib/gl_format_color").parseColorScale,o=x("../../lib/str2rgbarray"),a=x("../../components/colorscale").extractOpts,l=x("../../plots/gl3d/zip3");function i(f,g,m){this.scene=f,this.uid=m,this.mesh=g,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var v=i.prototype;function h(f){for(var g=[],m=f.length,u=0;u<m;u++)g[u]=o(f[u]);return g}function s(f,g,m,u){for(var w=[],c=g.length,E=0;E<c;E++)w[E]=f.d2l(g[E],0,u)*m;return w}function d(f){for(var g=[],m=f.length,u=0;u<m;u++)g[u]=Math.round(f[u]);return g}function p(f,g){for(var m=f.length,u=0;u<m;u++)if(f[u]<=-.5||f[u]>=g-.5)return!1;return!0}v.handlePick=function(f){if(f.object===this.mesh){var g=f.index=f.data.index;f.traceCoordinate=f.data._cellCenter?f.data.dataCoordinate:[this.data.x[g],this.data.y[g],this.data.z[g]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&void 0!==m[g]?f.textLabel=m[g]:m&&(f.textLabel=m),!0}},v.update=function(f){var g=this.scene,m=g.fullSceneLayout;this.data=f;var u,w=f.x.length,c=l(s(m.xaxis,f.x,g.dataScale[0],f.xcalendar),s(m.yaxis,f.y,g.dataScale[1],f.ycalendar),s(m.zaxis,f.z,g.dataScale[2],f.zcalendar));if(f.i&&f.j&&f.k){if(f.i.length!==f.j.length||f.j.length!==f.k.length||!p(f.i,w)||!p(f.j,w)||!p(f.k,w))return;u=l(d(f.i),d(f.j),d(f.k))}else u=0===f.alphahull?_(c):f.alphahull>0?T(f.alphahull,c):function(C,O){for(var I=["x","y","z"].indexOf(C),N=[],F=O.length,L=0;L<F;L++)N[L]=[O[L][(I+1)%3],O[L][(I+2)%3]];return b(N)}(f.delaunayaxis,c);var E={positions:c,cells:u,lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,contourEnable:f.contour.show,contourColor:o(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading};if(f.intensity){var M=a(f);this.color="#fff";var S=f.intensitymode;E[S+"Intensity"]=f.intensity,E[S+"IntensityBounds"]=[M.min,M.max],E.colormap=e(f)}else f.vertexcolor?(this.color=f.vertexcolor[0],E.vertexColors=h(f.vertexcolor)):f.facecolor?(this.color=f.facecolor[0],E.cellColors=h(f.facecolor)):(this.color=f.color,E.meshColor=o(f.color));this.mesh.update(E)},v.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ue.exports=function(f,g){var u=y({gl:f.glplot.gl}),w=new i(f,u,g.uid);return u._trace=w,w.update(g),f.glplot.add(u),w}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("../../components/colorscale/defaults"),_=x("./attributes");ue.exports=function(e,o,a,l){function i(h,s){return b.coerce(e,o,_,h,s)}function v(h){var s=h.map(function(d){var p=i(d);return p&&b.isArrayOrTypedArray(p)?p:null});return s.every(function(d){return d&&d.length===s[0].length})&&s}v(["x","y","z"])?(v(["i","j","k"]),(!o.i||o.j&&o.k)&&(!o.j||o.k&&o.i)&&(!o.k||o.i&&o.j)?(y.getComponentMethod("calendars","handleTraceDefaults")(e,o,["x","y","z"],l),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(h){i(h)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in e?(i("intensity"),i("intensitymode"),T(e,o,l,i,{prefix:"",cLetter:"c"})):(o.showscale=!1,"facecolor"in e?i("facecolor"):"vertexcolor"in e?i("vertexcolor"):i("color",a)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),o._length=null):o.visible=!1):o.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:x("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(x,ue,le){"use strict";var y=x("../../lib").extendFlat,b=x("../scatter/attributes"),T=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=x("../../components/drawing/attributes").dash,e=x("../../components/fx/attributes"),o=x("../../constants/delta.js"),a=o.INCREASING.COLOR,l=o.DECREASING.COLOR,i=b.line;function v(h){return{line:{color:y({},i.color,{dflt:h}),width:i.width,dash:_,editType:"style"},editType:"style"}}ue.exports={xperiod:b.xperiod,xperiod0:b.xperiod0,xperiodalignment:b.xperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:y({},i.width,{}),dash:y({},_,{}),editType:"style"},increasing:v(a),decreasing:v(l),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:y({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927}],873:[function(x,ue,le){"use strict";var y=x("../../lib"),b=y._,T=x("../../plots/cartesian/axes"),_=x("../../plots/cartesian/align_period"),e=x("../../constants/numerical").BADNUM;function o(l,i,v,h){return{o:l,h:i,l:v,c:h}}function a(l,i,v,h,s,d){for(var p=s.makeCalcdata(i,"open"),f=s.makeCalcdata(i,"high"),g=s.makeCalcdata(i,"low"),m=s.makeCalcdata(i,"close"),u=Array.isArray(i.text),w=Array.isArray(i.hovertext),c=!0,E=null,M=!!i.xperiodalignment,S=[],C=0;C<h.length;C++){var O=h[C],I=p[C],N=f[C],F=g[C],L=m[C];if(O!==e&&I!==e&&N!==e&&F!==e&&L!==e){L===I?null!==E&&L!==E&&(c=L>E):c=L>I,E=L;var P=d(I,N,F,L);P.pos=O,P.yc=(I+L)/2,P.i=C,P.dir=c?"increasing":"decreasing",P.x=P.pos,P.y=[F,N],M&&(P.orig_p=v[C]),u&&(P.tx=i.text[C]),w&&(P.htx=i.hovertext[C]),S.push(P)}else S.push({pos:O,empty:!0})}return i._extremes[s._id]=T.findExtremes(s,y.concat(g,f),{padded:!0}),S.length&&(S[0].t={labels:{open:b(l,"open:")+" ",high:b(l,"high:")+" ",low:b(l,"low:")+" ",close:b(l,"close:")+" "}}),S}ue.exports={calc:function(l,i){var v=T.getFromId(l,i.xaxis),h=T.getFromId(l,i.yaxis),s=function(m,u,w){var c=w._minDiff;if(!c){var E,M=m._fullData,S=[];for(c=1/0,E=0;E<M.length;E++){var C=M[E];if("ohlc"===C.type&&!0===C.visible&&C.xaxis===u._id){S.push(C);var O=u.makeCalcdata(C,"x");C._origX=O;var I=_(w,u,"x",O).vals;C._xcalc=I;var N=y.distinctVals(I).minDiff;N&&isFinite(N)&&(c=Math.min(c,N))}}for(c===1/0&&(c=1),E=0;E<S.length;E++)S[E]._minDiff=c}return c*w.tickwidth}(l,v,i),d=i._minDiff;i._minDiff=null;var p=i._origX;i._origX=null;var f=i._xcalc;i._xcalc=null;var g=a(l,i,p,f,h,o);return i._extremes[v._id]=T.findExtremes(v,f,{vpad:d/2}),g.length?(y.extendFlat(g[0].t,{wHover:d/2,tickLen:s}),g):[{t:{empty:!0}}]},calcCommon:a}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./ohlc_defaults"),T=x("../scatter/period_defaults"),_=x("./attributes");function e(o,a,l,i){l(i+".line.color"),l(i+".line.width",a.line.width),l(i+".line.dash",a.line.dash)}ue.exports=function(o,a,l,i){function v(h,s){return y.coerce(o,a,_,h,s)}b(o,a,v,i)?(T(o,a,i,v,{x:!0}),v("xhoverformat"),v("yhoverformat"),v("line.width"),v("line.dash"),e(0,a,v,"increasing"),e(0,a,v,"decreasing"),v("text"),v("hovertext"),v("tickwidth"),i._requestRangeslider[a.xaxis]=!0):a.visible=!1}},{"../../lib":503,"../scatter/period_defaults":947,"./attributes":872,"./ohlc_defaults":877}],875:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../lib"),T=x("../../components/fx"),_=x("../../components/color"),e=x("../../lib").fillText,o=x("../../constants/delta.js"),a={increasing:o.INCREASING.SYMBOL,decreasing:o.DECREASING.SYMBOL};function l(h,s,d,p){var f,g,m=h.cd,u=h.xa,w=m[0].trace,c=m[0].t,E=w.type,M="ohlc"===E?"l":"min",S="ohlc"===E?"h":"max",C=c.bPos||0,O=c.bdPos||c.tickLen,I=c.wHover,N=Math.min(1,O/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function F(te){var ae=te.pos+C-s;return T.inbox(ae-I,ae+I,f)}function L(te){var ae=te[M],J=te[S];return ae===J||T.inbox(ae-d,J-d,f)}function P(te){return(F(te)+L(te))/2}f=h.maxHoverDistance-N,g=h.maxSpikeDistance-N;var j=T.getDistanceFunction(p,F,L,P);if(T.getClosest(m,j,h),!1===h.index)return null;var U=m[h.index];if(U.empty)return null;var $=w[U.dir],X=$.line.color;return h.color=_.opacity(X)&&$.line.width?X:$.fillcolor,h.x0=u.c2p(U.pos+C-O,!0),h.x1=u.c2p(U.pos+C+O,!0),h.xLabelVal=void 0!==U.orig_p?U.orig_p:U.pos,h.spikeDistance=P(U)*g/f,h.xSpike=u.c2p(U.pos,!0),h}function i(h,s,d,p){var f=h.cd,g=h.ya,m=f[0].trace,u=f[0].t,w=[],c=l(h,s,d,p);if(!c)return[];var E=f[c.index].hi||m.hoverinfo,M=E.split("+");if("all"!==E&&-1===M.indexOf("y"))return[];for(var S=["high","open","close","low"],C={},O=0;O<S.length;O++){var I,N=S[O],F=m[N][c.index],L=g.c2p(F,!0);F in C?(I=C[F]).yLabel+="<br>"+u.labels[N]+y.hoverLabelText(g,F,m.yhoverformat):((I=b.extendFlat({},c)).y0=I.y1=L,I.yLabelVal=F,I.yLabel=u.labels[N]+y.hoverLabelText(g,F,m.yhoverformat),I.name="",w.push(I),C[F]=I)}return w}function v(h,s,d,p){var f=h.cd,g=h.ya,m=f[0].trace,u=f[0].t,w=l(h,s,d,p);if(!w)return[];var c=f[w.index],E=w.index=c.i,M=c.dir;function S(P){return u.labels[P]+y.hoverLabelText(g,m[P][E],m.yhoverformat)}var C=c.hi||m.hoverinfo,O=C.split("+"),I="all"===C,N=I||-1!==O.indexOf("y"),F=I||-1!==O.indexOf("text"),L=N?[S("open"),S("high"),S("low"),S("close")+"  "+a[M]]:[];return F&&e(c,m,L),w.extraText=L.join("<br>"),w.y0=w.y1=g.c2p(c.yc,!0),[w]}ue.exports={hoverPoints:function(h,s,d,p){return h.cd[0].trace.hoverlabel.split?i(h,s,d,p):v(h,s,d,p)},hoverSplit:i,hoverOnPoints:v}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"ohlc",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc").calc,plot:x("./plot"),style:x("./style"),hoverPoints:x("./hover").hoverPoints,selectPoints:x("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib");ue.exports=function(T,_,e,o){var a=e("x"),l=e("open"),i=e("high"),v=e("low"),h=e("close");if(e("hoverlabel.split"),y.getComponentMethod("calendars","handleTraceDefaults")(T,_,["x"],o),l&&i&&v&&h){var s=Math.min(l.length,i.length,v.length,h.length);return a&&(s=Math.min(s,b.minRowLength(a))),_._length=s,s}}},{"../../lib":503,"../../registry":638}],878:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib");ue.exports=function(T,_,e,o){var a=_.yaxis,l=_.xaxis,i=!!l.rangebreaks;b.makeTraceGroups(o,e,"trace ohlc").each(function(v){var h=y.select(this),s=v[0],d=s.t;if(!0!==s.trace.visible||d.empty)h.remove();else{var p=d.tickLen,f=h.selectAll("path").data(b.identity);f.enter().append("path"),f.exit().remove(),f.attr("d",function(g){if(g.empty)return"M0,0Z";var m=l.c2p(g.pos-p,!0),u=l.c2p(g.pos+p,!0),w=i?(m+u)/2:l.c2p(g.pos,!0);return"M"+m+","+a.c2p(g.o,!0)+"H"+w+"M"+w+","+a.c2p(g.h,!0)+"V"+a.c2p(g.l,!0)+"M"+u+","+a.c2p(g.c,!0)+"H"+w})}})}},{"../../lib":503,"@plotly/d3":58}],879:[function(x,ue,le){"use strict";ue.exports=function(y,b){var T,_=y.cd,e=y.xaxis,o=y.yaxis,a=[],l=_[0].t.bPos||0;if(!1===b)for(T=0;T<_.length;T++)_[T].selected=0;else for(T=0;T<_.length;T++){var i=_[T];b.contains([e.c2p(i.pos+l),o.c2p(i.yc)],null,i.i,y)?(a.push({pointNumber:i.i,x:e.c2d(i.pos),y:o.c2d(i.yc)}),i.selected=1):i.selected=0}return a}},{}],880:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/drawing"),T=x("../../components/color");ue.exports=function(_,e,o){var a=o||y.select(_).selectAll("g.ohlclayer").selectAll("g.trace");a.style("opacity",function(l){return l[0].trace.opacity}),a.each(function(l){var i=l[0].trace;y.select(this).selectAll("path").each(function(v){if(!v.empty){var h=i[v.dir].line;y.select(this).style("fill","none").call(T.stroke,h.color).call(b.dashLine,h.dash,h.width).style("opacity",i.selectedpoints&&!v.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(x,ue,le){"use strict";var y=x("../../lib/extend").extendFlat,b=x("../../plots/attributes"),T=x("../../plots/font_attributes"),_=x("../../components/colorscale/attributes"),e=x("../../plots/template_attributes").hovertemplateAttrs,o=x("../../plots/domain").attributes,a=y({editType:"calc"},_("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ue.exports={domain:o({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:y({},b.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:T({editType:"calc"}),tickfont:T({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(x,ue,le){"use strict";var y=x("../../plots/get_data").getModuleCalcData,b=x("./plot");le.name="parcats",le.plot=function(T,_,e,o){var a=y(T.calcdata,"parcats");a.length&&b(T,a[0],e,o)},le.clean=function(T,_,e,o){var a=o._has&&o._has("parcats"),l=_._has&&_._has("parcats");a&&!l&&o._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(x,ue,le){"use strict";var y=x("../../lib/gup").wrap,b=x("../../components/colorscale/helpers").hasColorscale,T=x("../../components/colorscale/calc"),_=x("../../lib/filter_unique.js"),e=x("../../components/drawing"),o=x("../../lib"),a=x("fast-isnumeric");function l(h,s,d){h.valueInds.push(s),h.count+=d}function i(h,s,d){return{categoryInds:h,color:s,rawColor:d,valueInds:[],count:0}}function v(h,s,d){h.valueInds.push(s),h.count+=d}ue.exports=function(h,s){var d=o.filterVisible(s.dimensions);if(0===d.length)return[];var p,f,g,m=d.map(function(ee){var se;if("trace"===ee.categoryorder)se=null;else if("array"===ee.categoryorder)se=ee.categoryarray;else{se=_(ee.values);for(var G=!0,H=0;H<se.length;H++)if(!a(se[H])){G=!1;break}se.sort(G?o.sorterAsc:void 0),"category descending"===ee.categoryorder&&(se=se.reverse())}return function(Y,oe){oe=null==oe?[]:oe.map(function(we){return we});var W={},ne={},re=[];oe.forEach(function(we,ye){W[we]=0,ne[we]=ye});for(var ce=0;ce<Y.length;ce++){var fe,me=Y[ce];void 0===W[me]?(W[me]=1,fe=oe.push(me)-1,ne[me]=fe):(W[me]++,fe=ne[me]),re.push(fe)}var pe=oe.map(function(we){return W[we]});return{uniqueValues:oe,uniqueCounts:pe,inds:re}}(ee.values,se)});p=o.isArrayOrTypedArray(s.counts)?s.counts:[s.counts],function(ee){var se;if(function(G){for(var H=new Array(G.length),Y=0;Y<G.length;Y++){if(G[Y]<0||G[Y]>=G.length||void 0!==H[G[Y]])return!1;H[G[Y]]=!0}return!0}(ee.map(function(G){return G.displayindex})))for(se=0;se<ee.length;se++)ee[se]._displayindex=ee[se].displayindex;else for(se=0;se<ee.length;se++)ee[se]._displayindex=se}(d),d.forEach(function(ee,se){!function(G,H){G._categoryarray=H.uniqueValues,G._ticktext=null==G.ticktext?[]:G.ticktext.slice();for(var Y=G._ticktext.length;Y<H.uniqueValues.length;Y++)G._ticktext.push(H.uniqueValues[Y])}(ee,m[se])});var u,w=s.line;w?(b(s,"line")&&T(h,s,{vals:s.line.color,containerStr:"line",cLetter:"c"}),u=e.tryColorscale(w)):u=o.identity;var c,E,M,S,C,O=d[0].values.length,I={},N=m.map(function(ee){return ee.inds});for(g=0,c=0;c<O;c++){var F=[];for(E=0;E<N.length;E++)F.push(N[E][c]);g+=f=p[c%p.length];var L=(M=c,S=void 0,C=void 0,o.isArrayOrTypedArray(w.color)?C=S=w.color[M%w.color.length]:S=w.color,{color:u(S),rawColor:C}),P=F+"-"+L.rawColor;void 0===I[P]&&(I[P]=i(F,L.color,L.rawColor)),v(I[P],c,f)}var j,ee,se,G,H,U=d.map(function(ee,se){return{dimensionInd:se,containerInd:ee._index,displayInd:ee._displayindex,dimensionLabel:ee.label,count:g,categories:[],dragX:null}});for(c=0;c<O;c++)for(f=p[c%p.length],E=0;E<U.length;E++){var $=U[E].containerInd,X=m[E].inds[c],te=U[E].categories;void 0===te[X]&&(te[X]={dimensionInd:E,categoryInd:j=X,categoryValue:s.dimensions[$]._categoryarray[X],displayInd:j,categoryLabel:s.dimensions[$]._ticktext[X],valueInds:[],count:0,dragY:null}),l(te[X],c,f)}return y((se=I,G=g,H=(ee=U).map(function(Y){return Y.categories.length}).reduce(function(Y,oe){return Math.max(Y,oe)}),{dimensions:ee,paths:se,trace:void 0,maxCats:H,count:G}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/colorscale/helpers").hasColorscale,T=x("../../components/colorscale/defaults"),_=x("../../plots/domain").defaults,e=x("../../plots/array_container_defaults"),o=x("./attributes"),a=x("../parcoords/merge_length");function l(i,v){function h(u,w){return y.coerce(i,v,o.dimensions,u,w)}var s=h("values"),d=h("visible");if(s&&s.length||(d=v.visible=!1),d){h("label"),h("displayindex",v._index);var p,f=i.categoryarray,g=Array.isArray(f)&&f.length>0;g&&(p="array");var m=h("categoryorder",p);"array"===m?(h("categoryarray"),h("ticktext")):(delete i.categoryarray,delete i.ticktext),g||"array"!==m||(v.categoryorder="trace")}}ue.exports=function(i,v,h,s){function d(u,w){return y.coerce(i,v,o,u,w)}var p=e(i,v,{name:"dimensions",handleItemDefaults:l}),f=function(u,w,c,E,M){M("line.shape"),M("line.hovertemplate");var S=M("line.color",E.colorway[0]);if(b(u,"line")&&y.isArrayOrTypedArray(S)){if(S.length)return M("line.colorscale"),T(u,w,E,M,{prefix:"line.",cLetter:"c"}),S.length;w.line.color=c}return 1/0}(i,v,h,s,d);_(v,s,d),Array.isArray(p)&&p.length||(v.visible=!1),a(v,p,"values",f),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var g={family:s.font.family,size:Math.round(s.font.size),color:s.font.color};y.coerceFont(d,"labelfont",g);var m={family:s.font.family,size:Math.round(s.font.size/1.2),color:s.font.color};y.coerceFont(d,"tickfont",m)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":898,"./attributes":881}],885:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:x("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("d3-interpolate").interpolateNumber,T=x("../../plot_api/plot_api"),_=x("../../components/fx"),e=x("../../lib"),o=e.strTranslate,a=x("../../components/drawing"),l=x("tinycolor2"),i=x("../../lib/svg_text_utils");function v(G,H,Y,oe){var W=G.map(te.bind(0,H,Y)),ne=oe.selectAll("g.parcatslayer").data([null]);ne.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var re=ne.selectAll("g.trace.parcats").data(W,h),ce=re.enter().append("g").attr("class","trace parcats");re.attr("transform",function(Re){return o(Re.x,Re.y)}),ce.append("g").attr("class","paths");var fe=re.select("g.paths").selectAll("path.path").data(function(Re){return Re.paths},h);fe.attr("fill",function(Re){return Re.model.color});var me=fe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Re){return Re.model.color}).attr("fill-opacity",0);w(me),fe.attr("d",function(Re){return Re.svgD}),me.empty()||fe.sort(d),fe.exit().remove(),fe.on("mouseover",p).on("mouseout",f).on("click",u),ce.append("g").attr("class","dimensions");var pe=re.select("g.dimensions").selectAll("g.dimension").data(function(Re){return Re.dimensions},h);pe.enter().append("g").attr("class","dimension"),pe.attr("transform",function(Re){return o(Re.x,0)}),pe.exit().remove();var we=pe.selectAll("g.category").data(function(Re){return Re.categories},h),ye=we.enter().append("g").attr("class","category");we.attr("transform",function(Re){return o(0,Re.y)}),ye.append("rect").attr("class","catrect").attr("pointer-events","none"),we.select("rect.catrect").attr("fill","none").attr("width",function(Re){return Re.width}).attr("height",function(Re){return Re.height}),E(ye);var Te=we.selectAll("rect.bandrect").data(function(Re){return Re.bands},h);Te.each(function(){e.raiseToTop(this)}),Te.attr("fill",function(Re){return Re.color});var Le=Te.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Re){return Re.color}).attr("fill-opacity",0);Te.attr("fill",function(Re){return Re.color}).attr("width",function(Re){return Re.width}).attr("height",function(Re){return Re.height}).attr("y",function(Re){return Re.y}).attr("cursor",function(Re){return"fixed"===Re.parcatsViewModel.arrangement?"default":"perpendicular"===Re.parcatsViewModel.arrangement?"ns-resize":"move"}),M(Le),Te.exit().remove(),ye.append("text").attr("class","catlabel").attr("pointer-events","none");var Oe=H._fullLayout.paper_bgcolor;we.select("text.catlabel").attr("text-anchor",function(Re){return s(Re)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",i.makeTextShadow(Oe)).style("fill","rgb(0, 0, 0)").attr("x",function(Re){return s(Re)?Re.width+5:-5}).attr("y",function(Re){return Re.height/2}).text(function(Re){return Re.model.categoryLabel}).each(function(Re){a.font(y.select(this),Re.parcatsViewModel.categorylabelfont),i.convertToTspans(y.select(this),H)}),ye.append("text").attr("class","dimlabel"),we.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Re){return"fixed"===Re.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Re){return Re.width/2}).attr("y",-5).text(function(Re,Ve){return 0===Ve?Re.parcatsViewModel.model.dimensions[Re.model.dimensionInd].dimensionLabel:null}).each(function(Re){a.font(y.select(this),Re.parcatsViewModel.labelfont)}),we.selectAll("rect.bandrect").on("mouseover",N).on("mouseout",F),we.exit().remove(),pe.call(y.behavior.drag().origin(function(Re){return{x:Re.x,y:0}}).on("dragstart",L).on("drag",P).on("dragend",j)),re.each(function(Re){Re.traceSelection=y.select(this),Re.pathSelection=y.select(this).selectAll("g.paths").selectAll("path.path"),Re.dimensionSelection=y.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),re.exit().remove()}function h(G){return G.key}function s(G){return G.model.dimensionInd===G.parcatsViewModel.dimensions[G.parcatsViewModel.dimensions.length-1].model.dimensionInd}function d(G,H){return G.model.rawColor>H.model.rawColor?1:G.model.rawColor<H.model.rawColor?-1:0}function p(G){if(!G.parcatsViewModel.dragDimension&&-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),c(y.select(this));var H=g(G),Y=m(G);if(G.parcatsViewModel.graphDiv.emit("plotly_hover",{points:H,event:y.event,constraints:Y}),-1===G.parcatsViewModel.hoverinfoItems.indexOf("none")){var oe,W,ne,re=y.mouse(this)[0],ce=G.parcatsViewModel.graphDiv,fe=G.parcatsViewModel.trace,me=ce._fullLayout,pe=me._paperdiv.node().getBoundingClientRect(),we=G.parcatsViewModel.graphDiv.getBoundingClientRect();for(ne=0;ne<G.leftXs.length-1;ne++)if(G.leftXs[ne]+G.dimWidths[ne]-2<=re&&re<=G.leftXs[ne+1]+2){var ye=G.parcatsViewModel.dimensions[ne];oe=(ye.x+ye.width+G.parcatsViewModel.dimensions[ne+1].x)/2,W=(G.topYs[ne]+G.topYs[ne+1]+G.height)/2;break}var Le=G.parcatsViewModel.x+oe,Oe=G.parcatsViewModel.y+W,Re=l.mostReadable(G.model.color,["black","white"]),Ve=G.model.count,_e=Ve/G.parcatsViewModel.model.count,Ae={countLabel:Ve,probabilityLabel:_e.toFixed(3)},Fe=[];-1!==G.parcatsViewModel.hoverinfoItems.indexOf("count")&&Fe.push(["Count:",Ae.countLabel].join(" ")),-1!==G.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Fe.push(["P:",Ae.probabilityLabel].join(" "));var Pe=Fe.join("<br>"),Be=y.mouse(ce)[0];_.loneHover({trace:fe,x:Le-pe.left+we.left,y:Oe-pe.top+we.top,text:Pe,color:G.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Re,idealAlign:Be<Le?"right":"left",hovertemplate:(fe.line||{}).hovertemplate,hovertemplateLabels:Ae,eventData:[{data:fe._input,fullData:fe,count:Ve,probability:_e}]},{container:me._hoverlayer.node(),outerContainer:me._paper.node(),gd:ce})}}}function f(G){if(!G.parcatsViewModel.dragDimension&&(w(y.select(this)),_.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),G.parcatsViewModel.pathSelection.sort(d),-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var H=g(G),Y=m(G);G.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:H,event:y.event,constraints:Y})}}function g(G){for(var H=[],Y=U(G.parcatsViewModel),oe=0;oe<G.model.valueInds.length;oe++)H.push({curveNumber:Y,pointNumber:G.model.valueInds[oe]});return H}function m(G){for(var H={},Y=G.parcatsViewModel.model.dimensions,oe=0;oe<Y.length;oe++){var W=Y[oe];H[W.containerInd]=W.categories[G.model.categoryInds[oe]].categoryValue}return void 0!==G.model.rawColor&&(H.color=G.model.rawColor),H}function u(G){if(-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip")){var H=g(G),Y=m(G);G.parcatsViewModel.graphDiv.emit("plotly_click",{points:H,event:y.event,constraints:Y})}}function w(G){G.attr("fill",function(H){return H.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function c(G){G.attr("fill-opacity",.8).attr("stroke",function(H){return l.mostReadable(H.model.color,["black","white"])}).attr("stroke-width",.3)}function E(G){G.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function M(G){G.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function S(G){var Y=G.categoryViewModel.model.dimensionInd,oe=G.categoryViewModel.model.categoryInd;return G.parcatsViewModel.pathSelection.filter(function(W){return W.model.categoryInds[Y]===oe&&W.model.color===G.color})}function C(G,H,Y){var oe=y.select(G).datum(),W=oe.categoryViewModel.model,ne=oe.parcatsViewModel.graphDiv,re=y.select(G.parentNode).selectAll("rect.bandrect"),ce=[];re.each(function(me){S(me).each(function(pe){Array.prototype.push.apply(ce,g(pe))})});var fe={};fe[W.dimensionInd]=W.categoryValue,ne.emit(H,{points:ce,event:Y,constraints:fe})}function O(G,H,Y){var oe=y.select(G).datum(),W=oe.categoryViewModel.model,ne=oe.parcatsViewModel.graphDiv,re=S(oe),ce=[];re.each(function(me){Array.prototype.push.apply(ce,g(me))});var fe={};fe[W.dimensionInd]=W.categoryValue,void 0!==oe.rawColor&&(fe.color=oe.rawColor),ne.emit(H,{points:ce,event:Y,constraints:fe})}function I(G,H,Y){G._fullLayout._calcInverseTransform(G);var oe,W,ne=G._fullLayout._invScaleX,re=G._fullLayout._invScaleY,ce=y.select(Y.parentNode).select("rect.catrect"),fe=ce.node().getBoundingClientRect(),me=ce.datum(),pe=me.parcatsViewModel,ye=pe.trace,Te=fe.top+fe.height/2;pe.dimensions.length>1&&pe.model.dimensions[me.model.dimensionInd].displayInd===pe.dimensions.length-1?(oe=fe.left,W="left"):(oe=fe.left+fe.width,W="right");var Le=me.model.count,Oe=me.model.categoryLabel,Re=Le/me.parcatsViewModel.model.count,Ve={countLabel:Le,categoryLabel:Oe,probabilityLabel:Re.toFixed(3)},_e=[];-1!==me.parcatsViewModel.hoverinfoItems.indexOf("count")&&_e.push(["Count:",Ve.countLabel].join(" ")),-1!==me.parcatsViewModel.hoverinfoItems.indexOf("probability")&&_e.push(["P("+Ve.categoryLabel+"):",Ve.probabilityLabel].join(" "));var Ae=_e.join("<br>");return{trace:ye,x:ne*(oe-H.left),y:re*(Te-H.top),text:Ae,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:W,hovertemplate:ye.hovertemplate,hovertemplateLabels:Ve,eventData:[{data:ye._input,fullData:ye,count:Le,category:Oe,probability:Re}]}}function N(G){if(!G.parcatsViewModel.dragDimension&&-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(y.mouse(this)[1]<-1)return;var H,Y=G.parcatsViewModel.graphDiv,oe=Y._fullLayout,W=oe._paperdiv.node().getBoundingClientRect(),ne=G.parcatsViewModel.hoveron;"color"===ne?(c(fe=S(ce=y.select(this).datum())),fe.each(function(){e.raiseToTop(this)}),y.select(this.parentNode).selectAll("rect.bandrect").filter(function(me){return me.color===ce.color}).each(function(){e.raiseToTop(this),y.select(this).attr("stroke","black").attr("stroke-width",1.5)}),O(this,"plotly_hover",y.event)):(function(re){y.select(re.parentNode).selectAll("rect.bandrect").each(function(ce){var fe=S(ce);c(fe),fe.each(function(){e.raiseToTop(this)})}),y.select(re.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),C(this,"plotly_hover",y.event)),-1===G.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===ne?H=I(Y,W,this):"color"===ne?H=function(re,ce,fe){re._fullLayout._calcInverseTransform(re);var me,pe,we=re._fullLayout._invScaleX,ye=re._fullLayout._invScaleY,Te=fe.getBoundingClientRect(),Le=y.select(fe).datum(),Oe=Le.categoryViewModel,Re=Oe.parcatsViewModel,_e=Re.trace,Ae=Te.y+Te.height/2;Re.dimensions.length>1&&Re.model.dimensions[Oe.model.dimensionInd].displayInd===Re.dimensions.length-1?(me=Te.left,pe="left"):(me=Te.left+Te.width,pe="right");var Fe=Oe.model.categoryLabel,Pe=Le.parcatsViewModel.model.count,Be=0;Le.categoryViewModel.bands.forEach(function(Tt){Tt.color===Le.color&&(Be+=Tt.count)});var qe=Oe.model.count,We=0;Re.pathSelection.each(function(Tt){Tt.model.color===Le.color&&(We+=Tt.model.count)});var Je=Be/Pe,ut=Be/We,Ge=Be/qe,Ke={countLabel:Pe,categoryLabel:Fe,probabilityLabel:Je.toFixed(3)},nt=[];-1!==Oe.parcatsViewModel.hoverinfoItems.indexOf("count")&&nt.push(["Count:",Ke.countLabel].join(" ")),-1!==Oe.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(nt.push("P(color \u2229 "+Fe+"): "+Ke.probabilityLabel),nt.push("P("+Fe+" | color): "+ut.toFixed(3)),nt.push("P(color | "+Fe+"): "+Ge.toFixed(3)));var it=nt.join("<br>"),ht=l.mostReadable(Le.color,["black","white"]);return{trace:_e,x:we*(me-ce.left),y:ye*(Ae-ce.top),text:it,color:Le.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ht,fontSize:10,idealAlign:pe,hovertemplate:_e.hovertemplate,hovertemplateLabels:Ke,eventData:[{data:_e._input,fullData:_e,category:Fe,count:Pe,probability:Je,categorycount:qe,colorcount:We,bandcolorcount:Be}]}}(Y,W,this):"dimension"===ne&&(H=function(re,ce,fe){var me=[];return y.select(fe.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){me.push(I(re,ce,this))}),me}(Y,W,this)),H&&_.loneHover(H,{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:Y}))}var ce,fe}function F(G){var H=G.parcatsViewModel;!H.dragDimension&&(w(H.pathSelection),E(H.dimensionSelection.selectAll("g.category")),M(H.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),_.loneUnhover(H.graphDiv._fullLayout._hoverlayer.node()),H.pathSelection.sort(d),-1===H.hoverinfoItems.indexOf("skip"))&&("color"===G.parcatsViewModel.hoveron?O(this,"plotly_unhover",y.event):C(this,"plotly_unhover",y.event))}function L(G){"fixed"!==G.parcatsViewModel.arrangement&&(G.dragDimensionDisplayInd=G.model.displayInd,G.initialDragDimensionDisplayInds=G.parcatsViewModel.model.dimensions.map(function(H){return H.displayInd}),G.dragHasMoved=!1,G.dragCategoryDisplayInd=null,y.select(this).selectAll("g.category").select("rect.catrect").each(function(H){var Y=y.mouse(this)[0],oe=y.mouse(this)[1];-2<=Y&&Y<=H.width+2&&-2<=oe&&oe<=H.height+2&&(G.dragCategoryDisplayInd=H.model.displayInd,G.initialDragCategoryDisplayInds=G.model.categories.map(function(W){return W.displayInd}),H.model.dragY=H.y,e.raiseToTop(this.parentNode),y.select(this.parentNode).selectAll("rect.bandrect").each(function(W){W.y<oe&&oe<=W.y+W.height&&(G.potentialClickBand=this)}))}),G.parcatsViewModel.dragDimension=G,_.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P(G){if("fixed"!==G.parcatsViewModel.arrangement&&(G.dragHasMoved=!0,null!==G.dragDimensionDisplayInd)){var H=G.dragDimensionDisplayInd,Y=H-1,oe=H+1,W=G.parcatsViewModel.dimensions[H];if(null!==G.dragCategoryDisplayInd){var ne=W.categories[G.dragCategoryDisplayInd];ne.model.dragY+=y.event.dy;var re=ne.model.dragY,ce=ne.model.displayInd,fe=W.categories,me=fe[ce-1],pe=fe[ce+1];void 0!==me&&re<me.y+me.height/2&&(ne.model.displayInd=me.model.displayInd,me.model.displayInd=ce),void 0!==pe&&re+ne.height>pe.y+pe.height/2&&(ne.model.displayInd=pe.model.displayInd,pe.model.displayInd=ce),G.dragCategoryDisplayInd=ne.model.displayInd}if(null===G.dragCategoryDisplayInd||"freeform"===G.parcatsViewModel.arrangement){W.model.dragX=y.event.x;var we=G.parcatsViewModel.dimensions[Y],ye=G.parcatsViewModel.dimensions[oe];void 0!==we&&W.model.dragX<we.x+we.width&&(W.model.displayInd=we.model.displayInd,we.model.displayInd=H),void 0!==ye&&W.model.dragX+W.width>ye.x&&(W.model.displayInd=ye.model.displayInd,ye.model.displayInd=G.dragDimensionDisplayInd),G.dragDimensionDisplayInd=W.model.displayInd}ee(G.parcatsViewModel),J(G.parcatsViewModel),X(G.parcatsViewModel),$(G.parcatsViewModel)}}function j(G){if("fixed"!==G.parcatsViewModel.arrangement&&null!==G.dragDimensionDisplayInd){y.select(this).selectAll("text").attr("font-weight","normal");var H={},Y=U(G.parcatsViewModel),oe=G.parcatsViewModel.model.dimensions.map(function(pe){return pe.displayInd}),W=G.initialDragDimensionDisplayInds.some(function(pe,we){return pe!==oe[we]});W&&oe.forEach(function(pe,we){H["dimensions["+G.parcatsViewModel.model.dimensions[we].containerInd+"].displayindex"]=pe});var ne=!1;if(null!==G.dragCategoryDisplayInd){var re=G.model.categories.map(function(pe){return pe.displayInd});if(ne=G.initialDragCategoryDisplayInds.some(function(pe,we){return pe!==re[we]})){var ce=G.model.categories.slice().sort(function(pe,we){return pe.displayInd-we.displayInd}),fe=ce.map(function(pe){return pe.categoryValue}),me=ce.map(function(pe){return pe.categoryLabel});H["dimensions["+G.model.containerInd+"].categoryarray"]=[fe],H["dimensions["+G.model.containerInd+"].ticktext"]=[me],H["dimensions["+G.model.containerInd+"].categoryorder"]="array"}}-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!G.dragHasMoved&&G.potentialClickBand&&("color"===G.parcatsViewModel.hoveron?O(G.potentialClickBand,"plotly_click",y.event.sourceEvent):C(G.potentialClickBand,"plotly_click",y.event.sourceEvent)),G.model.dragX=null,null!==G.dragCategoryDisplayInd&&(G.parcatsViewModel.dimensions[G.dragDimensionDisplayInd].categories[G.dragCategoryDisplayInd].model.dragY=null,G.dragCategoryDisplayInd=null),G.dragDimensionDisplayInd=null,G.parcatsViewModel.dragDimension=null,G.dragHasMoved=null,G.potentialClickBand=null,ee(G.parcatsViewModel),J(G.parcatsViewModel),y.transition().duration(300).ease("cubic-in-out").each(function(){X(G.parcatsViewModel,!0),$(G.parcatsViewModel,!0)}).each("end",function(){(W||ne)&&T.restyle(G.parcatsViewModel.graphDiv,H,[Y])})}}function U(G){for(var H,Y=G.graphDiv._fullData,oe=0;oe<Y.length;oe++)if(G.key===Y[oe].uid){H=oe;break}return H}function $(G,H){var Y;void 0===H&&(H=!1),G.pathSelection.data(function(oe){return oe.paths},h),(Y=G.pathSelection,H?Y.transition():Y).attr("d",function(oe){return oe.svgD})}function X(G,H){function Y(re){return H?re.transition():re}void 0===H&&(H=!1),G.dimensionSelection.data(function(re){return re.dimensions},h);var oe=G.dimensionSelection.selectAll("g.category").data(function(re){return re.categories},h);Y(G.dimensionSelection).attr("transform",function(re){return o(re.x,0)}),Y(oe).attr("transform",function(re){return o(0,re.y)}),oe.select(".dimlabel").text(function(re,ce){return 0===ce?re.parcatsViewModel.model.dimensions[re.model.dimensionInd].dimensionLabel:null}),oe.select(".catlabel").attr("text-anchor",function(re){return s(re)?"start":"end"}).attr("x",function(re){return s(re)?re.width+5:-5}).each(function(re){var ce,fe;s(re)?(ce=re.width+5,fe="start"):(ce=-5,fe="end"),y.select(this).selectAll("tspan").attr("x",ce).attr("text-anchor",fe)});var W=oe.selectAll("rect.bandrect").data(function(re){return re.bands},h),ne=W.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(re){return re.color}).attr("fill-opacity",0);W.attr("fill",function(re){return re.color}).attr("width",function(re){return re.width}).attr("height",function(re){return re.height}).attr("y",function(re){return re.y}),M(ne),W.each(function(){e.raiseToTop(this)}),W.exit().remove()}function te(G,H,Y){var oe,W=Y[0],ne=H.margin||{l:80,r:80,t:100,b:80},re=W.trace,ce=re.domain,fe=H.width,me=H.height,pe=Math.floor(fe*(ce.x[1]-ce.x[0])),we=Math.floor(me*(ce.y[1]-ce.y[0])),ye=ce.x[0]*fe+ne.l,Te=H.height-ce.y[1]*H.height+ne.t,Le=re.line.shape;oe="all"===re.hoverinfo?["count","probability"]:(re.hoverinfo||"").split("+");var Oe={trace:re,key:re.uid,model:W,x:ye,y:Te,width:pe,height:we,hoveron:re.hoveron,hoverinfoItems:oe,arrangement:re.arrangement,bundlecolors:re.bundlecolors,sortpaths:re.sortpaths,labelfont:re.labelfont,categorylabelfont:re.tickfont,pathShape:Le,dragDimension:null,margin:ne,paths:[],dimensions:[],graphDiv:G,traceSelection:null,pathSelection:null,dimensionSelection:null};return W.dimensions&&(ee(Oe),J(Oe)),Oe}function ae(G,H,Y,oe,W){var ne,re,ce=[],fe=[];for(re=0;re<Y.length-1;re++)ne=b(Y[re]+G[re],G[re+1]),ce.push(ne(W)),fe.push(ne(1-W));var me="M "+G[0]+","+H[0];for(me+="l"+Y[0]+",0 ",re=1;re<Y.length;re++)me+="C"+ce[re-1]+","+H[re-1]+" "+fe[re-1]+","+H[re]+" "+G[re]+","+H[re],me+="l"+Y[re]+",0 ";for(me+="l0,"+oe+" ",me+="l -"+Y[Y.length-1]+",0 ",re=Y.length-2;re>=0;re--)me+="C"+fe[re]+","+(H[re+1]+oe)+" "+ce[re]+","+(H[re]+oe)+" "+(G[re]+Y[re])+","+(H[re]+oe),me+="l-"+Y[re]+",0 ";return me+"Z"}function J(G){var H=G.dimensions,Y=G.model,oe=H.map(function(nt){return nt.categories.map(function(it){return it.y})}),W=G.model.dimensions.map(function(nt){return nt.categories.map(function(it){return it.displayInd})}),ne=G.model.dimensions.map(function(nt){return nt.displayInd}),re=G.dimensions.map(function(nt){return nt.model.dimensionInd}),ce=H.map(function(nt){return nt.x}),fe=H.map(function(nt){return nt.width}),me=[];for(var pe in Y.paths)Y.paths.hasOwnProperty(pe)&&me.push(Y.paths[pe]);function we(nt){var it=nt.categoryInds.map(function(ht,Tt){return W[Tt][ht]});return re.map(function(ht){return it[ht]})}me.sort(function(nt,it){var ht=we(nt),Tt=we(it);return"backward"===G.sortpaths&&(ht.reverse(),Tt.reverse()),ht.push(nt.valueInds[0]),Tt.push(it.valueInds[0]),G.bundlecolors&&(ht.unshift(nt.rawColor),Tt.unshift(it.rawColor)),ht<Tt?-1:ht>Tt?1:0});for(var ye=new Array(me.length),Te=H[0].model.count,Le=H[0].categories.map(function(nt){return nt.height}).reduce(function(nt,it){return nt+it}),Oe=0;Oe<me.length;Oe++){var Re,Ve=me[Oe];Re=Te>0?Le*(Ve.count/Te):0;for(var _e,Ae=new Array(oe.length),Fe=0;Fe<Ve.categoryInds.length;Fe++){var Be=W[Fe][Ve.categoryInds[Fe]],qe=ne[Fe];Ae[qe]=oe[qe][Be],oe[qe][Be]+=Re;var We=G.dimensions[qe].categories[Be],Je=We.bands.length,ut=We.bands[Je-1];if(void 0===ut||Ve.rawColor!==ut.rawColor){var Ge=void 0===ut?0:ut.y+ut.height;We.bands.push({key:Ge,color:Ve.color,rawColor:Ve.rawColor,height:Re,width:We.width,count:Ve.count,y:Ge,categoryViewModel:We,parcatsViewModel:G})}else{var Ke=We.bands[Je-1];Ke.height+=Re,Ke.count+=Ve.count}}_e=ae(ce,Ae,fe,Re,"hspline"===G.pathShape?.5:0),ye[Oe]={key:Ve.valueInds[0],model:Ve,height:Re,leftXs:ce,topYs:Ae,dimWidths:fe,svgD:_e,parcatsViewModel:G}}G.paths=ye}function ee(G){var H=G.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});H.sort(function(re,ce){return re.displayInd-ce.displayInd});var Y=[];for(var oe in H)Y.push(se(G,G.model.dimensions[H[oe].dimensionInd]));G.dimensions=Y}function se(G,H){var Y,oe=G.model.dimensions.length;Y=40+(oe>1?(G.width-80-16)/(oe-1):0)*H.displayInd;var ne,re,ce,me,pe=[],we=G.model.maxCats,ye=H.categories.length,Te=H.count,Le=G.height-8*(we-1),Oe=8*(we-ye)/2,Re=H.categories.map(function(Ve){return{displayInd:Ve.displayInd,categoryInd:Ve.categoryInd}});for(Re.sort(function(Ve,_e){return Ve.displayInd-_e.displayInd}),me=0;me<ye;me++)ce={key:(re=H.categories[Re[me].categoryInd]).valueInds[0],model:re,width:16,height:ne=Te>0?re.count/Te*Le:0,y:null!==re.dragY?re.dragY:Oe,bands:[],parcatsViewModel:G},Oe=Oe+ne+8,pe.push(ce);return{key:H.dimensionInd,x:null!==H.dragX?H.dragX:Y,y:0,width:16,model:H,categories:pe,parcatsViewModel:G,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ue.exports=function(G,H,Y,oe){v(Y,G,oe,H)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(x,ue,le){"use strict";var y=x("./parcats");ue.exports=function(b,T,_,e){var o=b._fullLayout,l=o._size;y(b,o._paper,T,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},_,e)}},{"./parcats":886}],888:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/attributes"),b=x("../../plots/cartesian/layout_attributes"),T=x("../../plots/font_attributes"),_=x("../../plots/domain").attributes,e=x("../../lib/extend").extendFlat,o=x("../../plot_api/plot_template").templatedArray;ue.exports={domain:_({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:T({editType:"plot"}),tickfont:T({editType:"plot"}),rangefont:T({editType:"plot"}),dimensions:o("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},b.tickvals,{editType:"plot"}),ticktext:e({},b.ticktext,{editType:"plot"}),tickformat:e({},b.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},y("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(x,ue,le){"use strict";var y=x("./constants"),b=x("@plotly/d3"),T=x("../../lib/gup").keyFun,_=x("../../lib/gup").repeat,e=x("../../lib").sorterAsc,o=x("../../lib").strTranslate,a=y.bar.snapRatio;function l(I,N){return I*(1-a)+N*a}var i=y.bar.snapClose;function v(I,N){return I*(1-i)+N*i}function h(I,N,F,L){if(function(se,G){for(var H=0;H<G.length;H++)if(se>=G[H][0]&&se<=G[H][1])return!0;return!1}(F,L))return F;var P=I?-1:1,j=0,U=N.length-1;if(P<0){var $=j;j=U,U=$}for(var X=N[j],te=X,ae=j;P*ae<P*U;ae+=P){var J=ae+P,ee=N[J];if(P*F<P*v(X,ee))return l(X,te);if(P*F<P*ee||J===U)return l(ee,X);te=X,X=ee}}function s(I){I.attr("x",-y.bar.captureWidth/2).attr("width",y.bar.captureWidth)}function d(I){I.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function p(I){if(!I.brush.filterSpecified)return"0,"+I.height;for(var N,F,L,P=f(I.brush.filter.getConsolidated(),I.height),j=[0],U=P.length?P[0][0]:null,$=0;$<P.length;$++)F=(N=P[$])[1]-N[0],j.push(U),j.push(F),(L=$+1)<P.length&&(U=P[L][0]-N[1]);return j.push(I.height),j}function f(I,N){return I.map(function(F){return F.map(function(L){return Math.max(0,L*N)}).sort(e)})}function g(){b.select(document.body).style("cursor",null)}function m(I){I.attr("stroke-dasharray",p)}function u(I,N){var F=b.select(I).selectAll(".highlight, .highlight-shadow");m(N?F.transition().duration(y.bar.snapDuration).each("end",N):F)}function w(I,N){var F,L=I.brush,P=NaN,j={};if(L.filterSpecified){var U=I.height,$=L.filter.getConsolidated(),X=f($,U),te=NaN,ae=NaN,J=NaN;for(F=0;F<=X.length;F++){var ee=X[F];if(ee&&ee[0]<=N&&N<=ee[1]){te=F;break}if(ae=F?F-1:NaN,ee&&ee[0]>N){J=F;break}}if(P=te,isNaN(P)&&(P=isNaN(ae)||isNaN(J)?isNaN(ae)?J:ae:N-X[ae][1]<X[J][0]-N?ae:J),!isNaN(P)){var se=X[P],G=function(W,ne){var re=y.bar.handleHeight;if(!(ne>W[1]+re||ne<W[0]-re))return ne>=.9*W[1]+.1*W[0]?"n":ne<=.9*W[0]+.1*W[1]?"s":"ns"}(se,N);G&&(j.interval=$[P],j.intervalPix=se,j.region=G)}}if(I.ordinal&&!j.region){var H=I.unitTickvals,Y=I.unitToPaddedPx.invert(N);for(F=0;F<H.length;F++){var oe=[.25*H[Math.max(F-1,0)]+.75*H[F],.25*H[Math.min(F+1,H.length-1)]+.75*H[F]];if(Y>=oe[0]&&Y<=oe[1]){j.clickableOrdinalRange=oe;break}}}return j}function c(I,N){b.event.sourceEvent.stopPropagation();var F=N.height-b.mouse(I)[1]-2*y.verticalPadding,L=N.brush.svgBrush;L.wasDragged=!0,L._dragging=!0,L.newExtent=L.grabbingBar?[F-L.grabPoint,F+L.barLength-L.grabPoint].map(N.unitToPaddedPx.invert):[L.startExtent,N.unitToPaddedPx.invert(F)].sort(e),N.brush.filterSpecified=!0,L.extent=L.stayingIntervals.concat([L.newExtent]),L.brushCallback(N),u(I.parentNode)}function E(I,N){var F=w(N,N.height-b.mouse(I)[1]-2*y.verticalPadding),L="crosshair";F.clickableOrdinalRange?L="pointer":F.region&&(L=F.region+"-resize"),b.select(document.body).style("cursor",L)}function M(I){I.on("mousemove",function(N){b.event.preventDefault(),N.parent.inBrushDrag||E(this,N)}).on("mouseleave",function(N){N.parent.inBrushDrag||g()}).call(b.behavior.drag().on("dragstart",function(N){!function(F,L){b.event.sourceEvent.stopPropagation();var P=L.height-b.mouse(F)[1]-2*y.verticalPadding,j=L.unitToPaddedPx.invert(P),U=L.brush,$=w(L,P),X=$.interval,te=U.svgBrush;if(te.wasDragged=!1,te.grabbingBar="ns"===$.region,te.grabbingBar){var ae=X.map(L.unitToPaddedPx);te.grabPoint=P-ae[0]-y.verticalPadding,te.barLength=ae[1]-ae[0]}te.clickableOrdinalRange=$.clickableOrdinalRange,te.stayingIntervals=L.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],X&&(te.stayingIntervals=te.stayingIntervals.filter(function(J){return J[0]!==X[0]&&J[1]!==X[1]})),te.startExtent=$.region?X["s"===$.region?1:0]:j,L.parent.inBrushDrag=!0,te.brushStartCallback()}(this,N)}).on("drag",function(N){c(this,N)}).on("dragend",function(N){!function(F,L){var P=L.brush,j=P.filter,U=P.svgBrush;U._dragging||(E(F,L),c(F,L),L.brush.svgBrush.wasDragged=!1),U._dragging=!1,b.event.sourceEvent.stopPropagation();var $=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,L.parent.inBrushDrag=!1,g(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?P.filterSpecified&&L.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],P.filterSpecified=!0):$?(U.extent=U.stayingIntervals,0===U.extent.length&&C(P)):C(P),U.brushCallback(L),u(F.parentNode),void U.brushEndCallback(P.filterSpecified?j.getConsolidated():[]);var X=function(){j.set(j.getConsolidated())};if(L.ordinal){var te=L.unitTickvals;te[te.length-1]<te[0]&&te.reverse(),U.newExtent=[h(0,te,U.newExtent[0],U.stayingIntervals),h(1,te,U.newExtent[1],U.stayingIntervals)];var ae=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(ae?[U.newExtent]:[]),U.extent.length||C(P),U.brushCallback(L),ae?u(F.parentNode,X):(X(),u(F.parentNode))}else X();U.brushEndCallback(P.filterSpecified?j.getConsolidated():[])}(this,N)}))}function S(I,N){return I[0]-N[0]}function C(I){I.filterSpecified=!1,I.svgBrush.extent=[[-1/0,1/0]]}function O(I){for(var N,F=I.slice(),L=[],P=F.shift();P;){for(N=P.slice();(P=F.shift())&&P[0]<=N[1];)N[1]=Math.max(N[1],P[1]);L.push(N)}return 1===L.length&&L[0][0]>L[0][1]&&(L=[]),L}ue.exports={makeBrush:function(I,N,F,L,P,j){var U,X,te,ae,$=(ae=[],{set:function(J){1===(ae=J.map(function(ee){return ee.slice().sort(e)}).sort(S)).length&&ae[0][0]===-1/0&&ae[0][1]===1/0&&(ae=[[0,-1]]),X=O(ae),te=ae.reduce(function(ee,se){return[Math.min(ee[0],se[0]),Math.max(ee[1],se[1])]},[1/0,-1/0])},get:function(){return ae.slice()},getConsolidated:function(){return X},getBounds:function(){return te}});return $.set(F),{filter:$,filterSpecified:N,svgBrush:{extent:[],brushStartCallback:L,brushCallback:(U=P,function(X){var J,te=X.brush,ae=(J=te,J.svgBrush.extent.map(function(ee){return ee.slice()})).slice();te.filter.set(ae),U()}),brushEndCallback:j}}},ensureAxisBrush:function(I,N){var F=I.selectAll("."+y.cn.axisBrush).data(_,T);F.enter().append("g").classed(y.cn.axisBrush,!0),function(L,P){var j=L.selectAll(".background").data(_);j.enter().append("rect").classed("background",!0).call(s).call(d).style("pointer-events","auto").attr("transform",o(0,y.verticalPadding)),j.call(M).attr("height",function(X){return X.height-y.verticalPadding});var U=L.selectAll(".highlight-shadow").data(_);U.enter().append("line").classed("highlight-shadow",!0).attr("x",-y.bar.width/2).attr("stroke-width",y.bar.width+y.bar.strokeWidth).attr("stroke",P).attr("opacity",y.bar.strokeOpacity).attr("stroke-linecap","butt"),U.attr("y1",function(X){return X.height}).call(m);var $=L.selectAll(".highlight").data(_);$.enter().append("line").classed("highlight",!0).attr("x",-y.bar.width/2).attr("stroke-width",y.bar.width-y.bar.strokeWidth).attr("stroke",y.bar.fillColor).attr("opacity",y.bar.fillOpacity).attr("stroke-linecap","butt"),$.attr("y1",function(X){return X.height}).call(m)}(F,N)},cleanRanges:function(I,N){if(Array.isArray(I[0])?(I=I.map(function(L){return L.sort(e)}),I=N.multiselect?O(I.sort(S)):[I[0]]):I=[I.sort(e)],N.tickvals){var F=N.tickvals.slice().sort(e);if(!(I=I.map(function(L){var P=[h(0,F,L[0],[]),h(1,F,L[1],[])];if(P[1]>P[0])return P}).filter(function(L){return L})).length)return}return I.length>1?I:I[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":893,"@plotly/d3":58}],890:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:x("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":891,"./calc":892,"./defaults":894}],891:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../plots/get_data").getModuleCalcData,T=x("./plot"),_=x("../../constants/xmlns_namespaces");le.name="parcoords",le.plot=function(e){var o=b(e.calcdata,"parcoords")[0];o.length&&T(e,o)},le.clean=function(e,o,a,l){var i=l._has&&l._has("parcoords"),v=o._has&&o._has("parcoords");i&&!v&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())},le.toSVG=function(e){var o=e._fullLayout._glimages,a=y.select(e).selectAll(".svg-container");a.filter(function(l,i){return i===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");o.append("svg:image").attr({xmlns:_.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){y.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":900,"@plotly/d3":58}],892:[function(x,ue,le){"use strict";var y=x("../../lib").isArrayOrTypedArray,b=x("../../components/colorscale"),T=x("../../lib/gup").wrap;ue.exports=function(_,e){var o,a;return b.hasColorscale(e,"line")&&y(e.line.color)?(o=e.line.color,a=b.extractOpts(e.line).colorscale,b.calc(_,e,{vals:o,containerStr:"line",cLetter:"c"})):(o=function(l){for(var i=new Array(l),v=0;v<l;v++)i[v]=.5;return i}(e._length),a=[[0,e.line.color],[1,e.line.color]]),T({lineColor:o,cscale:a})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],893:[function(x,ue,le){"use strict";ue.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],894:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/colorscale/helpers").hasColorscale,T=x("../../components/colorscale/defaults"),_=x("../../plots/domain").defaults,e=x("../../plots/array_container_defaults"),o=x("../../plots/cartesian/axes"),a=x("./attributes"),l=x("./axisbrush"),i=x("./constants").maxDimensionCount,v=x("./merge_length");function h(s,d,p,f){function g(E,M){return y.coerce(s,d,a.dimensions,E,M)}var m=g("values"),u=g("visible");if(m&&m.length||(u=d.visible=!1),u){g("label"),g("tickvals"),g("ticktext"),g("tickformat");var w=g("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:w},o.setConvert(d._ax,f.layout),g("multiselect");var c=g("constraintrange");c&&(d.constraintrange=l.cleanRanges(c,d))}}ue.exports=function(s,d,p,f){function g(E,M){return y.coerce(s,d,a,E,M)}var m=s.dimensions;Array.isArray(m)&&m.length>i&&(y.log("parcoords traces support up to "+i+" dimensions at the moment"),m.splice(i));var u=e(s,d,{name:"dimensions",layout:f,handleItemDefaults:h}),w=function(E,M,S,C,O){var I=O("line.color",S);if(b(E,"line")&&y.isArrayOrTypedArray(I)){if(I.length)return O("line.colorscale"),T(E,M,C,O,{prefix:"line.",cLetter:"c"}),I.length;M.line.color=S}return 1/0}(s,d,p,f,g);_(d,f,g),Array.isArray(u)&&u.length||(d.visible=!1),v(d,u,"values",w);var c={family:f.font.family,size:Math.round(f.font.size/1.2),color:f.font.color};y.coerceFont(g,"labelfont",c),y.coerceFont(g,"tickfont",c),y.coerceFont(g,"rangefont",c),g("labelangle"),g("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":893,"./merge_length":898}],895:[function(x,ue,le){"use strict";var y=x("../../lib").isTypedArray;le.convertTypedArray=function(b){return y(b)?Array.prototype.slice.call(b):b},le.isOrdinal=function(b){return!!b.tickvals},le.isVisible=function(b){return b.visible||!("visible"in b)}},{"../../lib":503}],896:[function(x,ue,le){"use strict";var y=x("./base_index");y.plot=x("./plot"),ue.exports=y},{"./base_index":890,"./plot":900}],897:[function(x,ue,le){"use strict";var y=x("glslify"),b=y(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),T=y(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),_=x("./constants").maxDimensionCount,e=x("../../lib"),o=new Uint8Array(4),a=new Uint8Array(4),l={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(u,w,c,E,M){var S=u._gl;S.enable(S.SCISSOR_TEST),S.scissor(w,c,E,M),u.clear({color:[0,0,0,0],depth:1})}function v(u,w,c,E,M,S){var C=S.key;c.drawCompleted||(u.read({x:0,y:0,width:1,height:1,data:o}),c.drawCompleted=!0),function O(I){var N=Math.min(E,M-I*E);0===I&&(window.cancelAnimationFrame(c.currentRafs[C]),delete c.currentRafs[C],i(u,S.scissorX,S.scissorY,S.scissorWidth,S.viewBoxSize[1])),c.clearOnly||(S.count=2*N,S.offset=2*I*E,w(S),I*E+N<M&&(c.currentRafs[C]=window.requestAnimationFrame(function(){O(I+1)})),c.drawCompleted=!1)}(0)}function h(u,w){for(var c=new Array(256),E=0;E<256;E++)c[E]=u(E/255).concat(w);return c}function s(u,w){return(u>>>8*w)%256/255}function d(u,w,c){for(var E=new Array(8*w),M=0,S=0;S<w;S++)for(var C=0;C<2;C++)for(var O=0;O<4;O++){var I=4*u+O,N=c[64*S+I];63===I&&0===C&&(N*=-1),E[M++]=N}return E}function p(u){var w="0"+u;return w.substr(w.length-2)}function f(u){return u<_?"p"+p(u+1)+"_"+p(u+4):"colors"}function g(u,w,c,E,M,S,C,O,I,N,F,L,P,j){for(var U=[[],[]],$=0;$<64;$++)U[0][$]=$===M?1:0,U[1][$]=$===S?1:0;var X=u.lines.canvasOverdrag*j,te=u.domain,ae=u.canvasWidth*j,J=u.canvasHeight*j,ee=u.pad.l*j,se=u.pad.b*j,G=u.layoutHeight*j,H=u.layoutWidth*j,Y=u.deselectedLines.color;return e.extendFlat({key:F,resolution:[ae,J],viewBoxPos:[(C*=j)+X,O*=j],viewBoxSize:[I*=j,N*=j],i0:M,i1:S,dim0A:U[0].slice(0,16),dim0B:U[0].slice(16,32),dim0C:U[0].slice(32,48),dim0D:U[0].slice(48,64),dim1A:U[1].slice(0,16),dim1B:U[1].slice(16,32),dim1C:U[1].slice(32,48),dim1D:U[1].slice(48,64),drwLayer:L,contextColor:[Y[0]/255,Y[1]/255,Y[2]/255,Y[3]<1?Y[3]:Math.max(1/255,Math.pow(1/u.lines.color.length,1/3))],scissorX:(E===w?0:C+X)+(ee-X)+H*te.x[0],scissorWidth:(E===c?ae-C+X:I+.5)+(E===w?C+X:0),scissorY:O+se+G*te.y[0],scissorHeight:N,viewportX:ee-X+H*te.x[0],viewportY:se+G*te.y[0],viewportWidth:ae,viewportHeight:J},P)}function m(u){var w=Math.max(0,Math.floor(2047*u[0]),0),c=Math.min(2047,Math.ceil(2047*u[1]),2047);return[Math.min(w,c),Math.max(w,c)]}ue.exports=function(u,w){var c,M,S,C,O=w.context,I=w.pick,N=w.regl,F=N._gl,L=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),P=Math.max(L[0],Math.min(L[1],w.viewModel.plotGlPixelRatio)),j={currentRafs:{},drawCompleted:!0,clearOnly:!1},U=function(J){for(var ee={},se=0;se<=_;se+=4)ee[f(se)]=J.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return ee}(N),$=N.texture(l),X=[];ae(w);var te=N({profile:!1,blend:{enable:O,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!O,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:N.prop("scissorX"),y:N.prop("scissorY"),width:N.prop("scissorWidth"),height:N.prop("scissorHeight")}},viewport:{x:N.prop("viewportX"),y:N.prop("viewportY"),width:N.prop("viewportWidth"),height:N.prop("viewportHeight")},dither:!1,vert:b,frag:T,primitive:"lines",lineWidth:P,attributes:U,uniforms:{resolution:N.prop("resolution"),viewBoxPos:N.prop("viewBoxPos"),viewBoxSize:N.prop("viewBoxSize"),dim0A:N.prop("dim0A"),dim1A:N.prop("dim1A"),dim0B:N.prop("dim0B"),dim1B:N.prop("dim1B"),dim0C:N.prop("dim0C"),dim1C:N.prop("dim1C"),dim0D:N.prop("dim0D"),dim1D:N.prop("dim1D"),loA:N.prop("loA"),hiA:N.prop("hiA"),loB:N.prop("loB"),hiB:N.prop("hiB"),loC:N.prop("loC"),hiC:N.prop("hiC"),loD:N.prop("loD"),hiD:N.prop("hiD"),palette:$,contextColor:N.prop("contextColor"),maskTexture:N.prop("maskTexture"),drwLayer:N.prop("drwLayer"),maskHeight:N.prop("maskHeight")},offset:N.prop("offset"),count:N.prop("count")});function ae(J){c=J.model,M=J.viewModel.dimensions.slice(),S=M[0]?M[0].values.length:0;var ee=c.lines,se=I?ee.color.map(function(H,Y){return Y/ee.color.length}):ee.color,G=function(H,Y,oe){for(var ne=new Array(H*(_+4)),re=0,ce=0;ce<H;ce++){for(var fe=0;fe<_;fe++)ne[re++]=fe<Y.length?Y[fe].paddedUnitValues[ce]:.5;ne[re++]=s(ce,2),ne[re++]=s(ce,1),ne[re++]=s(ce,0),ne[re++]=Math.max(1e-6,Math.min(.999999,oe[ce]))}return ne}(S,M,se);(function(H,Y,oe){for(var W=0;W<=_;W+=4)H[f(W)](d(W/4,Y,oe))})(U,S,G),O||I||($=N.texture(e.extendFlat({data:h(c.unitToColor,255)},l)))}return{render:function(J,ee,se){var G,H,Y,oe=J.length,W=1/0,ne=-1/0;for(G=0;G<oe;G++)J[G].dim0.canvasX<W&&(W=J[G].dim0.canvasX,H=G),J[G].dim1.canvasX>ne&&(ne=J[G].dim1.canvasX,Y=G);0===oe&&i(N,0,0,c.canvasWidth,c.canvasHeight);var re=function(Re){var Ve,_e,Ae,Fe=[[],[]];for(Ae=0;Ae<64;Ae++){var Pe=!Re&&Ae<M.length?M[Ae].brush.filter.getBounds():[-1/0,1/0];Fe[0][Ae]=Pe[0],Fe[1][Ae]=Pe[1]}var Be=new Array(16384);for(Ve=0;Ve<16384;Ve++)Be[Ve]=255;if(!Re)for(Ve=0;Ve<M.length;Ve++){var qe=Ve%8,We=(Ve-qe)/8,Je=Math.pow(2,qe),ut=M[Ve].brush.filter.get();if(!(ut.length<2)){var Ge=m(ut[0])[1];for(_e=1;_e<ut.length;_e++){var Ke=m(ut[_e]);for(Ae=Ge+1;Ae<Ke[0];Ae++)Be[8*Ae+We]&=~Je;Ge=Math.max(Ge,Ke[1])}}}var nt={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Be};return C?C(nt):C=N.texture(nt),{maskTexture:C,maskHeight:2048,loA:Fe[0].slice(0,16),loB:Fe[0].slice(16,32),loC:Fe[0].slice(32,48),loD:Fe[0].slice(48,64),hiA:Fe[1].slice(0,16),hiB:Fe[1].slice(16,32),hiC:Fe[1].slice(32,48),hiD:Fe[1].slice(48,64)}}(O);for(G=0;G<oe;G++){var ce=J[G],fe=ce.dim0.crossfilterDimensionIndex,me=ce.dim1.crossfilterDimensionIndex,pe=ce.canvasX,we=ce.canvasY,ye=pe+ce.panelSizeX,Te=ce.plotGlPixelRatio;if(ee||!X[fe]||X[fe][0]!==pe||X[fe][1]!==ye){X[fe]=[pe,ye];var Le=g(c,H,Y,G,fe,me,pe,we,ce.panelSizeX,ce.panelSizeY,ce.dim0.crossfilterDimensionIndex,O?0:I?2:1,re,Te);j.clearOnly=se,v(N,te,j,ee?c.lines.blockLineCount:S,S,Le)}}},readPixel:function(J,ee){return N.read({x:J,y:ee,width:1,height:1,data:a}),a},readPixels:function(J,ee,se,G){var H=new Uint8Array(4*se*G);return N.read({x:J,y:ee,width:se,height:G,data:H}),H},destroy:function(){for(var J in u.style["pointer-events"]="none",$.destroy(),C&&C.destroy(),U)U[J].destroy()},update:ae}}},{"../../lib":503,"./constants":893,glslify:227}],898:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_){var e,o;for(_||(_=1/0),e=0;e<b.length;e++)(o=b[e]).visible&&(_=Math.min(_,o[T].length));for(_===1/0&&(_=0),y._length=_,e=0;e<b.length;e++)(o=b[e]).visible&&(o._length=_);return _}},{}],899:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=b.numberFormat,_=x("color-rgba"),e=x("../../plots/cartesian/axes"),o=b.strRotate,a=b.strTranslate,l=x("../../lib/svg_text_utils"),i=x("../../components/drawing"),v=x("../../components/colorscale"),h=x("../../lib/gup"),s=h.keyFun,d=h.repeat,p=h.unwrap,f=x("./helpers"),g=x("./constants"),m=x("./axisbrush"),u=x("./lines");function w(X,te,ae){return b.aggNums(X,null,te,ae)}function c(X,te){return M(w(Math.min,X,te),w(Math.max,X,te))}function E(X){var te=X.range;return te?M(te[0],te[1]):c(X.values,X._length)}function M(X,te){return!isNaN(X)&&isFinite(X)||(X=0),!isNaN(te)&&isFinite(te)||(te=0),X===te&&(0===X?(X-=1,te+=1):(X*=.9,te*=1.1)),[X,te]}function S(X,te,ae,J,ee){var se,G,H=E(ae);return J?y.scale.ordinal().domain(J.map((se=T(ae.tickformat),G=ee,G?function(Y,oe){var W=G[oe];return null==W?se(Y):W}:se))).range(J.map(function(Y){return X-te+(Y-H[0])/(H[1]-H[0])*(2*te-X)})):y.scale.linear().domain(H).range([X-te,te])}function C(X){if(X.tickvals){var te=E(X);return y.scale.ordinal().domain(X.tickvals).range(X.tickvals.map(function(ae){return(ae-te[0])/(te[1]-te[0])}))}}function O(X){var te=X.map(function(ee){return ee[0]}),ae=X.map(function(ee){var se=_(ee[1]);return y.rgb("rgb("+se[0]+","+se[1]+","+se[2]+")")}),J="rgb".split("").map(function(ee){return y.scale.linear().clamp(!0).domain(te).range(ae.map((se=ee,function(G){return G[se]})));var se});return function(ee){return J.map(function(se){return se(ee)})}}function I(X){return X.dimensions.some(function(te){return te.brush.filterSpecified})}function N(X,te,ae){var J=p(te),ee=J.trace,se=f.convertTypedArray(J.lineColor),G=ee.line,H={color:_(g.deselectedLineColor)},Y=v.extractOpts(G),oe=Y.reversescale?v.flipScale(J.cscale):J.cscale,W=ee.domain,ne=ee.dimensions,re=X.width,ce=ee.labelangle,fe=ee.labelside,me=ee.labelfont,pe=ee.tickfont,we=ee.rangefont,ye=b.extendDeepNoArrays({},G,{color:se.map(y.scale.linear().domain(E({values:se,range:[Y.min,Y.max],_length:ee._length}))),blockLineCount:g.blockLineCount,canvasOverdrag:g.overdrag*g.canvasPixelRatio}),Te=Math.floor(re*(W.x[1]-W.x[0])),Le=Math.floor(X.height*(W.y[1]-W.y[0])),Oe=X.margin||{l:80,r:80,t:100,b:80},Re=Te,Ve=Le;return{key:ae,colCount:ne.filter(f.isVisible).length,dimensions:ne,tickDistance:g.tickDistance,unitToColor:O(oe),lines:ye,deselectedLines:H,labelAngle:ce,labelSide:fe,labelFont:me,tickFont:pe,rangeFont:we,layoutWidth:re,layoutHeight:X.height,domain:W,translateX:W.x[0]*re,translateY:X.height-W.y[1]*X.height,pad:Oe,canvasWidth:Re*g.canvasPixelRatio+2*ye.canvasOverdrag,canvasHeight:Ve*g.canvasPixelRatio,width:Re,height:Ve,canvasPixelRatio:g.canvasPixelRatio}}function F(X,te,ae){var re,ce,J=ae.width,ee=ae.height,se=ae.dimensions,G=ae.canvasPixelRatio,H=function(re){return J*re/Math.max(1,ae.colCount-1)},Y=g.verticalPadding/ee,oe=(re=ee,ce=g.verticalPadding,y.scale.linear().range([ce,re-ce])),W={key:ae.key,xScale:H,model:ae,inBrushDrag:!1},ne={};return W.dimensions=se.filter(f.isVisible).map(function(re,ce){var Be,qe,fe=(Be=re,qe=Y,y.scale.linear().domain(E(Be)).range([qe,1-qe])),me=ne[re.label];ne[re.label]=(me||0)+1;var pe=re.label+(me?"__"+me:""),we=re.constraintrange,ye=we&&we.length;ye&&!Array.isArray(we[0])&&(we=[we]);var Te=ye?we.map(function(Be){return Be.map(fe)}):[[-1/0,1/0]],Le=re.values;Le.length>re._length&&(Le=Le.slice(0,re._length));var Oe,Re=re.tickvals;function Ve(Be,qe){return{val:Be,text:Oe[qe]}}function _e(Be,qe){return Be.val-qe.val}if(Array.isArray(Re)&&Re.length){Oe=re.ticktext,Array.isArray(Oe)&&Oe.length?Oe.length>Re.length?Oe=Oe.slice(0,Re.length):Re.length>Oe.length&&(Re=Re.slice(0,Oe.length)):Oe=Re.map(T(re.tickformat));for(var Ae=1;Ae<Re.length;Ae++)if(Re[Ae]<Re[Ae-1]){for(var Fe=Re.map(Ve).sort(_e),Pe=0;Pe<Re.length;Pe++)Re[Pe]=Fe[Pe].val,Oe[Pe]=Fe[Pe].text;break}}else Re=void 0;return Le=f.convertTypedArray(Le),{key:pe,label:re.label,tickFormat:re.tickformat,tickvals:Re,ticktext:Oe,ordinal:f.isOrdinal(re),multiselect:re.multiselect,xIndex:ce,crossfilterDimensionIndex:ce,visibleIndex:re._index,height:ee,values:Le,paddedUnitValues:Le.map(fe),unitTickvals:Re&&Re.map(fe),xScale:H,x:H(ce),canvasX:H(ce)*G,unitToPaddedPx:oe,domainScale:S(ee,g.verticalPadding,re,Re,Oe),ordinalScale:C(re),parent:W,model:ae,brush:m.makeBrush(X,ye,Te,function(){X.linePickActive(!1)},function(){var Be=W;Be.focusLayer&&Be.focusLayer.render(Be.panels,!0);var qe=I(Be);!X.contextShown()&&qe?(Be.contextLayer&&Be.contextLayer.render(Be.panels,!0),X.contextShown(!0)):X.contextShown()&&!qe&&(Be.contextLayer&&Be.contextLayer.render(Be.panels,!0,!0),X.contextShown(!1))},function(Be){if(W.focusLayer.render(W.panels,!0),W.pickLayer&&W.pickLayer.render(W.panels,!0),X.linePickActive(!0),te&&te.filterChanged){var qe=fe.invert,We=Be.map(function(Je){return Je.map(qe).sort(b.sorterAsc)}).sort(function(Je,ut){return Je[0]-ut[0]});te.filterChanged(W.key,re._index,We)}})}}),W}function L(X){X.classed(g.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function P(X,te){var J=X*Math.PI/180;return{dir:"top"===te?1:-1,dx:Math.sin(J),dy:Math.cos(J),degrees:X}}function j(X,te,ae){for(var J=te.panels||(te.panels=[]),ee=X.data(),se=0;se<ee.length-1;se++){var G=J[se]||(J[se]={}),H=ee[se],Y=ee[se+1];G.dim0=H,G.dim1=Y,G.canvasX=H.canvasX,G.panelSizeX=Y.canvasX-H.canvasX,G.panelSizeY=te.model.canvasHeight,G.y=0,G.canvasY=0,G.plotGlPixelRatio=ae}}function U(X,te){return e.tickText(X._ax,te,!1).text}function $(X,te){if(X.ordinal)return"";var ae=X.domainScale.domain();return U(X.model.dimensions[X.visibleIndex],ae[te?ae.length-1:0])}ue.exports=function(X,te,ae,J){var ee=X._fullLayout,se=ee._toppaper,G=ee._glcontainer,H=X._context.plotGlPixelRatio,Y=X._fullLayout.paper_bgcolor;!function(Pe){for(var Be=0;Be<Pe.length;Be++)for(var qe=0;qe<Pe[Be].length;qe++)for(var We=Pe[Be][qe].trace,Je=We.dimensions,ut=0;ut<Je.length;ut++){var Ge=Je[ut].values,Ke=Je[ut]._ax;Ke&&(Ke.range=Ke.range?M(Ke.range[0],Ke.range[1]):c(Ge,We._length),Ke.dtick||(Ke.dtick=.01*(Math.abs(Ke.range[1]-Ke.range[0])||1)),Ke.tickformat=Je[ut].tickformat,e.calcTicks(Ke),Ke.cleanRange())}}(te);var oe,W,ne=(oe=!0,W=!1,{linePickActive:function(Pe){return arguments.length?oe=!!Pe:oe},contextShown:function(Pe){return arguments.length?W=!!Pe:W}}),re=te.filter(function(Pe){return p(Pe).trace.visible}).map(N.bind(0,ae)).map(F.bind(0,ne,J));G.each(function(Pe,Be){return b.extendFlat(Pe,re[Be])});var ce=G.selectAll(".gl-canvas").each(function(Pe){Pe.viewModel=re[0],Pe.viewModel.plotGlPixelRatio=H,Pe.viewModel.paperColor=Y,Pe.model=Pe.viewModel?Pe.viewModel.model:null}),fe=null;ce.filter(function(Pe){return Pe.pick}).style("pointer-events","auto").on("mousemove",function(Pe){if(ne.linePickActive()&&Pe.lineLayer&&J&&J.hover){var Be=y.event,qe=this.width,We=this.height,Je=y.mouse(this),ut=Je[0],Ge=Je[1];if(ut<0||Ge<0||ut>=qe||Ge>=We)return;var Ke=Pe.lineLayer.readPixel(ut,We-1-Ge),nt=0!==Ke[3],it=nt?Ke[2]+256*(Ke[1]+256*Ke[0]):null,ht={x:ut,y:Ge,clientX:Be.clientX,clientY:Be.clientY,dataIndex:Pe.model.key,curveNumber:it};it!==fe&&(nt?J.hover(ht):J.unhover&&J.unhover(ht),fe=it)}}),ce.style("opacity",function(Pe){return Pe.pick?0:1}),se.style("background","rgba(255, 255, 255, 0)");var me=se.selectAll("."+g.cn.parcoords).data(re,s);me.exit().remove(),me.enter().append("g").classed(g.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),me.attr("transform",function(Pe){return a(Pe.model.translateX,Pe.model.translateY)});var pe=me.selectAll("."+g.cn.parcoordsControlView).data(d,s);pe.enter().append("g").classed(g.cn.parcoordsControlView,!0),pe.attr("transform",function(Pe){return a(Pe.model.pad.l,Pe.model.pad.t)});var we=pe.selectAll("."+g.cn.yAxis).data(function(Pe){return Pe.dimensions},s);we.enter().append("g").classed(g.cn.yAxis,!0),pe.each(function(Pe){j(we,Pe,H)}),ce.each(function(Pe){Pe.viewModel&&(!Pe.lineLayer||J?Pe.lineLayer=u(this,Pe):Pe.lineLayer.update(Pe),(Pe.key||0===Pe.key)&&(Pe.viewModel[Pe.key]=Pe.lineLayer),Pe.lineLayer.render(Pe.viewModel.panels,!Pe.context||J))}),we.attr("transform",function(Pe){return a(Pe.xScale(Pe.xIndex),0)}),we.call(y.behavior.drag().origin(function(Pe){return Pe}).on("drag",function(Pe){var Be=Pe.parent;ne.linePickActive(!1),Pe.x=Math.max(-g.overdrag,Math.min(Pe.model.width+g.overdrag,y.event.x)),Pe.canvasX=Pe.x*Pe.model.canvasPixelRatio,we.sort(function(qe,We){return qe.x-We.x}).each(function(qe,We){qe.xIndex=We,qe.x=Pe===qe?qe.x:qe.xScale(qe.xIndex),qe.canvasX=qe.x*qe.model.canvasPixelRatio}),j(we,Be,H),we.filter(function(qe){return 0!==Math.abs(Pe.xIndex-qe.xIndex)}).attr("transform",function(qe){return a(qe.xScale(qe.xIndex),0)}),y.select(this).attr("transform",a(Pe.x,0)),we.each(function(qe,We,Je){Je===Pe.parent.key&&(Be.dimensions[We]=qe)}),Be.contextLayer&&Be.contextLayer.render(Be.panels,!1,!I(Be)),Be.focusLayer.render&&Be.focusLayer.render(Be.panels)}).on("dragend",function(Pe){var Be=Pe.parent;Pe.x=Pe.xScale(Pe.xIndex),Pe.canvasX=Pe.x*Pe.model.canvasPixelRatio,j(we,Be,H),y.select(this).attr("transform",function(qe){return a(qe.x,0)}),Be.contextLayer&&Be.contextLayer.render(Be.panels,!1,!I(Be)),Be.focusLayer&&Be.focusLayer.render(Be.panels),Be.pickLayer&&Be.pickLayer.render(Be.panels,!0),ne.linePickActive(!0),J&&J.axesMoved&&J.axesMoved(Be.key,Be.dimensions.map(function(qe){return qe.crossfilterDimensionIndex}))})),we.exit().remove();var ye=we.selectAll("."+g.cn.axisOverlays).data(d,s);ye.enter().append("g").classed(g.cn.axisOverlays,!0),ye.selectAll("."+g.cn.axis).remove();var Te=ye.selectAll("."+g.cn.axis).data(d,s);Te.enter().append("g").classed(g.cn.axis,!0),Te.each(function(Pe){var Be=Pe.model.height/Pe.model.tickDistance,qe=Pe.domainScale,We=qe.domain();y.select(this).call(y.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Be,Pe.tickFormat).tickValues(Pe.ordinal?We:null).tickFormat(function(Je){return f.isOrdinal(Pe)?Je:U(Pe.model.dimensions[Pe.visibleIndex],Je)}).scale(qe)),i.font(Te.selectAll("text"),Pe.model.tickFont)}),Te.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Te.selectAll("text").style("text-shadow",l.makeTextShadow(Y)).style("cursor","default");var Le=ye.selectAll("."+g.cn.axisHeading).data(d,s);Le.enter().append("g").classed(g.cn.axisHeading,!0);var Oe=Le.selectAll("."+g.cn.axisTitle).data(d,s);Oe.enter().append("text").classed(g.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Oe.text(function(Pe){return Pe.label}).each(function(Pe){var Be=y.select(this);i.font(Be,Pe.model.labelFont),l.convertToTspans(Be,X)}).attr("transform",function(Pe){var Be=P(Pe.model.labelAngle,Pe.model.labelSide),qe=g.axisTitleOffset;return(Be.dir>0?"":a(0,2*qe+Pe.model.height))+o(Be.degrees)+a(-qe*Be.dx,-qe*Be.dy)}).attr("text-anchor",function(Pe){var Be=P(Pe.model.labelAngle,Pe.model.labelSide);return 2*Math.abs(Be.dx)>Math.abs(Be.dy)?Be.dir*Be.dx<0?"start":"end":"middle"});var Re=ye.selectAll("."+g.cn.axisExtent).data(d,s);Re.enter().append("g").classed(g.cn.axisExtent,!0);var Ve=Re.selectAll("."+g.cn.axisExtentTop).data(d,s);Ve.enter().append("g").classed(g.cn.axisExtentTop,!0),Ve.attr("transform",a(0,-g.axisExtentOffset));var _e=Ve.selectAll("."+g.cn.axisExtentTopText).data(d,s);_e.enter().append("text").classed(g.cn.axisExtentTopText,!0).call(L),_e.text(function(Pe){return $(Pe,!0)}).each(function(Pe){i.font(y.select(this),Pe.model.rangeFont)});var Ae=Re.selectAll("."+g.cn.axisExtentBottom).data(d,s);Ae.enter().append("g").classed(g.cn.axisExtentBottom,!0),Ae.attr("transform",function(Pe){return a(0,Pe.model.height+g.axisExtentOffset)});var Fe=Ae.selectAll("."+g.cn.axisExtentBottomText).data(d,s);Fe.enter().append("text").classed(g.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(L),Fe.text(function(Pe){return $(Pe,!1)}).each(function(Pe){i.font(y.select(this),Pe.model.rangeFont)}),m.ensureAxisBrush(ye,Y)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":893,"./helpers":895,"./lines":897,"@plotly/d3":58,"color-rgba":91}],900:[function(x,ue,le){"use strict";var y=x("./parcoords"),b=x("../../lib/prepare_regl"),T=x("./helpers").isVisible,_={};function e(o,a,l){var i=a.indexOf(l),v=o.indexOf(i);return-1===v&&(v+=a.length),v}(ue.exports=function(o,a){var l=o._fullLayout;if(b(o,[],_)){var i={},v={},h={},s={},d=l._size;a.forEach(function(p,f){var g=p[0].trace;h[f]=g.index;var m=s[f]=g._fullInput.index;i[f]=o.data[m].dimensions,v[f]=o.data[m].dimensions.slice()}),y(o,a,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{filterChanged:function(p,f,g){var m=v[p][f],u=g.map(function(C){return C.slice()}),w="dimensions["+f+"].constraintrange",c=l._tracePreGUI[o._fullData[h[p]]._fullInput.uid];void 0===c[w]&&(c[w]=m.constraintrange||null);var M=o._fullData[h[p]].dimensions[f];u.length?(1===u.length&&(u=u[0]),m.constraintrange=u,M.constraintrange=u.slice(),u=[u]):(delete m.constraintrange,delete M.constraintrange,u=null);var S={};S[w]=u,o.emit("plotly_restyle",[S,[s[p]]])},hover:function(p){o.emit("plotly_hover",p)},unhover:function(p){o.emit("plotly_unhover",p)},axesMoved:function(p,f){var m,u,g=(m=f,u=v[p].filter(T),function(w,c){return e(m,u,w)-e(m,u,c)});i[p].sort(g),v[p].filter(function(m){return!T(m)}).sort(function(m){return v[p].indexOf(m)}).forEach(function(m){i[p].splice(i[p].indexOf(m),1),i[p].splice(v[p].indexOf(m),0,m)}),o.emit("plotly_restyle",[{dimensions:[i[p]]},[s[p]]])}})}}).reglPrecompiled=_},{"../../lib/prepare_regl":516,"./helpers":895,"./parcoords":899}],901:[function(x,ue,le){"use strict";var y=x("../../plots/attributes"),b=x("../../plots/domain").attributes,T=x("../../plots/font_attributes"),_=x("../../components/color/attributes"),e=x("../../plots/template_attributes").hovertemplateAttrs,o=x("../../plots/template_attributes").texttemplateAttrs,a=x("../../lib/extend").extendFlat,l=T({editType:"plot",arrayOk:!0,colorEditType:"plot"});ue.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},y.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:o({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},l,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},l,{}),outsidetextfont:a({},l,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},l,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:b({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},l,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],902:[function(x,ue,le){"use strict";var y=x("../../plots/plots");le.name="pie",le.plot=function(b,T,_,e){y.plotBasePlot(le.name,b,T,_,e)},le.clean=function(b,T,_,e){y.cleanBasePlot(le.name,b,T,_,e)}},{"../../plots/plots":619}],903:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("tinycolor2"),T=x("../../components/color"),_={};function e(a){return function(l,i){return!!l&&!!(l=b(l)).isValid()&&(l=T.addOpacity(l,l.getAlpha()),a[i]||(a[i]=l),l)}}function o(a,l){var i,v=JSON.stringify(a),h=l[v];if(!h){for(h=a.slice(),i=0;i<a.length;i++)h.push(b(a[i]).lighten(20).toHexString());for(i=0;i<a.length;i++)h.push(b(a[i]).darken(20).toHexString());l[v]=h}return h}ue.exports={calc:function(a,l){var i,v,h=[],s=a._fullLayout,d=s.hiddenlabels||[],p=l.labels,f=l.marker.colors||[],g=l.values,m=l._length,u=l._hasValues&&m;if(l.dlabel)for(p=new Array(m),i=0;i<m;i++)p[i]=String(l.label0+i*l.dlabel);var w={},c=e(s["_"+l.type+"colormap"]),E=0,M=!1;for(i=0;i<m;i++){var S,C,O;if(u){if(!y(S=g[i]))continue;S=+S}else S=1;void 0!==(C=p[i])&&""!==C||(C=i);var I=w[C=String(C)];void 0===I?(w[C]=h.length,(O=-1!==d.indexOf(C))||(E+=S),h.push({v:S,label:C,color:c(f[i],C),i,pts:[i],hidden:O})):(M=!0,(v=h[I]).v+=S,v.pts.push(i),v.hidden||(E+=S),!1===v.color&&f[i]&&(v.color=c(f[i],C)))}return h=h.filter(function(N){return N.v>=0}),("funnelarea"===l.type?M:l.sort)&&h.sort(function(N,F){return F.v-N.v}),h[0]&&(h[0].vTotal=E),h},crossTraceCalc:function(a,l){var i=(l||{}).type;i||(i="pie");var v=a._fullLayout,h=a.calcdata,s=v[i+"colorway"],d=v["_"+i+"colormap"];v["extend"+i+"colors"]&&(s=o(s,_));for(var p=0,f=0;f<h.length;f++){var g=h[f];if(g[0].trace.type===i)for(var m=0;m<g.length;m++){var u=g[m];!1===u.color&&(d[u.label]?u.color=d[u.label]:(d[u.label]=u.color=s[p%s.length],p++))}}},makePullColorFn:e,generateExtendedColors:o}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],904:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("./attributes"),_=x("../../plots/domain").defaults,e=x("../bar/defaults").handleText;function o(a,l){var i=Array.isArray(a),v=b.isArrayOrTypedArray(l),h=Math.min(i?a.length:1/0,v?l.length:1/0);if(isFinite(h)||(h=0),h&&v){for(var s,d=0;d<h;d++){var p=l[d];if(y(p)&&p>0){s=!0;break}}s||(h=0)}return{hasLabels:i,hasValues:v,len:h}}ue.exports={handleLabelsAndValues:o,supplyDefaults:function(a,l,i,v){function h(c,E){return b.coerce(a,l,T,c,E)}var s=o(h("labels"),h("values")),d=s.len;if(l._hasLabels=s.hasLabels,l._hasValues=s.hasValues,!l._hasLabels&&l._hasValues&&(h("label0"),h("dlabel")),d){l._length=d,h("marker.line.width")&&h("marker.line.color"),h("marker.colors"),h("scalegroup");var p,f=h("text"),g=h("texttemplate");if(g||(p=h("textinfo",Array.isArray(f)?"text+percent":"percent")),h("hovertext"),h("hovertemplate"),g||p&&"none"!==p){var m=h("textposition");e(a,l,v,h,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||"auto"===m||"outside"===m)&&h("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&h("insidetextorientation")}_(l,v,h);var u=h("hole");if(h("title.text")){var w=h("title.position",u?"middle center":"top center");u||"middle center"!==w||(l.title.position="top center"),b.coerceFont(h,"title.font",v.font)}h("sort"),h("direction"),h("rotation"),h("pull")}else l.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":901,"fast-isnumeric":190}],905:[function(x,ue,le){"use strict";var y=x("../../components/fx/helpers").appendArrayMultiPointValues;ue.exports=function(b,T){var _={curveNumber:T.index,pointNumbers:b.pts,data:T._input,fullData:T,label:b.label,color:b.color,value:b.v,percent:b.percent,text:b.text,bbox:b.bbox,v:b.v};return 1===b.pts.length&&(_.pointNumber=_.i=b.pts[0]),y(_,T,b.pts),"funnelarea"===T.type&&(delete _.v,delete _.i),_}},{"../../components/fx/helpers":402}],906:[function(x,ue,le){"use strict";var y=x("../../lib");function b(T){return-1!==T.indexOf("e")?T.replace(/[.]?0+e/,"e"):-1!==T.indexOf(".")?T.replace(/[.]?0+$/,""):T}le.formatPiePercent=function(T,_){var e=b((100*T).toPrecision(3));return y.numSeparate(e,_)+"%"},le.formatPieValue=function(T,_){var e=b(T.toPrecision(10));return y.numSeparate(e,_)},le.getFirstFilled=function(T,_){if(Array.isArray(T))for(var e=0;e<_.length;e++){var o=T[_[e]];if(o||0===o||""===o)return o}},le.castOption=function(T,_){return Array.isArray(T)?le.getFirstFilled(T,_):T||void 0},le.getRotationAngle=function(T){return("auto"===T?0:T)*Math.PI/180}},{"../../lib":503}],907:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,supplyLayoutDefaults:x("./layout_defaults"),layoutAttributes:x("./layout_attributes"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot").plot,style:x("./style"),styleOne:x("./style_one"),moduleType:"trace",name:"pie",basePlotModule:x("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":901,"./base_plot":902,"./calc":903,"./defaults":904,"./layout_attributes":908,"./layout_defaults":909,"./plot":910,"./style":911,"./style_one":912}],908:[function(x,ue,le){"use strict";ue.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],909:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_){function e(o,a){return y.coerce(T,_,b,o,a)}e("hiddenlabels"),e("piecolorway",_.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":908}],910:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../plots/plots"),T=x("../../components/fx"),_=x("../../components/color"),e=x("../../components/drawing"),o=x("../../lib"),a=o.strScale,l=o.strTranslate,i=x("../../lib/svg_text_utils"),v=x("../bar/uniform_text"),h=v.recordMinTextSize,s=v.clearMinTextSize,d=x("../bar/constants").TEXTPAD,p=x("./helpers"),f=x("./event_data"),g=x("../../lib").isValidTextValue;function m(te,ae,J){var ee=J[0],se=ee.cx,G=ee.cy,H=ee.trace,Y="funnelarea"===H.type;"_hasHoverLabel"in H||(H._hasHoverLabel=!1),"_hasHoverEvent"in H||(H._hasHoverEvent=!1),te.on("mouseover",function(oe){var W=ae._fullLayout,ne=ae._fullData[H.index];if(!ae._dragging&&!1!==W.hovermode){var re=ne.hoverinfo;if(Array.isArray(re)&&(re=T.castHoverinfo({hoverinfo:[p.castOption(re,oe.pts)],_module:H._module},W,0)),"all"===re&&(re="label+text+value+percent+name"),ne.hovertemplate||"none"!==re&&"skip"!==re&&re){var ce=oe.rInscribed||0,fe=se+oe.pxmid[0]*(1-ce),me=G+oe.pxmid[1]*(1-ce),pe=W.separators,we=[];if(re&&-1!==re.indexOf("label")&&we.push(oe.label),oe.text=p.castOption(ne.hovertext||ne.text,oe.pts),re&&-1!==re.indexOf("text")){var ye=oe.text;o.isValidTextValue(ye)&&we.push(ye)}oe.value=oe.v,oe.valueLabel=p.formatPieValue(oe.v,pe),re&&-1!==re.indexOf("value")&&we.push(oe.valueLabel),oe.percent=oe.v/ee.vTotal,oe.percentLabel=p.formatPiePercent(oe.percent,pe),re&&-1!==re.indexOf("percent")&&we.push(oe.percentLabel);var Te=ne.hoverlabel,Le=Te.font,Oe=[];T.loneHover({trace:H,x0:fe-ce*ee.r,x1:fe+ce*ee.r,y:me,_x0:Y?se+oe.TL[0]:fe-ce*ee.r,_x1:Y?se+oe.TR[0]:fe+ce*ee.r,_y0:Y?G+oe.TL[1]:me-ce*ee.r,_y1:Y?G+oe.BL[1]:me+ce*ee.r,text:we.join("<br>"),name:ne.hovertemplate||-1!==re.indexOf("name")?ne.name:void 0,idealAlign:oe.pxmid[0]<0?"left":"right",color:p.castOption(Te.bgcolor,oe.pts)||oe.color,borderColor:p.castOption(Te.bordercolor,oe.pts),fontFamily:p.castOption(Le.family,oe.pts),fontSize:p.castOption(Le.size,oe.pts),fontColor:p.castOption(Le.color,oe.pts),nameLength:p.castOption(Te.namelength,oe.pts),textAlign:p.castOption(Te.align,oe.pts),hovertemplate:p.castOption(ne.hovertemplate,oe.pts),hovertemplateLabels:oe,eventData:[f(oe,ne)]},{container:W._hoverlayer.node(),outerContainer:W._paper.node(),gd:ae,inOut_bbox:Oe}),oe.bbox=Oe[0],H._hasHoverLabel=!0}H._hasHoverEvent=!0,ae.emit("plotly_hover",{points:[f(oe,ne)],event:y.event})}}),te.on("mouseout",function(oe){var W=ae._fullLayout,ne=ae._fullData[H.index],re=y.select(this).datum();H._hasHoverEvent&&(oe.originalEvent=y.event,ae.emit("plotly_unhover",{points:[f(re,ne)],event:y.event}),H._hasHoverEvent=!1),H._hasHoverLabel&&(T.loneUnhover(W._hoverlayer.node()),H._hasHoverLabel=!1)}),te.on("click",function(oe){ae._dragging||!1===ae._fullLayout.hovermode||(ae._hoverdata=[f(oe,ae._fullData[H.index])],T.click(ae,y.event))})}function u(te,ae,J){var ee=p.castOption(te.insidetextfont.color,ae.pts);!ee&&te._input.textfont&&(ee=p.castOption(te._input.textfont.color,ae.pts));var se=p.castOption(te.insidetextfont.family,ae.pts)||p.castOption(te.textfont.family,ae.pts)||J.family,G=p.castOption(te.insidetextfont.size,ae.pts)||p.castOption(te.textfont.size,ae.pts)||J.size;return{color:ee||_.contrast(ae.color),family:se,size:G}}function w(te,ae){for(var J,ee,se=0;se<te.length;se++)if((ee=(J=te[se][0]).trace).title.text){var G=ee.title.text;ee._meta&&(G=o.templateString(G,ee._meta));var H=e.tester.append("text").attr("data-notex",1).text(G).call(e.font,ee.title.font).call(i.convertToTspans,ae),Y=e.bBox(H.node(),!0);J.titleBox={width:Y.width,height:Y.height},H.remove()}}function c(te,ae,J){var ee=J.r||ae.rpx1,se=ae.rInscribed;if(ae.startangle===ae.stopangle)return{rCenter:1-se,scale:0,rotate:0,textPosAngle:0};var G,H=ae.ring,Y=1===H&&Math.abs(ae.startangle-ae.stopangle)===2*Math.PI,oe=ae.halfangle,W=ae.midangle,ne=J.trace.insidetextorientation,re="horizontal"===ne,ce="tangential"===ne,fe="radial"===ne,me="auto"===ne,pe=[];if(!me){var we,ye=function(_e,Ae){if(ut=(qe=ae).stopangle,(Je=qe.startangle)>(We=_e)&&We>ut||Je<We&&We<ut){var Fe=Math.abs(_e-ae.startangle),Pe=Math.abs(_e-ae.stopangle),Be=Fe<Pe?Fe:Pe;(G="tan"===Ae?M(te,ee,H,Be,0):E(te,ee,H,Be,Math.PI/2)).textPosAngle=_e,pe.push(G)}var qe,We,Je,ut};if(re||ce){for(we=4;we>=-4;we-=2)ye(Math.PI*we,"tan");for(we=4;we>=-4;we-=2)ye(Math.PI*(we+1),"tan")}if(re||fe){for(we=4;we>=-4;we-=2)ye(Math.PI*(we+1.5),"rad");for(we=4;we>=-4;we-=2)ye(Math.PI*(we+.5),"rad")}}if(Y||me||re){var Te=Math.sqrt(te.width*te.width+te.height*te.height);if((G={scale:se*ee*2/Te,rCenter:1-se,rotate:0}).textPosAngle=(ae.startangle+ae.stopangle)/2,G.scale>=1)return G;pe.push(G)}(me||fe)&&((G=E(te,ee,H,oe,W)).textPosAngle=(ae.startangle+ae.stopangle)/2,pe.push(G)),(me||ce)&&((G=M(te,ee,H,oe,W)).textPosAngle=(ae.startangle+ae.stopangle)/2,pe.push(G));for(var Le=0,Oe=0,Re=0;Re<pe.length;Re++){var Ve=pe[Re].scale;if(Oe<Ve&&(Oe=Ve,Le=Re),!me&&Oe>=1)break}return pe[Le]}function E(te,ae,J,ee,se){ae=Math.max(0,ae-2*d);var G=te.width/te.height,H=O(G,ee,ae,J);return{scale:2*H/te.height,rCenter:S(G,H/ae),rotate:C(se)}}function M(te,ae,J,ee,se){ae=Math.max(0,ae-2*d);var G=te.height/te.width,H=O(G,ee,ae,J);return{scale:2*H/te.width,rCenter:S(G,H/ae),rotate:C(se+Math.PI/2)}}function S(te,ae){return Math.cos(ae)-te*ae}function C(te){return(180/Math.PI*te+720)%180-90}function O(te,ae,J,ee){var se=te+1/(2*Math.tan(ae));return J*Math.min(1/(Math.sqrt(se*se+.5)+se),ee/(Math.sqrt(te*te+ee/2)+te))}function I(te,ae){return te.v!==ae.vTotal||ae.trace.hole?Math.min(1/(1+1/Math.sin(te.halfangle)),te.ring/2):1}function N(te,ae){var J=ae.pxmid[0],ee=ae.pxmid[1],se=te.width/2,G=te.height/2;return J<0&&(se*=-1),ee<0&&(G*=-1),{scale:1,rCenter:1,rotate:0,x:se+Math.abs(G)*(se>0?1:-1)/2,y:G/(1+J*J/(ee*ee)),outside:!0}}function F(te,ae){var J,ee,se,G=te.trace,H={x:te.cx,y:te.cy},Y={tx:0,ty:0};Y.ty+=G.title.font.size,se=P(G),-1!==G.title.position.indexOf("top")?(H.y-=(1+se)*te.r,Y.ty-=te.titleBox.height):-1!==G.title.position.indexOf("bottom")&&(H.y+=(1+se)*te.r);var W,ne=te.r/(void 0===(W=te.trace.aspectratio)?1:W),re=ae.w*(G.domain.x[1]-G.domain.x[0])/2;return-1!==G.title.position.indexOf("left")?(re+=ne,H.x-=(1+se)*ne,Y.tx+=te.titleBox.width/2):-1!==G.title.position.indexOf("center")?re*=2:-1!==G.title.position.indexOf("right")&&(re+=ne,H.x+=(1+se)*ne,Y.tx-=te.titleBox.width/2),J=re/te.titleBox.width,ee=L(te,ae)/te.titleBox.height,{x:H.x,y:H.y,scale:Math.min(J,ee),tx:Y.tx,ty:Y.ty}}function L(te,ae){var J=te.trace;return Math.min(te.titleBox.height,ae.h*(J.domain.y[1]-J.domain.y[0])/2)}function P(te){var ae,J=te.pull;if(!J)return 0;if(Array.isArray(J))for(J=0,ae=0;ae<te.pull.length;ae++)te.pull[ae]>J&&(J=te.pull[ae]);return J}function j(te,ae){for(var J=[],ee=0;ee<te.length;ee++){var se=te[ee][0],G=se.trace,H=G.domain,Y=ae.w*(H.x[1]-H.x[0]),oe=ae.h*(H.y[1]-H.y[0]);G.title.text&&"middle center"!==G.title.position&&(oe-=L(se,ae));var ne=oe/2;"funnelarea"!==G.type||G.scalegroup||(ne/=G.aspectratio),se.r=Math.min(Y/2,ne)/(1+P(G)),se.cx=ae.l+ae.w*(G.domain.x[1]+G.domain.x[0])/2,se.cy=ae.t+ae.h*(1-G.domain.y[0])-oe/2,G.title.text&&-1!==G.title.position.indexOf("bottom")&&(se.cy-=L(se,ae)),G.scalegroup&&-1===J.indexOf(G.scalegroup)&&J.push(G.scalegroup)}!function(re,ce){for(var fe,me,pe,we=0;we<ce.length;we++){var ye=1/0,Te=ce[we];for(me=0;me<re.length;me++)if((pe=(fe=re[me][0]).trace).scalegroup===Te){var Le;if("pie"===pe.type)Le=fe.r*fe.r;else if("funnelarea"===pe.type){var Oe,Re;pe.aspectratio>1?Re=(Oe=fe.r)/pe.aspectratio:Oe=(Re=fe.r)*pe.aspectratio,Le=(Oe*=(1+pe.baseratio)/2)*Re}ye=Math.min(ye,Le/fe.vTotal)}for(me=0;me<re.length;me++)if((pe=(fe=re[me][0]).trace).scalegroup===Te){var Ve=ye*fe.vTotal;"funnelarea"===pe.type&&(Ve/=(1+pe.baseratio)/2,Ve/=pe.aspectratio),fe.r=Math.sqrt(Ve)}}}(te,J)}function U(te,ae){return[te*Math.sin(ae),-te*Math.cos(ae)]}function $(te,ae,J){var Le,ee=te._fullLayout,se=J.trace,G=se.texttemplate,H=se.textinfo;if(!G&&H&&"none"!==H){var Y,oe=H.split("+"),W=function(Le){return-1!==oe.indexOf(Le)},ne=W("label"),re=W("text"),ce=W("value"),fe=W("percent"),me=ee.separators;if(Y=ne?[ae.label]:[],re){var pe=p.getFirstFilled(se.text,ae.pts);g(pe)&&Y.push(pe)}ce&&Y.push(p.formatPieValue(ae.v,me)),fe&&Y.push(p.formatPiePercent(ae.v/J.vTotal,me)),ae.text=Y.join("<br>")}if(G){var we=o.castOption(se,ae.i,"texttemplate");if(we){var ye={label:(Le=ae).label,value:Le.v,valueLabel:p.formatPieValue(Le.v,ee.separators),percent:Le.v/J.vTotal,percentLabel:p.formatPiePercent(Le.v/J.vTotal,ee.separators),color:Le.color,text:Le.text,customdata:o.castOption(se,Le.i,"customdata")},Te=p.getFirstFilled(se.text,ae.pts);(g(Te)||""===Te)&&(ye.text=Te),ae.text=o.texttemplateString(we,ye,te._fullLayout._d3locale,ye,se._meta||{})}else ae.text=""}}function X(te,ae){var J=te.rotate*Math.PI/180,ee=Math.cos(J),se=Math.sin(J),G=(ae.left+ae.right)/2,H=(ae.top+ae.bottom)/2;te.textX=G*ee-H*se,te.textY=G*se+H*ee,te.noCenter=!0}ue.exports={plot:function(te,ae){var J=te._fullLayout,ee=J._size;s("pie",J),w(ae,te),j(ae,ee);var se=o.makeTraceGroups(J._pielayer,ae,"trace").each(function(G){var H=y.select(this),Y=G[0],oe=Y.trace;(function(W){var ne,re,ce,fe=W[0],me=fe.r,pe=fe.trace,we=p.getRotationAngle(pe.rotation),ye=2*Math.PI/fe.vTotal,Te="px0",Le="px1";if("counterclockwise"===pe.direction){for(ne=0;ne<W.length&&W[ne].hidden;ne++);if(ne===W.length)return;we+=ye*W[ne].v,ye*=-1,Te="px1",Le="px0"}for(ce=U(me,we),ne=0;ne<W.length;ne++)(re=W[ne]).hidden||(re[Te]=ce,re.startangle=we,re.pxmid=U(me,we+=ye*re.v/2),re.midangle=we,ce=U(me,we+=ye*re.v/2),re.stopangle=we,re[Le]=ce,re.largeArc=re.v>fe.vTotal/2?1:0,re.halfangle=Math.PI*Math.min(re.v/fe.vTotal,.5),re.ring=1-pe.hole,re.rInscribed=I(re,fe))})(G),H.attr("stroke-linejoin","round"),H.each(function(){var W=y.select(this).selectAll("g.slice").data(G);W.enter().append("g").classed("slice",!0),W.exit().remove();var ne=[[[],[]],[[],[]]],re=!1;W.each(function(Le,Oe){if(Le.hidden)y.select(this).selectAll("path,g").remove();else{Le.pointNumber=Le.i,Le.curveNumber=oe.index,ne[Le.pxmid[1]<0?0:1][Le.pxmid[0]<0?0:1].push(Le);var Re=Y.cx,Ve=Y.cy,_e=y.select(this),Ae=_e.selectAll("path.surface").data([Le]);if(Ae.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),_e.call(m,te,G),oe.pull){var Fe=+p.castOption(oe.pull,Le.pts)||0;Fe>0&&(Re+=Fe*Le.pxmid[0],Ve+=Fe*Le.pxmid[1])}Le.cxFinal=Re,Le.cyFinal=Ve;var Pe=oe.hole;if(Le.v===Y.vTotal){var Be="M"+(Re+Le.px0[0])+","+(Ve+Le.px0[1])+Ge(Le.px0,Le.pxmid,!0,1)+Ge(Le.pxmid,Le.px0,!0,1)+"Z";Ae.attr("d",Pe?"M"+(Re+Pe*Le.px0[0])+","+(Ve+Pe*Le.px0[1])+Ge(Le.px0,Le.pxmid,!1,Pe)+Ge(Le.pxmid,Le.px0,!1,Pe)+"Z"+Be:Be)}else{var qe=Ge(Le.px0,Le.px1,!0,1);if(Pe){var We=1-Pe;Ae.attr("d","M"+(Re+Pe*Le.px1[0])+","+(Ve+Pe*Le.px1[1])+Ge(Le.px1,Le.px0,!1,Pe)+"l"+We*Le.px0[0]+","+We*Le.px0[1]+qe+"Z")}else Ae.attr("d","M"+Re+","+Ve+"l"+Le.px0[0]+","+Le.px0[1]+qe+"Z")}$(te,Le,Y);var Je=p.castOption(oe.textposition,Le.pts),ut=_e.selectAll("g.slicetext").data(Le.text&&"none"!==Je?[0]:[]);ut.enter().append("g").classed("slicetext",!0),ut.exit().remove(),ut.each(function(){var gt,ft,Bt,Ke=o.ensureSingle(y.select(this),"text","",function(gt){gt.attr("data-notex",1)}),nt=o.ensureUniformFontSize(te,"outside"===Je?(Bt=J.font,{color:p.castOption((gt=oe).outsidetextfont.color,(ft=Le).pts)||p.castOption(gt.textfont.color,ft.pts)||Bt.color,family:p.castOption(gt.outsidetextfont.family,ft.pts)||p.castOption(gt.textfont.family,ft.pts)||Bt.family,size:p.castOption(gt.outsidetextfont.size,ft.pts)||p.castOption(gt.textfont.size,ft.pts)||Bt.size}):u(oe,Le,J.font));Ke.text(Le.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,nt).call(i.convertToTspans,te);var it,ht=e.bBox(Ke.node());if("outside"===Je)it=N(ht,Le);else if(it=c(ht,Le,Y),"auto"===Je&&it.scale<1){var Tt=o.ensureUniformFontSize(te,oe.outsidetextfont);Ke.call(e.font,Tt),it=N(ht=e.bBox(Ke.node()),Le)}var Ct=it.textPosAngle,Vt=void 0===Ct?Le.pxmid:U(Y.r,Ct);if(it.targetX=Re+Vt[0]*it.rCenter+(it.x||0),it.targetY=Ve+Vt[1]*it.rCenter+(it.y||0),X(it,ht),it.outside){var Ft=it.targetY;Le.yLabelMin=Ft-ht.height/2,Le.yLabelMid=Ft,Le.yLabelMax=Ft+ht.height/2,Le.labelExtraX=0,Le.labelExtraY=0,re=!0}it.fontSize=nt.size,h(oe.type,it,J),G[Oe].transform=it,Ke.attr("transform",o.getTextTransform(it))})}function Ge(Ke,nt,it,ht){return"a"+ht*Y.r+","+ht*Y.r+" 0 "+Le.largeArc+(it?" 1 ":" 0 ")+ht*(nt[0]-Ke[0])+","+ht*(nt[1]-Ke[1])}});var Oe,ce=y.select(this).selectAll("g.titletext").data(oe.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var Le,Ve,_e,Oe=o.ensureSingle(y.select(this),"text","",function(Ve){Ve.attr("data-notex",1)}),Re=oe.title.text;oe._meta&&(Re=o.templateString(Re,oe._meta)),Oe.text(Re).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,oe.title.font).call(i.convertToTspans,te),Le="middle center"===oe.title.position?(Ve=Y,_e=Math.sqrt(Ve.titleBox.width*Ve.titleBox.width+Ve.titleBox.height*Ve.titleBox.height),{x:Ve.cx,y:Ve.cy,scale:Ve.trace.hole*Ve.r*2/_e,tx:0,ty:-Ve.titleBox.height/2+Ve.trace.title.font.size}):F(Y,ee),Oe.attr("transform",l(Le.x,Le.y)+a(Math.min(1,Le.scale))+l(Le.tx,Le.ty))}),re&&function(Le,Oe){var Re,Ve,_e,Ae,Fe,Pe,Be,qe,We,Je,ut,Ge,Ke;function nt(Ct,Vt){return Ct.pxmid[1]-Vt.pxmid[1]}function it(Ct,Vt){return Vt.pxmid[1]-Ct.pxmid[1]}function ht(Ct,Vt){Vt||(Vt={});var Ft,gt,ft,Bt,rn=Vt.labelExtraY+(Ve?Vt.yLabelMax:Vt.yLabelMin),un=Ve?Ct.yLabelMin:Ct.yLabelMax,pn=Ve?Ct.yLabelMax:Ct.yLabelMin,dn=Ct.cyFinal+Fe(Ct.px0[1],Ct.px1[1]),Mn=rn-un;if(Mn*Be>0&&(Ct.labelExtraY=Mn),Array.isArray(Oe.pull))for(gt=0;gt<Je.length;gt++)(ft=Je[gt])===Ct||(p.castOption(Oe.pull,Ct.pts)||0)>=(p.castOption(Oe.pull,ft.pts)||0)||((Ct.pxmid[1]-ft.pxmid[1])*Be>0?(Mn=ft.cyFinal+Fe(ft.px0[1],ft.px1[1])-un-Ct.labelExtraY)*Be>0&&(Ct.labelExtraY+=Mn):(pn+Ct.labelExtraY-dn)*Be>0&&(Ft=3*Pe*Math.abs(gt-Je.indexOf(Ct)),(Bt=ft.cxFinal+Ae(ft.px0[0],ft.px1[0])+Ft-(Ct.cxFinal+Ct.pxmid[0])-Ct.labelExtraX)*Pe>0&&(Ct.labelExtraX+=Bt)))}for(Ve=0;Ve<2;Ve++)for(_e=Ve?nt:it,Fe=Ve?Math.max:Math.min,Be=Ve?1:-1,Re=0;Re<2;Re++){for(Ae=Re?Math.max:Math.min,Pe=Re?1:-1,(qe=Le[Ve][Re]).sort(_e),Je=(We=Le[1-Ve][Re]).concat(qe),Ge=[],ut=0;ut<qe.length;ut++)void 0!==qe[ut].yLabelMid&&Ge.push(qe[ut]);for(Ke=!1,ut=0;Ve&&ut<We.length;ut++)if(void 0!==We[ut].yLabelMid){Ke=We[ut];break}for(ut=0;ut<Ge.length;ut++){var Tt=ut&&Ge[ut-1];Ke&&!ut&&(Tt=Ke),ht(Ge[ut],Tt)}}}(ne,oe),Oe=oe,W.each(function(Re){var Ve=y.select(this);if(Re.labelExtraX||Re.labelExtraY){var _e=Ve.select("g.slicetext text");Re.transform.targetX+=Re.labelExtraX,Re.transform.targetY+=Re.labelExtraY,_e.attr("transform",o.getTextTransform(Re.transform));var Ae=Re.cxFinal+Re.pxmid[0],Fe="M"+Ae+","+(Re.cyFinal+Re.pxmid[1]),Pe=(Re.yLabelMax-Re.yLabelMin)*(Re.pxmid[0]<0?-1:1)/4;if(Re.labelExtraX){var Be=Re.labelExtraX*Re.pxmid[1]/Re.pxmid[0],qe=Re.yLabelMid+Re.labelExtraY-(Re.cyFinal+Re.pxmid[1]);Math.abs(Be)>Math.abs(qe)?Fe+="l"+qe*Re.pxmid[0]/Re.pxmid[1]+","+qe+"H"+(Ae+Re.labelExtraX+Pe):Fe+="l"+Re.labelExtraX+","+Be+"v"+(qe-Be)+"h"+Pe}else Fe+="V"+(Re.yLabelMid+Re.labelExtraY)+"h"+Pe;o.ensureSingle(Ve,"path","textline").call(_.stroke,Oe.outsidetextfont.color).attr({"stroke-width":Math.min(2,Oe.outsidetextfont.size/8),d:Fe,fill:"none"})}else Ve.select("path.textline").remove()}),re&&oe.automargin){var fe=e.bBox(H.node()),me=oe.domain,ye=(ee.w*(me.x[1]-me.x[0])*.5-Y.r)/ee.w,Te=(ee.h*(me.y[1]-me.y[0])*.5-Y.r)/ee.h;b.autoMargin(te,"pie."+oe.uid+".automargin",{xl:me.x[0]-ye,xr:me.x[1]+ye,yb:me.y[0]-Te,yt:me.y[1]+Te,l:Math.max(Y.cx-Y.r-fe.left,0),r:Math.max(fe.right-(Y.cx+Y.r),0),b:Math.max(fe.bottom-(Y.cy+Y.r),0),t:Math.max(Y.cy-Y.r-fe.top,0),pad:5})}})});setTimeout(function(){se.selectAll("tspan").each(function(){var G=y.select(this);G.attr("dy")&&G.attr("dy",G.attr("dy"))})},0)},formatSliceLabel:$,transformInsideText:c,determineInsideTextFont:u,positionTitleOutside:F,prerenderTitles:w,layoutAreas:j,attachFxHandlers:m,computeTransform:X}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":905,"./helpers":906,"@plotly/d3":58}],911:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("./style_one"),T=x("../bar/uniform_text").resizeText;ue.exports=function(_){var e=_._fullLayout._pielayer.selectAll(".trace");T(_,e,"pie"),e.each(function(o){var a=o[0].trace,l=y.select(this);l.style({opacity:a.opacity}),l.selectAll("path.surface").each(function(i){y.select(this).call(b,i,a)})})}},{"../bar/uniform_text":664,"./style_one":912,"@plotly/d3":58}],912:[function(x,ue,le){"use strict";var y=x("../../components/color"),b=x("./helpers").castOption;ue.exports=function(T,_,e){var o=e.marker.line,a=b(o.color,_.pts)||y.defaultLine,l=b(o.width,_.pts)||0;T.style("stroke-width",l).call(y.fill,_.color).call(y.stroke,a)}},{"../../components/color":366,"./helpers":906}],913:[function(x,ue,le){"use strict";var y=x("../scatter/attributes");ue.exports={x:y.x,y:y.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:y.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":927}],914:[function(x,ue,le){"use strict";var y=x("../../../stackgl_modules").gl_pointcloud2d,b=x("../../lib/str2rgbarray"),T=x("../../plots/cartesian/autorange").findExtremes,_=x("../scatter/get_trace_color");function e(a,l){this.scene=a,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=y(a.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var o=e.prototype;o.handlePick=function(a){var l=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*l],this.pickXYData[2*l+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:Array.isArray(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},o.update=function(a){this.index=a.index,this.textLabels=a.text,this.name=a.name,this.hoverinfo=a.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(a),this.color=_(a,{})},o.updateFast=function(a){var l,i,v,h,s,d,p=this.xData=this.pickXData=a.x,f=this.yData=this.pickYData=a.y,g=this.pickXYData=a.xy,u=a.indices,w=this.bounds;if(g){if(v=g,l=g.length>>>1,a.xbounds&&a.ybounds)w[0]=a.xbounds[0],w[2]=a.xbounds[1],w[1]=a.ybounds[0],w[3]=a.ybounds[1];else for(d=0;d<l;d++)s=v[2*d+1],(h=v[2*d])<w[0]&&(w[0]=h),h>w[2]&&(w[2]=h),s<w[1]&&(w[1]=s),s>w[3]&&(w[3]=s);if(u)i=u;else for(i=new Int32Array(l),d=0;d<l;d++)i[d]=d}else for(l=p.length,v=new Float32Array(2*l),i=new Int32Array(l),d=0;d<l;d++)h=p[d],s=f[d],i[d]=d,v[2*d]=h,v[2*d+1]=s,h<w[0]&&(w[0]=h),h>w[2]&&(w[2]=h),s<w[1]&&(w[1]=s),s>w[3]&&(w[3]=s);this.idToIndex=i,this.pointcloudOptions.idToIndex=i,this.pointcloudOptions.positions=v;var c=b(a.marker.color),E=b(a.marker.border.color),M=a.opacity*a.marker.opacity;c[3]*=M,this.pointcloudOptions.color=c;var S=a.marker.blend;null===S&&(S=p.length<100||f.length<100),this.pointcloudOptions.blend=S,E[3]*=M,this.pointcloudOptions.borderColor=E;var C=a.marker.sizemin,O=Math.max(a.marker.sizemax,a.marker.sizemin);this.pointcloudOptions.sizeMin=C,this.pointcloudOptions.sizeMax=O,this.pointcloudOptions.areaRatio=a.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var I=this.scene.xaxis,N=this.scene.yaxis,F=O/2||.5;a._extremes[I._id]=T(I,[w[0],w[2]],{ppad:F}),a._extremes[N._id]=T(N,[w[1],w[3]],{ppad:F})},o.dispose=function(){this.pointcloud.dispose()},ue.exports=function(a,l){var i=new e(a,l.uid);return i.update(l),i}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":937}],915:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes");ue.exports=function(T,_,e){function o(a,l){return y.coerce(T,_,b,a,l)}o("x"),o("y"),o("xbounds"),o("ybounds"),T.xy&&T.xy instanceof Float32Array&&(_.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(_.indices=T.indices),o("text"),o("marker.color",e),o("marker.opacity"),o("marker.blend"),o("marker.sizemin"),o("marker.sizemax"),o("marker.border.color",e),o("marker.border.arearatio"),_._length=null}},{"../../lib":503,"./attributes":913}],916:[function(x,ue,le){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("../scatter3d/calc"),plot:x("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:x("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":956,"./attributes":913,"./convert":914,"./defaults":915}],917:[function(x,ue,le){"use strict";var y=x("../../plots/font_attributes"),b=x("../../plots/attributes"),T=x("../../components/color/attributes"),_=x("../../components/fx/attributes"),e=x("../../plots/domain").attributes,o=x("../../plots/template_attributes").hovertemplateAttrs,a=x("../../components/colorscale/attributes"),l=x("../../plot_api/plot_template").templatedArray,i=x("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,v=x("../../lib/extend").extendFlat,h=x("../../plot_api/edit_types").overrideAll;(ue.exports=h({hoverinfo:v({},b.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:_.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:y({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:o({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:o({},{keys:["value","label"]}),colorscales:l("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:v(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],918:[function(x,ue,le){"use strict";var y=x("../../plot_api/edit_types").overrideAll,b=x("../../plots/get_data").getModuleCalcData,T=x("./plot"),_=x("../../components/fx/layout_attributes"),e=x("../../lib/setcursor"),o=x("../../components/dragelement"),a=x("../../plots/cartesian/select").prepSelect,l=x("../../lib"),i=x("../../registry");function v(h,s){var d=h._fullData[s],p=h._fullLayout,f=p.dragmode,m=d._bgRect;if("pan"!==f&&"zoom"!==f){e(m,"pan"===p.dragmode?"move":"crosshair");var u={_id:"x",c2p:l.identity,_offset:d._sankey.translateX,_length:d._sankey.width},w={_id:"y",c2p:l.identity,_offset:d._sankey.translateY,_length:d._sankey.height},c={gd:h,element:m.node(),plotinfo:{id:s,xaxis:u,yaxis:w,fillRangeItems:l.noop},subplot:s,xaxes:[u],yaxes:[w],doneFnCompleted:function(E){var M,S=h._fullData[s],C=S.node.groups.slice(),O=[];function I(P){for(var j=S._sankey.graph.nodes,U=0;U<j.length;U++)if(j[U].pointNumber===P)return j[U]}for(var N=0;N<E.length;N++){var F=I(E[N].pointNumber);if(F)if(F.group){for(var L=0;L<F.childrenNodes.length;L++)O.push(F.childrenNodes[L].pointNumber);C[F.pointNumber-S.node._count]=!1}else O.push(F.pointNumber)}M=C.filter(Boolean).concat([O]),i.call("_guiRestyle",h,{"node.groups":[M]},s)},prepFn:function(E,M,S){a(E,M,S,c,f)}};o.init(c)}}le.name="sankey",le.baseLayoutAttrOverrides=y({hoverlabel:_.hoverlabel},"plot","nested"),le.plot=function(h){var s=b(h.calcdata,"sankey")[0];T(h,s),le.updateFx(h)},le.clean=function(h,s,d,p){var f=p._has&&p._has("sankey"),g=s._has&&s._has("sankey");f&&!g&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},le.updateFx=function(h){for(var s=0;s<h._fullData.length;s++)v(h,s)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":923}],919:[function(x,ue,le){"use strict";var y=x("strongly-connected-components"),b=x("../../lib"),T=x("../../lib/gup").wrap,_=b.isArrayOrTypedArray,e=b.isIndex,o=x("../../components/colorscale");ue.exports=function(l,i){var v=function a(l){var i,v=l.node,h=l.link,s=[],d=_(h.color),p=_(h.customdata),f={},g={},m=h.colorscales.length;for(i=0;i<m;i++){var u=h.colorscales[i],w=o.extractScale(u,{cLetter:"c"}),c=o.makeColorScaleFunc(w);g[u.label]=c}var E=0;for(i=0;i<h.value.length;i++)h.source[i]>E&&(E=h.source[i]),h.target[i]>E&&(E=h.target[i]);var M,S=E+1;l.node._count=S;var C=l.node.groups,O={};for(i=0;i<C.length;i++){var I=C[i];for(M=0;M<I.length;M++){var N=I[M],F=S+i;O.hasOwnProperty(N)?b.warn("Node "+N+" is already part of a group."):O[N]=F}}var L={source:[],target:[]};for(i=0;i<h.value.length;i++){var P=h.value[i],j=h.source[i],U=h.target[i];if(P>0&&e(j,S)&&e(U,S)&&(!O.hasOwnProperty(j)||!O.hasOwnProperty(U)||O[j]!==O[U])){O.hasOwnProperty(U)&&(U=O[U]),O.hasOwnProperty(j)&&(j=O[j]),f[j=+j]=f[U=+U]=!0;var $="";h.label&&h.label[i]&&($=h.label[i]);var X=null;$&&g.hasOwnProperty($)&&(X=g[$]),s.push({pointNumber:i,label:$,color:d?h.color[i]:h.color,customdata:p?h.customdata[i]:h.customdata,concentrationscale:X,source:j,target:U,value:+P}),L.source.push(j),L.target.push(U)}}var te=S+C.length,ae=_(v.color),J=_(v.customdata),ee=[];for(i=0;i<te;i++)f[i]&&ee.push({group:i>S-1,childrenNodes:[],pointNumber:i,label:v.label[i],color:ae?v.color[i]:v.color,customdata:J?v.customdata[i]:v.customdata});var G=!1;return function(H,Y,oe){for(var W=b.init2dArray(H,0),ne=0;ne<Math.min(Y.length,oe.length);ne++)if(b.isIndex(Y[ne],H)&&b.isIndex(oe[ne],H)){if(Y[ne]===oe[ne])return!0;W[Y[ne]].push(oe[ne])}return y(W).components.some(function(re){return re.length>1})}(te,L.source,L.target)&&(G=!0),{circular:G,links:s,nodes:ee,groups:C,groupLookup:O}}(i);return T({circular:v.circular,_nodes:v.nodes,_links:v.links,_groups:v.groups,_groupLookup:v.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],920:[function(x,ue,le){"use strict";ue.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],921:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("../../components/color"),_=x("tinycolor2"),e=x("../../plots/domain").defaults,o=x("../../components/fx/hoverlabel_defaults"),a=x("../../plot_api/plot_template"),l=x("../../plots/array_container_defaults");function i(v,h){function s(d,p){return y.coerce(v,h,b.link.colorscales,d,p)}s("label"),s("cmin"),s("cmax"),s("colorscale")}ue.exports=function(v,h,s,d){function p(O,I){return y.coerce(v,h,b,O,I)}var f=y.extendDeep(d.hoverlabel,v.hoverlabel),g=v.node,m=a.newContainer(h,"node");function u(O,I){return y.coerce(g,m,b.node,O,I)}u("label"),u("groups"),u("x"),u("y"),u("pad"),u("thickness"),u("line.color"),u("line.width"),u("hoverinfo",v.hoverinfo),o(g,m,u,f),u("hovertemplate");var w=d.colorway;u("color",m.label.map(function(O,I){return T.addOpacity(w[I%w.length],.8)})),u("customdata");var c=v.link||{},E=a.newContainer(h,"link");function M(O,I){return y.coerce(c,E,b.link,O,I)}M("label"),M("source"),M("target"),M("value"),M("line.color"),M("line.width"),M("hoverinfo",v.hoverinfo),o(c,E,M,f),M("hovertemplate");var S,C=_(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";M("color",y.repeat(C,E.value.length)),M("customdata"),l(c,E,{name:"colorscales",handleItemDefaults:i}),e(h,d,p),p("orientation"),p("valueformat"),p("valuesuffix"),m.x.length&&m.y.length&&(S="freeform"),p("arrangement",S),y.coerceFont(p,"textfont",y.extendFlat({},d.font)),h._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":917,tinycolor2:312}],922:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),moduleType:"trace",name:"sankey",basePlotModule:x("./base_plot"),selectPoints:x("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":917,"./base_plot":918,"./calc":919,"./defaults":921,"./plot":923,"./select.js":925}],923:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=b.numberFormat,_=x("./render"),e=x("../../components/fx"),o=x("../../components/color"),a=x("./constants").cn,l=b._;function i(c){return""!==c}function v(c,E){return c.filter(function(M){return M.key===E.traceId})}function h(c,E){y.select(c).select("path").style("fill-opacity",E),y.select(c).select("rect").style("fill-opacity",E)}function s(c){y.select(c).select("text.name").style("fill","black")}function d(c){return function(E){return-1!==c.node.sourceLinks.indexOf(E.link)||-1!==c.node.targetLinks.indexOf(E.link)}}function p(c){return function(E){return-1!==E.node.sourceLinks.indexOf(c.link)||-1!==E.node.targetLinks.indexOf(c.link)}}function f(c,E,M){E&&M&&v(M,E).selectAll("."+a.sankeyLink).filter(d(E)).call(m.bind(0,E,M,!1))}function g(c,E,M){E&&M&&v(M,E).selectAll("."+a.sankeyLink).filter(d(E)).call(u.bind(0,E,M,!1))}function m(c,E,M,S){var C=S.datum().link.label;S.style("fill-opacity",function(O){if(!O.link.concentrationscale)return.4}),C&&v(E,c).selectAll("."+a.sankeyLink).filter(function(O){return O.link.label===C}).style("fill-opacity",function(O){if(!O.link.concentrationscale)return.4}),M&&v(E,c).selectAll("."+a.sankeyNode).filter(p(c)).call(f)}function u(c,E,M,S){var C=S.datum().link.label;S.style("fill-opacity",function(O){return O.tinyColorAlpha}),C&&v(E,c).selectAll("."+a.sankeyLink).filter(function(O){return O.link.label===C}).style("fill-opacity",function(O){return O.tinyColorAlpha}),M&&v(E,c).selectAll(a.sankeyNode).filter(p(c)).call(g)}function w(c,E){var S=b.nestedProperty(c.hoverlabel||{},E).get();return!Array.isArray(S)&&S}ue.exports=function(c,E){for(var M=c._fullLayout,S=M._paper,C=M._size,O=0;O<c._fullData.length;O++)if(c._fullData[O].visible&&c._fullData[O].type===a.sankey&&!c._fullData[O]._viewInitial){var I=c._fullData[O].node;c._fullData[O]._viewInitial={node:{groups:I.groups.slice(),x:I.x.slice(),y:I.y.slice()}}}var N=l(c,"source:")+" ",F=l(c,"target:")+" ",L=l(c,"concentration:")+" ",P=l(c,"incoming flow count:")+" ",j=l(c,"outgoing flow count:")+" ";_(c,S,E,{width:C.w,height:C.h,margin:{t:C.t,r:C.r,b:C.b,l:C.l}},{linkEvents:{hover:function(U,$,X){!1!==c._fullLayout.hovermode&&(y.select(U).call(m.bind(0,$,X,!0)),"skip"!==$.link.trace.link.hoverinfo&&($.link.fullData=$.link.trace,c.emit("plotly_hover",{event:y.event,points:[$.link]})))},follow:function(U,$){if(!1!==c._fullLayout.hovermode){var X=$.link.trace.link;if("none"!==X.hoverinfo&&"skip"!==X.hoverinfo){for(var te=[],ae=0,J=0;J<$.flow.links.length;J++){var ee=$.flow.links[J];if("closest"!==c._fullLayout.hovermode||$.link.pointNumber===ee.pointNumber){$.link.pointNumber===ee.pointNumber&&(ae=J),ee.fullData=ee.trace,X=$.link.trace.link;var se=H(ee),G={valueLabel:T($.valueFormat)(ee.value)+$.valueSuffix};te.push({x:se[0],y:se[1],name:G.valueLabel,text:[ee.label||"",N+ee.source.label,F+ee.target.label,ee.concentrationscale?L+T("%0.2f")(ee.flow.labelConcentration):""].filter(i).join("<br>"),color:w(X,"bgcolor")||o.addOpacity(ee.color,1),borderColor:w(X,"bordercolor"),fontFamily:w(X,"font.family"),fontSize:w(X,"font.size"),fontColor:w(X,"font.color"),nameLength:w(X,"namelength"),textAlign:w(X,"align"),idealAlign:y.event.x<se[0]?"right":"left",hovertemplate:X.hovertemplate,hovertemplateLabels:G,eventData:[ee]})}}e.loneHover(te,{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:c,anchorIndex:ae}).each(function(){$.link.concentrationscale||h(this,.65),s(this)})}}function H(Y){var oe,W;Y.circular?(oe=(Y.circularPathData.leftInnerExtent+Y.circularPathData.rightInnerExtent)/2,W=Y.circularPathData.verticalFullExtent):(oe=(Y.source.x1+Y.target.x0)/2,W=(Y.y0+Y.y1)/2);var ne=[oe,W];return"v"===Y.trace.orientation&&ne.reverse(),ne[0]+=$.parent.translateX,ne[1]+=$.parent.translateY,ne}},unhover:function(U,$,X){!1!==c._fullLayout.hovermode&&(y.select(U).call(u.bind(0,$,X,!0)),"skip"!==$.link.trace.link.hoverinfo&&($.link.fullData=$.link.trace,c.emit("plotly_unhover",{event:y.event,points:[$.link]})),e.loneUnhover(M._hoverlayer.node()))},select:function(U,$){var X=$.link;X.originalEvent=y.event,c._hoverdata=[X],e.click(c,{target:!0})}},nodeEvents:{hover:function(U,$,X){!1!==c._fullLayout.hovermode&&(y.select(U).call(f,$,X),"skip"!==$.node.trace.node.hoverinfo&&($.node.fullData=$.node.trace,c.emit("plotly_hover",{event:y.event,points:[$.node]})))},follow:function(U,$){if(!1!==c._fullLayout.hovermode){var X=$.node.trace.node;if("none"!==X.hoverinfo&&"skip"!==X.hoverinfo){var te=y.select(U).select("."+a.nodeRect),ae=c._fullLayout._paperdiv.node().getBoundingClientRect(),J=te.node().getBoundingClientRect(),ee=J.left-2-ae.left,se=J.right+2-ae.left,G=J.top+J.height/4-ae.top,H={valueLabel:T($.valueFormat)($.node.value)+$.valueSuffix};$.node.fullData=$.node.trace,c._fullLayout._calcInverseTransform(c);var Y=c._fullLayout._invScaleX,W=e.loneHover({x0:Y*ee,x1:Y*se,y:c._fullLayout._invScaleY*G,name:T($.valueFormat)($.node.value)+$.valueSuffix,text:[$.node.label,P+$.node.targetLinks.length,j+$.node.sourceLinks.length].filter(i).join("<br>"),color:w(X,"bgcolor")||$.tinyColorHue,borderColor:w(X,"bordercolor"),fontFamily:w(X,"font.family"),fontSize:w(X,"font.size"),fontColor:w(X,"font.color"),nameLength:w(X,"namelength"),textAlign:w(X,"align"),idealAlign:"left",hovertemplate:X.hovertemplate,hovertemplateLabels:H,eventData:[$.node]},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:c});h(W,.85),s(W)}}},unhover:function(U,$,X){!1!==c._fullLayout.hovermode&&(y.select(U).call(g,$,X),"skip"!==$.node.trace.node.hoverinfo&&($.node.fullData=$.node.trace,c.emit("plotly_unhover",{event:y.event,points:[$.node]})),e.loneUnhover(M._hoverlayer.node()))},select:function(U,$,X){var te=$.node;te.originalEvent=y.event,c._hoverdata=[te],y.select(U).call(g,$,X),e.click(c,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":920,"./render":924,"@plotly/d3":58}],924:[function(x,ue,le){"use strict";var y=x("d3-force"),b=x("d3-interpolate").interpolateNumber,T=x("@plotly/d3"),_=x("@plotly/d3-sankey"),e=x("@plotly/d3-sankey-circular"),o=x("./constants"),a=x("tinycolor2"),l=x("../../components/color"),i=x("../../components/drawing"),v=x("../../lib"),h=v.strTranslate,s=v.strRotate,d=x("../../lib/gup"),p=d.keyFun,f=d.repeat,g=d.unwrap,m=x("../../lib/svg_text_utils"),u=x("../../registry"),w=x("../../constants/alignment"),c=w.CAP_SHIFT,E=w.LINE_SPACING;function M(J,ee,se){var G,H=g(ee),Y=H.trace,oe=Y.domain,W="h"===Y.orientation,ne=Y.node.pad,re=Y.node.thickness,ce=J.width*(oe.x[1]-oe.x[0]),fe=J.height*(oe.y[1]-oe.y[0]),me=H._nodes,pe=H._links,we=H.circular;(G=we?e.sankeyCircular().circularLinkGap(0):_.sankey()).iterations(o.sankeyIterations).size(W?[ce,fe]:[fe,ce]).nodeWidth(re).nodePadding(ne).nodeId(function(Be){return Be.pointNumber}).nodes(me).links(pe);var ye,Te,Le,Oe=G();for(var Re in G.nodePadding()<ne&&v.warn("node.pad was reduced to ",G.nodePadding()," to fit within the figure."),H._groupLookup){var Ve,_e=parseInt(H._groupLookup[Re]);for(ye=0;ye<Oe.nodes.length;ye++)if(Oe.nodes[ye].pointNumber===_e){Ve=Oe.nodes[ye];break}if(Ve){var Ae={pointNumber:parseInt(Re),x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Oe.nodes.unshift(Ae),Ve.childrenNodes.unshift(Ae)}}if(function(){for(ye=0;ye<Oe.nodes.length;ye++){var Be,qe,We=Oe.nodes[ye],Je={};for(Te=0;Te<We.targetLinks.length;Te++)Be=(qe=We.targetLinks[Te]).source.pointNumber+":"+qe.target.pointNumber,Je.hasOwnProperty(Be)||(Je[Be]=[]),Je[Be].push(qe);var ut=Object.keys(Je);for(Te=0;Te<ut.length;Te++){var Ge=Je[Be=ut[Te]],Ke=0,nt={};for(Le=0;Le<Ge.length;Le++)nt[(qe=Ge[Le]).label]||(nt[qe.label]=0),nt[qe.label]+=qe.value,Ke+=qe.value;for(Le=0;Le<Ge.length;Le++)(qe=Ge[Le]).flow={value:Ke,labelConcentration:nt[qe.label]/Ke,concentration:qe.value/Ke,links:Ge},qe.concentrationscale&&(qe.color=a(qe.concentrationscale(qe.flow.labelConcentration)))}var it=0;for(Te=0;Te<We.sourceLinks.length;Te++)it+=We.sourceLinks[Te].value;for(Te=0;Te<We.sourceLinks.length;Te++)(qe=We.sourceLinks[Te]).concentrationOut=qe.value/it;var ht=0;for(Te=0;Te<We.targetLinks.length;Te++)ht+=We.targetLinks[Te].value;for(Te=0;Te<We.targetLinks.length;Te++)(qe=We.targetLinks[Te]).concenrationIn=qe.value/ht}}(),Y.node.x.length&&Y.node.y.length){for(ye=0;ye<Math.min(Y.node.x.length,Y.node.y.length,Oe.nodes.length);ye++)if(Y.node.x[ye]&&Y.node.y[ye]){var Fe=[Y.node.x[ye]*ce,Y.node.y[ye]*fe];Oe.nodes[ye].x0=Fe[0]-re/2,Oe.nodes[ye].x1=Fe[0]+re/2;var Pe=Oe.nodes[ye].y1-Oe.nodes[ye].y0;Oe.nodes[ye].y0=Fe[1]-Pe/2,Oe.nodes[ye].y1=Fe[1]+Pe/2}"snap"===Y.arrangement&&function(Be){var qe,We,Je=Be.map(function(it,ht){return{x0:it.x0,index:ht}}).sort(function(it,ht){return it.x0-ht.x0}),ut=[],Ge=-1,Ke=-1/0;for(ye=0;ye<Je.length;ye++){var nt=Be[Je[ye].index];nt.x0>Ke+re&&(Ge+=1,qe=nt.x0),Ke=nt.x0,ut[Ge]||(ut[Ge]=[]),ut[Ge].push(nt),nt.x0+=We=qe-nt.x0,nt.x1+=We}return ut}(me=Oe.nodes).forEach(function(qe){var We,Je,ut,Ge=0,Ke=qe.length;for(qe.sort(function(nt,it){return nt.y0-it.y0}),ut=0;ut<Ke;++ut)(We=qe[ut]).y0>=Ge||(Je=Ge-We.y0)>1e-6&&(We.y0+=Je,We.y1+=Je),Ge=We.y1+ne}),G.update(Oe)}return{circular:we,key:se,trace:Y,guid:v.randstr(),horizontal:W,width:ce,height:fe,nodePad:Y.node.pad,nodeLineColor:Y.node.line.color,nodeLineWidth:Y.node.line.width,linkLineColor:Y.link.line.color,linkLineWidth:Y.link.line.width,valueFormat:Y.valueformat,valueSuffix:Y.valuesuffix,textFont:Y.textfont,translateX:oe.x[0]*J.width+J.margin.l,translateY:J.height-oe.y[1]*J.height+J.margin.t,dragParallel:W?fe:ce,dragPerpendicular:W?ce:fe,arrangement:Y.arrangement,sankey:G,graph:Oe,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function S(J,ee,se){var G=a(ee.color),H=ee.source.label+"|"+ee.target.label+"__"+se;return ee.trace=J.trace,ee.curveNumber=J.trace.index,{circular:J.circular,key:H,traceId:J.key,pointNumber:ee.pointNumber,link:ee,tinyColorHue:l.tinyRGB(G),tinyColorAlpha:G.getAlpha(),linkPath:C,linkLineColor:J.linkLineColor,linkLineWidth:J.linkLineWidth,valueFormat:J.valueFormat,valueSuffix:J.valueSuffix,sankey:J.sankey,parent:J,interactionState:J.interactionState,flow:ee.flow}}function C(){return function(J){if(J.link.circular)return se=(ee=J.link).width/2,G=ee.circularPathData,"top"===ee.circularLinkType?"M "+G.targetX+" "+(G.targetY+se)+" L"+G.rightInnerExtent+" "+(G.targetY+se)+"A"+(G.rightLargeArcRadius+se)+" "+(G.rightSmallArcRadius+se)+" 0 0 1 "+(G.rightFullExtent-se)+" "+(G.targetY-G.rightSmallArcRadius)+"L"+(G.rightFullExtent-se)+" "+G.verticalRightInnerExtent+"A"+(G.rightLargeArcRadius+se)+" "+(G.rightLargeArcRadius+se)+" 0 0 1 "+G.rightInnerExtent+" "+(G.verticalFullExtent-se)+"L"+G.leftInnerExtent+" "+(G.verticalFullExtent-se)+"A"+(G.leftLargeArcRadius+se)+" "+(G.leftLargeArcRadius+se)+" 0 0 1 "+(G.leftFullExtent+se)+" "+G.verticalLeftInnerExtent+"L"+(G.leftFullExtent+se)+" "+(G.sourceY-G.leftSmallArcRadius)+"A"+(G.leftLargeArcRadius+se)+" "+(G.leftSmallArcRadius+se)+" 0 0 1 "+G.leftInnerExtent+" "+(G.sourceY+se)+"L"+G.sourceX+" "+(G.sourceY+se)+"L"+G.sourceX+" "+(G.sourceY-se)+"L"+G.leftInnerExtent+" "+(G.sourceY-se)+"A"+(G.leftLargeArcRadius-se)+" "+(G.leftSmallArcRadius-se)+" 0 0 0 "+(G.leftFullExtent-se)+" "+(G.sourceY-G.leftSmallArcRadius)+"L"+(G.leftFullExtent-se)+" "+G.verticalLeftInnerExtent+"A"+(G.leftLargeArcRadius-se)+" "+(G.leftLargeArcRadius-se)+" 0 0 0 "+G.leftInnerExtent+" "+(G.verticalFullExtent+se)+"L"+G.rightInnerExtent+" "+(G.verticalFullExtent+se)+"A"+(G.rightLargeArcRadius-se)+" "+(G.rightLargeArcRadius-se)+" 0 0 0 "+(G.rightFullExtent+se)+" "+G.verticalRightInnerExtent+"L"+(G.rightFullExtent+se)+" "+(G.targetY-G.rightSmallArcRadius)+"A"+(G.rightLargeArcRadius-se)+" "+(G.rightSmallArcRadius-se)+" 0 0 0 "+G.rightInnerExtent+" "+(G.targetY-se)+"L"+G.targetX+" "+(G.targetY-se)+"Z":"M "+G.targetX+" "+(G.targetY-se)+" L"+G.rightInnerExtent+" "+(G.targetY-se)+"A"+(G.rightLargeArcRadius+se)+" "+(G.rightSmallArcRadius+se)+" 0 0 0 "+(G.rightFullExtent-se)+" "+(G.targetY+G.rightSmallArcRadius)+"L"+(G.rightFullExtent-se)+" "+G.verticalRightInnerExtent+"A"+(G.rightLargeArcRadius+se)+" "+(G.rightLargeArcRadius+se)+" 0 0 0 "+G.rightInnerExtent+" "+(G.verticalFullExtent+se)+"L"+G.leftInnerExtent+" "+(G.verticalFullExtent+se)+"A"+(G.leftLargeArcRadius+se)+" "+(G.leftLargeArcRadius+se)+" 0 0 0 "+(G.leftFullExtent+se)+" "+G.verticalLeftInnerExtent+"L"+(G.leftFullExtent+se)+" "+(G.sourceY+G.leftSmallArcRadius)+"A"+(G.leftLargeArcRadius+se)+" "+(G.leftSmallArcRadius+se)+" 0 0 0 "+G.leftInnerExtent+" "+(G.sourceY-se)+"L"+G.sourceX+" "+(G.sourceY-se)+"L"+G.sourceX+" "+(G.sourceY+se)+"L"+G.leftInnerExtent+" "+(G.sourceY+se)+"A"+(G.leftLargeArcRadius-se)+" "+(G.leftSmallArcRadius-se)+" 0 0 1 "+(G.leftFullExtent-se)+" "+(G.sourceY+G.leftSmallArcRadius)+"L"+(G.leftFullExtent-se)+" "+G.verticalLeftInnerExtent+"A"+(G.leftLargeArcRadius-se)+" "+(G.leftLargeArcRadius-se)+" 0 0 1 "+G.leftInnerExtent+" "+(G.verticalFullExtent-se)+"L"+G.rightInnerExtent+" "+(G.verticalFullExtent-se)+"A"+(G.rightLargeArcRadius-se)+" "+(G.rightLargeArcRadius-se)+" 0 0 1 "+(G.rightFullExtent+se)+" "+G.verticalRightInnerExtent+"L"+(G.rightFullExtent+se)+" "+(G.targetY+G.rightSmallArcRadius)+"A"+(G.rightLargeArcRadius-se)+" "+(G.rightSmallArcRadius-se)+" 0 0 1 "+G.rightInnerExtent+" "+(G.targetY+se)+"L"+G.targetX+" "+(G.targetY+se)+"Z";var ee,se,G,H=J.link.source.x1,Y=J.link.target.x0,oe=b(H,Y),W=oe(.5),ne=oe(.5),re=J.link.y0-J.link.width/2,ce=J.link.y0+J.link.width/2,fe=J.link.y1-J.link.width/2,me=J.link.y1+J.link.width/2;return"M"+H+","+re+"C"+W+","+re+" "+ne+","+fe+" "+Y+","+fe+"L"+Y+","+me+"C"+ne+","+me+" "+W+","+ce+" "+H+","+ce+"Z"}}function O(J,ee){var se=a(ee.color),G=o.nodePadAcross,H=J.nodePad/2;ee.dx=ee.x1-ee.x0,ee.dy=ee.y1-ee.y0;var Y=ee.dx,oe=Math.max(.5,ee.dy),W="node_"+ee.pointNumber;return ee.group&&(W=v.randstr()),ee.trace=J.trace,ee.curveNumber=J.trace.index,{index:ee.pointNumber,key:W,partOfGroup:ee.partOfGroup||!1,group:ee.group,traceId:J.key,trace:J.trace,node:ee,nodePad:J.nodePad,nodeLineColor:J.nodeLineColor,nodeLineWidth:J.nodeLineWidth,textFont:J.textFont,size:J.horizontal?J.height:J.width,visibleWidth:Math.ceil(Y),visibleHeight:oe,zoneX:-G,zoneY:-H,zoneWidth:Y+2*G,zoneHeight:oe+2*H,labelY:J.horizontal?ee.dy/2+1:ee.dx/2+1,left:1===ee.originalLayer,sizeAcross:J.width,forceLayouts:J.forceLayouts,horizontal:J.horizontal,darkBackground:se.getBrightness()<=128,tinyColorHue:l.tinyRGB(se),tinyColorAlpha:se.getAlpha(),valueFormat:J.valueFormat,valueSuffix:J.valueSuffix,sankey:J.sankey,graph:J.graph,arrangement:J.arrangement,uniqueNodeLabelPathId:[J.guid,J.key,W].join("_"),interactionState:J.interactionState,figure:J}}function I(J){J.attr("transform",function(ee){return h(ee.node.x0.toFixed(3),ee.node.y0.toFixed(3))})}function N(J){J.call(I)}function F(J,ee){J.call(N),ee.attr("d",C())}function L(J){J.attr("width",function(ee){return ee.node.x1-ee.node.x0}).attr("height",function(ee){return ee.visibleHeight})}function P(J){return J.link.width>1||J.linkLineWidth>0}function j(J){return h(J.translateX,J.translateY)+(J.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(J,ee,se){J.on(".basic",null).on("mouseover.basic",function(G){G.interactionState.dragInProgress||G.partOfGroup||(se.hover(this,G,ee),G.interactionState.hovered=[this,G])}).on("mousemove.basic",function(G){G.interactionState.dragInProgress||G.partOfGroup||(se.follow(this,G),G.interactionState.hovered=[this,G])}).on("mouseout.basic",function(G){G.interactionState.dragInProgress||G.partOfGroup||(se.unhover(this,G,ee),G.interactionState.hovered=!1)}).on("click.basic",function(G){G.interactionState.hovered&&(se.unhover(this,G,ee),G.interactionState.hovered=!1),G.interactionState.dragInProgress||G.partOfGroup||se.select(this,G,ee)})}function $(J,ee,se,G){var H=T.behavior.drag().origin(function(Y){return{x:Y.node.x0+Y.visibleWidth/2,y:Y.node.y0+Y.visibleHeight/2}}).on("dragstart",function(Y){if("fixed"!==Y.arrangement&&(v.ensureSingle(G._fullLayout._infolayer,"g","dragcover",function(W){G._fullLayout._dragCover=W}),v.raiseToTop(this),Y.interactionState.dragInProgress=Y.node,te(Y.node),Y.interactionState.hovered&&(se.nodeEvents.unhover.apply(0,Y.interactionState.hovered),Y.interactionState.hovered=!1),"snap"===Y.arrangement)){var oe=Y.traceId+"|"+Y.key;Y.forceLayouts[oe]?Y.forceLayouts[oe].alpha(1):function(W,ne,re,ce){!function(me){for(var pe=0;pe<me.length;pe++)me[pe].y=(me[pe].y0+me[pe].y1)/2,me[pe].x=(me[pe].x0+me[pe].x1)/2}(re.graph.nodes);var pe,we,ye,fe=re.graph.nodes.filter(function(me){return me.originalX===re.node.originalX}).filter(function(me){return!me.partOfGroup});re.forceLayouts[ne]=y.forceSimulation(fe).alphaDecay(0).force("collide",y.forceCollide().radius(function(me){return me.dy/2+re.nodePad/2}).strength(1).iterations(o.forceIterations)).force("constrain",(pe=ne,we=fe,ye=re,function(){for(var Te=0,Le=0;Le<we.length;Le++){var Oe=we[Le];Oe===ye.interactionState.dragInProgress?(Oe.x=Oe.lastDraggedX,Oe.y=Oe.lastDraggedY):(Oe.vx=(Oe.originalX-Oe.x)/o.forceTicksPerFrame,Oe.y=Math.min(ye.size-Oe.dy/2,Math.max(Oe.dy/2,Oe.y))),Te=Math.max(Te,Math.abs(Oe.vx),Math.abs(Oe.vy))}!ye.interactionState.dragInProgress&&Te<.1&&ye.forceLayouts[pe].alpha()>0&&ye.forceLayouts[pe].alpha(0)})).stop()}(0,oe,Y),W=J,ne=ee,re=Y,ce=oe,fe=G,window.requestAnimationFrame(function me(){var pe;for(pe=0;pe<o.forceTicksPerFrame;pe++)re.forceLayouts[ce].tick();if(function(ye){for(var Te=0;Te<ye.length;Te++)ye[Te].y0=ye[Te].y-ye[Te].dy/2,ye[Te].y1=ye[Te].y0+ye[Te].dy,ye[Te].x0=ye[Te].x-ye[Te].dx/2,ye[Te].x1=ye[Te].x0+ye[Te].dx}(re.graph.nodes),re.sankey.update(re.graph),F(W.filter(ae(re)),ne),re.forceLayouts[ce].alpha()>0)window.requestAnimationFrame(me);else{var we=re.node.originalX;re.node.x0=we-re.visibleWidth/2,re.node.x1=we+re.visibleWidth/2,X(re,fe)}})}var W,ne,re,ce,fe}).on("drag",function(Y){if("fixed"!==Y.arrangement){var oe=T.event.x,W=T.event.y;"snap"===Y.arrangement?(Y.node.x0=oe-Y.visibleWidth/2,Y.node.x1=oe+Y.visibleWidth/2,Y.node.y0=W-Y.visibleHeight/2,Y.node.y1=W+Y.visibleHeight/2):("freeform"===Y.arrangement&&(Y.node.x0=oe-Y.visibleWidth/2,Y.node.x1=oe+Y.visibleWidth/2),W=Math.max(0,Math.min(Y.size-Y.visibleHeight/2,W)),Y.node.y0=W-Y.visibleHeight/2,Y.node.y1=W+Y.visibleHeight/2),te(Y.node),"snap"!==Y.arrangement&&(Y.sankey.update(Y.graph),F(J.filter(ae(Y)),ee))}}).on("dragend",function(Y){if("fixed"!==Y.arrangement){Y.interactionState.dragInProgress=!1;for(var oe=0;oe<Y.node.childrenNodes.length;oe++)Y.node.childrenNodes[oe].x=Y.node.x,Y.node.childrenNodes[oe].y=Y.node.y;"snap"!==Y.arrangement&&X(Y,G)}});J.on(".drag",null).call(H)}function X(J,ee){for(var se=[],G=[],H=0;H<J.graph.nodes.length;H++){var oe=(J.graph.nodes[H].y0+J.graph.nodes[H].y1)/2;se.push((J.graph.nodes[H].x0+J.graph.nodes[H].x1)/2/J.figure.width),G.push(oe/J.figure.height)}u.call("_guiRestyle",ee,{"node.x":[se],"node.y":[G]},J.trace.index).then(function(){ee._fullLayout._dragCover&&ee._fullLayout._dragCover.remove()})}function te(J){J.lastDraggedX=J.x0+J.dx/2,J.lastDraggedY=J.y0+J.dy/2}function ae(J){return function(ee){return ee.node.originalX===J.node.originalX}}ue.exports=function(J,ee,se,G,H){var Y=!1;v.ensureSingle(J._fullLayout._infolayer,"g","first-render",function(){Y=!0});var oe=J._fullLayout._dragCover,W=se.filter(function(ye){return g(ye).trace.visible}).map(M.bind(null,G)),ne=ee.selectAll("."+o.cn.sankey).data(W,p);ne.exit().remove(),ne.enter().append("g").classed(o.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",j),ne.each(function(ye,Te){J._fullData[Te]._sankey=ye;var Le="bgsankey-"+ye.trace.uid+"-"+Te;v.ensureSingle(J._fullLayout._draggers,"rect",Le),J._fullData[Te]._bgRect=T.select("."+Le),J._fullData[Te]._bgRect.style("pointer-events","all").attr("width",ye.width).attr("height",ye.height).attr("x",ye.translateX).attr("y",ye.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ne.transition().ease(o.ease).duration(o.duration).attr("transform",j);var re=ne.selectAll("."+o.cn.sankeyLinks).data(f,p);re.enter().append("g").classed(o.cn.sankeyLinks,!0).style("fill","none");var ce=re.selectAll("."+o.cn.sankeyLink).data(function(ye){return ye.graph.links.filter(function(Te){return Te.value}).map(S.bind(null,ye))},p);ce.enter().append("path").classed(o.cn.sankeyLink,!0).call(U,ne,H.linkEvents),ce.style("stroke",function(ye){return P(ye)?l.tinyRGB(a(ye.linkLineColor)):ye.tinyColorHue}).style("stroke-opacity",function(ye){return P(ye)?l.opacity(ye.linkLineColor):ye.tinyColorAlpha}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}).style("stroke-width",function(ye){return P(ye)?ye.linkLineWidth:1}).attr("d",C()),ce.style("opacity",function(){return J._context.staticPlot||Y||oe?1:0}).transition().ease(o.ease).duration(o.duration).style("opacity",1),ce.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var fe=ne.selectAll("."+o.cn.sankeyNodeSet).data(f,p);fe.enter().append("g").classed(o.cn.sankeyNodeSet,!0),fe.style("cursor",function(ye){switch(ye.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var me=fe.selectAll("."+o.cn.sankeyNode).data(function(ye){var Te=ye.graph.nodes;return function(Le){var Oe,Re=[];for(Oe=0;Oe<Le.length;Oe++)Le[Oe].originalX=(Le[Oe].x0+Le[Oe].x1)/2,Le[Oe].originalY=(Le[Oe].y0+Le[Oe].y1)/2,-1===Re.indexOf(Le[Oe].originalX)&&Re.push(Le[Oe].originalX);for(Re.sort(function(Ve,_e){return Ve-_e}),Oe=0;Oe<Le.length;Oe++)Le[Oe].originalLayerIndex=Re.indexOf(Le[Oe].originalX),Le[Oe].originalLayer=Le[Oe].originalLayerIndex/(Re.length-1)}(Te),Te.map(O.bind(null,ye))},p);me.enter().append("g").classed(o.cn.sankeyNode,!0).call(I).style("opacity",function(ye){return!J._context.staticPlot&&!Y||ye.partOfGroup?0:1}),me.call(U,ne,H.nodeEvents).call($,ce,H,J),me.transition().ease(o.ease).duration(o.duration).call(I).style("opacity",function(ye){return ye.partOfGroup?0:1}),me.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var pe=me.selectAll("."+o.cn.nodeRect).data(f);pe.enter().append("rect").classed(o.cn.nodeRect,!0).call(L),pe.style("stroke-width",function(ye){return ye.nodeLineWidth}).style("stroke",function(ye){return l.tinyRGB(a(ye.nodeLineColor))}).style("stroke-opacity",function(ye){return l.opacity(ye.nodeLineColor)}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}),pe.transition().ease(o.ease).duration(o.duration).call(L);var we=me.selectAll("."+o.cn.nodeLabel).data(f);we.enter().append("text").classed(o.cn.nodeLabel,!0).style("cursor","default"),we.attr("data-notex",1).text(function(ye){return ye.node.label}).each(function(ye){var Te=T.select(this);i.font(Te,ye.textFont),m.convertToTspans(Te,J)}).style("text-shadow",m.makeTextShadow(J._fullLayout.paper_bgcolor)).attr("text-anchor",function(ye){return ye.horizontal&&ye.left?"end":"start"}).attr("transform",function(ye){var Te=T.select(this),Le=m.lineCount(Te),Re=ye.nodeLineWidth/2+3,Ve=((ye.horizontal?ye.visibleHeight:ye.visibleWidth)-ye.textFont.size*((Le-1)*E-c))/2;ye.horizontal&&(ye.left?Re=-Re:Re+=ye.visibleWidth);var _e=ye.horizontal?"":"scale(-1,1)"+s(90);return h(ye.horizontal?Re:Ve,ye.horizontal?Ve:Re)+_e}),we.transition().ease(o.ease).duration(o.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":920,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],925:[function(x,ue,le){"use strict";ue.exports=function(y,b){for(var T=[],_=y.cd[0].trace,e=_._sankey.graph.nodes,o=0;o<e.length;o++){var a=e[o];if(!a.partOfGroup){var l=[(a.x0+a.x1)/2,(a.y0+a.y1)/2];"v"===_.orientation&&l.reverse(),b&&b.contains(l,!1,o,y)&&T.push({pointNumber:a.pointNumber})}}return T}},{}],926:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T){for(var _=0;_<b.length;_++)b[_].i=_;y.mergeArray(T.text,b,"tx"),y.mergeArray(T.texttemplate,b,"txt"),y.mergeArray(T.hovertext,b,"htx"),y.mergeArray(T.customdata,b,"data"),y.mergeArray(T.textposition,b,"tp"),T.textfont&&(y.mergeArrayCastPositive(T.textfont.size,b,"ts"),y.mergeArray(T.textfont.color,b,"tc"),y.mergeArray(T.textfont.family,b,"tf"));var e=T.marker;if(e){y.mergeArrayCastPositive(e.size,b,"ms"),y.mergeArrayCastPositive(e.opacity,b,"mo"),y.mergeArray(e.symbol,b,"mx"),y.mergeArray(e.color,b,"mc");var o=e.line;e.line&&(y.mergeArray(o.color,b,"mlc"),y.mergeArrayCastPositive(o.width,b,"mlw"));var a=e.gradient;a&&"none"!==a.type&&(y.mergeArray(a.type,b,"mgt"),y.mergeArray(a.color,b,"mgc"))}}},{"../../lib":503}],927:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=x("../../plots/template_attributes").texttemplateAttrs,T=x("../../plots/template_attributes").hovertemplateAttrs,_=x("../../components/colorscale/attributes"),e=x("../../plots/font_attributes"),o=x("../../components/drawing/attributes").dash,a=x("../../components/drawing/attributes").pattern,l=x("../../components/drawing"),i=x("./constants"),v=x("../../lib/extend").extendFlat;ue.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:y("x"),yhoverformat:y("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:b({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:T({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:v({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:a,marker:v({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:v({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},_("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},_("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":931}],928:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../../plots/cartesian/axes"),_=x("../../plots/cartesian/align_period"),e=x("../../constants/numerical").BADNUM,o=x("./subtypes"),a=x("./colorscale_calc"),l=x("./arrays_to_calcdata"),i=x("./calc_selection");function v(f,g,m,u,w,c,E){var M=g._length,S=f._fullLayout,C=m._id,O=u._id,I=S._firstScatter[d(g)]===g.uid,N=(p(g,S,m,u)||{}).orientation,F=g.fill;m._minDtick=0,u._minDtick=0;var L={padded:!0},P={padded:!0};E&&(L.ppad=P.ppad=E);var j=M<2||w[0]!==w[M-1]||c[0]!==c[M-1];j&&("tozerox"===F||"tonextx"===F&&(I||"h"===N))?L.tozero=!0:(g.error_y||{}).visible||"tonexty"!==F&&"tozeroy"!==F&&(o.hasMarkers(g)||o.hasText(g))||(L.padded=!1,L.ppad=0),j&&("tozeroy"===F||"tonexty"===F&&(I||"v"===N))?P.tozero=!0:"tonextx"!==F&&"tozerox"!==F||(P.padded=!1),C&&(g._extremes[C]=T.findExtremes(m,w,L)),O&&(g._extremes[O]=T.findExtremes(u,c,P))}function h(f,g){if(o.hasMarkers(f)){var m,u=f.marker,w=1.6*(f.marker.sizeref||1);if(m="area"===f.marker.sizemode?function(C){return Math.max(Math.sqrt((C||0)/w),3)}:function(C){return Math.max((C||0)/w,3)},b.isArrayOrTypedArray(u.size)){var c={type:"linear"};T.setConvert(c);for(var E=c.makeCalcdata(f.marker,"size"),M=new Array(g),S=0;S<g;S++)M[S]=m(E[S]);return M}return m(u.size)}}function s(f,g){var m=d(g),u=f._firstScatter;u[m]||(u[m]=g.uid)}function d(f){var g=f.stackgroup;return f.xaxis+f.yaxis+f.type+(g?"-"+g:"")}function p(f,g,m,u){var w=f.stackgroup;if(w){var c=g._scatterStackOpts[m._id+u._id][w],E="v"===c.orientation?u:m;return"linear"===E.type||"log"===E.type?c:void 0}}ue.exports={calc:function(f,g){var m,u,w,c,E,M,S=f._fullLayout,C=T.getFromId(f,g.xaxis||"x"),O=T.getFromId(f,g.yaxis||"y"),I=C.makeCalcdata(g,"x"),N=O.makeCalcdata(g,"y"),F=_(g,C,"x",I),L=_(g,O,"y",N),P=F.vals,j=L.vals,U=g._length,$=new Array(U),X=g.ids,te=p(g,S,C,O),ae=!1;s(S,g);var J,ee="x",se="y";te?(b.pushUnique(te.traceIndices,g._expandedIndex),(m="v"===te.orientation)?(se="s",J="x"):(ee="s",J="y"),E="interpolate"===te.stackgaps):v(f,g,C,O,P,j,h(g,U));var G=!!g.xperiodalignment,H=!!g.yperiodalignment;for(u=0;u<U;u++){var Y=$[u]={},oe=y(P[u]),W=y(j[u]);oe&&W?(Y[ee]=P[u],Y[se]=j[u],G&&(Y.orig_x=I[u],Y.xEnd=F.ends[u],Y.xStart=F.starts[u]),H&&(Y.orig_y=N[u],Y.yEnd=L.ends[u],Y.yStart=L.starts[u])):te&&(m?oe:W)?(Y[J]=m?P[u]:j[u],Y.gap=!0,E?(Y.s=e,ae=!0):Y.s=0):Y[ee]=Y[se]=e,X&&(Y.id=String(X[u]))}if(l($,g),a(f,g),i($,g),te){for(u=0;u<$.length;)$[u][J]===e?$.splice(u,1):u++;if(b.sort($,function(fe,me){return fe[J]-me[J]||fe.i-me.i}),ae){for(u=0;u<$.length-1&&$[u].gap;)u++;for((M=$[u].s)||(M=$[u].s=0),w=0;w<u;w++)$[w].s=M;for(c=$.length-1;c>u&&$[c].gap;)c--;for(M=$[c].s,w=$.length-1;w>c;w--)$[w].s=M;for(;u<c;)if($[++u].gap){for(w=u+1;$[w].gap;)w++;for(var ne=$[u-1][J],re=$[u-1].s,ce=($[w].s-re)/($[w][J]-ne);u<w;)$[u].s=re+($[u][J]-ne)*ce,u++}}}return $},calcMarkerSize:h,calcAxisExpansion:v,setFirstScatter:s,getStackOpts:p}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":926,"./calc_selection":929,"./colorscale_calc":930,"./subtypes":952,"fast-isnumeric":190}],929:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T){y.isArrayOrTypedArray(T.selectedpoints)&&y.tagSelected(b,T)}},{"../../lib":503}],930:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/helpers").hasColorscale,b=x("../../components/colorscale/calc"),T=x("./subtypes");ue.exports=function(_,e){T.hasLines(e)&&y(e,"line")&&b(_,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),T.hasMarkers(e)&&(y(e,"marker")&&b(_,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),y(e,"marker.line")&&b(_,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":952}],931:[function(x,ue,le){"use strict";ue.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],932:[function(x,ue,le){"use strict";var y=x("./calc");function b(T,_,e,o,a,l,i){a[o]=!0;var s,d,f,g,m,v={i:null,gap:!0,s:0};if(v[i]=e,T.splice(_,0,v),_&&e===T[_-1][i]){var h=T[_-1];v.s=h.s,v.i=h.i,v.gap=h.gap}else l&&(v.s=(f=i,g=(s=T)[(d=_)-1],(m=s[d+1])?g?g.s+(m.s-g.s)*(e-g[f])/(m[f]-g[f]):m.s:g.s));_||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}ue.exports=function(T,_){var e=_.xaxis,o=_.yaxis,l=T._fullLayout._scatterStackOpts[e._id+o._id];if(l){var i,v,h,s,d,p,f,g,m,u,w,c,E,M,S,C=T.calcdata;for(var O in l){var I=(u=l[O]).traceIndices;if(I.length){for(w="interpolate"===u.stackgaps,c=u.groupnorm,"v"===u.orientation?(E="x",M="y"):(E="y",M="x"),S=new Array(I.length),i=0;i<S.length;i++)S[i]=!1;p=C[I[0]];var N=new Array(p.length);for(i=0;i<p.length;i++)N[i]=p[i][E];for(i=1;i<I.length;i++){for(d=C[I[i]],v=h=0;v<d.length;v++){for(f=d[v][E];f>N[h]&&h<N.length;h++)b(d,v,N[h],i,S,w,E),v++;if(f!==N[h]){for(s=0;s<i;s++)b(C[I[s]],h,f,s,S,w,E);N.splice(h,0,f)}h++}for(;h<N.length;h++)b(d,v,N[h],i,S,w,E),v++}var F=N.length;for(v=0;v<p.length;v++){for(g=p[v][M]=p[v].s,i=1;i<I.length;i++)(d=C[I[i]])[0].trace._rawLength=d[0].trace._length,d[0].trace._length=F,d[v][M]=g+=d[v].s;if(c)for(m=("fraction"===c?g:g/100)||1,i=0;i<I.length;i++){var L=C[I[i]][v];L[M]/=m,L.sNorm=L.s/m}}for(i=0;i<I.length;i++){var P=(d=C[I[i]])[0].trace,j=y.calcMarkerSize(P,P._rawLength),U=Array.isArray(j);if(j&&S[i]||U){var $=j;for(j=new Array(F),v=0;v<F;v++)j[v]=d[v].gap?0:U?$[d[v].i]:$}var X=new Array(F),te=new Array(F);for(v=0;v<F;v++)X[v]=d[v].x,te[v]=d[v].y;y.calcAxisExpansion(T,P,e,o,X,te,j),d[0].t.orientation=u.orientation}}}}}},{"./calc":928}],933:[function(x,ue,le){"use strict";ue.exports=function(y){for(var b=0;b<y.length;b++){var T=y[b];if("scatter"===T.type){var _=T.fill;if("none"!==_&&"toself"!==_&&(T.opacity=void 0,"tonexty"===_||"tonextx"===_))for(var e=b-1;e>=0;e--){var o=y[e];if("scatter"===o.type&&o.xaxis===T.xaxis&&o.yaxis===T.yaxis){o.opacity=void 0;break}}}}}},{}],934:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../registry"),T=x("./attributes"),_=x("./constants"),e=x("./subtypes"),o=x("./xy_defaults"),a=x("./period_defaults"),l=x("./stack_defaults"),i=x("./marker_defaults"),v=x("./line_defaults"),h=x("./line_shape_defaults"),s=x("./text_defaults"),d=x("./fillcolor_defaults"),p=x("../../lib").coercePattern;ue.exports=function(f,g,m,u){function w(N,F){return y.coerce(f,g,T,N,F)}var c=o(f,g,u,w);if(c||(g.visible=!1),g.visible){a(f,g,u,w),w("xhoverformat"),w("yhoverformat");var E=l(f,g,u,w),M=!E&&c<_.PTS_LINESONLY?"lines+markers":"lines";w("text"),w("hovertext"),w("mode",M),e.hasLines(g)&&(v(f,g,m,u,w),h(f,g,w),w("connectgaps"),w("line.simplify")),e.hasMarkers(g)&&i(f,g,m,u,w,{gradient:!0}),e.hasText(g)&&(w("texttemplate"),s(f,g,u,w));var S=[];(e.hasMarkers(g)||e.hasText(g))&&(w("cliponaxis"),w("marker.maxdisplayed"),S.push("points")),w("fill",E?E.fillDflt:"none"),"none"!==g.fill&&(d(f,g,m,w),e.hasLines(g)||h(f,g,w),p(w,"fillpattern",g.fillcolor,!1));var C=(g.line||{}).color,O=(g.marker||{}).color;"tonext"!==g.fill&&"toself"!==g.fill||S.push("fills"),w("hoveron",S.join("+")||"points"),"fills"!==g.hoveron&&w("hovertemplate");var I=b.getComponentMethod("errorbars","supplyDefaults");I(f,g,C||O||m,{axis:"y"}),I(f,g,C||O||m,{axis:"x",inherit:"y"}),y.coerceSelectionMarkerOpacity(g,w)}}},{"../../lib":503,"../../registry":638,"./attributes":927,"./constants":931,"./fillcolor_defaults":935,"./line_defaults":940,"./line_shape_defaults":942,"./marker_defaults":946,"./period_defaults":947,"./stack_defaults":950,"./subtypes":952,"./text_defaults":953,"./xy_defaults":954}],935:[function(x,ue,le){"use strict";var y=x("../../components/color"),b=x("../../lib").isArrayOrTypedArray;ue.exports=function(T,_,e,o){var a=!1;if(_.marker){var l=_.marker.color,i=(_.marker.line||{}).color;l&&!b(l)?a=l:i&&!b(i)&&(a=i)}o("fillcolor",y.addOpacity((_.line||{}).color||a||e,.5))}},{"../../components/color":366,"../../lib":503}],936:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes");ue.exports=function(b,T,_){var e={},o={_fullLayout:_},a=y.getFromTrace(o,T,"x"),l=y.getFromTrace(o,T,"y");return e.xLabel=y.tickText(a,a.c2l(b.x),!0).text,e.yLabel=y.tickText(l,l.c2l(b.y),!0).text,e}},{"../../plots/cartesian/axes":554}],937:[function(x,ue,le){"use strict";var y=x("../../components/color"),b=x("./subtypes");ue.exports=function(T,_){var e,o;if("lines"===T.mode)return(e=T.line.color)&&y.opacity(e)?e:T.fillcolor;if("none"===T.mode)return T.fill?T.fillcolor:"";var a=_.mcc||(T.marker||{}).color,l=_.mlcc||((T.marker||{}).line||{}).color;return(o=a&&y.opacity(a)?a:l&&y.opacity(l)&&(_.mlw||((T.marker||{}).line||{}).width)?l:"")?y.opacity(o)<.3?y.addOpacity(o,.3):o:(e=(T.line||{}).color)&&y.opacity(e)&&b.hasLines(T)&&T.line.width?e:T.fillcolor}},{"../../components/color":366,"./subtypes":952}],938:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/fx"),T=x("../../registry"),_=x("./get_trace_color"),e=x("../../components/color"),o=y.fillText;ue.exports=function(a,l,i,v){var h=a.cd,s=h[0].trace,d=a.xa,p=a.ya,f=d.c2p(l),g=p.c2p(i),m=[f,g],u=s.hoveron||"",w=-1!==s.mode.indexOf("markers")?3:.5,c=!!s.xperiodalignment,E=!!s.yperiodalignment;if(-1!==u.indexOf("points")){var M=function(pe){var we=Math.max(w,pe.mrc||0),ye=d.c2p(pe.x)-f,Te=p.c2p(pe.y)-g;return Math.max(Math.sqrt(ye*ye+Te*Te)-we,1-w/we)},S=b.getDistanceFunction(v,function(pe){if(c){var we=d.c2p(pe.xStart),ye=d.c2p(pe.xEnd);return f>=Math.min(we,ye)&&f<=Math.max(we,ye)?0:1/0}var Te=Math.max(3,pe.mrc||0),Le=1-1/Te,Oe=Math.abs(d.c2p(pe.x)-f);return Oe<Te?Le*Oe/Te:Oe-Te+Le},function(pe){if(E){var we=p.c2p(pe.yStart),ye=p.c2p(pe.yEnd);return g>=Math.min(we,ye)&&g<=Math.max(we,ye)?0:1/0}var Te=Math.max(3,pe.mrc||0),Le=1-1/Te,Oe=Math.abs(p.c2p(pe.y)-g);return Oe<Te?Le*Oe/Te:Oe-Te+Le},M);if(b.getClosest(h,S,a),!1!==a.index){var C=h[a.index],O=d.c2p(C.x,!0),I=p.c2p(C.y,!0),N=C.mrc||1;a.index=C.i;var F=h[0].t.orientation,L=F&&(C.sNorm||C.s),P="h"===F?L:void 0!==C.orig_x?C.orig_x:C.x,j="v"===F?L:void 0!==C.orig_y?C.orig_y:C.y;return y.extendFlat(a,{color:_(s,C),x0:O-N,x1:O+N,xLabelVal:P,y0:I-N,y1:I+N,yLabelVal:j,spikeDistance:M(C),hovertemplate:s.hovertemplate}),o(C,s,a),T.getComponentMethod("errorbars","hoverInfo")(C,s,a),[a]}}if(-1!==u.indexOf("fills")&&s._polygons){var U,$,X,te,ae,J,se,G,H=s._polygons,Y=[],oe=!1,W=1/0,ne=-1/0,re=1/0,ce=-1/0;for(U=0;U<H.length;U++)(X=H[U]).contains(m)&&(oe=!oe,Y.push(X),re=Math.min(re,X.ymin),ce=Math.max(ce,X.ymax));if(oe){var fe=((re=Math.max(re,0))+(ce=Math.min(ce,p._length)))/2;for(U=0;U<Y.length;U++)for(te=Y[U].pts,$=1;$<te.length;$++)(se=te[$-1][1])>fe!=(G=te[$][1])>=fe&&(J=te[$-1][0],G-se&&(ae=J+(te[$][0]-J)*(fe-se)/(G-se),W=Math.min(W,ae),ne=Math.max(ne,ae)));W=Math.max(W,0),ne=Math.min(ne,d._length);var me=e.defaultLine;return e.opacity(s.fillcolor)?me=s.fillcolor:e.opacity((s.line||{}).color)&&(me=s.line.color),y.extendFlat(a,{distance:a.maxHoverDistance,x0:W,x1:ne,y0:fe,y1:fe,color:me,hovertemplate:!1}),delete a.index,a.text=s.text&&!Array.isArray(s.text)?String(s.text):s.name,[a]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":937}],939:[function(x,ue,le){"use strict";var y=x("./subtypes");ue.exports={hasLines:y.hasLines,hasMarkers:y.hasMarkers,hasText:y.hasText,isBubble:y.isBubble,attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("./cross_trace_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./cross_trace_calc"),arraysToCalcdata:x("./arrays_to_calcdata"),plot:x("./plot"),colorbar:x("./marker_colorbar"),formatLabels:x("./format_labels"),style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":926,"./attributes":927,"./calc":928,"./cross_trace_calc":932,"./cross_trace_defaults":933,"./defaults":934,"./format_labels":936,"./hover":938,"./marker_colorbar":945,"./plot":948,"./select":949,"./style":951,"./subtypes":952}],940:[function(x,ue,le){"use strict";var y=x("../../lib").isArrayOrTypedArray,b=x("../../components/colorscale/helpers").hasColorscale,T=x("../../components/colorscale/defaults");ue.exports=function(_,e,o,a,l,i){var v=(_.marker||{}).color;l("line.color",o),b(_,"line")?T(_,e,a,l,{prefix:"line.",cLetter:"c"}):l("line.color",!y(v)&&v||o),l("line.width"),(i||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],941:[function(x,ue,le){"use strict";var y=x("../../constants/numerical"),b=y.BADNUM,T=y.LOG_CLIP,_=T+.5,e=T-.5,o=x("../../lib"),a=o.segmentsIntersect,l=o.constrain,i=x("./constants");ue.exports=function(v,h){var s,d,p,f,g,m,u,w,c,E,M,S,C,O,I,N,F,L,P=h.xaxis,j=h.yaxis,U="log"===P.type,$="log"===j.type,X=P._length,te=j._length,ae=h.connectGaps,J=h.baseTolerance,ee=h.shape,se="linear"===ee,G=h.fill&&"none"!==h.fill,H=[],Y=i.minTolerance,oe=v.length,W=new Array(oe),ne=0;function re(it){var ht=v[it];if(!ht)return!1;var Tt=h.linearized?P.l2p(ht.x):P.c2p(ht.x),Ct=h.linearized?j.l2p(ht.y):j.c2p(ht.y);if(Tt===b){if(U&&(Tt=P.c2p(ht.x,!0)),Tt===b)return!1;$&&Ct===b&&(Tt*=Math.abs(P._m*te*(P._m>0?_:e)/(j._m*X*(j._m>0?_:e)))),Tt*=1e3}if(Ct===b){if($&&(Ct=j.c2p(ht.y,!0)),Ct===b)return!1;Ct*=1e3}return[Tt,Ct]}function ce(it,ht,Tt,Ct){var Vt=Tt-it,Ft=Ct-ht,gt=.5-it,ft=.5-ht,Bt=Vt*Vt+Ft*Ft,rn=Vt*gt+Ft*ft;if(rn>0&&rn<Bt){var un=gt*Ft-ft*Vt;if(un*un<Bt)return!0}}function fe(it,ht){var Tt=it[0]/X,Ct=it[1]/te,Vt=Math.max(0,-Tt,Tt-1,-Ct,Ct-1);return Vt&&void 0!==F&&ce(Tt,Ct,F,L)&&(Vt=0),Vt&&ht&&ce(Tt,Ct,ht[0]/X,ht[1]/te)&&(Vt=0),(1+i.toleranceGrowth*Vt)*J}function me(it,ht){var Tt=it[0]-ht[0],Ct=it[1]-ht[1];return Math.sqrt(Tt*Tt+Ct*Ct)}var pe,we,ye,Te,Le,Oe,Re,Ve=i.maxScreensAway,_e=-X*Ve,Ae=X*(1+Ve),Fe=-te*Ve,Pe=te*(1+Ve),Be=[[_e,Fe,Ae,Fe],[Ae,Fe,Ae,Pe],[Ae,Pe,_e,Pe],[_e,Pe,_e,Fe]];function qe(it){if(it[0]<_e||it[0]>Ae||it[1]<Fe||it[1]>Pe)return[l(it[0],_e,Ae),l(it[1],Fe,Pe)]}function We(it,ht){return it[0]===ht[0]&&(it[0]===_e||it[0]===Ae)||it[1]===ht[1]&&(it[1]===Fe||it[1]===Pe)||void 0}function Je(it,ht,Tt){return function(Ct,Vt){var Ft=qe(Ct),gt=qe(Vt),ft=[];if(Ft&&gt&&We(Ft,gt))return ft;Ft&&ft.push(Ft),gt&&ft.push(gt);var Bt=2*o.constrain((Ct[it]+Vt[it])/2,ht,Tt)-((Ft||Ct)[it]+(gt||Vt)[it]);return Bt&&((Ft&&gt?Bt>0==Ft[it]>gt[it]?Ft:gt:Ft||gt)[it]+=Bt),ft}}function ut(it){var ht=it[0],Tt=it[1],Ct=ht===W[ne-1][0],Vt=Tt===W[ne-1][1];if(!Ct||!Vt)if(ne>1){var Ft=ht===W[ne-2][0],gt=Tt===W[ne-2][1];Ct&&(ht===_e||ht===Ae)&&Ft?gt?ne--:W[ne-1]=it:Vt&&(Tt===Fe||Tt===Pe)&&gt?Ft?ne--:W[ne-1]=it:W[ne++]=it}else W[ne++]=it}function Ge(it){W[ne-1][0]!==it[0]&&W[ne-1][1]!==it[1]&&ut([ye,Te]),ut(it),Le=null,ye=Te=0}function Ke(it){if(F=it[0]/X,L=it[1]/te,we=it[1]<Fe?Fe:it[1]>Pe?Pe:0,(pe=it[0]<_e?_e:it[0]>Ae?Ae:0)||we){if(ne)if(Le){var ht=Re(Le,it);ht.length>1&&(Ge(ht[0]),W[ne++]=ht[1])}else Oe=Re(W[ne-1],it)[0],W[ne++]=Oe;else W[ne++]=[pe||it[0],we||it[1]];var Tt=W[ne-1];pe&&we&&(Tt[0]!==pe||Tt[1]!==we)?(Le&&(ye!==pe&&Te!==we?ut(ye&&Te?(Ft=(Vt=it)[0]-(Ct=Le)[0],gt=(Vt[1]-Ct[1])/Ft,(Ct[1]*Vt[0]-Vt[1]*Ct[0])/Ft>0?[gt>0?_e:Ae,Pe]:[gt>0?Ae:_e,Fe]):[ye||pe,Te||we]):ye&&Te&&ut([ye,Te])),ut([pe,we])):ye-pe&&Te-we&&ut([pe||ye,we||Te]),Le=it,ye=pe,Te=we}else Le&&Ge(Re(Le,it)[0]),W[ne++]=it;var Ct,Vt,Ft,gt}for("linear"===ee||"spline"===ee?Re=function(it,ht){for(var Tt=[],Ct=0,Vt=0;Vt<4;Vt++){var Ft=Be[Vt],gt=a(it[0],it[1],ht[0],ht[1],Ft[0],Ft[1],Ft[2],Ft[3]);gt&&(!Ct||Math.abs(gt.x-Tt[0][0])>1||Math.abs(gt.y-Tt[0][1])>1)&&(gt=[gt.x,gt.y],Ct&&me(gt,it)<me(Tt[0],it)?Tt.unshift(gt):Tt.push(gt),Ct++)}return Tt}:"hv"===ee||"vh"===ee?Re=function(it,ht){var Tt=[],Ct=qe(it),Vt=qe(ht);return Ct&&Vt&&We(Ct,Vt)||(Ct&&Tt.push(Ct),Vt&&Tt.push(Vt)),Tt}:"hvh"===ee?Re=Je(0,_e,Ae):"vhv"===ee&&(Re=Je(1,Fe,Pe)),s=0;s<oe;s++)if(d=re(s)){for(ne=0,Le=null,Ke(d),s++;s<oe;s++){if(!(f=re(s))){if(ae)continue;break}if(se&&h.simplify){var nt=re(s+1);if(E=me(f,d),G&&(0===ne||ne===oe-1)||!(E<fe(f,nt)*Y)){for(w=[(f[0]-d[0])/E,(f[1]-d[1])/E],g=d,M=E,S=O=I=0,u=!1,p=f,s++;s<v.length;s++){if(m=nt,nt=re(s+1),!m){if(ae)continue;break}if(N=(c=[m[0]-d[0],m[1]-d[1]])[0]*w[1]-c[1]*w[0],O=Math.min(O,N),(I=Math.max(I,N))-O>fe(m,nt))break;p=m,(C=c[0]*w[0]+c[1]*w[1])>M?(M=C,f=m,u=!1):C<S&&(S=C,g=m,u=!0)}if(u?(Ke(f),p!==g&&Ke(g)):(g!==d&&Ke(g),p!==f&&Ke(f)),Ke(p),s>=v.length||!m)break;Ke(m),d=m}}else Ke(f)}Le&&ut([ye||Le[0],Te||Le[1]]),H.push(W.slice(0,ne))}return H}},{"../../constants/numerical":479,"../../lib":503,"./constants":931}],942:[function(x,ue,le){"use strict";ue.exports=function(y,b,T){"spline"===T("line.shape")&&T("line.smoothing")}},{}],943:[function(x,ue,le){"use strict";var y={tonextx:1,tonexty:1,tonext:1};ue.exports=function(b,T,_){var e,o,a,l,i,v={},h=!1,s=-1,d=0,p=-1;for(o=0;o<_.length;o++)(a=(e=_[o][0].trace).stackgroup||"")?a in v?i=v[a]:(i=v[a]=d,d++):e.fill in y&&p>=0?i=p:(i=p=d,d++),i<s&&(h=!0),e._groupIndex=s=i;var f=_.slice();h&&f.sort(function(m,u){var w=m[0].trace,c=u[0].trace;return w._groupIndex-c._groupIndex||w.index-c.index});var g={};for(o=0;o<f.length;o++)a=(e=f[o][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in y&&(e._prevtrace=(l=g[a])||null,l&&(l._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),g[a]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return f}},{}],944:[function(x,ue,le){"use strict";var y=x("fast-isnumeric");ue.exports=function(b,T){T||(T=2);var _=b.marker,e=_.sizeref||1,o=_.sizemin||0,a="area"===_.sizemode?function(l){return Math.sqrt(l/e)}:function(l){return l/e};return function(l){var i=a(l/T);return y(i)&&i>0?Math.max(i,o):0}}},{"fast-isnumeric":190}],945:[function(x,ue,le){"use strict";ue.exports={container:"marker",min:"cmin",max:"cmax"}},{}],946:[function(x,ue,le){"use strict";var y=x("../../components/color"),b=x("../../components/colorscale/helpers").hasColorscale,T=x("../../components/colorscale/defaults"),_=x("./subtypes");ue.exports=function(e,o,a,l,i,v){var h=_.isBubble(e),s=(e.line||{}).color;v=v||{},s&&(a=s),i("marker.symbol"),i("marker.opacity",h?.7:1),i("marker.size"),i("marker.color",a),b(e,"marker")&&T(e,o,l,i,{prefix:"marker.",cLetter:"c"}),v.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),v.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&o.marker.color!==s?s:h?y.background:y.defaultLine),b(e,"marker.line")&&T(e,o,l,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",h?1:0)),h&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),v.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":952}],947:[function(x,ue,le){"use strict";var y=x("../../lib").dateTick0,b=x("../../constants/numerical").ONEWEEK;function T(_,e){return y(e,_%b==0?1:0)}ue.exports=function(_,e,o,a,l){if(l||(l={x:!0,y:!0}),l.x){var i=a("xperiod");i&&(a("xperiod0",T(i,e.xcalendar)),a("xperiodalignment"))}if(l.y){var v=a("yperiod");v&&(a("yperiod0",T(v,e.ycalendar)),a("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],948:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../registry"),T=x("../../lib"),_=T.ensureSingle,e=T.identity,o=x("../../components/drawing"),a=x("./subtypes"),l=x("./line_points"),i=x("./link_traces"),v=x("../../lib/polygon").tester;function h(s,d,p,f,g,m,u){var w;!function(Ae,Fe,Pe,Be,qe){var We=Pe.xaxis,Je=Pe.yaxis,ut=y.extent(T.simpleMap(We.range,We.r2c)),Ge=y.extent(T.simpleMap(Je.range,Je.r2c)),Ke=Be[0].trace;if(a.hasMarkers(Ke)){var nt=Ke.marker.maxdisplayed;if(0!==nt){var it=Be.filter(function(Vt){return Vt.x>=ut[0]&&Vt.x<=ut[1]&&Vt.y>=Ge[0]&&Vt.y<=Ge[1]}),ht=Math.ceil(it.length/nt),Tt=0;qe.forEach(function(Vt,Ft){var gt=Vt[0].trace;a.hasMarkers(gt)&&gt.marker.maxdisplayed>0&&Ft<Fe&&Tt++});var Ct=Math.round(Tt*ht/3+Math.floor(Tt/3)*ht/7.1);Be.forEach(function(Vt){delete Vt.vis}),it.forEach(function(Vt,Ft){0===Math.round((Ft+Ct)%ht)&&(Vt.vis=!0)})}}}(0,d,p,f,g);var c=!!u&&u.duration>0;function E(Ae){return c?Ae.transition():Ae}var M=p.xaxis,S=p.yaxis,C=f[0].trace,O=C.line,I=y.select(m),N=_(I,"g","errorbars"),F=_(I,"g","lines"),L=_(I,"g","points"),P=_(I,"g","text");if(b.getComponentMethod("errorbars","plot")(s,N,p,u),!0===C.visible){var j,U;E(I).style("opacity",C.opacity);var $=C.fill.charAt(C.fill.length-1);"x"!==$&&"y"!==$&&($=""),f[0][p.isRangePlot?"nodeRangePlot3":"node3"]=I;var X,te,ae="",J=[],ee=C._prevtrace;ee&&(ae=ee._prevRevpath||"",U=ee._nextFill,J=ee._polygons);var se,G,H,Y,oe,W,ne,re="",ce="",fe=[],me=T.noop;if(j=C._ownFill,a.hasLines(C)||"none"!==C.fill){for(U&&U.datum(f),-1!==["hv","vh","hvh","vhv"].indexOf(O.shape)?(se=o.steps(O.shape),G=o.steps(O.shape.split("").reverse().join(""))):se=G="spline"===O.shape?function(Ae){var Fe=Ae[Ae.length-1];return Ae.length>1&&Ae[0][0]===Fe[0]&&Ae[0][1]===Fe[1]?o.smoothclosed(Ae.slice(1),O.smoothing):o.smoothopen(Ae,O.smoothing)}:function(Ae){return"M"+Ae.join("L")},H=function(Ae){return G(Ae.reverse())},fe=l(f,{xaxis:M,yaxis:S,connectGaps:C.connectgaps,baseTolerance:Math.max(O.width||1,3)/4,shape:O.shape,simplify:O.simplify,fill:C.fill}),ne=C._polygons=new Array(fe.length),w=0;w<fe.length;w++)C._polygons[w]=v(fe[w]);fe.length&&(Y=fe[0][0],W=(oe=fe[fe.length-1])[oe.length-1]),me=function(Ae){return function(Fe){if(X=se(Fe),te=H(Fe),re?$?(re+="L"+X.substr(1),ce=te+"L"+ce.substr(1)):(re+="Z"+X,ce=te+"Z"+ce):(re=X,ce=te),a.hasLines(C)&&Fe.length>1){var Pe=y.select(this);if(Pe.datum(f),Ae)E(Pe.style("opacity",0).attr("d",X).call(o.lineGroupStyle)).style("opacity",1);else{var Be=E(Pe);Be.attr("d",X),o.singleLineStyle(f,Be)}}}}}var pe=F.selectAll(".js-line").data(fe);E(pe.exit()).style("opacity",0).remove(),pe.each(me(!1)),pe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(me(!0)),o.setClipUrl(pe,p.layerClipId,s),fe.length?(j?(j.datum(f),Y&&W&&($?("y"===$?Y[1]=W[1]=S.c2p(0,!0):"x"===$&&(Y[0]=W[0]=M.c2p(0,!0)),E(j).attr("d","M"+W+"L"+Y+"L"+re.substr(1)).call(o.singleFillStyle,s)):E(j).attr("d",re+"Z").call(o.singleFillStyle,s))):U&&("tonext"===C.fill.substr(0,6)&&re&&ae?("tonext"===C.fill?E(U).attr("d",re+"Z"+ae+"Z").call(o.singleFillStyle,s):E(U).attr("d",re+"L"+ae.substr(1)+"Z").call(o.singleFillStyle,s),C._polygons=C._polygons.concat(J)):(ye(U),C._polygons=null)),C._prevRevpath=ce,C._prevPolygons=ne):(j?ye(j):U&&ye(U),C._polygons=C._prevRevpath=C._prevPolygons=null),L.datum(f),P.datum(f),function(Ae,Fe,Pe){var Be,qe=Pe[0].trace,We=a.hasMarkers(qe),Je=a.hasText(qe),ut=function Ve(Ae){if(Ae.ids)return Re}(qe),Ge=_e,Ke=_e;if(We||Je){var nt=e,it=qe.stackgroup,ht=it&&"infer zero"===s._fullLayout._scatterStackOpts[M._id+S._id][it].stackgaps;qe.marker.maxdisplayed||qe._needsCull?nt=ht?Le:Te:it&&!ht&&(nt=Oe),We&&(Ge=nt),Je&&(Ke=nt)}var Tt,Ct=(Be=Ae.selectAll("path.point").data(Ge,ut)).enter().append("path").classed("point",!0);c&&Ct.call(o.pointStyle,qe,s).call(o.translatePoints,M,S).style("opacity",0).transition().style("opacity",1),Be.order(),We&&(Tt=o.makePointStyleFns(qe)),Be.each(function(Vt){var Ft=y.select(this),gt=E(Ft);o.translatePoint(Vt,gt,M,S)?(o.singlePointStyle(Vt,gt,qe,Tt,s),p.layerClipId&&o.hideOutsideRangePoint(Vt,gt,M,S,qe.xcalendar,qe.ycalendar),qe.customdata&&Ft.classed("plotly-customdata",null!=Vt.data)):gt.remove()}),c?Be.exit().transition().style("opacity",0).remove():Be.exit().remove(),(Be=Fe.selectAll("g").data(Ke,ut)).enter().append("g").classed("textpoint",!0).append("text"),Be.order(),Be.each(function(Vt){var Ft=y.select(this),gt=E(Ft.select("text"));o.translatePoint(Vt,gt,M,S)?p.layerClipId&&o.hideOutsideRangePoint(Vt,Ft,M,S,qe.xcalendar,qe.ycalendar):Ft.remove()}),Be.selectAll("text").call(o.textPointStyle,qe,s).each(function(Vt){var Ft=M.c2p(Vt.x),gt=S.c2p(Vt.y);y.select(this).selectAll("tspan.line").each(function(){E(y.select(this)).attr({x:Ft,y:gt})})}),Be.exit().remove()}(L,P,f);var we=!1===C.cliponaxis?null:p.layerClipId;o.setClipUrl(L,we,s),o.setClipUrl(P,we,s)}function ye(Ae){E(Ae).attr("d","M0,0Z")}function Te(Ae){return Ae.filter(function(Fe){return!Fe.gap&&Fe.vis})}function Le(Ae){return Ae.filter(function(Fe){return Fe.vis})}function Oe(Ae){return Ae.filter(function(Fe){return!Fe.gap})}function Re(Ae){return Ae.id}function _e(){return!1}}ue.exports=function(s,d,p,f,g,m){var u,w,S,O,c=!g,E=!!g&&g.duration>0,M=i(s,d,p);(u=f.selectAll("g.trace").data(M,function(S){return S[0].trace.uid})).enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),u.order(),S=s,O=d,u.each(function(I){var N=_(y.select(this),"g","fills");o.setClipUrl(N,O.layerClipId,S);var F=I[0].trace,L=[];F._ownfill&&L.push("_ownFill"),F._nexttrace&&L.push("_nextFill");var P=N.selectAll("g").data(L,e);P.enter().append("g"),P.exit().each(function(j){F[j]=null}).remove(),P.order().each(function(j){F[j]=_(y.select(this),"path","js-fill")})}),E?(m&&(w=m()),y.transition().duration(g.duration).ease(g.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){f.selectAll("g.trace").each(function(S,C){h(s,C,d,S,M,this,g)})})):u.each(function(S,C){h(s,C,d,S,M,this,g)}),c&&u.exit().remove(),f.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":941,"./link_traces":943,"./subtypes":952,"@plotly/d3":58}],949:[function(x,ue,le){"use strict";var y=x("./subtypes");ue.exports=function(b,T){var _,e,o,a,l=b.cd,i=b.xaxis,v=b.yaxis,h=[],s=l[0].trace;if(!y.hasMarkers(s)&&!y.hasText(s))return[];if(!1===T)for(_=0;_<l.length;_++)l[_].selected=0;else for(_=0;_<l.length;_++)o=i.c2p((e=l[_]).x),a=v.c2p(e.y),null!==e.i&&T.contains([o,a],!1,_,b)?(h.push({pointNumber:e.i,x:i.c2d(e.x),y:v.c2d(e.y)}),e.selected=1):e.selected=0;return h}},{"./subtypes":952}],950:[function(x,ue,le){"use strict";var y=["orientation","groupnorm","stackgaps"];ue.exports=function(b,T,_,e){var o=_._scatterStackOpts,a=e("stackgroup");if(a){var l=T.xaxis+T.yaxis,i=o[l];i||(i=o[l]={});var v=i[a],h=!1;v?v.traces.push(T):(v=i[a]={traceIndices:[],traces:[T]},h=!0);for(var s={orientation:T.x&&!T.y?"h":"v"},d=0;d<y.length;d++){var p=y[d],f=p+"Found";if(!v[f]){var g=void 0!==b[p],m="orientation"===p;if((g||h)&&(v[p]=e(p,s[p]),m&&(v.fillDflt="h"===v[p]?"tonextx":"tonexty"),g&&(v[f]=!0,!h&&(delete v.traces[0][p],m))))for(var u=0;u<v.traces.length-1;u++){var w=v.traces[u];w._input.fill!==w.fill&&(w.fill=v.fillDflt)}}}return v}}},{}],951:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/drawing"),T=x("../../registry");function _(o,a,l){b.pointStyle(o.selectAll("path.point"),a,l)}function e(o,a,l){b.textPointStyle(o.selectAll("text"),a,l)}ue.exports={style:function(o){var a=y.select(o).selectAll("g.trace.scatter");a.style("opacity",function(l){return l[0].trace.opacity}),a.selectAll("g.points").each(function(l){_(y.select(this),l.trace||l[0].trace,o)}),a.selectAll("g.text").each(function(l){e(y.select(this),l.trace||l[0].trace,o)}),a.selectAll("g.trace path.js-line").call(b.lineGroupStyle),a.selectAll("g.trace path.js-fill").call(b.fillGroupStyle,o),T.getComponentMethod("errorbars","style")(a)},stylePoints:_,styleText:e,styleOnSelect:function(o,a,l){var i=a[0].trace;i.selectedpoints?(b.selectedPointStyle(l.selectAll("path.point"),i),b.selectedTextStyle(l.selectAll("text"),i)):(_(l,i,o),e(l,i,o))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],952:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports={hasLines:function(b){return b.visible&&b.mode&&-1!==b.mode.indexOf("lines")},hasMarkers:function(b){return b.visible&&(b.mode&&-1!==b.mode.indexOf("markers")||"splom"===b.type)},hasText:function(b){return b.visible&&b.mode&&-1!==b.mode.indexOf("text")},isBubble:function(b){return y.isPlainObject(b.marker)&&y.isArrayOrTypedArray(b.marker.size)}}},{"../../lib":503}],953:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T,_,e,o){o=o||{},e("textposition"),y.coerceFont(e,"textfont",_.font),o.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],954:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../registry");ue.exports=function(T,_,e,o){var a,l=o("x"),i=o("y");if(b.getComponentMethod("calendars","handleTraceDefaults")(T,_,["x","y"],e),l){var v=y.minRowLength(l);i?a=Math.min(v,y.minRowLength(i)):(a=v,o("y0"),o("dy"))}else{if(!i)return 0;a=y.minRowLength(i),o("x0"),o("dx")}return _._length=a,a}},{"../../lib":503,"../../registry":638}],955:[function(x,ue,le){"use strict";var y=x("../scatter/attributes"),b=x("../../components/colorscale/attributes"),T=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../plots/template_attributes").texttemplateAttrs,o=x("../../plots/attributes"),a=x("../../constants/gl3d_dashes"),l=x("../../constants/gl3d_markers"),i=x("../../lib/extend").extendFlat,v=x("../../plot_api/edit_types").overrideAll,h=x("../../lib/sort_object_keys"),d=y.marker,p=d.line,f=i({width:y.line.width,dash:{valType:"enumerated",values:h(a),dflt:"solid"}},b("line")),g=ue.exports=v({x:y.x,y:y.y,z:{valType:"data_array"},text:i({},y.text,{}),texttemplate:e({},{}),hovertext:i({},y.hovertext,{}),hovertemplate:_(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:i({},y.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:y.connectgaps,line:f,marker:i({symbol:{valType:"enumerated",values:h(l),dflt:"circle",arrayOk:!0},size:i({},d.size,{dflt:8}),sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:i({},d.opacity,{arrayOk:!1}),colorbar:d.colorbar,line:i({width:i({},p.width,{arrayOk:!1})},b("marker.line"))},b("marker")),textposition:i({},y.textposition,{dflt:"top center"}),textfont:{color:y.textfont.color,size:y.textfont.size,family:i({},y.textfont.family,{arrayOk:!1})},opacity:o.opacity,hoverinfo:i({},o.hoverinfo)},"calc","nested");g.x.editType=g.y.editType=g.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":927}],956:[function(x,ue,le){"use strict";var y=x("../scatter/arrays_to_calcdata"),b=x("../scatter/colorscale_calc");ue.exports=function(T,_){var e=[{x:!1,y:!1,trace:_,t:{}}];return y(e,_),b(T,_),e}},{"../scatter/arrays_to_calcdata":926,"../scatter/colorscale_calc":930}],957:[function(x,ue,le){"use strict";var y=x("../../registry");function b(T,_,e,o){if(!_||!_.visible)return null;for(var a=y.getComponentMethod("errorbars","makeComputeError")(_),l=new Array(T.length),i=0;i<T.length;i++){var v=a(+T[i],i);if("log"===o.type){var h=o.c2l(T[i]),s=T[i]-v[0],d=T[i]+v[1];if(l[i]=[(o.c2l(s,!0)-h)*e,(o.c2l(d,!0)-h)*e],s>0){var p=o.c2l(s);o._lowerLogErrorBound||(o._lowerLogErrorBound=p),o._lowerErrorBound=Math.min(o._lowerLogErrorBound,p)}}else l[i]=[-v[0]*e,v[1]*e]}return l}ue.exports=function(T,_,e){var o=[b(T.x,T.error_x,_[0],e.xaxis),b(T.y,T.error_y,_[1],e.yaxis),b(T.z,T.error_z,_[2],e.zaxis)],a=function(d){for(var p=0;p<d.length;p++)if(d[p])return d[p].length;return 0}(o);if(0===a)return null;for(var l=new Array(a),i=0;i<a;i++){for(var v=[[0,0,0],[0,0,0]],h=0;h<3;h++)if(o[h])for(var s=0;s<2;s++)v[s][h]=o[h][i][s];l[i]=v}return l}},{"../../registry":638}],958:[function(x,ue,le){"use strict";var y=x("../../../stackgl_modules").gl_line3d,b=x("../../../stackgl_modules").gl_scatter3d,T=x("../../../stackgl_modules").gl_error3d,_=x("../../../stackgl_modules").gl_mesh3d,e=x("../../../stackgl_modules").delaunay_triangulate,o=x("../../lib"),a=x("../../lib/str2rgbarray"),l=x("../../lib/gl_format_color").formatColor,i=x("../scatter/make_bubble_size_func"),v=x("../../constants/gl3d_dashes"),h=x("../../constants/gl3d_markers"),s=x("../../plots/cartesian/axes"),d=x("../../components/fx/helpers").appendArrayPointValue,p=x("./calc_errors");function f(O,I){this.scene=O,this.uid=I,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var g=f.prototype;function m(O){return null==O?0:O.indexOf("left")>-1?-1:O.indexOf("right")>-1?1:0}function u(O){return null==O?0:O.indexOf("top")>-1?-1:O.indexOf("bottom")>-1?1:0}function w(O,I){return I(4*O)}function c(O){return h[O]}function E(O,I,N,F,L){var P=null;if(o.isArrayOrTypedArray(O)){P=[];for(var j=0;j<I;j++)P[j]=void 0===O[j]?F:N(O[j],L)}else P=N(O,o.identity);return P}function S(O){if(o.isArrayOrTypedArray(O)){var I=O[0];return o.isArrayOrTypedArray(I)&&(O=I),"rgb("+O.slice(0,3).map(function(N){return Math.round(255*N)})+")"}return null}function C(O){return o.isArrayOrTypedArray(O)?4===O.length&&"number"==typeof O[0]?S(O):O.map(S):null}g.handlePick=function(O){if(O.object&&(O.object===this.linePlot||O.object===this.delaunayMesh||O.object===this.textMarkers||O.object===this.scatterPlot)){var I=O.index=O.data.index;return O.object.highlight&&O.object.highlight(null),this.scatterPlot&&(O.object=this.scatterPlot,this.scatterPlot.highlight(O.data)),O.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[I]||0===this.textLabels[I])&&(O.textLabel=this.textLabels[I]):O.textLabel=this.textLabels),O.traceCoordinate=[this.data.x[I],this.data.y[I],this.data.z[I]],!0}},g.update=function(O){var I,N,F,L,P=this.scene.glplot.gl,j=v.solid;this.data=O;var U=function M(O,I){var N,F,L,P,j,U,$=[],X=O.fullSceneLayout,te=O.dataScale,ae=X.xaxis,J=X.yaxis,ee=X.zaxis,se=I.marker,G=I.line,H=I.x||[],Y=I.y||[],oe=I.z||[],W=H.length,ne=I.xcalendar,re=I.ycalendar,ce=I.zcalendar;for(j=0;j<W;j++)N=ae.d2l(H[j],0,ne)*te[0],F=J.d2l(Y[j],0,re)*te[1],L=ee.d2l(oe[j],0,ce)*te[2],$[j]=[N,F,L];if(Array.isArray(I.text))U=I.text;else if(void 0!==I.text)for(U=new Array(W),j=0;j<W;j++)U[j]=I.text;function fe(Be,qe){var We=X[Be];return s.tickText(We,We.d2l(qe),!0).text}var me=I.texttemplate;if(me){var pe=O.fullLayout._d3locale,we=Array.isArray(me),ye=we?Math.min(me.length,W):W,Te=we?function(Be){return me[Be]}:function(){return me};for(U=new Array(ye),j=0;j<ye;j++){var Le={x:H[j],y:Y[j],z:oe[j]},Oe={xLabel:fe("xaxis",H[j]),yLabel:fe("yaxis",Y[j]),zLabel:fe("zaxis",oe[j])},Re={};d(Re,I,j);var Ve=I._meta||{};U[j]=o.texttemplateString(Te(j),Oe,pe,Re,Le,Ve)}}if(P={position:$,mode:I.mode,text:U},"line"in I&&(P.lineColor=l(G,1,W),P.lineWidth=G.width,P.lineDashes=G.dash),"marker"in I){var _e=i(I);P.scatterColor=l(se,1,W),P.scatterSize=E(se.size,W,w,20,_e),P.scatterMarker=E(se.symbol,W,c,"\u25cf"),P.scatterLineWidth=se.line.width,P.scatterLineColor=l(se.line,1,W),P.scatterAngle=0}"textposition"in I&&(P.textOffset=function(Be){var qe=[0,0];if(Array.isArray(Be))for(var We=0;We<Be.length;We++)qe[We]=[0,0],Be[We]&&(qe[We][0]=m(Be[We]),qe[We][1]=u(Be[We]));else qe[0]=m(Be),qe[1]=u(Be);return qe}(I.textposition),P.textColor=l(I.textfont,1,W),P.textSize=E(I.textfont.size,W,o.identity,12),P.textFont=I.textfont.family,P.textAngle=0);var Ae=["x","y","z"];for(P.project=[!1,!1,!1],P.projectScale=[1,1,1],P.projectOpacity=[1,1,1],j=0;j<3;++j){var Fe=I.projection[Ae[j]];(P.project[j]=Fe.show)&&(P.projectOpacity[j]=Fe.opacity,P.projectScale[j]=Fe.scale)}P.errorBounds=p(I,te,X);var Pe=function(Be){for(var qe=[0,0,0],We=[[0,0,0],[0,0,0],[0,0,0]],Je=[1,1,1],ut=0;ut<3;ut++){var Ge=Be[ut];Ge&&!1!==Ge.copy_zstyle&&!1!==Be[2].visible&&(Ge=Be[2]),Ge&&Ge.visible&&(qe[ut]=Ge.width/2,We[ut]=a(Ge.color),Je[ut]=Ge.thickness)}return{capSize:qe,color:We,lineWidth:Je}}([I.error_x,I.error_y,I.error_z]);return P.errorColor=Pe.color,P.errorLineWidth=Pe.lineWidth,P.errorCapSize=Pe.capSize,P.delaunayAxis=I.surfaceaxis,P.delaunayColor=a(I.surfacecolor),P}(this.scene,O);"mode"in U&&(this.mode=U.mode),"lineDashes"in U&&U.lineDashes in v&&(j=v[U.lineDashes]),this.color=C(U.scatterColor)||C(U.lineColor),this.dataPoints=U.position,I={gl:this.scene.glplot.gl,position:U.position,color:U.lineColor,lineWidth:U.lineWidth||1,dashes:j[0],dashScale:j[1],opacity:O.opacity,connectGaps:O.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(I):(this.linePlot=y(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var $=O.opacity;if(O.marker&&O.marker.opacity&&($*=O.marker.opacity),N={gl:this.scene.glplot.gl,position:U.position,color:U.scatterColor,size:U.scatterSize,glyph:U.scatterMarker,opacity:$,orthographic:!0,lineWidth:U.scatterLineWidth,lineColor:U.scatterLineColor,project:U.project,projectScale:U.projectScale,projectOpacity:U.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(N):(this.scatterPlot=b(N),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:U.position,glyph:U.text,color:U.textColor,size:U.textSize,angle:U.textAngle,alignment:U.textOffset,font:U.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:O.opacity},this.textLabels=O.hovertext||O.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=b(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),F={gl:this.scene.glplot.gl,position:U.position,color:U.errorColor,error:U.errorBounds,lineWidth:U.errorLineWidth,capSize:U.errorCapSize,opacity:O.opacity},this.errorBars?U.errorBounds?this.errorBars.update(F):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):U.errorBounds&&(this.errorBars=T(F),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),U.delaunayAxis>=0){var X=function(te,ae,J){var ee,se=(J+1)%3,G=(J+2)%3,H=[],Y=[];for(ee=0;ee<te.length;++ee){var oe=te[ee];!isNaN(oe[se])&&isFinite(oe[se])&&!isNaN(oe[G])&&isFinite(oe[G])&&(H.push([oe[se],oe[G]]),Y.push(ee))}var W=e(H);for(ee=0;ee<W.length;++ee)for(var ne=W[ee],re=0;re<ne.length;++re)ne[re]=Y[ne[re]];return{positions:te,cells:W,meshColor:ae}}(U.position,U.delaunayColor,U.delaunayAxis);X.opacity=O.opacity,this.delaunayMesh?this.delaunayMesh.update(X):(X.gl=P,this.delaunayMesh=_(X),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},g.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ue.exports=function(O,I){var N=new f(O,I.uid);return N.update(I),N}},{"../../../stackgl_modules":1124,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":944,"./calc_errors":957}],959:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("../scatter/subtypes"),_=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),o=x("../scatter/text_defaults"),a=x("./attributes");ue.exports=function(l,i,v,h){function s(w,c){return b.coerce(l,i,a,w,c)}if(w=l,c=i,M=h,S=0,C=(E=s)("x"),O=E("y"),I=E("z"),y.getComponentMethod("calendars","handleTraceDefaults")(w,c,["x","y","z"],M),C&&O&&I&&(S=Math.min(C.length,O.length,I.length),c._length=c._xlength=c._ylength=c._zlength=S),S){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),s("mode"),T.hasLines(i)&&(s("connectgaps"),e(l,i,v,h,s)),T.hasMarkers(i)&&_(l,i,v,h,s,{noSelect:!0}),T.hasText(i)&&(s("texttemplate"),o(l,i,h,s,{noSelect:!0}));var d=(i.line||{}).color,p=(i.marker||{}).color;s("surfaceaxis")>=0&&s("surfacecolor",d||p);for(var f=["x","y","z"],g=0;g<3;++g){var m="projection."+f[g];s(m+".show")&&(s(m+".opacity"),s(m+".scale"))}var u=y.getComponentMethod("errorbars","supplyDefaults");u(l,i,d||p||v,{axis:"z"}),u(l,i,d||p||v,{axis:"y",inherit:"z"}),u(l,i,d||p||v,{axis:"x",inherit:"z"})}else i.visible=!1;var w,c,E,M,S,C,O,I}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":955}],960:[function(x,ue,le){"use strict";ue.exports={plot:x("./convert"),attributes:x("./attributes"),markerSymbols:x("../../constants/gl3d_markers"),supplyDefaults:x("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:x("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":955,"./calc":956,"./convert":958,"./defaults":959}],961:[function(x,ue,le){"use strict";var y=x("../scatter/attributes"),b=x("../../plots/attributes"),T=x("../../plots/template_attributes").hovertemplateAttrs,_=x("../../plots/template_attributes").texttemplateAttrs,e=x("../../components/colorscale/attributes"),o=x("../../lib/extend").extendFlat,a=y.marker,l=y.line,i=a.line;ue.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:o({},y.mode,{dflt:"markers"}),text:o({},y.text,{}),texttemplate:_({editType:"plot"},{keys:["a","b","text"]}),hovertext:o({},y.hovertext,{}),line:{color:l.color,width:l.width,dash:l.dash,shape:o({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:y.connectgaps,fill:o({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,marker:o({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:o({width:i.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:y.textfont,textposition:y.textposition,selected:y.selected,unselected:y.unselected,hoverinfo:o({},b.hoverinfo,{flags:["a","b","text","name"]}),hoveron:y.hoveron,hovertemplate:T()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],962:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../scatter/colorscale_calc"),T=x("../scatter/arrays_to_calcdata"),_=x("../scatter/calc_selection"),e=x("../scatter/calc").calcMarkerSize,o=x("../carpet/lookup_carpetid");ue.exports=function(a,l){var i=l._carpetTrace=o(a,l);if(i&&i.visible&&"legendonly"!==i.visible){var v;l.xaxis=i.xaxis,l.yaxis=i.yaxis;var h,s,d=l._length,p=new Array(d),f=!1;for(v=0;v<d;v++)if(s=l.b[v],y(h=l.a[v])&&y(s)){var g=i.ab2xy(+h,+s,!0),m=i.isVisible(+h,+s);m||(f=!0),p[v]={x:g[0],y:g[1],a:h,b:s,vis:m}}else p[v]={x:!1,y:!1};return l._needsCull=f,p[0].carpet=i,p[0].trace=l,e(l,d),b(a,l),T(p,l),_(p,l),p}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],963:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/constants"),T=x("../scatter/subtypes"),_=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),o=x("../scatter/line_shape_defaults"),a=x("../scatter/text_defaults"),l=x("../scatter/fillcolor_defaults"),i=x("./attributes");ue.exports=function(v,h,s,d){function p(w,c){return y.coerce(v,h,i,w,c)}p("carpet"),h.xaxis="x",h.yaxis="y";var f=p("a"),g=p("b"),m=Math.min(f.length,g.length);if(m){h._length=m,p("text"),p("texttemplate"),p("hovertext"),p("mode",m<b.PTS_LINESONLY?"lines+markers":"lines"),T.hasLines(h)&&(e(v,h,s,d,p),o(v,h,p),p("connectgaps")),T.hasMarkers(h)&&_(v,h,s,d,p,{gradient:!0}),T.hasText(h)&&a(v,h,d,p);var u=[];(T.hasMarkers(h)||T.hasText(h))&&(p("marker.maxdisplayed"),u.push("points")),p("fill"),"none"!==h.fill&&(l(v,h,s,p),T.hasLines(h)||o(v,h,p)),"tonext"!==h.fill&&"toself"!==h.fill||u.push("fills"),"fills"!==p("hoveron",u.join("+")||"points")&&p("hovertemplate"),y.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":961}],964:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_,e){var o=_[e];return y.a=o.a,y.b=o.b,y.y=o.y,y}},{}],965:[function(x,ue,le){"use strict";ue.exports=function(y,b){var T={},_=b._carpet,e=_.ab2ij([y.a,y.b]),o=Math.floor(e[0]),a=e[0]-o,l=Math.floor(e[1]),v=_.evalxy([],o,l,a,e[1]-l);return T.yLabel=v[1].toFixed(3),T}},{}],966:[function(x,ue,le){"use strict";var y=x("../scatter/hover"),b=x("../../lib").fillText;ue.exports=function(T,_,e,o){var a=y(T,_,e,o);if(a&&!1!==a[0].index){var l=a[0];if(void 0===l.index){var v=T.xa._length,h=v*(1-l.y0/T.ya._length)/2,s=v-h;return l.x0=Math.max(Math.min(l.x0,s),h),l.x1=Math.max(Math.min(l.x1,s),h),a}var d=l.cd[l.index];l.a=d.a,l.b=d.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var p=l.trace,f=p._carpet,g=p._module.formatLabels(d,p);l.yLabel=g.yLabel,delete l.text;var m=[];if(!p.hovertemplate){var u=(d.hi||p.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["a","b","text"]),-1!==u.indexOf("a")&&w(f.aaxis,d.a),-1!==u.indexOf("b")&&w(f.baxis,d.b),m.push("y: "+l.yLabel),-1!==u.indexOf("text")&&b(d,p,m),l.extraText=m.join("<br>")}return a}function w(c,E){var M;M=c.labelprefix&&c.labelprefix.length>0?c.labelprefix.replace(/ = $/,""):c._hovertitle,m.push(M+": "+E.toFixed(3)+c.labelsuffix)}}},{"../../lib":503,"../scatter/hover":938}],967:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../scatter/select"),eventData:x("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:x("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":961,"./calc":962,"./defaults":963,"./event_data":964,"./format_labels":965,"./hover":966,"./plot":968}],968:[function(x,ue,le){"use strict";var y=x("../scatter/plot"),b=x("../../plots/cartesian/axes"),T=x("../../components/drawing");ue.exports=function(_,e,o,a){var l,v,h=o[0][0].carpet,s={xaxis:b.getFromId(_,h.xaxis||"x"),yaxis:b.getFromId(_,h.yaxis||"y"),plot:e.plot};for(y(_,s,o,a),l=0;l<o.length;l++)v=a.selectAll("g.trace"+o[l][0].trace.uid+" .js-line"),T.setClipUrl(v,o[l][0].carpet._clipPathId,_)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":948}],969:[function(x,ue,le){"use strict";var y=x("../../plots/template_attributes").hovertemplateAttrs,b=x("../../plots/template_attributes").texttemplateAttrs,T=x("../scatter/attributes"),_=x("../../plots/attributes"),e=x("../../components/colorscale/attributes"),o=x("../../components/drawing/attributes").dash,a=x("../../lib/extend").extendFlat,l=x("../../plot_api/edit_types").overrideAll,i=T.marker,v=T.line,h=i.line;ue.exports=l({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:a({},T.mode,{dflt:"markers"}),text:a({},T.text,{}),texttemplate:b({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:v.color,width:v.width,dash:o},connectgaps:T.connectgaps,marker:a({symbol:i.symbol,opacity:i.opacity,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,colorbar:i.colorbar,line:a({width:h.width},e("marker.line")),gradient:i.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:T.fillcolor,selected:T.selected,unselected:T.unselected,hoverinfo:a({},_.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:y()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],970:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../constants/numerical").BADNUM,T=x("../scatter/colorscale_calc"),_=x("../scatter/arrays_to_calcdata"),e=x("../scatter/calc_selection"),o=x("../../lib")._;function a(l){return l&&"string"==typeof l}ue.exports=function(l,i){var v,h=Array.isArray(i.locations),s=h?i.locations.length:i._length,d=new Array(s);v=i.geojson?function(w){return a(w)||y(w)}:a;for(var p=0;p<s;p++){var f=d[p]={};if(h){var g=i.locations[p];f.loc=v(g)?g:null}else{var m=i.lon[p],u=i.lat[p];f.lonlat=y(m)&&y(u)?[+m,+u]:[b,b]}}return _(d,i),T(l,i),e(d,i),s&&(d[0].t={labels:{lat:o(l,"lat:")+" ",lon:o(l,"lon:")+" "}}),d}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],971:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/subtypes"),T=x("../scatter/marker_defaults"),_=x("../scatter/line_defaults"),e=x("../scatter/text_defaults"),o=x("../scatter/fillcolor_defaults"),a=x("./attributes");ue.exports=function(l,i,v,h){function s(w,c){return y.coerce(l,i,a,w,c)}var d,p=s("locations");if(p&&p.length){var f,g=s("geojson");("string"==typeof g&&""!==g||y.isPlainObject(g))&&(f="geojson-id"),"geojson-id"===s("locationmode",f)&&s("featureidkey"),d=p.length}else{var m=s("lon")||[],u=s("lat")||[];d=Math.min(m.length,u.length)}d?(i._length=d,s("text"),s("hovertext"),s("hovertemplate"),s("mode"),b.hasLines(i)&&(_(l,i,v,h,s),s("connectgaps")),b.hasMarkers(i)&&T(l,i,v,h,s,{gradient:!0}),b.hasText(i)&&(s("texttemplate"),e(l,i,h,s)),s("fill"),"none"!==i.fill&&o(l,i,v,s),y.coerceSelectionMarkerOpacity(i,s)):i.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":969}],972:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_,e){y.lon=b.lon,y.lat=b.lat,y.location=b.loc?b.loc:null;var o=_[e];return o.fIn&&o.fIn.properties&&(y.properties=o.fIn.properties),y}},{}],973:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes");ue.exports=function(b,T,_){var e={},o=_[T.geo]._subplot.mockAxis,a=b.lonlat;return e.lonLabel=y.tickText(o,o.c2l(a[0]),!0).text,e.latLabel=y.tickText(o,o.c2l(a[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],974:[function(x,ue,le){"use strict";var y=x("../../components/fx"),b=x("../../constants/numerical").BADNUM,T=x("../scatter/get_trace_color"),_=x("../../lib").fillText,e=x("./attributes");ue.exports=function(o,a,l){var i=o.cd,v=i[0].trace,h=o.xa,s=o.ya,d=o.subplot,p=d.projection.isLonLatOverEdges,f=d.project;if(y.getClosest(i,function(M){var S=M.lonlat;if(S[0]===b||p(S))return 1/0;var C=f(S),O=f([a,l]),I=Math.abs(C[0]-O[0]),N=Math.abs(C[1]-O[1]),F=Math.max(3,M.mrc||0);return Math.max(Math.sqrt(I*I+N*N)-F,1-3/F)},o),!1!==o.index){var g=i[o.index],m=g.lonlat,u=[h.c2p(m),s.c2p(m)],w=g.mrc||1;o.x0=u[0]-w,o.x1=u[0]+w,o.y0=u[1]-w,o.y1=u[1]+w,o.loc=g.loc,o.lon=m[0],o.lat=m[1];var c={};c[v.geo]={_subplot:d};var E=v._module.formatLabels(g,v,c);return o.lonLabel=E.lonLabel,o.latLabel=E.latLabel,o.color=T(v,g),o.extraText=function(M,S,C,O){if(!M.hovertemplate){var I=S.hi||M.hoverinfo,N="all"===I?e.hoverinfo.flags:I.split("+"),F=-1!==N.indexOf("location")&&Array.isArray(M.locations),L=-1!==N.indexOf("lon"),P=-1!==N.indexOf("lat"),j=-1!==N.indexOf("text"),U=[];return F?U.push(S.loc):L&&P?U.push("("+$(C.latLabel)+", "+$(C.lonLabel)+")"):L?U.push(O.lon+$(C.lonLabel)):P&&U.push(O.lat+$(C.latLabel)),j&&_(S,M,U),U.join("<br>")}function $(X){return X+"\xb0"}}(v,g,o,i[0].t.labels),o.hovertemplate=v.hovertemplate,[o]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937,"./attributes":969}],975:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),calcGeoJSON:x("./plot").calcGeoJSON,plot:x("./plot").plot,style:x("./style"),styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:x("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":945,"../scatter/style":951,"./attributes":969,"./calc":970,"./defaults":971,"./event_data":972,"./format_labels":973,"./hover":974,"./plot":976,"./select":977,"./style":978}],976:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../lib/topojson_utils").getTopojsonFeatures,_=x("../../lib/geojson_utils"),e=x("../../lib/geo_location_utils"),o=x("../../plots/cartesian/autorange").findExtremes,a=x("../../constants/numerical").BADNUM,l=x("../scatter/calc").calcMarkerSize,i=x("../scatter/subtypes"),v=x("./style");ue.exports={calcGeoJSON:function(h,s){var d,p,f=h[0].trace,g=s[f.geo],m=g._subplot,u=f._length;if(Array.isArray(f.locations)){var w=f.locationmode,c="geojson-id"===w?e.extractTraceFeature(h):T(f,m.topojson);for(d=0;d<u;d++){p=h[d];var E="geojson-id"===w?p.fOut:e.locationToFeature(w,p.loc,c);p.lonlat=E?E.properties.ct:[a,a]}}var M,S,C={padded:!0};if("geojson"===g.fitbounds&&"geojson-id"===f.locationmode){var O=e.computeBbox(e.getTraceGeojson(f));M=[O[0],O[2]],S=[O[1],O[3]]}else{for(M=new Array(u),S=new Array(u),d=0;d<u;d++)M[d]=(p=h[d]).lonlat[0],S[d]=p.lonlat[1];C.ppad=l(f,u)}f._extremes.lon=o(g.lonaxis._ax,M,C),f._extremes.lat=o(g.lataxis._ax,S,C)},plot:function(h,s,d){var p=s.layers.frontplot.select(".scatterlayer"),f=b.makeTraceGroups(p,d,"trace scattergeo");function g(m,u){m.lonlat[0]===a&&y.select(u).remove()}f.selectAll("*").remove(),f.each(function(m){var u=y.select(this),w=m[0].trace;if(i.hasLines(w)||"none"!==w.fill){var c=_.calcTraceToLineCoords(m),E="none"!==w.fill?_.makePolygon(c):_.makeLine(c);u.selectAll("path.js-line").data([{geojson:E,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(w)&&u.selectAll("path.point").data(b.identity).enter().append("path").classed("point",!0).each(function(M){g(M,this)}),i.hasText(w)&&u.selectAll("g").data(b.identity).enter().append("g").append("text").each(function(M){g(M,this)}),v(h,m)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":928,"../scatter/subtypes":952,"./style":978,"@plotly/d3":58}],977:[function(x,ue,le){"use strict";var y=x("../scatter/subtypes"),b=x("../../constants/numerical").BADNUM;ue.exports=function(T,_){var e,o,a,l,i,v=T.cd,h=T.xaxis,s=T.yaxis,d=[],p=v[0].trace;if(!y.hasMarkers(p)&&!y.hasText(p))return[];if(!1===_)for(i=0;i<v.length;i++)v[i].selected=0;else for(i=0;i<v.length;i++)(o=(e=v[i]).lonlat)[0]!==b&&(a=h.c2p(o),l=s.c2p(o),_.contains([a,l],null,i,T)?(d.push({pointNumber:i,lon:o[0],lat:o[1]}),e.selected=1):e.selected=0);return d}},{"../../constants/numerical":479,"../scatter/subtypes":952}],978:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/drawing"),T=x("../../components/color"),_=x("../scatter/style"),e=_.stylePoints,o=_.styleText;ue.exports=function(a,l){var i,v,h,s;l&&(i=a,h=(v=l)[0].trace,(s=v[0].node3).style("opacity",v[0].trace.opacity),e(s,h,i),o(s,h,i),s.selectAll("path.js-line").style("fill","none").each(function(d){var p=y.select(this),f=d.trace,g=f.line||{};p.call(T.stroke,g.color).call(b.dashLine,g.dash||"",g.width||0),"none"!==f.fill&&p.call(T.fill,f.fillcolor)}))}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":951,"@plotly/d3":58}],979:[function(x,ue,le){"use strict";var y=x("../../plots/attributes"),b=x("../scatter/attributes"),T=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=x("../../components/colorscale/attributes"),e=x("../../lib/sort_object_keys"),o=x("../../lib/extend").extendFlat,a=x("../../plot_api/edit_types").overrideAll,l=x("./constants").DASHES,i=b.line,v=b.marker,h=v.line,s=ue.exports=a({x:b.x,x0:b.x0,dx:b.dx,y:b.y,y0:b.y0,dy:b.dy,xperiod:b.xperiod,yperiod:b.yperiod,xperiod0:b.xperiod0,yperiod0:b.yperiod0,xperiodalignment:b.xperiodalignment,yperiodalignment:b.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),text:b.text,hovertext:b.hovertext,textposition:b.textposition,textfont:b.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:i.color,width:i.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(l),dflt:"solid"}},marker:o({},_("marker"),{symbol:v.symbol,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode,opacity:v.opacity,colorbar:v.colorbar,line:o({},_("marker.line"),{width:h.width})}),connectgaps:b.connectgaps,fill:o({},b.fill,{dflt:"none"}),fillcolor:b.fillcolor,selected:{marker:b.selected.marker,textfont:b.selected.textfont},unselected:{marker:b.unselected.marker,textfont:b.unselected.textfont},opacity:y.opacity},"calc","nested");s.x.editType=s.y.editType=s.x0.editType=s.y0.editType="calc+clearAxisTypes",s.hovertemplate=b.hovertemplate,s.texttemplate=b.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927,"./constants":982}],980:[function(x,ue,le){"use strict";var y=x("./hover");ue.exports={moduleType:"trace",name:"scattergl",basePlotModule:x("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../scatter/cross_trace_defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),hoverPoints:y.hoverPoints,selectPoints:x("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":933,"../scatter/marker_colorbar":945,"./attributes":979,"./calc":981,"./defaults":984,"./format_labels":986,"./hover":988,"./select":992}],981:[function(x,ue,le){"use strict";var y=x("@plotly/point-cluster"),b=x("../../lib"),T=x("../../plots/cartesian/axis_ids"),_=x("../../plots/cartesian/autorange").findExtremes,e=x("../../plots/cartesian/align_period"),o=x("../scatter/calc"),a=o.calcMarkerSize,l=o.calcAxisExpansion,i=o.setFirstScatter,v=x("../scatter/colorscale_calc"),h=x("./convert"),s=x("./scene_update"),d=x("../../constants/numerical").BADNUM,p=x("./constants").TOO_MANY_POINTS;function f(g,m,u){var w=g._extremes[m._id],c=_(m,u._bnds,{padded:!0});w.min=w.min.concat(c.min),w.max=w.max.concat(c.max)}ue.exports=function(g,m){var u,w=g._fullLayout,c=T.getFromId(g,m.xaxis),E=T.getFromId(g,m.yaxis),M=w._plots[m.xaxis+m.yaxis],S=m._length,C=S>=p,O=2*S,I={},N=c.makeCalcdata(m,"x"),F=E.makeCalcdata(m,"y"),L=e(m,c,"x",N),P=e(m,E,"y",F),j=L.vals,U=P.vals;m._x=j,m._y=U,m.xperiodalignment&&(m._origX=N,m._xStarts=L.starts,m._xEnds=L.ends),m.yperiodalignment&&(m._origY=F,m._yStarts=P.starts,m._yEnds=P.ends);var $=new Array(O),X=new Array(S);for(u=0;u<S;u++)$[2*u]=j[u]===d?NaN:j[u],$[2*u+1]=U[u]===d?NaN:U[u],X[u]=u;if("log"===c.type)for(u=0;u<O;u+=2)$[u]=c.c2l($[u]);if("log"===E.type)for(u=1;u<O;u+=2)$[u]=E.c2l($[u]);C&&"log"!==c.type&&"log"!==E.type?I.tree=y($):I.ids=X,v(g,m);var te,ae=function(ee,se,G,H,Y,oe){var W=h.style(ee,G);if(W.marker&&(W.marker.positions=H),W.line&&H.length>1&&b.extendFlat(W.line,h.linePositions(ee,G,H)),W.errorX||W.errorY){var ne=h.errorBarPositions(ee,G,H,Y,oe);W.errorX&&b.extendFlat(W.errorX,ne.x),W.errorY&&b.extendFlat(W.errorY,ne.y)}return W.text&&(b.extendFlat(W.text,{positions:H},h.textPosition(ee,G,W.text,W.marker)),b.extendFlat(W.textSel,{positions:H},h.textPosition(ee,G,W.text,W.markerSel)),b.extendFlat(W.textUnsel,{positions:H},h.textPosition(ee,G,W.text,W.markerUnsel))),W}(g,0,m,$,j,U),J=s(g,M);return i(w,m),C?ae.marker&&(te=ae.marker.sizeAvg||Math.max(ae.marker.size,3)):te=a(m,S),l(g,m,c,E,j,U,te),ae.errorX&&f(m,c,ae.errorX),ae.errorY&&f(m,E,ae.errorY),ae.fill&&!J.fill2d&&(J.fill2d=!0),ae.marker&&!J.scatter2d&&(J.scatter2d=!0),ae.line&&!J.line2d&&(J.line2d=!0),!ae.errorX&&!ae.errorY||J.error2d||(J.error2d=!0),ae.text&&!J.glText&&(J.glText=!0),ae.marker&&(ae.marker.snap=S),J.lineOptions.push(ae.line),J.errorXOptions.push(ae.errorX),J.errorYOptions.push(ae.errorY),J.fillOptions.push(ae.fill),J.markerOptions.push(ae.marker),J.markerSelectedOptions.push(ae.markerSel),J.markerUnselectedOptions.push(ae.markerUnsel),J.textOptions.push(ae.text),J.textSelectedOptions.push(ae.textSel),J.textUnselectedOptions.push(ae.textUnsel),J.selectBatch.push([]),J.unselectBatch.push([]),I._scene=J,I.index=J.count,I.x=j,I.y=U,I.positions=$,J.count++,[{x:!1,y:!1,t:I,trace:m}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"./constants":982,"./convert":983,"./scene_update":991,"@plotly/point-cluster":59}],982:[function(x,ue,le){"use strict";ue.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],983:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("svg-path-sdf"),T=x("color-normalize"),_=x("../../registry"),e=x("../../lib"),o=x("../../components/drawing"),a=x("../../plots/cartesian/axis_ids"),l=x("../../lib/gl_format_color").formatColor,i=x("../scatter/subtypes"),v=x("../scatter/make_bubble_size_func"),h=x("./helpers"),s=x("./constants"),d=x("../../constants/interactions").DESELECTDIM,p={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},f=x("../../components/fx/helpers").appendArrayPointValue;function g(N,F){var L,P=N._fullLayout,j=F._length,U=F.textfont,$=F.textposition,X=Array.isArray($)?$:[$],te=U.color,ae=U.size,J=U.family,ee={},se=N._context.plotGlPixelRatio,G=F.texttemplate;if(G){ee.text=[];var H=P._d3locale,Y=Array.isArray(G),oe=Y?Math.min(G.length,j):j,W=Y?function(we){return G[we]}:function(){return G};for(L=0;L<oe;L++){var ne={i:L},re=F._module.formatLabels(ne,F,P),ce={};f(ce,F,L);var fe=F._meta||{};ee.text.push(e.texttemplateString(W(L),re,H,ce,ne,fe))}}else ee.text=Array.isArray(F.text)&&F.text.length<j?F.text.slice():F.text;if(Array.isArray(ee.text))for(L=ee.text.length;L<j;L++)ee.text[L]="";for(ee.opacity=F.opacity,ee.font={},ee.align=[],ee.baseline=[],L=0;L<X.length;L++){var me=X[L].split(/\s+/);switch(me[1]){case"left":ee.align.push("right");break;case"right":ee.align.push("left");break;default:ee.align.push(me[1])}switch(me[0]){case"top":ee.baseline.push("bottom");break;case"bottom":ee.baseline.push("top");break;default:ee.baseline.push(me[0])}}if(Array.isArray(te))for(ee.color=new Array(j),L=0;L<j;L++)ee.color[L]=te[L];else ee.color=te;if(e.isArrayOrTypedArray(ae)||Array.isArray(J))for(ee.font=new Array(j),L=0;L<j;L++){var pe=ee.font[L]={};pe.size=(e.isTypedArray(ae)?ae[L]:Array.isArray(ae)?y(ae[L])?ae[L]:0:ae)*se,pe.family=Array.isArray(J)?J[L]:J}else ee.font={size:ae*se,family:J};return ee}function m(N){var F,L,P=N._length,j=N.marker,U={},$=e.isArrayOrTypedArray(j.symbol),X=e.isArrayOrTypedArray(j.color),te=e.isArrayOrTypedArray(j.line.color),ae=e.isArrayOrTypedArray(j.opacity),J=e.isArrayOrTypedArray(j.size),ee=e.isArrayOrTypedArray(j.line.width);if($||(L=h.isOpenSymbol(j.symbol)),$||X||te||ae){U.colors=new Array(P),U.borderColors=new Array(P);var se=l(j,j.opacity,P),G=l(j.line,j.opacity,P);if(!Array.isArray(G[0])){var H=G;for(G=Array(P),F=0;F<P;F++)G[F]=H}if(!Array.isArray(se[0])){var Y=se;for(se=Array(P),F=0;F<P;F++)se[F]=Y}for(U.colors=se,U.borderColors=G,F=0;F<P;F++)$&&(L=h.isOpenSymbol(j.symbol[F])),L&&(G[F]=se[F].slice(),se[F]=se[F].slice(),se[F][3]=0);U.opacity=N.opacity}else L?(U.color=T(j.color,"uint8"),U.color[3]=0,U.borderColor=T(j.color,"uint8")):(U.color=T(j.color,"uint8"),U.borderColor=T(j.line.color,"uint8")),U.opacity=N.opacity*j.opacity;if($)for(U.markers=new Array(P),F=0;F<P;F++)U.markers[F]=I(j.symbol[F]);else U.marker=I(j.symbol);var W,ne=v(N,1);if(J||ee){var re,ce=U.sizes=new Array(P),fe=U.borderSizes=new Array(P),me=0;if(J){for(F=0;F<P;F++)ce[F]=ne(j.size[F]),me+=ce[F];re=me/P}else for(W=ne(j.size),F=0;F<P;F++)ce[F]=W;if(ee)for(F=0;F<P;F++)fe[F]=j.line.width[F];else for(W=j.line.width,F=0;F<P;F++)fe[F]=W;U.sizeAvg=re}else U.size=ne(j&&j.size||10),U.borderSizes=ne(j.line.width);return U}function u(N,F){var P={};return F&&(F.marker&&F.marker.symbol?P=m(e.extendFlat({},N.marker,F.marker)):F.marker&&(F.marker.size&&(P.size=F.marker.size),F.marker.color&&(P.colors=F.marker.color),void 0!==F.marker.opacity&&(P.opacity=F.marker.opacity))),P}function w(N,F,L){var P={};if(!L)return P;if(L.textfont){var j={opacity:1,text:F.text,texttemplate:F.texttemplate,textposition:F.textposition,textfont:e.extendFlat({},F.textfont)};L.textfont&&e.extendFlat(j.textfont,L.textfont),P=g(N,j)}return P}function c(N,F,L){var P={capSize:2*F.width*L,lineWidth:F.thickness*L,color:F.color};return F.copy_ystyle&&(P=N.error_y),P}var E=s.SYMBOL_SDF_SIZE,M=s.SYMBOL_SIZE,S=s.SYMBOL_STROKE,C={},O=o.symbolFuncs[0](.05*M);function I(N){if("circle"===N)return null;var F,L,P=o.symbolNumber(N),j=o.symbolFuncs[P%100],U=!!o.symbolNoDot[P%100],$=!!o.symbolNoFill[P%100],X=h.isDotSymbol(N);return C[N]?C[N]:(F=X&&!U?j(1.1*M)+O:j(M),L=b(F,{w:E,h:E,viewBox:[-M,-M,M,M],stroke:$?S:-S}),C[N]=L,L||null)}ue.exports={style:function(N,F){var L,P={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},j=N._context.plotGlPixelRatio;if(!0!==F.visible)return P;if(i.hasText(F)&&(P.text=g(N,F),P.textSel=w(N,F,F.selected),P.textUnsel=w(N,F,F.unselected)),i.hasMarkers(F)&&(P.marker=m(F),P.markerSel=u(F,F.selected),P.markerUnsel=u(F,F.unselected),!F.unselected&&e.isArrayOrTypedArray(F.marker.opacity))){var U=F.marker.opacity;for(P.markerUnsel.opacity=new Array(U.length),L=0;L<U.length;L++)P.markerUnsel.opacity[L]=d*U[L]}if(i.hasLines(F)){P.line={overlay:!0,thickness:F.line.width*j,color:F.line.color,opacity:F.opacity};var $=(s.DASHES[F.line.dash]||[1]).slice();for(L=0;L<$.length;++L)$[L]*=F.line.width*j;P.line.dashes=$}return F.error_x&&F.error_x.visible&&(P.errorX=c(F,F.error_x,j)),F.error_y&&F.error_y.visible&&(P.errorY=c(F,F.error_y,j)),F.fill&&"none"!==F.fill&&(P.fill={closed:!0,fill:F.fillcolor,thickness:0}),P},markerStyle:m,markerSelection:u,linePositions:function(N,F,L){var P,j,U=L.length,$=U/2;if(i.hasLines(F)&&$)if("hv"===F.line.shape){for(P=[],j=0;j<$-1;j++)isNaN(L[2*j])||isNaN(L[2*j+1])?P.push(NaN,NaN,NaN,NaN):(P.push(L[2*j],L[2*j+1]),isNaN(L[2*j+2])||isNaN(L[2*j+3])?P.push(NaN,NaN):P.push(L[2*j+2],L[2*j+1]));P.push(L[U-2],L[U-1])}else if("hvh"===F.line.shape){for(P=[],j=0;j<$-1;j++)if(isNaN(L[2*j])||isNaN(L[2*j+1])||isNaN(L[2*j+2])||isNaN(L[2*j+3]))isNaN(L[2*j])||isNaN(L[2*j+1])?P.push(NaN,NaN):P.push(L[2*j],L[2*j+1]),P.push(NaN,NaN);else{var X=(L[2*j]+L[2*j+2])/2;P.push(L[2*j],L[2*j+1],X,L[2*j+1],X,L[2*j+3])}P.push(L[U-2],L[U-1])}else if("vhv"===F.line.shape){for(P=[],j=0;j<$-1;j++)if(isNaN(L[2*j])||isNaN(L[2*j+1])||isNaN(L[2*j+2])||isNaN(L[2*j+3]))isNaN(L[2*j])||isNaN(L[2*j+1])?P.push(NaN,NaN):P.push(L[2*j],L[2*j+1]),P.push(NaN,NaN);else{var te=(L[2*j+1]+L[2*j+3])/2;P.push(L[2*j],L[2*j+1],L[2*j],te,L[2*j+2],te)}P.push(L[U-2],L[U-1])}else if("vh"===F.line.shape){for(P=[],j=0;j<$-1;j++)isNaN(L[2*j])||isNaN(L[2*j+1])?P.push(NaN,NaN,NaN,NaN):(P.push(L[2*j],L[2*j+1]),isNaN(L[2*j+2])||isNaN(L[2*j+3])?P.push(NaN,NaN):P.push(L[2*j],L[2*j+3]));P.push(L[U-2],L[U-1])}else P=L;var ae=!1;for(j=0;j<P.length;j++)if(isNaN(P[j])){ae=!0;break}var J=ae||P.length>s.TOO_MANY_POINTS||i.hasMarkers(F)?"rect":"round";if(ae&&F.connectgaps){var ee=P[0],se=P[1];for(j=0;j<P.length;j+=2)isNaN(P[j])||isNaN(P[j+1])?(P[j]=ee,P[j+1]=se):(ee=P[j],se=P[j+1])}return{join:J,positions:P}},errorBarPositions:function(N,F,L,P,j){var U=_.getComponentMethod("errorbars","makeComputeError"),$=a.getFromId(N,F.xaxis),X=a.getFromId(N,F.yaxis),te=L.length/2,ae={};function J(ee,se){var G=se._id.charAt(0),H=F["error_"+G];if(H&&H.visible&&("linear"===se.type||"log"===se.type)){for(var Y=U(H),oe={x:0,y:1}[G],W={x:[0,1,2,3],y:[2,3,0,1]}[G],ne=new Float64Array(4*te),re=1/0,ce=-1/0,fe=0,me=0;fe<te;fe++,me+=4){var pe=ee[fe];if(y(pe)){var we=L[2*fe+oe],ye=Y(pe,fe),Te=ye[0],Le=ye[1];if(y(Te)&&y(Le)){var Re=pe+Le;ne[me+W[0]]=we-se.c2l(pe-Te),ne[me+W[1]]=se.c2l(Re)-we,ne[me+W[2]]=0,ne[me+W[3]]=0,re=Math.min(re,pe-Te),ce=Math.max(ce,pe+Le)}}}ae[G]={positions:L,errors:ne,_bnds:[re,ce]}}}return J(P,$),J(j,X),ae},textPosition:function(N,F,L,P){var j,U=F._length,$={};if(i.hasMarkers(F)){var X=L.font,te=L.align,ae=L.baseline;for($.offset=new Array(U),j=0;j<U;j++){var J=P.sizes?P.sizes[j]:P.size,ee=Array.isArray(X)?X[j].size:X.size,se=Array.isArray(te)?te.length>1?te[j]:te[0]:te,G=Array.isArray(ae)?ae.length>1?ae[j]:ae[0]:ae,Y=p[G],oe=J?J/.8+1:0;$.offset[j]=[p[se]*oe/ee,(-Y*oe-.5*Y)/ee]}}return $}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"./constants":982,"./helpers":987,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],984:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../registry"),T=x("./helpers"),_=x("./attributes"),e=x("../scatter/constants"),o=x("../scatter/subtypes"),a=x("../scatter/xy_defaults"),l=x("../scatter/period_defaults"),i=x("../scatter/marker_defaults"),v=x("../scatter/line_defaults"),h=x("../scatter/fillcolor_defaults"),s=x("../scatter/text_defaults");ue.exports=function(d,p,f,g){function m(O,I){return y.coerce(d,p,_,O,I)}var u=!!d.marker&&T.isOpenSymbol(d.marker.symbol),w=o.isBubble(d),c=a(d,p,g,m);if(c){l(d,p,g,m),m("xhoverformat"),m("yhoverformat");var E=c<e.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("hovertemplate"),m("mode",E),o.hasLines(p)&&(m("connectgaps"),v(d,p,f,g,m),m("line.shape")),o.hasMarkers(p)&&(i(d,p,f,g,m),m("marker.line.width",u||w?1:0)),o.hasText(p)&&(m("texttemplate"),s(d,p,g,m));var M=(p.line||{}).color,S=(p.marker||{}).color;m("fill"),"none"!==p.fill&&h(d,p,f,m);var C=b.getComponentMethod("errorbars","supplyDefaults");C(d,p,M||S||f,{axis:"y"}),C(d,p,M||S||f,{axis:"x",inherit:"y"}),y.coerceSelectionMarkerOpacity(p,m)}else p.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/period_defaults":947,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatter/xy_defaults":954,"./attributes":979,"./helpers":987}],985:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/color"),T=x("../../constants/interactions").DESELECTDIM;ue.exports={styleTextSelection:function(_){var e,o,a=_[0],l=a.trace,i=a.t,v=i._scene,h=i.index,s=v.selectBatch[h],d=v.unselectBatch[h],p=v.textOptions[h],f=v.textSelectedOptions[h]||{},g=v.textUnselectedOptions[h]||{},m=y.extendFlat({},p);if(s.length||d.length){var u=f.color,w=g.color,c=p.color,E=Array.isArray(c);for(m.color=new Array(l._length),e=0;e<s.length;e++)m.color[o=s[e]]=u||(E?c[o]:c);for(e=0;e<d.length;e++){o=d[e];var M=E?c[o]:c;m.color[o]=w||(u?M:b.addOpacity(M,T))}}v.glText[h].update(m)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],986:[function(x,ue,le){"use strict";var y=x("../scatter/format_labels");ue.exports=function(b,T,_){var e=b.i;return"x"in b||(b.x=T._x[e]),"y"in b||(b.y=T._y[e]),y(b,T,_)}},{"../scatter/format_labels":936}],987:[function(x,ue,le){"use strict";var y=x("./constants");le.isOpenSymbol=function(b){return"string"==typeof b?y.OPEN_RE.test(b):b%200>100},le.isDotSymbol=function(b){return"string"==typeof b?y.DOT_RE.test(b):b>200}},{"./constants":982}],988:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("../scatter/get_trace_color");function _(e,o,a,l){var i=e.xa,v=e.ya,h=e.distance,s=e.dxy,d=e.index,p={pointNumber:d,x:o[d],y:a[d]};p.tx=Array.isArray(l.text)?l.text[d]:l.text,p.htx=Array.isArray(l.hovertext)?l.hovertext[d]:l.hovertext,p.data=Array.isArray(l.customdata)?l.customdata[d]:l.customdata,p.tp=Array.isArray(l.textposition)?l.textposition[d]:l.textposition;var f=l.textfont;f&&(p.ts=b.isArrayOrTypedArray(f.size)?f.size[d]:f.size,p.tc=Array.isArray(f.color)?f.color[d]:f.color,p.tf=Array.isArray(f.family)?f.family[d]:f.family);var g=l.marker;g&&(p.ms=b.isArrayOrTypedArray(g.size)?g.size[d]:g.size,p.mo=b.isArrayOrTypedArray(g.opacity)?g.opacity[d]:g.opacity,p.mx=b.isArrayOrTypedArray(g.symbol)?g.symbol[d]:g.symbol,p.mc=b.isArrayOrTypedArray(g.color)?g.color[d]:g.color);var m=g&&g.line;m&&(p.mlc=Array.isArray(m.color)?m.color[d]:m.color,p.mlw=b.isArrayOrTypedArray(m.width)?m.width[d]:m.width);var u=g&&g.gradient;u&&"none"!==u.type&&(p.mgt=Array.isArray(u.type)?u.type[d]:u.type,p.mgc=Array.isArray(u.color)?u.color[d]:u.color);var w=i.c2p(p.x,!0),c=v.c2p(p.y,!0),E=p.mrc||1,M=l.hoverlabel;M&&(p.hbg=Array.isArray(M.bgcolor)?M.bgcolor[d]:M.bgcolor,p.hbc=Array.isArray(M.bordercolor)?M.bordercolor[d]:M.bordercolor,p.hts=b.isArrayOrTypedArray(M.font.size)?M.font.size[d]:M.font.size,p.htc=Array.isArray(M.font.color)?M.font.color[d]:M.font.color,p.htf=Array.isArray(M.font.family)?M.font.family[d]:M.font.family,p.hnl=b.isArrayOrTypedArray(M.namelength)?M.namelength[d]:M.namelength);var S=l.hoverinfo;S&&(p.hi=Array.isArray(S)?S[d]:S);var C=l.hovertemplate;C&&(p.ht=Array.isArray(C)?C[d]:C);var O={};O[e.index]=p;var I=l._origX,N=l._origY,F=b.extendFlat({},e,{color:T(l,p),x0:w-E,x1:w+E,xLabelVal:I?I[d]:p.x,y0:c-E,y1:c+E,yLabelVal:N?N[d]:p.y,cd:O,distance:h,spikeDistance:s,hovertemplate:p.ht});return p.htx?F.text=p.htx:p.tx?F.text=p.tx:l.text&&(F.text=l.text),b.fillText(p,l,F),y.getComponentMethod("errorbars","hoverInfo")(p,l,F),F}ue.exports={hoverPoints:function(e,o,a,l){var i,v,h,s,d,p,f,g,m,u,w=e.cd,c=w[0].t,E=w[0].trace,M=e.xa,S=e.ya,C=c.x,O=c.y,I=M.c2p(o),N=S.c2p(a),F=e.distance;if(c.tree){var L=M.p2c(I-F),P=M.p2c(I+F),j=S.p2c(N-F),U=S.p2c(N+F);i="x"===l?c.tree.range(Math.min(L,P),Math.min(S._rl[0],S._rl[1]),Math.max(L,P),Math.max(S._rl[0],S._rl[1])):c.tree.range(Math.min(L,P),Math.min(j,U),Math.max(L,P),Math.max(j,U))}else i=c.ids;var $=F;if("x"===l){var X=!!E.xperiodalignment,te=!!E.yperiodalignment;for(p=0;p<i.length;p++){if(s=C[v=i[p]],f=Math.abs(M.c2p(s)-I),X){var ae=M.c2p(E._xStarts[v]),J=M.c2p(E._xEnds[v]);f=I>=Math.min(ae,J)&&I<=Math.max(ae,J)?0:1/0}if(f<$){if($=f,g=S.c2p(d=O[v])-N,te){var ee=S.c2p(E._yStarts[v]),se=S.c2p(E._yEnds[v]);g=N>=Math.min(ee,se)&&N<=Math.max(ee,se)?0:1/0}u=Math.sqrt(f*f+g*g),h=i[p]}}}else for(p=i.length-1;p>-1;p--)s=C[v=i[p]],d=O[v],f=M.c2p(s)-I,g=S.c2p(d)-N,(m=Math.sqrt(f*f+g*g))<$&&($=u=m,h=v);return e.index=h,e.distance=$,e.dxy=u,void 0===h?[e]:[_(e,C,O,E)]},calcHover:_}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":937}],989:[function(x,ue,le){arguments[4][896][0].apply(le,arguments)},{"./base_index":980,"./plot":990,dup:896}],990:[function(x,ue,le){"use strict";var y=x("regl-scatter2d"),b=x("regl-line2d"),T=x("regl-error2d"),_=x("gl-text"),e=x("../../lib"),o=x("../../components/dragelement/helpers").selectMode,a=x("../../lib/prepare_regl"),l=x("../scatter/subtypes"),i=x("../scatter/link_traces"),v=x("./edit_style").styleTextSelection,h={};function s(d,p,f,g){var m=d._size,C=m.w*g,O=m.h*g;return[m.l*g+p.domain[0]*C,m.b*g+f.domain[0]*O,d.width*g-m.r*g-(1-p.domain[1])*C,d.height*g-m.t*g-(1-f.domain[1])*O]}(ue.exports=function(d,p,f){if(f.length){var g,m,u=d._fullLayout,w=p._scene,c=p.xaxis,E=p.yaxis;if(w)if(a(d,["ANGLE_instanced_arrays","OES_element_index_uint"],h)){var M=w.count,S=u._glcanvas.data()[0].regl;if(i(d,p,f),w.dirty){if(!0===w.error2d&&(w.error2d=T(S)),!0===w.line2d&&(w.line2d=b(S)),!0===w.scatter2d&&(w.scatter2d=y(S)),!0===w.fill2d&&(w.fill2d=b(S)),!0===w.glText)for(w.glText=new Array(M),g=0;g<M;g++)w.glText[g]=new _(S);if(w.glText){if(M>w.glText.length){var C=M-w.glText.length;for(g=0;g<C;g++)w.glText.push(new _(S))}else M<w.glText.length&&w.glText.splice(M,w.glText.length-M).forEach(function(ne){ne.destroy()});for(g=0;g<M;g++)w.glText[g].update(w.textOptions[g])}if(w.line2d&&(w.line2d.update(w.lineOptions),w.lineOptions=w.lineOptions.map(function(ne){if(ne&&ne.positions){for(var re=ne.positions,ce=0;ce<re.length&&(isNaN(re[ce])||isNaN(re[ce+1]));)ce+=2;for(var fe=re.length-2;fe>ce&&(isNaN(re[fe])||isNaN(re[fe+1]));)fe-=2;ne.positions=re.slice(ce,fe+2)}return ne}),w.line2d.update(w.lineOptions)),w.error2d){var I=(w.errorXOptions||[]).concat(w.errorYOptions||[]);w.error2d.update(I)}w.scatter2d&&w.scatter2d.update(w.markerOptions),w.fillOrder=e.repeat(null,M),w.fill2d&&(w.fillOptions=w.fillOptions.map(function(ne,re){var ce=f[re];if(ne&&ce&&ce[0]&&ce[0].trace){var fe,me,pe=ce[0],we=pe.trace,ye=pe.t,Te=w.lineOptions[re],Le=[];we._ownfill&&Le.push(re),we._nexttrace&&Le.push(re+1),Le.length&&(w.fillOrder[re]=Le);var Oe,Re,Ve=[],_e=Te&&Te.positions||ye.positions;if("tozeroy"===we.fill){for(Oe=0;Oe<_e.length&&isNaN(_e[Oe+1]);)Oe+=2;for(Re=_e.length-2;Re>Oe&&isNaN(_e[Re+1]);)Re-=2;0!==_e[Oe+1]&&(Ve=[_e[Oe],0]),Ve=Ve.concat(_e.slice(Oe,Re+2)),0!==_e[Re+1]&&(Ve=Ve.concat([_e[Re],0]))}else if("tozerox"===we.fill){for(Oe=0;Oe<_e.length&&isNaN(_e[Oe]);)Oe+=2;for(Re=_e.length-2;Re>Oe&&isNaN(_e[Re]);)Re-=2;0!==_e[Oe]&&(Ve=[0,_e[Oe+1]]),Ve=Ve.concat(_e.slice(Oe,Re+2)),0!==_e[Re]&&(Ve=Ve.concat([0,_e[Re+1]]))}else if("toself"===we.fill||"tonext"===we.fill){for(Ve=[],fe=0,ne.splitNull=!0,me=0;me<_e.length;me+=2)(isNaN(_e[me])||isNaN(_e[me+1]))&&((Ve=Ve.concat(_e.slice(fe,me))).push(_e[fe],_e[fe+1]),Ve.push(null,null),fe=me+2);Ve=Ve.concat(_e.slice(fe)),fe&&Ve.push(_e[fe],_e[fe+1])}else{var Ae=we._nexttrace;if(Ae){var Fe=w.lineOptions[re+1];if(Fe){var Pe=Fe.positions;if("tonexty"===we.fill){for(Ve=_e.slice(),re=Math.floor(Pe.length/2);re--;){var Be=Pe[2*re],qe=Pe[2*re+1];isNaN(Be)||isNaN(qe)||Ve.push(Be,qe)}ne.fill=Ae.fillcolor}}}}if(we._prevtrace&&"tonext"===we._prevtrace.fill){var We=w.lineOptions[re-1].positions,Je=Ve.length/2,ut=[fe=Je];for(me=0;me<We.length;me+=2)(isNaN(We[me])||isNaN(We[me+1]))&&(ut.push(me/2+Je+1),fe=me+2);Ve=Ve.concat(We),ne.hole=ut}return ne.fillmode=we.fill,ne.opacity=we.opacity,ne.positions=Ve,ne}}),w.fill2d.update(w.fillOptions))}var F=o(u.dragmode),L=u.clickmode.indexOf("select")>-1;for(g=0;g<M;g++){var P=f[g][0],j=P.trace,U=P.t,$=U.index,X=j._length,te=U.x,ae=U.y;if(j.selectedpoints||F||L){if(F||(F=!0),j.selectedpoints){var J=w.selectBatch[$]=e.selIndices2selPoints(j),ee={};for(m=0;m<J.length;m++)ee[J[m]]=1;var se=[];for(m=0;m<X;m++)ee[m]||se.push(m);w.unselectBatch[$]=se}var G=U.xpx=new Array(X),H=U.ypx=new Array(X);for(m=0;m<X;m++)G[m]=c.c2p(te[m]),H[m]=E.c2p(ae[m])}else U.xpx=U.ypx=null}if(F){if(w.select2d||(w.select2d=y(u._glcanvas.data()[1].regl)),w.scatter2d){var Y=new Array(M);for(g=0;g<M;g++)Y[g]=w.selectBatch[g].length||w.unselectBatch[g].length?w.markerUnselectedOptions[g]:{};w.scatter2d.update(Y)}w.select2d&&(w.select2d.update(w.markerOptions),w.select2d.update(w.markerSelectedOptions)),w.glText&&f.forEach(function(ne){l.hasText(((ne||[])[0]||{}).trace||{})&&v(ne)})}else w.scatter2d&&w.scatter2d.update(w.markerOptions);var oe={viewport:s(u,c,E,d._context.plotGlPixelRatio),range:[(c._rl||c.range)[0],(E._rl||E.range)[0],(c._rl||c.range)[1],(E._rl||E.range)[1]]},W=e.repeat(oe,w.count);w.fill2d&&w.fill2d.update(W),w.line2d&&w.line2d.update(W),w.error2d&&w.error2d.update(W.concat(W)),w.scatter2d&&w.scatter2d.update(W),w.select2d&&w.select2d.update(W),w.glText&&w.glText.forEach(function(ne){ne.update(oe)})}else w.init()}}).reglPrecompiled=h},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":943,"../scatter/subtypes":952,"./edit_style":985,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],991:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T){var _=T._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},o={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||((_=T._scene={}).init=function(){y.extendFlat(_,o,e)},_.init(),_.update=function(a){var l=y.repeat(a,_.count);if(_.fill2d&&_.fill2d.update(l),_.scatter2d&&_.scatter2d.update(l),_.line2d&&_.line2d.update(l),_.error2d&&_.error2d.update(l.concat(l)),_.select2d&&_.select2d.update(l),_.glText)for(var i=0;i<_.count;i++)_.glText[i].update(a)},_.draw=function(){for(var a=_.count,l=_.fill2d,i=_.error2d,v=_.line2d,h=_.scatter2d,s=_.glText,d=_.select2d,p=_.selectBatch,f=_.unselectBatch,g=0;g<a;g++){if(l&&_.fillOrder[g]&&l.draw(_.fillOrder[g]),v&&_.lineOptions[g]&&v.draw(g),i&&(_.errorXOptions[g]&&i.draw(g),_.errorYOptions[g]&&i.draw(g+a)),h&&_.markerOptions[g])if(f[g].length){var m=y.repeat([],_.count);m[g]=f[g],h.draw(m)}else p[g].length||h.draw(g);s[g]&&_.textOptions[g]&&s[g].render()}d&&d.draw(p),_.dirty=!1},_.destroy=function(){_.fill2d&&_.fill2d.destroy&&_.fill2d.destroy(),_.scatter2d&&_.scatter2d.destroy&&_.scatter2d.destroy(),_.error2d&&_.error2d.destroy&&_.error2d.destroy(),_.line2d&&_.line2d.destroy&&_.line2d.destroy(),_.select2d&&_.select2d.destroy&&_.select2d.destroy(),_.glText&&_.glText.forEach(function(a){a.destroy&&a.destroy()}),_.lineOptions=null,_.fillOptions=null,_.markerOptions=null,_.markerSelectedOptions=null,_.markerUnselectedOptions=null,_.errorXOptions=null,_.errorYOptions=null,_.textOptions=null,_.textSelectedOptions=null,_.textUnselectedOptions=null,_.selectBatch=null,_.unselectBatch=null,T._scene=null}),_.dirty||y.extendFlat(_,e),_}},{"../../lib":503}],992:[function(x,ue,le){"use strict";var y=x("../scatter/subtypes"),b=x("./edit_style").styleTextSelection;ue.exports=function(T,_){var e=T.cd,o=T.xaxis,a=T.yaxis,l=[],i=e[0].trace,v=e[0].t,h=i._length,s=v.x,d=v.y,p=v._scene,f=v.index;if(!p)return l;var g=y.hasText(i),m=y.hasMarkers(i);if(!0!==i.visible||!m&&!g)return l;var w=[],c=[];if(!1!==_&&!_.degenerate)for(var E=0;E<h;E++)_.contains([v.xpx[E],v.ypx[E]],!1,E,T)?(w.push(E),l.push({pointNumber:E,x:o.c2d(s[E]),y:a.c2d(d[E])})):c.push(E);if(m){var M=p.scatter2d;if(w.length||c.length){if(!p.selectBatch[f].length&&!p.unselectBatch[f].length){var S=new Array(p.count);S[f]=p.markerUnselectedOptions[f],M.update.apply(M,S)}}else{var C=new Array(p.count);C[f]=p.markerOptions[f],M.update.apply(M,C)}}return p.selectBatch[f]=w,p.unselectBatch[f]=c,g&&b(e),l}},{"../scatter/subtypes":952,"./edit_style":985}],993:[function(x,ue,le){"use strict";var y=x("../../plots/template_attributes").hovertemplateAttrs,b=x("../../plots/template_attributes").texttemplateAttrs,T=x("../scattergeo/attributes"),_=x("../scatter/attributes"),e=x("../../plots/mapbox/layout_attributes"),o=x("../../plots/attributes"),a=x("../../components/colorscale/attributes"),l=x("../../lib/extend").extendFlat,i=x("../../plot_api/edit_types").overrideAll,v=T.line,h=T.marker;ue.exports=i({lon:T.lon,lat:T.lat,mode:l({},_.mode,{dflt:"markers"}),text:l({},_.text,{}),texttemplate:b({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:l({},_.hovertext,{}),line:{color:v.color,width:v.width},connectgaps:_.connectgaps,marker:l({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:h.opacity,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode},a("marker")),fill:T.fill,fillcolor:_.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:_.selected.marker},unselected:{marker:_.unselected.marker},hoverinfo:l({},o.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:y()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergeo/attributes":969}],994:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../lib"),T=x("../../constants/numerical").BADNUM,_=x("../../lib/geojson_utils"),e=x("../../components/colorscale"),o=x("../../components/drawing"),a=x("../scatter/make_bubble_size_func"),l=x("../scatter/subtypes"),i=x("../../plots/mapbox/convert_text_opts"),v=x("../../components/fx/helpers").appendArrayPointValue,h=x("../../lib/svg_text_utils").NEWLINES,s=x("../../lib/svg_text_utils").BR_TAG_ALL;function d(){return{geojson:_.makeBlank(),layout:{visibility:"none"},paint:{}}}function p(m,u){return b.isArrayOrTypedArray(m)?u?function(w){return y(m[w])?+m[w]:0}:function(w){return m[w]}:m?function(){return m}:f}function f(){return""}function g(m){return m[0]===T}ue.exports=function(m,u){var w,c=u[0].trace,E=!0===c.visible&&0!==c._length,M="none"!==c.fill,S=l.hasLines(c),C=l.hasMarkers(c),O=l.hasText(c),I=C&&"circle"===c.marker.symbol,N=C&&"circle"!==c.marker.symbol,F=d(),L=d(),P=d(),j=d(),U={fill:F,line:L,circle:P,symbol:j};if(!E)return U;if((M||S)&&(w=_.calcTraceToLineCoords(u)),M&&(F.geojson=_.makePolygon(w),F.layout.visibility="visible",b.extendFlat(F.paint,{"fill-color":c.fillcolor})),S&&(L.geojson=_.makeLine(w),L.layout.visibility="visible",b.extendFlat(L.paint,{"line-width":c.line.width,"line-color":c.line.color,"line-opacity":c.opacity})),I){var $=function(ae){var J,ee,se,G,H=ae[0].trace,Y=H.marker,oe=H.selectedpoints,W=b.isArrayOrTypedArray(Y.color),ne=b.isArrayOrTypedArray(Y.size),re=b.isArrayOrTypedArray(Y.opacity);function ce(Oe){return H.opacity*Oe}W&&(ee=e.hasColorscale(H,"marker")?e.makeColorScaleFuncFromTrace(Y):b.identity),ne&&(se=a(H)),re&&(G=function(Oe){return ce(y(Oe)?+b.constrain(Oe,0,1):0)});var fe,Le,me=[];for(J=0;J<ae.length;J++){var pe=ae[J],we=pe.lonlat;if(!g(we)){var ye={};ee&&(ye.mcc=pe.mcc=ee(pe.mc)),se&&(ye.mrc=pe.mrc=se(pe.ms)),G&&(ye.mo=G(pe.mo)),oe&&(ye.selected=pe.selected||0),me.push({type:"Feature",geometry:{type:"Point",coordinates:we},properties:ye})}}if(oe)for(fe=o.makeSelectedPointStyleFns(H),J=0;J<me.length;J++){var Te=me[J].properties;fe.selectedOpacityFn&&(Te.mo=ce(fe.selectedOpacityFn(Te))),fe.selectedColorFn&&(Te.mcc=fe.selectedColorFn(Te)),fe.selectedSizeFn&&(Te.mrc=fe.selectedSizeFn(Te))}return{geojson:{type:"FeatureCollection",features:me},mcc:W||fe&&fe.selectedColorFn?{type:"identity",property:"mcc"}:Y.color,mrc:ne||fe&&fe.selectedSizeFn?{type:"identity",property:"mrc"}:(Le=Y.size,Le/2),mo:re||fe&&fe.selectedOpacityFn?{type:"identity",property:"mo"}:ce(Y.opacity)}}(u);P.geojson=$.geojson,P.layout.visibility="visible",b.extendFlat(P.paint,{"circle-color":$.mcc,"circle-radius":$.mrc,"circle-opacity":$.mo})}if((N||O)&&(j.geojson=function(ae,J){for(var ee=J._fullLayout,se=ae[0].trace,G=se.marker||{},H=G.symbol,Y=G.angle,oe="circle"!==H?p(H):f,W="auto"!==Y?p(Y,!0):f,ne=l.hasText(se)?p(se.text):f,re=[],ce=0;ce<ae.length;ce++){var fe=ae[ce];if(!g(fe.lonlat)){var me,pe=se.texttemplate;if(pe){var we=Array.isArray(pe)?pe[ce]||"":pe,ye=se._module.formatLabels(fe,se,ee),Te={};v(Te,se,fe.i),me=b.texttemplateString(we,ye,ee._d3locale,Te,fe,se._meta||{})}else me=ne(ce);me&&(me=me.replace(h,"").replace(s,"\n")),re.push({type:"Feature",geometry:{type:"Point",coordinates:fe.lonlat},properties:{symbol:oe(ce),angle:W(ce),text:me}})}}return{type:"FeatureCollection",features:re}}(u,m),b.extendFlat(j.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),N&&(b.extendFlat(j.layout,{"icon-size":c.marker.size/10}),"angle"in c.marker&&"auto"!==c.marker.angle&&b.extendFlat(j.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),j.layout["icon-allow-overlap"]=c.marker.allowoverlap,b.extendFlat(j.paint,{"icon-opacity":c.opacity*c.marker.opacity,"icon-color":c.marker.color})),O)){var te=i(c.textposition,(c.marker||{}).size);b.extendFlat(j.layout,{"text-size":c.textfont.size,"text-anchor":te.anchor,"text-offset":te.offset}),b.extendFlat(j.paint,{"text-color":c.textfont.color,"text-opacity":c.opacity})}return U}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"fast-isnumeric":190}],995:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/subtypes"),T=x("../scatter/marker_defaults"),_=x("../scatter/line_defaults"),e=x("../scatter/text_defaults"),o=x("../scatter/fillcolor_defaults"),a=x("./attributes");ue.exports=function(l,i,v,h){function s(p,f){return y.coerce(l,i,a,p,f)}if(f=i,m=(g=s)("lon")||[],u=g("lat")||[],w=Math.min(m.length,u.length),f._length=w,w){if(s("text"),s("texttemplate"),s("hovertext"),s("hovertemplate"),s("mode"),s("below"),b.hasLines(i)&&(_(l,i,v,h,s,{noDash:!0}),s("connectgaps")),b.hasMarkers(i)){T(l,i,v,h,s,{noLine:!0}),s("marker.allowoverlap"),s("marker.angle");var d=i.marker;"circle"!==d.symbol&&(y.isArrayOrTypedArray(d.size)&&(d.size=d.size[0]),y.isArrayOrTypedArray(d.color)&&(d.color=d.color[0]))}b.hasText(i)&&e(l,i,h,s,{noSelect:!0}),s("fill"),"none"!==i.fill&&o(l,i,v,s),y.coerceSelectionMarkerOpacity(i,s)}else i.visible=!1;var f,g,m,u,w}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":993}],996:[function(x,ue,le){"use strict";ue.exports=function(y,b){return y.lon=b.lon,y.lat=b.lat,y}},{}],997:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes");ue.exports=function(b,T,_){var e={},o=_[T.subplot]._subplot.mockAxis,a=b.lonlat;return e.lonLabel=y.tickText(o,o.c2l(a[0]),!0).text,e.latLabel=y.tickText(o,o.c2l(a[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],998:[function(x,ue,le){"use strict";var y=x("../../components/fx"),b=x("../../lib"),T=x("../scatter/get_trace_color"),_=b.fillText,e=x("../../constants/numerical").BADNUM;function o(a,l,i){if(!a.hovertemplate){var v=(l.hi||a.hoverinfo).split("+"),h=-1!==v.indexOf("all"),s=-1!==v.indexOf("lon"),d=-1!==v.indexOf("lat"),p=l.lonlat,f=[];return h||s&&d?f.push("("+g(p[1])+", "+g(p[0])+")"):s?f.push(i.lon+g(p[0])):d&&f.push(i.lat+g(p[1])),(h||-1!==v.indexOf("text"))&&_(l,a,f),f.join("<br>")}function g(m){return m+"\xb0"}}ue.exports={hoverPoints:function(a,l,i){var v=a.cd,h=v[0].trace,s=a.xa,d=a.ya,p=a.subplot,f=360*(l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360)),g=l-f;if(y.getClosest(v,function(O){var I=O.lonlat;if(I[0]===e)return 1/0;var N=b.modHalf(I[0],360),F=I[1],L=p.project([N,F]),P=L.x-s.c2p([g,F]),j=L.y-d.c2p([N,i]),U=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(P*P+j*j)-U,1-3/U)},a),!1!==a.index){var m=v[a.index],u=m.lonlat,w=[b.modHalf(u[0],360)+f,u[1]],c=s.c2p(w),E=d.c2p(w),M=m.mrc||1;a.x0=c-M,a.x1=c+M,a.y0=E-M,a.y1=E+M;var S={};S[h.subplot]={_subplot:p};var C=h._module.formatLabels(m,h,S);return a.lonLabel=C.lonLabel,a.latLabel=C.latLabel,a.color=T(h,m),a.extraText=o(h,m,v[0].t.labels),a.hovertemplate=h.hovertemplate,[a]}},getExtraText:o}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937}],999:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("../scattergeo/calc"),plot:x("./plot"),hoverPoints:x("./hover").hoverPoints,eventData:x("./event_data"),selectPoints:x("./select"),styleOnSelect:function(y,b){b&&b[0].trace._glTrace.update(b)},moduleType:"trace",name:"scattermapbox",basePlotModule:x("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":945,"../scattergeo/calc":970,"./attributes":993,"./defaults":995,"./event_data":996,"./format_labels":997,"./hover":998,"./plot":1e3,"./select":1001}],1e3:[function(x,ue,le){"use strict";var y=x("./convert"),b=x("../../plots/mapbox/constants").traceLayerPrefix,T=["fill","line","circle","symbol"];function _(o,a){this.type="scattermapbox",this.subplot=o,this.uid=a,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol"},this.layerIds={fill:b+a+"-fill",line:b+a+"-line",circle:b+a+"-circle",symbol:b+a+"-symbol"},this.below=null}var e=_.prototype;e.addSource=function(o,a){this.subplot.map.addSource(this.sourceIds[o],{type:"geojson",data:a.geojson})},e.setSourceData=function(o,a){this.subplot.map.getSource(this.sourceIds[o]).setData(a.geojson)},e.addLayer=function(o,a,l){this.subplot.addLayer({type:o,id:this.layerIds[o],source:this.sourceIds[o],layout:a.layout,paint:a.paint},l)},e.update=function(o){var a,l,i,v=this.subplot,h=v.map,s=y(v.gd,o),d=v.belowLookup["trace-"+this.uid];if(d!==this.below){for(a=T.length-1;a>=0;a--)h.removeLayer(this.layerIds[l=T[a]]);for(a=0;a<T.length;a++)i=s[l=T[a]],this.addLayer(l,i,d);this.below=d}for(a=0;a<T.length;a++)i=s[l=T[a]],v.setOptions(this.layerIds[l],"setLayoutProperty",i.layout),"visible"===i.layout.visibility&&(this.setSourceData(l,i),v.setOptions(this.layerIds[l],"setPaintProperty",i.paint));o[0].trace._glTrace=this},e.dispose=function(){for(var o=this.subplot.map,a=T.length-1;a>=0;a--){var l=T[a];o.removeLayer(this.layerIds[l]),o.removeSource(this.sourceIds[l])}},ue.exports=function(o,a){for(var l=a[0].trace,i=new _(o,l.uid),v=y(o.gd,a),h=i.below=o.belowLookup["trace-"+l.uid],s=0;s<T.length;s++){var d=T[s],p=v[d];i.addSource(d,p),i.addLayer(d,p,h)}return a[0].trace._glTrace=i,i}},{"../../plots/mapbox/constants":611,"./convert":994}],1001:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/subtypes"),T=x("../../constants/numerical").BADNUM;ue.exports=function(_,e){var o,a=_.cd,l=_.xaxis,i=_.yaxis,v=[];if(!b.hasMarkers(a[0].trace))return[];if(!1===e)for(o=0;o<a.length;o++)a[o].selected=0;else for(o=0;o<a.length;o++){var s=a[o],d=s.lonlat;if(d[0]!==T){var p=[y.modHalf(d[0],360),d[1]],f=[l.c2p(p),i.c2p(p)];e.contains(f,null,o,_)?(v.push({pointNumber:o,lon:d[0],lat:d[1]}),s.selected=1):s.selected=0}}return v}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":952}],1002:[function(x,ue,le){"use strict";var y=x("../../plots/template_attributes").hovertemplateAttrs,b=x("../../plots/template_attributes").texttemplateAttrs,T=x("../../lib/extend").extendFlat,_=x("../scatter/attributes"),e=x("../../plots/attributes"),o=_.line;ue.exports={mode:_.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:T({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:T({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:T({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:T({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:_.hoveron,hovertemplate:y(),selected:_.selected,unselected:_.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1003:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../constants/numerical").BADNUM,T=x("../../plots/cartesian/axes"),_=x("../scatter/colorscale_calc"),e=x("../scatter/arrays_to_calcdata"),o=x("../scatter/calc_selection"),a=x("../scatter/calc").calcMarkerSize;ue.exports=function(l,i){for(var v=l._fullLayout,h=i.subplot,s=v[h].radialaxis,d=v[h].angularaxis,p=s.makeCalcdata(i,"r"),f=d.makeCalcdata(i,"theta"),g=i._length,m=new Array(g),u=0;u<g;u++){var w=p[u],c=f[u],E=m[u]={};y(w)&&y(c)?(E.r=w,E.theta=c):E.r=b}var M=a(i,g);return i._extremes.x=T.findExtremes(s,p,{ppad:M}),_(l,i),e(m,i),o(m,i),m}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1004:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/subtypes"),T=x("../scatter/marker_defaults"),_=x("../scatter/line_defaults"),e=x("../scatter/line_shape_defaults"),o=x("../scatter/text_defaults"),a=x("../scatter/fillcolor_defaults"),l=x("../scatter/constants").PTS_LINESONLY,i=x("./attributes");function v(h,s,d,p){var f,g=p("r"),m=p("theta");if(g)m?f=Math.min(g.length,m.length):(f=g.length,p("theta0"),p("dtheta"));else{if(!m)return 0;f=s.theta.length,p("r0"),p("dr")}return s._length=f,f}ue.exports={handleRThetaDefaults:v,supplyDefaults:function(h,s,d,p){function f(u,w){return y.coerce(h,s,i,u,w)}var g=v(0,s,0,f);if(g){f("thetaunit"),f("mode",g<l?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==s.hoveron&&f("hovertemplate"),b.hasLines(s)&&(_(h,s,d,p,f),e(h,s,f),f("connectgaps")),b.hasMarkers(s)&&T(h,s,d,p,f,{gradient:!0}),b.hasText(s)&&(f("texttemplate"),o(h,s,p,f));var m=[];(b.hasMarkers(s)||b.hasText(s))&&(f("cliponaxis"),f("marker.maxdisplayed"),m.push("points")),f("fill"),"none"!==s.fill&&(a(h,s,d,f),b.hasLines(s)||e(h,s,f)),"tonext"!==s.fill&&"toself"!==s.fill||m.push("fills"),f("hoveron",m.join("+")||"points"),y.coerceSelectionMarkerOpacity(s,f)}else s.visible=!1}}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1002}],1005:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes");ue.exports=function(T,_,e){var o,a,l={},i=e[_.subplot]._subplot;i?(o=i.radialAxis,a=i.angularAxis):(o=(i=e[_.subplot]).radialaxis,a=i.angularaxis);var v=o.c2l(T.r);l.rLabel=b.tickText(o,v,!0).text;var h="degrees"===a.thetaunit?y.rad2deg(T.theta):T.theta;return l.thetaLabel=b.tickText(a,h,!0).text,l}},{"../../lib":503,"../../plots/cartesian/axes":554}],1006:[function(x,ue,le){"use strict";var y=x("../scatter/hover");function b(T,_,e,o){var a=e.radialAxis,l=e.angularAxis;a._hovertitle="r",l._hovertitle="\u03b8";var i={};i[_.subplot]={_subplot:e};var v=_._module.formatLabels(T,_,i);o.rLabel=v.rLabel,o.thetaLabel=v.thetaLabel;var s=[];function d(f,g){s.push(f._hovertitle+": "+g)}if(!_.hovertemplate){var p=(T.hi||_.hoverinfo).split("+");-1!==p.indexOf("all")&&(p=["r","theta","text"]),-1!==p.indexOf("r")&&d(a,o.rLabel),-1!==p.indexOf("theta")&&d(l,o.thetaLabel),-1!==p.indexOf("text")&&o.text&&(s.push(o.text),delete o.text),o.extraText=s.join("<br>")}}ue.exports={hoverPoints:function(T,_,e,o){var a=y(T,_,e,o);if(a&&!1!==a[0].index){var l=a[0];if(void 0===l.index)return a;var i=T.subplot,v=l.cd[l.index],h=l.trace;if(i.isPtInside(v))return l.xLabelVal=void 0,l.yLabelVal=void 0,b(v,h,i,l),l.hovertemplate=h.hovertemplate,a}},makeHoverPointText:b}},{"../scatter/hover":938}],1007:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:x("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,selectPoints:x("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1002,"./calc":1003,"./defaults":1004,"./format_labels":1005,"./hover":1006,"./plot":1008}],1008:[function(x,ue,le){"use strict";var y=x("../scatter/plot"),b=x("../../constants/numerical").BADNUM;ue.exports=function(T,_,e){for(var o=_.layers.frontplot.select("g.scatterlayer"),a={xaxis:_.xaxis,yaxis:_.yaxis,plot:_.framework,layerClipId:_._hasClipOnAxisFalse?_.clipIds.forTraces:null},l=_.radialAxis,i=_.angularAxis,v=0;v<e.length;v++)for(var h=e[v],s=0;s<h.length;s++){var d=h[s],p=d.r;if(p===b)d.x=d.y=b;else{var f=l.c2g(p),g=i.c2g(d.theta);d.x=f*Math.cos(g),d.y=f*Math.sin(g)}}y(T,a,e,o)}},{"../../constants/numerical":479,"../scatter/plot":948}],1009:[function(x,ue,le){"use strict";var y=x("../scatterpolar/attributes"),b=x("../scattergl/attributes"),T=x("../../plots/template_attributes").texttemplateAttrs;ue.exports={mode:y.mode,r:y.r,theta:y.theta,r0:y.r0,dr:y.dr,theta0:y.theta0,dtheta:y.dtheta,thetaunit:y.thetaunit,text:y.text,texttemplate:T({editType:"plot"},{keys:["r","theta","text"]}),hovertext:y.hovertext,hovertemplate:y.hovertemplate,line:b.line,connectgaps:b.connectgaps,marker:b.marker,fill:b.fill,fillcolor:b.fillcolor,textposition:b.textposition,textfont:b.textfont,hoverinfo:y.hoverinfo,selected:y.selected,unselected:y.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":979,"../scatterpolar/attributes":1002}],1010:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:x("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),hoverPoints:x("./hover").hoverPoints,selectPoints:x("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scattergl/select":992,"./attributes":1009,"./calc":1011,"./defaults":1012,"./format_labels":1013,"./hover":1014}],1011:[function(x,ue,le){"use strict";var y=x("../scatter/colorscale_calc"),b=x("../scatter/calc").calcMarkerSize,T=x("../scattergl/convert"),_=x("../../plots/cartesian/axes"),e=x("../scattergl/constants").TOO_MANY_POINTS;ue.exports=function(o,a){var l=o._fullLayout,i=a.subplot,v=l[i].radialaxis,h=l[i].angularaxis,s=a._r=v.makeCalcdata(a,"r"),d=a._theta=h.makeCalcdata(a,"theta"),p=a._length,f={};p<s.length&&(s=s.slice(0,p)),p<d.length&&(d=d.slice(0,p)),f.r=s,f.theta=d,y(o,a);var g,m=f.opts=T.style(o,a);return p<e?g=b(a,p):m.marker&&(g=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),a._extremes.x=_.findExtremes(v,s,{ppad:g}),[{x:!1,y:!1,t:f,trace:a}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983}],1012:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/subtypes"),T=x("../scatterpolar/defaults").handleRThetaDefaults,_=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),o=x("../scatter/text_defaults"),a=x("../scatter/fillcolor_defaults"),l=x("../scatter/constants").PTS_LINESONLY,i=x("./attributes");ue.exports=function(v,h,s,d){function p(g,m){return y.coerce(v,h,i,g,m)}var f=T(v,h,d,p);f?(p("thetaunit"),p("mode",f<l?"lines+markers":"lines"),p("text"),p("hovertext"),"fills"!==h.hoveron&&p("hovertemplate"),b.hasLines(h)&&(e(v,h,s,d,p),p("connectgaps")),b.hasMarkers(h)&&_(v,h,s,d,p),b.hasText(h)&&(p("texttemplate"),o(v,h,d,p)),p("fill"),"none"!==h.fill&&a(v,h,s,p),y.coerceSelectionMarkerOpacity(h,p)):h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatterpolar/defaults":1004,"./attributes":1009}],1013:[function(x,ue,le){"use strict";var y=x("../scatterpolar/format_labels");ue.exports=function(b,T,_){var e=b.i;return"r"in b||(b.r=T._r[e]),"theta"in b||(b.theta=T._theta[e]),y(b,T,_)}},{"../scatterpolar/format_labels":1005}],1014:[function(x,ue,le){"use strict";var y=x("../scattergl/hover"),b=x("../scatterpolar/hover").makeHoverPointText;ue.exports={hoverPoints:function(T,_,e,o){var a=T.cd[0].t,l=a.r,i=a.theta,v=y.hoverPoints(T,_,e,o);if(v&&!1!==v[0].index){var h=v[0];if(void 0===h.index)return v;var s=T.subplot,d=h.cd[h.index],p=h.trace;if(d.r=l[h.index],d.theta=i[h.index],s.isPtInside(d))return h.xLabelVal=void 0,h.yLabelVal=void 0,b(d,p,s,h),v}}}},{"../scattergl/hover":988,"../scatterpolar/hover":1006}],1015:[function(x,ue,le){arguments[4][896][0].apply(le,arguments)},{"./base_index":1010,"./plot":1016,dup:896}],1016:[function(x,ue,le){"use strict";var y=x("@plotly/point-cluster"),b=x("fast-isnumeric"),T=x("../scattergl/plot"),_=x("../scattergl/scene_update"),e=x("../scattergl/convert"),o=x("../../lib"),a=x("../scattergl/constants").TOO_MANY_POINTS;ue.exports=function(l,i,v){if(v.length){var h=i.radialAxis,s=i.angularAxis,d=_(l,i);return v.forEach(function(p){if(p&&p[0]&&p[0].trace){var f,g=p[0],m=g.trace,u=g.t,w=m._length,c=u.r,E=u.theta,M=u.opts,S=c.slice(),C=E.slice();for(f=0;f<c.length;f++)i.isPtInside({r:c[f],theta:E[f]})||(S[f]=NaN,C[f]=NaN);var O=new Array(2*w),I=Array(w),N=Array(w);for(f=0;f<w;f++){var F,L,P=S[f];if(b(P)){var j=h.c2g(P),U=s.c2g(C[f],m.thetaunit);F=j*Math.cos(U),L=j*Math.sin(U)}else F=L=NaN;I[f]=O[2*f]=F,N[f]=O[2*f+1]=L}u.tree=y(O),M.marker&&w>=a&&(M.marker.cluster=u.tree),M.marker&&(M.markerSel.positions=M.markerUnsel.positions=M.marker.positions=O),M.line&&O.length>1&&o.extendFlat(M.line,e.linePositions(l,m,O)),M.text&&(o.extendFlat(M.text,{positions:O},e.textPosition(l,m,M.text,M.marker)),o.extendFlat(M.textSel,{positions:O},e.textPosition(l,m,M.text,M.markerSel)),o.extendFlat(M.textUnsel,{positions:O},e.textPosition(l,m,M.text,M.markerUnsel))),M.fill&&!d.fill2d&&(d.fill2d=!0),M.marker&&!d.scatter2d&&(d.scatter2d=!0),M.line&&!d.line2d&&(d.line2d=!0),M.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(M.line),d.fillOptions.push(M.fill),d.markerOptions.push(M.marker),d.markerSelectedOptions.push(M.markerSel),d.markerUnselectedOptions.push(M.markerUnsel),d.textOptions.push(M.text),d.textSelectedOptions.push(M.textSel),d.textUnselectedOptions.push(M.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),u.x=I,u.y=N,u.rawx=I,u.rawy=N,u.r=c,u.theta=E,u.positions=O,u._scene=d,u.index=d.count,d.count++}}),T(l,i,v)}},ue.exports.reglPrecompiled={}},{"../../lib":503,"../scattergl/constants":982,"../scattergl/convert":983,"../scattergl/plot":990,"../scattergl/scene_update":991,"@plotly/point-cluster":59,"fast-isnumeric":190}],1017:[function(x,ue,le){"use strict";var y=x("../../plots/template_attributes").hovertemplateAttrs,b=x("../../plots/template_attributes").texttemplateAttrs,T=x("../../lib/extend").extendFlat,_=x("../scatter/attributes"),e=x("../../plots/attributes"),o=_.line;ue.exports={mode:_.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:b({editType:"plot"},{keys:["real","imag","text"]}),hovertext:_.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:T({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:T({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:T({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:T({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:_.hoveron,hovertemplate:y(),selected:_.selected,unselected:_.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1018:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../../constants/numerical").BADNUM,T=x("../scatter/colorscale_calc"),_=x("../scatter/arrays_to_calcdata"),e=x("../scatter/calc_selection"),o=x("../scatter/calc").calcMarkerSize;ue.exports=function(a,l){for(var i=a._fullLayout,v=l.subplot,s=i[v].imaginaryaxis,d=i[v].realaxis.makeCalcdata(l,"real"),p=s.makeCalcdata(l,"imag"),f=l._length,g=new Array(f),m=0;m<f;m++){var u=d[m],w=p[m],c=g[m]={};y(u)&&y(w)?(c.real=u,c.imag=w):c.real=b}return o(l,f),T(a,l),_(g,l),e(g,l),g}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1019:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/subtypes"),T=x("../scatter/marker_defaults"),_=x("../scatter/line_defaults"),e=x("../scatter/line_shape_defaults"),o=x("../scatter/text_defaults"),a=x("../scatter/fillcolor_defaults"),l=x("../scatter/constants").PTS_LINESONLY,i=x("./attributes");ue.exports=function(v,h,s,d){function p(m,u){return y.coerce(v,h,i,m,u)}var u,c,E,M,S,f=(u=h,M=(c=p)("real"),S=c("imag"),M&&S&&(E=Math.min(M.length,S.length)),u._length=E,E);if(f){p("mode",f<l?"lines+markers":"lines"),p("text"),p("hovertext"),"fills"!==h.hoveron&&p("hovertemplate"),b.hasLines(h)&&(_(v,h,s,d,p),e(v,h,p),p("connectgaps")),b.hasMarkers(h)&&T(v,h,s,d,p,{gradient:!0}),b.hasText(h)&&(p("texttemplate"),o(v,h,d,p));var g=[];(b.hasMarkers(h)||b.hasText(h))&&(p("cliponaxis"),p("marker.maxdisplayed"),g.push("points")),p("fill"),"none"!==h.fill&&(a(v,h,s,p),b.hasLines(h)||e(v,h,p)),"tonext"!==h.fill&&"toself"!==h.fill||g.push("fills"),p("hoveron",g.join("+")||"points"),y.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1017}],1020:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes");ue.exports=function(b,T,_){var e={},o=_[T.subplot]._subplot;return e.realLabel=y.tickText(o.radialAxis,b.real,!0).text,e.imagLabel=y.tickText(o.angularAxis,b.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1021:[function(x,ue,le){"use strict";var y=x("../scatter/hover");function b(T,_,e,o){var a=e.radialAxis,l=e.angularAxis;a._hovertitle="real",l._hovertitle="imag";var i={};i[_.subplot]={_subplot:e};var v=_._module.formatLabels(T,_,i);o.realLabel=v.realLabel,o.imagLabel=v.imagLabel;var s=[];function d(f,g){s.push(f._hovertitle+": "+g)}if(!_.hovertemplate){var p=(T.hi||_.hoverinfo).split("+");-1!==p.indexOf("all")&&(p=["real","imag","text"]),-1!==p.indexOf("real")&&d(a,o.realLabel),-1!==p.indexOf("imag")&&d(l,o.imagLabel),-1!==p.indexOf("text")&&o.text&&(s.push(o.text),delete o.text),o.extraText=s.join("<br>")}}ue.exports={hoverPoints:function(T,_,e,o){var a=y(T,_,e,o);if(a&&!1!==a[0].index){var l=a[0];if(void 0===l.index)return a;var i=T.subplot,v=l.cd[l.index],h=l.trace;if(i.isPtInside(v))return l.xLabelVal=void 0,l.yLabelVal=void 0,b(v,h,i,l),l.hovertemplate=h.hovertemplate,a}},makeHoverPointText:b}},{"../scatter/hover":938}],1022:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"scattersmith",basePlotModule:x("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,selectPoints:x("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1017,"./calc":1018,"./defaults":1019,"./format_labels":1020,"./hover":1021,"./plot":1023}],1023:[function(x,ue,le){"use strict";var y=x("../scatter/plot"),b=x("../../constants/numerical").BADNUM,T=x("../../plots/smith/helpers").smith;ue.exports=function(_,e,o){for(var a=e.layers.frontplot.select("g.scatterlayer"),l={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},i=0;i<o.length;i++)for(var v=o[i],h=0;h<v.length;h++){var s=v[h],d=s.real;if(d===b)s.x=s.y=b;else{var p=T([d,s.imag]);s.x=p[0],s.y=p[1]}}y(_,l,o,a)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":948}],1024:[function(x,ue,le){"use strict";var y=x("../../plots/template_attributes").hovertemplateAttrs,b=x("../../plots/template_attributes").texttemplateAttrs,T=x("../scatter/attributes"),_=x("../../plots/attributes"),e=x("../../components/colorscale/attributes"),o=x("../../components/drawing/attributes").dash,a=x("../../lib/extend").extendFlat,l=T.marker,i=T.line,v=l.line;ue.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},T.mode,{dflt:"markers"}),text:a({},T.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},T.hovertext,{}),line:{color:i.color,width:i.width,dash:o,shape:a({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:a({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,marker:a({symbol:l.symbol,opacity:l.opacity,maxdisplayed:l.maxdisplayed,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,line:a({width:v.width,editType:"calc"},e("marker.line")),gradient:l.gradient,editType:"calc"},e("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:a({},_.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:y()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1025:[function(x,ue,le){"use strict";var y=x("fast-isnumeric"),b=x("../scatter/colorscale_calc"),T=x("../scatter/arrays_to_calcdata"),_=x("../scatter/calc_selection"),e=x("../scatter/calc").calcMarkerSize,o=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};ue.exports=function(l,i){var v,h,s,d,p,f,g=l._fullLayout[i.subplot].sum,m=i.sum||g,u={a:i.a,b:i.b,c:i.c};for(v=0;v<o.length;v++)if(!u[s=o[v]]){for(p=u[a[s][0]],f=u[a[s][1]],d=new Array(p.length),h=0;h<p.length;h++)d[h]=m-p[h]-f[h];u[s]=d}var w,c,E,M,O=i._length,I=new Array(O);for(v=0;v<O;v++)c=u.b[v],E=u.c[v],y(w=u.a[v])&&y(c)&&y(E)?(1!=(M=g/((w=+w)+(c=+c)+(E=+E)))&&(w*=M,c*=M,E*=M),I[v]={x:E-c,y:w,a:w,b:c,c:E}):I[v]={x:!1,y:!1};return e(i,O),b(l,i),T(I,i),_(I,i),I}},{"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1026:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/constants"),T=x("../scatter/subtypes"),_=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),o=x("../scatter/line_shape_defaults"),a=x("../scatter/text_defaults"),l=x("../scatter/fillcolor_defaults"),i=x("./attributes");ue.exports=function(v,h,s,d){function p(c,E){return y.coerce(v,h,i,c,E)}var f,g=p("a"),m=p("b"),u=p("c");if(g?(f=g.length,m?(f=Math.min(f,m.length),u&&(f=Math.min(f,u.length))):f=u?Math.min(f,u.length):0):m&&u&&(f=Math.min(m.length,u.length)),f){h._length=f,p("sum"),p("text"),p("hovertext"),"fills"!==h.hoveron&&p("hovertemplate"),p("mode",f<b.PTS_LINESONLY?"lines+markers":"lines"),T.hasLines(h)&&(e(v,h,s,d,p),o(v,h,p),p("connectgaps")),T.hasMarkers(h)&&_(v,h,s,d,p,{gradient:!0}),T.hasText(h)&&(p("texttemplate"),a(v,h,d,p));var w=[];(T.hasMarkers(h)||T.hasText(h))&&(p("cliponaxis"),p("marker.maxdisplayed"),w.push("points")),p("fill"),"none"!==h.fill&&(l(v,h,s,p),T.hasLines(h)||o(v,h,p)),"tonext"!==h.fill&&"toself"!==h.fill||w.push("fills"),p("hoveron",w.join("+")||"points"),y.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1024}],1027:[function(x,ue,le){"use strict";ue.exports=function(y,b,T,_,e){if(b.xa&&(y.xaxis=b.xa),b.ya&&(y.yaxis=b.ya),_[e]){var o=_[e];y.a=o.a,y.b=o.b,y.c=o.c}else y.a=b.a,y.b=b.b,y.c=b.c;return y}},{}],1028:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes");ue.exports=function(b,T,_){var e={},o=_[T.subplot]._subplot;return e.aLabel=y.tickText(o.aaxis,b.a,!0).text,e.bLabel=y.tickText(o.baxis,b.b,!0).text,e.cLabel=y.tickText(o.caxis,b.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1029:[function(x,ue,le){"use strict";var y=x("../scatter/hover");ue.exports=function(b,T,_,e){var o=y(b,T,_,e);if(o&&!1!==o[0].index){var a=o[0];if(void 0===a.index){var i=b.xa._length,v=i*(1-a.y0/b.ya._length)/2,h=i-v;return a.x0=Math.max(Math.min(a.x0,h),v),a.x1=Math.max(Math.min(a.x1,h),v),o}var s=a.cd[a.index],d=a.trace,p=a.subplot;a.a=s.a,a.b=s.b,a.c=s.c,a.xLabelVal=void 0,a.yLabelVal=void 0;var f={};f[d.subplot]={_subplot:p};var g=d._module.formatLabels(s,d,f);a.aLabel=g.aLabel,a.bLabel=g.bLabel,a.cLabel=g.cLabel;var u=[];if(!d.hovertemplate){var w=(s.hi||d.hoverinfo).split("+");-1!==w.indexOf("all")&&(w=["a","b","c"]),-1!==w.indexOf("a")&&c(p.aaxis,a.aLabel),-1!==w.indexOf("b")&&c(p.baxis,a.bLabel),-1!==w.indexOf("c")&&c(p.caxis,a.cLabel)}return a.extraText=u.join("<br>"),a.hovertemplate=d.hovertemplate,o}function c(E,M){u.push(E._hovertitle+": "+M)}}},{"../scatter/hover":938}],1030:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../scatter/select"),eventData:x("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:x("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1024,"./calc":1025,"./defaults":1026,"./event_data":1027,"./format_labels":1028,"./hover":1029,"./plot":1031}],1031:[function(x,ue,le){"use strict";var y=x("../scatter/plot");ue.exports=function(b,T,_){var e=T.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var o={xaxis:T.xaxis,yaxis:T.yaxis,plot:e,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},a=T.layers.frontplot.select("g.scatterlayer");y(b,o,_,a)}},{"../scatter/plot":948}],1032:[function(x,ue,le){"use strict";var y=x("../scatter/attributes"),b=x("../../components/colorscale/attributes"),T=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../scattergl/attributes"),o=x("../../plots/cartesian/constants").idRegex,a=x("../../plot_api/plot_template").templatedArray,l=x("../../lib/extend").extendFlat,i=y.marker,v=i.line,h=l(b("marker.line",{editTypeOverride:"calc"}),{width:l({},v.width,{editType:"calc"}),editType:"calc"}),s=l(b("marker"),{symbol:i.symbol,size:l({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:h,editType:"calc"});function d(p){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:o[p],editType:"plot"}}}s.color.editType=s.cmin.editType=s.cmax.editType="style",ue.exports={dimensions:a("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:l({},e.text,{}),hovertext:l({},e.hovertext,{}),hovertemplate:_(),xhoverformat:T("x"),yhoverformat:T("y"),marker:s,xaxes:d("x"),yaxes:d("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergl/attributes":979}],1033:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../components/grid");ue.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),calc:x("./calc"),plot:x("./plot"),hoverPoints:x("./hover").hoverPoints,selectPoints:x("./select"),editStyle:x("./edit_style"),meta:{}},y.register(b)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":945,"./attributes":1032,"./calc":1035,"./defaults":1036,"./edit_style":1037,"./hover":1039,"./plot":1041,"./select":1043}],1034:[function(x,ue,le){"use strict";var y=x("regl-line2d"),b=x("../../registry"),T=x("../../lib/prepare_regl"),_=x("../../plots/get_data").getModuleCalcData,e=x("../../plots/cartesian"),o=x("../../plots/cartesian/axis_ids").getFromId,a=x("../../plots/cartesian/axes").shouldShowZeroLine,l={};function i(h,s,d){for(var f=s._visibleDims,g=d.viewOpts.ranges=new Array(d.matrixOptions.data.length),m=0;m<f.length;m++){var u=f[m],w=g[m]=new Array(4),c=o(h,s._diag[u][0]);c&&(w[0]=c.r2l(c.range[0]),w[2]=c.r2l(c.range[1]));var E=o(h,s._diag[u][1]);E&&(w[1]=E.r2l(E.range[0]),w[3]=E.r2l(E.range[1]))}d.selectBatch.length||d.unselectBatch.length?d.matrix.update({ranges:g},{ranges:g}):d.matrix.update({ranges:g})}function v(h){var s=h._fullLayout,d=s._glcanvas.data()[0].regl,p=s._splomGrid;p||(p=s._splomGrid=y(d)),p.update(function(f){var g,m=f._context.plotGlPixelRatio,u=f._fullLayout,w=u._size,c=[0,0,u.width*m,u.height*m],E={};function M(J,ee,se,G,H,Y){se*=m,G*=m,H*=m,Y*=m;var oe=ee[J+"color"],W=ee[J+"width"],ne=String(oe+W);ne in E?E[ne].data.push(NaN,NaN,se,G,H,Y):E[ne]={data:[se,G,H,Y],join:"rect",thickness:W*m,color:oe,viewport:c,range:c,overlay:!1}}for(g in u._splomSubplots){var S,C,O=u._plots[g],I=O.xaxis,N=O.yaxis,F=I._gridVals,L=N._gridVals,P=I._offset,j=I._length,U=N._length,$=w.b+N.domain[0]*w.h,X=-N._m,te=-X*N.r2l(N.range[0],N.calendar);if(I.showgrid)for(g=0;g<F.length;g++)S=P+I.l2p(F[g].x),M("grid",I,S,$,S,$+U);if(N.showgrid)for(g=0;g<L.length;g++)M("grid",N,P,C=$+te+X*L[g].x,P+j,C);a(f,I,N)&&(S=P+I.l2p(0),M("zeroline",I,S,$,S,$+U)),a(f,N,I)&&M("zeroline",N,P,C=$+te+0,P+j,C)}var ae=[];for(g in E)ae.push(E[g]);return ae}(h))}ue.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(h){var s=h._fullLayout,d=b.getModule("splom"),p=_(h.calcdata,d)[0];T(h,["ANGLE_instanced_arrays","OES_element_index_uint"],l)&&(s._hasOnlyLargeSploms&&v(h),d.plot(h,{},p))},drag:function(h){var s=h.calcdata,d=h._fullLayout;d._hasOnlyLargeSploms&&v(h);for(var p=0;p<s.length;p++){var f=s[p][0].trace,g=d._splomScenes[f.uid];"splom"===f.type&&g&&g.matrix&&i(h,f,g)}},updateGrid:v,clean:function(h,s,d,p){var f,g={};if(p._splomScenes){for(f=0;f<h.length;f++){var m=h[f];"splom"===m.type&&(g[m.uid]=1)}for(f=0;f<d.length;f++){var u=d[f];if(!g[u.uid]){var w=p._splomScenes[u.uid];w&&w.destroy&&w.destroy(),p._splomScenes[u.uid]=null,delete p._splomScenes[u.uid]}}}0===Object.keys(p._splomScenes||{}).length&&delete p._splomScenes,p._splomGrid&&!s._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),e.clean(h,s,d,p)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:l}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1035:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axis_ids"),T=x("../scatter/calc").calcMarkerSize,_=x("../scatter/calc").calcAxisExpansion,e=x("../scatter/colorscale_calc"),o=x("../scattergl/convert").markerSelection,a=x("../scattergl/convert").markerStyle,l=x("./scene_update"),i=x("../../constants/numerical").BADNUM,v=x("../scattergl/constants").TOO_MANY_POINTS;ue.exports=function(h,s){var d,p,f,g,m,u,w=s.dimensions,c=s._length,E={},M=E.cdata=[],S=E.data=[],C=s._visibleDims=[];function O(N,F){for(var L=N.makeCalcdata({v:F.values,vcalendar:s.calendar},"v"),P=0;P<L.length;P++)L[P]=L[P]===i?NaN:L[P];M.push(L),S.push("log"===N.type?y.simpleMap(L,N.c2l):L)}for(d=0;d<w.length;d++)if((f=w[d]).visible){if(g=b.getFromId(h,s._diag[d][0]),m=b.getFromId(h,s._diag[d][1]),g&&m&&g.type!==m.type){y.log("Skipping splom dimension "+d+" with conflicting axis types");continue}g?(O(g,f),m&&"category"===m.type&&(m._categories=g._categories.slice())):O(m,f),C.push(d)}for(e(h,s),y.extendFlat(E,a(s)),u=M.length*c>v?E.sizeAvg||Math.max(E.size,3):T(s,c),p=0;p<C.length;p++)f=w[d=C[p]],g=b.getFromId(h,s._diag[d][0])||{},m=b.getFromId(h,s._diag[d][1])||{},_(h,s,g,m,M[p],M[p],u);var I=l(h,s);return I.matrix||(I.matrix=!0),I.matrixOptions=E,I.selectedOptions=o(s,s.selected),I.unselectedOptions=o(s,s.unselected),[{x:!1,y:!1,t:{},trace:s}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983,"./scene_update":1042}],1036:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/array_container_defaults"),T=x("./attributes"),_=x("../scatter/subtypes"),e=x("../scatter/marker_defaults"),o=x("../parcoords/merge_length"),a=x("../scattergl/helpers").isOpenSymbol;function l(i,v){function h(d,p){return y.coerce(i,v,T.dimensions,d,p)}h("label");var s=h("values");s&&s.length?h("visible"):v.visible=!1,h("axis.type"),h("axis.matches")}ue.exports=function(i,v,h,s){function d(c,E){return y.coerce(i,v,T,c,E)}var p=b(i,v,{name:"dimensions",handleItemDefaults:l}),f=d("diagonal.visible"),g=d("showupperhalf"),m=d("showlowerhalf");if(o(v,p,"values")&&(f||g||m)){d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),e(i,v,h,s,d);var u=a(v.marker.symbol),w=_.isBubble(v);d("marker.line.width",u||w?1:0),function(c,E,M,S){var C,O,I=E.dimensions,N=I.length,F=E.showupperhalf,L=E.showlowerhalf,P=E.diagonal.visible,j=new Array(N),U=new Array(N);for(C=0;C<N;C++){var $=C?C+1:"";j[C]="x"+$,U[C]="y"+$}var X=S("xaxes",j),te=S("yaxes",U),ae=E._diag=new Array(N);E._xaxes={},E._yaxes={};var J=[],ee=[];function se(fe,me,pe,we){if(fe){var ye=fe.charAt(0),Te=M._splomAxes[ye];if(E["_"+ye+"axes"][fe]=1,we.push(fe),!(fe in Te)){var Le=Te[fe]={};pe&&(Le.label=pe.label||"",pe.visible&&pe.axis&&(pe.axis.type&&(Le.type=pe.axis.type),pe.axis.matches&&(Le.matches=me)))}}}var G=!P&&!L,H=!P&&!F;for(E._axesDim={},C=0;C<N;C++){var Y=I[C],oe=0===C,W=C===N-1,ne=oe&&G||W&&H?void 0:X[C],re=oe&&H||W&&G?void 0:te[C];se(ne,re,Y,J),se(re,ne,Y,ee),ae[C]=[ne,re],E._axesDim[ne]=C,E._axesDim[re]=C}for(C=0;C<J.length;C++)for(O=0;O<ee.length;O++){var ce=J[C]+ee[O];C>O&&F||C<O&&L?M._splomSubplots[ce]=1:C!==O||!P&&L&&F||(M._splomSubplots[ce]=1)}(!L||!P&&F&&L)&&(M._splomGridDflt.xside="bottom",M._splomGridDflt.yside="left")}(0,v,s,d),y.coerceSelectionMarkerOpacity(v,d)}else v.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":898,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scattergl/helpers":987,"./attributes":1032}],1037:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/colorscale_calc"),T=x("../scattergl/convert").markerStyle;ue.exports=function(_,e){var o=e.trace,a=_._fullLayout._splomScenes[o.uid];if(a){b(_,o),y.extendFlat(a.matrixOptions,T(o));var l=y.extendFlat({},a.matrixOptions,a.viewOpts);a.matrix.update(l,null)}}},{"../../lib":503,"../scatter/colorscale_calc":930,"../scattergl/convert":983}],1038:[function(x,ue,le){"use strict";le.getDimIndex=function(y,b){for(var T=b._id,_={x:0,y:1}[T.charAt(0)],e=y._visibleDims,o=0;o<e.length;o++)if(y._diag[e[o]][_]===T)return o;return!1}},{}],1039:[function(x,ue,le){"use strict";var y=x("./helpers"),b=x("../scattergl/hover").calcHover;ue.exports={hoverPoints:function(T,_,e){var o=T.cd[0].trace,a=T.scene.matrixOptions.cdata,l=T.xa,i=T.ya,v=l.c2p(_),h=i.c2p(e),s=T.distance,d=y.getDimIndex(o,l),p=y.getDimIndex(o,i);if(!1===d||!1===p)return[T];for(var f,g,m=a[d],u=a[p],w=s,c=0;c<m.length;c++){var M=u[c],S=l.c2p(m[c])-v,C=i.c2p(M)-h,O=Math.sqrt(S*S+C*C);O<w&&(w=g=O,f=c)}return T.index=f,T.distance=w,T.dxy=g,void 0===f?[T]:[b(T,m,u,o)]}}},{"../scattergl/hover":988,"./helpers":1038}],1040:[function(x,ue,le){"use strict";var y=x("./base_index");y.basePlotModule=x("./base_plot"),ue.exports=y},{"./base_index":1033,"./base_plot":1034}],1041:[function(x,ue,le){"use strict";var y=x("regl-splom"),b=x("../../lib"),T=x("../../plots/cartesian/axis_ids"),_=x("../../components/dragelement/helpers").selectMode;function e(o,a){var l,i,v,h,s,d=o._fullLayout,p=d._size,f=a.trace,g=a.t,m=d._splomScenes[f.uid],u=m.matrixOptions,w=u.cdata,c=d._glcanvas.data()[0].regl,E=d.dragmode;if(0!==w.length){u.lower=f.showupperhalf,u.upper=f.showlowerhalf,u.diagonal=f.diagonal.visible;var M=f._visibleDims,S=w.length,C=m.viewOpts={};for(C.ranges=new Array(S),C.domains=new Array(S),s=0;s<M.length;s++){v=M[s];var O=C.ranges[s]=new Array(4),I=C.domains[s]=new Array(4);(l=T.getFromId(o,f._diag[v][0]))&&(O[0]=l._rl[0],O[2]=l._rl[1],I[0]=l.domain[0],I[2]=l.domain[1]),(i=T.getFromId(o,f._diag[v][1]))&&(O[1]=i._rl[0],O[3]=i._rl[1],I[1]=i.domain[0],I[3]=i.domain[1])}var N=o._context.plotGlPixelRatio,F=p.l*N,L=p.b*N;C.viewport=[F,L,p.w*N+F,p.h*N+L],!0===m.matrix&&(m.matrix=y(c));var U=d.clickmode.indexOf("select")>-1,$=!0;if(_(E)||f.selectedpoints||U){var X=f._length;if(f.selectedpoints){m.selectBatch=f.selectedpoints;var te=f.selectedpoints,ae={};for(v=0;v<te.length;v++)ae[te[v]]=!0;var J=[];for(v=0;v<X;v++)ae[v]||J.push(v);m.unselectBatch=J}var ee=g.xpx=new Array(S),se=g.ypx=new Array(S);for(s=0;s<M.length;s++){if(l=T.getFromId(o,f._diag[v=M[s]][0]))for(ee[s]=new Array(X),h=0;h<X;h++)ee[s][h]=l.c2p(w[s][h]);if(i=T.getFromId(o,f._diag[v][1]))for(se[s]=new Array(X),h=0;h<X;h++)se[s][h]=i.c2p(w[s][h])}if(m.selectBatch.length||m.unselectBatch.length){var G=b.extendFlat({},u,m.unselectedOptions,C),H=b.extendFlat({},u,m.selectedOptions,C);m.matrix.update(G,H),$=!1}}else g.xpx=g.ypx=null;if($){var Y=b.extendFlat({},u,C);m.matrix.update(Y,null)}}}ue.exports=function(o,a,l){if(l.length)for(var i=0;i<l.length;i++)e(o,l[i][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1042:[function(x,ue,le){"use strict";var y=x("../../lib");ue.exports=function(b,T){var _=b._fullLayout,e=T.uid,o=_._splomScenes;o||(o=_._splomScenes={});var a={dirty:!0,selectBatch:[],unselectBatch:[]},l=o[T.uid];return l||((l=o[e]=y.extendFlat({},a,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||y.extendFlat(l,a),l}},{"../../lib":503}],1043:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../scatter/subtypes"),T=x("./helpers");ue.exports=function(_,e){var o=_.cd,a=o[0].trace,l=o[0].t,i=_.scene,v=i.matrixOptions.cdata,h=_.xaxis,s=_.yaxis,d=[];if(!i)return d;var p=!b.hasMarkers(a)&&!b.hasText(a);if(!0!==a.visible||p)return d;var f=T.getDimIndex(a,h),g=T.getDimIndex(a,s);if(!1===f||!1===g)return d;var m=l.xpx[f],u=l.ypx[g],w=v[f],c=v[g],E=[],M=[];if(!1!==e&&!e.degenerate)for(var S=0;S<w.length;S++)e.contains([m[S],u[S]],null,S,_)?(E.push(S),d.push({pointNumber:S,x:w[S],y:c[S]})):M.push(S);var C=i.matrixOptions;return E.length||M.length?i.selectBatch.length||i.unselectBatch.length||i.matrix.update(i.unselectedOptions,y.extendFlat({},C,i.selectedOptions,i.viewOpts)):i.matrix.update(C,null),i.selectBatch=E,i.unselectBatch=M,d}},{"../../lib":503,"../scatter/subtypes":952,"./helpers":1038}],1044:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/attributes"),b=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=x("../../plots/template_attributes").hovertemplateAttrs,_=x("../mesh3d/attributes"),e=x("../../plots/attributes"),o=x("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:T({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:b("u",1),vhoverformat:b("v",1),whoverformat:b("w",1),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,y("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){a[l]=_[l]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,ue.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1045:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/colorscale/calc");function T(o){var a,l,i,v,h,s,d,p,f,g,m,u,w=o._x,c=o._y,E=o._z,M=o._len,S=-1/0,C=1/0,O=-1/0,I=1/0,N=-1/0,F=1/0,L="";for(M&&(d=w[0],f=c[0],m=E[0]),M>1&&(p=w[M-1],g=c[M-1],u=E[M-1]),a=0;a<M;a++)S=Math.max(S,w[a]),C=Math.min(C,w[a]),O=Math.max(O,c[a]),I=Math.min(I,c[a]),N=Math.max(N,E[a]),F=Math.min(F,E[a]),v||w[a]===d||(v=!0,L+="x"),h||c[a]===f||(h=!0,L+="y"),s||E[a]===m||(s=!0,L+="z");v||(L+="x"),h||(L+="y"),s||(L+="z");var P=_(o._x),j=_(o._y),U=_(o._z);L=(L=(L=L.replace("x",(d>p?"-":"+")+"x")).replace("y",(f>g?"-":"+")+"y")).replace("z",(m>u?"-":"+")+"z");var $=function(){M=0,P=[],j=[],U=[]};(!M||M<P.length*j.length*U.length)&&$();var X=function(ye){return"x"===ye?w:"y"===ye?c:E},te=function(ye){return"x"===ye?P:"y"===ye?j:U},ae=function(ye){return ye[M-1]<ye[0]?-1:1},J=X(L[1]),ee=X(L[3]),se=X(L[5]),G=te(L[1]).length,H=te(L[3]).length,Y=te(L[5]).length,oe=!1,W=function(ye,Te,Le){return G*(H*ye+Te)+Le},ne=ae(X(L[1])),re=ae(X(L[3])),ce=ae(X(L[5]));for(a=0;a<Y-1;a++){for(l=0;l<H-1;l++){for(i=0;i<G-1;i++){var fe=W(a,l,i),me=W(a,l,i+1),pe=W(a,l+1,i),we=W(a+1,l,i);if(J[fe]*ne<J[me]*ne&&ee[fe]*re<ee[pe]*re&&se[fe]*ce<se[we]*ce||(oe=!0),oe)break}if(oe)break}if(oe)break}return oe&&(y.warn("Encountered arbitrary coordinates! Unable to input data grid."),$()),{xMin:C,yMin:I,zMin:F,xMax:S,yMax:O,zMax:N,Xs:P,Ys:j,Zs:U,len:M,fill:L}}function _(o){return y.distinctVals(o).vals}function e(o,a){if(void 0===a&&(a=o.length),y.isTypedArray(o))return o.subarray(0,a);for(var l=[],i=0;i<a;i++)l[i]=+o[i];return l}ue.exports={calc:function(o,a){a._len=Math.min(a.u.length,a.v.length,a.w.length,a.x.length,a.y.length,a.z.length),a._u=e(a.u,a._len),a._v=e(a.v,a._len),a._w=e(a.w,a._len),a._x=e(a.x,a._len),a._y=e(a.y,a._len),a._z=e(a.z,a._len);var l=T(a);a._gridFill=l.fill,a._Xs=l.Xs,a._Ys=l.Ys,a._Zs=l.Zs,a._len=l.len;var i,v,h,s=0;a.starts&&(i=e(a.starts.x||[]),v=e(a.starts.y||[]),h=e(a.starts.z||[]),s=Math.min(i.length,v.length,h.length)),a._startsX=i||[],a._startsY=v||[],a._startsZ=h||[];var d,p=0,f=1/0;for(d=0;d<a._len;d++){var g=a._u[d],m=a._v[d],u=a._w[d],w=Math.sqrt(g*g+m*m+u*u);p=Math.max(p,w),f=Math.min(f,w)}for(b(o,a,{vals:[f,p],containerStr:"",cLetter:"c"}),d=0;d<s;d++){var c=i[d];l.xMax=Math.max(l.xMax,c),l.xMin=Math.min(l.xMin,c);var E=v[d];l.yMax=Math.max(l.yMax,E),l.yMin=Math.min(l.yMin,E);var M=h[d];l.zMax=Math.max(l.zMax,M),l.zMin=Math.min(l.zMin,M)}a._slen=s,a._normMax=p,a._xbnds=[l.xMin,l.xMax],a._ybnds=[l.yMin,l.yMax],a._zbnds=[l.zMin,l.zMax]},filter:e,processGrid:T}},{"../../components/colorscale/calc":374,"../../lib":503}],1046:[function(x,ue,le){"use strict";var y=x("../../../stackgl_modules").gl_streamtube3d,b=y.createTubeMesh,T=x("../../lib"),_=x("../../lib/gl_format_color").parseColorScale,e=x("../../components/colorscale").extractOpts,o=x("../../plots/gl3d/zip3"),a={xaxis:0,yaxis:1,zaxis:2};function l(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var i=l.prototype;function v(d){var p=d.length;return p>2?d.slice(1,p-1):2===p?[(d[0]+d[1])/2]:d}function h(d){var p=d.length;return 1===p?[.5,.5]:[d[1]-d[0],d[p-1]-d[p-2]]}function s(d,p){var f=d.fullSceneLayout,g=d.dataScale,m=p._len,u={};function w(G,H){var Y=f[H],oe=g[a[H]];return T.simpleMap(G,function(W){return Y.d2l(W)*oe})}if(u.vectors=o(w(p._u,"xaxis"),w(p._v,"yaxis"),w(p._w,"zaxis"),m),!m)return{positions:[],cells:[]};var c=w(p._Xs,"xaxis"),E=w(p._Ys,"yaxis"),M=w(p._Zs,"zaxis");if(u.meshgrid=[c,E,M],u.gridFill=p._gridFill,p._slen)u.startingPositions=o(w(p._startsX,"xaxis"),w(p._startsY,"yaxis"),w(p._startsZ,"zaxis"));else{for(var S=E[0],C=v(c),O=v(M),I=new Array(C.length*O.length),N=0,F=0;F<C.length;F++)for(var L=0;L<O.length;L++)I[N++]=[C[F],S,O[L]];u.startingPositions=I}u.colormap=_(p),u.tubeSize=p.sizeref,u.maxLength=p.maxdisplayed;var P=w(p._xbnds,"xaxis"),j=w(p._ybnds,"yaxis"),U=w(p._zbnds,"zaxis"),$=h(c),X=h(E),te=h(M),J=y(u,[[P[0]-$[0],j[0]-X[0],U[0]-te[0]],[P[1]+$[1],j[1]+X[1],U[1]+te[1]]]),ee=e(p);J.vertexIntensityBounds=[ee.min/p._normMax,ee.max/p._normMax];var se=p.lightposition;return J.lightPosition=[se.x,se.y,se.z],J.ambient=p.lighting.ambient,J.diffuse=p.lighting.diffuse,J.specular=p.lighting.specular,J.roughness=p.lighting.roughness,J.fresnel=p.lighting.fresnel,J.opacity=p.opacity,p._pad=J.tubeScale*p.sizeref*2,J}i.handlePick=function(d){var p=this.scene.fullSceneLayout,f=this.scene.dataScale;function g(w,c){var M=f[a[c]];return p[c].l2c(w)/M}if(d.object===this.mesh){var m=d.data.position,u=d.data.velocity;return d.traceCoordinate=[g(m[0],"xaxis"),g(m[1],"yaxis"),g(m[2],"zaxis"),g(u[0],"xaxis"),g(u[1],"yaxis"),g(u[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(d){this.data=d;var p=s(this.scene,d);this.mesh.update(p)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ue.exports=function(d,p){var f=d.glplot.gl,g=s(d,p),m=b(f,g),u=new l(d,p.uid);return u.mesh=m,u.data=p,m._trace=u,d.glplot.add(m),u}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1047:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/colorscale/defaults"),T=x("./attributes");ue.exports=function(_,e,o,a){function l(f,g){return y.coerce(_,e,T,f,g)}var i=l("u"),v=l("v"),h=l("w"),s=l("x"),d=l("y"),p=l("z");i&&i.length&&v&&v.length&&h&&h.length&&s&&s.length&&d&&d.length&&p&&p.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),b(_,e,a,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1044}],1048:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"streamtube",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:x("./calc").calc,plot:x("./convert"),eventData:function(y,b){return y.tubex=y.x,y.tubey=y.y,y.tubez=y.z,y.tubeu=b.traceCoordinate[3],y.tubev=b.traceCoordinate[4],y.tubew=b.traceCoordinate[5],y.norm=b.traceCoordinate[6],y.divergence=b.traceCoordinate[7],delete y.x,delete y.y,delete y.z,y},meta:{}}},{"../../plots/gl3d":598,"./attributes":1044,"./calc":1045,"./convert":1046,"./defaults":1047}],1049:[function(x,ue,le){"use strict";var y=x("../../plots/attributes"),b=x("../../plots/template_attributes").hovertemplateAttrs,T=x("../../plots/template_attributes").texttemplateAttrs,_=x("../../components/colorscale/attributes"),e=x("../../plots/domain").attributes,o=x("../pie/attributes"),a=x("./constants"),l=x("../../lib/extend").extendFlat;ue.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:l({colors:{valType:"data_array",editType:"calc"},line:{color:l({},o.marker.line.color,{dflt:null}),width:l({},o.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},_("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:o.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:T({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:o.hovertext,hoverinfo:l({},y.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:b({},{keys:a.eventDataKeys}),textfont:o.textfont,insidetextorientation:o.insidetextorientation,insidetextfont:o.insidetextfont,outsidetextfont:l({},o.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:o.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"./constants":1052}],1050:[function(x,ue,le){"use strict";var y=x("../../plots/plots");le.name="sunburst",le.plot=function(b,T,_,e){y.plotBasePlot(le.name,b,T,_,e)},le.clean=function(b,T,_,e){y.cleanBasePlot(le.name,b,T,_,e)}},{"../../plots/plots":619}],1051:[function(x,ue,le){"use strict";var y=x("d3-hierarchy"),b=x("fast-isnumeric"),T=x("../../lib"),_=x("../../components/colorscale").makeColorScaleFuncFromTrace,e=x("../pie/calc").makePullColorFn,o=x("../pie/calc").generateExtendedColors,a=x("../../components/colorscale").calc,l=x("../../constants/numerical").ALMOST_EQUAL,i={},v={},h={};le.calc=function(s,d){var p,f,g,m,u,w,c=s._fullLayout,E=d.ids,M=T.isArrayOrTypedArray(E),S=d.labels,C=d.parents,O=d.values,I=T.isArrayOrTypedArray(O),N=[],F={},L={},P=function(re){return re||"number"==typeof re},j=function(re){return!I||b(O[re])&&O[re]>=0};M?(p=Math.min(E.length,C.length),f=function(re){return P(E[re])&&j(re)},g=function(re){return String(E[re])}):(p=Math.min(S.length,C.length),f=function(re){return P(S[re])&&j(re)},g=function(re){return String(S[re])}),I&&(p=Math.min(p,O.length));for(var U=0;U<p;U++)if(f(U)){var $=g(U),X=P(C[U])?String(C[U]):"",te={i:U,id:$,pid:X,label:P(S[U])?String(S[U]):""};I&&(te.v=+O[U]),N.push(te),u=$,F[m=X]?F[m].push(u):F[m]=[u],L[u]=1}if(F[""]){if(F[""].length>1){for(var ae=T.randstr(),J=0;J<N.length;J++)""===N[J].pid&&(N[J].pid=ae);N.unshift({hasMultipleRoots:!0,id:ae,pid:"",label:""})}}else{var ee,se=[];for(ee in F)L[ee]||se.push(ee);if(1!==se.length)return T.warn(["Multiple implied roots, cannot build",d.type,"hierarchy of",d.name+".","These roots include:",se.join(", ")].join(" "));N.unshift({hasImpliedRoot:!0,id:ee=se[0],pid:"",label:ee})}try{w=y.stratify().id(function(re){return re.id}).parentId(function(re){return re.pid})(N)}catch(re){return T.warn(["Failed to build",d.type,"hierarchy of",d.name+".","Error:",re.message].join(" "))}var G=y.hierarchy(w),H=!1;if(I)switch(d.branchvalues){case"remainder":G.sum(function(re){return re.data.v});break;case"total":G.each(function(re){var ce=re.data.data,fe=ce.v;if(re.children){var me=re.children.reduce(function(pe,we){return pe+we.data.data.v},0);if((ce.hasImpliedRoot||ce.hasMultipleRoots)&&(fe=me),fe<me*l)return H=!0,T.warn(["Total value for node",re.data.data.id,"of",d.name,"is smaller than the sum of its children.","\nparent value =",fe,"\nchildren sum =",me].join(" "))}re.value=fe})}else!function re(ce,fe,me){var pe=0,we=ce.children;if(we){for(var ye=we.length,Te=0;Te<ye;Te++)pe+=re(we[Te],fe,me);me.branches&&pe++}else me.leaves&&pe++;return ce.value=ce.data.data.value=pe,fe._values||(fe._values=[]),fe._values[ce.data.data.i]=pe,pe}(G,d,{branches:-1!==d.count.indexOf("branches"),leaves:-1!==d.count.indexOf("leaves")});if(!H){var Y,oe;d.sort&&G.sort(function(re,ce){return ce.value-re.value});var W=d.marker.colors||[];return d._hasColorscale?(!!W.length||(W=I?d.values:d._values),a(s,d,{vals:W,containerStr:"marker",cLetter:"c"}),oe=_(d.marker)):Y=e(c["_"+d.type+"colormap"]),G.each(function(re){var ce=re.data.data;ce.color=d._hasColorscale?oe(W[ce.i]):Y(W[ce.i],ce.id)}),N[0].hierarchy=G,N}},le._runCrossTraceCalc=function(s,d){var p=d._fullLayout,f=d.calcdata,g=p[s+"colorway"],m=p["_"+s+"colormap"];p["extend"+s+"colors"]&&(g=o(g,"icicle"===s?h:"treemap"===s?v:i));var u,w=0;function c(S){var C=S.data.data,O=C.id;!1===C.color&&(m[O]?C.color=m[O]:S.parent?S.parent.parent?C.color=S.parent.data.data.color:(m[O]=C.color=g[w%g.length],w++):C.color=u)}for(var E=0;E<f.length;E++){var M=f[E][0];M.trace.type===s&&M.hierarchy&&(u=M.trace.root.color,M.hierarchy.each(c))}},le.crossTraceCalc=function(s){return le._runCrossTraceCalc("sunburst",s)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":903,"d3-hierarchy":115,"fast-isnumeric":190}],1052:[function(x,ue,le){"use strict";ue.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1053:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("../../plots/domain").defaults,_=x("../bar/defaults").handleText,e=x("../../components/colorscale"),o=e.hasColorscale,a=e.handleDefaults;ue.exports=function(l,i,v,h){function s(u,w){return y.coerce(l,i,b,u,w)}var d=s("labels"),p=s("parents");if(d&&d.length&&p&&p.length){var f=s("values");s(f&&f.length?"branchvalues":"count"),s("level"),s("maxdepth"),s("marker.line.width")&&s("marker.line.color",h.paper_bgcolor),s("marker.colors");var g=i._hasColorscale=o(l,"marker","colors")||(l.marker||{}).coloraxis;g&&a(l,i,h,s,{prefix:"marker.",cLetter:"c"}),s("leaf.opacity",g?1:.7);var m=s("text");s("texttemplate"),i.texttemplate||s("textinfo",Array.isArray(m)?"text+label":"label"),s("hovertext"),s("hovertemplate"),_(l,i,h,s,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("insidetextorientation"),s("sort"),s("rotation"),s("root.color"),T(i,h,s),i._length=null}else i.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1049}],1054:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../registry"),T=x("../../components/fx/helpers").appendArrayPointValue,_=x("../../components/fx"),e=x("../../lib"),o=x("../../lib/events"),a=x("./helpers"),l=x("../pie/helpers").formatPieValue;function i(v,h,s){for(var d=v.data.data,p={curveNumber:h.index,pointNumber:d.i,data:h._input,fullData:h},f=0;f<s.length;f++){var g=s[f];g in v&&(p[g]=v[g])}return"parentString"in v&&!a.isHierarchyRoot(v)&&(p.parent=v.parentString),T(p,h,d.i),p}ue.exports=function(v,h,s,d,p){var f=d[0],g=f.trace,m=f.hierarchy,u="sunburst"===g.type,w="treemap"===g.type||"icicle"===g.type;"_hasHoverLabel"in g||(g._hasHoverLabel=!1),"_hasHoverEvent"in g||(g._hasHoverEvent=!1),v.on("mouseover",function(c){var E=s._fullLayout;if(!s._dragging&&!1!==E.hovermode){var M,S=s._fullData[g.index],C=c.data.data,O=C.i,I=a.isHierarchyRoot(c),N=a.getParent(m,c),F=a.getValue(c),L=function(ne){return e.castOption(S,O,ne)},P=L("hovertemplate"),j=_.castHoverinfo(S,E,O),U=E.separators;if(P||j&&"none"!==j&&"skip"!==j){var $,X;u&&($=f.cx+c.pxmid[0]*(1-c.rInscribed),X=f.cy+c.pxmid[1]*(1-c.rInscribed)),w&&($=c._hoverX,X=c._hoverY);var te,ae={},J=[],ee=[],se=function(ne){return-1!==J.indexOf(ne)};j&&(J="all"===j?S._module.attributes.hoverinfo.flags:j.split("+")),ae.label=C.label,se("label")&&ae.label&&ee.push(ae.label),C.hasOwnProperty("v")&&(ae.value=C.v,ae.valueLabel=l(ae.value,U),se("value")&&ee.push(ae.valueLabel)),ae.currentPath=c.currentPath=a.getPath(c.data),se("current path")&&!I&&ee.push(ae.currentPath);var G=[],H=function(){-1===G.indexOf(te)&&(ee.push(te),G.push(te))};ae.percentParent=c.percentParent=F/a.getValue(N),ae.parent=c.parentString=a.getPtLabel(N),se("percent parent")&&(te=a.formatPercent(ae.percentParent,U)+" of "+ae.parent,H()),ae.percentEntry=c.percentEntry=F/a.getValue(h),ae.entry=c.entry=a.getPtLabel(h),!se("percent entry")||I||c.onPathbar||(te=a.formatPercent(ae.percentEntry,U)+" of "+ae.entry,H()),ae.percentRoot=c.percentRoot=F/a.getValue(m),ae.root=c.root=a.getPtLabel(m),se("percent root")&&!I&&(te=a.formatPercent(ae.percentRoot,U)+" of "+ae.root,H()),ae.text=L("hovertext")||L("text"),se("text")&&e.isValidTextValue(te=ae.text)&&ee.push(te),M=[i(c,S,p.eventDataKeys)];var Y={trace:S,y:X,_x0:c._x0,_x1:c._x1,_y0:c._y0,_y1:c._y1,text:ee.join("<br>"),name:P||se("name")?S.name:void 0,color:L("hoverlabel.bgcolor")||C.color,borderColor:L("hoverlabel.bordercolor"),fontFamily:L("hoverlabel.font.family"),fontSize:L("hoverlabel.font.size"),fontColor:L("hoverlabel.font.color"),nameLength:L("hoverlabel.namelength"),textAlign:L("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:ae,eventData:M};u&&(Y.x0=$-c.rInscribed*c.rpx1,Y.x1=$+c.rInscribed*c.rpx1,Y.idealAlign=c.pxmid[0]<0?"left":"right"),w&&(Y.x=$,Y.idealAlign=$<0?"left":"right");var oe=[];_.loneHover(Y,{container:E._hoverlayer.node(),outerContainer:E._paper.node(),gd:s,inOut_bbox:oe}),M[0].bbox=oe[0],g._hasHoverLabel=!0}if(w){var W=v.select("path.surface");p.styleOne(W,c,S,{hovered:!0})}g._hasHoverEvent=!0,s.emit("plotly_hover",{points:M||[i(c,S,p.eventDataKeys)],event:y.event})}}),v.on("mouseout",function(c){var E=s._fullLayout,M=s._fullData[g.index],S=y.select(this).datum();if(g._hasHoverEvent&&(c.originalEvent=y.event,s.emit("plotly_unhover",{points:[i(S,M,p.eventDataKeys)],event:y.event}),g._hasHoverEvent=!1),g._hasHoverLabel&&(_.loneUnhover(E._hoverlayer.node()),g._hasHoverLabel=!1),w){var C=v.select("path.surface");p.styleOne(C,S,M,{hovered:!1})}}),v.on("click",function(c){var E=s._fullLayout,M=s._fullData[g.index],S=u&&(a.isHierarchyRoot(c)||a.isLeaf(c)),C=a.getPtId(c),O=a.isEntry(c)?a.findEntryWithChild(m,C):a.findEntryWithLevel(m,C),I=a.getPtId(O),N={points:[i(c,M,p.eventDataKeys)],event:y.event};S||(N.nextLevel=I);var F=o.triggerHandler(s,"plotly_"+g.type+"click",N);if(!1!==F&&E.hovermode&&(s._hoverdata=[i(c,M,p.eventDataKeys)],_.click(s,y.event)),!S&&!1!==F&&!s._dragging&&!s._transitioning){b.call("_storeDirectGUIEdit",M,E._tracePreGUI[M.uid],{level:M.level});var L={data:[{level:I}],traces:[g.index]},P={frame:{redraw:!1,duration:p.transitionTime},transition:{duration:p.transitionTime,easing:p.transitionEasing},mode:"immediate",fromcurrent:!0};_.loneUnhover(E._hoverlayer.node()),b.call("animate",s,L,P)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":906,"./helpers":1055,"@plotly/d3":58}],1055:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/color"),T=x("../../lib/setcursor"),_=x("../pie/helpers");function e(o){return o.data.data.pid}le.findEntryWithLevel=function(o,a){var l;return a&&o.eachAfter(function(i){if(le.getPtId(i)===a)return l=i.copy()}),l||o},le.findEntryWithChild=function(o,a){var l;return o.eachAfter(function(i){for(var v=i.children||[],h=0;h<v.length;h++)if(le.getPtId(v[h])===a)return l=i.copy()}),l||o},le.isEntry=function(o){return!o.parent},le.isLeaf=function(o){return!o.children},le.getPtId=function(o){return o.data.data.id},le.getPtLabel=function(o){return o.data.data.label},le.getValue=function(o){return o.value},le.isHierarchyRoot=function(o){return""===e(o)},le.setSliceCursor=function(o,a,l){var i=l.isTransitioning;if(!i){var v=o.datum();i=l.hideOnRoot&&le.isHierarchyRoot(v)||l.hideOnLeaves&&le.isLeaf(v)}T(o,i?null:"pointer")},le.getInsideTextFontKey=function(o,a,l,i,v){var s=l.data.data.i;return y.castOption(a,s,((v||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+o)||y.castOption(a,s,"textfont."+o)||i.size},le.getOutsideTextFontKey=function(o,a,l,i){var v=l.data.data.i;return y.castOption(a,v,"outsidetextfont."+o)||y.castOption(a,v,"textfont."+o)||i.size},le.isOutsideText=function(o,a){return!o._hasColorscale&&le.isHierarchyRoot(a)},le.determineTextFont=function(o,a,l,i){return le.isOutsideText(o,a)?{color:le.getOutsideTextFontKey("color",v=o,h=a,s=l),family:le.getOutsideTextFontKey("family",v,h,s),size:le.getOutsideTextFontKey("size",v,h,s)}:function(v,h,s,d){var f=h.data.data,g=f.i,m=y.castOption(v,g,((d||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!m&&v._input.textfont&&(m=y.castOption(v._input,g,"textfont.color")),{color:m||b.contrast(f.color),family:le.getInsideTextFontKey("family",v,h,s,d),size:le.getInsideTextFontKey("size",v,h,s,d)}}(o,a,l,i);var v,h,s},le.hasTransition=function(o){return!!(o&&o.duration>0)},le.getMaxDepth=function(o){return o.maxdepth>=0?o.maxdepth:1/0},le.isHeader=function(o,a){return!(le.isLeaf(o)||o.depth===a._maxDepth-1)},le.getParent=function(o,a){return le.findEntryWithLevel(o,e(a))},le.listPath=function(o,a){var l=o.parent;if(!l)return[];var i=a?[l.data[a]]:[l];return le.listPath(l,a).concat(i)},le.getPath=function(o){return le.listPath(o,"label").join("/")+"/"},le.formatValue=_.formatPieValue,le.formatPercent=function(o,a){var l=y.formatPercent(o,0);return"0%"===l&&(l=_.formatPiePercent(o,a)),l}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":906}],1056:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"sunburst",basePlotModule:x("./base_plot"),categories:[],animatable:!0,attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot").plot,style:x("./style").style,colorbar:x("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1049,"./base_plot":1050,"./calc":1051,"./defaults":1053,"./layout_attributes":1057,"./layout_defaults":1058,"./plot":1059,"./style":1060}],1057:[function(x,ue,le){"use strict";ue.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1058:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_){function e(o,a){return y.coerce(T,_,b,o,a)}e("sunburstcolorway",_.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1057}],1059:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("d3-hierarchy"),T=x("d3-interpolate").interpolate,_=x("../../components/drawing"),e=x("../../lib"),o=x("../../lib/svg_text_utils"),a=x("../bar/uniform_text"),l=a.recordMinTextSize,i=a.clearMinTextSize,v=x("../pie/plot"),h=x("../pie/helpers").getRotationAngle,s=v.computeTransform,d=v.transformInsideText,p=x("./style").styleOne,f=x("../bar/style").resizeText,g=x("./fx"),m=x("./constants"),u=x("./helpers");function w(E,M,S,C){var O=E._fullLayout,I=!O.uniformtext.mode&&u.hasTransition(C),N=y.select(S).selectAll("g.slice"),F=M[0],L=F.trace,j=u.findEntryWithLevel(F.hierarchy,L.level),U=u.getMaxDepth(L),$=O._size,X=L.domain,ae=$.h*(X.y[1]-X.y[0]),J=.5*Math.min($.w*(X.x[1]-X.x[0]),ae),ee=F.cx=$.l+$.w*(X.x[1]+X.x[0])/2,se=F.cy=$.t+$.h*(1-X.y[0])-ae/2;if(!j)return N.remove();var G=null,H={};I&&N.each(function(Ve){H[u.getPtId(Ve)]={rpx0:Ve.rpx0,rpx1:Ve.rpx1,x0:Ve.x0,x1:Ve.x1,transform:Ve.transform},!G&&u.isEntry(Ve)&&(G=Ve)});var Ve,Y=(Ve=j,b.partition().size([2*Math.PI,Ve.height+1])(Ve)).descendants(),oe=j.height+1,W=0,ne=U;F.hasMultipleRoots&&u.isHierarchyRoot(j)&&(Y=Y.slice(1),oe-=1,W=1,ne+=1),Y=Y.filter(function(Ve){return Ve.y1<=ne});var re=h(L.rotation);re&&Y.forEach(function(Ve){Ve.x0+=re,Ve.x1+=re});var ce=Math.min(oe,U),fe=function(Ve){return(Ve-W)/ce*J},me=function(Ve,_e){return[Ve*Math.cos(_e),-Ve*Math.sin(_e)]},pe=function(Ve){return e.pathAnnulus(Ve.rpx0,Ve.rpx1,Ve.x0,Ve.x1,ee,se)},we=function(Ve){return ee+c(Ve)[0]*(Ve.transform.rCenter||0)+(Ve.transform.x||0)},ye=function(Ve){return se+c(Ve)[1]*(Ve.transform.rCenter||0)+(Ve.transform.y||0)};(N=N.data(Y,u.getPtId)).enter().append("g").classed("slice",!0),I?N.exit().transition().each(function(){var Ve=y.select(this);Ve.select("path.surface").transition().attrTween("d",function(_e){var Ae=function(Fe){var Pe,Be=u.getPtId(Fe),qe=H[Be],We=H[u.getPtId(j)];if(We){var Je=(Fe.x1>We.x1?2*Math.PI:0)+re;Pe=Fe.rpx1<We.rpx1?{x0:Fe.x0,x1:Fe.x1,rpx0:0,rpx1:0}:{x0:Je,x1:Je,rpx0:Fe.rpx0,rpx1:Fe.rpx1}}else{var ut,Ge=u.getPtId(Fe.parent);N.each(function(Tt){if(u.getPtId(Tt)===Ge)return ut=Tt});var Ke,nt=ut.children;nt.forEach(function(Tt,Ct){if(u.getPtId(Tt)===Be)return Ke=Ct});var it=nt.length,ht=T(ut.x0,ut.x1);Pe={rpx0:J,rpx1:J,x0:ht(Ke/it),x1:ht((Ke+1)/it)}}return T(qe,Pe)}(_e);return function(Fe){return pe(Ae(Fe))}}),Ve.select("g.slicetext").attr("opacity",0)}).remove():N.exit().remove(),N.order();var Te=null;if(I&&G){var Le=u.getPtId(G);N.each(function(Ve){null===Te&&u.getPtId(Ve)===Le&&(Te=Ve.x1)})}var Oe=N;function Re(Ve){var _e=Ve.parent,Ae=H[u.getPtId(_e)],Fe={};if(Ae){var Pe=_e.children,Be=Pe.indexOf(Ve),qe=Pe.length,We=T(Ae.x0,Ae.x1);Fe.x0=We(Be/qe),Fe.x1=We(Be/qe)}else Fe.x0=Fe.x1=0;return Fe}I&&(Oe=Oe.transition().each("end",function(){var Ve=y.select(this);u.setSliceCursor(Ve,E,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Oe.each(function(Ve){var Je,_e=y.select(this),Ae=e.ensureSingle(_e,"path","surface",function(Je){Je.style("pointer-events","all")});Ve.rpx0=fe(Ve.y0),Ve.rpx1=fe(Ve.y1),Ve.xmid=(Ve.x0+Ve.x1)/2,Ve.pxmid=me(Ve.rpx1,Ve.xmid),Ve.midangle=-(Ve.xmid-Math.PI/2),Ve.startangle=-(Ve.x0-Math.PI/2),Ve.stopangle=-(Ve.x1-Math.PI/2),Ve.halfangle=.5*Math.min(e.angleDelta(Ve.x0,Ve.x1)||Math.PI,Math.PI),Ve.ring=1-Ve.rpx0/Ve.rpx1,Ve.rInscribed=0===(Je=Ve).rpx0&&e.isFullCircle([Je.x0,Je.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Je.halfangle)),Je.ring/2)),I?Ae.transition().attrTween("d",function(Je){var ut=function(Ge){var Ke,nt=H[u.getPtId(Ge)],it={x0:Ge.x0,x1:Ge.x1,rpx0:Ge.rpx0,rpx1:Ge.rpx1};if(nt)Ke=nt;else if(G)if(Ge.parent)if(Te){var ht=(Ge.x1>Te?2*Math.PI:0)+re;Ke={x0:ht,x1:ht}}else e.extendFlat(Ke={rpx0:J,rpx1:J},Re(Ge));else Ke={rpx0:0,rpx1:0};else Ke={x0:re,x1:re};return T(Ke,it)}(Je);return function(Ge){return pe(ut(Ge))}}):Ae.attr("d",pe),_e.call(g,j,E,M,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(u.setSliceCursor,E,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:E._transitioning}),Ae.call(p,Ve,L);var Fe=e.ensureSingle(_e,"g","slicetext"),Pe=e.ensureSingle(Fe,"text","",function(Je){Je.attr("data-notex",1)}),Be=e.ensureUniformFontSize(E,u.determineTextFont(L,Ve,O.font));Pe.text(le.formatSliceLabel(Ve,j,L,M,O)).classed("slicetext",!0).attr("text-anchor","middle").call(_.font,Be).call(o.convertToTspans,E);var qe=_.bBox(Pe.node());Ve.transform=d(qe,Ve,F),Ve.transform.targetX=we(Ve),Ve.transform.targetY=ye(Ve);var We=function(Je,ut){var Ge=Je.transform;return s(Ge,ut),Ge.fontSize=Be.size,l(L.type,Ge,O),e.getTextTransform(Ge)};I?Pe.transition().attrTween("transform",function(Je){var ut=function(Ge){var Ke,nt=H[u.getPtId(Ge)],it=Ge.transform;if(nt)Ke=nt;else if(Ke={rpx1:Ge.rpx1,transform:{textPosAngle:it.textPosAngle,scale:0,rotate:it.rotate,rCenter:it.rCenter,x:it.x,y:it.y}},G)if(Ge.parent)if(Te){var ht=Ge.x1>Te?2*Math.PI:0;Ke.x0=Ke.x1=ht}else e.extendFlat(Ke,Re(Ge));else Ke.x0=Ke.x1=re;else Ke.x0=Ke.x1=re;var Tt=T(Ke.transform.textPosAngle,Ge.transform.textPosAngle),Ct=T(Ke.rpx1,Ge.rpx1),Vt=T(Ke.x0,Ge.x0),Ft=T(Ke.x1,Ge.x1),gt=T(Ke.transform.scale,it.scale),ft=T(Ke.transform.rotate,it.rotate),Bt=0===it.rCenter?3:0===Ke.transform.rCenter?1/3:1,rn=T(Ke.transform.rCenter,it.rCenter);return function(un){var pn=Ct(un),dn=Vt(un),Mn=Ft(un),ln=rn(Math.pow(un,Bt)),Ee={pxmid:me(pn,(dn+Mn)/2),rpx1:pn,transform:{textPosAngle:Tt(un),rCenter:ln,x:it.x,y:it.y}};return l(L.type,it,O),{transform:{targetX:we(Ee),targetY:ye(Ee),scale:gt(un),rotate:ft(un),rCenter:ln}}}}(Je);return function(Ge){return We(ut(Ge),qe)}}):Pe.attr("transform",We(Ve,qe))})}function c(E){return S=E.transform.textPosAngle,[(M=E.rpx1)*Math.sin(S),-M*Math.cos(S)];var M,S}le.plot=function(E,M,S,C){var O,I,N=E._fullLayout,F=N._sunburstlayer,L=!S,P=!N.uniformtext.mode&&u.hasTransition(S);i("sunburst",N),(O=F.selectAll("g.trace.sunburst").data(M,function(j){return j[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),O.order(),P?(C&&(I=C()),y.transition().duration(S.duration).ease(S.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()}).each(function(){F.selectAll("g.trace").each(function(j){w(E,j,this,S)})})):(O.each(function(j){w(E,j,this,S)}),N.uniformtext.mode&&f(E,N._sunburstlayer.selectAll(".trace"),"sunburst")),L&&O.exit().remove()},le.formatSliceLabel=function(E,M,S,C,O){var I=S.texttemplate,N=S.textinfo;if(!(I||N&&"none"!==N))return"";var F=O.separators,P=E.data.data,j=C[0].hierarchy,U=u.isHierarchyRoot(E),$=u.getParent(j,E),X=u.getValue(E);if(!I){var te,ae=N.split("+"),J=function(re){return-1!==ae.indexOf(re)},ee=[];if(J("label")&&P.label&&ee.push(P.label),P.hasOwnProperty("v")&&J("value")&&ee.push(u.formatValue(P.v,F)),!U){J("current path")&&ee.push(u.getPath(E.data));var se=0;J("percent parent")&&se++,J("percent entry")&&se++,J("percent root")&&se++;var G=se>1;if(se){var H,Y=function(re){te=u.formatPercent(H,F),G&&(te+=" of "+re),ee.push(te)};J("percent parent")&&!U&&(H=X/u.getValue($),Y("parent")),J("percent entry")&&(H=X/u.getValue(M),Y("entry")),J("percent root")&&(H=X/u.getValue(j),Y("root"))}}return J("text")&&(te=e.castOption(S,P.i,"text"),e.isValidTextValue(te)&&ee.push(te)),ee.join("<br>")}var oe=e.castOption(S,P.i,"texttemplate");if(!oe)return"";var W={};P.label&&(W.label=P.label),P.hasOwnProperty("v")&&(W.value=P.v,W.valueLabel=u.formatValue(P.v,F)),W.currentPath=u.getPath(E.data),U||(W.percentParent=X/u.getValue($),W.percentParentLabel=u.formatPercent(W.percentParent,F),W.parent=u.getPtLabel($)),W.percentEntry=X/u.getValue(M),W.percentEntryLabel=u.formatPercent(W.percentEntry,F),W.entry=u.getPtLabel(M),W.percentRoot=X/u.getValue(j),W.percentRootLabel=u.formatPercent(W.percentRoot,F),W.root=u.getPtLabel(j),P.hasOwnProperty("color")&&(W.color=P.color);var ne=e.castOption(S,P.i,"text");return(e.isValidTextValue(ne)||""===ne)&&(W.text=ne),W.customdata=e.castOption(S,P.i,"customdata"),e.texttemplateString(oe,W,O._d3locale,W,S._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"./constants":1052,"./fx":1054,"./helpers":1055,"./style":1060,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1060:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/color"),T=x("../../lib"),_=x("../bar/uniform_text").resizeText;function e(o,a,l){var i=a.data.data,v=!a.children,h=i.i,s=T.castOption(l,h,"marker.line.color")||b.defaultLine,d=T.castOption(l,h,"marker.line.width")||0;o.style("stroke-width",d).call(b.fill,i.color).call(b.stroke,s).style("opacity",v?l.leaf.opacity:null)}ue.exports={style:function(o){var a=o._fullLayout._sunburstlayer.selectAll(".trace");_(o,a,"sunburst"),a.each(function(l){var i=y.select(this),v=l[0].trace;i.style("opacity",v.opacity),i.selectAll("path.surface").each(function(h){y.select(this).call(e,h,v)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1061:[function(x,ue,le){"use strict";var y=x("../../components/color"),b=x("../../components/colorscale/attributes"),T=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../plots/attributes"),o=x("../../lib/extend").extendFlat,a=x("../../plot_api/edit_types").overrideAll;function l(v){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:y.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:y.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=ue.exports=a(o({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:_(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},b("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:l(),y:l(),z:l()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:o({},b.zauto,{}),zmin:o({},b.zmin,{}),zmax:o({},b.zmax,{})},hoverinfo:o({},e.hoverinfo),showlegend:o({},e.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1062:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/calc");ue.exports=function(b,T){y(b,T,T.surfacecolor?{vals:T.surfacecolor,containerStr:"",cLetter:"c"}:{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1063:[function(x,ue,le){"use strict";var y=x("../../../stackgl_modules").gl_surface3d,b=x("../../../stackgl_modules").ndarray,T=x("../../../stackgl_modules").ndarray_linear_interpolate.d2,_=x("../heatmap/interp2d"),e=x("../heatmap/find_empties"),o=x("../../lib").isArrayOrTypedArray,a=x("../../lib/gl_format_color").parseColorScale,l=x("../../lib/str2rgbarray"),i=x("../../components/colorscale").extractOpts;function v(S,C,O){this.scene=S,this.uid=O,this.surface=C,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var h=v.prototype;h.getXat=function(S,C,O,I){var N=o(this.data.x)?o(this.data.x[0])?this.data.x[C][S]:this.data.x[S]:S;return void 0===O?N:I.d2l(N,0,O)},h.getYat=function(S,C,O,I){var N=o(this.data.y)?o(this.data.y[0])?this.data.y[C][S]:this.data.y[C]:C;return void 0===O?N:I.d2l(N,0,O)},h.getZat=function(S,C,O,I){var N=this.data.z[C][S];return null===N&&this.data.connectgaps&&this.data._interpolatedZ&&(N=this.data._interpolatedZ[C][S]),void 0===O?N:I.d2l(N,0,O)},h.handlePick=function(S){if(S.object===this.surface){var O=(S.data.index[1]-1)/this.dataScaleY-1,I=Math.max(Math.min(Math.round((S.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),N=Math.max(Math.min(Math.round(O),this.data._ylength-1),0);S.index=[I,N],S.traceCoordinate=[this.getXat(I,N),this.getYat(I,N),this.getZat(I,N)],S.dataCoordinate=[this.getXat(I,N,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(I,N,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(I,N,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var F=0;F<3;F++)null!=S.dataCoordinate[F]&&(S.dataCoordinate[F]*=this.scene.dataScale[F]);var P=this.data.hovertext||this.data.text;return S.textLabel=Array.isArray(P)&&P[N]&&void 0!==P[N][I]?P[N][I]:P||"",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};var s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(S,C){if(S<C)return 0;for(var O=0;0===Math.floor(S%C);)S/=C,O++;return O}function p(S){for(var C=[],O=0;O<s.length;O++)C.push(d(S,s[O]));return C}function f(S){for(var C=p(S),O=S,I=0;I<s.length;I++)if(C[I]>0){O=s[I];break}return O}function g(S,C){if(!(S<1||C<1)){for(var O=p(S),I=p(C),N=1,F=0;F<s.length;F++)N*=Math.pow(s[F],Math.max(O[F],I[F]));return N}}h.calcXnums=function(S){var C,O=[];for(C=1;C<S;C++){var I=this.getXat(C-1,0),N=this.getXat(C,0);O[C-1]=N!==I&&null!=I&&null!=N?Math.abs(N-I):0}var F=0;for(C=1;C<S;C++)F+=O[C-1];for(C=1;C<S;C++)O[C-1]=0===O[C-1]?1:Math.round(F/O[C-1]);return O},h.calcYnums=function(S){var C,O=[];for(C=1;C<S;C++){var I=this.getYat(0,C-1),N=this.getYat(0,C);O[C-1]=N!==I&&null!=I&&null!=N?Math.abs(N-I):0}var F=0;for(C=1;C<S;C++)F+=O[C-1];for(C=1;C<S;C++)O[C-1]=0===O[C-1]?1:Math.round(F/O[C-1]);return O};var m=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],u=m[9],w=m[13];function c(S,C,O){var I=O[8]+O[2]*C[0]+O[5]*C[1];return S[0]=(O[6]+O[0]*C[0]+O[3]*C[1])/I,S[1]=(O[7]+O[1]*C[0]+O[4]*C[1])/I,S}function E(S,C,O){return function(I,N,F,L){for(var P=[0,0],j=I.shape[0],U=I.shape[1],$=0;$<j;$++)for(var X=0;X<U;X++)F(P,[$,X],L),I.set($,X,T(N,P[0],P[1]))}(S,C,c,O),S}function M(S,C){for(var O=!1,I=0;I<S.length;I++)if(C===S[I]){O=!0;break}!1===O&&S.push(C)}h.estimateScale=function(S,C){for(var O=1+function(N){if(0!==N.length){for(var F=1,L=0;L<N.length;L++)F=g(F,N[L]);return F}}(0===C?this.calcXnums(S):this.calcYnums(S));O<u;)O*=2;for(;O>w;)O--,O/=f(O),++O<u&&(O=w);var I=Math.round(O/S);return I>1?I:1},h.refineCoords=function(S){for(var C=this.dataScaleX,O=this.dataScaleY,I=S[0].shape[0],N=S[0].shape[1],F=0|Math.floor(S[0].shape[0]*C+1),L=0|Math.floor(S[0].shape[1]*O+1),P=1+I+1,j=1+N+1,U=b(new Float32Array(P*j),[P,j]),$=[1/C,0,0,0,1/O,0,0,0,1],X=0;X<S.length;++X){this.surface.padField(U,S[X]);var te=b(new Float32Array(F*L),[F,L]);E(te,U,$),S[X]=te}},h.setContourLevels=function(){var S,C,I=[[],[],[]],N=[!1,!1,!1],F=!1;for(S=0;S<3;++S)if(this.showContour[S]&&(F=!0,this.contourSize[S]>0&&null!==this.contourStart[S]&&null!==this.contourEnd[S]&&this.contourEnd[S]>this.contourStart[S]))for(N[S]=!0,C=this.contourStart[S];C<this.contourEnd[S];C+=this.contourSize[S])M(I[S],C*this.scene.dataScale[S]);if(F){var L=[[],[],[]];for(S=0;S<3;++S)this.showContour[S]&&(L[S]=N[S]?I[S]:this.scene.contourLevels[S]);this.surface.update({levels:L})}},h.update=function(S){var C,O,I,N,F=this.scene,L=F.fullSceneLayout,P=this.surface,j=a(S),U=F.dataScale,$=S.z[0].length,X=S._ylength,te=F.contourLevels;this.data=S;var ae=[];for(C=0;C<3;C++)for(ae[C]=[],O=0;O<$;O++)ae[C][O]=[];for(O=0;O<$;O++)for(I=0;I<X;I++)ae[0][O][I]=this.getXat(O,I,S.xcalendar,L.xaxis),ae[1][O][I]=this.getYat(O,I,S.ycalendar,L.yaxis),ae[2][O][I]=this.getZat(O,I,S.zcalendar,L.zaxis);if(S.connectgaps)for(S._emptypoints=e(ae[2]),_(ae[2],S._emptypoints),S._interpolatedZ=[],O=0;O<$;O++)for(S._interpolatedZ[O]=[],I=0;I<X;I++)S._interpolatedZ[O][I]=ae[2][O][I];for(C=0;C<3;C++)for(O=0;O<$;O++)for(I=0;I<X;I++)null==(N=ae[C][O][I])?ae[C][O][I]=NaN:N=ae[C][O][I]*=U[C];for(C=0;C<3;C++)for(O=0;O<$;O++)for(I=0;I<X;I++)null!=(N=ae[C][O][I])&&(this.minValues[C]>N&&(this.minValues[C]=N),this.maxValues[C]<N&&(this.maxValues[C]=N));for(C=0;C<3;C++)this.objectOffset[C]=.5*(this.minValues[C]+this.maxValues[C]);for(C=0;C<3;C++)for(O=0;O<$;O++)for(I=0;I<X;I++)null!=(N=ae[C][O][I])&&(ae[C][O][I]-=this.objectOffset[C]);var J=[b(new Float32Array($*X),[$,X]),b(new Float32Array($*X),[$,X]),b(new Float32Array($*X),[$,X])];for(C=0;C<3;C++)for(O=0;O<$;O++)for(I=0;I<X;I++)J[C].set(O,I,ae[C][O][I]);ae=[];var ee={colormap:j,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},se=i(S);if(ee.intensityBounds=[se.min,se.max],S.surfacecolor){var G=b(new Float32Array($*X),[$,X]);for(O=0;O<$;O++)for(I=0;I<X;I++)G.set(O,I,S.surfacecolor[I][O]);J.push(G)}else ee.intensityBounds[0]*=U[2],ee.intensityBounds[1]*=U[2];(w<J[0].shape[0]||w<J[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(J[0].shape[0],0),this.dataScaleY=this.estimateScale(J[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(J)),S.surfacecolor&&(ee.intensity=J.pop());var W,ne,re,H=[!0,!0,!0],Y=["x","y","z"];for(C=0;C<3;++C){var oe=S.contours[Y[C]];H[C]=oe.highlight,ee.showContour[C]=oe.show||oe.highlight,ee.showContour[C]&&(ee.contourProject[C]=[oe.project.x,oe.project.y,oe.project.z],oe.show?(this.showContour[C]=!0,ee.levels[C]=te[C],P.highlightColor[C]=ee.contourColor[C]=l(oe.color),P.highlightTint[C]=ee.contourTint[C]=oe.usecolormap?0:1,ee.contourWidth[C]=oe.width,this.contourStart[C]=oe.start,this.contourEnd[C]=oe.end,this.contourSize[C]=oe.size):(this.showContour[C]=!1,this.contourStart[C]=null,this.contourEnd[C]=null,this.contourSize[C]=0),oe.highlight&&(ee.dynamicColor[C]=l(oe.highlightcolor),ee.dynamicWidth[C]=oe.highlightwidth))}(ne=(W=j)[0].rgb)[0]===(re=W[W.length-1].rgb)[0]&&ne[1]===re[1]&&ne[2]===re[2]&&ne[3]===re[3]&&(ee.vertexColor=!0),ee.objectOffset=this.objectOffset,ee.coords=J,P.update(ee),P.visible=S.visible,P.enableDynamic=H,P.enableHighlight=H,P.snapToData=!0,"lighting"in S&&(P.ambientLight=S.lighting.ambient,P.diffuseLight=S.lighting.diffuse,P.specularLight=S.lighting.specular,P.roughness=S.lighting.roughness,P.fresnel=S.lighting.fresnel),"lightposition"in S&&(P.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},h.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ue.exports=function(S,C){var I=y({gl:S.glplot.gl}),N=new v(S,I,C.uid);return I._trace=N,N.update(C),S.glplot.add(I),N}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1064:[function(x,ue,le){"use strict";var y=x("../../registry"),b=x("../../lib"),T=x("../../components/colorscale/defaults"),_=x("./attributes");function e(a,l,i,v){var h=v("opacityscale");"max"===h?l.opacityscale=[[0,.1],[1,1]]:"min"===h?l.opacityscale=[[0,1],[1,.1]]:"extremes"===h?l.opacityscale=function(s,d){for(var p=[],f=0;f<32;f++){var g=f/31,m=.1+.9*(1-Math.pow(Math.sin(1*g*Math.PI),2));p.push([g,Math.max(0,Math.min(1,m))])}return p}():function(s){var d=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||0!=+s[0][0]||1!=+s[s.length-1][0])return!1;for(var p=0;p<s.length;p++){var f=s[p];if(2!==f.length||+f[0]<d)return!1;d=+f[0]}return!0}(h)||(l.opacityscale=void 0)}function o(a,l,i){l in a&&!(i in a)&&(a[i]=a[l])}ue.exports={supplyDefaults:function(a,l,i,v){var h,s;function d(M,S){return b.coerce(a,l,_,M,S)}var p=d("x"),f=d("y"),g=d("z");if(!g||!g.length||p&&p.length<1||f&&f.length<1)l.visible=!1;else{l._xlength=Array.isArray(p)&&b.isArrayOrTypedArray(p[0])?g.length:g[0].length,l._ylength=g.length,y.getComponentMethod("calendars","handleTraceDefaults")(a,l,["x","y","z"],v),d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(M){d(M)});var m=d("surfacecolor"),u=["x","y","z"];for(h=0;h<3;++h){var w="contours."+u[h],c=d(w+".show"),E=d(w+".highlight");if(c||E)for(s=0;s<3;++s)d(w+".project."+u[s]);c&&(d(w+".color"),d(w+".width"),d(w+".usecolormap")),E&&(d(w+".highlightcolor"),d(w+".highlightwidth")),d(w+".start"),d(w+".end"),d(w+".size")}m||(o(a,"zmin","cmin"),o(a,"zmax","cmax"),o(a,"zauto","cauto")),T(a,l,v,d,{prefix:"",cLetter:"c"}),e(0,l,0,d),l._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1061}],1065:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:x("./calc"),plot:x("./convert"),moduleType:"trace",name:"surface",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1061,"./calc":1062,"./convert":1063,"./defaults":1064}],1066:[function(x,ue,le){"use strict";var y=x("../../components/annotations/attributes"),b=x("../../lib/extend").extendFlat,T=x("../../plot_api/edit_types").overrideAll,_=x("../../plots/font_attributes"),e=x("../../plots/domain").attributes,o=x("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(ue.exports=T({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:b({},y.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:b({},_({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:b({},y.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:b({},_({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1067:[function(x,ue,le){"use strict";var y=x("../../plots/get_data").getModuleCalcData,b=x("./plot");le.name="table",le.plot=function(T){var _=y(T.calcdata,"table")[0];_.length&&b(T,_)},le.clean=function(T,_,e,o){var a=o._has&&o._has("table"),l=_._has&&_._has("table");a&&!l&&o._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1074}],1068:[function(x,ue,le){"use strict";var y=x("../../lib/gup").wrap;ue.exports=function(){return y({})}},{"../../lib/gup":500}],1069:[function(x,ue,le){"use strict";ue.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1070:[function(x,ue,le){"use strict";var y=x("./constants"),b=x("../../lib/extend").extendFlat,T=x("fast-isnumeric");function _(h){if(Array.isArray(h)){for(var s=0,d=0;d<h.length;d++)s=Math.max(s,_(h[d]));return s}return h}function e(h,s){return h+s}function o(h){var s,d=h.slice(),p=1/0,f=0;for(s=0;s<d.length;s++)Array.isArray(d[s])||(d[s]=[d[s]]),p=Math.min(p,d[s].length),f=Math.max(f,d[s].length);if(p!==f)for(s=0;s<d.length;s++){var g=f-d[s].length;g&&(d[s]=d[s].concat(a(g)))}return d}function a(h){for(var s=new Array(h),d=0;d<h;d++)s[d]="";return s}function l(h){return h.calcdata.columns.reduce(function(s,d){return d.xIndex<h.xIndex?s+d.columnWidth:s},0)}function i(h,s){return Object.keys(h).map(function(d){return b({},h[d],{auxiliaryBlocks:s})})}function v(h,s){for(var d,p={},f=0,g=0,m={firstRowIndex:null,lastRowIndex:null,rows:[]},u=0,w=0,c=0;c<h.length;c++)m.rows.push({rowIndex:c,rowHeight:d=h[c]}),((g+=d)>=s||c===h.length-1)&&(p[f]=m,m.key=w++,m.firstRowIndex=u,m.lastRowIndex=c,m={firstRowIndex:null,lastRowIndex:null,rows:[]},f+=g,u=c+1,g=0);return p}ue.exports=function(h,s){var d=o(s.cells.values),p=function(U){return U.slice(s.header.values.length,U.length)},f=o(s.header.values);f.length&&!f[0].length&&(f[0]=[""],f=o(f));var g=f.concat(p(d).map(function(){return a((f[0]||[""]).length)})),m=s.domain,u=Math.floor(h._fullLayout._size.w*(m.x[1]-m.x[0])),w=Math.floor(h._fullLayout._size.h*(m.y[1]-m.y[0])),c=s.header.values.length?g[0].map(function(){return s.header.height}):[y.emptyHeaderHeight],E=d.length?d[0].map(function(){return s.cells.height}):[],M=c.reduce(e,0),S=v(E,w-M+y.uplift),C=i(v(c,M),[]),O=i(S,C),I={},N=s._fullInput.columnorder.concat(p(d.map(function(U,$){return $}))),F=g.map(function(U,$){var X=Array.isArray(s.columnwidth)?s.columnwidth[Math.min($,s.columnwidth.length-1)]:s.columnwidth;return T(X)?Number(X):1}),L=F.reduce(e,0);F=F.map(function(U){return U/L*u});var P=Math.max(_(s.header.line.width),_(s.cells.line.width)),j={key:s.uid+h._context.staticPlot,translateX:m.x[0]*h._fullLayout._size.w,translateY:h._fullLayout._size.h*(1-m.y[1]),size:h._fullLayout._size,width:u,maxLineWidth:P,height:w,columnOrder:N,groupHeight:w,rowBlocks:O,headerRowBlocks:C,scrollY:0,cells:b({},s.cells,{values:d}),headerCells:b({},s.header,{values:g}),gdColumns:g.map(function(U){return U[0]}),gdColumnsOriginalOrder:g.map(function(U){return U[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:g.map(function(U,$){return I[U]=(I[U]||0)+1,{key:U+"__"+I[U],label:U,specIndex:$,xIndex:N[$],xScale:l,x:void 0,calcdata:void 0,columnWidth:F[$]}})};return j.columns.forEach(function(U){U.calcdata=j,U.x=l(U)}),j}},{"../../lib/extend":493,"./constants":1069,"fast-isnumeric":190}],1071:[function(x,ue,le){"use strict";var y=x("../../lib/extend").extendFlat;le.splitToPanels=function(b){var T=[0,0],_=y({},b,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:b.calcdata.headerCells.values[b.specIndex],rowBlocks:b.calcdata.headerRowBlocks,calcdata:y({},b.calcdata,{cells:b.calcdata.headerCells})});return[y({},b,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:b.calcdata.cells.values[b.specIndex],rowBlocks:b.calcdata.rowBlocks}),y({},b,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:b.calcdata.cells.values[b.specIndex],rowBlocks:b.calcdata.rowBlocks}),_]},le.splitToCells=function(b){var _,e,o,T=[o=(e=(_=b).rowBlocks[_.page])?e.rows[0].rowIndex:0,e?o+e.rows.length:0];return(b.values||[]).slice(T[0],T[1]).map(function(_,e){return{keyWithinBlock:e+("string"==typeof _&&_.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:T[0]+e,column:b,calcdata:b.calcdata,page:b.page,rowBlocks:b.rowBlocks,value:_}})}},{"../../lib/extend":493}],1072:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("../../plots/domain").defaults;ue.exports=function(_,e,o,a){function l(i,v){return y.coerce(_,e,b,i,v)}T(e,a,l),l("columnwidth"),l("header.values"),l("header.format"),l("header.align"),l("header.prefix"),l("header.suffix"),l("header.height"),l("header.line.width"),l("header.line.color"),l("header.fill.color"),y.coerceFont(l,"header.font",y.extendFlat({},a.font)),function(i,v){for(var s=i.header.values.length,d=(i.columnorder||[]).slice(0,s),p=d.slice().sort(function(m,u){return m-u}),f=d.map(function(m){return p.indexOf(m)}),g=f.length;g<s;g++)f.push(g);v("columnorder",f)}(e,l),l("cells.values"),l("cells.format"),l("cells.align"),l("cells.prefix"),l("cells.suffix"),l("cells.height"),l("cells.line.width"),l("cells.line.color"),l("cells.fill.color"),y.coerceFont(l,"cells.font",y.extendFlat({},a.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1066}],1073:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),moduleType:"trace",name:"table",basePlotModule:x("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1066,"./base_plot":1067,"./calc":1068,"./defaults":1072,"./plot":1074}],1074:[function(x,ue,le){"use strict";var y=x("./constants"),b=x("@plotly/d3"),T=x("../../lib").numberFormat,_=x("../../lib/gup"),e=x("../../components/drawing"),o=x("../../lib/svg_text_utils"),a=x("../../lib").raiseToTop,l=x("../../lib").strTranslate,i=x("../../lib").cancelTransition,v=x("./data_preparation_helper"),h=x("./data_split_helpers"),s=x("../../components/color");function d(J){return Math.ceil(J.calcdata.maxLineWidth/2)}function p(J,ee){return"clip"+J._fullLayout._uid+"_scrollAreaBottomClip_"+ee.key}function f(J,ee){return"clip"+J._fullLayout._uid+"_columnBoundaryClippath_"+ee.calcdata.key+"_"+ee.specIndex}function g(J){return[].concat.apply([],J.map(function(ee){return ee})).map(function(ee){return ee.__data__})}function m(J,ee,se){var G=J.selectAll("."+y.cn.scrollbarKit).data(_.repeat,_.keyFun);G.enter().append("g").classed(y.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),G.each(function(ne){var fe,re=ne.scrollbarState;re.totalHeight=$(fe=ne.rowBlocks,fe.length-1)+(fe.length?X(fe[fe.length-1],1/0):1),re.scrollableAreaHeight=ne.groupHeight-O(ne),re.currentlyVisibleHeight=Math.min(re.totalHeight,re.scrollableAreaHeight),re.ratio=re.currentlyVisibleHeight/re.totalHeight,re.barLength=Math.max(re.ratio*re.currentlyVisibleHeight,y.goldenRatio*y.scrollbarWidth),re.barWiggleRoom=re.currentlyVisibleHeight-re.barLength,re.wiggleRoom=Math.max(0,re.totalHeight-re.scrollableAreaHeight),re.topY=0===re.barWiggleRoom?0:ne.scrollY/re.wiggleRoom*re.barWiggleRoom,re.bottomY=re.topY+re.barLength,re.dragMultiplier=re.wiggleRoom/re.barWiggleRoom}).attr("transform",function(ne){return l(ne.width+y.scrollbarWidth/2+y.scrollbarOffset,O(ne))});var H=G.selectAll("."+y.cn.scrollbar).data(_.repeat,_.keyFun);H.enter().append("g").classed(y.cn.scrollbar,!0);var Y=H.selectAll("."+y.cn.scrollbarSlider).data(_.repeat,_.keyFun);Y.enter().append("g").classed(y.cn.scrollbarSlider,!0),Y.attr("transform",function(ne){return l(0,ne.scrollbarState.topY||0)});var oe=Y.selectAll("."+y.cn.scrollbarGlyph).data(_.repeat,_.keyFun);oe.enter().append("line").classed(y.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",y.scrollbarWidth).attr("stroke-linecap","round").attr("y1",y.scrollbarWidth/2),oe.attr("y2",function(ne){return ne.scrollbarState.barLength-y.scrollbarWidth/2}).attr("stroke-opacity",function(ne){return ne.columnDragInProgress||!ne.scrollbarState.barWiggleRoom||se?0:.4}),oe.transition().delay(0).duration(0),oe.transition().delay(y.scrollbarHideDelay).duration(y.scrollbarHideDuration).attr("stroke-opacity",0);var W=H.selectAll("."+y.cn.scrollbarCaptureZone).data(_.repeat,_.keyFun);W.enter().append("line").classed(y.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",y.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ne){var re=b.event.y,ce=this.getBoundingClientRect(),fe=ne.scrollbarState,me=re-ce.top,pe=b.scale.linear().domain([0,fe.scrollableAreaHeight]).range([0,fe.totalHeight]).clamp(!0);fe.topY<=me&&me<=fe.bottomY||N(ee,J,null,pe(me-fe.barLength/2))(ne)}).call(b.behavior.drag().origin(function(ne){return b.event.stopPropagation(),ne.scrollbarState.scrollbarScrollInProgress=!0,ne}).on("drag",N(ee,J)).on("dragend",function(){})),W.attr("y2",function(ne){return ne.scrollbarState.scrollableAreaHeight}),ee._context.staticPlot&&(oe.remove(),W.remove())}function u(J,ee,se,G){var W,H=function(oe){var W=oe.selectAll("."+y.cn.columnCell).data(h.splitToCells,function(ne){return ne.keyWithinBlock});return W.enter().append("g").classed(y.cn.columnCell,!0),W.exit().remove(),W}(((W=se.selectAll("."+y.cn.columnCells).data(_.repeat,_.keyFun)).enter().append("g").classed(y.cn.columnCells,!0),W.exit().remove(),W));H.each(function(W,ne){var re=W.calcdata.cells.font,ce=W.column.specIndex,fe={size:E(re.size,ce,ne),color:E(re.color,ce,ne),family:E(re.family,ce,ne)};W.rowNumber=W.key,W.align=E(W.calcdata.cells.align,ce,ne),W.cellBorderWidth=E(W.calcdata.cells.line.width,ce,ne),W.font=fe}),function(oe){oe.attr("width",function(W){return W.column.columnWidth}).attr("stroke-width",function(W){return W.cellBorderWidth}).each(function(W){var ne=b.select(this);s.stroke(ne,E(W.calcdata.cells.line.color,W.column.specIndex,W.rowNumber)),s.fill(ne,E(W.calcdata.cells.fill.color,W.column.specIndex,W.rowNumber))})}(function(oe){var W=oe.selectAll("."+y.cn.cellRect).data(_.repeat,function(ne){return ne.keyWithinBlock});return W.enter().append("rect").classed(y.cn.cellRect,!0),W}(H));var Y=function(oe){var W=oe.selectAll("."+y.cn.cellText).data(_.repeat,function(ne){return ne.keyWithinBlock});return W.enter().append("text").classed(y.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){b.event.stopPropagation()}),W}(function(oe){var W=oe.selectAll("."+y.cn.cellTextHolder).data(_.repeat,function(ne){return ne.keyWithinBlock});return W.enter().append("g").classed(y.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),W}(H));(function(oe){oe.each(function(W){e.font(b.select(this),W.font)})})(Y),w(Y,ee,G,J),U(H)}function w(J,ee,se,G){J.text(function(H){var Y=H.column.specIndex,oe=H.rowNumber,W=H.value,ne="string"==typeof W,re=ne&&W.match(/<br>/i),ce=!ne||re;H.mayHaveMarkup=ne&&W.match(/[<&>]/);var fe,me="string"==typeof(fe=W)&&fe.match(y.latexCheck);H.latex=me;var pe,we,ye=me?"":E(H.calcdata.cells.prefix,Y,oe)||"",Te=me?"":E(H.calcdata.cells.suffix,Y,oe)||"",Le=me?null:E(H.calcdata.cells.format,Y,oe)||null,Oe=ye+(Le?T(Le)(H.value):H.value)+Te;if(H.wrappingNeeded=!H.wrapped&&!ce&&!me&&(pe=c(Oe)),H.cellHeightMayIncrease=re||me||H.mayHaveMarkup||(void 0===pe?c(Oe):pe),H.needsConvertToTspans=H.mayHaveMarkup||H.wrappingNeeded||H.latex,H.wrappingNeeded){var Re=(" "===y.wrapSplitCharacter?Oe.replace(/<a href=/gi,"<a_href="):Oe).split(y.wrapSplitCharacter),Ve=" "===y.wrapSplitCharacter?Re.map(function(_e){return _e.replace(/<a_href=/gi,"<a href=")}):Re;H.fragments=Ve.map(function(_e){return{text:_e,width:null}}),H.fragments.push({fragment:y.wrapSpacer,width:null}),we=Ve.join(y.lineBreaker)+y.lineBreaker+y.wrapSpacer}else delete H.fragments,we=Oe;return we}).attr("dy",function(H){return H.needsConvertToTspans?0:"0.75em"}).each(function(H){var Y=b.select(this);H.needsConvertToTspans?o.convertToTspans(Y,G,(H.wrappingNeeded?L:P)(se,this,ee,G,H)):b.select(this.parentNode).attr("transform",function(W){return l(j(W),y.cellPad)}).attr("text-anchor",function(W){return{left:"start",center:"middle",right:"end"}[W.align]})})}function c(J){return-1!==J.indexOf(y.wrapSplitCharacter)}function E(J,ee,se){if(Array.isArray(J)){var G=J[Math.min(ee,J.length-1)];return Array.isArray(G)?G[Math.min(se,G.length-1)]:G}return J}function M(J,ee,se){J.transition().ease(y.releaseTransitionEase).duration(y.releaseTransitionDuration).attr("transform",l(ee.x,se))}function S(J){return"cells"===J.type}function C(J){return"header"===J.type}function O(J){return(J.rowBlocks.length?J.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ee,se){return ee+X(se,1/0)},0)}function I(J,ee,se){var G=g(ee)[0];if(void 0!==G){var H=G.rowBlocks,Y=G.calcdata,oe=$(H,H.length),W=G.calcdata.groupHeight-O(G),ne=Y.scrollY=Math.max(0,Math.min(oe-W,Y.scrollY)),re=function(ce,fe,me){for(var pe=[],we=0,ye=0;ye<ce.length;ye++){for(var Te=ce[ye],Le=Te.rows,Oe=0,Re=0;Re<Le.length;Re++)Oe+=Le[Re].rowHeight;Te.allRowsHeight=Oe,fe<we+Oe&&fe+me>we&&pe.push(ye),we+=Oe}return pe}(H,ne,W);1===re.length&&(re[0]===H.length-1?re.unshift(re[0]-1):re.push(re[0]+1)),re[0]%2&&re.reverse(),ee.each(function(ce,fe){ce.page=re[fe],ce.scrollY=ne}),ee.attr("transform",function(ce){var fe=$(ce.rowBlocks,ce.page)-ce.scrollY;return l(0,fe)}),J&&(F(J,se,ee,re,G.prevPages,G,0),F(J,se,ee,re,G.prevPages,G,1),m(se,J))}}function N(J,ee,se,G){return function(H){var Y=H.calcdata?H.calcdata:H,oe=ee.filter(function(ce){return Y.key===ce.key}),ne=Y.scrollY;Y.scrollY=void 0===G?Y.scrollY+(se||Y.scrollbarState.dragMultiplier)*b.event.dy:G;var re=oe.selectAll("."+y.cn.yColumn).selectAll("."+y.cn.columnBlock).filter(S);return I(J,re,oe),Y.scrollY===ne}}function F(J,ee,se,G,H,Y,oe){G[oe]!==H[oe]&&(clearTimeout(Y.currentRepaint[oe]),Y.currentRepaint[oe]=setTimeout(function(){var W=se.filter(function(ne,re){return re===oe&&G[re]!==H[re]});u(J,ee,W,se),H[oe]=G[oe]}))}function L(J,ee,se,G){return function(){var H=b.select(ee.parentNode);H.each(function(Y){var oe=Y.fragments;H.selectAll("tspan.line").each(function(we,ye){oe[ye].width=this.getComputedTextLength()});var W,ne,re=oe[oe.length-1].width,ce=oe.slice(0,-1),fe=[],me=0,pe=Y.column.columnWidth-2*y.cellPad;for(Y.value="";ce.length;)me+(ne=(W=ce.shift()).width+re)>pe&&(Y.value+=fe.join(y.wrapSpacer)+y.lineBreaker,fe=[],me=0),fe.push(W.text),me+=ne;me&&(Y.value+=fe.join(y.wrapSpacer)),Y.wrapped=!0}),H.selectAll("tspan.line").remove(),w(H.select("."+y.cn.cellText),se,J,G),b.select(ee.parentNode.parentNode).call(U)}}function P(J,ee,se,G,H){return function(){if(!H.settledY){var Y=b.select(ee.parentNode),oe=ae(H),W=H.key-oe.firstRowIndex,ne=oe.rows[W].rowHeight,re=H.cellHeightMayIncrease?ee.parentNode.getBoundingClientRect().height+2*y.cellPad:ne,ce=Math.max(re,ne);ce-oe.rows[W].rowHeight&&(oe.rows[W].rowHeight=ce,J.selectAll("."+y.cn.columnCell).call(U),I(null,J.filter(S),0),m(se,G,!0)),Y.attr("transform",function(){var fe=this.parentNode.getBoundingClientRect(),me=b.select(this.parentNode).select("."+y.cn.cellRect).node().getBoundingClientRect(),pe=this.transform.baseVal.consolidate(),we=me.top-fe.top+(pe?pe.matrix.f:y.cellPad);return l(j(H,b.select(this.parentNode).select("."+y.cn.cellTextHolder).node().getBoundingClientRect().width),we)}),H.settledY=!0}}}function j(J,ee){switch(J.align){case"left":default:return y.cellPad;case"right":return J.column.columnWidth-(ee||0)-y.cellPad;case"center":return(J.column.columnWidth-(ee||0))/2}}function U(J){J.attr("transform",function(ee){var se=ee.rowBlocks[0].auxiliaryBlocks.reduce(function(H,Y){return H+X(Y,1/0)},0),G=X(ae(ee),ee.key);return l(0,G+se)}).selectAll("."+y.cn.cellRect).attr("height",function(ee){return(se=ae(ee),G=ee.key,se.rows[G-se.firstRowIndex]).rowHeight;var se,G})}function $(J,ee){for(var se=0,G=ee-1;G>=0;G--)se+=te(J[G]);return se}function X(J,ee){for(var se=0,G=0;G<J.rows.length&&J.rows[G].rowIndex<ee;G++)se+=J.rows[G].rowHeight;return se}function te(J){var ee=J.allRowsHeight;if(void 0!==ee)return ee;for(var se=0,G=0;G<J.rows.length;G++)se+=J.rows[G].rowHeight;return J.allRowsHeight=se,se}function ae(J){return J.rowBlocks[J.page]}ue.exports=function(J,ee){var se=!J._context.staticPlot,G=J._fullLayout._paper.selectAll("."+y.cn.table).data(ee.map(function(Te){var Le=_.unwrap(Te).trace;return v(J,Le)}),_.keyFun);G.exit().remove(),G.enter().append("g").classed(y.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),G.attr("width",function(Te){return Te.width+Te.size.l+Te.size.r}).attr("height",function(Te){return Te.height+Te.size.t+Te.size.b}).attr("transform",function(Te){return l(Te.translateX,Te.translateY)});var H=G.selectAll("."+y.cn.tableControlView).data(_.repeat,_.keyFun),Y=H.enter().append("g").classed(y.cn.tableControlView,!0).style("box-sizing","content-box");if(se){var oe="onwheel"in document?"wheel":"mousewheel";Y.on("mousemove",function(Te){H.filter(function(Le){return Te===Le}).call(m,J)}).on(oe,function(Te){Te.scrollbarState.wheeling||(Te.scrollbarState.wheeling=!0,N(J,H,null,Te.scrollY+b.event.deltaY)(Te)||(b.event.stopPropagation(),b.event.preventDefault()),Te.scrollbarState.wheeling=!1)}).call(m,J,!0)}H.attr("transform",function(Te){return l(Te.size.l,Te.size.t)});var W=H.selectAll("."+y.cn.scrollBackground).data(_.repeat,_.keyFun);W.enter().append("rect").classed(y.cn.scrollBackground,!0).attr("fill","none"),W.attr("width",function(Te){return Te.width}).attr("height",function(Te){return Te.height}),H.each(function(Te){e.setClipUrl(b.select(this),p(J,Te),J)});var ne=H.selectAll("."+y.cn.yColumn).data(function(Te){return Te.columns},_.keyFun);ne.enter().append("g").classed(y.cn.yColumn,!0),ne.exit().remove(),ne.attr("transform",function(Te){return l(Te.x,0)}),se&&ne.call(b.behavior.drag().origin(function(Te){return M(b.select(this),Te,-y.uplift),a(this),Te.calcdata.columnDragInProgress=!0,m(H.filter(function(Le){return Te.calcdata.key===Le.key}),J),Te}).on("drag",function(Te){var Le=b.select(this),Oe=function(Re){return(Te===Re?b.event.x:Re.x)+Re.columnWidth/2};Te.x=Math.max(-y.overdrag,Math.min(Te.calcdata.width+y.overdrag-Te.columnWidth,b.event.x)),g(ne).filter(function(Re){return Re.calcdata.key===Te.calcdata.key}).sort(function(Re,Ve){return Oe(Re)-Oe(Ve)}).forEach(function(Re,Ve){Re.xIndex=Ve,Re.x=Te===Re?Re.x:Re.xScale(Re)}),ne.filter(function(Re){return Te!==Re}).transition().ease(y.transitionEase).duration(y.transitionDuration).attr("transform",function(Re){return l(Re.x,0)}),Le.call(i).attr("transform",l(Te.x,-y.uplift))}).on("dragend",function(Te){var Re,Ve,_e,Ae,Le=b.select(this),Oe=Te.calcdata;Te.x=Te.xScale(Te),Te.calcdata.columnDragInProgress=!1,M(Le,Te,0),Re=J,Ve=Oe,_e=Oe.columns.map(function(Re){return Re.xIndex}),Ae=Ve.gdColumnsOriginalOrder,Ve.gdColumns.sort(function(Fe,Pe){return _e[Ae.indexOf(Fe)]-_e[Ae.indexOf(Pe)]}),Ve.columnorder=_e,Re.emit("plotly_restyle")})),ne.each(function(Te){e.setClipUrl(b.select(this),f(J,Te),J)});var re=ne.selectAll("."+y.cn.columnBlock).data(h.splitToPanels,_.keyFun);re.enter().append("g").classed(y.cn.columnBlock,!0).attr("id",function(Te){return Te.key}),re.style("cursor",function(Te){return Te.dragHandle?"ew-resize":Te.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ce=re.filter(C),fe=re.filter(S);se&&fe.call(b.behavior.drag().origin(function(Te){return b.event.stopPropagation(),Te}).on("drag",N(J,H,-1)).on("dragend",function(){})),u(J,H,ce,re),u(J,H,fe,re);var me=H.selectAll("."+y.cn.scrollAreaClip).data(_.repeat,_.keyFun);me.enter().append("clipPath").classed(y.cn.scrollAreaClip,!0).attr("id",function(Te){return p(J,Te)});var pe=me.selectAll("."+y.cn.scrollAreaClipRect).data(_.repeat,_.keyFun);pe.enter().append("rect").classed(y.cn.scrollAreaClipRect,!0).attr("x",-y.overdrag).attr("y",-y.uplift).attr("fill","none"),pe.attr("width",function(Te){return Te.width+2*y.overdrag}).attr("height",function(Te){return Te.height+y.uplift}),ne.selectAll("."+y.cn.columnBoundary).data(_.repeat,_.keyFun).enter().append("g").classed(y.cn.columnBoundary,!0);var we=ne.selectAll("."+y.cn.columnBoundaryClippath).data(_.repeat,_.keyFun);we.enter().append("clipPath").classed(y.cn.columnBoundaryClippath,!0),we.attr("id",function(Te){return f(J,Te)});var ye=we.selectAll("."+y.cn.columnBoundaryRect).data(_.repeat,_.keyFun);ye.enter().append("rect").classed(y.cn.columnBoundaryRect,!0).attr("fill","none"),ye.attr("width",function(Te){return Te.columnWidth+2*d(Te)}).attr("height",function(Te){return Te.calcdata.height+2*d(Te)+y.uplift}).attr("x",function(Te){return-d(Te)}).attr("y",function(Te){return-d(Te)}),I(null,fe,H)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1069,"./data_preparation_helper":1070,"./data_split_helpers":1071,"@plotly/d3":58}],1075:[function(x,ue,le){"use strict";var y=x("../../plots/template_attributes").hovertemplateAttrs,b=x("../../plots/template_attributes").texttemplateAttrs,T=x("../../components/colorscale/attributes"),_=x("../../plots/domain").attributes,e=x("../pie/attributes"),o=x("../sunburst/attributes"),a=x("./constants"),l=x("../../lib/extend").extendFlat;ue.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:l({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:o.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:o.marker.line,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:l({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:o.textinfo,texttemplate:b({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:y({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:l({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:o.root,domain:_({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"./constants":1078}],1076:[function(x,ue,le){"use strict";var y=x("../../plots/plots");le.name="treemap",le.plot=function(b,T,_,e){y.plotBasePlot(le.name,b,T,_,e)},le.clean=function(b,T,_,e){y.cleanBasePlot(le.name,b,T,_,e)}},{"../../plots/plots":619}],1077:[function(x,ue,le){"use strict";var y=x("../sunburst/calc");le.calc=function(b,T){return y.calc(b,T)},le.crossTraceCalc=function(b){return y._runCrossTraceCalc("treemap",b)}},{"../sunburst/calc":1051}],1078:[function(x,ue,le){"use strict";ue.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1079:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("../../components/color"),_=x("../../plots/domain").defaults,e=x("../bar/defaults").handleText,o=x("../bar/constants").TEXTPAD,a=x("../../components/colorscale"),l=a.hasColorscale,i=a.handleDefaults;ue.exports=function(v,h,s,d){function p(S,C){return y.coerce(v,h,b,S,C)}var f=p("labels"),g=p("parents");if(f&&f.length&&g&&g.length){var m=p("values");p(m&&m.length?"branchvalues":"count"),p("level"),p("maxdepth"),"squarify"===p("tiling.packing")&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var u=p("text");p("texttemplate"),h.texttemplate||p("textinfo",Array.isArray(u)?"text+label":"label"),p("hovertext"),p("hovertemplate");var w=p("pathbar.visible");e(v,h,d,p,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var c=-1!==h.textposition.indexOf("bottom");p("marker.line.width")&&p("marker.line.color",d.paper_bgcolor);var E=p("marker.colors");(h._hasColorscale=l(v,"marker","colors")||(v.marker||{}).coloraxis)?i(v,h,d,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(E||[]).length);var M=2*h.textfont.size;p("marker.pad.t",c?M/4:M),p("marker.pad.l",M/4),p("marker.pad.r",M/4),p("marker.pad.b",c?M:M/4),h._hovered={marker:{line:{width:2,color:T.contrast(d.paper_bgcolor)}}},w&&(p("pathbar.thickness",h.pathbar.textfont.size+2*o),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),_(h,d,p),h._length=null}else h.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1075}],1080:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../sunburst/helpers"),T=x("../bar/uniform_text").clearMinTextSize,_=x("../bar/style").resizeText,e=x("./plot_one");ue.exports=function(o,a,l,i,v){var h,s,d=v.type,p=v.drawDescendants,f=o._fullLayout,g=f["_"+d+"layer"],m=!l;T(d,f),(h=g.selectAll("g.trace."+d).data(a,function(u){return u[0].trace.uid})).enter().append("g").classed("trace",!0).classed(d,!0),h.order(),!f.uniformtext.mode&&b.hasTransition(l)?(i&&(s=i()),y.transition().duration(l.duration).ease(l.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()}).each(function(){g.selectAll("g.trace").each(function(u){e(o,u,this,l,p)})})):(h.each(function(u){e(o,u,this,l,p)}),f.uniformtext.mode&&_(o,g.selectAll(".trace"),d)),m&&h.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./plot_one":1089,"@plotly/d3":58}],1081:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../components/drawing"),_=x("../../lib/svg_text_utils"),e=x("./partition"),o=x("./style").styleOne,a=x("./constants"),l=x("../sunburst/helpers"),i=x("../sunburst/fx");ue.exports=function(v,h,s,d,p){var f=p.barDifY,g=p.width,m=p.height,u=p.viewX,w=p.viewY,c=p.pathSlice,E=p.toMoveInsideSlice,M=p.strTransform,S=p.hasTransition,C=p.handleSlicesExit,O=p.makeUpdateSliceInterpolator,I=p.makeUpdateTextInterpolator,N={},F=v._fullLayout,L=h[0],P=L.trace,j=L.hierarchy,U=g/P._entryDepth,$=l.listPath(s.data,"id"),X=e(j.copy(),[g,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(X=X.filter(function(ae){var J=$.indexOf(ae.data.id);return-1!==J&&(ae.x0=U*J,ae.x1=U*(J+1),ae.y0=f,ae.y1=f+m,ae.onPathbar=!0,!0)})).reverse(),(d=d.data(X,l.getPtId)).enter().append("g").classed("pathbar",!0),C(d,!0,N,[g,m],c),d.order();var te=d;S&&(te=te.transition().each("end",function(){var ae=y.select(this);l.setSliceCursor(ae,v,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),te.each(function(ae){ae._x0=u(ae.x0),ae._x1=u(ae.x1),ae._y0=w(ae.y0),ae._y1=w(ae.y1),ae._hoverX=u(ae.x1-Math.min(g,m)/2),ae._hoverY=w(ae.y1-m/2);var J=y.select(this),ee=b.ensureSingle(J,"path","surface",function(Y){Y.style("pointer-events","all")});S?ee.transition().attrTween("d",function(Y){var oe=O(Y,!0,N,[g,m]);return function(W){return c(oe(W))}}):ee.attr("d",c),J.call(i,s,v,h,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,v,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:v._transitioning}),ee.call(o,ae,P,{hovered:!1}),ae._text=(l.getPtLabel(ae)||"").split("<br>").join(" ")||"";var se=b.ensureSingle(J,"g","slicetext"),G=b.ensureSingle(se,"text","",function(Y){Y.attr("data-notex",1)}),H=b.ensureUniformFontSize(v,l.determineTextFont(P,ae,F.font,{onPathbar:!0}));G.text(ae._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(T.font,H).call(_.convertToTspans,v),ae.textBB=T.bBox(G.node()),ae.transform=E(ae,{fontSize:H.size,onPathbar:!0}),ae.transform.fontSize=H.size,S?G.transition().attrTween("transform",function(Y){var oe=I(Y,!0,N,[g,m]);return function(W){return M(oe(W))}}):G.attr("transform",M(ae))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1082:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../components/drawing"),_=x("../../lib/svg_text_utils"),e=x("./partition"),o=x("./style").styleOne,a=x("./constants"),l=x("../sunburst/helpers"),i=x("../sunburst/fx"),v=x("../sunburst/plot").formatSliceLabel;ue.exports=function(h,s,d,p,f){var g=f.width,m=f.height,u=f.viewX,w=f.viewY,c=f.pathSlice,E=f.toMoveInsideSlice,M=f.strTransform,S=f.hasTransition,C=f.handleSlicesExit,O=f.makeUpdateSliceInterpolator,I=f.makeUpdateTextInterpolator,N=f.prevEntry,F=h._fullLayout,L=s[0].trace,P=-1!==L.textposition.indexOf("left"),j=-1!==L.textposition.indexOf("right"),U=-1!==L.textposition.indexOf("bottom"),$=!U&&!L.marker.pad.t||U&&!L.marker.pad.b,X=e(d,[g,m],{packing:L.tiling.packing,squarifyratio:L.tiling.squarifyratio,flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1,pad:{inner:L.tiling.pad,top:L.marker.pad.t,left:L.marker.pad.l,right:L.marker.pad.r,bottom:L.marker.pad.b}}).descendants(),te=1/0,ae=-1/0;X.forEach(function(H){var Y=H.depth;Y>=L._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(te=Math.min(te,Y),ae=Math.max(ae,Y))}),p=p.data(X,l.getPtId),L._maxVisibleLayers=isFinite(ae)?ae-te+1:0,p.enter().append("g").classed("slice",!0),C(p,!1,{},[g,m],c),p.order();var J=null;if(S&&N){var ee=l.getPtId(N);p.each(function(H){null===J&&l.getPtId(H)===ee&&(J={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var se=function(){return J||{x0:0,x1:g,y0:0,y1:m}},G=p;return S&&(G=G.transition().each("end",function(){var H=y.select(this);l.setSliceCursor(H,h,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),G.each(function(H){var Y=l.isHeader(H,L);H._x0=u(H.x0),H._x1=u(H.x1),H._y0=w(H.y0),H._y1=w(H.y1),H._hoverX=u(H.x1-L.marker.pad.r),H._hoverY=w(U?H.y1-L.marker.pad.b/2:H.y0+L.marker.pad.t/2);var oe=y.select(this),W=b.ensureSingle(oe,"path","surface",function(fe){fe.style("pointer-events","all")});S?W.transition().attrTween("d",function(fe){var me=O(fe,!1,se(),[g,m]);return function(pe){return c(me(pe))}}):W.attr("d",c),oe.call(i,d,h,s,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,h,{isTransitioning:h._transitioning}),W.call(o,H,L,{hovered:!1}),H._text=H.x0===H.x1||H.y0===H.y1?"":Y?$?"":l.getPtLabel(H)||"":v(H,d,L,s,F)||"";var ne=b.ensureSingle(oe,"g","slicetext"),re=b.ensureSingle(ne,"text","",function(fe){fe.attr("data-notex",1)}),ce=b.ensureUniformFontSize(h,l.determineTextFont(L,H,F.font));re.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",j?"end":P||Y?"start":"middle").call(T.font,ce).call(_.convertToTspans,h),H.textBB=T.bBox(re.node()),H.transform=E(H,{fontSize:ce.size,isHeader:Y}),H.transform.fontSize=ce.size,S?re.transition().attrTween("transform",function(fe){var me=I(fe,!1,se(),[g,m]);return function(pe){return M(me(pe))}}):re.attr("transform",M(H))}),J}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1083:[function(x,ue,le){"use strict";ue.exports=function y(b,T,_){var e;_.swapXY&&(e=b.x0,b.x0=b.y0,b.y0=e,e=b.x1,b.x1=b.y1,b.y1=e),_.flipX&&(e=b.x0,b.x0=T[0]-b.x1,b.x1=T[0]-e),_.flipY&&(e=b.y0,b.y0=T[1]-b.y1,b.y1=T[1]-e);var o=b.children;if(o)for(var a=0;a<o.length;a++)y(o[a],T,_)}},{}],1084:[function(x,ue,le){"use strict";ue.exports={moduleType:"trace",name:"treemap",basePlotModule:x("./base_plot"),categories:[],animatable:!0,attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),style:x("./style").style,colorbar:x("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1079,"./layout_attributes":1085,"./layout_defaults":1086,"./plot":1088,"./style":1090}],1085:[function(x,ue,le){"use strict";ue.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1086:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_){function e(o,a){return y.coerce(T,_,b,o,a)}e("treemapcolorway",_.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1085}],1087:[function(x,ue,le){"use strict";var y=x("d3-hierarchy"),b=x("./flip_tree");ue.exports=function(T,_,e){var o,a=e.flipX,l=e.flipY,i="dice-slice"===e.packing,v=e.pad[l?"bottom":"top"],h=e.pad[a?"right":"left"],s=e.pad[a?"left":"right"],d=e.pad[l?"top":"bottom"];i&&(o=h,h=v,v=o,o=s,s=d,d=o);var p=y.treemap().tile(function(f,g){switch(f){case"squarify":return y.treemapSquarify.ratio(g);case"binary":return y.treemapBinary;case"dice":return y.treemapDice;case"slice":return y.treemapSlice;default:return y.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(h).paddingRight(s).paddingTop(v).paddingBottom(d).size(i?[_[1],_[0]]:_)(T);return(i||a||l)&&b(p,_,{swapXY:i,flipX:a,flipY:l}),p}},{"./flip_tree":1083,"d3-hierarchy":115}],1088:[function(x,ue,le){"use strict";var y=x("./draw"),b=x("./draw_descendants");ue.exports=function(T,_,e,o){return y(T,_,e,o,{type:"treemap",drawDescendants:b})}},{"./draw":1080,"./draw_descendants":1082}],1089:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("d3-interpolate").interpolate,T=x("../sunburst/helpers"),_=x("../../lib"),e=x("../bar/constants").TEXTPAD,o=x("../bar/plot").toMoveInsideBar,a=x("../bar/uniform_text").recordMinTextSize,l=x("./constants"),i=x("./draw_ancestors");function v(h){return T.isHierarchyRoot(h)?"":T.getPtId(h)}ue.exports=function(h,s,d,p,f){var g=h._fullLayout,m=s[0],u=m.trace,w="icicle"===u.type,c=m.hierarchy,E=T.findEntryWithLevel(c,u.level),M=y.select(d),S=M.selectAll("g.pathbar"),C=M.selectAll("g.slice");if(!E)return S.remove(),void C.remove();var O=T.isHierarchyRoot(E),I=!g.uniformtext.mode&&T.hasTransition(p),N=T.getMaxDepth(u),F=g._size,L=u.domain,P=F.w*(L.x[1]-L.x[0]),j=F.h*(L.y[1]-L.y[0]),U=P,$=u.pathbar.thickness,X=u.marker.line.width+l.gapWithPathbar,te=u.pathbar.visible?u.pathbar.side.indexOf("bottom")>-1?j+X:-($+X):0,ae={x0:U,x1:U,y0:te,y1:te+$},J=function(Be,qe,We){var Je=u.tiling.pad,ut=function(it){return it-Je<=qe.x0},Ge=function(it){return it+Je>=qe.x1},Ke=function(it){return it-Je<=qe.y0},nt=function(it){return it+Je>=qe.y1};return Be.x0===qe.x0&&Be.x1===qe.x1&&Be.y0===qe.y0&&Be.y1===qe.y1?{x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1}:{x0:ut(Be.x0-Je)?0:Ge(Be.x0-Je)?We[0]:Be.x0,x1:ut(Be.x1+Je)?0:Ge(Be.x1+Je)?We[0]:Be.x1,y0:Ke(Be.y0-Je)?0:nt(Be.y0-Je)?We[1]:Be.y0,y1:Ke(Be.y1+Je)?0:nt(Be.y1+Je)?We[1]:Be.y1}},ee=null,se={},G={},H=null,Y=function(Be,qe){return qe?se[v(Be)]:G[v(Be)]};m.hasMultipleRoots&&O&&N++,u._maxDepth=N,u._backgroundColor=g.paper_bgcolor,u._entryDepth=E.data.depth,u._atRootLevel=O;var W=-P/2+F.l+F.w*(L.x[1]+L.x[0])/2,ne=-j/2+F.t+F.h*(1-(L.y[1]+L.y[0])/2),re=function(Be){return W+Be},ce=function(Be){return ne+Be},fe=ce(0),me=re(0),pe=function(Be){return me+Be},we=function(Be){return fe+Be};function ye(Be,qe){return Be+","+qe}var Te=pe(0),Le=function(Be){Be.x=Math.max(Te,Be.x)},Oe=u.pathbar.edgeshape,Re=function(Be,qe){var We=Be.x0,Je=Be.x1,ut=Be.y0,Ge=Be.y1,Ke=Be.textBB,nt=function(Bt){return-1!==u.textposition.indexOf(Bt)},it=nt("bottom"),ht=nt("top")||qe.isHeader&&!it?"start":it?"end":"middle",Tt=nt("right"),Ct=nt("left")||qe.onPathbar?-1:Tt?1:0,Vt=u[w?"tiling":"marker"].pad;if(qe.isHeader){if((We+=(w?Vt:Vt.l)-e)>=(Je-=(w?Vt:Vt.r)-e)){var Ft=(We+Je)/2;We=Ft,Je=Ft}var gt;it?ut<(gt=Ge-(w?Vt:Vt.b))&&gt<Ge&&(ut=gt):ut<(gt=ut+(w?Vt:Vt.t))&&gt<Ge&&(Ge=gt)}var ft=o(We,Je,ut,Ge,Ke,{isHorizontal:!1,constrained:!0,angle:0,anchor:ht,leftToRight:Ct});return ft.fontSize=qe.fontSize,ft.targetX=re(ft.targetX),ft.targetY=ce(ft.targetY),isNaN(ft.targetX)||isNaN(ft.targetY)?{}:(We!==Je&&ut!==Ge&&a(u.type,ft,g),{scale:ft.scale,rotate:ft.rotate,textX:ft.textX,textY:ft.textY,anchorX:ft.anchorX,anchorY:ft.anchorY,targetX:ft.targetX,targetY:ft.targetY})},Ve=function(Be,qe){for(var We,Je=0,ut=Be;!We&&Je<N;)Je++,(ut=ut.parent)?We=Y(ut,qe):Je=N;return We||{}},_e=function(Be,qe,We,Je,ut){var Ge,Ke=Y(Be,qe);if(Ke)Ge=Ke;else if(qe)Ge=ae;else if(ee)if(Be.parent){var nt=H||We;nt&&!qe?Ge=J(Be,nt,Je):_.extendFlat(Ge={},Ve(Be,qe))}else Ge=_.extendFlat({},Be),w&&("h"===ut.orientation?ut.flipX?Ge.x0=Be.x1:Ge.x1=0:ut.flipY?Ge.y0=Be.y1:Ge.y1=0);else Ge={};return b(Ge,{x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1})},Ae=function(Be,qe,We,Je){var ut=Y(Be,qe),Ge={},Ke=function(Be,qe,We,Je){return qe?se[v(c)]||ae:Be.data.depth-E.data.depth<N?J(Be,G[u.level]||We,Je):{}}(Be,qe,We,Je);_.extendFlat(Ge,{transform:Re({x0:Ke.x0,x1:Ke.x1,y0:Ke.y0,y1:Ke.y1,textBB:Be.textBB,_text:Be._text},{isHeader:T.isHeader(Be,u)})}),ut?Ge=ut:Be.parent&&_.extendFlat(Ge,Ve(Be,qe));var nt=Be.transform;return Be.x0!==Be.x1&&Be.y0!==Be.y1&&a(u.type,nt,g),b(Ge,{transform:{scale:nt.scale,rotate:nt.rotate,textX:nt.textX,textY:nt.textY,anchorX:nt.anchorX,anchorY:nt.anchorY,targetX:nt.targetX,targetY:nt.targetY}})},Fe=function(Be,qe,We,Je,ut){var Ge=Je[0],Ke=Je[1];I?Be.exit().transition().each(function(){var nt=y.select(this);nt.select("path.surface").transition().attrTween("d",function(it){var ht=function(Tt,Ct,Vt,Ft){var gt,ft=Y(Tt,Ct);if(Ct)gt=ae;else{var Bt=Y(E,Ct);gt=Bt?J(Tt,Bt,Ft):{}}return b(ft,gt)}(it,qe,0,[Ge,Ke]);return function(Tt){return ut(ht(Tt))}}),nt.select("g.slicetext").attr("opacity",0)}).remove():Be.exit().remove()},Pe=function(Be){var qe=Be.transform;return Be.x0!==Be.x1&&Be.y0!==Be.y1&&a(u.type,qe,g),_.getTextTransform({textX:qe.textX,textY:qe.textY,anchorX:qe.anchorX,anchorY:qe.anchorY,targetX:qe.targetX,targetY:qe.targetY,scale:qe.scale,rotate:qe.rotate})};I&&(S.each(function(Be){se[v(Be)]={x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1},Be.transform&&(se[v(Be)].transform={textX:Be.transform.textX,textY:Be.transform.textY,anchorX:Be.transform.anchorX,anchorY:Be.transform.anchorY,targetX:Be.transform.targetX,targetY:Be.transform.targetY,scale:Be.transform.scale,rotate:Be.transform.rotate})}),C.each(function(Be){G[v(Be)]={x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1},Be.transform&&(G[v(Be)].transform={textX:Be.transform.textX,textY:Be.transform.textY,anchorX:Be.transform.anchorX,anchorY:Be.transform.anchorY,targetX:Be.transform.targetX,targetY:Be.transform.targetY,scale:Be.transform.scale,rotate:Be.transform.rotate}),!ee&&T.isEntry(Be)&&(ee=Be)})),H=f(h,s,E,C,{width:P,height:j,viewX:re,viewY:ce,pathSlice:function(Be){var qe=re(Be.x0),We=re(Be.x1),Je=ce(Be.y0),ut=ce(Be.y1);return We-qe&&ut-Je?"M"+ye(qe,Je+0)+"L"+ye(We-0,Je)+"L"+ye(We,ut-0)+"L"+ye(qe+0,ut)+"Z":""},toMoveInsideSlice:Re,prevEntry:ee,makeUpdateSliceInterpolator:_e,makeUpdateTextInterpolator:Ae,handleSlicesExit:Fe,hasTransition:I,strTransform:Pe}),u.pathbar.visible?i(h,s,E,S,{barDifY:te,width:U,height:$,viewX:pe,viewY:we,pathSlice:function(Be){var qe=pe(Math.max(Math.min(Be.x0,Be.x0),0)),We=pe(Math.min(Math.max(Be.x1,Be.x1),U)),Je=we(Be.y0),ut=we(Be.y1),Ge=$/2,Ke={},nt={};Ke.x=qe,nt.x=We,Ke.y=nt.y=(Je+ut)/2;var it={x:qe,y:Je},ht={x:We,y:Je},Tt={x:We,y:ut},Ct={x:qe,y:ut};return">"===Oe?(it.x-=Ge,ht.x-=Ge,Tt.x-=Ge,Ct.x-=Ge):"/"===Oe?(Tt.x-=Ge,Ct.x-=Ge,Ke.x-=Ge/2,nt.x-=Ge/2):"\\"===Oe?(it.x-=Ge,ht.x-=Ge,Ke.x-=Ge/2,nt.x-=Ge/2):"<"===Oe&&(Ke.x-=Ge,nt.x-=Ge),Le(it),Le(Ct),Le(Ke),Le(ht),Le(Tt),Le(nt),"M"+ye(it.x,it.y)+"L"+ye(ht.x,ht.y)+"L"+ye(nt.x,nt.y)+"L"+ye(Tt.x,Tt.y)+"L"+ye(Ct.x,Ct.y)+"L"+ye(Ke.x,Ke.y)+"Z"},toMoveInsideSlice:Re,makeUpdateSliceInterpolator:_e,makeUpdateTextInterpolator:Ae,handleSlicesExit:Fe,hasTransition:I,strTransform:Pe}):S.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./constants":1078,"./draw_ancestors":1081,"@plotly/d3":58,"d3-interpolate":116}],1090:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/color"),T=x("../../lib"),_=x("../sunburst/helpers"),e=x("../bar/uniform_text").resizeText;function o(a,l,i,v){var h,s,d=(v||{}).hovered,p=l.data.data,f=p.i,g=p.color,m=_.isHierarchyRoot(l),u=1;if(d)h=i._hovered.marker.line.color,s=i._hovered.marker.line.width;else if(m&&g===i.root.color)u=100,h="rgba(0,0,0,0)",s=0;else if(h=T.castOption(i,f,"marker.line.color")||b.defaultLine,s=T.castOption(i,f,"marker.line.width")||0,!i._hasColorscale&&!l.onPathbar){var w=i.marker.depthfade;if(w){var c,E=b.combine(b.addOpacity(i._backgroundColor,.75),g);if(!0===w){var M=_.getMaxDepth(i);c=isFinite(M)?_.isLeaf(l)?0:i._maxVisibleLayers-(l.data.depth-i._entryDepth):l.data.height+1}else c=l.data.depth-i._entryDepth,i._atRootLevel||c++;if(c>0)for(var S=0;S<c;S++)g=b.combine(b.addOpacity(E,.5*S/c),g)}}a.style("stroke-width",s).call(b.fill,g).call(b.stroke,h).style("opacity",u)}ue.exports={style:function(a){var l=a._fullLayout._treemaplayer.selectAll(".trace");e(a,l,"treemap"),l.each(function(i){var v=y.select(this),h=i[0].trace;v.style("opacity",h.opacity),v.selectAll("path.surface").each(function(s){y.select(this).call(o,s,h,{hovered:!1})})})},styleOne:o}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1055,"@plotly/d3":58}],1091:[function(x,ue,le){"use strict";var y=x("../box/attributes"),b=x("../../lib/extend").extendFlat,T=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat;ue.exports={y:y.y,x:y.x,x0:y.x0,y0:y.y0,xhoverformat:T("x"),yhoverformat:T("y"),name:b({},y.name,{}),orientation:b({},y.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:y.fillcolor,points:b({},y.boxpoints,{}),jitter:b({},y.jitter,{}),pointpos:b({},y.pointpos,{}),width:b({},y.width,{}),marker:y.marker,text:y.text,hovertext:y.hovertext,hovertemplate:y.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup,selected:y.selected,unselected:y.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1092:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("../box/calc"),_=x("./helpers"),e=x("../../constants/numerical").BADNUM;function o(l,i,v){var h=i.max-i.min;if(!h)return l.bandwidth?l.bandwidth:0;if(l.bandwidth)return Math.max(l.bandwidth,h/1e4);var p,s=v.length,d=y.stdev(v,s-1,i.mean);return Math.max((p=s,1.059*Math.min(d,(i.q3-i.q1)/1.349)*Math.pow(p,-.2)),h/100)}function a(l,i,v,h){var s,d=l.spanmode,p=l.span||[],g=[i.min-2*h,i.max+2*h];function m(w){var c=p[w],E="multicategory"===v.type?v.r2c(c):v.d2c(c,0,l[i.valLetter+"calendar"]);return E===e?g[w]:E}var u={type:"linear",range:s="soft"===d?g:"hard"===d?[i.min,i.max]:[m(0),m(1)]};return b.setConvert(u),u.cleanRange(),s}ue.exports=function(l,i){var v=T(l,i);if(v[0].t.empty)return v;for(var h=l._fullLayout,s=b.getFromId(l,i["h"===i.orientation?"xaxis":"yaxis"]),d=1/0,p=-1/0,f=0,g=0,m=0;m<v.length;m++){var u=v[m],w=u.pts.map(_.extractVal),c=u.bandwidth=o(i,u,w),E=u.span=a(i,u,s,c);if(u.min===u.max&&0===c)E=u.span=[u.min,u.max],u.density=[{v:1,t:E[0]}],u.bandwidth=c,f=Math.max(f,1);else{var M=E[1]-E[0],S=Math.ceil(M/(c/3)),C=M/S;if(!isFinite(C)||!isFinite(S))return y.error("Something went wrong with computing the violin span"),v[0].t.empty=!0,v;var O=_.makeKDE(u,i,w);u.density=new Array(S);for(var I=0,N=E[0];N<E[1]+C/2;I++,N+=C){var F=O(N);u.density[I]={v:F,t:N},f=Math.max(f,F)}}g=Math.max(g,w.length),d=Math.min(d,E[0]),p=Math.max(p,E[1])}var L=b.findExtremes(s,[d,p],{padded:!0});if(i._extremes[s._id]=L,i.width)v[0].t.maxKDE=f;else{var P=h._violinScaleGroupStats,j=i.scalegroup,U=P[j];U?(U.maxKDE=Math.max(U.maxKDE,f),U.maxCount=Math.max(U.maxCount,g)):P[j]={maxKDE:f,maxCount:g}}return v[0].t.labels.kde=y._(l,"kde:"),v}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1095}],1093:[function(x,ue,le){"use strict";var y=x("../box/cross_trace_calc").setPositionOffset,b=["v","h"];ue.exports=function(T,_){for(var e=T.calcdata,o=_.xaxis,a=_.yaxis,l=0;l<b.length;l++){for(var i=b[l],v="h"===i?a:o,h=[],s=0;s<e.length;s++){var d=e[s],f=d[0].trace;!0!==f.visible||"violin"!==f.type||d[0].t.empty||f.orientation!==i||f.xaxis!==o._id||f.yaxis!==a._id||h.push(s)}y("violin",T,h,v)}}},{"../box/cross_trace_calc":675}],1094:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../components/color"),T=x("../box/defaults"),_=x("./attributes");ue.exports=function(e,o,a,l){function i(M,S){return y.coerce(e,o,_,M,S)}function v(M,S){return y.coerce2(e,o,_,M,S)}if(T.handleSampleDefaults(e,o,i,l),!1!==o.visible){i("bandwidth"),i("side"),i("width")||(i("scalegroup",o.name),i("scalemode"));var h,s=i("span");Array.isArray(s)&&(h="manual"),i("spanmode",h);var d=i("line.color",(e.marker||{}).color||a),p=i("line.width"),f=i("fillcolor",b.addOpacity(o.line.color,.5));T.handlePointsDefaults(e,o,i,{prefix:""});var g=v("box.width"),m=v("box.fillcolor",f),u=v("box.line.color",d),w=v("box.line.width",p);i("box.visible",Boolean(g||m||u||w))||(o.box={visible:!1});var c=v("meanline.color",d),E=v("meanline.width",p);i("meanline.visible",Boolean(c||E))||(o.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1091}],1095:[function(x,ue,le){"use strict";var y=x("../../lib"),b=function(T){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*T*T)};le.makeKDE=function(T,_,e){var o=e.length,a=b,l=T.bandwidth,i=1/(o*l);return function(v){for(var h=0,s=0;s<o;s++)h+=a((v-e[s])/l);return i*h}},le.getPositionOnKdePath=function(T,_,e){var o,a;"h"===_.orientation?(o="y",a="x"):(o="x",a="y");var l=y.findPointOnPath(T.path,e,a,{pathLength:T.pathLength}),i=T.posCenterPx,v=l[o];return[v,"both"===_.side?2*i-v:i]},le.getKdeValue=function(T,_,e){var o=T.pts.map(le.extractVal);return le.makeKDE(T,_,o)(e)/T.posDensityScale},le.extractVal=function(T){return T.v}},{"../../lib":503}],1096:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../../plots/cartesian/axes"),T=x("../box/hover"),_=x("./helpers");ue.exports=function(e,o,a,l,i){i||(i={});var v,h,s=i.hoverLayer,d=e.cd,p=d[0].trace,f=p.hoveron,g=-1!==f.indexOf("violins"),m=-1!==f.indexOf("kde"),u=[];if(g||m){var w=T.hoverOnBoxes(e,o,a,l);if(m&&w.length>0){var c,E,M,S,C,O=e.xa,I=e.ya;"h"===p.orientation?(C=o,c="y",M=I,E="x",S=O):(C=a,c="x",M=O,E="y",S=I);var N=d[e.index];if(C>=N.span[0]&&C<=N.span[1]){var F=y.extendFlat({},e),L=S.c2p(C,!0),P=_.getKdeValue(N,p,C),j=_.getPositionOnKdePath(N,p,L),U=M._offset,$=M._length;F[c+"0"]=j[0],F[c+"1"]=j[1],F[E+"0"]=F[E+"1"]=L,F[E+"Label"]=E+": "+b.hoverLabelText(S,C,p[E+"hoverformat"])+", "+d[0].t.labels.kde+" "+P.toFixed(3),F.spikeDistance=w[0].spikeDistance;var X=c+"Spike";F[X]=w[0][X],w[0].spikeDistance=void 0,w[0][X]=void 0,F.hovertemplate=!1,u.push(F),(h={stroke:e.color})[c+"1"]=y.constrain(U+j[0],U,U+$),h[c+"2"]=y.constrain(U+j[1],U,U+$),h[E+"1"]=h[E+"2"]=S._offset+L}}g&&(u=u.concat(w))}-1!==f.indexOf("points")&&(v=T.hoverOnPoints(e,o,a));var te=s.selectAll(".violinline-"+p.uid).data(h?[0]:[]);return te.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),te.exit().remove(),te.attr(h),"closest"===l?v?[v]:u:(v&&u.push(v),u)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1095}],1097:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc"),plot:x("./plot"),style:x("./style"),styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../box/select"),moduleType:"trace",name:"violin",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":951,"./attributes":1091,"./calc":1092,"./cross_trace_calc":1093,"./defaults":1094,"./hover":1096,"./layout_attributes":1098,"./layout_defaults":1099,"./plot":1100,"./style":1101}],1098:[function(x,ue,le){"use strict";var y=x("../box/layout_attributes"),b=x("../../lib").extendFlat;ue.exports={violinmode:b({},y.boxmode,{}),violingap:b({},y.boxgap,{}),violingroupgap:b({},y.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1099:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes"),T=x("../box/layout_defaults");ue.exports=function(_,e,o){T._supply(_,e,o,function(a,l){return y.coerce(_,e,b,a,l)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1098}],1100:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../components/drawing"),_=x("../box/plot"),e=x("../scatter/line_points"),o=x("./helpers");ue.exports=function(a,l,i,v){var h=a._fullLayout,s=l.xaxis,d=l.yaxis;function p(f){var g=e(f,{xaxis:s,yaxis:d,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return T.smoothopen(g[0],1)}b.makeTraceGroups(v,i,"trace violins").each(function(f){var g=y.select(this),m=f[0],u=m.t,w=m.trace;if(!0!==w.visible||u.empty)g.remove();else{var c=u.bPos,E=u.bdPos,M=l[u.valLetter+"axis"],S=l[u.posLetter+"axis"],C="both"===w.side,O=C||"positive"===w.side,I=C||"negative"===w.side,N=g.selectAll("path.violin").data(b.identity);N.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),N.exit().remove(),N.each(function(te){var ae,J,ee,se,G,H,Y,oe,W=y.select(this),ne=te.density,re=ne.length,ce=S.c2l(te.pos+c,!0),fe=S.l2p(ce);if(w.width)ae=u.maxKDE/E;else{var me=h._violinScaleGroupStats[w.scalegroup];ae="count"===w.scalemode?me.maxKDE/E*(me.maxCount/te.pts.length):me.maxKDE/E}if(O){for(Y=new Array(re),G=0;G<re;G++)(oe=Y[G]={})[u.posLetter]=ce+ne[G].v/ae,oe[u.valLetter]=M.c2l(ne[G].t,!0);J=p(Y)}if(I){for(Y=new Array(re),H=0,G=re-1;H<re;H++,G--)(oe=Y[H]={})[u.posLetter]=ce-ne[G].v/ae,oe[u.valLetter]=M.c2l(ne[G].t,!0);ee=p(Y)}if(C)se=J+"L"+ee.substr(1)+"Z";else{var pe=[fe,M.c2p(ne[0].t)],we=[fe,M.c2p(ne[re-1].t)];"h"===w.orientation&&(pe.reverse(),we.reverse()),se=O?"M"+pe+"L"+J.substr(1)+"L"+we:"M"+we+"L"+ee.substr(1)+"L"+pe}W.attr("d",se),te.posCenterPx=fe,te.posDensityScale=ae*E,te.path=W.node(),te.pathLength=te.path.getTotalLength()/(C?2:1)});var F,L,P,j=w.box,U=j.width,$=(j.line||{}).width;C?(F=E*U,L=0):O?(F=[0,E*U/2],L=$*{x:1,y:-1}[u.posLetter]):(F=[E*U/2,0],L=$*{x:-1,y:1}[u.posLetter]),_.plotBoxAndWhiskers(g,{pos:S,val:M},w,{bPos:c,bdPos:F,bPosPxOffset:L}),_.plotBoxMean(g,{pos:S,val:M},w,{bPos:c,bdPos:F,bPosPxOffset:L}),!w.box.visible&&w.meanline.visible&&(P=b.identity);var X=g.selectAll("path.meanline").data(P||[]);X.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),X.exit().remove(),X.each(function(te){var ae=M.c2p(te.mean,!0),J=o.getPositionOnKdePath(te,w,ae);y.select(this).attr("d","h"===w.orientation?"M"+ae+","+J[0]+"V"+J[1]:"M"+J[0]+","+ae+"H"+J[1])}),_.plotPoints(g,{x:s,y:d},w,u)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":941,"./helpers":1095,"@plotly/d3":58}],1101:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/color"),T=x("../scatter/style").stylePoints;ue.exports=function(_){var e=y.select(_).selectAll("g.trace.violins");e.style("opacity",function(o){return o[0].trace.opacity}),e.each(function(o){var a=o[0].trace,l=y.select(this),i=a.box||{},v=i.line||{},h=a.meanline||{},s=h.width;l.selectAll("path.violin").style("stroke-width",a.line.width+"px").call(b.stroke,a.line.color).call(b.fill,a.fillcolor),l.selectAll("path.box").style("stroke-width",v.width+"px").call(b.stroke,v.color).call(b.fill,i.fillcolor);var d={"stroke-width":s+"px","stroke-dasharray":2*s+"px,"+s+"px"};l.selectAll("path.mean").style(d).call(b.stroke,h.color),l.selectAll("path.meanline").style(d).call(b.stroke,h.color),T(l,a,_)})}},{"../../components/color":366,"../scatter/style":951,"@plotly/d3":58}],1102:[function(x,ue,le){"use strict";var y=x("../../components/colorscale/attributes"),b=x("../isosurface/attributes"),T=x("../surface/attributes"),_=x("../../plots/attributes"),e=x("../../lib/extend").extendFlat,o=x("../../plot_api/edit_types").overrideAll,a=ue.exports=o(e({x:b.x,y:b.y,z:b.z,value:b.value,isomin:b.isomin,isomax:b.isomax,surface:b.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:b.slices,caps:b.caps,text:b.text,hovertext:b.hovertext,xhoverformat:b.xhoverformat,yhoverformat:b.yhoverformat,zhoverformat:b.zhoverformat,valuehoverformat:b.valuehoverformat,hovertemplate:b.hovertemplate},y("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:b.colorbar,opacity:b.opacity,opacityscale:T.opacityscale,lightposition:b.lightposition,lighting:b.lighting,flatshading:b.flatshading,contour:b.contour,hoverinfo:e({},_.hoverinfo),showlegend:e({},_.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1061}],1103:[function(x,ue,le){"use strict";var y=x("../../../stackgl_modules").gl_mesh3d,b=x("../../lib/gl_format_color").parseColorScale,T=x("../../lib/str2rgbarray"),_=x("../../components/colorscale").extractOpts,e=x("../../plots/gl3d/zip3"),o=x("../isosurface/convert").findNearestOnAxis,a=x("../isosurface/convert").generateIsoMeshes;function l(v,h,s){this.scene=v,this.uid=s,this.mesh=h,this.name="",this.data=null,this.showContour=!1}var i=l.prototype;i.handlePick=function(v){if(v.object===this.mesh){var h=v.data.index,d=this.data._meshY[h],p=this.data._meshZ[h],f=this.data._Ys.length,g=this.data._Zs.length,m=o(this.data._meshX[h],this.data._Xs).id,u=o(d,this.data._Ys).id,w=o(p,this.data._Zs).id,c=v.index=w+g*u+g*f*m;v.traceCoordinate=[this.data._meshX[c],this.data._meshY[c],this.data._meshZ[c],this.data._value[c]];var E=this.data.hovertext||this.data.text;return Array.isArray(E)&&void 0!==E[c]?v.textLabel=E[c]:E&&(v.textLabel=E),!0}},i.update=function(v){var h=this.scene,s=h.fullSceneLayout;function d(g,m,u,w){return m.map(function(c){return g.d2l(c,0,w)*u})}this.data=a(v);var p={positions:e(d(s.xaxis,v._meshX,h.dataScale[0],v.xcalendar),d(s.yaxis,v._meshY,h.dataScale[1],v.ycalendar),d(s.zaxis,v._meshZ,h.dataScale[2],v.zcalendar)),cells:e(v._meshI,v._meshJ,v._meshK),lightPosition:[v.lightposition.x,v.lightposition.y,v.lightposition.z],ambient:v.lighting.ambient,diffuse:v.lighting.diffuse,specular:v.lighting.specular,roughness:v.lighting.roughness,fresnel:v.lighting.fresnel,vertexNormalsEpsilon:v.lighting.vertexnormalsepsilon,faceNormalsEpsilon:v.lighting.facenormalsepsilon,opacity:v.opacity,opacityscale:v.opacityscale,contourEnable:v.contour.show,contourColor:T(v.contour.color).slice(0,3),contourWidth:v.contour.width,useFacetNormals:v.flatshading},f=_(v);p.vertexIntensity=v._meshIntensity,p.vertexIntensityBounds=[f.min,f.max],p.colormap=b(v),this.mesh.update(p)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ue.exports=function(v,h){var d=y({gl:v.glplot.gl}),p=new l(v,d,h.uid);return d._trace=p,p.update(h),v.glplot.add(d),p}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1104:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./attributes"),T=x("../isosurface/defaults").supplyIsoDefaults,_=x("../surface/defaults").opacityscaleDefaults;ue.exports=function(e,o,a,l){function i(v,h){return y.coerce(e,o,b,v,h)}T(e,o,a,l,i),_(e,o,l,i)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1064,"./attributes":1102}],1105:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:x("./convert"),moduleType:"trace",name:"volume",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1102,"./convert":1103,"./defaults":1104}],1106:[function(x,ue,le){"use strict";var y=x("../bar/attributes"),b=x("../scatter/attributes").line,T=x("../../plots/attributes"),_=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../plots/template_attributes").hovertemplateAttrs,o=x("../../plots/template_attributes").texttemplateAttrs,a=x("./constants"),l=x("../../lib/extend").extendFlat,i=x("../../components/color");function v(h){return{marker:{color:l({},y.marker.color,{arrayOk:!1,editType:"style"}),line:{color:l({},y.marker.line.color,{arrayOk:!1,editType:"style"}),width:l({},y.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ue.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),hovertext:y.hovertext,hovertemplate:e({},{keys:a.eventDataKeys}),hoverinfo:l({},T.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label"])}),text:y.text,textposition:y.textposition,insidetextanchor:y.insidetextanchor,textangle:y.textangle,textfont:y.textfont,insidetextfont:y.insidetextfont,outsidetextfont:y.outsidetextfont,constraintext:y.constraintext,cliponaxis:y.cliponaxis,orientation:y.orientation,offset:y.offset,width:y.width,increasing:v(),decreasing:v(),totals:v(),connector:{line:{color:l({},b.color,{dflt:i.defaultLine}),width:l({},b.width,{editType:"plot"}),dash:b.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":1108}],1107:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes"),b=x("../../plots/cartesian/align_period"),T=x("../../lib").mergeArray,_=x("../scatter/calc_selection"),e=x("../../constants/numerical").BADNUM;function o(l){return"a"===l||"absolute"===l}function a(l){return"t"===l||"total"===l}ue.exports=function(l,i){var v,h,s,d,p,f,g=y.getFromId(l,i.xaxis||"x"),m=y.getFromId(l,i.yaxis||"y");"h"===i.orientation?(v=g.makeCalcdata(i,"x"),s=m.makeCalcdata(i,"y"),d=b(i,m,"y",s),p=!!i.yperiodalignment,f="y"):(v=m.makeCalcdata(i,"y"),s=g.makeCalcdata(i,"x"),d=b(i,g,"x",s),p=!!i.xperiodalignment,f="x"),h=d.vals;for(var u,w=Math.min(h.length,v.length),c=new Array(w),E=0,M=!1,S=0;S<w;S++){var C=v[S]||0,O=!1;(v[S]!==e||a(i.measure[S])||o(i.measure[S]))&&S+1<w&&(v[S+1]!==e||a(i.measure[S+1])||o(i.measure[S+1]))&&(O=!0);var I=c[S]={i:S,p:h[S],s:C,rawS:C,cNext:O};o(i.measure[S])?(E=I.s,I.isSum=!0,I.dir="totals",I.s=E):a(i.measure[S])?(I.isSum=!0,I.dir="totals",I.s=E):(I.isSum=!1,I.dir=I.rawS<0?"decreasing":"increasing",I.s=E+(u=I.s),E+=u),"totals"===I.dir&&(M=!0),p&&(c[S].orig_p=s[S],c[S][f+"End"]=d.ends[S],c[S][f+"Start"]=d.starts[S]),i.ids&&(I.id=String(i.ids[S])),I.v=(i.base||0)+E}return c.length&&(c[0].hasTotals=M),T(i.text,c,"tx"),T(i.hovertext,c,"htx"),_(c,i),c}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929}],1108:[function(x,ue,le){"use strict";ue.exports={eventDataKeys:["initial","delta","final"]}},{}],1109:[function(x,ue,le){"use strict";var y=x("../bar/cross_trace_calc").setGroupPositions;ue.exports=function(b,T){var _,e,o=b._fullLayout,a=b._fullData,l=b.calcdata,i=T.xaxis,v=T.yaxis,h=[],s=[],d=[];for(e=0;e<a.length;e++){var p=a[e];!0===p.visible&&p.xaxis===i._id&&p.yaxis===v._id&&"waterfall"===p.type&&(_=l[e],"h"===p.orientation?d.push(_):s.push(_),h.push(_))}var f={mode:o.waterfallmode,norm:o.waterfallnorm,gap:o.waterfallgap,groupgap:o.waterfallgroupgap};for(y(b,i,v,s,f),y(b,v,i,d,f),e=0;e<h.length;e++){_=h[e];for(var g=0;g<_.length;g++){var m=_[g];!1===m.isSum&&(m.s0+=0===g?0:_[g-1].s),g+1<_.length&&(_[g].nextP0=_[g+1].p0,_[g].nextS0=_[g+1].s0)}}}},{"../bar/cross_trace_calc":651}],1110:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("../bar/defaults").handleGroupingDefaults,T=x("../bar/defaults").handleText,_=x("../scatter/xy_defaults"),e=x("../scatter/period_defaults"),o=x("./attributes"),a=x("../../components/color"),l=x("../../constants/delta.js"),i=l.INCREASING.COLOR,v=l.DECREASING.COLOR;function h(s,d,p){s(d+".marker.color",p),s(d+".marker.line.color",a.defaultLine),s(d+".marker.line.width")}ue.exports={supplyDefaults:function(s,d,p,f){function g(u,w){return y.coerce(s,d,o,u,w)}if(_(s,d,f,g)){e(s,d,f,g),g("xhoverformat"),g("yhoverformat"),g("measure"),g("orientation",d.x&&!d.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var m=g("textposition");T(s,d,f,g,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==d.textposition&&(g("texttemplate"),d.texttemplate||g("textinfo")),h(g,"increasing",i),h(g,"decreasing",v),h(g,"totals","#4499FF"),g("connector.visible")&&(g("connector.mode"),g("connector.line.width")&&(g("connector.line.color"),g("connector.line.dash")))}else d.visible=!1},crossTraceDefaults:function(s,d){var p,f;function g(u){return y.coerce(f._input,f,o,u)}if("group"===d.waterfallmode)for(var m=0;m<s.length;m++)p=(f=s[m])._input,b(p,f,d,g)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":1106}],1111:[function(x,ue,le){"use strict";ue.exports=function(y,b){return y.x="xVal"in b?b.xVal:b.x,y.y="yVal"in b?b.yVal:b.y,"initial"in b&&(y.initial=b.initial),"delta"in b&&(y.delta=b.delta),"final"in b&&(y.final=b.final),b.xa&&(y.xaxis=b.xa),b.ya&&(y.yaxis=b.ya),y}},{}],1112:[function(x,ue,le){"use strict";var y=x("../../plots/cartesian/axes").hoverLabelText,b=x("../../components/color").opacity,T=x("../bar/hover").hoverOnBars,_=x("../../constants/delta.js"),e=_.INCREASING.SYMBOL,o=_.DECREASING.SYMBOL;ue.exports=function(a,l,i,v,h){var L,P,j,U,s=T(a,l,i,v,h);if(s){var d=s.cd,p=d[0].trace,f="h"===p.orientation,g=f?"x":"y",m=f?a.xa:a.ya,u=d[s.index],w=u.isSum?u.b+u.s:u.rawS;if(!u.isSum){s.initial=u.b+u.s-w,s.delta=w,s.final=s.initial+s.delta;var c=I(Math.abs(s.delta));s.deltaLabel=w<0?"("+c+")":c,s.finalLabel=I(s.final),s.initialLabel=I(s.initial)}var E=u.hi||p.hoverinfo,M=[];if(E&&"none"!==E&&"skip"!==E){var S="all"===E,C=E.split("+"),O=function(N){return S||-1!==C.indexOf(N)};u.isSum||(!O("final")||O(f?"x":"y")||M.push(s.finalLabel),O("delta")&&M.push(w<0?s.deltaLabel+" "+o:s.deltaLabel+" "+e),O("initial")&&M.push("Initial: "+s.initialLabel))}return M.length&&(s.extraText=M.join("<br>")),s.color=(j=(L=p[u.dir].marker).line.color,U=L.line.width,b(P=L.color)?P:b(j)&&U?j:void 0),[s]}function I(N){return y(m,N,p[g+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1113:[function(x,ue,le){"use strict";ue.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc"),plot:x("./plot"),style:x("./style").style,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1106,"./calc":1107,"./cross_trace_calc":1109,"./defaults":1110,"./event_data":1111,"./hover":1112,"./layout_attributes":1114,"./layout_defaults":1115,"./plot":1116,"./style":1117}],1114:[function(x,ue,le){"use strict";ue.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1115:[function(x,ue,le){"use strict";var y=x("../../lib"),b=x("./layout_attributes");ue.exports=function(T,_,e){var o=!1;function a(v,h){return y.coerce(T,_,b,v,h)}for(var l=0;l<e.length;l++){var i=e[l];if(i.visible&&"waterfall"===i.type){o=!0;break}}o&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1114}],1116:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../lib"),T=x("../../components/drawing"),_=x("../../constants/numerical").BADNUM,e=x("../bar/plot"),o=x("../bar/uniform_text").clearMinTextSize;ue.exports=function(a,l,i,v){var s,d,g,m,h=a._fullLayout;o("waterfall",h),e.plot(a,l,i,v,{mode:h.waterfallmode,norm:h.waterfallmode,gap:h.waterfallgap,groupgap:h.waterfallgroupgap}),s=a,g=(d=l).xaxis,m=d.yaxis,b.makeTraceGroups(v,i,"trace bars").each(function(u){var w=y.select(this),c=u[0].trace,E=b.ensureSingle(w,"g","lines");if(c.connector&&c.connector.visible){var M="h"===c.orientation,S=c.connector.mode,C=E.selectAll("g.line").data(b.identity);C.enter().append("g").classed("line",!0),C.exit().remove();var O=C.size();C.each(function(I,N){if(N===O-1||I.cNext){var F=($=g,X=m,J=[],se=(te=M)?X:$,(ae=[])[0]=(ee=te?$:X).c2p((U=I).s0,!0),J[0]=se.c2p(U.p0,!0),ae[1]=ee.c2p(U.s1,!0),J[1]=se.c2p(U.p1,!0),ae[2]=ee.c2p(U.nextS0,!0),J[2]=se.c2p(U.nextP0,!0),te?[ae,J]:[J,ae]),L=F[0],P=F[1],j="";L[0]!==_&&P[0]!==_&&L[1]!==_&&P[1]!==_&&("spanning"===S&&!I.isSum&&N>0&&(j+=M?"M"+L[0]+","+P[1]+"V"+P[0]:"M"+L[1]+","+P[0]+"H"+L[0]),"between"!==S&&(I.isSum||N<O-1)&&(j+=M?"M"+L[1]+","+P[0]+"V"+P[1]:"M"+L[0]+","+P[1]+"H"+L[1]),L[2]!==_&&P[2]!==_&&(j+=M?"M"+L[1]+","+P[1]+"V"+P[2]:"M"+L[1]+","+P[1]+"H"+L[2])),""===j&&(j="M0,0Z"),b.ensureSingle(y.select(this),"path").attr("d",j).call(T.setClipUrl,d.layerClipId,s)}var U,$,X,te,ae,J,ee,se})}else E.remove()})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1117:[function(x,ue,le){"use strict";var y=x("@plotly/d3"),b=x("../../components/drawing"),T=x("../../components/color"),_=x("../../constants/interactions").DESELECTDIM,e=x("../bar/style"),o=x("../bar/uniform_text").resizeText,a=e.styleTextPoints;ue.exports={style:function(l,i,v){var h=v||y.select(l).selectAll("g.waterfalllayer").selectAll("g.trace");o(l,h,"waterfall"),h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var d=y.select(this),p=s[0].trace;d.selectAll(".point > path").each(function(f){if(!f.isBlank){var g=p[f.dir].marker;y.select(this).call(T.fill,g.color).call(T.stroke,g.line.color).call(b.dashLine,g.line.dash,g.line.width).style("opacity",p.selectedpoints&&!f.selected?_:1)}}),a(d,p,l),d.selectAll(".lines").each(function(){var f=p.connector.line;b.lineGroupStyle(y.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1118:[function(x,ue,le){"use strict";var y=x("../plots/cartesian/axes"),b=x("../lib"),T=x("../plot_api/plot_schema"),_=x("./helpers").pointsAccessorFunction,e=x("../constants/numerical").BADNUM;le.moduleType="transform",le.name="aggregate";var o=le.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},a=o.aggregations;function l(s,d,p,f){if(f.enabled){for(var g=f.target,m=b.nestedProperty(d,g),u=m.get(),w=function(M,S){var O=S.d2c,I=S.c2d;switch(M.func){case"count":return i;case"first":return v;case"last":return h;case"sum":return function(N,F){for(var L=0,P=0;P<F.length;P++){var j=O(N[F[P]]);j!==e&&(L+=j)}return I(L)};case"avg":return function(N,F){for(var L=0,P=0,j=0;j<F.length;j++){var U=O(N[F[j]]);U!==e&&(L+=U,P++)}return P?I(L/P):e};case"min":return function(N,F){for(var L=1/0,P=0;P<F.length;P++){var j=O(N[F[P]]);j!==e&&(L=Math.min(L,j))}return L===1/0?e:I(L)};case"max":return function(N,F){for(var L=-1/0,P=0;P<F.length;P++){var j=O(N[F[P]]);j!==e&&(L=Math.max(L,j))}return L===-1/0?e:I(L)};case"range":return function(N,F){for(var L=1/0,P=-1/0,j=0;j<F.length;j++){var U=O(N[F[j]]);U!==e&&(L=Math.min(L,U),P=Math.max(P,U))}return P===-1/0||L===1/0?e:I(P-L)};case"change":return function(N,F){var L=O(N[F[0]]),P=O(N[F[F.length-1]]);return L===e||P===e?e:I(P-L)};case"median":return function(N,F){for(var L=[],P=0;P<F.length;P++){var j=O(N[F[P]]);j!==e&&L.push(j)}if(!L.length)return e;L.sort(b.sorterAsc);var U=(L.length-1)/2;return I((L[Math.floor(U)]+L[Math.ceil(U)])/2)};case"mode":return function(N,F){for(var L={},P=0,j=e,U=0;U<F.length;U++){var $=O(N[F[U]]);if($!==e){var X=L[$]=(L[$]||0)+1;X>P&&(P=X,j=$)}}return P?I(j):e};case"rms":return function(N,F){for(var L=0,P=0,j=0;j<F.length;j++){var U=O(N[F[j]]);U!==e&&(L+=U*U,P++)}return P?I(Math.sqrt(L/P)):e};case"stddev":return function(N,F){var L,P=0,j=0,U=1,$=e;for(L=0;L<F.length&&$===e;L++)$=O(N[F[L]]);if($===e)return e;for(;L<F.length;L++){var X=O(N[F[L]]);if(X!==e){var te=X-$;P+=te,j+=te*te,U++}}var ae="sample"===M.funcmode?U-1:U;return ae?Math.sqrt((j-P*P/U)/ae):0}}}(f,y.getDataConversions(s,d,g,u)),c=new Array(p.length),E=0;E<p.length;E++)c[E]=w(u,p[E]);m.set(c),"count"===f.func&&b.pushUnique(d._arrayAttrs,g)}}function i(s,d){return d.length}function v(s,d){return s[d[0]]}function h(s,d){return s[d[d.length-1]]}le.supplyDefaults=function(s,d){var p,f={};function g(I,N){return b.coerce(s,f,o,I,N)}if(!g("enabled"))return f;var m=T.findArrayAttributes(d),u={};for(p=0;p<m.length;p++)u[m[p]]=1;var w=g("groups");if(!Array.isArray(w)){if(!u[w])return f.enabled=!1,f;u[w]=0}var c,E=s.aggregations||[],M=f.aggregations=new Array(E.length);function S(I,N){return b.coerce(E[p],c,a,I,N)}for(p=0;p<E.length;p++){c={_index:p};var C=S("target"),O=S("func");S("enabled")&&C&&(u[C]||"count"===O&&void 0===u[C])?("stddev"===O&&S("funcmode"),u[C]=0,M[p]=c):M[p]={enabled:!1,_index:p}}for(p=0;p<m.length;p++)u[m[p]]&&M.push({target:m[p],func:a.func.dflt,enabled:!0,_index:-1});return f},le.calcTransform=function(s,d,p){if(p.enabled){var f=p.groups,g=b.getTargetArray(d,{target:f});if(g){var m,u,w,E={},M={},S=[],C=_(d.transforms,p),O=g.length;for(d._length&&(O=Math.min(O,d._length)),m=0;m<O;m++)void 0===(w=E[u=g[m]])?(E[u]=S.length,S.push([m]),M[E[u]]=C(m)):(S[w].push(m),M[E[u]]=(M[E[u]]||[]).concat(C(m)));p._indexToPoints=M;var I=p.aggregations;for(m=0;m<I.length;m++)l(s,d,S,I[m]);"string"==typeof f&&l(s,d,S,{target:f,func:"first",enabled:!0}),d._length=S.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1121}],1119:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("../registry"),T=x("../plots/cartesian/axes"),_=x("./helpers").pointsAccessorFunction,e=x("../constants/filter_ops"),o=e.COMPARISON_OPS,a=e.INTERVAL_OPS,l=e.SET_OPS;le.moduleType="transform",le.name="filter",le.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(o).concat(a).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},le.supplyDefaults=function(i){var v={};function h(p,f){return y.coerce(i,v,le.attributes,p,f)}if(h("enabled")){var s=h("target");if(y.isArrayOrTypedArray(s)&&0===s.length)return v.enabled=!1,v;h("preservegaps"),h("operation"),h("value");var d=b.getComponentMethod("calendars","handleDefaults");d(i,v,"valuecalendar",null),d(i,v,"targetcalendar",null)}return v},le.calcTransform=function(i,v,h){if(h.enabled){var s=y.getTargetArray(v,h);if(s){var d=h.target,p=s.length;v._length&&(p=Math.min(p,v._length));var f=h.targetcalendar,g=v._arrayAttrs,m=h.preservegaps;if("string"==typeof d){var u=y.nestedProperty(v,d+"calendar").get();u&&(f=u)}var w,c,E=function(F,L,P){var j=F.operation,U=F.value,$=Array.isArray(U);function X(ee){return-1!==ee.indexOf(j)}var te,ae=function(ee){return L(ee,0,F.valuecalendar)},J=function(ee){return L(ee,0,P)};switch(X(o)?te=ae($?U[0]:U):X(a)?te=$?[ae(U[0]),ae(U[1])]:[ae(U),ae(U)]:X(l)&&(te=$?U.map(ae):[ae(U)]),j){case"=":return function(ee){return J(ee)===te};case"!=":return function(ee){return J(ee)!==te};case"<":return function(ee){return J(ee)<te};case"<=":return function(ee){return J(ee)<=te};case">":return function(ee){return J(ee)>te};case">=":return function(ee){return J(ee)>=te};case"[]":return function(ee){var se=J(ee);return se>=te[0]&&se<=te[1]};case"()":return function(ee){var se=J(ee);return se>te[0]&&se<te[1]};case"[)":return function(ee){var se=J(ee);return se>=te[0]&&se<te[1]};case"(]":return function(ee){var se=J(ee);return se>te[0]&&se<=te[1]};case"][":return function(ee){var se=J(ee);return se<=te[0]||se>=te[1]};case")(":return function(ee){var se=J(ee);return se<te[0]||se>te[1]};case"](":return function(ee){var se=J(ee);return se<=te[0]||se>te[1]};case")[":return function(ee){var se=J(ee);return se<te[0]||se>=te[1]};case"{}":return function(ee){return-1!==te.indexOf(J(ee))};case"}{":return function(ee){return-1===te.indexOf(J(ee))}}}(h,T.getDataToCoordFunc(i,v,d,s),f),M={},S={},C=0;m?(w=function(F){M[F.astr]=y.extendDeep([],F.get()),F.set(new Array(p))},c=function(F,L){var P=M[F.astr][L];F.get()[L]=P}):(w=function(F){M[F.astr]=y.extendDeep([],F.get()),F.set([])},c=function(F,L){var P=M[F.astr][L];F.get().push(P)}),N(w);for(var O=_(v.transforms,h),I=0;I<p;I++)E(s[I])?(N(c,I),S[C++]=O(I)):m&&C++;h._indexToPoints=S,v._length=C}}function N(F,L){for(var P=0;P<g.length;P++)F(y.nestedProperty(v,g[P]),L)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1121}],1120:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("../plot_api/plot_schema"),T=x("../plots/plots"),_=x("./helpers").pointsAccessorFunction;function e(o,a){var l,i,v,h,s,d,p,f,g,m,u=a.transform,w=a.transformIndex,c=o.transforms[w].groups,E=_(o.transforms,u);if(!y.isArrayOrTypedArray(c)||0===c.length)return[o];var M=y.filterUnique(c),S=new Array(M.length),C=c.length,O=b.findArrayAttributes(o),I=u.styles||[],N={};for(l=0;l<I.length;l++)N[I[l].target]=I[l].value;u.styles&&(m=y.keyedContainer(u,"styles","target","value.name"));var F={},L={};for(l=0;l<M.length;l++){F[d=M[l]]=l,L[d]=0,(p=S[l]=y.extendDeepNoArrays({},o))._group=d,p.transforms[w]._indexToPoints={};var P=null;for(m&&(P=m.get(d)),p.name=P||""===P?P:y.templateString(u.nameformat,{trace:o.name,group:d}),f=p.transforms,p.transforms=[],i=0;i<f.length;i++)p.transforms[i]=y.extendDeepNoArrays({},f[i]);for(i=0;i<O.length;i++)y.nestedProperty(p,O[i]).set([])}for(v=0;v<O.length;v++){for(h=O[v],i=0,g=[];i<M.length;i++)g[i]=y.nestedProperty(S[i],h).get();for(s=y.nestedProperty(o,h).get(),i=0;i<C;i++)g[F[c[i]]].push(s[i])}for(i=0;i<C;i++)(p=S[F[c[i]]]).transforms[w]._indexToPoints[L[c[i]]]=E(i),L[c[i]]++;for(l=0;l<M.length;l++)d=M[l],T.clearExpandedTraceDefaultColors(p=S[l]),p=y.extendDeepNoArrays(p,N[d]||{});return S}le.moduleType="transform",le.name="groupby",le.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},le.supplyDefaults=function(o,a,l){var i,v={};function h(g,m){return y.coerce(o,v,le.attributes,g,m)}if(!h("enabled"))return v;h("groups"),h("nameformat",l._dataLength>1?"%{group} (%{trace})":"%{group}");var s=o.styles,d=v.styles=[];if(s)for(i=0;i<s.length;i++){var p=d[i]={};y.coerce(s[i],d[i],le.attributes.styles,"target");var f=y.coerce(s[i],d[i],le.attributes.styles,"value");y.isPlainObject(f)?p.value=y.extendDeep({},f):f&&delete p.value}return v},le.transform=function(o,a){var l,i,v,h=[];for(i=0;i<o.length;i++)for(l=e(o[i],a),v=0;v<l.length;v++)h.push(l[v]);return h}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1121}],1121:[function(x,ue,le){"use strict";le.pointsAccessorFunction=function(y,b){for(var T,_,e=0;e<y.length&&(T=y[e])!==b;e++)T._indexToPoints&&!1!==T.enabled&&(_=T._indexToPoints);return _?function(o){return _[o]}:function(o){return[o]}}},{}],1122:[function(x,ue,le){"use strict";var y=x("../lib"),b=x("../plots/cartesian/axes"),T=x("./helpers").pointsAccessorFunction,_=x("../constants/numerical").BADNUM;le.moduleType="transform",le.name="sort",le.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},le.supplyDefaults=function(e){var o={};function a(l,i){return y.coerce(e,o,le.attributes,l,i)}return a("enabled")&&(a("target"),a("order")),o},le.calcTransform=function(e,o,a){if(a.enabled){var l=y.getTargetArray(o,a);if(l){var i=a.target,v=l.length;o._length&&(v=Math.min(v,o._length));var h,s,d=o._arrayAttrs,p=function(c,E,M,S){var C,O=new Array(S),I=new Array(S);for(C=0;C<S;C++)O[C]={v:E[C],i:C};for(O.sort(function(N,F){switch(N.order){case"ascending":return function(L,P){var j=F(L.v),U=F(P.v);return j===_?1:U===_?-1:j-U};case"descending":return function(L,P){var j=F(L.v),U=F(P.v);return j===_?1:U===_?-1:U-j}}}(c,M)),C=0;C<S;C++)I[C]=O[C].i;return I}(a,l,b.getDataToCoordFunc(e,o,i,l),v),f=T(o.transforms,a),g={};for(h=0;h<d.length;h++){var m=y.nestedProperty(o,d[h]),u=m.get(),w=new Array(v);for(s=0;s<v;s++)w[s]=u[p[s]];m.set(w)}for(s=0;s<v;s++)g[s]=f(p[s]);a._indexToPoints=g,o._length=v}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1121}],1123:[function(x,ue,le){"use strict";le.version="2.12.1"},{}],1124:[function(x,ue,le){(function(y){(function(){!function(b){"object"==typeof le&&void 0!==ue?ue.exports=b():("undefined"!=typeof window?window:void 0!==y?y:"undefined"!=typeof self?self:this).stackgl=b()}(function(){return function b(T,_,e){function o(i,v){if(!_[i]){if(!T[i]){var h="function"==typeof x&&x;if(!v&&h)return h(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var d=_[i]={exports:{}};T[i][0].call(d.exports,function(p){return o(T[i][1][p]||p)},d,d.exports,b,T,_,e)}return _[i].exports}for(var a="function"==typeof x&&x,l=0;l<e.length;l++)o(e[l]);return o}({1:[function(b,T,_){"use strict";_.byteLength=function(d){var p=h(d),g=p[1];return 3*(p[0]+g)/4-g},_.toByteArray=function(d){var p,f,C,g=h(d),m=g[0],u=g[1],w=new a(3*(m+(C=u))/4-C),c=0,E=u>0?m-4:m;for(f=0;f<E;f+=4)p=o[d.charCodeAt(f)]<<18|o[d.charCodeAt(f+1)]<<12|o[d.charCodeAt(f+2)]<<6|o[d.charCodeAt(f+3)],w[c++]=p>>16&255,w[c++]=p>>8&255,w[c++]=255&p;return 2===u&&(p=o[d.charCodeAt(f)]<<2|o[d.charCodeAt(f+1)]>>4,w[c++]=255&p),1===u&&(p=o[d.charCodeAt(f)]<<10|o[d.charCodeAt(f+1)]<<4|o[d.charCodeAt(f+2)]>>2,w[c++]=p>>8&255,w[c++]=255&p),w},_.fromByteArray=function(d){for(var p,f=d.length,g=f%3,m=[],u=0,w=f-g;u<w;u+=16383)m.push(s(d,u,u+16383>w?w:u+16383));return 1===g?m.push(e[(p=d[f-1])>>2]+e[p<<4&63]+"=="):2===g&&m.push(e[(p=(d[f-2]<<8)+d[f-1])>>10]+e[p>>4&63]+e[p<<2&63]+"="),m.join("")};for(var e=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,v=l.length;i<v;++i)e[i]=l[i],o[l.charCodeAt(i)]=i;function h(d){var p=d.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=d.indexOf("=");return-1===f&&(f=p),[f,f===p?0:4-f%4]}function s(d,p,f){for(var m,u=[],w=p;w<f;w+=3)u.push(e[(m=(d[w]<<16&16711680)+(d[w+1]<<8&65280)+(255&d[w+2]))>>18&63]+e[m>>12&63]+e[m>>6&63]+e[63&m]);return u.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(b,T,_){},{}],3:[function(b,T,_){(function(e){(function(){"use strict";var o=b("base64-js"),a=b("ieee754");function l(W){if(W>2147483647)throw new RangeError('The value "'+W+'" is invalid for option "size"');var ne=new Uint8Array(W);return ne.__proto__=i.prototype,ne}function i(W,ne,re){if("number"==typeof W){if("string"==typeof ne)throw new TypeError('The "string" argument must be of type string. Received type number');return s(W)}return v(W,ne,re)}function v(W,ne,re){if("string"==typeof W)return function(me,pe){if("string"==typeof pe&&""!==pe||(pe="utf8"),!i.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);var we=0|f(me,pe),ye=l(we),Te=ye.write(me,pe);return Te!==we&&(ye=ye.slice(0,Te)),ye}(W,ne);if(ArrayBuffer.isView(W))return d(W);if(null==W)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if(Y(W,ArrayBuffer)||W&&Y(W.buffer,ArrayBuffer))return function(me,pe,we){if(pe<0||me.byteLength<pe)throw new RangeError('"offset" is outside of buffer bounds');if(me.byteLength<pe+(we||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return(ye=void 0===pe&&void 0===we?new Uint8Array(me):void 0===we?new Uint8Array(me,pe):new Uint8Array(me,pe,we)).__proto__=i.prototype,ye}(W,ne,re);if("number"==typeof W)throw new TypeError('The "value" argument must not be of type number. Received type number');var ce=W.valueOf&&W.valueOf();if(null!=ce&&ce!==W)return i.from(ce,ne,re);var fe=function(me){if(i.isBuffer(me)){var pe=0|p(me.length),we=l(pe);return 0===we.length||me.copy(we,0,0,pe),we}return void 0!==me.length?"number"!=typeof me.length||oe(me.length)?l(0):d(me):"Buffer"===me.type&&Array.isArray(me.data)?d(me.data):void 0}(W);if(fe)return fe;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof W[Symbol.toPrimitive])return i.from(W[Symbol.toPrimitive]("string"),ne,re);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}function h(W){if("number"!=typeof W)throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function s(W){return h(W),l(W<0?0:0|p(W))}function d(W){for(var ne=W.length<0?0:0|p(W.length),re=l(ne),ce=0;ce<ne;ce+=1)re[ce]=255&W[ce];return re}function p(W){if(W>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|W}function f(W,ne){if(i.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||Y(W,ArrayBuffer))return W.byteLength;if("string"!=typeof W)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);var re=W.length,ce=arguments.length>2&&!0===arguments[2];if(!ce&&0===re)return 0;for(var fe=!1;;)switch(ne){case"ascii":case"latin1":case"binary":return re;case"utf8":case"utf-8":return se(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*re;case"hex":return re>>>1;case"base64":return G(W).length;default:if(fe)return ce?-1:se(W).length;ne=(""+ne).toLowerCase(),fe=!0}}function g(W,ne,re){var ce=!1;if((void 0===ne||ne<0)&&(ne=0),ne>this.length||((void 0===re||re>this.length)&&(re=this.length),re<=0)||(re>>>=0)<=(ne>>>=0))return"";for(W||(W="utf8");;)switch(W){case"hex":return P(this,ne,re);case"utf8":case"utf-8":return N(this,ne,re);case"ascii":return F(this,ne,re);case"latin1":case"binary":return L(this,ne,re);case"base64":return I(this,ne,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,ne,re);default:if(ce)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),ce=!0}}function m(W,ne,re){var ce=W[ne];W[ne]=W[re],W[re]=ce}function u(W,ne,re,ce,fe){if(0===W.length)return-1;if("string"==typeof re?(ce=re,re=0):re>2147483647?re=2147483647:re<-2147483648&&(re=-2147483648),oe(re=+re)&&(re=fe?0:W.length-1),re<0&&(re=W.length+re),re>=W.length){if(fe)return-1;re=W.length-1}else if(re<0){if(!fe)return-1;re=0}if("string"==typeof ne&&(ne=i.from(ne,ce)),i.isBuffer(ne))return 0===ne.length?-1:w(W,ne,re,ce,fe);if("number"==typeof ne)return ne&=255,"function"==typeof Uint8Array.prototype.indexOf?fe?Uint8Array.prototype.indexOf.call(W,ne,re):Uint8Array.prototype.lastIndexOf.call(W,ne,re):w(W,[ne],re,ce,fe);throw new TypeError("val must be string, number or Buffer")}function w(W,ne,re,ce,fe){var me,pe=1,we=W.length,ye=ne.length;if(void 0!==ce&&("ucs2"===(ce=String(ce).toLowerCase())||"ucs-2"===ce||"utf16le"===ce||"utf-16le"===ce)){if(W.length<2||ne.length<2)return-1;pe=2,we/=2,ye/=2,re/=2}function Te(Ve,_e){return 1===pe?Ve[_e]:Ve.readUInt16BE(_e*pe)}if(fe){var Le=-1;for(me=re;me<we;me++)if(Te(W,me)===Te(ne,-1===Le?0:me-Le)){if(-1===Le&&(Le=me),me-Le+1===ye)return Le*pe}else-1!==Le&&(me-=me-Le),Le=-1}else for(re+ye>we&&(re=we-ye),me=re;me>=0;me--){for(var Oe=!0,Re=0;Re<ye;Re++)if(Te(W,me+Re)!==Te(ne,Re)){Oe=!1;break}if(Oe)return me}return-1}function c(W,ne,re,ce){re=Number(re)||0;var fe=W.length-re;ce?(ce=Number(ce))>fe&&(ce=fe):ce=fe;var me=ne.length;ce>me/2&&(ce=me/2);for(var pe=0;pe<ce;++pe){var we=parseInt(ne.substr(2*pe,2),16);if(oe(we))return pe;W[re+pe]=we}return pe}function E(W,ne,re,ce){return H(se(ne,W.length-re),W,re,ce)}function M(W,ne,re,ce){return H(function(fe){for(var me=[],pe=0;pe<fe.length;++pe)me.push(255&fe.charCodeAt(pe));return me}(ne),W,re,ce)}function S(W,ne,re,ce){return M(W,ne,re,ce)}function C(W,ne,re,ce){return H(G(ne),W,re,ce)}function O(W,ne,re,ce){return H(function(fe,me){for(var pe,we,Te=[],Le=0;Le<fe.length&&!((me-=2)<0);++Le)we=(pe=fe.charCodeAt(Le))>>8,Te.push(pe%256),Te.push(we);return Te}(ne,W.length-re),W,re,ce)}function I(W,ne,re){return o.fromByteArray(0===ne&&re===W.length?W:W.slice(ne,re))}function N(W,ne,re){re=Math.min(W.length,re);for(var ce=[],fe=ne;fe<re;){var me,pe,we,ye,Te=W[fe],Le=null,Oe=Te>239?4:Te>223?3:Te>191?2:1;if(fe+Oe<=re)switch(Oe){case 1:Te<128&&(Le=Te);break;case 2:128==(192&(me=W[fe+1]))&&(ye=(31&Te)<<6|63&me)>127&&(Le=ye);break;case 3:pe=W[fe+2],128==(192&(me=W[fe+1]))&&128==(192&pe)&&(ye=(15&Te)<<12|(63&me)<<6|63&pe)>2047&&(ye<55296||ye>57343)&&(Le=ye);break;case 4:pe=W[fe+2],we=W[fe+3],128==(192&(me=W[fe+1]))&&128==(192&pe)&&128==(192&we)&&(ye=(15&Te)<<18|(63&me)<<12|(63&pe)<<6|63&we)>65535&&ye<1114112&&(Le=ye)}null===Le?(Le=65533,Oe=1):Le>65535&&(ce.push((Le-=65536)>>>10&1023|55296),Le=56320|1023&Le),ce.push(Le),fe+=Oe}return function(Re){var Ve=Re.length;if(Ve<=4096)return String.fromCharCode.apply(String,Re);for(var _e="",Ae=0;Ae<Ve;)_e+=String.fromCharCode.apply(String,Re.slice(Ae,Ae+=4096));return _e}(ce)}function F(W,ne,re){var ce="";re=Math.min(W.length,re);for(var fe=ne;fe<re;++fe)ce+=String.fromCharCode(127&W[fe]);return ce}function L(W,ne,re){var ce="";re=Math.min(W.length,re);for(var fe=ne;fe<re;++fe)ce+=String.fromCharCode(W[fe]);return ce}function P(W,ne,re){var ce=W.length;(!ne||ne<0)&&(ne=0),(!re||re<0||re>ce)&&(re=ce);for(var fe="",me=ne;me<re;++me)fe+=ee(W[me]);return fe}function j(W,ne,re){for(var ce=W.slice(ne,re),fe="",me=0;me<ce.length;me+=2)fe+=String.fromCharCode(ce[me]+256*ce[me+1]);return fe}function U(W,ne,re){if(W%1!=0||W<0)throw new RangeError("offset is not uint");if(W+ne>re)throw new RangeError("Trying to access beyond buffer length")}function $(W,ne,re,ce,fe,me){if(!i.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne>fe||ne<me)throw new RangeError('"value" argument is out of bounds');if(re+ce>W.length)throw new RangeError("Index out of range")}function X(W,ne,re,ce,fe,me){if(re+ce>W.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("Index out of range")}function te(W,ne,re,ce,fe){return ne=+ne,re>>>=0,fe||X(W,0,re,4),a.write(W,ne,re,ce,23,4),re+4}function ae(W,ne,re,ce,fe){return ne=+ne,re>>>=0,fe||X(W,0,re,8),a.write(W,ne,re,ce,52,8),re+8}_.Buffer=i,_.SlowBuffer=function(W){return+W!=W&&(W=0),i.alloc(+W)},_.INSPECT_MAX_BYTES=50,_.kMaxLength=2147483647,(i.TYPED_ARRAY_SUPPORT=function(){try{var W=new Uint8Array(1);return W.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===W.foo()}catch(ne){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(W,ne,re){return v(W,ne,re)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(W,ne,re){return fe=ne,me=re,h(ce=W),ce<=0?l(ce):void 0!==fe?"string"==typeof me?l(ce).fill(fe,me):l(ce).fill(fe):l(ce);var ce,fe,me},i.allocUnsafe=function(W){return s(W)},i.allocUnsafeSlow=function(W){return s(W)},i.isBuffer=function(W){return null!=W&&!0===W._isBuffer&&W!==i.prototype},i.compare=function(W,ne){if(Y(W,Uint8Array)&&(W=i.from(W,W.offset,W.byteLength)),Y(ne,Uint8Array)&&(ne=i.from(ne,ne.offset,ne.byteLength)),!i.isBuffer(W)||!i.isBuffer(ne))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===ne)return 0;for(var re=W.length,ce=ne.length,fe=0,me=Math.min(re,ce);fe<me;++fe)if(W[fe]!==ne[fe]){re=W[fe],ce=ne[fe];break}return re<ce?-1:ce<re?1:0},i.isEncoding=function(W){switch(String(W).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(W,ne){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(0===W.length)return i.alloc(0);var re;if(void 0===ne)for(ne=0,re=0;re<W.length;++re)ne+=W[re].length;var ce=i.allocUnsafe(ne),fe=0;for(re=0;re<W.length;++re){var me=W[re];if(Y(me,Uint8Array)&&(me=i.from(me)),!i.isBuffer(me))throw new TypeError('"list" argument must be an Array of Buffers');me.copy(ce,fe),fe+=me.length}return ce},i.byteLength=f,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var W=this.length;if(W%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ne=0;ne<W;ne+=2)m(this,ne,ne+1);return this},i.prototype.swap32=function(){var W=this.length;if(W%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ne=0;ne<W;ne+=4)m(this,ne,ne+3),m(this,ne+1,ne+2);return this},i.prototype.swap64=function(){var W=this.length;if(W%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ne=0;ne<W;ne+=8)m(this,ne,ne+7),m(this,ne+1,ne+6),m(this,ne+2,ne+5),m(this,ne+3,ne+4);return this},i.prototype.toLocaleString=i.prototype.toString=function(){var W=this.length;return 0===W?"":0===arguments.length?N(this,0,W):g.apply(this,arguments)},i.prototype.equals=function(W){if(!i.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W||0===i.compare(this,W)},i.prototype.inspect=function(){var W="",ne=_.INSPECT_MAX_BYTES;return W=this.toString("hex",0,ne).replace(/(.{2})/g,"$1 ").trim(),this.length>ne&&(W+=" ... "),"<Buffer "+W+">"},i.prototype.compare=function(W,ne,re,ce,fe){if(Y(W,Uint8Array)&&(W=i.from(W,W.offset,W.byteLength)),!i.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof W);if(void 0===ne&&(ne=0),void 0===re&&(re=W?W.length:0),void 0===ce&&(ce=0),void 0===fe&&(fe=this.length),ne<0||re>W.length||ce<0||fe>this.length)throw new RangeError("out of range index");if(ce>=fe&&ne>=re)return 0;if(ce>=fe)return-1;if(ne>=re)return 1;if(this===W)return 0;for(var me=(fe>>>=0)-(ce>>>=0),pe=(re>>>=0)-(ne>>>=0),we=Math.min(me,pe),ye=this.slice(ce,fe),Te=W.slice(ne,re),Le=0;Le<we;++Le)if(ye[Le]!==Te[Le]){me=ye[Le],pe=Te[Le];break}return me<pe?-1:pe<me?1:0},i.prototype.includes=function(W,ne,re){return-1!==this.indexOf(W,ne,re)},i.prototype.indexOf=function(W,ne,re){return u(this,W,ne,re,!0)},i.prototype.lastIndexOf=function(W,ne,re){return u(this,W,ne,re,!1)},i.prototype.write=function(W,ne,re,ce){if(void 0===ne)ce="utf8",re=this.length,ne=0;else if(void 0===re&&"string"==typeof ne)ce=ne,re=this.length,ne=0;else{if(!isFinite(ne))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ne>>>=0,isFinite(re)?(re>>>=0,void 0===ce&&(ce="utf8")):(ce=re,re=void 0)}var fe=this.length-ne;if((void 0===re||re>fe)&&(re=fe),W.length>0&&(re<0||ne<0)||ne>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var me=!1;;)switch(ce){case"hex":return c(this,W,ne,re);case"utf8":case"utf-8":return E(this,W,ne,re);case"ascii":return M(this,W,ne,re);case"latin1":case"binary":return S(this,W,ne,re);case"base64":return C(this,W,ne,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,W,ne,re);default:if(me)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),me=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.slice=function(W,ne){var re=this.length;(W=~~W)<0?(W+=re)<0&&(W=0):W>re&&(W=re),(ne=void 0===ne?re:~~ne)<0?(ne+=re)<0&&(ne=0):ne>re&&(ne=re),ne<W&&(ne=W);var ce=this.subarray(W,ne);return ce.__proto__=i.prototype,ce},i.prototype.readUIntLE=function(W,ne,re){W>>>=0,ne>>>=0,re||U(W,ne,this.length);for(var ce=this[W],fe=1,me=0;++me<ne&&(fe*=256);)ce+=this[W+me]*fe;return ce},i.prototype.readUIntBE=function(W,ne,re){W>>>=0,ne>>>=0,re||U(W,ne,this.length);for(var ce=this[W+--ne],fe=1;ne>0&&(fe*=256);)ce+=this[W+--ne]*fe;return ce},i.prototype.readUInt8=function(W,ne){return W>>>=0,ne||U(W,1,this.length),this[W]},i.prototype.readUInt16LE=function(W,ne){return W>>>=0,ne||U(W,2,this.length),this[W]|this[W+1]<<8},i.prototype.readUInt16BE=function(W,ne){return W>>>=0,ne||U(W,2,this.length),this[W]<<8|this[W+1]},i.prototype.readUInt32LE=function(W,ne){return W>>>=0,ne||U(W,4,this.length),(this[W]|this[W+1]<<8|this[W+2]<<16)+16777216*this[W+3]},i.prototype.readUInt32BE=function(W,ne){return W>>>=0,ne||U(W,4,this.length),16777216*this[W]+(this[W+1]<<16|this[W+2]<<8|this[W+3])},i.prototype.readIntLE=function(W,ne,re){W>>>=0,ne>>>=0,re||U(W,ne,this.length);for(var ce=this[W],fe=1,me=0;++me<ne&&(fe*=256);)ce+=this[W+me]*fe;return ce>=(fe*=128)&&(ce-=Math.pow(2,8*ne)),ce},i.prototype.readIntBE=function(W,ne,re){W>>>=0,ne>>>=0,re||U(W,ne,this.length);for(var ce=ne,fe=1,me=this[W+--ce];ce>0&&(fe*=256);)me+=this[W+--ce]*fe;return me>=(fe*=128)&&(me-=Math.pow(2,8*ne)),me},i.prototype.readInt8=function(W,ne){return W>>>=0,ne||U(W,1,this.length),128&this[W]?-1*(255-this[W]+1):this[W]},i.prototype.readInt16LE=function(W,ne){W>>>=0,ne||U(W,2,this.length);var re=this[W]|this[W+1]<<8;return 32768&re?4294901760|re:re},i.prototype.readInt16BE=function(W,ne){W>>>=0,ne||U(W,2,this.length);var re=this[W+1]|this[W]<<8;return 32768&re?4294901760|re:re},i.prototype.readInt32LE=function(W,ne){return W>>>=0,ne||U(W,4,this.length),this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24},i.prototype.readInt32BE=function(W,ne){return W>>>=0,ne||U(W,4,this.length),this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]},i.prototype.readFloatLE=function(W,ne){return W>>>=0,ne||U(W,4,this.length),a.read(this,W,!0,23,4)},i.prototype.readFloatBE=function(W,ne){return W>>>=0,ne||U(W,4,this.length),a.read(this,W,!1,23,4)},i.prototype.readDoubleLE=function(W,ne){return W>>>=0,ne||U(W,8,this.length),a.read(this,W,!0,52,8)},i.prototype.readDoubleBE=function(W,ne){return W>>>=0,ne||U(W,8,this.length),a.read(this,W,!1,52,8)},i.prototype.writeUIntLE=function(W,ne,re,ce){W=+W,ne>>>=0,re>>>=0,ce||$(this,W,ne,re,Math.pow(2,8*re)-1,0);var fe=1,me=0;for(this[ne]=255&W;++me<re&&(fe*=256);)this[ne+me]=W/fe&255;return ne+re},i.prototype.writeUIntBE=function(W,ne,re,ce){W=+W,ne>>>=0,re>>>=0,ce||$(this,W,ne,re,Math.pow(2,8*re)-1,0);var fe=re-1,me=1;for(this[ne+fe]=255&W;--fe>=0&&(me*=256);)this[ne+fe]=W/me&255;return ne+re},i.prototype.writeUInt8=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,1,255,0),this[ne]=255&W,ne+1},i.prototype.writeUInt16LE=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,2,65535,0),this[ne]=255&W,this[ne+1]=W>>>8,ne+2},i.prototype.writeUInt16BE=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,2,65535,0),this[ne]=W>>>8,this[ne+1]=255&W,ne+2},i.prototype.writeUInt32LE=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,4,4294967295,0),this[ne+3]=W>>>24,this[ne+2]=W>>>16,this[ne+1]=W>>>8,this[ne]=255&W,ne+4},i.prototype.writeUInt32BE=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,4,4294967295,0),this[ne]=W>>>24,this[ne+1]=W>>>16,this[ne+2]=W>>>8,this[ne+3]=255&W,ne+4},i.prototype.writeIntLE=function(W,ne,re,ce){if(W=+W,ne>>>=0,!ce){var fe=Math.pow(2,8*re-1);$(this,W,ne,re,fe-1,-fe)}var me=0,pe=1,we=0;for(this[ne]=255&W;++me<re&&(pe*=256);)W<0&&0===we&&0!==this[ne+me-1]&&(we=1),this[ne+me]=(W/pe>>0)-we&255;return ne+re},i.prototype.writeIntBE=function(W,ne,re,ce){if(W=+W,ne>>>=0,!ce){var fe=Math.pow(2,8*re-1);$(this,W,ne,re,fe-1,-fe)}var me=re-1,pe=1,we=0;for(this[ne+me]=255&W;--me>=0&&(pe*=256);)W<0&&0===we&&0!==this[ne+me+1]&&(we=1),this[ne+me]=(W/pe>>0)-we&255;return ne+re},i.prototype.writeInt8=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,1,127,-128),W<0&&(W=255+W+1),this[ne]=255&W,ne+1},i.prototype.writeInt16LE=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,2,32767,-32768),this[ne]=255&W,this[ne+1]=W>>>8,ne+2},i.prototype.writeInt16BE=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,2,32767,-32768),this[ne]=W>>>8,this[ne+1]=255&W,ne+2},i.prototype.writeInt32LE=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,4,2147483647,-2147483648),this[ne]=255&W,this[ne+1]=W>>>8,this[ne+2]=W>>>16,this[ne+3]=W>>>24,ne+4},i.prototype.writeInt32BE=function(W,ne,re){return W=+W,ne>>>=0,re||$(this,W,ne,4,2147483647,-2147483648),W<0&&(W=4294967295+W+1),this[ne]=W>>>24,this[ne+1]=W>>>16,this[ne+2]=W>>>8,this[ne+3]=255&W,ne+4},i.prototype.writeFloatLE=function(W,ne,re){return te(this,W,ne,!0,re)},i.prototype.writeFloatBE=function(W,ne,re){return te(this,W,ne,!1,re)},i.prototype.writeDoubleLE=function(W,ne,re){return ae(this,W,ne,!0,re)},i.prototype.writeDoubleBE=function(W,ne,re){return ae(this,W,ne,!1,re)},i.prototype.copy=function(W,ne,re,ce){if(!i.isBuffer(W))throw new TypeError("argument should be a Buffer");if(re||(re=0),ce||0===ce||(ce=this.length),ne>=W.length&&(ne=W.length),ne||(ne=0),ce>0&&ce<re&&(ce=re),ce===re||0===W.length||0===this.length)return 0;if(ne<0)throw new RangeError("targetStart out of bounds");if(re<0||re>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),W.length-ne<ce-re&&(ce=W.length-ne+re);var fe=ce-re;if(this===W&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(ne,re,ce);else if(this===W&&re<ne&&ne<ce)for(var me=fe-1;me>=0;--me)W[me+ne]=this[me+re];else Uint8Array.prototype.set.call(W,this.subarray(re,ce),ne);return fe},i.prototype.fill=function(W,ne,re,ce){if("string"==typeof W){if("string"==typeof ne?(ce=ne,ne=0,re=this.length):"string"==typeof re&&(ce=re,re=this.length),void 0!==ce&&"string"!=typeof ce)throw new TypeError("encoding must be a string");if("string"==typeof ce&&!i.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(1===W.length){var fe=W.charCodeAt(0);("utf8"===ce&&fe<128||"latin1"===ce)&&(W=fe)}}else"number"==typeof W&&(W&=255);if(ne<0||this.length<ne||this.length<re)throw new RangeError("Out of range index");if(re<=ne)return this;var me;if(ne>>>=0,re=void 0===re?this.length:re>>>0,W||(W=0),"number"==typeof W)for(me=ne;me<re;++me)this[me]=W;else{var pe=i.isBuffer(W)?W:i.from(W,ce),we=pe.length;if(0===we)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(me=0;me<re-ne;++me)this[me+ne]=pe[me%we]}return this};var J=/[^+/0-9A-Za-z-_]/g;function ee(W){return W<16?"0"+W.toString(16):W.toString(16)}function se(W,ne){var re;ne=ne||1/0;for(var ce=W.length,fe=null,me=[],pe=0;pe<ce;++pe){if((re=W.charCodeAt(pe))>55295&&re<57344){if(!fe){if(re>56319){(ne-=3)>-1&&me.push(239,191,189);continue}if(pe+1===ce){(ne-=3)>-1&&me.push(239,191,189);continue}fe=re;continue}if(re<56320){(ne-=3)>-1&&me.push(239,191,189),fe=re;continue}re=65536+(fe-55296<<10|re-56320)}else fe&&(ne-=3)>-1&&me.push(239,191,189);if(fe=null,re<128){if((ne-=1)<0)break;me.push(re)}else if(re<2048){if((ne-=2)<0)break;me.push(re>>6|192,63&re|128)}else if(re<65536){if((ne-=3)<0)break;me.push(re>>12|224,re>>6&63|128,63&re|128)}else{if(!(re<1114112))throw new Error("Invalid code point");if((ne-=4)<0)break;me.push(re>>18|240,re>>12&63|128,re>>6&63|128,63&re|128)}}return me}function G(W){return o.toByteArray(function(ne){if((ne=(ne=ne.split("=")[0]).trim().replace(J,"")).length<2)return"";for(;ne.length%4!=0;)ne+="=";return ne}(W))}function H(W,ne,re,ce){for(var fe=0;fe<ce&&!(fe+re>=ne.length||fe>=W.length);++fe)ne[fe+re]=W[fe];return fe}function Y(W,ne){return W instanceof ne||null!=W&&null!=W.constructor&&null!=W.constructor.name&&W.constructor.name===ne.name}function oe(W){return W!=W}}).call(this)}).call(this,b("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(b,T,_){_.read=function(e,o,a,l,i){var v,h,s=8*i-l-1,d=(1<<s)-1,p=d>>1,f=-7,g=a?i-1:0,m=a?-1:1,u=e[o+g];for(g+=m,v=u&(1<<-f)-1,u>>=-f,f+=s;f>0;v=256*v+e[o+g],g+=m,f-=8);for(h=v&(1<<-f)-1,v>>=-f,f+=l;f>0;h=256*h+e[o+g],g+=m,f-=8);if(0===v)v=1-p;else{if(v===d)return h?NaN:1/0*(u?-1:1);h+=Math.pow(2,l),v-=p}return(u?-1:1)*h*Math.pow(2,v-l)},_.write=function(e,o,a,l,i,v){var h,s,d,p=8*v-i-1,f=(1<<p)-1,g=f>>1,m=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,u=l?0:v-1,w=l?1:-1,c=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,h=f):(h=Math.floor(Math.log(o)/Math.LN2),o*(d=Math.pow(2,-h))<1&&(h--,d*=2),(o+=h+g>=1?m/d:m*Math.pow(2,1-g))*d>=2&&(h++,d/=2),h+g>=f?(s=0,h=f):h+g>=1?(s=(o*d-1)*Math.pow(2,i),h+=g):(s=o*Math.pow(2,g-1)*Math.pow(2,i),h=0));i>=8;e[a+u]=255&s,u+=w,s/=256,i-=8);for(h=h<<i|s,p+=i;p>0;e[a+u]=255&h,u+=w,h/=256,p-=8);e[a+u-w]|=128*c}},{}],5:[function(b,T,_){var e,o,a=T.exports={};function l(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function v(w){if(e===setTimeout)return setTimeout(w,0);if((e===l||!e)&&setTimeout)return e=setTimeout,setTimeout(w,0);try{return e(w,0)}catch(c){try{return e.call(null,w,0)}catch(E){return e.call(this,w,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:l}catch(w){e=l}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(w){o=i}}();var h,s=[],d=!1,p=-1;function f(){d&&h&&(d=!1,h.length?s=h.concat(s):p=-1,s.length&&g())}function g(){if(!d){var w=v(f);d=!0;for(var c=s.length;c;){for(h=s,s=[];++p<c;)h&&h[p].run();p=-1,c=s.length}h=null,d=!1,function(E){if(o===clearTimeout)return clearTimeout(E);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(E);try{o(E)}catch(M){try{return o.call(null,E)}catch(S){return o.call(this,E)}}}(w)}}function m(w,c){this.fun=w,this.array=c}function u(){}a.nextTick=function(w){var c=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)c[E-1]=arguments[E];s.push(new m(w,c)),1!==s.length||d||v(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=u,a.addListener=u,a.once=u,a.off=u,a.removeListener=u,a.removeAllListeners=u,a.emit=u,a.prependListener=u,a.prependOnceListener=u,a.listeners=function(w){return[]},a.binding=function(w){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(w){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],6:[function(b,T,_){T.exports={alpha_shape:b("alpha-shape"),convex_hull:b("convex-hull"),delaunay_triangulate:b("delaunay-triangulate"),gl_cone3d:b("gl-cone3d"),gl_error3d:b("gl-error3d"),gl_heatmap2d:b("gl-heatmap2d"),gl_line3d:b("gl-line3d"),gl_mesh3d:b("gl-mesh3d"),gl_plot2d:b("gl-plot2d"),gl_plot3d:b("gl-plot3d"),gl_pointcloud2d:b("gl-pointcloud2d"),gl_scatter3d:b("gl-scatter3d"),gl_select_box:b("gl-select-box"),gl_spikes2d:b("gl-spikes2d"),gl_streamtube3d:b("gl-streamtube3d"),gl_surface3d:b("gl-surface3d"),ndarray:b("ndarray"),ndarray_linear_interpolate:b("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(b,T,_){"use strict";T.exports=function(v){var h=(v=v||{}).eye||[0,0,1],s=v.center||[0,0,0],d=v.up||[0,1,0],p=v.distanceLimits||[0,1/0],f=v.mode||"turntable",g=e(),m=o(),u=a();return g.setDistanceLimits(p[0],p[1]),g.lookAt(0,h,s,d),m.setDistanceLimits(p[0],p[1]),m.lookAt(0,h,s,d),u.setDistanceLimits(p[0],p[1]),u.lookAt(0,h,s,d),new l({turntable:g,orbit:m,matrix:u},f)};var e=b("turntable-camera-controller"),o=b("orbit-camera-controller"),a=b("matrix-camera-controller");function l(v,h){this._controllerNames=Object.keys(v),this._controllerList=this._controllerNames.map(function(s){return v[s]}),this._mode=h,this._active=v[h],this._active||(this._mode="turntable",this._active=v.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var i=l.prototype;i.flush=function(v){for(var h=this._controllerList,s=0;s<h.length;++s)h[s].flush(v)},i.idle=function(v){for(var h=this._controllerList,s=0;s<h.length;++s)h[s].idle(v)},i.lookAt=function(v,h,s,d){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].lookAt(v,h,s,d)},i.rotate=function(v,h,s,d){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].rotate(v,h,s,d)},i.pan=function(v,h,s,d){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].pan(v,h,s,d)},i.translate=function(v,h,s,d){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].translate(v,h,s,d)},i.setMatrix=function(v,h){for(var s=this._controllerList,d=0;d<s.length;++d)s[d].setMatrix(v,h)},i.setDistanceLimits=function(v,h){for(var s=this._controllerList,d=0;d<s.length;++d)s[d].setDistanceLimits(v,h)},i.setDistance=function(v,h){for(var s=this._controllerList,d=0;d<s.length;++d)s[d].setDistance(v,h)},i.recalcMatrix=function(v){this._active.recalcMatrix(v)},i.getDistance=function(v){return this._active.getDistance(v)},i.getDistanceLimits=function(v){return this._active.getDistanceLimits(v)},i.lastT=function(){return this._active.lastT()},i.setMode=function(v){if(v!==this._mode){var h=this._controllerNames.indexOf(v);if(!(h<0)){var s=this._active,d=this._controllerList[h],p=Math.max(s.lastT(),d.lastT());s.recalcMatrix(p),d.setMatrix(p,s.computedMatrix),this._active=d,this._mode=v,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(b,T,_){"use strict";var e="undefined"==typeof WeakMap?b("weak-map"):WeakMap,o=b("gl-buffer"),a=b("gl-vao"),l=new e;T.exports=function(i){var v=l.get(i),h=v&&(v._triangleBuffer.handle||v._triangleBuffer.buffer);if(!h||!i.isBuffer(h)){var s=o(i,new Float32Array([-1,-1,-1,4,4,-1]));(v=a(i,[{buffer:s,type:i.FLOAT,size:2}]))._triangleBuffer=s,l.set(i,v)}v.bind(),i.drawArrays(i.TRIANGLES,0,3),v.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(b,T,_){var e=b("pad-left");T.exports=function(o,a,l){a="number"==typeof a?a:1,l=l||": ";var i=o.split(/\r?\n/),v=String(i.length+a-1).length;return i.map(function(h,s){var d=s+a,p=String(d).length;return e(d,v-p)+l+h}).join("\n")}},{"pad-left":264}],10:[function(b,T,_){"use strict";T.exports=function(a){var l=a.length;if(0===l)return[];if(1===l)return[0];for(var i=a[0].length,v=[a[0]],h=[0],s=1;s<l;++s)if(v.push(a[s]),o(v,i)){if(h.push(s),h.length===i+1)return h}else v.pop();return h};var e=b("robust-orientation");function o(a,l){for(var i=new Array(l+1),v=0;v<a.length;++v)i[v]=a[v];for(v=0;v<=a.length;++v){for(var h=a.length;h<=l;++h){for(var s=new Array(l),d=0;d<l;++d)s[d]=Math.pow(h+1-v,d);i[h]=s}if(e.apply(void 0,i))return!0}return!1}},{"robust-orientation":284}],11:[function(b,T,_){"use strict";T.exports=function(a,l){return e(l).filter(function(i){for(var v=new Array(i.length),h=0;h<i.length;++h)v[h]=l[i[h]];return o(v)*a<1})};var e=b("delaunay-triangulate"),o=b("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(b,T,_){T.exports=function(a,l){return o(e(a,l))};var e=b("alpha-complex"),o=b("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(b,T,_){T.exports=function(e){return atob(e)}},{}],14:[function(b,T,_){"use strict";T.exports=function(a,l){for(var i=l.length,v=new Array(i+1),h=0;h<i;++h){for(var s=new Array(i+1),d=0;d<=i;++d)s[d]=a[d][h];v[h]=s}for(v[i]=new Array(i+1),h=0;h<=i;++h)v[i][h]=1;var p=new Array(i+1);for(h=0;h<i;++h)p[h]=l[h];p[i]=1;var f=e(v,p),g=o(f[i+1]);0===g&&(g=1);var m=new Array(i+1);for(h=0;h<=i;++h)m[h]=o(f[h])/g;return m};var e=b("robust-linear-solve");function o(a){for(var l=0,i=0;i<a.length;++i)l+=a[i];return l}},{"robust-linear-solve":283}],15:[function(b,T,_){"use strict";var e=b("./lib/rationalize");T.exports=function(o,a){return e(o[0].mul(a[1]).add(a[0].mul(o[1])),o[1].mul(a[1]))}},{"./lib/rationalize":25}],16:[function(b,T,_){"use strict";T.exports=function(e,o){return e[0].mul(o[1]).cmp(o[0].mul(e[1]))}},{}],17:[function(b,T,_){"use strict";var e=b("./lib/rationalize");T.exports=function(o,a){return e(o[0].mul(a[1]),o[1].mul(a[0]))}},{"./lib/rationalize":25}],18:[function(b,T,_){"use strict";var e=b("./is-rat"),o=b("./lib/is-bn"),a=b("./lib/num-to-bn"),l=b("./lib/str-to-bn"),i=b("./lib/rationalize"),v=b("./div");T.exports=function h(s,d){if(e(s))return d?v(s,h(d)):[s[0].clone(),s[1].clone()];var p,f,g=0;if(o(s))p=s.clone();else if("string"==typeof s)p=l(s);else{if(0===s)return[a(0),a(1)];if(s===Math.floor(s))p=a(s);else{for(;s!==Math.floor(s);)s*=Math.pow(2,256),g-=256;p=a(s)}}if(e(d))p.mul(d[1]),f=d[0].clone();else if(o(d))f=d.clone();else if("string"==typeof d)f=l(d);else if(d)if(d===Math.floor(d))f=a(d);else{for(;d!==Math.floor(d);)d*=Math.pow(2,256),g+=256;f=a(d)}else f=a(1);return g>0?p=p.ushln(g):g<0&&(f=f.ushln(-g)),i(p,f)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(b,T,_){"use strict";var e=b("./lib/is-bn");T.exports=function(o){return Array.isArray(o)&&2===o.length&&e(o[0])&&e(o[1])}},{"./lib/is-bn":23}],20:[function(b,T,_){"use strict";var e=b("bn.js");T.exports=function(o){return o.cmp(new e(0))}},{"bn.js":33}],21:[function(b,T,_){"use strict";var e=b("./bn-sign");T.exports=function(o){var a=o.length,l=o.words,i=0;if(1===a)i=l[0];else if(2===a)i=l[0]+67108864*l[1];else for(var v=0;v<a;v++)i+=l[v]*Math.pow(67108864,v);return e(o)*i}},{"./bn-sign":20}],22:[function(b,T,_){"use strict";var e=b("double-bits"),o=b("bit-twiddle").countTrailingZeros;T.exports=function(a){var l=o(e.lo(a));if(l<32)return l;var i=o(e.hi(a));return i>20?52:i+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(b,T,_){"use strict";b("bn.js"),T.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(b,T,_){"use strict";var e=b("bn.js"),o=b("double-bits");T.exports=function(a){var l=o.exponent(a);return l<52?new e(a):new e(a*Math.pow(2,52-l)).ushln(l-52)}},{"bn.js":33,"double-bits":64}],25:[function(b,T,_){"use strict";var e=b("./num-to-bn"),o=b("./bn-sign");T.exports=function(a,l){var i=o(a),v=o(l);if(0===i)return[e(0),e(1)];if(0===v)return[e(0),e(0)];v<0&&(a=a.neg(),l=l.neg());var h=a.gcd(l);return h.cmpn(1)?[a.div(h),l.div(h)]:[a,l]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(b,T,_){"use strict";var e=b("bn.js");T.exports=function(o){return new e(o)}},{"bn.js":33}],27:[function(b,T,_){"use strict";var e=b("./lib/rationalize");T.exports=function(o,a){return e(o[0].mul(a[0]),o[1].mul(a[1]))}},{"./lib/rationalize":25}],28:[function(b,T,_){"use strict";var e=b("./lib/bn-sign");T.exports=function(o){return e(o[0])*e(o[1])}},{"./lib/bn-sign":20}],29:[function(b,T,_){"use strict";var e=b("./lib/rationalize");T.exports=function(o,a){return e(o[0].mul(a[1]).sub(o[1].mul(a[0])),o[1].mul(a[1]))}},{"./lib/rationalize":25}],30:[function(b,T,_){"use strict";var e=b("./lib/bn-to-num"),o=b("./lib/ctz");T.exports=function(a){var l=a[0],i=a[1];if(0===l.cmpn(0))return 0;var v=l.abs().divmod(i.abs()),s=e(v.div),d=v.mod,p=l.negative!==i.negative?-1:1;if(0===d.cmpn(0))return p*s;if(s){var f=o(s)+4,g=e(d.ushln(f).divRound(i));return p*(s+g*Math.pow(2,-f))}var m=i.bitLength()-d.bitLength()+53;return g=e(d.ushln(m).divRound(i)),m<1023?p*g*Math.pow(2,-m):p*(g*=Math.pow(2,-1023))*Math.pow(2,1023-m)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(b,T,_){"use strict";function e(h,s,d,p,f){for(var g=f+1;p<=f;){var m=p+f>>>1,u=h[m];(void 0!==d?d(u,s):u-s)>=0?(g=m,f=m-1):p=m+1}return g}function o(h,s,d,p,f){for(var g=f+1;p<=f;){var m=p+f>>>1,u=h[m];(void 0!==d?d(u,s):u-s)>0?(g=m,f=m-1):p=m+1}return g}function a(h,s,d,p,f){for(var g=p-1;p<=f;){var m=p+f>>>1,u=h[m];(void 0!==d?d(u,s):u-s)<0?(g=m,p=m+1):f=m-1}return g}function l(h,s,d,p,f){for(var g=p-1;p<=f;){var m=p+f>>>1,u=h[m];(void 0!==d?d(u,s):u-s)<=0?(g=m,p=m+1):f=m-1}return g}function i(h,s,d,p,f){for(;p<=f;){var g=p+f>>>1,m=h[g],u=void 0!==d?d(m,s):m-s;if(0===u)return g;u<=0?p=g+1:f=g-1}return-1}function v(h,s,d,p,f,g){return"function"==typeof d?g(h,s,d,void 0===p?0:0|p,void 0===f?h.length-1:0|f):g(h,s,void 0,void 0===d?0:0|d,void 0===p?h.length-1:0|p)}T.exports={ge:function(h,s,d,p,f){return v(h,s,d,p,f,e)},gt:function(h,s,d,p,f){return v(h,s,d,p,f,o)},lt:function(h,s,d,p,f){return v(h,s,d,p,f,a)},le:function(h,s,d,p,f){return v(h,s,d,p,f,l)},eq:function(h,s,d,p,f){return v(h,s,d,p,f,i)}}},{}],32:[function(b,T,_){"use strict";function e(a){var l=32;return(a&=-a)&&l--,65535&a&&(l-=16),16711935&a&&(l-=8),252645135&a&&(l-=4),858993459&a&&(l-=2),1431655765&a&&(l-=1),l}_.INT_BITS=32,_.INT_MAX=2147483647,_.INT_MIN=-1<<31,_.sign=function(a){return(a>0)-(a<0)},_.abs=function(a){var l=a>>31;return(a^l)-l},_.min=function(a,l){return l^(a^l)&-(a<l)},_.max=function(a,l){return a^(a^l)&-(a<l)},_.isPow2=function(a){return!(a&a-1||!a)},_.log2=function(a){var l,i;return l=(a>65535)<<4,l|=i=((a>>>=l)>255)<<3,l|=i=((a>>>=i)>15)<<2,(l|=i=((a>>>=i)>3)<<1)|(a>>>=i)>>1},_.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},_.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},_.countTrailingZeros=e,_.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},_.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},_.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var o=new Array(256);(function(a){for(var l=0;l<256;++l){var i=l,v=l,h=7;for(i>>>=1;i;i>>>=1)v<<=1,v|=1&i,--h;a[l]=v<<h&255}})(o),_.reverse=function(a){return o[255&a]<<24|o[a>>>8&255]<<16|o[a>>>16&255]<<8|o[a>>>24&255]},_.interleave2=function(a,l){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},_.deinterleave2=function(a,l){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>l&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},_.interleave3=function(a,l,i){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},_.deinterleave3=function(a,l){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>l&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},_.nextCombination=function(a){var l=a|a-1;return l+1|(~l&-~l)-1>>>e(a)+1}},{}],33:[function(b,T,_){!function(e,o){"use strict";function a(L,P){if(!L)throw new Error(P||"Assertion failed")}function l(L,P){L.super_=P;var j=function(){};j.prototype=P.prototype,L.prototype=new j,L.prototype.constructor=L}function i(L,P,j){if(i.isBN(L))return L;this.negative=0,this.words=null,this.length=0,this.red=null,null!==L&&("le"!==P&&"be"!==P||(j=P,P=10),this._init(L||0,P||10,j||"be"))}var v;"object"==typeof e?e.exports=i:o.BN=i,i.BN=i,i.wordSize=26;try{v="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:b("buffer").Buffer}catch(L){}function h(L,P){var j=L.charCodeAt(P);return j>=65&&j<=70?j-55:j>=97&&j<=102?j-87:j-48&15}function s(L,P,j){var U=h(L,j);return j-1>=P&&(U|=h(L,j-1)<<4),U}function d(L,P,j,U){for(var $=0,X=Math.min(L.length,j),te=P;te<X;te++){var ae=L.charCodeAt(te)-48;$*=U,$+=ae>=49?ae-49+10:ae>=17?ae-17+10:ae}return $}i.isBN=function(L){return L instanceof i||null!==L&&"object"==typeof L&&L.constructor.wordSize===i.wordSize&&Array.isArray(L.words)},i.max=function(L,P){return L.cmp(P)>0?L:P},i.min=function(L,P){return L.cmp(P)<0?L:P},i.prototype._init=function(L,P,j){if("number"==typeof L)return this._initNumber(L,P,j);if("object"==typeof L)return this._initArray(L,P,j);"hex"===P&&(P=16),a(P===(0|P)&&P>=2&&P<=36);var U=0;"-"===(L=L.toString().replace(/\s+/g,""))[0]&&(U++,this.negative=1),U<L.length&&(16===P?this._parseHex(L,U,j):(this._parseBase(L,P,U),"le"===j&&this._initArray(this.toArray(),P,j)))},i.prototype._initNumber=function(L,P,j){L<0&&(this.negative=1,L=-L),L<67108864?(this.words=[67108863&L],this.length=1):L<4503599627370496?(this.words=[67108863&L,L/67108864&67108863],this.length=2):(a(L<9007199254740992),this.words=[67108863&L,L/67108864&67108863,1],this.length=3),"le"===j&&this._initArray(this.toArray(),P,j)},i.prototype._initArray=function(L,P,j){if(a("number"==typeof L.length),L.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(L.length/3),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var $,X,te=0;if("be"===j)for(U=L.length-1,$=0;U>=0;U-=3)this.words[$]|=(X=L[U]|L[U-1]<<8|L[U-2]<<16)<<te&67108863,this.words[$+1]=X>>>26-te&67108863,(te+=24)>=26&&(te-=26,$++);else if("le"===j)for(U=0,$=0;U<L.length;U+=3)this.words[$]|=(X=L[U]|L[U+1]<<8|L[U+2]<<16)<<te&67108863,this.words[$+1]=X>>>26-te&67108863,(te+=24)>=26&&(te-=26,$++);return this.strip()},i.prototype._parseHex=function(L,P,j){this.length=Math.ceil((L.length-P)/6),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var $,X=0,te=0;if("be"===j)for(U=L.length-1;U>=P;U-=2)$=s(L,P,U)<<X,this.words[te]|=67108863&$,X>=18?(X-=18,this.words[te+=1]|=$>>>26):X+=8;else for(U=(L.length-P)%2==0?P+1:P;U<L.length;U+=2)$=s(L,P,U)<<X,this.words[te]|=67108863&$,X>=18?(X-=18,this.words[te+=1]|=$>>>26):X+=8;this.strip()},i.prototype._parseBase=function(L,P,j){this.words=[0],this.length=1;for(var U=0,$=1;$<=67108863;$*=P)U++;U--,$=$/P|0;for(var X=L.length-j,te=X%U,ae=Math.min(X,X-te)+j,J=0,ee=j;ee<ae;ee+=U)J=d(L,ee,ee+U,P),this.imuln($),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J);if(0!==te){var se=1;for(J=d(L,ee,L.length,P),ee=0;ee<te;ee++)se*=P;this.imuln(se),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J)}this.strip()},i.prototype.copy=function(L){L.words=new Array(this.length);for(var P=0;P<this.length;P++)L.words[P]=this.words[P];L.length=this.length,L.negative=this.negative,L.red=this.red},i.prototype.clone=function(){var L=new i(null);return this.copy(L),L},i.prototype._expand=function(L){for(;this.length<L;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(L,P,j){j.negative=P.negative^L.negative;var U=L.length+P.length|0;j.length=U,U=U-1|0;var $=0|L.words[0],X=0|P.words[0],te=$*X,J=te/67108864|0;j.words[0]=67108863&te;for(var ee=1;ee<U;ee++){for(var se=J>>>26,G=67108863&J,H=Math.min(ee,P.length-1),Y=Math.max(0,ee-L.length+1);Y<=H;Y++)se+=(te=($=0|L.words[ee-Y|0])*(X=0|P.words[Y])+G)/67108864|0,G=67108863&te;j.words[ee]=0|G,J=0|se}return 0!==J?j.words[ee]=0|J:j.length--,j.strip()}i.prototype.toString=function(L,P){var j;if(P=0|P||1,16===(L=L||10)||"hex"===L){j="";for(var U=0,$=0,X=0;X<this.length;X++){var te=this.words[X],ae=(16777215&(te<<U|$)).toString(16);j=0!=($=te>>>24-U&16777215)||X!==this.length-1?p[6-ae.length]+ae+j:ae+j,(U+=2)>=26&&(U-=26,X--)}for(0!==$&&(j=$.toString(16)+j);j.length%P!=0;)j="0"+j;return 0!==this.negative&&(j="-"+j),j}if(L===(0|L)&&L>=2&&L<=36){var J=f[L],ee=g[L];j="";var se=this.clone();for(se.negative=0;!se.isZero();){var G=se.modn(ee).toString(L);j=(se=se.idivn(ee)).isZero()?G+j:p[J-G.length]+G+j}for(this.isZero()&&(j="0"+j);j.length%P!=0;)j="0"+j;return 0!==this.negative&&(j="-"+j),j}a(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var L=this.words[0];return 2===this.length?L+=67108864*this.words[1]:3===this.length&&1===this.words[2]?L+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-L:L},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(L,P){return a(void 0!==v),this.toArrayLike(v,L,P)},i.prototype.toArray=function(L,P){return this.toArrayLike(Array,L,P)},i.prototype.toArrayLike=function(L,P,j){var U=this.byteLength(),$=j||Math.max(1,U);a(U<=$,"byte array longer than desired length"),a($>0,"Requested array length <= 0"),this.strip();var X,te,ae="le"===P,J=new L($),ee=this.clone();if(ae){for(te=0;!ee.isZero();te++)X=ee.andln(255),ee.iushrn(8),J[te]=X;for(;te<$;te++)J[te]=0}else{for(te=0;te<$-U;te++)J[te]=0;for(te=0;!ee.isZero();te++)X=ee.andln(255),ee.iushrn(8),J[$-te-1]=X}return J},i.prototype._countBits=Math.clz32?function(L){return 32-Math.clz32(L)}:function(L){var P=L,j=0;return P>=4096&&(j+=13,P>>>=13),P>=64&&(j+=7,P>>>=7),P>=8&&(j+=4,P>>>=4),P>=2&&(j+=2,P>>>=2),j+P},i.prototype._zeroBits=function(L){if(0===L)return 26;var P=L,j=0;return 0==(8191&P)&&(j+=13,P>>>=13),0==(127&P)&&(j+=7,P>>>=7),0==(15&P)&&(j+=4,P>>>=4),0==(3&P)&&(j+=2,P>>>=2),0==(1&P)&&j++,j},i.prototype.bitLength=function(){var P=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+P},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var L=0,P=0;P<this.length;P++){var j=this._zeroBits(this.words[P]);if(L+=j,26!==j)break}return L},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(L){return 0!==this.negative?this.abs().inotn(L).iaddn(1):this.clone()},i.prototype.fromTwos=function(L){return this.testn(L-1)?this.notn(L).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(L){for(;this.length<L.length;)this.words[this.length++]=0;for(var P=0;P<L.length;P++)this.words[P]=this.words[P]|L.words[P];return this.strip()},i.prototype.ior=function(L){return a(0==(this.negative|L.negative)),this.iuor(L)},i.prototype.or=function(L){return this.length>L.length?this.clone().ior(L):L.clone().ior(this)},i.prototype.uor=function(L){return this.length>L.length?this.clone().iuor(L):L.clone().iuor(this)},i.prototype.iuand=function(L){var P;P=this.length>L.length?L:this;for(var j=0;j<P.length;j++)this.words[j]=this.words[j]&L.words[j];return this.length=P.length,this.strip()},i.prototype.iand=function(L){return a(0==(this.negative|L.negative)),this.iuand(L)},i.prototype.and=function(L){return this.length>L.length?this.clone().iand(L):L.clone().iand(this)},i.prototype.uand=function(L){return this.length>L.length?this.clone().iuand(L):L.clone().iuand(this)},i.prototype.iuxor=function(L){var P,j;this.length>L.length?(P=this,j=L):(P=L,j=this);for(var U=0;U<j.length;U++)this.words[U]=P.words[U]^j.words[U];if(this!==P)for(;U<P.length;U++)this.words[U]=P.words[U];return this.length=P.length,this.strip()},i.prototype.ixor=function(L){return a(0==(this.negative|L.negative)),this.iuxor(L)},i.prototype.xor=function(L){return this.length>L.length?this.clone().ixor(L):L.clone().ixor(this)},i.prototype.uxor=function(L){return this.length>L.length?this.clone().iuxor(L):L.clone().iuxor(this)},i.prototype.inotn=function(L){a("number"==typeof L&&L>=0);var P=0|Math.ceil(L/26),j=L%26;this._expand(P),j>0&&P--;for(var U=0;U<P;U++)this.words[U]=67108863&~this.words[U];return j>0&&(this.words[U]=~this.words[U]&67108863>>26-j),this.strip()},i.prototype.notn=function(L){return this.clone().inotn(L)},i.prototype.setn=function(L,P){a("number"==typeof L&&L>=0);var j=L/26|0,U=L%26;return this._expand(j+1),this.words[j]=P?this.words[j]|1<<U:this.words[j]&~(1<<U),this.strip()},i.prototype.iadd=function(L){var P,j,U;if(0!==this.negative&&0===L.negative)return this.negative=0,P=this.isub(L),this.negative^=1,this._normSign();if(0===this.negative&&0!==L.negative)return L.negative=0,P=this.isub(L),L.negative=1,P._normSign();this.length>L.length?(j=this,U=L):(j=L,U=this);for(var $=0,X=0;X<U.length;X++)this.words[X]=67108863&(P=(0|j.words[X])+(0|U.words[X])+$),$=P>>>26;for(;0!==$&&X<j.length;X++)this.words[X]=67108863&(P=(0|j.words[X])+$),$=P>>>26;if(this.length=j.length,0!==$)this.words[this.length]=$,this.length++;else if(j!==this)for(;X<j.length;X++)this.words[X]=j.words[X];return this},i.prototype.add=function(L){var P;return 0!==L.negative&&0===this.negative?(L.negative=0,P=this.sub(L),L.negative^=1,P):0===L.negative&&0!==this.negative?(this.negative=0,P=L.sub(this),this.negative=1,P):this.length>L.length?this.clone().iadd(L):L.clone().iadd(this)},i.prototype.isub=function(L){if(0!==L.negative){L.negative=0;var P=this.iadd(L);return L.negative=1,P._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(L),this.negative=1,this._normSign();var j,U,$=this.cmp(L);if(0===$)return this.negative=0,this.length=1,this.words[0]=0,this;$>0?(j=this,U=L):(j=L,U=this);for(var X=0,te=0;te<U.length;te++)X=(P=(0|j.words[te])-(0|U.words[te])+X)>>26,this.words[te]=67108863&P;for(;0!==X&&te<j.length;te++)X=(P=(0|j.words[te])+X)>>26,this.words[te]=67108863&P;if(0===X&&te<j.length&&j!==this)for(;te<j.length;te++)this.words[te]=j.words[te];return this.length=Math.max(this.length,te),j!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(L){return this.clone().isub(L)};var u=function(L,P,j){var U,$,X,te=L.words,ae=P.words,J=j.words,ee=0,se=0|te[0],G=8191&se,H=se>>>13,Y=0|te[1],oe=8191&Y,W=Y>>>13,ne=0|te[2],re=8191&ne,ce=ne>>>13,fe=0|te[3],me=8191&fe,pe=fe>>>13,we=0|te[4],ye=8191&we,Te=we>>>13,Le=0|te[5],Oe=8191&Le,Re=Le>>>13,Ve=0|te[6],_e=8191&Ve,Ae=Ve>>>13,Fe=0|te[7],Pe=8191&Fe,Be=Fe>>>13,qe=0|te[8],We=8191&qe,Je=qe>>>13,ut=0|te[9],Ge=8191&ut,Ke=ut>>>13,nt=0|ae[0],it=8191&nt,ht=nt>>>13,Tt=0|ae[1],Ct=8191&Tt,Vt=Tt>>>13,Ft=0|ae[2],gt=8191&Ft,ft=Ft>>>13,Bt=0|ae[3],rn=8191&Bt,un=Bt>>>13,pn=0|ae[4],dn=8191&pn,Mn=pn>>>13,ln=0|ae[5],Ee=8191&ln,De=ln>>>13,Ie=0|ae[6],He=8191&Ie,Ye=Ie>>>13,tt=0|ae[7],ot=8191&tt,st=tt>>>13,bt=0|ae[8],wt=8191&bt,Ut=bt>>>13,Kt=0|ae[9],vt=8191&Kt,Et=Kt>>>13;j.negative=L.negative^P.negative,j.length=19;var $t=(ee+(U=Math.imul(G,it))|0)+((8191&($=($=Math.imul(G,ht))+Math.imul(H,it)|0))<<13)|0;ee=((X=Math.imul(H,ht))+($>>>13)|0)+($t>>>26)|0,$t&=67108863,U=Math.imul(oe,it),$=($=Math.imul(oe,ht))+Math.imul(W,it)|0,X=Math.imul(W,ht);var Dt=(ee+(U=U+Math.imul(G,Ct)|0)|0)+((8191&($=($=$+Math.imul(G,Vt)|0)+Math.imul(H,Ct)|0))<<13)|0;ee=((X=X+Math.imul(H,Vt)|0)+($>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,U=Math.imul(re,it),$=($=Math.imul(re,ht))+Math.imul(ce,it)|0,X=Math.imul(ce,ht),U=U+Math.imul(oe,Ct)|0,$=($=$+Math.imul(oe,Vt)|0)+Math.imul(W,Ct)|0,X=X+Math.imul(W,Vt)|0;var Pt=(ee+(U=U+Math.imul(G,gt)|0)|0)+((8191&($=($=$+Math.imul(G,ft)|0)+Math.imul(H,gt)|0))<<13)|0;ee=((X=X+Math.imul(H,ft)|0)+($>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,U=Math.imul(me,it),$=($=Math.imul(me,ht))+Math.imul(pe,it)|0,X=Math.imul(pe,ht),U=U+Math.imul(re,Ct)|0,$=($=$+Math.imul(re,Vt)|0)+Math.imul(ce,Ct)|0,X=X+Math.imul(ce,Vt)|0,U=U+Math.imul(oe,gt)|0,$=($=$+Math.imul(oe,ft)|0)+Math.imul(W,gt)|0,X=X+Math.imul(W,ft)|0;var je=(ee+(U=U+Math.imul(G,rn)|0)|0)+((8191&($=($=$+Math.imul(G,un)|0)+Math.imul(H,rn)|0))<<13)|0;ee=((X=X+Math.imul(H,un)|0)+($>>>13)|0)+(je>>>26)|0,je&=67108863,U=Math.imul(ye,it),$=($=Math.imul(ye,ht))+Math.imul(Te,it)|0,X=Math.imul(Te,ht),U=U+Math.imul(me,Ct)|0,$=($=$+Math.imul(me,Vt)|0)+Math.imul(pe,Ct)|0,X=X+Math.imul(pe,Vt)|0,U=U+Math.imul(re,gt)|0,$=($=$+Math.imul(re,ft)|0)+Math.imul(ce,gt)|0,X=X+Math.imul(ce,ft)|0,U=U+Math.imul(oe,rn)|0,$=($=$+Math.imul(oe,un)|0)+Math.imul(W,rn)|0,X=X+Math.imul(W,un)|0;var rt=(ee+(U=U+Math.imul(G,dn)|0)|0)+((8191&($=($=$+Math.imul(G,Mn)|0)+Math.imul(H,dn)|0))<<13)|0;ee=((X=X+Math.imul(H,Mn)|0)+($>>>13)|0)+(rt>>>26)|0,rt&=67108863,U=Math.imul(Oe,it),$=($=Math.imul(Oe,ht))+Math.imul(Re,it)|0,X=Math.imul(Re,ht),U=U+Math.imul(ye,Ct)|0,$=($=$+Math.imul(ye,Vt)|0)+Math.imul(Te,Ct)|0,X=X+Math.imul(Te,Vt)|0,U=U+Math.imul(me,gt)|0,$=($=$+Math.imul(me,ft)|0)+Math.imul(pe,gt)|0,X=X+Math.imul(pe,ft)|0,U=U+Math.imul(re,rn)|0,$=($=$+Math.imul(re,un)|0)+Math.imul(ce,rn)|0,X=X+Math.imul(ce,un)|0,U=U+Math.imul(oe,dn)|0,$=($=$+Math.imul(oe,Mn)|0)+Math.imul(W,dn)|0,X=X+Math.imul(W,Mn)|0;var pt=(ee+(U=U+Math.imul(G,Ee)|0)|0)+((8191&($=($=$+Math.imul(G,De)|0)+Math.imul(H,Ee)|0))<<13)|0;ee=((X=X+Math.imul(H,De)|0)+($>>>13)|0)+(pt>>>26)|0,pt&=67108863,U=Math.imul(_e,it),$=($=Math.imul(_e,ht))+Math.imul(Ae,it)|0,X=Math.imul(Ae,ht),U=U+Math.imul(Oe,Ct)|0,$=($=$+Math.imul(Oe,Vt)|0)+Math.imul(Re,Ct)|0,X=X+Math.imul(Re,Vt)|0,U=U+Math.imul(ye,gt)|0,$=($=$+Math.imul(ye,ft)|0)+Math.imul(Te,gt)|0,X=X+Math.imul(Te,ft)|0,U=U+Math.imul(me,rn)|0,$=($=$+Math.imul(me,un)|0)+Math.imul(pe,rn)|0,X=X+Math.imul(pe,un)|0,U=U+Math.imul(re,dn)|0,$=($=$+Math.imul(re,Mn)|0)+Math.imul(ce,dn)|0,X=X+Math.imul(ce,Mn)|0,U=U+Math.imul(oe,Ee)|0,$=($=$+Math.imul(oe,De)|0)+Math.imul(W,Ee)|0,X=X+Math.imul(W,De)|0;var It=(ee+(U=U+Math.imul(G,He)|0)|0)+((8191&($=($=$+Math.imul(G,Ye)|0)+Math.imul(H,He)|0))<<13)|0;ee=((X=X+Math.imul(H,Ye)|0)+($>>>13)|0)+(It>>>26)|0,It&=67108863,U=Math.imul(Pe,it),$=($=Math.imul(Pe,ht))+Math.imul(Be,it)|0,X=Math.imul(Be,ht),U=U+Math.imul(_e,Ct)|0,$=($=$+Math.imul(_e,Vt)|0)+Math.imul(Ae,Ct)|0,X=X+Math.imul(Ae,Vt)|0,U=U+Math.imul(Oe,gt)|0,$=($=$+Math.imul(Oe,ft)|0)+Math.imul(Re,gt)|0,X=X+Math.imul(Re,ft)|0,U=U+Math.imul(ye,rn)|0,$=($=$+Math.imul(ye,un)|0)+Math.imul(Te,rn)|0,X=X+Math.imul(Te,un)|0,U=U+Math.imul(me,dn)|0,$=($=$+Math.imul(me,Mn)|0)+Math.imul(pe,dn)|0,X=X+Math.imul(pe,Mn)|0,U=U+Math.imul(re,Ee)|0,$=($=$+Math.imul(re,De)|0)+Math.imul(ce,Ee)|0,X=X+Math.imul(ce,De)|0,U=U+Math.imul(oe,He)|0,$=($=$+Math.imul(oe,Ye)|0)+Math.imul(W,He)|0,X=X+Math.imul(W,Ye)|0;var jt=(ee+(U=U+Math.imul(G,ot)|0)|0)+((8191&($=($=$+Math.imul(G,st)|0)+Math.imul(H,ot)|0))<<13)|0;ee=((X=X+Math.imul(H,st)|0)+($>>>13)|0)+(jt>>>26)|0,jt&=67108863,U=Math.imul(We,it),$=($=Math.imul(We,ht))+Math.imul(Je,it)|0,X=Math.imul(Je,ht),U=U+Math.imul(Pe,Ct)|0,$=($=$+Math.imul(Pe,Vt)|0)+Math.imul(Be,Ct)|0,X=X+Math.imul(Be,Vt)|0,U=U+Math.imul(_e,gt)|0,$=($=$+Math.imul(_e,ft)|0)+Math.imul(Ae,gt)|0,X=X+Math.imul(Ae,ft)|0,U=U+Math.imul(Oe,rn)|0,$=($=$+Math.imul(Oe,un)|0)+Math.imul(Re,rn)|0,X=X+Math.imul(Re,un)|0,U=U+Math.imul(ye,dn)|0,$=($=$+Math.imul(ye,Mn)|0)+Math.imul(Te,dn)|0,X=X+Math.imul(Te,Mn)|0,U=U+Math.imul(me,Ee)|0,$=($=$+Math.imul(me,De)|0)+Math.imul(pe,Ee)|0,X=X+Math.imul(pe,De)|0,U=U+Math.imul(re,He)|0,$=($=$+Math.imul(re,Ye)|0)+Math.imul(ce,He)|0,X=X+Math.imul(ce,Ye)|0,U=U+Math.imul(oe,ot)|0,$=($=$+Math.imul(oe,st)|0)+Math.imul(W,ot)|0,X=X+Math.imul(W,st)|0;var Qt=(ee+(U=U+Math.imul(G,wt)|0)|0)+((8191&($=($=$+Math.imul(G,Ut)|0)+Math.imul(H,wt)|0))<<13)|0;ee=((X=X+Math.imul(H,Ut)|0)+($>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,U=Math.imul(Ge,it),$=($=Math.imul(Ge,ht))+Math.imul(Ke,it)|0,X=Math.imul(Ke,ht),U=U+Math.imul(We,Ct)|0,$=($=$+Math.imul(We,Vt)|0)+Math.imul(Je,Ct)|0,X=X+Math.imul(Je,Vt)|0,U=U+Math.imul(Pe,gt)|0,$=($=$+Math.imul(Pe,ft)|0)+Math.imul(Be,gt)|0,X=X+Math.imul(Be,ft)|0,U=U+Math.imul(_e,rn)|0,$=($=$+Math.imul(_e,un)|0)+Math.imul(Ae,rn)|0,X=X+Math.imul(Ae,un)|0,U=U+Math.imul(Oe,dn)|0,$=($=$+Math.imul(Oe,Mn)|0)+Math.imul(Re,dn)|0,X=X+Math.imul(Re,Mn)|0,U=U+Math.imul(ye,Ee)|0,$=($=$+Math.imul(ye,De)|0)+Math.imul(Te,Ee)|0,X=X+Math.imul(Te,De)|0,U=U+Math.imul(me,He)|0,$=($=$+Math.imul(me,Ye)|0)+Math.imul(pe,He)|0,X=X+Math.imul(pe,Ye)|0,U=U+Math.imul(re,ot)|0,$=($=$+Math.imul(re,st)|0)+Math.imul(ce,ot)|0,X=X+Math.imul(ce,st)|0,U=U+Math.imul(oe,wt)|0,$=($=$+Math.imul(oe,Ut)|0)+Math.imul(W,wt)|0,X=X+Math.imul(W,Ut)|0;var fn=(ee+(U=U+Math.imul(G,vt)|0)|0)+((8191&($=($=$+Math.imul(G,Et)|0)+Math.imul(H,vt)|0))<<13)|0;ee=((X=X+Math.imul(H,Et)|0)+($>>>13)|0)+(fn>>>26)|0,fn&=67108863,U=Math.imul(Ge,Ct),$=($=Math.imul(Ge,Vt))+Math.imul(Ke,Ct)|0,X=Math.imul(Ke,Vt),U=U+Math.imul(We,gt)|0,$=($=$+Math.imul(We,ft)|0)+Math.imul(Je,gt)|0,X=X+Math.imul(Je,ft)|0,U=U+Math.imul(Pe,rn)|0,$=($=$+Math.imul(Pe,un)|0)+Math.imul(Be,rn)|0,X=X+Math.imul(Be,un)|0,U=U+Math.imul(_e,dn)|0,$=($=$+Math.imul(_e,Mn)|0)+Math.imul(Ae,dn)|0,X=X+Math.imul(Ae,Mn)|0,U=U+Math.imul(Oe,Ee)|0,$=($=$+Math.imul(Oe,De)|0)+Math.imul(Re,Ee)|0,X=X+Math.imul(Re,De)|0,U=U+Math.imul(ye,He)|0,$=($=$+Math.imul(ye,Ye)|0)+Math.imul(Te,He)|0,X=X+Math.imul(Te,Ye)|0,U=U+Math.imul(me,ot)|0,$=($=$+Math.imul(me,st)|0)+Math.imul(pe,ot)|0,X=X+Math.imul(pe,st)|0,U=U+Math.imul(re,wt)|0,$=($=$+Math.imul(re,Ut)|0)+Math.imul(ce,wt)|0,X=X+Math.imul(ce,Ut)|0;var an=(ee+(U=U+Math.imul(oe,vt)|0)|0)+((8191&($=($=$+Math.imul(oe,Et)|0)+Math.imul(W,vt)|0))<<13)|0;ee=((X=X+Math.imul(W,Et)|0)+($>>>13)|0)+(an>>>26)|0,an&=67108863,U=Math.imul(Ge,gt),$=($=Math.imul(Ge,ft))+Math.imul(Ke,gt)|0,X=Math.imul(Ke,ft),U=U+Math.imul(We,rn)|0,$=($=$+Math.imul(We,un)|0)+Math.imul(Je,rn)|0,X=X+Math.imul(Je,un)|0,U=U+Math.imul(Pe,dn)|0,$=($=$+Math.imul(Pe,Mn)|0)+Math.imul(Be,dn)|0,X=X+Math.imul(Be,Mn)|0,U=U+Math.imul(_e,Ee)|0,$=($=$+Math.imul(_e,De)|0)+Math.imul(Ae,Ee)|0,X=X+Math.imul(Ae,De)|0,U=U+Math.imul(Oe,He)|0,$=($=$+Math.imul(Oe,Ye)|0)+Math.imul(Re,He)|0,X=X+Math.imul(Re,Ye)|0,U=U+Math.imul(ye,ot)|0,$=($=$+Math.imul(ye,st)|0)+Math.imul(Te,ot)|0,X=X+Math.imul(Te,st)|0,U=U+Math.imul(me,wt)|0,$=($=$+Math.imul(me,Ut)|0)+Math.imul(pe,wt)|0,X=X+Math.imul(pe,Ut)|0;var Sn=(ee+(U=U+Math.imul(re,vt)|0)|0)+((8191&($=($=$+Math.imul(re,Et)|0)+Math.imul(ce,vt)|0))<<13)|0;ee=((X=X+Math.imul(ce,Et)|0)+($>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,U=Math.imul(Ge,rn),$=($=Math.imul(Ge,un))+Math.imul(Ke,rn)|0,X=Math.imul(Ke,un),U=U+Math.imul(We,dn)|0,$=($=$+Math.imul(We,Mn)|0)+Math.imul(Je,dn)|0,X=X+Math.imul(Je,Mn)|0,U=U+Math.imul(Pe,Ee)|0,$=($=$+Math.imul(Pe,De)|0)+Math.imul(Be,Ee)|0,X=X+Math.imul(Be,De)|0,U=U+Math.imul(_e,He)|0,$=($=$+Math.imul(_e,Ye)|0)+Math.imul(Ae,He)|0,X=X+Math.imul(Ae,Ye)|0,U=U+Math.imul(Oe,ot)|0,$=($=$+Math.imul(Oe,st)|0)+Math.imul(Re,ot)|0,X=X+Math.imul(Re,st)|0,U=U+Math.imul(ye,wt)|0,$=($=$+Math.imul(ye,Ut)|0)+Math.imul(Te,wt)|0,X=X+Math.imul(Te,Ut)|0;var Yn=(ee+(U=U+Math.imul(me,vt)|0)|0)+((8191&($=($=$+Math.imul(me,Et)|0)+Math.imul(pe,vt)|0))<<13)|0;ee=((X=X+Math.imul(pe,Et)|0)+($>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,U=Math.imul(Ge,dn),$=($=Math.imul(Ge,Mn))+Math.imul(Ke,dn)|0,X=Math.imul(Ke,Mn),U=U+Math.imul(We,Ee)|0,$=($=$+Math.imul(We,De)|0)+Math.imul(Je,Ee)|0,X=X+Math.imul(Je,De)|0,U=U+Math.imul(Pe,He)|0,$=($=$+Math.imul(Pe,Ye)|0)+Math.imul(Be,He)|0,X=X+Math.imul(Be,Ye)|0,U=U+Math.imul(_e,ot)|0,$=($=$+Math.imul(_e,st)|0)+Math.imul(Ae,ot)|0,X=X+Math.imul(Ae,st)|0,U=U+Math.imul(Oe,wt)|0,$=($=$+Math.imul(Oe,Ut)|0)+Math.imul(Re,wt)|0,X=X+Math.imul(Re,Ut)|0;var kn=(ee+(U=U+Math.imul(ye,vt)|0)|0)+((8191&($=($=$+Math.imul(ye,Et)|0)+Math.imul(Te,vt)|0))<<13)|0;ee=((X=X+Math.imul(Te,Et)|0)+($>>>13)|0)+(kn>>>26)|0,kn&=67108863,U=Math.imul(Ge,Ee),$=($=Math.imul(Ge,De))+Math.imul(Ke,Ee)|0,X=Math.imul(Ke,De),U=U+Math.imul(We,He)|0,$=($=$+Math.imul(We,Ye)|0)+Math.imul(Je,He)|0,X=X+Math.imul(Je,Ye)|0,U=U+Math.imul(Pe,ot)|0,$=($=$+Math.imul(Pe,st)|0)+Math.imul(Be,ot)|0,X=X+Math.imul(Be,st)|0,U=U+Math.imul(_e,wt)|0,$=($=$+Math.imul(_e,Ut)|0)+Math.imul(Ae,wt)|0,X=X+Math.imul(Ae,Ut)|0;var cn=(ee+(U=U+Math.imul(Oe,vt)|0)|0)+((8191&($=($=$+Math.imul(Oe,Et)|0)+Math.imul(Re,vt)|0))<<13)|0;ee=((X=X+Math.imul(Re,Et)|0)+($>>>13)|0)+(cn>>>26)|0,cn&=67108863,U=Math.imul(Ge,He),$=($=Math.imul(Ge,Ye))+Math.imul(Ke,He)|0,X=Math.imul(Ke,Ye),U=U+Math.imul(We,ot)|0,$=($=$+Math.imul(We,st)|0)+Math.imul(Je,ot)|0,X=X+Math.imul(Je,st)|0,U=U+Math.imul(Pe,wt)|0,$=($=$+Math.imul(Pe,Ut)|0)+Math.imul(Be,wt)|0,X=X+Math.imul(Be,Ut)|0;var vn=(ee+(U=U+Math.imul(_e,vt)|0)|0)+((8191&($=($=$+Math.imul(_e,Et)|0)+Math.imul(Ae,vt)|0))<<13)|0;ee=((X=X+Math.imul(Ae,Et)|0)+($>>>13)|0)+(vn>>>26)|0,vn&=67108863,U=Math.imul(Ge,ot),$=($=Math.imul(Ge,st))+Math.imul(Ke,ot)|0,X=Math.imul(Ke,st),U=U+Math.imul(We,wt)|0,$=($=$+Math.imul(We,Ut)|0)+Math.imul(Je,wt)|0,X=X+Math.imul(Je,Ut)|0;var hn=(ee+(U=U+Math.imul(Pe,vt)|0)|0)+((8191&($=($=$+Math.imul(Pe,Et)|0)+Math.imul(Be,vt)|0))<<13)|0;ee=((X=X+Math.imul(Be,Et)|0)+($>>>13)|0)+(hn>>>26)|0,hn&=67108863,U=Math.imul(Ge,wt),$=($=Math.imul(Ge,Ut))+Math.imul(Ke,wt)|0,X=Math.imul(Ke,Ut);var Dn=(ee+(U=U+Math.imul(We,vt)|0)|0)+((8191&($=($=$+Math.imul(We,Et)|0)+Math.imul(Je,vt)|0))<<13)|0;ee=((X=X+Math.imul(Je,Et)|0)+($>>>13)|0)+(Dn>>>26)|0,Dn&=67108863;var Pn=(ee+(U=Math.imul(Ge,vt))|0)+((8191&($=($=Math.imul(Ge,Et))+Math.imul(Ke,vt)|0))<<13)|0;return ee=((X=Math.imul(Ke,Et))+($>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,J[0]=$t,J[1]=Dt,J[2]=Pt,J[3]=je,J[4]=rt,J[5]=pt,J[6]=It,J[7]=jt,J[8]=Qt,J[9]=fn,J[10]=an,J[11]=Sn,J[12]=Yn,J[13]=kn,J[14]=cn,J[15]=vn,J[16]=hn,J[17]=Dn,J[18]=Pn,0!==ee&&(J[19]=ee,j.length++),j};function w(L,P,j){return(new c).mulp(L,P,j)}function c(L,P){this.x=L,this.y=P}Math.imul||(u=m),i.prototype.mulTo=function(L,P){var j=this.length+L.length;return 10===this.length&&10===L.length?u(this,L,P):j<63?m(this,L,P):j<1024?function(U,$,X){X.negative=$.negative^U.negative,X.length=U.length+$.length;for(var te=0,ae=0,J=0;J<X.length-1;J++){var ee=ae;ae=0;for(var se=67108863&te,G=Math.min(J,$.length-1),H=Math.max(0,J-U.length+1);H<=G;H++){var oe=(0|U.words[J-H])*(0|$.words[H]),W=67108863&oe;se=67108863&(W=W+se|0),ae+=(ee=(ee=ee+(oe/67108864|0)|0)+(W>>>26)|0)>>>26,ee&=67108863}X.words[J]=se,te=ee,ee=ae}return 0!==te?X.words[J]=te:X.length--,X.strip()}(this,L,P):w(this,L,P)},c.prototype.makeRBT=function(L){for(var P=new Array(L),j=i.prototype._countBits(L)-1,U=0;U<L;U++)P[U]=this.revBin(U,j,L);return P},c.prototype.revBin=function(L,P,j){if(0===L||L===j-1)return L;for(var U=0,$=0;$<P;$++)U|=(1&L)<<P-$-1,L>>=1;return U},c.prototype.permute=function(L,P,j,U,$,X){for(var te=0;te<X;te++)U[te]=P[L[te]],$[te]=j[L[te]]},c.prototype.transform=function(L,P,j,U,$,X){this.permute(X,L,P,j,U,$);for(var te=1;te<$;te<<=1)for(var ae=te<<1,J=Math.cos(2*Math.PI/ae),ee=Math.sin(2*Math.PI/ae),se=0;se<$;se+=ae)for(var G=J,H=ee,Y=0;Y<te;Y++){var oe=j[se+Y],W=U[se+Y],ne=j[se+Y+te],re=U[se+Y+te],ce=G*ne-H*re;re=G*re+H*ne,j[se+Y]=oe+(ne=ce),U[se+Y]=W+re,j[se+Y+te]=oe-ne,U[se+Y+te]=W-re,Y!==ae&&(ce=J*G-ee*H,H=J*H+ee*G,G=ce)}},c.prototype.guessLen13b=function(L,P){var j=1|Math.max(P,L),U=1&j,$=0;for(j=j/2|0;j;j>>>=1)$++;return 1<<$+1+U},c.prototype.conjugate=function(L,P,j){if(!(j<=1))for(var U=0;U<j/2;U++){var $=L[U];L[U]=L[j-U-1],L[j-U-1]=$,$=P[U],P[U]=-P[j-U-1],P[j-U-1]=-$}},c.prototype.normalize13b=function(L,P){for(var j=0,U=0;U<P/2;U++){var $=8192*Math.round(L[2*U+1]/P)+Math.round(L[2*U]/P)+j;L[U]=67108863&$,j=$<67108864?0:$/67108864|0}return L},c.prototype.convert13b=function(L,P,j,U){for(var $=0,X=0;X<P;X++)j[2*X]=8191&($+=0|L[X]),j[2*X+1]=8191&($>>>=13),$>>>=13;for(X=2*P;X<U;++X)j[X]=0;a(0===$),a(0==(-8192&$))},c.prototype.stub=function(L){for(var P=new Array(L),j=0;j<L;j++)P[j]=0;return P},c.prototype.mulp=function(L,P,j){var U=2*this.guessLen13b(L.length,P.length),$=this.makeRBT(U),X=this.stub(U),te=new Array(U),ae=new Array(U),J=new Array(U),ee=new Array(U),se=new Array(U),G=new Array(U),H=j.words;H.length=U,this.convert13b(L.words,L.length,te,U),this.convert13b(P.words,P.length,ee,U),this.transform(te,X,ae,J,U,$),this.transform(ee,X,se,G,U,$);for(var Y=0;Y<U;Y++){var oe=ae[Y]*se[Y]-J[Y]*G[Y];J[Y]=ae[Y]*G[Y]+J[Y]*se[Y],ae[Y]=oe}return this.conjugate(ae,J,U),this.transform(ae,J,H,X,U,$),this.conjugate(H,X,U),this.normalize13b(H,U),j.negative=L.negative^P.negative,j.length=L.length+P.length,j.strip()},i.prototype.mul=function(L){var P=new i(null);return P.words=new Array(this.length+L.length),this.mulTo(L,P)},i.prototype.mulf=function(L){var P=new i(null);return P.words=new Array(this.length+L.length),w(this,L,P)},i.prototype.imul=function(L){return this.clone().mulTo(L,this)},i.prototype.imuln=function(L){a("number"==typeof L),a(L<67108864);for(var P=0,j=0;j<this.length;j++){var U=(0|this.words[j])*L,$=(67108863&U)+(67108863&P);P>>=26,P+=U/67108864|0,P+=$>>>26,this.words[j]=67108863&$}return 0!==P&&(this.words[j]=P,this.length++),this},i.prototype.muln=function(L){return this.clone().imuln(L)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(L){var P=function(X){for(var te=new Array(X.bitLength()),ae=0;ae<te.length;ae++){var ee=ae%26;te[ae]=(X.words[ae/26|0]&1<<ee)>>>ee}return te}(L);if(0===P.length)return new i(1);for(var j=this,U=0;U<P.length&&0===P[U];U++,j=j.sqr());if(++U<P.length)for(var $=j.sqr();U<P.length;U++,$=$.sqr())0!==P[U]&&(j=j.mul($));return j},i.prototype.iushln=function(L){a("number"==typeof L&&L>=0);var P,j=L%26,U=(L-j)/26,$=67108863>>>26-j<<26-j;if(0!==j){var X=0;for(P=0;P<this.length;P++){var te=this.words[P]&$;this.words[P]=(0|this.words[P])-te<<j|X,X=te>>>26-j}X&&(this.words[P]=X,this.length++)}if(0!==U){for(P=this.length-1;P>=0;P--)this.words[P+U]=this.words[P];for(P=0;P<U;P++)this.words[P]=0;this.length+=U}return this.strip()},i.prototype.ishln=function(L){return a(0===this.negative),this.iushln(L)},i.prototype.iushrn=function(L,P,j){var U;a("number"==typeof L&&L>=0),U=P?(P-P%26)/26:0;var $=L%26,X=Math.min((L-$)/26,this.length),te=67108863^67108863>>>$<<$,ae=j;if(U-=X,U=Math.max(0,U),ae){for(var J=0;J<X;J++)ae.words[J]=this.words[J];ae.length=X}if(0!==X)if(this.length>X)for(this.length-=X,J=0;J<this.length;J++)this.words[J]=this.words[J+X];else this.words[0]=0,this.length=1;var ee=0;for(J=this.length-1;J>=0&&(0!==ee||J>=U);J--){var se=0|this.words[J];this.words[J]=ee<<26-$|se>>>$,ee=se&te}return ae&&0!==ee&&(ae.words[ae.length++]=ee),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(L,P,j){return a(0===this.negative),this.iushrn(L,P,j)},i.prototype.shln=function(L){return this.clone().ishln(L)},i.prototype.ushln=function(L){return this.clone().iushln(L)},i.prototype.shrn=function(L){return this.clone().ishrn(L)},i.prototype.ushrn=function(L){return this.clone().iushrn(L)},i.prototype.testn=function(L){a("number"==typeof L&&L>=0);var P=L%26,j=(L-P)/26;return!(this.length<=j||!(this.words[j]&1<<P))},i.prototype.imaskn=function(L){a("number"==typeof L&&L>=0);var P=L%26,j=(L-P)/26;return a(0===this.negative,"imaskn works only with positive numbers"),this.length<=j?this:(0!==P&&j++,this.length=Math.min(j,this.length),0!==P&&(this.words[this.length-1]&=67108863^67108863>>>P<<P),this.strip())},i.prototype.maskn=function(L){return this.clone().imaskn(L)},i.prototype.iaddn=function(L){return a("number"==typeof L),a(L<67108864),L<0?this.isubn(-L):0!==this.negative?1===this.length&&(0|this.words[0])<L?(this.words[0]=L-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(L),this.negative=1,this):this._iaddn(L)},i.prototype._iaddn=function(L){this.words[0]+=L;for(var P=0;P<this.length&&this.words[P]>=67108864;P++)this.words[P]-=67108864,P===this.length-1?this.words[P+1]=1:this.words[P+1]++;return this.length=Math.max(this.length,P+1),this},i.prototype.isubn=function(L){if(a("number"==typeof L),a(L<67108864),L<0)return this.iaddn(-L);if(0!==this.negative)return this.negative=0,this.iaddn(L),this.negative=1,this;if(this.words[0]-=L,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var P=0;P<this.length&&this.words[P]<0;P++)this.words[P]+=67108864,this.words[P+1]-=1;return this.strip()},i.prototype.addn=function(L){return this.clone().iaddn(L)},i.prototype.subn=function(L){return this.clone().isubn(L)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(L,P,j){var U,$;this._expand(L.length+j);var te=0;for(U=0;U<L.length;U++){$=(0|this.words[U+j])+te;var ae=(0|L.words[U])*P;te=(($-=67108863&ae)>>26)-(ae/67108864|0),this.words[U+j]=67108863&$}for(;U<this.length-j;U++)te=($=(0|this.words[U+j])+te)>>26,this.words[U+j]=67108863&$;if(0===te)return this.strip();for(a(-1===te),te=0,U=0;U<this.length;U++)te=($=-(0|this.words[U])+te)>>26,this.words[U]=67108863&$;return this.negative=1,this.strip()},i.prototype._wordDiv=function(L,P){var j,U=this.clone(),$=L,X=0|$.words[$.length-1];0!=(j=26-this._countBits(X))&&($=$.ushln(j),U.iushln(j),X=0|$.words[$.length-1]);var te,ae=U.length-$.length;if("mod"!==P){(te=new i(null)).length=ae+1,te.words=new Array(te.length);for(var J=0;J<te.length;J++)te.words[J]=0}var ee=U.clone()._ishlnsubmul($,1,ae);0===ee.negative&&(U=ee,te&&(te.words[ae]=1));for(var se=ae-1;se>=0;se--){var G=67108864*(0|U.words[$.length+se])+(0|U.words[$.length+se-1]);for(G=Math.min(G/X|0,67108863),U._ishlnsubmul($,G,se);0!==U.negative;)G--,U.negative=0,U._ishlnsubmul($,1,se),U.isZero()||(U.negative^=1);te&&(te.words[se]=G)}return te&&te.strip(),U.strip(),"div"!==P&&0!==j&&U.iushrn(j),{div:te||null,mod:U}},i.prototype.divmod=function(L,P,j){return a(!L.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===L.negative?(X=this.neg().divmod(L,P),"mod"!==P&&(U=X.div.neg()),"div"!==P&&($=X.mod.neg(),j&&0!==$.negative&&$.iadd(L)),{div:U,mod:$}):0===this.negative&&0!==L.negative?(X=this.divmod(L.neg(),P),"mod"!==P&&(U=X.div.neg()),{div:U,mod:X.mod}):0!=(this.negative&L.negative)?(X=this.neg().divmod(L.neg(),P),"div"!==P&&($=X.mod.neg(),j&&0!==$.negative&&$.isub(L)),{div:X.div,mod:$}):L.length>this.length||this.cmp(L)<0?{div:new i(0),mod:this}:1===L.length?"div"===P?{div:this.divn(L.words[0]),mod:null}:"mod"===P?{div:null,mod:new i(this.modn(L.words[0]))}:{div:this.divn(L.words[0]),mod:new i(this.modn(L.words[0]))}:this._wordDiv(L,P);var U,$,X},i.prototype.div=function(L){return this.divmod(L,"div",!1).div},i.prototype.mod=function(L){return this.divmod(L,"mod",!1).mod},i.prototype.umod=function(L){return this.divmod(L,"mod",!0).mod},i.prototype.divRound=function(L){var P=this.divmod(L);if(P.mod.isZero())return P.div;var j=0!==P.div.negative?P.mod.isub(L):P.mod,U=L.ushrn(1),$=L.andln(1),X=j.cmp(U);return X<0||1===$&&0===X?P.div:0!==P.div.negative?P.div.isubn(1):P.div.iaddn(1)},i.prototype.modn=function(L){a(L<=67108863);for(var P=(1<<26)%L,j=0,U=this.length-1;U>=0;U--)j=(P*j+(0|this.words[U]))%L;return j},i.prototype.idivn=function(L){a(L<=67108863);for(var P=0,j=this.length-1;j>=0;j--){var U=(0|this.words[j])+67108864*P;this.words[j]=U/L|0,P=U%L}return this.strip()},i.prototype.divn=function(L){return this.clone().idivn(L)},i.prototype.egcd=function(L){a(0===L.negative),a(!L.isZero());var P=this,j=L.clone();P=0!==P.negative?P.umod(L):P.clone();for(var U=new i(1),$=new i(0),X=new i(0),te=new i(1),ae=0;P.isEven()&&j.isEven();)P.iushrn(1),j.iushrn(1),++ae;for(var J=j.clone(),ee=P.clone();!P.isZero();){for(var se=0,G=1;0==(P.words[0]&G)&&se<26;++se,G<<=1);if(se>0)for(P.iushrn(se);se-- >0;)(U.isOdd()||$.isOdd())&&(U.iadd(J),$.isub(ee)),U.iushrn(1),$.iushrn(1);for(var H=0,Y=1;0==(j.words[0]&Y)&&H<26;++H,Y<<=1);if(H>0)for(j.iushrn(H);H-- >0;)(X.isOdd()||te.isOdd())&&(X.iadd(J),te.isub(ee)),X.iushrn(1),te.iushrn(1);P.cmp(j)>=0?(P.isub(j),U.isub(X),$.isub(te)):(j.isub(P),X.isub(U),te.isub($))}return{a:X,b:te,gcd:j.iushln(ae)}},i.prototype._invmp=function(L){a(0===L.negative),a(!L.isZero());var P=this,j=L.clone();P=0!==P.negative?P.umod(L):P.clone();for(var U,$=new i(1),X=new i(0),te=j.clone();P.cmpn(1)>0&&j.cmpn(1)>0;){for(var ae=0,J=1;0==(P.words[0]&J)&&ae<26;++ae,J<<=1);if(ae>0)for(P.iushrn(ae);ae-- >0;)$.isOdd()&&$.iadd(te),$.iushrn(1);for(var ee=0,se=1;0==(j.words[0]&se)&&ee<26;++ee,se<<=1);if(ee>0)for(j.iushrn(ee);ee-- >0;)X.isOdd()&&X.iadd(te),X.iushrn(1);P.cmp(j)>=0?(P.isub(j),$.isub(X)):(j.isub(P),X.isub($))}return(U=0===P.cmpn(1)?$:X).cmpn(0)<0&&U.iadd(L),U},i.prototype.gcd=function(L){if(this.isZero())return L.abs();if(L.isZero())return this.abs();var P=this.clone(),j=L.clone();P.negative=0,j.negative=0;for(var U=0;P.isEven()&&j.isEven();U++)P.iushrn(1),j.iushrn(1);for(;;){for(;P.isEven();)P.iushrn(1);for(;j.isEven();)j.iushrn(1);var $=P.cmp(j);if($<0){var X=P;P=j,j=X}else if(0===$||0===j.cmpn(1))break;P.isub(j)}return j.iushln(U)},i.prototype.invm=function(L){return this.egcd(L).a.umod(L)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(L){return this.words[0]&L},i.prototype.bincn=function(L){a("number"==typeof L);var P=L%26,j=(L-P)/26,U=1<<P;if(this.length<=j)return this._expand(j+1),this.words[j]|=U,this;for(var $=U,X=j;0!==$&&X<this.length;X++){var te=0|this.words[X];$=(te+=$)>>>26,this.words[X]=te&=67108863}return 0!==$&&(this.words[X]=$,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(L){var P,j=L<0;if(0!==this.negative&&!j)return-1;if(0===this.negative&&j)return 1;if(this.strip(),this.length>1)P=1;else{j&&(L=-L),a(L<=67108863,"Number is too big");var U=0|this.words[0];P=U===L?0:U<L?-1:1}return 0!==this.negative?0|-P:P},i.prototype.cmp=function(L){if(0!==this.negative&&0===L.negative)return-1;if(0===this.negative&&0!==L.negative)return 1;var P=this.ucmp(L);return 0!==this.negative?0|-P:P},i.prototype.ucmp=function(L){if(this.length>L.length)return 1;if(this.length<L.length)return-1;for(var P=0,j=this.length-1;j>=0;j--){var U=0|this.words[j],$=0|L.words[j];if(U!==$){U<$?P=-1:U>$&&(P=1);break}}return P},i.prototype.gtn=function(L){return 1===this.cmpn(L)},i.prototype.gt=function(L){return 1===this.cmp(L)},i.prototype.gten=function(L){return this.cmpn(L)>=0},i.prototype.gte=function(L){return this.cmp(L)>=0},i.prototype.ltn=function(L){return-1===this.cmpn(L)},i.prototype.lt=function(L){return-1===this.cmp(L)},i.prototype.lten=function(L){return this.cmpn(L)<=0},i.prototype.lte=function(L){return this.cmp(L)<=0},i.prototype.eqn=function(L){return 0===this.cmpn(L)},i.prototype.eq=function(L){return 0===this.cmp(L)},i.red=function(L){return new N(L)},i.prototype.toRed=function(L){return a(!this.red,"Already a number in reduction context"),a(0===this.negative,"red works only with positives"),L.convertTo(this)._forceRed(L)},i.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(L){return this.red=L,this},i.prototype.forceRed=function(L){return a(!this.red,"Already a number in reduction context"),this._forceRed(L)},i.prototype.redAdd=function(L){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,L)},i.prototype.redIAdd=function(L){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,L)},i.prototype.redSub=function(L){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,L)},i.prototype.redISub=function(L){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,L)},i.prototype.redShl=function(L){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,L)},i.prototype.redMul=function(L){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,L),this.red.mul(this,L)},i.prototype.redIMul=function(L){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,L),this.red.imul(this,L)},i.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(L){return a(this.red&&!L.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,L)};var E={k256:null,p224:null,p192:null,p25519:null};function M(L,P){this.name=L,this.p=new i(P,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function S(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function C(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function O(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function I(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(L){if("string"==typeof L){var P=i._prime(L);this.m=P.p,this.prime=P}else a(L.gtn(1),"modulus must be greater than 1"),this.m=L,this.prime=null}function F(L){N.call(this,L),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var L=new i(null);return L.words=new Array(Math.ceil(this.n/13)),L},M.prototype.ireduce=function(L){var P,j=L;do{this.split(j,this.tmp),P=(j=(j=this.imulK(j)).iadd(this.tmp)).bitLength()}while(P>this.n);var U=P<this.n?-1:j.ucmp(this.p);return 0===U?(j.words[0]=0,j.length=1):U>0?j.isub(this.p):void 0!==j.strip?j.strip():j._strip(),j},M.prototype.split=function(L,P){L.iushrn(this.n,0,P)},M.prototype.imulK=function(L){return L.imul(this.k)},l(S,M),S.prototype.split=function(L,P){for(var j=Math.min(L.length,9),U=0;U<j;U++)P.words[U]=L.words[U];if(P.length=j,L.length<=9)return L.words[0]=0,void(L.length=1);var $=L.words[9];for(P.words[P.length++]=4194303&$,U=10;U<L.length;U++){var X=0|L.words[U];L.words[U-10]=(4194303&X)<<4|$>>>22,$=X}L.words[U-10]=$>>>=22,L.length-=0===$&&L.length>10?10:9},S.prototype.imulK=function(L){L.words[L.length]=0,L.words[L.length+1]=0,L.length+=2;for(var P=0,j=0;j<L.length;j++){var U=0|L.words[j];L.words[j]=67108863&(P+=977*U),P=64*U+(P/67108864|0)}return 0===L.words[L.length-1]&&(L.length--,0===L.words[L.length-1]&&L.length--),L},l(C,M),l(O,M),l(I,M),I.prototype.imulK=function(L){for(var P=0,j=0;j<L.length;j++){var U=19*(0|L.words[j])+P,$=67108863&U;U>>>=26,L.words[j]=$,P=U}return 0!==P&&(L.words[L.length++]=P),L},i._prime=function(L){if(E[L])return E[L];var P;if("k256"===L)P=new S;else if("p224"===L)P=new C;else if("p192"===L)P=new O;else{if("p25519"!==L)throw new Error("Unknown prime "+L);P=new I}return E[L]=P,P},N.prototype._verify1=function(L){a(0===L.negative,"red works only with positives"),a(L.red,"red works only with red numbers")},N.prototype._verify2=function(L,P){a(0==(L.negative|P.negative),"red works only with positives"),a(L.red&&L.red===P.red,"red works only with red numbers")},N.prototype.imod=function(L){return this.prime?this.prime.ireduce(L)._forceRed(this):L.umod(this.m)._forceRed(this)},N.prototype.neg=function(L){return L.isZero()?L.clone():this.m.sub(L)._forceRed(this)},N.prototype.add=function(L,P){this._verify2(L,P);var j=L.add(P);return j.cmp(this.m)>=0&&j.isub(this.m),j._forceRed(this)},N.prototype.iadd=function(L,P){this._verify2(L,P);var j=L.iadd(P);return j.cmp(this.m)>=0&&j.isub(this.m),j},N.prototype.sub=function(L,P){this._verify2(L,P);var j=L.sub(P);return j.cmpn(0)<0&&j.iadd(this.m),j._forceRed(this)},N.prototype.isub=function(L,P){this._verify2(L,P);var j=L.isub(P);return j.cmpn(0)<0&&j.iadd(this.m),j},N.prototype.shl=function(L,P){return this._verify1(L),this.imod(L.ushln(P))},N.prototype.imul=function(L,P){return this._verify2(L,P),this.imod(L.imul(P))},N.prototype.mul=function(L,P){return this._verify2(L,P),this.imod(L.mul(P))},N.prototype.isqr=function(L){return this.imul(L,L.clone())},N.prototype.sqr=function(L){return this.mul(L,L)},N.prototype.sqrt=function(L){if(L.isZero())return L.clone();var P=this.m.andln(3);if(a(P%2==1),3===P){var j=this.m.add(new i(1)).iushrn(2);return this.pow(L,j)}for(var U=this.m.subn(1),$=0;!U.isZero()&&0===U.andln(1);)$++,U.iushrn(1);a(!U.isZero());var X=new i(1).toRed(this),te=X.redNeg(),ae=this.m.subn(1).iushrn(1),J=this.m.bitLength();for(J=new i(2*J*J).toRed(this);0!==this.pow(J,ae).cmp(te);)J.redIAdd(te);for(var ee=this.pow(J,U),se=this.pow(L,U.addn(1).iushrn(1)),G=this.pow(L,U),H=$;0!==G.cmp(X);){for(var Y=G,oe=0;0!==Y.cmp(X);oe++)Y=Y.redSqr();a(oe<H);var W=this.pow(ee,new i(1).iushln(H-oe-1));se=se.redMul(W),ee=W.redSqr(),G=G.redMul(ee),H=oe}return se},N.prototype.invm=function(L){var P=L._invmp(this.m);return 0!==P.negative?(P.negative=0,this.imod(P).redNeg()):this.imod(P)},N.prototype.pow=function(L,P){if(P.isZero())return new i(1).toRed(this);if(0===P.cmpn(1))return L.clone();var j=new Array(16);j[0]=new i(1).toRed(this),j[1]=L;for(var U=2;U<j.length;U++)j[U]=this.mul(j[U-1],L);var $=j[0],X=0,te=0,ae=P.bitLength()%26;for(0===ae&&(ae=26),U=P.length-1;U>=0;U--){for(var J=P.words[U],ee=ae-1;ee>=0;ee--){var se=J>>ee&1;$!==j[0]&&($=this.sqr($)),0!==se||0!==X?(X<<=1,X|=se,(4==++te||0===U&&0===ee)&&($=this.mul($,j[X]),te=0,X=0)):te=0}ae=26}return $},N.prototype.convertTo=function(L){var P=L.umod(this.m);return P===L?P.clone():P},N.prototype.convertFrom=function(L){var P=L.clone();return P.red=null,P},i.mont=function(L){return new F(L)},l(F,N),F.prototype.convertTo=function(L){return this.imod(L.ushln(this.shift))},F.prototype.convertFrom=function(L){var P=this.imod(L.mul(this.rinv));return P.red=null,P},F.prototype.imul=function(L,P){if(L.isZero()||P.isZero())return L.words[0]=0,L.length=1,L;var j=L.imul(P),U=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$=j.isub(U).iushrn(this.shift),X=$;return $.cmp(this.m)>=0?X=$.isub(this.m):$.cmpn(0)<0&&(X=$.iadd(this.m)),X._forceRed(this)},F.prototype.mul=function(L,P){if(L.isZero()||P.isZero())return new i(0)._forceRed(this);var j=L.mul(P),U=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$=j.isub(U).iushrn(this.shift),X=$;return $.cmp(this.m)>=0?X=$.isub(this.m):$.cmpn(0)<0&&(X=$.iadd(this.m)),X._forceRed(this)},F.prototype.invm=function(L){return this.imod(L._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===T||T,this)},{buffer:2}],34:[function(b,T,_){"use strict";T.exports=function(e){var o,a,l,i=e.length,v=0;for(o=0;o<i;++o)v+=e[o].length;var h=new Array(v),s=0;for(o=0;o<i;++o){var d=e[o],p=d.length;for(a=0;a<p;++a){var f=h[s++]=new Array(p-1),g=0;for(l=0;l<p;++l)l!==a&&(f[g++]=d[l]);if(1&a){var m=f[1];f[1]=f[0],f[0]=m}}}return h}},{}],35:[function(b,T,_){"use strict";T.exports=function(f,g,m){switch(arguments.length){case 1:return d(f);case 2:return"function"==typeof g?h(f,f,g,!0):p(f,g);case 3:return h(f,g,m,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,o=b("typedarray-pool"),a=b("./lib/sweep"),l=b("./lib/intersect");function i(f,g){for(var m=0;m<f;++m)if(!(g[m]<=g[m+f]))return!0;return!1}function v(f,g,m,u){for(var w=0,c=0,E=0,M=f.length;E<M;++E){var S=f[E];if(!i(g,S)){for(var C=0;C<2*g;++C)m[w++]=S[C];u[c++]=E}}return c}function h(f,g,m,u){var w=f.length,c=g.length;if(!(w<=0||c<=0)){var E=f[0].length>>>1;if(!(E<=0)){var M,S=o.mallocDouble(2*E*w),C=o.mallocInt32(w);if((w=v(f,E,S,C))>0){if(1===E&&u)a.init(w),M=a.sweepComplete(E,m,0,w,S,C,0,w,S,C);else{var O=o.mallocDouble(2*E*c),I=o.mallocInt32(c);(c=v(g,E,O,I))>0&&(a.init(w+c),M=1===E?a.sweepBipartite(E,m,0,w,S,C,0,c,O,I):l(E,m,u,w,S,C,c,O,I),o.free(O),o.free(I))}o.free(S),o.free(C)}return M}}}function s(f,g){e.push([f,g])}function d(f){return e=[],h(f,f,s,!0),e}function p(f,g){return e=[],h(f,g,s,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(b,T,_){"use strict";function e(o){return o?function(a,l,i,v,h,s,d,p,f,g,m){return h-v>f-p?function(u,w,c,E,M,S,C,O,I,N,F){for(var L=2*u,P=E,j=L*E;P<M;++P,j+=L){var U=S[w+j],$=S[w+j+u],X=C[P];e:for(var te=O,ae=L*O;te<I;++te,ae+=L){var se=F[te];if(!(N[w+ae+u]<U||$<N[w+ae])){for(var G=w+1;G<u;++G)if(S[G+u+j]<N[G+ae]||N[G+u+ae]<S[G+j])continue e;var ne=c(X,se);if(void 0!==ne)return ne}}}}(a,l,i,v,h,s,d,p,f,g,m):function(u,w,c,E,M,S,C,O,I,N,F){for(var L=2*u,P=O,j=L*O;P<I;++P,j+=L){var U=N[w+j],$=N[w+j+u],X=F[P];e:for(var te=E,ae=L*E;te<M;++te,ae+=L){var se=C[te];if(!($<S[w+ae]||S[w+ae+u]<U)){for(var G=w+1;G<u;++G)if(S[G+u+ae]<N[G+j]||N[G+u+j]<S[G+ae])continue e;var ne=c(se,X);if(void 0!==ne)return ne}}}}(a,l,i,v,h,s,d,p,f,g,m)}:function(a,l,i,v,h,s,d,p,f,g,m,u){return s-h>g-f?v?function(w,c,E,M,S,C,O,I,N,F,L){for(var P=2*w,j=M,U=P*M;j<S;++j,U+=P){var $=C[c+U],X=C[c+U+w],te=O[j];e:for(var ae=I,J=P*I;ae<N;++ae,J+=P){var ee=F[c+J],se=L[ae];if(!(ee<=$||X<ee)){for(var G=c+1;G<w;++G)if(C[G+w+U]<F[G+J]||F[G+w+J]<C[G+U])continue e;var ne=E(se,te);if(void 0!==ne)return ne}}}}(a,l,i,h,s,d,p,f,g,m,u):function(w,c,E,M,S,C,O,I,N,F,L){for(var P=2*w,j=M,U=P*M;j<S;++j,U+=P){var $=C[c+U],X=C[c+U+w],te=O[j];e:for(var ae=I,J=P*I;ae<N;++ae,J+=P){var ee=F[c+J],se=L[ae];if(!(ee<$||X<ee)){for(var G=c+1;G<w;++G)if(C[G+w+U]<F[G+J]||F[G+w+J]<C[G+U])continue e;var ne=E(te,se);if(void 0!==ne)return ne}}}}(a,l,i,h,s,d,p,f,g,m,u):v?function(w,c,E,M,S,C,O,I,N,F,L){for(var P=2*w,j=I,U=P*I;j<N;++j,U+=P){var $=F[c+U],X=L[j];e:for(var te=M,ae=P*M;te<S;++te,ae+=P){var se=O[te];if(!($<=C[c+ae]||C[c+ae+w]<$)){for(var G=c+1;G<w;++G)if(C[G+w+ae]<F[G+U]||F[G+w+U]<C[G+ae])continue e;var ne=E(X,se);if(void 0!==ne)return ne}}}}(a,l,i,h,s,d,p,f,g,m,u):function(w,c,E,M,S,C,O,I,N,F,L){for(var P=2*w,j=I,U=P*I;j<N;++j,U+=P){var $=F[c+U],X=L[j];e:for(var te=M,ae=P*M;te<S;++te,ae+=P){var se=O[te];if(!($<C[c+ae]||C[c+ae+w]<$)){for(var G=c+1;G<w;++G)if(C[G+w+ae]<F[G+U]||F[G+w+U]<C[G+ae])continue e;var ne=E(se,X);if(void 0!==ne)return ne}}}}(a,l,i,h,s,d,p,f,g,m,u)}}_.partial=e(!1),_.full=e(!0)},{}],37:[function(b,T,_){"use strict";T.exports=function(C,O,I,N,F,L,P,j,U){!function(Fe,Pe){var Be=8*o.log2(Pe+1)*(Fe+1)|0,qe=o.nextPow2(6*Be);w.length<qe&&(e.free(w),w=e.mallocInt32(qe));var We=o.nextPow2(2*Be);c.length<We&&(e.free(c),c=e.mallocDouble(We))}(C,N+P);var $,X=0,te=2*C;for(E(X++,0,0,N,0,P,I?16:0,-1/0,1/0),I||E(X++,0,0,P,0,N,1,-1/0,1/0);X>0;){var ae=6*(X-=1),J=w[ae],ee=w[ae+1],se=w[ae+2],G=w[ae+3],H=w[ae+4],Y=w[ae+5],oe=2*X,W=c[oe],ne=c[oe+1],re=1&Y,ce=!!(16&Y),fe=F,me=L,pe=j,we=U;if(re&&(fe=j,me=U,pe=F,we=L),!(2&Y&&(se=f(C,J,ee,se,fe,me,ne),ee>=se)||4&Y&&(ee=g(C,J,ee,se,fe,me,W))>=se)){var ye=se-ee,Te=H-G;if(ce){if(C*ye*(ye+Te)<1<<22){if(void 0!==($=v.scanComplete(C,J,O,ee,se,fe,me,G,H,pe,we)))return $;continue}}else{if(C*Math.min(ye,Te)<128){if(void 0!==($=l(C,J,O,re,ee,se,fe,me,G,H,pe,we)))return $;continue}if(C*ye*Te<1<<22){if(void 0!==($=v.scanBipartite(C,J,O,re,ee,se,fe,me,G,H,pe,we)))return $;continue}}var Le=d(C,J,ee,se,fe,me,W,ne);if(ee<Le)if(C*(Le-ee)<128){if(void 0!==($=i(C,J+1,O,ee,Le,fe,me,G,H,pe,we)))return $}else if(J===C-2){if(void 0!==($=re?v.sweepBipartite(C,O,G,H,pe,we,ee,Le,fe,me):v.sweepBipartite(C,O,ee,Le,fe,me,G,H,pe,we)))return $}else E(X++,J+1,ee,Le,G,H,re,-1/0,1/0),E(X++,J+1,G,H,ee,Le,1^re,-1/0,1/0);if(Le<se){var Oe=h(C,J,G,H,pe,we),Re=pe[te*Oe+J],Ve=p(C,J,Oe,H,pe,we,Re);if(Ve<H&&E(X++,J,Le,se,Ve,H,(4|re)+(ce?16:0),Re,ne),G<Oe&&E(X++,J,Le,se,G,Oe,(2|re)+(ce?16:0),W,Re),Oe+1===Ve){if(void 0!==($=ce?S(C,J,O,Le,se,fe,me,Oe,pe,we[Oe]):M(C,J,O,re,Le,se,fe,me,Oe,pe,we[Oe])))return $}else if(Oe<Ve){var _e;if(ce){if(Le<(_e=m(C,J,Le,se,fe,me,Re))){var Ae=p(C,J,Le,_e,fe,me,Re);if(J===C-2){if(Le<Ae&&void 0!==($=v.sweepComplete(C,O,Le,Ae,fe,me,Oe,Ve,pe,we))||Ae<_e&&void 0!==($=v.sweepBipartite(C,O,Ae,_e,fe,me,Oe,Ve,pe,we)))return $}else Le<Ae&&E(X++,J+1,Le,Ae,Oe,Ve,16,-1/0,1/0),Ae<_e&&(E(X++,J+1,Ae,_e,Oe,Ve,0,-1/0,1/0),E(X++,J+1,Oe,Ve,Ae,_e,1,-1/0,1/0))}}else Le<(_e=re?u(C,J,Le,se,fe,me,Re):m(C,J,Le,se,fe,me,Re))&&(J===C-2?$=re?v.sweepBipartite(C,O,Oe,Ve,pe,we,Le,_e,fe,me):v.sweepBipartite(C,O,Le,_e,fe,me,Oe,Ve,pe,we):(E(X++,J+1,Le,_e,Oe,Ve,re,-1/0,1/0),E(X++,J+1,Oe,Ve,Le,_e,1^re,-1/0,1/0)))}}}}};var e=b("typedarray-pool"),o=b("bit-twiddle"),a=b("./brute"),l=a.partial,i=a.full,v=b("./sweep"),h=b("./median"),s=b("./partition"),d=s("!(lo>=p0)&&!(p1>=hi)"),p=s("lo===p0"),f=s("lo<p0"),g=s("hi<=p0"),m=s("lo<=p0&&p0<=hi"),u=s("lo<p0&&p0<=hi"),w=e.mallocInt32(1024),c=e.mallocDouble(1024);function E(C,O,I,N,F,L,P,j,U){var $=6*C;w[$]=O,w[$+1]=I,w[$+2]=N,w[$+3]=F,w[$+4]=L,w[$+5]=P;var X=2*C;c[X]=j,c[X+1]=U}function M(C,O,I,N,F,L,P,j,U,$,X){var te=2*C,ae=U*te,J=$[ae+O];e:for(var ee=F,se=F*te;ee<L;++ee,se+=te){var G=P[se+O],H=P[se+O+C];if(!(J<G||H<J||N&&J===G)){for(var Y,oe=j[ee],W=O+1;W<C;++W)if(G=P[se+W],(H=P[se+W+C])<$[ae+W]||$[ae+W+C]<G)continue e;if(void 0!==(Y=N?I(X,oe):I(oe,X)))return Y}}}function S(C,O,I,N,F,L,P,j,U,$){var X=2*C,te=j*X,ae=U[te+O];e:for(var J=N,ee=N*X;J<F;++J,ee+=X){var se=P[J];if(se!==$){var G=L[ee+O],H=L[ee+O+C];if(!(ae<G||H<ae)){for(var Y=O+1;Y<C;++Y)if(G=L[ee+Y],(H=L[ee+Y+C])<U[te+Y]||U[te+Y+C]<G)continue e;var ne=I(se,$);if(void 0!==ne)return ne}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(b,T,_){"use strict";T.exports=function(a,l,i,v,h,s){if(v<=i+1)return i;for(var d=i,p=v,f=v+i>>>1,g=2*a,m=f,u=h[g*f+l];d<p;){if(p-d<8){o(a,l,d,p,h,s),u=h[g*f+l];break}var w=p-d,c=Math.random()*w+d|0,E=h[g*c+l],M=Math.random()*w+d|0,S=h[g*M+l],C=Math.random()*w+d|0,O=h[g*C+l];E<=S?O>=S?(m=M,u=S):E>=O?(m=c,u=E):(m=C,u=O):S>=O?(m=M,u=S):O>=E?(m=c,u=E):(m=C,u=O);for(var I=g*(p-1),N=g*m,F=0;F<g;++F,++I,++N){var L=h[I];h[I]=h[N],h[N]=L}var P=s[p-1];for(s[p-1]=s[m],s[m]=P,I=g*(p-1),N=g*(m=e(a,l,d,p-1,h,s,u)),F=0;F<g;++F,++I,++N)L=h[I],h[I]=h[N],h[N]=L;if(P=s[p-1],s[p-1]=s[m],s[m]=P,f<m){for(p=m-1;d<p&&h[g*(p-1)+l]===u;)p-=1;p+=1}else{if(!(m<f))break;for(d=m+1;d<p&&h[g*d+l]===u;)d+=1}}return e(a,l,i,f,h,s,h[g*f+l])};var e=b("./partition")("lo<p0");function o(a,l,i,v,h,s){for(var d=2*a,p=d*(i+1)+l,f=i+1;f<v;++f,p+=d)for(var g=h[p],m=f,u=d*(f-1);m>i&&h[u+l]>g;--m,u-=d){for(var w=u,c=u+d,E=0;E<d;++E,++w,++c){var M=h[w];h[w]=h[c],h[c]=M}var S=s[m];s[m]=s[m-1],s[m-1]=S}}},{"./partition":39}],39:[function(b,T,_){"use strict";T.exports=function(o){return e[o]};var e={"lo===p0":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=a,u=l;i>u;++u,p+=d)if(v[p+m]===s)if(g===u)g+=1,f+=d;else{for(var w=0;d>w;++w){var c=v[p+w];v[p+w]=v[f],v[f++]=c}var E=h[u];h[u]=h[g],h[g++]=E}return g},"lo<p0":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=a,u=l;i>u;++u,p+=d)if(v[p+m]<s)if(g===u)g+=1,f+=d;else{for(var w=0;d>w;++w){var c=v[p+w];v[p+w]=v[f],v[f++]=c}var E=h[u];h[u]=h[g],h[g++]=E}return g},"lo<=p0":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=o+a,u=l;i>u;++u,p+=d)if(v[p+m]<=s)if(g===u)g+=1,f+=d;else{for(var w=0;d>w;++w){var c=v[p+w];v[p+w]=v[f],v[f++]=c}var E=h[u];h[u]=h[g],h[g++]=E}return g},"hi<=p0":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=o+a,u=l;i>u;++u,p+=d)if(v[p+m]<=s)if(g===u)g+=1,f+=d;else{for(var w=0;d>w;++w){var c=v[p+w];v[p+w]=v[f],v[f++]=c}var E=h[u];h[u]=h[g],h[g++]=E}return g},"lo<p0&&p0<=hi":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=a,u=o+a,w=l;i>w;++w,p+=d)if(v[p+m]<s&&s<=v[p+u])if(g===w)g+=1,f+=d;else{for(var M=0;d>M;++M){var S=v[p+M];v[p+M]=v[f],v[f++]=S}var C=h[w];h[w]=h[g],h[g++]=C}return g},"lo<=p0&&p0<=hi":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=a,u=o+a,w=l;i>w;++w,p+=d)if(v[p+m]<=s&&s<=v[p+u])if(g===w)g+=1,f+=d;else{for(var M=0;d>M;++M){var S=v[p+M];v[p+M]=v[f],v[f++]=S}var C=h[w];h[w]=h[g],h[g++]=C}return g},"!(lo>=p0)&&!(p1>=hi)":function(o,a,l,i,v,h,s,d){for(var p=2*o,f=p*l,g=f,m=l,u=a,w=o+a,c=l;i>c;++c,f+=p)if(!(v[f+u]>=s||d>=v[f+w]))if(m===c)m+=1,g+=p;else{for(var S=0;p>S;++S){var C=v[f+S];v[f+S]=v[g],v[g++]=C}var O=h[c];h[c]=h[m],h[m++]=O}return m}}},{}],40:[function(b,T,_){"use strict";function e(s,d,p){for(var f=2*(s+1),g=s+1;g<=d;++g){for(var m=p[f++],u=p[f++],w=g,c=f-2;w-- >s;){var E=p[c-2],M=p[c-1];if(E<m||E===m&&M<u)break;p[c]=E,p[c+1]=M,c-=2}p[c]=m,p[c+1]=u}}function o(s,d,p){var f=p[s*=2],g=p[s+1];p[s]=p[d*=2],p[s+1]=p[d+1],p[d]=f,p[d+1]=g}function a(s,d,p){p[s*=2]=p[d*=2],p[s+1]=p[d+1]}function l(s,d,p,f){p*=2;var g=f[s*=2],m=f[s+1];f[s]=f[d*=2],f[s+1]=f[d+1],f[d]=f[p],f[d+1]=f[p+1],f[p]=g,f[p+1]=m}function i(s,d,p,f,g){g[s*=2]=g[d*=2],g[d]=p,g[s+1]=g[d+1],g[d+1]=f}function v(s,d,p){var f=p[s*=2],g=p[d*=2];return!(f<g)&&(f!==g||p[s+1]>p[d+1])}function h(s,d,p,f){var g=f[s*=2];return g<d||g===d&&f[s+1]<p}T.exports=function(s,d){d<=128?e(0,d-1,s):function p(f,g,m){var u=(g-f+1)/6|0,w=f+u,c=g-u,E=f+g>>1,M=E-u,S=E+u,C=w,O=M,I=E,N=S,F=c,L=f+1,P=g-1,j=0;v(C,O,m)&&(j=C,C=O,O=j),v(N,F,m)&&(j=N,N=F,F=j),v(C,I,m)&&(j=C,C=I,I=j),v(O,I,m)&&(j=O,O=I,I=j),v(C,N,m)&&(j=C,C=N,N=j),v(I,N,m)&&(j=I,I=N,N=j),v(O,F,m)&&(j=O,O=F,F=j),v(O,I,m)&&(j=O,O=I,I=j),v(N,F,m)&&(j=N,N=F,F=j);for(var U=m[2*O],$=m[2*O+1],X=m[2*N],te=m[2*N+1],ae=2*C,J=2*I,ee=2*F,se=2*w,G=2*E,H=2*c,Y=0;Y<2;++Y){var W=m[J+Y],ne=m[ee+Y];m[se+Y]=m[ae+Y],m[G+Y]=W,m[H+Y]=ne}a(M,f,m),a(S,g,m);for(var re=L;re<=P;++re)if(h(re,U,$,m))re!==L&&o(re,L,m),++L;else if(!h(re,X,te,m))for(;;){if(h(P,X,te,m)){h(P,U,$,m)?(l(re,L,P,m),++L,--P):(o(re,P,m),--P);break}if(--P<re)break}i(f,L-1,U,$,m),i(g,P+1,X,te,m),L-2-f<=32?e(f,L-2,m):p(f,L-2,m),g-(P+2)<=32?e(P+2,g,m):p(P+2,g,m),P-L<=32?e(L,P,m):p(L,P,m)}(0,d-1,s)}},{}],41:[function(b,T,_){"use strict";T.exports={init:function(m){var u=o.nextPow2(m);l.length<u&&(e.free(l),l=e.mallocInt32(u)),i.length<u&&(e.free(i),i=e.mallocInt32(u)),v.length<u&&(e.free(v),v=e.mallocInt32(u)),h.length<u&&(e.free(h),h=e.mallocInt32(u)),s.length<u&&(e.free(s),s=e.mallocInt32(u)),d.length<u&&(e.free(d),d=e.mallocInt32(u));var w=8*u;p.length<w&&(e.free(p),p=e.mallocDouble(w))},sweepBipartite:function(m,u,w,c,E,M,S,C,O,I){for(var N=0,F=2*m,L=m-1,P=F-1,j=w;j<c;++j){var U=M[j],$=F*j;p[N++]=E[$+L],p[N++]=-(U+1),p[N++]=E[$+P],p[N++]=U}for(j=S;j<C;++j){U=I[j]+(1<<28);var X=F*j;p[N++]=O[X+L],p[N++]=-U,p[N++]=O[X+P],p[N++]=U}var te=N>>>1;a(p,te);var ae=0,J=0;for(j=0;j<te;++j){var ee=0|p[2*j+1];if(ee>=1<<28)f(v,h,J--,ee=ee-(1<<28)|0);else if(ee>=0)f(l,i,ae--,ee);else if(ee<=-(1<<28)){ee=-ee-(1<<28)|0;for(var se=0;se<ae;++se)if(void 0!==(G=u(l[se],ee)))return G;g(v,h,J++,ee)}else{for(ee=-ee-1|0,se=0;se<J;++se){var G;if(void 0!==(G=u(ee,v[se])))return G}g(l,i,ae++,ee)}}},sweepComplete:function(m,u,w,c,E,M,S,C,O,I){for(var N=0,F=2*m,L=m-1,P=F-1,j=w;j<c;++j){var U=M[j]+1<<1,$=F*j;p[N++]=E[$+L],p[N++]=-U,p[N++]=E[$+P],p[N++]=U}for(j=S;j<C;++j){U=I[j]+1<<1;var X=F*j;p[N++]=O[X+L],p[N++]=1|-U,p[N++]=O[X+P],p[N++]=1|U}var te=N>>>1;a(p,te);var ae=0,J=0,ee=0;for(j=0;j<te;++j){var se=0|p[2*j+1],G=1&se;if(j<te-1&&se>>1==p[2*j+3]>>1&&(G=2,j+=1),se<0){for(var H=-(se>>1)-1,Y=0;Y<ee;++Y)if(void 0!==(oe=u(s[Y],H)))return oe;if(0!==G)for(Y=0;Y<ae;++Y)if(void 0!==(oe=u(l[Y],H)))return oe;if(1!==G)for(Y=0;Y<J;++Y){var oe;if(void 0!==(oe=u(v[Y],H)))return oe}0===G?g(l,i,ae++,H):1===G?g(v,h,J++,H):2===G&&g(s,d,ee++,H)}else H=(se>>1)-1,0===G?f(l,i,ae--,H):1===G?f(v,h,J--,H):2===G&&f(s,d,ee--,H)}},scanBipartite:function(m,u,w,c,E,M,S,C,O,I,N,F){var L=0,P=2*m,j=u,U=u+m,$=1,X=1;c?X=1<<28:$=1<<28;for(var te=E;te<M;++te){var ae=te+$,J=P*te;p[L++]=S[J+j],p[L++]=-ae,p[L++]=S[J+U],p[L++]=ae}for(te=O;te<I;++te)ae=te+X,p[L++]=N[P*te+j],p[L++]=-ae;var se=L>>>1;a(p,se);var G=0;for(te=0;te<se;++te){var H=0|p[2*te+1];if(H<0){var Y=!1;if((ae=-H)>=1<<28?(Y=!c,ae-=1<<28):(Y=!!c,ae-=1),Y)g(l,i,G++,ae);else{var oe=F[ae],W=P*ae,ne=N[W+u+1],re=N[W+u+1+m];e:for(var ce=0;ce<G;++ce){var fe=l[ce],me=P*fe;if(!(re<S[me+u+1]||S[me+u+1+m]<ne)){for(var pe=u+2;pe<m;++pe)if(N[W+pe+m]<S[me+pe]||S[me+pe+m]<N[W+pe])continue e;var we,ye=C[fe];if(void 0!==(we=c?w(oe,ye):w(ye,oe)))return we}}}}else f(l,i,G--,H-$)}},scanComplete:function(m,u,w,c,E,M,S,C,O,I,N){for(var F=0,L=2*m,P=u,j=u+m,U=c;U<E;++U){var $=U+268435456,X=L*U;p[F++]=M[X+P],p[F++]=-$,p[F++]=M[X+j],p[F++]=$}for(U=C;U<O;++U)$=U+1,p[F++]=I[L*U+P],p[F++]=-$;var ae=F>>>1;a(p,ae);var J=0;for(U=0;U<ae;++U){var ee=0|p[2*U+1];if(ee<0)if(($=-ee)>=1<<28)l[J++]=$-(1<<28);else{var se=N[$-=1],G=L*$,H=I[G+u+1],Y=I[G+u+1+m];e:for(var oe=0;oe<J;++oe){var W=l[oe],ne=S[W];if(ne===se)break;var re=L*W;if(!(Y<M[re+u+1]||M[re+u+1+m]<H)){for(var ce=u+2;ce<m;++ce)if(I[G+ce+m]<M[re+ce]||M[re+ce+m]<I[G+ce])continue e;var fe=w(ne,se);if(void 0!==fe)return fe}}}else{for($=ee-(1<<28),oe=J-1;oe>=0;--oe)if(l[oe]===$){for(ce=oe+1;ce<J;++ce)l[ce-1]=l[ce];break}--J}}}};var e=b("typedarray-pool"),o=b("bit-twiddle"),a=b("./sort"),l=e.mallocInt32(1024),i=e.mallocInt32(1024),v=e.mallocInt32(1024),h=e.mallocInt32(1024),s=e.mallocInt32(1024),d=e.mallocInt32(1024),p=e.mallocDouble(8192);function f(m,u,w,c){var E=u[c],M=m[w-1];m[E]=M,u[M]=E}function g(m,u,w,c){m[w]=c,u[c]=w}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(b,T,_){"use strict";var e=b("./lib/monotone"),o=b("./lib/triangulation"),a=b("./lib/delaunay"),l=b("./lib/filter");function i(s){return[Math.min(s[0],s[1]),Math.max(s[0],s[1])]}function v(s,d){return s[0]-d[0]||s[1]-d[1]}function h(s,d,p){return d in s?s[d]:p}T.exports=function(s,d,p){Array.isArray(d)?(p=p||{},d=d||[]):(p=d||{},d=[]);var f=!!h(p,"delaunay",!0),g=!!h(p,"interior",!0),m=!!h(p,"exterior",!0),u=!!h(p,"infinity",!1);if(!g&&!m||0===s.length)return[];var w=e(s,d);if(f||g!==m||u){for(var c=o(s.length,d.map(i).sort(v)),E=0;E<w.length;++E){var M=w[E];c.addTriangle(M[0],M[1],M[2])}return f&&a(s,c),m?g?u?l(c,0,u):c.cells():l(c,1,u):l(c,-1)}return w}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(b,T,_){"use strict";var e=b("robust-in-sphere")[4];function o(a,l,i,v,h,s){var d=l.opposite(v,h);if(!(d<0)){if(h<v){var p=v;v=h,h=p,p=s,s=d,d=p}l.isConstraint(v,h)||e(a[v],a[h],a[s],a[d])<0&&i.push(v,h)}}b("binary-search-bounds"),T.exports=function(a,l){for(var i=[],v=a.length,h=l.stars,s=0;s<v;++s)for(var d=h[s],p=1;p<d.length;p+=2)if(!((u=d[p])<s||l.isConstraint(s,u))){for(var f=d[p-1],g=-1,m=1;m<d.length;m+=2)if(d[m-1]===u){g=d[m];break}g<0||e(a[s],a[u],a[f],a[g])<0&&i.push(s,u)}for(;i.length>0;){for(var u=i.pop(),w=(f=-1,g=-1,d=h[s=i.pop()],1);w<d.length;w+=2){var c=d[w-1],E=d[w];c===u?g=E:E===u&&(f=c)}f<0||g<0||e(a[s],a[u],a[f],a[g])>=0||(l.flip(s,u),o(a,l,i,f,s,g),o(a,l,i,s,g,f),o(a,l,i,g,u,f),o(a,l,i,u,f,g))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(b,T,_){"use strict";var e,o=b("binary-search-bounds");function a(i,v,h,s,d,p,f){this.cells=i,this.neighbor=v,this.flags=s,this.constraint=h,this.active=d,this.next=p,this.boundary=f}function l(i,v){return i[0]-v[0]||i[1]-v[1]||i[2]-v[2]}T.exports=function(i,v,h){var s=function(O,I){for(var N=O.cells(),F=N.length,L=0;L<F;++L){var P=(G=N[L])[0],j=G[1],U=G[2];j<U?j<P&&(G[0]=j,G[1]=U,G[2]=P):U<P&&(G[0]=U,G[1]=P,G[2]=j)}N.sort(l);var $=new Array(F);for(L=0;L<$.length;++L)$[L]=0;var X=[],te=[],ae=new Array(3*F),J=new Array(3*F),ee=null;I&&(ee=[]);var se=new a(N,ae,J,$,X,te,ee);for(L=0;L<F;++L)for(var G=N[L],H=0;H<3;++H){var Y=ae[3*L+H]=se.locate(j=G[(H+1)%3],P=G[H],O.opposite(j,P)),oe=J[3*L+H]=O.isConstraint(P,j);Y<0&&(oe?te.push(L):(X.push(L),$[L]=1),I&&ee.push([j,P,-1]))}return se}(i,h);if(0===v)return h?s.cells.concat(s.boundary):s.cells;for(var d=1,p=s.active,f=s.next,g=s.flags,m=s.cells,u=s.constraint,w=s.neighbor;p.length>0||f.length>0;){for(;p.length>0;){var c=p.pop();if(g[c]!==-d){g[c]=d;for(var E=0;E<3;++E){var M=w[3*c+E];M>=0&&0===g[M]&&(u[3*c+E]?f.push(M):(p.push(M),g[M]=d))}}}var S=f;f=p,p=S,f.length=0,d=-d}var C=function(O,I,N){for(var F=0,L=0;L<O.length;++L)I[L]===N&&(O[F++]=O[L]);return O.length=F,O}(m,g,v);return h?C.concat(s.boundary):C},a.prototype.locate=(e=[0,0,0],function(i,v,h){var s=i,d=v,p=h;return v<h?v<i&&(s=v,d=h,p=i):h<i&&(s=h,d=i,p=v),s<0?-1:(e[0]=s,e[1]=d,e[2]=p,o.eq(this.cells,e,l))})},{"binary-search-bounds":31}],45:[function(b,T,_){"use strict";var e=b("binary-search-bounds"),o=b("robust-orientation")[3];function a(f,g,m,u,w){this.a=f,this.b=g,this.idx=m,this.lowerIds=u,this.upperIds=w}function l(f,g,m,u){this.a=f,this.b=g,this.type=m,this.idx=u}function i(f,g){var m=f.a[0]-g.a[0]||f.a[1]-g.a[1]||f.type-g.type;return m||(0!==f.type&&(m=o(f.a,f.b,g.b))?m:f.idx-g.idx)}function v(f,g){return o(f.a,f.b,g)}function h(f,g,m,u,w){for(var c=e.lt(g,u,v),E=e.gt(g,u,v),M=c;M<E;++M){for(var S=g[M],C=S.lowerIds,O=C.length;O>1&&o(m[C[O-2]],m[C[O-1]],u)>0;)f.push([C[O-1],C[O-2],w]),O-=1;C.length=O,C.push(w);var I=S.upperIds;for(O=I.length;O>1&&o(m[I[O-2]],m[I[O-1]],u)<0;)f.push([I[O-2],I[O-1],w]),O-=1;I.length=O,I.push(w)}}function s(f,g){var m;return(m=f.a[0]<g.a[0]?o(f.a,f.b,g.a):o(g.b,g.a,f.a))?m:(m=g.b[0]<f.b[0]?o(f.a,f.b,g.b):o(g.b,g.a,f.b))||f.idx-g.idx}function d(f,g,m){var u=e.le(f,m,s),w=f[u],c=w.upperIds,E=c[c.length-1];w.upperIds=[E],f.splice(u+1,0,new a(m.a,m.b,m.idx,[E],c))}function p(f,g,m){var u=m.a;m.a=m.b,m.b=u;var w=e.eq(f,m,s);f[w-1].upperIds=f[w].upperIds,f.splice(w,1)}T.exports=function(f,g){for(var m=f.length,u=g.length,w=[],c=0;c<m;++c)w.push(new l(f[c],null,0,c));for(c=0;c<u;++c){var E=g[c],M=f[E[0]],S=f[E[1]];M[0]<S[0]?w.push(new l(M,S,2,c),new l(S,M,1,c)):M[0]>S[0]&&w.push(new l(S,M,2,c),new l(M,S,1,c))}w.sort(i);for(var C=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),O=[new a([C,1],[C,0],-1,[],[],[],[])],I=[],N=(c=0,w.length);c<N;++c){var F=w[c],L=F.type;0===L?h(I,O,f,F.a,F.idx):2===L?d(O,0,F):p(O,0,F)}return I}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(b,T,_){"use strict";var e=b("binary-search-bounds");function o(i,v){this.stars=i,this.edges=v}T.exports=function(i,v){for(var h=new Array(i),s=0;s<i;++s)h[s]=[];return new o(h,v)};var a=o.prototype;function l(i,v,h){for(var s=1,d=i.length;s<d;s+=2)if(i[s-1]===v&&i[s]===h)return i[s-1]=i[d-2],i[s]=i[d-1],void(i.length=d-2)}a.isConstraint=function(){var i=[0,0];function v(h,s){return h[0]-s[0]||h[1]-s[1]}return function(h,s){return i[0]=Math.min(h,s),i[1]=Math.max(h,s),e.eq(this.edges,i,v)>=0}}(),a.removeTriangle=function(i,v,h){var s=this.stars;l(s[i],v,h),l(s[v],h,i),l(s[h],i,v)},a.addTriangle=function(i,v,h){var s=this.stars;s[i].push(v,h),s[v].push(h,i),s[h].push(i,v)},a.opposite=function(i,v){for(var h=this.stars[v],s=1,d=h.length;s<d;s+=2)if(h[s]===i)return h[s-1];return-1},a.flip=function(i,v){var h=this.opposite(i,v),s=this.opposite(v,i);this.removeTriangle(i,v,h),this.removeTriangle(v,i,s),this.addTriangle(i,s,h),this.addTriangle(v,h,s)},a.edges=function(){for(var i=this.stars,v=[],h=0,s=i.length;h<s;++h)for(var d=i[h],p=0,f=d.length;p<f;p+=2)v.push([d[p],d[p+1]]);return v},a.cells=function(){for(var i=this.stars,v=[],h=0,s=i.length;h<s;++h)for(var d=i[h],p=0,f=d.length;p<f;p+=2){var g=d[p],m=d[p+1];h<Math.min(g,m)&&v.push([h,g,m])}return v}},{"binary-search-bounds":31}],47:[function(b,T,_){"use strict";T.exports=function(e){for(var o=1,a=1;a<e.length;++a)for(var l=0;l<a;++l)if(e[a]<e[l])o=-o;else if(e[l]===e[a])return 0;return o}},{}],48:[function(b,T,_){"use strict";var e=b("dup"),o=b("robust-linear-solve");function a(v,h){for(var s=0,d=v.length,p=0;p<d;++p)s+=v[p]*h[p];return s}function l(v){var h=v.length;if(0===h)return[];var s=e([v.length+1,v.length+1],1),d=e([v.length+1],1);s[h][h]=0;for(var p=0;p<h;++p){for(var f=0;f<=p;++f)s[f][p]=s[p][f]=2*a(v[p],v[f]);d[p]=a(v[p],v[p])}var g=o(s,d),m=0,u=g[h+1];for(p=0;p<u.length;++p)m+=u[p];var w=new Array(h);for(p=0;p<h;++p){u=g[p];var c=0;for(f=0;f<u.length;++f)c+=u[f];w[p]=c/m}return w}function i(v){if(0===v.length)return[];for(var h=v[0].length,s=e([h]),d=l(v),p=0;p<v.length;++p)for(var f=0;f<h;++f)s[f]+=v[p][f]*d[p];return s}i.barycenetric=l,T.exports=i},{dup:65,"robust-linear-solve":283}],49:[function(b,T,_){T.exports=function(o){for(var a=e(o),l=0,i=0;i<o.length;++i)for(var v=o[i],h=0;h<a.length;++h)l+=Math.pow(v[h]-a[h],2);return Math.sqrt(l/o.length)};var e=b("circumcenter")},{circumcenter:48}],50:[function(b,T,_){"use strict";T.exports=function(E,M,S){var C,L,j,U;if(S){C=M;for(var O=new Array(M.length),I=0;I<M.length;++I){var N=M[I];O[I]=[N[0],N[1],S[I]]}M=O}for(var F=(j=!!S,void 0,w(M,U=g(L=E,[],f(L)),j),!!U);c(E,M,!!S);)F=!0;if(S&&F)for(C.length=0,S.length=0,I=0;I<M.length;++I)C.push([(N=M[I])[0],N[1]]),S.push(N[2]);return F};var e=b("union-find"),o=b("box-intersect"),a=b("robust-segment-intersect"),l=b("big-rat"),i=b("big-rat/cmp"),v=b("big-rat/to-float"),h=b("rat-vec"),s=b("nextafter"),d=b("./lib/rat-seg-intersect");function p(E){var M=v(E);return[s(M,-1/0),s(M,1/0)]}function f(E){for(var M=new Array(E.length),S=0;S<E.length;++S){var C=E[S];M[S]=[s(C[0],-1/0),s(C[1],-1/0),s(C[0],1/0),s(C[1],1/0)]}return M}function g(E,M,S){for(var C=M.length,O=new e(C),I=[],N=0;N<M.length;++N){var F=M[N],L=p(F[0]),P=p(F[1]);I.push([s(L[0],-1/0),s(P[0],-1/0),s(L[1],1/0),s(P[1],1/0)])}o(I,function(te,ae){O.link(te,ae)});var j=!0,U=new Array(C);for(N=0;N<C;++N)(X=O.find(N))!==N&&(j=!1,E[X]=[Math.min(E[N][0],E[X][0]),Math.min(E[N][1],E[X][1])]);if(j)return null;var $=0;for(N=0;N<C;++N){var X;(X=O.find(N))===N?(U[N]=$,E[$++]=E[N]):U[N]=-1}for(E.length=$,N=0;N<C;++N)U[N]<0&&(U[N]=U[O.find(N)]);return U}function m(E,M){return E[0]-M[0]||E[1]-M[1]}function u(E,M){return E[0]-M[0]||E[1]-M[1]||(E[2]<M[2]?-1:E[2]>M[2]?1:0)}function w(E,M,S){if(0!==E.length){if(M)for(var C=0;C<E.length;++C){var O=M[(N=E[C])[0]],I=M[N[1]];N[0]=Math.min(O,I),N[1]=Math.max(O,I)}else for(C=0;C<E.length;++C){var N;O=(N=E[C])[0],I=N[1],N[0]=Math.min(O,I),N[1]=Math.max(O,I)}E.sort(S?u:m);var F=1;for(C=1;C<E.length;++C){var L=E[C-1],P=E[C];(P[0]!==L[0]||P[1]!==L[1]||S&&P[2]!==L[2])&&(E[F++]=P)}E.length=F}}function c(E,M,S){var L,P,U,C=function(L,P){for(var j=new Array(P.length),U=0;U<P.length;++U){var $=P[U],X=L[$[0]],te=L[$[1]];j[U]=[s(Math.min(X[0],te[0]),-1/0),s(Math.min(X[1],te[1]),-1/0),s(Math.max(X[0],te[0]),1/0),s(Math.max(X[1],te[1]),1/0)]}return j}(E,M),O=(L=E,P=M,U=[],o(C,function($,X){var te=P[$],ae=P[X];te[0]!==ae[0]&&te[0]!==ae[1]&&te[1]!==ae[0]&&te[1]!==ae[1]&&a(L[te[0]],L[te[1]],L[ae[0]],L[ae[1]])&&U.push([$,X])}),U),N=function(L,P,j,U){var $=[];return o(j,U,function(X,te){var ae=P[X];if(ae[0]!==te&&ae[1]!==te){var J=L[te];a(L[ae[0]],L[ae[1]],J,J)&&$.push([X,te])}}),$}(E,M,C,f(E)),F=g(E,function(L,P,j,U,$){var X,te,ae=L.map(function(Te){return[l(Te[0]),l(Te[1])]});for(X=0;X<j.length;++X){var J=j[X],ee=J[1],se=P[te=J[0]],G=P[ee],H=d(h(L[se[0]]),h(L[se[1]]),h(L[G[0]]),h(L[G[1]]));if(H){var Y=L.length;L.push([v(H[0]),v(H[1])]),ae.push(H),U.push([te,Y],[ee,Y])}}for(U.sort(function(Te,Le){if(Te[0]!==Le[0])return Te[0]-Le[0];var Oe=ae[Te[1]],Re=ae[Le[1]];return i(Oe[0],Re[0])||i(Oe[1],Re[1])}),X=U.length-1;X>=0;--X){var oe=P[te=(we=U[X])[0]],W=oe[0],ne=oe[1],re=L[W],ce=L[ne];if((re[0]-ce[0]||re[1]-ce[1])<0){var fe=W;W=ne,ne=fe}oe[0]=W;var me,pe=oe[1]=we[1];for($&&(me=oe[2]);X>0&&U[X-1][0]===te;){var we,ye=(we=U[--X])[1];P.push($?[pe,ye,me]:[pe,ye]),pe=ye}P.push($?[pe,ne,me]:[pe,ne])}return ae}(E,M,O,N,S));return w(M,F,S),!!F||O.length>0||N.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(b,T,_){"use strict";T.exports=function(d,p,f,g){var m=i(p,d),u=i(g,f),w=s(m,u);if(0===l(w))return null;var E=s(u,i(d,f)),M=o(E,w),S=h(m,M);return v(d,S)};var e=b("big-rat/mul"),o=b("big-rat/div"),a=b("big-rat/sub"),l=b("big-rat/sign"),i=b("rat-vec/sub"),v=b("rat-vec/add"),h=b("rat-vec/muls");function s(d,p){return a(e(d[0],p[1]),e(d[1],p[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(b,T,_){T.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(b,T,_){"use strict";var e=b("./colorScale"),o=b("lerp");function a(v){return[v[0]/255,v[1]/255,v[2]/255,v[3]]}function l(v){for(var h,s="#",d=0;d<3;++d)s+=("00"+(h=(h=v[d]).toString(16))).substr(h.length);return s}function i(v){return"rgba("+v.join(",")+")"}T.exports=function(v){var h,s,d,p,f,g,m,u,w,c;if(v||(v={}),u=(v.nshades||72)-1,m=v.format||"hex",(g=v.colormap)||(g="jet"),"string"==typeof g){if(g=g.toLowerCase(),!e[g])throw Error(g+" not a supported colorscale");f=e[g]}else{if(!Array.isArray(g))throw Error("unsupported colormap option",g);f=g.slice()}if(f.length>u+1)throw new Error(g+" map requires nshades to be at least size "+f.length);w=Array.isArray(v.alpha)?2!==v.alpha.length?[1,1]:v.alpha.slice():"number"==typeof v.alpha?[v.alpha,v.alpha]:[1,1],h=f.map(function(O){return Math.round(O.index*u)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var E=f.map(function(O,I){var N=f[I].index,F=f[I].rgb.slice();return 4===F.length&&F[3]>=0&&F[3]<=1||(F[3]=w[0]+(w[1]-w[0])*N),F}),M=[];for(c=0;c<h.length-1;++c){p=h[c+1]-h[c],s=E[c],d=E[c+1];for(var S=0;S<p;S++){var C=S/p;M.push([Math.round(o(s[0],d[0],C)),Math.round(o(s[1],d[1],C)),Math.round(o(s[2],d[2],C)),o(s[3],d[3],C)])}}return M.push(f[f.length-1].rgb.concat(w[1])),"hex"===m?M=M.map(l):"rgbaString"===m?M=M.map(i):"float"===m&&(M=M.map(a)),M}},{"./colorScale":52,lerp:240}],54:[function(b,T,_){"use strict";T.exports=function(h,s,d,p){var f=e(s,d,p);if(0===f){var g=o(e(h,s,d)),m=o(e(h,s,p));if(g===m){if(0===g){var u=v(h,s,d);return u===v(h,s,p)?0:u?1:-1}return 0}return 0===m?g>0||v(h,s,p)?-1:1:0===g?m>0||v(h,s,d)?1:-1:o(m-g)}var c=e(h,s,d);return c>0?f>0&&e(h,s,p)>0?1:-1:c<0?f>0||e(h,s,p)>0?1:-1:e(h,s,p)>0||v(h,s,d)?1:-1};var e=b("robust-orientation"),o=b("signum"),a=b("two-sum"),l=b("robust-product"),i=b("robust-sum");function v(h,s,d){var p=a(h[0],-s[0]),f=a(h[1],-s[1]),g=a(d[0],-s[0]),m=a(d[1],-s[1]),u=i(l(p,g),l(f,m));return u[u.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(b,T,_){"use strict";T.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(b,T,_){T.exports=function(a,l){var i=a.length,v=a.length-l.length;if(v)return v;switch(i){case 0:return 0;case 1:return a[0]-l[0];case 2:return a[0]+a[1]-l[0]-l[1]||e(a[0],a[1])-e(l[0],l[1]);case 3:var h=a[0]+a[1],s=l[0]+l[1];if(v=h+a[2]-(s+l[2]))return v;var d=e(a[0],a[1]),p=e(l[0],l[1]);return e(d,a[2])-e(p,l[2])||e(d+a[2],h)-e(p+l[2],s);case 4:var f=a[0],g=a[1],m=a[2],u=a[3],w=l[0],c=l[1],E=l[2],M=l[3];return f+g+m+u-(w+c+E+M)||e(f,g,m,u)-e(w,c,E,M,w)||e(f+g,f+m,f+u,g+m,g+u,m+u)-e(w+c,w+E,w+M,c+E,c+M,E+M)||e(f+g+m,f+g+u,f+m+u,g+m+u)-e(w+c+E,w+c+M,w+E+M,c+E+M);default:for(var S=a.slice().sort(o),C=l.slice().sort(o),O=0;O<i;++O)if(v=S[O]-C[O])return v;return 0}};var e=Math.min;function o(a,l){return a-l}},{}],57:[function(b,T,_){"use strict";var e=b("compare-cell"),o=b("cell-orientation");T.exports=function(a,l){return e(a,l)||o(a)-o(l)}},{"cell-orientation":47,"compare-cell":56}],58:[function(b,T,_){"use strict";var e=b("./lib/ch1d"),o=b("./lib/ch2d"),a=b("./lib/chnd");T.exports=function(l){var i=l.length;if(0===i)return[];if(1===i)return[[0]];var v=l[0].length;return 0===v?[]:1===v?e(l):2===v?o(l):a(l,v)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(b,T,_){"use strict";T.exports=function(e){for(var o=0,a=0,l=1;l<e.length;++l)e[l][0]<e[o][0]&&(o=l),e[l][0]>e[a][0]&&(a=l);return o<a?[[o],[a]]:o>a?[[a],[o]]:[[o]]}},{}],60:[function(b,T,_){"use strict";T.exports=function(o){var a=e(o),l=a.length;if(l<=2)return[];for(var i=new Array(l),v=a[l-1],h=0;h<l;++h){var s=a[h];i[h]=[v,s],v=s}return i};var e=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(b,T,_){"use strict";T.exports=function(a,l){try{return e(a,!0)}catch(h){var i=o(a);if(i.length<=l)return[];var v=function(s,d){for(var p=s.length,f=new Array(p),g=0;g<d.length;++g)f[g]=s[d[g]];var m=d.length;for(g=0;g<p;++g)d.indexOf(g)<0&&(f[m++]=s[g]);return f}(a,i);return function(s,d){for(var p=s.length,f=d.length,g=0;g<p;++g)for(var m=s[g],u=0;u<m.length;++u){var w=m[u];if(w<f)m[u]=d[w];else{w-=f;for(var c=0;c<f;++c)w>=d[c]&&(w+=1);m[u]=w}}return s}(e(v,!0),i)}};var e=b("incremental-convex-hull"),o=b("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(b,T,_){"use strict";T.exports=function(e,o,a,l,i,v){var h=i-1,s=i*i,d=h*h,p=(1+2*i)*d,f=i*d,g=s*(3-2*i),m=s*h;if(e.length){v||(v=new Array(e.length));for(var u=e.length-1;u>=0;--u)v[u]=p*e[u]+f*o[u]+g*a[u]+m*l[u];return v}return p*e+f*o+g*a+m*l},T.exports.derivative=function(e,o,a,l,i,v){var h=6*i*i-6*i,s=3*i*i-4*i+1,d=-6*i*i+6*i,p=3*i*i-2*i;if(e.length){v||(v=new Array(e.length));for(var f=e.length-1;f>=0;--f)v[f]=h*e[f]+s*o[f]+d*a[f]+p*l[f];return v}return h*e+s*o+d*a[f]+p*l}},{}],63:[function(b,T,_){"use strict";var e=b("incremental-convex-hull"),o=b("uniq");function a(i,v){this.point=i,this.index=v}function l(i,v){for(var h=i.point,s=v.point,d=h.length,p=0;p<d;++p){var f=s[p]-h[p];if(f)return f}return 0}T.exports=function(i,v){var h=i.length;if(0===h)return[];var s=i[0].length;if(s<1)return[];if(1===s)return function(N,F,L){if(1===N)return L?[[-1,0]]:[];var P=F.map(function(te,ae){return[te[0],ae]});P.sort(function(te,ae){return te[0]-ae[0]});for(var j=new Array(N-1),U=1;U<N;++U)j[U-1]=[P[U-1][1],P[U][1]];return L&&j.push([-1,j[0][1]],[j[N-1][1],-1]),j}(h,i,v);for(var d=new Array(h),p=1,f=0;f<h;++f){for(var g=i[f],m=new Array(s+1),u=0,w=0;w<s;++w){var c=g[w];m[w]=c,u+=c*c}m[s]=u,d[f]=new a(m,f),p=Math.max(u,p)}o(d,l),h=d.length;var E=new Array(h+s+1),M=new Array(h+s+1),S=(s+1)*(s+1)*p,C=new Array(s+1);for(f=0;f<=s;++f)C[f]=0;for(C[s]=S,E[0]=C.slice(),M[0]=-1,f=0;f<=s;++f)(m=C.slice())[f]=1,E[f+1]=m,M[f+1]=-1;for(f=0;f<h;++f){var O=d[f];E[f+s+1]=O.point,M[f+s+1]=O.index}var I=e(E,!1);if(I=I.filter(v?function(N){for(var F=0,L=0;L<=s;++L){var P=M[N[L]];if(P<0&&++F>=2)return!1;N[L]=P}return!0}:function(N){for(var F=0;F<=s;++F){var L=M[N[F]];if(L<0)return!1;N[F]=L}return!0}),1&s)for(f=0;f<I.length;++f)m=(O=I[f])[0],O[0]=O[1],O[1]=m;return I}},{"incremental-convex-hull":233,uniq:310}],64:[function(b,T,_){(function(e){(function(){var o=!1;if("undefined"!=typeof Float64Array){var a=new Float64Array(1),l=new Uint32Array(a.buffer);a[0]=1,o=!0,1072693248===l[1]?(T.exports=function(v){return a[0]=v,[l[0],l[1]]},T.exports.pack=function(v,h){return l[0]=v,l[1]=h,a[0]},T.exports.lo=function(v){return a[0]=v,l[0]},T.exports.hi=function(v){return a[0]=v,l[1]}):1072693248===l[0]?(T.exports=function(v){return a[0]=v,[l[1],l[0]]},T.exports.pack=function(v,h){return l[1]=v,l[0]=h,a[0]},T.exports.lo=function(v){return a[0]=v,l[1]},T.exports.hi=function(v){return a[0]=v,l[0]}):o=!1}if(!o){var i=new e(8);T.exports=function(v){return i.writeDoubleLE(v,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]},T.exports.pack=function(v,h){return i.writeUInt32LE(v,0,!0),i.writeUInt32LE(h,4,!0),i.readDoubleLE(0,!0)},T.exports.lo=function(v){return i.writeDoubleLE(v,0,!0),i.readUInt32LE(0,!0)},T.exports.hi=function(v){return i.writeDoubleLE(v,0,!0),i.readUInt32LE(4,!0)}}T.exports.sign=function(v){return T.exports.hi(v)>>>31},T.exports.exponent=function(v){return(T.exports.hi(v)<<1>>>21)-1023},T.exports.fraction=function(v){var h=T.exports.lo(v),s=T.exports.hi(v),d=1048575&s;return 2146435072&s&&(d+=1<<20),[h,d]},T.exports.denormalized=function(v){return!(2146435072&T.exports.hi(v))}}).call(this)}).call(this,b("buffer").Buffer)},{buffer:3}],65:[function(b,T,_){"use strict";T.exports=function(e,o){switch(void 0===o&&(o=0),typeof e){case"number":if(e>0)return function(a,l){var i,v;for(i=new Array(a),v=0;v<a;++v)i[v]=l;return i}(0|e,o);break;case"object":if("number"==typeof e.length)return function a(l,i,v){var h=0|l[v];if(h<=0)return[];var s,d=new Array(h);if(v===l.length-1)for(s=0;s<h;++s)d[s]=i;else for(s=0;s<h;++s)d[s]=a(l,i,v+1);return d}(e,o,0)}return[]}},{}],66:[function(b,T,_){"use strict";T.exports=function(o,a){var l=o.length;if("number"!=typeof a){a=0;for(var i=0;i<l;++i){var v=o[i];a=Math.max(a,v[0],v[1])}a=1+(0|a)}a|=0;var h=new Array(a);for(i=0;i<a;++i)h[i]=[];for(i=0;i<l;++i)h[(v=o[i])[0]].push(v[1]),h[v[1]].push(v[0]);for(var s=0;s<a;++s)e(h[s],function(d,p){return d-p});return h};var e=b("uniq")},{uniq:310}],67:[function(b,T,_){"use strict";T.exports=function(e,o,a){var l=o||0,i=a||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[l*e[12]+e[8],l*e[13]+e[9],l*e[14]+e[10],l*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}},{}],68:[function(b,T,_){"use strict";T.exports=function(h,s,d){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return"number"==typeof h?new l(p=v(h),p,0):new l(h,v(h.length),0);case 2:if("number"==typeof s){var p=v(h.length);return new l(h,p,+s)}d=0;case 3:if(h.length!==s.length)throw new Error("state and velocity lengths must match");return new l(h,s,d)}};var e=b("cubic-hermite"),o=b("binary-search-bounds");function a(h,s,d){return Math.min(s,Math.max(h,d))}function l(h,s,d){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=h.slice().reverse(),this._velocity=s.slice().reverse(),this._time=[d],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var i=l.prototype;function v(h){for(var s=new Array(h),d=0;d<h;++d)s[d]=0;return s}i.flush=function(h){var s=o.gt(this._time,h)-1;s<=0||(this._time.splice(0,s),this._state.splice(0,s*this.dimension),this._velocity.splice(0,s*this.dimension))},i.curve=function(h){var s=this._time,d=s.length,p=o.le(s,h),f=this._scratch[0],g=this._state,m=this._velocity,u=this.dimension,w=this.bounds;if(p<0)for(var c=u-1,E=0;E<u;++E,--c)f[E]=g[c];else if(p>=d-1){c=g.length-1;var M=h-s[d-1];for(E=0;E<u;++E,--c)f[E]=g[c]+M*m[c]}else{c=u*(p+1)-1;var S=s[p],C=s[p+1]-S||1,O=this._scratch[1],I=this._scratch[2],N=this._scratch[3],F=this._scratch[4],L=!0;for(E=0;E<u;++E,--c)O[E]=g[c],N[E]=m[c]*C,I[E]=g[c+u],F[E]=m[c+u]*C,L=L&&O[E]===I[E]&&N[E]===F[E]&&0===N[E];if(L)for(E=0;E<u;++E)f[E]=O[E];else e(O,N,I,F,(h-S)/C,f)}var P=w[0],j=w[1];for(E=0;E<u;++E)f[E]=a(P[E],j[E],f[E]);return f},i.dcurve=function(h){var s=this._time,d=s.length,p=o.le(s,h),f=this._scratch[0],g=this._state,m=this._velocity,u=this.dimension;if(p>=d-1)for(var w=g.length-1,c=0;c<u;++c,--w)f[c]=m[w];else{w=u*(p+1)-1;var E=s[p],M=s[p+1]-E||1,S=this._scratch[1],C=this._scratch[2],O=this._scratch[3],I=this._scratch[4],N=!0;for(c=0;c<u;++c,--w)S[c]=g[w],O[c]=m[w]*M,C[c]=g[w+u],I[c]=m[w+u]*M,N=N&&S[c]===C[c]&&O[c]===I[c]&&0===O[c];if(N)for(c=0;c<u;++c)f[c]=0;else for(e.derivative(S,O,C,I,(h-E)/M,f),c=0;c<u;++c)f[c]/=M}return f},i.lastT=function(){var h=this._time;return h[h.length-1]},i.stable=function(){for(var h=this._velocity,s=h.length,d=this.dimension-1;d>=0;--d)if(h[--s])return!1;return!0},i.jump=function(h){var s=this.lastT(),d=this.dimension;if(!(h<s||arguments.length!==d+1)){var p=this._state,f=this._velocity,g=p.length-this.dimension,m=this.bounds,u=m[0],w=m[1];this._time.push(s,h);for(var c=0;c<2;++c)for(var E=0;E<d;++E)p.push(p[g++]),f.push(0);for(this._time.push(h),E=d;E>0;--E)p.push(a(u[E-1],w[E-1],arguments[E])),f.push(0)}},i.push=function(h){var s=this.lastT(),d=this.dimension;if(!(h<s||arguments.length!==d+1)){var p=this._state,f=this._velocity,g=p.length-this.dimension,m=h-s,u=this.bounds,w=u[0],c=u[1],E=m>1e-6?1/m:0;this._time.push(h);for(var M=d;M>0;--M){var S=a(w[M-1],c[M-1],arguments[M]);p.push(S),f.push((S-p[g++])*E)}}},i.set=function(h){var s=this.dimension;if(!(h<this.lastT()||arguments.length!==s+1)){var d=this._state,p=this._velocity,f=this.bounds,g=f[0],m=f[1];this._time.push(h);for(var u=s;u>0;--u)d.push(a(g[u-1],m[u-1],arguments[u])),p.push(0)}},i.move=function(h){var s=this.lastT(),d=this.dimension;if(!(h<=s||arguments.length!==d+1)){var p=this._state,f=this._velocity,g=p.length-this.dimension,m=this.bounds,u=m[0],w=m[1],c=h-s,E=c>1e-6?1/c:0;this._time.push(h);for(var M=d;M>0;--M){var S=arguments[M];p.push(a(u[M-1],w[M-1],p[g++]+S)),f.push(S*E)}}},i.idle=function(h){var s=this.lastT();if(!(h<s)){var d=this.dimension,p=this._state,f=this._velocity,g=p.length-d,m=this.bounds,u=m[0],w=m[1],c=h-s;this._time.push(h);for(var E=d-1;E>=0;--E)p.push(a(u[E],w[E],p[g]+c*f[g])),f.push(0),g+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(b,T,_){"use strict";function e(u,w,c,E,M,S){this._color=u,this.key=w,this.value=c,this.left=E,this.right=M,this._count=S}function o(u){return new e(u._color,u.key,u.value,u.left,u.right,u._count)}function a(u,w){return new e(u,w.key,w.value,w.left,w.right,w._count)}function l(u){u._count=1+(u.left?u.left._count:0)+(u.right?u.right._count:0)}function i(u,w){this._compare=u,this.root=w}T.exports=function(u){return new i(u||m,null)};var v=i.prototype;function h(u,w){var c;return w.left&&(c=h(u,w.left))?c:(c=u(w.key,w.value))||(w.right?h(u,w.right):void 0)}function s(u,w,c,E){var M;return w(u,E.key)<=0&&(E.left&&(M=s(u,w,c,E.left))||(M=c(E.key,E.value)))?M:E.right?s(u,w,c,E.right):void 0}function d(u,w,c,E,M){var S,C=c(u,M.key),O=c(w,M.key);return C<=0&&(M.left&&(S=d(u,w,c,E,M.left))||O>0&&(S=E(M.key,M.value)))?S:O>0&&M.right?d(u,w,c,E,M.right):void 0}function p(u,w){this.tree=u,this._stack=w}Object.defineProperty(v,"keys",{get:function(){var u=[];return this.forEach(function(w,c){u.push(w)}),u}}),Object.defineProperty(v,"values",{get:function(){var u=[];return this.forEach(function(w,c){u.push(c)}),u}}),Object.defineProperty(v,"length",{get:function(){return this.root?this.root._count:0}}),v.insert=function(u,w){for(var c=this._compare,E=this.root,M=[],S=[];E;){var C=c(u,E.key);M.push(E),S.push(C),E=C<=0?E.left:E.right}M.push(new e(0,u,w,null,null,1));for(var O=M.length-2;O>=0;--O)E=M[O],M[O]=S[O]<=0?new e(E._color,E.key,E.value,M[O+1],E.right,E._count+1):new e(E._color,E.key,E.value,E.left,M[O+1],E._count+1);for(O=M.length-1;O>1;--O){var I=M[O-1];if(E=M[O],1===I._color||1===E._color)break;var N=M[O-2];if(N.left===I)if(I.left===E){if(!(F=N.right)||0!==F._color){N._color=0,N.left=I.right,I._color=1,I.right=N,M[O-2]=I,M[O-1]=E,l(N),l(I),O>=3&&((L=M[O-3]).left===N?L.left=I:L.right=I);break}I._color=1,N.right=a(1,F),N._color=0,O-=1}else{if(!(F=N.right)||0!==F._color){I.right=E.left,N._color=0,N.left=E.right,E._color=1,E.left=I,E.right=N,M[O-2]=E,M[O-1]=I,l(N),l(I),l(E),O>=3&&((L=M[O-3]).left===N?L.left=E:L.right=E);break}I._color=1,N.right=a(1,F),N._color=0,O-=1}else if(I.right===E){if(!(F=N.left)||0!==F._color){N._color=0,N.right=I.left,I._color=1,I.left=N,M[O-2]=I,M[O-1]=E,l(N),l(I),O>=3&&((L=M[O-3]).right===N?L.right=I:L.left=I);break}I._color=1,N.left=a(1,F),N._color=0,O-=1}else{var F;if(!(F=N.left)||0!==F._color){var L;I.left=E.right,N._color=0,N.right=E.left,E._color=1,E.right=I,E.left=N,M[O-2]=E,M[O-1]=I,l(N),l(I),l(E),O>=3&&((L=M[O-3]).right===N?L.right=E:L.left=E);break}I._color=1,N.left=a(1,F),N._color=0,O-=1}}return M[0]._color=1,new i(c,M[0])},v.forEach=function(u,w,c){if(this.root)switch(arguments.length){case 1:return h(u,this.root);case 2:return s(w,this._compare,u,this.root);case 3:return this._compare(w,c)>=0?void 0:d(w,c,this._compare,u,this.root)}},Object.defineProperty(v,"begin",{get:function(){for(var u=[],w=this.root;w;)u.push(w),w=w.left;return new p(this,u)}}),Object.defineProperty(v,"end",{get:function(){for(var u=[],w=this.root;w;)u.push(w),w=w.right;return new p(this,u)}}),v.at=function(u){if(u<0)return new p(this,[]);for(var w=this.root,c=[];;){if(c.push(w),w.left){if(u<w.left._count){w=w.left;continue}u-=w.left._count}if(!u)return new p(this,c);if(u-=1,!w.right||u>=w.right._count)break;w=w.right}return new p(this,[])},v.ge=function(u){for(var w=this._compare,c=this.root,E=[],M=0;c;){var S=w(u,c.key);E.push(c),S<=0&&(M=E.length),c=S<=0?c.left:c.right}return E.length=M,new p(this,E)},v.gt=function(u){for(var w=this._compare,c=this.root,E=[],M=0;c;){var S=w(u,c.key);E.push(c),S<0&&(M=E.length),c=S<0?c.left:c.right}return E.length=M,new p(this,E)},v.lt=function(u){for(var w=this._compare,c=this.root,E=[],M=0;c;){var S=w(u,c.key);E.push(c),S>0&&(M=E.length),c=S<=0?c.left:c.right}return E.length=M,new p(this,E)},v.le=function(u){for(var w=this._compare,c=this.root,E=[],M=0;c;){var S=w(u,c.key);E.push(c),S>=0&&(M=E.length),c=S<0?c.left:c.right}return E.length=M,new p(this,E)},v.find=function(u){for(var w=this._compare,c=this.root,E=[];c;){var M=w(u,c.key);if(E.push(c),0===M)return new p(this,E);c=M<=0?c.left:c.right}return new p(this,[])},v.remove=function(u){var w=this.find(u);return w?w.remove():this},v.get=function(u){for(var w=this._compare,c=this.root;c;){var E=w(u,c.key);if(0===E)return c.value;c=E<=0?c.left:c.right}};var f=p.prototype;function g(u,w){u.key=w.key,u.value=w.value,u.left=w.left,u.right=w.right,u._color=w._color,u._count=w._count}function m(u,w){return u<w?-1:u>w?1:0}Object.defineProperty(f,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(f,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),f.clone=function(){return new p(this.tree,this._stack.slice())},f.remove=function(){var u=this._stack;if(0===u.length)return this.tree;var w=new Array(u.length),c=u[u.length-1];w[w.length-1]=new e(c._color,c.key,c.value,c.left,c.right,c._count);for(var E=u.length-2;E>=0;--E)w[E]=(c=u[E]).left===u[E+1]?new e(c._color,c.key,c.value,w[E+1],c.right,c._count):new e(c._color,c.key,c.value,c.left,w[E+1],c._count);if((c=w[w.length-1]).left&&c.right){var M=w.length;for(c=c.left;c.right;)w.push(c),c=c.right;var S=w[M-1];for(w.push(new e(c._color,S.key,S.value,c.left,c.right,c._count)),w[M-1].key=c.key,w[M-1].value=c.value,E=w.length-2;E>=M;--E)w[E]=new e((c=w[E])._color,c.key,c.value,c.left,w[E+1],c._count);w[M-1].left=w[M]}if(0===(c=w[w.length-1])._color){var C=w[w.length-2];for(C.left===c?C.left=null:C.right===c&&(C.right=null),w.pop(),E=0;E<w.length;++E)w[E]._count--;return new i(this.tree._compare,w[0])}if(c.left||c.right){for(c.left?g(c,c.left):c.right&&g(c,c.right),c._color=1,E=0;E<w.length-1;++E)w[E]._count--;return new i(this.tree._compare,w[0])}if(1===w.length)return new i(this.tree._compare,null);for(E=0;E<w.length;++E)w[E]._count--;var O=w[w.length-2];return function(I){for(var N,F,L,P,j=I.length-1;j>=0;--j){if(N=I[j],0===j)return void(N._color=1);if((F=I[j-1]).left===N){if((L=F.right).right&&0===L.right._color)return P=(L=F.right=o(L)).right=o(L.right),F.right=L.left,L.left=F,L.right=P,L._color=F._color,N._color=1,F._color=1,P._color=1,l(F),l(L),j>1&&((U=I[j-2]).left===F?U.left=L:U.right=L),void(I[j-1]=L);if(L.left&&0===L.left._color)return P=(L=F.right=o(L)).left=o(L.left),F.right=P.left,L.left=P.right,P.left=F,P.right=L,P._color=F._color,F._color=1,L._color=1,N._color=1,l(F),l(L),l(P),j>1&&((U=I[j-2]).left===F?U.left=P:U.right=P),void(I[j-1]=P);if(1===L._color){if(0===F._color)return F._color=1,void(F.right=a(0,L));F.right=a(0,L);continue}L=o(L),F.right=L.left,L.left=F,L._color=F._color,F._color=0,l(F),l(L),j>1&&((U=I[j-2]).left===F?U.left=L:U.right=L),I[j-1]=L,I[j]=F,j+1<I.length?I[j+1]=N:I.push(N),j+=2}else{if((L=F.left).left&&0===L.left._color)return P=(L=F.left=o(L)).left=o(L.left),F.left=L.right,L.right=F,L.left=P,L._color=F._color,N._color=1,F._color=1,P._color=1,l(F),l(L),j>1&&((U=I[j-2]).right===F?U.right=L:U.left=L),void(I[j-1]=L);if(L.right&&0===L.right._color)return P=(L=F.left=o(L)).right=o(L.right),F.left=P.right,L.right=P.left,P.right=F,P.left=L,P._color=F._color,F._color=1,L._color=1,N._color=1,l(F),l(L),l(P),j>1&&((U=I[j-2]).right===F?U.right=P:U.left=P),void(I[j-1]=P);if(1===L._color){if(0===F._color)return F._color=1,void(F.left=a(0,L));F.left=a(0,L);continue}var U;L=o(L),F.left=L.right,L.right=F,L._color=F._color,F._color=0,l(F),l(L),j>1&&((U=I[j-2]).right===F?U.right=L:U.left=L),I[j-1]=L,I[j]=F,j+1<I.length?I[j+1]=N:I.push(N),j+=2}}}(w),O.left===c?O.left=null:O.right=null,new i(this.tree._compare,w[0])},Object.defineProperty(f,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(f,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(f,"index",{get:function(){var u=0,w=this._stack;if(0===w.length){var c=this.tree.root;return c?c._count:0}w[w.length-1].left&&(u=w[w.length-1].left._count);for(var E=w.length-2;E>=0;--E)w[E+1]===w[E].right&&(++u,w[E].left&&(u+=w[E].left._count));return u},enumerable:!0}),f.next=function(){var u=this._stack;if(0!==u.length){var w=u[u.length-1];if(w.right)for(w=w.right;w;)u.push(w),w=w.left;else for(u.pop();u.length>0&&u[u.length-1].right===w;)w=u[u.length-1],u.pop()}},Object.defineProperty(f,"hasNext",{get:function(){var u=this._stack;if(0===u.length)return!1;if(u[u.length-1].right)return!0;for(var w=u.length-1;w>0;--w)if(u[w-1].left===u[w])return!0;return!1}}),f.update=function(u){var w=this._stack;if(0===w.length)throw new Error("Can't update empty node!");var c=new Array(w.length),E=w[w.length-1];c[c.length-1]=new e(E._color,E.key,u,E.left,E.right,E._count);for(var M=w.length-2;M>=0;--M)c[M]=(E=w[M]).left===w[M+1]?new e(E._color,E.key,E.value,c[M+1],E.right,E._count):new e(E._color,E.key,E.value,E.left,c[M+1],E._count);return new i(this.tree._compare,c[0])},f.prev=function(){var u=this._stack;if(0!==u.length){var w=u[u.length-1];if(w.left)for(w=w.left;w;)u.push(w),w=w.right;else for(u.pop();u.length>0&&u[u.length-1].left===w;)w=u[u.length-1],u.pop()}},Object.defineProperty(f,"hasPrev",{get:function(){var u=this._stack;if(0===u.length)return!1;if(u[u.length-1].left)return!0;for(var w=u.length-1;w>0;--w)if(u[w-1].right===u[w])return!0;return!1}})},{}],70:[function(b,T,_){"use strict";T.exports=function(M,S){var C=new s(M);return C.update(S),C};var e=b("./lib/text.js"),o=b("./lib/lines.js"),a=b("./lib/background.js"),l=b("./lib/cube.js"),i=b("./lib/ticks.js"),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function h(M,S){return M[0]=S[0],M[1]=S[1],M[2]=S[2],M}function s(M){this.gl=M,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(M)}var d=s.prototype;function p(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}d.update=function(M){function S(te,ae,J){if(J in M){var ee,se=M[J],G=this[J];this[J]=ee=(te?Array.isArray(se)&&Array.isArray(se[0]):Array.isArray(se))?[ae(se[0]),ae(se[1]),ae(se[2])]:[ae(se),ae(se),ae(se)];for(var H=0;H<3;++H)if(ee[H]!==G[H])return!0}return!1}M=M||{};var C,O=S.bind(this,!1,Number),I=S.bind(this,!1,Boolean),N=S.bind(this,!1,String),F=S.bind(this,!0,function(te){if(Array.isArray(te)){if(3===te.length)return[+te[0],+te[1],+te[2],1];if(4===te.length)return[+te[0],+te[1],+te[2],+te[3]]}return[0,0,0,1]}),L=!1,P=!1;if("bounds"in M)for(var j=M.bounds,U=0;U<2;++U)for(var $=0;$<3;++$)j[U][$]!==this.bounds[U][$]&&(P=!0),this.bounds[U][$]=j[U][$];if("ticks"in M)for(C=M.ticks,L=!0,this.autoTicks=!1,U=0;U<3;++U)this.tickSpacing[U]=0;else O("tickSpacing")&&(this.autoTicks=!0,P=!0);if(this._firstInit&&("ticks"in M||"tickSpacing"in M||(this.autoTicks=!0),P=!0,L=!0,this._firstInit=!1),P&&this.autoTicks&&(C=i.create(this.bounds,this.tickSpacing),L=!0),L){for(U=0;U<3;++U)C[U].sort(function(te,ae){return te.x-ae.x});i.equal(C,this.ticks)?L=!1:this.ticks=C}I("tickEnable"),N("tickFont")&&(L=!0),O("tickSize"),O("tickAngle"),O("tickPad"),F("tickColor");var X=N("labels");N("labelFont")&&(X=!0),I("labelEnable"),O("labelSize"),O("labelPad"),F("labelColor"),I("lineEnable"),I("lineMirror"),O("lineWidth"),F("lineColor"),I("lineTickEnable"),I("lineTickMirror"),O("lineTickLength"),O("lineTickWidth"),F("lineTickColor"),I("gridEnable"),O("gridWidth"),F("gridColor"),I("zeroEnable"),F("zeroLineColor"),O("zeroLineWidth"),I("backgroundEnable"),F("backgroundColor"),this._text?this._text&&(X||L)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&L&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=o(this.gl,this.bounds,this.ticks))};var f=[new p,new p,new p];function g(M,S,C,O,I){for(var N=M.primalOffset,F=M.primalMinor,L=M.mirrorOffset,P=M.mirrorMinor,j=O[S],U=0;U<3;++U)if(S!==U){var $=N,X=L,te=F,ae=P;j&1<<U&&($=L,X=N,te=P,ae=F),$[U]=C[0][U],X[U]=C[1][U],I[U]>0?(te[U]=-1,ae[U]=0):(te[U]=0,ae[U]=1)}}var m=[0,0,0],u={model:v,view:v,projection:v,_ortho:!1};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(M){};var w=[0,0,0],c=[0,0,0],E=[0,0,0];d.draw=function(M){for(var S=this.gl,C=(M=M||u).model||v,O=M.view||v,I=M.projection||v,N=this.bounds,F=M._ortho||!1,L=l(C,O,I,N,F),P=L.cubeEdges,j=L.axis,ae=(F?2:1)*this.pixelRatio*(I[3]*O[12]+I[7]*O[13]+I[11]*O[14]+I[15]*O[15])/S.drawingBufferHeight,J=0;J<3;++J)this.lastCubeProps.cubeEdges[J]=P[J],this.lastCubeProps.axis[J]=j[J];var ee=f;for(J=0;J<3;++J)g(f[J],J,this.bounds,P,j);S=this.gl;var se,me,pe,Ve,_e,Ae,Fe,Pe,Be,qe,We,Je,G=m;for(J=0;J<3;++J)G[J]=this.backgroundEnable[J]?j[J]:0;for(this._background.draw(C,O,I,N,G,this.backgroundColor),this._lines.bind(C,O,I,this),J=0;J<3;++J){var H=[0,0,0];H[J]=j[J]>0?N[1][J]:N[0][J];for(var Y=0;Y<2;++Y){var oe=(J+1+Y)%3,W=(J+1+(1^Y))%3;this.gridEnable[oe]&&this._lines.drawGrid(oe,W,this.bounds,H,this.gridColor[oe],this.gridWidth[oe]*this.pixelRatio)}for(Y=0;Y<2;++Y)oe=(J+1+Y)%3,this.zeroEnable[W=(J+1+(1^Y))%3]&&Math.min(N[0][W],N[1][W])<=0&&Math.max(N[0][W],N[1][W])>=0&&this._lines.drawZero(oe,W,this.bounds,H,this.zeroLineColor[W],this.zeroLineWidth[W]*this.pixelRatio)}for(J=0;J<3;++J){this.lineEnable[J]&&this._lines.drawAxisLine(J,this.bounds,ee[J].primalOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio),this.lineMirror[J]&&this._lines.drawAxisLine(J,this.bounds,ee[J].mirrorOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio);var ne=h(w,ee[J].primalMinor),re=h(c,ee[J].mirrorMinor),ce=this.lineTickLength;for(Y=0;Y<3;++Y){var fe=ae/C[5*Y];ne[Y]*=ce[Y]*fe,re[Y]*=ce[Y]*fe}this.lineTickEnable[J]&&this._lines.drawAxisTicks(J,ee[J].primalOffset,ne,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio),this.lineTickMirror[J]&&this._lines.drawAxisTicks(J,ee[J].mirrorOffset,re,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio)}function we(Ve){(pe=[0,0,0])[Ve]=1}for(this._lines.unbind(),this._text.bind(C,O,I,this.pixelRatio),J=0;J<3;++J){var Te=ee[J].primalMinor,Le=ee[J].mirrorMinor,Oe=h(E,ee[J].primalOffset);for(Y=0;Y<3;++Y)this.lineTickEnable[J]&&(Oe[Y]+=ae*Te[Y]*Math.max(this.lineTickLength[Y],0)/C[5*Y]);var Re=[0,0,0];if(Re[J]=1,this.tickEnable[J]){for(-3600===this.tickAngle[J]?(this.tickAngle[J]=0,this.tickAlign[J]="auto"):this.tickAlign[J]=-1,se[0]="auto"===(se=[this.tickAlign[J],.5,me=1])[0]?0:parseInt(""+se[0]),pe=[0,0,0],Fe=void 0,Pe=void 0,Be=void 0,qe=void 0,We=void 0,Je=void 0,qe=(_e=Te)[Pe=((Ve=J)+2)%3],We=(Ae=Le)[Fe=(Ve+1)%3],Je=Ae[Pe],(Be=_e[Fe])>0&&Je>0||Be>0&&Je<0||Be<0&&Je>0||Be<0&&Je<0?we(Fe):(qe>0&&We>0||qe>0&&We<0||qe<0&&We>0||qe<0&&We<0)&&we(Pe),Y=0;Y<3;++Y)Oe[Y]+=ae*Te[Y]*this.tickPad[Y]/C[5*Y];this._text.drawTicks(J,this.tickSize[J],this.tickAngle[J],Oe,this.tickColor[J],Re,pe,se)}if(this.labelEnable[J]){for(me=0,pe=[0,0,0],this.labels[J].length>4&&(we(J),me=1),se[0]="auto"===(se=[this.labelAlign[J],.5,me])[0]?0:parseInt(""+se[0]),Y=0;Y<3;++Y)Oe[Y]+=ae*Te[Y]*this.labelPad[Y]/C[5*Y];Oe[J]+=.5*(N[0][J]+N[1][J]),this._text.drawLabel(J,this.labelSize[J],this.labelAngle[J],Oe,this.labelColor[J],[0,0,0],pe,se)}}this._text.unbind()},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(b,T,_){"use strict";T.exports=function(v){for(var h=[],s=[],d=0,p=0;p<3;++p)for(var f=(p+1)%3,g=(p+2)%3,m=[0,0,0],u=[0,0,0],w=-1;w<=1;w+=2){s.push(d,d+2,d+1,d+1,d+2,d+3),m[p]=w,u[p]=w;for(var c=-1;c<=1;c+=2){m[f]=c;for(var E=-1;E<=1;E+=2)m[g]=E,h.push(m[0],m[1],m[2],u[0],u[1],u[2]),d+=1}var M=f;f=g,g=M}var S=e(v,new Float32Array(h)),C=e(v,new Uint16Array(s),v.ELEMENT_ARRAY_BUFFER),O=o(v,[{buffer:S,type:v.FLOAT,size:3,offset:0,stride:24},{buffer:S,type:v.FLOAT,size:3,offset:12,stride:24}],C),I=a(v);return I.attributes.position.location=0,I.attributes.normal.location=1,new l(v,S,O,I)};var e=b("gl-buffer"),o=b("gl-vao"),a=b("./shaders").bg;function l(v,h,s,d){this.gl=v,this.buffer=h,this.vao=s,this.shader=d}var i=l.prototype;i.draw=function(v,h,s,d,p,f){for(var g=!1,m=0;m<3;++m)g=g||p[m];if(g){var u=this.gl;u.enable(u.POLYGON_OFFSET_FILL),u.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:v,view:h,projection:s,bounds:d,enable:p,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),u.disable(u.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(b,T,_){"use strict";T.exports=function(c,E,M,S,C){o(i,E,c),o(i,M,i);for(var O=0,I=0;I<2;++I){s[2]=S[I][2];for(var N=0;N<2;++N){s[1]=S[N][1];for(var F=0;F<2;++F)s[0]=S[F][0],p(v[O],s,i),O+=1}}var L=-1;for(I=0;I<8;++I){for(var P=v[I][3],j=0;j<3;++j)h[I][j]=v[I][j]/P;C&&(h[I][2]*=-1),P<0&&(L<0||h[I][2]<h[L][2])&&(L=I)}if(L<0){L=0;for(var U=0;U<3;++U){for(var $=(U+2)%3,X=(U+1)%3,te=-1,ae=-1,J=0;J<2;++J){var ee=(G=J<<U)+(J<<$)+(1-J<<X),se=G+(1-J<<$)+(J<<X);l(h[G],h[ee],h[se],d)<0||(J?te=1:ae=1)}if(te<0||ae<0)ae>te&&(L|=1<<U);else{for(J=0;J<2;++J){ee=(G=J<<U)+(J<<$)+(1-J<<X);var G,H=g([v[G],v[ee],v[se=G+(1-J<<$)+(J<<X)],v[G+(1<<$)+(1<<X)]]);J?te=H:ae=H}ae>te&&(L|=1<<U)}}}var Y=7^L,oe=-1;for(I=0;I<8;++I)I!==L&&I!==Y&&(oe<0||h[oe][1]>h[I][1])&&(oe=I);var W=-1;for(I=0;I<3;++I)(re=oe^1<<I)!==L&&re!==Y&&(W<0&&(W=re),(X=h[re])[0]<h[W][0]&&(W=re));var ne=-1;for(I=0;I<3;++I){var re;(re=oe^1<<I)!==L&&re!==Y&&re!==W&&(ne<0&&(ne=re),(X=h[re])[0]>h[ne][0]&&(ne=re))}var ce=m;ce[0]=ce[1]=ce[2]=0,ce[e.log2(W^oe)]=oe&W,ce[e.log2(oe^ne)]=oe&ne;var fe=7^ne;fe===L||fe===Y?ce[e.log2(ne^(fe=7^W))]=fe&ne:ce[e.log2(W^fe)]=fe&W;var me=u,pe=L;for(U=0;U<3;++U)me[U]=pe&1<<U?-1:1;return w};var e=b("bit-twiddle"),o=b("gl-mat4/multiply"),a=b("split-polygon"),l=b("robust-orientation"),i=new Array(16),v=new Array(8),h=new Array(8),s=new Array(3),d=[0,0,0];function p(c,E,M){for(var S=0;S<4;++S){c[S]=M[12+S];for(var C=0;C<3;++C)c[S]+=E[C]*M[4*C+S]}}!function(){for(var c=0;c<8;++c)v[c]=[1,1,1,1],h[c]=[1,1,1]}();var f=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(c){for(var E=0;E<f.length;++E)if((c=a.positive(c,f[E])).length<3)return 0;var M=c[0],S=M[0]/M[3],C=M[1]/M[3],O=0;for(E=1;E+1<c.length;++E){var I=c[E],N=c[E+1];O+=Math.abs((I[0]/I[3]-S)*(N[1]/N[3]-C)-(I[1]/I[3]-C)*(N[0]/N[3]-S))}return O}var m=[1,1,1],u=[0,0,0],w={cubeEdges:m,axis:u}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(b,T,_){"use strict";T.exports=function(m,u,w){var c=[],E=[0,0,0],M=[0,0,0],S=[0,0,0],C=[0,0,0];c.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var O=0;O<3;++O){for(var I=c.length/3|0,N=0;N<w[O].length;++N){var F=+w[O][N].x;c.push(F,0,1,F,1,1,F,0,-1,F,0,-1,F,1,1,F,1,-1)}var L=c.length/3|0;E[O]=I,M[O]=L-I,I=c.length/3|0;for(var P=0;P<w[O].length;++P)c.push(F=+w[O][P].x,0,1,F,1,1,F,0,-1,F,0,-1,F,1,1,F,1,-1);L=c.length/3|0,S[O]=I,C[O]=L-I}var j=e(m,new Float32Array(c)),U=o(m,[{buffer:j,type:m.FLOAT,size:3,stride:0,offset:0}]),$=a(m);return $.attributes.position.location=0,new f(m,j,U,$,M,E,C,S)};var e=b("gl-buffer"),o=b("gl-vao"),a=b("./shaders").line,l=[0,0,0],i=[0,0,0],v=[0,0,0],h=[0,0,0],s=[1,1];function d(m){return m[0]=m[1]=m[2]=0,m}function p(m,u){return m[0]=u[0],m[1]=u[1],m[2]=u[2],m}function f(m,u,w,c,E,M,S,C){this.gl=m,this.vertBuffer=u,this.vao=w,this.shader=c,this.tickCount=E,this.tickOffset=M,this.gridCount=S,this.gridOffset=C}var g=f.prototype;g.bind=function(m,u,w){this.shader.bind(),this.shader.uniforms.model=m,this.shader.uniforms.view=u,this.shader.uniforms.projection=w,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=s,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(m,u,w,c,E){var M=d(i);this.shader.uniforms.majorAxis=i,M[m]=u[1][m]-u[0][m],this.shader.uniforms.minorAxis=M;var S,C=p(h,w);C[m]+=u[0][m],this.shader.uniforms.offset=C,this.shader.uniforms.lineWidth=E,this.shader.uniforms.color=c,(S=d(v))[(m+2)%3]=1,this.shader.uniforms.screenAxis=S,this.vao.draw(this.gl.TRIANGLES,6),(S=d(v))[(m+1)%3]=1,this.shader.uniforms.screenAxis=S,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(m,u,w,c,E){if(this.tickCount[m]){var M=d(l);M[m]=1,this.shader.uniforms.majorAxis=M,this.shader.uniforms.offset=u,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=c,this.shader.uniforms.lineWidth=E;var S=d(v);S[m]=1,this.shader.uniforms.screenAxis=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[m],this.tickOffset[m])}},g.drawGrid=function(m,u,w,c,E,M){if(this.gridCount[m]){var S=d(i);S[u]=w[1][u]-w[0][u],this.shader.uniforms.minorAxis=S;var C=p(h,c);C[u]+=w[0][u],this.shader.uniforms.offset=C;var O=d(l);O[m]=1,this.shader.uniforms.majorAxis=O;var I=d(v);I[m]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=E,this.vao.draw(this.gl.TRIANGLES,this.gridCount[m],this.gridOffset[m])}},g.drawZero=function(m,u,w,c,E,M){var S=d(i);this.shader.uniforms.majorAxis=S,S[m]=w[1][m]-w[0][m],this.shader.uniforms.minorAxis=S;var C=p(h,c);C[m]+=w[0][m],this.shader.uniforms.offset=C;var O=d(v);O[u]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=E,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(b,T,_){"use strict";var e=b("glslify"),o=b("gl-shader"),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);_.line=function(d){return o(d,a,l,null,[{name:"position",type:"vec3"}])};var i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),v=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);_.text=function(d){return o(d,i,v,null,[{name:"position",type:"vec3"}])};var h=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);_.bg=function(d){return o(d,h,s,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(b,T,_){(function(e){(function(){"use strict";T.exports=function(f,g,m,u,w,c){var E=o(f),M=a(f,[{buffer:E,size:3}]),S=i(f);S.attributes.position.location=0;var C=new s(f,S,E,M);return C.update(g,m,u,w,c),C};var o=b("gl-buffer"),a=b("gl-vao"),l=b("vectorize-text"),i=b("./shaders").text,v=window||e.global||{},h=v.__TEXT_CACHE||{};function s(f,g,m,u){this.gl=f,this.shader=g,this.buffer=m,this.vao=u,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}v.__TEXT_CACHE={};var d=s.prototype,p=[0,0];d.bind=function(f,g,m,u){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=f,w.view=g,w.projection=m,w.pixelScale=u,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},d.unbind=function(){this.vao.unbind()},d.update=function(f,g,m,u,w){var c=[];function E(L,P,j,U,$,X){var te=h[j];te||(te=h[j]={});var ae=te[P];ae||(ae=te[P]=function(ne,re){try{return l(ne,re)}catch(ce){return console.warn('error vectorizing text:"'+ne+'" error:',ce),{cells:[],positions:[]}}}(P,{triangles:!0,font:j,textAlign:"center",textBaseline:"middle",lineSpacing:$,styletags:X}));for(var J=(U||12)/12,ee=ae.positions,se=ae.cells,G=0,H=se.length;G<H;++G)for(var Y=se[G],oe=2;oe>=0;--oe){var W=ee[Y[oe]];c.push(J*W[0],-J*W[1],L)}}for(var M=[0,0,0],S=[0,0,0],C=[0,0,0],O=[0,0,0],I={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},N=0;N<3;++N){C[N]=c.length/3|0,E(.5*(f[0][N]+f[1][N]),g[N],m[N],12,1.25,I),O[N]=(c.length/3|0)-C[N],M[N]=c.length/3|0;for(var F=0;F<u[N].length;++F)u[N][F].text&&E(u[N][F].x,u[N][F].text,u[N][F].font||w,u[N][F].fontSize||12,1.25,I);S[N]=(c.length/3|0)-M[N]}this.buffer.update(c),this.tickOffset=M,this.tickCount=S,this.labelOffset=C,this.labelCount=O},d.drawTicks=function(f,g,m,u,w,c,E,M){this.tickCount[f]&&(this.shader.uniforms.axis=c,this.shader.uniforms.color=w,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=u,this.shader.uniforms.alignDir=E,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.tickCount[f],this.tickOffset[f]))},d.drawLabel=function(f,g,m,u,w,c,E,M){this.labelCount[f]&&(this.shader.uniforms.axis=c,this.shader.uniforms.color=w,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=u,this.shader.uniforms.alignDir=E,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.labelCount[f],this.labelOffset[f]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,b("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(b,T,_){"use strict";function e(o,a){var l=o+"",i=l.indexOf("."),v=0;i>=0&&(v=l.length-i-1);var h=Math.pow(10,v),s=Math.round(o*a*h),d=s+"";if(d.indexOf("e")>=0)return d;var p=s/h,f=s%h;s<0?(p=0|-Math.ceil(p),f=0|-f):(p=0|Math.floor(p),f|=0);var g=""+p;if(s<0&&(g="-"+g),v){for(var m=""+f;m.length<v;)m="0"+m;return g+"."+m}return g}_.create=function(o,a){for(var l=[],i=0;i<3;++i){for(var v=[],h=0;h*a[i]<=o[1][i];++h)v.push({x:h*a[i],text:e(a[i],h)});for(h=-1;h*a[i]>=o[0][i];--h)v.push({x:h*a[i],text:e(a[i],h)});l.push(v)}return l},_.equal=function(o,a){for(var l=0;l<3;++l){if(o[l].length!==a[l].length)return!1;for(var i=0;i<o[l].length;++i){var v=o[l][i],h=a[l][i];if(v.x!==h.x||v.text!==h.text||v.font!==h.font||v.fontColor!==h.fontColor||v.fontSize!==h.fontSize||v.dx!==h.dx||v.dy!==h.dy)return!1}}return!0}},{}],77:[function(b,T,_){"use strict";T.exports=function(w,c,E,M,S){var C=c.model||h,O=c.view||h,I=c.projection||h,N=c._ortho||!1,F=w.bounds,L=(S=S||a(C,O,I,F,N)).axis;l(s,O,C),l(s,I,s);for(var P=m,j=0;j<3;++j)P[j].lo=1/0,P[j].hi=-1/0,P[j].pixelsPerDataUnit=1/0;var U=e(i(s,s));i(s,s);for(var $=0;$<3;++$){var X=($+1)%3,te=($+2)%3,ae=u;e:for(j=0;j<2;++j){var J=[];if(L[$]<0!=!!j){ae[$]=F[j][$];for(var ee=0;ee<2;++ee){ae[X]=F[ee^j][X];for(var se=0;se<2;++se)ae[te]=F[se^ee^j][te],J.push(ae.slice())}var G=N?5:4;for(ee=G;ee===G;++ee){if(0===J.length)continue e;J=o.positive(J,U[ee])}for(ee=0;ee<J.length;++ee){var H=g(u,s,te=J[ee],E,M);for(se=0;se<3;++se)P[se].lo=Math.min(P[se].lo,te[se]),P[se].hi=Math.max(P[se].hi,te[se]),se!==$&&(P[se].pixelsPerDataUnit=Math.min(P[se].pixelsPerDataUnit,Math.abs(H[se])))}}}}return P};var e=b("extract-frustum-planes"),o=b("split-polygon"),a=b("./lib/cube.js"),l=b("gl-mat4/multiply"),i=b("gl-mat4/transpose"),v=b("gl-vec4/transformMat4"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),s=new Float32Array(16);function d(w,c,E){this.lo=w,this.hi=c,this.pixelsPerDataUnit=E}var p=[0,0,0,1],f=[0,0,0,1];function g(w,c,E,M,S){for(var C=0;C<3;++C){for(var O=p,I=f,N=0;N<3;++N)I[N]=O[N]=E[N];I[3]=O[3]=1,I[C]+=1,v(I,I,c),I[3]<0&&(w[C]=1/0),O[C]-=1,v(O,O,c),O[3]<0&&(w[C]=1/0);var F=(O[0]/O[3]-I[0]/I[3])*M,L=(O[1]/O[3]-I[1]/I[3])*S;w[C]=.25*Math.sqrt(F*F+L*L)}return w}var m=[new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0)],u=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(b,T,_){"use strict";var e=b("typedarray-pool"),o=b("ndarray-ops"),a=b("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function i(d,p,f,g,m){this.gl=d,this.type=p,this.handle=f,this.length=g,this.usage=m}var v=i.prototype;function h(d,p,f,g,m,u){var w=m.length*m.BYTES_PER_ELEMENT;if(u<0)return d.bufferData(p,m,g),w;if(w+u>f)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(p,u,m),f}v.bind=function(){this.gl.bindBuffer(this.type,this.handle)},v.unbind=function(){this.gl.bindBuffer(this.type,null)},v.dispose=function(){this.gl.deleteBuffer(this.handle)},v.update=function(d,p){if("number"!=typeof p&&(p=-1),this.bind(),"object"==typeof d&&void 0!==d.shape){var f=d.dtype;if(l.indexOf(f)<0&&(f="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(f=gl.getExtension("OES_element_index_uint")&&"uint16"!==f?"uint32":"uint16"),f===d.dtype&&function(w,c){for(var E=1,M=c.length-1;M>=0;--M){if(c[M]!==E)return!1;E*=w[M]}return!0}(d.shape,d.stride))this.length=h(this.gl,this.type,this.length,this.usage,0===d.offset&&d.data.length===d.shape[0]?d.data:d.data.subarray(d.offset,d.shape[0]),p);else{var g=e.malloc(d.size,f),m=a(g,d.shape);o.assign(m,d),this.length=h(this.gl,this.type,this.length,this.usage,p<0?g:g.subarray(0,d.size),p),e.free(g)}}else if(Array.isArray(d)){var u;u=function s(d,p){for(var f=e.malloc(d.length,p),g=d.length,m=0;m<g;++m)f[m]=d[m];return f}(d,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=h(this.gl,this.type,this.length,this.usage,p<0?u:u.subarray(0,d.length),p),e.free(u)}else if("object"==typeof d&&"number"==typeof d.length)this.length=h(this.gl,this.type,this.length,this.usage,d,p);else{if("number"!=typeof d&&void 0!==d)throw new Error("gl-buffer: Invalid data type");if(p>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(d|=0)<=0&&(d=1),this.gl.bufferData(this.type,0|d,this.usage),this.length=d}},T.exports=function(d,p,f,g){if(g=g||d.DYNAMIC_DRAW,(f=f||d.ARRAY_BUFFER)!==d.ARRAY_BUFFER&&f!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==d.DYNAMIC_DRAW&&g!==d.STATIC_DRAW&&g!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var m=d.createBuffer(),u=new i(d,f,m,0,g);return u.update(p),u}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(b,T,_){"use strict";var e=b("gl-vec3");T.exports=function(a,l){var i=a.positions,v=a.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(0===a.positions.length)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),h;for(var s=0,d=1/0,p=-1/0,f=1/0,g=-1/0,m=1/0,u=-1/0,w=null,c=null,E=[],M=1/0,S=!1,C=0;C<i.length;C++){var O=i[C];d=Math.min(O[0],d),p=Math.max(O[0],p),f=Math.min(O[1],f),g=Math.max(O[1],g),m=Math.min(O[2],m),u=Math.max(O[2],u);var I=v[C];if(e.length(I)>s&&(s=e.length(I)),C){var N=2*e.distance(w,O)/(e.length(c)+e.length(I));N?(M=Math.min(M,N),S=!1):S=!0}S||(w=O,c=I),E.push(I)}var L=[p,g,u];l&&(l[0]=[d,f,m],l[1]=L),0===s&&(s=1);var P=1/s;isFinite(M)||(M=1),h.vectorScale=M;var j=a.coneSize||.5;a.absoluteConeSize&&(j=a.absoluteConeSize*P),h.coneScale=j,C=0;for(var U=0;C<i.length;C++)for(var $=(O=i[C])[0],X=O[1],te=O[2],ae=E[C],J=e.length(ae)*P,ee=0;ee<8;ee++){h.positions.push([$,X,te,U++]),h.positions.push([$,X,te,U++]),h.positions.push([$,X,te,U++]),h.positions.push([$,X,te,U++]),h.positions.push([$,X,te,U++]),h.positions.push([$,X,te,U++]),h.vectors.push(ae),h.vectors.push(ae),h.vectors.push(ae),h.vectors.push(ae),h.vectors.push(ae),h.vectors.push(ae),h.vertexIntensity.push(J,J,J),h.vertexIntensity.push(J,J,J);var se=h.positions.length;h.cells.push([se-6,se-5,se-4],[se-3,se-2,se-1])}return h};var o=b("./lib/shaders");T.exports.createMesh=b("./create_mesh"),T.exports.createConeMesh=function(a,l){return T.exports.createMesh(a,l,{shaders:o,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(b,T,_){"use strict";var e=b("gl-shader"),o=b("gl-buffer"),a=b("gl-vao"),l=b("gl-texture2d"),i=b("gl-mat4/multiply"),v=b("gl-mat4/invert"),h=b("ndarray"),s=b("colormap"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(u,w,c,E,M,S,C,O,I,N,F){this.gl=u,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=c,this.pickShader=E,this.trianglePositions=M,this.triangleVectors=S,this.triangleColors=O,this.triangleUVs=I,this.triangleIds=C,this.triangleVAO=N,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=F,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=d,this._view=d,this._projection=d,this._resolution=[1,1]}var f=p.prototype;function g(u,w){var c=e(u,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return c.attributes.position.location=0,c.attributes.color.location=2,c.attributes.uv.location=3,c.attributes.vector.location=4,c}function m(u,w){var c=e(u,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return c.attributes.position.location=0,c.attributes.id.location=1,c.attributes.vector.location=4,c}f.isOpaque=function(){return this.opacity>=1},f.isTransparent=function(){return this.opacity<1},f.pickSlots=1,f.setPickBase=function(u){this.pickId=u},f.update=function(u){u=u||{};var w=this.gl;this.dirty=!0,"lightPosition"in u&&(this.lightPosition=u.lightPosition),"opacity"in u&&(this.opacity=u.opacity),"ambient"in u&&(this.ambientLight=u.ambient),"diffuse"in u&&(this.diffuseLight=u.diffuse),"specular"in u&&(this.specularLight=u.specular),"roughness"in u&&(this.roughness=u.roughness),"fresnel"in u&&(this.fresnel=u.fresnel),void 0!==u.tubeScale&&(this.tubeScale=u.tubeScale),void 0!==u.vectorScale&&(this.vectorScale=u.vectorScale),void 0!==u.coneScale&&(this.coneScale=u.coneScale),void 0!==u.coneOffset&&(this.coneOffset=u.coneOffset),u.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(oe){for(var W=s({colormap:oe,nshades:256,format:"rgba"}),ne=new Uint8Array(1024),re=0;re<256;++re){for(var ce=W[re],fe=0;fe<3;++fe)ne[4*re+fe]=ce[fe];ne[4*re+3]=255*ce[3]}return h(ne,[256,256,4],[4,0,1])}(u.colormap)),this.texture.generateMipmap());var c=u.cells,E=u.positions,M=u.vectors;if(E&&c&&M){var S=[],C=[],O=[],I=[],N=[];this.cells=c,this.positions=E,this.vectors=M;var F=u.meshColor||[1,1,1,1],L=u.vertexIntensity,P=1/0,j=-1/0;if(L)if(u.vertexIntensityBounds)P=+u.vertexIntensityBounds[0],j=+u.vertexIntensityBounds[1];else for(var U=0;U<L.length;++U){var $=L[U];P=Math.min(P,$),j=Math.max(j,$)}else for(U=0;U<E.length;++U)$=E[U][2],P=Math.min(P,$),j=Math.max(j,$);for(this.intensity=L||function(oe){for(var W=oe.length,ne=new Array(W),re=0;re<W;++re)ne[re]=oe[re][2];return ne}(E),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],U=0;U<E.length;++U)for(var X=E[U],te=0;te<3;++te)!isNaN(X[te])&&isFinite(X[te])&&(this.bounds[0][te]=Math.min(this.bounds[0][te],X[te]),this.bounds[1][te]=Math.max(this.bounds[1][te],X[te]));var ae=0;e:for(U=0;U<c.length;++U){var J=c[U];if(3===J.length){for(te=0;te<3;++te){X=E[se=J[te]];for(var ee=0;ee<3;++ee)if(isNaN(X[ee])||!isFinite(X[ee]))continue e}for(te=0;te<3;++te){var se;X=E[se=J[2-te]],S.push(X[0],X[1],X[2],X[3]);var G=M[se];C.push(G[0],G[1],G[2],G[3]||0);var H;O.push(F[0],F[1],F[2],3===F.length?1:F[3]),I.push((H=L?[(L[se]-P)/(j-P),0]:[(X[2]-P)/(j-P),0])[0],H[1]),N.push(U)}ae+=1}}this.triangleCount=ae,this.trianglePositions.update(S),this.triangleVectors.update(C),this.triangleColors.update(O),this.triangleUVs.update(I),this.triangleIds.update(new Uint32Array(N))}},f.drawTransparent=f.draw=function(u){for(var w=this.gl,c=(u=u||{}).model||d,E=u.view||d,M=u.projection||d,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],C=0;C<3;++C)S[0][C]=Math.max(S[0][C],this.clipBounds[0][C]),S[1][C]=Math.min(S[1][C],this.clipBounds[1][C]);var O={model:c,view:E,projection:M,inverseModel:d.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};O.inverseModel=v(O.inverseModel,O.model),w.disable(w.CULL_FACE),this.texture.bind(0);var I=new Array(16);for(i(I,O.view,O.model),i(I,O.projection,I),v(I,I),C=0;C<3;++C)O.eyePosition[C]=I[12+C]/I[15];var N=I[15];for(C=0;C<3;++C)N+=this.lightPosition[C]*I[4*C+3];for(C=0;C<3;++C){for(var F=I[12+C],L=0;L<3;++L)F+=I[4*L+C]*this.lightPosition[L];O.lightPosition[C]=F/N}if(this.triangleCount>0){var P=this.triShader;P.bind(),P.uniforms=O,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},f.drawPick=function(u){for(var w=this.gl,c=(u=u||{}).model||d,E=u.view||d,M=u.projection||d,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],C=0;C<3;++C)S[0][C]=Math.max(S[0][C],this.clipBounds[0][C]),S[1][C]=Math.min(S[1][C],this.clipBounds[1][C]);this._model=[].slice.call(c),this._view=[].slice.call(E),this._projection=[].slice.call(M),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var O={model:c,view:E,projection:M,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},I=this.pickShader;I.bind(),I.uniforms=O,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},f.pick=function(u){if(!u||u.id!==this.pickId)return null;var w=u.value[0]+256*u.value[1]+65536*u.value[2],c=this.cells[w],E=this.positions[c[1]].slice(0,3),M={position:E,dataCoordinate:E,index:Math.floor(c[1]/48)};return"cone"===this.traceType?M.index=Math.floor(c[1]/48):"streamtube"===this.traceType&&(M.intensity=this.intensity[c[1]],M.velocity=this.vectors[c[1]].slice(0,3),M.divergence=this.vectors[c[1]][3],M.index=w),M},f.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},T.exports=function(u,w,c){var E=c.shaders;1===arguments.length&&(u=(w=u).gl);var M=g(u,E),S=m(u,E),C=l(u,h(new Uint8Array([255,255,255,255]),[1,1,4]));C.generateMipmap(),C.minFilter=u.LINEAR_MIPMAP_LINEAR,C.magFilter=u.LINEAR;var O=o(u),I=o(u),N=o(u),F=o(u),L=o(u),j=new p(u,C,M,S,O,I,L,N,F,a(u,[{buffer:O,type:u.FLOAT,size:4},{buffer:L,type:u.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:N,type:u.FLOAT,size:4},{buffer:F,type:u.FLOAT,size:2},{buffer:I,type:u.FLOAT,size:4}]),c.traceType||"cone");return j.update(w),j}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(b,T,_){var e=b("glslify"),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);_.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},_.pickShader={vertex:l,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(b,T,_){T.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(b,T,_){var e=b("./1.0/numbers");T.exports=function(o){return e[o]}},{"./1.0/numbers":82}],84:[function(b,T,_){"use strict";T.exports=function(p){var f=p.gl,g=e(f),m=o(f,[{buffer:g,type:f.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:f.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:f.FLOAT,size:3,offset:28,stride:40}]),u=a(f);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.offset.location=2;var w=new i(f,g,m,u);return w.update(p),w};var e=b("gl-buffer"),o=b("gl-vao"),a=b("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(p,f,g,m){this.gl=p,this.shader=m,this.buffer=f,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var v=i.prototype;function h(p,f){for(var g=0;g<3;++g)p[0][g]=Math.min(p[0][g],f[g]),p[1][g]=Math.max(p[1][g],f[g])}v.isOpaque=function(){return!this.hasAlpha},v.isTransparent=function(){return this.hasAlpha},v.drawTransparent=v.draw=function(p){var f=this.gl,g=this.shader.uniforms;this.shader.bind();var m=g.view=p.view||l,u=g.projection=p.projection||l;g.model=p.model||l,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var S=(p._ortho?2:1)*this.pixelRatio*(u[3]*m[12]+u[7]*m[13]+u[11]*m[14]+u[15]*m[15])/f.drawingBufferHeight;this.vao.bind();for(var C=0;C<3;++C)f.lineWidth(this.lineWidth[C]*this.pixelRatio),g.capSize=this.capSize[C]*S,this.lineCount[C]&&f.drawArrays(f.LINES,this.lineOffset[C],this.lineCount[C]);this.vao.unbind()};var s=function(){for(var p=new Array(3),f=0;f<3;++f){for(var g=[],m=1;m<=2;++m)for(var u=-1;u<=1;u+=2){var w=[0,0,0];w[(m+f)%3]=u,g.push(w)}p[f]=g}return p}();function d(p,f,g,m){for(var u=s[m],w=0;w<u.length;++w){var c=u[w];p.push(f[0],f[1],f[2],g[0],g[1],g[2],g[3],c[0],c[1],c[2])}return u.length}v.update=function(p){"lineWidth"in(p=p||{})&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var f=p.color||[[0,0,0],[0,0,0],[0,0,0]],g=p.position,m=p.error;if(Array.isArray(f[0])||(f=[f,f,f]),g&&m){var u=[],w=g.length,c=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var E=0;E<3;++E){this.lineOffset[E]=c;e:for(var M=0;M<w;++M){for(var S=g[M],C=0;C<3;++C)if(isNaN(S[C])||!isFinite(S[C]))continue e;var N,O=m[M],I=f[E];Array.isArray(I[0])&&(I=f[M]),3===I.length?I=[I[0],I[1],I[2],1]:4===I.length&&(I=[I[0],I[1],I[2],I[3]],!this.hasAlpha&&I[3]<1&&(this.hasAlpha=!0)),isNaN(O[0][E])||isNaN(O[1][E])||(O[0][E]<0&&((N=S.slice())[E]+=O[0][E],u.push(S[0],S[1],S[2],I[0],I[1],I[2],I[3],0,0,0,N[0],N[1],N[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,N),c+=2+d(u,N,I,E)),O[1][E]>0&&((N=S.slice())[E]+=O[1][E],u.push(S[0],S[1],S[2],I[0],I[1],I[2],I[3],0,0,0,N[0],N[1],N[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,N),c+=2+d(u,N,I,E)))}this.lineCount[E]=c-this.lineOffset[E]}this.buffer.update(u)}},v.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(b,T,_){"use strict";var e=b("glslify"),o=b("gl-shader"),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);T.exports=function(i){return o(i,a,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(b,T,_){"use strict";var e=b("gl-texture2d");T.exports=function(w,c,E,M){o||(o=w.FRAMEBUFFER_UNSUPPORTED,a=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,i=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var S=w.getExtension("WEBGL_draw_buffers");if(!v&&S&&function(P,j){var U=P.getParameter(j.MAX_COLOR_ATTACHMENTS_WEBGL);v=new Array(U+1);for(var $=0;$<=U;++$){for(var X=new Array(U),te=0;te<$;++te)X[te]=P.COLOR_ATTACHMENT0+te;for(te=$;te<U;++te)X[te]=P.NONE;v[$]=X}}(w,S),Array.isArray(c)&&(M=E,E=0|c[1],c=0|c[0]),"number"!=typeof c)throw new Error("gl-fbo: Missing shape parameter");var C=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(c<0||c>C||E<0||E>C)throw new Error("gl-fbo: Parameters are too large for FBO");var O=1;if("color"in(M=M||{})){if((O=Math.max(0|M.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(O>1){if(!S)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(O>w.getParameter(S.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+O+" draw buffers")}}var I=w.UNSIGNED_BYTE,N=w.getExtension("OES_texture_float");if(M.float&&O>0){if(!N)throw new Error("gl-fbo: Context does not support floating point textures");I=w.FLOAT}else M.preferFloat&&O>0&&N&&(I=w.FLOAT);var F=!0;"depth"in M&&(F=!!M.depth);var L=!1;return"stencil"in M&&(L=!!M.stencil),new g(w,c,E,I,O,F,L,S)};var o,a,l,i,v=null;function h(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function s(w,c){w.bindFramebuffer(w.FRAMEBUFFER,c[0]),w.bindRenderbuffer(w.RENDERBUFFER,c[1]),w.bindTexture(w.TEXTURE_2D,c[2])}function d(w){switch(w){case o:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case i:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(w,c,E,M,S,C){if(!M)return null;var O=e(w,c,E,S,M);return O.magFilter=w.NEAREST,O.minFilter=w.NEAREST,O.mipSamples=1,O.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,C,w.TEXTURE_2D,O.handle,0),O}function f(w,c,E,M,S){var C=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,C),w.renderbufferStorage(w.RENDERBUFFER,M,c,E),w.framebufferRenderbuffer(w.FRAMEBUFFER,S,w.RENDERBUFFER,C),C}function g(w,c,E,M,S,C,O,I){this.gl=w,this._shape=[0|c,0|E],this._destroyed=!1,this._ext=I,this.color=new Array(S);for(var N=0;N<S;++N)this.color[N]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=M,this._useDepth=C,this._useStencil=O;var F=this,L=[0|c,0|E];Object.defineProperties(L,{0:{get:function(){return F._shape[0]},set:function(P){return F.width=P}},1:{get:function(){return F._shape[1]},set:function(P){return F.height=P}}}),this._shapeVector=L,function(P){var j=h(P.gl),U=P.gl,$=P.handle=U.createFramebuffer(),X=P._shape[0],te=P._shape[1],ae=P.color.length,J=P._ext,ee=P._useStencil,se=P._useDepth,G=P._colorType;U.bindFramebuffer(U.FRAMEBUFFER,$);for(var H=0;H<ae;++H)P.color[H]=p(U,X,te,G,U.RGBA,U.COLOR_ATTACHMENT0+H);0===ae?(P._color_rb=f(U,X,te,U.RGBA4,U.COLOR_ATTACHMENT0),J&&J.drawBuffersWEBGL(v[0])):ae>1&&J.drawBuffersWEBGL(v[ae]);var Y=U.getExtension("WEBGL_depth_texture");Y?ee?P.depth=p(U,X,te,Y.UNSIGNED_INT_24_8_WEBGL,U.DEPTH_STENCIL,U.DEPTH_STENCIL_ATTACHMENT):se&&(P.depth=p(U,X,te,U.UNSIGNED_SHORT,U.DEPTH_COMPONENT,U.DEPTH_ATTACHMENT)):se&&ee?P._depth_rb=f(U,X,te,U.DEPTH_STENCIL,U.DEPTH_STENCIL_ATTACHMENT):se?P._depth_rb=f(U,X,te,U.DEPTH_COMPONENT16,U.DEPTH_ATTACHMENT):ee&&(P._depth_rb=f(U,X,te,U.STENCIL_INDEX,U.STENCIL_ATTACHMENT));var oe=U.checkFramebufferStatus(U.FRAMEBUFFER);if(oe!==U.FRAMEBUFFER_COMPLETE){for(P._destroyed=!0,U.bindFramebuffer(U.FRAMEBUFFER,null),U.deleteFramebuffer(P.handle),P.handle=null,P.depth&&(P.depth.dispose(),P.depth=null),P._depth_rb&&(U.deleteRenderbuffer(P._depth_rb),P._depth_rb=null),H=0;H<P.color.length;++H)P.color[H].dispose(),P.color[H]=null;P._color_rb&&(U.deleteRenderbuffer(P._color_rb),P._color_rb=null),s(U,j),d(oe)}s(U,j)}(this)}var m=g.prototype;function u(w,c,E){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==c||w._shape[1]!==E){var M=w.gl,S=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(c<0||c>S||E<0||E>S)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=c,w._shape[1]=E;for(var C=h(M),O=0;O<w.color.length;++O)w.color[O].shape=w._shape;w._color_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,w._color_rb),M.renderbufferStorage(M.RENDERBUFFER,M.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&M.renderbufferStorage(M.RENDERBUFFER,M.STENCIL_INDEX,w._shape[0],w._shape[1])),M.bindFramebuffer(M.FRAMEBUFFER,w.handle);var I=M.checkFramebufferStatus(M.FRAMEBUFFER);I!==M.FRAMEBUFFER_COMPLETE&&(w.dispose(),s(M,C),d(I)),s(M,C)}}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),2!==w.length)throw new Error("gl-fbo: Shape vector must be length 2");var c=0|w[0],E=0|w[1];return u(this,c,E),[c,E]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return u(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return u(this,this._shape[0],w|=0),w},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var c=0;c<this.color.length;++c)this.color[c].dispose(),this.color[c]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(b,T,_){var e=b("sprintf-js").sprintf,o=b("gl-constants/lookup"),a=b("glsl-shader-name"),l=b("add-line-numbers");T.exports=function(i,v,h){"use strict";var s=a(v)||"of unknown name (see npm glsl-shader-name)",d="unknown type";void 0!==h&&(d=h===o.FRAGMENT_SHADER?"fragment":"vertex");for(var p=e("Error compiling %s shader %s:\n",d,s),f=e("%s%s",p,i),g=i.split("\n"),m={},u=0;u<g.length;u++){var w=g[u];if(""!==w&&"\0"!==w){var c=parseInt(w.split(":")[2]);if(isNaN(c))throw new Error(e("Could not parse error: %s",w));m[c]=w}}var E=l(v).split("\n");for(u=0;u<E.length;u++)if((m[u+3]||m[u+2]||m[u+1])&&(p+=E[u]+"\n",m[u+1])){var S=m[u+1];S=S.substr(S.split(":",3).join(":").length+1).trim(),p+=e("^^^ %s\n\n",S)}return{long:p.trim(),short:f.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(b,T,_){"use strict";T.exports=function(f,g){var m=f.gl,C=new h(f,l(m,v.vertex,v.fragment),l(m,v.pickVertex,v.pickFragment),i(m),i(m),i(m),i(m));return C.update(g),f.addObject(C),C};var e=b("binary-search-bounds"),o=b("iota-array"),a=b("typedarray-pool"),l=b("gl-shader"),i=b("gl-buffer"),v=b("./lib/shaders");function h(f,g,m,u,w,c,E){this.plot=f,this.shader=g,this.pickShader=m,this.positionBuffer=u,this.weightBuffer=w,this.colorBuffer=c,this.idBuffer=E,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var s,f,g,d=h.prototype,p=[0,0,1,0,0,1,1,0,1,1,0,1];d.draw=(s=[1,0,0,0,1,0,0,0,1],function(){var f=this.plot,g=this.shader,m=this.bounds,u=this.numVertices;if(!(u<=0)){var w=f.gl,c=f.dataBox,M=m[3]-m[1],S=c[2]-c[0],C=c[3]-c[1];s[0]=2*(m[2]-m[0])/S,s[4]=2*M/C,s[6]=2*(m[0]-c[0])/S-1,s[7]=2*(m[1]-c[1])/C-1,g.bind();var O=g.uniforms;O.viewTransform=s,O.shape=this.shape;var I=g.attributes;this.positionBuffer.bind(),I.position.pointer(),this.weightBuffer.bind(),I.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),I.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,u)}}),d.drawPick=(f=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0],function(m){var u=this.plot,w=this.pickShader,c=this.bounds,E=this.numVertices;if(!(E<=0)){var M=u.gl,S=u.dataBox,O=c[3]-c[1],I=S[2]-S[0],N=S[3]-S[1];f[0]=2*(c[2]-c[0])/I,f[4]=2*O/N,f[6]=2*(c[0]-S[0])/I-1,f[7]=2*(c[1]-S[1])/N-1;for(var F=0;F<4;++F)g[F]=m>>8*F&255;this.pickOffset=m,w.bind();var L=w.uniforms;L.viewTransform=f,L.pickOffset=g,L.shape=this.shape;var P=w.attributes;return this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(M.UNSIGNED_BYTE,!1),this.idBuffer.bind(),P.pickId.pointer(M.UNSIGNED_BYTE,!1),M.drawArrays(M.TRIANGLES,0,E),m+this.shape[0]*this.shape[1]}}),d.pick=function(f,g,m){var u=this.pickOffset;if(m<u||m>=u+this.shape[0]*this.shape[1])return null;var c=m-u;return{object:this,pointId:c,dataCoord:[this.xData[c%this.shape[0]],this.yData[c/this.shape[0]|0]]}},d.update=function(f){var g=(f=f||{}).shape||[0,0],m=f.x||o(g[0]),u=f.y||o(g[1]),w=f.z||new Float32Array(g[0]*g[1]),c=!1!==f.zsmooth;this.xData=m,this.yData=u;var E,M,S,C,O=f.colorLevels||[0],I=f.colorValues||[0,0,0,1],N=O.length,F=this.bounds;c?(E=F[0]=m[0],M=F[1]=u[0],S=F[2]=m[m.length-1],C=F[3]=u[u.length-1]):(E=F[0]=m[0]+(m[1]-m[0])/2,M=F[1]=u[0]+(u[1]-u[0])/2,S=F[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,C=F[3]=u[u.length-1]+(u[u.length-1]-u[u.length-2])/2);var L=1/(S-E),P=1/(C-M),j=g[0],U=g[1];this.shape=[j,U];var $=(c?(j-1)*(U-1):j*U)*(p.length>>>1);this.numVertices=$;for(var X=a.mallocUint8(4*$),te=a.mallocFloat32(2*$),ae=a.mallocUint8(2*$),J=a.mallocUint32($),ee=0,se=c?j-1:j,G=c?U-1:U,H=0;H<G;++H){var Y,oe;c?(Y=P*(u[H]-M),oe=P*(u[H+1]-M)):(Y=H<U-1?P*(u[H]-(u[H+1]-u[H])/2-M):P*(u[H]-(u[H]-u[H-1])/2-M),oe=H<U-1?P*(u[H]+(u[H+1]-u[H])/2-M):P*(u[H]+(u[H]-u[H-1])/2-M));for(var W=0;W<se;++W){var ne,re;c?(ne=L*(m[W]-E),re=L*(m[W+1]-E)):(ne=W<j-1?L*(m[W]-(m[W+1]-m[W])/2-E):L*(m[W]-(m[W]-m[W-1])/2-E),re=W<j-1?L*(m[W]+(m[W+1]-m[W])/2-E):L*(m[W]+(m[W]-m[W-1])/2-E));for(var ce=0;ce<p.length;ce+=2){var fe,me,pe,we,ye=p[ce],Te=p[ce+1],Le=w[c?(H+Te)*j+(W+ye):H*j+W],Oe=e.le(O,Le);if(Oe<0)fe=I[0],me=I[1],pe=I[2],we=I[3];else if(Oe===N-1)fe=I[4*N-4],me=I[4*N-3],pe=I[4*N-2],we=I[4*N-1];else{var Re=(Le-O[Oe])/(O[Oe+1]-O[Oe]),Ve=1-Re,_e=4*Oe,Ae=4*(Oe+1);fe=Ve*I[_e]+Re*I[Ae],me=Ve*I[_e+1]+Re*I[Ae+1],pe=Ve*I[_e+2]+Re*I[Ae+2],we=Ve*I[_e+3]+Re*I[Ae+3]}X[4*ee]=255*fe,X[4*ee+1]=255*me,X[4*ee+2]=255*pe,X[4*ee+3]=255*we,te[2*ee]=.5*ne+.5*re,te[2*ee+1]=.5*Y+.5*oe,ae[2*ee]=ye,ae[2*ee+1]=Te,J[ee]=H*j+W,ee+=1}}}this.positionBuffer.update(te),this.weightBuffer.update(ae),this.colorBuffer.update(X),this.idBuffer.update(J),a.free(te),a.free(X),a.free(ae),a.free(J)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(b,T,_){"use strict";var e=b("glslify");T.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(b,T,_){var e=b("glslify"),o=b("gl-shader"),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),v=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];_.createShader=function(h){return o(h,a,l,null,v)},_.createPickShader=function(h){return o(h,a,i,null,v)}},{"gl-shader":132,glslify:231}],91:[function(b,T,_){"use strict";T.exports=function(E){var M=E.gl||E.scene&&E.scene.gl,S=d(M);S.attributes.position.location=0,S.attributes.nextPosition.location=1,S.attributes.arcLength.location=2,S.attributes.lineWidth.location=3,S.attributes.color.location=4;var C=p(M);C.attributes.position.location=0,C.attributes.nextPosition.location=1,C.attributes.arcLength.location=2,C.attributes.lineWidth.location=3,C.attributes.color.location=4;for(var O=e(M),I=o(M,[{buffer:O,size:3,offset:0,stride:48},{buffer:O,size:3,offset:12,stride:48},{buffer:O,size:1,offset:24,stride:48},{buffer:O,size:1,offset:28,stride:48},{buffer:O,size:4,offset:32,stride:48}]),N=h(new Array(1024),[256,1,4]),F=0;F<1024;++F)N.data[F]=255;var L=a(M,N);L.wrap=M.REPEAT;var P=new w(M,S,C,O,I,L);return P.update(E),P};var e=b("gl-buffer"),o=b("gl-vao"),a=b("gl-texture2d"),l=new Uint8Array(4),i=new Float32Array(l.buffer),v=b("binary-search-bounds"),h=b("ndarray"),s=b("./lib/shaders"),d=s.createShader,p=s.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(E,M){for(var S=0,C=0;C<3;++C){var O=E[C]-M[C];S+=O*O}return Math.sqrt(S)}function m(E){for(var M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)M[0][S]=Math.max(E[0][S],M[0][S]),M[1][S]=Math.min(E[1][S],M[1][S]);return M}function u(E,M,S,C){this.arcLength=E,this.position=M,this.index=S,this.dataCoordinate=C}function w(E,M,S,C,O,I){this.gl=E,this.shader=M,this.pickShader=S,this.buffer=C,this.vao=O,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=I,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var c=w.prototype;c.isTransparent=function(){return this.hasAlpha},c.isOpaque=function(){return!this.hasAlpha},c.pickSlots=1,c.setPickBase=function(E){this.pickId=E},c.drawTransparent=c.draw=function(E){if(this.vertexCount){var M=this.gl,S=this.shader,C=this.vao;S.bind(),S.uniforms={model:E.model||f,view:E.view||f,projection:E.projection||f,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(M.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},c.drawPick=function(E){if(this.vertexCount){var M=this.gl,S=this.pickShader,C=this.vao;S.bind(),S.uniforms={model:E.model||f,view:E.view||f,projection:E.projection||f,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(M.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},c.update=function(E){var M,S;this.dirty=!0;var C=!!E.connectGaps;"dashScale"in E&&(this.dashScale=E.dashScale),this.hasAlpha=!1,"opacity"in E&&(this.opacity=+E.opacity,this.opacity<1&&(this.hasAlpha=!0));var O=[],I=[],N=[],F=0,L=0,P=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=E.position||E.positions;if(j){var U=E.color||E.colors||[0,0,0,1],$=E.lineWidth||1,X=!1;e:for(M=1;M<j.length;++M){var te,ae,J,ee=j[M-1],se=j[M];for(I.push(F),N.push(ee.slice()),S=0;S<3;++S){if(isNaN(ee[S])||isNaN(se[S])||!isFinite(ee[S])||!isFinite(se[S])){if(!C&&O.length>0){for(var G=0;G<24;++G)O.push(O[O.length-12]);L+=2,X=!0}continue e}P[0][S]=Math.min(P[0][S],ee[S],se[S]),P[1][S]=Math.max(P[1][S],ee[S],se[S])}Array.isArray(U[0])?(te=U.length>M-1?U[M-1]:U.length>0?U[U.length-1]:[0,0,0,1],ae=U.length>M?U[M]:U.length>0?U[U.length-1]:[0,0,0,1]):te=ae=U,3===te.length&&(te=[te[0],te[1],te[2],1]),3===ae.length&&(ae=[ae[0],ae[1],ae[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),J=Array.isArray($)?$.length>M-1?$[M-1]:$.length>0?$[$.length-1]:[0,0,0,1]:$;var H=F;if(F+=g(ee,se),X){for(S=0;S<2;++S)O.push(ee[0],ee[1],ee[2],se[0],se[1],se[2],H,J,te[0],te[1],te[2],te[3]);L+=2,X=!1}O.push(ee[0],ee[1],ee[2],se[0],se[1],se[2],H,J,te[0],te[1],te[2],te[3],ee[0],ee[1],ee[2],se[0],se[1],se[2],H,-J,te[0],te[1],te[2],te[3],se[0],se[1],se[2],ee[0],ee[1],ee[2],F,-J,ae[0],ae[1],ae[2],ae[3],se[0],se[1],se[2],ee[0],ee[1],ee[2],F,J,ae[0],ae[1],ae[2],ae[3]),L+=4}}if(this.buffer.update(O),I.push(F),N.push(j[j.length-1].slice()),this.bounds=P,this.vertexCount=L,this.points=N,this.arcLength=I,"dashes"in E){var Y=E.dashes.slice();for(Y.unshift(0),M=1;M<Y.length;++M)Y[M]=Y[M-1]+Y[M];var oe=h(new Array(1024),[256,1,4]);for(M=0;M<256;++M){for(S=0;S<4;++S)oe.set(M,0,S,0);1&v.le(Y,Y[Y.length-1]*M/255)?oe.set(M,0,0,0):oe.set(M,0,0,255)}this.texture.setPixels(oe)}},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},c.pick=function(E){if(!E||E.id!==this.pickId)return null;var j,U,$,M=(j=E.value[0],U=E.value[1],$=E.value[2],l[0]=0,l[1]=$,l[2]=U,l[3]=j,i[0]),S=v.le(this.arcLength,M);if(S<0)return null;if(S===this.arcLength.length-1)return new u(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),S);for(var C=this.points[S],O=this.points[Math.min(S+1,this.points.length-1)],I=(M-this.arcLength[S])/(this.arcLength[S+1]-this.arcLength[S]),N=1-I,F=[0,0,0],L=0;L<3;++L)F[L]=N*C[L]+I*O[L];var P=Math.min(I<.5?S:S+1,this.points.length-1);return new u(M,F,P,this.points[P])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(b,T,_){T.exports=function(e){var o=new Float32Array(16);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o}},{}],93:[function(b,T,_){T.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(b,T,_){T.exports=function(e){var o=e[0],a=e[1],l=e[2],i=e[3],v=e[4],h=e[5],s=e[6],d=e[7],p=e[8],f=e[9],g=e[10],m=e[11],u=e[12],w=e[13],c=e[14],E=e[15];return(o*h-a*v)*(g*E-m*c)-(o*s-l*v)*(f*E-m*w)+(o*d-i*v)*(f*c-g*w)+(a*s-l*h)*(p*E-m*u)-(a*d-i*h)*(p*c-g*u)+(l*d-i*s)*(p*w-f*u)}},{}],95:[function(b,T,_){T.exports=function(e,o){var a=o[0],l=o[1],i=o[2],v=o[3],h=a+a,s=l+l,d=i+i,p=a*h,f=l*h,g=l*s,m=i*h,u=i*s,w=i*d,c=v*h,E=v*s,M=v*d;return e[0]=1-g-w,e[1]=f+M,e[2]=m-E,e[3]=0,e[4]=f-M,e[5]=1-p-w,e[6]=u+c,e[7]=0,e[8]=m+E,e[9]=u-c,e[10]=1-p-g,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(b,T,_){T.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=o[3],s=l+l,d=i+i,p=v+v,f=l*s,g=l*d,m=l*p,u=i*d,w=i*p,c=v*p,E=h*s,M=h*d,S=h*p;return e[0]=1-(u+c),e[1]=g+S,e[2]=m-M,e[3]=0,e[4]=g-S,e[5]=1-(f+c),e[6]=w+E,e[7]=0,e[8]=m+M,e[9]=w-E,e[10]=1-(f+u),e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}},{}],97:[function(b,T,_){T.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(b,T,_){T.exports=function(e,o){var a=o[0],l=o[1],i=o[2],v=o[3],h=o[4],s=o[5],d=o[6],p=o[7],f=o[8],g=o[9],m=o[10],u=o[11],w=o[12],c=o[13],E=o[14],M=o[15],S=a*s-l*h,C=a*d-i*h,O=a*p-v*h,I=l*d-i*s,N=l*p-v*s,F=i*p-v*d,L=f*c-g*w,P=f*E-m*w,j=f*M-u*w,U=g*E-m*c,$=g*M-u*c,X=m*M-u*E,te=S*X-C*$+O*U+I*j-N*P+F*L;return te?(e[0]=(s*X-d*$+p*U)*(te=1/te),e[1]=(i*$-l*X-v*U)*te,e[2]=(c*F-E*N+M*I)*te,e[3]=(m*N-g*F-u*I)*te,e[4]=(d*j-h*X-p*P)*te,e[5]=(a*X-i*j+v*P)*te,e[6]=(E*O-w*F-M*C)*te,e[7]=(f*F-m*O+u*C)*te,e[8]=(h*$-s*j+p*L)*te,e[9]=(l*j-a*$-v*L)*te,e[10]=(w*N-c*O+M*S)*te,e[11]=(g*O-f*N-u*S)*te,e[12]=(s*P-h*U-d*L)*te,e[13]=(a*U-l*P+i*L)*te,e[14]=(c*C-w*I-E*S)*te,e[15]=(f*I-g*C+m*S)*te,e):null}},{}],99:[function(b,T,_){var e=b("./identity");T.exports=function(o,a,l,i){var v,h,s,d,p,f,g,m,u,w,c=a[0],E=a[1],M=a[2],S=i[0],C=i[1],O=i[2],I=l[0],N=l[1],F=l[2];return Math.abs(c-I)<1e-6&&Math.abs(E-N)<1e-6&&Math.abs(M-F)<1e-6?e(o):(g=c-I,m=E-N,u=M-F,v=C*(u*=w=1/Math.sqrt(g*g+m*m+u*u))-O*(m*=w),h=O*(g*=w)-S*u,s=S*m-C*g,(w=Math.sqrt(v*v+h*h+s*s))?(v*=w=1/w,h*=w,s*=w):(v=0,h=0,s=0),d=m*s-u*h,p=u*v-g*s,f=g*h-m*v,(w=Math.sqrt(d*d+p*p+f*f))?(d*=w=1/w,p*=w,f*=w):(d=0,p=0,f=0),o[0]=v,o[1]=d,o[2]=g,o[3]=0,o[4]=h,o[5]=p,o[6]=m,o[7]=0,o[8]=s,o[9]=f,o[10]=u,o[11]=0,o[12]=-(v*c+h*E+s*M),o[13]=-(d*c+p*E+f*M),o[14]=-(g*c+m*E+u*M),o[15]=1,o)}},{"./identity":97}],100:[function(b,T,_){T.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=o[3],s=o[4],d=o[5],p=o[6],f=o[7],g=o[8],m=o[9],u=o[10],w=o[11],c=o[12],E=o[13],M=o[14],S=o[15],C=a[0],O=a[1],I=a[2],N=a[3];return e[0]=C*l+O*s+I*g+N*c,e[1]=C*i+O*d+I*m+N*E,e[2]=C*v+O*p+I*u+N*M,e[3]=C*h+O*f+I*w+N*S,e[4]=(C=a[4])*l+(O=a[5])*s+(I=a[6])*g+(N=a[7])*c,e[5]=C*i+O*d+I*m+N*E,e[6]=C*v+O*p+I*u+N*M,e[7]=C*h+O*f+I*w+N*S,e[8]=(C=a[8])*l+(O=a[9])*s+(I=a[10])*g+(N=a[11])*c,e[9]=C*i+O*d+I*m+N*E,e[10]=C*v+O*p+I*u+N*M,e[11]=C*h+O*f+I*w+N*S,e[12]=(C=a[12])*l+(O=a[13])*s+(I=a[14])*g+(N=a[15])*c,e[13]=C*i+O*d+I*m+N*E,e[14]=C*v+O*p+I*u+N*M,e[15]=C*h+O*f+I*w+N*S,e}},{}],101:[function(b,T,_){T.exports=function(e,o,a,l,i,v,h){var s=1/(o-a),d=1/(l-i),p=1/(v-h);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*p,e[11]=0,e[12]=(o+a)*s,e[13]=(i+l)*d,e[14]=(h+v)*p,e[15]=1,e}},{}],102:[function(b,T,_){T.exports=function(e,o,a,l,i){var v=1/Math.tan(o/2),h=1/(l-i);return e[0]=v/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+l)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*l*h,e[15]=0,e}},{}],103:[function(b,T,_){T.exports=function(e,o,a,l){var i,v,h,s,d,p,f,g,m,u,w,c,E,M,S,C,O,I,N,F,L,P,j,U,$=l[0],X=l[1],te=l[2],ae=Math.sqrt($*$+X*X+te*te);return Math.abs(ae)<1e-6?null:($*=ae=1/ae,X*=ae,te*=ae,i=Math.sin(a),v=Math.cos(a),d=o[1],p=o[2],f=o[3],m=o[5],u=o[6],w=o[7],E=o[9],M=o[10],S=o[11],N=$*X*(h=1-v)-te*i,F=X*X*h+v,L=te*X*h+$*i,P=$*te*h+X*i,j=X*te*h-$*i,U=te*te*h+v,e[0]=(s=o[0])*(C=$*$*h+v)+(g=o[4])*(O=X*$*h+te*i)+(c=o[8])*(I=te*$*h-X*i),e[1]=d*C+m*O+E*I,e[2]=p*C+u*O+M*I,e[3]=f*C+w*O+S*I,e[4]=s*N+g*F+c*L,e[5]=d*N+m*F+E*L,e[6]=p*N+u*F+M*L,e[7]=f*N+w*F+S*L,e[8]=s*P+g*j+c*U,e[9]=d*P+m*j+E*U,e[10]=p*P+u*j+M*U,e[11]=f*P+w*j+S*U,o!==e&&(e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e)}},{}],104:[function(b,T,_){T.exports=function(e,o,a){var l=Math.sin(a),i=Math.cos(a),v=o[4],h=o[5],s=o[6],d=o[7],p=o[8],f=o[9],g=o[10],m=o[11];return o!==e&&(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[4]=v*i+p*l,e[5]=h*i+f*l,e[6]=s*i+g*l,e[7]=d*i+m*l,e[8]=p*i-v*l,e[9]=f*i-h*l,e[10]=g*i-s*l,e[11]=m*i-d*l,e}},{}],105:[function(b,T,_){T.exports=function(e,o,a){var l=Math.sin(a),i=Math.cos(a),v=o[0],h=o[1],s=o[2],d=o[3],p=o[8],f=o[9],g=o[10],m=o[11];return o!==e&&(e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[0]=v*i-p*l,e[1]=h*i-f*l,e[2]=s*i-g*l,e[3]=d*i-m*l,e[8]=v*l+p*i,e[9]=h*l+f*i,e[10]=s*l+g*i,e[11]=d*l+m*i,e}},{}],106:[function(b,T,_){T.exports=function(e,o,a){var l=Math.sin(a),i=Math.cos(a),v=o[0],h=o[1],s=o[2],d=o[3],p=o[4],f=o[5],g=o[6],m=o[7];return o!==e&&(e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[0]=v*i+p*l,e[1]=h*i+f*l,e[2]=s*i+g*l,e[3]=d*i+m*l,e[4]=p*i-v*l,e[5]=f*i-h*l,e[6]=g*i-s*l,e[7]=m*i-d*l,e}},{}],107:[function(b,T,_){T.exports=function(e,o,a){var l=a[0],i=a[1],v=a[2];return e[0]=o[0]*l,e[1]=o[1]*l,e[2]=o[2]*l,e[3]=o[3]*l,e[4]=o[4]*i,e[5]=o[5]*i,e[6]=o[6]*i,e[7]=o[7]*i,e[8]=o[8]*v,e[9]=o[9]*v,e[10]=o[10]*v,e[11]=o[11]*v,e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e}},{}],108:[function(b,T,_){T.exports=function(e,o,a){var l,i,v,h,s,d,p,f,g,m,u,w,c=a[0],E=a[1],M=a[2];return o===e?(e[12]=o[0]*c+o[4]*E+o[8]*M+o[12],e[13]=o[1]*c+o[5]*E+o[9]*M+o[13],e[14]=o[2]*c+o[6]*E+o[10]*M+o[14],e[15]=o[3]*c+o[7]*E+o[11]*M+o[15]):(i=o[1],v=o[2],h=o[3],s=o[4],d=o[5],p=o[6],f=o[7],g=o[8],m=o[9],u=o[10],w=o[11],e[0]=l=o[0],e[1]=i,e[2]=v,e[3]=h,e[4]=s,e[5]=d,e[6]=p,e[7]=f,e[8]=g,e[9]=m,e[10]=u,e[11]=w,e[12]=l*c+s*E+g*M+o[12],e[13]=i*c+d*E+m*M+o[13],e[14]=v*c+p*E+u*M+o[14],e[15]=h*c+f*E+w*M+o[15]),e}},{}],109:[function(b,T,_){T.exports=function(e,o){if(e===o){var a=o[1],l=o[2],i=o[3],v=o[6],h=o[7],s=o[11];e[1]=o[4],e[2]=o[8],e[3]=o[12],e[4]=a,e[6]=o[9],e[7]=o[13],e[8]=l,e[9]=v,e[11]=o[14],e[12]=i,e[13]=h,e[14]=s}else e[0]=o[0],e[1]=o[4],e[2]=o[8],e[3]=o[12],e[4]=o[1],e[5]=o[5],e[6]=o[9],e[7]=o[13],e[8]=o[2],e[9]=o[6],e[10]=o[10],e[11]=o[14],e[12]=o[3],e[13]=o[7],e[14]=o[11],e[15]=o[15];return e}},{}],110:[function(b,T,_){"use strict";var e=b("barycentric"),o=b("polytope-closest-point/lib/closest_point_2d.js");function a(v,h){for(var s=[0,0,0,0],d=0;d<4;++d)for(var p=0;p<4;++p)s[p]+=v[4*d+p]*h[d];return s}function l(v,h,s,d,p){for(var f=a(d,a(s,a(h,[v[0],v[1],v[2],1]))),g=0;g<3;++g)f[g]/=f[3];return[.5*p[0]*(1+f[0]),.5*p[1]*(1-f[1])]}function i(v,h){for(var s=[0,0,0],d=0;d<v.length;++d)for(var p=v[d],f=h[d],g=0;g<3;++g)s[g]+=f*p[g];return s}T.exports=function(v,h,s,d,p,f){if(1===v.length)return[0,v[0].slice()];for(var g=new Array(v.length),m=0;m<v.length;++m)g[m]=l(v[m],s,d,p,f);var u=0,w=1/0;for(m=0;m<g.length;++m){for(var c=0,E=0;E<2;++E)c+=Math.pow(g[m][E]-h[E],2);c<w&&(w=c,u=m)}var M=function(C,O){if(2===C.length){for(var I=0,N=0,F=0;F<2;++F)I+=Math.pow(O[F]-C[0][F],2),N+=Math.pow(O[F]-C[1][F],2);return(I=Math.sqrt(I))+(N=Math.sqrt(N))<1e-6?[1,0]:[N/(I+N),I/(N+I)]}if(3===C.length){var L=[0,0];return o(C[0],C[1],C[2],O,L),e(C,L)}return[]}(g,h),S=0;for(m=0;m<3;++m){if(M[m]<-.001||M[m]>1.0001)return null;S+=M[m]}return Math.abs(S-1)>.001?null:[u,i(v,M),M]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(b,T,_){var e=b("glslify"),o=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),v=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),h=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),g=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);_.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},_.wireShader={vertex:l,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},_.pointShader={vertex:v,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},_.pickShader={vertex:s,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},_.pointPickShader={vertex:p,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},_.contourShader={vertex:f,fragment:g,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(b,T,_){"use strict";var e=b("gl-shader"),o=b("gl-buffer"),a=b("gl-vao"),l=b("gl-texture2d"),i=b("normals"),v=b("gl-mat4/multiply"),h=b("gl-mat4/invert"),s=b("ndarray"),d=b("colormap"),p=b("simplicial-complex-contour"),f=b("typedarray-pool"),g=b("./lib/shaders"),m=b("./lib/closest-point"),u=g.meshShader,w=g.wireShader,c=g.pointShader,E=g.pickShader,M=g.pointPickShader,S=g.contourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function O(X,te,ae,J,ee,se,G,H,Y,oe,W,ne,re,ce,fe,me,pe,we,ye,Te,Le,Oe,Re,Ve,_e,Ae,Fe){this.gl=X,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=te,this.dirty=!0,this.triShader=ae,this.lineShader=J,this.pointShader=ee,this.pickShader=se,this.pointPickShader=G,this.contourShader=H,this.trianglePositions=Y,this.triangleColors=W,this.triangleNormals=re,this.triangleUVs=ne,this.triangleIds=oe,this.triangleVAO=ce,this.triangleCount=0,this.lineWidth=1,this.edgePositions=fe,this.edgeColors=pe,this.edgeUVs=we,this.edgeIds=me,this.edgeVAO=ye,this.edgeCount=0,this.pointPositions=Te,this.pointColors=Oe,this.pointUVs=Re,this.pointSizes=Ve,this.pointIds=Le,this.pointVAO=_e,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ae,this.contourVAO=Fe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=C,this._view=C,this._projection=C,this._resolution=[1,1]}var I=O.prototype;function N(X,te){if(!te||!te.length)return 1;for(var ae=0;ae<te.length;++ae){if(te.length<2)return 1;if(te[ae][0]===X)return te[ae][1];if(te[ae][0]>X&&ae>0){var J=(te[ae][0]-X)/(te[ae][0]-te[ae-1][0]);return te[ae][1]*(1-J)+J*te[ae-1][1]}}return 1}function F(X){var te=e(X,u.vertex,u.fragment);return te.attributes.position.location=0,te.attributes.color.location=2,te.attributes.uv.location=3,te.attributes.normal.location=4,te}function L(X){var te=e(X,w.vertex,w.fragment);return te.attributes.position.location=0,te.attributes.color.location=2,te.attributes.uv.location=3,te}function P(X){var te=e(X,c.vertex,c.fragment);return te.attributes.position.location=0,te.attributes.color.location=2,te.attributes.uv.location=3,te.attributes.pointSize.location=4,te}function j(X){var te=e(X,E.vertex,E.fragment);return te.attributes.position.location=0,te.attributes.id.location=1,te}function U(X){var te=e(X,M.vertex,M.fragment);return te.attributes.position.location=0,te.attributes.id.location=1,te.attributes.pointSize.location=4,te}function $(X){var te=e(X,S.vertex,S.fragment);return te.attributes.position.location=0,te}I.isOpaque=function(){return!this.hasAlpha},I.isTransparent=function(){return this.hasAlpha},I.pickSlots=1,I.setPickBase=function(X){this.pickId=X},I.highlight=function(X){if(X&&this.contourEnable){for(var te=p(this.cells,this.intensity,X.intensity),ae=te.cells,J=te.vertexIds,ee=te.vertexWeights,se=ae.length,G=f.mallocFloat32(6*se),H=0,Y=0;Y<se;++Y)for(var oe=ae[Y],W=0;W<2;++W){var ne=oe[0];2===oe.length&&(ne=oe[W]);for(var fe=ee[ne],me=1-fe,pe=this.positions[J[ne][0]],we=this.positions[J[ne][1]],ye=0;ye<3;++ye)G[H++]=fe*pe[ye]+me*we[ye]}this.contourCount=H/3|0,this.contourPositions.update(G.subarray(0,H)),f.free(G)}else this.contourCount=0},I.update=function(X){X=X||{};var te=this.gl;this.dirty=!0,"contourEnable"in X&&(this.contourEnable=X.contourEnable),"contourColor"in X&&(this.contourColor=X.contourColor),"lineWidth"in X&&(this.lineWidth=X.lineWidth),"lightPosition"in X&&(this.lightPosition=X.lightPosition),this.hasAlpha=!1,"opacity"in X&&(this.opacity=X.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in X&&(this.opacityscale=X.opacityscale,this.hasAlpha=!0),"ambient"in X&&(this.ambientLight=X.ambient),"diffuse"in X&&(this.diffuseLight=X.diffuse),"specular"in X&&(this.specularLight=X.specular),"roughness"in X&&(this.roughness=X.roughness),"fresnel"in X&&(this.fresnel=X.fresnel),X.texture?(this.texture.dispose(),this.texture=l(te,X.texture)):X.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=te.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=te.LINEAR,this.texture.setPixels(function(un,pn){for(var dn=d({colormap:un,nshades:256,format:"rgba"}),Mn=new Uint8Array(1024),ln=0;ln<256;++ln){for(var Ee=dn[ln],De=0;De<3;++De)Mn[4*ln+De]=Ee[De];Mn[4*ln+3]=pn?255*N(ln/255,pn):255*Ee[3]}return s(Mn,[256,256,4],[4,0,1])}(X.colormap,this.opacityscale)),this.texture.generateMipmap());var ae=X.cells,J=X.positions;if(J&&ae){var ee=[],se=[],G=[],H=[],Y=[],oe=[],W=[],ne=[],re=[],ce=[],fe=[],me=[],pe=[],we=[];this.cells=ae,this.positions=J;var ye=X.vertexNormals,Te=X.cellNormals,Le=void 0===X.vertexNormalsEpsilon?1e-6:X.vertexNormalsEpsilon;X.useFacetNormals&&!Te&&(Te=i.faceNormals(ae,J,void 0===X.faceNormalsEpsilon?1e-6:X.faceNormalsEpsilon)),Te||ye||(ye=i.vertexNormals(ae,J,Le));var Re=X.vertexColors,Ve=X.cellColors,_e=X.meshColor||[1,1,1,1],Ae=X.vertexUVs,Fe=X.vertexIntensity,Pe=X.cellUVs,Be=X.cellIntensity,qe=1/0,We=-1/0;if(!Ae&&!Pe)if(Fe)if(X.vertexIntensityBounds)qe=+X.vertexIntensityBounds[0],We=+X.vertexIntensityBounds[1];else for(var Je=0;Je<Fe.length;++Je){var ut=Fe[Je];qe=Math.min(qe,ut),We=Math.max(We,ut)}else if(Be)if(X.cellIntensityBounds)qe=+X.cellIntensityBounds[0],We=+X.cellIntensityBounds[1];else for(Je=0;Je<Be.length;++Je)ut=Be[Je],qe=Math.min(qe,ut),We=Math.max(We,ut);else for(Je=0;Je<J.length;++Je)ut=J[Je][2],qe=Math.min(qe,ut),We=Math.max(We,ut);this.intensity=Fe||Be||function(un){for(var pn=un.length,dn=new Array(pn),Mn=0;Mn<pn;++Mn)dn[Mn]=un[Mn][2];return dn}(J),this.pickVertex=!(Be||Ve);var Ge=X.pointSizes,Ke=X.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Je=0;Je<J.length;++Je)for(var nt=J[Je],it=0;it<3;++it)!isNaN(nt[it])&&isFinite(nt[it])&&(this.bounds[0][it]=Math.min(this.bounds[0][it],nt[it]),this.bounds[1][it]=Math.max(this.bounds[1][it],nt[it]));var ht=0,Tt=0,Ct=0;e:for(Je=0;Je<ae.length;++Je){var Vt=ae[Je];switch(Vt.length){case 1:for(nt=J[gt=Vt[0]],it=0;it<3;++it)if(isNaN(nt[it])||!isFinite(nt[it]))continue e;ce.push(nt[0],nt[1],nt[2]),ft=Re?Re[gt]:Ve?Ve[Je]:_e,this.opacityscale&&Fe?se.push(ft[0],ft[1],ft[2],this.opacity*N((Fe[gt]-qe)/(We-qe),this.opacityscale)):3===ft.length?fe.push(ft[0],ft[1],ft[2],this.opacity):(fe.push(ft[0],ft[1],ft[2],ft[3]*this.opacity),ft[3]<1&&(this.hasAlpha=!0)),me.push((Bt=Ae?Ae[gt]:Fe?[(Fe[gt]-qe)/(We-qe),0]:Pe?Pe[Je]:Be?[(Be[Je]-qe)/(We-qe),0]:[(nt[2]-qe)/(We-qe),0])[0],Bt[1]),pe.push(Ge?Ge[gt]:Ke),we.push(Je),Ct+=1;break;case 2:for(it=0;it<2;++it){nt=J[gt=Vt[it]];for(var Ft=0;Ft<3;++Ft)if(isNaN(nt[Ft])||!isFinite(nt[Ft]))continue e}for(it=0;it<2;++it)nt=J[gt=Vt[it]],oe.push(nt[0],nt[1],nt[2]),ft=Re?Re[gt]:Ve?Ve[Je]:_e,this.opacityscale&&Fe?se.push(ft[0],ft[1],ft[2],this.opacity*N((Fe[gt]-qe)/(We-qe),this.opacityscale)):3===ft.length?W.push(ft[0],ft[1],ft[2],this.opacity):(W.push(ft[0],ft[1],ft[2],ft[3]*this.opacity),ft[3]<1&&(this.hasAlpha=!0)),ne.push((Bt=Ae?Ae[gt]:Fe?[(Fe[gt]-qe)/(We-qe),0]:Pe?Pe[Je]:Be?[(Be[Je]-qe)/(We-qe),0]:[(nt[2]-qe)/(We-qe),0])[0],Bt[1]),re.push(Je);Tt+=1;break;case 3:for(it=0;it<3;++it)for(nt=J[gt=Vt[it]],Ft=0;Ft<3;++Ft)if(isNaN(nt[Ft])||!isFinite(nt[Ft]))continue e;for(it=0;it<3;++it){var gt,ft,Bt,rn;nt=J[gt=Vt[2-it]],ee.push(nt[0],nt[1],nt[2]),(ft=Re?Re[gt]:Ve?Ve[Je]:_e)?this.opacityscale&&Fe?se.push(ft[0],ft[1],ft[2],this.opacity*N((Fe[gt]-qe)/(We-qe),this.opacityscale)):3===ft.length?se.push(ft[0],ft[1],ft[2],this.opacity):(se.push(ft[0],ft[1],ft[2],ft[3]*this.opacity),ft[3]<1&&(this.hasAlpha=!0)):se.push(.5,.5,.5,1),H.push((Bt=Ae?Ae[gt]:Fe?[(Fe[gt]-qe)/(We-qe),0]:Pe?Pe[Je]:Be?[(Be[Je]-qe)/(We-qe),0]:[(nt[2]-qe)/(We-qe),0])[0],Bt[1]),G.push((rn=ye?ye[gt]:Te[Je])[0],rn[1],rn[2]),Y.push(Je)}ht+=1}}this.pointCount=Ct,this.edgeCount=Tt,this.triangleCount=ht,this.pointPositions.update(ce),this.pointColors.update(fe),this.pointUVs.update(me),this.pointSizes.update(pe),this.pointIds.update(new Uint32Array(we)),this.edgePositions.update(oe),this.edgeColors.update(W),this.edgeUVs.update(ne),this.edgeIds.update(new Uint32Array(re)),this.trianglePositions.update(ee),this.triangleColors.update(se),this.triangleUVs.update(H),this.triangleNormals.update(G),this.triangleIds.update(new Uint32Array(Y))}},I.drawTransparent=I.draw=function(X){for(var te=this.gl,ae=(X=X||{}).model||C,J=X.view||C,ee=X.projection||C,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],G=0;G<3;++G)se[0][G]=Math.max(se[0][G],this.clipBounds[0][G]),se[1][G]=Math.min(se[1][G],this.clipBounds[1][G]);var H={model:ae,view:J,projection:ee,inverseModel:C.slice(),clipBounds:se,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};H.inverseModel=h(H.inverseModel,H.model),te.disable(te.CULL_FACE),this.texture.bind(0);var Y=new Array(16);for(v(Y,H.view,H.model),v(Y,H.projection,Y),h(Y,Y),G=0;G<3;++G)H.eyePosition[G]=Y[12+G]/Y[15];var oe,W=Y[15];for(G=0;G<3;++G)W+=this.lightPosition[G]*Y[4*G+3];for(G=0;G<3;++G){for(var ne=Y[12+G],re=0;re<3;++re)ne+=Y[4*re+G]*this.lightPosition[re];H.lightPosition[G]=ne/W}this.triangleCount>0&&((oe=this.triShader).bind(),oe.uniforms=H,this.triangleVAO.bind(),te.drawArrays(te.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((oe=this.lineShader).bind(),oe.uniforms=H,this.edgeVAO.bind(),te.lineWidth(this.lineWidth*this.pixelRatio),te.drawArrays(te.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((oe=this.pointShader).bind(),oe.uniforms=H,this.pointVAO.bind(),te.drawArrays(te.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((oe=this.contourShader).bind(),oe.uniforms=H,this.contourVAO.bind(),te.drawArrays(te.LINES,0,this.contourCount),this.contourVAO.unbind())},I.drawPick=function(X){for(var te=this.gl,ae=(X=X||{}).model||C,J=X.view||C,ee=X.projection||C,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],G=0;G<3;++G)se[0][G]=Math.max(se[0][G],this.clipBounds[0][G]),se[1][G]=Math.min(se[1][G],this.clipBounds[1][G]);this._model=[].slice.call(ae),this._view=[].slice.call(J),this._projection=[].slice.call(ee),this._resolution=[te.drawingBufferWidth,te.drawingBufferHeight];var H,Y={model:ae,view:J,projection:ee,clipBounds:se,pickId:this.pickId/255};(H=this.pickShader).bind(),H.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),te.drawArrays(te.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),te.lineWidth(this.lineWidth*this.pixelRatio),te.drawArrays(te.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((H=this.pointPickShader).bind(),H.uniforms=Y,this.pointVAO.bind(),te.drawArrays(te.POINTS,0,this.pointCount),this.pointVAO.unbind())},I.pick=function(X){if(!X||X.id!==this.pickId)return null;for(var te=X.value[0]+256*X.value[1]+65536*X.value[2],ae=this.cells[te],J=this.positions,ee=new Array(ae.length),se=0;se<ae.length;++se)ee[se]=J[ae[se]];var G=X.coord[0],H=X.coord[1];if(!this.pickVertex){var Y=this.positions[ae[0]],oe=this.positions[ae[1]],W=this.positions[ae[2]];return{_cellCenter:!0,position:[G,H],index:te,cell:ae,cellId:te,intensity:this.intensity[te],dataCoordinate:[(Y[0]+oe[0]+W[0])/3,(Y[1]+oe[1]+W[1])/3,(Y[2]+oe[2]+W[2])/3]}}var re=m(ee,[G*this.pixelRatio,this._resolution[1]-H*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!re)return null;var ce=re[2],fe=0;for(se=0;se<ae.length;++se)fe+=ce[se]*this.intensity[ae[se]];return{position:re[1],index:ae[re[0]],cell:ae,cellId:te,intensity:fe,dataCoordinate:this.positions[ae[re[0]]]}},I.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},T.exports=function(X,te){if(1===arguments.length&&(X=(te=X).gl),!(X.getExtension("OES_standard_derivatives")||X.getExtension("MOZ_OES_standard_derivatives")||X.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var J=F(X),ee=L(X),se=P(X),G=j(X),H=U(X),Y=$(X),oe=l(X,s(new Uint8Array([255,255,255,255]),[1,1,4]));oe.generateMipmap(),oe.minFilter=X.LINEAR_MIPMAP_LINEAR,oe.magFilter=X.LINEAR;var W=o(X),ne=o(X),re=o(X),ce=o(X),fe=o(X),me=a(X,[{buffer:W,type:X.FLOAT,size:3},{buffer:fe,type:X.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ne,type:X.FLOAT,size:4},{buffer:re,type:X.FLOAT,size:2},{buffer:ce,type:X.FLOAT,size:3}]),pe=o(X),we=o(X),ye=o(X),Te=o(X),Le=a(X,[{buffer:pe,type:X.FLOAT,size:3},{buffer:Te,type:X.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:we,type:X.FLOAT,size:4},{buffer:ye,type:X.FLOAT,size:2}]),Oe=o(X),Re=o(X),Ve=o(X),_e=o(X),Ae=o(X),Fe=a(X,[{buffer:Oe,type:X.FLOAT,size:3},{buffer:Ae,type:X.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Re,type:X.FLOAT,size:4},{buffer:Ve,type:X.FLOAT,size:2},{buffer:_e,type:X.FLOAT,size:1}]),Pe=o(X),qe=new O(X,oe,J,ee,se,G,H,Y,W,fe,ne,re,ce,me,pe,Te,we,ye,Le,Oe,Ae,Re,Ve,_e,Fe,Pe,a(X,[{buffer:Pe,type:X.FLOAT,size:3}]));return qe.update(te),qe}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(b,T,_){"use strict";T.exports=function(s){var d=s.gl;return new l(s,e(d,[0,0,0,1,1,0,1,1]),o(d,a.boxVert,a.lineFrag))};var e=b("gl-buffer"),o=b("gl-shader"),a=b("./shaders");function l(s,d,p){this.plot=s,this.vbo=d,this.shader=p}var i,v,h=l.prototype;h.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},h.drawBox=(i=[0,0],v=[0,0],function(s,d,p,f,g){var u=this.shader,w=this.plot.gl;i[0]=s,i[1]=d,v[0]=p,v[1]=f,u.uniforms.lo=i,u.uniforms.hi=v,u.uniforms.color=g,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(b,T,_){"use strict";T.exports=function(m){var u=m.gl;return new i(m,e(u),o(u,l.gridVert,l.gridFrag),o(u,l.tickVert,l.gridFrag))};var e=b("gl-buffer"),o=b("gl-shader"),a=b("binary-search-bounds"),l=b("./shaders");function i(m,u,w,c){this.plot=m,this.vbo=u,this.shader=w,this.tickShader=c,this.ticks=[[],[]]}function v(m,u){return m-u}var h,s,d,p,f,m,u,w,c,E,M,g=i.prototype;g.draw=(h=[0,0],s=[0,0],d=[0,0],function(){for(var m=this.plot,u=this.vbo,w=this.shader,c=this.ticks,E=m.gl,M=m._tickBounds,S=m.dataBox,C=m.viewBox,O=m.gridLineWidth,I=m.gridLineColor,N=m.gridLineEnable,F=m.pixelRatio,L=0;L<2;++L){var P=M[L],U=.5*(S[L+2]+S[L]),$=S[L+2]-S[L];s[L]=2*(M[L+2]-P)/$,h[L]=2*(P-U)/$}w.bind(),u.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=h,w.uniforms.dataScale=s;var X=0;for(L=0;L<2;++L){d[0]=d[1]=0,d[L]=1,w.uniforms.dataAxis=d,w.uniforms.lineWidth=O[L]/(C[L+2]-C[L])*F,w.uniforms.color=I[L];var te=6*c[L].length;N[L]&&te&&E.drawArrays(E.TRIANGLES,X,te),X+=te}}),g.drawTickMarks=(m=[0,0],u=[0,0],w=[1,0],c=[0,1],E=[0,0],M=[0,0],function(){for(var S=this.plot,C=this.vbo,O=this.tickShader,I=this.ticks,N=S.gl,F=S._tickBounds,L=S.dataBox,P=S.viewBox,j=S.pixelRatio,U=S.screenBox,$=U[2]-U[0],X=U[3]-U[1],te=P[2]-P[0],ae=P[3]-P[1],J=0;J<2;++J){var ee=F[J],G=.5*(L[J+2]+L[J]),H=L[J+2]-L[J];u[J]=2*(F[J+2]-ee)/H,m[J]=2*(ee-G)/H}u[0]*=te/$,m[0]*=te/$,u[1]*=ae/X,m[1]*=ae/X,O.bind(),C.bind(),O.attributes.dataCoord.pointer();var Y=O.uniforms;Y.dataShift=m,Y.dataScale=u;var oe=S.tickMarkLength,W=S.tickMarkWidth,ne=S.tickMarkColor,re=6*I[0].length,ce=Math.min(a.ge(I[0],(L[0]-F[0])/(F[2]-F[0]),v),I[0].length),fe=Math.min(a.gt(I[0],(L[2]-F[0])/(F[2]-F[0]),v),I[0].length),me=0+6*ce,pe=6*Math.max(0,fe-ce),we=Math.min(a.ge(I[1],(L[1]-F[1])/(F[3]-F[1]),v),I[1].length),ye=Math.min(a.gt(I[1],(L[3]-F[1])/(F[3]-F[1]),v),I[1].length),Te=re+6*we,Le=6*Math.max(0,ye-we);E[0]=2*(P[0]-oe[1])/$-1,E[1]=(P[3]+P[1])/X-1,M[0]=oe[1]*j/$,M[1]=W[1]*j/X,Le&&(Y.color=ne[1],Y.tickScale=M,Y.dataAxis=c,Y.screenOffset=E,N.drawArrays(N.TRIANGLES,Te,Le)),E[0]=(P[2]+P[0])/$-1,E[1]=2*(P[1]-oe[0])/X-1,M[0]=W[0]*j/$,M[1]=oe[0]*j/X,pe&&(Y.color=ne[0],Y.tickScale=M,Y.dataAxis=w,Y.screenOffset=E,N.drawArrays(N.TRIANGLES,me,pe)),E[0]=2*(P[2]+oe[3])/$-1,E[1]=(P[3]+P[1])/X-1,M[0]=oe[3]*j/$,M[1]=W[3]*j/X,Le&&(Y.color=ne[3],Y.tickScale=M,Y.dataAxis=c,Y.screenOffset=E,N.drawArrays(N.TRIANGLES,Te,Le)),E[0]=(P[2]+P[0])/$-1,E[1]=2*(P[3]+oe[2])/X-1,M[0]=W[2]*j/$,M[1]=oe[2]*j/X,pe&&(Y.color=ne[2],Y.tickScale=M,Y.dataAxis=w,Y.screenOffset=E,N.drawArrays(N.TRIANGLES,me,pe))}),g.update=(p=[1,1,-1,-1,1,-1],f=[1,-1,1,1,-1,-1],function(m){for(var u=m.ticks,w=m.bounds,c=new Float32Array(18*(u[0].length+u[1].length)),E=0,M=[[],[]],S=0;S<2;++S)for(var C=M[S],O=u[S],I=w[S],N=w[S+2],F=0;F<O.length;++F){var L=(O[F].x-I)/(N-I);C.push(L);for(var P=0;P<6;++P)c[E++]=L,c[E++]=p[P],c[E++]=f[P]}this.ticks=M,this.vbo.update(c)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(b,T,_){"use strict";T.exports=function(s){var d=s.gl;return new l(s,e(d,[-1,-1,-1,1,1,-1,1,1]),o(d,a.lineVert,a.lineFrag))};var e=b("gl-buffer"),o=b("gl-shader"),a=b("./shaders");function l(s,d,p){this.plot=s,this.vbo=d,this.shader=p}var i,v,h=l.prototype;h.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},h.drawLine=(i=[0,0],v=[0,0],function(s,d,p,f,g,m){var u=this.plot,w=this.shader,c=u.gl;i[0]=s,i[1]=d,v[0]=p,v[1]=f,w.uniforms.start=i,w.uniforms.end=v,w.uniforms.width=g*u.pixelRatio,w.uniforms.color=m,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(b,T,_){"use strict";var e=b("glslify"),o=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);T.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:o,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:o,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:o,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(b,T,_){"use strict";T.exports=function(u){var w=u.gl;return new v(u,e(w),o(w,i.textVert,i.textFrag))};var e=b("gl-buffer"),o=b("gl-shader"),a=b("text-cache"),l=b("binary-search-bounds"),i=b("./shaders");function v(u,w,c){this.plot=u,this.vbo=w,this.shader=c,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,s,d,p,f,g,u,w,m=v.prototype;m.drawTicks=(h=[0,0],s=[0,0],d=[0,0],function(u){var w=this.plot,c=this.shader,E=this.tickX[u],M=this.tickOffset[u],S=w.gl,C=w.viewBox,O=w.dataBox,I=w.screenBox,N=w.pixelRatio,F=w.tickEnable,L=w.tickPad,P=w.tickColor,j=w.tickAngle,U=w.labelEnable,$=w.labelPad,X=w.labelColor,te=w.labelAngle,ae=this.labelOffset[u],J=this.labelCount[u],ee=l.lt(E,O[u]),se=l.le(E,O[u+2]);h[0]=h[1]=0,h[u]=1,s[u]=(C[2+u]+C[u])/(I[2+u]-I[u])-1;var G=2/I[2+(1^u)]-I[1^u];s[1^u]=G*C[1^u]-1,F[u]&&(s[1^u]-=G*N*L[u],ee<se&&M[se]>M[ee]&&(c.uniforms.dataAxis=h,c.uniforms.screenOffset=s,c.uniforms.color=P[u],c.uniforms.angle=j[u],S.drawArrays(S.TRIANGLES,M[ee],M[se]-M[ee]))),U[u]&&J&&(s[1^u]-=G*N*$[u],c.uniforms.dataAxis=d,c.uniforms.screenOffset=s,c.uniforms.color=X[u],c.uniforms.angle=te[u],S.drawArrays(S.TRIANGLES,ae,J)),s[1^u]=G*C[2+(1^u)]-1,F[u+2]&&(s[1^u]+=G*N*L[u+2],ee<se&&M[se]>M[ee]&&(c.uniforms.dataAxis=h,c.uniforms.screenOffset=s,c.uniforms.color=P[u+2],c.uniforms.angle=j[u+2],S.drawArrays(S.TRIANGLES,M[ee],M[se]-M[ee]))),U[u+2]&&J&&(s[1^u]+=G*N*$[u+2],c.uniforms.dataAxis=d,c.uniforms.screenOffset=s,c.uniforms.color=X[u+2],c.uniforms.angle=te[u+2],S.drawArrays(S.TRIANGLES,ae,J))}),m.drawTitle=(u=[0,0],w=[0,0],function(){var c=this.plot,E=this.shader,M=c.gl,S=c.screenBox,C=c.titleCenter,O=c.titleAngle,I=c.titleColor,N=c.pixelRatio;if(this.titleCount){for(var F=0;F<2;++F)w[F]=2*(C[F]*N-S[F])/(S[2+F]-S[F])-1;E.bind(),E.uniforms.dataAxis=u,E.uniforms.screenOffset=w,E.uniforms.angle=O,E.uniforms.color=I,M.drawArrays(M.TRIANGLES,this.titleOffset,this.titleCount)}}),m.bind=(p=[0,0],f=[0,0],g=[0,0],function(){var u=this.plot,w=this.shader,c=u._tickBounds,E=u.dataBox,M=u.screenBox,S=u.viewBox;w.bind();for(var C=0;C<2;++C){var O=c[C],N=.5*(E[C+2]+E[C]),F=E[C+2]-E[C],P=S[C+2]-S[C],U=M[C+2]-M[C];f[C]=2*(c[C+2]-O)/F*P/U,p[C]=2*(O-N)/F*P/U}g[1]=2*u.pixelRatio/(M[3]-M[1]),g[0]=g[1]*(M[3]-M[1])/(M[2]-M[0]),w.uniforms.dataScale=f,w.uniforms.dataShift=p,w.uniforms.textScale=g,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),m.update=function(u){var w,c,E,M,S,C=[],O=u.ticks,I=u.bounds;for(S=0;S<2;++S){var N=[Math.floor(C.length/3)],F=[-1/0],L=O[S];for(w=0;w<L.length;++w){var P=L[w],j=P.x,$=P.font||"sans-serif";M=P.fontSize||12;for(var X=1/(I[S+2]-I[S]),te=I[S],ae=P.text.split("\n"),J=0;J<ae.length;J++)for(E=a($,ae[J]).data,c=0;c<E.length;c+=2)C.push(E[c]*M,-E[c+1]*M-J*M*1.2,(j-te)*X);N.push(Math.floor(C.length/3)),F.push(j)}this.tickOffset[S]=N,this.tickX[S]=F}for(S=0;S<2;++S){for(this.labelOffset[S]=Math.floor(C.length/3),E=a(u.labelFont[S],u.labels[S],{textAlign:"center"}).data,M=u.labelSize[S],w=0;w<E.length;w+=2)C.push(E[w]*M,-E[w+1]*M,0);this.labelCount[S]=Math.floor(C.length/3)-this.labelOffset[S]}for(this.titleOffset=Math.floor(C.length/3),E=a(u.titleFont,u.title).data,M=u.titleSize,w=0;w<E.length;w+=2)C.push(E[w]*M,-E[w+1]*M,0);this.titleCount=Math.floor(C.length/3)-this.titleOffset,this.vbo.update(C)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(b,T,_){"use strict";T.exports=function(p){var f=p.gl,m=new v(f,e(f,[f.drawingBufferWidth,f.drawingBufferHeight]));return m.grid=o(m),m.text=a(m),m.line=l(m),m.box=i(m),m.update(p),m};var e=b("gl-select-static"),o=b("./lib/grid"),a=b("./lib/text"),l=b("./lib/line"),i=b("./lib/box");function v(p,f){this.gl=p,this.pickBuffer=f,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=v.prototype;function s(p){for(var f=p.slice(),g=0;g<f.length;++g)f[g]=f[g].slice();return f}function d(p,f){return p.x-f.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var p=this.gl,f=this.screenBox,g=this.viewBox,m=this.dataBox,u=this.pixelRatio,w=this.grid,c=this.line,E=this.text,M=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);var S=this.borderColor;p.clearColor(S[0]*S[3],S[1]*S[3],S[2]*S[3],S[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),p.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var C=this.backgroundColor;p.clearColor(C[0]*C[3],C[1]*C[3],C[2]*C[3],C[3]),p.clear(p.COLOR_BUFFER_BIT),w.draw();var O=this.zeroLineEnable,I=this.zeroLineColor,N=this.zeroLineWidth;if(O[0]||O[1]){c.bind();for(var F=0;F<2;++F)if(O[F]&&m[F]<=0&&m[F+2]>=0){var L=f[F]-m[F]*(f[F+2]-f[F])/(m[F+2]-m[F]);0===F?c.drawLine(L,f[1],L,f[3],N[F],I[F]):c.drawLine(f[0],L,f[2],L,N[F],I[F])}}for(F=0;F<M.length;++F)M[F].draw();p.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]),p.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.grid.drawTickMarks(),c.bind();var P=this.borderLineEnable,j=this.borderLineWidth,U=this.borderLineColor;for(P[1]&&c.drawLine(g[0],g[1]-.5*j[1]*u,g[0],g[3]+.5*j[3]*u,j[1],U[1]),P[0]&&c.drawLine(g[0]-.5*j[0]*u,g[1],g[2]+.5*j[2]*u,g[1],j[0],U[0]),P[3]&&c.drawLine(g[2],g[1]-.5*j[1]*u,g[2],g[3]+.5*j[3]*u,j[3],U[3]),P[2]&&c.drawLine(g[0]-.5*j[0]*u,g[3],g[2]+.5*j[2]*u,g[3],j[2],U[2]),E.bind(),F=0;F<2;++F)E.drawTicks(F);this.titleEnable&&E.drawTitle();var $=this.overlays;for(F=0;F<$.length;++F)$[F].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}},h.drawPick=function(){if(!this.static){var p=this.pickBuffer;this._pickTimeout=null,p.begin();for(var f=1,g=this.objects,m=0;m<g.length;++m)f=g[m].drawPick(f);p.end()}},h.pick=function(p,f){if(!this.static){var g=this.pixelRatio,m=this.pickPixelRatio,u=this.viewBox,w=0|Math.round((p-u[0]/g)*m),c=0|Math.round((f-u[1]/g)*m),E=this.pickBuffer.query(w,c,this.pickRadius);if(!E)return null;for(var M=E.id+(E.value[0]<<8)+(E.value[1]<<16)+(E.value[2]<<24),S=this.objects,C=0;C<S.length;++C){var O=S[C].pick(w,c,M);if(O)return O}return null}},h.setScreenBox=function(p){var f=this.screenBox,g=this.pixelRatio;f[0]=0|Math.round(p[0]*g),f[1]=0|Math.round(p[1]*g),f[2]=0|Math.round(p[2]*g),f[3]=0|Math.round(p[3]*g),this.setDirty()},h.setDataBox=function(p){var f=this.dataBox;(f[0]!==p[0]||f[1]!==p[1]||f[2]!==p[2]||f[3]!==p[3])&&(f[0]=p[0],f[1]=p[1],f[2]=p[2],f[3]=p[3],this.setDirty())},h.setViewBox=function(p){var f=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(p[0]*f),g[1]=0|Math.round(p[1]*f),g[2]=0|Math.round(p[2]*f),g[3]=0|Math.round(p[3]*f);var m=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((p[2]-p[0])*m),0|Math.round((p[3]-p[1])*m)],this.setDirty()},h.update=function(p){var f=this.gl;this.pixelRatio=(p=p||{}).pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(p.screenBox||[0,0,f.drawingBufferWidth/g,f.drawingBufferHeight/g]),this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var m=this.viewBox,u=(m[2]-m[0])/(m[3]-m[1]);this.setDataBox(p.dataBox||[-10,-10/u,10,10/u]),this.borderColor=!1!==p.borderColor&&(p.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=s(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=s(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=s(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(m[0]+m[2])/g,(m[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=s(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=s(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=s(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=p.ticks||[[],[]],c=this._tickBounds;c[0]=c[1]=1/0,c[2]=c[3]=-1/0;for(var E=0;E<2;++E){var M=w[E].slice(0);0!==M.length&&(M.sort(d),c[E]=Math.min(c[E],M[0].x),c[E+2]=Math.max(c[E+2],M[M.length-1].x))}this.grid.update({bounds:c,ticks:w}),this.text.update({bounds:c,ticks:w,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif"}),this.static=!!p.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();for(this.objects.length=0,p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},h.removeObject=function(p){for(var f=this.objects,g=0;g<f.length;++g)if(f[g]===p){f.splice(g,1),this.setDirty();break}},h.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},h.removeOverlay=function(p){for(var f=this.overlays,g=0;g<f.length;++g)if(f[g]===p){f.splice(g,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(b,T,_){"use strict";T.exports=function(h,s){h=h||document.body;var d=[.01,1/0];"distanceLimits"in(s=s||{})&&(d[0]=s.distanceLimits[0],d[1]=s.distanceLimits[1]),"zoomMin"in s&&(d[0]=s.zoomMin),"zoomMax"in s&&(d[1]=s.zoomMax);var p=o({center:s.center||[0,0,0],up:s.up||[0,1,0],eye:s.eye||[0,0,10],mode:s.mode||"orbit",distanceLimits:d}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,m=h.clientWidth,u=h.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:p,element:h,delay:s.delay||16,rotateSpeed:s.rotateSpeed||1,zoomSpeed:s.zoomSpeed||1,translateSpeed:s.translateSpeed||1,flipX:!!s.flipX,flipY:!!s.flipY,modes:p.modes,_ortho:s._ortho||s.projection&&"orthographic"===s.projection.type||!1,tick:function(){var c=e(),E=this.delay,M=c-2*E;p.idle(c-E),p.recalcMatrix(M),p.flush(c-(100+2*E));for(var S=!0,C=p.computedMatrix,O=0;O<16;++O)S=S&&f[O]===C[O],f[O]=C[O];var I=h.clientWidth===m&&h.clientHeight===u;return m=h.clientWidth,u=h.clientHeight,S?!I:(g=Math.exp(p.computedRadius[0]),!0)},lookAt:function(c,E,M){p.lookAt(p.lastT(),c,E,M)},rotate:function(c,E,M){p.rotate(p.lastT(),c,E,M)},pan:function(c,E,M){p.pan(p.lastT(),c,E,M)},translate:function(c,E,M){p.translate(p.lastT(),c,E,M)}};return Object.defineProperties(w,{matrix:{get:function(){return p.computedMatrix},set:function(c){return p.setMatrix(p.lastT(),c),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(c){var E=p.computedUp.slice(),M=p.computedEye.slice(),S=p.computedCenter.slice();if(p.setMode(c),"turntable"===c){var C=e();p._active.lookAt(C,M,S,E),p._active.lookAt(C+500,M,S,[0,0,1]),p._active.flush(C)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(c){return p.lookAt(p.lastT(),null,c),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(c){return p.lookAt(p.lastT(),c),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(c){return p.lookAt(p.lastT(),null,null,c),p.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(c){return p.setDistance(p.lastT(),c),c},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(d)},set:function(c){return p.setDistanceLimits(c),c},enumerable:!0}}),h.addEventListener("contextmenu",function(c){return c.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function c(E,M,S,C){var O=w.keyBindingMode;if(!1!==O){var I="rotate"===O,N="pan"===O,F="zoom"===O,L=!!C.control,P=!!C.alt,j=!!C.shift,U=!!(1&E),$=!!(2&E),X=!!(4&E),te=1/h.clientHeight,ae=te*(M-w._lastX),J=te*(S-w._lastY),ee=w.flipX?1:-1,se=w.flipY?1:-1,G=Math.PI*w.rotateSpeed,H=e();if(-1!==w._lastX&&-1!==w._lastY&&((I&&U&&!L&&!P&&!j||U&&!L&&!P&&j)&&p.rotate(H,ee*G*ae,-se*G*J,0),(N&&U&&!L&&!P&&!j||$||U&&L&&!P&&!j)&&p.pan(H,-w.translateSpeed*ae*g,w.translateSpeed*J*g,0),F&&U&&!L&&!P&&!j||X||U&&!L&&P&&!j)){var Y=-w.zoomSpeed*J/window.innerHeight*(H-p.lastT())*100;p.pan(H,0,0,g*(Math.exp(Y)-1))}return w._lastX=M,w._lastY=S,w._lastMods=C,!0}}w.mouseListener=a(h,c),h.addEventListener("touchstart",function(E){var M=i(E.changedTouches[0],h);c(0,M[0],M[1],w._lastMods),c(1,M[0],M[1],w._lastMods)},!!v&&{passive:!0}),h.addEventListener("touchmove",function(E){var M=i(E.changedTouches[0],h);c(1,M[0],M[1],w._lastMods),E.preventDefault()},!!v&&{passive:!1}),h.addEventListener("touchend",function(E){c(0,w._lastX,w._lastY,w._lastMods)},!!v&&{passive:!0}),w.wheelListener=l(h,function(E,M){if(!1!==w.keyBindingMode&&w.enableWheel){var S=w.flipX?1:-1,C=w.flipY?1:-1,O=e();if(Math.abs(E)>Math.abs(M))p.rotate(O,0,0,-E*S*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var I=-w.zoomSpeed*C*M/window.innerHeight*(O-p.lastT())/20;p.pan(O,0,0,g*(Math.exp(I)-1))}}},!0)},w.enableMouseListeners(),w};var e=b("right-now"),o=b("3d-view"),a=b("mouse-change"),l=b("mouse-wheel"),i=b("mouse-event-offset"),v=b("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(b,T,_){var e=b("glslify"),o=b("gl-shader"),a=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);T.exports=function(i){return o(i,a,l,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(b,T,_){"use strict";var e=b("./camera.js"),o=b("gl-axes3d"),a=b("gl-axes3d/properties"),l=b("gl-spikes3d"),i=b("gl-select-static"),v=b("gl-fbo"),h=b("a-big-triangle"),s=b("mouse-change"),d=b("gl-mat4/perspective"),p=b("gl-mat4/ortho"),f=b("./lib/shader"),g=b("is-mobile")({tablet:!0,featureDetect:!0});function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function u(c){var E=Math.round(Math.log(Math.abs(c))/Math.log(10));if(E<0){var M=Math.round(Math.pow(10,-E));return Math.ceil(c*M)/M}return E>0?(M=Math.round(Math.pow(10,E)),Math.ceil(c/M)*M):Math.ceil(c)}function w(c){return"boolean"!=typeof c||c}T.exports={createScene:function(c){(c=c||{}).camera=c.camera||{};var E=c.canvas;E||(E=document.createElement("canvas"),c.container?c.container.appendChild(E):document.body.appendChild(E));var M=c.gl;if(M||(c.glOptions&&(g=!!c.glOptions.preserveDrawingBuffer),M=function(ye,Te){var Le=null;try{(Le=ye.getContext("webgl",Te))||(Le=ye.getContext("experimental-webgl",Te))}catch(Oe){return null}return Le}(E,c.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!M)throw new Error("webgl not supported");var S=c.bounds||[[-10,-10,-10],[10,10,10]],C=new m,O=v(M,M.drawingBufferWidth,M.drawingBufferHeight,{preferFloat:!g}),I=f(M),N=c.cameraObject&&!0===c.cameraObject._ortho||c.camera.projection&&"orthographic"===c.camera.projection.type||!1,F={eye:c.camera.eye||[2,0,0],center:c.camera.center||[0,0,0],up:c.camera.up||[0,1,0],zoomMin:c.camera.zoomMax||.1,zoomMax:c.camera.zoomMin||100,mode:c.camera.mode||"turntable",_ortho:N},L=c.axes||{},P=o(M,L);P.enable=!L.disable;var U=l(M,c.spikes||{}),$=[],X=[],te=[],ae=[],J=!0,ee=!0,H={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Y=(ee=!0,[M.drawingBufferWidth,M.drawingBufferHeight]),oe=c.cameraObject||e(E,F),W={gl:M,contextLost:!1,pixelRatio:c.pixelRatio||1,canvas:E,selection:C,camera:oe,axes:P,axesPixels:null,spikes:U,bounds:S,objects:$,shape:Y,aspect:c.aspectRatio||[1,1,1],pickRadius:c.pickRadius||10,zNear:c.zNear||.01,zFar:c.zFar||1e3,fovy:c.fovy||Math.PI/4,clearColor:c.clearColor||[0,0,0,0],autoResize:w(c.autoResize),autoBounds:w(c.autoBounds),autoScale:!!c.autoScale,autoCenter:w(c.autoCenter),clipToBounds:w(c.clipToBounds),snapToData:!!c.snapToData,onselect:c.onselect||null,onrender:c.onrender||null,onclick:c.onclick||null,cameraParams:H,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ye){this.aspect[0]=ye.x,this.aspect[1]=ye.y,this.aspect[2]=ye.z,ee=!0},setBounds:function(ye,Te){this.bounds[0][ye]=Te.min,this.bounds[1][ye]=Te.max},setClearColor:function(ye){this.clearColor=ye},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ne=[M.drawingBufferWidth/W.pixelRatio|0,M.drawingBufferHeight/W.pixelRatio|0];function re(){if(!W._stopped&&W.autoResize){var ye=E.parentNode,Te=1,Le=1;ye&&ye!==document.body?(Te=ye.clientWidth,Le=ye.clientHeight):(Te=window.innerWidth,Le=window.innerHeight);var Oe=0|Math.ceil(Te*W.pixelRatio),Re=0|Math.ceil(Le*W.pixelRatio);if(Oe!==E.width||Re!==E.height){E.width=Oe,E.height=Re;var Ve=E.style;Ve.position=Ve.position||"absolute",Ve.left="0px",Ve.top="0px",Ve.width=Te+"px",Ve.height=Le+"px",J=!0}}}function ce(){for(var ye=$.length,Te=ae.length,Le=0;Le<Te;++Le)te[Le]=0;e:for(Le=0;Le<ye;++Le){var Oe=$[Le],Re=Oe.pickSlots;if(Re){for(var Ve=0;Ve<Te;++Ve)if(te[Ve]+Re<255){X[Le]=Ve,Oe.setPickBase(te[Ve]+1),te[Ve]+=Re;continue e}var _e=i(M,Y);X[Le]=Te,ae.push(_e),te.push(Re),Oe.setPickBase(1),Te+=1}else X[Le]=-1}for(;Te>0&&0===te[Te-1];)te.pop(),ae.pop().dispose()}function fe(){if(W.contextLost)return!0;M.isContextLost()&&(W.contextLost=!0,W.mouseListener.enabled=!1,W.selection.object=null,W.oncontextloss&&W.oncontextloss())}W.autoResize&&re(),window.addEventListener("resize",re),W.update=function(ye){W._stopped||(ye=ye||{},J=!0,ee=!0)},W.add=function(ye){W._stopped||(ye.axes=P,$.push(ye),X.push(-1),J=!0,ee=!0,ce())},W.remove=function(ye){if(!W._stopped){var Te=$.indexOf(ye);Te<0||($.splice(Te,1),X.pop(),J=!0,ee=!0,ce())}},W.dispose=function(){if(!W._stopped&&(W._stopped=!0,window.removeEventListener("resize",re),E.removeEventListener("webglcontextlost",fe),W.mouseListener.enabled=!1,!W.contextLost)){P.dispose(),U.dispose();for(var ye=0;ye<$.length;++ye)$[ye].dispose();for(O.dispose(),ye=0;ye<ae.length;++ye)ae[ye].dispose();I.dispose(),M=null,P=null,U=null,$=[]}},W._mouseRotating=!1,W._prevButtons=0,W.enableMouseListeners=function(){W.mouseListener=s(E,function(ye,Te,Le){if(!W._stopped){var Oe=ae.length,Re=$.length,Ve=C.object;C.distance=1/0,C.mouse[0]=Te,C.mouse[1]=Le,C.object=null,C.screen=null,C.dataCoordinate=C.dataPosition=null;var _e=!1;if(ye&&W._prevButtons)W._mouseRotating=!0;else{W._mouseRotating&&(ee=!0),W._mouseRotating=!1;for(var Ae=0;Ae<Oe;++Ae){var Fe=ae[Ae].query(Te,ne[1]-Le-1,W.pickRadius);if(Fe){if(Fe.distance>C.distance)continue;for(var Pe=0;Pe<Re;++Pe){var Be=$[Pe];if(X[Pe]===Ae){var qe=Be.pick(Fe);qe&&(C.buttons=ye,C.screen=Fe.coord,C.distance=Fe.distance,C.object=Be,C.index=qe.distance,C.dataPosition=qe.position,C.dataCoordinate=qe.dataCoordinate,C.data=qe,_e=!0)}}}}}Ve&&Ve!==C.object&&(Ve.highlight&&Ve.highlight(null),J=!0),C.object&&(C.object.highlight&&C.object.highlight(C.data),J=!0),(_e=_e||C.object!==Ve)&&W.onselect&&W.onselect(C),1&ye&&!(1&W._prevButtons)&&W.onclick&&W.onclick(C),W._prevButtons=ye}})},E.addEventListener("webglcontextlost",fe);var me=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],pe=[me[0].slice(),me[1].slice()];function we(){if(!fe()){re();var ye=W.camera.tick();H.view=W.camera.matrix,J=J||ye,ee=ee||ye,P.pixelRatio=W.pixelRatio,U.pixelRatio=W.pixelRatio;var Te=$.length,Le=me[0],Oe=me[1];Le[0]=Le[1]=Le[2]=1/0,Oe[0]=Oe[1]=Oe[2]=-1/0;for(var Re=0;Re<Te;++Re){(Ke=$[Re]).pixelRatio=W.pixelRatio,Ke.axes=W.axes,J=J||!!Ke.dirty,ee=ee||!!Ke.dirty;var Ve=Ke.bounds;if(Ve)for(var _e=Ve[0],Ae=Ve[1],Fe=0;Fe<3;++Fe)Le[Fe]=Math.min(Le[Fe],_e[Fe]),Oe[Fe]=Math.max(Oe[Fe],Ae[Fe])}var Pe=W.bounds;if(W.autoBounds)for(Fe=0;Fe<3;++Fe){if(Oe[Fe]<Le[Fe])Le[Fe]=-1,Oe[Fe]=1;else{Le[Fe]===Oe[Fe]&&(Le[Fe]-=1,Oe[Fe]+=1);var Be=.05*(Oe[Fe]-Le[Fe]);Le[Fe]=Le[Fe]-Be,Oe[Fe]=Oe[Fe]+Be}Pe[0][Fe]=Le[Fe],Pe[1][Fe]=Oe[Fe]}var qe=!1;for(Fe=0;Fe<3;++Fe)qe=qe||pe[0][Fe]!==Pe[0][Fe]||pe[1][Fe]!==Pe[1][Fe],pe[0][Fe]=Pe[0][Fe],pe[1][Fe]=Pe[1][Fe];if(ee=ee||qe,J=J||qe){if(qe){var We=[0,0,0];for(Re=0;Re<3;++Re)We[Re]=u((Pe[1][Re]-Pe[0][Re])/10);P.update(P.autoTicks?{bounds:Pe,tickSpacing:We}:{bounds:Pe})}var Je=M.drawingBufferWidth,ut=M.drawingBufferHeight;for(Y[0]=Je,Y[1]=ut,ne[0]=0|Math.max(Je/W.pixelRatio,1),ne[1]=0|Math.max(ut/W.pixelRatio,1),function(nt,it){var ht=nt.bounds,Tt=nt.cameraParams,Ct=Tt.projection,Vt=Tt.model,ft=nt.zNear,Bt=nt.zFar,rn=nt.fovy,un=nt.gl.drawingBufferWidth/nt.gl.drawingBufferHeight;it?(p(Ct,-un,un,-1,1,ft,Bt),Tt._ortho=!0):(d(Ct,rn,un,ft,Bt),Tt._ortho=!1);for(var pn=0;pn<16;++pn)Vt[pn]=0;Vt[15]=1;var dn=0;for(pn=0;pn<3;++pn)dn=Math.max(dn,ht[1][pn]-ht[0][pn]);for(pn=0;pn<3;++pn)Vt[5*pn]=nt.autoScale?nt.aspect[pn]/(ht[1][pn]-ht[0][pn]):1/dn,nt.autoCenter&&(Vt[12+pn]=.5*-Vt[5*pn]*(ht[0][pn]+ht[1][pn]))}(W,N),Re=0;Re<Te;++Re)(Ke=$[Re]).axesBounds=Pe,W.clipToBounds&&(Ke.clipBounds=Pe);C.object&&(U.position=W.snapToData?C.dataCoordinate:C.dataPosition,U.bounds=Pe),ee&&(ee=!1,function(){if(!fe()){M.colorMask(!0,!0,!0,!0),M.depthMask(!0),M.disable(M.BLEND),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL);for(var nt=$.length,it=ae.length,ht=0;ht<it;++ht){var Tt=ae[ht];Tt.shape=ne,Tt.begin();for(var Ct=0;Ct<nt;++Ct)if(X[Ct]===ht){var Vt=$[Ct];Vt.drawPick&&(Vt.pixelRatio=1,Vt.drawPick(H))}Tt.end()}}}()),W.axesPixels=a(W.axes,H,Je,ut),W.onrender&&W.onrender(),M.bindFramebuffer(M.FRAMEBUFFER,null),M.viewport(0,0,Je,ut),W.clearRGBA(),M.depthMask(!0),M.colorMask(!0,!0,!0,!0),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.disable(M.BLEND),M.disable(M.CULL_FACE);var Ge=!1;for(P.enable&&(Ge=Ge||P.isTransparent(),P.draw(H)),U.axes=P,C.object&&U.draw(H),M.disable(M.CULL_FACE),Re=0;Re<Te;++Re)(Ke=$[Re]).axes=P,Ke.pixelRatio=W.pixelRatio,Ke.isOpaque&&Ke.isOpaque()&&Ke.draw(H),Ke.isTransparent&&Ke.isTransparent()&&(Ge=!0);if(Ge){for(O.shape=Y,O.bind(),M.clear(M.DEPTH_BUFFER_BIT),M.colorMask(!1,!1,!1,!1),M.depthMask(!0),M.depthFunc(M.LESS),P.enable&&P.isTransparent()&&P.drawTransparent(H),Re=0;Re<Te;++Re)(Ke=$[Re]).isOpaque&&Ke.isOpaque()&&Ke.draw(H);for(M.enable(M.BLEND),M.blendEquation(M.FUNC_ADD),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.colorMask(!0,!0,!0,!0),M.depthMask(!1),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),P.isTransparent()&&P.drawTransparent(H),Re=0;Re<Te;++Re){var Ke;(Ke=$[Re]).isTransparent&&Ke.isTransparent()&&Ke.drawTransparent(H)}M.bindFramebuffer(M.FRAMEBUFFER,null),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST),I.bind(),O.color[0].bind(0),I.uniforms.accumBuffer=0,h(M),M.disable(M.BLEND)}for(J=!1,Re=0;Re<Te;++Re)$[Re].dirty=!1}}}return W.enableMouseListeners(),function ye(){W._stopped||W.contextLost||(we(),requestAnimationFrame(ye))}(),W.redraw=function(){W._stopped||(J=!0,we())},W},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(b,T,_){var e=b("glslify");_.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),_.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),_.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),_.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(b,T,_){"use strict";var e=b("gl-shader"),o=b("gl-buffer"),a=b("typedarray-pool"),l=b("./lib/shader");function i(d,p,f,g,m){this.plot=d,this.offsetBuffer=p,this.pickBuffer=f,this.shader=g,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}T.exports=function(d,p){var f=d.gl,c=new i(d,o(f),o(f),e(f,l.pointVertex,l.pointFragment),e(f,l.pickVertex,l.pickFragment));return c.update(p),d.addObject(c),c};var v,h,s=i.prototype;s.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},s.update=function(d){var p;function f(M,S){return M in d?d[M]:S}d=d||{},this.sizeMin=f("sizeMin",.5),this.sizeMax=f("sizeMax",20),this.color=f("color",[1,0,0,1]).slice(),this.areaRatio=f("areaRatio",1),this.borderColor=f("borderColor",[0,0,0,1]).slice(),this.blend=f("blend",!1);var g=d.positions.length>>>1,m=d.positions instanceof Float32Array,u=d.idToIndex instanceof Int32Array&&d.idToIndex.length>=g,w=d.positions,c=m?w:a.mallocFloat32(w.length),E=u?d.idToIndex:a.mallocInt32(g);if(m||c.set(w),!u)for(c.set(w),p=0;p<g;p++)E[p]=p;this.points=w,this.offsetBuffer.update(c),this.pickBuffer.update(E),m||a.free(c),u||a.free(E),this.pointCount=g,this.pickOffset=0},s.unifiedDraw=(v=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(d){var p=void 0!==d,f=p?this.pickShader:this.shader,g=this.plot.gl,m=this.plot.dataBox;if(0===this.pointCount)return d;var u=m[2]-m[0],w=m[3]-m[1],c=function(C,O){var I,N=0,F=C.length>>>1;for(I=0;I<F;I++){var L=C[2*I],P=C[2*I+1];L>=O[0]&&L<=O[2]&&P>=O[1]&&P<=O[3]&&N++}return N}(this.points,m),E=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(c,.33333)));v[0]=2/u,v[4]=2/w,v[6]=-2*m[0]/u-1,v[7]=-2*m[1]/w-1,this.offsetBuffer.bind(),f.bind(),f.attributes.position.pointer(),f.uniforms.matrix=v,f.uniforms.color=this.color,f.uniforms.borderColor=this.borderColor,f.uniforms.pointCloud=E<5,f.uniforms.pointSize=E,f.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),p&&(h[0]=255&d,h[1]=d>>8&255,h[2]=d>>16&255,h[3]=d>>24&255,this.pickBuffer.bind(),f.attributes.pickId.pointer(g.UNSIGNED_BYTE),f.uniforms.pickOffset=h,this.pickOffset=d);var M=g.getParameter(g.BLEND),S=g.getParameter(g.DITHER);return M&&!this.blend&&g.disable(g.BLEND),S&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),M&&!this.blend&&g.enable(g.BLEND),S&&g.enable(g.DITHER),d+this.pointCount}),s.draw=s.unifiedDraw,s.drawPick=s.unifiedDraw,s.pick=function(d,p,f){var g=this.pickOffset;if(f<g||f>=g+this.pointCount)return null;var u=f-g,w=this.points;return{object:this,pointId:u,dataCoord:[w[2*u],w[2*u+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(b,T,_){T.exports=function(e,o,a,l){var i,v,h,s,d,p=o[0],f=o[1],g=o[2],m=o[3],u=a[0],w=a[1],c=a[2],E=a[3];return(v=p*u+f*w+g*c+m*E)<0&&(v=-v,u=-u,w=-w,c=-c,E=-E),1-v>1e-6?(i=Math.acos(v),h=Math.sin(i),s=Math.sin((1-l)*i)/h,d=Math.sin(l*i)/h):(s=1-l,d=l),e[0]=s*p+d*u,e[1]=s*f+d*w,e[2]=s*g+d*c,e[3]=s*m+d*E,e}},{}],125:[function(b,T,_){"use strict";T.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(b,T,_){"use strict";var e=b("vectorize-text");T.exports=function(a,l,i){var v=o[l];if(v||(v=o[l]={}),a in v)return v[a];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},s=e(a,h);h.triangles=!1;var d,p,f=e(a,h);if(i&&1!==i){for(d=0;d<s.positions.length;++d)for(p=0;p<s.positions[d].length;++p)s.positions[d][p]/=i;for(d=0;d<f.positions.length;++d)for(p=0;p<f.positions[d].length;++p)f.positions[d][p]/=i}var g=[[1/0,1/0],[-1/0,-1/0]],m=f.positions.length;for(d=0;d<m;++d){var u=f.positions[d];for(p=0;p<2;++p)g[0][p]=Math.min(g[0][p],u[p]),g[1][p]=Math.max(g[1][p],u[p])}return v[a]=[s,f,g]};var o={}},{"vectorize-text":311}],127:[function(b,T,_){var e=b("gl-shader"),o=b("glslify"),a=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),v=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),h=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),s=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],d={vertex:a,fragment:v,attributes:s},p={vertex:l,fragment:v,attributes:s},f={vertex:i,fragment:v,attributes:s},g={vertex:a,fragment:h,attributes:s},m={vertex:l,fragment:h,attributes:s},u={vertex:i,fragment:h,attributes:s};function w(c,E){var M=e(c,E),S=M.attributes;return S.position.location=0,S.color.location=1,S.glyph.location=2,S.id.location=3,M}_.createPerspective=function(c){return w(c,d)},_.createOrtho=function(c){return w(c,p)},_.createProject=function(c){return w(c,f)},_.createPickPerspective=function(c){return w(c,g)},_.createPickOrtho=function(c){return w(c,m)},_.createPickProject=function(c){return w(c,u)}},{"gl-shader":132,glslify:231}],128:[function(b,T,_){"use strict";var e=b("is-string-blank"),o=b("gl-buffer"),a=b("gl-vao"),l=b("typedarray-pool"),i=b("gl-mat4/multiply"),v=b("./lib/shaders"),h=b("./lib/glyphs"),s=b("./lib/get-simple-string"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(te,ae){var J=te[0],ee=te[1],se=te[2],G=te[3];return te[0]=ae[0]*J+ae[4]*ee+ae[8]*se+ae[12]*G,te[1]=ae[1]*J+ae[5]*ee+ae[9]*se+ae[13]*G,te[2]=ae[2]*J+ae[6]*ee+ae[10]*se+ae[14]*G,te[3]=ae[3]*J+ae[7]*ee+ae[11]*se+ae[15]*G,te}function f(te,ae,J,ee){return p(ee,ee),p(ee,ee),p(ee,ee)}function g(te,ae){this.index=te,this.dataCoordinate=this.position=ae}function m(te){return!0===te||te>1?1:te}function u(te,ae,J,ee,se,G,H,Y,oe,W,ne,re){this.gl=te,this.pixelRatio=1,this.shader=ae,this.orthoShader=J,this.projectShader=ee,this.pointBuffer=se,this.colorBuffer=G,this.glyphBuffer=H,this.idBuffer=Y,this.vao=oe,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=W,this.pickOrthoShader=ne,this.pickProjectShader=re,this.points=[],this._selectResult=new g(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}T.exports=function(te){var ae=te.gl,J=v.createPerspective(ae),ee=v.createOrtho(ae),se=v.createProject(ae),G=v.createPickPerspective(ae),H=v.createPickOrtho(ae),Y=v.createPickProject(ae),oe=o(ae),W=o(ae),ne=o(ae),re=o(ae),fe=new u(ae,J,ee,se,oe,W,ne,re,a(ae,[{buffer:oe,size:3,type:ae.FLOAT},{buffer:W,size:4,type:ae.FLOAT},{buffer:ne,size:2,type:ae.FLOAT},{buffer:re,size:4,type:ae.UNSIGNED_BYTE,normalized:!0}]),G,H,Y);return fe.update(te),fe};var w=u.prototype;w.pickSlots=1,w.setPickBase=function(te){this.pickId=te},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var te=0;te<3;++te)if(this.axesProject[te]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var te=0;te<3;++te)if(this.axesProject[te]&&!this.projectHasAlpha)return!0;return!1};var c=[0,0],E=[0,0,0],M=[0,0,0],S=[0,0,0,1],C=[0,0,0,1],O=d.slice(),I=[0,0,0],N=[[0,0,0],[0,0,0]];function F(te){return te[0]=te[1]=te[2]=0,te}function L(te,ae){return te[0]=ae[0],te[1]=ae[1],te[2]=ae[2],te[3]=1,te}function P(te,ae,J,ee){return te[0]=ae[0],te[1]=ae[1],te[2]=ae[2],te[J]=ee,te}var U=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function $(te,ae,J,ee,se,G,H){var Y=J.gl;if((G===J.projectHasAlpha||H)&&function j(te,ae,J,ee){var se,G=ae.axesProject,H=ae.gl,Y=te.uniforms,oe=J.model||d,W=J.view||d,ne=J.projection||d,re=ae.axesBounds,ce=function(Pe){for(var Be=N,qe=0;qe<2;++qe)for(var We=0;We<3;++We)Be[qe][We]=Math.max(Math.min(Pe[qe][We],1e8),-1e8);return Be}(ae.clipBounds);se=ae.axes&&ae.axes.lastCubeProps?ae.axes.lastCubeProps.axis:[1,1,1],c[0]=2/H.drawingBufferWidth,c[1]=2/H.drawingBufferHeight,te.bind(),Y.view=W,Y.projection=ne,Y.screenSize=c,Y.highlightId=ae.highlightId,Y.highlightScale=ae.highlightScale,Y.clipBounds=ce,Y.pickGroup=ae.pickId/255,Y.pixelRatio=ee;for(var fe=0;fe<3;++fe)if(G[fe]){Y.scale=ae.projectScale[fe],Y.opacity=ae.projectOpacity[fe];for(var me=O,pe=0;pe<16;++pe)me[pe]=0;for(pe=0;pe<4;++pe)me[5*pe]=1;me[5*fe]=0,me[12+fe]=se[fe]<0?re[0][fe]:re[1][fe],i(me,oe,me),Y.model=me;var we=(fe+1)%3,ye=(fe+2)%3,Te=F(E),Le=F(M);Te[we]=1,Le[ye]=1;var Oe=f(0,0,0,L(S,Te)),Re=f(0,0,0,L(C,Le));if(Math.abs(Oe[1])>Math.abs(Re[1])){var Ve=Oe;Oe=Re,Re=Ve,Ve=Te,Te=Le,Le=Ve;var _e=we;we=ye,ye=_e}Oe[0]<0&&(Te[we]=-1),Re[1]>0&&(Le[ye]=-1);var Ae=0,Fe=0;for(pe=0;pe<4;++pe)Ae+=Math.pow(oe[4*we+pe],2),Fe+=Math.pow(oe[4*ye+pe],2);Te[we]/=Math.sqrt(Ae),Le[ye]/=Math.sqrt(Fe),Y.axes[0]=Te,Y.axes[1]=Le,Y.fragClipBounds[0]=P(I,ce[0],fe,-1e8),Y.fragClipBounds[1]=P(I,ce[1],fe,1e8),ae.vao.bind(),ae.vao.draw(H.TRIANGLES,ae.vertexCount),ae.lineWidth>0&&(H.lineWidth(ae.lineWidth*ee),ae.vao.draw(H.LINES,ae.lineVertexCount,ae.vertexCount)),ae.vao.unbind()}}(ae,J,ee,se),G===J.hasAlpha||H){te.bind();var oe=te.uniforms;oe.model=ee.model||d,oe.view=ee.view||d,oe.projection=ee.projection||d,c[0]=2/Y.drawingBufferWidth,c[1]=2/Y.drawingBufferHeight,oe.screenSize=c,oe.highlightId=J.highlightId,oe.highlightScale=J.highlightScale,oe.fragClipBounds=U,oe.clipBounds=J.axes.bounds,oe.opacity=J.opacity,oe.pickGroup=J.pickId/255,oe.pixelRatio=se,J.vao.bind(),J.vao.draw(Y.TRIANGLES,J.vertexCount),J.lineWidth>0&&(Y.lineWidth(J.lineWidth*se),J.vao.draw(Y.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}function X(te,ae,J,ee){var se;se=Array.isArray(te)?ae<te.length?te[ae]:void 0:te,se=s(se);var G=!0;e(se)&&(se="\u25bc",G=!1);var H=h(se,J,ee);return{mesh:H[0],lines:H[1],bounds:H[2],visible:G}}w.draw=function(te){$(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,te,this.pixelRatio,!1,!1)},w.drawTransparent=function(te){$(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,te,this.pixelRatio,!0,!1)},w.drawPick=function(te){$(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,te,1,!0,!0)},w.pick=function(te){if(!te||te.id!==this.pickId)return null;var ae=te.value[2]+(te.value[1]<<8)+(te.value[0]<<16);if(ae>=this.pointCount||ae<0)return null;var J=this.points[ae],ee=this._selectResult;ee.index=ae;for(var se=0;se<3;++se)ee.position[se]=ee.dataCoordinate[se]=J[se];return ee},w.highlight=function(te){if(te){var ae=te.index;this.highlightId=[(255&ae)/255,(ae>>8&255)/255,(ae>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(te){if("perspective"in(te=te||{})&&(this.useOrtho=!te.perspective),"orthographic"in te&&(this.useOrtho=!!te.orthographic),"lineWidth"in te&&(this.lineWidth=te.lineWidth),"project"in te)if(Array.isArray(te.project))this.axesProject=te.project;else{var ae=!!te.project;this.axesProject=[ae,ae,ae]}if("projectScale"in te)if(Array.isArray(te.projectScale))this.projectScale=te.projectScale.slice();else{var J=+te.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in te){this.projectOpacity=Array.isArray(te.projectOpacity)?te.projectOpacity.slice():[J=+te.projectOpacity,J,J];for(var ee=0;ee<3;++ee)this.projectOpacity[ee]=m(this.projectOpacity[ee]),this.projectOpacity[ee]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in te&&(this.opacity=m(te.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var se,G,H=te.position,Y=te.font||"normal",oe=te.alignment||[0,0];if(2===oe.length)se=oe[0],G=oe[1];else for(se=[],G=[],ee=0;ee<oe.length;++ee)se[ee]=oe[ee][0],G[ee]=oe[ee][1];var W=[1/0,1/0,1/0],ne=[-1/0,-1/0,-1/0],re=te.glyph,ce=te.color,fe=te.size,me=te.angle,pe=te.lineColor,we=-1,ye=0,Te=0,Le=0;if(H.length){Le=H.length;e:for(ee=0;ee<Le;++ee){for(var Oe=H[ee],Re=0;Re<3;++Re)if(isNaN(Oe[Re])||!isFinite(Oe[Re]))continue e;var Ve=(ht=X(re,ee,Y,this.pixelRatio)).mesh,_e=ht.lines,Ae=ht.bounds;ye+=3*Ve.cells.length,Te+=2*_e.edges.length}}var Fe=ye+Te,Pe=l.mallocFloat(3*Fe),Be=l.mallocFloat(4*Fe),qe=l.mallocFloat(2*Fe),We=l.mallocUint32(Fe);if(Fe>0){var Je=0,ut=ye,Ge=[0,0,0,1],Ke=[0,0,0,1],nt=Array.isArray(ce)&&Array.isArray(ce[0]),it=Array.isArray(pe)&&Array.isArray(pe[0]);e:for(ee=0;ee<Le;++ee){for(we+=1,Oe=H[ee],Re=0;Re<3;++Re){if(isNaN(Oe[Re])||!isFinite(Oe[Re]))continue e;ne[Re]=Math.max(ne[Re],Oe[Re]),W[Re]=Math.min(W[Re],Oe[Re])}Ve=(ht=X(re,ee,Y,this.pixelRatio)).mesh,_e=ht.lines,Ae=ht.bounds;var ht,Tt=ht.visible;if(Tt)if(Array.isArray(ce)){if(3===(Ct=nt?ee<ce.length?ce[ee]:[0,0,0,0]:ce).length){for(Re=0;Re<3;++Re)Ge[Re]=Ct[Re];Ge[3]=1}else if(4===Ct.length){for(Re=0;Re<4;++Re)Ge[Re]=Ct[Re];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else Ge[0]=Ge[1]=Ge[2]=0,Ge[3]=1;else Ge=[1,1,1,0];if(Tt)if(Array.isArray(pe)){var Ct;if(3===(Ct=it?ee<pe.length?pe[ee]:[0,0,0,0]:pe).length){for(Re=0;Re<3;++Re)Ke[Re]=Ct[Re];Ke[Re]=1}else if(4===Ct.length){for(Re=0;Re<4;++Re)Ke[Re]=Ct[Re];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else Ke[0]=Ke[1]=Ke[2]=0,Ke[3]=1;else Ke=[1,1,1,0];var Vt=.5;Tt?Array.isArray(fe)?Vt=ee<fe.length?+fe[ee]:12:fe?Vt=+fe:this.useOrtho&&(Vt=12):Vt=0;var Ft=0;Array.isArray(me)?Ft=ee<me.length?+me[ee]:0:me&&(Ft=+me);var gt=Math.cos(Ft),ft=Math.sin(Ft);for(Oe=H[ee],Re=0;Re<3;++Re)ne[Re]=Math.max(ne[Re],Oe[Re]),W[Re]=Math.min(W[Re],Oe[Re]);var Bt=se,rn=G;Bt=0,Array.isArray(se)?Bt=ee<se.length?se[ee]:0:se&&(Bt=se),rn=0,Array.isArray(G)?rn=ee<G.length?G[ee]:0:G&&(rn=G);var un=[Bt*=Bt>0?1-Ae[0][0]:Bt<0?1+Ae[1][0]:1,rn*=rn>0?1-Ae[0][1]:rn<0?1+Ae[1][1]:1],pn=Ve.cells||[],dn=Ve.positions||[];for(Re=0;Re<pn.length;++Re)for(var Mn=pn[Re],ln=0;ln<3;++ln){for(var Ee=0;Ee<3;++Ee)Pe[3*Je+Ee]=Oe[Ee];for(Ee=0;Ee<4;++Ee)Be[4*Je+Ee]=Ge[Ee];We[Je]=we;var De=dn[Mn[ln]];qe[2*Je]=Vt*(gt*De[0]-ft*De[1]+un[0]),qe[2*Je+1]=Vt*(ft*De[0]+gt*De[1]+un[1]),Je+=1}for(pn=_e.edges,dn=_e.positions,Re=0;Re<pn.length;++Re)for(Mn=pn[Re],ln=0;ln<2;++ln){for(Ee=0;Ee<3;++Ee)Pe[3*ut+Ee]=Oe[Ee];for(Ee=0;Ee<4;++Ee)Be[4*ut+Ee]=Ke[Ee];We[ut]=we,qe[2*ut]=Vt*(gt*(De=dn[Mn[ln]])[0]-ft*De[1]+un[0]),qe[2*ut+1]=Vt*(ft*De[0]+gt*De[1]+un[1]),ut+=1}}}this.bounds=[W,ne],this.points=H,this.pointCount=H.length,this.vertexCount=ye,this.lineVertexCount=Te,this.pointBuffer.update(Pe),this.colorBuffer.update(Be),this.glyphBuffer.update(qe),this.idBuffer.update(We),l.free(Pe),l.free(Be),l.free(qe),l.free(We)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(b,T,_){"use strict";var e=b("glslify");_.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),_.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(b,T,_){"use strict";var e=b("gl-shader"),o=b("gl-buffer"),a=b("./lib/shaders");function l(v,h,s){this.plot=v,this.boxBuffer=h,this.boxShader=s,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}T.exports=function(v,h){var s=v.gl,f=new l(v,o(s,[0,0,0,1,1,0,1,1]),e(s,a.boxVertex,a.boxFragment));return f.update(h),v.addOverlay(f),f};var i=l.prototype;i.draw=function(){if(this.enabled){var v=this.plot,h=this.selectBox,s=this.borderWidth,d=this.innerColor,p=this.outerColor,f=this.borderColor,g=v.box,m=v.screenBox,u=v.dataBox,w=v.viewBox,c=v.pixelRatio,E=(h[0]-u[0])*(w[2]-w[0])/(u[2]-u[0])+w[0],M=(h[1]-u[1])*(w[3]-w[1])/(u[3]-u[1])+w[1],S=(h[2]-u[0])*(w[2]-w[0])/(u[2]-u[0])+w[0],C=(h[3]-u[1])*(w[3]-w[1])/(u[3]-u[1])+w[1];if(E=Math.max(E,w[0]),M=Math.max(M,w[1]),S=Math.min(S,w[2]),C=Math.min(C,w[3]),!(S<E||C<M)){g.bind();var O=m[2]-m[0],I=m[3]-m[1];if(this.outerFill&&(g.drawBox(0,0,O,M,p),g.drawBox(0,M,E,C,p),g.drawBox(0,C,O,I,p),g.drawBox(S,M,O,C,p)),this.innerFill&&g.drawBox(E,M,S,C,d),s>0){var N=s*c;g.drawBox(E-N,M-N,S+N,M+N,f),g.drawBox(E-N,C-N,S+N,C+N,f),g.drawBox(E-N,M-N,E+N,C+N,f),g.drawBox(S-N,M-N,S+N,C+N,f)}}}},i.update=function(v){this.innerFill=!!(v=v||{}).innerFill,this.outerFill=!!v.outerFill,this.innerColor=(v.innerColor||[0,0,0,.5]).slice(),this.outerColor=(v.outerColor||[0,0,0,.5]).slice(),this.borderColor=(v.borderColor||[0,0,0,1]).slice(),this.borderWidth=v.borderWidth||0,this.selectBox=(v.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(b,T,_){"use strict";T.exports=function(s,d){var p=d[0],f=d[1];return new v(s,e(s,p,f,{}),o.mallocUint8(p*f*4))};var e=b("gl-fbo"),o=b("typedarray-pool"),a=b("ndarray"),l=b("bit-twiddle").nextPow2;function i(s,d,p,f,g){this.coord=[s,d],this.id=p,this.value=f,this.distance=g}function v(s,d,p){this.gl=s,this.fbo=d,this.buffer=p,this._readTimeout=null;var f=this;this._readCallback=function(){f.gl&&(d.bind(),s.readPixels(0,0,d.shape[0],d.shape[1],s.RGBA,s.UNSIGNED_BYTE,f.buffer),f._readTimeout=null)}}var h=v.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(s){if(this.gl){this.fbo.shape=s;var d=this.fbo.shape[0],p=this.fbo.shape[1];if(p*d*4>this.buffer.length){o.free(this.buffer);for(var f=this.buffer=o.mallocUint8(l(p*d*4)),g=0;g<p*d*4;++g)f[g]=255}return s}}}),h.begin=function(){var s=this.gl;s&&(this.fbo.bind(),s.clearColor(1,1,1,1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT))},h.end=function(){var s=this.gl;s&&(s.bindFramebuffer(s.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(s,d,p){if(!this.gl)return null;var f=this.fbo.shape.slice();s|=0,d|=0,"number"!=typeof p&&(p=1);var g=0|Math.min(Math.max(s-p,0),f[0]),m=0|Math.min(Math.max(s+p,0),f[0]),u=0|Math.min(Math.max(d-p,0),f[1]),w=0|Math.min(Math.max(d+p,0),f[1]);if(m<=g||w<=u)return null;var c=[m-g,w-u],E=a(this.buffer,[c[0],c[1],4],[4,4*f[0],1],4*(g+f[0]*u)),M=function(O,I,N){for(var F=1e8,L=-1,P=-1,j=O.shape[0],U=O.shape[1],$=0;$<j;$++)for(var X=0;X<U;X++){var te=O.get($,X,0),ae=O.get($,X,1),J=O.get($,X,2),ee=O.get($,X,3);if(te<255||ae<255||J<255||ee<255){var se=I-$,G=N-X,H=se*se+G*G;H<F&&(F=H,L=$,P=X)}}return[L,P,F]}(E.hi(c[0],c[1],1),p,p),S=M[0],C=M[1];return S<0||Math.pow(this.radius,2)<M[2]?null:new i(S+g|0,C+u|0,E.get(S,C,0),[E.get(S,C,1),E.get(S,C,2),E.get(S,C,3)],Math.sqrt(M[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(b,T,_){"use strict";var e=b("./lib/create-uniforms"),o=b("./lib/create-attributes"),a=b("./lib/reflect"),l=b("./lib/shader-cache"),i=b("./lib/runtime-reflect"),v=b("./lib/GLError");function h(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var s=h.prototype;function d(p,f){return p.name<f.name?-1:1}s.bind=function(){var p;this.program||this._relink();var f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(f>g)for(p=g;p<f;p++)this.gl.enableVertexAttribArray(p);else if(g>f)for(p=f;p<g;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=f,this.gl.useProgram(this.program)},s.dispose=function(){for(var p=this.gl.lastAttribCount,f=0;f<p;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},s.update=function(p,f,g,m){if(!f||1===arguments.length){var u=p;p=u.vertex,f=u.fragment,g=u.uniforms,m=u.attributes}var w=this,c=w.gl,E=w._vref;w._vref=l.shader(c,c.VERTEX_SHADER,p),E&&E.dispose(),w.vertShader=w._vref.shader;var M=this._fref;if(w._fref=l.shader(c,c.FRAGMENT_SHADER,f),M&&M.dispose(),w.fragShader=w._fref.shader,!g||!m){var S=c.createProgram();if(c.attachShader(S,w.fragShader),c.attachShader(S,w.vertShader),c.linkProgram(S),!c.getProgramParameter(S,c.LINK_STATUS)){var C=c.getProgramInfoLog(S);throw new v(C,"Error linking program:"+C)}g=g||i.uniforms(c,S),m=m||i.attributes(c,S),c.deleteProgram(S)}(m=m.slice()).sort(d);var O,I=[],N=[],F=[];for(O=0;O<m.length;++O){var L=m[O];if(L.type.indexOf("mat")>=0){for(var P=0|L.type.charAt(L.type.length-1),j=new Array(P),U=0;U<P;++U)j[U]=F.length,N.push(L.name+"["+U+"]"),"number"==typeof L.location?F.push(L.location+U):Array.isArray(L.location)&&L.location.length===P&&"number"==typeof L.location[U]?F.push(0|L.location[U]):F.push(-1);I.push({name:L.name,type:L.type,locations:j})}else I.push({name:L.name,type:L.type,locations:[F.length]}),N.push(L.name),F.push("number"==typeof L.location?0|L.location:-1)}var $=0;for(O=0;O<F.length;++O)if(F[O]<0){for(;F.indexOf($)>=0;)$+=1;F[O]=$}var X=new Array(g.length);function te(){w.program=l.program(c,w._vref,w._fref,N,F);for(var ae=0;ae<g.length;++ae)X[ae]=c.getUniformLocation(w.program,g[ae].name)}te(),w._relink=te,w.types={uniforms:a(g),attributes:a(m)},w.attributes=o(c,w,I,F),Object.defineProperty(w,"uniforms",e(c,w,g,X))},T.exports=function(p,f,g,m,u){var w=new h(p);return w.update(f,g,m,u),w}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(b,T,_){function e(o,a,l){this.shortMessage=a||"",this.longMessage=l||"",this.rawError=o||"",this.message="gl-shader: "+(a||o||"")+(l?"\n"+l:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,T.exports=e},{}],134:[function(b,T,_){"use strict";T.exports=function(h,s,d,p){for(var f={},g=0,m=d.length;g<m;++g){var u=d[g],w=u.name,c=u.type,E=u.locations;switch(c){case"bool":case"int":case"float":i(h,s,E[0],p,1,f,w);break;default:if(c.indexOf("vec")>=0){if((M=c.charCodeAt(c.length-1)-48)<2||M>4)throw new e("","Invalid data type for attribute "+w+": "+c);i(h,s,E[0],p,M,f,w)}else{if(!(c.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+w+": "+c);var M;if((M=c.charCodeAt(c.length-1)-48)<2||M>4)throw new e("","Invalid data type for attribute "+w+": "+c);v(h,s,E,p,M,f,w)}}}return f};var e=b("./GLError");function o(h,s,d,p,f,g){this._gl=h,this._wrapper=s,this._index=d,this._locations=p,this._dimension=f,this._constFunc=g}var a=o.prototype;a.pointer=function(h,s,d,p){var f=this._gl,g=this._locations[this._index];f.vertexAttribPointer(g,this._dimension,h||f.FLOAT,!!s,d||0,p||0),f.enableVertexAttribArray(g)},a.set=function(h,s,d,p){return this._constFunc(this._locations[this._index],h,s,d,p)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var l=[function(h,s,d){return void 0===d.length?h.vertexAttrib1f(s,d):h.vertexAttrib1fv(s,d)},function(h,s,d,p){return void 0===d.length?h.vertexAttrib2f(s,d,p):h.vertexAttrib2fv(s,d)},function(h,s,d,p,f){return void 0===d.length?h.vertexAttrib3f(s,d,p,f):h.vertexAttrib3fv(s,d)},function(h,s,d,p,f,g){return void 0===d.length?h.vertexAttrib4f(s,d,p,f,g):h.vertexAttrib4fv(s,d)}];function i(h,s,d,p,f,g,m){var u=l[f],w=new o(h,s,d,p,f,u);Object.defineProperty(g,m,{set:function(c){return h.disableVertexAttribArray(p[d]),u(h,p[d],c),c},get:function(){return w},enumerable:!0})}function v(h,s,d,p,f,g,m){for(var u=new Array(f),w=new Array(f),c=0;c<f;++c)i(h,s,d[c],p,f,u,c),w[c]=u[c];Object.defineProperty(u,"location",{set:function(S){if(Array.isArray(S))for(var C=0;C<f;++C)w[C].location=S[C];else for(C=0;C<f;++C)w[C].location=S+C;return S},get:function(){for(var S=new Array(f),C=0;C<f;++C)S[C]=p[d[C]];return S},enumerable:!0}),u.pointer=function(S,C,O,I){S=S||h.FLOAT,C=!!C,O=O||f*f,I=I||0;for(var N=0;N<f;++N){var F=p[d[N]];h.vertexAttribPointer(F,f,S,C,O,I+N*f),h.enableVertexAttribArray(F)}};var E=new Array(f),M=h["vertexAttrib"+f+"fv"];Object.defineProperty(g,m,{set:function(S){for(var C=0;C<f;++C){var O=p[d[C]];if(h.disableVertexAttribArray(O),Array.isArray(S[0]))M.call(h,O,S[C]);else{for(var I=0;I<f;++I)E[I]=S[f*C+I];M.call(h,O,E)}}return S},get:function(){return u},enumerable:!0})}},{"./GLError":133}],135:[function(b,T,_){"use strict";var e=b("./reflect"),o=b("./GLError");function a(i){return function(){return i}}function l(i,v){for(var h=new Array(i),s=0;s<i;++s)h[s]=v;return h}T.exports=function(i,v,h,s){function d(m){return function(u){for(var w=function U($,X){if("object"!=typeof X)return[[$,X]];var te=[];for(var ae in X){var J=X[ae],ee=$;parseInt(ae)+""===ae?ee+="["+ae+"]":ee+="."+ae,"object"==typeof J?te.push.apply(te,U(ee,J)):te.push([ee,J])}return te}("",m),c=0;c<w.length;++c){var E=w[c],M=E[0],S=E[1];if(s[S]){var C=u;if("string"==typeof M&&(0===M.indexOf(".")||0===M.indexOf("["))){var O=M;if(0===M.indexOf(".")&&(O=M.slice(1)),O.indexOf("]")===O.length-1){var I=O.indexOf("["),N=O.slice(0,I),F=O.slice(I+1,O.length-1);C=N?u[N][F]:u[F]}else C=u[O]}var L,P=h[S].type;switch(P){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(s[S],C);break;case"float":i.uniform1f(s[S],C);break;default:var j=P.indexOf("vec");if(!(0<=j&&j<=1&&P.length===4+j)){if(0===P.indexOf("mat")&&4===P.length){if((L=P.charCodeAt(P.length-1)-48)<2||L>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+P);i["uniformMatrix"+L+"fv"](s[S],!1,C);break}throw new o("","Unknown uniform data type for "+name+": "+P)}if((L=P.charCodeAt(P.length-1)-48)<2||L>4)throw new o("","Invalid data type");switch(P.charAt(0)){case"b":case"i":i["uniform"+L+"iv"](s[S],C);break;case"v":i["uniform"+L+"fv"](s[S],C);break;default:throw new o("","Unrecognized data type for vector "+name+": "+P)}}}}}}function p(m,u,w){if("object"==typeof w){var c=f(w);Object.defineProperty(m,u,{get:a(c),set:d(w),enumerable:!0,configurable:!1})}else s[w]?Object.defineProperty(m,u,{get:(E=w,function(M,S,C){return M.getUniform(S.program,C[E])}),set:d(w),enumerable:!0,configurable:!1}):m[u]=function(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var S=M.indexOf("vec");if(0<=S&&S<=1&&M.length===4+S){if((C=M.charCodeAt(M.length-1)-48)<2||C>4)throw new o("","Invalid data type");return"b"===M.charAt(0)?l(C,!1):l(C,0)}if(0===M.indexOf("mat")&&4===M.length){var C;if((C=M.charCodeAt(M.length-1)-48)<2||C>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+M);return l(C*C,0)}throw new o("","Unknown uniform data type for "+name+": "+M)}}(h[w].type);var E}function f(m){var u;if(Array.isArray(m)){u=new Array(m.length);for(var w=0;w<m.length;++w)p(u,w,m[w])}else for(var c in u={},m)p(u,c,m[c]);return u}var g=e(h,!0);return{get:a(f(g)),set:d(g),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(b,T,_){"use strict";T.exports=function(e,o){for(var a={},l=0;l<e.length;++l)for(var i=e[l].name.split("."),v=a,h=0;h<i.length;++h){var s=i[h].split("[");if(s.length>1){s[0]in v||(v[s[0]]=[]),v=v[s[0]];for(var d=1;d<s.length;++d){var p=parseInt(s[d]);d<s.length-1||h<i.length-1?(p in v||(v[p]=d<s.length-1?[]:{}),v=v[p]):v[p]=o?l:e[l].type}}else h<i.length-1?(s[0]in v||(v[s[0]]={}),v=v[s[0]]):v[s[0]]=o?l:e[l].type}return a}},{}],137:[function(b,T,_){"use strict";_.uniforms=function(l,i){for(var v=l.getProgramParameter(i,l.ACTIVE_UNIFORMS),h=[],s=0;s<v;++s){var d=l.getActiveUniform(i,s);if(d){var p=a(l,d.type);if(d.size>1)for(var f=0;f<d.size;++f)h.push({name:d.name.replace("[0]","["+f+"]"),type:p});else h.push({name:d.name,type:p})}}return h},_.attributes=function(l,i){for(var v=l.getProgramParameter(i,l.ACTIVE_ATTRIBUTES),h=[],s=0;s<v;++s){var d=l.getActiveAttrib(i,s);d&&h.push({name:d.name,type:a(l,d.type)})}return h};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function a(l,i){if(!o){var v=Object.keys(e);o={};for(var h=0;h<v.length;++h){var s=v[h];o[l[s]]=e[s]}}return o[i]}},{}],138:[function(b,T,_){"use strict";_.shader=function(d,p,f){return s(d).getShaderReference(p,f)},_.program=function(d,p,f,g,m){return s(d).getProgram(p,f,g,m)};var e=b("./GLError"),o=b("gl-format-compiler-error"),a=new("undefined"==typeof WeakMap?b("weakmap-shim"):WeakMap),l=0;function i(d,p,f,g,m,u,w){this.id=d,this.src=p,this.type=f,this.shader=g,this.count=u,this.programs=[],this.cache=w}function v(d){this.gl=d,this.shaders=[{},{}],this.programs={}}i.prototype.dispose=function(){if(0==--this.count){for(var d=this.cache,p=d.gl,f=this.programs,g=0,m=f.length;g<m;++g){var u=d.programs[f[g]];u&&(delete d.programs[g],p.deleteProgram(u))}p.deleteShader(this.shader),delete d.shaders[this.type===p.FRAGMENT_SHADER|0][this.src]}};var h=v.prototype;function s(d){var p=a.get(d);return p||(p=new v(d),a.set(d,p)),p}h.getShaderReference=function(d,p){var f=this.gl,g=this.shaders[d===f.FRAGMENT_SHADER|0],m=g[p];if(m&&f.isShader(m.shader))m.count+=1;else{var u=function(w,c,E){var M=w.createShader(c);if(w.shaderSource(M,E),w.compileShader(M),!w.getShaderParameter(M,w.COMPILE_STATUS)){var S=w.getShaderInfoLog(M);try{var C=o(S,E,c)}catch(O){throw console.warn("Failed to format compiler error: "+O),new e(S,"Error compiling shader:\n"+S)}throw new e(S,C.short,C.long)}return M}(f,d,p);m=g[p]=new i(l++,p,d,u,[],1,this)}return m},h.getProgram=function(d,p,f,g){var m=[d.id,p.id,f.join(":"),g.join(":")].join("@"),u=this.programs[m];return u&&this.gl.isProgram(u)||(this.programs[m]=u=function(w,c,E,M,S){var C=w.createProgram();w.attachShader(C,c),w.attachShader(C,E);for(var O=0;O<M.length;++O)w.bindAttribLocation(C,S[O],M[O]);if(w.linkProgram(C),!w.getProgramParameter(C,w.LINK_STATUS)){var I=w.getProgramInfoLog(C);throw new e(I,"Error linking program: "+I)}return C}(this.gl,d.shader,p.shader,f,g),d.programs.push(m),p.programs.push(m)),u}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(b,T,_){"use strict";function e(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}T.exports=function(a,l){var i=new e(a);return i.update(l),a.addOverlay(i),i};var o=e.prototype;o.update=function(a){this.enable=((a=a||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var a=this.enable,l=this.width,i=this.color,v=this.center,h=this.plot,s=h.line,d=h.dataBox,p=h.viewBox;if(s.bind(),d[0]<=v[0]&&v[0]<=d[2]&&d[1]<=v[1]&&v[1]<=d[3]){var f=p[0]+(v[0]-d[0])/(d[2]-d[0])*(p[2]-p[0]),g=p[1]+(v[1]-d[1])/(d[3]-d[1])*(p[3]-p[1]);a[0]&&s.drawLine(f,g,p[0],g,l[0],i[0]),a[1]&&s.drawLine(f,g,f,p[1],l[1],i[1]),a[2]&&s.drawLine(f,g,p[2],g,l[2],i[2]),a[3]&&s.drawLine(f,g,f,p[3],l[3],i[3])}},o.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(b,T,_){"use strict";var e=b("glslify"),o=b("gl-shader"),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);T.exports=function(i){return o(i,a,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(b,T,_){"use strict";var e=b("gl-buffer"),o=b("gl-vao"),a=b("./shaders/index");T.exports=function(p,f){var g=[];function m(M,S,C,O,I,N){var F=[M,S,C,0,0,0,1];F[O+3]=1,F[O]=I,g.push.apply(g,F),F[6]=-1,g.push.apply(g,F),F[O]=N,g.push.apply(g,F),g.push.apply(g,F),F[6]=1,g.push.apply(g,F),F[O]=I,g.push.apply(g,F)}m(0,0,0,0,0,1),m(0,0,0,1,0,1),m(0,0,0,2,0,1),m(1,0,0,1,-1,1),m(1,0,0,2,-1,1),m(0,1,0,0,-1,1),m(0,1,0,2,-1,1),m(0,0,1,0,-1,1),m(0,0,1,1,-1,1);var u=e(p,g),w=o(p,[{type:p.FLOAT,buffer:u,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:u,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:u,size:1,offset:24,stride:28}]),c=a(p);c.attributes.position.location=0,c.attributes.color.location=1,c.attributes.weight.location=2;var E=new i(p,u,w,c);return E.update(f),E};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(p,f,g,m){this.gl=p,this.buffer=f,this.vao=g,this.shader=m,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var v=i.prototype,h=[0,0,0],s=[0,0,0],d=[0,0];v.isTransparent=function(){return!1},v.drawTransparent=function(p){},v.draw=function(p){var f=this.gl,g=this.vao,m=this.shader;g.bind(),m.bind();var u,w=p.model||l,c=p.view||l,E=p.projection||l;this.axes&&(u=this.axes.lastCubeProps.axis);for(var M=h,S=s,C=0;C<3;++C)u&&u[C]<0?(M[C]=this.bounds[0][C],S[C]=this.bounds[1][C]):(M[C]=this.bounds[1][C],S[C]=this.bounds[0][C]);for(d[0]=f.drawingBufferWidth,d[1]=f.drawingBufferHeight,m.uniforms.model=w,m.uniforms.view=c,m.uniforms.projection=E,m.uniforms.coordinates=[this.position,M,S],m.uniforms.colors=this.colors,m.uniforms.screenShape=d,C=0;C<3;++C)m.uniforms.lineWidth=this.lineWidth[C]*this.pixelRatio,this.enabled[C]&&(g.draw(f.TRIANGLES,6,6*C),this.drawSides[C]&&g.draw(f.TRIANGLES,12,18+12*C));g.unbind()},v.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},v.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(b,T,_){var e=b("glslify"),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);_.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},_.pickShader={vertex:l,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(b,T,_){"use strict";var e=b("gl-vec3"),o=b("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],i=function(p,f){var g,m=p.length;for(g=0;g<m;g++){var u=p[g];if(u===f)return g;if(u>f)return g-1}return g},v=function(p,f,g){return p<f?f:p>g?g:p},h=function(p){var f=1/0;p.sort(function(w,c){return w-c});for(var g=p.length,m=1;m<g;m++){var u=Math.abs(p[m]-p[m-1]);u<f&&(f=u)}return f};T.exports=function(p,f){var g=p.startingPositions,m=p.maxLength||1e3,u=p.tubeSize||1,w=p.absoluteTubeSize,c=p.gridFill||"+x+y+z",E={};-1!==c.indexOf("-x")&&(E.reversedX=!0),-1!==c.indexOf("-y")&&(E.reversedY=!0),-1!==c.indexOf("-z")&&(E.reversedZ=!0),E.filled=a.indexOf(c.replace(/-/g,"").replace(/\+/g,""));var pe,we,ye,Te,M=p.getVelocity||function(pe){return function(we,ye,Te){var Le=ye.vectors,Oe=ye.meshgrid,Re=we[0],Ve=we[1],_e=we[2],Ae=Oe[0].length,Fe=Oe[1].length,Pe=Oe[2].length,Be=i(Oe[0],Re),qe=i(Oe[1],Ve),We=i(Oe[2],_e),Je=Be+1,ut=qe+1,Ge=We+1;if(Be=v(Be,0,Ae-1),Je=v(Je,0,Ae-1),qe=v(qe,0,Fe-1),ut=v(ut,0,Fe-1),We=v(We,0,Pe-1),Ge=v(Ge,0,Pe-1),Be<0||qe<0||We<0||Je>Ae-1||ut>Fe-1||Ge>Pe-1)return e.create();var Ke,nt,it,ht,Tt,Ct,Vt=Oe[0][Be],gt=Oe[1][qe],Bt=Oe[2][We],rn=(Re-Vt)/(Oe[0][Je]-Vt),un=(Ve-gt)/(Oe[1][ut]-gt),pn=(_e-Bt)/(Oe[2][Ge]-Bt);switch(isFinite(rn)||(rn=.5),isFinite(un)||(un=.5),isFinite(pn)||(pn=.5),Te.reversedX&&(Be=Ae-1-Be,Je=Ae-1-Je),Te.reversedY&&(qe=Fe-1-qe,ut=Fe-1-ut),Te.reversedZ&&(We=Pe-1-We,Ge=Pe-1-Ge),Te.filled){case 5:Tt=We,Ct=Ge,it=qe*Pe,ht=ut*Pe,Ke=Be*Pe*Fe,nt=Je*Pe*Fe;break;case 4:Tt=We,Ct=Ge,Ke=Be*Pe,nt=Je*Pe,it=qe*Pe*Ae,ht=ut*Pe*Ae;break;case 3:it=qe,ht=ut,Tt=We*Fe,Ct=Ge*Fe,Ke=Be*Fe*Pe,nt=Je*Fe*Pe;break;case 2:it=qe,ht=ut,Ke=Be*Fe,nt=Je*Fe,Tt=We*Fe*Ae,Ct=Ge*Fe*Ae;break;case 1:Ke=Be,nt=Je,Tt=We*Ae,Ct=Ge*Ae,it=qe*Ae*Pe,ht=ut*Ae*Pe;break;default:Ke=Be,nt=Je,it=qe*Ae,ht=ut*Ae,Tt=We*Ae*Fe,Ct=Ge*Ae*Fe}var dn=Le[Ke+it+Tt],Mn=Le[Ke+it+Ct],ln=Le[Ke+ht+Tt],Ee=Le[Ke+ht+Ct],De=Le[nt+it+Tt],Ie=Le[nt+it+Ct],He=Le[nt+ht+Tt],Ye=Le[nt+ht+Ct],tt=e.create(),ot=e.create(),st=e.create(),bt=e.create();e.lerp(tt,dn,De,rn),e.lerp(ot,Mn,Ie,rn),e.lerp(st,ln,He,rn),e.lerp(bt,Ee,Ye,rn);var wt=e.create(),Ut=e.create();e.lerp(wt,tt,st,un),e.lerp(Ut,ot,bt,un);var Kt=e.create();return e.lerp(Kt,wt,Ut,pn),Kt}(pe,p,E)},S=p.getDivergence||function(pe,we){var ye=e.create(),Te=1e-4;e.add(ye,pe,[Te,0,0]);var Le=M(ye);e.subtract(Le,Le,we),e.scale(Le,Le,1/Te),e.add(ye,pe,[0,Te,0]);var Oe=M(ye);e.subtract(Oe,Oe,we),e.scale(Oe,Oe,1/Te),e.add(ye,pe,[0,0,Te]);var Re=M(ye);return e.subtract(Re,Re,we),e.scale(Re,Re,1/Te),e.add(ye,Le,Oe),e.add(ye,ye,Re),ye},C=[],O=f[0][0],I=f[0][1],N=f[0][2],F=f[1][0],L=f[1][1],P=f[1][2],U=10*e.distance(f[0],f[1])/m,$=U*U,X=1,te=0,ae=g.length;ae>1&&(X=function(pe){for(var we=[],ye=[],Te=[],Le={},Oe={},Re={},Ve=pe.length,_e=0;_e<Ve;_e++){var Ae=pe[_e],Fe=Ae[0],Pe=Ae[1],Be=Ae[2];Le[Fe]||(we.push(Fe),Le[Fe]=!0),Oe[Pe]||(ye.push(Pe),Oe[Pe]=!0),Re[Be]||(Te.push(Be),Re[Be]=!0)}var qe=h(we),We=h(ye),Je=h(Te),ut=Math.min(qe,We,Je);return isFinite(ut)?ut:1}(g));for(var J=0;J<ae;J++){var ee=e.create();e.copy(ee,g[J]);var se=[ee],G=[],H=M(ee),Y=ee;G.push(H);var oe=[],W=S(ee,H),ne=e.length(W);isFinite(ne)&&ne>te&&(te=ne),oe.push(ne),C.push({points:se,velocities:G,divergences:oe});for(var re=0;re<100*m&&se.length<m&&(we=void 0,ye=void 0,Te=void 0,ye=(pe=ee)[1],Te=pe[2],!((we=pe[0])<O||we>F||ye<I||ye>L||Te<N||Te>P));){re++;var ce=e.clone(H),fe=e.squaredLength(ce);if(0===fe)break;fe>$&&e.scale(ce,ce,U/Math.sqrt(fe)),e.add(ce,ce,ee),H=M(ce),e.squaredDistance(Y,ce)-$>-1e-4*$&&(se.push(ce),Y=ce,G.push(H),W=S(ce,H),ne=e.length(W),isFinite(ne)&&ne>te&&(te=ne),oe.push(ne)),ee=ce}}var me=function(p,f,g,m){for(var u=0,w=0;w<p.length;w++)for(var c=p[w].velocities,E=0;E<c.length;E++)u=Math.max(u,e.length(c[E]));var M=p.map(function(U){return function($,X,te,ae){for(var J=$.points,ee=$.velocities,se=$.divergences,G=[],H=[],Y=[],oe=[],W=[],ne=[],re=0,ce=0,fe=o.create(),me=o.create(),pe=0;pe<J.length;pe++){var we=J[pe],ye=ee[pe],Te=se[pe];0===X&&(Te=.05*te),ce=e.length(ye)/ae,fe=o.create(),e.copy(fe,ye),fe[3]=Te;for(var Le=0;Le<8;Le++)W[Le]=[we[0],we[1],we[2],Le];if(oe.length>0)for(Le=0;Le<8;Le++){var Oe=(Le+1)%8;G.push(oe[Le],W[Le],W[Oe],W[Oe],oe[Oe],oe[Le]),Y.push(me,fe,fe,fe,me,me),ne.push(re,ce,ce,ce,re,re);var Re=G.length;H.push([Re-6,Re-5,Re-4],[Re-3,Re-2,Re-1])}var Ve=oe;oe=W,W=Ve;var _e=me;me=fe,fe=_e;var Ae=re;re=ce,ce=Ae}return{positions:G,cells:H,vectors:Y,vertexIntensity:ne}}(U,g,m,u)}),S=[],C=[],O=[],I=[];for(w=0;w<M.length;w++){var N=M[w],F=S.length;for(S=S.concat(N.positions),O=O.concat(N.vectors),I=I.concat(N.vertexIntensity),E=0;E<N.cells.length;E++){var L=N.cells[E],P=[];C.push(P);for(var j=0;j<L.length;j++)P.push(L[j]+F)}}return{positions:S,cells:C,vectors:O,vertexIntensity:I,colormap:f}}(C,p.colormap,te,X);return w?me.tubeScale=w:(0===te&&(te=1),me.tubeScale=.5*u*X/te),me};var s=b("./lib/shaders"),d=b("gl-cone3d").createMesh;T.exports.createTubeMesh=function(p,f){return d(p,f,{shaders:s,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(b,T,_){var e=b("gl-shader"),o=b("glslify"),a=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),v=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);_.createShader=function(h){var s=e(h,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},_.createPickShader=function(h){var s=e(h,a,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},_.createContourShader=function(h){var s=e(h,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s},_.createPickContourShader=function(h){var s=e(h,i,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s}},{"gl-shader":132,glslify:231}],145:[function(b,T,_){"use strict";T.exports=function(H){var Y=H.gl,oe=c(Y),W=M(Y),ne=E(Y),re=S(Y),ce=o(Y),fe=a(Y,[{buffer:ce,size:4,stride:40,offset:0},{buffer:ce,size:3,stride:40,offset:16},{buffer:ce,size:3,stride:40,offset:28}]),me=o(Y),pe=a(Y,[{buffer:me,size:4,stride:20,offset:0},{buffer:me,size:1,stride:20,offset:16}]),we=o(Y),ye=a(Y,[{buffer:we,size:2,type:Y.FLOAT}]),Te=l(Y,1,256,Y.RGBA,Y.UNSIGNED_BYTE);Te.minFilter=Y.LINEAR,Te.magFilter=Y.LINEAR;var Le=new F(Y,[0,0],[[0,0,0],[0,0,0]],oe,W,ce,fe,Te,ne,re,me,pe,we,ye,[0,0,0]),Oe={levels:[[],[],[]]};for(var Re in H)Oe[Re]=H[Re];return Oe.colormap=Oe.colormap||"jet",Le.update(Oe),Le};var e=b("bit-twiddle"),o=b("gl-buffer"),a=b("gl-vao"),l=b("gl-texture2d"),i=b("typedarray-pool"),v=b("colormap"),h=b("ndarray-ops"),s=b("ndarray-pack"),d=b("ndarray"),p=b("surface-nets"),f=b("gl-mat4/multiply"),g=b("gl-mat4/invert"),m=b("binary-search-bounds"),u=b("ndarray-gradient"),w=b("./lib/shaders"),c=w.createShader,E=w.createContourShader,M=w.createPickShader,S=w.createPickContourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],I=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function N(H,Y,oe,W,ne){this.position=H,this.index=Y,this.uv=oe,this.level=W,this.dataCoordinate=ne}function F(H,Y,oe,W,ne,re,ce,fe,me,pe,we,ye,Te,Le,Oe){this.gl=H,this.shape=Y,this.bounds=oe,this.objectOffset=Oe,this.intensityBounds=[],this._shader=W,this._pickShader=ne,this._coordinateBuffer=re,this._vao=ce,this._colorMap=fe,this._contourShader=me,this._contourPickShader=pe,this._contourBuffer=we,this._contourVAO=ye,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new N([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=Te,this._dynamicVAO=Le,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[d(i.mallocFloat(1024),[0,0]),d(i.mallocFloat(1024),[0,0]),d(i.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var H=0;H<3;++H){var Y=I[H],oe=(H+2)%3;Y[(H+1)%3+0]=1,Y[oe+3]=1,Y[H+6]=1}}();var L=F.prototype;L.genColormap=function(H,Y){var oe=!1,W=s([v({colormap:H,nshades:256,format:"rgba"}).map(function(ne,re){var ce=Y?function(fe,me){if(!me||!me.length)return 1;for(var pe=0;pe<me.length;++pe){if(me.length<2)return 1;if(me[pe][0]===fe)return me[pe][1];if(me[pe][0]>fe&&pe>0){var we=(me[pe][0]-fe)/(me[pe][0]-me[pe-1][0]);return me[pe][1]*(1-we)+we*me[pe-1][1]}}return 1}(re/255,Y):ne[3];return ce<1&&(oe=!0),[ne[0],ne[1],ne[2],255*ce]})]);return h.divseq(W,255),this.hasAlphaScale=oe,W},L.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},L.isOpaque=function(){return!this.isTransparent()},L.pickSlots=1,L.setPickBase=function(H){this.pickId=H};var P=[0,0,0],j={showSurface:!1,showContour:!1,projections:[C.slice(),C.slice(),C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function U(H,Y){var oe,W,ne,re=Y.axes&&Y.axes.lastCubeProps.axis||P,ce=Y.showSurface,fe=Y.showContour;for(oe=0;oe<3;++oe)for(ce=ce||Y.surfaceProject[oe],W=0;W<3;++W)fe=fe||Y.contourProject[oe][W];for(oe=0;oe<3;++oe){var me=j.projections[oe];for(W=0;W<16;++W)me[W]=0;for(W=0;W<4;++W)me[5*W]=1;me[5*oe]=0,me[12+oe]=Y.axesBounds[+(re[oe]>0)][oe],f(me,H.model,me);var pe=j.clipBounds[oe];for(ne=0;ne<2;++ne)for(W=0;W<3;++W)pe[ne][W]=H.clipBounds[ne][W];pe[0][oe]=-1e8,pe[1][oe]=1e8}return j.showSurface=ce,j.showContour=fe,j}var $={model:C,view:C,projection:C,inverseModel:C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},X=C.slice(),te=[1,0,0,0,1,0,0,0,1];function ae(H,Y){H=H||{};var oe=this.gl;oe.disable(oe.CULL_FACE),this._colorMap.bind(0);var W=$;W.model=H.model||C,W.view=H.view||C,W.projection=H.projection||C,W.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],W.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],W.objectOffset=this.objectOffset,W.contourColor=this.contourColor[0],W.inverseModel=g(W.inverseModel,W.model);for(var ne=0;ne<2;++ne)for(var re=W.clipBounds[ne],ce=0;ce<3;++ce)re[ce]=Math.min(Math.max(this.clipBounds[ne][ce],-1e8),1e8);W.kambient=this.ambientLight,W.kdiffuse=this.diffuseLight,W.kspecular=this.specularLight,W.roughness=this.roughness,W.fresnel=this.fresnel,W.opacity=this.opacity,W.height=0,W.permutation=te,W.vertexColor=this.vertexColor;var fe=X;for(f(fe,W.view,W.model),f(fe,W.projection,fe),g(fe,fe),ne=0;ne<3;++ne)W.eyePosition[ne]=fe[12+ne]/fe[15];var me=fe[15];for(ne=0;ne<3;++ne)me+=this.lightPosition[ne]*fe[4*ne+3];for(ne=0;ne<3;++ne){var pe=fe[12+ne];for(ce=0;ce<3;++ce)pe+=fe[4*ce+ne]*this.lightPosition[ce];W.lightPosition[ne]=pe/me}var we=U(W,this);if(we.showSurface){for(this._shader.bind(),this._shader.uniforms=W,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(oe.TRIANGLES,this._vertexCount),ne=0;ne<3;++ne)this.surfaceProject[ne]&&this.vertexCount&&(this._shader.uniforms.model=we.projections[ne],this._shader.uniforms.clipBounds=we.clipBounds[ne],this._vao.draw(oe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(we.showContour){var ye=this._contourShader;W.kambient=1,W.kdiffuse=0,W.kspecular=0,W.opacity=1,ye.bind(),ye.uniforms=W;var Te=this._contourVAO;for(Te.bind(),ne=0;ne<3;++ne)for(ye.uniforms.permutation=I[ne],oe.lineWidth(this.contourWidth[ne]*this.pixelRatio),ce=0;ce<this.contourLevels[ne].length;++ce)ce===this.highlightLevel[ne]?(ye.uniforms.contourColor=this.highlightColor[ne],ye.uniforms.contourTint=this.highlightTint[ne]):0!==ce&&ce-1!==this.highlightLevel[ne]||(ye.uniforms.contourColor=this.contourColor[ne],ye.uniforms.contourTint=this.contourTint[ne]),this._contourCounts[ne][ce]&&(ye.uniforms.height=this.contourLevels[ne][ce],Te.draw(oe.LINES,this._contourCounts[ne][ce],this._contourOffsets[ne][ce]));for(ne=0;ne<3;++ne)for(ye.uniforms.model=we.projections[ne],ye.uniforms.clipBounds=we.clipBounds[ne],ce=0;ce<3;++ce)if(this.contourProject[ne][ce]){ye.uniforms.permutation=I[ce],oe.lineWidth(this.contourWidth[ce]*this.pixelRatio);for(var Le=0;Le<this.contourLevels[ce].length;++Le)Le===this.highlightLevel[ce]?(ye.uniforms.contourColor=this.highlightColor[ce],ye.uniforms.contourTint=this.highlightTint[ce]):0!==Le&&Le-1!==this.highlightLevel[ce]||(ye.uniforms.contourColor=this.contourColor[ce],ye.uniforms.contourTint=this.contourTint[ce]),this._contourCounts[ce][Le]&&(ye.uniforms.height=this.contourLevels[ce][Le],Te.draw(oe.LINES,this._contourCounts[ce][Le],this._contourOffsets[ce][Le]))}for(Te.unbind(),(Te=this._dynamicVAO).bind(),ne=0;ne<3;++ne)if(0!==this._dynamicCounts[ne])for(ye.uniforms.model=W.model,ye.uniforms.clipBounds=W.clipBounds,ye.uniforms.permutation=I[ne],oe.lineWidth(this.dynamicWidth[ne]*this.pixelRatio),ye.uniforms.contourColor=this.dynamicColor[ne],ye.uniforms.contourTint=this.dynamicTint[ne],ye.uniforms.height=this.dynamicLevel[ne],Te.draw(oe.LINES,this._dynamicCounts[ne],this._dynamicOffsets[ne]),ce=0;ce<3;++ce)this.contourProject[ce][ne]&&(ye.uniforms.model=we.projections[ce],ye.uniforms.clipBounds=we.clipBounds[ce],Te.draw(oe.LINES,this._dynamicCounts[ne],this._dynamicOffsets[ne]));Te.unbind()}}L.draw=function(H){return ae.call(this,H,!1)},L.drawTransparent=function(H){return ae.call(this,H,!0)};var J={model:C,view:C,projection:C,inverseModel:C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function ee(H,Y){return Array.isArray(H)?[Y(H[0]),Y(H[1]),Y(H[2])]:[Y(H),Y(H),Y(H)]}function se(H){return Array.isArray(H)?3===H.length?[H[0],H[1],H[2],1]:[H[0],H[1],H[2],H[3]]:[0,0,0,1]}function G(H){if(Array.isArray(H)){if(Array.isArray(H))return[se(H[0]),se(H[1]),se(H[2])];var Y=se(H);return[Y.slice(),Y.slice(),Y.slice()]}}L.drawPick=function(H){H=H||{};var Y=this.gl;Y.disable(Y.CULL_FACE);var oe=J;oe.model=H.model||C,oe.view=H.view||C,oe.projection=H.projection||C,oe.shape=this._field[2].shape,oe.pickId=this.pickId/255,oe.lowerBound=this.bounds[0],oe.upperBound=this.bounds[1],oe.objectOffset=this.objectOffset,oe.permutation=te;for(var W=0;W<2;++W)for(var ne=oe.clipBounds[W],re=0;re<3;++re)ne[re]=Math.min(Math.max(this.clipBounds[W][re],-1e8),1e8);var ce=U(oe,this);if(ce.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=oe,this._vao.bind(),this._vao.draw(Y.TRIANGLES,this._vertexCount),W=0;W<3;++W)this.surfaceProject[W]&&(this._pickShader.uniforms.model=ce.projections[W],this._pickShader.uniforms.clipBounds=ce.clipBounds[W],this._vao.draw(Y.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ce.showContour){var fe=this._contourPickShader;fe.bind(),fe.uniforms=oe;var me=this._contourVAO;for(me.bind(),re=0;re<3;++re)for(Y.lineWidth(this.contourWidth[re]*this.pixelRatio),fe.uniforms.permutation=I[re],W=0;W<this.contourLevels[re].length;++W)this._contourCounts[re][W]&&(fe.uniforms.height=this.contourLevels[re][W],me.draw(Y.LINES,this._contourCounts[re][W],this._contourOffsets[re][W]));for(W=0;W<3;++W)for(fe.uniforms.model=ce.projections[W],fe.uniforms.clipBounds=ce.clipBounds[W],re=0;re<3;++re)if(this.contourProject[W][re]){fe.uniforms.permutation=I[re],Y.lineWidth(this.contourWidth[re]*this.pixelRatio);for(var pe=0;pe<this.contourLevels[re].length;++pe)this._contourCounts[re][pe]&&(fe.uniforms.height=this.contourLevels[re][pe],me.draw(Y.LINES,this._contourCounts[re][pe],this._contourOffsets[re][pe]))}me.unbind()}},L.pick=function(H){if(!H||H.id!==this.pickId)return null;var Y=this._field[2].shape,oe=this._pickResult,W=Y[0]*(H.value[0]+(H.value[2]>>4)/16)/255,ne=Math.floor(W),re=W-ne,ce=Y[1]*(H.value[1]+(15&H.value[2])/16)/255,fe=Math.floor(ce),me=ce-fe;ne+=1,fe+=1;var pe=oe.position;pe[0]=pe[1]=pe[2]=0;for(var we=0;we<2;++we)for(var ye=we?re:1-re,Te=0;Te<2;++Te)for(var Le=ne+we,Oe=fe+Te,Re=ye*(Te?me:1-me),Ve=0;Ve<3;++Ve)pe[Ve]+=this._field[Ve].get(Le,Oe)*Re;for(var _e=this._pickResult.level,Ae=0;Ae<3;++Ae)if(_e[Ae]=m.le(this.contourLevels[Ae],pe[Ae]),_e[Ae]<0)this.contourLevels[Ae].length>0&&(_e[Ae]=0);else if(_e[Ae]<this.contourLevels[Ae].length-1){var Pe=this.contourLevels[Ae][_e[Ae]+1];Math.abs(this.contourLevels[Ae][_e[Ae]]-pe[Ae])>Math.abs(Pe-pe[Ae])&&(_e[Ae]+=1)}for(oe.index[0]=re<.5?ne:ne+1,oe.index[1]=me<.5?fe:fe+1,oe.uv[0]=W/Y[0],oe.uv[1]=ce/Y[1],Ve=0;Ve<3;++Ve)oe.dataCoordinate[Ve]=this._field[Ve].get(oe.index[0],oe.index[1]);return oe},L.padField=function(H,Y){var oe=Y.shape.slice(),W=H.shape.slice();h.assign(H.lo(1,1).hi(oe[0],oe[1]),Y),h.assign(H.lo(1).hi(oe[0],1),Y.hi(oe[0],1)),h.assign(H.lo(1,W[1]-1).hi(oe[0],1),Y.lo(0,oe[1]-1).hi(oe[0],1)),h.assign(H.lo(0,1).hi(1,oe[1]),Y.hi(1)),h.assign(H.lo(W[0]-1,1).hi(1,oe[1]),Y.lo(oe[0]-1)),H.set(0,0,Y.get(0,0)),H.set(0,W[1]-1,Y.get(0,oe[1]-1)),H.set(W[0]-1,0,Y.get(oe[0]-1,0)),H.set(W[0]-1,W[1]-1,Y.get(oe[0]-1,oe[1]-1))},L.update=function(H){this.objectOffset=(H=H||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in H&&(this.contourWidth=ee(H.contourWidth,Number)),"showContour"in H&&(this.showContour=ee(H.showContour,Boolean)),"showSurface"in H&&(this.showSurface=!!H.showSurface),"contourTint"in H&&(this.contourTint=ee(H.contourTint,Boolean)),"contourColor"in H&&(this.contourColor=G(H.contourColor)),"contourProject"in H&&(this.contourProject=ee(H.contourProject,function(fn){return ee(fn,Boolean)})),"surfaceProject"in H&&(this.surfaceProject=H.surfaceProject),"dynamicColor"in H&&(this.dynamicColor=G(H.dynamicColor)),"dynamicTint"in H&&(this.dynamicTint=ee(H.dynamicTint,Number)),"dynamicWidth"in H&&(this.dynamicWidth=ee(H.dynamicWidth,Number)),"opacity"in H&&(this.opacity=H.opacity),"opacityscale"in H&&(this.opacityscale=H.opacityscale),"colorBounds"in H&&(this.colorBounds=H.colorBounds),"vertexColor"in H&&(this.vertexColor=H.vertexColor?1:0),"colormap"in H&&this._colorMap.setPixels(this.genColormap(H.colormap,this.opacityscale));var Y=H.field||H.coords&&H.coords[2]||null,oe=!1;if(Y||(Y=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in H||"coords"in H){var W=(Y.shape[0]+2)*(Y.shape[1]+2);W>this._field[2].data.length&&(i.freeFloat(this._field[2].data),this._field[2].data=i.mallocFloat(e.nextPow2(W))),this._field[2]=d(this._field[2].data,[Y.shape[0]+2,Y.shape[1]+2]),this.padField(this._field[2],Y),this.shape=Y.shape.slice();for(var ne=this.shape,re=0;re<2;++re)this._field[2].size>this._field[re].data.length&&(i.freeFloat(this._field[re].data),this._field[re].data=i.mallocFloat(this._field[2].size)),this._field[re]=d(this._field[re].data,[ne[0]+2,ne[1]+2]);if(H.coords){var ce=H.coords;if(!Array.isArray(ce)||3!==ce.length)throw new Error("gl-surface: invalid coordinates for x/y");for(re=0;re<2;++re){var fe=ce[re];for(Te=0;Te<2;++Te)if(fe.shape[Te]!==ne[Te])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[re],fe)}}else if(H.ticks){var me=H.ticks;if(!Array.isArray(me)||2!==me.length)throw new Error("gl-surface: invalid ticks");for(re=0;re<2;++re){var pe=me[re];if((Array.isArray(pe)||pe.length)&&(pe=d(pe)),pe.shape[0]!==ne[re])throw new Error("gl-surface: invalid tick length");var we=d(pe.data,ne);we.stride[re]=pe.stride[0],we.stride[1^re]=0,this.padField(this._field[re],we)}}else{for(re=0;re<2;++re){var ye=[0,0];ye[re]=1,this._field[re]=d(this._field[re].data,[ne[0]+2,ne[1]+2],ye,0)}this._field[0].set(0,0,0);for(var Te=0;Te<ne[0];++Te)this._field[0].set(Te+1,0,Te);for(this._field[0].set(ne[0]+1,0,ne[0]-1),this._field[1].set(0,0,0),Te=0;Te<ne[1];++Te)this._field[1].set(0,Te+1,Te);this._field[1].set(0,ne[1]+1,ne[1]-1)}var Le=this._field,Oe=d(i.mallocFloat(3*Le[2].size*2),[3,ne[0]+2,ne[1]+2,2]);for(re=0;re<3;++re)u(Oe.pick(re),Le[re],"mirror");var Re=d(i.mallocFloat(3*Le[2].size),[ne[0]+2,ne[1]+2,3]);for(re=0;re<ne[0]+2;++re)for(Te=0;Te<ne[1]+2;++Te){var Ve=Oe.get(0,re,Te,0),_e=Oe.get(0,re,Te,1),Ae=Oe.get(1,re,Te,0),Fe=Oe.get(1,re,Te,1),Pe=Oe.get(2,re,Te,0),Be=Oe.get(2,re,Te,1),qe=Ae*Be-Fe*Pe,We=Pe*_e-Be*Ve,Je=Ve*Fe-_e*Ae,ut=Math.sqrt(qe*qe+We*We+Je*Je);ut<1e-8?(ut=Math.max(Math.abs(qe),Math.abs(We),Math.abs(Je)))<1e-8?(Je=1,We=qe=0,ut=1):ut=1/ut:ut=1/Math.sqrt(ut),Re.set(re,Te,0,qe*ut),Re.set(re,Te,1,We*ut),Re.set(re,Te,2,Je*ut)}i.free(Oe.data);var Ge=[1/0,1/0,1/0],Ke=[-1/0,-1/0,-1/0],nt=1/0,it=-1/0,Tt=i.mallocFloat(e.nextPow2((ne[0]-1)*(ne[1]-1)*6*10)),Ct=0,Vt=0;for(re=0;re<ne[0]-1;++re)e:for(Te=0;Te<ne[1]-1;++Te){for(var Ft=0;Ft<2;++Ft)for(var gt=0;gt<2;++gt)for(var ft=0;ft<3;++ft){var Bt=this._field[ft].get(1+re+Ft,1+Te+gt);if(isNaN(Bt)||!isFinite(Bt))continue e}for(ft=0;ft<6;++ft){var rn=re+O[ft][0],un=Te+O[ft][1],pn=this._field[0].get(rn+1,un+1),dn=this._field[1].get(rn+1,un+1);Bt=this._field[2].get(rn+1,un+1),qe=Re.get(rn+1,un+1,0),We=Re.get(rn+1,un+1,1),Je=Re.get(rn+1,un+1,2),H.intensity&&(Mn=H.intensity.get(rn,un));var Mn=H.intensity?H.intensity.get(rn,un):Bt+this.objectOffset[2];Tt[Ct++]=rn,Tt[Ct++]=un,Tt[Ct++]=pn,Tt[Ct++]=dn,Tt[Ct++]=Bt,Tt[Ct++]=0,Tt[Ct++]=Mn,Tt[Ct++]=qe,Tt[Ct++]=We,Tt[Ct++]=Je,Ge[0]=Math.min(Ge[0],pn+this.objectOffset[0]),Ge[1]=Math.min(Ge[1],dn+this.objectOffset[1]),Ge[2]=Math.min(Ge[2],Bt+this.objectOffset[2]),nt=Math.min(nt,Mn),Ke[0]=Math.max(Ke[0],pn+this.objectOffset[0]),Ke[1]=Math.max(Ke[1],dn+this.objectOffset[1]),Ke[2]=Math.max(Ke[2],Bt+this.objectOffset[2]),it=Math.max(it,Mn),Vt+=1}}for(H.intensityBounds&&(nt=+H.intensityBounds[0],it=+H.intensityBounds[1]),re=6;re<Ct;re+=10)Tt[re]=(Tt[re]-nt)/(it-nt);this._vertexCount=Vt,this._coordinateBuffer.update(Tt.subarray(0,Ct)),i.freeFloat(Tt),i.free(Re.data),this.bounds=[Ge,Ke],this.intensity=H.intensity||this._field[2],this.intensityBounds[0]===nt&&this.intensityBounds[1]===it||(oe=!0),this.intensityBounds=[nt,it]}if("levels"in H){var ln=H.levels;for(ln=Array.isArray(ln[0])?ln.slice():[[],[],ln],re=0;re<3;++re)ln[re]=ln[re].slice(),ln[re].sort(function(fn,an){return fn-an});for(re=0;re<3;++re)for(Te=0;Te<ln[re].length;++Te)ln[re][Te]-=this.objectOffset[re];e:for(re=0;re<3;++re){if(ln[re].length!==this.contourLevels[re].length){oe=!0;break}for(Te=0;Te<ln[re].length;++Te)if(ln[re][Te]!==this.contourLevels[re][Te]){oe=!0;break e}}this.contourLevels=ln}if(oe){Le=this._field,ne=this.shape;for(var Ee=[],De=0;De<3;++De){var Ie=this.contourLevels[De],He=[],Ye=[],tt=[0,0,0];for(re=0;re<Ie.length;++re){var ot=p(this._field[De],Ie[re]);He.push(Ee.length/5|0),Vt=0;e:for(Te=0;Te<ot.cells.length;++Te){var st=ot.cells[Te];for(ft=0;ft<2;++ft){var bt=ot.positions[st[ft]],wt=bt[0],Ut=0|Math.floor(wt),Kt=wt-Ut,vt=bt[1],Et=0|Math.floor(vt),$t=vt-Et,Dt=!1;t:for(var Pt=0;Pt<3;++Pt){tt[Pt]=0;var je=(De+Pt+1)%3;for(Ft=0;Ft<2;++Ft){var rt=Ft?Kt:1-Kt;for(rn=0|Math.min(Math.max(Ut+Ft,0),ne[0]),gt=0;gt<2;++gt){var pt=gt?$t:1-$t;if(un=0|Math.min(Math.max(Et+gt,0),ne[1]),Bt=Pt<2?this._field[je].get(rn,un):(this.intensity.get(rn,un)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Bt)||isNaN(Bt)){Dt=!0;break t}tt[Pt]+=rt*pt*Bt}}}if(Dt){if(ft>0){for(var jt=0;jt<5;++jt)Ee.pop();Vt-=1}continue e}Ee.push(tt[0],tt[1],bt[0],bt[1],tt[2]),Vt+=1}}Ye.push(Vt)}this._contourOffsets[De]=He,this._contourCounts[De]=Ye}var Qt=i.mallocFloat(Ee.length);for(re=0;re<Ee.length;++re)Qt[re]=Ee[re];this._contourBuffer.update(Qt),i.freeFloat(Qt)}},L.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var H=0;H<3;++H)i.freeFloat(this._field[H].data)},L.highlight=function(H){var Y,oe;if(!H)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(Y=0;Y<3;++Y)this.highlightLevel[Y]=this.enableHighlight[Y]?H.level[Y]:-1;for(oe=this.snapToData?H.dataCoordinate:H.position,Y=0;Y<3;++Y)oe[Y]-=this.objectOffset[Y];if(this.enableDynamic[0]&&oe[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&oe[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&oe[2]!==this.dynamicLevel[2]){for(var W=0,ne=this.shape,re=i.mallocFloat(12*ne[0]*ne[1]),ce=0;ce<3;++ce)if(this.enableDynamic[ce]){this.dynamicLevel[ce]=oe[ce];var we=this._field[(ce+1)%3],ye=this._field[(ce+2)%3],Te=p(this._field[ce],oe[ce]),Le=Te.cells,Oe=Te.positions;for(this._dynamicOffsets[ce]=W,Y=0;Y<Le.length;++Y)for(var Re=Le[Y],Ve=0;Ve<2;++Ve){var _e=Oe[Re[Ve]],Ae=+_e[0],Fe=0|Ae,Pe=0|Math.min(Fe+1,ne[0]),Be=Ae-Fe,qe=1-Be,We=+_e[1],Je=0|We,ut=0|Math.min(Je+1,ne[1]),Ge=We-Je,Ke=1-Ge,nt=qe*Ke,it=qe*Ge,ht=Be*Ke,Tt=Be*Ge,Ct=nt*we.get(Fe,Je)+it*we.get(Fe,ut)+ht*we.get(Pe,Je)+Tt*we.get(Pe,ut),Vt=nt*ye.get(Fe,Je)+it*ye.get(Fe,ut)+ht*ye.get(Pe,Je)+Tt*ye.get(Pe,ut);if(isNaN(Ct)||isNaN(Vt)){Ve&&(W-=1);break}re[2*W+0]=Ct,re[2*W+1]=Vt,W+=1}this._dynamicCounts[ce]=W-this._dynamicOffsets[ce]}else this.dynamicLevel[ce]=NaN,this._dynamicCounts[ce]=0;this._dynamicBuffer.update(re.subarray(0,2*W)),i.freeFloat(re)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(b,T,_){"use strict";var e=b("ndarray"),o=b("ndarray-ops"),a=b("typedarray-pool");T.exports=function(M){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||h(M),"number"==typeof arguments[1])return w(M,arguments[1],arguments[2],arguments[3]||M.RGBA,arguments[4]||M.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(M,0|arguments[1][0],0|arguments[1][1],arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var S=arguments[1],C=s(S)?S:S.raw;if(C)return c(M,C,0|S.width,0|S.height,arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if(S.shape&&S.data&&S.stride)return E(M,S)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,i=null,v=null;function h(M){l=[M.LINEAR,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_NEAREST],i=[M.NEAREST,M.LINEAR,M.NEAREST_MIPMAP_NEAREST,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_LINEAR],v=[M.REPEAT,M.CLAMP_TO_EDGE,M.MIRRORED_REPEAT]}function s(M){return"undefined"!=typeof HTMLCanvasElement&&M instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&M instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&M instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&M instanceof ImageData}var d=function(M,S){o.muls(M,S,255)};function p(M,S,C){var O=M.gl,I=O.getParameter(O.MAX_TEXTURE_SIZE);if(S<0||S>I||C<0||C>I)throw new Error("gl-texture2d: Invalid texture size");return M._shape=[S,C],M.bind(),O.texImage2D(O.TEXTURE_2D,0,M.format,S,C,0,M.format,M.type,null),M._mipLevels=[0],M}function f(M,S,C,O,I,N){this.gl=M,this.handle=S,this.format=I,this.type=N,this._shape=[C,O],this._mipLevels=[0],this._magFilter=M.NEAREST,this._minFilter=M.NEAREST,this._wrapS=M.CLAMP_TO_EDGE,this._wrapT=M.CLAMP_TO_EDGE,this._anisoSamples=1;var F=this,L=[this._wrapS,this._wrapT];Object.defineProperties(L,[{get:function(){return F._wrapS},set:function(j){return F.wrapS=j}},{get:function(){return F._wrapT},set:function(j){return F.wrapT=j}}]),this._wrapVector=L;var P=[this._shape[0],this._shape[1]];Object.defineProperties(P,[{get:function(){return F._shape[0]},set:function(j){return F.width=j}},{get:function(){return F._shape[1]},set:function(j){return F.height=j}}]),this._shapeVector=P}var g=f.prototype;function m(M,S){return 3===M.length?1===S[2]&&S[1]===M[0]*M[2]&&S[0]===M[2]:1===S[0]&&S[1]===M[0]}function u(M){var S=M.createTexture();return M.bindTexture(M.TEXTURE_2D,S),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),S}function w(M,S,C,O,I){var N=M.getParameter(M.MAX_TEXTURE_SIZE);if(S<0||S>N||C<0||C>N)throw new Error("gl-texture2d: Invalid texture shape");if(I===M.FLOAT&&!M.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var F=u(M);return M.texImage2D(M.TEXTURE_2D,0,O,S,C,0,O,I,null),new f(M,F,S,C,O,I)}function c(M,S,C,O,I,N){var F=u(M);return M.texImage2D(M.TEXTURE_2D,0,I,I,N,S),new f(M,F,C,O,I,N)}function E(M,S){var C=S.dtype,O=S.shape.slice(),I=M.getParameter(M.MAX_TEXTURE_SIZE);if(O[0]<0||O[0]>I||O[1]<0||O[1]>I)throw new Error("gl-texture2d: Invalid texture size");var N=m(O,S.stride.slice()),F=0;"float32"===C?F=M.FLOAT:"float64"===C?(F=M.FLOAT,N=!1,C="float32"):"uint8"===C?F=M.UNSIGNED_BYTE:(F=M.UNSIGNED_BYTE,N=!1,C="uint8");var L,P,j=0;if(2===O.length)j=M.LUMINANCE,S=e(S.data,O=[O[0],O[1],1],[S.stride[0],S.stride[1],1],S.offset);else{if(3!==O.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===O[2])j=M.ALPHA;else if(2===O[2])j=M.LUMINANCE_ALPHA;else if(3===O[2])j=M.RGB;else{if(4!==O[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");j=M.RGBA}}F!==M.FLOAT||M.getExtension("OES_texture_float")||(F=M.UNSIGNED_BYTE,N=!1);var U=S.size;if(N)L=0===S.offset&&S.data.length===U?S.data:S.data.subarray(S.offset,S.offset+U);else{var $=[O[2],O[2]*O[0],1];P=a.malloc(U,C);var X=e(P,O,$,0);"float32"!==C&&"float64"!==C||F!==M.UNSIGNED_BYTE?o.assign(X,S):d(X,S),L=P.subarray(0,U)}var te=u(M);return M.texImage2D(M.TEXTURE_2D,0,j,O[0],O[1],0,j,F,L),N||a.free(P),new f(M,te,O[0],O[1],j,F)}Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(M){this.bind();var S=this.gl;if(this.type===S.FLOAT&&l.indexOf(M)>=0&&(S.getExtension("OES_texture_float_linear")||(M=S.NEAREST)),i.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,M),this._minFilter=M}},magFilter:{get:function(){return this._magFilter},set:function(M){this.bind();var S=this.gl;if(this.type===S.FLOAT&&l.indexOf(M)>=0&&(S.getExtension("OES_texture_float_linear")||(M=S.NEAREST)),i.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,M),this._magFilter=M}},mipSamples:{get:function(){return this._anisoSamples},set:function(M){var S=this._anisoSamples;if(this._anisoSamples=0|Math.max(M,1),S!==this._anisoSamples){var C=this.gl.getExtension("EXT_texture_filter_anisotropic");C&&this.gl.texParameterf(this.gl.TEXTURE_2D,C.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(M){if(this.bind(),v.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,M),this._wrapS=M}},wrapT:{get:function(){return this._wrapT},set:function(M){if(this.bind(),v.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,M),this._wrapT=M}},wrap:{get:function(){return this._wrapVector},set:function(M){if(Array.isArray(M)||(M=[M,M]),2!==M.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var S=0;S<2;++S)if(v.indexOf(M[S])<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);this._wrapS=M[0],this._wrapT=M[1];var C=this.gl;return this.bind(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this._wrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this._wrapT),M}},shape:{get:function(){return this._shapeVector},set:function(M){if(Array.isArray(M)){if(2!==M.length)throw new Error("gl-texture2d: Invalid texture shape")}else M=[0|M,0|M];return p(this,0|M[0],0|M[1]),[0|M[0],0|M[1]]}},width:{get:function(){return this._shape[0]},set:function(M){return p(this,M|=0,this._shape[1]),M}},height:{get:function(){return this._shape[1]},set:function(M){return p(this,this._shape[0],M|=0),M}}}),g.bind=function(M){var S=this.gl;return void 0!==M&&S.activeTexture(S.TEXTURE0+(0|M)),S.bindTexture(S.TEXTURE_2D,this.handle),void 0!==M?0|M:S.getParameter(S.ACTIVE_TEXTURE)-S.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var M=Math.min(this._shape[0],this._shape[1]),S=0;M>0;++S,M>>>=1)this._mipLevels.indexOf(S)<0&&this._mipLevels.push(S)},g.setPixels=function(M,S,C,O){var I=this.gl;this.bind(),Array.isArray(S)?(O=C,C=0|S[1],S=0|S[0]):(S=S||0,C=C||0),O=O||0;var N=s(M)?M:M.raw;if(N)this._mipLevels.indexOf(O)<0?(I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,this.type,N),this._mipLevels.push(O)):I.texSubImage2D(I.TEXTURE_2D,O,S,C,this.format,this.type,N);else{if(!(M.shape&&M.stride&&M.data))throw new Error("gl-texture2d: Unsupported data type");if(M.shape.length<2||S+M.shape[1]>this._shape[1]>>>O||C+M.shape[0]>this._shape[0]>>>O||S<0||C<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(F,L,P,j,U,$,X,te){var ae=te.dtype,J=te.shape.slice();if(J.length<2||J.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var ee=0,se=0,G=m(J,te.stride.slice());if("float32"===ae?ee=F.FLOAT:"float64"===ae?(ee=F.FLOAT,G=!1,ae="float32"):"uint8"===ae?ee=F.UNSIGNED_BYTE:(ee=F.UNSIGNED_BYTE,G=!1,ae="uint8"),2===J.length)se=F.LUMINANCE,te=e(te.data,J=[J[0],J[1],1],[te.stride[0],te.stride[1],1],te.offset);else{if(3!==J.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===J[2])se=F.ALPHA;else if(2===J[2])se=F.LUMINANCE_ALPHA;else if(3===J[2])se=F.RGB;else{if(4!==J[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");se=F.RGBA}}if(se!==F.LUMINANCE&&se!==F.ALPHA||U!==F.LUMINANCE&&U!==F.ALPHA||(se=U),se!==U)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var H=te.size,Y=X.indexOf(j)<0;if(Y&&X.push(j),ee===$&&G)0===te.offset&&te.data.length===H?Y?F.texImage2D(F.TEXTURE_2D,j,U,J[0],J[1],0,U,$,te.data):F.texSubImage2D(F.TEXTURE_2D,j,L,P,J[0],J[1],U,$,te.data):Y?F.texImage2D(F.TEXTURE_2D,j,U,J[0],J[1],0,U,$,te.data.subarray(te.offset,te.offset+H)):F.texSubImage2D(F.TEXTURE_2D,j,L,P,J[0],J[1],U,$,te.data.subarray(te.offset,te.offset+H));else{var oe;oe=$===F.FLOAT?a.mallocFloat32(H):a.mallocUint8(H);var W=e(oe,J,[J[2],J[2]*J[0],1]);ee===F.FLOAT&&$===F.UNSIGNED_BYTE?d(W,te):o.assign(W,te),Y?F.texImage2D(F.TEXTURE_2D,j,U,J[0],J[1],0,U,$,oe.subarray(0,H)):F.texSubImage2D(F.TEXTURE_2D,j,L,P,J[0],J[1],U,$,oe.subarray(0,H)),$===F.FLOAT?a.freeFloat32(oe):a.freeUint8(oe)}}(I,S,C,O,this.format,this.type,this._mipLevels,M)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(b,T,_){"use strict";T.exports=function(e,o,a){o?o.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var l=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(a){if(a.length>l)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<a.length;++i){var v=a[i];if(v.buffer){var s=v.size||4,d=v.type||e.FLOAT,p=!!v.normalized,f=v.stride||0,g=v.offset||0;v.buffer.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,s,d,p,f,g)}else{if("number"==typeof v)e.vertexAttrib1f(i,v);else if(1===v.length)e.vertexAttrib1f(i,v[0]);else if(2===v.length)e.vertexAttrib2f(i,v[0],v[1]);else if(3===v.length)e.vertexAttrib3f(i,v[0],v[1],v[2]);else{if(4!==v.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,v[0],v[1],v[2],v[3])}e.disableVertexAttribArray(i)}}for(;i<l;++i)e.disableVertexAttribArray(i)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),i=0;i<l;++i)e.disableVertexAttribArray(i)}},{}],148:[function(b,T,_){"use strict";var e=b("./do-bind.js");function o(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}o.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},o.prototype.update=function(a,l,i){this._elements=l,this._attributes=a,this._elementsType=i||this.gl.UNSIGNED_SHORT},o.prototype.dispose=function(){},o.prototype.unbind=function(){},o.prototype.draw=function(a,l,i){i=i||0;var v=this.gl;this._elements?v.drawElements(a,l,this._elementsType,i):v.drawArrays(a,i,l)},T.exports=function(a){return new o(a)}},{"./do-bind.js":147}],149:[function(b,T,_){"use strict";var e=b("./do-bind.js");function o(l,i,v,h,s,d){this.location=l,this.dimension=i,this.a=v,this.b=h,this.c=s,this.d=d}function a(l,i,v){this.gl=l,this._ext=i,this.handle=v,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}o.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(l,i,v){if(this.bind(),e(this.gl,i,l),this.unbind(),this._attribs.length=0,l)for(var h=0;h<l.length;++h){var s=l[h];"number"==typeof s?this._attribs.push(new o(h,1,s)):Array.isArray(s)&&this._attribs.push(new o(h,s.length,s[0],s[1],s[2],s[3]))}this._useElements=!!i,this._elementsType=v||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(l,i,v){v=v||0;var h=this.gl;this._useElements?h.drawElements(l,i,this._elementsType,v):h.drawArrays(l,v,i)},T.exports=function(l,i){return new a(l,i,i.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(b,T,_){"use strict";var e=b("./lib/vao-native.js"),o=b("./lib/vao-emulated.js");function a(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}T.exports=function(l,i,v,h){var s,d=l.createVertexArray?new a(l):l.getExtension("OES_vertex_array_object");return(s=d?e(l,d):o(l)).update(i,v,h),s}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e}},{}],152:[function(b,T,_){T.exports=function(l,i){var v=e(l[0],l[1],l[2]),h=e(i[0],i[1],i[2]);o(v,v),o(h,h);var s=a(v,h);return s>1?0:Math.acos(s)};var e=b("./fromValues"),o=b("./normalize"),a=b("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(b,T,_){T.exports=function(e,o){return e[0]=Math.ceil(o[0]),e[1]=Math.ceil(o[1]),e[2]=Math.ceil(o[2]),e}},{}],154:[function(b,T,_){T.exports=function(e){var o=new Float32Array(3);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o}},{}],155:[function(b,T,_){T.exports=function(e,o){return e[0]=o[0],e[1]=o[1],e[2]=o[2],e}},{}],156:[function(b,T,_){T.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(b,T,_){T.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=a[0],s=a[1],d=a[2];return e[0]=i*d-v*s,e[1]=v*h-l*d,e[2]=l*s-i*h,e}},{}],158:[function(b,T,_){T.exports=b("./distance")},{"./distance":159}],159:[function(b,T,_){T.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2];return Math.sqrt(a*a+l*l+i*i)}},{}],160:[function(b,T,_){T.exports=b("./divide")},{"./divide":161}],161:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]/a[0],e[1]=o[1]/a[1],e[2]=o[2]/a[2],e}},{}],162:[function(b,T,_){T.exports=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]}},{}],163:[function(b,T,_){T.exports=1e-6},{}],164:[function(b,T,_){T.exports=function(o,a){var l=o[0],i=o[1],v=o[2],h=a[0],s=a[1],d=a[2];return Math.abs(l-h)<=e*Math.max(1,Math.abs(l),Math.abs(h))&&Math.abs(i-s)<=e*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(v-d)<=e*Math.max(1,Math.abs(v),Math.abs(d))};var e=b("./epsilon")},{"./epsilon":163}],165:[function(b,T,_){T.exports=function(e,o){return e[0]===o[0]&&e[1]===o[1]&&e[2]===o[2]}},{}],166:[function(b,T,_){T.exports=function(e,o){return e[0]=Math.floor(o[0]),e[1]=Math.floor(o[1]),e[2]=Math.floor(o[2]),e}},{}],167:[function(b,T,_){T.exports=function(o,a,l,i,v,h){var s,d;for(a||(a=3),l||(l=0),d=i?Math.min(i*a+l,o.length):o.length,s=l;s<d;s+=a)e[0]=o[s],e[1]=o[s+1],e[2]=o[s+2],v(e,e,h),o[s]=e[0],o[s+1]=e[1],o[s+2]=e[2];return o};var e=b("./create")()},{"./create":156}],168:[function(b,T,_){T.exports=function(e,o,a){var l=new Float32Array(3);return l[0]=e,l[1]=o,l[2]=a,l}},{}],169:[function(b,T,_){T.exports={EPSILON:b("./epsilon"),create:b("./create"),clone:b("./clone"),angle:b("./angle"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),equals:b("./equals"),exactEquals:b("./exactEquals"),add:b("./add"),subtract:b("./subtract"),sub:b("./sub"),multiply:b("./multiply"),mul:b("./mul"),divide:b("./divide"),div:b("./div"),min:b("./min"),max:b("./max"),floor:b("./floor"),ceil:b("./ceil"),round:b("./round"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),dist:b("./dist"),squaredDistance:b("./squaredDistance"),sqrDist:b("./sqrDist"),length:b("./length"),len:b("./len"),squaredLength:b("./squaredLength"),sqrLen:b("./sqrLen"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),cross:b("./cross"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformMat3:b("./transformMat3"),transformQuat:b("./transformQuat"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),forEach:b("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(b,T,_){T.exports=function(e,o){return e[0]=1/o[0],e[1]=1/o[1],e[2]=1/o[2],e}},{}],171:[function(b,T,_){T.exports=b("./length")},{"./length":172}],172:[function(b,T,_){T.exports=function(e){var o=e[0],a=e[1],l=e[2];return Math.sqrt(o*o+a*a+l*l)}},{}],173:[function(b,T,_){T.exports=function(e,o,a,l){var i=o[0],v=o[1],h=o[2];return e[0]=i+l*(a[0]-i),e[1]=v+l*(a[1]-v),e[2]=h+l*(a[2]-h),e}},{}],174:[function(b,T,_){T.exports=function(e,o,a){return e[0]=Math.max(o[0],a[0]),e[1]=Math.max(o[1],a[1]),e[2]=Math.max(o[2],a[2]),e}},{}],175:[function(b,T,_){T.exports=function(e,o,a){return e[0]=Math.min(o[0],a[0]),e[1]=Math.min(o[1],a[1]),e[2]=Math.min(o[2],a[2]),e}},{}],176:[function(b,T,_){T.exports=b("./multiply")},{"./multiply":177}],177:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]*a[0],e[1]=o[1]*a[1],e[2]=o[2]*a[2],e}},{}],178:[function(b,T,_){T.exports=function(e,o){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e}},{}],179:[function(b,T,_){T.exports=function(e,o){var a=o[0],l=o[1],i=o[2],v=a*a+l*l+i*i;return v>0&&(v=1/Math.sqrt(v),e[0]=o[0]*v,e[1]=o[1]*v,e[2]=o[2]*v),e}},{}],180:[function(b,T,_){T.exports=function(e,o){o=o||1;var a=2*Math.random()*Math.PI,l=2*Math.random()-1,i=Math.sqrt(1-l*l)*o;return e[0]=Math.cos(a)*i,e[1]=Math.sin(a)*i,e[2]=l*o,e}},{}],181:[function(b,T,_){T.exports=function(e,o,a,l){var i=a[1],v=a[2],h=o[1]-i,s=o[2]-v,d=Math.sin(l),p=Math.cos(l);return e[0]=o[0],e[1]=i+h*p-s*d,e[2]=v+h*d+s*p,e}},{}],182:[function(b,T,_){T.exports=function(e,o,a,l){var i=a[0],v=a[2],h=o[0]-i,s=o[2]-v,d=Math.sin(l),p=Math.cos(l);return e[0]=i+s*d+h*p,e[1]=o[1],e[2]=v+s*p-h*d,e}},{}],183:[function(b,T,_){T.exports=function(e,o,a,l){var i=a[0],v=a[1],h=o[0]-i,s=o[1]-v,d=Math.sin(l),p=Math.cos(l);return e[0]=i+h*p-s*d,e[1]=v+h*d+s*p,e[2]=o[2],e}},{}],184:[function(b,T,_){T.exports=function(e,o){return e[0]=Math.round(o[0]),e[1]=Math.round(o[1]),e[2]=Math.round(o[2]),e}},{}],185:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]*a,e[1]=o[1]*a,e[2]=o[2]*a,e}},{}],186:[function(b,T,_){T.exports=function(e,o,a,l){return e[0]=o[0]+a[0]*l,e[1]=o[1]+a[1]*l,e[2]=o[2]+a[2]*l,e}},{}],187:[function(b,T,_){T.exports=function(e,o,a,l){return e[0]=o,e[1]=a,e[2]=l,e}},{}],188:[function(b,T,_){T.exports=b("./squaredDistance")},{"./squaredDistance":190}],189:[function(b,T,_){T.exports=b("./squaredLength")},{"./squaredLength":191}],190:[function(b,T,_){T.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2];return a*a+l*l+i*i}},{}],191:[function(b,T,_){T.exports=function(e){var o=e[0],a=e[1],l=e[2];return o*o+a*a+l*l}},{}],192:[function(b,T,_){T.exports=b("./subtract")},{"./subtract":193}],193:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]-a[0],e[1]=o[1]-a[1],e[2]=o[2]-a[2],e}},{}],194:[function(b,T,_){T.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2];return e[0]=l*a[0]+i*a[3]+v*a[6],e[1]=l*a[1]+i*a[4]+v*a[7],e[2]=l*a[2]+i*a[5]+v*a[8],e}},{}],195:[function(b,T,_){T.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=a[3]*l+a[7]*i+a[11]*v+a[15];return e[0]=(a[0]*l+a[4]*i+a[8]*v+a[12])/(h=h||1),e[1]=(a[1]*l+a[5]*i+a[9]*v+a[13])/h,e[2]=(a[2]*l+a[6]*i+a[10]*v+a[14])/h,e}},{}],196:[function(b,T,_){T.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=a[0],s=a[1],d=a[2],p=a[3],f=p*l+s*v-d*i,g=p*i+d*l-h*v,m=p*v+h*i-s*l,u=-h*l-s*i-d*v;return e[0]=f*p+u*-h+g*-d-m*-s,e[1]=g*p+u*-s+m*-h-f*-d,e[2]=m*p+u*-d+f*-s-g*-h,e}},{}],197:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e[3]=o[3]+a[3],e}},{}],198:[function(b,T,_){T.exports=function(e){var o=new Float32Array(4);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o}},{}],199:[function(b,T,_){T.exports=function(e,o){return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e}},{}],200:[function(b,T,_){T.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(b,T,_){T.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2],v=o[3]-e[3];return Math.sqrt(a*a+l*l+i*i+v*v)}},{}],202:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]/a[0],e[1]=o[1]/a[1],e[2]=o[2]/a[2],e[3]=o[3]/a[3],e}},{}],203:[function(b,T,_){T.exports=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]+e[3]*o[3]}},{}],204:[function(b,T,_){T.exports=function(e,o,a,l){var i=new Float32Array(4);return i[0]=e,i[1]=o,i[2]=a,i[3]=l,i}},{}],205:[function(b,T,_){T.exports={create:b("./create"),clone:b("./clone"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),add:b("./add"),subtract:b("./subtract"),multiply:b("./multiply"),divide:b("./divide"),min:b("./min"),max:b("./max"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),squaredDistance:b("./squaredDistance"),length:b("./length"),squaredLength:b("./squaredLength"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformQuat:b("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(b,T,_){T.exports=function(e,o){return e[0]=1/o[0],e[1]=1/o[1],e[2]=1/o[2],e[3]=1/o[3],e}},{}],207:[function(b,T,_){T.exports=function(e){var o=e[0],a=e[1],l=e[2],i=e[3];return Math.sqrt(o*o+a*a+l*l+i*i)}},{}],208:[function(b,T,_){T.exports=function(e,o,a,l){var i=o[0],v=o[1],h=o[2],s=o[3];return e[0]=i+l*(a[0]-i),e[1]=v+l*(a[1]-v),e[2]=h+l*(a[2]-h),e[3]=s+l*(a[3]-s),e}},{}],209:[function(b,T,_){T.exports=function(e,o,a){return e[0]=Math.max(o[0],a[0]),e[1]=Math.max(o[1],a[1]),e[2]=Math.max(o[2],a[2]),e[3]=Math.max(o[3],a[3]),e}},{}],210:[function(b,T,_){T.exports=function(e,o,a){return e[0]=Math.min(o[0],a[0]),e[1]=Math.min(o[1],a[1]),e[2]=Math.min(o[2],a[2]),e[3]=Math.min(o[3],a[3]),e}},{}],211:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]*a[0],e[1]=o[1]*a[1],e[2]=o[2]*a[2],e[3]=o[3]*a[3],e}},{}],212:[function(b,T,_){T.exports=function(e,o){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e[3]=-o[3],e}},{}],213:[function(b,T,_){T.exports=function(e,o){var a=o[0],l=o[1],i=o[2],v=o[3],h=a*a+l*l+i*i+v*v;return h>0&&(h=1/Math.sqrt(h),e[0]=a*h,e[1]=l*h,e[2]=i*h,e[3]=v*h),e}},{}],214:[function(b,T,_){var e=b("./normalize"),o=b("./scale");T.exports=function(a,l){return l=l||1,a[0]=Math.random(),a[1]=Math.random(),a[2]=Math.random(),a[3]=Math.random(),e(a,a),o(a,a,l),a}},{"./normalize":213,"./scale":215}],215:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]*a,e[1]=o[1]*a,e[2]=o[2]*a,e[3]=o[3]*a,e}},{}],216:[function(b,T,_){T.exports=function(e,o,a,l){return e[0]=o[0]+a[0]*l,e[1]=o[1]+a[1]*l,e[2]=o[2]+a[2]*l,e[3]=o[3]+a[3]*l,e}},{}],217:[function(b,T,_){T.exports=function(e,o,a,l,i){return e[0]=o,e[1]=a,e[2]=l,e[3]=i,e}},{}],218:[function(b,T,_){T.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2],v=o[3]-e[3];return a*a+l*l+i*i+v*v}},{}],219:[function(b,T,_){T.exports=function(e){var o=e[0],a=e[1],l=e[2],i=e[3];return o*o+a*a+l*l+i*i}},{}],220:[function(b,T,_){T.exports=function(e,o,a){return e[0]=o[0]-a[0],e[1]=o[1]-a[1],e[2]=o[2]-a[2],e[3]=o[3]-a[3],e}},{}],221:[function(b,T,_){T.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=o[3];return e[0]=a[0]*l+a[4]*i+a[8]*v+a[12]*h,e[1]=a[1]*l+a[5]*i+a[9]*v+a[13]*h,e[2]=a[2]*l+a[6]*i+a[10]*v+a[14]*h,e[3]=a[3]*l+a[7]*i+a[11]*v+a[15]*h,e}},{}],222:[function(b,T,_){T.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=a[0],s=a[1],d=a[2],p=a[3],f=p*l+s*v-d*i,g=p*i+d*l-h*v,m=p*v+h*i-s*l,u=-h*l-s*i-d*v;return e[0]=f*p+u*-h+g*-d-m*-s,e[1]=g*p+u*-s+m*-h-f*-d,e[2]=m*p+u*-d+f*-s-g*-h,e[3]=o[3],e}},{}],223:[function(b,T,_){var e=b("glsl-tokenizer"),o=b("atob-lite");T.exports=function(a){for(var l=Array.isArray(a)?a:e(a),i=0;i<l.length;i++){var v=l[i];if("preprocessor"===v.type){var h=v.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var d=h[2];return(h[1]?o(d):d).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(b,T,_){T.exports=function(h){var s,d,p,f=0,g=0,m=999,u=[],w=[],c=1,E=0,M=0,S=!1,C=!1,O="",I=a,N=e;"300 es"===(h=h||{}).version&&(I=i,N=l);var F={},L={};for(f=0;f<I.length;f++)F[I[f]]=!0;for(f=0;f<N.length;f++)L[N[f]]=!0;return function(H){return w=[],null!==H?function(Y){var oe;for(f=0,Y.toString&&(Y=Y.toString()),O+=Y.replace(/\r\n/g,"\n"),p=O.length;s=O[f],f<p;){switch(oe=f,m){case 0:f="/"===s&&"*"===d?(u.push(s),P(u.join("")),m=999,f+1):(u.push(s),d=s,f+1);break;case 1:case 2:f="\r"!==s&&"\n"!==s||"\\"===d?(u.push(s),d=s,f+1):(P(u.join("")),m=999,f);break;case 3:f=te();break;case 4:f="."===s||/[eE]/.test(s)?(u.push(s),m=5,d=s,f+1):"x"===s&&1===u.length&&"0"===u[0]?(m=11,u.push(s),d=s,f+1):/[^\d]/.test(s)?(P(u.join("")),m=999,f):(u.push(s),d=s,f+1);break;case 11:f=/[^a-fA-F0-9]/.test(s)?(P(u.join("")),m=999,f):(u.push(s),d=s,f+1);break;case 5:"f"===s&&(u.push(s),d=s,f+=1),f=/[eE]/.test(s)?(u.push(s),d=s,f+1):("-"!==s&&"+"!==s||!/[eE]/.test(d))&&/[^\d]/.test(s)?(P(u.join("")),m=999,f):(u.push(s),d=s,f+1);break;case 9999:f=G();break;case 9:f=/[^\s]/g.test(s)?(P(u.join("")),m=999,f):(u.push(s),d=s,f+1);break;case 999:u=u.length?[]:u,f="/"===d&&"*"===s?(M=g+f-1,m=0,d=s,f+1):"/"===d&&"/"===s?(M=g+f-1,m=1,d=s,f+1):"#"===s?(m=2,M=g+f,f):/\s/.test(s)?(m=9,M=g+f,f):(S=/\d/.test(s),C=/[^\w_]/.test(s),M=g+f,m=S?4:C?3:9999,f)}oe!==f&&("\n"===O[oe]?(E=0,++c):++E)}return g+=f,O=O.slice(f),w}(H):(u.length&&P(u.join("")),m=10,P("(eof)"),w)};function P(H){H.length&&w.push({type:v[m],data:H,position:M,line:c,column:E})}function te(){if("."===d&&/\d/.test(s))return m=5,f;if("/"===d&&"*"===s)return m=0,f;if("/"===d&&"/"===s)return m=1,f;if("."===s&&u.length){for(;ae(u););return m=5,f}if(";"===s||")"===s||"("===s){if(u.length)for(;ae(u););return P(s),m=999,f+1}var H=2===u.length&&"="!==s;if(/[\w_\d\s]/.test(s)||H){for(;ae(u););return m=999,f}return u.push(s),d=s,f+1}function ae(H){for(var Y,oe,W=0;;){if(Y=o.indexOf(H.slice(0,H.length+W).join("")),oe=o[Y],-1===Y){if(W--+H.length>0)continue;oe=H.slice(0,1).join("")}return P(oe),M+=oe.length,(u=u.slice(oe.length)).length}}function G(){if(/[^\d\w_]/.test(s)){var H=u.join("");return m=L[H]?8:F[H]?7:6,P(u.join("")),m=999,f}return u.push(s),d=s,f+1}};var e=b("./lib/literals"),o=b("./lib/operators"),a=b("./lib/builtins"),l=b("./lib/literals-300es"),i=b("./lib/builtins-300es"),v=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(b,T,_){var e=b("./builtins");e=e.slice().filter(function(o){return!/^(gl\_|texture)/.test(o)}),T.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(b,T,_){T.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(b,T,_){var e=b("./literals");T.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(b,T,_){T.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(b,T,_){T.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(b,T,_){var e=b("./index");T.exports=function(o,a){var l=e(a),i=[];return(i=i.concat(l(o))).concat(l(null))}},{"./index":224}],231:[function(b,T,_){T.exports=function(e){"string"==typeof e&&(e=[e]);for(var o=[].slice.call(arguments,1),a=[],l=0;l<e.length-1;l++)a.push(e[l],o[l]||"");return a.push(e[l]),a.join("")}},{}],232:[function(b,T,_){"use strict";var e=b("is-browser");T.exports=e&&function(){var o=!1;try{var a=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch(l){o=!1}return o}()},{"is-browser":236}],233:[function(b,T,_){"use strict";T.exports=function(d,p){var f=d.length;if(0===f)throw new Error("Must have at least d+1 points");var g=d[0].length;if(f<=g)throw new Error("Must input at least d+1 points");var m=d.slice(0,g+1),u=e.apply(void 0,m);if(0===u)throw new Error("Input not in general position");for(var w=new Array(g+1),c=0;c<=g;++c)w[c]=c;u<0&&(w[0]=1,w[1]=0);var E=new a(w,new Array(g+1),!1),M=E.adjacent,S=new Array(g+2);for(c=0;c<=g;++c){for(var C=w.slice(),O=0;O<=g;++O)O===c&&(C[O]=-1);var I=C[0];C[0]=C[1],C[1]=I;var N=new a(C,new Array(g+1),!0);M[c]=N,S[c]=N}for(S[g+1]=E,c=0;c<=g;++c){C=M[c].vertices;var F=M[c].adjacent;for(O=0;O<=g;++O){var L=C[O];if(L<0)F[O]=E;else for(var P=0;P<=g;++P)M[P].vertices.indexOf(L)<0&&(F[O]=M[P])}}var j=new h(g,m,S),U=!!p;for(c=g+1;c<f;++c)j.insert(d[c],U);return j.boundary()};var e=b("robust-orientation"),o=b("simplicial-complex").compareCells;function a(d,p,f){this.vertices=d,this.adjacent=p,this.boundary=f,this.lastVisited=-1}function l(d,p,f){this.vertices=d,this.cell=p,this.index=f}function i(d,p){return o(d.vertices,p.vertices)}a.prototype.flip=function(){var d=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=d;var p=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=p};var v=[];function h(d,p,f){this.dimension=d,this.vertices=p,this.simplices=f,this.interior=f.filter(function(w){return!w.boundary}),this.tuple=new Array(d+1);for(var g=0;g<=d;++g)this.tuple[g]=this.vertices[g];var m,w,u=v[d];u||(u=v[d]=((m=e[d+1])||(m=e),w=m,function(){return w.apply(this,this.tuple)})),this.orient=u}var s=h.prototype;s.handleBoundaryDegeneracy=function(d,p){var f=this.dimension,g=this.vertices.length-1,m=this.tuple,u=this.vertices,w=[d];for(d.lastVisited=-g;w.length>0;)for(var c=(d=w.pop()).adjacent,E=0;E<=f;++E){var M=c[E];if(M.boundary&&!(M.lastVisited<=-g)){for(var S=M.vertices,C=0;C<=f;++C){var O=S[C];m[C]=O<0?p:u[O]}var I=this.orient();if(I>0)return M;M.lastVisited=-g,0===I&&w.push(M)}}return null},s.walk=function(d,p){var f=this.vertices.length-1,g=this.dimension,m=this.vertices,u=this.tuple,w=p?this.interior.length*Math.random()|0:this.interior.length-1,c=this.interior[w];e:for(;!c.boundary;){for(var E=c.vertices,M=c.adjacent,S=0;S<=g;++S)u[S]=m[E[S]];for(c.lastVisited=f,S=0;S<=g;++S){var C=M[S];if(!(C.lastVisited>=f)){var O=u[S];u[S]=d;var I=this.orient();if(u[S]=O,I<0){c=C;continue e}C.lastVisited=C.boundary?-f:f}}return}return c},s.addPeaks=function(d,p){var f=this.vertices.length-1,g=this.dimension,m=this.vertices,u=this.tuple,w=this.interior,c=this.simplices,E=[p];p.lastVisited=f,p.vertices[p.vertices.indexOf(-1)]=f,p.boundary=!1,w.push(p);for(var M=[];E.length>0;){var S=(p=E.pop()).vertices,C=p.adjacent,O=S.indexOf(f);if(!(O<0))for(var I=0;I<=g;++I)if(I!==O){var N=C[I];if(N.boundary&&!(N.lastVisited>=f)){var F=N.vertices;if(N.lastVisited!==-f){for(var L=0,P=0;P<=g;++P)F[P]<0?(L=P,u[P]=d):u[P]=m[F[P]];if(this.orient()>0){F[L]=f,N.boundary=!1,w.push(N),E.push(N),N.lastVisited=f;continue}N.lastVisited=-f}var j=N.adjacent,U=S.slice(),$=C.slice(),X=new a(U,$,!0);c.push(X);var te=j.indexOf(p);if(!(te<0))for(j[te]=X,$[O]=N,U[I]=-1,$[I]=p,C[I]=X,X.flip(),P=0;P<=g;++P){var ae=U[P];if(!(ae<0||ae===f)){for(var J=new Array(g-1),ee=0,se=0;se<=g;++se){var G=U[se];G<0||se===P||(J[ee++]=G)}M.push(new l(J,X,P))}}}}}for(M.sort(i),I=0;I+1<M.length;I+=2){var H=M[I],Y=M[I+1];H.index<0||Y.index<0||(H.cell.adjacent[H.index]=Y.cell,Y.cell.adjacent[Y.index]=H.cell)}},s.insert=function(d,p){var f=this.vertices;f.push(d);var g=this.walk(d,p);if(g){for(var m=this.dimension,u=this.tuple,w=0;w<=m;++w){var c=g.vertices[w];u[w]=c<0?d:f[c]}var E=this.orient(u);E<0||(0!==E||(g=this.handleBoundaryDegeneracy(g,d)))&&this.addPeaks(d,g)}},s.boundary=function(){for(var d=this.dimension,p=[],f=this.simplices,g=f.length,m=0;m<g;++m){var u=f[m];if(u.boundary){for(var w=new Array(d),c=u.vertices,E=0,M=0,S=0;S<=d;++S)c[S]>=0?w[E++]=c[S]:M=1&S;if(M===(1&d)){var C=w[0];w[0]=w[1],w[1]=C}p.push(w)}}return p}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(b,T,_){"use strict";var e=b("binary-search-bounds");function o(E,M,S,C,O){this.mid=E,this.left=M,this.right=S,this.leftPoints=C,this.rightPoints=O,this.count=(M?M.count:0)+(S?S.count:0)+C.length}T.exports=function(E){return new w(E&&0!==E.length?u(E):null)};var a=o.prototype;function l(E,M){E.mid=M.mid,E.left=M.left,E.right=M.right,E.leftPoints=M.leftPoints,E.rightPoints=M.rightPoints,E.count=M.count}function i(E,M){var S=u(M);E.mid=S.mid,E.left=S.left,E.right=S.right,E.leftPoints=S.leftPoints,E.rightPoints=S.rightPoints,E.count=S.count}function v(E,M){var S=E.intervals([]);S.push(M),i(E,S)}function h(E,M){var S=E.intervals([]),C=S.indexOf(M);return C<0?0:(S.splice(C,1),i(E,S),1)}function s(E,M,S){for(var C=0;C<E.length&&E[C][0]<=M;++C){var O=S(E[C]);if(O)return O}}function d(E,M,S){for(var C=E.length-1;C>=0&&E[C][1]>=M;--C){var O=S(E[C]);if(O)return O}}function p(E,M){for(var S=0;S<E.length;++S){var C=M(E[S]);if(C)return C}}function f(E,M){return E-M}function g(E,M){return E[0]-M[0]||E[1]-M[1]}function m(E,M){return E[1]-M[1]||E[0]-M[0]}function u(E){if(0===E.length)return null;for(var M=[],S=0;S<E.length;++S)M.push(E[S][0],E[S][1]);M.sort(f);var C=M[M.length>>1],O=[],I=[],N=[];for(S=0;S<E.length;++S){var F=E[S];F[1]<C?O.push(F):C<F[0]?I.push(F):N.push(F)}var L=N,P=N.slice();return L.sort(g),P.sort(m),new o(C,u(O),u(I),L,P)}function w(E){this.root=E}a.intervals=function(E){return E.push.apply(E,this.leftPoints),this.left&&this.left.intervals(E),this.right&&this.right.intervals(E),E},a.insert=function(E){var M=this.count-this.leftPoints.length;if(this.count+=1,E[1]<this.mid)this.left?4*(this.left.count+1)>3*(M+1)?v(this,E):this.left.insert(E):this.left=u([E]);else if(E[0]>this.mid)this.right?4*(this.right.count+1)>3*(M+1)?v(this,E):this.right.insert(E):this.right=u([E]);else{var S=e.ge(this.leftPoints,E,g),C=e.ge(this.rightPoints,E,m);this.leftPoints.splice(S,0,E),this.rightPoints.splice(C,0,E)}},a.remove=function(E){var M=this.count-this.leftPoints;if(E[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(M-1)?h(this,E):2===(I=this.left.remove(E))?(this.left=null,this.count-=1,1):(1===I&&(this.count-=1),I):0;if(E[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(M-1)?h(this,E):2===(I=this.right.remove(E))?(this.right=null,this.count-=1,1):(1===I&&(this.count-=1),I):0;if(1===this.count)return this.leftPoints[0]===E?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===E){if(this.left&&this.right){for(var S=this,C=this.left;C.right;)S=C,C=C.right;if(S===this)C.right=this.right;else{var O=this.left,I=this.right;S.count-=C.count,S.right=C.left,C.left=O,C.right=I}l(this,C),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else l(this,this.left?this.left:this.right);return 1}for(O=e.ge(this.leftPoints,E,g);O<this.leftPoints.length&&this.leftPoints[O][0]===E[0];++O)if(this.leftPoints[O]===E)for(this.count-=1,this.leftPoints.splice(O,1),I=e.ge(this.rightPoints,E,m);I<this.rightPoints.length&&this.rightPoints[I][1]===E[1];++I)if(this.rightPoints[I]===E)return this.rightPoints.splice(I,1),1;return 0},a.queryPoint=function(E,M){return E<this.mid?this.left&&(S=this.left.queryPoint(E,M))?S:s(this.leftPoints,E,M):E>this.mid?this.right&&(S=this.right.queryPoint(E,M))?S:d(this.rightPoints,E,M):p(this.leftPoints,M);var S},a.queryInterval=function(E,M,S){var C;return E<this.mid&&this.left&&(C=this.left.queryInterval(E,M,S))||M>this.mid&&this.right&&(C=this.right.queryInterval(E,M,S))?C:M<this.mid?s(this.leftPoints,M,S):E>this.mid?d(this.rightPoints,E,S):p(this.leftPoints,S)};var c=w.prototype;c.insert=function(E){this.root?this.root.insert(E):this.root=new o(E[0],null,null,[E],[E])},c.remove=function(E){if(this.root){var M=this.root.remove(E);return 2===M&&(this.root=null),0!==M}return!1},c.queryPoint=function(E,M){if(this.root)return this.root.queryPoint(E,M)},c.queryInterval=function(E,M,S){if(E<=M&&this.root)return this.root.queryInterval(E,M,S)},Object.defineProperty(c,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(c,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(b,T,_){"use strict";T.exports=function(e){for(var o=new Array(e),a=0;a<e;++a)o[a]=a;return o}},{}],236:[function(b,T,_){T.exports=!0},{}],237:[function(b,T,_){function e(o){return!!o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o)}T.exports=function(o){return null!=o&&(e(o)||"function"==typeof(a=o).readFloatLE&&"function"==typeof a.slice&&e(a.slice(0,0))||!!o._isBuffer);var a}},{}],238:[function(b,T,_){"use strict";T.exports=a,T.exports.isMobile=a,T.exports.default=a;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(l){l||(l={});var i=l.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;var v=l.tablet?o.test(i):e.test(i);return!v&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(v=!0),v}},{}],239:[function(b,T,_){"use strict";T.exports=function(e){for(var o,a=e.length,l=0;l<a;l++)if(((o=e.charCodeAt(l))<9||o>13)&&32!==o&&133!==o&&160!==o&&5760!==o&&6158!==o&&(o<8192||o>8205)&&8232!==o&&8233!==o&&8239!==o&&8287!==o&&8288!==o&&12288!==o&&65279!==o)return!1;return!0}},{}],240:[function(b,T,_){T.exports=function(e,o,a){return e*(1-a)+o*a}},{}],241:[function(b,T,_){var e=b("./normalize"),o=b("gl-mat4/create"),a=b("gl-mat4/clone"),l=b("gl-mat4/determinant"),i=b("gl-mat4/invert"),v=b("gl-mat4/transpose"),h={length:b("gl-vec3/length"),normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},s=o(),d=o(),p=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function m(u,w,c,E,M){u[0]=w[0]*E+c[0]*M,u[1]=w[1]*E+c[1]*M,u[2]=w[2]*E+c[2]*M}T.exports=function(u,w,c,E,M,S){if(w||(w=[0,0,0]),c||(c=[0,0,0]),E||(E=[0,0,0]),M||(M=[0,0,0,1]),S||(S=[0,0,0,1]),!e(s,u)||(a(d,s),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(l(d)<1e-8)))return!1;var C,O,I,N,F,L,P,se,G,j=s[3],U=s[7],$=s[11],X=s[12],te=s[13],ae=s[14],J=s[15];if(0!==j||0!==U||0!==$){if(p[0]=j,p[1]=U,p[2]=$,p[3]=J,!i(d,d))return!1;v(d,d),N=(O=p)[0],(C=M)[0]=(I=d)[0]*N+I[4]*(F=O[1])+I[8]*(L=O[2])+I[12]*(P=O[3]),C[1]=I[1]*N+I[5]*F+I[9]*L+I[13]*P,C[2]=I[2]*N+I[6]*F+I[10]*L+I[14]*P,C[3]=I[3]*N+I[7]*F+I[11]*L+I[15]*P}else M[0]=M[1]=M[2]=0,M[3]=1;if(w[0]=X,w[1]=te,w[2]=ae,(se=f)[0][0]=(G=s)[0],se[0][1]=G[1],se[0][2]=G[2],se[1][0]=G[4],se[1][1]=G[5],se[1][2]=G[6],se[2][0]=G[8],se[2][1]=G[9],se[2][2]=G[10],c[0]=h.length(f[0]),h.normalize(f[0],f[0]),E[0]=h.dot(f[0],f[1]),m(f[1],f[1],f[0],1,-E[0]),c[1]=h.length(f[1]),h.normalize(f[1],f[1]),E[0]/=c[1],E[1]=h.dot(f[0],f[2]),m(f[2],f[2],f[0],1,-E[1]),E[2]=h.dot(f[1],f[2]),m(f[2],f[2],f[1],1,-E[2]),c[2]=h.length(f[2]),h.normalize(f[2],f[2]),E[1]/=c[2],E[2]/=c[2],h.cross(g,f[1],f[2]),h.dot(f[0],g)<0)for(var ee=0;ee<3;ee++)c[ee]*=-1,f[ee][0]*=-1,f[ee][1]*=-1,f[ee][2]*=-1;return S[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0)),S[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0)),S[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0)),S[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0)),f[2][1]>f[1][2]&&(S[0]=-S[0]),f[0][2]>f[2][0]&&(S[1]=-S[1]),f[1][0]>f[0][1]&&(S[2]=-S[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(b,T,_){T.exports=function(e,o){var a=o[15];if(0===a)return!1;for(var l=1/a,i=0;i<16;i++)e[i]=o[i]*l;return!0}},{}],243:[function(b,T,_){var e=b("gl-vec3/lerp"),o=b("mat4-recompose"),a=b("mat4-decompose"),l=b("gl-mat4/determinant"),i=b("quat-slerp"),v=d(),h=d(),s=d();function d(){return{translate:p(),scale:p(1),skew:p(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function p(f){return[f||0,f||0,f||0]}T.exports=function(f,g,m,u){if(0===l(g)||0===l(m))return!1;var w=a(g,v.translate,v.scale,v.skew,v.perspective,v.quaternion),c=a(m,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!w||!c||(e(s.translate,v.translate,h.translate,u),e(s.skew,v.skew,h.skew,u),e(s.scale,v.scale,h.scale,u),e(s.perspective,v.perspective,h.perspective,u),i(s.quaternion,v.quaternion,h.quaternion,u),o(f,s.translate,s.scale,s.skew,s.perspective,s.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(b,T,_){var e={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),fromRotationTranslation:b("gl-mat4/fromRotationTranslation")},o=(e.create(),e.create());T.exports=function(a,l,i,v,h,s){return e.identity(a),e.fromRotationTranslation(a,s,l),a[3]=h[0],a[7]=h[1],a[11]=h[2],a[15]=h[3],e.identity(o),0!==v[2]&&(o[9]=v[2],e.multiply(a,a,o)),0!==v[1]&&(o[9]=0,o[8]=v[1],e.multiply(a,a,o)),0!==v[0]&&(o[8]=0,o[4]=v[0],e.multiply(a,a,o)),e.scale(a,a,i),a}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(b,T,_){"use strict";var e=b("binary-search-bounds"),o=b("mat4-interpolate"),a=b("gl-mat4/invert"),l=b("gl-mat4/rotateX"),i=b("gl-mat4/rotateY"),v=b("gl-mat4/rotateZ"),h=b("gl-mat4/lookAt"),s=b("gl-mat4/translate"),d=(b("gl-mat4/scale"),b("gl-vec3/normalize")),p=[0,0,0];function f(u){this._components=u.slice(),this._time=[0],this.prevMatrix=u.slice(),this.nextMatrix=u.slice(),this.computedMatrix=u.slice(),this.computedInverse=u.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}T.exports=function(u){return new f((u=u||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=f.prototype;g.recalcMatrix=function(u){var w=this._time,c=e.le(w,u),E=this.computedMatrix;if(!(c<0)){var M=this._components;if(c===w.length-1)for(var S=16*c,C=0;C<16;++C)E[C]=M[S++];else{var O=w[c+1]-w[c],I=(S=16*c,this.prevMatrix),N=!0;for(C=0;C<16;++C)I[C]=M[S++];var F=this.nextMatrix;for(C=0;C<16;++C)F[C]=M[S++],N=N&&I[C]===F[C];if(O<1e-6||N)for(C=0;C<16;++C)E[C]=I[C];else o(E,I,F,(u-w[c])/O)}var L=this.computedUp;L[0]=E[1],L[1]=E[5],L[2]=E[9],d(L,L);var P=this.computedInverse;a(P,E);var j=this.computedEye,U=P[15];j[0]=P[12]/U,j[1]=P[13]/U,j[2]=P[14]/U;var $=this.computedCenter,X=Math.exp(this.computedRadius[0]);for(C=0;C<3;++C)$[C]=j[C]-E[2+4*C]*X}},g.idle=function(u){if(!(u<this.lastT())){for(var w=this._components,c=w.length-16,E=0;E<16;++E)w.push(w[c++]);this._time.push(u)}},g.flush=function(u){var w=e.gt(this._time,u)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(u,w,c,E){this.recalcMatrix(u),this.setMatrix(u,h(this.computedMatrix,w=w||this.computedEye,c=c||p,E=E||this.computedUp));for(var M=0,S=0;S<3;++S)M+=Math.pow(c[S]-w[S],2);M=Math.log(Math.sqrt(M)),this.computedRadius[0]=M},g.rotate=function(u,w,c,E){this.recalcMatrix(u);var M=this.computedInverse;w&&i(M,M,w),c&&l(M,M,c),E&&v(M,M,E),this.setMatrix(u,a(this.computedMatrix,M))};var m=[0,0,0];g.pan=function(u,w,c,E){m[0]=-(w||0),m[1]=-(c||0),m[2]=-(E||0),this.recalcMatrix(u);var M=this.computedInverse;s(M,M,m),this.setMatrix(u,a(M,M))},g.translate=function(u,w,c,E){m[0]=w||0,m[1]=c||0,m[2]=E||0,this.recalcMatrix(u);var M=this.computedMatrix;s(M,M,m),this.setMatrix(u,M)},g.setMatrix=function(u,w){if(!(u<this.lastT())){this._time.push(u);for(var c=0;c<16;++c)this._components.push(w[c])}},g.setDistance=function(u,w){this.computedRadius[0]=w},g.setDistanceLimits=function(u,w){var c=this._limits;c[0]=u,c[1]=w},g.getDistanceLimits=function(u){var w=this._limits;return u?(u[0]=w[0],u[1]=w[1],u):w}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(b,T,_){"use strict";T.exports=function(o){var a=o.length;if(a<3){for(var l=new Array(a),i=0;i<a;++i)l[i]=i;return 2===a&&o[0][0]===o[1][0]&&o[0][1]===o[1][1]?[0]:l}var v=new Array(a);for(i=0;i<a;++i)v[i]=i;v.sort(function(w,c){return o[w][0]-o[c][0]||o[w][1]-o[c][1]});var h=[v[0],v[1]],s=[v[0],v[1]];for(i=2;i<a;++i){for(var d=v[i],p=o[d],f=h.length;f>1&&e(o[h[f-2]],o[h[f-1]],p)<=0;)f-=1,h.pop();for(h.push(d),f=s.length;f>1&&e(o[s[f-2]],o[s[f-1]],p)>=0;)f-=1,s.pop();s.push(d)}l=new Array(s.length+h.length-2);for(var g=0,m=(i=0,h.length);i<m;++i)l[g++]=h[i];for(var u=s.length-2;u>0;--u)l[g++]=s[u];return l};var e=b("robust-orientation")[3]},{"robust-orientation":284}],247:[function(b,T,_){"use strict";T.exports=function(o,a){a||(a=o,o=window);var l=0,i=0,v=0,h={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function d(S){var C=!1;return"altKey"in S&&(C=C||S.altKey!==h.alt,h.alt=!!S.altKey),"shiftKey"in S&&(C=C||S.shiftKey!==h.shift,h.shift=!!S.shiftKey),"ctrlKey"in S&&(C=C||S.ctrlKey!==h.control,h.control=!!S.ctrlKey),"metaKey"in S&&(C=C||S.metaKey!==h.meta,h.meta=!!S.metaKey),C}function p(S,C){var O=e.x(C),I=e.y(C);"buttons"in C&&(S=0|C.buttons),(S!==l||O!==i||I!==v||d(C))&&(l=0|S,i=O||0,v=I||0,a&&a(l,i,v,h))}function f(S){p(0,S)}function g(){(l||i||v||h.shift||h.alt||h.meta||h.control)&&(i=v=0,l=0,h.shift=h.alt=h.control=h.meta=!1,a&&a(0,0,0,h))}function m(S){d(S)&&a&&a(l,i,v,h)}function u(S){0===e.buttons(S)?p(0,S):p(l,S)}function w(S){p(l|e.buttons(S),S)}function c(S){p(l&~e.buttons(S),S)}function E(){s||(s=!0,o.addEventListener("mousemove",u),o.addEventListener("mousedown",w),o.addEventListener("mouseup",c),o.addEventListener("mouseleave",f),o.addEventListener("mouseenter",f),o.addEventListener("mouseout",f),o.addEventListener("mouseover",f),o.addEventListener("blur",g),o.addEventListener("keyup",m),o.addEventListener("keydown",m),o.addEventListener("keypress",m),o!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",m),window.addEventListener("keydown",m),window.addEventListener("keypress",m)))}E();var M={element:o};return Object.defineProperties(M,{enabled:{get:function(){return s},set:function(S){S?E():!s||(s=!1,o.removeEventListener("mousemove",u),o.removeEventListener("mousedown",w),o.removeEventListener("mouseup",c),o.removeEventListener("mouseleave",f),o.removeEventListener("mouseenter",f),o.removeEventListener("mouseout",f),o.removeEventListener("mouseover",f),o.removeEventListener("blur",g),o.removeEventListener("keyup",m),o.removeEventListener("keydown",m),o.removeEventListener("keypress",m),o!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",m),window.removeEventListener("keydown",m),window.removeEventListener("keypress",m)))},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),M};var e=b("mouse-event")},{"mouse-event":249}],248:[function(b,T,_){var e={left:0,top:0};T.exports=function(o,a,l){a=a||o.currentTarget||o.srcElement,Array.isArray(l)||(l=[0,0]);var s,i=o.clientX||0,v=o.clientY||0,h=(s=a)===window||s===document||s===document.body?e:s.getBoundingClientRect();return l[0]=i-h.left,l[1]=v-h.top,l}},{}],249:[function(b,T,_){"use strict";function e(o){return o.target||o.srcElement||window}_.buttons=function(o){if("object"==typeof o){if("buttons"in o)return o.buttons;if("which"in o){if(2===(a=o.which))return 4;if(3===a)return 2;if(a>0)return 1<<a-1}else if("button"in o){var a;if(1===(a=o.button))return 4;if(2===a)return 2;if(a>=0)return 1<<a}}return 0},_.element=e,_.x=function(o){if("object"==typeof o){if("offsetX"in o)return o.offsetX;var a=e(o).getBoundingClientRect();return o.clientX-a.left}return 0},_.y=function(o){if("object"==typeof o){if("offsetY"in o)return o.offsetY;var a=e(o).getBoundingClientRect();return o.clientY-a.top}return 0}},{}],250:[function(b,T,_){"use strict";var e=b("to-px");T.exports=function(o,a,l){"function"==typeof o&&(l=!!a,a=o,o=window);var i=e("ex",o),v=function(h){l&&h.preventDefault();var s=h.deltaX||0,d=h.deltaY||0,p=h.deltaZ||0,f=1;switch(h.deltaMode){case 1:f=i;break;case 2:f=window.innerHeight}if(d*=f,p*=f,(s*=f)||d||p)return a(s,d,p,h)};return o.addEventListener("wheel",v),v}},{"to-px":304}],251:[function(b,T,_){"use strict";var e=b("typedarray-pool");T.exports=function(a){function l(f){throw new Error("ndarray-extract-contour: "+f)}"object"!=typeof a&&l("Must specify arguments");var i=a.order;Array.isArray(i)||l("Must specify order");var f,g,m,E,v=a.arrayArguments||1;v<1&&l("Must have at least one array argument"),(a.scalarArguments||0)<0&&l("Scalar arg count must be > 0"),"function"!=typeof a.vertex&&l("Must specify vertex creation function"),"function"!=typeof a.cell&&l("Must specify cell creation function"),"function"!=typeof a.phase&&l("Must specify phase function");for(var s=a.getters||[],d=new Array(v),p=0;p<v;++p)d[p]=s.indexOf(p)>=0;return f=a.vertex,g=a.cell,m=a.phase,E=[d,i].join(","),(0,o[E])(f,g,m,e.mallocUint32,e.freeUint32)};var o={"false,0,1":function(a,l,i,v,h){return function(s,d,p,f){var g,m=0|s.shape[0],u=0|s.shape[1],w=s.data,E=0|s.stride[0],M=0|s.stride[1],S=0|s.offset,C=0|-E,O=0,I=0|-M,N=0,F=-E-M|0,L=0,P=0|E,j=M-E*m|0,U=0,$=0,X=0,te=2*m|0,ae=v(te),J=v(te),ee=0,se=0,G=-1,H=-1,Y=0,oe=0|-m,W=0|m,ne=0,re=-m-1|0,ce=m-1|0,fe=0,me=0,pe=0;for(U=0;U<m;++U)ae[ee++]=i(w[S],d,p,f),S+=P;if(S+=j,u>0){if($=1,ae[ee++]=i(w[S],d,p,f),S+=P,m>0)for(U=1,se=ae[ee]=i(g=w[S],d,p,f),ne=ae[ee+oe],fe=ae[ee+re],se===(Y=ae[ee+G])&&se===ne&&se===fe||(a(U,$,g,O=w[S+C],N=w[S+I],L=w[S+F],se,Y,ne,fe,d,p,f),me=J[ee]=X++),ee+=1,S+=P,U=2;U<m;++U)se=ae[ee]=i(g=w[S],d,p,f),ne=ae[ee+oe],fe=ae[ee+re],se===(Y=ae[ee+G])&&se===ne&&se===fe||(a(U,$,g,O=w[S+C],N=w[S+I],L=w[S+F],se,Y,ne,fe,d,p,f),me=J[ee]=X++,fe!==Y&&l(J[ee+G],me,L,O,fe,Y,d,p,f)),ee+=1,S+=P;for(S+=j,ee=0,pe=G,G=H,H=pe,pe=oe,oe=W,W=pe,pe=re,re=ce,ce=pe,$=2;$<u;++$){if(ae[ee++]=i(w[S],d,p,f),S+=P,m>0)for(U=1,se=ae[ee]=i(g=w[S],d,p,f),ne=ae[ee+oe],fe=ae[ee+re],se===(Y=ae[ee+G])&&se===ne&&se===fe||(a(U,$,g,O=w[S+C],N=w[S+I],L=w[S+F],se,Y,ne,fe,d,p,f),me=J[ee]=X++,fe!==ne&&l(J[ee+oe],me,N,L,ne,fe,d,p,f)),ee+=1,S+=P,U=2;U<m;++U)se=ae[ee]=i(g=w[S],d,p,f),ne=ae[ee+oe],fe=ae[ee+re],se===(Y=ae[ee+G])&&se===ne&&se===fe||(a(U,$,g,O=w[S+C],N=w[S+I],L=w[S+F],se,Y,ne,fe,d,p,f),me=J[ee]=X++,fe!==ne&&l(J[ee+oe],me,N,L,ne,fe,d,p,f),fe!==Y&&l(J[ee+G],me,L,O,fe,Y,d,p,f)),ee+=1,S+=P;1&$&&(ee=0),pe=G,G=H,H=pe,pe=oe,oe=W,W=pe,pe=re,re=ce,ce=pe,S+=j}}h(J),h(ae)}},"false,1,0":function(a,l,i,v,h){return function(s,d,p,f){var g,m=0|s.shape[0],u=0|s.shape[1],w=s.data,E=0|s.stride[0],M=0|s.stride[1],S=0|s.offset,C=0|-E,O=0,I=0|-M,N=0,F=-E-M|0,L=0,P=0|M,j=E-M*u|0,U=0,$=0,X=0,te=2*u|0,ae=v(te),J=v(te),ee=0,se=0,G=-1,H=-1,Y=0,oe=0|-u,W=0|u,ne=0,re=-u-1|0,ce=u-1|0,fe=0,me=0,pe=0;for($=0;$<u;++$)ae[ee++]=i(w[S],d,p,f),S+=P;if(S+=j,m>0){if(U=1,ae[ee++]=i(w[S],d,p,f),S+=P,u>0)for($=1,se=ae[ee]=i(g=w[S],d,p,f),Y=ae[ee+G],fe=ae[ee+re],se===(ne=ae[ee+oe])&&se===Y&&se===fe||(a(U,$,g,O=w[S+C],N=w[S+I],L=w[S+F],se,ne,Y,fe,d,p,f),me=J[ee]=X++),ee+=1,S+=P,$=2;$<u;++$)se=ae[ee]=i(g=w[S],d,p,f),Y=ae[ee+G],fe=ae[ee+re],se===(ne=ae[ee+oe])&&se===Y&&se===fe||(a(U,$,g,O=w[S+C],N=w[S+I],L=w[S+F],se,ne,Y,fe,d,p,f),me=J[ee]=X++,fe!==Y&&l(J[ee+G],me,N,L,Y,fe,d,p,f)),ee+=1,S+=P;for(S+=j,ee=0,pe=oe,oe=W,W=pe,pe=G,G=H,H=pe,pe=re,re=ce,ce=pe,U=2;U<m;++U){if(ae[ee++]=i(w[S],d,p,f),S+=P,u>0)for($=1,se=ae[ee]=i(g=w[S],d,p,f),Y=ae[ee+G],fe=ae[ee+re],se===(ne=ae[ee+oe])&&se===Y&&se===fe||(a(U,$,g,O=w[S+C],N=w[S+I],L=w[S+F],se,ne,Y,fe,d,p,f),me=J[ee]=X++,fe!==ne&&l(J[ee+oe],me,L,O,fe,ne,d,p,f)),ee+=1,S+=P,$=2;$<u;++$)se=ae[ee]=i(g=w[S],d,p,f),Y=ae[ee+G],fe=ae[ee+re],se===(ne=ae[ee+oe])&&se===Y&&se===fe||(a(U,$,g,O=w[S+C],N=w[S+I],L=w[S+F],se,ne,Y,fe,d,p,f),me=J[ee]=X++,fe!==Y&&l(J[ee+G],me,N,L,Y,fe,d,p,f),fe!==ne&&l(J[ee+oe],me,L,O,fe,ne,d,p,f)),ee+=1,S+=P;1&U&&(ee=0),pe=oe,oe=W,W=pe,pe=G,G=H,H=pe,pe=re,re=ce,ce=pe,S+=j}}h(J),h(ae)}}}},{"typedarray-pool":308}],252:[function(b,T,_){"use strict";var e=b("dup"),o={zero:function(m,u,w,c){var E=m[0];c|=0;var M=0,S=w[0];for(M=0;M<E;++M)u[c]=0,c+=S},fdTemplate1:function(m,u,w,c,E,M,S){var C=m[0],O=w[0],I=-1*O,N=O;c|=0,S|=0;var F=0,L=O,P=M[0];for(F=0;F<C;++F)E[S]=.5*(u[c+I]-u[c+N]),c+=L,S+=P},fdTemplate2:function(m,u,w,c,E,M,S,C,O,I){var N=m[0],F=m[1],L=w[0],P=w[1],U=M[1],X=O[1],te=-1*L,ae=L,J=-1*P,ee=P;c|=0,S|=0,I|=0;var se=0,G=0,H=P,Y=L-F*P,oe=U,W=M[0]-F*U,ne=X,re=O[0]-F*X;for(G=0;G<N;++G){for(se=0;se<F;++se)E[S]=.5*(u[c+te]-u[c+ae]),C[I]=.5*(u[c+J]-u[c+ee]),c+=H,S+=oe,I+=ne;c+=Y,S+=W,I+=re}}},a={cdiff:function(m){var u={};return function(w,c,E){var M=w.dtype,S=w.order,C=c.dtype,O=c.order,I=E.dtype,N=E.order,F=[M,S.join(),C,O.join(),I,N.join()].join(),L=u[F];return L||(u[F]=L=m([M,S,C,O,I,N])),L(w.shape.slice(0),w.data,w.stride,0|w.offset,c.data,c.stride,0|c.offset,E.data,E.stride,0|E.offset)}},zero:function(m){var u={};return function(w){var c=w.dtype,E=w.order,M=[c,E.join()].join(),S=u[M];return S||(u[M]=S=m([c,E])),S(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(m){var u={};return function(w,c){var E=w.dtype,M=w.order,S=c.dtype,C=c.order,O=[E,M.join(),S,C.join()].join(),I=u[O];return I||(u[O]=I=m([E,M,S,C])),I(w.shape.slice(0),w.data,w.stride,0|w.offset,c.data,c.stride,0|c.offset)}},fdTemplate2:function(m){var u={};return function(w,c,E){var M=w.dtype,S=w.order,C=c.dtype,O=c.order,I=E.dtype,N=E.order,F=[M,S.join(),C,O.join(),I,N.join()].join(),L=u[F];return L||(u[F]=L=m([M,S,C,O,I,N])),L(w.shape.slice(0),w.data,w.stride,0|w.offset,c.data,c.stride,0|c.offset,E.data,E.stride,0|E.offset)}}};function l(m){return(0,a[m.funcName])(i.bind(void 0,m))}function i(m){return o[m.funcName]}function v(m){return l({funcName:m.funcName})}var h={},s={},d=v({funcName:"cdiff"}),p=v({funcName:"zero"});function f(m){return m in h?h[m]:h[m]=v({funcName:"fdTemplate"+m})}function g(m,u,w,c){return function(E,M){var S=M.shape.slice();return S[0]>2&&S[1]>2&&c(M.pick(-1,-1).lo(1,1).hi(S[0]-2,S[1]-2),E.pick(-1,-1,0).lo(1,1).hi(S[0]-2,S[1]-2),E.pick(-1,-1,1).lo(1,1).hi(S[0]-2,S[1]-2)),S[1]>2&&(w(M.pick(0,-1).lo(1).hi(S[1]-2),E.pick(0,-1,1).lo(1).hi(S[1]-2)),u(E.pick(0,-1,0).lo(1).hi(S[1]-2))),S[1]>2&&(w(M.pick(S[0]-1,-1).lo(1).hi(S[1]-2),E.pick(S[0]-1,-1,1).lo(1).hi(S[1]-2)),u(E.pick(S[0]-1,-1,0).lo(1).hi(S[1]-2))),S[0]>2&&(w(M.pick(-1,0).lo(1).hi(S[0]-2),E.pick(-1,0,0).lo(1).hi(S[0]-2)),u(E.pick(-1,0,1).lo(1).hi(S[0]-2))),S[0]>2&&(w(M.pick(-1,S[1]-1).lo(1).hi(S[0]-2),E.pick(-1,S[1]-1,0).lo(1).hi(S[0]-2)),u(E.pick(-1,S[1]-1,1).lo(1).hi(S[0]-2))),E.set(0,0,0,0),E.set(0,0,1,0),E.set(S[0]-1,0,0,0),E.set(S[0]-1,0,1,0),E.set(0,S[1]-1,0,0),E.set(0,S[1]-1,1,0),E.set(S[0]-1,S[1]-1,0,0),E.set(S[0]-1,S[1]-1,1,0),E}}T.exports=function(m,u,w){return Array.isArray(w)||(w=e(u.dimension,"string"==typeof w?w:"clamp")),0===u.size?m:0===u.dimension?(m.set(0),m):function(c){var E=c.join();if(O=s[E])return O;for(var M=c.length,S=[d,p],C=1;C<=M;++C)S.push(f(C));var O=g.apply(void 0,S);return s[E]=O,O}(w)(m,u)}},{dup:65}],253:[function(b,T,_){"use strict";function e(i,v){var h=Math.floor(v),s=v-h,p=0<=h+1&&h+1<i.shape[0];return(1-s)*(0<=h&&h<i.shape[0]?+i.get(h):0)+s*(p?+i.get(h+1):0)}function o(i,v,h){var s=Math.floor(v),d=v-s,p=0<=s&&s<i.shape[0],f=0<=s+1&&s+1<i.shape[0],g=Math.floor(h),m=h-g,u=0<=g&&g<i.shape[1],w=0<=g+1&&g+1<i.shape[1],c=p&&u?i.get(s,g):0,E=p&&w?i.get(s,g+1):0;return(1-m)*((1-d)*c+d*(f&&u?i.get(s+1,g):0))+m*((1-d)*E+d*(f&&w?i.get(s+1,g+1):0))}function a(i,v,h,s){var d=Math.floor(v),p=v-d,f=0<=d&&d<i.shape[0],g=0<=d+1&&d+1<i.shape[0],m=Math.floor(h),u=h-m,w=0<=m&&m<i.shape[1],c=0<=m+1&&m+1<i.shape[1],E=Math.floor(s),M=s-E,S=0<=E&&E<i.shape[2],C=0<=E+1&&E+1<i.shape[2],O=f&&w&&S?i.get(d,m,E):0,I=f&&c&&S?i.get(d,m+1,E):0,N=g&&w&&S?i.get(d+1,m,E):0,F=g&&c&&S?i.get(d+1,m+1,E):0,L=f&&w&&C?i.get(d,m,E+1):0,P=f&&c&&C?i.get(d,m+1,E+1):0;return(1-M)*((1-u)*((1-p)*O+p*N)+u*((1-p)*I+p*F))+M*((1-u)*((1-p)*L+p*(g&&w&&C?i.get(d+1,m,E+1):0))+u*((1-p)*P+p*(g&&c&&C?i.get(d+1,m+1,E+1):0)))}function l(i){var v,h,s=0|i.shape.length,d=new Array(s),p=new Array(s),f=new Array(s),g=new Array(s);for(v=0;v<s;++v)h=+arguments[v+1],d[v]=Math.floor(h),p[v]=h-d[v],f[v]=0<=d[v]&&d[v]<i.shape[v],g[v]=0<=d[v]+1&&d[v]+1<i.shape[v];var m,u,w,c=0;e:for(v=0;v<1<<s;++v){for(u=1,w=i.offset,m=0;m<s;++m)if(v&1<<m){if(!g[m])continue e;u*=p[m],w+=i.stride[m]*(d[m]+1)}else{if(!f[m])continue e;u*=1-p[m],w+=i.stride[m]*d[m]}c+=u*i.data[w]}return c}T.exports=function(i,v,h,s){switch(i.shape.length){case 0:return 0;case 1:return e(i,v);case 2:return o(i,v,h);case 3:return a(i,v,h,s);default:return l.apply(void 0,arguments)}},T.exports.d1=e,T.exports.d2=o,T.exports.d3=a},{}],254:[function(b,T,_){"use strict";var e={"float64,2,1,0":function(){return function(v,h,s,d,p){var f=v[0],g=v[1],m=v[2],w=s[1],c=s[2];d|=0;var E=0,M=0,S=0,C=c,O=w-m*c,I=s[0]-g*w;for(S=0;S<f;++S){for(M=0;M<g;++M){for(E=0;E<m;++E)h[d]/=p,d+=C;d+=O}d+=I}}},"uint8,2,0,1,float64,2,1,0":function(){return function(v,h,s,d,p,f,g,m){for(var u=v[0],w=v[1],c=v[2],E=s[0],M=s[1],S=s[2],C=f[0],O=f[1],I=f[2],N=d|=0,F=g|=0,L=0|v[0];L>0;){L<64?(u=L,L=0):(u=64,L-=64);for(var P=0|v[1];P>0;){P<64?(w=P,P=0):(w=64,P-=64),d=N+L*E+P*M,g=F+L*C+P*O;var j=0,U=0,$=0,X=S,te=E-c*S,ae=M-u*E,J=I,ee=C-c*I,se=O-u*C;for($=0;$<w;++$){for(U=0;U<u;++U){for(j=0;j<c;++j)h[d]=p[g]*m,d+=X,g+=J;d+=te,g+=ee}d+=ae,g+=se}}}}},"float32,1,0,float32,1,0":function(){return function(v,h,s,d,p,f,g){var m=v[0],u=v[1],c=s[1],M=f[1];d|=0,g|=0;var S=0,C=0,O=c,I=s[0]-u*c,N=M,F=f[0]-u*M;for(C=0;C<m;++C){for(S=0;S<u;++S)h[d]=p[g],d+=O,g+=N;d+=I,g+=F}}},"float32,1,0,float32,0,1":function(){return function(v,h,s,d,p,f,g){for(var m=v[0],u=v[1],w=s[0],c=s[1],E=f[0],M=f[1],S=d|=0,C=g|=0,O=0|v[1];O>0;){O<64?(u=O,O=0):(u=64,O-=64);for(var I=0|v[0];I>0;){I<64?(m=I,I=0):(m=64,I-=64),d=S+O*c+I*w,g=C+O*M+I*E;var N=0,F=0,L=c,P=w-u*c,j=M,U=E-u*M;for(F=0;F<m;++F){for(N=0;N<u;++N)h[d]=p[g],d+=L,g+=j;d+=P,g+=U}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(v,h,s,d,p,f,g){for(var m=v[0],u=v[1],w=v[2],c=s[0],E=s[1],M=s[2],S=f[0],C=f[1],O=f[2],I=d|=0,N=g|=0,F=0|v[2];F>0;){F<64?(w=F,F=0):(w=64,F-=64);for(var L=0|v[0];L>0;){L<64?(m=L,L=0):(m=64,L-=64);for(var P=0|v[1];P>0;){P<64?(u=P,P=0):(u=64,P-=64),d=I+F*M+L*c+P*E,g=N+F*O+L*S+P*C;var j=0,U=0,$=0,X=M,te=c-w*M,ae=E-m*c,J=O,ee=S-w*O,se=C-m*S;for($=0;$<u;++$){for(U=0;U<m;++U){for(j=0;j<w;++j)h[d]=p[g],d+=X,g+=J;d+=te,g+=ee}d+=ae,g+=se}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(v,h,s,d,p,f,g){var m=v[0],u=v[1],w=v[2],c=s[0],M=s[2],S=f[0],O=f[2];d|=0,g|=0;var I=0,N=0,F=0,L=M,P=c-w*M,j=s[1]-m*c,U=O,$=S-w*O,X=f[1]-m*S;for(F=0;F<u;++F){for(N=0;N<m;++N){for(I=0;I<w;++I)h[d]=p[g],d+=L,g+=U;d+=P,g+=$}d+=j,g+=X}}}},o=function(v,h){var s=h.join(",");return(0,e[s])()},a={mul:function(v){var h={};return function(s,d,p){var f=s.dtype,g=s.order,m=d.dtype,u=d.order,w=p.dtype,c=p.order,E=[f,g.join(),m,u.join(),w,c.join()].join(),M=h[E];return M||(h[E]=M=v([f,g,m,u,w,c])),M(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p.data,p.stride,0|p.offset)}},muls:function(v){var h={};return function(s,d,p){var f=s.dtype,g=s.order,m=d.dtype,u=d.order,w=[f,g.join(),m,u.join()].join(),c=h[w];return c||(h[w]=c=v([f,g,m,u])),c(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p)}},mulseq:function(v){var h={};return function(s,d){var p=s.dtype,f=s.order,g=[p,f.join()].join(),m=h[g];return m||(h[g]=m=v([p,f])),m(s.shape.slice(0),s.data,s.stride,0|s.offset,d)}},div:function(v){var h={};return function(s,d,p){var f=s.dtype,g=s.order,m=d.dtype,u=d.order,w=p.dtype,c=p.order,E=[f,g.join(),m,u.join(),w,c.join()].join(),M=h[E];return M||(h[E]=M=v([f,g,m,u,w,c])),M(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p.data,p.stride,0|p.offset)}},divs:function(v){var h={};return function(s,d,p){var f=s.dtype,g=s.order,m=d.dtype,u=d.order,w=[f,g.join(),m,u.join()].join(),c=h[w];return c||(h[w]=c=v([f,g,m,u])),c(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p)}},divseq:function(v){var h={};return function(s,d){var p=s.dtype,f=s.order,g=[p,f.join()].join(),m=h[g];return m||(h[g]=m=v([p,f])),m(s.shape.slice(0),s.data,s.stride,0|s.offset,d)}},assign:function(v){var h={};return function(s,d){var p=s.dtype,f=s.order,g=d.dtype,m=d.order,u=[p,f.join(),g,m.join()].join(),w=h[u];return w||(h[u]=w=v([p,f,g,m])),w(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset)}}};function l(v){return(0,a[(h={funcName:v.funcName}).funcName])(o.bind(void 0,h));var h}var i={mul:"*",div:"/"};(function(){for(var v in i)_[v]=l({funcName:v}),_[v+"s"]=l({funcName:v+"s"}),_[v+"seq"]=l({funcName:v+"seq"})})(),_.assign=l({funcName:"assign"})},{}],255:[function(b,T,_){"use strict";var e=b("ndarray"),o=b("./doConvert.js");T.exports=function(a,l){for(var i=[],v=a,h=1;Array.isArray(v);)i.push(v.length),h*=v.length,v=v[0];return 0===i.length?e():(l||(l=e(new Float64Array(h),i)),o(l,a),l)}},{"./doConvert.js":256,ndarray:259}],256:[function(b,T,_){"use strict";var a,l;T.exports=(a=function(){return function(a,l,i,v,h){var s=a[0],d=a[1],p=a[2],g=i[1],m=i[2],u=[0,0,0];v|=0;var w=0,c=0,E=0,M=m,S=g-p*m,C=i[0]-d*g;for(E=0;E<s;++E){for(c=0;c<d;++c){for(w=0;w<p;++w){var O,I=h;for(O=0;O<u.length-1;++O)I=I[u[O]];l[v]=I[u[u.length-1]],v+=M,++u[2]}v+=S,u[2]-=p,++u[1]}v+=C,u[1]-=d,++u[0]}}}.bind(void 0,{funcName:"convert"}),l={},function(i,v){var h=i.dtype,s=i.order,d=[h,s.join()].join(),p=l[d];return p||(l[d]=p=a([h,s])),p(i.shape.slice(0),i.data,i.stride,0|i.offset,v)})},{}],257:[function(b,T,_){"use strict";var e=b("typedarray-pool");function o(v){return"uint32"===v?[e.mallocUint32,e.freeUint32]:null}var a={"uint32,1,0":function(v,h){return function(s,d,p,f,g,m,u,w,c,E,M){var S,C,O,I,N,F,L,P,j=s*g+f,U=v(w);for(S=s+1;S<=d;++S){for(C=S,O=j+=g,N=0,F=j,I=0;I<w;++I)U[N++]=p[F],F+=c;e:for(;C-- >s;){N=0,F=O-g;t:for(I=0;I<w;++I){if((L=p[F])<(P=U[N]))break e;if(L>P)break t;F+=E,N+=M}for(N=O,F=O-g,I=0;I<w;++I)p[N]=p[F],N+=c,F+=c;O-=g}for(N=O,F=0,I=0;I<w;++I)p[N]=U[F++],N+=c}h(U)}}},l={"uint32,1,0":function(v,h,s){return function d(p,f,g,m,u,w,c,E,M,S,C){var O,I,F,L,P,j,U,$,X,te,ae,J,ee,se,G,H,Y,oe,W,ne,re,ce,fe,me,pe=(f-p+1)/6|0,we=p+pe,ye=f-pe,Te=p+f>>1,Le=Te-pe,Oe=Te+pe,Re=we,Ve=Le,_e=Te,Ae=Oe,Fe=ye,Pe=p+1,Be=f-1,qe=!0,We=0,Je=0,ut=0,Ge=E,Ke=h(Ge),nt=h(Ge);te=u*Re,ae=u*Ve,me=m;e:for(X=0;X<E;++X){if((ut=g[j=te+me]-g[U=ae+me])>0){I=Re,Re=Ve,Ve=I;break e}if(ut<0)break e;me+=S}te=u*Ae,ae=u*Fe,me=m;e:for(X=0;X<E;++X){if((ut=g[j=te+me]-g[U=ae+me])>0){I=Ae,Ae=Fe,Fe=I;break e}if(ut<0)break e;me+=S}te=u*Re,ae=u*_e,me=m;e:for(X=0;X<E;++X){if((ut=g[j=te+me]-g[U=ae+me])>0){I=Re,Re=_e,_e=I;break e}if(ut<0)break e;me+=S}te=u*Ve,ae=u*_e,me=m;e:for(X=0;X<E;++X){if((ut=g[j=te+me]-g[U=ae+me])>0){I=Ve,Ve=_e,_e=I;break e}if(ut<0)break e;me+=S}te=u*Re,ae=u*Ae,me=m;e:for(X=0;X<E;++X){if((ut=g[j=te+me]-g[U=ae+me])>0){I=Re,Re=Ae,Ae=I;break e}if(ut<0)break e;me+=S}te=u*_e,ae=u*Ae,me=m;e:for(X=0;X<E;++X){if((ut=g[j=te+me]-g[U=ae+me])>0){I=_e,_e=Ae,Ae=I;break e}if(ut<0)break e;me+=S}te=u*Ve,ae=u*Fe,me=m;e:for(X=0;X<E;++X){if((ut=g[j=te+me]-g[U=ae+me])>0){I=Ve,Ve=Fe,Fe=I;break e}if(ut<0)break e;me+=S}te=u*Ve,ae=u*_e,me=m;e:for(X=0;X<E;++X){if((ut=g[j=te+me]-g[U=ae+me])>0){I=Ve,Ve=_e,_e=I;break e}if(ut<0)break e;me+=S}te=u*Ae,ae=u*Fe,me=m;e:for(X=0;X<E;++X){if((ut=g[j=te+me]-g[U=ae+me])>0){I=Ae,Ae=Fe,Fe=I;break e}if(ut<0)break e;me+=S}for(te=u*Re,ae=u*Ve,J=u*_e,ee=u*Ae,se=u*Fe,G=u*we,H=u*Te,Y=u*ye,fe=0,me=m,X=0;X<E;++X)j=te+me,$=J+me,oe=ee+me,W=se+me,ne=G+me,re=H+me,ce=Y+me,Ke[fe]=g[U=ae+me],nt[fe]=g[oe],qe=qe&&Ke[fe]===nt[fe],F=g[$],L=g[W],g[ne]=g[j],g[re]=F,g[ce]=L,++fe,me+=M;for(te=u*Le,ae=u*p,me=m,X=0;X<E;++X)g[j=te+me]=g[U=ae+me],me+=M;for(te=u*Oe,ae=u*f,me=m,X=0;X<E;++X)g[j=te+me]=g[U=ae+me],me+=M;if(qe)for(P=Pe;P<=Be;++P){for(j=m+P*u,fe=0,X=0;X<E&&0==(ut=g[j]-Ke[fe]);++X)fe+=C,j+=S;if(0!==ut)if(ut<0){if(P!==Pe)for(te=u*P,ae=u*Pe,me=m,X=0;X<E;++X)O=g[j=te+me],g[j]=g[U=ae+me],g[U]=O,me+=M;++Pe}else for(;;){for(j=m+Be*u,fe=0,X=0;X<E&&0==(ut=g[j]-Ke[fe]);++X)fe+=C,j+=S;if(!(ut>0)){if(ut<0){for(te=u*P,ae=u*Pe,J=u*Be,me=m,X=0;X<E;++X)$=J+me,O=g[j=te+me],g[j]=g[U=ae+me],g[U]=g[$],g[$]=O,me+=M;++Pe,--Be;break}for(te=u*P,ae=u*Be,me=m,X=0;X<E;++X)O=g[j=te+me],g[j]=g[U=ae+me],g[U]=O,me+=M;--Be;break}Be--}}else for(P=Pe;P<=Be;++P){for(j=m+P*u,fe=0,X=0;X<E&&0==(We=g[j]-Ke[fe]);++X)fe+=C,j+=S;if(We<0){if(P!==Pe)for(te=u*P,ae=u*Pe,me=m,X=0;X<E;++X)O=g[j=te+me],g[j]=g[U=ae+me],g[U]=O,me+=M;++Pe}else{for(j=m+P*u,fe=0,X=0;X<E&&0==(Je=g[j]-nt[fe]);++X)fe+=C,j+=S;if(Je>0)for(;;){for(j=m+Be*u,fe=0,X=0;X<E&&0==(ut=g[j]-nt[fe]);++X)fe+=C,j+=S;if(!(ut>0)){for(j=m+Be*u,fe=0,X=0;X<E&&0==(ut=g[j]-Ke[fe]);++X)fe+=C,j+=S;if(ut<0){for(te=u*P,ae=u*Pe,J=u*Be,me=m,X=0;X<E;++X)$=J+me,O=g[j=te+me],g[j]=g[U=ae+me],g[U]=g[$],g[$]=O,me+=M;++Pe,--Be}else{for(te=u*P,ae=u*Be,me=m,X=0;X<E;++X)O=g[j=te+me],g[j]=g[U=ae+me],g[U]=O,me+=M;--Be}break}if(--Be<P)break}}}for(te=u*p,ae=u*(Pe-1),fe=0,me=m,X=0;X<E;++X)g[j=te+me]=g[U=ae+me],g[U]=Ke[fe],++fe,me+=M;for(te=u*f,ae=u*(Be+1),fe=0,me=m,X=0;X<E;++X)g[j=te+me]=g[U=ae+me],g[U]=nt[fe],++fe,me+=M;if(Pe-2-p<=32?v(p,Pe-2,g,m,u,w,c,E,M,S,C):d(p,Pe-2,g,m,u,w,c,E,M,S,C),f-(Be+2)<=32?v(Be+2,f,g,m,u,w,c,E,M,S,C):d(Be+2,f,g,m,u,w,c,E,M,S,C),qe)return s(Ke),void s(nt);if(Pe<we&&Be>ye){e:for(;;){for(j=m+Pe*u,fe=0,me=m,X=0;X<E;++X){if(g[j]!==Ke[fe])break e;++fe,j+=M}++Pe}e:for(;;){for(j=m+Be*u,fe=0,me=m,X=0;X<E;++X){if(g[j]!==nt[fe])break e;++fe,j+=M}--Be}for(P=Pe;P<=Be;++P){for(j=m+P*u,fe=0,X=0;X<E&&0==(We=g[j]-Ke[fe]);++X)fe+=C,j+=S;if(0===We){if(P!==Pe)for(te=u*P,ae=u*Pe,me=m,X=0;X<E;++X)O=g[j=te+me],g[j]=g[U=ae+me],g[U]=O,me+=M;++Pe}else{for(j=m+P*u,fe=0,X=0;X<E&&0==(Je=g[j]-nt[fe]);++X)fe+=C,j+=S;if(0===Je)for(;;){for(j=m+Be*u,fe=0,X=0;X<E&&0==(ut=g[j]-nt[fe]);++X)fe+=C,j+=S;if(0!==ut){for(j=m+Be*u,fe=0,X=0;X<E&&0==(ut=g[j]-Ke[fe]);++X)fe+=C,j+=S;if(ut<0){for(te=u*P,ae=u*Pe,J=u*Be,me=m,X=0;X<E;++X)$=J+me,O=g[j=te+me],g[j]=g[U=ae+me],g[U]=g[$],g[$]=O,me+=M;++Pe,--Be}else{for(te=u*P,ae=u*Be,me=m,X=0;X<E;++X)O=g[j=te+me],g[j]=g[U=ae+me],g[U]=O,me+=M;--Be}break}if(--Be<P)break}}}}s(Ke),s(nt),Be-Pe<=32?v(Pe,Be,g,m,u,w,c,E,M,S,C):d(Pe,Be,g,m,u,w,c,E,M,S,C)}}},i={"uint32,1,0":function(v,h){return function(s){var d=s.data,p=0|s.offset,f=s.shape,g=s.stride,m=0|g[0],u=0|f[0],w=0|g[1],c=0|f[1],E=w,M=w;u<=32?v(0,u-1,d,p,m,w,u,c,E,M,1):h(0,u-1,d,p,m,w,u,c,E,M,1)}}};T.exports=function(v,h){var g,m,u,w,c,s=[h,v].join(","),d=i[s],p=(g=v,u=o(m=h),w=[m,g].join(","),c=a[w],u?c(u[0],u[1]):c()),f=function(g,m,u){var w=o(m),c=[m,g].join(","),E=l[c];return g.length>1&&w?E(u,w[0],w[1]):E(u)}(v,h,p);return d(p,f)}},{"typedarray-pool":308}],258:[function(b,T,_){"use strict";var e=b("./lib/compile_sort.js"),o={};T.exports=function(a){var l=a.order,i=a.dtype,v=[l,i].join(":"),h=o[v];return h||(o[v]=h=e(l,i)),h(a),a}},{"./lib/compile_sort.js":257}],259:[function(b,T,_){var e=b("is-buffer"),o="undefined"!=typeof Float64Array;function a(s,d){return s[0]-d[0]}function l(){var s,d=this.stride,p=new Array(d.length);for(s=0;s<p.length;++s)p[s]=[Math.abs(d[s]),s];p.sort(a);var f=new Array(p.length);for(s=0;s<f.length;++s)f[s]=p[s][1];return f}var i={T:function(s){function d(f){this.data=f}var p=d.prototype;return p.dtype=s,p.index=function(){return-1},p.size=0,p.dimension=-1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new d(this.data)},p.get=p.set=function(){},p.pick=function(){return null},function(f){return new d(f)}},0:function(s,d){function p(g,m){this.data=g,this.offset=m}var f=p.prototype;return f.dtype=s,f.index=function(){return this.offset},f.dimension=0,f.size=1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new p(this.data,this.offset)},f.pick=function(){return d(this.data)},f.valueOf=f.get=function(){return"generic"===s?this.data.get(this.offset):this.data[this.offset]},f.set=function(g){return"generic"===s?this.data.set(this.offset,g):this.data[this.offset]=g},function(g,m,u,w){return new p(g,w)}},1:function(s,d,p){function f(m,u,w,c){this.data=m,this.shape=[u],this.stride=[w],this.offset=0|c}var g=f.prototype;return g.dtype=s,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(m,u){return"generic"===s?this.data.set(this.offset+this.stride[0]*m,u):this.data[this.offset+this.stride[0]*m]=u},g.get=function(m){return"generic"===s?this.data.get(this.offset+this.stride[0]*m):this.data[this.offset+this.stride[0]*m]},g.index=function(m){return this.offset+this.stride[0]*m},g.hi=function(m){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,this.stride[0],this.offset)},g.lo=function(m){var u=this.offset,w=0,c=this.shape[0],E=this.stride[0];return"number"==typeof m&&m>=0&&(u+=E*(w=0|m),c-=w),new f(this.data,c,E,u)},g.step=function(m){var u=this.shape[0],w=this.stride[0],c=this.offset,E=0,M=Math.ceil;return"number"==typeof m&&((E=0|m)<0?(c+=w*(u-1),u=M(-u/E)):u=M(u/E),w*=E),new f(this.data,u,w,c)},g.transpose=function(m){return new f(this.data,this.shape[m=void 0===m?0:0|m],this.stride[m],this.offset)},g.pick=function(m){var u=[],w=[],c=this.offset;return"number"==typeof m&&m>=0?c=c+this.stride[0]*m|0:(u.push(this.shape[0]),w.push(this.stride[0])),(0,d[u.length+1])(this.data,u,w,c)},function(m,u,w,c){return new f(m,u[0],w[0],c)}},2:function(s,d,p){function f(m,u,w,c,E,M){this.data=m,this.shape=[u,w],this.stride=[c,E],this.offset=0|M}var g=f.prototype;return g.dtype=s,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(m,u,w){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u,w):this.data[this.offset+this.stride[0]*m+this.stride[1]*u]=w},g.get=function(m,u){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u):this.data[this.offset+this.stride[0]*m+this.stride[1]*u]},g.index=function(m,u){return this.offset+this.stride[0]*m+this.stride[1]*u},g.hi=function(m,u){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,this.stride[0],this.stride[1],this.offset)},g.lo=function(m,u){var w=this.offset,c=0,E=this.shape[0],M=this.shape[1],S=this.stride[0],C=this.stride[1];return"number"==typeof m&&m>=0&&(w+=S*(c=0|m),E-=c),"number"==typeof u&&u>=0&&(w+=C*(c=0|u),M-=c),new f(this.data,E,M,S,C,w)},g.step=function(m,u){var w=this.shape[0],c=this.shape[1],E=this.stride[0],M=this.stride[1],S=this.offset,C=0,O=Math.ceil;return"number"==typeof m&&((C=0|m)<0?(S+=E*(w-1),w=O(-w/C)):w=O(w/C),E*=C),"number"==typeof u&&((C=0|u)<0?(S+=M*(c-1),c=O(-c/C)):c=O(c/C),M*=C),new f(this.data,w,c,E,M,S)},g.transpose=function(m,u){var w=this.shape,c=this.stride;return new f(this.data,w[m=void 0===m?0:0|m],w[u=void 0===u?1:0|u],c[m],c[u],this.offset)},g.pick=function(m,u){var w=[],c=[],E=this.offset;return"number"==typeof m&&m>=0?E=E+this.stride[0]*m|0:(w.push(this.shape[0]),c.push(this.stride[0])),"number"==typeof u&&u>=0?E=E+this.stride[1]*u|0:(w.push(this.shape[1]),c.push(this.stride[1])),(0,d[w.length+1])(this.data,w,c,E)},function(m,u,w,c){return new f(m,u[0],u[1],w[0],w[1],c)}},3:function(s,d,p){function f(m,u,w,c,E,M,S,C){this.data=m,this.shape=[u,w,c],this.stride=[E,M,S],this.offset=0|C}var g=f.prototype;return g.dtype=s,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var m=Math.abs(this.stride[0]),u=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return m>u?u>w?[2,1,0]:m>w?[1,2,0]:[1,0,2]:m>w?[2,0,1]:w>u?[0,1,2]:[0,2,1]}}),g.set=function(m,u,w,c){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w,c):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w]=c},g.get=function(m,u,w){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w]},g.index=function(m,u,w){return this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w},g.hi=function(m,u,w){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof w||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(m,u,w){var c=this.offset,E=0,M=this.shape[0],S=this.shape[1],C=this.shape[2],O=this.stride[0],I=this.stride[1],N=this.stride[2];return"number"==typeof m&&m>=0&&(c+=O*(E=0|m),M-=E),"number"==typeof u&&u>=0&&(c+=I*(E=0|u),S-=E),"number"==typeof w&&w>=0&&(c+=N*(E=0|w),C-=E),new f(this.data,M,S,C,O,I,N,c)},g.step=function(m,u,w){var c=this.shape[0],E=this.shape[1],M=this.shape[2],S=this.stride[0],C=this.stride[1],O=this.stride[2],I=this.offset,N=0,F=Math.ceil;return"number"==typeof m&&((N=0|m)<0?(I+=S*(c-1),c=F(-c/N)):c=F(c/N),S*=N),"number"==typeof u&&((N=0|u)<0?(I+=C*(E-1),E=F(-E/N)):E=F(E/N),C*=N),"number"==typeof w&&((N=0|w)<0?(I+=O*(M-1),M=F(-M/N)):M=F(M/N),O*=N),new f(this.data,c,E,M,S,C,O,I)},g.transpose=function(m,u,w){var c=this.shape,E=this.stride;return new f(this.data,c[m=void 0===m?0:0|m],c[u=void 0===u?1:0|u],c[w=void 0===w?2:0|w],E[m],E[u],E[w],this.offset)},g.pick=function(m,u,w){var c=[],E=[],M=this.offset;return"number"==typeof m&&m>=0?M=M+this.stride[0]*m|0:(c.push(this.shape[0]),E.push(this.stride[0])),"number"==typeof u&&u>=0?M=M+this.stride[1]*u|0:(c.push(this.shape[1]),E.push(this.stride[1])),"number"==typeof w&&w>=0?M=M+this.stride[2]*w|0:(c.push(this.shape[2]),E.push(this.stride[2])),(0,d[c.length+1])(this.data,c,E,M)},function(m,u,w,c){return new f(m,u[0],u[1],u[2],w[0],w[1],w[2],c)}},4:function(s,d,p){function f(m,u,w,c,E,M,S,C,O,I){this.data=m,this.shape=[u,w,c,E],this.stride=[M,S,C,O],this.offset=0|I}var g=f.prototype;return g.dtype=s,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(m,u,w,c,E){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c,E):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c]=E},g.get=function(m,u,w,c){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c]},g.index=function(m,u,w,c){return this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c},g.hi=function(m,u,w,c){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof c||c<0?this.shape[3]:0|c,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(m,u,w,c){var E=this.offset,M=0,S=this.shape[0],C=this.shape[1],O=this.shape[2],I=this.shape[3],N=this.stride[0],F=this.stride[1],L=this.stride[2],P=this.stride[3];return"number"==typeof m&&m>=0&&(E+=N*(M=0|m),S-=M),"number"==typeof u&&u>=0&&(E+=F*(M=0|u),C-=M),"number"==typeof w&&w>=0&&(E+=L*(M=0|w),O-=M),"number"==typeof c&&c>=0&&(E+=P*(M=0|c),I-=M),new f(this.data,S,C,O,I,N,F,L,P,E)},g.step=function(m,u,w,c){var E=this.shape[0],M=this.shape[1],S=this.shape[2],C=this.shape[3],O=this.stride[0],I=this.stride[1],N=this.stride[2],F=this.stride[3],L=this.offset,P=0,j=Math.ceil;return"number"==typeof m&&((P=0|m)<0?(L+=O*(E-1),E=j(-E/P)):E=j(E/P),O*=P),"number"==typeof u&&((P=0|u)<0?(L+=I*(M-1),M=j(-M/P)):M=j(M/P),I*=P),"number"==typeof w&&((P=0|w)<0?(L+=N*(S-1),S=j(-S/P)):S=j(S/P),N*=P),"number"==typeof c&&((P=0|c)<0?(L+=F*(C-1),C=j(-C/P)):C=j(C/P),F*=P),new f(this.data,E,M,S,C,O,I,N,F,L)},g.transpose=function(m,u,w,c){var E=this.shape,M=this.stride;return new f(this.data,E[m=void 0===m?0:0|m],E[u=void 0===u?1:0|u],E[w=void 0===w?2:0|w],E[c=void 0===c?3:0|c],M[m],M[u],M[w],M[c],this.offset)},g.pick=function(m,u,w,c){var E=[],M=[],S=this.offset;return"number"==typeof m&&m>=0?S=S+this.stride[0]*m|0:(E.push(this.shape[0]),M.push(this.stride[0])),"number"==typeof u&&u>=0?S=S+this.stride[1]*u|0:(E.push(this.shape[1]),M.push(this.stride[1])),"number"==typeof w&&w>=0?S=S+this.stride[2]*w|0:(E.push(this.shape[2]),M.push(this.stride[2])),"number"==typeof c&&c>=0?S=S+this.stride[3]*c|0:(E.push(this.shape[3]),M.push(this.stride[3])),(0,d[E.length+1])(this.data,E,M,S)},function(m,u,w,c){return new f(m,u[0],u[1],u[2],u[3],w[0],w[1],w[2],w[3],c)}},5:function(s,d,p){function f(m,u,w,c,E,M,S,C,O,I,N,F){this.data=m,this.shape=[u,w,c,E,M],this.stride=[S,C,O,I,N],this.offset=0|F}var g=f.prototype;return g.dtype=s,g.dimension=5,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(m,u,w,c,E,M){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*E,M):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*E]=M},g.get=function(m,u,w,c,E){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*E):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*E]},g.index=function(m,u,w,c,E){return this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*E},g.hi=function(m,u,w,c,E){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof c||c<0?this.shape[3]:0|c,"number"!=typeof E||E<0?this.shape[4]:0|E,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},g.lo=function(m,u,w,c,E){var M=this.offset,S=0,C=this.shape[0],O=this.shape[1],I=this.shape[2],N=this.shape[3],F=this.shape[4],L=this.stride[0],P=this.stride[1],j=this.stride[2],U=this.stride[3],$=this.stride[4];return"number"==typeof m&&m>=0&&(M+=L*(S=0|m),C-=S),"number"==typeof u&&u>=0&&(M+=P*(S=0|u),O-=S),"number"==typeof w&&w>=0&&(M+=j*(S=0|w),I-=S),"number"==typeof c&&c>=0&&(M+=U*(S=0|c),N-=S),"number"==typeof E&&E>=0&&(M+=$*(S=0|E),F-=S),new f(this.data,C,O,I,N,F,L,P,j,U,$,M)},g.step=function(m,u,w,c,E){var M=this.shape[0],S=this.shape[1],C=this.shape[2],O=this.shape[3],I=this.shape[4],N=this.stride[0],F=this.stride[1],L=this.stride[2],P=this.stride[3],j=this.stride[4],U=this.offset,$=0,X=Math.ceil;return"number"==typeof m&&(($=0|m)<0?(U+=N*(M-1),M=X(-M/$)):M=X(M/$),N*=$),"number"==typeof u&&(($=0|u)<0?(U+=F*(S-1),S=X(-S/$)):S=X(S/$),F*=$),"number"==typeof w&&(($=0|w)<0?(U+=L*(C-1),C=X(-C/$)):C=X(C/$),L*=$),"number"==typeof c&&(($=0|c)<0?(U+=P*(O-1),O=X(-O/$)):O=X(O/$),P*=$),"number"==typeof E&&(($=0|E)<0?(U+=j*(I-1),I=X(-I/$)):I=X(I/$),j*=$),new f(this.data,M,S,C,O,I,N,F,L,P,j,U)},g.transpose=function(m,u,w,c,E){var M=this.shape,S=this.stride;return new f(this.data,M[m=void 0===m?0:0|m],M[u=void 0===u?1:0|u],M[w=void 0===w?2:0|w],M[c=void 0===c?3:0|c],M[E=void 0===E?4:0|E],S[m],S[u],S[w],S[c],S[E],this.offset)},g.pick=function(m,u,w,c,E){var M=[],S=[],C=this.offset;return"number"==typeof m&&m>=0?C=C+this.stride[0]*m|0:(M.push(this.shape[0]),S.push(this.stride[0])),"number"==typeof u&&u>=0?C=C+this.stride[1]*u|0:(M.push(this.shape[1]),S.push(this.stride[1])),"number"==typeof w&&w>=0?C=C+this.stride[2]*w|0:(M.push(this.shape[2]),S.push(this.stride[2])),"number"==typeof c&&c>=0?C=C+this.stride[3]*c|0:(M.push(this.shape[3]),S.push(this.stride[3])),"number"==typeof E&&E>=0?C=C+this.stride[4]*E|0:(M.push(this.shape[4]),S.push(this.stride[4])),(0,d[M.length+1])(this.data,M,S,C)},function(m,u,w,c){return new f(m,u[0],u[1],u[2],u[3],u[4],w[0],w[1],w[2],w[3],w[4],c)}}};function v(s,d){var p=-1===d?"T":String(d),f=i[p];return-1===d?f(s):0===d?f(s,h[s][0]):f(s,h[s],l)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};T.exports=function(s,d,p,f){if(void 0===s)return(0,h.array[0])([]);"number"==typeof s&&(s=[s]),void 0===d&&(d=[s.length]);var g=d.length;if(void 0===p){p=new Array(g);for(var m=g-1,u=1;m>=0;--m)p[m]=u,u*=d[m]}if(void 0===f)for(f=0,m=0;m<g;++m)p[m]<0&&(f-=(d[m]-1)*p[m]);for(var w=function(E){if(e(E))return"buffer";if(o)switch(Object.prototype.toString.call(E)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(E)?"array":"generic"}(s),c=h[w];c.length<=g+1;)c.push(v(w,c.length-1));return(0,c[g+1])(s,d,p,f)}},{"is-buffer":237}],260:[function(b,T,_){"use strict";var e=b("double-bits"),o=Math.pow(2,-1074);T.exports=function(a,l){if(isNaN(a)||isNaN(l))return NaN;if(a===l)return a;if(0===a)return l<0?-o:o;var i=e.hi(a),v=e.lo(a);return l>a==a>0?v===-1>>>0?(i+=1,v=0):v+=1:0===v?(v=-1>>>0,i-=1):v-=1,e.pack(v,i)}},{"double-bits":64}],261:[function(b,T,_){_.vertexNormals=function(e,o,a){for(var l=o.length,i=new Array(l),v=void 0===a?1e-6:a,h=0;h<l;++h)i[h]=[0,0,0];for(h=0;h<e.length;++h)for(var s=e[h],p=s[s.length-1],f=s[0],g=0;g<s.length;++g){for(var m=o[p],u=o[p=f],w=o[f=s[(g+1)%s.length]],c=new Array(3),E=0,M=new Array(3),S=0,C=0;C<3;++C)c[C]=m[C]-u[C],E+=c[C]*c[C],M[C]=w[C]-u[C],S+=M[C]*M[C];if(E*S>v){var O=i[p],I=1/Math.sqrt(E*S);for(C=0;C<3;++C){var N=(C+1)%3,F=(C+2)%3;O[C]+=I*(M[N]*c[F]-M[F]*c[N])}}}for(h=0;h<l;++h){O=i[h];var L=0;for(C=0;C<3;++C)L+=O[C]*O[C];if(L>v)for(I=1/Math.sqrt(L),C=0;C<3;++C)O[C]*=I;else for(C=0;C<3;++C)O[C]=0}return i},_.faceNormals=function(e,o,a){for(var l=e.length,i=new Array(l),v=void 0===a?1e-6:a,h=0;h<l;++h){for(var s=e[h],d=new Array(3),p=0;p<3;++p)d[p]=o[s[p]];var f=new Array(3),g=new Array(3);for(p=0;p<3;++p)f[p]=d[1][p]-d[0][p],g[p]=d[2][p]-d[0][p];var m=new Array(3),u=0;for(p=0;p<3;++p){var w=(p+1)%3,c=(p+2)%3;m[p]=f[w]*g[c]-f[c]*g[w],u+=m[p]*m[p]}for(u=u>v?1/Math.sqrt(u):0,p=0;p<3;++p)m[p]*=u;i[h]=m}return i}},{}],262:[function(b,T,_){"use strict";T.exports=function(e,o,a,l,i,v,h,s,d,p){var f=o+v+p;if(g>0){var g=Math.sqrt(f+1);e[0]=.5*(h-d)/g,e[1]=.5*(s-l)/g,e[2]=.5*(a-v)/g,e[3]=.5*g}else{var m=Math.max(o,v,p);g=Math.sqrt(2*m-f+1),o>=m?(e[0]=.5*g,e[1]=.5*(i+a)/g,e[2]=.5*(s+l)/g,e[3]=.5*(h-d)/g):v>=m?(e[0]=.5*(a+i)/g,e[1]=.5*g,e[2]=.5*(d+h)/g,e[3]=.5*(s-l)/g):(e[0]=.5*(l+s)/g,e[1]=.5*(h+d)/g,e[2]=.5*g,e[3]=.5*(a-i)/g)}return e}},{}],263:[function(b,T,_){"use strict";T.exports=function(f){var g=(f=f||{}).center||[0,0,0],m=f.rotation||[0,0,0,1],u=f.radius||1;g=[].slice.call(g,0,3),s(m=[].slice.call(m,0,4),m);var w=new d(m,g,Math.log(u));return w.setDistanceLimits(f.zoomMin,f.zoomMax),("eye"in f||"up"in f)&&w.lookAt(0,f.eye,f.center,f.up),w};var e=b("filtered-vector"),o=b("gl-mat4/lookAt"),a=b("gl-mat4/fromQuat"),l=b("gl-mat4/invert"),i=b("./lib/quatFromFrame");function v(f,g,m){return Math.sqrt(Math.pow(f,2)+Math.pow(g,2)+Math.pow(m,2))}function h(f,g,m,u){return Math.sqrt(Math.pow(f,2)+Math.pow(g,2)+Math.pow(m,2)+Math.pow(u,2))}function s(f,g){var m=g[0],u=g[1],w=g[2],c=g[3],E=h(m,u,w,c);E>1e-6?(f[0]=m/E,f[1]=u/E,f[2]=w/E,f[3]=c/E):(f[0]=f[1]=f[2]=0,f[3]=1)}function d(f,g,m){this.radius=e([m]),this.center=e(g),this.rotation=e(f),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var p=d.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(f){this.radius.curve(f),this.center.curve(f),this.rotation.curve(f);var g=this.computedRotation;s(g,g);var m=this.computedMatrix;a(m,g);var u=this.computedCenter,w=this.computedEye,c=this.computedUp,E=Math.exp(this.computedRadius[0]);w[0]=u[0]+E*m[2],w[1]=u[1]+E*m[6],w[2]=u[2]+E*m[10],c[0]=m[1],c[1]=m[5],c[2]=m[9];for(var M=0;M<3;++M){for(var S=0,C=0;C<3;++C)S+=m[M+4*C]*w[C];m[12+M]=-S}},p.getMatrix=function(f,g){this.recalcMatrix(f);var m=this.computedMatrix;if(g){for(var u=0;u<16;++u)g[u]=m[u];return g}return m},p.idle=function(f){this.center.idle(f),this.radius.idle(f),this.rotation.idle(f)},p.flush=function(f){this.center.flush(f),this.radius.flush(f),this.rotation.flush(f)},p.pan=function(f,g,m,u){g=g||0,m=m||0,u=u||0,this.recalcMatrix(f);var w=this.computedMatrix,c=w[1],E=w[5],M=w[9],S=v(c,E,M),C=w[0],O=w[4],I=w[8],N=C*(c/=S)+O*(E/=S)+I*(M/=S),F=v(C-=c*N,O-=E*N,I-=M*N),L=w[2],P=w[6],j=w[10],U=L*c+P*E+j*M,$=L*(C/=F)+P*(O/=F)+j*(I/=F),X=v(L-=U*c+$*C,P-=U*E+$*O,j-=U*M+$*I);L/=X,P/=X,j/=X,this.center.move(f,C*g+c*m,O*g+E*m,I*g+M*m);var ee=Math.exp(this.computedRadius[0]);ee=Math.max(1e-4,ee+u),this.radius.set(f,Math.log(ee))},p.rotate=function(f,g,m,u){this.recalcMatrix(f);var w=this.computedMatrix,I=w[2],N=w[6],F=w[10],L=(g=g||0)*w[0]+(m=m||0)*w[1],P=g*w[4]+m*w[5],j=g*w[8]+m*w[9],U=-(N*j-F*P),$=-(F*L-I*j),X=-(I*P-N*L),te=Math.sqrt(Math.max(0,1-Math.pow(U,2)-Math.pow($,2)-Math.pow(X,2))),ae=h(U,$,X,te);ae>1e-6?(U/=ae,$/=ae,X/=ae,te/=ae):(U=$=X=0,te=1);var J=this.computedRotation,ee=J[0],se=J[1],G=J[2],H=J[3],Y=ee*te+H*U+se*X-G*$,oe=se*te+H*$+G*U-ee*X,W=G*te+H*X+ee*$-se*U,ne=H*te-ee*U-se*$-G*X;if(u){U=I,$=N,X=F;var re=Math.sin(u)/v(U,$,X);U*=re,$*=re,X*=re,ne=ne*(te=Math.cos(g))-(Y=Y*te+ne*U+oe*X-W*$)*U-(oe=oe*te+ne*$+W*U-Y*X)*$-(W=W*te+ne*X+Y*$-oe*U)*X}var ce=h(Y,oe,W,ne);ce>1e-6?(Y/=ce,oe/=ce,W/=ce,ne/=ce):(Y=oe=W=0,ne=1),this.rotation.set(f,Y,oe,W,ne)},p.lookAt=function(f,g,m,u){this.recalcMatrix(f);var w=this.computedMatrix;o(w,g=g||this.computedEye,m=m||this.computedCenter,u=u||this.computedUp);var c=this.computedRotation;i(c,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),s(c,c),this.rotation.set(f,c[0],c[1],c[2],c[3]);for(var E=0,M=0;M<3;++M)E+=Math.pow(m[M]-g[M],2);this.radius.set(f,.5*Math.log(Math.max(E,1e-6))),this.center.set(f,m[0],m[1],m[2])},p.translate=function(f,g,m,u){this.center.move(f,g||0,m||0,u||0)},p.setMatrix=function(f,g){var m=this.computedRotation;i(m,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),s(m,m),this.rotation.set(f,m[0],m[1],m[2],m[3]);var u=this.computedMatrix;l(u,g);var w=u[15];if(Math.abs(w)>1e-6){var c=u[12]/w,E=u[13]/w,M=u[14]/w;this.recalcMatrix(f);var S=Math.exp(this.computedRadius[0]);this.center.set(f,c-u[2]*S,E-u[6]*S,M-u[10]*S),this.radius.idle(f)}else this.center.idle(f),this.radius.idle(f)},p.setDistance=function(f,g){g>0&&this.radius.set(f,Math.log(g))},p.setDistanceLimits=function(f,g){f=f>0?Math.log(f):-1/0,g=g>0?Math.log(g):1/0,g=Math.max(g,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=g},p.getDistanceLimits=function(f){var g=this.radius.bounds;return f?(f[0]=Math.exp(g[0][0]),f[1]=Math.exp(g[1][0]),f):[Math.exp(g[0][0]),Math.exp(g[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(f){var g=this.lastT(),m=f.center;m&&this.center.set(g,m[0],m[1],m[2]);var u=f.rotation;u&&this.rotation.set(g,u[0],u[1],u[2],u[3]);var w=f.distance;w&&w>0&&this.radius.set(g,Math.log(w)),this.setDistanceLimits(f.zoomMin,f.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(b,T,_){"use strict";var e=b("repeat-string");T.exports=function(o,a,l){return e(l=void 0!==l?l+"":" ",a)+o}},{"repeat-string":277}],265:[function(b,T,_){T.exports=function(e,o){o||(o=[0,""]),e=String(e);var a=parseFloat(e,10);return o[0]=a,o[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",o}},{}],266:[function(b,T,_){"use strict";T.exports=function(o,a){for(var l=0|a.length,i=o.length,v=[new Array(l),new Array(l)],h=0;h<l;++h)v[0][h]=[],v[1][h]=[];for(h=0;h<i;++h){var s=o[h];v[0][s[0]].push(s),v[1][s[1]].push(s)}var M,d=[];for(h=0;h<l;++h)v[0][h].length+v[1][h].length===0&&d.push([h]);function p(E,M){var S=v[M][E[M]];S.splice(S.indexOf(E),1)}function f(E,M,S){for(var C,O,I,N=0;N<2;++N)if(v[N][M].length>0){C=v[N][M][0],I=N;break}O=C[1^I];for(var F=0;F<2;++F)for(var L=v[F][M],P=0;P<L.length;++P){var j=L[P],U=j[1^F];e(a[E],a[M],a[O],a[U])>0&&(C=j,O=U,I=F)}return S||C&&p(C,I),O}function g(E,M){var S=v[M][E][0],C=[E];p(S,M);for(var O=S[1^M];;){for(;O!==E;)C.push(O),O=f(C[C.length-2],O,!1);if(v[0][E].length+v[1][E].length===0)break;var I=C[C.length-1],N=E,F=C[1],L=f(I,N,!0);if(e(a[I],a[N],a[F],a[L])<0)break;C.push(E),O=f(I,N)}return C}for(h=0;h<l;++h)for(var u=0;u<2;++u){for(var w=[];v[u][h].length>0;){var c=g(h,u);(M=c)[1]===M[M.length-1]?w.push.apply(w,c):(w.length>0&&d.push(w),w=c)}w.length>0&&d.push(w)}return d};var e=b("compare-angle")},{"compare-angle":54}],267:[function(b,T,_){"use strict";T.exports=function(o,a){for(var l=e(o,a.length),i=new Array(a.length),v=new Array(a.length),h=[],s=0;s<a.length;++s){var d=l[s].length;v[s]=d,i[s]=!0,d<=1&&h.push(s)}for(;h.length>0;){var p=h.pop();i[p]=!1;var f=l[p];for(s=0;s<f.length;++s){var g=f[s];0==--v[g]&&h.push(g)}}var m=new Array(a.length),u=[];for(s=0;s<a.length;++s)i[s]?(m[s]=p=u.length,u.push(a[s])):m[s]=-1;var w=[];for(s=0;s<o.length;++s){var c=o[s];i[c[0]]&&i[c[1]]&&w.push([m[c[0]],m[c[1]]])}return[w,u]};var e=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(b,T,_){"use strict";T.exports=function(d,p){for(var f=h(d,p),g=(p=f[1]).length,m=e(d=f[0],p.length),u=0;u<g;++u)if(m[u].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=o(d,p),c=(w=w.filter(function(pe){for(var we=pe.length,ye=[0],Te=0;Te<we;++Te){var Le=p[pe[Te]],Oe=p[pe[(Te+1)%we]],Re=l(-Le[0],Le[1]),Ve=l(-Le[0],Oe[1]),_e=l(Oe[0],Le[1]),Ae=l(Oe[0],Oe[1]);ye=i(ye,i(i(Re,Ve),i(_e,Ae)))}return ye[ye.length-1]>0})).length,E=new Array(c),M=new Array(c);for(u=0;u<c;++u){E[u]=u;var S=new Array(c),C=w[u].map(function(pe){return p[pe]}),O=a([C]),I=0;e:for(var N=0;N<c;++N)if(S[N]=0,u!==N){for(var F=(fe=w[N]).length,L=0;L<F;++L){var P=O(p[fe[L]]);if(0!==P){P<0&&(S[N]=1,I+=1);continue e}}S[N]=1,I+=1}M[u]=[I,u,S]}for(M.sort(function(pe,we){return we[0]-pe[0]}),u=0;u<c;++u){var j=(S=M[u])[1],U=S[2];for(N=0;N<c;++N)U[N]&&(E[N]=j)}var $=function(pe){for(var we=new Array(pe),ye=0;ye<pe;++ye)we[ye]=[];return we}(c);for(u=0;u<c;++u)$[u].push(E[u]),$[E[u]].push(u);var X={},te=s(g,!1);for(u=0;u<c;++u)for(F=(fe=w[u]).length,N=0;N<F;++N){var ae=fe[N],J=fe[(N+1)%F],ee=Math.min(ae,J)+":"+Math.max(ae,J);if(ee in X){var se=X[ee];$[se].push(u),$[u].push(se),te[ae]=te[J]=!0}else X[ee]=u}function G(pe){for(var we=pe.length,ye=0;ye<we;++ye)if(!te[pe[ye]])return!1;return!0}var H=[],Y=s(c,-1);for(u=0;u<c;++u)E[u]!==u||G(w[u])?Y[u]=-1:(H.push(u),Y[u]=0);for(f=[];H.length>0;){var oe=H.pop(),W=$[oe];v(W,function(pe,we){return pe-we});var ne,re=W.length,ce=Y[oe];if(0===ce){var fe=w[oe];ne=[fe]}for(u=0;u<re;++u){var me=W[u];Y[me]>=0||(Y[me]=1^ce,H.push(me),0===ce&&(G(fe=w[me])||(fe.reverse(),ne.push(fe))))}0===ce&&f.push(ne)}return f};var e=b("edges-to-adjacency-list"),o=b("planar-dual"),a=b("point-in-big-polygon"),l=b("two-product"),i=b("robust-sum"),v=b("uniq"),h=b("./lib/trim-leaves");function s(d,p){for(var f=new Array(d),g=0;g<d;++g)f[g]=p;return f}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(b,T,_){T.exports=function(s){for(var d=s.length,p=[],f=[],g=0;g<d;++g)for(var m=s[g],u=m.length,w=u-1,c=0;c<u;w=c++){var E=m[w],M=m[c];E[0]===M[0]?f.push([E,M]):p.push([E,M])}if(0===p.length)return 0===f.length?h:(S=v(f),function(I){return S(I[0],I[1])?0:1});var S,I,N,C=o(p),O=(I=C.slabs,N=C.coordinates,function(F){var L=l.le(N,F[0]);if(L<0)return 1;var P=I[L];if(!P){if(!(L>0&&N[L]===F[0]))return 1;P=I[L-1]}for(var j=1;P;){var U=P.key,$=e(F,U[0],U[1]);if(U[0][0]<U[1][0])if($<0)P=P.left;else{if(!($>0))return 0;j=-1,P=P.right}else if($>0)P=P.left;else{if(!($<0))return 0;j=1,P=P.right}}return j});return 0===f.length?O:function(I,N){return function(F){return I(F[0],F[1])?0:N(F)}}(v(f),O)};var e=b("robust-orientation")[3],o=b("slab-decomposition"),a=b("interval-tree-1d"),l=b("binary-search-bounds");function i(){return!0}function v(s){for(var d={},p=0;p<s.length;++p){var f=s[p],g=f[0][0],m=f[0][1],u=f[1][1],w=[Math.min(m,u),Math.max(m,u)];g in d?d[g].push(w):d[g]=[w]}var S,c={},E=Object.keys(d);for(p=0;p<E.length;++p)c[E[p]]=a(d[E[p]]);return S=c,function(C,O){var I=S[C];return!!I&&!!I.queryPoint(O,i)}}function h(s){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(b,T,_){"use strict";var e=new Float64Array(4),o=new Float64Array(4),a=new Float64Array(4);T.exports=function(l,i,v,h,s){e.length<h.length&&(e=new Float64Array(h.length),o=new Float64Array(h.length),a=new Float64Array(h.length));for(var d=0;d<h.length;++d)e[d]=l[d]-h[d],o[d]=i[d]-l[d],a[d]=v[d]-l[d];var p=0,f=0,g=0,m=0,u=0,w=0;for(d=0;d<h.length;++d){var c=o[d],E=a[d],M=e[d];p+=c*c,f+=c*E,g+=E*E,m+=M*c,u+=M*E,w+=M*M}var S,C,O,I,N,F=Math.abs(p*g-f*f),L=f*u-g*m,P=f*m-p*u;if(L+P<=F)if(L<0)P<0&&m<0?(P=0,-m>=p?(L=1,S=p+2*m+w):S=m*(L=-m/p)+w):(L=0,u>=0?(P=0,S=w):-u>=g?(P=1,S=g+2*u+w):S=u*(P=-u/g)+w);else if(P<0)P=0,m>=0?(L=0,S=w):-m>=p?(L=1,S=p+2*m+w):S=m*(L=-m/p)+w;else{var j=1/F;S=(L*=j)*(p*L+f*(P*=j)+2*m)+P*(f*L+g*P+2*u)+w}else L<0?(O=g+u)>(C=f+m)?(I=O-C)>=(N=p-2*f+g)?(L=1,P=0,S=p+2*m+w):S=(L=I/N)*(p*L+f*(P=1-L)+2*m)+P*(f*L+g*P+2*u)+w:(L=0,O<=0?(P=1,S=g+2*u+w):u>=0?(P=0,S=w):S=u*(P=-u/g)+w):P<0?(O=p+m)>(C=f+u)?(I=O-C)>=(N=p-2*f+g)?(P=1,L=0,S=g+2*u+w):S=(L=1-(P=I/N))*(p*L+f*P+2*m)+P*(f*L+g*P+2*u)+w:(P=0,O<=0?(L=1,S=p+2*m+w):m>=0?(L=0,S=w):S=m*(L=-m/p)+w):(I=g+u-f-m)<=0?(L=0,P=1,S=g+2*u+w):I>=(N=p-2*f+g)?(L=1,P=0,S=p+2*m+w):S=(L=I/N)*(p*L+f*(P=1-L)+2*m)+P*(f*L+g*P+2*u)+w;var U=1-L-P;for(d=0;d<h.length;++d)s[d]=U*l[d]+L*i[d]+P*v[d];return S<0?0:S}},{}],271:[function(b,T,_){T.exports=b("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(b,T,_){"use strict";var e=b("big-rat/add");T.exports=function(o,a){for(var l=o.length,i=new Array(l),v=0;v<l;++v)i[v]=e(o[v],a[v]);return i}},{"big-rat/add":15}],273:[function(b,T,_){"use strict";T.exports=function(o){for(var a=new Array(o.length),l=0;l<o.length;++l)a[l]=e(o[l]);return a};var e=b("big-rat")},{"big-rat":18}],274:[function(b,T,_){"use strict";var e=b("big-rat"),o=b("big-rat/mul");T.exports=function(a,l){for(var i=e(l),v=a.length,h=new Array(v),s=0;s<v;++s)h[s]=o(a[s],i);return h}},{"big-rat":18,"big-rat/mul":27}],275:[function(b,T,_){"use strict";var e=b("big-rat/sub");T.exports=function(o,a){for(var l=o.length,i=new Array(l),v=0;v<l;++v)i[v]=e(o[v],a[v]);return i}},{"big-rat/sub":29}],276:[function(b,T,_){"use strict";var e=b("compare-cell"),o=b("compare-oriented-cell"),a=b("cell-orientation");T.exports=function(l){l.sort(o);for(var i=l.length,v=0,h=0;h<i;++h){var s=l[h],d=a(s);if(0!==d){if(v>0){var p=l[v-1];if(0===e(s,p)&&a(p)!==d){v-=1;continue}}l[v++]=s}}return l.length=v,l}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(b,T,_){"use strict";var e,o="";T.exports=function(a,l){if("string"!=typeof a)throw new TypeError("expected a string");if(1===l)return a;if(2===l)return a+a;var i=a.length*l;if(e!==a||void 0===e)e=a,o="";else if(o.length>=i)return o.substr(0,i);for(;i>o.length&&l>1;)1&l&&(o+=a),l>>=1,a+=a;return o=(o+=a).substr(0,i)}},{}],278:[function(b,T,_){(function(e){(function(){T.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==y?y:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(b,T,_){"use strict";T.exports=function(e){for(var o=e.length,a=e[e.length-1],l=o,i=o-2;i>=0;--i){var v=a,h=e[i];(d=h-((a=v+h)-v))&&(e[--l]=a,a=d)}var s=0;for(i=l;i<o;++i){var d;(d=(h=a)-((a=(v=e[i])+h)-v))&&(e[s++]=d)}return e[s++]=a,e.length=s,e}},{}],280:[function(b,T,_){"use strict";var e=b("two-product"),o=b("robust-sum"),a=b("robust-scale"),l=b("robust-compress");function i(g,m,u,w){return function(c){return w(g(u(c[0][0],c[1][1]),u(-c[0][1],c[1][0])))}}function v(g,m,u,w){return function(c){return w(g(m(g(u(c[1][1],c[2][2]),u(-c[1][2],c[2][1])),c[0][0]),g(m(g(u(c[1][0],c[2][2]),u(-c[1][2],c[2][0])),-c[0][1]),m(g(u(c[1][0],c[2][1]),u(-c[1][1],c[2][0])),c[0][2]))))}}function h(g,m,u,w){return function(c){return w(g(g(m(g(m(g(u(c[2][2],c[3][3]),u(-c[2][3],c[3][2])),c[1][1]),g(m(g(u(c[2][1],c[3][3]),u(-c[2][3],c[3][1])),-c[1][2]),m(g(u(c[2][1],c[3][2]),u(-c[2][2],c[3][1])),c[1][3]))),c[0][0]),m(g(m(g(u(c[2][2],c[3][3]),u(-c[2][3],c[3][2])),c[1][0]),g(m(g(u(c[2][0],c[3][3]),u(-c[2][3],c[3][0])),-c[1][2]),m(g(u(c[2][0],c[3][2]),u(-c[2][2],c[3][0])),c[1][3]))),-c[0][1])),g(m(g(m(g(u(c[2][1],c[3][3]),u(-c[2][3],c[3][1])),c[1][0]),g(m(g(u(c[2][0],c[3][3]),u(-c[2][3],c[3][0])),-c[1][1]),m(g(u(c[2][0],c[3][1]),u(-c[2][1],c[3][0])),c[1][3]))),c[0][2]),m(g(m(g(u(c[2][1],c[3][2]),u(-c[2][2],c[3][1])),c[1][0]),g(m(g(u(c[2][0],c[3][2]),u(-c[2][2],c[3][0])),-c[1][1]),m(g(u(c[2][0],c[3][1]),u(-c[2][1],c[3][0])),c[1][2]))),-c[0][3]))))}}function s(g,m,u,w){return function(c){return w(g(g(m(g(g(m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][2]),g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),-c[2][3]),m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][4]))),c[1][1]),m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][1]),g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),-c[2][3]),m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),c[2][4]))),-c[1][2])),g(m(g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),c[2][1]),g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),-c[2][2]),m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][4]))),c[1][3]),m(g(m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][1]),g(m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),-c[2][2]),m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][3]))),-c[1][4]))),c[0][0]),m(g(g(m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][2]),g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),-c[2][3]),m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][4]))),c[1][0]),m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][3]),m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),c[2][4]))),-c[1][2])),g(m(g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][2]),m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),c[2][4]))),c[1][3]),m(g(m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][0]),g(m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),-c[2][2]),m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),c[2][3]))),-c[1][4]))),-c[0][1])),g(m(g(g(m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][1]),g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),-c[2][3]),m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),c[2][4]))),c[1][0]),m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][3]),m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),c[2][4]))),-c[1][1])),g(m(g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][4]))),c[1][3]),m(g(m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][3]))),-c[1][4]))),c[0][2]),g(m(g(g(m(g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),c[2][1]),g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),-c[2][2]),m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][4]))),c[1][0]),m(g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][2]),m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),c[2][4]))),-c[1][1])),g(m(g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][4]))),c[1][2]),m(g(m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][2]))),-c[1][4]))),-c[0][3]),m(g(g(m(g(m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][1]),g(m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),-c[2][2]),m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][3]))),c[1][0]),m(g(m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][0]),g(m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),-c[2][2]),m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),c[2][3]))),-c[1][1])),g(m(g(m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][3]))),c[1][2]),m(g(m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][2]))),-c[1][3]))),c[0][4])))))}}function d(g){return(2===g?i:3===g?v:4===g?h:5===g?s:void 0)(o,a,e,l)}var p=[function(){return[0]},function(g){return[g[0][0]]}];function f(g,m,u,w,c,E,M,S){return function(C){switch(C.length){case 0:return g(C);case 1:return m(C);case 2:return u(C);case 3:return w(C);case 4:return c(C);case 5:return E(C)}var O=M[C.length];return O||(O=M[C.length]=S(C.length)),O(C)}}!function(){for(;p.length<6;)p.push(d(p.length));T.exports=f.apply(void 0,p.concat([p,d]));for(var g=0;g<p.length;++g)T.exports[g]=p[g]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(b,T,_){"use strict";var e=b("two-product"),o=b("robust-sum");T.exports=function(a,l){for(var i=e(a[0],l[0]),v=1;v<a.length;++v)i=o(i,e(a[v],l[v]));return i}},{"robust-sum":289,"two-product":306}],282:[function(b,T,_){"use strict";var e=b("two-product"),o=b("robust-sum"),a=b("robust-subtract"),l=b("robust-scale");function i(m){return(3===m?v:4===m?h:5===m?s:d)(o,a,e,l)}function v(m,u,w,c){return function(E,M,S){var C=w(E[0],E[0]),O=c(C,M[0]),I=c(C,S[0]),N=w(M[0],M[0]),F=c(N,E[0]),L=c(N,S[0]),P=w(S[0],S[0]),j=c(P,E[0]),U=c(P,M[0]),$=m(u(U,L),u(F,O)),X=u(j,I),te=u($,X);return te[te.length-1]}}function h(m,u,w,c){return function(E,M,S,C){var O=m(w(E[0],E[0]),w(E[1],E[1])),I=c(O,M[0]),N=c(O,S[0]),F=c(O,C[0]),L=m(w(M[0],M[0]),w(M[1],M[1])),P=c(L,E[0]),j=c(L,S[0]),U=c(L,C[0]),$=m(w(S[0],S[0]),w(S[1],S[1])),X=c($,E[0]),te=c($,M[0]),ae=c($,C[0]),J=m(w(C[0],C[0]),w(C[1],C[1])),ee=c(J,E[0]),se=c(J,M[0]),G=c(J,S[0]),H=m(m(c(u(G,ae),M[1]),m(c(u(se,U),-S[1]),c(u(te,j),C[1]))),m(c(u(se,U),E[1]),m(c(u(ee,F),-M[1]),c(u(P,I),C[1])))),Y=m(m(c(u(G,ae),E[1]),m(c(u(ee,F),-S[1]),c(u(X,N),C[1]))),m(c(u(te,j),E[1]),m(c(u(X,N),-M[1]),c(u(P,I),S[1])))),oe=u(H,Y);return oe[oe.length-1]}}function s(m,u,w,c){return function(E,M,S,C,O){var I=m(w(E[0],E[0]),m(w(E[1],E[1]),w(E[2],E[2]))),N=c(I,M[0]),F=c(I,S[0]),L=c(I,C[0]),P=c(I,O[0]),j=m(w(M[0],M[0]),m(w(M[1],M[1]),w(M[2],M[2]))),U=c(j,E[0]),$=c(j,S[0]),X=c(j,C[0]),te=c(j,O[0]),ae=m(w(S[0],S[0]),m(w(S[1],S[1]),w(S[2],S[2]))),J=c(ae,E[0]),ee=c(ae,M[0]),se=c(ae,C[0]),G=c(ae,O[0]),H=m(w(C[0],C[0]),m(w(C[1],C[1]),w(C[2],C[2]))),Y=c(H,E[0]),oe=c(H,M[0]),W=c(H,S[0]),ne=c(H,O[0]),re=m(w(O[0],O[0]),m(w(O[1],O[1]),w(O[2],O[2]))),ce=c(re,E[0]),fe=c(re,M[0]),me=c(re,S[0]),pe=c(re,C[0]),we=m(m(m(c(m(c(u(pe,ne),S[1]),m(c(u(me,G),-C[1]),c(u(W,se),O[1]))),M[2]),m(c(m(c(u(pe,ne),M[1]),m(c(u(fe,te),-C[1]),c(u(oe,X),O[1]))),-S[2]),c(m(c(u(me,G),M[1]),m(c(u(fe,te),-S[1]),c(u(ee,$),O[1]))),C[2]))),m(c(m(c(u(W,se),M[1]),m(c(u(oe,X),-S[1]),c(u(ee,$),C[1]))),-O[2]),m(c(m(c(u(pe,ne),M[1]),m(c(u(fe,te),-C[1]),c(u(oe,X),O[1]))),E[2]),c(m(c(u(pe,ne),E[1]),m(c(u(ce,P),-C[1]),c(u(Y,L),O[1]))),-M[2])))),m(m(c(m(c(u(fe,te),E[1]),m(c(u(ce,P),-M[1]),c(u(U,N),O[1]))),C[2]),m(c(m(c(u(oe,X),E[1]),m(c(u(Y,L),-M[1]),c(u(U,N),C[1]))),-O[2]),c(m(c(u(W,se),M[1]),m(c(u(oe,X),-S[1]),c(u(ee,$),C[1]))),E[2]))),m(c(m(c(u(W,se),E[1]),m(c(u(Y,L),-S[1]),c(u(J,F),C[1]))),-M[2]),m(c(m(c(u(oe,X),E[1]),m(c(u(Y,L),-M[1]),c(u(U,N),C[1]))),S[2]),c(m(c(u(ee,$),E[1]),m(c(u(J,F),-M[1]),c(u(U,N),S[1]))),-C[2]))))),ye=m(m(m(c(m(c(u(pe,ne),S[1]),m(c(u(me,G),-C[1]),c(u(W,se),O[1]))),E[2]),c(m(c(u(pe,ne),E[1]),m(c(u(ce,P),-C[1]),c(u(Y,L),O[1]))),-S[2])),m(c(m(c(u(me,G),E[1]),m(c(u(ce,P),-S[1]),c(u(J,F),O[1]))),C[2]),c(m(c(u(W,se),E[1]),m(c(u(Y,L),-S[1]),c(u(J,F),C[1]))),-O[2]))),m(m(c(m(c(u(me,G),M[1]),m(c(u(fe,te),-S[1]),c(u(ee,$),O[1]))),E[2]),c(m(c(u(me,G),E[1]),m(c(u(ce,P),-S[1]),c(u(J,F),O[1]))),-M[2])),m(c(m(c(u(fe,te),E[1]),m(c(u(ce,P),-M[1]),c(u(U,N),O[1]))),S[2]),c(m(c(u(ee,$),E[1]),m(c(u(J,F),-M[1]),c(u(U,N),S[1]))),-O[2])))),Te=u(we,ye);return Te[Te.length-1]}}function d(m,u,w,c){return function(E,M,S,C,O,I){var N=m(m(w(E[0],E[0]),w(E[1],E[1])),m(w(E[2],E[2]),w(E[3],E[3]))),F=c(N,M[0]),L=c(N,S[0]),P=c(N,C[0]),j=c(N,O[0]),U=c(N,I[0]),$=m(m(w(M[0],M[0]),w(M[1],M[1])),m(w(M[2],M[2]),w(M[3],M[3]))),X=c($,E[0]),te=c($,S[0]),ae=c($,C[0]),J=c($,O[0]),ee=c($,I[0]),se=m(m(w(S[0],S[0]),w(S[1],S[1])),m(w(S[2],S[2]),w(S[3],S[3]))),G=c(se,E[0]),H=c(se,M[0]),Y=c(se,C[0]),oe=c(se,O[0]),W=c(se,I[0]),ne=m(m(w(C[0],C[0]),w(C[1],C[1])),m(w(C[2],C[2]),w(C[3],C[3]))),re=c(ne,E[0]),ce=c(ne,M[0]),fe=c(ne,S[0]),me=c(ne,O[0]),pe=c(ne,I[0]),we=m(m(w(O[0],O[0]),w(O[1],O[1])),m(w(O[2],O[2]),w(O[3],O[3]))),ye=c(we,E[0]),Te=c(we,M[0]),Le=c(we,S[0]),Oe=c(we,C[0]),Re=c(we,I[0]),Ve=m(m(w(I[0],I[0]),w(I[1],I[1])),m(w(I[2],I[2]),w(I[3],I[3]))),_e=c(Ve,E[0]),Ae=c(Ve,M[0]),Fe=c(Ve,S[0]),Pe=c(Ve,C[0]),Be=c(Ve,O[0]),qe=m(m(m(c(m(m(c(m(c(u(Be,Re),C[1]),m(c(u(Pe,pe),-O[1]),c(u(Oe,me),I[1]))),S[2]),c(m(c(u(Be,Re),S[1]),m(c(u(Fe,W),-O[1]),c(u(Le,oe),I[1]))),-C[2])),m(c(m(c(u(Pe,pe),S[1]),m(c(u(Fe,W),-C[1]),c(u(fe,Y),I[1]))),O[2]),c(m(c(u(Oe,me),S[1]),m(c(u(Le,oe),-C[1]),c(u(fe,Y),O[1]))),-I[2]))),M[3]),m(c(m(m(c(m(c(u(Be,Re),C[1]),m(c(u(Pe,pe),-O[1]),c(u(Oe,me),I[1]))),M[2]),c(m(c(u(Be,Re),M[1]),m(c(u(Ae,ee),-O[1]),c(u(Te,J),I[1]))),-C[2])),m(c(m(c(u(Pe,pe),M[1]),m(c(u(Ae,ee),-C[1]),c(u(ce,ae),I[1]))),O[2]),c(m(c(u(Oe,me),M[1]),m(c(u(Te,J),-C[1]),c(u(ce,ae),O[1]))),-I[2]))),-S[3]),c(m(m(c(m(c(u(Be,Re),S[1]),m(c(u(Fe,W),-O[1]),c(u(Le,oe),I[1]))),M[2]),c(m(c(u(Be,Re),M[1]),m(c(u(Ae,ee),-O[1]),c(u(Te,J),I[1]))),-S[2])),m(c(m(c(u(Fe,W),M[1]),m(c(u(Ae,ee),-S[1]),c(u(H,te),I[1]))),O[2]),c(m(c(u(Le,oe),M[1]),m(c(u(Te,J),-S[1]),c(u(H,te),O[1]))),-I[2]))),C[3]))),m(m(c(m(m(c(m(c(u(Pe,pe),S[1]),m(c(u(Fe,W),-C[1]),c(u(fe,Y),I[1]))),M[2]),c(m(c(u(Pe,pe),M[1]),m(c(u(Ae,ee),-C[1]),c(u(ce,ae),I[1]))),-S[2])),m(c(m(c(u(Fe,W),M[1]),m(c(u(Ae,ee),-S[1]),c(u(H,te),I[1]))),C[2]),c(m(c(u(fe,Y),M[1]),m(c(u(ce,ae),-S[1]),c(u(H,te),C[1]))),-I[2]))),-O[3]),c(m(m(c(m(c(u(Oe,me),S[1]),m(c(u(Le,oe),-C[1]),c(u(fe,Y),O[1]))),M[2]),c(m(c(u(Oe,me),M[1]),m(c(u(Te,J),-C[1]),c(u(ce,ae),O[1]))),-S[2])),m(c(m(c(u(Le,oe),M[1]),m(c(u(Te,J),-S[1]),c(u(H,te),O[1]))),C[2]),c(m(c(u(fe,Y),M[1]),m(c(u(ce,ae),-S[1]),c(u(H,te),C[1]))),-O[2]))),I[3])),m(c(m(m(c(m(c(u(Be,Re),C[1]),m(c(u(Pe,pe),-O[1]),c(u(Oe,me),I[1]))),M[2]),c(m(c(u(Be,Re),M[1]),m(c(u(Ae,ee),-O[1]),c(u(Te,J),I[1]))),-C[2])),m(c(m(c(u(Pe,pe),M[1]),m(c(u(Ae,ee),-C[1]),c(u(ce,ae),I[1]))),O[2]),c(m(c(u(Oe,me),M[1]),m(c(u(Te,J),-C[1]),c(u(ce,ae),O[1]))),-I[2]))),E[3]),c(m(m(c(m(c(u(Be,Re),C[1]),m(c(u(Pe,pe),-O[1]),c(u(Oe,me),I[1]))),E[2]),c(m(c(u(Be,Re),E[1]),m(c(u(_e,U),-O[1]),c(u(ye,j),I[1]))),-C[2])),m(c(m(c(u(Pe,pe),E[1]),m(c(u(_e,U),-C[1]),c(u(re,P),I[1]))),O[2]),c(m(c(u(Oe,me),E[1]),m(c(u(ye,j),-C[1]),c(u(re,P),O[1]))),-I[2]))),-M[3])))),m(m(m(c(m(m(c(m(c(u(Be,Re),M[1]),m(c(u(Ae,ee),-O[1]),c(u(Te,J),I[1]))),E[2]),c(m(c(u(Be,Re),E[1]),m(c(u(_e,U),-O[1]),c(u(ye,j),I[1]))),-M[2])),m(c(m(c(u(Ae,ee),E[1]),m(c(u(_e,U),-M[1]),c(u(X,F),I[1]))),O[2]),c(m(c(u(Te,J),E[1]),m(c(u(ye,j),-M[1]),c(u(X,F),O[1]))),-I[2]))),C[3]),c(m(m(c(m(c(u(Pe,pe),M[1]),m(c(u(Ae,ee),-C[1]),c(u(ce,ae),I[1]))),E[2]),c(m(c(u(Pe,pe),E[1]),m(c(u(_e,U),-C[1]),c(u(re,P),I[1]))),-M[2])),m(c(m(c(u(Ae,ee),E[1]),m(c(u(_e,U),-M[1]),c(u(X,F),I[1]))),C[2]),c(m(c(u(ce,ae),E[1]),m(c(u(re,P),-M[1]),c(u(X,F),C[1]))),-I[2]))),-O[3])),m(c(m(m(c(m(c(u(Oe,me),M[1]),m(c(u(Te,J),-C[1]),c(u(ce,ae),O[1]))),E[2]),c(m(c(u(Oe,me),E[1]),m(c(u(ye,j),-C[1]),c(u(re,P),O[1]))),-M[2])),m(c(m(c(u(Te,J),E[1]),m(c(u(ye,j),-M[1]),c(u(X,F),O[1]))),C[2]),c(m(c(u(ce,ae),E[1]),m(c(u(re,P),-M[1]),c(u(X,F),C[1]))),-O[2]))),I[3]),c(m(m(c(m(c(u(Pe,pe),S[1]),m(c(u(Fe,W),-C[1]),c(u(fe,Y),I[1]))),M[2]),c(m(c(u(Pe,pe),M[1]),m(c(u(Ae,ee),-C[1]),c(u(ce,ae),I[1]))),-S[2])),m(c(m(c(u(Fe,W),M[1]),m(c(u(Ae,ee),-S[1]),c(u(H,te),I[1]))),C[2]),c(m(c(u(fe,Y),M[1]),m(c(u(ce,ae),-S[1]),c(u(H,te),C[1]))),-I[2]))),E[3]))),m(m(c(m(m(c(m(c(u(Pe,pe),S[1]),m(c(u(Fe,W),-C[1]),c(u(fe,Y),I[1]))),E[2]),c(m(c(u(Pe,pe),E[1]),m(c(u(_e,U),-C[1]),c(u(re,P),I[1]))),-S[2])),m(c(m(c(u(Fe,W),E[1]),m(c(u(_e,U),-S[1]),c(u(G,L),I[1]))),C[2]),c(m(c(u(fe,Y),E[1]),m(c(u(re,P),-S[1]),c(u(G,L),C[1]))),-I[2]))),-M[3]),c(m(m(c(m(c(u(Pe,pe),M[1]),m(c(u(Ae,ee),-C[1]),c(u(ce,ae),I[1]))),E[2]),c(m(c(u(Pe,pe),E[1]),m(c(u(_e,U),-C[1]),c(u(re,P),I[1]))),-M[2])),m(c(m(c(u(Ae,ee),E[1]),m(c(u(_e,U),-M[1]),c(u(X,F),I[1]))),C[2]),c(m(c(u(ce,ae),E[1]),m(c(u(re,P),-M[1]),c(u(X,F),C[1]))),-I[2]))),S[3])),m(c(m(m(c(m(c(u(Fe,W),M[1]),m(c(u(Ae,ee),-S[1]),c(u(H,te),I[1]))),E[2]),c(m(c(u(Fe,W),E[1]),m(c(u(_e,U),-S[1]),c(u(G,L),I[1]))),-M[2])),m(c(m(c(u(Ae,ee),E[1]),m(c(u(_e,U),-M[1]),c(u(X,F),I[1]))),S[2]),c(m(c(u(H,te),E[1]),m(c(u(G,L),-M[1]),c(u(X,F),S[1]))),-I[2]))),-C[3]),c(m(m(c(m(c(u(fe,Y),M[1]),m(c(u(ce,ae),-S[1]),c(u(H,te),C[1]))),E[2]),c(m(c(u(fe,Y),E[1]),m(c(u(re,P),-S[1]),c(u(G,L),C[1]))),-M[2])),m(c(m(c(u(ce,ae),E[1]),m(c(u(re,P),-M[1]),c(u(X,F),C[1]))),S[2]),c(m(c(u(H,te),E[1]),m(c(u(G,L),-M[1]),c(u(X,F),S[1]))),-C[2]))),I[3]))))),We=m(m(m(c(m(m(c(m(c(u(Be,Re),C[1]),m(c(u(Pe,pe),-O[1]),c(u(Oe,me),I[1]))),S[2]),c(m(c(u(Be,Re),S[1]),m(c(u(Fe,W),-O[1]),c(u(Le,oe),I[1]))),-C[2])),m(c(m(c(u(Pe,pe),S[1]),m(c(u(Fe,W),-C[1]),c(u(fe,Y),I[1]))),O[2]),c(m(c(u(Oe,me),S[1]),m(c(u(Le,oe),-C[1]),c(u(fe,Y),O[1]))),-I[2]))),E[3]),m(c(m(m(c(m(c(u(Be,Re),C[1]),m(c(u(Pe,pe),-O[1]),c(u(Oe,me),I[1]))),E[2]),c(m(c(u(Be,Re),E[1]),m(c(u(_e,U),-O[1]),c(u(ye,j),I[1]))),-C[2])),m(c(m(c(u(Pe,pe),E[1]),m(c(u(_e,U),-C[1]),c(u(re,P),I[1]))),O[2]),c(m(c(u(Oe,me),E[1]),m(c(u(ye,j),-C[1]),c(u(re,P),O[1]))),-I[2]))),-S[3]),c(m(m(c(m(c(u(Be,Re),S[1]),m(c(u(Fe,W),-O[1]),c(u(Le,oe),I[1]))),E[2]),c(m(c(u(Be,Re),E[1]),m(c(u(_e,U),-O[1]),c(u(ye,j),I[1]))),-S[2])),m(c(m(c(u(Fe,W),E[1]),m(c(u(_e,U),-S[1]),c(u(G,L),I[1]))),O[2]),c(m(c(u(Le,oe),E[1]),m(c(u(ye,j),-S[1]),c(u(G,L),O[1]))),-I[2]))),C[3]))),m(m(c(m(m(c(m(c(u(Pe,pe),S[1]),m(c(u(Fe,W),-C[1]),c(u(fe,Y),I[1]))),E[2]),c(m(c(u(Pe,pe),E[1]),m(c(u(_e,U),-C[1]),c(u(re,P),I[1]))),-S[2])),m(c(m(c(u(Fe,W),E[1]),m(c(u(_e,U),-S[1]),c(u(G,L),I[1]))),C[2]),c(m(c(u(fe,Y),E[1]),m(c(u(re,P),-S[1]),c(u(G,L),C[1]))),-I[2]))),-O[3]),c(m(m(c(m(c(u(Oe,me),S[1]),m(c(u(Le,oe),-C[1]),c(u(fe,Y),O[1]))),E[2]),c(m(c(u(Oe,me),E[1]),m(c(u(ye,j),-C[1]),c(u(re,P),O[1]))),-S[2])),m(c(m(c(u(Le,oe),E[1]),m(c(u(ye,j),-S[1]),c(u(G,L),O[1]))),C[2]),c(m(c(u(fe,Y),E[1]),m(c(u(re,P),-S[1]),c(u(G,L),C[1]))),-O[2]))),I[3])),m(c(m(m(c(m(c(u(Be,Re),S[1]),m(c(u(Fe,W),-O[1]),c(u(Le,oe),I[1]))),M[2]),c(m(c(u(Be,Re),M[1]),m(c(u(Ae,ee),-O[1]),c(u(Te,J),I[1]))),-S[2])),m(c(m(c(u(Fe,W),M[1]),m(c(u(Ae,ee),-S[1]),c(u(H,te),I[1]))),O[2]),c(m(c(u(Le,oe),M[1]),m(c(u(Te,J),-S[1]),c(u(H,te),O[1]))),-I[2]))),E[3]),c(m(m(c(m(c(u(Be,Re),S[1]),m(c(u(Fe,W),-O[1]),c(u(Le,oe),I[1]))),E[2]),c(m(c(u(Be,Re),E[1]),m(c(u(_e,U),-O[1]),c(u(ye,j),I[1]))),-S[2])),m(c(m(c(u(Fe,W),E[1]),m(c(u(_e,U),-S[1]),c(u(G,L),I[1]))),O[2]),c(m(c(u(Le,oe),E[1]),m(c(u(ye,j),-S[1]),c(u(G,L),O[1]))),-I[2]))),-M[3])))),m(m(m(c(m(m(c(m(c(u(Be,Re),M[1]),m(c(u(Ae,ee),-O[1]),c(u(Te,J),I[1]))),E[2]),c(m(c(u(Be,Re),E[1]),m(c(u(_e,U),-O[1]),c(u(ye,j),I[1]))),-M[2])),m(c(m(c(u(Ae,ee),E[1]),m(c(u(_e,U),-M[1]),c(u(X,F),I[1]))),O[2]),c(m(c(u(Te,J),E[1]),m(c(u(ye,j),-M[1]),c(u(X,F),O[1]))),-I[2]))),S[3]),c(m(m(c(m(c(u(Fe,W),M[1]),m(c(u(Ae,ee),-S[1]),c(u(H,te),I[1]))),E[2]),c(m(c(u(Fe,W),E[1]),m(c(u(_e,U),-S[1]),c(u(G,L),I[1]))),-M[2])),m(c(m(c(u(Ae,ee),E[1]),m(c(u(_e,U),-M[1]),c(u(X,F),I[1]))),S[2]),c(m(c(u(H,te),E[1]),m(c(u(G,L),-M[1]),c(u(X,F),S[1]))),-I[2]))),-O[3])),m(c(m(m(c(m(c(u(Le,oe),M[1]),m(c(u(Te,J),-S[1]),c(u(H,te),O[1]))),E[2]),c(m(c(u(Le,oe),E[1]),m(c(u(ye,j),-S[1]),c(u(G,L),O[1]))),-M[2])),m(c(m(c(u(Te,J),E[1]),m(c(u(ye,j),-M[1]),c(u(X,F),O[1]))),S[2]),c(m(c(u(H,te),E[1]),m(c(u(G,L),-M[1]),c(u(X,F),S[1]))),-O[2]))),I[3]),c(m(m(c(m(c(u(Oe,me),S[1]),m(c(u(Le,oe),-C[1]),c(u(fe,Y),O[1]))),M[2]),c(m(c(u(Oe,me),M[1]),m(c(u(Te,J),-C[1]),c(u(ce,ae),O[1]))),-S[2])),m(c(m(c(u(Le,oe),M[1]),m(c(u(Te,J),-S[1]),c(u(H,te),O[1]))),C[2]),c(m(c(u(fe,Y),M[1]),m(c(u(ce,ae),-S[1]),c(u(H,te),C[1]))),-O[2]))),E[3]))),m(m(c(m(m(c(m(c(u(Oe,me),S[1]),m(c(u(Le,oe),-C[1]),c(u(fe,Y),O[1]))),E[2]),c(m(c(u(Oe,me),E[1]),m(c(u(ye,j),-C[1]),c(u(re,P),O[1]))),-S[2])),m(c(m(c(u(Le,oe),E[1]),m(c(u(ye,j),-S[1]),c(u(G,L),O[1]))),C[2]),c(m(c(u(fe,Y),E[1]),m(c(u(re,P),-S[1]),c(u(G,L),C[1]))),-O[2]))),-M[3]),c(m(m(c(m(c(u(Oe,me),M[1]),m(c(u(Te,J),-C[1]),c(u(ce,ae),O[1]))),E[2]),c(m(c(u(Oe,me),E[1]),m(c(u(ye,j),-C[1]),c(u(re,P),O[1]))),-M[2])),m(c(m(c(u(Te,J),E[1]),m(c(u(ye,j),-M[1]),c(u(X,F),O[1]))),C[2]),c(m(c(u(ce,ae),E[1]),m(c(u(re,P),-M[1]),c(u(X,F),C[1]))),-O[2]))),S[3])),m(c(m(m(c(m(c(u(Le,oe),M[1]),m(c(u(Te,J),-S[1]),c(u(H,te),O[1]))),E[2]),c(m(c(u(Le,oe),E[1]),m(c(u(ye,j),-S[1]),c(u(G,L),O[1]))),-M[2])),m(c(m(c(u(Te,J),E[1]),m(c(u(ye,j),-M[1]),c(u(X,F),O[1]))),S[2]),c(m(c(u(H,te),E[1]),m(c(u(G,L),-M[1]),c(u(X,F),S[1]))),-O[2]))),-C[3]),c(m(m(c(m(c(u(fe,Y),M[1]),m(c(u(ce,ae),-S[1]),c(u(H,te),C[1]))),E[2]),c(m(c(u(fe,Y),E[1]),m(c(u(re,P),-S[1]),c(u(G,L),C[1]))),-M[2])),m(c(m(c(u(ce,ae),E[1]),m(c(u(re,P),-M[1]),c(u(X,F),C[1]))),S[2]),c(m(c(u(H,te),E[1]),m(c(u(G,L),-M[1]),c(u(X,F),S[1]))),-C[2]))),O[3]))))),Je=u(qe,We);return Je[Je.length-1]}}var p=[function(){return 0},function(){return 0},function(){return 0}];function f(m){var u=p[m.length];return u||(u=p[m.length]=i(m.length)),u.apply(void 0,m)}function g(m,u,w,c,E,M,S,C){return function(O,I,N,F,L,P){switch(arguments.length){case 0:case 1:return 0;case 2:return c(O,I);case 3:return E(O,I,N);case 4:return M(O,I,N,F);case 5:return S(O,I,N,F,L);case 6:return C(O,I,N,F,L,P)}for(var j=new Array(arguments.length),U=0;U<arguments.length;++U)j[U]=arguments[U];return m(j)}}!function(){for(;p.length<=6;)p.push(i(p.length));T.exports=g.apply(void 0,[f].concat(p));for(var m=0;m<=6;++m)T.exports[m]=p[m]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(b,T,_){"use strict";var e=b("robust-determinant");function o(p){return(2===p?a:3===p?l:4===p?i:5===p?v:h)(p<6?e[p]:e)}function a(p){return function(f,g){return[p([[+g[0],+f[0][1]],[+g[1],+f[1][1]]]),p([[+f[0][0],+g[0]],[+f[1][0],+g[1]]]),p(f)]}}function l(p){return function(f,g){return[p([[+g[0],+f[0][1],+f[0][2]],[+g[1],+f[1][1],+f[1][2]],[+g[2],+f[2][1],+f[2][2]]]),p([[+f[0][0],+g[0],+f[0][2]],[+f[1][0],+g[1],+f[1][2]],[+f[2][0],+g[2],+f[2][2]]]),p([[+f[0][0],+f[0][1],+g[0]],[+f[1][0],+f[1][1],+g[1]],[+f[2][0],+f[2][1],+g[2]]]),p(f)]}}function i(p){return function(f,g){return[p([[+g[0],+f[0][1],+f[0][2],+f[0][3]],[+g[1],+f[1][1],+f[1][2],+f[1][3]],[+g[2],+f[2][1],+f[2][2],+f[2][3]],[+g[3],+f[3][1],+f[3][2],+f[3][3]]]),p([[+f[0][0],+g[0],+f[0][2],+f[0][3]],[+f[1][0],+g[1],+f[1][2],+f[1][3]],[+f[2][0],+g[2],+f[2][2],+f[2][3]],[+f[3][0],+g[3],+f[3][2],+f[3][3]]]),p([[+f[0][0],+f[0][1],+g[0],+f[0][3]],[+f[1][0],+f[1][1],+g[1],+f[1][3]],[+f[2][0],+f[2][1],+g[2],+f[2][3]],[+f[3][0],+f[3][1],+g[3],+f[3][3]]]),p([[+f[0][0],+f[0][1],+f[0][2],+g[0]],[+f[1][0],+f[1][1],+f[1][2],+g[1]],[+f[2][0],+f[2][1],+f[2][2],+g[2]],[+f[3][0],+f[3][1],+f[3][2],+g[3]]]),p(f)]}}function v(p){return function(f,g){return[p([[+g[0],+f[0][1],+f[0][2],+f[0][3],+f[0][4]],[+g[1],+f[1][1],+f[1][2],+f[1][3],+f[1][4]],[+g[2],+f[2][1],+f[2][2],+f[2][3],+f[2][4]],[+g[3],+f[3][1],+f[3][2],+f[3][3],+f[3][4]],[+g[4],+f[4][1],+f[4][2],+f[4][3],+f[4][4]]]),p([[+f[0][0],+g[0],+f[0][2],+f[0][3],+f[0][4]],[+f[1][0],+g[1],+f[1][2],+f[1][3],+f[1][4]],[+f[2][0],+g[2],+f[2][2],+f[2][3],+f[2][4]],[+f[3][0],+g[3],+f[3][2],+f[3][3],+f[3][4]],[+f[4][0],+g[4],+f[4][2],+f[4][3],+f[4][4]]]),p([[+f[0][0],+f[0][1],+g[0],+f[0][3],+f[0][4]],[+f[1][0],+f[1][1],+g[1],+f[1][3],+f[1][4]],[+f[2][0],+f[2][1],+g[2],+f[2][3],+f[2][4]],[+f[3][0],+f[3][1],+g[3],+f[3][3],+f[3][4]],[+f[4][0],+f[4][1],+g[4],+f[4][3],+f[4][4]]]),p([[+f[0][0],+f[0][1],+f[0][2],+g[0],+f[0][4]],[+f[1][0],+f[1][1],+f[1][2],+g[1],+f[1][4]],[+f[2][0],+f[2][1],+f[2][2],+g[2],+f[2][4]],[+f[3][0],+f[3][1],+f[3][2],+g[3],+f[3][4]],[+f[4][0],+f[4][1],+f[4][2],+g[4],+f[4][4]]]),p([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+g[0]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+g[1]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+g[2]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+g[3]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+g[4]]]),p(f)]}}function h(p){return function(f,g){return[p([[+g[0],+f[0][1],+f[0][2],+f[0][3],+f[0][4],+f[0][5]],[+g[1],+f[1][1],+f[1][2],+f[1][3],+f[1][4],+f[1][5]],[+g[2],+f[2][1],+f[2][2],+f[2][3],+f[2][4],+f[2][5]],[+g[3],+f[3][1],+f[3][2],+f[3][3],+f[3][4],+f[3][5]],[+g[4],+f[4][1],+f[4][2],+f[4][3],+f[4][4],+f[4][5]],[+g[5],+f[5][1],+f[5][2],+f[5][3],+f[5][4],+f[5][5]]]),p([[+f[0][0],+g[0],+f[0][2],+f[0][3],+f[0][4],+f[0][5]],[+f[1][0],+g[1],+f[1][2],+f[1][3],+f[1][4],+f[1][5]],[+f[2][0],+g[2],+f[2][2],+f[2][3],+f[2][4],+f[2][5]],[+f[3][0],+g[3],+f[3][2],+f[3][3],+f[3][4],+f[3][5]],[+f[4][0],+g[4],+f[4][2],+f[4][3],+f[4][4],+f[4][5]],[+f[5][0],+g[5],+f[5][2],+f[5][3],+f[5][4],+f[5][5]]]),p([[+f[0][0],+f[0][1],+g[0],+f[0][3],+f[0][4],+f[0][5]],[+f[1][0],+f[1][1],+g[1],+f[1][3],+f[1][4],+f[1][5]],[+f[2][0],+f[2][1],+g[2],+f[2][3],+f[2][4],+f[2][5]],[+f[3][0],+f[3][1],+g[3],+f[3][3],+f[3][4],+f[3][5]],[+f[4][0],+f[4][1],+g[4],+f[4][3],+f[4][4],+f[4][5]],[+f[5][0],+f[5][1],+g[5],+f[5][3],+f[5][4],+f[5][5]]]),p([[+f[0][0],+f[0][1],+f[0][2],+g[0],+f[0][4],+f[0][5]],[+f[1][0],+f[1][1],+f[1][2],+g[1],+f[1][4],+f[1][5]],[+f[2][0],+f[2][1],+f[2][2],+g[2],+f[2][4],+f[2][5]],[+f[3][0],+f[3][1],+f[3][2],+g[3],+f[3][4],+f[3][5]],[+f[4][0],+f[4][1],+f[4][2],+g[4],+f[4][4],+f[4][5]],[+f[5][0],+f[5][1],+f[5][2],+g[5],+f[5][4],+f[5][5]]]),p([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+g[0],+f[0][5]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+g[1],+f[1][5]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+g[2],+f[2][5]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+g[3],+f[3][5]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+g[4],+f[4][5]],[+f[5][0],+f[5][1],+f[5][2],+f[5][3],+g[5],+f[5][5]]]),p([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+f[0][4],+g[0]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+f[1][4],+g[1]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+f[2][4],+g[2]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+f[3][4],+g[3]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+f[4][4],+g[4]],[+f[5][0],+f[5][1],+f[5][2],+f[5][3],+f[5][4],+g[5]]]),p(f)]}}var s=[function(){return[[0]]},function(p,f){return[[f[0]],[p[0][0]]]}];function d(p,f,g,m,u,w,c,E){return function(M,S){switch(M.length){case 0:return p(M,S);case 1:return f(M,S);case 2:return g(M,S);case 3:return m(M,S);case 4:return u(M,S);case 5:return w(M,S)}var C=c[M.length];return C||(C=c[M.length]=E(M.length)),C(M,S)}}!function(){for(;s.length<6;)s.push(o(s.length));T.exports=d.apply(void 0,s.concat([s,o]));for(var p=0;p<6;++p)T.exports[p]=s[p]}()},{"robust-determinant":280}],284:[function(b,T,_){"use strict";var e=b("two-product"),o=b("robust-sum"),a=b("robust-scale"),l=b("robust-subtract");function i(u,w,c,E){return function(M,S,C){var O=u(u(w(S[1],C[0]),w(-C[1],S[0])),u(w(M[1],S[0]),w(-S[1],M[0]))),I=u(w(M[1],C[0]),w(-C[1],M[0])),N=E(O,I);return N[N.length-1]}}function v(u,w,c,E){return function(M,S,C,O){var I=u(u(c(u(w(C[1],O[0]),w(-O[1],C[0])),S[2]),u(c(u(w(S[1],O[0]),w(-O[1],S[0])),-C[2]),c(u(w(S[1],C[0]),w(-C[1],S[0])),O[2]))),u(c(u(w(S[1],O[0]),w(-O[1],S[0])),M[2]),u(c(u(w(M[1],O[0]),w(-O[1],M[0])),-S[2]),c(u(w(M[1],S[0]),w(-S[1],M[0])),O[2])))),N=u(u(c(u(w(C[1],O[0]),w(-O[1],C[0])),M[2]),u(c(u(w(M[1],O[0]),w(-O[1],M[0])),-C[2]),c(u(w(M[1],C[0]),w(-C[1],M[0])),O[2]))),u(c(u(w(S[1],C[0]),w(-C[1],S[0])),M[2]),u(c(u(w(M[1],C[0]),w(-C[1],M[0])),-S[2]),c(u(w(M[1],S[0]),w(-S[1],M[0])),C[2])))),F=E(I,N);return F[F.length-1]}}function h(u,w,c,E){return function(M,S,C,O,I){var N=u(u(u(c(u(c(u(w(O[1],I[0]),w(-I[1],O[0])),C[2]),u(c(u(w(C[1],I[0]),w(-I[1],C[0])),-O[2]),c(u(w(C[1],O[0]),w(-O[1],C[0])),I[2]))),S[3]),u(c(u(c(u(w(O[1],I[0]),w(-I[1],O[0])),S[2]),u(c(u(w(S[1],I[0]),w(-I[1],S[0])),-O[2]),c(u(w(S[1],O[0]),w(-O[1],S[0])),I[2]))),-C[3]),c(u(c(u(w(C[1],I[0]),w(-I[1],C[0])),S[2]),u(c(u(w(S[1],I[0]),w(-I[1],S[0])),-C[2]),c(u(w(S[1],C[0]),w(-C[1],S[0])),I[2]))),O[3]))),u(c(u(c(u(w(C[1],O[0]),w(-O[1],C[0])),S[2]),u(c(u(w(S[1],O[0]),w(-O[1],S[0])),-C[2]),c(u(w(S[1],C[0]),w(-C[1],S[0])),O[2]))),-I[3]),u(c(u(c(u(w(O[1],I[0]),w(-I[1],O[0])),S[2]),u(c(u(w(S[1],I[0]),w(-I[1],S[0])),-O[2]),c(u(w(S[1],O[0]),w(-O[1],S[0])),I[2]))),M[3]),c(u(c(u(w(O[1],I[0]),w(-I[1],O[0])),M[2]),u(c(u(w(M[1],I[0]),w(-I[1],M[0])),-O[2]),c(u(w(M[1],O[0]),w(-O[1],M[0])),I[2]))),-S[3])))),u(u(c(u(c(u(w(S[1],I[0]),w(-I[1],S[0])),M[2]),u(c(u(w(M[1],I[0]),w(-I[1],M[0])),-S[2]),c(u(w(M[1],S[0]),w(-S[1],M[0])),I[2]))),O[3]),u(c(u(c(u(w(S[1],O[0]),w(-O[1],S[0])),M[2]),u(c(u(w(M[1],O[0]),w(-O[1],M[0])),-S[2]),c(u(w(M[1],S[0]),w(-S[1],M[0])),O[2]))),-I[3]),c(u(c(u(w(C[1],O[0]),w(-O[1],C[0])),S[2]),u(c(u(w(S[1],O[0]),w(-O[1],S[0])),-C[2]),c(u(w(S[1],C[0]),w(-C[1],S[0])),O[2]))),M[3]))),u(c(u(c(u(w(C[1],O[0]),w(-O[1],C[0])),M[2]),u(c(u(w(M[1],O[0]),w(-O[1],M[0])),-C[2]),c(u(w(M[1],C[0]),w(-C[1],M[0])),O[2]))),-S[3]),u(c(u(c(u(w(S[1],O[0]),w(-O[1],S[0])),M[2]),u(c(u(w(M[1],O[0]),w(-O[1],M[0])),-S[2]),c(u(w(M[1],S[0]),w(-S[1],M[0])),O[2]))),C[3]),c(u(c(u(w(S[1],C[0]),w(-C[1],S[0])),M[2]),u(c(u(w(M[1],C[0]),w(-C[1],M[0])),-S[2]),c(u(w(M[1],S[0]),w(-S[1],M[0])),C[2]))),-O[3]))))),F=u(u(u(c(u(c(u(w(O[1],I[0]),w(-I[1],O[0])),C[2]),u(c(u(w(C[1],I[0]),w(-I[1],C[0])),-O[2]),c(u(w(C[1],O[0]),w(-O[1],C[0])),I[2]))),M[3]),c(u(c(u(w(O[1],I[0]),w(-I[1],O[0])),M[2]),u(c(u(w(M[1],I[0]),w(-I[1],M[0])),-O[2]),c(u(w(M[1],O[0]),w(-O[1],M[0])),I[2]))),-C[3])),u(c(u(c(u(w(C[1],I[0]),w(-I[1],C[0])),M[2]),u(c(u(w(M[1],I[0]),w(-I[1],M[0])),-C[2]),c(u(w(M[1],C[0]),w(-C[1],M[0])),I[2]))),O[3]),c(u(c(u(w(C[1],O[0]),w(-O[1],C[0])),M[2]),u(c(u(w(M[1],O[0]),w(-O[1],M[0])),-C[2]),c(u(w(M[1],C[0]),w(-C[1],M[0])),O[2]))),-I[3]))),u(u(c(u(c(u(w(C[1],I[0]),w(-I[1],C[0])),S[2]),u(c(u(w(S[1],I[0]),w(-I[1],S[0])),-C[2]),c(u(w(S[1],C[0]),w(-C[1],S[0])),I[2]))),M[3]),c(u(c(u(w(C[1],I[0]),w(-I[1],C[0])),M[2]),u(c(u(w(M[1],I[0]),w(-I[1],M[0])),-C[2]),c(u(w(M[1],C[0]),w(-C[1],M[0])),I[2]))),-S[3])),u(c(u(c(u(w(S[1],I[0]),w(-I[1],S[0])),M[2]),u(c(u(w(M[1],I[0]),w(-I[1],M[0])),-S[2]),c(u(w(M[1],S[0]),w(-S[1],M[0])),I[2]))),C[3]),c(u(c(u(w(S[1],C[0]),w(-C[1],S[0])),M[2]),u(c(u(w(M[1],C[0]),w(-C[1],M[0])),-S[2]),c(u(w(M[1],S[0]),w(-S[1],M[0])),C[2]))),-I[3])))),L=E(N,F);return L[L.length-1]}}function s(u){return(3===u?i:4===u?v:h)(o,e,a,l)}var d=s(3),p=s(4),f=[function(){return 0},function(){return 0},function(u,w){return w[0]-u[0]},function(u,w,c){var E,M=(u[1]-c[1])*(w[0]-c[0]),S=(u[0]-c[0])*(w[1]-c[1]),C=M-S;if(M>0){if(S<=0)return C;E=M+S}else{if(!(M<0)||S>=0)return C;E=-(M+S)}var O=33306690738754716e-32*E;return C>=O||C<=-O?C:d(u,w,c)},function(u,w,c,E){var M=u[0]-E[0],S=w[0]-E[0],C=c[0]-E[0],O=u[1]-E[1],I=w[1]-E[1],N=c[1]-E[1],F=u[2]-E[2],L=w[2]-E[2],P=c[2]-E[2],j=S*N,U=C*I,$=C*O,X=M*N,te=M*I,ae=S*O,J=F*(j-U)+L*($-X)+P*(te-ae),ee=7771561172376103e-31*((Math.abs(j)+Math.abs(U))*Math.abs(F)+(Math.abs($)+Math.abs(X))*Math.abs(L)+(Math.abs(te)+Math.abs(ae))*Math.abs(P));return J>ee||-J>ee?J:p(u,w,c,E)}];function g(u){var w=f[u.length];return w||(w=f[u.length]=s(u.length)),w.apply(void 0,u)}function m(u,w,c,E,M,S,C){return function(O,I,N,F,L){switch(arguments.length){case 0:case 1:return 0;case 2:return E(O,I);case 3:return M(O,I,N);case 4:return S(O,I,N,F);case 5:return C(O,I,N,F,L)}for(var P=new Array(arguments.length),j=0;j<arguments.length;++j)P[j]=arguments[j];return u(P)}}!function(){for(;f.length<=5;)f.push(s(f.length));T.exports=m.apply(void 0,[g].concat(f));for(var u=0;u<=5;++u)T.exports[u]=f[u]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(b,T,_){"use strict";var e=b("robust-sum"),o=b("robust-scale");T.exports=function(a,l){if(1===a.length)return o(l,a[0]);if(1===l.length)return o(a,l[0]);if(0===a.length||0===l.length)return[0];var i=[0];if(a.length<l.length)for(var v=0;v<a.length;++v)i=e(i,o(l,a[v]));else for(v=0;v<l.length;++v)i=e(i,o(a,l[v]));return i}},{"robust-scale":286,"robust-sum":289}],286:[function(b,T,_){"use strict";var e=b("two-product"),o=b("two-sum");T.exports=function(a,l){var i=a.length;if(1===i){var v=e(a[0],l);return v[0]?v:[v[1]]}var h=new Array(2*i),s=[.1,.1],d=[.1,.1],p=0;e(a[0],l,s),s[0]&&(h[p++]=s[0]);for(var f=1;f<i;++f){e(a[f],l,d),o(s[1],d[0],s),s[0]&&(h[p++]=s[0]);var m=d[1],u=s[1],w=m+u,c=u-(w-m);s[1]=w,c&&(h[p++]=c)}return s[1]&&(h[p++]=s[1]),0===p&&(h[p++]=0),h.length=p,h}},{"two-product":306,"two-sum":307}],287:[function(b,T,_){"use strict";T.exports=function(o,a,l,i){var v=e(o,l,i),h=e(a,l,i);if(v>0&&h>0||v<0&&h<0)return!1;var s=e(l,o,a),d=e(i,o,a);return!(s>0&&d>0||s<0&&d<0)&&(0!==v||0!==h||0!==s||0!==d||function(p,f,g,m){for(var u=0;u<2;++u){var w=p[u],c=f[u],E=Math.min(w,c),M=Math.max(w,c),S=g[u],C=m[u],O=Math.min(S,C);if(Math.max(S,C)<E||M<O)return!1}return!0}(o,a,l,i))};var e=b("robust-orientation")[3]},{"robust-orientation":284}],288:[function(b,T,_){"use strict";T.exports=function(e,o){var N,F,L,P,j,a=0|e.length,l=0|o.length;if(1===a&&1===l)return(j=(N=e[0])-((L=N+(F=-o[0]))-(P=L-N))+(F-P))?[j,L]:[L];var i,v,h=new Array(a+l),s=0,d=0,p=0,f=Math.abs,g=e[d],m=f(g),u=-o[p],w=f(u);m<w?(v=g,(d+=1)<a&&(m=f(g=e[d]))):(v=u,(p+=1)<l&&(w=f(u=-o[p]))),d<a&&m<w||p>=l?(i=g,(d+=1)<a&&(m=f(g=e[d]))):(i=u,(p+=1)<l&&(w=f(u=-o[p])));for(var c,E,M=i+v,S=M-i,C=v-S,O=C,I=M;d<a&&p<l;)m<w?(i=g,(d+=1)<a&&(m=f(g=e[d]))):(i=u,(p+=1)<l&&(w=f(u=-o[p]))),(C=(v=O)-(S=(M=i+v)-i))&&(h[s++]=C),O=I-((c=I+M)-(E=c-I))+(M-E),I=c;for(;d<a;)(C=(v=O)-(S=(M=(i=g)+v)-i))&&(h[s++]=C),O=I-((c=I+M)-(E=c-I))+(M-E),I=c,(d+=1)<a&&(g=e[d]);for(;p<l;)(C=(v=O)-(S=(M=(i=u)+v)-i))&&(h[s++]=C),O=I-((c=I+M)-(E=c-I))+(M-E),I=c,(p+=1)<l&&(u=-o[p]);return O&&(h[s++]=O),I&&(h[s++]=I),s||(h[s++]=0),h.length=s,h}},{}],289:[function(b,T,_){"use strict";T.exports=function(e,o){var N,F,L,P,j,a=0|e.length,l=0|o.length;if(1===a&&1===l)return(j=(N=e[0])-((L=N+(F=o[0]))-(P=L-N))+(F-P))?[j,L]:[L];var i,v,h=new Array(a+l),s=0,d=0,p=0,f=Math.abs,g=e[d],m=f(g),u=o[p],w=f(u);m<w?(v=g,(d+=1)<a&&(m=f(g=e[d]))):(v=u,(p+=1)<l&&(w=f(u=o[p]))),d<a&&m<w||p>=l?(i=g,(d+=1)<a&&(m=f(g=e[d]))):(i=u,(p+=1)<l&&(w=f(u=o[p])));for(var c,E,M=i+v,S=M-i,C=v-S,O=C,I=M;d<a&&p<l;)m<w?(i=g,(d+=1)<a&&(m=f(g=e[d]))):(i=u,(p+=1)<l&&(w=f(u=o[p]))),(C=(v=O)-(S=(M=i+v)-i))&&(h[s++]=C),O=I-((c=I+M)-(E=c-I))+(M-E),I=c;for(;d<a;)(C=(v=O)-(S=(M=(i=g)+v)-i))&&(h[s++]=C),O=I-((c=I+M)-(E=c-I))+(M-E),I=c,(d+=1)<a&&(g=e[d]);for(;p<l;)(C=(v=O)-(S=(M=(i=u)+v)-i))&&(h[s++]=C),O=I-((c=I+M)-(E=c-I))+(M-E),I=c,(p+=1)<l&&(u=o[p]);return O&&(h[s++]=O),I&&(h[s++]=I),s||(h[s++]=0),h.length=s,h}},{}],290:[function(b,T,_){"use strict";T.exports=function(a){return o(e(a))};var e=b("boundary-cells"),o=b("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(b,T,_){"use strict";T.exports=function(i,v,h,s){if(h=h||0,void 0===s&&(s=function(c){for(var E=c.length,M=0,S=0;S<E;++S)M=0|Math.max(M,c[S].length);return M-1}(i)),0===i.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var d=function(c,E){for(var M=c.length,S=o.mallocUint8(M),C=0;C<M;++C)S[C]=c[C]<E|0;return S}(v,+h),p=function(c,E){for(var M=c.length,C=o.mallocUint32(2*(E*(E+1)/2*M|0)),O=0,I=0;I<M;++I)for(var N=c[I],F=(E=N.length,0);F<E;++F)for(var L=0;L<F;++L){var P=N[L],j=N[F];C[O++]=0|Math.min(P,j),C[O++]=0|Math.max(P,j)}a(e(C,[O/2|0,2]));var U=2;for(I=2;I<O;I+=2)C[I-2]===C[I]&&C[I-1]===C[I+1]||(C[U++]=C[I],C[U++]=C[I+1]);return e(C,[U/2|0,2])}(i,s),f=function(c,E,M,S){for(var C=c.data,O=c.shape[0],I=o.mallocDouble(O),N=0,F=0;F<O;++F){var L=C[2*F],P=C[2*F+1];if(M[L]!==M[P]){var j=E[L],U=E[P];C[2*N]=L,C[2*N+1]=P,I[N++]=(U-S)/(U-j)}}return c.shape[0]=N,e(I,[N])}(p,v,d,+h),g=function(c,E){var M=o.mallocInt32(2*E),S=c.shape[0],C=c.data;M[0]=0;for(var O=0,I=0;I<S;++I){var N=C[2*I];if(N!==O){for(M[2*O+1]=I;++O<N;)M[2*O]=I,M[2*O+1]=I;M[2*O]=I}}for(M[2*O+1]=S;++O<E;)M[2*O]=M[2*O+1]=S;return M}(p,0|v.length),m=l(s)(i,p.data,g,d),u=function(c){for(var E=0|c.shape[0],M=c.data,S=new Array(E),C=0;C<E;++C)S[C]=[M[2*C],M[2*C+1]];return S}(p),w=[].slice.call(f.data,0,f.shape[0]);return o.free(d),o.free(p.data),o.free(f.data),o.free(g),{cells:m,vertexIds:u,vertexWeights:w}};var e=b("ndarray"),o=b("typedarray-pool"),a=b("ndarray-sort"),l=b("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(b,T,_){"use strict";T.exports=function(o){return e[o]()};var e=[function(){return function(o,a,l,i){for(var v=o.length,h=0;h<v;++h);return[]}},function(){function o(a,l,i,v){for(var h=0|Math.min(i,v),s=0|Math.max(i,v),d=a[2*h],p=a[2*h+1];d<p;){var f=d+p>>1,g=l[2*f+1];if(g===s)return f;s<g?p=f:d=f+1}return d}return function(a,l,i,v){for(var h=a.length,s=[],d=0;d<h;++d){var p=a[d];if(2===p.length){var f=(v[p[0]]<<0)+(v[p[1]]<<1);if(0===f||3===f)continue;switch(f){case 0:break;case 1:s.push([o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0])])}}}return s}},function(){function o(a,l,i,v){for(var h=0|Math.min(i,v),s=0|Math.max(i,v),d=a[2*h],p=a[2*h+1];d<p;){var f=d+p>>1,g=l[2*f+1];if(g===s)return f;s<g?p=f:d=f+1}return d}return function(a,l,i,v){for(var h=a.length,s=[],d=0;d<h;++d){var p=a[d],f=p.length;if(3===f){if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[2]),o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0]),o(i,l,p[1],p[2])]);break;case 3:s.push([o(i,l,p[0],p[2]),o(i,l,p[1],p[2])]);break;case 4:s.push([o(i,l,p[2],p[1]),o(i,l,p[2],p[0])]);break;case 5:s.push([o(i,l,p[2],p[1]),o(i,l,p[0],p[1])]);break;case 6:s.push([o(i,l,p[1],p[0]),o(i,l,p[2],p[0])])}}else if(2===f){var g;if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0])])}}}return s}},function(){function o(a,l,i,v){for(var h=0|Math.min(i,v),s=0|Math.max(i,v),d=a[2*h],p=a[2*h+1];d<p;){var f=d+p>>1,g=l[2*f+1];if(g===s)return f;s<g?p=f:d=f+1}return d}return function(a,l,i,v){for(var h=a.length,s=[],d=0;d<h;++d){var p=a[d],f=p.length;if(4===f){if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2)+(v[p[3]]<<3))||15===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[1]),o(i,l,p[0],p[2]),o(i,l,p[0],p[3])]);break;case 2:s.push([o(i,l,p[1],p[2]),o(i,l,p[1],p[0]),o(i,l,p[1],p[3])]);break;case 3:s.push([o(i,l,p[1],p[2]),o(i,l,p[0],p[2]),o(i,l,p[0],p[3])],[o(i,l,p[1],p[3]),o(i,l,p[1],p[2]),o(i,l,p[0],p[3])]);break;case 4:s.push([o(i,l,p[2],p[0]),o(i,l,p[2],p[1]),o(i,l,p[2],p[3])]);break;case 5:s.push([o(i,l,p[0],p[1]),o(i,l,p[2],p[1]),o(i,l,p[0],p[3])],[o(i,l,p[2],p[1]),o(i,l,p[2],p[3]),o(i,l,p[0],p[3])]);break;case 6:s.push([o(i,l,p[2],p[0]),o(i,l,p[1],p[0]),o(i,l,p[1],p[3])],[o(i,l,p[2],p[3]),o(i,l,p[2],p[0]),o(i,l,p[1],p[3])]);break;case 7:s.push([o(i,l,p[0],p[3]),o(i,l,p[1],p[3]),o(i,l,p[2],p[3])]);break;case 8:s.push([o(i,l,p[3],p[1]),o(i,l,p[3],p[0]),o(i,l,p[3],p[2])]);break;case 9:s.push([o(i,l,p[3],p[1]),o(i,l,p[0],p[1]),o(i,l,p[0],p[2])],[o(i,l,p[3],p[2]),o(i,l,p[3],p[1]),o(i,l,p[0],p[2])]);break;case 10:s.push([o(i,l,p[1],p[0]),o(i,l,p[3],p[0]),o(i,l,p[1],p[2])],[o(i,l,p[3],p[0]),o(i,l,p[3],p[2]),o(i,l,p[1],p[2])]);break;case 11:s.push([o(i,l,p[1],p[2]),o(i,l,p[0],p[2]),o(i,l,p[3],p[2])]);break;case 12:s.push([o(i,l,p[3],p[0]),o(i,l,p[2],p[0]),o(i,l,p[2],p[1])],[o(i,l,p[3],p[1]),o(i,l,p[3],p[0]),o(i,l,p[2],p[1])]);break;case 13:s.push([o(i,l,p[0],p[1]),o(i,l,p[2],p[1]),o(i,l,p[3],p[1])]);break;case 14:s.push([o(i,l,p[2],p[0]),o(i,l,p[1],p[0]),o(i,l,p[3],p[0])])}}else if(3===f){if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[2]),o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0]),o(i,l,p[1],p[2])]);break;case 3:s.push([o(i,l,p[0],p[2]),o(i,l,p[1],p[2])]);break;case 4:s.push([o(i,l,p[2],p[1]),o(i,l,p[2],p[0])]);break;case 5:s.push([o(i,l,p[2],p[1]),o(i,l,p[0],p[1])]);break;case 6:s.push([o(i,l,p[1],p[0]),o(i,l,p[2],p[0])])}}else if(2===f){var g;if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0])])}}}return s}}]},{}],293:[function(b,T,_){"use strict";var e=b("bit-twiddle"),o=b("union-find");function a(p,f){var g=p.length,m=p.length-f.length,u=Math.min;if(m)return m;switch(g){case 0:return 0;case 1:return p[0]-f[0];case 2:return(E=p[0]+p[1]-f[0]-f[1])||u(p[0],p[1])-u(f[0],f[1]);case 3:var w=p[0]+p[1],c=f[0]+f[1];if(E=w+p[2]-(c+f[2]))return E;var E,M=u(p[0],p[1]),S=u(f[0],f[1]);return(E=u(M,p[2])-u(S,f[2]))||u(M+p[2],w)-u(S+f[2],c);default:var C=p.slice(0);C.sort();var O=f.slice(0);O.sort();for(var I=0;I<g;++I)if(m=C[I]-O[I])return m;return 0}}function l(p,f){return a(p[0],f[0])}function i(p,f){if(f){for(var g=p.length,m=new Array(g),u=0;u<g;++u)m[u]=[p[u],f[u]];for(m.sort(l),u=0;u<g;++u)p[u]=m[u][0],f[u]=m[u][1];return p}return p.sort(a),p}function v(p){if(0===p.length)return[];for(var f=1,g=p.length,m=1;m<g;++m){var u=p[m];if(a(u,p[m-1])){if(m===f){f++;continue}p[f++]=u}}return p.length=f,p}function h(p,f){for(var g=0,m=p.length-1,u=-1;g<=m;){var w=g+m>>1,c=a(p[w],f);c<=0?(0===c&&(u=w),g=w+1):c>0&&(m=w-1)}return u}function s(p,f){for(var g=new Array(p.length),m=0,u=g.length;m<u;++m)g[m]=[];for(var w=[],c=(m=0,f.length);m<c;++m)for(var E=f[m],M=E.length,S=1,C=1<<M;S<C;++S){w.length=e.popCount(S);for(var O=0,I=0;I<M;++I)S&1<<I&&(w[O++]=E[I]);var N=h(p,w);if(!(N<0))for(;g[N++].push(m),!(N>=p.length||0!==a(p[N],w)););}return g}function d(p,f){if(f<0)return[];for(var g=[],m=(1<<f+1)-1,u=0;u<p.length;++u)for(var w=p[u],c=m;c<1<<w.length;c=e.nextCombination(c)){for(var E=new Array(f+1),M=0,S=0;S<w.length;++S)c&1<<S&&(E[M++]=w[S]);g.push(E)}return i(g)}_.dimension=function(p){for(var f=0,g=Math.max,m=0,u=p.length;m<u;++m)f=g(f,p[m].length);return f-1},_.countVertices=function(p){for(var f=-1,g=Math.max,m=0,u=p.length;m<u;++m)for(var w=p[m],c=0,E=w.length;c<E;++c)f=g(f,w[c]);return f+1},_.cloneCells=function(p){for(var f=new Array(p.length),g=0,m=p.length;g<m;++g)f[g]=p[g].slice(0);return f},_.compareCells=a,_.normalize=i,_.unique=v,_.findCell=h,_.incidence=s,_.dual=function(p,f){if(!f)return s(v(d(p,0)),p);for(var g=new Array(f),m=0;m<f;++m)g[m]=[];m=0;for(var u=p.length;m<u;++m)for(var w=p[m],c=0,E=w.length;c<E;++c)g[w[c]].push(m);return g},_.explode=function(p){for(var f=[],g=0,m=p.length;g<m;++g)for(var u=p[g],w=0|u.length,c=1,E=1<<w;c<E;++c){for(var M=[],S=0;S<w;++S)c>>>S&1&&M.push(u[S]);f.push(M)}return i(f)},_.skeleton=d,_.boundary=function(p){for(var f=[],g=0,m=p.length;g<m;++g)for(var u=p[g],w=0,c=u.length;w<c;++w){for(var E=new Array(u.length-1),M=0,S=0;M<c;++M)M!==w&&(E[S++]=u[M]);f.push(E)}return i(f)},_.connectedComponents=function(p,f){return f?function(g,m){for(var u=new o(m),w=0;w<g.length;++w)for(var c=g[w],E=0;E<c.length;++E)for(var M=E+1;M<c.length;++M)u.link(c[E],c[M]);var S=[],C=u.ranks;for(w=0;w<C.length;++w)C[w]=-1;for(w=0;w<g.length;++w){var O=u.find(g[w][0]);C[O]<0?(C[O]=S.length,S.push([g[w].slice(0)])):S[C[O]].push(g[w].slice(0))}return S}(p,f):function(g){for(var m=v(i(d(g,0))),u=new o(m.length),w=0;w<g.length;++w)for(var c=g[w],E=0;E<c.length;++E)for(var M=h(m,[c[E]]),S=E+1;S<c.length;++S)u.link(M,h(m,[c[S]]));var C=[],O=u.ranks;for(w=0;w<O.length;++w)O[w]=-1;for(w=0;w<g.length;++w){var I=u.find(h(m,[g[w][0]]));O[I]<0?(O[I]=C.length,C.push([g[w].slice(0)])):C[O[I]].push(g[w].slice(0))}return C}(p)}},{"bit-twiddle":32,"union-find":309}],294:[function(b,T,_){arguments[4][32][0].apply(_,arguments)},{dup:32}],295:[function(b,T,_){arguments[4][293][0].apply(_,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(b,T,_){"use strict";function e(o){this.roots=new Array(o),this.ranks=new Array(o);for(var a=0;a<o;++a)this.roots[a]=a,this.ranks[a]=0}T.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},e.prototype.find=function(o){for(var a=this.roots;a[o]!==o;){var l=a[o];a[o]=a[l],o=l}return o},e.prototype.link=function(o,a){var l=this.find(o),i=this.find(a);if(l!==i){var v=this.ranks,h=this.roots,s=v[l],d=v[i];s<d?h[l]=i:d<s?h[i]=l:(h[i]=l,++v[l])}}},{}],297:[function(b,T,_){"use strict";T.exports=function(a,l,i){for(var v=l.length,h=a.length,s=new Array(v),d=new Array(v),p=new Array(v),f=new Array(v),g=0;g<v;++g)s[g]=d[g]=-1,p[g]=1/0,f[g]=!1;for(g=0;g<h;++g){var m=a[g];if(2!==m.length)throw new Error("Input must be a graph");var u=m[1],w=m[0];d[w]=-1!==d[w]?-2:u,s[u]=-1!==s[u]?-2:w}function c(ae){if(f[ae])return 1/0;var ee,se,Y=s[ae],oe=d[ae];return Y<0||oe<0?1/0:(ee=l[Y],se=l[oe],Math.abs(e(l[ae],ee,se))/Math.sqrt(Math.pow(ee[0]-se[0],2)+Math.pow(ee[1]-se[1],2)))}function E(ae,J){var ee=L[ae],se=L[J];L[ae]=se,L[J]=ee,P[ee]=J,P[se]=ae}function M(ae){return p[L[ae]]}function S(ae){return 1&ae?ae-1>>1:(ae>>1)-1}function C(ae){for(var J=M(ae);;){var ee=J,se=2*ae+1,G=2*(ae+1),H=ae;if(se<j){var Y=M(se);Y<ee&&(H=se,ee=Y)}if(G<j&&M(G)<ee&&(H=G),H===ae)return ae;E(ae,H),ae=H}}function O(ae){for(var J=M(ae);ae>0;){var ee=S(ae);if(!(ee>=0&&J<M(ee)))return ae;E(ae,ee),ae=ee}}function I(){if(j>0){var ae=L[0];return E(0,j-1),j-=1,C(0),ae}return-1}function N(ae,J){var ee=L[ae];return p[ee]===J?ae:(p[ee]=-1/0,O(ae),I(),p[ee]=J,O((j+=1)-1))}function F(ae){if(!f[ae]){f[ae]=!0;var J=s[ae],ee=d[ae];s[ee]>=0&&(s[ee]=J),d[J]>=0&&(d[J]=ee),P[J]>=0&&N(P[J],c(J)),P[ee]>=0&&N(P[ee],c(ee))}}var L=[],P=new Array(v);for(g=0;g<v;++g)(p[g]=c(g))<1/0?(P[g]=L.length,L.push(g)):P[g]=-1;var j=L.length;for(g=j>>1;g>=0;--g)C(g);for(;;){var U=I();if(U<0||p[U]>i)break;F(U)}var $=[];for(g=0;g<v;++g)f[g]||(P[g]=$.length,$.push(l[g].slice()));function X(ae,J){if(ae[J]<0)return J;var ee=J,se=J;do{var G=ae[se];if(!f[se]||G<0||G===se||(G=ae[se=G],!f[se]||G<0||G===se))break;se=G,ee=ae[ee]}while(ee!==se);for(var H=J;H!==se;H=ae[H])ae[H]=se;return se}var te=[];return a.forEach(function(ae){var J=X(s,ae[0]),ee=X(d,ae[1]);if(J>=0&&ee>=0&&J!==ee){var se=P[J],G=P[ee];se!==G&&te.push([se,G])}}),o.unique(o.normalize(te)),{positions:$,edges:te}};var e=b("robust-orientation"),o=b("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(b,T,_){"use strict";T.exports=function(a,l){var i,v,h,s;if(l[0][0]<l[1][0])i=l[0],v=l[1];else{if(!(l[0][0]>l[1][0]))return o(l,a);i=l[1],v=l[0]}if(a[0][0]<a[1][0])h=a[0],s=a[1];else{if(!(a[0][0]>a[1][0]))return-o(a,l);h=a[1],s=a[0]}var d=e(i,v,s),p=e(i,v,h);if(d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;if(d=e(s,h,v),p=e(s,h,i),d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;return v[0]-s[0]};var e=b("robust-orientation");function o(a,l){var i,v,h,s;if(l[0][0]<l[1][0])i=l[0],v=l[1];else{if(!(l[0][0]>l[1][0])){var d=Math.min(a[0][1],a[1][1]),p=Math.max(a[0][1],a[1][1]),f=Math.min(l[0][1],l[1][1]),g=Math.max(l[0][1],l[1][1]);return p<f?p-f:d>g?d-g:p-g}i=l[1],v=l[0]}a[0][1]<a[1][1]?(h=a[0],s=a[1]):(h=a[1],s=a[0]);var m=e(v,i,h);return m||(m=e(v,i,s))||s-v}},{"robust-orientation":284}],299:[function(b,T,_){"use strict";T.exports=function(p){for(var f=p.length,g=2*f,m=new Array(g),u=0;u<f;++u){var w=p[u],c=w[0][0]<w[1][0];m[2*u]=new d(w[0][0],w,c,u),m[2*u+1]=new d(w[1][0],w,!c,u)}m.sort(function(F,L){var P=F.x-L.x;return P||(P=F.create-L.create)||Math.min(F.segment[0][1],F.segment[1][1])-Math.min(L.segment[0][1],L.segment[1][1])});var E=o(l),M=[],S=[],C=[];for(u=0;u<g;){for(var O=m[u].x,I=[];u<g;){var N=m[u];if(N.x!==O)break;u+=1,N.segment[0][0]===N.x&&N.segment[1][0]===N.x?N.create&&(N.segment[0][1]<N.segment[1][1]?(I.push(new s(N.segment[0][1],N.index,!0,!0)),I.push(new s(N.segment[1][1],N.index,!1,!1))):(I.push(new s(N.segment[1][1],N.index,!0,!1)),I.push(new s(N.segment[0][1],N.index,!1,!0)))):E=N.create?E.insert(N.segment,N.index):E.remove(N.segment)}M.push(E.root),S.push(O),C.push(I)}return new i(M,S,C)};var e=b("binary-search-bounds"),o=b("functional-red-black-tree"),a=b("robust-orientation"),l=b("./lib/order-segments");function i(p,f,g){this.slabs=p,this.coordinates=f,this.horizontal=g}function v(p,f){return p.y-f}function h(p,f){for(var g=null;p;){var m,u,w=p.key;w[0][0]<w[1][0]?(m=w[0],u=w[1]):(m=w[1],u=w[0]);var c=a(m,u,f);if(c<0)p=p.left;else if(c>0)if(f[0]!==w[1][0])g=p,p=p.right;else{if(E=h(p.right,f))return E;p=p.left}else{if(f[0]!==w[1][0])return p;var E;if(E=h(p.right,f))return E;p=p.left}}return g}function s(p,f,g,m){this.y=p,this.index=f,this.start=g,this.closed=m}function d(p,f,g,m){this.x=p,this.segment=f,this.create=g,this.index=m}i.prototype.castUp=function(p){var f=e.le(this.coordinates,p[0]);if(f<0)return-1;var g=h(this.slabs[f],p),m=-1;if(g&&(m=g.value),this.coordinates[f]===p[0]){var u=null;if(g&&(u=g.key),f>0){var w=h(this.slabs[f-1],p);w&&(u?l(w.key,u)>0&&(u=w.key,m=w.value):(m=w.value,u=w.key))}var c=this.horizontal[f];if(c.length>0){var E=e.ge(c,p[1],v);if(E<c.length){var M=c[E];if(p[1]===M.y){if(M.closed)return M.index;for(;E<c.length-1&&c[E+1].y===p[1];)if((M=c[E+=1]).closed)return M.index;if(M.y===p[1]&&!M.start){if((E+=1)>=c.length)return m;M=c[E]}}if(M.start)if(u){var S=a(u[0],u[1],[p[0],M.y]);u[0][0]>u[1][0]&&(S=-S),S>0&&(m=M.index)}else m=M.index;else M.y!==p[1]&&(m=M.index)}}}return m}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(b,T,_){"use strict";var e=b("robust-dot-product"),o=b("robust-sum");function a(i,v){var h=o(e(i,v),[v[v.length-1]]);return h[h.length-1]}function l(i,v,h,s){var d=-v/(s-v);d<0?d=0:d>1&&(d=1);for(var p=1-d,f=i.length,g=new Array(f),m=0;m<f;++m)g[m]=d*i[m]+p*h[m];return g}T.exports=function(i,v){for(var h=[],s=[],d=a(i[i.length-1],v),p=i[i.length-1],f=i[0],g=0;g<i.length;++g,p=f){var m=a(f=i[g],v);if(d<0&&m>0||d>0&&m<0){var u=l(p,m,f,d);h.push(u),s.push(u.slice())}m<0?s.push(f.slice()):m>0?h.push(f.slice()):(h.push(f.slice()),s.push(f.slice())),d=m}return{positive:h,negative:s}},T.exports.positive=function(i,v){for(var h=[],s=a(i[i.length-1],v),d=i[i.length-1],p=i[0],f=0;f<i.length;++f,d=p){var g=a(p=i[f],v);(s<0&&g>0||s>0&&g<0)&&h.push(l(d,g,p,s)),g>=0&&h.push(p.slice()),s=g}return h},T.exports.negative=function(i,v){for(var h=[],s=a(i[i.length-1],v),d=i[i.length-1],p=i[0],f=0;f<i.length;++f,d=p){var g=a(p=i[f],v);(s<0&&g>0||s>0&&g<0)&&h.push(l(d,g,p,s)),g<=0&&h.push(p.slice()),s=g}return h}},{"robust-dot-product":281,"robust-sum":289}],301:[function(b,T,_){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(h){return l(v(h),arguments)}function a(h,s){return o.apply(null,[h].concat(s||[]))}function l(h,s){var d,p,f,g,m,u,w,c,E,M=1,S=h.length,C="";for(p=0;p<S;p++)if("string"==typeof h[p])C+=h[p];else if("object"==typeof h[p]){if((g=h[p]).keys)for(d=s[M],f=0;f<g.keys.length;f++){if(null==d)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[f],g.keys[f-1]));d=d[g.keys[f]]}else d=g.param_no?s[g.param_no]:s[M++];if(e.not_type.test(g.type)&&e.not_primitive.test(g.type)&&d instanceof Function&&(d=d()),e.numeric_arg.test(g.type)&&"number"!=typeof d&&isNaN(d))throw new TypeError(o("[sprintf] expecting number but found %T",d));switch(e.number.test(g.type)&&(c=d>=0),g.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,g.width?parseInt(g.width):0);break;case"e":d=g.precision?parseFloat(d).toExponential(g.precision):parseFloat(d).toExponential();break;case"f":d=g.precision?parseFloat(d).toFixed(g.precision):parseFloat(d);break;case"g":d=g.precision?String(Number(d.toPrecision(g.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=g.precision?d.substring(0,g.precision):d;break;case"t":d=String(!!d),d=g.precision?d.substring(0,g.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=g.precision?d.substring(0,g.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=g.precision?d.substring(0,g.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}e.json.test(g.type)?C+=d:(!e.number.test(g.type)||c&&!g.sign?E="":(E=c?"+":"-",d=d.toString().replace(e.sign,"")),u=g.pad_char?"0"===g.pad_char?"0":g.pad_char.charAt(1):" ",w=g.width-(E+d).length,m=g.width&&w>0?u.repeat(w):"",C+=g.align?E+d+m:"0"===u?E+m+d:m+E+d)}return C}var i=Object.create(null);function v(h){if(i[h])return i[h];for(var s,d=h,p=[],f=0;d;){if(null!==(s=e.text.exec(d)))p.push(s[0]);else if(null!==(s=e.modulo.exec(d)))p.push("%");else{if(null===(s=e.placeholder.exec(d)))throw new SyntaxError("[sprintf] unexpected placeholder");if(s[2]){f|=1;var g=[],m=s[2],u=[];if(null===(u=e.key.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(u[1]);""!==(m=m.substring(u[0].length));)if(null!==(u=e.key_access.exec(m)))g.push(u[1]);else{if(null===(u=e.index_access.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(u[1])}s[2]=g}else f|=2;if(3===f)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:s[0],param_no:s[1],keys:s[2],sign:s[3],pad_char:s[4],align:s[5],width:s[6],precision:s[7],type:s[8]})}d=d.substring(s[0].length)}return i[h]=p}void 0!==_&&(_.sprintf=o,_.vsprintf=a),"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=a)}()},{}],302:[function(b,T,_){"use strict";T.exports=function(i,v){if(i.dimension<=0)return{positions:[],cells:[]};if(1===i.dimension)return function(d,p){for(var f=o(d,p),g=f.length,m=new Array(g),u=new Array(g),w=0;w<g;++w)m[w]=[f[w]],u[w]=[w];return{positions:m,cells:u}}(i,v);var h=i.order.join()+"-"+i.dtype,s=l[h];return v=+v||0,s||(s=l[h]=function(d,p){var g=a[d.length+"d"];if(g)return g(e,d,p)}(i.order,i.dtype)),s(i,v)};var e=b("ndarray-extract-contour"),o=b("zero-crossings"),a={"2d":function(i,v,h){var s=i({order:v,scalarArguments:3,getters:"generic"===h?[0]:void 0,phase:function(d,p,f,g){return d>g|0},vertex:function(d,p,f,g,m,u,w,c,E,M,S,C,O){var I=(w<<0)+(c<<1)+(E<<2)+(M<<3)|0;if(0!==I&&15!==I)switch(I){case 0:case 15:S.push([d-.5,p-.5]);break;case 1:S.push([d-.25-.25*(g+f-2*O)/(f-g),p-.25-.25*(m+f-2*O)/(f-m)]);break;case 2:S.push([d-.75-.25*(-g-f+2*O)/(g-f),p-.25-.25*(u+g-2*O)/(g-u)]);break;case 3:S.push([d-.5,p-.5-.5*(m+f+u+g-4*O)/(f-m+g-u)]);break;case 4:S.push([d-.25-.25*(u+m-2*O)/(m-u),p-.75-.25*(-m-f+2*O)/(m-f)]);break;case 5:S.push([d-.5-.5*(g+f+u+m-4*O)/(f-g+m-u),p-.5]);break;case 6:S.push([d-.5-.25*(-g-f+u+m)/(g-f+m-u),p-.5-.25*(-m-f+u+g)/(m-f+g-u)]);break;case 7:S.push([d-.75-.25*(u+m-2*O)/(m-u),p-.75-.25*(u+g-2*O)/(g-u)]);break;case 8:S.push([d-.75-.25*(-u-m+2*O)/(u-m),p-.75-.25*(-u-g+2*O)/(u-g)]);break;case 9:S.push([d-.5-.25*(g+f+-u-m)/(f-g+u-m),p-.5-.25*(m+f+-u-g)/(f-m+u-g)]);break;case 10:S.push([d-.5-.5*(-g-f-u-m+4*O)/(g-f+u-m),p-.5]);break;case 11:S.push([d-.25-.25*(-u-m+2*O)/(u-m),p-.75-.25*(m+f-2*O)/(f-m)]);break;case 12:S.push([d-.5,p-.5-.5*(-m-f-u-g+4*O)/(m-f+u-g)]);break;case 13:S.push([d-.75-.25*(g+f-2*O)/(f-g),p-.25-.25*(-u-g+2*O)/(u-g)]);break;case 14:S.push([d-.25-.25*(-g-f+2*O)/(g-f),p-.25-.25*(-m-f+2*O)/(m-f)])}},cell:function(d,p,f,g,m,u,w,c,E){c.push(m?[d,p]:[p,d])}});return function(d,p){var f=[],g=[];return s(d,f,g,p),{positions:f,cells:g}}}},l={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(b,T,_){(function(e){(function(){"use strict";T.exports=function i(v,h,s){s=s||{};var d=l[v];d||(d=l[v]={" ":{data:new Float32Array(0),shape:.2}});var p=d[h];if(!p)if(h.length<=1||!/\d/.test(h))p=d[h]=function(O){for(var I=O.cells,N=O.positions,F=new Float32Array(6*I.length),L=0,P=0,j=0;j<I.length;++j)for(var U=I[j],$=0;$<3;++$){var X=N[U[$]];F[L++]=X[0],F[L++]=X[1]+1.4,P=Math.max(X[0],P)}return{data:F,shape:P}}(o(h,{triangles:!0,font:v,textAlign:s.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var f=h.split(/(\d|\s)/),g=new Array(f.length),m=0,u=0,w=0;w<f.length;++w)g[w]=i(v,f[w]),m+=g[w].data.length,u+=g[w].shape,w>0&&(u+=.02);var c=new Float32Array(m),E=0,M=-.5*u;for(w=0;w<g.length;++w){for(var S=g[w].data,C=0;C<S.length;C+=2)c[E++]=S[C]+M,c[E++]=S[C+1];M+=g[w].shape+.02}p=d[h]={data:c,shape:u}}return p};var o=b("vectorize-text"),a=window||e.global||{},l=a.__TEXT_CACHE||{};a.__TEXT_CACHE={}}).call(this)}).call(this,b("_process"))},{_process:5,"vectorize-text":311}],304:[function(b,T,_){"use strict";var e=b("parse-unit");function o(l,i){var v=e(getComputedStyle(l).getPropertyValue(i));return v[0]*a(v[1],l)}function a(l,i){switch(i=i||document.body,l=(l||"px").trim().toLowerCase(),i!==window&&i!==document||(i=document.body),l){case"%":return i.clientHeight/100;case"ch":case"ex":return function(v,h){var s=document.createElement("div");s.style["font-size"]="128"+v,h.appendChild(s);var d=o(s,"font-size")/128;return h.removeChild(s),d}(l,i);case"em":return o(i,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}T.exports=a},{"parse-unit":265}],305:[function(b,T,_){"use strict";T.exports=function(m){var u=(m=m||{}).center||[0,0,0],w=m.up||[0,1,0],c=m.right||d(w),E=m.radius||1,M=m.theta||0,S=m.phi||0;if(u=[].slice.call(u,0,3),w=[].slice.call(w,0,3),i(w,w),c=[].slice.call(c,0,3),i(c,c),"eye"in m){var C=m.eye,O=[C[0]-u[0],C[1]-u[1],C[2]-u[2]];l(c,O,w),h(c[0],c[1],c[2])<1e-6?c=d(w):i(c,c),E=h(O[0],O[1],O[2]);var I=v(w,O)/E,N=v(c,O)/E;S=Math.acos(I),M=Math.acos(N)}return E=Math.log(E),new p(m.zoomMin,m.zoomMax,u,w,c,E,M,S)};var e=b("filtered-vector"),o=b("gl-mat4/invert"),a=b("gl-mat4/rotate"),l=b("gl-vec3/cross"),i=b("gl-vec3/normalize"),v=b("gl-vec3/dot");function h(m,u,w){return Math.sqrt(Math.pow(m,2)+Math.pow(u,2)+Math.pow(w,2))}function s(m){return Math.min(1,Math.max(-1,m))}function d(m){var u=Math.abs(m[0]),w=Math.abs(m[1]),c=Math.abs(m[2]),E=[0,0,0];u>Math.max(w,c)?E[2]=1:w>Math.max(u,c)?E[0]=1:E[1]=1;for(var M=0,S=0,C=0;C<3;++C)M+=m[C]*m[C],S+=E[C]*m[C];for(C=0;C<3;++C)E[C]-=S/M*m[C];return i(E,E),E}function p(m,u,w,c,E,M,S,C){this.center=e(w),this.up=e(c),this.right=e(E),this.radius=e([M]),this.angle=e([S,C]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(m,u),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var O=0;O<16;++O)this.computedMatrix[O]=.5;this.recalcMatrix(0)}var f=p.prototype;f.setDistanceLimits=function(m,u){m=m>0?Math.log(m):-1/0,u=u>0?Math.log(u):1/0,u=Math.max(u,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=u},f.getDistanceLimits=function(m){var u=this.radius.bounds[0];return m?(m[0]=Math.exp(u[0][0]),m[1]=Math.exp(u[1][0]),m):[Math.exp(u[0][0]),Math.exp(u[1][0])]},f.recalcMatrix=function(m){this.center.curve(m),this.up.curve(m),this.right.curve(m),this.radius.curve(m),this.angle.curve(m);for(var u=this.computedUp,w=this.computedRight,c=0,E=0,M=0;M<3;++M)E+=u[M]*w[M],c+=u[M]*u[M];var S=Math.sqrt(c),C=0;for(M=0;M<3;++M)w[M]-=u[M]*E/c,C+=w[M]*w[M],u[M]/=S;var O=Math.sqrt(C);for(M=0;M<3;++M)w[M]/=O;var I=this.computedToward;l(I,u,w),i(I,I);var N=Math.exp(this.computedRadius[0]),F=this.computedAngle[0],L=this.computedAngle[1],P=Math.cos(F),j=Math.sin(F),U=Math.cos(L),$=Math.sin(L),X=this.computedCenter,te=P*U,ae=j*U,J=$,ee=-P*$,se=-j*$,G=U,H=this.computedEye,Y=this.computedMatrix;for(M=0;M<3;++M){var oe=te*w[M]+ae*I[M]+J*u[M];Y[4*M+1]=ee*w[M]+se*I[M]+G*u[M],Y[4*M+2]=oe,Y[4*M+3]=0}var W=Y[1],ne=Y[5],re=Y[9],ce=Y[2],fe=Y[6],me=Y[10],pe=ne*me-re*fe,we=re*ce-W*me,ye=W*fe-ne*ce,Te=h(pe,we,ye);for(we/=Te,ye/=Te,Y[0]=pe/=Te,Y[4]=we,Y[8]=ye,M=0;M<3;++M)H[M]=X[M]+Y[2+4*M]*N;for(M=0;M<3;++M){C=0;for(var Le=0;Le<3;++Le)C+=Y[M+4*Le]*H[Le];Y[12+M]=-C}Y[15]=1},f.getMatrix=function(m,u){this.recalcMatrix(m);var w=this.computedMatrix;if(u){for(var c=0;c<16;++c)u[c]=w[c];return u}return w};var g=[0,0,0];f.rotate=function(m,u,w,c){if(this.angle.move(m,u,w),c){this.recalcMatrix(m);var E=this.computedMatrix;g[0]=E[2],g[1]=E[6],g[2]=E[10];for(var M=this.computedUp,S=this.computedRight,C=this.computedToward,O=0;O<3;++O)E[4*O]=M[O],E[4*O+1]=S[O],E[4*O+2]=C[O];for(a(E,E,c,g),O=0;O<3;++O)M[O]=E[4*O],S[O]=E[4*O+1];this.up.set(m,M[0],M[1],M[2]),this.right.set(m,S[0],S[1],S[2])}},f.pan=function(m,u,w,c){u=u||0,w=w||0,c=c||0,this.recalcMatrix(m);var E=this.computedMatrix,M=(Math.exp(this.computedRadius[0]),E[1]),S=E[5],C=E[9],O=h(M,S,C),I=E[0],N=E[4],F=E[8],L=I*(M/=O)+N*(S/=O)+F*(C/=O),P=h(I-=M*L,N-=S*L,F-=C*L),j=(I/=P)*u+M*w,U=(N/=P)*u+S*w,$=(F/=P)*u+C*w;this.center.move(m,j,U,$);var X=Math.exp(this.computedRadius[0]);X=Math.max(1e-4,X+c),this.radius.set(m,Math.log(X))},f.translate=function(m,u,w,c){this.center.move(m,u||0,w||0,c||0)},f.setMatrix=function(m,u,w,c){var E=1;"number"==typeof w&&(E=0|w),(E<0||E>3)&&(E=1);var M=(E+2)%3;u||(this.recalcMatrix(m),u=this.computedMatrix);var S=u[E],C=u[E+4],O=u[E+8];if(c){var I=Math.abs(S),N=Math.abs(C),F=Math.abs(O),L=Math.max(I,N,F);I===L?(S=S<0?-1:1,C=O=0):F===L?(O=O<0?-1:1,S=C=0):(C=C<0?-1:1,S=O=0)}else{var P=h(S,C,O);S/=P,C/=P,O/=P}var j,U,$=u[M],X=u[M+4],te=u[M+8],ae=$*S+X*C+te*O,J=h($-=S*ae,X-=C*ae,te-=O*ae),ee=C*(te/=J)-O*(X/=J),se=O*($/=J)-S*te,G=S*X-C*$,H=h(ee,se,G);if(ee/=H,se/=H,G/=H,this.center.jump(m,_e,Ae,Fe),this.radius.idle(m),this.up.jump(m,S,C,O),this.right.jump(m,$,X,te),2===E){var Y=u[1],oe=u[5],W=u[9];j=pe<0?-Math.PI/2:Math.PI/2,U=Math.atan2(Y*ee+oe*se+W*G,Y*$+oe*X+W*te)}else{var ce=u[2],fe=u[6],me=u[10],pe=ce*S+fe*C+me*O,we=ce*$+fe*X+me*te,ye=ce*ee+fe*se+me*G;j=Math.asin(s(pe)),U=Math.atan2(ye,we)}this.angle.jump(m,U,j),this.recalcMatrix(m);var Te=u[2],Le=u[6],Oe=u[10],Re=this.computedMatrix;o(Re,u);var Ve=Re[15],_e=Re[12]/Ve,Ae=Re[13]/Ve,Fe=Re[14]/Ve,Pe=Math.exp(this.computedRadius[0]);this.center.jump(m,_e-Te*Pe,Ae-Le*Pe,Fe-Oe*Pe)},f.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},f.idle=function(m){this.center.idle(m),this.up.idle(m),this.right.idle(m),this.radius.idle(m),this.angle.idle(m)},f.flush=function(m){this.center.flush(m),this.up.flush(m),this.right.flush(m),this.radius.flush(m),this.angle.flush(m)},f.setDistance=function(m,u){u>0&&this.radius.set(m,Math.log(u))},f.lookAt=function(m,u,w,c){this.recalcMatrix(m),u=u||this.computedEye,w=w||this.computedCenter;var E=(c=c||this.computedUp)[0],M=c[1],S=c[2],C=h(E,M,S);if(!(C<1e-6)){E/=C,M/=C,S/=C;var O=u[0]-w[0],I=u[1]-w[1],N=u[2]-w[2],F=h(O,I,N);if(!(F<1e-6)){O/=F,I/=F,N/=F;var L=this.computedRight,P=L[0],j=L[1],U=L[2],$=E*P+M*j+S*U,X=h(P-=$*E,j-=$*M,U-=$*S);if(!(X<.01&&(X=h(P=M*N-S*I,j=S*O-E*N,U=E*I-M*O))<1e-6)){P/=X,j/=X,U/=X,this.up.set(m,E,M,S),this.right.set(m,P,j,U),this.center.set(m,w[0],w[1],w[2]),this.radius.set(m,Math.log(F));var te=M*U-S*j,ae=S*P-E*U,J=E*j-M*P,ee=h(te,ae,J),G=P*O+j*I+U*N,H=(te/=ee)*O+(ae/=ee)*I+(J/=ee)*N,Y=Math.asin(s(E*O+M*I+S*N)),oe=Math.atan2(H,G),W=this.angle._state,ne=W[W.length-1],re=W[W.length-2];ne%=2*Math.PI;var ce=Math.abs(ne+2*Math.PI-oe),fe=Math.abs(ne-oe),me=Math.abs(ne-2*Math.PI-oe);ce<fe&&(ne+=2*Math.PI),me<fe&&(ne-=2*Math.PI),this.angle.jump(this.angle.lastT(),ne,re),this.angle.set(m,oe,Y)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(b,T,_){"use strict";T.exports=function(o,a,l){var i=o*a,v=e*o,h=v-(v-o),s=o-h,d=e*a,p=d-(d-a),f=a-p,g=s*f-(i-h*p-s*p-h*f);return l?(l[0]=g,l[1]=i,l):[g,i]};var e=+(Math.pow(2,27)+1)},{}],307:[function(b,T,_){"use strict";T.exports=function(e,o,a){var l=e+o,i=l-e,v=o-i,h=e-(l-i);return a?(a[0]=h+v,a[1]=l,a):[h+v,l]}},{}],308:[function(b,T,_){(function(e){(function(){"use strict";var o=b("bit-twiddle"),a=b("dup"),l=b("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var i="undefined"!=typeof Uint8ClampedArray,v="undefined"!=typeof BigUint64Array,h="undefined"!=typeof BigInt64Array,s=e.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=a([32,0])),s.BIGUINT64||(s.BIGUINT64=a([32,0])),s.BIGINT64||(s.BIGINT64=a([32,0])),s.BUFFER||(s.BUFFER=a([32,0]));var d=s.DATA,p=s.BUFFER;function f(P){if(P){var U=o.log2(P.length||P.byteLength);d[U].push(P)}}function g(P){P=o.nextPow2(P);var j=o.log2(P),U=d[j];return U.length>0?U.pop():new ArrayBuffer(P)}function m(P){return new Uint8Array(g(P),0,P)}function u(P){return new Uint16Array(g(2*P),0,P)}function w(P){return new Uint32Array(g(4*P),0,P)}function c(P){return new Int8Array(g(P),0,P)}function E(P){return new Int16Array(g(2*P),0,P)}function M(P){return new Int32Array(g(4*P),0,P)}function S(P){return new Float32Array(g(4*P),0,P)}function C(P){return new Float64Array(g(8*P),0,P)}function O(P){return i?new Uint8ClampedArray(g(P),0,P):m(P)}function I(P){return v?new BigUint64Array(g(8*P),0,P):null}function N(P){return h?new BigInt64Array(g(8*P),0,P):null}function F(P){return new DataView(g(P),0,P)}function L(P){P=o.nextPow2(P);var j=o.log2(P),U=p[j];return U.length>0?U.pop():new l(P)}_.free=function(P){if(l.isBuffer(P))p[o.log2(P.length)].push(P);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(P)&&(P=P.buffer),!P)return;var U=0|o.log2(P.length||P.byteLength);d[U].push(P)}},_.freeUint8=_.freeUint16=_.freeUint32=_.freeBigUint64=_.freeInt8=_.freeInt16=_.freeInt32=_.freeBigInt64=_.freeFloat32=_.freeFloat=_.freeFloat64=_.freeDouble=_.freeUint8Clamped=_.freeDataView=function(P){f(P.buffer)},_.freeArrayBuffer=f,_.freeBuffer=function(P){p[o.log2(P.length)].push(P)},_.malloc=function(P,j){if(void 0===j||"arraybuffer"===j)return g(P);switch(j){case"uint8":return m(P);case"uint16":return u(P);case"uint32":return w(P);case"int8":return c(P);case"int16":return E(P);case"int32":return M(P);case"float":case"float32":return S(P);case"double":case"float64":return C(P);case"uint8_clamped":return O(P);case"bigint64":return N(P);case"biguint64":return I(P);case"buffer":return L(P);case"data":case"dataview":return F(P);default:return null}return null},_.mallocArrayBuffer=g,_.mallocUint8=m,_.mallocUint16=u,_.mallocUint32=w,_.mallocInt8=c,_.mallocInt16=E,_.mallocInt32=M,_.mallocFloat32=_.mallocFloat=S,_.mallocFloat64=_.mallocDouble=C,_.mallocUint8Clamped=O,_.mallocBigUint64=I,_.mallocBigInt64=N,_.mallocDataView=F,_.mallocBuffer=L,_.clearCache=function(){for(var P=0;P<32;++P)s.UINT8[P].length=0,s.UINT16[P].length=0,s.UINT32[P].length=0,s.INT8[P].length=0,s.INT16[P].length=0,s.INT32[P].length=0,s.FLOAT[P].length=0,s.DOUBLE[P].length=0,s.BIGUINT64[P].length=0,s.BIGINT64[P].length=0,s.UINT8C[P].length=0,d[P].length=0,p[P].length=0}}).call(this)}).call(this,void 0!==y?y:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(b,T,_){"use strict";function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var l=0;l<a;++l)this.roots[l]=l,this.ranks[l]=0}T.exports=e;var o=e.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},o.find=function(a){for(var l=a,i=this.roots;i[a]!==a;)a=i[a];for(;i[l]!==a;){var v=i[l];i[l]=a,l=v}return a},o.link=function(a,l){var i=this.find(a),v=this.find(l);if(i!==v){var h=this.ranks,s=this.roots,d=h[i],p=h[v];d<p?s[i]=v:p<d?s[v]=i:(s[v]=i,++h[i])}}},{}],310:[function(b,T,_){"use strict";T.exports=function(e,o,a){return 0===e.length?e:o?(a||e.sort(o),function(l,i){for(var v=1,h=l.length,s=l[0],d=l[0],p=1;p<h;++p)if(d=s,i(s=l[p],d)){if(p===v){v++;continue}l[v++]=s}return l.length=v,l}(e,o)):(a||e.sort(),function(l){for(var i=1,v=l.length,h=l[0],s=l[0],d=1;d<v;++d,s=h)if(s=h,(h=l[d])!==s){if(d===i){i++;continue}l[i++]=h}return l.length=i,l}(e))}},{}],311:[function(b,T,_){"use strict";T.exports=function(l,i){return"object"==typeof i&&null!==i||(i={}),e(l,i.canvas||o,i.context||a,i)};var e=b("./lib/vtext"),o=null,a=null;"undefined"!=typeof document&&((o=document.createElement("canvas")).width=8192,o.height=1024,a=o.getContext("2d"))},{"./lib/vtext":312}],312:[function(b,T,_){T.exports=function(f,g,m,u){var w=64,c=1.25,E={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return u&&(u.size&&u.size>0&&(w=u.size),u.lineSpacing&&u.lineSpacing>0&&(c=u.lineSpacing),u.styletags&&u.styletags.breaklines&&(E.breaklines=!!u.styletags.breaklines),u.styletags&&u.styletags.bolds&&(E.bolds=!!u.styletags.bolds),u.styletags&&u.styletags.italics&&(E.italics=!!u.styletags.italics),u.styletags&&u.styletags.subscripts&&(E.subscripts=!!u.styletags.subscripts),u.styletags&&u.styletags.superscripts&&(E.superscripts=!!u.styletags.superscripts)),m.font=[u.fontStyle,u.fontVariant,u.fontWeight,w+"px",u.font].filter(function(M){return M}).join(" "),m.textAlign="start",m.textBaseline="alphabetic",m.direction="ltr",p(function(M,S,C,O,I,N){C=(C=C.replace(/\n/g,"")).replace(/\<br\>/g,!0===N.breaklines?"\n":" ");var F="",L=[];for($=0;$<C.length;++$)L[$]=F;!0===N.bolds&&(L=h("b","b|",C,L)),!0===N.italics&&(L=h("i","i|",C,L)),!0===N.superscripts&&(L=h("sup","+1",C,L)),!0===N.subscripts&&(L=h("sub","-1",C,L));var P=[],j="";for($=0;$<C.length;++$)null!==L[$]&&(j+=C[$],P.push(L[$]));var U,$,X,te,ae,J=j.split("\n"),ee=J.length,se=Math.round(I*O),G=O,H=2*O,Y=0,oe=ee*se+H;M.height<oe&&(M.height=oe),S.fillStyle="#000",S.fillRect(0,0,M.width,M.height),S.fillStyle="#fff";var W=0,ne="";function re(){if(""!==ne){var Le=S.measureText(ne).width;S.fillText(ne,G+X,H+te),X+=Le}}function ce(){return Math.round(ae)+"px "}function fe(Le,Oe){var Re=""+S.font;if(!0===N.subscripts){var Ve=Le.indexOf("-"),_e=Oe.indexOf("-"),Ae=Ve>-1?parseInt(Le[1+Ve]):0,Fe=_e>-1?parseInt(Oe[1+_e]):0;Ae!==Fe&&(Re=Re.replace(ce(),"?px "),ae*=Math.pow(.75,Fe-Ae),Re=Re.replace("?px ",ce())),te+=.25*se*(Fe-Ae)}if(!0===N.superscripts){var Pe=Le.indexOf("+"),Be=Oe.indexOf("+"),qe=Pe>-1?parseInt(Le[1+Pe]):0,We=Be>-1?parseInt(Oe[1+Be]):0;qe!==We&&(Re=Re.replace(ce(),"?px "),ae*=Math.pow(.75,We-qe),Re=Re.replace("?px ",ce())),te-=.25*se*(We-qe)}if(!0===N.bolds){var Je=Le.indexOf("b|")>-1,ut=Oe.indexOf("b|")>-1;!Je&&ut&&(Re=Ge?Re.replace("italic ","italic bold "):"bold "+Re),Je&&!ut&&(Re=Re.replace("bold ",""))}if(!0===N.italics){var Ge=Le.indexOf("i|")>-1,Ke=Oe.indexOf("i|")>-1;!Ge&&Ke&&(Re="italic "+Re),Ge&&!Ke&&(Re=Re.replace("italic ",""))}S.font=Re}for(U=0;U<ee;++U){var me=J[U]+"\n";for(X=0,te=U*se,ae=O,ne="",$=0;$<me.length;++$){var pe=$+W<P.length?P[$+W]:P[P.length-1];F===pe?ne+=me[$]:(re(),ne=me[$],void 0!==pe&&(fe(F,pe),F=pe))}re(),W+=me.length;var we=0|Math.round(X+2*G);Y<we&&(Y=we)}var ye=Y,Te=H+se*ee;return o(S.getImageData(0,0,ye,Te).data,[Te,ye,4]).pick(-1,-1,0).transpose(1,0)}(g,m,f,w,c,E),u,w)},T.exports.processPixels=p;var e=b("surface-nets"),o=b("ndarray"),a=b("simplify-planar-graph"),l=b("clean-pslg"),i=b("cdt2d"),v=b("planar-graph-to-polyline");function h(f,g,m,u){for(var w="<"+f+">",c="</"+f+">",E=w.length,M=c.length,S="+"===g[0]||"-"===g[0],C=0,O=-M;C>-1&&-1!==(C=m.indexOf(w,C))&&-1!==(O=m.indexOf(c,C+E))&&!(O<=C);){for(var I=C;I<O+M;++I)if(I<C+E||I>=O)u[I]=null,m=m.substr(0,I)+" "+m.substr(I+1);else if(null!==u[I]){var N=u[I].indexOf(g[0]);-1===N?u[I]+=g:S&&(u[I]=u[I].substr(0,N+1)+(1+parseInt(u[I][N+1]))+u[I].substr(N+2))}var F=C+E,L=m.substr(F,O-F).indexOf(w);C=-1!==L?L:O+M}return u}function d(f,g,m,u){var w=function s(f,g){var m=e(f,128);return g?a(m.cells,m.positions,.25):{edges:m.cells,positions:m.positions}}(f,u),c=function(U,$,X){for(var te=$.textAlign||"start",ae=$.textBaseline||"alphabetic",J=[1<<30,1<<30],ee=[0,0],se=U.length,G=0;G<se;++G)for(var H=U[G],Y=0;Y<2;++Y)J[Y]=0|Math.min(J[Y],H[Y]),ee[Y]=0|Math.max(ee[Y],H[Y]);var oe=0;switch(te){case"center":oe=-.5*(J[0]+ee[0]);break;case"right":case"end":oe=-ee[0];break;case"left":case"start":oe=-J[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+te+"'")}var W=0;switch(ae){case"hanging":case"top":W=-J[1];break;case"middle":W=-.5*(J[1]+ee[1]);break;case"alphabetic":case"ideographic":W=-3*X;break;case"bottom":W=-ee[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+ae+"'")}var ne=1/X;return"lineHeight"in $?ne*=+$.lineHeight:"width"in $?ne=$.width/(ee[0]-J[0]):"height"in $&&(ne=$.height/(ee[1]-J[1])),U.map(function(re){return[ne*(re[0]+oe),ne*(re[1]+W)]})}(w.positions,g,m),E=w.edges,M="ccw"===g.orientation;if(l(c,E),g.polygons||g.polygon||g.polyline){for(var S=v(E,c),C=new Array(S.length),O=0;O<S.length;++O){for(var I=S[O],N=new Array(I.length),F=0;F<I.length;++F){for(var L=I[F],P=new Array(L.length),j=0;j<L.length;++j)P[j]=c[L[j]].slice();M&&P.reverse(),N[F]=P}C[O]=N}return C}return g.triangles||g.triangulate||g.triangle?{cells:i(c,E,{delaunay:!1,exterior:!1,interior:!0}),positions:c}:{edges:E,positions:c}}function p(f,g,m){try{return d(f,g,m,!0)}catch(u){}try{return d(f,g,m,!1)}catch(u){}return g.polygons||g.polyline||g.polygon?[]:g.triangles||g.triangulate||g.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(b,T,_){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=w);var e=!1;if("function"==typeof WeakMap){var o=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var a=new o,l=Object.freeze({});if(a.set(l,1),1===a.get(l))return void(T.exports=WeakMap);e=!0}}var i=Object.getOwnPropertyNames,v=Object.defineProperty,h=Object.isExtensible,s="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var d=new ArrayBuffer(25),p=new Uint8Array(d);crypto.getRandomValues(p),s="weakmap:rand:"+Array.prototype.map.call(p,function(C){return(C%36).toString(36)}).join("")+"___"}if(v(Object,"getOwnPropertyNames",{value:function(C){return i(C).filter(c)}}),"getPropertyNames"in Object){var f=Object.getPropertyNames;v(Object,"getPropertyNames",{value:function(C){return f(C).filter(c)}})}!function(){var C=Object.freeze;v(Object,"freeze",{value:function(N){return E(N),C(N)}});var O=Object.seal;v(Object,"seal",{value:function(N){return E(N),O(N)}});var I=Object.preventExtensions;v(Object,"preventExtensions",{value:function(N){return E(N),I(N)}})}();var g=!1,m=0,u=function(){this instanceof u||S();var C=[],O=[],I=m++;return Object.create(u.prototype,{get___:{value:M(function(N,F){var L,P=E(N);return P?I in P?P[I]:F:(L=C.indexOf(N))>=0?O[L]:F})},has___:{value:M(function(N){var F=E(N);return F?I in F:C.indexOf(N)>=0})},set___:{value:M(function(N,F){var L,P=E(N);return P?P[I]=F:(L=C.indexOf(N))>=0?O[L]=F:(O[L=C.length]=F,C[L]=N),this})},delete___:{value:M(function(N){var F,L,P=E(N);return P?I in P&&delete P[I]:!((F=C.indexOf(N))<0||(L=C.length-1,C[F]=void 0,O[F]=O[L],C[F]=C[L],C.length=L,O.length=L,0))})}})};u.prototype=Object.create(Object.prototype,{get:{value:function(C,O){return this.get___(C,O)},writable:!0,configurable:!0},has:{value:function(C){return this.has___(C)},writable:!0,configurable:!0},set:{value:function(C,O){return this.set___(C,O)},writable:!0,configurable:!0},delete:{value:function(C){return this.delete___(C)},writable:!0,configurable:!0}}),"function"==typeof o?function(){function C(){this instanceof u||S();var O,I=new o,N=void 0,F=!1;return O=e?function(L,P){return I.set(L,P),I.has(L)||(N||(N=new u),N.set(L,P)),this}:function(L,P){if(F)try{I.set(L,P)}catch(j){N||(N=new u),N.set___(L,P)}else I.set(L,P);return this},Object.create(u.prototype,{get___:{value:M(function(L,P){return N?I.has(L)?I.get(L):N.get___(L,P):I.get(L,P)})},has___:{value:M(function(L){return I.has(L)||!!N&&N.has___(L)})},set___:{value:M(O)},delete___:{value:M(function(L){var P=!!I.delete(L);return N&&N.delete___(L)||P})},permitHostObjects___:{value:M(function(L){if(L!==w)throw new Error("bogus call to permitHostObjects___");F=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),C.prototype=u.prototype,T.exports=C,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),T.exports=u)}function w(C){C.permitHostObjects___&&C.permitHostObjects___(w)}function c(C){return!("weakmap:"==C.substr(0,8)&&"___"===C.substr(C.length-3))}function E(C){if(C!==Object(C))throw new TypeError("Not an object: "+C);var O=C[s];if(O&&O.key===C)return O;if(h(C)){O={key:C};try{return v(C,s,{value:O,writable:!1,enumerable:!1,configurable:!1}),O}catch(I){return}}}function M(C){return C.prototype=null,Object.freeze(C)}function S(){g||"undefined"==typeof console||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(b,T,_){var e=b("./hidden-store.js");T.exports=function(){var o={};return function(a){if(("object"!=typeof a||null===a)&&"function"!=typeof a)throw new Error("Weakmap-shim: Key must be object");var l=a.valueOf(o);return l&&l.identity===o?l:e(a,o)}}},{"./hidden-store.js":315}],315:[function(b,T,_){T.exports=function(e,o){var a={identity:o},l=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(i){return i!==o?l.apply(this,arguments):a},writable:!0}),a}},{}],316:[function(b,T,_){var e=b("./create-store.js");T.exports=function(){var o=e();return{get:function(a,l){var i=o(a);return i.hasOwnProperty("value")?i.value:l},set:function(a,l){return o(a).value=l,this},has:function(a){return"value"in o(a)},delete:function(a){return delete o(a).value}}}},{"./create-store.js":314}],317:[function(b,T,_){"use strict";var a,l;T.exports=(a=function(){return function(a,l,i,v,h,s){var d=a[0],p=i[0],f=[0],g=p;v|=0;var m=0,u=p;for(m=0;m<d;++m){var w=l[v]-s,c=l[v+g]-s;w>=0!=c>=0&&h.push(f[0]+.5+.5*(w+c)/(w-c)),v+=u,++f[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),l={},function(i,v,h){var s=i.dtype,d=i.order,p=[s,d.join()].join(),f=l[p];return f||(l[p]=f=a([s,d])),f(i.shape.slice(0),i.data,i.stride,0|i.offset,v,h)})},{}],318:[function(b,T,_){"use strict";T.exports=function(o,a){var l=[];return a=+a||0,e(o.hi(o.shape[0]-1),l,a),l};var e=b("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)}},Tp=>{Tp(Tp.s=957)}]);